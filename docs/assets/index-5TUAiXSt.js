function FG(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Ug=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var P_={exports:{}},Ag={};var bR;function VG(){if(bR)return Ag;bR=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var l=null;if(a!==void 0&&(l=""+a),i.key!==void 0&&(l=""+i.key),"key"in i){a={};for(var f in i)f!=="key"&&(a[f]=i[f])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:l,ref:i!==void 0?i:null,props:a}}return Ag.Fragment=e,Ag.jsx=n,Ag.jsxs=n,Ag}var wR;function zG(){return wR||(wR=1,P_.exports=VG()),P_.exports}var O=zG(),D_={exports:{}},en={};var _R;function UG(){if(_R)return en;_R=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function R(de){return de===null||typeof de!="object"?null:(de=T&&de[T]||de["@@iterator"],typeof de=="function"?de:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,L={};function z(de,Ee,Xe){this.props=de,this.context=Ee,this.refs=L,this.updater=Xe||j}z.prototype.isReactComponent={},z.prototype.setState=function(de,Ee){if(typeof de!="object"&&typeof de!="function"&&de!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,de,Ee,"setState")},z.prototype.forceUpdate=function(de){this.updater.enqueueForceUpdate(this,de,"forceUpdate")};function $(){}$.prototype=z.prototype;function K(de,Ee,Xe){this.props=de,this.context=Ee,this.refs=L,this.updater=Xe||j}var J=K.prototype=new $;J.constructor=K,M(J,z.prototype),J.isPureReactComponent=!0;var ce=Array.isArray;function Z(){}var V={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function U(de,Ee,Xe){var Ge=Xe.ref;return{$$typeof:t,type:de,key:Ee,ref:Ge!==void 0?Ge:null,props:Xe}}function ae(de,Ee){return U(de.type,Ee,de.props)}function ie(de){return typeof de=="object"&&de!==null&&de.$$typeof===t}function Q(de){var Ee={"=":"=0",":":"=2"};return"$"+de.replace(/[=:]/g,function(Xe){return Ee[Xe]})}var ne=/\/+/g;function be(de,Ee){return typeof de=="object"&&de!==null&&de.key!=null?Q(""+de.key):Ee.toString(36)}function he(de){switch(de.status){case"fulfilled":return de.value;case"rejected":throw de.reason;default:switch(typeof de.status=="string"?de.then(Z,Z):(de.status="pending",de.then(function(Ee){de.status==="pending"&&(de.status="fulfilled",de.value=Ee)},function(Ee){de.status==="pending"&&(de.status="rejected",de.reason=Ee)})),de.status){case"fulfilled":return de.value;case"rejected":throw de.reason}}throw de}function ye(de,Ee,Xe,Ge,vt){var qe=typeof de;(qe==="undefined"||qe==="boolean")&&(de=null);var ze=!1;if(de===null)ze=!0;else switch(qe){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(de.$$typeof){case t:case e:ze=!0;break;case b:return ze=de._init,ye(ze(de._payload),Ee,Xe,Ge,vt)}}if(ze)return vt=vt(de),ze=Ge===""?"."+be(de,0):Ge,ce(vt)?(Xe="",ze!=null&&(Xe=ze.replace(ne,"$&/")+"/"),ye(vt,Ee,Xe,"",function(Oe){return Oe})):vt!=null&&(ie(vt)&&(vt=ae(vt,Xe+(vt.key==null||de&&de.key===vt.key?"":(""+vt.key).replace(ne,"$&/")+"/")+ze)),Ee.push(vt)),1;ze=0;var ct=Ge===""?".":Ge+":";if(ce(de))for(var Se=0;Se<de.length;Se++)Ge=de[Se],qe=ct+be(Ge,Se),ze+=ye(Ge,Ee,Xe,qe,vt);else if(Se=R(de),typeof Se=="function")for(de=Se.call(de),Se=0;!(Ge=de.next()).done;)Ge=Ge.value,qe=ct+be(Ge,Se++),ze+=ye(Ge,Ee,Xe,qe,vt);else if(qe==="object"){if(typeof de.then=="function")return ye(he(de),Ee,Xe,Ge,vt);throw Ee=String(de),Error("Objects are not valid as a React child (found: "+(Ee==="[object Object]"?"object with keys {"+Object.keys(de).join(", ")+"}":Ee)+"). If you meant to render a collection of children, use an array instead.")}return ze}function we(de,Ee,Xe){if(de==null)return de;var Ge=[],vt=0;return ye(de,Ge,"","",function(qe){return Ee.call(Xe,qe,vt++)}),Ge}function $e(de){if(de._status===-1){var Ee=de._result;Ee=Ee(),Ee.then(function(Xe){(de._status===0||de._status===-1)&&(de._status=1,de._result=Xe)},function(Xe){(de._status===0||de._status===-1)&&(de._status=2,de._result=Xe)}),de._status===-1&&(de._status=0,de._result=Ee)}if(de._status===1)return de._result.default;throw de._result}var et=typeof reportError=="function"?reportError:function(de){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof de=="object"&&de!==null&&typeof de.message=="string"?String(de.message):String(de),error:de});if(!window.dispatchEvent(Ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",de);return}console.error(de)},rt={map:we,forEach:function(de,Ee,Xe){we(de,function(){Ee.apply(this,arguments)},Xe)},count:function(de){var Ee=0;return we(de,function(){Ee++}),Ee},toArray:function(de){return we(de,function(Ee){return Ee})||[]},only:function(de){if(!ie(de))throw Error("React.Children.only expected to receive a single React element child.");return de}};return en.Activity=_,en.Children=rt,en.Component=z,en.Fragment=n,en.Profiler=i,en.PureComponent=K,en.StrictMode=r,en.Suspense=m,en.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,en.__COMPILER_RUNTIME={__proto__:null,c:function(de){return V.H.useMemoCache(de)}},en.cache=function(de){return function(){return de.apply(null,arguments)}},en.cacheSignal=function(){return null},en.cloneElement=function(de,Ee,Xe){if(de==null)throw Error("The argument must be a React element, but you passed "+de+".");var Ge=M({},de.props),vt=de.key;if(Ee!=null)for(qe in Ee.key!==void 0&&(vt=""+Ee.key),Ee)!W.call(Ee,qe)||qe==="key"||qe==="__self"||qe==="__source"||qe==="ref"&&Ee.ref===void 0||(Ge[qe]=Ee[qe]);var qe=arguments.length-2;if(qe===1)Ge.children=Xe;else if(1<qe){for(var ze=Array(qe),ct=0;ct<qe;ct++)ze[ct]=arguments[ct+2];Ge.children=ze}return U(de.type,vt,Ge)},en.createContext=function(de){return de={$$typeof:l,_currentValue:de,_currentValue2:de,_threadCount:0,Provider:null,Consumer:null},de.Provider=de,de.Consumer={$$typeof:a,_context:de},de},en.createElement=function(de,Ee,Xe){var Ge,vt={},qe=null;if(Ee!=null)for(Ge in Ee.key!==void 0&&(qe=""+Ee.key),Ee)W.call(Ee,Ge)&&Ge!=="key"&&Ge!=="__self"&&Ge!=="__source"&&(vt[Ge]=Ee[Ge]);var ze=arguments.length-2;if(ze===1)vt.children=Xe;else if(1<ze){for(var ct=Array(ze),Se=0;Se<ze;Se++)ct[Se]=arguments[Se+2];vt.children=ct}if(de&&de.defaultProps)for(Ge in ze=de.defaultProps,ze)vt[Ge]===void 0&&(vt[Ge]=ze[Ge]);return U(de,qe,vt)},en.createRef=function(){return{current:null}},en.forwardRef=function(de){return{$$typeof:f,render:de}},en.isValidElement=ie,en.lazy=function(de){return{$$typeof:b,_payload:{_status:-1,_result:de},_init:$e}},en.memo=function(de,Ee){return{$$typeof:p,type:de,compare:Ee===void 0?null:Ee}},en.startTransition=function(de){var Ee=V.T,Xe={};V.T=Xe;try{var Ge=de(),vt=V.S;vt!==null&&vt(Xe,Ge),typeof Ge=="object"&&Ge!==null&&typeof Ge.then=="function"&&Ge.then(Z,et)}catch(qe){et(qe)}finally{Ee!==null&&Xe.types!==null&&(Ee.types=Xe.types),V.T=Ee}},en.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},en.use=function(de){return V.H.use(de)},en.useActionState=function(de,Ee,Xe){return V.H.useActionState(de,Ee,Xe)},en.useCallback=function(de,Ee){return V.H.useCallback(de,Ee)},en.useContext=function(de){return V.H.useContext(de)},en.useDebugValue=function(){},en.useDeferredValue=function(de,Ee){return V.H.useDeferredValue(de,Ee)},en.useEffect=function(de,Ee){return V.H.useEffect(de,Ee)},en.useEffectEvent=function(de){return V.H.useEffectEvent(de)},en.useId=function(){return V.H.useId()},en.useImperativeHandle=function(de,Ee,Xe){return V.H.useImperativeHandle(de,Ee,Xe)},en.useInsertionEffect=function(de,Ee){return V.H.useInsertionEffect(de,Ee)},en.useLayoutEffect=function(de,Ee){return V.H.useLayoutEffect(de,Ee)},en.useMemo=function(de,Ee){return V.H.useMemo(de,Ee)},en.useOptimistic=function(de,Ee){return V.H.useOptimistic(de,Ee)},en.useReducer=function(de,Ee,Xe){return V.H.useReducer(de,Ee,Xe)},en.useRef=function(de){return V.H.useRef(de)},en.useState=function(de){return V.H.useState(de)},en.useSyncExternalStore=function(de,Ee,Xe){return V.H.useSyncExternalStore(de,Ee,Xe)},en.useTransition=function(){return V.H.useTransition()},en.version="19.2.4",en}var ER;function pm(){return ER||(ER=1,D_.exports=UG()),D_.exports}var D=pm();const qg=Pl(D),qG=FG({__proto__:null,default:qg},[D]);var k_={exports:{}},Sg={},M_={exports:{}},j_={};var AR;function GG(){return AR||(AR=1,(function(t){function e(ye,we){var $e=ye.length;ye.push(we);e:for(;0<$e;){var et=$e-1>>>1,rt=ye[et];if(0<i(rt,we))ye[et]=we,ye[$e]=rt,$e=et;else break e}}function n(ye){return ye.length===0?null:ye[0]}function r(ye){if(ye.length===0)return null;var we=ye[0],$e=ye.pop();if($e!==we){ye[0]=$e;e:for(var et=0,rt=ye.length,de=rt>>>1;et<de;){var Ee=2*(et+1)-1,Xe=ye[Ee],Ge=Ee+1,vt=ye[Ge];if(0>i(Xe,$e))Ge<rt&&0>i(vt,Xe)?(ye[et]=vt,ye[Ge]=$e,et=Ge):(ye[et]=Xe,ye[Ee]=$e,et=Ee);else if(Ge<rt&&0>i(vt,$e))ye[et]=vt,ye[Ge]=$e,et=Ge;else break e}}return we}function i(ye,we){var $e=ye.sortIndex-we.sortIndex;return $e!==0?$e:ye.id-we.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,f=l.now();t.unstable_now=function(){return l.now()-f}}var m=[],p=[],b=1,_=null,T=3,R=!1,j=!1,M=!1,L=!1,z=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function J(ye){for(var we=n(p);we!==null;){if(we.callback===null)r(p);else if(we.startTime<=ye)r(p),we.sortIndex=we.expirationTime,e(m,we);else break;we=n(p)}}function ce(ye){if(M=!1,J(ye),!j)if(n(m)!==null)j=!0,Z||(Z=!0,Q());else{var we=n(p);we!==null&&he(ce,we.startTime-ye)}}var Z=!1,V=-1,W=5,U=-1;function ae(){return L?!0:!(t.unstable_now()-U<W)}function ie(){if(L=!1,Z){var ye=t.unstable_now();U=ye;var we=!0;try{e:{j=!1,M&&(M=!1,$(V),V=-1),R=!0;var $e=T;try{t:{for(J(ye),_=n(m);_!==null&&!(_.expirationTime>ye&&ae());){var et=_.callback;if(typeof et=="function"){_.callback=null,T=_.priorityLevel;var rt=et(_.expirationTime<=ye);if(ye=t.unstable_now(),typeof rt=="function"){_.callback=rt,J(ye),we=!0;break t}_===n(m)&&r(m),J(ye)}else r(m);_=n(m)}if(_!==null)we=!0;else{var de=n(p);de!==null&&he(ce,de.startTime-ye),we=!1}}break e}finally{_=null,T=$e,R=!1}we=void 0}}finally{we?Q():Z=!1}}}var Q;if(typeof K=="function")Q=function(){K(ie)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,be=ne.port2;ne.port1.onmessage=ie,Q=function(){be.postMessage(null)}}else Q=function(){z(ie,0)};function he(ye,we){V=z(function(){ye(t.unstable_now())},we)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ye){ye.callback=null},t.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<ye?Math.floor(1e3/ye):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(ye){switch(T){case 1:case 2:case 3:var we=3;break;default:we=T}var $e=T;T=we;try{return ye()}finally{T=$e}},t.unstable_requestPaint=function(){L=!0},t.unstable_runWithPriority=function(ye,we){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var $e=T;T=ye;try{return we()}finally{T=$e}},t.unstable_scheduleCallback=function(ye,we,$e){var et=t.unstable_now();switch(typeof $e=="object"&&$e!==null?($e=$e.delay,$e=typeof $e=="number"&&0<$e?et+$e:et):$e=et,ye){case 1:var rt=-1;break;case 2:rt=250;break;case 5:rt=1073741823;break;case 4:rt=1e4;break;default:rt=5e3}return rt=$e+rt,ye={id:b++,callback:we,priorityLevel:ye,startTime:$e,expirationTime:rt,sortIndex:-1},$e>et?(ye.sortIndex=$e,e(p,ye),n(m)===null&&ye===n(p)&&(M?($(V),V=-1):M=!0,he(ce,$e-et))):(ye.sortIndex=rt,e(m,ye),j||R||(j=!0,Z||(Z=!0,Q()))),ye},t.unstable_shouldYield=ae,t.unstable_wrapCallback=function(ye){var we=T;return function(){var $e=T;T=we;try{return ye.apply(this,arguments)}finally{T=$e}}}})(j_)),j_}var SR;function HG(){return SR||(SR=1,M_.exports=GG()),M_.exports}var L_={exports:{}},Qa={};var TR;function KG(){if(TR)return Qa;TR=1;var t=pm();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(m,p,b){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:_==null?null:""+_,children:m,containerInfo:p,implementation:b}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Qa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Qa.createPortal=function(m,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(m,p,null,b)},Qa.flushSync=function(m){var p=l.T,b=r.p;try{if(l.T=null,r.p=2,m)return m()}finally{l.T=p,r.p=b,r.d.f()}},Qa.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},Qa.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},Qa.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var b=p.as,_=f(b,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:R}):b==="script"&&r.d.X(m,{crossOrigin:_,integrity:T,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Qa.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=f(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},Qa.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,_=f(b,p.crossOrigin);r.d.L(m,b,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Qa.preloadModule=function(m,p){if(typeof m=="string")if(p){var b=f(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},Qa.requestFormReset=function(m){r.d.r(m)},Qa.unstable_batchedUpdates=function(m,p){return m(p)},Qa.useFormState=function(m,p,b){return l.H.useFormState(m,p,b)},Qa.useFormStatus=function(){return l.H.useHostTransitionStatus()},Qa.version="19.2.4",Qa}var IR;function y5(){if(IR)return L_.exports;IR=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),L_.exports=KG(),L_.exports}var CR;function WG(){if(CR)return Sg;CR=1;var t=HG(),e=pm(),n=y5();function r(s){var u="https://react.dev/errors/"+s;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+s+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var u=s,g=s;if(s.alternate)for(;u.return;)u=u.return;else{s=u;do u=s,(u.flags&4098)!==0&&(g=u.return),s=u.return;while(s)}return u.tag===3?g:null}function l(s){if(s.tag===13){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function f(s){if(s.tag===31){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function m(s){if(a(s)!==s)throw Error(r(188))}function p(s){var u=s.alternate;if(!u){if(u=a(s),u===null)throw Error(r(188));return u!==s?null:s}for(var g=s,w=u;;){var C=g.return;if(C===null)break;var P=C.alternate;if(P===null){if(w=C.return,w!==null){g=w;continue}break}if(C.child===P.child){for(P=C.child;P;){if(P===g)return m(C),s;if(P===w)return m(C),u;P=P.sibling}throw Error(r(188))}if(g.return!==w.return)g=C,w=P;else{for(var q=!1,ee=C.child;ee;){if(ee===g){q=!0,g=C,w=P;break}if(ee===w){q=!0,w=C,g=P;break}ee=ee.sibling}if(!q){for(ee=P.child;ee;){if(ee===g){q=!0,g=P,w=C;break}if(ee===w){q=!0,w=P,g=C;break}ee=ee.sibling}if(!q)throw Error(r(189))}}if(g.alternate!==w)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?s:u}function b(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s;for(s=s.child;s!==null;){if(u=b(s),u!==null)return u;s=s.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),K=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function Q(s){return s===null||typeof s!="object"?null:(s=ie&&s[ie]||s["@@iterator"],typeof s=="function"?s:null)}var ne=Symbol.for("react.client.reference");function be(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ne?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case M:return"Fragment";case z:return"Profiler";case L:return"StrictMode";case ce:return"Suspense";case Z:return"SuspenseList";case U:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case j:return"Portal";case K:return s.displayName||"Context";case $:return(s._context.displayName||"Context")+".Consumer";case J:var u=s.render;return s=s.displayName,s||(s=u.displayName||u.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case V:return u=s.displayName||null,u!==null?u:be(s.type)||"Memo";case W:u=s._payload,s=s._init;try{return be(s(u))}catch{}}return null}var he=Array.isArray,ye=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$e={pending:!1,data:null,method:null,action:null},et=[],rt=-1;function de(s){return{current:s}}function Ee(s){0>rt||(s.current=et[rt],et[rt]=null,rt--)}function Xe(s,u){rt++,et[rt]=s.current,s.current=u}var Ge=de(null),vt=de(null),qe=de(null),ze=de(null);function ct(s,u){switch(Xe(qe,u),Xe(vt,s),Xe(Ge,null),u.nodeType){case 9:case 11:s=(s=u.documentElement)&&(s=s.namespaceURI)?qN(s):0;break;default:if(s=u.tagName,u=u.namespaceURI)u=qN(u),s=GN(u,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Ee(Ge),Xe(Ge,s)}function Se(){Ee(Ge),Ee(vt),Ee(qe)}function Oe(s){s.memoizedState!==null&&Xe(ze,s);var u=Ge.current,g=GN(u,s.type);u!==g&&(Xe(vt,s),Xe(Ge,g))}function ft(s){vt.current===s&&(Ee(Ge),Ee(vt)),ze.current===s&&(Ee(ze),bg._currentValue=$e)}var Fe,pt;function Lt(s){if(Fe===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);Fe=u&&u[1]||"",pt=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fe+s+pt}var cn=!1;function Ln(s,u){if(!s||cn)return"";cn=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(u){var Qe=function(){throw Error()};if(Object.defineProperty(Qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Qe,[])}catch(Ve){var Le=Ve}Reflect.construct(s,[],Qe)}else{try{Qe.call()}catch(Ve){Le=Ve}s.call(Qe.prototype)}}else{try{throw Error()}catch(Ve){Le=Ve}(Qe=s())&&typeof Qe.catch=="function"&&Qe.catch(function(){})}}catch(Ve){if(Ve&&Le&&typeof Ve.stack=="string")return[Ve.stack,Le.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=w.DetermineComponentFrameRoot(),q=P[0],ee=P[1];if(q&&ee){var pe=q.split(`
`),De=ee.split(`
`);for(C=w=0;w<pe.length&&!pe[w].includes("DetermineComponentFrameRoot");)w++;for(;C<De.length&&!De[C].includes("DetermineComponentFrameRoot");)C++;if(w===pe.length||C===De.length)for(w=pe.length-1,C=De.length-1;1<=w&&0<=C&&pe[w]!==De[C];)C--;for(;1<=w&&0<=C;w--,C--)if(pe[w]!==De[C]){if(w!==1||C!==1)do if(w--,C--,0>C||pe[w]!==De[C]){var Ue=`
`+pe[w].replace(" at new "," at ");return s.displayName&&Ue.includes("<anonymous>")&&(Ue=Ue.replace("<anonymous>",s.displayName)),Ue}while(1<=w&&0<=C);break}}}finally{cn=!1,Error.prepareStackTrace=g}return(g=s?s.displayName||s.name:"")?Lt(g):""}function ot(s,u){switch(s.tag){case 26:case 27:case 5:return Lt(s.type);case 16:return Lt("Lazy");case 13:return s.child!==u&&u!==null?Lt("Suspense Fallback"):Lt("Suspense");case 19:return Lt("SuspenseList");case 0:case 15:return Ln(s.type,!1);case 11:return Ln(s.type.render,!1);case 1:return Ln(s.type,!0);case 31:return Lt("Activity");default:return""}}function Vt(s){try{var u="",g=null;do u+=ot(s,g),g=s,s=s.return;while(s);return u}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}var xt=Object.prototype.hasOwnProperty,$t=t.unstable_scheduleCallback,it=t.unstable_cancelCallback,na=t.unstable_shouldYield,zs=t.unstable_requestPaint,hr=t.unstable_now,ba=t.unstable_getCurrentPriorityLevel,$n=t.unstable_ImmediatePriority,Fa=t.unstable_UserBlockingPriority,bi=t.unstable_NormalPriority,Lr=t.unstable_LowPriority,Po=t.unstable_IdlePriority,gs=t.log,ps=t.unstable_setDisableYieldValue,In=null,at=null;function fn(s){if(typeof gs=="function"&&ps(s),at&&typeof at.setStrictMode=="function")try{at.setStrictMode(In,s)}catch{}}var Je=Math.clz32?Math.clz32:Us,Fn=Math.log,Oi=Math.LN2;function Us(s){return s>>>=0,s===0?32:31-(Fn(s)/Oi|0)|0}var ht=256,tn=262144,Yn=4194304;function wa(s){var u=s&42;if(u!==0)return u;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Va(s,u,g){var w=s.pendingLanes;if(w===0)return 0;var C=0,P=s.suspendedLanes,q=s.pingedLanes;s=s.warmLanes;var ee=w&134217727;return ee!==0?(w=ee&~P,w!==0?C=wa(w):(q&=ee,q!==0?C=wa(q):g||(g=ee&~s,g!==0&&(C=wa(g))))):(ee=w&~P,ee!==0?C=wa(ee):q!==0?C=wa(q):g||(g=w&~s,g!==0&&(C=wa(g)))),C===0?0:u!==0&&u!==C&&(u&P)===0&&(P=C&-C,g=u&-u,P>=g||P===32&&(g&4194048)!==0)?u:C}function Er(s,u){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&u)===0}function Ll(s,u){switch(s){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ii(){var s=Yn;return Yn<<=1,(Yn&62914560)===0&&(Yn=4194304),s}function Hr(s){for(var u=[],g=0;31>g;g++)u.push(s);return u}function qi(s,u){s.pendingLanes|=u,u!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ra(s,u,g,w,C,P){var q=s.pendingLanes;s.pendingLanes=g,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=g,s.entangledLanes&=g,s.errorRecoveryDisabledLanes&=g,s.shellSuspendCounter=0;var ee=s.entanglements,pe=s.expirationTimes,De=s.hiddenUpdates;for(g=q&~g;0<g;){var Ue=31-Je(g),Qe=1<<Ue;ee[Ue]=0,pe[Ue]=-1;var Le=De[Ue];if(Le!==null)for(De[Ue]=null,Ue=0;Ue<Le.length;Ue++){var Ve=Le[Ue];Ve!==null&&(Ve.lane&=-536870913)}g&=~Qe}w!==0&&ys(s,w,0),P!==0&&C===0&&s.tag!==0&&(s.suspendedLanes|=P&~(q&~u))}function ys(s,u,g){s.pendingLanes|=u,s.suspendedLanes&=~u;var w=31-Je(u);s.entangledLanes|=u,s.entanglements[w]=s.entanglements[w]|1073741824|g&261930}function _n(s,u){var g=s.entangledLanes|=u;for(s=s.entanglements;g;){var w=31-Je(g),C=1<<w;C&u|s[w]&u&&(s[w]|=u),g&=~C}}function mr(s,u){var g=u&-u;return g=(g&42)!==0?1:Kr(g),(g&(s.suspendedLanes|u))!==0?0:g}function Kr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ci(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function fi(){var s=we.p;return s!==0?s:(s=window.event,s===void 0?32:hR(s.type))}function mt(s,u){var g=we.p;try{return we.p=s,u()}finally{we.p=g}}var Ni=Math.random().toString(36).slice(2),Vn="__reactFiber$"+Ni,gn="__reactProps$"+Ni,Nr="__reactContainer$"+Ni,za="__reactEvents$"+Ni,Zo="__reactListeners$"+Ni,Wr="__reactHandles$"+Ni,Bl="__reactResources$"+Ni,Ri="__reactMarker$"+Ni;function Pi(s){delete s[Vn],delete s[gn],delete s[za],delete s[Zo],delete s[Wr]}function Qn(s){var u=s[Vn];if(u)return u;for(var g=s.parentNode;g;){if(u=g[Nr]||g[Vn]){if(g=u.alternate,u.child!==null||g!==null&&g.child!==null)for(s=QN(s);s!==null;){if(g=s[Vn])return g;s=QN(s)}return u}s=g,g=s.parentNode}return null}function Mt(s){if(s=s[Vn]||s[Nr]){var u=s.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return s}return null}function $r(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s.stateNode;throw Error(r(33))}function rr(s){var u=s[Bl];return u||(u=s[Bl]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Ar(s){s[Ri]=!0}var He=new Set,uo={};function Cn(s,u){wi(s,u),wi(s+"Capture",u)}function wi(s,u){for(uo[s]=u,s=0;s<u.length;s++)He.add(u[s])}var ss=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yn={},ln={};function nn(s){return xt.call(ln,s)?!0:xt.call(yn,s)?!1:ss.test(s)?ln[s]=!0:(yn[s]=!0,!1)}function Zt(s,u,g){if(nn(u))if(g===null)s.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":s.removeAttribute(u);return;case"boolean":var w=u.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){s.removeAttribute(u);return}}s.setAttribute(u,""+g)}}function Di(s,u,g){if(g===null)s.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttribute(u,""+g)}}function Sr(s,u,g,w){if(w===null)s.removeAttribute(g);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(g);return}s.setAttributeNS(u,g,""+w)}}function rn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ai(s){var u=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Jo(s,u,g){var w=Object.getOwnPropertyDescriptor(s.constructor.prototype,u);if(!s.hasOwnProperty(u)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var C=w.get,P=w.set;return Object.defineProperty(s,u,{configurable:!0,get:function(){return C.call(this)},set:function(q){g=""+q,P.call(this,q)}}),Object.defineProperty(s,u,{enumerable:w.enumerable}),{getValue:function(){return g},setValue:function(q){g=""+q},stopTracking:function(){s._valueTracker=null,delete s[u]}}}}function Ut(s){if(!s._valueTracker){var u=ai(s)?"checked":"value";s._valueTracker=Jo(s,u,""+s[u])}}function Gi(s){if(!s)return!1;var u=s._valueTracker;if(!u)return!0;var g=u.getValue(),w="";return s&&(w=ai(s)?s.checked?"true":"false":s.value),s=w,s!==g?(u.setValue(s),!0):!1}function vn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ki=/[\n"\\]/g;function Yt(s){return s.replace(ki,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Zn(s,u,g,w,C,P,q,ee){s.name="",q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?s.type=q:s.removeAttribute("type"),u!=null?q==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+rn(u)):s.value!==""+rn(u)&&(s.value=""+rn(u)):q!=="submit"&&q!=="reset"||s.removeAttribute("value"),u!=null?ue(s,q,rn(u)):g!=null?ue(s,q,rn(g)):w!=null&&s.removeAttribute("value"),C==null&&P!=null&&(s.defaultChecked=!!P),C!=null&&(s.checked=C&&typeof C!="function"&&typeof C!="symbol"),ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"?s.name=""+rn(ee):s.removeAttribute("name")}function Ie(s,u,g,w,C,P,q,ee){if(P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(s.type=P),u!=null||g!=null){if(!(P!=="submit"&&P!=="reset"||u!=null)){Ut(s);return}g=g!=null?""+rn(g):"",u=u!=null?""+rn(u):g,ee||u===s.value||(s.value=u),s.defaultValue=u}w=w??C,w=typeof w!="function"&&typeof w!="symbol"&&!!w,s.checked=ee?s.checked:!!w,s.defaultChecked=!!w,q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(s.name=q),Ut(s)}function ue(s,u,g){u==="number"&&vn(s.ownerDocument)===s||s.defaultValue===""+g||(s.defaultValue=""+g)}function At(s,u,g,w){if(s=s.options,u){u={};for(var C=0;C<g.length;C++)u["$"+g[C]]=!0;for(g=0;g<s.length;g++)C=u.hasOwnProperty("$"+s[g].value),s[g].selected!==C&&(s[g].selected=C),C&&w&&(s[g].defaultSelected=!0)}else{for(g=""+rn(g),u=null,C=0;C<s.length;C++){if(s[C].value===g){s[C].selected=!0,w&&(s[C].defaultSelected=!0);return}u!==null||s[C].disabled||(u=s[C])}u!==null&&(u.selected=!0)}}function Rr(s,u,g){if(u!=null&&(u=""+rn(u),u!==s.value&&(s.value=u),g==null)){s.defaultValue!==u&&(s.defaultValue=u);return}s.defaultValue=g!=null?""+rn(g):""}function Pr(s,u,g,w){if(u==null){if(w!=null){if(g!=null)throw Error(r(92));if(he(w)){if(1<w.length)throw Error(r(93));w=w[0]}g=w}g==null&&(g=""),u=g}g=rn(u),s.defaultValue=g,w=s.textContent,w===g&&w!==""&&w!==null&&(s.value=w),Ut(s)}function Hi(s,u){if(u){var g=s.firstChild;if(g&&g===s.lastChild&&g.nodeType===3){g.nodeValue=u;return}}s.textContent=u}var el=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qt(s,u,g){var w=u.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?w?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="":w?s.setProperty(u,g):typeof g!="number"||g===0||el.has(u)?u==="float"?s.cssFloat=g:s[u]=(""+g).trim():s[u]=g+"px"}function Rt(s,u,g){if(u!=null&&typeof u!="object")throw Error(r(62));if(s=s.style,g!=null){for(var w in g)!g.hasOwnProperty(w)||u!=null&&u.hasOwnProperty(w)||(w.indexOf("--")===0?s.setProperty(w,""):w==="float"?s.cssFloat="":s[w]="");for(var C in u)w=u[C],u.hasOwnProperty(C)&&g[C]!==w&&qt(s,C,w)}else for(var P in u)u.hasOwnProperty(P)&&qt(s,P,u[P])}function zn(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _a(s){return Yr.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function _i(){}var ia=null;function Ea(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Jn=null,Mn=null;function Tr(s){var u=Mt(s);if(u&&(s=u.stateNode)){var g=s[gn]||null;e:switch(s=u.stateNode,u.type){case"input":if(Zn(s,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),u=g.name,g.type==="radio"&&u!=null){for(g=s;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Yt(""+u)+'"][type="radio"]'),u=0;u<g.length;u++){var w=g[u];if(w!==s&&w.form===s.form){var C=w[gn]||null;if(!C)throw Error(r(90));Zn(w,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(u=0;u<g.length;u++)w=g[u],w.form===s.form&&Gi(w)}break e;case"textarea":Rr(s,g.value,g.defaultValue);break e;case"select":u=g.value,u!=null&&At(s,!!g.multiple,u,!1)}}}var Pt=!1;function Ua(s,u,g){if(Pt)return s(u,g);Pt=!0;try{var w=s(u);return w}finally{if(Pt=!1,(Jn!==null||Mn!==null)&&(y1(),Jn&&(u=Jn,s=Mn,Mn=Jn=null,Tr(u),s)))for(u=0;u<s.length;u++)Tr(s[u])}}function Bt(s,u){var g=s.stateNode;if(g===null)return null;var w=g[gn]||null;if(w===null)return null;g=w[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(s=s.type,w=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!w;break e;default:s=!1}if(s)return null;if(g&&typeof g!="function")throw Error(r(231,u,typeof g));return g}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Do=!1;if(xn)try{var an={};Object.defineProperty(an,"passive",{get:function(){Do=!0}}),window.addEventListener("test",an,an),window.removeEventListener("test",an,an)}catch{Do=!1}var Aa=null,qa=null,qs=null;function Sa(){if(qs)return qs;var s,u=qa,g=u.length,w,C="value"in Aa?Aa.value:Aa.textContent,P=C.length;for(s=0;s<g&&u[s]===C[s];s++);var q=g-s;for(w=1;w<=q&&u[g-w]===C[P-w];w++);return qs=C.slice(s,1<w?1-w:void 0)}function Ta(s){var u=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&u===13&&(s=13)):s=u,s===10&&(s=13),32<=s||s===13?s:0}function aa(){return!0}function Ga(){return!1}function ir(s){function u(g,w,C,P,q){this._reactName=g,this._targetInst=C,this.type=w,this.nativeEvent=P,this.target=q,this.currentTarget=null;for(var ee in s)s.hasOwnProperty(ee)&&(g=s[ee],this[ee]=g?g(P):P[ee]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?aa:Ga,this.isPropagationStopped=Ga,this}return _(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=aa)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=aa)},persist:function(){},isPersistent:aa}),u}var Ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ir=ir(Ia),Ha=_({},Ia,{view:0,detail:0}),Gs=ir(Ha),os,tl,vs,nl=_({},Ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oa,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==vs&&(vs&&s.type==="mousemove"?(os=s.screenX-vs.screenX,tl=s.screenY-vs.screenY):tl=os=0,vs=s),os)},movementY:function(s){return"movementY"in s?s.movementY:tl}}),En=ir(nl),xs=_({},nl,{dataTransfer:0}),co=ir(xs),sa=_({},Ha,{relatedTarget:0}),bs=ir(sa),Me=_({},Ia,{animationName:0,elapsedTime:0,pseudoElement:0}),Xt=ir(Me),Dr=_({},Ia,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ka=ir(Dr),ko=_({},Ia,{data:0}),Wa=ir(ko),rl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},il={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Br={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function er(s){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(s):(s=Br[s])?!!u[s]:!1}function oa(){return er}var dn=_({},Ha,{key:function(s){if(s.key){var u=rl[s.key]||s.key;if(u!=="Unidentified")return u}return s.type==="keypress"?(s=Ta(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?il[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oa,charCode:function(s){return s.type==="keypress"?Ta(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ta(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ws=ir(dn),ls=_({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pn=ir(ls),S=_({},Ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oa}),B=ir(S),H=_({},Ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),se=ir(H),Te=_({},nl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Be=ir(Te),lt=_({},Ia,{newState:0,oldState:0}),Ht=ir(lt),kr=[9,13,27,32],bn=xn&&"CompositionEvent"in window,Un=null;xn&&"documentMode"in document&&(Un=document.documentMode);var Ca=xn&&"TextEvent"in window&&!Un,$a=xn&&(!bn||Un&&8<Un&&11>=Un),di=" ",Oa=!1;function fo(s,u){switch(s){case"keyup":return kr.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _s(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Mo=!1;function Hs(s,u){switch(s){case"compositionend":return _s(u);case"keypress":return u.which!==32?null:(Oa=!0,di);case"textInput":return s=u.data,s===di&&Oa?null:s;default:return null}}function Uu(s,u){if(Mo)return s==="compositionend"||!bn&&fo(s,u)?(s=Sa(),qs=qa=Aa=null,Mo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return $a&&u.locale!=="ko"?null:u.data;default:return null}}var Na={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vl(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u==="input"?!!Na[s.type]:u==="textarea"}function Ya(s,u,g,w){Jn?Mn?Mn.push(w):Mn=[w]:Jn=w,u=A1(u,"onChange"),0<u.length&&(g=new Ir("onChange","change",null,g,w),s.push({event:g,listeners:u}))}var al=null,jo=null;function Hm(s){LN(s,0)}function zl(s){var u=$r(s);if(Gi(u))return s}function la(s,u){if(s==="change")return u}var Es=!1;if(xn){var ar;if(xn){var As="oninput"in document;if(!As){var sn=document.createElement("div");sn.setAttribute("oninput","return;"),As=typeof sn.oninput=="function"}ar=As}else ar=!1;Es=ar&&(!document.documentMode||9<document.documentMode)}function Ul(){al&&(al.detachEvent("onpropertychange",Y),jo=al=null)}function Y(s){if(s.propertyName==="value"&&zl(jo)){var u=[];Ya(u,jo,s,Ea(s)),Ua(Hm,u)}}function o(s,u,g){s==="focusin"?(Ul(),al=u,jo=g,al.attachEvent("onpropertychange",Y)):s==="focusout"&&Ul()}function c(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return zl(jo)}function h(s,u){if(s==="click")return zl(u)}function y(s,u){if(s==="input"||s==="change")return zl(u)}function x(s,u){return s===u&&(s!==0||1/s===1/u)||s!==s&&u!==u}var E=typeof Object.is=="function"?Object.is:x;function d(s,u){if(E(s,u))return!0;if(typeof s!="object"||s===null||typeof u!="object"||u===null)return!1;var g=Object.keys(s),w=Object.keys(u);if(g.length!==w.length)return!1;for(w=0;w<g.length;w++){var C=g[w];if(!xt.call(u,C)||!E(s[C],u[C]))return!1}return!0}function v(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function A(s,u){var g=v(s);s=0;for(var w;g;){if(g.nodeType===3){if(w=s+g.textContent.length,s<=u&&w>=u)return{node:g,offset:u-s};s=w}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=v(g)}}function I(s,u){return s&&u?s===u?!0:s&&s.nodeType===3?!1:u&&u.nodeType===3?I(s,u.parentNode):"contains"in s?s.contains(u):s.compareDocumentPosition?!!(s.compareDocumentPosition(u)&16):!1:!1}function N(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var u=vn(s.document);u instanceof s.HTMLIFrameElement;){try{var g=typeof u.contentWindow.location.href=="string"}catch{g=!1}if(g)s=u.contentWindow;else break;u=vn(s.document)}return u}function k(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u&&(u==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||u==="textarea"||s.contentEditable==="true")}var F=xn&&"documentMode"in document&&11>=document.documentMode,G=null,X=null,re=null,te=!1;function oe(s,u,g){var w=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;te||G==null||G!==vn(w)||(w=G,"selectionStart"in w&&k(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),re&&d(re,w)||(re=w,w=A1(X,"onSelect"),0<w.length&&(u=new Ir("onSelect","select",null,u,g),s.push({event:u,listeners:w}),u.target=G)))}function fe(s,u){var g={};return g[s.toLowerCase()]=u.toLowerCase(),g["Webkit"+s]="webkit"+u,g["Moz"+s]="moz"+u,g}var le={animationend:fe("Animation","AnimationEnd"),animationiteration:fe("Animation","AnimationIteration"),animationstart:fe("Animation","AnimationStart"),transitionrun:fe("Transition","TransitionRun"),transitionstart:fe("Transition","TransitionStart"),transitioncancel:fe("Transition","TransitionCancel"),transitionend:fe("Transition","TransitionEnd")},ge={},me={};xn&&(me=document.createElement("div").style,"AnimationEvent"in window||(delete le.animationend.animation,delete le.animationiteration.animation,delete le.animationstart.animation),"TransitionEvent"in window||delete le.transitionend.transition);function _e(s){if(ge[s])return ge[s];if(!le[s])return s;var u=le[s],g;for(g in u)if(u.hasOwnProperty(g)&&g in me)return ge[s]=u[g];return s}var Ne=_e("animationend"),xe=_e("animationiteration"),je=_e("animationstart"),Ke=_e("transitionrun"),ut=_e("transitionstart"),dt=_e("transitioncancel"),tt=_e("transitionend"),wt=new Map,bt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bt.push("scrollEnd");function st(s,u){wt.set(s,u),Cn(u,[s])}var _t=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Qt=[],wn=0,Ft=0;function Jt(){for(var s=wn,u=Ft=wn=0;u<s;){var g=Qt[u];Qt[u++]=null;var w=Qt[u];Qt[u++]=null;var C=Qt[u];Qt[u++]=null;var P=Qt[u];if(Qt[u++]=null,w!==null&&C!==null){var q=w.pending;q===null?C.next=C:(C.next=q.next,q.next=C),w.pending=C}P!==0&&sl(g,C,P)}}function gr(s,u,g,w){Qt[wn++]=s,Qt[wn++]=u,Qt[wn++]=g,Qt[wn++]=w,Ft|=w,s.lanes|=w,s=s.alternate,s!==null&&(s.lanes|=w)}function Xa(s,u,g,w){return gr(s,u,g,w),qu(s)}function tr(s,u){return gr(s,null,null,u),qu(s)}function sl(s,u,g){s.lanes|=g;var w=s.alternate;w!==null&&(w.lanes|=g);for(var C=!1,P=s.return;P!==null;)P.childLanes|=g,w=P.alternate,w!==null&&(w.childLanes|=g),P.tag===22&&(s=P.stateNode,s===null||s._visibility&1||(C=!0)),s=P,P=P.return;return s.tag===3?(P=s.stateNode,C&&u!==null&&(C=31-Je(g),s=P.hiddenUpdates,w=s[C],w===null?s[C]=[u]:w.push(u),u.lane=g|536870912),P):null}function qu(s){if(50<hg)throw hg=0,n_=null,Error(r(185));for(var u=s.return;u!==null;)s=u,u=s.return;return s.tag===3?s.stateNode:null}var jd={};function _q(s,u,g,w){this.tag=s,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(s,u,g,w){return new _q(s,u,g,w)}function $b(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ql(s,u){var g=s.alternate;return g===null?(g=Ks(s.tag,u,s.key,s.mode),g.elementType=s.elementType,g.type=s.type,g.stateNode=s.stateNode,g.alternate=s,s.alternate=g):(g.pendingProps=u,g.type=s.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=s.flags&65011712,g.childLanes=s.childLanes,g.lanes=s.lanes,g.child=s.child,g.memoizedProps=s.memoizedProps,g.memoizedState=s.memoizedState,g.updateQueue=s.updateQueue,u=s.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=s.sibling,g.index=s.index,g.ref=s.ref,g.refCleanup=s.refCleanup,g}function xO(s,u){s.flags&=65011714;var g=s.alternate;return g===null?(s.childLanes=0,s.lanes=u,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=g.childLanes,s.lanes=g.lanes,s.child=g.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=g.memoizedProps,s.memoizedState=g.memoizedState,s.updateQueue=g.updateQueue,s.type=g.type,u=g.dependencies,s.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),s}function z0(s,u,g,w,C,P){var q=0;if(w=s,typeof s=="function")$b(s)&&(q=1);else if(typeof s=="string")q=IG(s,g,Ge.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case U:return s=Ks(31,g,u,C),s.elementType=U,s.lanes=P,s;case M:return hf(g.children,C,P,u);case L:q=8,C|=24;break;case z:return s=Ks(12,g,u,C|2),s.elementType=z,s.lanes=P,s;case ce:return s=Ks(13,g,u,C),s.elementType=ce,s.lanes=P,s;case Z:return s=Ks(19,g,u,C),s.elementType=Z,s.lanes=P,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case K:q=10;break e;case $:q=9;break e;case J:q=11;break e;case V:q=14;break e;case W:q=16,w=null;break e}q=29,g=Error(r(130,s===null?"null":typeof s,"")),w=null}return u=Ks(q,g,u,C),u.elementType=s,u.type=w,u.lanes=P,u}function hf(s,u,g,w){return s=Ks(7,s,w,u),s.lanes=g,s}function Yb(s,u,g){return s=Ks(6,s,null,u),s.lanes=g,s}function bO(s){var u=Ks(18,null,null,0);return u.stateNode=s,u}function Xb(s,u,g){return u=Ks(4,s.children!==null?s.children:[],s.key,u),u.lanes=g,u.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},u}var wO=new WeakMap;function ho(s,u){if(typeof s=="object"&&s!==null){var g=wO.get(s);return g!==void 0?g:(u={value:s,source:u,stack:Vt(u)},wO.set(s,u),u)}return{value:s,source:u,stack:Vt(u)}}var Ld=[],Bd=0,U0=null,Km=0,mo=[],go=0,Gu=null,ol=1,ll="";function Gl(s,u){Ld[Bd++]=Km,Ld[Bd++]=U0,U0=s,Km=u}function _O(s,u,g){mo[go++]=ol,mo[go++]=ll,mo[go++]=Gu,Gu=s;var w=ol;s=ll;var C=32-Je(w)-1;w&=~(1<<C),g+=1;var P=32-Je(u)+C;if(30<P){var q=C-C%5;P=(w&(1<<q)-1).toString(32),w>>=q,C-=q,ol=1<<32-Je(u)+C|g<<C|w,ll=P+s}else ol=1<<P|g<<C|w,ll=s}function Qb(s){s.return!==null&&(Gl(s,1),_O(s,1,0))}function Zb(s){for(;s===U0;)U0=Ld[--Bd],Ld[Bd]=null,Km=Ld[--Bd],Ld[Bd]=null;for(;s===Gu;)Gu=mo[--go],mo[go]=null,ll=mo[--go],mo[go]=null,ol=mo[--go],mo[go]=null}function EO(s,u){mo[go++]=ol,mo[go++]=ll,mo[go++]=Gu,ol=u.id,ll=u.overflow,Gu=s}var Ra=null,Fr=null,jn=!1,Hu=null,po=!1,Jb=Error(r(519));function Ku(s){var u=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wm(ho(u,s)),Jb}function AO(s){var u=s.stateNode,g=s.type,w=s.memoizedProps;switch(u[Vn]=s,u[gn]=w,g){case"dialog":Nn("cancel",u),Nn("close",u);break;case"iframe":case"object":case"embed":Nn("load",u);break;case"video":case"audio":for(g=0;g<gg.length;g++)Nn(gg[g],u);break;case"source":Nn("error",u);break;case"img":case"image":case"link":Nn("error",u),Nn("load",u);break;case"details":Nn("toggle",u);break;case"input":Nn("invalid",u),Ie(u,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0);break;case"select":Nn("invalid",u);break;case"textarea":Nn("invalid",u),Pr(u,w.value,w.defaultValue,w.children)}g=w.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||u.textContent===""+g||w.suppressHydrationWarning===!0||zN(u.textContent,g)?(w.popover!=null&&(Nn("beforetoggle",u),Nn("toggle",u)),w.onScroll!=null&&Nn("scroll",u),w.onScrollEnd!=null&&Nn("scrollend",u),w.onClick!=null&&(u.onclick=_i),u=!0):u=!1,u||Ku(s,!0)}function SO(s){for(Ra=s.return;Ra;)switch(Ra.tag){case 5:case 31:case 13:po=!1;return;case 27:case 3:po=!0;return;default:Ra=Ra.return}}function Fd(s){if(s!==Ra)return!1;if(!jn)return SO(s),jn=!0,!1;var u=s.tag,g;if((g=u!==3&&u!==27)&&((g=u===5)&&(g=s.type,g=!(g!=="form"&&g!=="button")||y_(s.type,s.memoizedProps)),g=!g),g&&Fr&&Ku(s),SO(s),u===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Fr=XN(s)}else if(u===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Fr=XN(s)}else u===27?(u=Fr,sc(s.type)?(s=__,__=null,Fr=s):Fr=u):Fr=Ra?vo(s.stateNode.nextSibling):null;return!0}function mf(){Fr=Ra=null,jn=!1}function ew(){var s=Hu;return s!==null&&(Cs===null?Cs=s:Cs.push.apply(Cs,s),Hu=null),s}function Wm(s){Hu===null?Hu=[s]:Hu.push(s)}var tw=de(null),gf=null,Hl=null;function Wu(s,u,g){Xe(tw,u._currentValue),u._currentValue=g}function Kl(s){s._currentValue=tw.current,Ee(tw)}function nw(s,u,g){for(;s!==null;){var w=s.alternate;if((s.childLanes&u)!==u?(s.childLanes|=u,w!==null&&(w.childLanes|=u)):w!==null&&(w.childLanes&u)!==u&&(w.childLanes|=u),s===g)break;s=s.return}}function rw(s,u,g,w){var C=s.child;for(C!==null&&(C.return=s);C!==null;){var P=C.dependencies;if(P!==null){var q=C.child;P=P.firstContext;e:for(;P!==null;){var ee=P;P=C;for(var pe=0;pe<u.length;pe++)if(ee.context===u[pe]){P.lanes|=g,ee=P.alternate,ee!==null&&(ee.lanes|=g),nw(P.return,g,s),w||(q=null);break e}P=ee.next}}else if(C.tag===18){if(q=C.return,q===null)throw Error(r(341));q.lanes|=g,P=q.alternate,P!==null&&(P.lanes|=g),nw(q,g,s),q=null}else q=C.child;if(q!==null)q.return=C;else for(q=C;q!==null;){if(q===s){q=null;break}if(C=q.sibling,C!==null){C.return=q.return,q=C;break}q=q.return}C=q}}function Vd(s,u,g,w){s=null;for(var C=u,P=!1;C!==null;){if(!P){if((C.flags&524288)!==0)P=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var q=C.alternate;if(q===null)throw Error(r(387));if(q=q.memoizedProps,q!==null){var ee=C.type;E(C.pendingProps.value,q.value)||(s!==null?s.push(ee):s=[ee])}}else if(C===ze.current){if(q=C.alternate,q===null)throw Error(r(387));q.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(s!==null?s.push(bg):s=[bg])}C=C.return}s!==null&&rw(u,s,g,w),u.flags|=262144}function q0(s){for(s=s.firstContext;s!==null;){if(!E(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function pf(s){gf=s,Hl=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Pa(s){return TO(gf,s)}function G0(s,u){return gf===null&&pf(s),TO(s,u)}function TO(s,u){var g=u._currentValue;if(u={context:u,memoizedValue:g,next:null},Hl===null){if(s===null)throw Error(r(308));Hl=u,s.dependencies={lanes:0,firstContext:u},s.flags|=524288}else Hl=Hl.next=u;return g}var Eq=typeof AbortController<"u"?AbortController:function(){var s=[],u=this.signal={aborted:!1,addEventListener:function(g,w){s.push(w)}};this.abort=function(){u.aborted=!0,s.forEach(function(g){return g()})}},Aq=t.unstable_scheduleCallback,Sq=t.unstable_NormalPriority,Mi={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function iw(){return{controller:new Eq,data:new Map,refCount:0}}function $m(s){s.refCount--,s.refCount===0&&Aq(Sq,function(){s.controller.abort()})}var Ym=null,aw=0,zd=0,Ud=null;function Tq(s,u){if(Ym===null){var g=Ym=[];aw=0,zd=l_(),Ud={status:"pending",value:void 0,then:function(w){g.push(w)}}}return aw++,u.then(IO,IO),u}function IO(){if(--aw===0&&Ym!==null){Ud!==null&&(Ud.status="fulfilled");var s=Ym;Ym=null,zd=0,Ud=null;for(var u=0;u<s.length;u++)(0,s[u])()}}function Iq(s,u){var g=[],w={status:"pending",value:null,reason:null,then:function(C){g.push(C)}};return s.then(function(){w.status="fulfilled",w.value=u;for(var C=0;C<g.length;C++)(0,g[C])(u)},function(C){for(w.status="rejected",w.reason=C,C=0;C<g.length;C++)(0,g[C])(void 0)}),w}var CO=ye.S;ye.S=function(s,u){fN=hr(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&Tq(s,u),CO!==null&&CO(s,u)};var yf=de(null);function sw(){var s=yf.current;return s!==null?s:Cr.pooledCache}function H0(s,u){u===null?Xe(yf,yf.current):Xe(yf,u.pool)}function OO(){var s=sw();return s===null?null:{parent:Mi._currentValue,pool:s}}var qd=Error(r(460)),ow=Error(r(474)),K0=Error(r(542)),W0={then:function(){}};function NO(s){return s=s.status,s==="fulfilled"||s==="rejected"}function RO(s,u,g){switch(g=s[g],g===void 0?s.push(u):g!==u&&(u.then(_i,_i),u=g),u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,DO(s),s;default:if(typeof u.status=="string")u.then(_i,_i);else{if(s=Cr,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=u,s.status="pending",s.then(function(w){if(u.status==="pending"){var C=u;C.status="fulfilled",C.value=w}},function(w){if(u.status==="pending"){var C=u;C.status="rejected",C.reason=w}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,DO(s),s}throw xf=u,qd}}function vf(s){try{var u=s._init;return u(s._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(xf=g,qd):g}}var xf=null;function PO(){if(xf===null)throw Error(r(459));var s=xf;return xf=null,s}function DO(s){if(s===qd||s===K0)throw Error(r(483))}var Gd=null,Xm=0;function $0(s){var u=Xm;return Xm+=1,Gd===null&&(Gd=[]),RO(Gd,s,u)}function Qm(s,u){u=u.props.ref,s.ref=u!==void 0?u:null}function Y0(s,u){throw u.$$typeof===T?Error(r(525)):(s=Object.prototype.toString.call(u),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":s)))}function kO(s){function u(Ae,ve){if(s){var Pe=Ae.deletions;Pe===null?(Ae.deletions=[ve],Ae.flags|=16):Pe.push(ve)}}function g(Ae,ve){if(!s)return null;for(;ve!==null;)u(Ae,ve),ve=ve.sibling;return null}function w(Ae){for(var ve=new Map;Ae!==null;)Ae.key!==null?ve.set(Ae.key,Ae):ve.set(Ae.index,Ae),Ae=Ae.sibling;return ve}function C(Ae,ve){return Ae=ql(Ae,ve),Ae.index=0,Ae.sibling=null,Ae}function P(Ae,ve,Pe){return Ae.index=Pe,s?(Pe=Ae.alternate,Pe!==null?(Pe=Pe.index,Pe<ve?(Ae.flags|=67108866,ve):Pe):(Ae.flags|=67108866,ve)):(Ae.flags|=1048576,ve)}function q(Ae){return s&&Ae.alternate===null&&(Ae.flags|=67108866),Ae}function ee(Ae,ve,Pe,We){return ve===null||ve.tag!==6?(ve=Yb(Pe,Ae.mode,We),ve.return=Ae,ve):(ve=C(ve,Pe),ve.return=Ae,ve)}function pe(Ae,ve,Pe,We){var zt=Pe.type;return zt===M?Ue(Ae,ve,Pe.props.children,We,Pe.key):ve!==null&&(ve.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===W&&vf(zt)===ve.type)?(ve=C(ve,Pe.props),Qm(ve,Pe),ve.return=Ae,ve):(ve=z0(Pe.type,Pe.key,Pe.props,null,Ae.mode,We),Qm(ve,Pe),ve.return=Ae,ve)}function De(Ae,ve,Pe,We){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Pe.containerInfo||ve.stateNode.implementation!==Pe.implementation?(ve=Xb(Pe,Ae.mode,We),ve.return=Ae,ve):(ve=C(ve,Pe.children||[]),ve.return=Ae,ve)}function Ue(Ae,ve,Pe,We,zt){return ve===null||ve.tag!==7?(ve=hf(Pe,Ae.mode,We,zt),ve.return=Ae,ve):(ve=C(ve,Pe),ve.return=Ae,ve)}function Qe(Ae,ve,Pe){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ve=Yb(""+ve,Ae.mode,Pe),ve.return=Ae,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case R:return Pe=z0(ve.type,ve.key,ve.props,null,Ae.mode,Pe),Qm(Pe,ve),Pe.return=Ae,Pe;case j:return ve=Xb(ve,Ae.mode,Pe),ve.return=Ae,ve;case W:return ve=vf(ve),Qe(Ae,ve,Pe)}if(he(ve)||Q(ve))return ve=hf(ve,Ae.mode,Pe,null),ve.return=Ae,ve;if(typeof ve.then=="function")return Qe(Ae,$0(ve),Pe);if(ve.$$typeof===K)return Qe(Ae,G0(Ae,ve),Pe);Y0(Ae,ve)}return null}function Le(Ae,ve,Pe,We){var zt=ve!==null?ve.key:null;if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return zt!==null?null:ee(Ae,ve,""+Pe,We);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case R:return Pe.key===zt?pe(Ae,ve,Pe,We):null;case j:return Pe.key===zt?De(Ae,ve,Pe,We):null;case W:return Pe=vf(Pe),Le(Ae,ve,Pe,We)}if(he(Pe)||Q(Pe))return zt!==null?null:Ue(Ae,ve,Pe,We,null);if(typeof Pe.then=="function")return Le(Ae,ve,$0(Pe),We);if(Pe.$$typeof===K)return Le(Ae,ve,G0(Ae,Pe),We);Y0(Ae,Pe)}return null}function Ve(Ae,ve,Pe,We,zt){if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return Ae=Ae.get(Pe)||null,ee(ve,Ae,""+We,zt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case R:return Ae=Ae.get(We.key===null?Pe:We.key)||null,pe(ve,Ae,We,zt);case j:return Ae=Ae.get(We.key===null?Pe:We.key)||null,De(ve,Ae,We,zt);case W:return We=vf(We),Ve(Ae,ve,Pe,We,zt)}if(he(We)||Q(We))return Ae=Ae.get(Pe)||null,Ue(ve,Ae,We,zt,null);if(typeof We.then=="function")return Ve(Ae,ve,Pe,$0(We),zt);if(We.$$typeof===K)return Ve(Ae,ve,Pe,G0(ve,We),zt);Y0(ve,We)}return null}function Ot(Ae,ve,Pe,We){for(var zt=null,qn=null,kt=ve,hn=ve=0,Pn=null;kt!==null&&hn<Pe.length;hn++){kt.index>hn?(Pn=kt,kt=null):Pn=kt.sibling;var Gn=Le(Ae,kt,Pe[hn],We);if(Gn===null){kt===null&&(kt=Pn);break}s&&kt&&Gn.alternate===null&&u(Ae,kt),ve=P(Gn,ve,hn),qn===null?zt=Gn:qn.sibling=Gn,qn=Gn,kt=Pn}if(hn===Pe.length)return g(Ae,kt),jn&&Gl(Ae,hn),zt;if(kt===null){for(;hn<Pe.length;hn++)kt=Qe(Ae,Pe[hn],We),kt!==null&&(ve=P(kt,ve,hn),qn===null?zt=kt:qn.sibling=kt,qn=kt);return jn&&Gl(Ae,hn),zt}for(kt=w(kt);hn<Pe.length;hn++)Pn=Ve(kt,Ae,hn,Pe[hn],We),Pn!==null&&(s&&Pn.alternate!==null&&kt.delete(Pn.key===null?hn:Pn.key),ve=P(Pn,ve,hn),qn===null?zt=Pn:qn.sibling=Pn,qn=Pn);return s&&kt.forEach(function(fc){return u(Ae,fc)}),jn&&Gl(Ae,hn),zt}function Gt(Ae,ve,Pe,We){if(Pe==null)throw Error(r(151));for(var zt=null,qn=null,kt=ve,hn=ve=0,Pn=null,Gn=Pe.next();kt!==null&&!Gn.done;hn++,Gn=Pe.next()){kt.index>hn?(Pn=kt,kt=null):Pn=kt.sibling;var fc=Le(Ae,kt,Gn.value,We);if(fc===null){kt===null&&(kt=Pn);break}s&&kt&&fc.alternate===null&&u(Ae,kt),ve=P(fc,ve,hn),qn===null?zt=fc:qn.sibling=fc,qn=fc,kt=Pn}if(Gn.done)return g(Ae,kt),jn&&Gl(Ae,hn),zt;if(kt===null){for(;!Gn.done;hn++,Gn=Pe.next())Gn=Qe(Ae,Gn.value,We),Gn!==null&&(ve=P(Gn,ve,hn),qn===null?zt=Gn:qn.sibling=Gn,qn=Gn);return jn&&Gl(Ae,hn),zt}for(kt=w(kt);!Gn.done;hn++,Gn=Pe.next())Gn=Ve(kt,Ae,hn,Gn.value,We),Gn!==null&&(s&&Gn.alternate!==null&&kt.delete(Gn.key===null?hn:Gn.key),ve=P(Gn,ve,hn),qn===null?zt=Gn:qn.sibling=Gn,qn=Gn);return s&&kt.forEach(function(BG){return u(Ae,BG)}),jn&&Gl(Ae,hn),zt}function vr(Ae,ve,Pe,We){if(typeof Pe=="object"&&Pe!==null&&Pe.type===M&&Pe.key===null&&(Pe=Pe.props.children),typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case R:e:{for(var zt=Pe.key;ve!==null;){if(ve.key===zt){if(zt=Pe.type,zt===M){if(ve.tag===7){g(Ae,ve.sibling),We=C(ve,Pe.props.children),We.return=Ae,Ae=We;break e}}else if(ve.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===W&&vf(zt)===ve.type){g(Ae,ve.sibling),We=C(ve,Pe.props),Qm(We,Pe),We.return=Ae,Ae=We;break e}g(Ae,ve);break}else u(Ae,ve);ve=ve.sibling}Pe.type===M?(We=hf(Pe.props.children,Ae.mode,We,Pe.key),We.return=Ae,Ae=We):(We=z0(Pe.type,Pe.key,Pe.props,null,Ae.mode,We),Qm(We,Pe),We.return=Ae,Ae=We)}return q(Ae);case j:e:{for(zt=Pe.key;ve!==null;){if(ve.key===zt)if(ve.tag===4&&ve.stateNode.containerInfo===Pe.containerInfo&&ve.stateNode.implementation===Pe.implementation){g(Ae,ve.sibling),We=C(ve,Pe.children||[]),We.return=Ae,Ae=We;break e}else{g(Ae,ve);break}else u(Ae,ve);ve=ve.sibling}We=Xb(Pe,Ae.mode,We),We.return=Ae,Ae=We}return q(Ae);case W:return Pe=vf(Pe),vr(Ae,ve,Pe,We)}if(he(Pe))return Ot(Ae,ve,Pe,We);if(Q(Pe)){if(zt=Q(Pe),typeof zt!="function")throw Error(r(150));return Pe=zt.call(Pe),Gt(Ae,ve,Pe,We)}if(typeof Pe.then=="function")return vr(Ae,ve,$0(Pe),We);if(Pe.$$typeof===K)return vr(Ae,ve,G0(Ae,Pe),We);Y0(Ae,Pe)}return typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint"?(Pe=""+Pe,ve!==null&&ve.tag===6?(g(Ae,ve.sibling),We=C(ve,Pe),We.return=Ae,Ae=We):(g(Ae,ve),We=Yb(Pe,Ae.mode,We),We.return=Ae,Ae=We),q(Ae)):g(Ae,ve)}return function(Ae,ve,Pe,We){try{Xm=0;var zt=vr(Ae,ve,Pe,We);return Gd=null,zt}catch(kt){if(kt===qd||kt===K0)throw kt;var qn=Ks(29,kt,null,Ae.mode);return qn.lanes=We,qn.return=Ae,qn}}}var bf=kO(!0),MO=kO(!1),$u=!1;function lw(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function uw(s,u){s=s.updateQueue,u.updateQueue===s&&(u.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Yu(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Xu(s,u,g){var w=s.updateQueue;if(w===null)return null;if(w=w.shared,(Xn&2)!==0){var C=w.pending;return C===null?u.next=u:(u.next=C.next,C.next=u),w.pending=u,u=qu(s),sl(s,null,g),u}return gr(s,w,u,g),qu(s)}function Zm(s,u,g){if(u=u.updateQueue,u!==null&&(u=u.shared,(g&4194048)!==0)){var w=u.lanes;w&=s.pendingLanes,g|=w,u.lanes=g,_n(s,g)}}function cw(s,u){var g=s.updateQueue,w=s.alternate;if(w!==null&&(w=w.updateQueue,g===w)){var C=null,P=null;if(g=g.firstBaseUpdate,g!==null){do{var q={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};P===null?C=P=q:P=P.next=q,g=g.next}while(g!==null);P===null?C=P=u:P=P.next=u}else C=P=u;g={baseState:w.baseState,firstBaseUpdate:C,lastBaseUpdate:P,shared:w.shared,callbacks:w.callbacks},s.updateQueue=g;return}s=g.lastBaseUpdate,s===null?g.firstBaseUpdate=u:s.next=u,g.lastBaseUpdate=u}var fw=!1;function Jm(){if(fw){var s=Ud;if(s!==null)throw s}}function eg(s,u,g,w){fw=!1;var C=s.updateQueue;$u=!1;var P=C.firstBaseUpdate,q=C.lastBaseUpdate,ee=C.shared.pending;if(ee!==null){C.shared.pending=null;var pe=ee,De=pe.next;pe.next=null,q===null?P=De:q.next=De,q=pe;var Ue=s.alternate;Ue!==null&&(Ue=Ue.updateQueue,ee=Ue.lastBaseUpdate,ee!==q&&(ee===null?Ue.firstBaseUpdate=De:ee.next=De,Ue.lastBaseUpdate=pe))}if(P!==null){var Qe=C.baseState;q=0,Ue=De=pe=null,ee=P;do{var Le=ee.lane&-536870913,Ve=Le!==ee.lane;if(Ve?(Rn&Le)===Le:(w&Le)===Le){Le!==0&&Le===zd&&(fw=!0),Ue!==null&&(Ue=Ue.next={lane:0,tag:ee.tag,payload:ee.payload,callback:null,next:null});e:{var Ot=s,Gt=ee;Le=u;var vr=g;switch(Gt.tag){case 1:if(Ot=Gt.payload,typeof Ot=="function"){Qe=Ot.call(vr,Qe,Le);break e}Qe=Ot;break e;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Gt.payload,Le=typeof Ot=="function"?Ot.call(vr,Qe,Le):Ot,Le==null)break e;Qe=_({},Qe,Le);break e;case 2:$u=!0}}Le=ee.callback,Le!==null&&(s.flags|=64,Ve&&(s.flags|=8192),Ve=C.callbacks,Ve===null?C.callbacks=[Le]:Ve.push(Le))}else Ve={lane:Le,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},Ue===null?(De=Ue=Ve,pe=Qe):Ue=Ue.next=Ve,q|=Le;if(ee=ee.next,ee===null){if(ee=C.shared.pending,ee===null)break;Ve=ee,ee=Ve.next,Ve.next=null,C.lastBaseUpdate=Ve,C.shared.pending=null}}while(!0);Ue===null&&(pe=Qe),C.baseState=pe,C.firstBaseUpdate=De,C.lastBaseUpdate=Ue,P===null&&(C.shared.lanes=0),tc|=q,s.lanes=q,s.memoizedState=Qe}}function jO(s,u){if(typeof s!="function")throw Error(r(191,s));s.call(u)}function LO(s,u){var g=s.callbacks;if(g!==null)for(s.callbacks=null,s=0;s<g.length;s++)jO(g[s],u)}var Hd=de(null),X0=de(0);function BO(s,u){s=tu,Xe(X0,s),Xe(Hd,u),tu=s|u.baseLanes}function dw(){Xe(X0,tu),Xe(Hd,Hd.current)}function hw(){tu=X0.current,Ee(Hd),Ee(X0)}var Ws=de(null),yo=null;function Qu(s){var u=s.alternate;Xe(Ei,Ei.current&1),Xe(Ws,s),yo===null&&(u===null||Hd.current!==null||u.memoizedState!==null)&&(yo=s)}function mw(s){Xe(Ei,Ei.current),Xe(Ws,s),yo===null&&(yo=s)}function FO(s){s.tag===22?(Xe(Ei,Ei.current),Xe(Ws,s),yo===null&&(yo=s)):Zu()}function Zu(){Xe(Ei,Ei.current),Xe(Ws,Ws.current)}function $s(s){Ee(Ws),yo===s&&(yo=null),Ee(Ei)}var Ei=de(0);function Q0(s){for(var u=s;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||b_(g)||w_(g)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Wl=0,un=null,pr=null,ji=null,Z0=!1,Kd=!1,wf=!1,J0=0,tg=0,Wd=null,Cq=0;function hi(){throw Error(r(321))}function gw(s,u){if(u===null)return!1;for(var g=0;g<u.length&&g<s.length;g++)if(!E(s[g],u[g]))return!1;return!0}function pw(s,u,g,w,C,P){return Wl=P,un=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ye.H=s===null||s.memoizedState===null?_3:Rw,wf=!1,P=g(w,C),wf=!1,Kd&&(P=zO(u,g,w,C)),VO(s),P}function VO(s){ye.H=ig;var u=pr!==null&&pr.next!==null;if(Wl=0,ji=pr=un=null,Z0=!1,tg=0,Wd=null,u)throw Error(r(300));s===null||Li||(s=s.dependencies,s!==null&&q0(s)&&(Li=!0))}function zO(s,u,g,w){un=s;var C=0;do{if(Kd&&(Wd=null),tg=0,Kd=!1,25<=C)throw Error(r(301));if(C+=1,ji=pr=null,s.updateQueue!=null){var P=s.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}ye.H=E3,P=u(g,w)}while(Kd);return P}function Oq(){var s=ye.H,u=s.useState()[0];return u=typeof u.then=="function"?ng(u):u,s=s.useState()[0],(pr!==null?pr.memoizedState:null)!==s&&(un.flags|=1024),u}function yw(){var s=J0!==0;return J0=0,s}function vw(s,u,g){u.updateQueue=s.updateQueue,u.flags&=-2053,s.lanes&=~g}function xw(s){if(Z0){for(s=s.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}Z0=!1}Wl=0,ji=pr=un=null,Kd=!1,tg=J0=0,Wd=null}function us(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ji===null?un.memoizedState=ji=s:ji=ji.next=s,ji}function Ai(){if(pr===null){var s=un.alternate;s=s!==null?s.memoizedState:null}else s=pr.next;var u=ji===null?un.memoizedState:ji.next;if(u!==null)ji=u,pr=s;else{if(s===null)throw un.alternate===null?Error(r(467)):Error(r(310));pr=s,s={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},ji===null?un.memoizedState=ji=s:ji=ji.next=s}return ji}function e1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ng(s){var u=tg;return tg+=1,Wd===null&&(Wd=[]),s=RO(Wd,s,u),u=un,(ji===null?u.memoizedState:ji.next)===null&&(u=u.alternate,ye.H=u===null||u.memoizedState===null?_3:Rw),s}function t1(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ng(s);if(s.$$typeof===K)return Pa(s)}throw Error(r(438,String(s)))}function bw(s){var u=null,g=un.updateQueue;if(g!==null&&(u=g.memoCache),u==null){var w=un.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(u={data:w.data.map(function(C){return C.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),g===null&&(g=e1(),un.updateQueue=g),g.memoCache=u,g=u.data[u.index],g===void 0)for(g=u.data[u.index]=Array(s),w=0;w<s;w++)g[w]=ae;return u.index++,g}function $l(s,u){return typeof u=="function"?u(s):u}function n1(s){var u=Ai();return ww(u,pr,s)}function ww(s,u,g){var w=s.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=g;var C=s.baseQueue,P=w.pending;if(P!==null){if(C!==null){var q=C.next;C.next=P.next,P.next=q}u.baseQueue=C=P,w.pending=null}if(P=s.baseState,C===null)s.memoizedState=P;else{u=C.next;var ee=q=null,pe=null,De=u,Ue=!1;do{var Qe=De.lane&-536870913;if(Qe!==De.lane?(Rn&Qe)===Qe:(Wl&Qe)===Qe){var Le=De.revertLane;if(Le===0)pe!==null&&(pe=pe.next={lane:0,revertLane:0,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),Qe===zd&&(Ue=!0);else if((Wl&Le)===Le){De=De.next,Le===zd&&(Ue=!0);continue}else Qe={lane:0,revertLane:De.revertLane,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},pe===null?(ee=pe=Qe,q=P):pe=pe.next=Qe,un.lanes|=Le,tc|=Le;Qe=De.action,wf&&g(P,Qe),P=De.hasEagerState?De.eagerState:g(P,Qe)}else Le={lane:Qe,revertLane:De.revertLane,gesture:De.gesture,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},pe===null?(ee=pe=Le,q=P):pe=pe.next=Le,un.lanes|=Qe,tc|=Qe;De=De.next}while(De!==null&&De!==u);if(pe===null?q=P:pe.next=ee,!E(P,s.memoizedState)&&(Li=!0,Ue&&(g=Ud,g!==null)))throw g;s.memoizedState=P,s.baseState=q,s.baseQueue=pe,w.lastRenderedState=P}return C===null&&(w.lanes=0),[s.memoizedState,w.dispatch]}function _w(s){var u=Ai(),g=u.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=s;var w=g.dispatch,C=g.pending,P=u.memoizedState;if(C!==null){g.pending=null;var q=C=C.next;do P=s(P,q.action),q=q.next;while(q!==C);E(P,u.memoizedState)||(Li=!0),u.memoizedState=P,u.baseQueue===null&&(u.baseState=P),g.lastRenderedState=P}return[P,w]}function UO(s,u,g){var w=un,C=Ai(),P=jn;if(P){if(g===void 0)throw Error(r(407));g=g()}else g=u();var q=!E((pr||C).memoizedState,g);if(q&&(C.memoizedState=g,Li=!0),C=C.queue,Sw(HO.bind(null,w,C,s),[s]),C.getSnapshot!==u||q||ji!==null&&ji.memoizedState.tag&1){if(w.flags|=2048,$d(9,{destroy:void 0},GO.bind(null,w,C,g,u),null),Cr===null)throw Error(r(349));P||(Wl&127)!==0||qO(w,u,g)}return g}function qO(s,u,g){s.flags|=16384,s={getSnapshot:u,value:g},u=un.updateQueue,u===null?(u=e1(),un.updateQueue=u,u.stores=[s]):(g=u.stores,g===null?u.stores=[s]:g.push(s))}function GO(s,u,g,w){u.value=g,u.getSnapshot=w,KO(u)&&WO(s)}function HO(s,u,g){return g(function(){KO(u)&&WO(s)})}function KO(s){var u=s.getSnapshot;s=s.value;try{var g=u();return!E(s,g)}catch{return!0}}function WO(s){var u=tr(s,2);u!==null&&Os(u,s,2)}function Ew(s){var u=us();if(typeof s=="function"){var g=s;if(s=g(),wf){fn(!0);try{g()}finally{fn(!1)}}}return u.memoizedState=u.baseState=s,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:s},u}function $O(s,u,g,w){return s.baseState=g,ww(s,pr,typeof w=="function"?w:$l)}function Nq(s,u,g,w,C){if(a1(s))throw Error(r(485));if(s=u.action,s!==null){var P={payload:C,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){P.listeners.push(q)}};ye.T!==null?g(!0):P.isTransition=!1,w(P),g=u.pending,g===null?(P.next=u.pending=P,YO(u,P)):(P.next=g.next,u.pending=g.next=P)}}function YO(s,u){var g=u.action,w=u.payload,C=s.state;if(u.isTransition){var P=ye.T,q={};ye.T=q;try{var ee=g(C,w),pe=ye.S;pe!==null&&pe(q,ee),XO(s,u,ee)}catch(De){Aw(s,u,De)}finally{P!==null&&q.types!==null&&(P.types=q.types),ye.T=P}}else try{P=g(C,w),XO(s,u,P)}catch(De){Aw(s,u,De)}}function XO(s,u,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(w){QO(s,u,w)},function(w){return Aw(s,u,w)}):QO(s,u,g)}function QO(s,u,g){u.status="fulfilled",u.value=g,ZO(u),s.state=g,u=s.pending,u!==null&&(g=u.next,g===u?s.pending=null:(g=g.next,u.next=g,YO(s,g)))}function Aw(s,u,g){var w=s.pending;if(s.pending=null,w!==null){w=w.next;do u.status="rejected",u.reason=g,ZO(u),u=u.next;while(u!==w)}s.action=null}function ZO(s){s=s.listeners;for(var u=0;u<s.length;u++)(0,s[u])()}function JO(s,u){return u}function e3(s,u){if(jn){var g=Cr.formState;if(g!==null){e:{var w=un;if(jn){if(Fr){t:{for(var C=Fr,P=po;C.nodeType!==8;){if(!P){C=null;break t}if(C=vo(C.nextSibling),C===null){C=null;break t}}P=C.data,C=P==="F!"||P==="F"?C:null}if(C){Fr=vo(C.nextSibling),w=C.data==="F!";break e}}Ku(w)}w=!1}w&&(u=g[0])}}return g=us(),g.memoizedState=g.baseState=u,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:JO,lastRenderedState:u},g.queue=w,g=x3.bind(null,un,w),w.dispatch=g,w=Ew(!1),P=Nw.bind(null,un,!1,w.queue),w=us(),C={state:u,dispatch:null,action:s,pending:null},w.queue=C,g=Nq.bind(null,un,C,P,g),C.dispatch=g,w.memoizedState=s,[u,g,!1]}function t3(s){var u=Ai();return n3(u,pr,s)}function n3(s,u,g){if(u=ww(s,u,JO)[0],s=n1($l)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var w=ng(u)}catch(q){throw q===qd?K0:q}else w=u;u=Ai();var C=u.queue,P=C.dispatch;return g!==u.memoizedState&&(un.flags|=2048,$d(9,{destroy:void 0},Rq.bind(null,C,g),null)),[w,P,s]}function Rq(s,u){s.action=u}function r3(s){var u=Ai(),g=pr;if(g!==null)return n3(u,g,s);Ai(),u=u.memoizedState,g=Ai();var w=g.queue.dispatch;return g.memoizedState=s,[u,w,!1]}function $d(s,u,g,w){return s={tag:s,create:g,deps:w,inst:u,next:null},u=un.updateQueue,u===null&&(u=e1(),un.updateQueue=u),g=u.lastEffect,g===null?u.lastEffect=s.next=s:(w=g.next,g.next=s,s.next=w,u.lastEffect=s),s}function i3(){return Ai().memoizedState}function r1(s,u,g,w){var C=us();un.flags|=s,C.memoizedState=$d(1|u,{destroy:void 0},g,w===void 0?null:w)}function i1(s,u,g,w){var C=Ai();w=w===void 0?null:w;var P=C.memoizedState.inst;pr!==null&&w!==null&&gw(w,pr.memoizedState.deps)?C.memoizedState=$d(u,P,g,w):(un.flags|=s,C.memoizedState=$d(1|u,P,g,w))}function a3(s,u){r1(8390656,8,s,u)}function Sw(s,u){i1(2048,8,s,u)}function Pq(s){un.flags|=4;var u=un.updateQueue;if(u===null)u=e1(),un.updateQueue=u,u.events=[s];else{var g=u.events;g===null?u.events=[s]:g.push(s)}}function s3(s){var u=Ai().memoizedState;return Pq({ref:u,nextImpl:s}),function(){if((Xn&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}function o3(s,u){return i1(4,2,s,u)}function l3(s,u){return i1(4,4,s,u)}function u3(s,u){if(typeof u=="function"){s=s();var g=u(s);return function(){typeof g=="function"?g():u(null)}}if(u!=null)return s=s(),u.current=s,function(){u.current=null}}function c3(s,u,g){g=g!=null?g.concat([s]):null,i1(4,4,u3.bind(null,u,s),g)}function Tw(){}function f3(s,u){var g=Ai();u=u===void 0?null:u;var w=g.memoizedState;return u!==null&&gw(u,w[1])?w[0]:(g.memoizedState=[s,u],s)}function d3(s,u){var g=Ai();u=u===void 0?null:u;var w=g.memoizedState;if(u!==null&&gw(u,w[1]))return w[0];if(w=s(),wf){fn(!0);try{s()}finally{fn(!1)}}return g.memoizedState=[w,u],w}function Iw(s,u,g){return g===void 0||(Wl&1073741824)!==0&&(Rn&261930)===0?s.memoizedState=u:(s.memoizedState=g,s=hN(),un.lanes|=s,tc|=s,g)}function h3(s,u,g,w){return E(g,u)?g:Hd.current!==null?(s=Iw(s,g,w),E(s,u)||(Li=!0),s):(Wl&42)===0||(Wl&1073741824)!==0&&(Rn&261930)===0?(Li=!0,s.memoizedState=g):(s=hN(),un.lanes|=s,tc|=s,u)}function m3(s,u,g,w,C){var P=we.p;we.p=P!==0&&8>P?P:8;var q=ye.T,ee={};ye.T=ee,Nw(s,!1,u,g);try{var pe=C(),De=ye.S;if(De!==null&&De(ee,pe),pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var Ue=Iq(pe,w);rg(s,u,Ue,Qs(s))}else rg(s,u,w,Qs(s))}catch(Qe){rg(s,u,{then:function(){},status:"rejected",reason:Qe},Qs())}finally{we.p=P,q!==null&&ee.types!==null&&(q.types=ee.types),ye.T=q}}function Dq(){}function Cw(s,u,g,w){if(s.tag!==5)throw Error(r(476));var C=g3(s).queue;m3(s,C,u,$e,g===null?Dq:function(){return p3(s),g(w)})}function g3(s){var u=s.memoizedState;if(u!==null)return u;u={memoizedState:$e,baseState:$e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:$e},next:null};var g={};return u.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:g},next:null},s.memoizedState=u,s=s.alternate,s!==null&&(s.memoizedState=u),u}function p3(s){var u=g3(s);u.next===null&&(u=s.alternate.memoizedState),rg(s,u.next.queue,{},Qs())}function Ow(){return Pa(bg)}function y3(){return Ai().memoizedState}function v3(){return Ai().memoizedState}function kq(s){for(var u=s.return;u!==null;){switch(u.tag){case 24:case 3:var g=Qs();s=Yu(g);var w=Xu(u,s,g);w!==null&&(Os(w,u,g),Zm(w,u,g)),u={cache:iw()},s.payload=u;return}u=u.return}}function Mq(s,u,g){var w=Qs();g={lane:w,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},a1(s)?b3(u,g):(g=Xa(s,u,g,w),g!==null&&(Os(g,s,w),w3(g,u,w)))}function x3(s,u,g){var w=Qs();rg(s,u,g,w)}function rg(s,u,g,w){var C={lane:w,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(a1(s))b3(u,C);else{var P=s.alternate;if(s.lanes===0&&(P===null||P.lanes===0)&&(P=u.lastRenderedReducer,P!==null))try{var q=u.lastRenderedState,ee=P(q,g);if(C.hasEagerState=!0,C.eagerState=ee,E(ee,q))return gr(s,u,C,0),Cr===null&&Jt(),!1}catch{}if(g=Xa(s,u,C,w),g!==null)return Os(g,s,w),w3(g,u,w),!0}return!1}function Nw(s,u,g,w){if(w={lane:2,revertLane:l_(),gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},a1(s)){if(u)throw Error(r(479))}else u=Xa(s,g,w,2),u!==null&&Os(u,s,2)}function a1(s){var u=s.alternate;return s===un||u!==null&&u===un}function b3(s,u){Kd=Z0=!0;var g=s.pending;g===null?u.next=u:(u.next=g.next,g.next=u),s.pending=u}function w3(s,u,g){if((g&4194048)!==0){var w=u.lanes;w&=s.pendingLanes,g|=w,u.lanes=g,_n(s,g)}}var ig={readContext:Pa,use:t1,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useLayoutEffect:hi,useInsertionEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useSyncExternalStore:hi,useId:hi,useHostTransitionStatus:hi,useFormState:hi,useActionState:hi,useOptimistic:hi,useMemoCache:hi,useCacheRefresh:hi};ig.useEffectEvent=hi;var _3={readContext:Pa,use:t1,useCallback:function(s,u){return us().memoizedState=[s,u===void 0?null:u],s},useContext:Pa,useEffect:a3,useImperativeHandle:function(s,u,g){g=g!=null?g.concat([s]):null,r1(4194308,4,u3.bind(null,u,s),g)},useLayoutEffect:function(s,u){return r1(4194308,4,s,u)},useInsertionEffect:function(s,u){r1(4,2,s,u)},useMemo:function(s,u){var g=us();u=u===void 0?null:u;var w=s();if(wf){fn(!0);try{s()}finally{fn(!1)}}return g.memoizedState=[w,u],w},useReducer:function(s,u,g){var w=us();if(g!==void 0){var C=g(u);if(wf){fn(!0);try{g(u)}finally{fn(!1)}}}else C=u;return w.memoizedState=w.baseState=C,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:C},w.queue=s,s=s.dispatch=Mq.bind(null,un,s),[w.memoizedState,s]},useRef:function(s){var u=us();return s={current:s},u.memoizedState=s},useState:function(s){s=Ew(s);var u=s.queue,g=x3.bind(null,un,u);return u.dispatch=g,[s.memoizedState,g]},useDebugValue:Tw,useDeferredValue:function(s,u){var g=us();return Iw(g,s,u)},useTransition:function(){var s=Ew(!1);return s=m3.bind(null,un,s.queue,!0,!1),us().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,u,g){var w=un,C=us();if(jn){if(g===void 0)throw Error(r(407));g=g()}else{if(g=u(),Cr===null)throw Error(r(349));(Rn&127)!==0||qO(w,u,g)}C.memoizedState=g;var P={value:g,getSnapshot:u};return C.queue=P,a3(HO.bind(null,w,P,s),[s]),w.flags|=2048,$d(9,{destroy:void 0},GO.bind(null,w,P,g,u),null),g},useId:function(){var s=us(),u=Cr.identifierPrefix;if(jn){var g=ll,w=ol;g=(w&~(1<<32-Je(w)-1)).toString(32)+g,u="_"+u+"R_"+g,g=J0++,0<g&&(u+="H"+g.toString(32)),u+="_"}else g=Cq++,u="_"+u+"r_"+g.toString(32)+"_";return s.memoizedState=u},useHostTransitionStatus:Ow,useFormState:e3,useActionState:e3,useOptimistic:function(s){var u=us();u.memoizedState=u.baseState=s;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=g,u=Nw.bind(null,un,!0,g),g.dispatch=u,[s,u]},useMemoCache:bw,useCacheRefresh:function(){return us().memoizedState=kq.bind(null,un)},useEffectEvent:function(s){var u=us(),g={impl:s};return u.memoizedState=g,function(){if((Xn&2)!==0)throw Error(r(440));return g.impl.apply(void 0,arguments)}}},Rw={readContext:Pa,use:t1,useCallback:f3,useContext:Pa,useEffect:Sw,useImperativeHandle:c3,useInsertionEffect:o3,useLayoutEffect:l3,useMemo:d3,useReducer:n1,useRef:i3,useState:function(){return n1($l)},useDebugValue:Tw,useDeferredValue:function(s,u){var g=Ai();return h3(g,pr.memoizedState,s,u)},useTransition:function(){var s=n1($l)[0],u=Ai().memoizedState;return[typeof s=="boolean"?s:ng(s),u]},useSyncExternalStore:UO,useId:y3,useHostTransitionStatus:Ow,useFormState:t3,useActionState:t3,useOptimistic:function(s,u){var g=Ai();return $O(g,pr,s,u)},useMemoCache:bw,useCacheRefresh:v3};Rw.useEffectEvent=s3;var E3={readContext:Pa,use:t1,useCallback:f3,useContext:Pa,useEffect:Sw,useImperativeHandle:c3,useInsertionEffect:o3,useLayoutEffect:l3,useMemo:d3,useReducer:_w,useRef:i3,useState:function(){return _w($l)},useDebugValue:Tw,useDeferredValue:function(s,u){var g=Ai();return pr===null?Iw(g,s,u):h3(g,pr.memoizedState,s,u)},useTransition:function(){var s=_w($l)[0],u=Ai().memoizedState;return[typeof s=="boolean"?s:ng(s),u]},useSyncExternalStore:UO,useId:y3,useHostTransitionStatus:Ow,useFormState:r3,useActionState:r3,useOptimistic:function(s,u){var g=Ai();return pr!==null?$O(g,pr,s,u):(g.baseState=s,[s,g.queue.dispatch])},useMemoCache:bw,useCacheRefresh:v3};E3.useEffectEvent=s3;function Pw(s,u,g,w){u=s.memoizedState,g=g(w,u),g=g==null?u:_({},u,g),s.memoizedState=g,s.lanes===0&&(s.updateQueue.baseState=g)}var Dw={enqueueSetState:function(s,u,g){s=s._reactInternals;var w=Qs(),C=Yu(w);C.payload=u,g!=null&&(C.callback=g),u=Xu(s,C,w),u!==null&&(Os(u,s,w),Zm(u,s,w))},enqueueReplaceState:function(s,u,g){s=s._reactInternals;var w=Qs(),C=Yu(w);C.tag=1,C.payload=u,g!=null&&(C.callback=g),u=Xu(s,C,w),u!==null&&(Os(u,s,w),Zm(u,s,w))},enqueueForceUpdate:function(s,u){s=s._reactInternals;var g=Qs(),w=Yu(g);w.tag=2,u!=null&&(w.callback=u),u=Xu(s,w,g),u!==null&&(Os(u,s,g),Zm(u,s,g))}};function A3(s,u,g,w,C,P,q){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(w,P,q):u.prototype&&u.prototype.isPureReactComponent?!d(g,w)||!d(C,P):!0}function S3(s,u,g,w){s=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,w),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,w),u.state!==s&&Dw.enqueueReplaceState(u,u.state,null)}function _f(s,u){var g=u;if("ref"in u){g={};for(var w in u)w!=="ref"&&(g[w]=u[w])}if(s=s.defaultProps){g===u&&(g=_({},g));for(var C in s)g[C]===void 0&&(g[C]=s[C])}return g}function T3(s){_t(s)}function I3(s){console.error(s)}function C3(s){_t(s)}function s1(s,u){try{var g=s.onUncaughtError;g(u.value,{componentStack:u.stack})}catch(w){setTimeout(function(){throw w})}}function O3(s,u,g){try{var w=s.onCaughtError;w(g.value,{componentStack:g.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function kw(s,u,g){return g=Yu(g),g.tag=3,g.payload={element:null},g.callback=function(){s1(s,u)},g}function N3(s){return s=Yu(s),s.tag=3,s}function R3(s,u,g,w){var C=g.type.getDerivedStateFromError;if(typeof C=="function"){var P=w.value;s.payload=function(){return C(P)},s.callback=function(){O3(u,g,w)}}var q=g.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(s.callback=function(){O3(u,g,w),typeof C!="function"&&(nc===null?nc=new Set([this]):nc.add(this));var ee=w.stack;this.componentDidCatch(w.value,{componentStack:ee!==null?ee:""})})}function jq(s,u,g,w,C){if(g.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(u=g.alternate,u!==null&&Vd(u,g,C,!0),g=Ws.current,g!==null){switch(g.tag){case 31:case 13:return yo===null?v1():g.alternate===null&&mi===0&&(mi=3),g.flags&=-257,g.flags|=65536,g.lanes=C,w===W0?g.flags|=16384:(u=g.updateQueue,u===null?g.updateQueue=new Set([w]):u.add(w),a_(s,w,C)),!1;case 22:return g.flags|=65536,w===W0?g.flags|=16384:(u=g.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([w])},g.updateQueue=u):(g=u.retryQueue,g===null?u.retryQueue=new Set([w]):g.add(w)),a_(s,w,C)),!1}throw Error(r(435,g.tag))}return a_(s,w,C),v1(),!1}if(jn)return u=Ws.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=C,w!==Jb&&(s=Error(r(422),{cause:w}),Wm(ho(s,g)))):(w!==Jb&&(u=Error(r(423),{cause:w}),Wm(ho(u,g))),s=s.current.alternate,s.flags|=65536,C&=-C,s.lanes|=C,w=ho(w,g),C=kw(s.stateNode,w,C),cw(s,C),mi!==4&&(mi=2)),!1;var P=Error(r(520),{cause:w});if(P=ho(P,g),dg===null?dg=[P]:dg.push(P),mi!==4&&(mi=2),u===null)return!0;w=ho(w,g),g=u;do{switch(g.tag){case 3:return g.flags|=65536,s=C&-C,g.lanes|=s,s=kw(g.stateNode,w,s),cw(g,s),!1;case 1:if(u=g.type,P=g.stateNode,(g.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(nc===null||!nc.has(P))))return g.flags|=65536,C&=-C,g.lanes|=C,C=N3(C),R3(C,s,g,w),cw(g,C),!1}g=g.return}while(g!==null);return!1}var Mw=Error(r(461)),Li=!1;function Da(s,u,g,w){u.child=s===null?MO(u,null,g,w):bf(u,s.child,g,w)}function P3(s,u,g,w,C){g=g.render;var P=u.ref;if("ref"in w){var q={};for(var ee in w)ee!=="ref"&&(q[ee]=w[ee])}else q=w;return pf(u),w=pw(s,u,g,q,P,C),ee=yw(),s!==null&&!Li?(vw(s,u,C),Yl(s,u,C)):(jn&&ee&&Qb(u),u.flags|=1,Da(s,u,w,C),u.child)}function D3(s,u,g,w,C){if(s===null){var P=g.type;return typeof P=="function"&&!$b(P)&&P.defaultProps===void 0&&g.compare===null?(u.tag=15,u.type=P,k3(s,u,P,w,C)):(s=z0(g.type,null,w,u,u.mode,C),s.ref=u.ref,s.return=u,u.child=s)}if(P=s.child,!qw(s,C)){var q=P.memoizedProps;if(g=g.compare,g=g!==null?g:d,g(q,w)&&s.ref===u.ref)return Yl(s,u,C)}return u.flags|=1,s=ql(P,w),s.ref=u.ref,s.return=u,u.child=s}function k3(s,u,g,w,C){if(s!==null){var P=s.memoizedProps;if(d(P,w)&&s.ref===u.ref)if(Li=!1,u.pendingProps=w=P,qw(s,C))(s.flags&131072)!==0&&(Li=!0);else return u.lanes=s.lanes,Yl(s,u,C)}return jw(s,u,g,w,C)}function M3(s,u,g,w){var C=w.children,P=s!==null?s.memoizedState:null;if(s===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),w.mode==="hidden"){if((u.flags&128)!==0){if(P=P!==null?P.baseLanes|g:g,s!==null){for(w=u.child=s.child,C=0;w!==null;)C=C|w.lanes|w.childLanes,w=w.sibling;w=C&~P}else w=0,u.child=null;return j3(s,u,P,g,w)}if((g&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},s!==null&&H0(u,P!==null?P.cachePool:null),P!==null?BO(u,P):dw(),FO(u);else return w=u.lanes=536870912,j3(s,u,P!==null?P.baseLanes|g:g,g,w)}else P!==null?(H0(u,P.cachePool),BO(u,P),Zu(),u.memoizedState=null):(s!==null&&H0(u,null),dw(),Zu());return Da(s,u,C,g),u.child}function ag(s,u){return s!==null&&s.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function j3(s,u,g,w,C){var P=sw();return P=P===null?null:{parent:Mi._currentValue,pool:P},u.memoizedState={baseLanes:g,cachePool:P},s!==null&&H0(u,null),dw(),FO(u),s!==null&&Vd(s,u,w,!0),u.childLanes=C,null}function o1(s,u){return u=u1({mode:u.mode,children:u.children},s.mode),u.ref=s.ref,s.child=u,u.return=s,u}function L3(s,u,g){return bf(u,s.child,null,g),s=o1(u,u.pendingProps),s.flags|=2,$s(u),u.memoizedState=null,s}function Lq(s,u,g){var w=u.pendingProps,C=(u.flags&128)!==0;if(u.flags&=-129,s===null){if(jn){if(w.mode==="hidden")return s=o1(u,w),u.lanes=536870912,ag(null,s);if(mw(u),(s=Fr)?(s=YN(s,po),s=s!==null&&s.data==="&"?s:null,s!==null&&(u.memoizedState={dehydrated:s,treeContext:Gu!==null?{id:ol,overflow:ll}:null,retryLane:536870912,hydrationErrors:null},g=bO(s),g.return=u,u.child=g,Ra=u,Fr=null)):s=null,s===null)throw Ku(u);return u.lanes=536870912,null}return o1(u,w)}var P=s.memoizedState;if(P!==null){var q=P.dehydrated;if(mw(u),C)if(u.flags&256)u.flags&=-257,u=L3(s,u,g);else if(u.memoizedState!==null)u.child=s.child,u.flags|=128,u=null;else throw Error(r(558));else if(Li||Vd(s,u,g,!1),C=(g&s.childLanes)!==0,Li||C){if(w=Cr,w!==null&&(q=mr(w,g),q!==0&&q!==P.retryLane))throw P.retryLane=q,tr(s,q),Os(w,s,q),Mw;v1(),u=L3(s,u,g)}else s=P.treeContext,Fr=vo(q.nextSibling),Ra=u,jn=!0,Hu=null,po=!1,s!==null&&EO(u,s),u=o1(u,w),u.flags|=4096;return u}return s=ql(s.child,{mode:w.mode,children:w.children}),s.ref=u.ref,u.child=s,s.return=u,s}function l1(s,u){var g=u.ref;if(g===null)s!==null&&s.ref!==null&&(u.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(r(284));(s===null||s.ref!==g)&&(u.flags|=4194816)}}function jw(s,u,g,w,C){return pf(u),g=pw(s,u,g,w,void 0,C),w=yw(),s!==null&&!Li?(vw(s,u,C),Yl(s,u,C)):(jn&&w&&Qb(u),u.flags|=1,Da(s,u,g,C),u.child)}function B3(s,u,g,w,C,P){return pf(u),u.updateQueue=null,g=zO(u,w,g,C),VO(s),w=yw(),s!==null&&!Li?(vw(s,u,P),Yl(s,u,P)):(jn&&w&&Qb(u),u.flags|=1,Da(s,u,g,P),u.child)}function F3(s,u,g,w,C){if(pf(u),u.stateNode===null){var P=jd,q=g.contextType;typeof q=="object"&&q!==null&&(P=Pa(q)),P=new g(w,P),u.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=Dw,u.stateNode=P,P._reactInternals=u,P=u.stateNode,P.props=w,P.state=u.memoizedState,P.refs={},lw(u),q=g.contextType,P.context=typeof q=="object"&&q!==null?Pa(q):jd,P.state=u.memoizedState,q=g.getDerivedStateFromProps,typeof q=="function"&&(Pw(u,g,q,w),P.state=u.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(q=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),q!==P.state&&Dw.enqueueReplaceState(P,P.state,null),eg(u,w,P,C),Jm(),P.state=u.memoizedState),typeof P.componentDidMount=="function"&&(u.flags|=4194308),w=!0}else if(s===null){P=u.stateNode;var ee=u.memoizedProps,pe=_f(g,ee);P.props=pe;var De=P.context,Ue=g.contextType;q=jd,typeof Ue=="object"&&Ue!==null&&(q=Pa(Ue));var Qe=g.getDerivedStateFromProps;Ue=typeof Qe=="function"||typeof P.getSnapshotBeforeUpdate=="function",ee=u.pendingProps!==ee,Ue||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(ee||De!==q)&&S3(u,P,w,q),$u=!1;var Le=u.memoizedState;P.state=Le,eg(u,w,P,C),Jm(),De=u.memoizedState,ee||Le!==De||$u?(typeof Qe=="function"&&(Pw(u,g,Qe,w),De=u.memoizedState),(pe=$u||A3(u,g,pe,w,Le,De,q))?(Ue||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(u.flags|=4194308)):(typeof P.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=w,u.memoizedState=De),P.props=w,P.state=De,P.context=q,w=pe):(typeof P.componentDidMount=="function"&&(u.flags|=4194308),w=!1)}else{P=u.stateNode,uw(s,u),q=u.memoizedProps,Ue=_f(g,q),P.props=Ue,Qe=u.pendingProps,Le=P.context,De=g.contextType,pe=jd,typeof De=="object"&&De!==null&&(pe=Pa(De)),ee=g.getDerivedStateFromProps,(De=typeof ee=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(q!==Qe||Le!==pe)&&S3(u,P,w,pe),$u=!1,Le=u.memoizedState,P.state=Le,eg(u,w,P,C),Jm();var Ve=u.memoizedState;q!==Qe||Le!==Ve||$u||s!==null&&s.dependencies!==null&&q0(s.dependencies)?(typeof ee=="function"&&(Pw(u,g,ee,w),Ve=u.memoizedState),(Ue=$u||A3(u,g,Ue,w,Le,Ve,pe)||s!==null&&s.dependencies!==null&&q0(s.dependencies))?(De||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(w,Ve,pe),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(w,Ve,pe)),typeof P.componentDidUpdate=="function"&&(u.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof P.componentDidUpdate!="function"||q===s.memoizedProps&&Le===s.memoizedState||(u.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||q===s.memoizedProps&&Le===s.memoizedState||(u.flags|=1024),u.memoizedProps=w,u.memoizedState=Ve),P.props=w,P.state=Ve,P.context=pe,w=Ue):(typeof P.componentDidUpdate!="function"||q===s.memoizedProps&&Le===s.memoizedState||(u.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||q===s.memoizedProps&&Le===s.memoizedState||(u.flags|=1024),w=!1)}return P=w,l1(s,u),w=(u.flags&128)!==0,P||w?(P=u.stateNode,g=w&&typeof g.getDerivedStateFromError!="function"?null:P.render(),u.flags|=1,s!==null&&w?(u.child=bf(u,s.child,null,C),u.child=bf(u,null,g,C)):Da(s,u,g,C),u.memoizedState=P.state,s=u.child):s=Yl(s,u,C),s}function V3(s,u,g,w){return mf(),u.flags|=256,Da(s,u,g,w),u.child}var Lw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bw(s){return{baseLanes:s,cachePool:OO()}}function Fw(s,u,g){return s=s!==null?s.childLanes&~g:0,u&&(s|=Xs),s}function z3(s,u,g){var w=u.pendingProps,C=!1,P=(u.flags&128)!==0,q;if((q=P)||(q=s!==null&&s.memoizedState===null?!1:(Ei.current&2)!==0),q&&(C=!0,u.flags&=-129),q=(u.flags&32)!==0,u.flags&=-33,s===null){if(jn){if(C?Qu(u):Zu(),(s=Fr)?(s=YN(s,po),s=s!==null&&s.data!=="&"?s:null,s!==null&&(u.memoizedState={dehydrated:s,treeContext:Gu!==null?{id:ol,overflow:ll}:null,retryLane:536870912,hydrationErrors:null},g=bO(s),g.return=u,u.child=g,Ra=u,Fr=null)):s=null,s===null)throw Ku(u);return w_(s)?u.lanes=32:u.lanes=536870912,null}var ee=w.children;return w=w.fallback,C?(Zu(),C=u.mode,ee=u1({mode:"hidden",children:ee},C),w=hf(w,C,g,null),ee.return=u,w.return=u,ee.sibling=w,u.child=ee,w=u.child,w.memoizedState=Bw(g),w.childLanes=Fw(s,q,g),u.memoizedState=Lw,ag(null,w)):(Qu(u),Vw(u,ee))}var pe=s.memoizedState;if(pe!==null&&(ee=pe.dehydrated,ee!==null)){if(P)u.flags&256?(Qu(u),u.flags&=-257,u=zw(s,u,g)):u.memoizedState!==null?(Zu(),u.child=s.child,u.flags|=128,u=null):(Zu(),ee=w.fallback,C=u.mode,w=u1({mode:"visible",children:w.children},C),ee=hf(ee,C,g,null),ee.flags|=2,w.return=u,ee.return=u,w.sibling=ee,u.child=w,bf(u,s.child,null,g),w=u.child,w.memoizedState=Bw(g),w.childLanes=Fw(s,q,g),u.memoizedState=Lw,u=ag(null,w));else if(Qu(u),w_(ee)){if(q=ee.nextSibling&&ee.nextSibling.dataset,q)var De=q.dgst;q=De,w=Error(r(419)),w.stack="",w.digest=q,Wm({value:w,source:null,stack:null}),u=zw(s,u,g)}else if(Li||Vd(s,u,g,!1),q=(g&s.childLanes)!==0,Li||q){if(q=Cr,q!==null&&(w=mr(q,g),w!==0&&w!==pe.retryLane))throw pe.retryLane=w,tr(s,w),Os(q,s,w),Mw;b_(ee)||v1(),u=zw(s,u,g)}else b_(ee)?(u.flags|=192,u.child=s.child,u=null):(s=pe.treeContext,Fr=vo(ee.nextSibling),Ra=u,jn=!0,Hu=null,po=!1,s!==null&&EO(u,s),u=Vw(u,w.children),u.flags|=4096);return u}return C?(Zu(),ee=w.fallback,C=u.mode,pe=s.child,De=pe.sibling,w=ql(pe,{mode:"hidden",children:w.children}),w.subtreeFlags=pe.subtreeFlags&65011712,De!==null?ee=ql(De,ee):(ee=hf(ee,C,g,null),ee.flags|=2),ee.return=u,w.return=u,w.sibling=ee,u.child=w,ag(null,w),w=u.child,ee=s.child.memoizedState,ee===null?ee=Bw(g):(C=ee.cachePool,C!==null?(pe=Mi._currentValue,C=C.parent!==pe?{parent:pe,pool:pe}:C):C=OO(),ee={baseLanes:ee.baseLanes|g,cachePool:C}),w.memoizedState=ee,w.childLanes=Fw(s,q,g),u.memoizedState=Lw,ag(s.child,w)):(Qu(u),g=s.child,s=g.sibling,g=ql(g,{mode:"visible",children:w.children}),g.return=u,g.sibling=null,s!==null&&(q=u.deletions,q===null?(u.deletions=[s],u.flags|=16):q.push(s)),u.child=g,u.memoizedState=null,g)}function Vw(s,u){return u=u1({mode:"visible",children:u},s.mode),u.return=s,s.child=u}function u1(s,u){return s=Ks(22,s,null,u),s.lanes=0,s}function zw(s,u,g){return bf(u,s.child,null,g),s=Vw(u,u.pendingProps.children),s.flags|=2,u.memoizedState=null,s}function U3(s,u,g){s.lanes|=u;var w=s.alternate;w!==null&&(w.lanes|=u),nw(s.return,u,g)}function Uw(s,u,g,w,C,P){var q=s.memoizedState;q===null?s.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:w,tail:g,tailMode:C,treeForkCount:P}:(q.isBackwards=u,q.rendering=null,q.renderingStartTime=0,q.last=w,q.tail=g,q.tailMode=C,q.treeForkCount=P)}function q3(s,u,g){var w=u.pendingProps,C=w.revealOrder,P=w.tail;w=w.children;var q=Ei.current,ee=(q&2)!==0;if(ee?(q=q&1|2,u.flags|=128):q&=1,Xe(Ei,q),Da(s,u,w,g),w=jn?Km:0,!ee&&s!==null&&(s.flags&128)!==0)e:for(s=u.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&U3(s,g,u);else if(s.tag===19)U3(s,g,u);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===u)break e;for(;s.sibling===null;){if(s.return===null||s.return===u)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(C){case"forwards":for(g=u.child,C=null;g!==null;)s=g.alternate,s!==null&&Q0(s)===null&&(C=g),g=g.sibling;g=C,g===null?(C=u.child,u.child=null):(C=g.sibling,g.sibling=null),Uw(u,!1,C,g,P,w);break;case"backwards":case"unstable_legacy-backwards":for(g=null,C=u.child,u.child=null;C!==null;){if(s=C.alternate,s!==null&&Q0(s)===null){u.child=C;break}s=C.sibling,C.sibling=g,g=C,C=s}Uw(u,!0,g,null,P,w);break;case"together":Uw(u,!1,null,null,void 0,w);break;default:u.memoizedState=null}return u.child}function Yl(s,u,g){if(s!==null&&(u.dependencies=s.dependencies),tc|=u.lanes,(g&u.childLanes)===0)if(s!==null){if(Vd(s,u,g,!1),(g&u.childLanes)===0)return null}else return null;if(s!==null&&u.child!==s.child)throw Error(r(153));if(u.child!==null){for(s=u.child,g=ql(s,s.pendingProps),u.child=g,g.return=u;s.sibling!==null;)s=s.sibling,g=g.sibling=ql(s,s.pendingProps),g.return=u;g.sibling=null}return u.child}function qw(s,u){return(s.lanes&u)!==0?!0:(s=s.dependencies,!!(s!==null&&q0(s)))}function Bq(s,u,g){switch(u.tag){case 3:ct(u,u.stateNode.containerInfo),Wu(u,Mi,s.memoizedState.cache),mf();break;case 27:case 5:Oe(u);break;case 4:ct(u,u.stateNode.containerInfo);break;case 10:Wu(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,mw(u),null;break;case 13:var w=u.memoizedState;if(w!==null)return w.dehydrated!==null?(Qu(u),u.flags|=128,null):(g&u.child.childLanes)!==0?z3(s,u,g):(Qu(u),s=Yl(s,u,g),s!==null?s.sibling:null);Qu(u);break;case 19:var C=(s.flags&128)!==0;if(w=(g&u.childLanes)!==0,w||(Vd(s,u,g,!1),w=(g&u.childLanes)!==0),C){if(w)return q3(s,u,g);u.flags|=128}if(C=u.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Xe(Ei,Ei.current),w)break;return null;case 22:return u.lanes=0,M3(s,u,g,u.pendingProps);case 24:Wu(u,Mi,s.memoizedState.cache)}return Yl(s,u,g)}function G3(s,u,g){if(s!==null)if(s.memoizedProps!==u.pendingProps)Li=!0;else{if(!qw(s,g)&&(u.flags&128)===0)return Li=!1,Bq(s,u,g);Li=(s.flags&131072)!==0}else Li=!1,jn&&(u.flags&1048576)!==0&&_O(u,Km,u.index);switch(u.lanes=0,u.tag){case 16:e:{var w=u.pendingProps;if(s=vf(u.elementType),u.type=s,typeof s=="function")$b(s)?(w=_f(s,w),u.tag=1,u=F3(null,u,s,w,g)):(u.tag=0,u=jw(null,u,s,w,g));else{if(s!=null){var C=s.$$typeof;if(C===J){u.tag=11,u=P3(null,u,s,w,g);break e}else if(C===V){u.tag=14,u=D3(null,u,s,w,g);break e}}throw u=be(s)||s,Error(r(306,u,""))}}return u;case 0:return jw(s,u,u.type,u.pendingProps,g);case 1:return w=u.type,C=_f(w,u.pendingProps),F3(s,u,w,C,g);case 3:e:{if(ct(u,u.stateNode.containerInfo),s===null)throw Error(r(387));w=u.pendingProps;var P=u.memoizedState;C=P.element,uw(s,u),eg(u,w,null,g);var q=u.memoizedState;if(w=q.cache,Wu(u,Mi,w),w!==P.cache&&rw(u,[Mi],g,!0),Jm(),w=q.element,P.isDehydrated)if(P={element:w,isDehydrated:!1,cache:q.cache},u.updateQueue.baseState=P,u.memoizedState=P,u.flags&256){u=V3(s,u,w,g);break e}else if(w!==C){C=ho(Error(r(424)),u),Wm(C),u=V3(s,u,w,g);break e}else for(s=u.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Fr=vo(s.firstChild),Ra=u,jn=!0,Hu=null,po=!0,g=MO(u,null,w,g),u.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(mf(),w===C){u=Yl(s,u,g);break e}Da(s,u,w,g)}u=u.child}return u;case 26:return l1(s,u),s===null?(g=tR(u.type,null,u.pendingProps,null))?u.memoizedState=g:jn||(g=u.type,s=u.pendingProps,w=S1(qe.current).createElement(g),w[Vn]=u,w[gn]=s,ka(w,g,s),Ar(w),u.stateNode=w):u.memoizedState=tR(u.type,s.memoizedProps,u.pendingProps,s.memoizedState),null;case 27:return Oe(u),s===null&&jn&&(w=u.stateNode=ZN(u.type,u.pendingProps,qe.current),Ra=u,po=!0,C=Fr,sc(u.type)?(__=C,Fr=vo(w.firstChild)):Fr=C),Da(s,u,u.pendingProps.children,g),l1(s,u),s===null&&(u.flags|=4194304),u.child;case 5:return s===null&&jn&&((C=w=Fr)&&(w=mG(w,u.type,u.pendingProps,po),w!==null?(u.stateNode=w,Ra=u,Fr=vo(w.firstChild),po=!1,C=!0):C=!1),C||Ku(u)),Oe(u),C=u.type,P=u.pendingProps,q=s!==null?s.memoizedProps:null,w=P.children,y_(C,P)?w=null:q!==null&&y_(C,q)&&(u.flags|=32),u.memoizedState!==null&&(C=pw(s,u,Oq,null,null,g),bg._currentValue=C),l1(s,u),Da(s,u,w,g),u.child;case 6:return s===null&&jn&&((s=g=Fr)&&(g=gG(g,u.pendingProps,po),g!==null?(u.stateNode=g,Ra=u,Fr=null,s=!0):s=!1),s||Ku(u)),null;case 13:return z3(s,u,g);case 4:return ct(u,u.stateNode.containerInfo),w=u.pendingProps,s===null?u.child=bf(u,null,w,g):Da(s,u,w,g),u.child;case 11:return P3(s,u,u.type,u.pendingProps,g);case 7:return Da(s,u,u.pendingProps,g),u.child;case 8:return Da(s,u,u.pendingProps.children,g),u.child;case 12:return Da(s,u,u.pendingProps.children,g),u.child;case 10:return w=u.pendingProps,Wu(u,u.type,w.value),Da(s,u,w.children,g),u.child;case 9:return C=u.type._context,w=u.pendingProps.children,pf(u),C=Pa(C),w=w(C),u.flags|=1,Da(s,u,w,g),u.child;case 14:return D3(s,u,u.type,u.pendingProps,g);case 15:return k3(s,u,u.type,u.pendingProps,g);case 19:return q3(s,u,g);case 31:return Lq(s,u,g);case 22:return M3(s,u,g,u.pendingProps);case 24:return pf(u),w=Pa(Mi),s===null?(C=sw(),C===null&&(C=Cr,P=iw(),C.pooledCache=P,P.refCount++,P!==null&&(C.pooledCacheLanes|=g),C=P),u.memoizedState={parent:w,cache:C},lw(u),Wu(u,Mi,C)):((s.lanes&g)!==0&&(uw(s,u),eg(u,null,null,g),Jm()),C=s.memoizedState,P=u.memoizedState,C.parent!==w?(C={parent:w,cache:w},u.memoizedState=C,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=C),Wu(u,Mi,w)):(w=P.cache,Wu(u,Mi,w),w!==C.cache&&rw(u,[Mi],g,!0))),Da(s,u,u.pendingProps.children,g),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Xl(s){s.flags|=4}function Gw(s,u,g,w,C){if((u=(s.mode&32)!==0)&&(u=!1),u){if(s.flags|=16777216,(C&335544128)===C)if(s.stateNode.complete)s.flags|=8192;else if(yN())s.flags|=8192;else throw xf=W0,ow}else s.flags&=-16777217}function H3(s,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!sR(u))if(yN())s.flags|=8192;else throw xf=W0,ow}function c1(s,u){u!==null&&(s.flags|=4),s.flags&16384&&(u=s.tag!==22?ii():536870912,s.lanes|=u,Zd|=u)}function sg(s,u){if(!jn)switch(s.tailMode){case"hidden":u=s.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?s.tail=null:g.sibling=null;break;case"collapsed":g=s.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?u||s.tail===null?s.tail=null:s.tail.sibling=null:w.sibling=null}}function Vr(s){var u=s.alternate!==null&&s.alternate.child===s.child,g=0,w=0;if(u)for(var C=s.child;C!==null;)g|=C.lanes|C.childLanes,w|=C.subtreeFlags&65011712,w|=C.flags&65011712,C.return=s,C=C.sibling;else for(C=s.child;C!==null;)g|=C.lanes|C.childLanes,w|=C.subtreeFlags,w|=C.flags,C.return=s,C=C.sibling;return s.subtreeFlags|=w,s.childLanes=g,u}function Fq(s,u,g){var w=u.pendingProps;switch(Zb(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(u),null;case 1:return Vr(u),null;case 3:return g=u.stateNode,w=null,s!==null&&(w=s.memoizedState.cache),u.memoizedState.cache!==w&&(u.flags|=2048),Kl(Mi),Se(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(Fd(u)?Xl(u):s===null||s.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,ew())),Vr(u),null;case 26:var C=u.type,P=u.memoizedState;return s===null?(Xl(u),P!==null?(Vr(u),H3(u,P)):(Vr(u),Gw(u,C,null,w,g))):P?P!==s.memoizedState?(Xl(u),Vr(u),H3(u,P)):(Vr(u),u.flags&=-16777217):(s=s.memoizedProps,s!==w&&Xl(u),Vr(u),Gw(u,C,s,w,g)),null;case 27:if(ft(u),g=qe.current,C=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==w&&Xl(u);else{if(!w){if(u.stateNode===null)throw Error(r(166));return Vr(u),null}s=Ge.current,Fd(u)?AO(u):(s=ZN(C,w,g),u.stateNode=s,Xl(u))}return Vr(u),null;case 5:if(ft(u),C=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==w&&Xl(u);else{if(!w){if(u.stateNode===null)throw Error(r(166));return Vr(u),null}if(P=Ge.current,Fd(u))AO(u);else{var q=S1(qe.current);switch(P){case 1:P=q.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:P=q.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":P=q.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":P=q.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":P=q.createElement("div"),P.innerHTML="<script><\/script>",P=P.removeChild(P.firstChild);break;case"select":P=typeof w.is=="string"?q.createElement("select",{is:w.is}):q.createElement("select"),w.multiple?P.multiple=!0:w.size&&(P.size=w.size);break;default:P=typeof w.is=="string"?q.createElement(C,{is:w.is}):q.createElement(C)}}P[Vn]=u,P[gn]=w;e:for(q=u.child;q!==null;){if(q.tag===5||q.tag===6)P.appendChild(q.stateNode);else if(q.tag!==4&&q.tag!==27&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===u)break e;for(;q.sibling===null;){if(q.return===null||q.return===u)break e;q=q.return}q.sibling.return=q.return,q=q.sibling}u.stateNode=P;e:switch(ka(P,C,w),C){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&Xl(u)}}return Vr(u),Gw(u,u.type,s===null?null:s.memoizedProps,u.pendingProps,g),null;case 6:if(s&&u.stateNode!=null)s.memoizedProps!==w&&Xl(u);else{if(typeof w!="string"&&u.stateNode===null)throw Error(r(166));if(s=qe.current,Fd(u)){if(s=u.stateNode,g=u.memoizedProps,w=null,C=Ra,C!==null)switch(C.tag){case 27:case 5:w=C.memoizedProps}s[Vn]=u,s=!!(s.nodeValue===g||w!==null&&w.suppressHydrationWarning===!0||zN(s.nodeValue,g)),s||Ku(u,!0)}else s=S1(s).createTextNode(w),s[Vn]=u,u.stateNode=s}return Vr(u),null;case 31:if(g=u.memoizedState,s===null||s.memoizedState!==null){if(w=Fd(u),g!==null){if(s===null){if(!w)throw Error(r(318));if(s=u.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Vn]=u}else mf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Vr(u),s=!1}else g=ew(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),s=!0;if(!s)return u.flags&256?($s(u),u):($s(u),null);if((u.flags&128)!==0)throw Error(r(558))}return Vr(u),null;case 13:if(w=u.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(C=Fd(u),w!==null&&w.dehydrated!==null){if(s===null){if(!C)throw Error(r(318));if(C=u.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[Vn]=u}else mf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Vr(u),C=!1}else C=ew(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=C),C=!0;if(!C)return u.flags&256?($s(u),u):($s(u),null)}return $s(u),(u.flags&128)!==0?(u.lanes=g,u):(g=w!==null,s=s!==null&&s.memoizedState!==null,g&&(w=u.child,C=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(C=w.alternate.memoizedState.cachePool.pool),P=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(P=w.memoizedState.cachePool.pool),P!==C&&(w.flags|=2048)),g!==s&&g&&(u.child.flags|=8192),c1(u,u.updateQueue),Vr(u),null);case 4:return Se(),s===null&&d_(u.stateNode.containerInfo),Vr(u),null;case 10:return Kl(u.type),Vr(u),null;case 19:if(Ee(Ei),w=u.memoizedState,w===null)return Vr(u),null;if(C=(u.flags&128)!==0,P=w.rendering,P===null)if(C)sg(w,!1);else{if(mi!==0||s!==null&&(s.flags&128)!==0)for(s=u.child;s!==null;){if(P=Q0(s),P!==null){for(u.flags|=128,sg(w,!1),s=P.updateQueue,u.updateQueue=s,c1(u,s),u.subtreeFlags=0,s=g,g=u.child;g!==null;)xO(g,s),g=g.sibling;return Xe(Ei,Ei.current&1|2),jn&&Gl(u,w.treeForkCount),u.child}s=s.sibling}w.tail!==null&&hr()>g1&&(u.flags|=128,C=!0,sg(w,!1),u.lanes=4194304)}else{if(!C)if(s=Q0(P),s!==null){if(u.flags|=128,C=!0,s=s.updateQueue,u.updateQueue=s,c1(u,s),sg(w,!0),w.tail===null&&w.tailMode==="hidden"&&!P.alternate&&!jn)return Vr(u),null}else 2*hr()-w.renderingStartTime>g1&&g!==536870912&&(u.flags|=128,C=!0,sg(w,!1),u.lanes=4194304);w.isBackwards?(P.sibling=u.child,u.child=P):(s=w.last,s!==null?s.sibling=P:u.child=P,w.last=P)}return w.tail!==null?(s=w.tail,w.rendering=s,w.tail=s.sibling,w.renderingStartTime=hr(),s.sibling=null,g=Ei.current,Xe(Ei,C?g&1|2:g&1),jn&&Gl(u,w.treeForkCount),s):(Vr(u),null);case 22:case 23:return $s(u),hw(),w=u.memoizedState!==null,s!==null?s.memoizedState!==null!==w&&(u.flags|=8192):w&&(u.flags|=8192),w?(g&536870912)!==0&&(u.flags&128)===0&&(Vr(u),u.subtreeFlags&6&&(u.flags|=8192)):Vr(u),g=u.updateQueue,g!==null&&c1(u,g.retryQueue),g=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),w=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(w=u.memoizedState.cachePool.pool),w!==g&&(u.flags|=2048),s!==null&&Ee(yf),null;case 24:return g=null,s!==null&&(g=s.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),Kl(Mi),Vr(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function Vq(s,u){switch(Zb(u),u.tag){case 1:return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 3:return Kl(Mi),Se(),s=u.flags,(s&65536)!==0&&(s&128)===0?(u.flags=s&-65537|128,u):null;case 26:case 27:case 5:return ft(u),null;case 31:if(u.memoizedState!==null){if($s(u),u.alternate===null)throw Error(r(340));mf()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 13:if($s(u),s=u.memoizedState,s!==null&&s.dehydrated!==null){if(u.alternate===null)throw Error(r(340));mf()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 19:return Ee(Ei),null;case 4:return Se(),null;case 10:return Kl(u.type),null;case 22:case 23:return $s(u),hw(),s!==null&&Ee(yf),s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 24:return Kl(Mi),null;case 25:return null;default:return null}}function K3(s,u){switch(Zb(u),u.tag){case 3:Kl(Mi),Se();break;case 26:case 27:case 5:ft(u);break;case 4:Se();break;case 31:u.memoizedState!==null&&$s(u);break;case 13:$s(u);break;case 19:Ee(Ei);break;case 10:Kl(u.type);break;case 22:case 23:$s(u),hw(),s!==null&&Ee(yf);break;case 24:Kl(Mi)}}function og(s,u){try{var g=u.updateQueue,w=g!==null?g.lastEffect:null;if(w!==null){var C=w.next;g=C;do{if((g.tag&s)===s){w=void 0;var P=g.create,q=g.inst;w=P(),q.destroy=w}g=g.next}while(g!==C)}}catch(ee){or(u,u.return,ee)}}function Ju(s,u,g){try{var w=u.updateQueue,C=w!==null?w.lastEffect:null;if(C!==null){var P=C.next;w=P;do{if((w.tag&s)===s){var q=w.inst,ee=q.destroy;if(ee!==void 0){q.destroy=void 0,C=u;var pe=g,De=ee;try{De()}catch(Ue){or(C,pe,Ue)}}}w=w.next}while(w!==P)}}catch(Ue){or(u,u.return,Ue)}}function W3(s){var u=s.updateQueue;if(u!==null){var g=s.stateNode;try{LO(u,g)}catch(w){or(s,s.return,w)}}}function $3(s,u,g){g.props=_f(s.type,s.memoizedProps),g.state=s.memoizedState;try{g.componentWillUnmount()}catch(w){or(s,u,w)}}function lg(s,u){try{var g=s.ref;if(g!==null){switch(s.tag){case 26:case 27:case 5:var w=s.stateNode;break;case 30:w=s.stateNode;break;default:w=s.stateNode}typeof g=="function"?s.refCleanup=g(w):g.current=w}}catch(C){or(s,u,C)}}function ul(s,u){var g=s.ref,w=s.refCleanup;if(g!==null)if(typeof w=="function")try{w()}catch(C){or(s,u,C)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(C){or(s,u,C)}else g.current=null}function Y3(s){var u=s.type,g=s.memoizedProps,w=s.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":g.autoFocus&&w.focus();break e;case"img":g.src?w.src=g.src:g.srcSet&&(w.srcset=g.srcSet)}}catch(C){or(s,s.return,C)}}function Hw(s,u,g){try{var w=s.stateNode;lG(w,s.type,g,u),w[gn]=u}catch(C){or(s,s.return,C)}}function X3(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&sc(s.type)||s.tag===4}function Kw(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||X3(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&sc(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ww(s,u,g){var w=s.tag;if(w===5||w===6)s=s.stateNode,u?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(s,u):(u=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,u.appendChild(s),g=g._reactRootContainer,g!=null||u.onclick!==null||(u.onclick=_i));else if(w!==4&&(w===27&&sc(s.type)&&(g=s.stateNode,u=null),s=s.child,s!==null))for(Ww(s,u,g),s=s.sibling;s!==null;)Ww(s,u,g),s=s.sibling}function f1(s,u,g){var w=s.tag;if(w===5||w===6)s=s.stateNode,u?g.insertBefore(s,u):g.appendChild(s);else if(w!==4&&(w===27&&sc(s.type)&&(g=s.stateNode),s=s.child,s!==null))for(f1(s,u,g),s=s.sibling;s!==null;)f1(s,u,g),s=s.sibling}function Q3(s){var u=s.stateNode,g=s.memoizedProps;try{for(var w=s.type,C=u.attributes;C.length;)u.removeAttributeNode(C[0]);ka(u,w,g),u[Vn]=s,u[gn]=g}catch(P){or(s,s.return,P)}}var Ql=!1,Bi=!1,$w=!1,Z3=typeof WeakSet=="function"?WeakSet:Set,ua=null;function zq(s,u){if(s=s.containerInfo,g_=P1,s=N(s),k(s)){if("selectionStart"in s)var g={start:s.selectionStart,end:s.selectionEnd};else e:{g=(g=s.ownerDocument)&&g.defaultView||window;var w=g.getSelection&&g.getSelection();if(w&&w.rangeCount!==0){g=w.anchorNode;var C=w.anchorOffset,P=w.focusNode;w=w.focusOffset;try{g.nodeType,P.nodeType}catch{g=null;break e}var q=0,ee=-1,pe=-1,De=0,Ue=0,Qe=s,Le=null;t:for(;;){for(var Ve;Qe!==g||C!==0&&Qe.nodeType!==3||(ee=q+C),Qe!==P||w!==0&&Qe.nodeType!==3||(pe=q+w),Qe.nodeType===3&&(q+=Qe.nodeValue.length),(Ve=Qe.firstChild)!==null;)Le=Qe,Qe=Ve;for(;;){if(Qe===s)break t;if(Le===g&&++De===C&&(ee=q),Le===P&&++Ue===w&&(pe=q),(Ve=Qe.nextSibling)!==null)break;Qe=Le,Le=Qe.parentNode}Qe=Ve}g=ee===-1||pe===-1?null:{start:ee,end:pe}}else g=null}g=g||{start:0,end:0}}else g=null;for(p_={focusedElem:s,selectionRange:g},P1=!1,ua=u;ua!==null;)if(u=ua,s=u.child,(u.subtreeFlags&1028)!==0&&s!==null)s.return=u,ua=s;else for(;ua!==null;){switch(u=ua,P=u.alternate,s=u.flags,u.tag){case 0:if((s&4)!==0&&(s=u.updateQueue,s=s!==null?s.events:null,s!==null))for(g=0;g<s.length;g++)C=s[g],C.ref.impl=C.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&P!==null){s=void 0,g=u,C=P.memoizedProps,P=P.memoizedState,w=g.stateNode;try{var Ot=_f(g.type,C);s=w.getSnapshotBeforeUpdate(Ot,P),w.__reactInternalSnapshotBeforeUpdate=s}catch(Gt){or(g,g.return,Gt)}}break;case 3:if((s&1024)!==0){if(s=u.stateNode.containerInfo,g=s.nodeType,g===9)x_(s);else if(g===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":x_(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=u.sibling,s!==null){s.return=u.return,ua=s;break}ua=u.return}}function J3(s,u,g){var w=g.flags;switch(g.tag){case 0:case 11:case 15:Jl(s,g),w&4&&og(5,g);break;case 1:if(Jl(s,g),w&4)if(s=g.stateNode,u===null)try{s.componentDidMount()}catch(q){or(g,g.return,q)}else{var C=_f(g.type,u.memoizedProps);u=u.memoizedState;try{s.componentDidUpdate(C,u,s.__reactInternalSnapshotBeforeUpdate)}catch(q){or(g,g.return,q)}}w&64&&W3(g),w&512&&lg(g,g.return);break;case 3:if(Jl(s,g),w&64&&(s=g.updateQueue,s!==null)){if(u=null,g.child!==null)switch(g.child.tag){case 27:case 5:u=g.child.stateNode;break;case 1:u=g.child.stateNode}try{LO(s,u)}catch(q){or(g,g.return,q)}}break;case 27:u===null&&w&4&&Q3(g);case 26:case 5:Jl(s,g),u===null&&w&4&&Y3(g),w&512&&lg(g,g.return);break;case 12:Jl(s,g);break;case 31:Jl(s,g),w&4&&nN(s,g);break;case 13:Jl(s,g),w&4&&rN(s,g),w&64&&(s=g.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(g=Xq.bind(null,g),pG(s,g))));break;case 22:if(w=g.memoizedState!==null||Ql,!w){u=u!==null&&u.memoizedState!==null||Bi,C=Ql;var P=Bi;Ql=w,(Bi=u)&&!P?eu(s,g,(g.subtreeFlags&8772)!==0):Jl(s,g),Ql=C,Bi=P}break;case 30:break;default:Jl(s,g)}}function eN(s){var u=s.alternate;u!==null&&(s.alternate=null,eN(u)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(u=s.stateNode,u!==null&&Pi(u)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Xr=null,Ss=!1;function Zl(s,u,g){for(g=g.child;g!==null;)tN(s,u,g),g=g.sibling}function tN(s,u,g){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(In,g)}catch{}switch(g.tag){case 26:Bi||ul(g,u),Zl(s,u,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Bi||ul(g,u);var w=Xr,C=Ss;sc(g.type)&&(Xr=g.stateNode,Ss=!1),Zl(s,u,g),yg(g.stateNode),Xr=w,Ss=C;break;case 5:Bi||ul(g,u);case 6:if(w=Xr,C=Ss,Xr=null,Zl(s,u,g),Xr=w,Ss=C,Xr!==null)if(Ss)try{(Xr.nodeType===9?Xr.body:Xr.nodeName==="HTML"?Xr.ownerDocument.body:Xr).removeChild(g.stateNode)}catch(P){or(g,u,P)}else try{Xr.removeChild(g.stateNode)}catch(P){or(g,u,P)}break;case 18:Xr!==null&&(Ss?(s=Xr,WN(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,g.stateNode),sh(s)):WN(Xr,g.stateNode));break;case 4:w=Xr,C=Ss,Xr=g.stateNode.containerInfo,Ss=!0,Zl(s,u,g),Xr=w,Ss=C;break;case 0:case 11:case 14:case 15:Ju(2,g,u),Bi||Ju(4,g,u),Zl(s,u,g);break;case 1:Bi||(ul(g,u),w=g.stateNode,typeof w.componentWillUnmount=="function"&&$3(g,u,w)),Zl(s,u,g);break;case 21:Zl(s,u,g);break;case 22:Bi=(w=Bi)||g.memoizedState!==null,Zl(s,u,g),Bi=w;break;default:Zl(s,u,g)}}function nN(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{sh(s)}catch(g){or(u,u.return,g)}}}function rN(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{sh(s)}catch(g){or(u,u.return,g)}}function Uq(s){switch(s.tag){case 31:case 13:case 19:var u=s.stateNode;return u===null&&(u=s.stateNode=new Z3),u;case 22:return s=s.stateNode,u=s._retryCache,u===null&&(u=s._retryCache=new Z3),u;default:throw Error(r(435,s.tag))}}function d1(s,u){var g=Uq(s);u.forEach(function(w){if(!g.has(w)){g.add(w);var C=Qq.bind(null,s,w);w.then(C,C)}})}function Ts(s,u){var g=u.deletions;if(g!==null)for(var w=0;w<g.length;w++){var C=g[w],P=s,q=u,ee=q;e:for(;ee!==null;){switch(ee.tag){case 27:if(sc(ee.type)){Xr=ee.stateNode,Ss=!1;break e}break;case 5:Xr=ee.stateNode,Ss=!1;break e;case 3:case 4:Xr=ee.stateNode.containerInfo,Ss=!0;break e}ee=ee.return}if(Xr===null)throw Error(r(160));tN(P,q,C),Xr=null,Ss=!1,P=C.alternate,P!==null&&(P.return=null),C.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)iN(u,s),u=u.sibling}var Lo=null;function iN(s,u){var g=s.alternate,w=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ts(u,s),Is(s),w&4&&(Ju(3,s,s.return),og(3,s),Ju(5,s,s.return));break;case 1:Ts(u,s),Is(s),w&512&&(Bi||g===null||ul(g,g.return)),w&64&&Ql&&(s=s.updateQueue,s!==null&&(w=s.callbacks,w!==null&&(g=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=g===null?w:g.concat(w))));break;case 26:var C=Lo;if(Ts(u,s),Is(s),w&512&&(Bi||g===null||ul(g,g.return)),w&4){var P=g!==null?g.memoizedState:null;if(w=s.memoizedState,g===null)if(w===null)if(s.stateNode===null){e:{w=s.type,g=s.memoizedProps,C=C.ownerDocument||C;t:switch(w){case"title":P=C.getElementsByTagName("title")[0],(!P||P[Ri]||P[Vn]||P.namespaceURI==="http://www.w3.org/2000/svg"||P.hasAttribute("itemprop"))&&(P=C.createElement(w),C.head.insertBefore(P,C.querySelector("head > title"))),ka(P,w,g),P[Vn]=s,Ar(P),w=P;break e;case"link":var q=iR("link","href",C).get(w+(g.href||""));if(q){for(var ee=0;ee<q.length;ee++)if(P=q[ee],P.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&P.getAttribute("rel")===(g.rel==null?null:g.rel)&&P.getAttribute("title")===(g.title==null?null:g.title)&&P.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){q.splice(ee,1);break t}}P=C.createElement(w),ka(P,w,g),C.head.appendChild(P);break;case"meta":if(q=iR("meta","content",C).get(w+(g.content||""))){for(ee=0;ee<q.length;ee++)if(P=q[ee],P.getAttribute("content")===(g.content==null?null:""+g.content)&&P.getAttribute("name")===(g.name==null?null:g.name)&&P.getAttribute("property")===(g.property==null?null:g.property)&&P.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&P.getAttribute("charset")===(g.charSet==null?null:g.charSet)){q.splice(ee,1);break t}}P=C.createElement(w),ka(P,w,g),C.head.appendChild(P);break;default:throw Error(r(468,w))}P[Vn]=s,Ar(P),w=P}s.stateNode=w}else aR(C,s.type,s.stateNode);else s.stateNode=rR(C,w,s.memoizedProps);else P!==w?(P===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):P.count--,w===null?aR(C,s.type,s.stateNode):rR(C,w,s.memoizedProps)):w===null&&s.stateNode!==null&&Hw(s,s.memoizedProps,g.memoizedProps)}break;case 27:Ts(u,s),Is(s),w&512&&(Bi||g===null||ul(g,g.return)),g!==null&&w&4&&Hw(s,s.memoizedProps,g.memoizedProps);break;case 5:if(Ts(u,s),Is(s),w&512&&(Bi||g===null||ul(g,g.return)),s.flags&32){C=s.stateNode;try{Hi(C,"")}catch(Ot){or(s,s.return,Ot)}}w&4&&s.stateNode!=null&&(C=s.memoizedProps,Hw(s,C,g!==null?g.memoizedProps:C)),w&1024&&($w=!0);break;case 6:if(Ts(u,s),Is(s),w&4){if(s.stateNode===null)throw Error(r(162));w=s.memoizedProps,g=s.stateNode;try{g.nodeValue=w}catch(Ot){or(s,s.return,Ot)}}break;case 3:if(C1=null,C=Lo,Lo=T1(u.containerInfo),Ts(u,s),Lo=C,Is(s),w&4&&g!==null&&g.memoizedState.isDehydrated)try{sh(u.containerInfo)}catch(Ot){or(s,s.return,Ot)}$w&&($w=!1,aN(s));break;case 4:w=Lo,Lo=T1(s.stateNode.containerInfo),Ts(u,s),Is(s),Lo=w;break;case 12:Ts(u,s),Is(s);break;case 31:Ts(u,s),Is(s),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,d1(s,w)));break;case 13:Ts(u,s),Is(s),s.child.flags&8192&&s.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(m1=hr()),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,d1(s,w)));break;case 22:C=s.memoizedState!==null;var pe=g!==null&&g.memoizedState!==null,De=Ql,Ue=Bi;if(Ql=De||C,Bi=Ue||pe,Ts(u,s),Bi=Ue,Ql=De,Is(s),w&8192)e:for(u=s.stateNode,u._visibility=C?u._visibility&-2:u._visibility|1,C&&(g===null||pe||Ql||Bi||Ef(s)),g=null,u=s;;){if(u.tag===5||u.tag===26){if(g===null){pe=g=u;try{if(P=pe.stateNode,C)q=P.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none";else{ee=pe.stateNode;var Qe=pe.memoizedProps.style,Le=Qe!=null&&Qe.hasOwnProperty("display")?Qe.display:null;ee.style.display=Le==null||typeof Le=="boolean"?"":(""+Le).trim()}}catch(Ot){or(pe,pe.return,Ot)}}}else if(u.tag===6){if(g===null){pe=u;try{pe.stateNode.nodeValue=C?"":pe.memoizedProps}catch(Ot){or(pe,pe.return,Ot)}}}else if(u.tag===18){if(g===null){pe=u;try{var Ve=pe.stateNode;C?$N(Ve,!0):$N(pe.stateNode,!1)}catch(Ot){or(pe,pe.return,Ot)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===s)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break e;for(;u.sibling===null;){if(u.return===null||u.return===s)break e;g===u&&(g=null),u=u.return}g===u&&(g=null),u.sibling.return=u.return,u=u.sibling}w&4&&(w=s.updateQueue,w!==null&&(g=w.retryQueue,g!==null&&(w.retryQueue=null,d1(s,g))));break;case 19:Ts(u,s),Is(s),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,d1(s,w)));break;case 30:break;case 21:break;default:Ts(u,s),Is(s)}}function Is(s){var u=s.flags;if(u&2){try{for(var g,w=s.return;w!==null;){if(X3(w)){g=w;break}w=w.return}if(g==null)throw Error(r(160));switch(g.tag){case 27:var C=g.stateNode,P=Kw(s);f1(s,P,C);break;case 5:var q=g.stateNode;g.flags&32&&(Hi(q,""),g.flags&=-33);var ee=Kw(s);f1(s,ee,q);break;case 3:case 4:var pe=g.stateNode.containerInfo,De=Kw(s);Ww(s,De,pe);break;default:throw Error(r(161))}}catch(Ue){or(s,s.return,Ue)}s.flags&=-3}u&4096&&(s.flags&=-4097)}function aN(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var u=s;aN(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),s=s.sibling}}function Jl(s,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)J3(s,u.alternate,u),u=u.sibling}function Ef(s){for(s=s.child;s!==null;){var u=s;switch(u.tag){case 0:case 11:case 14:case 15:Ju(4,u,u.return),Ef(u);break;case 1:ul(u,u.return);var g=u.stateNode;typeof g.componentWillUnmount=="function"&&$3(u,u.return,g),Ef(u);break;case 27:yg(u.stateNode);case 26:case 5:ul(u,u.return),Ef(u);break;case 22:u.memoizedState===null&&Ef(u);break;case 30:Ef(u);break;default:Ef(u)}s=s.sibling}}function eu(s,u,g){for(g=g&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var w=u.alternate,C=s,P=u,q=P.flags;switch(P.tag){case 0:case 11:case 15:eu(C,P,g),og(4,P);break;case 1:if(eu(C,P,g),w=P,C=w.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(De){or(w,w.return,De)}if(w=P,C=w.updateQueue,C!==null){var ee=w.stateNode;try{var pe=C.shared.hiddenCallbacks;if(pe!==null)for(C.shared.hiddenCallbacks=null,C=0;C<pe.length;C++)jO(pe[C],ee)}catch(De){or(w,w.return,De)}}g&&q&64&&W3(P),lg(P,P.return);break;case 27:Q3(P);case 26:case 5:eu(C,P,g),g&&w===null&&q&4&&Y3(P),lg(P,P.return);break;case 12:eu(C,P,g);break;case 31:eu(C,P,g),g&&q&4&&nN(C,P);break;case 13:eu(C,P,g),g&&q&4&&rN(C,P);break;case 22:P.memoizedState===null&&eu(C,P,g),lg(P,P.return);break;case 30:break;default:eu(C,P,g)}u=u.sibling}}function Yw(s,u){var g=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),s=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(s=u.memoizedState.cachePool.pool),s!==g&&(s!=null&&s.refCount++,g!=null&&$m(g))}function Xw(s,u){s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&$m(s))}function Bo(s,u,g,w){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)sN(s,u,g,w),u=u.sibling}function sN(s,u,g,w){var C=u.flags;switch(u.tag){case 0:case 11:case 15:Bo(s,u,g,w),C&2048&&og(9,u);break;case 1:Bo(s,u,g,w);break;case 3:Bo(s,u,g,w),C&2048&&(s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&$m(s)));break;case 12:if(C&2048){Bo(s,u,g,w),s=u.stateNode;try{var P=u.memoizedProps,q=P.id,ee=P.onPostCommit;typeof ee=="function"&&ee(q,u.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(pe){or(u,u.return,pe)}}else Bo(s,u,g,w);break;case 31:Bo(s,u,g,w);break;case 13:Bo(s,u,g,w);break;case 23:break;case 22:P=u.stateNode,q=u.alternate,u.memoizedState!==null?P._visibility&2?Bo(s,u,g,w):ug(s,u):P._visibility&2?Bo(s,u,g,w):(P._visibility|=2,Yd(s,u,g,w,(u.subtreeFlags&10256)!==0||!1)),C&2048&&Yw(q,u);break;case 24:Bo(s,u,g,w),C&2048&&Xw(u.alternate,u);break;default:Bo(s,u,g,w)}}function Yd(s,u,g,w,C){for(C=C&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var P=s,q=u,ee=g,pe=w,De=q.flags;switch(q.tag){case 0:case 11:case 15:Yd(P,q,ee,pe,C),og(8,q);break;case 23:break;case 22:var Ue=q.stateNode;q.memoizedState!==null?Ue._visibility&2?Yd(P,q,ee,pe,C):ug(P,q):(Ue._visibility|=2,Yd(P,q,ee,pe,C)),C&&De&2048&&Yw(q.alternate,q);break;case 24:Yd(P,q,ee,pe,C),C&&De&2048&&Xw(q.alternate,q);break;default:Yd(P,q,ee,pe,C)}u=u.sibling}}function ug(s,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var g=s,w=u,C=w.flags;switch(w.tag){case 22:ug(g,w),C&2048&&Yw(w.alternate,w);break;case 24:ug(g,w),C&2048&&Xw(w.alternate,w);break;default:ug(g,w)}u=u.sibling}}var cg=8192;function Xd(s,u,g){if(s.subtreeFlags&cg)for(s=s.child;s!==null;)oN(s,u,g),s=s.sibling}function oN(s,u,g){switch(s.tag){case 26:Xd(s,u,g),s.flags&cg&&s.memoizedState!==null&&CG(g,Lo,s.memoizedState,s.memoizedProps);break;case 5:Xd(s,u,g);break;case 3:case 4:var w=Lo;Lo=T1(s.stateNode.containerInfo),Xd(s,u,g),Lo=w;break;case 22:s.memoizedState===null&&(w=s.alternate,w!==null&&w.memoizedState!==null?(w=cg,cg=16777216,Xd(s,u,g),cg=w):Xd(s,u,g));break;default:Xd(s,u,g)}}function lN(s){var u=s.alternate;if(u!==null&&(s=u.child,s!==null)){u.child=null;do u=s.sibling,s.sibling=null,s=u;while(s!==null)}}function fg(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var w=u[g];ua=w,cN(w,s)}lN(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)uN(s),s=s.sibling}function uN(s){switch(s.tag){case 0:case 11:case 15:fg(s),s.flags&2048&&Ju(9,s,s.return);break;case 3:fg(s);break;case 12:fg(s);break;case 22:var u=s.stateNode;s.memoizedState!==null&&u._visibility&2&&(s.return===null||s.return.tag!==13)?(u._visibility&=-3,h1(s)):fg(s);break;default:fg(s)}}function h1(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var w=u[g];ua=w,cN(w,s)}lN(s)}for(s=s.child;s!==null;){switch(u=s,u.tag){case 0:case 11:case 15:Ju(8,u,u.return),h1(u);break;case 22:g=u.stateNode,g._visibility&2&&(g._visibility&=-3,h1(u));break;default:h1(u)}s=s.sibling}}function cN(s,u){for(;ua!==null;){var g=ua;switch(g.tag){case 0:case 11:case 15:Ju(8,g,u);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var w=g.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:$m(g.memoizedState.cache)}if(w=g.child,w!==null)w.return=g,ua=w;else e:for(g=s;ua!==null;){w=ua;var C=w.sibling,P=w.return;if(eN(w),w===g){ua=null;break e}if(C!==null){C.return=P,ua=C;break e}ua=P}}}var qq={getCacheForType:function(s){var u=Pa(Mi),g=u.data.get(s);return g===void 0&&(g=s(),u.data.set(s,g)),g},cacheSignal:function(){return Pa(Mi).controller.signal}},Gq=typeof WeakMap=="function"?WeakMap:Map,Xn=0,Cr=null,On=null,Rn=0,sr=0,Ys=null,ec=!1,Qd=!1,Qw=!1,tu=0,mi=0,tc=0,Af=0,Zw=0,Xs=0,Zd=0,dg=null,Cs=null,Jw=!1,m1=0,fN=0,g1=1/0,p1=null,nc=null,Ki=0,rc=null,Jd=null,nu=0,e_=0,t_=null,dN=null,hg=0,n_=null;function Qs(){return(Xn&2)!==0&&Rn!==0?Rn&-Rn:ye.T!==null?l_():fi()}function hN(){if(Xs===0)if((Rn&536870912)===0||jn){var s=tn;tn<<=1,(tn&3932160)===0&&(tn=262144),Xs=s}else Xs=536870912;return s=Ws.current,s!==null&&(s.flags|=32),Xs}function Os(s,u,g){(s===Cr&&(sr===2||sr===9)||s.cancelPendingCommit!==null)&&(eh(s,0),ic(s,Rn,Xs,!1)),qi(s,g),((Xn&2)===0||s!==Cr)&&(s===Cr&&((Xn&2)===0&&(Af|=g),mi===4&&ic(s,Rn,Xs,!1)),cl(s))}function mN(s,u,g){if((Xn&6)!==0)throw Error(r(327));var w=!g&&(u&127)===0&&(u&s.expiredLanes)===0||Er(s,u),C=w?Wq(s,u):i_(s,u,!0),P=w;do{if(C===0){Qd&&!w&&ic(s,u,0,!1);break}else{if(g=s.current.alternate,P&&!Hq(g)){C=i_(s,u,!1),P=!1;continue}if(C===2){if(P=u,s.errorRecoveryDisabledLanes&P)var q=0;else q=s.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){u=q;e:{var ee=s;C=dg;var pe=ee.current.memoizedState.isDehydrated;if(pe&&(eh(ee,q).flags|=256),q=i_(ee,q,!1),q!==2){if(Qw&&!pe){ee.errorRecoveryDisabledLanes|=P,Af|=P,C=4;break e}P=Cs,Cs=C,P!==null&&(Cs===null?Cs=P:Cs.push.apply(Cs,P))}C=q}if(P=!1,C!==2)continue}}if(C===1){eh(s,0),ic(s,u,0,!0);break}e:{switch(w=s,P=C,P){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:ic(w,u,Xs,!ec);break e;case 2:Cs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(C=m1+300-hr(),10<C)){if(ic(w,u,Xs,!ec),Va(w,0,!0)!==0)break e;nu=u,w.timeoutHandle=HN(gN.bind(null,w,g,Cs,p1,Jw,u,Xs,Af,Zd,ec,P,"Throttled",-0,0),C);break e}gN(w,g,Cs,p1,Jw,u,Xs,Af,Zd,ec,P,null,-0,0)}}break}while(!0);cl(s)}function gN(s,u,g,w,C,P,q,ee,pe,De,Ue,Qe,Le,Ve){if(s.timeoutHandle=-1,Qe=u.subtreeFlags,Qe&8192||(Qe&16785408)===16785408){Qe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_i},oN(u,P,Qe);var Ot=(P&62914560)===P?m1-hr():(P&4194048)===P?fN-hr():0;if(Ot=OG(Qe,Ot),Ot!==null){nu=P,s.cancelPendingCommit=Ot(EN.bind(null,s,u,P,g,w,C,q,ee,pe,Ue,Qe,null,Le,Ve)),ic(s,P,q,!De);return}}EN(s,u,P,g,w,C,q,ee,pe)}function Hq(s){for(var u=s;;){var g=u.tag;if((g===0||g===11||g===15)&&u.flags&16384&&(g=u.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var w=0;w<g.length;w++){var C=g[w],P=C.getSnapshot;C=C.value;try{if(!E(P(),C))return!1}catch{return!1}}if(g=u.child,u.subtreeFlags&16384&&g!==null)g.return=u,u=g;else{if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ic(s,u,g,w){u&=~Zw,u&=~Af,s.suspendedLanes|=u,s.pingedLanes&=~u,w&&(s.warmLanes|=u),w=s.expirationTimes;for(var C=u;0<C;){var P=31-Je(C),q=1<<P;w[P]=-1,C&=~q}g!==0&&ys(s,g,u)}function y1(){return(Xn&6)===0?(mg(0),!1):!0}function r_(){if(On!==null){if(sr===0)var s=On.return;else s=On,Hl=gf=null,xw(s),Gd=null,Xm=0,s=On;for(;s!==null;)K3(s.alternate,s),s=s.return;On=null}}function eh(s,u){var g=s.timeoutHandle;g!==-1&&(s.timeoutHandle=-1,fG(g)),g=s.cancelPendingCommit,g!==null&&(s.cancelPendingCommit=null,g()),nu=0,r_(),Cr=s,On=g=ql(s.current,null),Rn=u,sr=0,Ys=null,ec=!1,Qd=Er(s,u),Qw=!1,Zd=Xs=Zw=Af=tc=mi=0,Cs=dg=null,Jw=!1,(u&8)!==0&&(u|=u&32);var w=s.entangledLanes;if(w!==0)for(s=s.entanglements,w&=u;0<w;){var C=31-Je(w),P=1<<C;u|=s[C],w&=~P}return tu=u,Jt(),g}function pN(s,u){un=null,ye.H=ig,u===qd||u===K0?(u=PO(),sr=3):u===ow?(u=PO(),sr=4):sr=u===Mw?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ys=u,On===null&&(mi=1,s1(s,ho(u,s.current)))}function yN(){var s=Ws.current;return s===null?!0:(Rn&4194048)===Rn?yo===null:(Rn&62914560)===Rn||(Rn&536870912)!==0?s===yo:!1}function vN(){var s=ye.H;return ye.H=ig,s===null?ig:s}function xN(){var s=ye.A;return ye.A=qq,s}function v1(){mi=4,ec||(Rn&4194048)!==Rn&&Ws.current!==null||(Qd=!0),(tc&134217727)===0&&(Af&134217727)===0||Cr===null||ic(Cr,Rn,Xs,!1)}function i_(s,u,g){var w=Xn;Xn|=2;var C=vN(),P=xN();(Cr!==s||Rn!==u)&&(p1=null,eh(s,u)),u=!1;var q=mi;e:do try{if(sr!==0&&On!==null){var ee=On,pe=Ys;switch(sr){case 8:r_(),q=6;break e;case 3:case 2:case 9:case 6:Ws.current===null&&(u=!0);var De=sr;if(sr=0,Ys=null,th(s,ee,pe,De),g&&Qd){q=0;break e}break;default:De=sr,sr=0,Ys=null,th(s,ee,pe,De)}}Kq(),q=mi;break}catch(Ue){pN(s,Ue)}while(!0);return u&&s.shellSuspendCounter++,Hl=gf=null,Xn=w,ye.H=C,ye.A=P,On===null&&(Cr=null,Rn=0,Jt()),q}function Kq(){for(;On!==null;)bN(On)}function Wq(s,u){var g=Xn;Xn|=2;var w=vN(),C=xN();Cr!==s||Rn!==u?(p1=null,g1=hr()+500,eh(s,u)):Qd=Er(s,u);e:do try{if(sr!==0&&On!==null){u=On;var P=Ys;t:switch(sr){case 1:sr=0,Ys=null,th(s,u,P,1);break;case 2:case 9:if(NO(P)){sr=0,Ys=null,wN(u);break}u=function(){sr!==2&&sr!==9||Cr!==s||(sr=7),cl(s)},P.then(u,u);break e;case 3:sr=7;break e;case 4:sr=5;break e;case 7:NO(P)?(sr=0,Ys=null,wN(u)):(sr=0,Ys=null,th(s,u,P,7));break;case 5:var q=null;switch(On.tag){case 26:q=On.memoizedState;case 5:case 27:var ee=On;if(q?sR(q):ee.stateNode.complete){sr=0,Ys=null;var pe=ee.sibling;if(pe!==null)On=pe;else{var De=ee.return;De!==null?(On=De,x1(De)):On=null}break t}}sr=0,Ys=null,th(s,u,P,5);break;case 6:sr=0,Ys=null,th(s,u,P,6);break;case 8:r_(),mi=6;break e;default:throw Error(r(462))}}$q();break}catch(Ue){pN(s,Ue)}while(!0);return Hl=gf=null,ye.H=w,ye.A=C,Xn=g,On!==null?0:(Cr=null,Rn=0,Jt(),mi)}function $q(){for(;On!==null&&!na();)bN(On)}function bN(s){var u=G3(s.alternate,s,tu);s.memoizedProps=s.pendingProps,u===null?x1(s):On=u}function wN(s){var u=s,g=u.alternate;switch(u.tag){case 15:case 0:u=B3(g,u,u.pendingProps,u.type,void 0,Rn);break;case 11:u=B3(g,u,u.pendingProps,u.type.render,u.ref,Rn);break;case 5:xw(u);default:K3(g,u),u=On=xO(u,tu),u=G3(g,u,tu)}s.memoizedProps=s.pendingProps,u===null?x1(s):On=u}function th(s,u,g,w){Hl=gf=null,xw(u),Gd=null,Xm=0;var C=u.return;try{if(jq(s,C,u,g,Rn)){mi=1,s1(s,ho(g,s.current)),On=null;return}}catch(P){if(C!==null)throw On=C,P;mi=1,s1(s,ho(g,s.current)),On=null;return}u.flags&32768?(jn||w===1?s=!0:Qd||(Rn&536870912)!==0?s=!1:(ec=s=!0,(w===2||w===9||w===3||w===6)&&(w=Ws.current,w!==null&&w.tag===13&&(w.flags|=16384))),_N(u,s)):x1(u)}function x1(s){var u=s;do{if((u.flags&32768)!==0){_N(u,ec);return}s=u.return;var g=Fq(u.alternate,u,tu);if(g!==null){On=g;return}if(u=u.sibling,u!==null){On=u;return}On=u=s}while(u!==null);mi===0&&(mi=5)}function _N(s,u){do{var g=Vq(s.alternate,s);if(g!==null){g.flags&=32767,On=g;return}if(g=s.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!u&&(s=s.sibling,s!==null)){On=s;return}On=s=g}while(s!==null);mi=6,On=null}function EN(s,u,g,w,C,P,q,ee,pe){s.cancelPendingCommit=null;do b1();while(Ki!==0);if((Xn&6)!==0)throw Error(r(327));if(u!==null){if(u===s.current)throw Error(r(177));if(P=u.lanes|u.childLanes,P|=Ft,ra(s,g,P,q,ee,pe),s===Cr&&(On=Cr=null,Rn=0),Jd=u,rc=s,nu=g,e_=P,t_=C,dN=w,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Zq(bi,function(){return CN(),null})):(s.callbackNode=null,s.callbackPriority=0),w=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||w){w=ye.T,ye.T=null,C=we.p,we.p=2,q=Xn,Xn|=4;try{zq(s,u,g)}finally{Xn=q,we.p=C,ye.T=w}}Ki=1,AN(),SN(),TN()}}function AN(){if(Ki===1){Ki=0;var s=rc,u=Jd,g=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||g){g=ye.T,ye.T=null;var w=we.p;we.p=2;var C=Xn;Xn|=4;try{iN(u,s);var P=p_,q=N(s.containerInfo),ee=P.focusedElem,pe=P.selectionRange;if(q!==ee&&ee&&ee.ownerDocument&&I(ee.ownerDocument.documentElement,ee)){if(pe!==null&&k(ee)){var De=pe.start,Ue=pe.end;if(Ue===void 0&&(Ue=De),"selectionStart"in ee)ee.selectionStart=De,ee.selectionEnd=Math.min(Ue,ee.value.length);else{var Qe=ee.ownerDocument||document,Le=Qe&&Qe.defaultView||window;if(Le.getSelection){var Ve=Le.getSelection(),Ot=ee.textContent.length,Gt=Math.min(pe.start,Ot),vr=pe.end===void 0?Gt:Math.min(pe.end,Ot);!Ve.extend&&Gt>vr&&(q=vr,vr=Gt,Gt=q);var Ae=A(ee,Gt),ve=A(ee,vr);if(Ae&&ve&&(Ve.rangeCount!==1||Ve.anchorNode!==Ae.node||Ve.anchorOffset!==Ae.offset||Ve.focusNode!==ve.node||Ve.focusOffset!==ve.offset)){var Pe=Qe.createRange();Pe.setStart(Ae.node,Ae.offset),Ve.removeAllRanges(),Gt>vr?(Ve.addRange(Pe),Ve.extend(ve.node,ve.offset)):(Pe.setEnd(ve.node,ve.offset),Ve.addRange(Pe))}}}}for(Qe=[],Ve=ee;Ve=Ve.parentNode;)Ve.nodeType===1&&Qe.push({element:Ve,left:Ve.scrollLeft,top:Ve.scrollTop});for(typeof ee.focus=="function"&&ee.focus(),ee=0;ee<Qe.length;ee++){var We=Qe[ee];We.element.scrollLeft=We.left,We.element.scrollTop=We.top}}P1=!!g_,p_=g_=null}finally{Xn=C,we.p=w,ye.T=g}}s.current=u,Ki=2}}function SN(){if(Ki===2){Ki=0;var s=rc,u=Jd,g=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||g){g=ye.T,ye.T=null;var w=we.p;we.p=2;var C=Xn;Xn|=4;try{J3(s,u.alternate,u)}finally{Xn=C,we.p=w,ye.T=g}}Ki=3}}function TN(){if(Ki===4||Ki===3){Ki=0,zs();var s=rc,u=Jd,g=nu,w=dN;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Ki=5:(Ki=0,Jd=rc=null,IN(s,s.pendingLanes));var C=s.pendingLanes;if(C===0&&(nc=null),ci(g),u=u.stateNode,at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(In,u,void 0,(u.current.flags&128)===128)}catch{}if(w!==null){u=ye.T,C=we.p,we.p=2,ye.T=null;try{for(var P=s.onRecoverableError,q=0;q<w.length;q++){var ee=w[q];P(ee.value,{componentStack:ee.stack})}}finally{ye.T=u,we.p=C}}(nu&3)!==0&&b1(),cl(s),C=s.pendingLanes,(g&261930)!==0&&(C&42)!==0?s===n_?hg++:(hg=0,n_=s):hg=0,mg(0)}}function IN(s,u){(s.pooledCacheLanes&=u)===0&&(u=s.pooledCache,u!=null&&(s.pooledCache=null,$m(u)))}function b1(){return AN(),SN(),TN(),CN()}function CN(){if(Ki!==5)return!1;var s=rc,u=e_;e_=0;var g=ci(nu),w=ye.T,C=we.p;try{we.p=32>g?32:g,ye.T=null,g=t_,t_=null;var P=rc,q=nu;if(Ki=0,Jd=rc=null,nu=0,(Xn&6)!==0)throw Error(r(331));var ee=Xn;if(Xn|=4,uN(P.current),sN(P,P.current,q,g),Xn=ee,mg(0,!1),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(In,P)}catch{}return!0}finally{we.p=C,ye.T=w,IN(s,u)}}function ON(s,u,g){u=ho(g,u),u=kw(s.stateNode,u,2),s=Xu(s,u,2),s!==null&&(qi(s,2),cl(s))}function or(s,u,g){if(s.tag===3)ON(s,s,g);else for(;u!==null;){if(u.tag===3){ON(u,s,g);break}else if(u.tag===1){var w=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(nc===null||!nc.has(w))){s=ho(g,s),g=N3(2),w=Xu(u,g,2),w!==null&&(R3(g,w,u,s),qi(w,2),cl(w));break}}u=u.return}}function a_(s,u,g){var w=s.pingCache;if(w===null){w=s.pingCache=new Gq;var C=new Set;w.set(u,C)}else C=w.get(u),C===void 0&&(C=new Set,w.set(u,C));C.has(g)||(Qw=!0,C.add(g),s=Yq.bind(null,s,u,g),u.then(s,s))}function Yq(s,u,g){var w=s.pingCache;w!==null&&w.delete(u),s.pingedLanes|=s.suspendedLanes&g,s.warmLanes&=~g,Cr===s&&(Rn&g)===g&&(mi===4||mi===3&&(Rn&62914560)===Rn&&300>hr()-m1?(Xn&2)===0&&eh(s,0):Zw|=g,Zd===Rn&&(Zd=0)),cl(s)}function NN(s,u){u===0&&(u=ii()),s=tr(s,u),s!==null&&(qi(s,u),cl(s))}function Xq(s){var u=s.memoizedState,g=0;u!==null&&(g=u.retryLane),NN(s,g)}function Qq(s,u){var g=0;switch(s.tag){case 31:case 13:var w=s.stateNode,C=s.memoizedState;C!==null&&(g=C.retryLane);break;case 19:w=s.stateNode;break;case 22:w=s.stateNode._retryCache;break;default:throw Error(r(314))}w!==null&&w.delete(u),NN(s,g)}function Zq(s,u){return $t(s,u)}var w1=null,nh=null,s_=!1,_1=!1,o_=!1,ac=0;function cl(s){s!==nh&&s.next===null&&(nh===null?w1=nh=s:nh=nh.next=s),_1=!0,s_||(s_=!0,eG())}function mg(s,u){if(!o_&&_1){o_=!0;do for(var g=!1,w=w1;w!==null;){if(s!==0){var C=w.pendingLanes;if(C===0)var P=0;else{var q=w.suspendedLanes,ee=w.pingedLanes;P=(1<<31-Je(42|s)+1)-1,P&=C&~(q&~ee),P=P&201326741?P&201326741|1:P?P|2:0}P!==0&&(g=!0,kN(w,P))}else P=Rn,P=Va(w,w===Cr?P:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(P&3)===0||Er(w,P)||(g=!0,kN(w,P));w=w.next}while(g);o_=!1}}function Jq(){RN()}function RN(){_1=s_=!1;var s=0;ac!==0&&cG()&&(s=ac);for(var u=hr(),g=null,w=w1;w!==null;){var C=w.next,P=PN(w,u);P===0?(w.next=null,g===null?w1=C:g.next=C,C===null&&(nh=g)):(g=w,(s!==0||(P&3)!==0)&&(_1=!0)),w=C}Ki!==0&&Ki!==5||mg(s),ac!==0&&(ac=0)}function PN(s,u){for(var g=s.suspendedLanes,w=s.pingedLanes,C=s.expirationTimes,P=s.pendingLanes&-62914561;0<P;){var q=31-Je(P),ee=1<<q,pe=C[q];pe===-1?((ee&g)===0||(ee&w)!==0)&&(C[q]=Ll(ee,u)):pe<=u&&(s.expiredLanes|=ee),P&=~ee}if(u=Cr,g=Rn,g=Va(s,s===u?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),w=s.callbackNode,g===0||s===u&&(sr===2||sr===9)||s.cancelPendingCommit!==null)return w!==null&&w!==null&&it(w),s.callbackNode=null,s.callbackPriority=0;if((g&3)===0||Er(s,g)){if(u=g&-g,u===s.callbackPriority)return u;switch(w!==null&&it(w),ci(g)){case 2:case 8:g=Fa;break;case 32:g=bi;break;case 268435456:g=Po;break;default:g=bi}return w=DN.bind(null,s),g=$t(g,w),s.callbackPriority=u,s.callbackNode=g,u}return w!==null&&w!==null&&it(w),s.callbackPriority=2,s.callbackNode=null,2}function DN(s,u){if(Ki!==0&&Ki!==5)return s.callbackNode=null,s.callbackPriority=0,null;var g=s.callbackNode;if(b1()&&s.callbackNode!==g)return null;var w=Rn;return w=Va(s,s===Cr?w:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),w===0?null:(mN(s,w,u),PN(s,hr()),s.callbackNode!=null&&s.callbackNode===g?DN.bind(null,s):null)}function kN(s,u){if(b1())return null;mN(s,u,!0)}function eG(){dG(function(){(Xn&6)!==0?$t($n,Jq):RN()})}function l_(){if(ac===0){var s=zd;s===0&&(s=ht,ht<<=1,(ht&261888)===0&&(ht=256)),ac=s}return ac}function MN(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:_a(""+s)}function jN(s,u){var g=u.ownerDocument.createElement("input");return g.name=u.name,g.value=u.value,s.id&&g.setAttribute("form",s.id),u.parentNode.insertBefore(g,u),s=new FormData(s),g.parentNode.removeChild(g),s}function tG(s,u,g,w,C){if(u==="submit"&&g&&g.stateNode===C){var P=MN((C[gn]||null).action),q=w.submitter;q&&(u=(u=q[gn]||null)?MN(u.formAction):q.getAttribute("formAction"),u!==null&&(P=u,q=null));var ee=new Ir("action","action",null,w,C);s.push({event:ee,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(ac!==0){var pe=q?jN(C,q):new FormData(C);Cw(g,{pending:!0,data:pe,method:C.method,action:P},null,pe)}}else typeof P=="function"&&(ee.preventDefault(),pe=q?jN(C,q):new FormData(C),Cw(g,{pending:!0,data:pe,method:C.method,action:P},P,pe))},currentTarget:C}]})}}for(var u_=0;u_<bt.length;u_++){var c_=bt[u_],nG=c_.toLowerCase(),rG=c_[0].toUpperCase()+c_.slice(1);st(nG,"on"+rG)}st(Ne,"onAnimationEnd"),st(xe,"onAnimationIteration"),st(je,"onAnimationStart"),st("dblclick","onDoubleClick"),st("focusin","onFocus"),st("focusout","onBlur"),st(Ke,"onTransitionRun"),st(ut,"onTransitionStart"),st(dt,"onTransitionCancel"),st(tt,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),Cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iG=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gg));function LN(s,u){u=(u&4)!==0;for(var g=0;g<s.length;g++){var w=s[g],C=w.event;w=w.listeners;e:{var P=void 0;if(u)for(var q=w.length-1;0<=q;q--){var ee=w[q],pe=ee.instance,De=ee.currentTarget;if(ee=ee.listener,pe!==P&&C.isPropagationStopped())break e;P=ee,C.currentTarget=De;try{P(C)}catch(Ue){_t(Ue)}C.currentTarget=null,P=pe}else for(q=0;q<w.length;q++){if(ee=w[q],pe=ee.instance,De=ee.currentTarget,ee=ee.listener,pe!==P&&C.isPropagationStopped())break e;P=ee,C.currentTarget=De;try{P(C)}catch(Ue){_t(Ue)}C.currentTarget=null,P=pe}}}}function Nn(s,u){var g=u[za];g===void 0&&(g=u[za]=new Set);var w=s+"__bubble";g.has(w)||(BN(u,s,2,!1),g.add(w))}function f_(s,u,g){var w=0;u&&(w|=4),BN(g,s,w,u)}var E1="_reactListening"+Math.random().toString(36).slice(2);function d_(s){if(!s[E1]){s[E1]=!0,He.forEach(function(g){g!=="selectionchange"&&(iG.has(g)||f_(g,!1,s),f_(g,!0,s))});var u=s.nodeType===9?s:s.ownerDocument;u===null||u[E1]||(u[E1]=!0,f_("selectionchange",!1,u))}}function BN(s,u,g,w){switch(hR(u)){case 2:var C=PG;break;case 8:C=DG;break;default:C=I_}g=C.bind(null,u,g,s),C=void 0,!Do||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(C=!0),w?C!==void 0?s.addEventListener(u,g,{capture:!0,passive:C}):s.addEventListener(u,g,!0):C!==void 0?s.addEventListener(u,g,{passive:C}):s.addEventListener(u,g,!1)}function h_(s,u,g,w,C){var P=w;if((u&1)===0&&(u&2)===0&&w!==null)e:for(;;){if(w===null)return;var q=w.tag;if(q===3||q===4){var ee=w.stateNode.containerInfo;if(ee===C)break;if(q===4)for(q=w.return;q!==null;){var pe=q.tag;if((pe===3||pe===4)&&q.stateNode.containerInfo===C)return;q=q.return}for(;ee!==null;){if(q=Qn(ee),q===null)return;if(pe=q.tag,pe===5||pe===6||pe===26||pe===27){w=P=q;continue e}ee=ee.parentNode}}w=w.return}Ua(function(){var De=P,Ue=Ea(g),Qe=[];e:{var Le=wt.get(s);if(Le!==void 0){var Ve=Ir,Ot=s;switch(s){case"keypress":if(Ta(g)===0)break e;case"keydown":case"keyup":Ve=ws;break;case"focusin":Ot="focus",Ve=bs;break;case"focusout":Ot="blur",Ve=bs;break;case"beforeblur":case"afterblur":Ve=bs;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=En;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=co;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=B;break;case Ne:case xe:case je:Ve=Xt;break;case tt:Ve=se;break;case"scroll":case"scrollend":Ve=Gs;break;case"wheel":Ve=Be;break;case"copy":case"cut":case"paste":Ve=Ka;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=pn;break;case"toggle":case"beforetoggle":Ve=Ht}var Gt=(u&4)!==0,vr=!Gt&&(s==="scroll"||s==="scrollend"),Ae=Gt?Le!==null?Le+"Capture":null:Le;Gt=[];for(var ve=De,Pe;ve!==null;){var We=ve;if(Pe=We.stateNode,We=We.tag,We!==5&&We!==26&&We!==27||Pe===null||Ae===null||(We=Bt(ve,Ae),We!=null&&Gt.push(pg(ve,We,Pe))),vr)break;ve=ve.return}0<Gt.length&&(Le=new Ve(Le,Ot,null,g,Ue),Qe.push({event:Le,listeners:Gt}))}}if((u&7)===0){e:{if(Le=s==="mouseover"||s==="pointerover",Ve=s==="mouseout"||s==="pointerout",Le&&g!==ia&&(Ot=g.relatedTarget||g.fromElement)&&(Qn(Ot)||Ot[Nr]))break e;if((Ve||Le)&&(Le=Ue.window===Ue?Ue:(Le=Ue.ownerDocument)?Le.defaultView||Le.parentWindow:window,Ve?(Ot=g.relatedTarget||g.toElement,Ve=De,Ot=Ot?Qn(Ot):null,Ot!==null&&(vr=a(Ot),Gt=Ot.tag,Ot!==vr||Gt!==5&&Gt!==27&&Gt!==6)&&(Ot=null)):(Ve=null,Ot=De),Ve!==Ot)){if(Gt=En,We="onMouseLeave",Ae="onMouseEnter",ve="mouse",(s==="pointerout"||s==="pointerover")&&(Gt=pn,We="onPointerLeave",Ae="onPointerEnter",ve="pointer"),vr=Ve==null?Le:$r(Ve),Pe=Ot==null?Le:$r(Ot),Le=new Gt(We,ve+"leave",Ve,g,Ue),Le.target=vr,Le.relatedTarget=Pe,We=null,Qn(Ue)===De&&(Gt=new Gt(Ae,ve+"enter",Ot,g,Ue),Gt.target=Pe,Gt.relatedTarget=vr,We=Gt),vr=We,Ve&&Ot)t:{for(Gt=aG,Ae=Ve,ve=Ot,Pe=0,We=Ae;We;We=Gt(We))Pe++;We=0;for(var zt=ve;zt;zt=Gt(zt))We++;for(;0<Pe-We;)Ae=Gt(Ae),Pe--;for(;0<We-Pe;)ve=Gt(ve),We--;for(;Pe--;){if(Ae===ve||ve!==null&&Ae===ve.alternate){Gt=Ae;break t}Ae=Gt(Ae),ve=Gt(ve)}Gt=null}else Gt=null;Ve!==null&&FN(Qe,Le,Ve,Gt,!1),Ot!==null&&vr!==null&&FN(Qe,vr,Ot,Gt,!0)}}e:{if(Le=De?$r(De):window,Ve=Le.nodeName&&Le.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&Le.type==="file")var qn=la;else if(Vl(Le))if(Es)qn=y;else{qn=c;var kt=o}else Ve=Le.nodeName,!Ve||Ve.toLowerCase()!=="input"||Le.type!=="checkbox"&&Le.type!=="radio"?De&&zn(De.elementType)&&(qn=la):qn=h;if(qn&&(qn=qn(s,De))){Ya(Qe,qn,g,Ue);break e}kt&&kt(s,Le,De),s==="focusout"&&De&&Le.type==="number"&&De.memoizedProps.value!=null&&ue(Le,"number",Le.value)}switch(kt=De?$r(De):window,s){case"focusin":(Vl(kt)||kt.contentEditable==="true")&&(G=kt,X=De,re=null);break;case"focusout":re=X=G=null;break;case"mousedown":te=!0;break;case"contextmenu":case"mouseup":case"dragend":te=!1,oe(Qe,g,Ue);break;case"selectionchange":if(F)break;case"keydown":case"keyup":oe(Qe,g,Ue)}var hn;if(bn)e:{switch(s){case"compositionstart":var Pn="onCompositionStart";break e;case"compositionend":Pn="onCompositionEnd";break e;case"compositionupdate":Pn="onCompositionUpdate";break e}Pn=void 0}else Mo?fo(s,g)&&(Pn="onCompositionEnd"):s==="keydown"&&g.keyCode===229&&(Pn="onCompositionStart");Pn&&($a&&g.locale!=="ko"&&(Mo||Pn!=="onCompositionStart"?Pn==="onCompositionEnd"&&Mo&&(hn=Sa()):(Aa=Ue,qa="value"in Aa?Aa.value:Aa.textContent,Mo=!0)),kt=A1(De,Pn),0<kt.length&&(Pn=new Wa(Pn,s,null,g,Ue),Qe.push({event:Pn,listeners:kt}),hn?Pn.data=hn:(hn=_s(g),hn!==null&&(Pn.data=hn)))),(hn=Ca?Hs(s,g):Uu(s,g))&&(Pn=A1(De,"onBeforeInput"),0<Pn.length&&(kt=new Wa("onBeforeInput","beforeinput",null,g,Ue),Qe.push({event:kt,listeners:Pn}),kt.data=hn)),tG(Qe,s,De,g,Ue)}LN(Qe,u)})}function pg(s,u,g){return{instance:s,listener:u,currentTarget:g}}function A1(s,u){for(var g=u+"Capture",w=[];s!==null;){var C=s,P=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||P===null||(C=Bt(s,g),C!=null&&w.unshift(pg(s,C,P)),C=Bt(s,u),C!=null&&w.push(pg(s,C,P))),s.tag===3)return w;s=s.return}return[]}function aG(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function FN(s,u,g,w,C){for(var P=u._reactName,q=[];g!==null&&g!==w;){var ee=g,pe=ee.alternate,De=ee.stateNode;if(ee=ee.tag,pe!==null&&pe===w)break;ee!==5&&ee!==26&&ee!==27||De===null||(pe=De,C?(De=Bt(g,P),De!=null&&q.unshift(pg(g,De,pe))):C||(De=Bt(g,P),De!=null&&q.push(pg(g,De,pe)))),g=g.return}q.length!==0&&s.push({event:u,listeners:q})}var sG=/\r\n?/g,oG=/\u0000|\uFFFD/g;function VN(s){return(typeof s=="string"?s:""+s).replace(sG,`
`).replace(oG,"")}function zN(s,u){return u=VN(u),VN(s)===u}function yr(s,u,g,w,C,P){switch(g){case"children":typeof w=="string"?u==="body"||u==="textarea"&&w===""||Hi(s,w):(typeof w=="number"||typeof w=="bigint")&&u!=="body"&&Hi(s,""+w);break;case"className":Di(s,"class",w);break;case"tabIndex":Di(s,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Di(s,g,w);break;case"style":Rt(s,w,P);break;case"data":if(u!=="object"){Di(s,"data",w);break}case"src":case"href":if(w===""&&(u!=="a"||g!=="href")){s.removeAttribute(g);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){s.removeAttribute(g);break}w=_a(""+w),s.setAttribute(g,w);break;case"action":case"formAction":if(typeof w=="function"){s.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof P=="function"&&(g==="formAction"?(u!=="input"&&yr(s,u,"name",C.name,C,null),yr(s,u,"formEncType",C.formEncType,C,null),yr(s,u,"formMethod",C.formMethod,C,null),yr(s,u,"formTarget",C.formTarget,C,null)):(yr(s,u,"encType",C.encType,C,null),yr(s,u,"method",C.method,C,null),yr(s,u,"target",C.target,C,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){s.removeAttribute(g);break}w=_a(""+w),s.setAttribute(g,w);break;case"onClick":w!=null&&(s.onclick=_i);break;case"onScroll":w!=null&&Nn("scroll",s);break;case"onScrollEnd":w!=null&&Nn("scrollend",s);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(g=w.__html,g!=null){if(C.children!=null)throw Error(r(60));s.innerHTML=g}}break;case"multiple":s.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":s.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){s.removeAttribute("xlink:href");break}g=_a(""+w),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(g,""+w):s.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(g,""):s.removeAttribute(g);break;case"capture":case"download":w===!0?s.setAttribute(g,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(g,w):s.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?s.setAttribute(g,w):s.removeAttribute(g);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?s.removeAttribute(g):s.setAttribute(g,w);break;case"popover":Nn("beforetoggle",s),Nn("toggle",s),Zt(s,"popover",w);break;case"xlinkActuate":Sr(s,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":Sr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":Sr(s,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":Sr(s,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":Sr(s,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":Sr(s,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":Sr(s,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":Sr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":Sr(s,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":Zt(s,"is",w);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=Fl.get(g)||g,Zt(s,g,w))}}function m_(s,u,g,w,C,P){switch(g){case"style":Rt(s,w,P);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(g=w.__html,g!=null){if(C.children!=null)throw Error(r(60));s.innerHTML=g}}break;case"children":typeof w=="string"?Hi(s,w):(typeof w=="number"||typeof w=="bigint")&&Hi(s,""+w);break;case"onScroll":w!=null&&Nn("scroll",s);break;case"onScrollEnd":w!=null&&Nn("scrollend",s);break;case"onClick":w!=null&&(s.onclick=_i);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uo.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(C=g.endsWith("Capture"),u=g.slice(2,C?g.length-7:void 0),P=s[gn]||null,P=P!=null?P[g]:null,typeof P=="function"&&s.removeEventListener(u,P,C),typeof w=="function")){typeof P!="function"&&P!==null&&(g in s?s[g]=null:s.hasAttribute(g)&&s.removeAttribute(g)),s.addEventListener(u,w,C);break e}g in s?s[g]=w:w===!0?s.setAttribute(g,""):Zt(s,g,w)}}}function ka(s,u,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nn("error",s),Nn("load",s);var w=!1,C=!1,P;for(P in g)if(g.hasOwnProperty(P)){var q=g[P];if(q!=null)switch(P){case"src":w=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:yr(s,u,P,q,g,null)}}C&&yr(s,u,"srcSet",g.srcSet,g,null),w&&yr(s,u,"src",g.src,g,null);return;case"input":Nn("invalid",s);var ee=P=q=C=null,pe=null,De=null;for(w in g)if(g.hasOwnProperty(w)){var Ue=g[w];if(Ue!=null)switch(w){case"name":C=Ue;break;case"type":q=Ue;break;case"checked":pe=Ue;break;case"defaultChecked":De=Ue;break;case"value":P=Ue;break;case"defaultValue":ee=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(r(137,u));break;default:yr(s,u,w,Ue,g,null)}}Ie(s,P,ee,pe,De,q,C,!1);return;case"select":Nn("invalid",s),w=q=P=null;for(C in g)if(g.hasOwnProperty(C)&&(ee=g[C],ee!=null))switch(C){case"value":P=ee;break;case"defaultValue":q=ee;break;case"multiple":w=ee;default:yr(s,u,C,ee,g,null)}u=P,g=q,s.multiple=!!w,u!=null?At(s,!!w,u,!1):g!=null&&At(s,!!w,g,!0);return;case"textarea":Nn("invalid",s),P=C=w=null;for(q in g)if(g.hasOwnProperty(q)&&(ee=g[q],ee!=null))switch(q){case"value":w=ee;break;case"defaultValue":C=ee;break;case"children":P=ee;break;case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(91));break;default:yr(s,u,q,ee,g,null)}Pr(s,w,C,P);return;case"option":for(pe in g)g.hasOwnProperty(pe)&&(w=g[pe],w!=null)&&(pe==="selected"?s.selected=w&&typeof w!="function"&&typeof w!="symbol":yr(s,u,pe,w,g,null));return;case"dialog":Nn("beforetoggle",s),Nn("toggle",s),Nn("cancel",s),Nn("close",s);break;case"iframe":case"object":Nn("load",s);break;case"video":case"audio":for(w=0;w<gg.length;w++)Nn(gg[w],s);break;case"image":Nn("error",s),Nn("load",s);break;case"details":Nn("toggle",s);break;case"embed":case"source":case"link":Nn("error",s),Nn("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(De in g)if(g.hasOwnProperty(De)&&(w=g[De],w!=null))switch(De){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:yr(s,u,De,w,g,null)}return;default:if(zn(u)){for(Ue in g)g.hasOwnProperty(Ue)&&(w=g[Ue],w!==void 0&&m_(s,u,Ue,w,g,void 0));return}}for(ee in g)g.hasOwnProperty(ee)&&(w=g[ee],w!=null&&yr(s,u,ee,w,g,null))}function lG(s,u,g,w){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,P=null,q=null,ee=null,pe=null,De=null,Ue=null;for(Ve in g){var Qe=g[Ve];if(g.hasOwnProperty(Ve)&&Qe!=null)switch(Ve){case"checked":break;case"value":break;case"defaultValue":pe=Qe;default:w.hasOwnProperty(Ve)||yr(s,u,Ve,null,w,Qe)}}for(var Le in w){var Ve=w[Le];if(Qe=g[Le],w.hasOwnProperty(Le)&&(Ve!=null||Qe!=null))switch(Le){case"type":P=Ve;break;case"name":C=Ve;break;case"checked":De=Ve;break;case"defaultChecked":Ue=Ve;break;case"value":q=Ve;break;case"defaultValue":ee=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(r(137,u));break;default:Ve!==Qe&&yr(s,u,Le,Ve,w,Qe)}}Zn(s,q,ee,pe,De,Ue,P,C);return;case"select":Ve=q=ee=Le=null;for(P in g)if(pe=g[P],g.hasOwnProperty(P)&&pe!=null)switch(P){case"value":break;case"multiple":Ve=pe;default:w.hasOwnProperty(P)||yr(s,u,P,null,w,pe)}for(C in w)if(P=w[C],pe=g[C],w.hasOwnProperty(C)&&(P!=null||pe!=null))switch(C){case"value":Le=P;break;case"defaultValue":ee=P;break;case"multiple":q=P;default:P!==pe&&yr(s,u,C,P,w,pe)}u=ee,g=q,w=Ve,Le!=null?At(s,!!g,Le,!1):!!w!=!!g&&(u!=null?At(s,!!g,u,!0):At(s,!!g,g?[]:"",!1));return;case"textarea":Ve=Le=null;for(ee in g)if(C=g[ee],g.hasOwnProperty(ee)&&C!=null&&!w.hasOwnProperty(ee))switch(ee){case"value":break;case"children":break;default:yr(s,u,ee,null,w,C)}for(q in w)if(C=w[q],P=g[q],w.hasOwnProperty(q)&&(C!=null||P!=null))switch(q){case"value":Le=C;break;case"defaultValue":Ve=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==P&&yr(s,u,q,C,w,P)}Rr(s,Le,Ve);return;case"option":for(var Ot in g)Le=g[Ot],g.hasOwnProperty(Ot)&&Le!=null&&!w.hasOwnProperty(Ot)&&(Ot==="selected"?s.selected=!1:yr(s,u,Ot,null,w,Le));for(pe in w)Le=w[pe],Ve=g[pe],w.hasOwnProperty(pe)&&Le!==Ve&&(Le!=null||Ve!=null)&&(pe==="selected"?s.selected=Le&&typeof Le!="function"&&typeof Le!="symbol":yr(s,u,pe,Le,w,Ve));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Gt in g)Le=g[Gt],g.hasOwnProperty(Gt)&&Le!=null&&!w.hasOwnProperty(Gt)&&yr(s,u,Gt,null,w,Le);for(De in w)if(Le=w[De],Ve=g[De],w.hasOwnProperty(De)&&Le!==Ve&&(Le!=null||Ve!=null))switch(De){case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(r(137,u));break;default:yr(s,u,De,Le,w,Ve)}return;default:if(zn(u)){for(var vr in g)Le=g[vr],g.hasOwnProperty(vr)&&Le!==void 0&&!w.hasOwnProperty(vr)&&m_(s,u,vr,void 0,w,Le);for(Ue in w)Le=w[Ue],Ve=g[Ue],!w.hasOwnProperty(Ue)||Le===Ve||Le===void 0&&Ve===void 0||m_(s,u,Ue,Le,w,Ve);return}}for(var Ae in g)Le=g[Ae],g.hasOwnProperty(Ae)&&Le!=null&&!w.hasOwnProperty(Ae)&&yr(s,u,Ae,null,w,Le);for(Qe in w)Le=w[Qe],Ve=g[Qe],!w.hasOwnProperty(Qe)||Le===Ve||Le==null&&Ve==null||yr(s,u,Qe,Le,w,Ve)}function UN(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uG(){if(typeof performance.getEntriesByType=="function"){for(var s=0,u=0,g=performance.getEntriesByType("resource"),w=0;w<g.length;w++){var C=g[w],P=C.transferSize,q=C.initiatorType,ee=C.duration;if(P&&ee&&UN(q)){for(q=0,ee=C.responseEnd,w+=1;w<g.length;w++){var pe=g[w],De=pe.startTime;if(De>ee)break;var Ue=pe.transferSize,Qe=pe.initiatorType;Ue&&UN(Qe)&&(pe=pe.responseEnd,q+=Ue*(pe<ee?1:(ee-De)/(pe-De)))}if(--w,u+=8*(P+q)/(C.duration/1e3),s++,10<s)break}}if(0<s)return u/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var g_=null,p_=null;function S1(s){return s.nodeType===9?s:s.ownerDocument}function qN(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function GN(s,u){if(s===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&u==="foreignObject"?0:s}function y_(s,u){return s==="textarea"||s==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var v_=null;function cG(){var s=window.event;return s&&s.type==="popstate"?s===v_?!1:(v_=s,!0):(v_=null,!1)}var HN=typeof setTimeout=="function"?setTimeout:void 0,fG=typeof clearTimeout=="function"?clearTimeout:void 0,KN=typeof Promise=="function"?Promise:void 0,dG=typeof queueMicrotask=="function"?queueMicrotask:typeof KN<"u"?function(s){return KN.resolve(null).then(s).catch(hG)}:HN;function hG(s){setTimeout(function(){throw s})}function sc(s){return s==="head"}function WN(s,u){var g=u,w=0;do{var C=g.nextSibling;if(s.removeChild(g),C&&C.nodeType===8)if(g=C.data,g==="/$"||g==="/&"){if(w===0){s.removeChild(C),sh(u);return}w--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")w++;else if(g==="html")yg(s.ownerDocument.documentElement);else if(g==="head"){g=s.ownerDocument.head,yg(g);for(var P=g.firstChild;P;){var q=P.nextSibling,ee=P.nodeName;P[Ri]||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&P.rel.toLowerCase()==="stylesheet"||g.removeChild(P),P=q}}else g==="body"&&yg(s.ownerDocument.body);g=C}while(g);sh(u)}function $N(s,u){var g=s;s=0;do{var w=g.nextSibling;if(g.nodeType===1?u?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(u?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),w&&w.nodeType===8)if(g=w.data,g==="/$"){if(s===0)break;s--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||s++;g=w}while(g)}function x_(s){var u=s.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var g=u;switch(u=u.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":x_(g),Pi(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}s.removeChild(g)}}function mG(s,u,g,w){for(;s.nodeType===1;){var C=g;if(s.nodeName.toLowerCase()!==u.toLowerCase()){if(!w&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(w){if(!s[Ri])switch(u){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(P=s.getAttribute("rel"),P==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(P!==C.rel||s.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||s.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||s.getAttribute("title")!==(C.title==null?null:C.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(P=s.getAttribute("src"),(P!==(C.src==null?null:C.src)||s.getAttribute("type")!==(C.type==null?null:C.type)||s.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&P&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(u==="input"&&s.type==="hidden"){var P=C.name==null?null:""+C.name;if(C.type==="hidden"&&s.getAttribute("name")===P)return s}else return s;if(s=vo(s.nextSibling),s===null)break}return null}function gG(s,u,g){if(u==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!g||(s=vo(s.nextSibling),s===null))return null;return s}function YN(s,u){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=vo(s.nextSibling),s===null))return null;return s}function b_(s){return s.data==="$?"||s.data==="$~"}function w_(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function pG(s,u){var g=s.ownerDocument;if(s.data==="$~")s._reactRetry=u;else if(s.data!=="$?"||g.readyState!=="loading")u();else{var w=function(){u(),g.removeEventListener("DOMContentLoaded",w)};g.addEventListener("DOMContentLoaded",w),s._reactRetry=w}}function vo(s){for(;s!=null;s=s.nextSibling){var u=s.nodeType;if(u===1||u===3)break;if(u===8){if(u=s.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return s}var __=null;function XN(s){s=s.nextSibling;for(var u=0;s;){if(s.nodeType===8){var g=s.data;if(g==="/$"||g==="/&"){if(u===0)return vo(s.nextSibling);u--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||u++}s=s.nextSibling}return null}function QN(s){s=s.previousSibling;for(var u=0;s;){if(s.nodeType===8){var g=s.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(u===0)return s;u--}else g!=="/$"&&g!=="/&"||u++}s=s.previousSibling}return null}function ZN(s,u,g){switch(u=S1(g),s){case"html":if(s=u.documentElement,!s)throw Error(r(452));return s;case"head":if(s=u.head,!s)throw Error(r(453));return s;case"body":if(s=u.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function yg(s){for(var u=s.attributes;u.length;)s.removeAttributeNode(u[0]);Pi(s)}var xo=new Map,JN=new Set;function T1(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ru=we.d;we.d={f:yG,r:vG,D:xG,C:bG,L:wG,m:_G,X:AG,S:EG,M:SG};function yG(){var s=ru.f(),u=y1();return s||u}function vG(s){var u=Mt(s);u!==null&&u.tag===5&&u.type==="form"?p3(u):ru.r(s)}var rh=typeof document>"u"?null:document;function eR(s,u,g){var w=rh;if(w&&typeof u=="string"&&u){var C=Yt(u);C='link[rel="'+s+'"][href="'+C+'"]',typeof g=="string"&&(C+='[crossorigin="'+g+'"]'),JN.has(C)||(JN.add(C),s={rel:s,crossOrigin:g,href:u},w.querySelector(C)===null&&(u=w.createElement("link"),ka(u,"link",s),Ar(u),w.head.appendChild(u)))}}function xG(s){ru.D(s),eR("dns-prefetch",s,null)}function bG(s,u){ru.C(s,u),eR("preconnect",s,u)}function wG(s,u,g){ru.L(s,u,g);var w=rh;if(w&&s&&u){var C='link[rel="preload"][as="'+Yt(u)+'"]';u==="image"&&g&&g.imageSrcSet?(C+='[imagesrcset="'+Yt(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(C+='[imagesizes="'+Yt(g.imageSizes)+'"]')):C+='[href="'+Yt(s)+'"]';var P=C;switch(u){case"style":P=ih(s);break;case"script":P=ah(s)}xo.has(P)||(s=_({rel:"preload",href:u==="image"&&g&&g.imageSrcSet?void 0:s,as:u},g),xo.set(P,s),w.querySelector(C)!==null||u==="style"&&w.querySelector(vg(P))||u==="script"&&w.querySelector(xg(P))||(u=w.createElement("link"),ka(u,"link",s),Ar(u),w.head.appendChild(u)))}}function _G(s,u){ru.m(s,u);var g=rh;if(g&&s){var w=u&&typeof u.as=="string"?u.as:"script",C='link[rel="modulepreload"][as="'+Yt(w)+'"][href="'+Yt(s)+'"]',P=C;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":P=ah(s)}if(!xo.has(P)&&(s=_({rel:"modulepreload",href:s},u),xo.set(P,s),g.querySelector(C)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(xg(P)))return}w=g.createElement("link"),ka(w,"link",s),Ar(w),g.head.appendChild(w)}}}function EG(s,u,g){ru.S(s,u,g);var w=rh;if(w&&s){var C=rr(w).hoistableStyles,P=ih(s);u=u||"default";var q=C.get(P);if(!q){var ee={loading:0,preload:null};if(q=w.querySelector(vg(P)))ee.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":u},g),(g=xo.get(P))&&E_(s,g);var pe=q=w.createElement("link");Ar(pe),ka(pe,"link",s),pe._p=new Promise(function(De,Ue){pe.onload=De,pe.onerror=Ue}),pe.addEventListener("load",function(){ee.loading|=1}),pe.addEventListener("error",function(){ee.loading|=2}),ee.loading|=4,I1(q,u,w)}q={type:"stylesheet",instance:q,count:1,state:ee},C.set(P,q)}}}function AG(s,u){ru.X(s,u);var g=rh;if(g&&s){var w=rr(g).hoistableScripts,C=ah(s),P=w.get(C);P||(P=g.querySelector(xg(C)),P||(s=_({src:s,async:!0},u),(u=xo.get(C))&&A_(s,u),P=g.createElement("script"),Ar(P),ka(P,"link",s),g.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},w.set(C,P))}}function SG(s,u){ru.M(s,u);var g=rh;if(g&&s){var w=rr(g).hoistableScripts,C=ah(s),P=w.get(C);P||(P=g.querySelector(xg(C)),P||(s=_({src:s,async:!0,type:"module"},u),(u=xo.get(C))&&A_(s,u),P=g.createElement("script"),Ar(P),ka(P,"link",s),g.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},w.set(C,P))}}function tR(s,u,g,w){var C=(C=qe.current)?T1(C):null;if(!C)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(u=ih(g.href),g=rr(C).hoistableStyles,w=g.get(u),w||(w={type:"style",instance:null,count:0,state:null},g.set(u,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){s=ih(g.href);var P=rr(C).hoistableStyles,q=P.get(s);if(q||(C=C.ownerDocument||C,q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},P.set(s,q),(P=C.querySelector(vg(s)))&&!P._p&&(q.instance=P,q.state.loading=5),xo.has(s)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},xo.set(s,g),P||TG(C,s,g,q.state))),u&&w===null)throw Error(r(528,""));return q}if(u&&w!==null)throw Error(r(529,""));return null;case"script":return u=g.async,g=g.src,typeof g=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=ah(g),g=rr(C).hoistableScripts,w=g.get(u),w||(w={type:"script",instance:null,count:0,state:null},g.set(u,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function ih(s){return'href="'+Yt(s)+'"'}function vg(s){return'link[rel="stylesheet"]['+s+"]"}function nR(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function TG(s,u,g,w){s.querySelector('link[rel="preload"][as="style"]['+u+"]")?w.loading=1:(u=s.createElement("link"),w.preload=u,u.addEventListener("load",function(){return w.loading|=1}),u.addEventListener("error",function(){return w.loading|=2}),ka(u,"link",g),Ar(u),s.head.appendChild(u))}function ah(s){return'[src="'+Yt(s)+'"]'}function xg(s){return"script[async]"+s}function rR(s,u,g){if(u.count++,u.instance===null)switch(u.type){case"style":var w=s.querySelector('style[data-href~="'+Yt(g.href)+'"]');if(w)return u.instance=w,Ar(w),w;var C=_({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return w=(s.ownerDocument||s).createElement("style"),Ar(w),ka(w,"style",C),I1(w,g.precedence,s),u.instance=w;case"stylesheet":C=ih(g.href);var P=s.querySelector(vg(C));if(P)return u.state.loading|=4,u.instance=P,Ar(P),P;w=nR(g),(C=xo.get(C))&&E_(w,C),P=(s.ownerDocument||s).createElement("link"),Ar(P);var q=P;return q._p=new Promise(function(ee,pe){q.onload=ee,q.onerror=pe}),ka(P,"link",w),u.state.loading|=4,I1(P,g.precedence,s),u.instance=P;case"script":return P=ah(g.src),(C=s.querySelector(xg(P)))?(u.instance=C,Ar(C),C):(w=g,(C=xo.get(P))&&(w=_({},g),A_(w,C)),s=s.ownerDocument||s,C=s.createElement("script"),Ar(C),ka(C,"link",w),s.head.appendChild(C),u.instance=C);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(w=u.instance,u.state.loading|=4,I1(w,g.precedence,s));return u.instance}function I1(s,u,g){for(var w=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=w.length?w[w.length-1]:null,P=C,q=0;q<w.length;q++){var ee=w[q];if(ee.dataset.precedence===u)P=ee;else if(P!==C)break}P?P.parentNode.insertBefore(s,P.nextSibling):(u=g.nodeType===9?g.head:g,u.insertBefore(s,u.firstChild))}function E_(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.title==null&&(s.title=u.title)}function A_(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.integrity==null&&(s.integrity=u.integrity)}var C1=null;function iR(s,u,g){if(C1===null){var w=new Map,C=C1=new Map;C.set(g,w)}else C=C1,w=C.get(g),w||(w=new Map,C.set(g,w));if(w.has(s))return w;for(w.set(s,null),g=g.getElementsByTagName(s),C=0;C<g.length;C++){var P=g[C];if(!(P[Ri]||P[Vn]||s==="link"&&P.getAttribute("rel")==="stylesheet")&&P.namespaceURI!=="http://www.w3.org/2000/svg"){var q=P.getAttribute(u)||"";q=s+q;var ee=w.get(q);ee?ee.push(P):w.set(q,[P])}}return w}function aR(s,u,g){s=s.ownerDocument||s,s.head.insertBefore(g,u==="title"?s.querySelector("head > title"):null)}function IG(s,u,g){if(g===1||u.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;return u.rel==="stylesheet"?(s=u.disabled,typeof u.precedence=="string"&&s==null):!0;case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function sR(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function CG(s,u,g,w){if(g.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var C=ih(w.href),P=u.querySelector(vg(C));if(P){u=P._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(s.count++,s=O1.bind(s),u.then(s,s)),g.state.loading|=4,g.instance=P,Ar(P);return}P=u.ownerDocument||u,w=nR(w),(C=xo.get(C))&&E_(w,C),P=P.createElement("link"),Ar(P);var q=P;q._p=new Promise(function(ee,pe){q.onload=ee,q.onerror=pe}),ka(P,"link",w),g.instance=P}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(g,u),(u=g.state.preload)&&(g.state.loading&3)===0&&(s.count++,g=O1.bind(s),u.addEventListener("load",g),u.addEventListener("error",g))}}var S_=0;function OG(s,u){return s.stylesheets&&s.count===0&&R1(s,s.stylesheets),0<s.count||0<s.imgCount?function(g){var w=setTimeout(function(){if(s.stylesheets&&R1(s,s.stylesheets),s.unsuspend){var P=s.unsuspend;s.unsuspend=null,P()}},6e4+u);0<s.imgBytes&&S_===0&&(S_=62500*uG());var C=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&R1(s,s.stylesheets),s.unsuspend)){var P=s.unsuspend;s.unsuspend=null,P()}},(s.imgBytes>S_?50:800)+u);return s.unsuspend=g,function(){s.unsuspend=null,clearTimeout(w),clearTimeout(C)}}:null}function O1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)R1(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var N1=null;function R1(s,u){s.stylesheets=null,s.unsuspend!==null&&(s.count++,N1=new Map,u.forEach(NG,s),N1=null,O1.call(s))}function NG(s,u){if(!(u.state.loading&4)){var g=N1.get(s);if(g)var w=g.get(null);else{g=new Map,N1.set(s,g);for(var C=s.querySelectorAll("link[data-precedence],style[data-precedence]"),P=0;P<C.length;P++){var q=C[P];(q.nodeName==="LINK"||q.getAttribute("media")!=="not all")&&(g.set(q.dataset.precedence,q),w=q)}w&&g.set(null,w)}C=u.instance,q=C.getAttribute("data-precedence"),P=g.get(q)||w,P===w&&g.set(null,C),g.set(q,C),this.count++,w=O1.bind(this),C.addEventListener("load",w),C.addEventListener("error",w),P?P.parentNode.insertBefore(C,P.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(C,s.firstChild)),u.state.loading|=4}}var bg={$$typeof:K,Provider:null,Consumer:null,_currentValue:$e,_currentValue2:$e,_threadCount:0};function RG(s,u,g,w,C,P,q,ee,pe){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hr(0),this.hiddenUpdates=Hr(null),this.identifierPrefix=w,this.onUncaughtError=C,this.onCaughtError=P,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function oR(s,u,g,w,C,P,q,ee,pe,De,Ue,Qe){return s=new RG(s,u,g,q,pe,De,Ue,Qe,ee),u=1,P===!0&&(u|=24),P=Ks(3,null,null,u),s.current=P,P.stateNode=s,u=iw(),u.refCount++,s.pooledCache=u,u.refCount++,P.memoizedState={element:w,isDehydrated:g,cache:u},lw(P),s}function lR(s){return s?(s=jd,s):jd}function uR(s,u,g,w,C,P){C=lR(C),w.context===null?w.context=C:w.pendingContext=C,w=Yu(u),w.payload={element:g},P=P===void 0?null:P,P!==null&&(w.callback=P),g=Xu(s,w,u),g!==null&&(Os(g,s,u),Zm(g,s,u))}function cR(s,u){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var g=s.retryLane;s.retryLane=g!==0&&g<u?g:u}}function T_(s,u){cR(s,u),(s=s.alternate)&&cR(s,u)}function fR(s){if(s.tag===13||s.tag===31){var u=tr(s,67108864);u!==null&&Os(u,s,67108864),T_(s,67108864)}}function dR(s){if(s.tag===13||s.tag===31){var u=Qs();u=Kr(u);var g=tr(s,u);g!==null&&Os(g,s,u),T_(s,u)}}var P1=!0;function PG(s,u,g,w){var C=ye.T;ye.T=null;var P=we.p;try{we.p=2,I_(s,u,g,w)}finally{we.p=P,ye.T=C}}function DG(s,u,g,w){var C=ye.T;ye.T=null;var P=we.p;try{we.p=8,I_(s,u,g,w)}finally{we.p=P,ye.T=C}}function I_(s,u,g,w){if(P1){var C=C_(w);if(C===null)h_(s,u,w,D1,g),mR(s,w);else if(MG(C,s,u,g,w))w.stopPropagation();else if(mR(s,w),u&4&&-1<kG.indexOf(s)){for(;C!==null;){var P=Mt(C);if(P!==null)switch(P.tag){case 3:if(P=P.stateNode,P.current.memoizedState.isDehydrated){var q=wa(P.pendingLanes);if(q!==0){var ee=P;for(ee.pendingLanes|=2,ee.entangledLanes|=2;q;){var pe=1<<31-Je(q);ee.entanglements[1]|=pe,q&=~pe}cl(P),(Xn&6)===0&&(g1=hr()+500,mg(0))}}break;case 31:case 13:ee=tr(P,2),ee!==null&&Os(ee,P,2),y1(),T_(P,2)}if(P=C_(w),P===null&&h_(s,u,w,D1,g),P===C)break;C=P}C!==null&&w.stopPropagation()}else h_(s,u,w,null,g)}}function C_(s){return s=Ea(s),O_(s)}var D1=null;function O_(s){if(D1=null,s=Qn(s),s!==null){var u=a(s);if(u===null)s=null;else{var g=u.tag;if(g===13){if(s=l(u),s!==null)return s;s=null}else if(g===31){if(s=f(u),s!==null)return s;s=null}else if(g===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;s=null}else u!==s&&(s=null)}}return D1=s,null}function hR(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ba()){case $n:return 2;case Fa:return 8;case bi:case Lr:return 32;case Po:return 268435456;default:return 32}default:return 32}}var N_=!1,oc=null,lc=null,uc=null,wg=new Map,_g=new Map,cc=[],kG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mR(s,u){switch(s){case"focusin":case"focusout":oc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":uc=null;break;case"pointerover":case"pointerout":wg.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":_g.delete(u.pointerId)}}function Eg(s,u,g,w,C,P){return s===null||s.nativeEvent!==P?(s={blockedOn:u,domEventName:g,eventSystemFlags:w,nativeEvent:P,targetContainers:[C]},u!==null&&(u=Mt(u),u!==null&&fR(u)),s):(s.eventSystemFlags|=w,u=s.targetContainers,C!==null&&u.indexOf(C)===-1&&u.push(C),s)}function MG(s,u,g,w,C){switch(u){case"focusin":return oc=Eg(oc,s,u,g,w,C),!0;case"dragenter":return lc=Eg(lc,s,u,g,w,C),!0;case"mouseover":return uc=Eg(uc,s,u,g,w,C),!0;case"pointerover":var P=C.pointerId;return wg.set(P,Eg(wg.get(P)||null,s,u,g,w,C)),!0;case"gotpointercapture":return P=C.pointerId,_g.set(P,Eg(_g.get(P)||null,s,u,g,w,C)),!0}return!1}function gR(s){var u=Qn(s.target);if(u!==null){var g=a(u);if(g!==null){if(u=g.tag,u===13){if(u=l(g),u!==null){s.blockedOn=u,mt(s.priority,function(){dR(g)});return}}else if(u===31){if(u=f(g),u!==null){s.blockedOn=u,mt(s.priority,function(){dR(g)});return}}else if(u===3&&g.stateNode.current.memoizedState.isDehydrated){s.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}s.blockedOn=null}function k1(s){if(s.blockedOn!==null)return!1;for(var u=s.targetContainers;0<u.length;){var g=C_(s.nativeEvent);if(g===null){g=s.nativeEvent;var w=new g.constructor(g.type,g);ia=w,g.target.dispatchEvent(w),ia=null}else return u=Mt(g),u!==null&&fR(u),s.blockedOn=g,!1;u.shift()}return!0}function pR(s,u,g){k1(s)&&g.delete(u)}function jG(){N_=!1,oc!==null&&k1(oc)&&(oc=null),lc!==null&&k1(lc)&&(lc=null),uc!==null&&k1(uc)&&(uc=null),wg.forEach(pR),_g.forEach(pR)}function M1(s,u){s.blockedOn===u&&(s.blockedOn=null,N_||(N_=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,jG)))}var j1=null;function yR(s){j1!==s&&(j1=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){j1===s&&(j1=null);for(var u=0;u<s.length;u+=3){var g=s[u],w=s[u+1],C=s[u+2];if(typeof w!="function"){if(O_(w||g)===null)continue;break}var P=Mt(g);P!==null&&(s.splice(u,3),u-=3,Cw(P,{pending:!0,data:C,method:g.method,action:w},w,C))}}))}function sh(s){function u(pe){return M1(pe,s)}oc!==null&&M1(oc,s),lc!==null&&M1(lc,s),uc!==null&&M1(uc,s),wg.forEach(u),_g.forEach(u);for(var g=0;g<cc.length;g++){var w=cc[g];w.blockedOn===s&&(w.blockedOn=null)}for(;0<cc.length&&(g=cc[0],g.blockedOn===null);)gR(g),g.blockedOn===null&&cc.shift();if(g=(s.ownerDocument||s).$$reactFormReplay,g!=null)for(w=0;w<g.length;w+=3){var C=g[w],P=g[w+1],q=C[gn]||null;if(typeof P=="function")q||yR(g);else if(q){var ee=null;if(P&&P.hasAttribute("formAction")){if(C=P,q=P[gn]||null)ee=q.formAction;else if(O_(C)!==null)continue}else ee=q.action;typeof ee=="function"?g[w+1]=ee:(g.splice(w,3),w-=3),yR(g)}}}function vR(){function s(P){P.canIntercept&&P.info==="react-transition"&&P.intercept({handler:function(){return new Promise(function(q){return C=q})},focusReset:"manual",scroll:"manual"})}function u(){C!==null&&(C(),C=null),w||setTimeout(g,20)}function g(){if(!w&&!navigation.transition){var P=navigation.currentEntry;P&&P.url!=null&&navigation.navigate(P.url,{state:P.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var w=!1,C=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(g,100),function(){w=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),C!==null&&(C(),C=null)}}}function R_(s){this._internalRoot=s}L1.prototype.render=R_.prototype.render=function(s){var u=this._internalRoot;if(u===null)throw Error(r(409));var g=u.current,w=Qs();uR(g,w,s,u,null,null)},L1.prototype.unmount=R_.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var u=s.containerInfo;uR(s.current,2,null,s,null,null),y1(),u[Nr]=null}};function L1(s){this._internalRoot=s}L1.prototype.unstable_scheduleHydration=function(s){if(s){var u=fi();s={blockedOn:null,target:s,priority:u};for(var g=0;g<cc.length&&u!==0&&u<cc[g].priority;g++);cc.splice(g,0,s),g===0&&gR(s)}};var xR=e.version;if(xR!=="19.2.4")throw Error(r(527,xR,"19.2.4"));we.findDOMNode=function(s){var u=s._reactInternals;if(u===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=p(u),s=s!==null?b(s):null,s=s===null?null:s.stateNode,s};var LG={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ye,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var B1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!B1.isDisabled&&B1.supportsFiber)try{In=B1.inject(LG),at=B1}catch{}}return Sg.createRoot=function(s,u){if(!i(s))throw Error(r(299));var g=!1,w="",C=T3,P=I3,q=C3;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(P=u.onCaughtError),u.onRecoverableError!==void 0&&(q=u.onRecoverableError)),u=oR(s,1,!1,null,null,g,w,null,C,P,q,vR),s[Nr]=u.current,d_(s),new R_(u)},Sg.hydrateRoot=function(s,u,g){if(!i(s))throw Error(r(299));var w=!1,C="",P=T3,q=I3,ee=C3,pe=null;return g!=null&&(g.unstable_strictMode===!0&&(w=!0),g.identifierPrefix!==void 0&&(C=g.identifierPrefix),g.onUncaughtError!==void 0&&(P=g.onUncaughtError),g.onCaughtError!==void 0&&(q=g.onCaughtError),g.onRecoverableError!==void 0&&(ee=g.onRecoverableError),g.formState!==void 0&&(pe=g.formState)),u=oR(s,1,!0,u,g??null,w,C,pe,P,q,ee,vR),u.context=lR(null),g=u.current,w=Qs(),w=Kr(w),C=Yu(w),C.callback=null,Xu(g,C,w),g=w,u.current.lanes=g,qi(u,g),cl(u),s[Nr]=u.current,d_(s),new L1(u)},Sg.version="19.2.4",Sg}var OR;function $G(){if(OR)return k_.exports;OR=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),k_.exports=WG(),k_.exports}var YG=$G();const XG="modulepreload",QG=function(t){return"/"+t},NR={},MS=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let p=function(b){return Promise.all(b.map(_=>Promise.resolve(_).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};var l=p;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=f?.nonce||f?.getAttribute("nonce");i=p(n.map(b=>{if(b=QG(b),b in NR)return;NR[b]=!0;const _=b.endsWith(".css"),T=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${T}`))return;const R=document.createElement("link");if(R.rel=_?"stylesheet":XG,_||(R.as="script"),R.crossOrigin="",R.href=b,m&&R.setAttribute("nonce",m),document.head.appendChild(R),_)return new Promise((j,M)=>{R.addEventListener("load",j),R.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${b}`)))})}))}function a(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return i.then(f=>{for(const m of f||[])m.status==="rejected"&&a(m.reason);return e().catch(a)})};var RR="popstate";function ZG(t={}){function e(r,i){let{pathname:a,search:l,hash:f}=r.location;return BE("",{pathname:a,search:l,hash:f},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:hp(i)}return eH(e,n,null,t)}function ni(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function To(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JG(){return Math.random().toString(36).substring(2,10)}function PR(t,e){return{usr:t.state,key:t.key,idx:e}}function BE(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ym(e):e,state:n,key:e&&e.key||r||JG()}}function hp({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ym(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function eH(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,f="POP",m=null,p=b();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function b(){return(l.state||{idx:null}).idx}function _(){f="POP";let L=b(),z=L==null?null:L-p;p=L,m&&m({action:f,location:M.location,delta:z})}function T(L,z){f="PUSH";let $=BE(M.location,L,z);p=b()+1;let K=PR($,p),J=M.createHref($);try{l.pushState(K,"",J)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;i.location.assign(J)}a&&m&&m({action:f,location:M.location,delta:1})}function R(L,z){f="REPLACE";let $=BE(M.location,L,z);p=b();let K=PR($,p),J=M.createHref($);l.replaceState(K,"",J),a&&m&&m({action:f,location:M.location,delta:0})}function j(L){return tH(L)}let M={get action(){return f},get location(){return t(i,l)},listen(L){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(RR,_),m=L,()=>{i.removeEventListener(RR,_),m=null}},createHref(L){return e(i,L)},createURL:j,encodeLocation(L){let z=j(L);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:T,replace:R,go(L){return l.go(L)}};return M}function tH(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ni(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:hp(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function v5(t,e,n="/"){return nH(t,e,n,!1)}function nH(t,e,n,r){let i=typeof e=="string"?ym(e):e,a=yu(i.pathname||"/",n);if(a==null)return null;let l=x5(t);rH(l);let f=null;for(let m=0;f==null&&m<l.length;++m){let p=mH(a);f=dH(l[m],p,r)}return f}function x5(t,e=[],n=[],r="",i=!1){let a=(l,f,m=i,p)=>{let b={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:f,route:l};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(r)&&m)return;ni(b.relativePath.startsWith(r),`Absolute route path "${b.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(r.length)}let _=hu([r,b.relativePath]),T=n.concat(b);l.children&&l.children.length>0&&(ni(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),x5(l.children,e,T,_,m)),!(l.path==null&&!l.index)&&e.push({path:_,score:cH(_,l.index),routesMeta:T})};return t.forEach((l,f)=>{if(l.path===""||!l.path?.includes("?"))a(l,f);else for(let m of b5(l.path))a(l,f,!0,m)}),e}function b5(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=b5(r.join("/")),f=[];return f.push(...l.map(m=>m===""?a:[a,m].join("/"))),i&&f.push(...l),f.map(m=>t.startsWith("/")&&m===""?"/":m)}function rH(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:fH(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var iH=/^:[\w-]+$/,aH=3,sH=2,oH=1,lH=10,uH=-2,DR=t=>t==="*";function cH(t,e){let n=t.split("/"),r=n.length;return n.some(DR)&&(r+=uH),e&&(r+=sH),n.filter(i=>!DR(i)).reduce((i,a)=>i+(iH.test(a)?aH:a===""?oH:lH),r)}function fH(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function dH(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",l=[];for(let f=0;f<r.length;++f){let m=r[f],p=f===r.length-1,b=a==="/"?e:e.slice(a.length)||"/",_=Hy({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},b),T=m.route;if(!_&&p&&n&&!r[r.length-1].route.index&&(_=Hy({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},b)),!_)return null;Object.assign(i,_.params),l.push({params:i,pathname:hu([a,_.pathname]),pathnameBase:vH(hu([a,_.pathnameBase])),route:T}),_.pathnameBase!=="/"&&(a=hu([a,_.pathnameBase]))}return l}function Hy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=hH(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),f=i.slice(1);return{params:r.reduce((p,{paramName:b,isOptional:_},T)=>{if(b==="*"){let j=f[T]||"";l=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const R=f[T];return _&&!R?p[b]=void 0:p[b]=(R||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:l,pattern:t}}function hH(t,e=!1,n=!0){To(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,f,m)=>(r.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function mH(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return To(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function yu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var gH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function pH(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ym(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=kR(n.substring(1),"/"):a=kR(n,e)):a=e,{pathname:a,search:xH(r),hash:bH(i)}}function kR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function B_(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yH(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jS(t){let e=yH(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function LS(t,e,n,r=!1){let i;typeof t=="string"?i=ym(t):(i={...t},ni(!i.pathname||!i.pathname.includes("?"),B_("?","pathname","search",i)),ni(!i.pathname||!i.pathname.includes("#"),B_("#","pathname","hash",i)),ni(!i.search||!i.search.includes("#"),B_("#","search","hash",i)));let a=t===""||i.pathname==="",l=a?"/":i.pathname,f;if(l==null)f=n;else{let _=e.length-1;if(!r&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),_-=1;i.pathname=T.join("/")}f=_>=0?e[_]:"/"}let m=pH(i,f),p=l&&l!=="/"&&l.endsWith("/"),b=(a||l===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(p||b)&&(m.pathname+="/"),m}var hu=t=>t.join("/").replace(/\/\/+/g,"/"),vH=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xH=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,bH=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,wH=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function _H(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function EH(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var w5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function _5(t,e){let n=t;if(typeof n!="string"||!gH.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(w5)try{let a=new URL(window.location.href),l=n.startsWith("//")?new URL(a.protocol+n):new URL(n),f=yu(l.pathname,e);l.origin===a.origin&&f!=null?n=f+l.search+l.hash:i=!0}catch{To(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var E5=["POST","PUT","PATCH","DELETE"];new Set(E5);var AH=["GET",...E5];new Set(AH);var vm=D.createContext(null);vm.displayName="DataRouter";var wx=D.createContext(null);wx.displayName="DataRouterState";var SH=D.createContext(!1),A5=D.createContext({isTransitioning:!1});A5.displayName="ViewTransition";var TH=D.createContext(new Map);TH.displayName="Fetchers";var IH=D.createContext(null);IH.displayName="Await";var lo=D.createContext(null);lo.displayName="Navigation";var Kp=D.createContext(null);Kp.displayName="Location";var Dl=D.createContext({outlet:null,matches:[],isDataRoute:!1});Dl.displayName="Route";var BS=D.createContext(null);BS.displayName="RouteError";var S5="REACT_ROUTER_ERROR",CH="REDIRECT",OH="ROUTE_ERROR_RESPONSE";function NH(t){if(t.startsWith(`${S5}:${CH}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function RH(t){if(t.startsWith(`${S5}:${OH}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new wH(e.status,e.statusText,e.data)}catch{}}function PH(t,{relative:e}={}){ni(xm(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=D.useContext(lo),{hash:i,pathname:a,search:l}=Wp(t,{relative:e}),f=a;return n!=="/"&&(f=a==="/"?n:hu([n,a])),r.createHref({pathname:f,search:l,hash:i})}function xm(){return D.useContext(Kp)!=null}function kl(){return ni(xm(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(Kp).location}var T5="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function I5(t){D.useContext(lo).static||D.useLayoutEffect(t)}function Jc(){let{isDataRoute:t}=D.useContext(Dl);return t?HH():DH()}function DH(){ni(xm(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(vm),{basename:e,navigator:n}=D.useContext(lo),{matches:r}=D.useContext(Dl),{pathname:i}=kl(),a=JSON.stringify(jS(r)),l=D.useRef(!1);return I5(()=>{l.current=!0}),D.useCallback((m,p={})=>{if(To(l.current,T5),!l.current)return;if(typeof m=="number"){n.go(m);return}let b=LS(m,JSON.parse(a),i,p.relative==="path");t==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:hu([e,b.pathname])),(p.replace?n.replace:n.push)(b,p.state,p)},[e,n,a,i,t])}D.createContext(null);function Wp(t,{relative:e}={}){let{matches:n}=D.useContext(Dl),{pathname:r}=kl(),i=JSON.stringify(jS(n));return D.useMemo(()=>LS(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function kH(t,e){return C5(t,e)}function C5(t,e,n,r,i){ni(xm(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=D.useContext(lo),{matches:l}=D.useContext(Dl),f=l[l.length-1],m=f?f.params:{},p=f?f.pathname:"/",b=f?f.pathnameBase:"/",_=f&&f.route;{let $=_&&_.path||"";N5(p,!_||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let T=kl(),R;if(e){let $=typeof e=="string"?ym(e):e;ni(b==="/"||$.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${$.pathname}" was given in the \`location\` prop.`),R=$}else R=T;let j=R.pathname||"/",M=j;if(b!=="/"){let $=b.replace(/^\//,"").split("/");M="/"+j.replace(/^\//,"").split("/").slice($.length).join("/")}let L=v5(t,{pathname:M});To(_||L!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),To(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=FH(L&&L.map($=>Object.assign({},$,{params:Object.assign({},m,$.params),pathname:hu([b,a.encodeLocation?a.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?b:hu([b,a.encodeLocation?a.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),l,n,r,i);return e&&z?D.createElement(Kp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},z):z}function MH(){let t=GH(),e=_H(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:a},"ErrorBoundary")," or"," ",D.createElement("code",{style:a},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,l)}var jH=D.createElement(MH,null),O5=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=RH(t.digest);n&&(t=n)}let e=t!==void 0?D.createElement(Dl.Provider,{value:this.props.routeContext},D.createElement(BS.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?D.createElement(LH,{error:t},e):e}};O5.contextType=SH;var F_=new WeakMap;function LH({children:t,error:e}){let{basename:n}=D.useContext(lo);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=NH(e.digest);if(r){let i=F_.get(e);if(i)throw i;let a=_5(r.location,n);if(w5&&!F_.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw F_.set(e,l),l}return D.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function BH({routeContext:t,match:e,children:n}){let r=D.useContext(vm);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(Dl.Provider,{value:t},n)}function FH(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=n?.errors;if(l!=null){let b=a.findIndex(_=>_.route.id&&l?.[_.route.id]!==void 0);ni(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,b+1))}let f=!1,m=-1;if(n)for(let b=0;b<a.length;b++){let _=a[b];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=b),_.route.id){let{loaderData:T,errors:R}=n,j=_.route.loader&&!T.hasOwnProperty(_.route.id)&&(!R||R[_.route.id]===void 0);if(_.route.lazy||j){f=!0,m>=0?a=a.slice(0,m+1):a=[a[0]];break}}}let p=n&&r?(b,_)=>{r(b,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:EH(n.matches),errorInfo:_})}:void 0;return a.reduceRight((b,_,T)=>{let R,j=!1,M=null,L=null;n&&(R=l&&_.route.id?l[_.route.id]:void 0,M=_.route.errorElement||jH,f&&(m<0&&T===0?(N5("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,L=null):m===T&&(j=!0,L=_.route.hydrateFallbackElement||null)));let z=e.concat(a.slice(0,T+1)),$=()=>{let K;return R?K=M:j?K=L:_.route.Component?K=D.createElement(_.route.Component,null):_.route.element?K=_.route.element:K=b,D.createElement(BH,{match:_,routeContext:{outlet:b,matches:z,isDataRoute:n!=null},children:K})};return n&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?D.createElement(O5,{location:n.location,revalidation:n.revalidation,component:M,error:R,children:$(),routeContext:{outlet:null,matches:z,isDataRoute:!0},onError:p}):$()},null)}function FS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VH(t){let e=D.useContext(vm);return ni(e,FS(t)),e}function zH(t){let e=D.useContext(wx);return ni(e,FS(t)),e}function UH(t){let e=D.useContext(Dl);return ni(e,FS(t)),e}function VS(t){let e=UH(t),n=e.matches[e.matches.length-1];return ni(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function qH(){return VS("useRouteId")}function GH(){let t=D.useContext(BS),e=zH("useRouteError"),n=VS("useRouteError");return t!==void 0?t:e.errors?.[n]}function HH(){let{router:t}=VH("useNavigate"),e=VS("useNavigate"),n=D.useRef(!1);return I5(()=>{n.current=!0}),D.useCallback(async(i,a={})=>{To(n.current,T5),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var MR={};function N5(t,e,n){!e&&!MR[t]&&(MR[t]=!0,To(!1,n))}D.memo(KH);function KH({routes:t,future:e,state:n,onError:r}){return C5(t,void 0,n,r,e)}function WH({to:t,replace:e,state:n,relative:r}){ni(xm(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=D.useContext(lo);To(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=D.useContext(Dl),{pathname:l}=kl(),f=Jc(),m=LS(t,jS(a),l,r==="path"),p=JSON.stringify(m);return D.useEffect(()=>{f(JSON.parse(p),{replace:e,state:n,relative:r})},[f,p,r,e,n]),null}function yc(t){ni(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $H({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:l}){ni(!xm(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=t.replace(/^\/*/,"/"),m=D.useMemo(()=>({basename:f,navigator:i,static:a,unstable_useTransitions:l,future:{}}),[f,i,a,l]);typeof n=="string"&&(n=ym(n));let{pathname:p="/",search:b="",hash:_="",state:T=null,key:R="default"}=n,j=D.useMemo(()=>{let M=yu(p,f);return M==null?null:{location:{pathname:M,search:b,hash:_,state:T,key:R},navigationType:r}},[f,p,b,_,T,R,r]);return To(j!=null,`<Router basename="${f}"> is not able to match the URL "${p}${b}${_}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:D.createElement(lo.Provider,{value:m},D.createElement(Kp.Provider,{children:e,value:j}))}function YH({children:t,location:e}){return kH(FE(t),e)}function FE(t,e=[]){let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let a=[...e,i];if(r.type===D.Fragment){n.push.apply(n,FE(r.props.children,a));return}ni(r.type===yc,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ni(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=FE(r.props.children,a)),n.push(l)}),n}var py="get",yy="application/x-www-form-urlencoded";function _x(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function XH(t){return _x(t)&&t.tagName.toLowerCase()==="button"}function QH(t){return _x(t)&&t.tagName.toLowerCase()==="form"}function ZH(t){return _x(t)&&t.tagName.toLowerCase()==="input"}function JH(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function eK(t,e){return t.button===0&&(!e||e==="_self")&&!JH(t)}function VE(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function tK(t,e){let n=VE(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var F1=null;function nK(){if(F1===null)try{new FormData(document.createElement("form"),0),F1=!1}catch{F1=!0}return F1}var rK=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function V_(t){return t!=null&&!rK.has(t)?(To(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yy}"`),null):t}function iK(t,e){let n,r,i,a,l;if(QH(t)){let f=t.getAttribute("action");r=f?yu(f,e):null,n=t.getAttribute("method")||py,i=V_(t.getAttribute("enctype"))||yy,a=new FormData(t)}else if(XH(t)||ZH(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=t.getAttribute("formaction")||f.getAttribute("action");if(r=m?yu(m,e):null,n=t.getAttribute("formmethod")||f.getAttribute("method")||py,i=V_(t.getAttribute("formenctype"))||V_(f.getAttribute("enctype"))||yy,a=new FormData(f,t),!nK()){let{name:p,type:b,value:_}=t;if(b==="image"){let T=p?`${p}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else p&&a.append(p,_)}}else{if(_x(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=py,r=null,i=yy,l=t}return a&&i==="text/plain"&&(l=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function zS(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function aK(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&yu(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function sK(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oK(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function lK(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await sK(a,n);return l.links?l.links():[]}return[]}));return dK(r.flat(1).filter(oK).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function jR(t,e,n,r,i,a){let l=(m,p)=>n[p]?m.route.id!==n[p].route.id:!0,f=(m,p)=>n[p].pathname!==m.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==m.params["*"];return a==="assets"?e.filter((m,p)=>l(m,p)||f(m,p)):a==="data"?e.filter((m,p)=>{let b=r.routes[m.route.id];if(!b||!b.hasLoader)return!1;if(l(m,p)||f(m,p))return!0;if(m.route.shouldRevalidate){let _=m.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function uK(t,e,{includeHydrateFallback:n}={}){return cK(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function cK(t){return[...new Set(t)]}function fK(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function dK(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(fK(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function R5(){let t=D.useContext(vm);return zS(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function hK(){let t=D.useContext(wx);return zS(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var US=D.createContext(void 0);US.displayName="FrameworkContext";function P5(){let t=D.useContext(US);return zS(t,"You must render this element inside a <HydratedRouter> element"),t}function mK(t,e){let n=D.useContext(US),[r,i]=D.useState(!1),[a,l]=D.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:p,onMouseLeave:b,onTouchStart:_}=e,T=D.useRef(null);D.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let M=z=>{z.forEach($=>{l($.isIntersecting)})},L=new IntersectionObserver(M,{threshold:.5});return T.current&&L.observe(T.current),()=>{L.disconnect()}}},[t]),D.useEffect(()=>{if(r){let M=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(M)}}},[r]);let R=()=>{i(!0)},j=()=>{i(!1),l(!1)};return n?t!=="intent"?[a,T,{}]:[a,T,{onFocus:Tg(f,R),onBlur:Tg(m,j),onMouseEnter:Tg(p,R),onMouseLeave:Tg(b,j),onTouchStart:Tg(_,R)}]:[!1,T,{}]}function Tg(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function gK({page:t,...e}){let{router:n}=R5(),r=D.useMemo(()=>v5(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?D.createElement(yK,{page:t,matches:r,...e}):null}function pK(t){let{manifest:e,routeModules:n}=P5(),[r,i]=D.useState([]);return D.useEffect(()=>{let a=!1;return lK(t,e,n).then(l=>{a||i(l)}),()=>{a=!0}},[t,e,n]),r}function yK({page:t,matches:e,...n}){let r=kl(),{future:i,manifest:a,routeModules:l}=P5(),{basename:f}=R5(),{loaderData:m,matches:p}=hK(),b=D.useMemo(()=>jR(t,e,p,a,r,"data"),[t,e,p,a,r]),_=D.useMemo(()=>jR(t,e,p,a,r,"assets"),[t,e,p,a,r]),T=D.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let M=new Set,L=!1;if(e.forEach($=>{let K=a.routes[$.route.id];!K||!K.hasLoader||(!b.some(J=>J.route.id===$.route.id)&&$.route.id in m&&l[$.route.id]?.shouldRevalidate||K.hasClientLoader?L=!0:M.add($.route.id))}),M.size===0)return[];let z=aK(t,f,i.unstable_trailingSlashAwareDataRequests,"data");return L&&M.size>0&&z.searchParams.set("_routes",e.filter($=>M.has($.route.id)).map($=>$.route.id).join(",")),[z.pathname+z.search]},[f,i.unstable_trailingSlashAwareDataRequests,m,r,a,b,e,t,l]),R=D.useMemo(()=>uK(_,a),[_,a]),j=pK(_);return D.createElement(D.Fragment,null,T.map(M=>D.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),R.map(M=>D.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),j.map(({key:M,link:L})=>D.createElement("link",{key:M,nonce:n.nonce,...L,crossOrigin:L.crossOrigin??n.crossOrigin})))}function vK(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var xK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xK&&(window.__reactRouterVersion="7.13.0")}catch{}function bK({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=D.useRef();i.current==null&&(i.current=ZG({window:r,v5Compat:!0}));let a=i.current,[l,f]=D.useState({action:a.action,location:a.location}),m=D.useCallback(p=>{n===!1?f(p):D.startTransition(()=>f(p))},[n]);return D.useLayoutEffect(()=>a.listen(m),[a,m]),D.createElement($H,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:n})}var D5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,k5=D.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:l,state:f,target:m,to:p,preventScrollReset:b,viewTransition:_,unstable_defaultShouldRevalidate:T,...R},j){let{basename:M,unstable_useTransitions:L}=D.useContext(lo),z=typeof p=="string"&&D5.test(p),$=_5(p,M);p=$.to;let K=PH(p,{relative:i}),[J,ce,Z]=mK(r,R),V=AK(p,{replace:l,state:f,target:m,preventScrollReset:b,relative:i,viewTransition:_,unstable_defaultShouldRevalidate:T,unstable_useTransitions:L});function W(ae){e&&e(ae),ae.defaultPrevented||V(ae)}let U=D.createElement("a",{...R,...Z,href:$.absoluteURL||K,onClick:$.isExternal||a?e:W,ref:vK(j,ce),target:m,"data-discover":!z&&n==="render"?"true":void 0});return J&&!z?D.createElement(D.Fragment,null,U,D.createElement(gK,{page:K})):U});k5.displayName="Link";var wK=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:l,viewTransition:f,children:m,...p},b){let _=Wp(l,{relative:p.relative}),T=kl(),R=D.useContext(wx),{navigator:j,basename:M}=D.useContext(lo),L=R!=null&&NK(_)&&f===!0,z=j.encodeLocation?j.encodeLocation(_).pathname:_.pathname,$=T.pathname,K=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;n||($=$.toLowerCase(),K=K?K.toLowerCase():null,z=z.toLowerCase()),K&&M&&(K=yu(K,M)||K);const J=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let ce=$===z||!i&&$.startsWith(z)&&$.charAt(J)==="/",Z=K!=null&&(K===z||!i&&K.startsWith(z)&&K.charAt(z.length)==="/"),V={isActive:ce,isPending:Z,isTransitioning:L},W=ce?e:void 0,U;typeof r=="function"?U=r(V):U=[r,ce?"active":null,Z?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let ae=typeof a=="function"?a(V):a;return D.createElement(k5,{...p,"aria-current":W,className:U,ref:b,style:ae,to:l,viewTransition:f},typeof m=="function"?m(V):m)});wK.displayName="NavLink";var _K=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:l=py,action:f,onSubmit:m,relative:p,preventScrollReset:b,viewTransition:_,unstable_defaultShouldRevalidate:T,...R},j)=>{let{unstable_useTransitions:M}=D.useContext(lo),L=CK(),z=OK(f,{relative:p}),$=l.toLowerCase()==="get"?"get":"post",K=typeof f=="string"&&D5.test(f),J=ce=>{if(m&&m(ce),ce.defaultPrevented)return;ce.preventDefault();let Z=ce.nativeEvent.submitter,V=Z?.getAttribute("formmethod")||l,W=()=>L(Z||ce.currentTarget,{fetcherKey:e,method:V,navigate:n,replace:i,state:a,relative:p,preventScrollReset:b,viewTransition:_,unstable_defaultShouldRevalidate:T});M&&n!==!1?D.startTransition(()=>W()):W()};return D.createElement("form",{ref:j,method:$,action:z,onSubmit:r?m:J,...R,"data-discover":!K&&t==="render"?"true":void 0})});_K.displayName="Form";function EK(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function M5(t){let e=D.useContext(vm);return ni(e,EK(t)),e}function AK(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let p=Jc(),b=kl(),_=Wp(t,{relative:a});return D.useCallback(T=>{if(eK(T,e)){T.preventDefault();let R=n!==void 0?n:hp(b)===hp(_),j=()=>p(t,{replace:R,state:r,preventScrollReset:i,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:f});m?D.startTransition(()=>j()):j()}},[b,p,_,n,r,e,t,i,a,l,f,m])}function SK(t){To(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=D.useRef(VE(t)),n=D.useRef(!1),r=kl(),i=D.useMemo(()=>tK(r.search,n.current?null:e.current),[r.search]),a=Jc(),l=D.useCallback((f,m)=>{const p=VE(typeof f=="function"?f(new URLSearchParams(i)):f);n.current=!0,a("?"+p,m)},[a,i]);return[i,l]}var TK=0,IK=()=>`__${String(++TK)}__`;function CK(){let{router:t}=M5("useSubmit"),{basename:e}=D.useContext(lo),n=qH(),r=t.fetch,i=t.navigate;return D.useCallback(async(a,l={})=>{let{action:f,method:m,encType:p,formData:b,body:_}=iK(a,e);if(l.navigate===!1){let T=l.fetcherKey||IK();await r(T,n,l.action||f,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:b,body:_,formMethod:l.method||m,formEncType:l.encType||p,flushSync:l.flushSync})}else await i(l.action||f,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:b,body:_,formMethod:l.method||m,formEncType:l.encType||p,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,i,e,n])}function OK(t,{relative:e}={}){let{basename:n}=D.useContext(lo),r=D.useContext(Dl);ni(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Wp(t||".",{relative:e})},l=kl();if(t==null){a.search=l.search;let f=new URLSearchParams(a.search),m=f.getAll("index");if(m.some(b=>b==="")){f.delete("index"),m.filter(_=>_).forEach(_=>f.append("index",_));let b=f.toString();a.search=b?`?${b}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:hu([n,a.pathname])),hp(a)}function NK(t,{relative:e}={}){let n=D.useContext(A5);ni(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=M5("useViewTransitionState"),i=Wp(t,{relative:e});if(!n.isTransitioning)return!1;let a=yu(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=yu(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Hy(i.pathname,l)!=null||Hy(i.pathname,a)!=null}var j5=y5();const RK=()=>{};var LR={};const L5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},PK=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],l=t[n++],f=t[n++],m=((i&7)<<18|(a&63)<<12|(l&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const a=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},B5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],l=i+1<t.length,f=l?t[i+1]:0,m=i+2<t.length,p=m?t[i+2]:0,b=a>>2,_=(a&3)<<4|f>>4;let T=(f&15)<<2|p>>6,R=p&63;m||(R=64,l||(T=64)),r.push(n[b],n[_],n[T],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(L5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PK(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],f=i<t.length?n[t.charAt(i)]:0;++i;const p=i<t.length?n[t.charAt(i)]:64;++i;const _=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||f==null||p==null||_==null)throw new DK;const T=a<<2|f>>4;if(r.push(T),p!==64){const R=f<<4&240|p>>2;if(r.push(R),_!==64){const j=p<<6&192|_;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class DK extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kK=function(t){const e=L5(t);return B5.encodeByteArray(e,!0)},Ky=function(t){return kK(t).replace(/\./g,"")},F5=function(t){try{return B5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function V5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const MK=()=>V5().__FIREBASE_DEFAULTS__,jK=()=>{if(typeof process>"u"||typeof LR>"u")return;const t=LR.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LK=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&F5(t[1]);return e&&JSON.parse(e)},Ex=()=>{try{return RK()||MK()||jK()||LK()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},z5=t=>Ex()?.emulatorHosts?.[t],BK=t=>{const e=z5(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},U5=()=>Ex()?.config,q5=t=>Ex()?.[`_${t}`];class FK{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function wd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qS(t){return(await fetch(t,{credentials:"include"})).ok}function VK(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ky(JSON.stringify(n)),Ky(JSON.stringify(l)),""].join(".")}const ep={};function zK(){const t={prod:[],emulator:[]};for(const e of Object.keys(ep))ep[e]?t.emulator.push(e):t.prod.push(e);return t}function UK(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let BR=!1;function G5(t,e){if(typeof window>"u"||typeof document>"u"||!wd(window.location.host)||ep[t]===e||ep[t]||BR)return;ep[t]=e;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",a=zK().prod.length>0;function l(){const T=document.getElementById(r);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{BR=!0,l()},T}function b(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=UK(r),R=n("text"),j=document.getElementById(R)||document.createElement("span"),M=n("learnmore"),L=document.getElementById(M)||document.createElement("a"),z=n("preprendIcon"),$=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const K=T.element;f(K),b(L,M);const J=p();m($,z),K.append($,j,L,J),document.body.appendChild(K)}a?(j.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function $i(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qK(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($i())}function H5(){const t=Ex()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GK(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HK(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function KK(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WK(){const t=$i();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function K5(){return!H5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W5(){return!H5()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function $5(){try{return typeof indexedDB=="object"}catch{return!1}}function $K(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const YK="FirebaseError";class Ru extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=YK,Object.setPrototypeOf(this,Ru.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$p.prototype.create)}}class $p{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?XK(a,r):"Error",f=`${this.serviceName}: ${l} (${i}).`;return new Ru(i,f,r)}}function XK(t,e){return t.replace(QK,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const QK=/\{\$([^}]+)}/g;function ZK(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $o(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],l=e[i];if(FR(a)&&FR(l)){if(!$o(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function FR(t){return t!==null&&typeof t=="object"}function Yp(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Gg(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Hg(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function JK(t,e){const n=new eW(t,e);return n.subscribe.bind(n)}class eW{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");tW(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=z_),i.error===void 0&&(i.error=z_),i.complete===void 0&&(i.complete=z_);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tW(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function z_(){}function wr(t){return t&&t._delegate?t._delegate:t}class Zf{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Cf="[DEFAULT]";let nW=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new FK;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iW(e))try{this.getOrInitializeService({instanceIdentifier:Cf})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Cf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cf){return this.instances.has(e)}getOptions(e=Cf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,l]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);r===f&&l.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rW(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cf){return this.component?this.component.multipleInstances?e:Cf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function rW(t){return t===Cf?void 0:t}function iW(t){return t.instantiationMode==="EAGER"}class aW{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nW(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Dn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Dn||(Dn={}));const sW={debug:Dn.DEBUG,verbose:Dn.VERBOSE,info:Dn.INFO,warn:Dn.WARN,error:Dn.ERROR,silent:Dn.SILENT},oW=Dn.INFO,lW={[Dn.DEBUG]:"log",[Dn.VERBOSE]:"log",[Dn.INFO]:"info",[Dn.WARN]:"warn",[Dn.ERROR]:"error"},uW=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=lW[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class GS{constructor(e){this.name=e,this._logLevel=oW,this._logHandler=uW,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Dn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sW[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Dn.DEBUG,...e),this._logHandler(this,Dn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Dn.VERBOSE,...e),this._logHandler(this,Dn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Dn.INFO,...e),this._logHandler(this,Dn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Dn.WARN,...e),this._logHandler(this,Dn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Dn.ERROR,...e),this._logHandler(this,Dn.ERROR,...e)}}const cW=(t,e)=>e.some(n=>t instanceof n);let VR,zR;function fW(){return VR||(VR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dW(){return zR||(zR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Y5=new WeakMap,zE=new WeakMap,X5=new WeakMap,U_=new WeakMap,HS=new WeakMap;function hW(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(Pc(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Y5.set(n,t)}).catch(()=>{}),HS.set(e,t),e}function mW(t){if(zE.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});zE.set(t,e)}let UE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return zE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||X5.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gW(t){UE=t(UE)}function pW(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(q_(this),e,...n);return X5.set(r,e.sort?e.sort():[e]),Pc(r)}:dW().includes(t)?function(...e){return t.apply(q_(this),e),Pc(Y5.get(this))}:function(...e){return Pc(t.apply(q_(this),e))}}function yW(t){return typeof t=="function"?pW(t):(t instanceof IDBTransaction&&mW(t),cW(t,fW())?new Proxy(t,UE):t)}function Pc(t){if(t instanceof IDBRequest)return hW(t);if(U_.has(t))return U_.get(t);const e=yW(t);return e!==t&&(U_.set(t,e),HS.set(e,t)),e}const q_=t=>HS.get(t);function vW(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(t,e),f=Pc(l);return r&&l.addEventListener("upgradeneeded",m=>{r(Pc(l.result),m.oldVersion,m.newVersion,Pc(l.transaction),m)}),n&&l.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),f.then(m=>{a&&m.addEventListener("close",()=>a()),i&&m.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const xW=["get","getKey","getAll","getAllKeys","count"],bW=["put","add","delete","clear"],G_=new Map;function UR(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(G_.get(e))return G_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=bW.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||xW.includes(n)))return;const a=async function(l,...f){const m=this.transaction(l,i?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(f.shift())),(await Promise.all([p[n](...f),i&&m.done]))[0]};return G_.set(e,a),a}gW(t=>({...t,get:(e,n,r)=>UR(e,n)||t.get(e,n,r),has:(e,n)=>!!UR(e,n)||t.has(e,n)}));class wW{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_W(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _W(t){return t.getComponent()?.type==="VERSION"}const qE="@firebase/app",qR="0.14.8";const vu=new GS("@firebase/app"),EW="@firebase/app-compat",AW="@firebase/analytics-compat",SW="@firebase/analytics",TW="@firebase/app-check-compat",IW="@firebase/app-check",CW="@firebase/auth",OW="@firebase/auth-compat",NW="@firebase/database",RW="@firebase/data-connect",PW="@firebase/database-compat",DW="@firebase/functions",kW="@firebase/functions-compat",MW="@firebase/installations",jW="@firebase/installations-compat",LW="@firebase/messaging",BW="@firebase/messaging-compat",FW="@firebase/performance",VW="@firebase/performance-compat",zW="@firebase/remote-config",UW="@firebase/remote-config-compat",qW="@firebase/storage",GW="@firebase/storage-compat",HW="@firebase/firestore",KW="@firebase/ai",WW="@firebase/firestore-compat",$W="firebase",YW="12.9.0";const Wy="[DEFAULT]",XW={[qE]:"fire-core",[EW]:"fire-core-compat",[SW]:"fire-analytics",[AW]:"fire-analytics-compat",[IW]:"fire-app-check",[TW]:"fire-app-check-compat",[CW]:"fire-auth",[OW]:"fire-auth-compat",[NW]:"fire-rtdb",[RW]:"fire-data-connect",[PW]:"fire-rtdb-compat",[DW]:"fire-fn",[kW]:"fire-fn-compat",[MW]:"fire-iid",[jW]:"fire-iid-compat",[LW]:"fire-fcm",[BW]:"fire-fcm-compat",[FW]:"fire-perf",[VW]:"fire-perf-compat",[zW]:"fire-rc",[UW]:"fire-rc-compat",[qW]:"fire-gcs",[GW]:"fire-gcs-compat",[HW]:"fire-fst",[WW]:"fire-fst-compat",[KW]:"fire-vertex","fire-js":"fire-js",[$W]:"fire-js-all"};const $y=new Map,QW=new Map,GE=new Map;function GR(t,e){try{t.container.addComponent(e)}catch(n){vu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fh(t){const e=t.name;if(GE.has(e))return vu.debug(`There were multiple attempts to register component ${e}.`),!1;GE.set(e,t);for(const n of $y.values())GR(n,t);for(const n of QW.values())GR(n,t);return!0}function Xp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ZW(t,e,n=Wy){Xp(t,e).clearInstance(n)}function Ao(t){return t==null?!1:t.settings!==void 0}const JW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dc=new $p("app","Firebase",JW);class e${constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dc.create("app-deleted",{appName:this._name})}}const bm=YW;function Q5(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Wy,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Dc.create("bad-app-name",{appName:String(i)});if(n||(n=U5()),!n)throw Dc.create("no-options");const a=$y.get(i);if(a){if($o(n,a.options)&&$o(r,a.config))return a;throw Dc.create("duplicate-app",{appName:i})}const l=new aW(i);for(const m of GE.values())l.addComponent(m);const f=new e$(n,r,l);return $y.set(i,f),f}function Z5(t=Wy){const e=$y.get(t);if(!e&&t===Wy&&U5())return Q5();if(!e)throw Dc.create("no-app",{appName:t});return e}function kc(t,e,n){let r=XW[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vu.warn(l.join(" "));return}Fh(new Zf(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const t$="firebase-heartbeat-database",n$=1,mp="firebase-heartbeat-store";let H_=null;function J5(){return H_||(H_=vW(t$,n$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(mp)}catch(n){console.warn(n)}}}}).catch(t=>{throw Dc.create("idb-open",{originalErrorMessage:t.message})})),H_}async function r$(t){try{const n=(await J5()).transaction(mp),r=await n.objectStore(mp).get(ej(t));return await n.done,r}catch(e){if(e instanceof Ru)vu.warn(e.message);else{const n=Dc.create("idb-get",{originalErrorMessage:e?.message});vu.warn(n.message)}}}async function HR(t,e){try{const r=(await J5()).transaction(mp,"readwrite");await r.objectStore(mp).put(e,ej(t)),await r.done}catch(n){if(n instanceof Ru)vu.warn(n.message);else{const r=Dc.create("idb-set",{originalErrorMessage:n?.message});vu.warn(r.message)}}}function ej(t){return`${t.name}!${t.options.appId}`}const i$=1024,a$=30;class s${constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new l$(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=KR();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>a$){const i=u$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){vu.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=KR(),{heartbeatsToSend:n,unsentEntries:r}=o$(this._heartbeatsCache.heartbeats),i=Ky(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return vu.warn(e),""}}}function KR(){return new Date().toISOString().substring(0,10)}function o$(t,e=i$){const n=[];let r=t.slice();for(const i of t){const a=n.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),WR(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),WR(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class l${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $5()?$K().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await r$(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return HR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return HR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function WR(t){return Ky(JSON.stringify({version:2,heartbeats:t})).length}function u$(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function c$(t){Fh(new Zf("platform-logger",e=>new wW(e),"PRIVATE")),Fh(new Zf("heartbeat",e=>new s$(e),"PRIVATE")),kc(qE,qR,t),kc(qE,qR,"esm2020"),kc("fire-js","")}c$("");var $R=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Mc,tj;(function(){var t;function e(V,W){function U(){}U.prototype=W.prototype,V.F=W.prototype,V.prototype=new U,V.prototype.constructor=V,V.D=function(ae,ie,Q){for(var ne=Array(arguments.length-2),be=2;be<arguments.length;be++)ne[be-2]=arguments[be];return W.prototype[ie].apply(ae,ne)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(V,W,U){U||(U=0);const ae=Array(16);if(typeof W=="string")for(var ie=0;ie<16;++ie)ae[ie]=W.charCodeAt(U++)|W.charCodeAt(U++)<<8|W.charCodeAt(U++)<<16|W.charCodeAt(U++)<<24;else for(ie=0;ie<16;++ie)ae[ie]=W[U++]|W[U++]<<8|W[U++]<<16|W[U++]<<24;W=V.g[0],U=V.g[1],ie=V.g[2];let Q=V.g[3],ne;ne=W+(Q^U&(ie^Q))+ae[0]+3614090360&4294967295,W=U+(ne<<7&4294967295|ne>>>25),ne=Q+(ie^W&(U^ie))+ae[1]+3905402710&4294967295,Q=W+(ne<<12&4294967295|ne>>>20),ne=ie+(U^Q&(W^U))+ae[2]+606105819&4294967295,ie=Q+(ne<<17&4294967295|ne>>>15),ne=U+(W^ie&(Q^W))+ae[3]+3250441966&4294967295,U=ie+(ne<<22&4294967295|ne>>>10),ne=W+(Q^U&(ie^Q))+ae[4]+4118548399&4294967295,W=U+(ne<<7&4294967295|ne>>>25),ne=Q+(ie^W&(U^ie))+ae[5]+1200080426&4294967295,Q=W+(ne<<12&4294967295|ne>>>20),ne=ie+(U^Q&(W^U))+ae[6]+2821735955&4294967295,ie=Q+(ne<<17&4294967295|ne>>>15),ne=U+(W^ie&(Q^W))+ae[7]+4249261313&4294967295,U=ie+(ne<<22&4294967295|ne>>>10),ne=W+(Q^U&(ie^Q))+ae[8]+1770035416&4294967295,W=U+(ne<<7&4294967295|ne>>>25),ne=Q+(ie^W&(U^ie))+ae[9]+2336552879&4294967295,Q=W+(ne<<12&4294967295|ne>>>20),ne=ie+(U^Q&(W^U))+ae[10]+4294925233&4294967295,ie=Q+(ne<<17&4294967295|ne>>>15),ne=U+(W^ie&(Q^W))+ae[11]+2304563134&4294967295,U=ie+(ne<<22&4294967295|ne>>>10),ne=W+(Q^U&(ie^Q))+ae[12]+1804603682&4294967295,W=U+(ne<<7&4294967295|ne>>>25),ne=Q+(ie^W&(U^ie))+ae[13]+4254626195&4294967295,Q=W+(ne<<12&4294967295|ne>>>20),ne=ie+(U^Q&(W^U))+ae[14]+2792965006&4294967295,ie=Q+(ne<<17&4294967295|ne>>>15),ne=U+(W^ie&(Q^W))+ae[15]+1236535329&4294967295,U=ie+(ne<<22&4294967295|ne>>>10),ne=W+(ie^Q&(U^ie))+ae[1]+4129170786&4294967295,W=U+(ne<<5&4294967295|ne>>>27),ne=Q+(U^ie&(W^U))+ae[6]+3225465664&4294967295,Q=W+(ne<<9&4294967295|ne>>>23),ne=ie+(W^U&(Q^W))+ae[11]+643717713&4294967295,ie=Q+(ne<<14&4294967295|ne>>>18),ne=U+(Q^W&(ie^Q))+ae[0]+3921069994&4294967295,U=ie+(ne<<20&4294967295|ne>>>12),ne=W+(ie^Q&(U^ie))+ae[5]+3593408605&4294967295,W=U+(ne<<5&4294967295|ne>>>27),ne=Q+(U^ie&(W^U))+ae[10]+38016083&4294967295,Q=W+(ne<<9&4294967295|ne>>>23),ne=ie+(W^U&(Q^W))+ae[15]+3634488961&4294967295,ie=Q+(ne<<14&4294967295|ne>>>18),ne=U+(Q^W&(ie^Q))+ae[4]+3889429448&4294967295,U=ie+(ne<<20&4294967295|ne>>>12),ne=W+(ie^Q&(U^ie))+ae[9]+568446438&4294967295,W=U+(ne<<5&4294967295|ne>>>27),ne=Q+(U^ie&(W^U))+ae[14]+3275163606&4294967295,Q=W+(ne<<9&4294967295|ne>>>23),ne=ie+(W^U&(Q^W))+ae[3]+4107603335&4294967295,ie=Q+(ne<<14&4294967295|ne>>>18),ne=U+(Q^W&(ie^Q))+ae[8]+1163531501&4294967295,U=ie+(ne<<20&4294967295|ne>>>12),ne=W+(ie^Q&(U^ie))+ae[13]+2850285829&4294967295,W=U+(ne<<5&4294967295|ne>>>27),ne=Q+(U^ie&(W^U))+ae[2]+4243563512&4294967295,Q=W+(ne<<9&4294967295|ne>>>23),ne=ie+(W^U&(Q^W))+ae[7]+1735328473&4294967295,ie=Q+(ne<<14&4294967295|ne>>>18),ne=U+(Q^W&(ie^Q))+ae[12]+2368359562&4294967295,U=ie+(ne<<20&4294967295|ne>>>12),ne=W+(U^ie^Q)+ae[5]+4294588738&4294967295,W=U+(ne<<4&4294967295|ne>>>28),ne=Q+(W^U^ie)+ae[8]+2272392833&4294967295,Q=W+(ne<<11&4294967295|ne>>>21),ne=ie+(Q^W^U)+ae[11]+1839030562&4294967295,ie=Q+(ne<<16&4294967295|ne>>>16),ne=U+(ie^Q^W)+ae[14]+4259657740&4294967295,U=ie+(ne<<23&4294967295|ne>>>9),ne=W+(U^ie^Q)+ae[1]+2763975236&4294967295,W=U+(ne<<4&4294967295|ne>>>28),ne=Q+(W^U^ie)+ae[4]+1272893353&4294967295,Q=W+(ne<<11&4294967295|ne>>>21),ne=ie+(Q^W^U)+ae[7]+4139469664&4294967295,ie=Q+(ne<<16&4294967295|ne>>>16),ne=U+(ie^Q^W)+ae[10]+3200236656&4294967295,U=ie+(ne<<23&4294967295|ne>>>9),ne=W+(U^ie^Q)+ae[13]+681279174&4294967295,W=U+(ne<<4&4294967295|ne>>>28),ne=Q+(W^U^ie)+ae[0]+3936430074&4294967295,Q=W+(ne<<11&4294967295|ne>>>21),ne=ie+(Q^W^U)+ae[3]+3572445317&4294967295,ie=Q+(ne<<16&4294967295|ne>>>16),ne=U+(ie^Q^W)+ae[6]+76029189&4294967295,U=ie+(ne<<23&4294967295|ne>>>9),ne=W+(U^ie^Q)+ae[9]+3654602809&4294967295,W=U+(ne<<4&4294967295|ne>>>28),ne=Q+(W^U^ie)+ae[12]+3873151461&4294967295,Q=W+(ne<<11&4294967295|ne>>>21),ne=ie+(Q^W^U)+ae[15]+530742520&4294967295,ie=Q+(ne<<16&4294967295|ne>>>16),ne=U+(ie^Q^W)+ae[2]+3299628645&4294967295,U=ie+(ne<<23&4294967295|ne>>>9),ne=W+(ie^(U|~Q))+ae[0]+4096336452&4294967295,W=U+(ne<<6&4294967295|ne>>>26),ne=Q+(U^(W|~ie))+ae[7]+1126891415&4294967295,Q=W+(ne<<10&4294967295|ne>>>22),ne=ie+(W^(Q|~U))+ae[14]+2878612391&4294967295,ie=Q+(ne<<15&4294967295|ne>>>17),ne=U+(Q^(ie|~W))+ae[5]+4237533241&4294967295,U=ie+(ne<<21&4294967295|ne>>>11),ne=W+(ie^(U|~Q))+ae[12]+1700485571&4294967295,W=U+(ne<<6&4294967295|ne>>>26),ne=Q+(U^(W|~ie))+ae[3]+2399980690&4294967295,Q=W+(ne<<10&4294967295|ne>>>22),ne=ie+(W^(Q|~U))+ae[10]+4293915773&4294967295,ie=Q+(ne<<15&4294967295|ne>>>17),ne=U+(Q^(ie|~W))+ae[1]+2240044497&4294967295,U=ie+(ne<<21&4294967295|ne>>>11),ne=W+(ie^(U|~Q))+ae[8]+1873313359&4294967295,W=U+(ne<<6&4294967295|ne>>>26),ne=Q+(U^(W|~ie))+ae[15]+4264355552&4294967295,Q=W+(ne<<10&4294967295|ne>>>22),ne=ie+(W^(Q|~U))+ae[6]+2734768916&4294967295,ie=Q+(ne<<15&4294967295|ne>>>17),ne=U+(Q^(ie|~W))+ae[13]+1309151649&4294967295,U=ie+(ne<<21&4294967295|ne>>>11),ne=W+(ie^(U|~Q))+ae[4]+4149444226&4294967295,W=U+(ne<<6&4294967295|ne>>>26),ne=Q+(U^(W|~ie))+ae[11]+3174756917&4294967295,Q=W+(ne<<10&4294967295|ne>>>22),ne=ie+(W^(Q|~U))+ae[2]+718787259&4294967295,ie=Q+(ne<<15&4294967295|ne>>>17),ne=U+(Q^(ie|~W))+ae[9]+3951481745&4294967295,V.g[0]=V.g[0]+W&4294967295,V.g[1]=V.g[1]+(ie+(ne<<21&4294967295|ne>>>11))&4294967295,V.g[2]=V.g[2]+ie&4294967295,V.g[3]=V.g[3]+Q&4294967295}r.prototype.v=function(V,W){W===void 0&&(W=V.length);const U=W-this.blockSize,ae=this.C;let ie=this.h,Q=0;for(;Q<W;){if(ie==0)for(;Q<=U;)i(this,V,Q),Q+=this.blockSize;if(typeof V=="string"){for(;Q<W;)if(ae[ie++]=V.charCodeAt(Q++),ie==this.blockSize){i(this,ae),ie=0;break}}else for(;Q<W;)if(ae[ie++]=V[Q++],ie==this.blockSize){i(this,ae),ie=0;break}}this.h=ie,this.o+=W},r.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var W=1;W<V.length-8;++W)V[W]=0;W=this.o*8;for(var U=V.length-8;U<V.length;++U)V[U]=W&255,W/=256;for(this.v(V),V=Array(16),W=0,U=0;U<4;++U)for(let ae=0;ae<32;ae+=8)V[W++]=this.g[U]>>>ae&255;return V};function a(V,W){var U=f;return Object.prototype.hasOwnProperty.call(U,V)?U[V]:U[V]=W(V)}function l(V,W){this.h=W;const U=[];let ae=!0;for(let ie=V.length-1;ie>=0;ie--){const Q=V[ie]|0;ae&&Q==W||(U[ie]=Q,ae=!1)}this.g=U}var f={};function m(V){return-128<=V&&V<128?a(V,function(W){return new l([W|0],W<0?-1:0)}):new l([V|0],V<0?-1:0)}function p(V){if(isNaN(V)||!isFinite(V))return _;if(V<0)return L(p(-V));const W=[];let U=1;for(let ae=0;V>=U;ae++)W[ae]=V/U|0,U*=4294967296;return new l(W,0)}function b(V,W){if(V.length==0)throw Error("number format error: empty string");if(W=W||10,W<2||36<W)throw Error("radix out of range: "+W);if(V.charAt(0)=="-")return L(b(V.substring(1),W));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const U=p(Math.pow(W,8));let ae=_;for(let Q=0;Q<V.length;Q+=8){var ie=Math.min(8,V.length-Q);const ne=parseInt(V.substring(Q,Q+ie),W);ie<8?(ie=p(Math.pow(W,ie)),ae=ae.j(ie).add(p(ne))):(ae=ae.j(U),ae=ae.add(p(ne)))}return ae}var _=m(0),T=m(1),R=m(16777216);t=l.prototype,t.m=function(){if(M(this))return-L(this).m();let V=0,W=1;for(let U=0;U<this.g.length;U++){const ae=this.i(U);V+=(ae>=0?ae:4294967296+ae)*W,W*=4294967296}return V},t.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(j(this))return"0";if(M(this))return"-"+L(this).toString(V);const W=p(Math.pow(V,6));var U=this;let ae="";for(;;){const ie=J(U,W).g;U=z(U,ie.j(W));let Q=((U.g.length>0?U.g[0]:U.h)>>>0).toString(V);if(U=ie,j(U))return Q+ae;for(;Q.length<6;)Q="0"+Q;ae=Q+ae}},t.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function j(V){if(V.h!=0)return!1;for(let W=0;W<V.g.length;W++)if(V.g[W]!=0)return!1;return!0}function M(V){return V.h==-1}t.l=function(V){return V=z(this,V),M(V)?-1:j(V)?0:1};function L(V){const W=V.g.length,U=[];for(let ae=0;ae<W;ae++)U[ae]=~V.g[ae];return new l(U,~V.h).add(T)}t.abs=function(){return M(this)?L(this):this},t.add=function(V){const W=Math.max(this.g.length,V.g.length),U=[];let ae=0;for(let ie=0;ie<=W;ie++){let Q=ae+(this.i(ie)&65535)+(V.i(ie)&65535),ne=(Q>>>16)+(this.i(ie)>>>16)+(V.i(ie)>>>16);ae=ne>>>16,Q&=65535,ne&=65535,U[ie]=ne<<16|Q}return new l(U,U[U.length-1]&-2147483648?-1:0)};function z(V,W){return V.add(L(W))}t.j=function(V){if(j(this)||j(V))return _;if(M(this))return M(V)?L(this).j(L(V)):L(L(this).j(V));if(M(V))return L(this.j(L(V)));if(this.l(R)<0&&V.l(R)<0)return p(this.m()*V.m());const W=this.g.length+V.g.length,U=[];for(var ae=0;ae<2*W;ae++)U[ae]=0;for(ae=0;ae<this.g.length;ae++)for(let ie=0;ie<V.g.length;ie++){const Q=this.i(ae)>>>16,ne=this.i(ae)&65535,be=V.i(ie)>>>16,he=V.i(ie)&65535;U[2*ae+2*ie]+=ne*he,$(U,2*ae+2*ie),U[2*ae+2*ie+1]+=Q*he,$(U,2*ae+2*ie+1),U[2*ae+2*ie+1]+=ne*be,$(U,2*ae+2*ie+1),U[2*ae+2*ie+2]+=Q*be,$(U,2*ae+2*ie+2)}for(V=0;V<W;V++)U[V]=U[2*V+1]<<16|U[2*V];for(V=W;V<2*W;V++)U[V]=0;return new l(U,0)};function $(V,W){for(;(V[W]&65535)!=V[W];)V[W+1]+=V[W]>>>16,V[W]&=65535,W++}function K(V,W){this.g=V,this.h=W}function J(V,W){if(j(W))throw Error("division by zero");if(j(V))return new K(_,_);if(M(V))return W=J(L(V),W),new K(L(W.g),L(W.h));if(M(W))return W=J(V,L(W)),new K(L(W.g),W.h);if(V.g.length>30){if(M(V)||M(W))throw Error("slowDivide_ only works with positive integers.");for(var U=T,ae=W;ae.l(V)<=0;)U=ce(U),ae=ce(ae);var ie=Z(U,1),Q=Z(ae,1);for(ae=Z(ae,2),U=Z(U,2);!j(ae);){var ne=Q.add(ae);ne.l(V)<=0&&(ie=ie.add(U),Q=ne),ae=Z(ae,1),U=Z(U,1)}return W=z(V,ie.j(W)),new K(ie,W)}for(ie=_;V.l(W)>=0;){for(U=Math.max(1,Math.floor(V.m()/W.m())),ae=Math.ceil(Math.log(U)/Math.LN2),ae=ae<=48?1:Math.pow(2,ae-48),Q=p(U),ne=Q.j(W);M(ne)||ne.l(V)>0;)U-=ae,Q=p(U),ne=Q.j(W);j(Q)&&(Q=T),ie=ie.add(Q),V=z(V,ne)}return new K(ie,V)}t.B=function(V){return J(this,V).h},t.and=function(V){const W=Math.max(this.g.length,V.g.length),U=[];for(let ae=0;ae<W;ae++)U[ae]=this.i(ae)&V.i(ae);return new l(U,this.h&V.h)},t.or=function(V){const W=Math.max(this.g.length,V.g.length),U=[];for(let ae=0;ae<W;ae++)U[ae]=this.i(ae)|V.i(ae);return new l(U,this.h|V.h)},t.xor=function(V){const W=Math.max(this.g.length,V.g.length),U=[];for(let ae=0;ae<W;ae++)U[ae]=this.i(ae)^V.i(ae);return new l(U,this.h^V.h)};function ce(V){const W=V.g.length+1,U=[];for(let ae=0;ae<W;ae++)U[ae]=V.i(ae)<<1|V.i(ae-1)>>>31;return new l(U,V.h)}function Z(V,W){const U=W>>5;W%=32;const ae=V.g.length-U,ie=[];for(let Q=0;Q<ae;Q++)ie[Q]=W>0?V.i(Q+U)>>>W|V.i(Q+U+1)<<32-W:V.i(Q+U);return new l(ie,V.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,tj=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=b,Mc=l}).apply(typeof $R<"u"?$R:typeof self<"u"?self:typeof window<"u"?window:{});var V1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var nj,Kg,rj,vy,HE,ij,aj,sj;(function(){var t,e=Object.defineProperty;function n(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof V1=="object"&&V1];for(var B=0;B<S.length;++B){var H=S[B];if(H&&H.Math==Math)return H}throw Error("Cannot find global object")}var r=n(this);function i(S,B){if(B)e:{var H=r;S=S.split(".");for(var se=0;se<S.length-1;se++){var Te=S[se];if(!(Te in H))break e;H=H[Te]}S=S[S.length-1],se=H[S],B=B(se),B!=se&&B!=null&&e(H,S,{configurable:!0,writable:!0,value:B})}}i("Symbol.dispose",function(S){return S||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(S){return S||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(S){return S||function(B){var H=[],se;for(se in B)Object.prototype.hasOwnProperty.call(B,se)&&H.push([se,B[se]]);return H}});var a=a||{},l=this||self;function f(S){var B=typeof S;return B=="object"&&S!=null||B=="function"}function m(S,B,H){return S.call.apply(S.bind,arguments)}function p(S,B,H){return p=m,p.apply(null,arguments)}function b(S,B){var H=Array.prototype.slice.call(arguments,1);return function(){var se=H.slice();return se.push.apply(se,arguments),S.apply(this,se)}}function _(S,B){function H(){}H.prototype=B.prototype,S.Z=B.prototype,S.prototype=new H,S.prototype.constructor=S,S.Ob=function(se,Te,Be){for(var lt=Array(arguments.length-2),Ht=2;Ht<arguments.length;Ht++)lt[Ht-2]=arguments[Ht];return B.prototype[Te].apply(se,lt)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?S=>S&&AsyncContext.Snapshot.wrap(S):S=>S;function R(S){const B=S.length;if(B>0){const H=Array(B);for(let se=0;se<B;se++)H[se]=S[se];return H}return[]}function j(S,B){for(let se=1;se<arguments.length;se++){const Te=arguments[se];var H=typeof Te;if(H=H!="object"?H:Te?Array.isArray(Te)?"array":H:"null",H=="array"||H=="object"&&typeof Te.length=="number"){H=S.length||0;const Be=Te.length||0;S.length=H+Be;for(let lt=0;lt<Be;lt++)S[H+lt]=Te[lt]}else S.push(Te)}}class M{constructor(B,H){this.i=B,this.j=H,this.h=0,this.g=null}get(){let B;return this.h>0?(this.h--,B=this.g,this.g=B.next,B.next=null):B=this.i(),B}}function L(S){l.setTimeout(()=>{throw S},0)}function z(){var S=V;let B=null;return S.g&&(B=S.g,S.g=S.g.next,S.g||(S.h=null),B.next=null),B}class ${constructor(){this.h=this.g=null}add(B,H){const se=K.get();se.set(B,H),this.h?this.h.next=se:this.g=se,this.h=se}}var K=new M(()=>new J,S=>S.reset());class J{constructor(){this.next=this.g=this.h=null}set(B,H){this.h=B,this.g=H,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,Z=!1,V=new $,W=()=>{const S=Promise.resolve(void 0);ce=()=>{S.then(U)}};function U(){for(var S;S=z();){try{S.h.call(S.g)}catch(H){L(H)}var B=K;B.j(S),B.h<100&&(B.h++,S.next=B.g,B.g=S)}Z=!1}function ae(){this.u=this.u,this.C=this.C}ae.prototype.u=!1,ae.prototype.dispose=function(){this.u||(this.u=!0,this.N())},ae.prototype[Symbol.dispose]=function(){this.dispose()},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(S,B){this.type=S,this.g=this.target=B,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var Q=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var S=!1,B=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const H=()=>{};l.addEventListener("test",H,B),l.removeEventListener("test",H,B)}catch{}return S})();function ne(S){return/^[\s\xa0]*$/.test(S)}function be(S,B){ie.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S&&this.init(S,B)}_(be,ie),be.prototype.init=function(S,B){const H=this.type=S.type,se=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;this.target=S.target||S.srcElement,this.g=B,B=S.relatedTarget,B||(H=="mouseover"?B=S.fromElement:H=="mouseout"&&(B=S.toElement)),this.relatedTarget=B,se?(this.clientX=se.clientX!==void 0?se.clientX:se.pageX,this.clientY=se.clientY!==void 0?se.clientY:se.pageY,this.screenX=se.screenX||0,this.screenY=se.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=S.pointerType,this.state=S.state,this.i=S,S.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var he="closure_listenable_"+(Math.random()*1e6|0),ye=0;function we(S,B,H,se,Te){this.listener=S,this.proxy=null,this.src=B,this.type=H,this.capture=!!se,this.ha=Te,this.key=++ye,this.da=this.fa=!1}function $e(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function et(S,B,H){for(const se in S)B.call(H,S[se],se,S)}function rt(S,B){for(const H in S)B.call(void 0,S[H],H,S)}function de(S){const B={};for(const H in S)B[H]=S[H];return B}const Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xe(S,B){let H,se;for(let Te=1;Te<arguments.length;Te++){se=arguments[Te];for(H in se)S[H]=se[H];for(let Be=0;Be<Ee.length;Be++)H=Ee[Be],Object.prototype.hasOwnProperty.call(se,H)&&(S[H]=se[H])}}function Ge(S){this.src=S,this.g={},this.h=0}Ge.prototype.add=function(S,B,H,se,Te){const Be=S.toString();S=this.g[Be],S||(S=this.g[Be]=[],this.h++);const lt=qe(S,B,se,Te);return lt>-1?(B=S[lt],H||(B.fa=!1)):(B=new we(B,this.src,Be,!!se,Te),B.fa=H,S.push(B)),B};function vt(S,B){const H=B.type;if(H in S.g){var se=S.g[H],Te=Array.prototype.indexOf.call(se,B,void 0),Be;(Be=Te>=0)&&Array.prototype.splice.call(se,Te,1),Be&&($e(B),S.g[H].length==0&&(delete S.g[H],S.h--))}}function qe(S,B,H,se){for(let Te=0;Te<S.length;++Te){const Be=S[Te];if(!Be.da&&Be.listener==B&&Be.capture==!!H&&Be.ha==se)return Te}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),ct={};function Se(S,B,H,se,Te){if(Array.isArray(B)){for(let Be=0;Be<B.length;Be++)Se(S,B[Be],H,se,Te);return null}return H=Vt(H),S&&S[he]?S.J(B,H,f(se)?!!se.capture:!1,Te):Oe(S,B,H,!1,se,Te)}function Oe(S,B,H,se,Te,Be){if(!B)throw Error("Invalid event type");const lt=f(Te)?!!Te.capture:!!Te;let Ht=Ln(S);if(Ht||(S[ze]=Ht=new Ge(S)),H=Ht.add(B,H,se,lt,Be),H.proxy)return H;if(se=ft(),H.proxy=se,se.src=S,se.listener=H,S.addEventListener)Q||(Te=lt),Te===void 0&&(Te=!1),S.addEventListener(B.toString(),se,Te);else if(S.attachEvent)S.attachEvent(Lt(B.toString()),se);else if(S.addListener&&S.removeListener)S.addListener(se);else throw Error("addEventListener and attachEvent are unavailable.");return H}function ft(){function S(H){return B.call(S.src,S.listener,H)}const B=cn;return S}function Fe(S,B,H,se,Te){if(Array.isArray(B))for(var Be=0;Be<B.length;Be++)Fe(S,B[Be],H,se,Te);else se=f(se)?!!se.capture:!!se,H=Vt(H),S&&S[he]?(S=S.i,Be=String(B).toString(),Be in S.g&&(B=S.g[Be],H=qe(B,H,se,Te),H>-1&&($e(B[H]),Array.prototype.splice.call(B,H,1),B.length==0&&(delete S.g[Be],S.h--)))):S&&(S=Ln(S))&&(B=S.g[B.toString()],S=-1,B&&(S=qe(B,H,se,Te)),(H=S>-1?B[S]:null)&&pt(H))}function pt(S){if(typeof S!="number"&&S&&!S.da){var B=S.src;if(B&&B[he])vt(B.i,S);else{var H=S.type,se=S.proxy;B.removeEventListener?B.removeEventListener(H,se,S.capture):B.detachEvent?B.detachEvent(Lt(H),se):B.addListener&&B.removeListener&&B.removeListener(se),(H=Ln(B))?(vt(H,S),H.h==0&&(H.src=null,B[ze]=null)):$e(S)}}}function Lt(S){return S in ct?ct[S]:ct[S]="on"+S}function cn(S,B){if(S.da)S=!0;else{B=new be(B,this);const H=S.listener,se=S.ha||S.src;S.fa&&pt(S),S=H.call(se,B)}return S}function Ln(S){return S=S[ze],S instanceof Ge?S:null}var ot="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vt(S){return typeof S=="function"?S:(S[ot]||(S[ot]=function(B){return S.handleEvent(B)}),S[ot])}function xt(){ae.call(this),this.i=new Ge(this),this.M=this,this.G=null}_(xt,ae),xt.prototype[he]=!0,xt.prototype.removeEventListener=function(S,B,H,se){Fe(this,S,B,H,se)};function $t(S,B){var H,se=S.G;if(se)for(H=[];se;se=se.G)H.push(se);if(S=S.M,se=B.type||B,typeof B=="string")B=new ie(B,S);else if(B instanceof ie)B.target=B.target||S;else{var Te=B;B=new ie(se,S),Xe(B,Te)}Te=!0;let Be,lt;if(H)for(lt=H.length-1;lt>=0;lt--)Be=B.g=H[lt],Te=it(Be,se,!0,B)&&Te;if(Be=B.g=S,Te=it(Be,se,!0,B)&&Te,Te=it(Be,se,!1,B)&&Te,H)for(lt=0;lt<H.length;lt++)Be=B.g=H[lt],Te=it(Be,se,!1,B)&&Te}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var S=this.i;for(const B in S.g){const H=S.g[B];for(let se=0;se<H.length;se++)$e(H[se]);delete S.g[B],S.h--}}this.G=null},xt.prototype.J=function(S,B,H,se){return this.i.add(String(S),B,!1,H,se)},xt.prototype.K=function(S,B,H,se){return this.i.add(String(S),B,!0,H,se)};function it(S,B,H,se){if(B=S.i.g[String(B)],!B)return!0;B=B.concat();let Te=!0;for(let Be=0;Be<B.length;++Be){const lt=B[Be];if(lt&&!lt.da&&lt.capture==H){const Ht=lt.listener,kr=lt.ha||lt.src;lt.fa&&vt(S.i,lt),Te=Ht.call(kr,se)!==!1&&Te}}return Te&&!se.defaultPrevented}function na(S,B){if(typeof S!="function")if(S&&typeof S.handleEvent=="function")S=p(S.handleEvent,S);else throw Error("Invalid listener argument");return Number(B)>2147483647?-1:l.setTimeout(S,B||0)}function zs(S){S.g=na(()=>{S.g=null,S.i&&(S.i=!1,zs(S))},S.l);const B=S.h;S.h=null,S.m.apply(null,B)}class hr extends ae{constructor(B,H){super(),this.m=B,this.l=H,this.h=null,this.i=!1,this.g=null}j(B){this.h=arguments,this.g?this.i=!0:zs(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ba(S){ae.call(this),this.h=S,this.g={}}_(ba,ae);var $n=[];function Fa(S){et(S.g,function(B,H){this.g.hasOwnProperty(H)&&pt(B)},S),S.g={}}ba.prototype.N=function(){ba.Z.N.call(this),Fa(this)},ba.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bi=l.JSON.stringify,Lr=l.JSON.parse,Po=class{stringify(S){return l.JSON.stringify(S,void 0)}parse(S){return l.JSON.parse(S,void 0)}};function gs(){}function ps(){}var In={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function at(){ie.call(this,"d")}_(at,ie);function fn(){ie.call(this,"c")}_(fn,ie);var Je={},Fn=null;function Oi(){return Fn=Fn||new xt}Je.Ia="serverreachability";function Us(S){ie.call(this,Je.Ia,S)}_(Us,ie);function ht(S){const B=Oi();$t(B,new Us(B))}Je.STAT_EVENT="statevent";function tn(S,B){ie.call(this,Je.STAT_EVENT,S),this.stat=B}_(tn,ie);function Yn(S){const B=Oi();$t(B,new tn(B,S))}Je.Ja="timingevent";function wa(S,B){ie.call(this,Je.Ja,S),this.size=B}_(wa,ie);function Va(S,B){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){S()},B)}function Er(){this.g=!0}Er.prototype.ua=function(){this.g=!1};function Ll(S,B,H,se,Te,Be){S.info(function(){if(S.g)if(Be){var lt="",Ht=Be.split("&");for(let bn=0;bn<Ht.length;bn++){var kr=Ht[bn].split("=");if(kr.length>1){const Un=kr[0];kr=kr[1];const Ca=Un.split("_");lt=Ca.length>=2&&Ca[1]=="type"?lt+(Un+"="+kr+"&"):lt+(Un+"=redacted&")}}}else lt=null;else lt=Be;return"XMLHTTP REQ ("+se+") [attempt "+Te+"]: "+B+`
`+H+`
`+lt})}function ii(S,B,H,se,Te,Be,lt){S.info(function(){return"XMLHTTP RESP ("+se+") [ attempt "+Te+"]: "+B+`
`+H+`
`+Be+" "+lt})}function Hr(S,B,H,se){S.info(function(){return"XMLHTTP TEXT ("+B+"): "+ra(S,H)+(se?" "+se:"")})}function qi(S,B){S.info(function(){return"TIMEOUT: "+B})}Er.prototype.info=function(){};function ra(S,B){if(!S.g)return B;if(!B)return null;try{const Be=JSON.parse(B);if(Be){for(S=0;S<Be.length;S++)if(Array.isArray(Be[S])){var H=Be[S];if(!(H.length<2)){var se=H[1];if(Array.isArray(se)&&!(se.length<1)){var Te=se[0];if(Te!="noop"&&Te!="stop"&&Te!="close")for(let lt=1;lt<se.length;lt++)se[lt]=""}}}}return bi(Be)}catch{return B}}var ys={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_n={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mr;function Kr(){}_(Kr,gs),Kr.prototype.g=function(){return new XMLHttpRequest},mr=new Kr;function ci(S){return encodeURIComponent(String(S))}function fi(S){var B=1;S=S.split(":");const H=[];for(;B>0&&S.length;)H.push(S.shift()),B--;return S.length&&H.push(S.join(":")),H}function mt(S,B,H,se){this.j=S,this.i=B,this.l=H,this.S=se||1,this.V=new ba(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ni}function Ni(){this.i=null,this.g="",this.h=!1}var Vn={},gn={};function Nr(S,B,H){S.M=1,S.A=Gi(Sr(B)),S.u=H,S.R=!0,za(S,null)}function za(S,B){S.F=Date.now(),Ri(S),S.B=Sr(S.A);var H=S.B,se=S.S;Array.isArray(se)||(se=[String(se)]),zn(H.i,"t",se),S.C=0,H=S.j.L,S.h=new Ni,S.g=Br(S.j,H?B:null,!S.u),S.P>0&&(S.O=new hr(p(S.Y,S,S.g),S.P)),B=S.V,H=S.g,se=S.ba;var Te="readystatechange";Array.isArray(Te)||(Te&&($n[0]=Te.toString()),Te=$n);for(let Be=0;Be<Te.length;Be++){const lt=Se(H,Te[Be],se||B.handleEvent,!1,B.h||B);if(!lt)break;B.g[lt.key]=lt}B=S.J?de(S.J):{},S.u?(S.v||(S.v="POST"),B["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.B,S.v,S.u,B)):(S.v="GET",S.g.ea(S.B,S.v,null,B)),ht(),Ll(S.i,S.v,S.B,S.l,S.S,S.u)}mt.prototype.ba=function(S){S=S.target;const B=this.O;B&&Ga(S)==3?B.j():this.Y(S)},mt.prototype.Y=function(S){try{if(S==this.g)e:{const Ht=Ga(this.g),kr=this.g.ya(),bn=this.g.ca();if(!(Ht<3)&&(Ht!=3||this.g&&(this.h.h||this.g.la()||ir(this.g)))){this.K||Ht!=4||kr==7||(kr==8||bn<=0?ht(3):ht(2)),Qn(this);var B=this.g.ca();this.X=B;var H=Zo(this);if(this.o=B==200,ii(this.i,this.v,this.B,this.l,this.S,Ht,B),this.o){if(this.U&&!this.L){t:{if(this.g){var se,Te=this.g;if((se=Te.g?Te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(se)){var Be=se;break t}}Be=null}if(S=Be)Hr(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rr(this,S);else{this.o=!1,this.m=3,Yn(12),$r(this),Mt(this);break e}}if(this.R){S=!0;let Un;for(;!this.K&&this.C<H.length;)if(Un=Bl(this,H),Un==gn){Ht==4&&(this.m=4,Yn(14),S=!1),Hr(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==Vn){this.m=4,Yn(15),Hr(this.i,this.l,H,"[Invalid Chunk]"),S=!1;break}else Hr(this.i,this.l,Un,null),rr(this,Un);if(Wr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||H.length!=0||this.h.h||(this.m=1,Yn(16),S=!1),this.o=this.o&&S,!S)Hr(this.i,this.l,H,"[Invalid Chunked Response]"),$r(this),Mt(this);else if(H.length>0&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.aa&&!lt.P&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),Me(lt),lt.P=!0,Yn(11))}}else Hr(this.i,this.l,H,null),rr(this,H);Ht==4&&$r(this),this.o&&!this.K&&(Ht==4?Ka(this.j,this):(this.o=!1,Ri(this)))}else Ia(this.g),B==400&&H.indexOf("Unknown SID")>0?(this.m=3,Yn(12)):(this.m=0,Yn(13)),$r(this),Mt(this)}}}catch{}};function Zo(S){if(!Wr(S))return S.g.la();const B=ir(S.g);if(B==="")return"";let H="";const se=B.length,Te=Ga(S.g)==4;if(!S.h.i){if(typeof TextDecoder>"u")return $r(S),Mt(S),"";S.h.i=new l.TextDecoder}for(let Be=0;Be<se;Be++)S.h.h=!0,H+=S.h.i.decode(B[Be],{stream:!(Te&&Be==se-1)});return B.length=0,S.h.g+=H,S.C=0,S.h.g}function Wr(S){return S.g?S.v=="GET"&&S.M!=2&&S.j.Aa:!1}function Bl(S,B){var H=S.C,se=B.indexOf(`
`,H);return se==-1?gn:(H=Number(B.substring(H,se)),isNaN(H)?Vn:(se+=1,se+H>B.length?gn:(B=B.slice(se,se+H),S.C=se+H,B)))}mt.prototype.cancel=function(){this.K=!0,$r(this)};function Ri(S){S.T=Date.now()+S.H,Pi(S,S.H)}function Pi(S,B){if(S.D!=null)throw Error("WatchDog timer not null");S.D=Va(p(S.aa,S),B)}function Qn(S){S.D&&(l.clearTimeout(S.D),S.D=null)}mt.prototype.aa=function(){this.D=null;const S=Date.now();S-this.T>=0?(qi(this.i,this.B),this.M!=2&&(ht(),Yn(17)),$r(this),this.m=2,Mt(this)):Pi(this,this.T-S)};function Mt(S){S.j.I==0||S.K||Ka(S.j,S)}function $r(S){Qn(S);var B=S.O;B&&typeof B.dispose=="function"&&B.dispose(),S.O=null,Fa(S.V),S.g&&(B=S.g,S.g=null,B.abort(),B.dispose())}function rr(S,B){try{var H=S.j;if(H.I!=0&&(H.g==S||wi(H.h,S))){if(!S.L&&wi(H.h,S)&&H.I==3){try{var se=H.Ba.g.parse(B)}catch{se=null}if(Array.isArray(se)&&se.length==3){var Te=se;if(Te[0]==0){e:if(!H.v){if(H.g)if(H.g.F+3e3<S.F)Dr(H),os(H);else break e;bs(H),Yn(18)}}else H.xa=Te[1],0<H.xa-H.K&&Te[2]<37500&&H.F&&H.A==0&&!H.C&&(H.C=Va(p(H.Va,H),6e3));Cn(H.h)<=1&&H.ta&&(H.ta=void 0)}else Wa(H,11)}else if((S.L||H.g==S)&&Dr(H),!ne(B))for(Te=H.Ba.g.parse(B),B=0;B<Te.length;B++){let bn=Te[B];const Un=bn[0];if(!(Un<=H.K))if(H.K=Un,bn=bn[1],H.I==2)if(bn[0]=="c"){H.M=bn[1],H.ba=bn[2];const Ca=bn[3];Ca!=null&&(H.ka=Ca,H.j.info("VER="+H.ka));const $a=bn[4];$a!=null&&(H.za=$a,H.j.info("SVER="+H.za));const di=bn[5];di!=null&&typeof di=="number"&&di>0&&(se=1.5*di,H.O=se,H.j.info("backChannelRequestTimeoutMs_="+se)),se=H;const Oa=S.g;if(Oa){const fo=Oa.g?Oa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fo){var Be=se.h;Be.g||fo.indexOf("spdy")==-1&&fo.indexOf("quic")==-1&&fo.indexOf("h2")==-1||(Be.j=Be.l,Be.g=new Set,Be.h&&(ss(Be,Be.h),Be.h=null))}if(se.G){const _s=Oa.g?Oa.g.getResponseHeader("X-HTTP-Session-Id"):null;_s&&(se.wa=_s,Ut(se.J,se.G,_s))}}H.I=3,H.l&&H.l.ra(),H.aa&&(H.T=Date.now()-S.F,H.j.info("Handshake RTT: "+H.T+"ms")),se=H;var lt=S;if(se.na=il(se,se.L?se.ba:null,se.W),lt.L){yn(se.h,lt);var Ht=lt,kr=se.O;kr&&(Ht.H=kr),Ht.D&&(Qn(Ht),Ri(Ht)),se.g=lt}else sa(se);H.i.length>0&&vs(H)}else bn[0]!="stop"&&bn[0]!="close"||Wa(H,7);else H.I==3&&(bn[0]=="stop"||bn[0]=="close"?bn[0]=="stop"?Wa(H,7):Gs(H):bn[0]!="noop"&&H.l&&H.l.qa(bn),H.A=0)}}ht(4)}catch{}}var Ar=class{constructor(S,B){this.g=S,this.map=B}};function He(S){this.l=S||10,l.PerformanceNavigationTiming?(S=l.performance.getEntriesByType("navigation"),S=S.length>0&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function uo(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function Cn(S){return S.h?1:S.g?S.g.size:0}function wi(S,B){return S.h?S.h==B:S.g?S.g.has(B):!1}function ss(S,B){S.g?S.g.add(B):S.h=B}function yn(S,B){S.h&&S.h==B?S.h=null:S.g&&S.g.has(B)&&S.g.delete(B)}He.prototype.cancel=function(){if(this.i=ln(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function ln(S){if(S.h!=null)return S.i.concat(S.h.G);if(S.g!=null&&S.g.size!==0){let B=S.i;for(const H of S.g.values())B=B.concat(H.G);return B}return R(S.i)}var nn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zt(S,B){if(S){S=S.split("&");for(let H=0;H<S.length;H++){const se=S[H].indexOf("=");let Te,Be=null;se>=0?(Te=S[H].substring(0,se),Be=S[H].substring(se+1)):Te=S[H],B(Te,Be?decodeURIComponent(Be.replace(/\+/g," ")):"")}}}function Di(S){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let B;S instanceof Di?(this.l=S.l,rn(this,S.j),this.o=S.o,this.g=S.g,ai(this,S.u),this.h=S.h,Jo(this,Fl(S.i)),this.m=S.m):S&&(B=String(S).match(nn))?(this.l=!1,rn(this,B[1]||"",!0),this.o=vn(B[2]||""),this.g=vn(B[3]||"",!0),ai(this,B[4]),this.h=vn(B[5]||"",!0),Jo(this,B[6]||"",!0),this.m=vn(B[7]||"")):(this.l=!1,this.i=new Pr(null,this.l))}Di.prototype.toString=function(){const S=[];var B=this.j;B&&S.push(ki(B,Zn,!0),":");var H=this.g;return(H||B=="file")&&(S.push("//"),(B=this.o)&&S.push(ki(B,Zn,!0),"@"),S.push(ci(H).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),H=this.u,H!=null&&S.push(":",String(H))),(H=this.h)&&(this.g&&H.charAt(0)!="/"&&S.push("/"),S.push(ki(H,H.charAt(0)=="/"?ue:Ie,!0))),(H=this.i.toString())&&S.push("?",H),(H=this.m)&&S.push("#",ki(H,Rr)),S.join("")},Di.prototype.resolve=function(S){const B=Sr(this);let H=!!S.j;H?rn(B,S.j):H=!!S.o,H?B.o=S.o:H=!!S.g,H?B.g=S.g:H=S.u!=null;var se=S.h;if(H)ai(B,S.u);else if(H=!!S.h){if(se.charAt(0)!="/")if(this.g&&!this.h)se="/"+se;else{var Te=B.h.lastIndexOf("/");Te!=-1&&(se=B.h.slice(0,Te+1)+se)}if(Te=se,Te==".."||Te==".")se="";else if(Te.indexOf("./")!=-1||Te.indexOf("/.")!=-1){se=Te.lastIndexOf("/",0)==0,Te=Te.split("/");const Be=[];for(let lt=0;lt<Te.length;){const Ht=Te[lt++];Ht=="."?se&&lt==Te.length&&Be.push(""):Ht==".."?((Be.length>1||Be.length==1&&Be[0]!="")&&Be.pop(),se&&lt==Te.length&&Be.push("")):(Be.push(Ht),se=!0)}se=Be.join("/")}else se=Te}return H?B.h=se:H=S.i.toString()!=="",H?Jo(B,Fl(S.i)):H=!!S.m,H&&(B.m=S.m),B};function Sr(S){return new Di(S)}function rn(S,B,H){S.j=H?vn(B,!0):B,S.j&&(S.j=S.j.replace(/:$/,""))}function ai(S,B){if(B){if(B=Number(B),isNaN(B)||B<0)throw Error("Bad port number "+B);S.u=B}else S.u=null}function Jo(S,B,H){B instanceof Pr?(S.i=B,_a(S.i,S.l)):(H||(B=ki(B,At)),S.i=new Pr(B,S.l))}function Ut(S,B,H){S.i.set(B,H)}function Gi(S){return Ut(S,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),S}function vn(S,B){return S?B?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function ki(S,B,H){return typeof S=="string"?(S=encodeURI(S).replace(B,Yt),H&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function Yt(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var Zn=/[#\/\?@]/g,Ie=/[#\?:]/g,ue=/[#\?]/g,At=/[#\?@]/g,Rr=/#/g;function Pr(S,B){this.h=this.g=null,this.i=S||null,this.j=!!B}function Hi(S){S.g||(S.g=new Map,S.h=0,S.i&&Zt(S.i,function(B,H){S.add(decodeURIComponent(B.replace(/\+/g," ")),H)}))}t=Pr.prototype,t.add=function(S,B){Hi(this),this.i=null,S=Yr(this,S);let H=this.g.get(S);return H||this.g.set(S,H=[]),H.push(B),this.h+=1,this};function el(S,B){Hi(S),B=Yr(S,B),S.g.has(B)&&(S.i=null,S.h-=S.g.get(B).length,S.g.delete(B))}function qt(S,B){return Hi(S),B=Yr(S,B),S.g.has(B)}t.forEach=function(S,B){Hi(this),this.g.forEach(function(H,se){H.forEach(function(Te){S.call(B,Te,se,this)},this)},this)};function Rt(S,B){Hi(S);let H=[];if(typeof B=="string")qt(S,B)&&(H=H.concat(S.g.get(Yr(S,B))));else for(S=Array.from(S.g.values()),B=0;B<S.length;B++)H=H.concat(S[B]);return H}t.set=function(S,B){return Hi(this),this.i=null,S=Yr(this,S),qt(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[B]),this.h+=1,this},t.get=function(S,B){return S?(S=Rt(this,S),S.length>0?String(S[0]):B):B};function zn(S,B,H){el(S,B),H.length>0&&(S.i=null,S.g.set(Yr(S,B),R(H)),S.h+=H.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],B=Array.from(this.g.keys());for(let se=0;se<B.length;se++){var H=B[se];const Te=ci(H);H=Rt(this,H);for(let Be=0;Be<H.length;Be++){let lt=Te;H[Be]!==""&&(lt+="="+ci(H[Be])),S.push(lt)}}return this.i=S.join("&")};function Fl(S){const B=new Pr;return B.i=S.i,S.g&&(B.g=new Map(S.g),B.h=S.h),B}function Yr(S,B){return B=String(B),S.j&&(B=B.toLowerCase()),B}function _a(S,B){B&&!S.j&&(Hi(S),S.i=null,S.g.forEach(function(H,se){const Te=se.toLowerCase();se!=Te&&(el(this,se),zn(this,Te,H))},S)),S.j=B}function _i(S,B){const H=new Er;if(l.Image){const se=new Image;se.onload=b(Ea,H,"TestLoadImage: loaded",!0,B,se),se.onerror=b(Ea,H,"TestLoadImage: error",!1,B,se),se.onabort=b(Ea,H,"TestLoadImage: abort",!1,B,se),se.ontimeout=b(Ea,H,"TestLoadImage: timeout",!1,B,se),l.setTimeout(function(){se.ontimeout&&se.ontimeout()},1e4),se.src=S}else B(!1)}function ia(S,B){const H=new Er,se=new AbortController,Te=setTimeout(()=>{se.abort(),Ea(H,"TestPingServer: timeout",!1,B)},1e4);fetch(S,{signal:se.signal}).then(Be=>{clearTimeout(Te),Be.ok?Ea(H,"TestPingServer: ok",!0,B):Ea(H,"TestPingServer: server error",!1,B)}).catch(()=>{clearTimeout(Te),Ea(H,"TestPingServer: error",!1,B)})}function Ea(S,B,H,se,Te){try{Te&&(Te.onload=null,Te.onerror=null,Te.onabort=null,Te.ontimeout=null),se(H)}catch{}}function Jn(){this.g=new Po}function Mn(S){this.i=S.Sb||null,this.h=S.ab||!1}_(Mn,gs),Mn.prototype.g=function(){return new Tr(this.i,this.h)};function Tr(S,B){xt.call(this),this.H=S,this.o=B,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Tr,xt),t=Tr.prototype,t.open=function(S,B){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=S,this.D=B,this.readyState=1,Bt(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const B={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};S&&(B.body=S),(this.H||l).fetch(new Request(this.D,B)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ua(this)),this.readyState=0},t.Pa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Bt(this)),this.g&&(this.readyState=3,Bt(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pt(this)}else S.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pt(S){S.j.read().then(S.Ma.bind(S)).catch(S.ga.bind(S))}t.Ma=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var B=S.value?S.value:new Uint8Array(0);(B=this.B.decode(B,{stream:!S.done}))&&(this.response=this.responseText+=B)}S.done?Ua(this):Bt(this),this.readyState==3&&Pt(this)}},t.Oa=function(S){this.g&&(this.response=this.responseText=S,Ua(this))},t.Na=function(S){this.g&&(this.response=S,Ua(this))},t.ga=function(){this.g&&Ua(this)};function Ua(S){S.readyState=4,S.l=null,S.j=null,S.B=null,Bt(S)}t.setRequestHeader=function(S,B){this.A.append(S,B)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],B=this.h.entries();for(var H=B.next();!H.done;)H=H.value,S.push(H[0]+": "+H[1]),H=B.next();return S.join(`\r
`)};function Bt(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(Tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function xn(S){let B="";return et(S,function(H,se){B+=se,B+=":",B+=H,B+=`\r
`}),B}function Do(S,B,H){e:{for(se in H){var se=!1;break e}se=!0}se||(H=xn(H),typeof S=="string"?H!=null&&ci(H):Ut(S,B,H))}function an(S){xt.call(this),this.headers=new Map,this.L=S||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(an,xt);var Aa=/^https?$/i,qa=["POST","PUT"];t=an.prototype,t.Fa=function(S){this.H=S},t.ea=function(S,B,H,se){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);B=B?B.toUpperCase():"GET",this.D=S,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mr.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(B,String(S),!0),this.B=!1}catch(Be){qs(this,Be);return}if(S=H||"",H=new Map(this.headers),se)if(Object.getPrototypeOf(se)===Object.prototype)for(var Te in se)H.set(Te,se[Te]);else if(typeof se.keys=="function"&&typeof se.get=="function")for(const Be of se.keys())H.set(Be,se.get(Be));else throw Error("Unknown input type for opt_headers: "+String(se));se=Array.from(H.keys()).find(Be=>Be.toLowerCase()=="content-type"),Te=l.FormData&&S instanceof l.FormData,!(Array.prototype.indexOf.call(qa,B,void 0)>=0)||se||Te||H.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Be,lt]of H)this.g.setRequestHeader(Be,lt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(S),this.v=!1}catch(Be){qs(this,Be)}};function qs(S,B){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=B,S.o=5,Sa(S),aa(S)}function Sa(S){S.A||(S.A=!0,$t(S,"complete"),$t(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=S||7,$t(this,"complete"),$t(this,"abort"),aa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),aa(this,!0)),an.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ta(this):this.Xa())},t.Xa=function(){Ta(this)};function Ta(S){if(S.h&&typeof a<"u"){if(S.v&&Ga(S)==4)setTimeout(S.Ca.bind(S),0);else if($t(S,"readystatechange"),Ga(S)==4){S.h=!1;try{const Be=S.ca();e:switch(Be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var B=!0;break e;default:B=!1}var H;if(!(H=B)){var se;if(se=Be===0){let lt=String(S.D).match(nn)[1]||null;!lt&&l.self&&l.self.location&&(lt=l.self.location.protocol.slice(0,-1)),se=!Aa.test(lt?lt.toLowerCase():"")}H=se}if(H)$t(S,"complete"),$t(S,"success");else{S.o=6;try{var Te=Ga(S)>2?S.g.statusText:""}catch{Te=""}S.l=Te+" ["+S.ca()+"]",Sa(S)}}finally{aa(S)}}}}function aa(S,B){if(S.g){S.m&&(clearTimeout(S.m),S.m=null);const H=S.g;S.g=null,B||$t(S,"ready");try{H.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ga(S){return S.g?S.g.readyState:0}t.ca=function(){try{return Ga(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(S){if(this.g){var B=this.g.responseText;return S&&B.indexOf(S)==0&&(B=B.substring(S.length)),Lr(B)}};function ir(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.F){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function Ia(S){const B={};S=(S.g&&Ga(S)>=2&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let se=0;se<S.length;se++){if(ne(S[se]))continue;var H=fi(S[se]);const Te=H[0];if(H=H[1],typeof H!="string")continue;H=H.trim();const Be=B[Te]||[];B[Te]=Be,Be.push(H)}rt(B,function(se){return se.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ir(S,B,H){return H&&H.internalChannelParams&&H.internalChannelParams[S]||B}function Ha(S){this.za=0,this.i=[],this.j=new Er,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ir("failFast",!1,S),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ir("baseRetryDelayMs",5e3,S),this.Za=Ir("retryDelaySeedMs",1e4,S),this.Ta=Ir("forwardChannelMaxRetries",2,S),this.va=Ir("forwardChannelRequestTimeoutMs",2e4,S),this.ma=S&&S.xmlHttpFactory||void 0,this.Ua=S&&S.Rb||void 0,this.Aa=S&&S.useFetchStreams||!1,this.O=void 0,this.L=S&&S.supportsCrossDomainXhr||!1,this.M="",this.h=new He(S&&S.concurrentRequestLimit),this.Ba=new Jn,this.S=S&&S.fastHandshake||!1,this.R=S&&S.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=S&&S.Pb||!1,S&&S.ua&&this.j.ua(),S&&S.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&S&&S.detectBufferingProxy||!1,this.ia=void 0,S&&S.longPollingTimeout&&S.longPollingTimeout>0&&(this.ia=S.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ha.prototype,t.ka=8,t.I=1,t.connect=function(S,B,H,se){Yn(0),this.W=S,this.H=B||{},H&&se!==void 0&&(this.H.OSID=H,this.H.OAID=se),this.F=this.X,this.J=il(this,null,this.W),vs(this)};function Gs(S){if(tl(S),S.I==3){var B=S.V++,H=Sr(S.J);if(Ut(H,"SID",S.M),Ut(H,"RID",B),Ut(H,"TYPE","terminate"),xs(S,H),B=new mt(S,S.j,B),B.M=2,B.A=Gi(Sr(H)),H=!1,l.navigator&&l.navigator.sendBeacon)try{H=l.navigator.sendBeacon(B.A.toString(),"")}catch{}!H&&l.Image&&(new Image().src=B.A,H=!0),H||(B.g=Br(B.j,null),B.g.ea(B.A)),B.F=Date.now(),Ri(B)}rl(S)}function os(S){S.g&&(Me(S),S.g.cancel(),S.g=null)}function tl(S){os(S),S.v&&(l.clearTimeout(S.v),S.v=null),Dr(S),S.h.cancel(),S.m&&(typeof S.m=="number"&&l.clearTimeout(S.m),S.m=null)}function vs(S){if(!uo(S.h)&&!S.m){S.m=!0;var B=S.Ea;ce||W(),Z||(ce(),Z=!0),V.add(B,S),S.D=0}}function nl(S,B){return Cn(S.h)>=S.h.j-(S.m?1:0)?!1:S.m?(S.i=B.G.concat(S.i),!0):S.I==1||S.I==2||S.D>=(S.Sa?0:S.Ta)?!1:(S.m=Va(p(S.Ea,S,B),ko(S,S.D)),S.D++,!0)}t.Ea=function(S){if(this.m)if(this.m=null,this.I==1){if(!S){this.V=Math.floor(Math.random()*1e5),S=this.V++;const Te=new mt(this,this.j,S);let Be=this.o;if(this.U&&(Be?(Be=de(Be),Xe(Be,this.U)):Be=this.U),this.u!==null||this.R||(Te.J=Be,Be=null),this.S)e:{for(var B=0,H=0;H<this.i.length;H++){t:{var se=this.i[H];if("__data__"in se.map&&(se=se.map.__data__,typeof se=="string")){se=se.length;break t}se=void 0}if(se===void 0)break;if(B+=se,B>4096){B=H;break e}if(B===4096||H===this.i.length-1){B=H+1;break e}}B=1e3}else B=1e3;B=co(this,Te,B),H=Sr(this.J),Ut(H,"RID",S),Ut(H,"CVER",22),this.G&&Ut(H,"X-HTTP-Session-Id",this.G),xs(this,H),Be&&(this.R?B="headers="+ci(xn(Be))+"&"+B:this.u&&Do(H,this.u,Be)),ss(this.h,Te),this.Ra&&Ut(H,"TYPE","init"),this.S?(Ut(H,"$req",B),Ut(H,"SID","null"),Te.U=!0,Nr(Te,H,null)):Nr(Te,H,B),this.I=2}}else this.I==3&&(S?En(this,S):this.i.length==0||uo(this.h)||En(this))};function En(S,B){var H;B?H=B.l:H=S.V++;const se=Sr(S.J);Ut(se,"SID",S.M),Ut(se,"RID",H),Ut(se,"AID",S.K),xs(S,se),S.u&&S.o&&Do(se,S.u,S.o),H=new mt(S,S.j,H,S.D+1),S.u===null&&(H.J=S.o),B&&(S.i=B.G.concat(S.i)),B=co(S,H,1e3),H.H=Math.round(S.va*.5)+Math.round(S.va*.5*Math.random()),ss(S.h,H),Nr(H,se,B)}function xs(S,B){S.H&&et(S.H,function(H,se){Ut(B,se,H)}),S.l&&et({},function(H,se){Ut(B,se,H)})}function co(S,B,H){H=Math.min(S.i.length,H);const se=S.l?p(S.l.Ka,S.l,S):null;e:{var Te=S.i;let Ht=-1;for(;;){const kr=["count="+H];Ht==-1?H>0?(Ht=Te[0].g,kr.push("ofs="+Ht)):Ht=0:kr.push("ofs="+Ht);let bn=!0;for(let Un=0;Un<H;Un++){var Be=Te[Un].g;const Ca=Te[Un].map;if(Be-=Ht,Be<0)Ht=Math.max(0,Te[Un].g-100),bn=!1;else try{Be="req"+Be+"_"||"";try{var lt=Ca instanceof Map?Ca:Object.entries(Ca);for(const[$a,di]of lt){let Oa=di;f(di)&&(Oa=bi(di)),kr.push(Be+$a+"="+encodeURIComponent(Oa))}}catch($a){throw kr.push(Be+"type="+encodeURIComponent("_badmap")),$a}}catch{se&&se(Ca)}}if(bn){lt=kr.join("&");break e}}lt=void 0}return S=S.i.splice(0,H),B.G=S,lt}function sa(S){if(!S.g&&!S.v){S.Y=1;var B=S.Da;ce||W(),Z||(ce(),Z=!0),V.add(B,S),S.A=0}}function bs(S){return S.g||S.v||S.A>=3?!1:(S.Y++,S.v=Va(p(S.Da,S),ko(S,S.A)),S.A++,!0)}t.Da=function(){if(this.v=null,Xt(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var S=4*this.T;this.j.info("BP detection timer enabled: "+S),this.B=Va(p(this.Wa,this),S)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Yn(10),os(this),Xt(this))};function Me(S){S.B!=null&&(l.clearTimeout(S.B),S.B=null)}function Xt(S){S.g=new mt(S,S.j,"rpc",S.Y),S.u===null&&(S.g.J=S.o),S.g.P=0;var B=Sr(S.na);Ut(B,"RID","rpc"),Ut(B,"SID",S.M),Ut(B,"AID",S.K),Ut(B,"CI",S.F?"0":"1"),!S.F&&S.ia&&Ut(B,"TO",S.ia),Ut(B,"TYPE","xmlhttp"),xs(S,B),S.u&&S.o&&Do(B,S.u,S.o),S.O&&(S.g.H=S.O);var H=S.g;S=S.ba,H.M=1,H.A=Gi(Sr(B)),H.u=null,H.R=!0,za(H,S)}t.Va=function(){this.C!=null&&(this.C=null,os(this),bs(this),Yn(19))};function Dr(S){S.C!=null&&(l.clearTimeout(S.C),S.C=null)}function Ka(S,B){var H=null;if(S.g==B){Dr(S),Me(S),S.g=null;var se=2}else if(wi(S.h,B))H=B.G,yn(S.h,B),se=1;else return;if(S.I!=0){if(B.o)if(se==1){H=B.u?B.u.length:0,B=Date.now()-B.F;var Te=S.D;se=Oi(),$t(se,new wa(se,H)),vs(S)}else sa(S);else if(Te=B.m,Te==3||Te==0&&B.X>0||!(se==1&&nl(S,B)||se==2&&bs(S)))switch(H&&H.length>0&&(B=S.h,B.i=B.i.concat(H)),Te){case 1:Wa(S,5);break;case 4:Wa(S,10);break;case 3:Wa(S,6);break;default:Wa(S,2)}}}function ko(S,B){let H=S.Qa+Math.floor(Math.random()*S.Za);return S.isActive()||(H*=2),H*B}function Wa(S,B){if(S.j.info("Error code "+B),B==2){var H=p(S.bb,S),se=S.Ua;const Te=!se;se=new Di(se||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||rn(se,"https"),Gi(se),Te?_i(se.toString(),H):ia(se.toString(),H)}else Yn(2);S.I=0,S.l&&S.l.pa(B),rl(S),tl(S)}t.bb=function(S){S?(this.j.info("Successfully pinged google.com"),Yn(2)):(this.j.info("Failed to ping google.com"),Yn(1))};function rl(S){if(S.I=0,S.ja=[],S.l){const B=ln(S.h);(B.length!=0||S.i.length!=0)&&(j(S.ja,B),j(S.ja,S.i),S.h.i.length=0,R(S.i),S.i.length=0),S.l.oa()}}function il(S,B,H){var se=H instanceof Di?Sr(H):new Di(H);if(se.g!="")B&&(se.g=B+"."+se.g),ai(se,se.u);else{var Te=l.location;se=Te.protocol,B=B?B+"."+Te.hostname:Te.hostname,Te=+Te.port;const Be=new Di(null);se&&rn(Be,se),B&&(Be.g=B),Te&&ai(Be,Te),H&&(Be.h=H),se=Be}return H=S.G,B=S.wa,H&&B&&Ut(se,H,B),Ut(se,"VER",S.ka),xs(S,se),se}function Br(S,B,H){if(B&&!S.L)throw Error("Can't create secondary domain capable XhrIo object.");return B=S.Aa&&!S.ma?new an(new Mn({ab:H})):new an(S.ma),B.Fa(S.L),B}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function er(){}t=er.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function oa(){}oa.prototype.g=function(S,B){return new dn(S,B)};function dn(S,B){xt.call(this),this.g=new Ha(B),this.l=S,this.h=B&&B.messageUrlParams||null,S=B&&B.messageHeaders||null,B&&B.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=B&&B.initMessageHeaders||null,B&&B.messageContentType&&(S?S["X-WebChannel-Content-Type"]=B.messageContentType:S={"X-WebChannel-Content-Type":B.messageContentType}),B&&B.sa&&(S?S["X-WebChannel-Client-Profile"]=B.sa:S={"X-WebChannel-Client-Profile":B.sa}),this.g.U=S,(S=B&&B.Qb)&&!ne(S)&&(this.g.u=S),this.A=B&&B.supportsCrossDomainXhr||!1,this.v=B&&B.sendRawJson||!1,(B=B&&B.httpSessionIdParam)&&!ne(B)&&(this.g.G=B,S=this.h,S!==null&&B in S&&(S=this.h,B in S&&delete S[B])),this.j=new pn(this)}_(dn,xt),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Gs(this.g)},dn.prototype.o=function(S){var B=this.g;if(typeof S=="string"){var H={};H.__data__=S,S=H}else this.v&&(H={},H.__data__=bi(S),S=H);B.i.push(new Ar(B.Ya++,S)),B.I==3&&vs(B)},dn.prototype.N=function(){this.g.l=null,delete this.j,Gs(this.g),delete this.g,dn.Z.N.call(this)};function ws(S){at.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var B=S.__sm__;if(B){e:{for(const H in B){S=H;break e}S=void 0}(this.i=S)&&(S=this.i,B=B!==null&&S in B?B[S]:void 0),this.data=B}else this.data=S}_(ws,at);function ls(){fn.call(this),this.status=1}_(ls,fn);function pn(S){this.g=S}_(pn,er),pn.prototype.ra=function(){$t(this.g,"a")},pn.prototype.qa=function(S){$t(this.g,new ws(S))},pn.prototype.pa=function(S){$t(this.g,new ls)},pn.prototype.oa=function(){$t(this.g,"b")},oa.prototype.createWebChannel=oa.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,sj=function(){return new oa},aj=function(){return Oi()},ij=Je,HE={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ys.NO_ERROR=0,ys.TIMEOUT=8,ys.HTTP_ERROR=6,vy=ys,_n.COMPLETE="complete",rj=_n,ps.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",xt.prototype.listen=xt.prototype.J,Kg=ps,an.prototype.listenOnce=an.prototype.K,an.prototype.getLastError=an.prototype.Ha,an.prototype.getLastErrorCode=an.prototype.ya,an.prototype.getStatus=an.prototype.ca,an.prototype.getResponseJson=an.prototype.La,an.prototype.getResponseText=an.prototype.la,an.prototype.send=an.prototype.ea,an.prototype.setWithCredentials=an.prototype.Fa,nj=an}).apply(typeof V1<"u"?V1:typeof self<"u"?self:typeof window<"u"?window:{});let ma=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ma.UNAUTHENTICATED=new ma(null),ma.GOOGLE_CREDENTIALS=new ma("google-credentials-uid"),ma.FIRST_PARTY=new ma("first-party-uid"),ma.MOCK_USER=new ma("mock-user");let wm="12.9.0";function f$(t){wm=t}const zc=new GS("@firebase/firestore");function vh(){return zc.logLevel}function d$(t){zc.setLogLevel(t)}function nt(t,...e){if(zc.logLevel<=Dn.DEBUG){const n=e.map(KS);zc.debug(`Firestore (${wm}): ${t}`,...n)}}function Si(t,...e){if(zc.logLevel<=Dn.ERROR){const n=e.map(KS);zc.error(`Firestore (${wm}): ${t}`,...n)}}function Fs(t,...e){if(zc.logLevel<=Dn.WARN){const n=e.map(KS);zc.warn(`Firestore (${wm}): ${t}`,...n)}}function KS(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Et(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,oj(t,r,n)}function oj(t,e,n){let r=`FIRESTORE (${wm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Si(r),new Error(r)}function Nt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||oj(e,i,r)}function h$(t,e){t||Et(57014,e)}function yt(t,e){return t}const ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ye extends Ru{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ya{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class lj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ma.UNAUTHENTICATED)))}shutdown(){}}class m${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class g${constructor(e){this.t=e,this.currentUser=ma.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Nt(this.o===void 0,42304);let r=this.i;const i=m=>this.i!==r?(r=this.i,n(m)):Promise.resolve();let a=new ya;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ya,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const m=a;e.enqueueRetryable((async()=>{await m.promise,await i(this.currentUser)}))},f=m=>{nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ya)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Nt(typeof r.accessToken=="string",31837,{l:r}),new lj(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Nt(e===null||typeof e=="string",2055,{h:e}),new ma(e)}}class p${constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ma.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class y${constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new p$(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ma.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class KE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class v${constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ao(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Nt(this.o===void 0,3512);const r=a=>{a.error!=null&&nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,nt("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new KE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new KE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class x${getToken(){return Promise.resolve(new KE(""))}invalidateToken(){}start(e,n){}shutdown(){}}function b$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Ax{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=b$(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function Kt(t,e){return t<e?-1:t>e?1:0}function WE(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return K_(i)===K_(a)?Kt(i,a):K_(i)?1:-1}return Kt(t.length,e.length)}const w$=55296,_$=57343;function K_(t){const e=t.charCodeAt(0);return e>=w$&&e<=_$}function Vh(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function cj(t){return t+"\0"}const $E="__name__";class ml{constructor(e,n,r){n===void 0?n=0:n>e.length&&Et(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Et(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ml.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ml?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=ml.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return Kt(e.length,n.length)}static compareSegments(e,n){const r=ml.isNumericId(e),i=ml.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ml.extractNumericId(e).compare(ml.extractNumericId(n)):WE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mc.fromString(e.substring(4,e.length-2))}}class Sn extends ml{construct(e,n,r){return new Sn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ye(ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Sn(n)}static emptyPath(){return new Sn([])}}const E$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qr extends ml{construct(e,n,r){return new qr(e,n,r)}static isValidIdentifier(e){return E$.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$E}static keyField(){return new qr([$E])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ye(ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if(f==="\\"){if(i+1===e.length)throw new Ye(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ye(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else f==="`"?(l=!l,i++):f!=="."||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new Ye(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qr(n)}static emptyPath(){return new qr([])}}class gt{constructor(e){this.path=e}static fromPath(e){return new gt(Sn.fromString(e))}static fromName(e){return new gt(Sn.fromString(e).popFirst(5))}static empty(){return new gt(Sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Sn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Sn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new gt(new Sn(e.slice()))}}function WS(t,e,n){if(!n)throw new Ye(ke.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fj(t,e,n,r){if(e===!0&&r===!0)throw new Ye(ke.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function YR(t){if(!gt.isDocumentKey(t))throw new Ye(ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function XR(t){if(gt.isDocumentKey(t))throw new Ye(ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dj(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Sx(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Et(12329,{type:typeof t})}function Tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ye(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sx(t);throw new Ye(ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function hj(t,e){if(e<=0)throw new Ye(ke.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Vi(t,e){const n={typeString:t};return e&&(n.value=e),n}function _d(t,e){if(!dj(t))throw new Ye(ke.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(i&&typeof l!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Ye(ke.INVALID_ARGUMENT,n);return!0}const QR=-62135596800,ZR=1e6;class nr{static now(){return nr.fromMillis(Date.now())}static fromDate(e){return nr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ZR);return new nr(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ye(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ye(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<QR)throw new Ye(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ye(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ZR}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_d(e,nr._jsonSchema))return new nr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-QR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nr._jsonSchemaVersion="firestore/timestamp/1.0",nr._jsonSchema={type:Vi("string",nr._jsonSchemaVersion),seconds:Vi("number"),nanoseconds:Vi("number")};class jt{static fromTimestamp(e){return new jt(e)}static min(){return new jt(new nr(0,0))}static max(){return new jt(new nr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const zh=-1;class Uh{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function YE(t){return t.fields.find((e=>e.kind===2))}function Of(t){return t.fields.filter((e=>e.kind!==2))}function A$(t,e){let n=Kt(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=S$(t.fields[r],e.fields[r]),n!==0)return n;return Kt(t.fields.length,e.fields.length)}Uh.UNKNOWN_ID=-1;class Hf{constructor(e,n){this.fieldPath=e,this.kind=n}}function S$(t,e){const n=qr.comparator(t.fieldPath,e.fieldPath);return n!==0?n:Kt(t.kind,e.kind)}class qh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new qh(0,ao.min())}}function mj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=jt.fromTimestamp(r===1e9?new nr(n+1,0):new nr(n,r));return new ao(i,gt.empty(),e)}function gj(t){return new ao(t.readTime,t.key,zh)}class ao{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ao(jt.min(),gt.empty(),zh)}static max(){return new ao(jt.max(),gt.empty(),zh)}}function $S(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=gt.comparator(t.documentKey,e.documentKey),n!==0?n:Kt(t.largestBatchId,e.largestBatchId))}const pj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ef(t){if(t.code!==ke.FAILED_PRECONDITION||t.message!==pj)throw t;nt("LocalStore","Unexpectedly lost primary lease")}class Ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ce(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ce?n:Ce.resolve(n)}catch(n){return Ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ce.reject(n)}static resolve(e){return new Ce(((n,r)=>{n(e)}))}static reject(e){return new Ce(((n,r)=>{r(e)}))}static waitFor(e){return new Ce(((n,r)=>{let i=0,a=0,l=!1;e.forEach((f=>{++i,f.next((()=>{++a,l&&a===i&&n()}),(m=>r(m)))})),l=!0,a===i&&n()}))}static or(e){let n=Ce.resolve(!1);for(const r of e)n=n.next((i=>i?Ce.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new Ce(((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let m=0;m<a;m++){const p=m;n(e[p]).next((b=>{l[p]=b,++f,f===a&&r(l)}),(b=>i(b)))}}))}static doWhile(e,n){return new Ce(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}const Js="SimpleDb";class Tx{static open(e,n,r,i){try{return new Tx(n,e.transaction(i,r))}catch(a){throw new tp(n,a)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new ya,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new tp(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=YS(r.target.error);this.S.reject(new tp(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(nt(Js,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new I$(n)}}class El{static delete(e){return nt(Js,"Removing database:",e),Mf(V5().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!$5())return!1;if(El.F())return!0;const e=$i(),n=El.M(e),r=0<n&&n<10,i=vj(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,El.M($i())===12.2&&Si("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(nt(Js,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const l=a.target.result;n(l)},i.onblocked=()=>{r(new tp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const l=a.target.error;l.name==="VersionError"?r(new Ye(ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new Ye(ke.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new tp(e,l))},i.onupgradeneeded=a=>{nt(Js,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.N.k(l,i.transaction,a.oldVersion,this.version).next((()=>{nt(Js,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=n=>this.K(n)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const f=Tx.open(this.db,e,a?"readonly":"readwrite",r),m=i(f).next((p=>(f.C(),p))).catch((p=>(f.abort(p),Ce.reject(p)))).toPromise();return m.catch((()=>{})),await f.D,m}catch(f){const m=f,p=m.name!=="FirebaseError"&&l<3;if(nt(Js,"Transaction failed with error:",m.message,"Retrying:",p),this.close(),!p)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function vj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class T${constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Mf(this.U.delete())}}class tp extends Ye{constructor(e,n){super(ke.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function tf(t){return t.name==="IndexedDbTransactionError"}class I${constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(nt(Js,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(nt(Js,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Mf(r)}add(e){return nt(Js,"ADD",this.store.name,e,e),Mf(this.store.add(e))}get(e){return Mf(this.store.get(e)).next((n=>(n===void 0&&(n=null),nt(Js,"GET",this.store.name,e,n),n)))}delete(e){return nt(Js,"DELETE",this.store.name,e),Mf(this.store.delete(e))}count(){return nt(Js,"COUNT",this.store.name),Mf(this.store.count())}H(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new Ce(((l,f)=>{a.onerror=m=>{f(m.target.error)},a.onsuccess=m=>{l(m.target.result)}}))}{const a=this.cursor(r),l=[];return this.J(a,((f,m)=>{l.push(m)})).next((()=>l))}}Z(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new Ce(((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}}))}X(e,n){nt(Js,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const i=this.cursor(r);return this.J(i,((a,l,f)=>f.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.J(i,n)}te(e){const n=this.cursor({});return new Ce(((r,i)=>{n.onerror=a=>{const l=YS(a.target.error);i(l)},n.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next((f=>{f?l.continue():r()})):r()}}))}J(e,n){const r=[];return new Ce(((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const m=new T$(f),p=n(f.primaryKey,f.value,m);if(p instanceof Ce){const b=p.catch((_=>(m.done(),Ce.reject(_))));r.push(b)}m.isDone?i():m.G===null?f.continue():f.continue(m.G)}})).next((()=>Ce.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Mf(t){return new Ce(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=YS(r.target.error);n(i)}}))}let JR=!1;function YS(t){const e=El.M($i());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return JR||(JR=!0,setTimeout((()=>{throw r}),0)),r}}return t}const np="IndexBackfiller";class C${constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){nt(np,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();nt(np,`Documents written: ${n}`)}catch(n){tf(n)?nt(np,"Ignoring IndexedDB error during index backfill: ",n):await ef(n)}await this.re(6e4)}))}}class O${constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,a=!0;return Ce.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!r.has(l))return nt(np,`Processing collection: ${l}`),this.oe(e,l,i).next((f=>{i-=f,r.add(l)}));a=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(i,a))).next((f=>(nt(np,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,n,f)))).next((()=>l.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,a)=>{const l=gj(a);$S(l,r)>0&&(r=l)})),new ao(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class Ps{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ps.ce=-1;const jc=-1;function Qp(t){return t==null}function gp(t){return t===0&&1/t==-1/0}function xj(t){return typeof t=="number"&&Number.isInteger(t)&&!gp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Yy="";function ns(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=eP(e)),e=N$(t.get(n),e);return eP(e)}function N$(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case Yy:n+="";break;default:n+=a}}return n}function eP(t){return t+Yy+""}function xl(t){const e=t.length;if(Nt(e>=2,64408,{path:t}),e===2)return Nt(t.charAt(0)===Yy&&t.charAt(1)==="",56145,{path:t}),Sn.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const l=t.indexOf(Yy,a);switch((l<0||l>n)&&Et(50515,{path:t}),t.charAt(l+1)){case"":const f=t.substring(a,l);let m;i.length===0?m=f:(i+=f,m=i,i=""),r.push(m);break;case"":i+=t.substring(a,l),i+="\0";break;case"":i+=t.substring(a,l+1);break;default:Et(61167,{path:t})}a=l+2}return new Sn(r)}const Nf="remoteDocuments",Zp="owner",oh="owner",pp="mutationQueues",R$="userId",Fo="mutations",tP="batchId",Ff="userMutationsIndex",nP=["userId","batchId"];function xy(t,e){return[t,ns(e)]}function bj(t,e,n){return[t,ns(e),n]}const P$={},Gh="documentMutations",Xy="remoteDocumentsV14",D$=["prefixPath","collectionGroup","readTime","documentId"],by="documentKeyIndex",k$=["prefixPath","collectionGroup","documentId"],wj="collectionGroupIndex",M$=["collectionGroup","readTime","prefixPath","documentId"],yp="remoteDocumentGlobal",XE="remoteDocumentGlobalKey",Hh="targets",_j="queryTargetsIndex",j$=["canonicalId","targetId"],Kh="targetDocuments",L$=["targetId","path"],XS="documentTargetsIndex",B$=["path","targetId"],Qy="targetGlobalKey",Kf="targetGlobal",vp="collectionParents",F$=["collectionId","parent"],Wh="clientMetadata",V$="clientId",Ix="bundles",z$="bundleId",Cx="namedQueries",U$="name",QS="indexConfiguration",q$="indexId",QE="collectionGroupIndex",G$="collectionGroup",rp="indexState",H$=["indexId","uid"],Ej="sequenceNumberIndex",K$=["uid","sequenceNumber"],ip="indexEntries",W$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Aj="documentKeyIndex",$$=["indexId","uid","orderedDocumentKey"],Ox="documentOverlays",Y$=["userId","collectionPath","documentId"],ZE="collectionPathOverlayIndex",X$=["userId","collectionPath","largestBatchId"],Sj="collectionGroupOverlayIndex",Q$=["userId","collectionGroup","largestBatchId"],ZS="globals",Z$="name",Tj=[pp,Fo,Gh,Nf,Hh,Zp,Kf,Kh,Wh,yp,vp,Ix,Cx],J$=[...Tj,Ox],Ij=[pp,Fo,Gh,Xy,Hh,Zp,Kf,Kh,Wh,yp,vp,Ix,Cx,Ox],Cj=Ij,JS=[...Cj,QS,rp,ip],eY=JS,Oj=[...JS,ZS],tY=Oj;class JE extends yj{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Qi(t,e){const n=yt(t);return El.O(n.le,e)}function rP(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function nf(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Nj(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function Rj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class jr{constructor(e,n){this.comparator=e,this.root=n||La.EMPTY}insert(e,n){return new jr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,La.BLACK,null,null))}remove(e){return new jr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,La.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new z1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new z1(this.root,e,this.comparator,!1)}getReverseIterator(){return new z1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new z1(this.root,e,this.comparator,!0)}}class z1{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class La{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??La.RED,this.left=i??La.EMPTY,this.right=a??La.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new La(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return La.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return La.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,La.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,La.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Et(27949);return e+(this.isRed()?0:1)}}La.EMPTY=null,La.RED=!0,La.BLACK=!1;La.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new La(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dr{constructor(e){this.comparator=e,this.data=new jr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new iP(this.data.getIterator())}getIteratorFrom(e){return new iP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof dr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new dr(this.comparator);return n.data=e,n}}class iP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function lh(t){return t.hasNext()?t.getNext():void 0}class Ds{constructor(e){this.fields=e,e.sort(qr.comparator)}static empty(){return new Ds([])}unionWith(e){let n=new dr(qr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ds(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vh(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class Pj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function nY(){return typeof atob<"u"}class oi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Pj("Invalid base64 string: "+a):a}})(e);return new oi(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a})(e);return new oi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oi.EMPTY_BYTE_STRING=new oi("");const rY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xu(t){if(Nt(!!t,39018),typeof t=="string"){let e=0;const n=rY.exec(t);if(Nt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Zr(t.seconds),nanos:Zr(t.nanos)}}function Zr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function bu(t){return typeof t=="string"?oi.fromBase64String(t):oi.fromUint8Array(t)}const Dj="server_timestamp",kj="__type__",Mj="__previous_value__",jj="__local_write_time__";function Nx(t){return(t?.mapValue?.fields||{})[kj]?.stringValue===Dj}function Rx(t){const e=t.mapValue.fields[Mj];return Nx(e)?Rx(e):e}function xp(t){const e=xu(t.mapValue.fields[jj].timestampValue);return new nr(e.seconds,e.nanos)}class iY{constructor(e,n,r,i,a,l,f,m,p,b,_){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=b,this.apiKey=_}}const bp="(default)";class Uc{constructor(e,n){this.projectId=e,this.database=n||bp}static empty(){return new Uc("","")}get isDefaultDatabase(){return this.database===bp}isEqual(e){return e instanceof Uc&&e.projectId===this.projectId&&e.database===this.database}}function aY(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ye(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uc(t.options.projectId,e)}const eT="__type__",Lj="__max__",Cc={mapValue:{fields:{__type__:{stringValue:Lj}}}},tT="__vector__",$h="value",wy={nullValue:"NULL_VALUE"};function qc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nx(t)?4:Bj(t)?9007199254740991:Px(t)?10:11:Et(28295,{value:t})}function Cl(t,e){if(t===e)return!0;const n=qc(t);if(n!==qc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xp(t).isEqual(xp(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=xu(i.timestampValue),f=xu(a.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return bu(i.bytesValue).isEqual(bu(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return Zr(i.geoPointValue.latitude)===Zr(a.geoPointValue.latitude)&&Zr(i.geoPointValue.longitude)===Zr(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Zr(i.integerValue)===Zr(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=Zr(i.doubleValue),f=Zr(a.doubleValue);return l===f?gp(l)===gp(f):isNaN(l)&&isNaN(f)}return!1})(t,e);case 9:return Vh(t.arrayValue.values||[],e.arrayValue.values||[],Cl);case 10:case 11:return(function(i,a){const l=i.mapValue.fields||{},f=a.mapValue.fields||{};if(rP(l)!==rP(f))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(f[m]===void 0||!Cl(l[m],f[m])))return!1;return!0})(t,e);default:return Et(52216,{left:t})}}function wp(t,e){return(t.values||[]).find((n=>Cl(n,e)))!==void 0}function Gc(t,e){if(t===e)return 0;const n=qc(t),r=qc(e);if(n!==r)return Kt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Kt(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const f=Zr(a.integerValue||a.doubleValue),m=Zr(l.integerValue||l.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(t,e);case 3:return aP(t.timestampValue,e.timestampValue);case 4:return aP(xp(t),xp(e));case 5:return WE(t.stringValue,e.stringValue);case 6:return(function(a,l){const f=bu(a),m=bu(l);return f.compareTo(m)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const f=a.split("/"),m=l.split("/");for(let p=0;p<f.length&&p<m.length;p++){const b=Kt(f[p],m[p]);if(b!==0)return b}return Kt(f.length,m.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const f=Kt(Zr(a.latitude),Zr(l.latitude));return f!==0?f:Kt(Zr(a.longitude),Zr(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return sP(t.arrayValue,e.arrayValue);case 10:return(function(a,l){const f=a.fields||{},m=l.fields||{},p=f[$h]?.arrayValue,b=m[$h]?.arrayValue,_=Kt(p?.values?.length||0,b?.values?.length||0);return _!==0?_:sP(p,b)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Cc.mapValue&&l===Cc.mapValue)return 0;if(a===Cc.mapValue)return 1;if(l===Cc.mapValue)return-1;const f=a.fields||{},m=Object.keys(f),p=l.fields||{},b=Object.keys(p);m.sort(),b.sort();for(let _=0;_<m.length&&_<b.length;++_){const T=WE(m[_],b[_]);if(T!==0)return T;const R=Gc(f[m[_]],p[b[_]]);if(R!==0)return R}return Kt(m.length,b.length)})(t.mapValue,e.mapValue);default:throw Et(23264,{he:n})}}function aP(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Kt(t,e);const n=xu(t),r=xu(e),i=Kt(n.seconds,r.seconds);return i!==0?i:Kt(n.nanos,r.nanos)}function sP(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Gc(n[i],r[i]);if(a)return a}return Kt(n.length,r.length)}function Yh(t){return eA(t)}function eA(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=xu(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return bu(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return gt.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=eA(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${eA(n.fields[l])}`;return i+"}"})(t.mapValue):Et(61005,{value:t})}function _y(t){switch(qc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rx(t);return e?16+_y(e):16;case 5:return 2*t.stringValue.length;case 6:return bu(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+_y(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return nf(r.fields,((a,l)=>{i+=a.length+_y(l)})),i})(t.mapValue);default:throw Et(13486,{value:t})}}function Jf(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function tA(t){return!!t&&"integerValue"in t}function _p(t){return!!t&&"arrayValue"in t}function oP(t){return!!t&&"nullValue"in t}function lP(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ey(t){return!!t&&"mapValue"in t}function Px(t){return(t?.mapValue?.fields||{})[eT]?.stringValue===tT}function ap(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return nf(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ap(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ap(t.arrayValue.values[n]);return e}return{...t}}function Bj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Lj}const Fj={mapValue:{fields:{[eT]:{stringValue:tT},[$h]:{arrayValue:{}}}}};function sY(t){return"nullValue"in t?wy:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Jf(Uc.empty(),gt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Px(t)?Fj:{mapValue:{}}:Et(35942,{value:t})}function oY(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Jf(Uc.empty(),gt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Fj:"mapValue"in t?Px(t)?{mapValue:{}}:Cc:Et(61959,{value:t})}function uP(t,e){const n=Gc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function cP(t,e){const n=Gc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class ga{constructor(e){this.value=e}static empty(){return new ga({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ey(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ap(n)}setAll(e){let n=qr.emptyPath(),r={},i=[];e.forEach(((l,f)=>{if(!n.isImmediateParentOf(f)){const m=this.getFieldsMap(n);this.applyChanges(m,r,i),r={},i=[],n=f.popLast()}l?r[f.lastSegment()]=ap(l):i.push(f.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Ey(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cl(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ey(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){nf(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new ga(ap(this.value))}}function Vj(t){const e=[];return nf(t.fields,((n,r)=>{const i=new qr([n]);if(Ey(r)){const a=Vj(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)})),new Ds(e)}class Ur{constructor(e,n,r,i,a,l,f){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new Ur(e,0,jt.min(),jt.min(),jt.min(),ga.empty(),0)}static newFoundDocument(e,n,r,i){return new Ur(e,1,n,jt.min(),r,i,0)}static newNoDocument(e,n){return new Ur(e,2,n,jt.min(),jt.min(),ga.empty(),0)}static newUnknownDocument(e,n){return new Ur(e,3,n,jt.min(),jt.min(),ga.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(jt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ga.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ga.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ur&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ur(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hc{constructor(e,n){this.position=e,this.inclusive=n}}function fP(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],l=t.position[i];if(a.field.isKeyField()?r=gt.comparator(gt.fromName(l.referenceValue),n.key):r=Gc(l,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function dP(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cl(t.position[n],e.position[n]))return!1;return!0}class Ep{constructor(e,n="asc"){this.field=e,this.dir=n}}function lY(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class zj{}class kn extends zj{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new uY(e,n,r):n==="array-contains"?new dY(e,r):n==="in"?new Wj(e,r):n==="not-in"?new hY(e,r):n==="array-contains-any"?new mY(e,r):new kn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cY(e,r):new fY(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Gc(n,this.value)):n!==null&&qc(this.value)===qc(n)&&this.matchesComparison(Gc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cr extends zj{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new cr(e,n)}matches(e){return Xh(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Xh(t){return t.op==="and"}function nA(t){return t.op==="or"}function nT(t){return Uj(t)&&Xh(t)}function Uj(t){for(const e of t.filters)if(e instanceof cr)return!1;return!0}function rA(t){if(t instanceof kn)return t.field.canonicalString()+t.op.toString()+Yh(t.value);if(nT(t))return t.filters.map((e=>rA(e))).join(",");{const e=t.filters.map((n=>rA(n))).join(",");return`${t.op}(${e})`}}function qj(t,e){return t instanceof kn?(function(r,i){return i instanceof kn&&r.op===i.op&&r.field.isEqual(i.field)&&Cl(r.value,i.value)})(t,e):t instanceof cr?(function(r,i){return i instanceof cr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,l,f)=>a&&qj(l,i.filters[f])),!0):!1})(t,e):void Et(19439)}function Gj(t,e){const n=t.filters.concat(e);return cr.create(n,t.op)}function Hj(t){return t instanceof kn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Yh(n.value)}`})(t):t instanceof cr?(function(n){return n.op.toString()+" {"+n.getFilters().map(Hj).join(" ,")+"}"})(t):"Filter"}class uY extends kn{constructor(e,n,r){super(e,n,r),this.key=gt.fromName(r.referenceValue)}matches(e){const n=gt.comparator(e.key,this.key);return this.matchesComparison(n)}}class cY extends kn{constructor(e,n){super(e,"in",n),this.keys=Kj("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class fY extends kn{constructor(e,n){super(e,"not-in",n),this.keys=Kj("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Kj(t,e){return(e.arrayValue?.values||[]).map((n=>gt.fromName(n.referenceValue)))}class dY extends kn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _p(n)&&wp(n.arrayValue,this.value)}}class Wj extends kn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wp(this.value.arrayValue,n)}}class hY extends kn{constructor(e,n){super(e,"not-in",n)}matches(e){if(wp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!wp(this.value.arrayValue,n)}}class mY extends kn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_p(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>wp(this.value.arrayValue,r)))}}class gY{constructor(e,n=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.Te=null}}function iA(t,e=null,n=[],r=[],i=null,a=null,l=null){return new gY(t,e,n,r,i,a,l)}function ed(t){const e=yt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>rA(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Qp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Yh(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Yh(r))).join(",")),e.Te=n}return e.Te}function Jp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lY(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qj(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dP(t.startAt,e.startAt)&&dP(t.endAt,e.endAt)}function Zy(t){return gt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Jy(t,e){return t.filters.filter((n=>n instanceof kn&&n.field.isEqual(e)))}function hP(t,e,n){let r=wy,i=!0;for(const a of Jy(t,e)){let l=wy,f=!0;switch(a.op){case"<":case"<=":l=sY(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=wy}uP({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const l=n.position[a];uP({value:r,inclusive:i},{value:l,inclusive:n.inclusive})<0&&(r=l,i=n.inclusive);break}}return{value:r,inclusive:i}}function mP(t,e,n){let r=Cc,i=!0;for(const a of Jy(t,e)){let l=Cc,f=!0;switch(a.op){case">=":case">":l=oY(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=Cc}cP({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const l=n.position[a];cP({value:r,inclusive:i},{value:l,inclusive:n.inclusive})>0&&(r=l,i=n.inclusive);break}}return{value:r,inclusive:i}}class Pu{constructor(e,n=null,r=[],i=[],a=null,l="F",f=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function $j(t,e,n,r,i,a,l,f){return new Pu(t,e,n,r,i,a,l,f)}function _m(t){return new Pu(t)}function gP(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function pY(t){return gt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function rT(t){return t.collectionGroup!==null}function Ch(t){const e=yt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let f=new dr(qr.comparator);return l.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Ep(a,r))})),n.has(qr.keyField().canonicalString())||e.Ie.push(new Ep(qr.keyField(),r))}return e.Ie}function rs(t){const e=yt(t);return e.Ee||(e.Ee=Xj(e,Ch(t))),e.Ee}function Yj(t){const e=yt(t);return e.Re||(e.Re=Xj(e,t.explicitOrderBy)),e.Re}function Xj(t,e){if(t.limitType==="F")return iA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Ep(i.field,a)}));const n=t.endAt?new Hc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hc(t.startAt.position,t.startAt.inclusive):null;return iA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function aA(t,e){const n=t.filters.concat([e]);return new Pu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function yY(t,e){const n=t.explicitOrderBy.concat([e]);return new Pu(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function ev(t,e,n){return new Pu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vY(t,e){return new Pu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}function xY(t,e){return new Pu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}function e0(t,e){return Jp(rs(t),rs(e))&&t.limitType===e.limitType}function Qj(t){return`${ed(rs(t))}|lt:${t.limitType}`}function xh(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>Hj(i))).join(", ")}]`),Qp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Yh(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Yh(i))).join(",")),`Target(${r})`})(rs(t))}; limitType=${t.limitType})`}function t0(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):gt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of Ch(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(l,f,m){const p=fP(l,f,m);return l.inclusive?p<=0:p<0})(r.startAt,Ch(r),i)||r.endAt&&!(function(l,f,m){const p=fP(l,f,m);return l.inclusive?p>=0:p>0})(r.endAt,Ch(r),i))})(t,e)}function Zj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Jj(t){return(e,n)=>{let r=!1;for(const i of Ch(t)){const a=bY(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function bY(t,e,n){const r=t.field.isKeyField()?gt.comparator(e.key,n.key):(function(a,l,f){const m=l.data.field(a),p=f.data.field(a);return m!==null&&p!==null?Gc(m,p):Et(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Et(19790,{direction:t.dir})}}class Du{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){nf(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return Rj(this.inner)}size(){return this.innerSize}}const wY=new jr(gt.comparator);function ks(){return wY}const e9=new jr(gt.comparator);function Wg(...t){let e=e9;for(const n of t)e=e.insert(n.key,n);return e}function t9(t){let e=e9;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function bl(){return sp()}function n9(){return sp()}function sp(){return new Du((t=>t.toString()),((t,e)=>t.isEqual(e)))}const _Y=new jr(gt.comparator),EY=new dr(gt.comparator);function on(...t){let e=EY;for(const n of t)e=e.add(n);return e}const AY=new dr(Kt);function iT(){return AY}function aT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gp(e)?"-0":e}}function r9(t){return{integerValue:""+t}}function i9(t,e){return xj(e)?r9(e):aT(t,e)}class Dx{constructor(){this._=void 0}}function SY(t,e,n){return t instanceof Qh?(function(i,a){const l={fields:{[kj]:{stringValue:Dj},[jj]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Nx(a)&&(a=Rx(a)),a&&(l.fields[Mj]=a),{mapValue:l}})(n,e):t instanceof td?s9(t,e):t instanceof nd?o9(t,e):(function(i,a){const l=a9(i,a),f=pP(l)+pP(i.Ae);return tA(l)&&tA(i.Ae)?r9(f):aT(i.serializer,f)})(t,e)}function TY(t,e,n){return t instanceof td?s9(t,e):t instanceof nd?o9(t,e):n}function a9(t,e){return t instanceof Zh?(function(r){return tA(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Qh extends Dx{}class td extends Dx{constructor(e){super(),this.elements=e}}function s9(t,e){const n=l9(e);for(const r of t.elements)n.some((i=>Cl(i,r)))||n.push(r);return{arrayValue:{values:n}}}class nd extends Dx{constructor(e){super(),this.elements=e}}function o9(t,e){let n=l9(e);for(const r of t.elements)n=n.filter((i=>!Cl(i,r)));return{arrayValue:{values:n}}}class Zh extends Dx{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function pP(t){return Zr(t.integerValue||t.doubleValue)}function l9(t){return _p(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class n0{constructor(e,n){this.field=e,this.transform=n}}function IY(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof td&&i instanceof td||r instanceof nd&&i instanceof nd?Vh(r.elements,i.elements,Cl):r instanceof Zh&&i instanceof Zh?Cl(r.Ae,i.Ae):r instanceof Qh&&i instanceof Qh})(t.transform,e.transform)}class CY{constructor(e,n){this.version=e,this.transformResults=n}}class ei{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ei}static exists(e){return new ei(void 0,e)}static updateTime(e){return new ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ay(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kx{}function u9(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Am(t.key,ei.none()):new Em(t.key,t.data,ei.none());{const n=t.data,r=ga.empty();let i=new dr(qr.comparator);for(let a of e.fields)if(!i.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new ku(t.key,r,new Ds(i.toArray()),ei.none())}}function OY(t,e,n){t instanceof Em?(function(i,a,l){const f=i.value.clone(),m=vP(i.fieldTransforms,a,l.transformResults);f.setAll(m),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(t,e,n):t instanceof ku?(function(i,a,l){if(!Ay(i.precondition,a))return void a.convertToUnknownDocument(l.version);const f=vP(i.fieldTransforms,a,l.transformResults),m=a.data;m.setAll(c9(i)),m.setAll(f),a.convertToFoundDocument(l.version,m).setHasCommittedMutations()})(t,e,n):(function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function op(t,e,n,r){return t instanceof Em?(function(a,l,f,m){if(!Ay(a.precondition,l))return f;const p=a.value.clone(),b=xP(a.fieldTransforms,m,l);return p.setAll(b),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(t,e,n,r):t instanceof ku?(function(a,l,f,m){if(!Ay(a.precondition,l))return f;const p=xP(a.fieldTransforms,m,l),b=l.data;return b.setAll(c9(a)),b.setAll(p),l.convertToFoundDocument(l.version,b).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((_=>_.field)))})(t,e,n,r):(function(a,l,f){return Ay(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):f})(t,e,n)}function NY(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=a9(r.transform,i||null);a!=null&&(n===null&&(n=ga.empty()),n.set(r.field,a))}return n||null}function yP(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vh(r,i,((a,l)=>IY(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Em extends kx{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ku extends kx{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function c9(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function vP(t,e,n){const r=new Map;Nt(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const a=t[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,TY(l,f,n[i]))}return r}function xP(t,e,n){const r=new Map;for(const i of t){const a=i.transform,l=n.data.field(i.field);r.set(i.field,SY(a,l,e))}return r}class Am extends kx{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sT extends kx{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class oT{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&OY(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=op(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=op(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=n9();return this.mutations.forEach((i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=n.has(i.key)?null:f;const m=u9(l,f);m!==null&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(jt.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),on())}isEqual(e){return this.batchId===e.batchId&&Vh(this.mutations,e.mutations,((n,r)=>yP(n,r)))&&Vh(this.baseMutations,e.baseMutations,((n,r)=>yP(n,r)))}}class lT{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Nt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return _Y})();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new lT(e,n,r,i)}}class uT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class f9{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}class RY{constructor(e,n){this.count=e,this.unchangedNames=n}}var Fi,Bn;function d9(t){switch(t){case ke.OK:return Et(64938);case ke.CANCELLED:case ke.UNKNOWN:case ke.DEADLINE_EXCEEDED:case ke.RESOURCE_EXHAUSTED:case ke.INTERNAL:case ke.UNAVAILABLE:case ke.UNAUTHENTICATED:return!1;case ke.INVALID_ARGUMENT:case ke.NOT_FOUND:case ke.ALREADY_EXISTS:case ke.PERMISSION_DENIED:case ke.FAILED_PRECONDITION:case ke.ABORTED:case ke.OUT_OF_RANGE:case ke.UNIMPLEMENTED:case ke.DATA_LOSS:return!0;default:return Et(15467,{code:t})}}function h9(t){if(t===void 0)return Si("GRPC error has no .code"),ke.UNKNOWN;switch(t){case Fi.OK:return ke.OK;case Fi.CANCELLED:return ke.CANCELLED;case Fi.UNKNOWN:return ke.UNKNOWN;case Fi.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case Fi.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case Fi.INTERNAL:return ke.INTERNAL;case Fi.UNAVAILABLE:return ke.UNAVAILABLE;case Fi.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case Fi.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case Fi.NOT_FOUND:return ke.NOT_FOUND;case Fi.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case Fi.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case Fi.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case Fi.ABORTED:return ke.ABORTED;case Fi.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case Fi.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case Fi.DATA_LOSS:return ke.DATA_LOSS;default:return Et(39323,{code:t})}}(Bn=Fi||(Fi={}))[Bn.OK=0]="OK",Bn[Bn.CANCELLED=1]="CANCELLED",Bn[Bn.UNKNOWN=2]="UNKNOWN",Bn[Bn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bn[Bn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bn[Bn.NOT_FOUND=5]="NOT_FOUND",Bn[Bn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bn[Bn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bn[Bn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bn[Bn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bn[Bn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bn[Bn.ABORTED=10]="ABORTED",Bn[Bn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bn[Bn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bn[Bn.INTERNAL=13]="INTERNAL",Bn[Bn.UNAVAILABLE=14]="UNAVAILABLE",Bn[Bn.DATA_LOSS=15]="DATA_LOSS";let sA=null;function PY(t){if(sA)throw new Error("a TestingHooksSpi instance is already set");sA=t}function m9(){return new TextEncoder}const DY=new Mc([4294967295,4294967295],0);function bP(t){const e=m9().encode(t),n=new tj;return n.update(e),new Uint8Array(n.digest())}function wP(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Mc([n,r],0),new Mc([i,a],0)]}class cT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $g(`Invalid padding: ${n}`);if(r<0)throw new $g(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $g(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $g(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Mc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Mc.fromNumber(r)));return i.compare(DY)===1&&(i=new Mc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=bP(e),[r,i]=wP(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);if(!this.we(l))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new cT(a,i,n);return r.forEach((f=>l.insert(f))),l}insert(e){if(this.ge===0)return;const n=bP(e),[r,i]=wP(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);this.be(l)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $g extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class r0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,i0.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new r0(jt.min(),i,new jr(Kt),ks(),on())}}class i0{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new i0(r,n,on(),on(),on())}}class Sy{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class g9{constructor(e,n){this.targetId=e,this.Ce=n}}class p9{constructor(e,n,r=oi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class _P{constructor(){this.ve=0,this.Fe=EP(),this.Me=oi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=on(),n=on(),r=on();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Et(38017,{changeType:a})}})),new i0(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=EP()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Nt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class kY{constructor(e){this.Ge=e,this.ze=new Map,this.je=ks(),this.He=U1(),this.Je=U1(),this.Ze=new jr(Kt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Et(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(Zy(a))if(r===0){const l=new gt(a.path);this.et(n,l,Ur.newNoDocument(l,jt.min()))}else Nt(r===1,20013,{expectedCount:r});else{const l=this._t(n);if(l!==r){const f=this.ut(e),m=f?this.ct(f,e,l):1;if(m!==0){this.it(n);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,p)}sA?.lt((function(b,_,T,R,j){const M={localCacheCount:b,existenceFilterCount:_.count,databaseId:T.database,projectId:T.projectId},L=_.unchangedNames;return L&&(M.bloomFilter={applied:j===0,hashCount:L?.hashCount??0,bitmapLength:L?.bits?.bitmap?.length??0,padding:L?.bits?.padding??0,mightContain:z=>R?.mightContain(z)??!1}),M})(l,e.Ce,this.Ge.ht(),f,m))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let l,f;try{l=bu(r).toUint8Array()}catch(m){if(m instanceof Pj)return Fs("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new cT(l,i,a)}catch(m){return Fs(m instanceof $g?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const l=this.Ge.ht(),f=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,l)=>{const f=this.ot(l);if(f){if(a.current&&Zy(f.target)){const m=new gt(f.target.path);this.It(m).has(l)||this.Et(l,m)||this.et(l,m,Ur.newNoDocument(m,e))}a.Be&&(n.set(l,a.ke()),a.Ke())}}));let r=on();this.Je.forEach(((a,l)=>{let f=!0;l.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const i=new r0(e,n,this.Ze,this.je,r);return this.je=ks(),this.He=U1(),this.Je=U1(),this.Ze=new jr(Kt),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new _P,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new dr(Kt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new dr(Kt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||nt("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new _P),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function U1(){return new jr(gt.comparator)}function EP(){return new jr(gt.comparator)}const MY={asc:"ASCENDING",desc:"DESCENDING"},jY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LY={and:"AND",or:"OR"};class BY{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function oA(t,e){return t.useProto3Json||Qp(e)?e:{value:e}}function Jh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function y9(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FY(t,e){return Jh(t,e.toTimestamp())}function Ci(t){return Nt(!!t,49232),jt.fromTimestamp((function(n){const r=xu(n);return new nr(r.seconds,r.nanos)})(t))}function fT(t,e){return lA(t,e).canonicalString()}function lA(t,e){const n=(function(i){return new Sn(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function v9(t){const e=Sn.fromString(t);return Nt(I9(e),10190,{key:e.toString()}),e}function Ap(t,e){return fT(t.databaseId,e.path)}function Al(t,e){const n=v9(e);if(n.get(1)!==t.databaseId.projectId)throw new Ye(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ye(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new gt(w9(n))}function x9(t,e){return fT(t.databaseId,e)}function b9(t){const e=v9(t);return e.length===4?Sn.emptyPath():w9(e)}function uA(t){return new Sn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function w9(t){return Nt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function AP(t,e,n){return{name:Ap(t,e),fields:n.value.mapValue.fields}}function Mx(t,e,n){const r=Al(t,e.name),i=Ci(e.updateTime),a=e.createTime?Ci(e.createTime):jt.min(),l=new ga({mapValue:{fields:e.fields}}),f=Ur.newFoundDocument(r,i,a,l);return n&&f.setHasCommittedMutations(),n?f.setHasCommittedMutations():f}function VY(t,e){return"found"in e?(function(r,i){Nt(!!i.found,43571),i.found.name,i.found.updateTime;const a=Al(r,i.found.name),l=Ci(i.found.updateTime),f=i.found.createTime?Ci(i.found.createTime):jt.min(),m=new ga({mapValue:{fields:i.found.fields}});return Ur.newFoundDocument(a,l,f,m)})(t,e):"missing"in e?(function(r,i){Nt(!!i.missing,3894),Nt(!!i.readTime,22933);const a=Al(r,i.missing),l=Ci(i.readTime);return Ur.newNoDocument(a,l)})(t,e):Et(7234,{result:e})}function zY(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Et(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(p,b){return p.useProto3Json?(Nt(b===void 0||typeof b=="string",58123),oi.fromBase64String(b||"")):(Nt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),oi.fromUint8Array(b||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&(function(p){const b=p.code===void 0?ke.UNKNOWN:h9(p.code);return new Ye(b,p.message||"")})(l);n=new p9(r,i,a,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Al(t,r.document.name),a=Ci(r.document.updateTime),l=r.document.createTime?Ci(r.document.createTime):jt.min(),f=new ga({mapValue:{fields:r.document.fields}}),m=Ur.newFoundDocument(i,a,l,f),p=r.targetIds||[],b=r.removedTargetIds||[];n=new Sy(p,b,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Al(t,r.document),a=r.readTime?Ci(r.readTime):jt.min(),l=Ur.newNoDocument(i,a),f=r.removedTargetIds||[];n=new Sy([],f,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Al(t,r.document),a=r.removedTargetIds||[];n=new Sy([],a,i,null)}else{if(!("filter"in e))return Et(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new RY(i,a),f=r.targetId;n=new g9(f,l)}}return n}function Sp(t,e){let n;if(e instanceof Em)n={update:AP(t,e.key,e.value)};else if(e instanceof Am)n={delete:Ap(t,e.key)};else if(e instanceof ku)n={update:AP(t,e.key,e.data),updateMask:WY(e.fieldMask)};else{if(!(e instanceof sT))return Et(16599,{dt:e.type});n={verify:Ap(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const f=l.transform;if(f instanceof Qh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof td)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof nd)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Zh)return{fieldPath:l.field.canonicalString(),increment:f.Ae};throw Et(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:FY(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Et(27497)})(t,e.precondition)),n}function cA(t,e){const n=e.currentDocument?(function(a){return a.updateTime!==void 0?ei.updateTime(Ci(a.updateTime)):a.exists!==void 0?ei.exists(a.exists):ei.none()})(e.currentDocument):ei.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(l,f){let m=null;if("setToServerValue"in f)Nt(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),m=new Qh;else if("appendMissingElements"in f){const b=f.appendMissingElements.values||[];m=new td(b)}else if("removeAllFromArray"in f){const b=f.removeAllFromArray.values||[];m=new nd(b)}else"increment"in f?m=new Zh(l,f.increment):Et(16584,{proto:f});const p=qr.fromServerFormat(f.fieldPath);return new n0(p,m)})(t,i))):[];if(e.update){e.update.name;const i=Al(t,e.update.name),a=new ga({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(m){const p=m.fieldPaths||[];return new Ds(p.map((b=>qr.fromServerFormat(b))))})(e.updateMask);return new ku(i,a,l,n,r)}return new Em(i,a,n,r)}if(e.delete){const i=Al(t,e.delete);return new Am(i,n)}if(e.verify){const i=Al(t,e.verify);return new sT(i,n)}return Et(1463,{proto:e})}function UY(t,e){return t&&t.length>0?(Nt(e!==void 0,14353),t.map((n=>(function(i,a){let l=i.updateTime?Ci(i.updateTime):Ci(a);return l.isEqual(jt.min())&&(l=Ci(a)),new CY(l,i.transformResults||[])})(n,e)))):[]}function _9(t,e){return{documents:[x9(t,e.path)]}}function jx(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=x9(t,i);const a=(function(p){if(p.length!==0)return T9(cr.create(p,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const l=(function(p){if(p.length!==0)return p.map((b=>(function(T){return{field:bc(T.field),direction:GY(T.dir)}})(b)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const f=oA(t,e.limit);return f!==null&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:i}}function E9(t,e,n,r){const{ft:i,parent:a}=jx(t,e),l={},f=[];let m=0;return n.forEach((p=>{const b=r?p.alias:"aggregate_"+m++;l[b]=p.alias,p.aggregateType==="count"?f.push({alias:b,count:{}}):p.aggregateType==="avg"?f.push({alias:b,avg:{field:bc(p.fieldPath)}}):p.aggregateType==="sum"&&f.push({alias:b,sum:{field:bc(p.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:f,structuredQuery:i.structuredQuery},parent:i.parent},gt:l,parent:a}}function A9(t){let e=b9(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Nt(r===1,65062);const b=n.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];n.where&&(a=(function(_){const T=S9(_);return T instanceof cr&&nT(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(_){return _.map((T=>(function(j){return new Ep(bh(j.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(T)))})(n.orderBy));let f=null;n.limit&&(f=(function(_){let T;return T=typeof _=="object"?_.value:_,Qp(T)?null:T})(n.limit));let m=null;n.startAt&&(m=(function(_){const T=!!_.before,R=_.values||[];return new Hc(R,T)})(n.startAt));let p=null;return n.endAt&&(p=(function(_){const T=!_.before,R=_.values||[];return new Hc(R,T)})(n.endAt)),$j(e,i,l,a,f,"F",m,p)}function qY(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function S9(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bh(n.unaryFilter.field);return kn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=bh(n.unaryFilter.field);return kn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=bh(n.unaryFilter.field);return kn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=bh(n.unaryFilter.field);return kn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}})(t):t.fieldFilter!==void 0?(function(n){return kn.create(bh(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return cr.create(n.compositeFilter.filters.map((r=>S9(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Et(1026)}})(n.compositeFilter.op))})(t):Et(30097,{filter:t})}function GY(t){return MY[t]}function HY(t){return jY[t]}function KY(t){return LY[t]}function bc(t){return{fieldPath:t.canonicalString()}}function bh(t){return qr.fromServerFormat(t.fieldPath)}function T9(t){return t instanceof kn?(function(n){if(n.op==="=="){if(lP(n.value))return{unaryFilter:{field:bc(n.field),op:"IS_NAN"}};if(oP(n.value))return{unaryFilter:{field:bc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lP(n.value))return{unaryFilter:{field:bc(n.field),op:"IS_NOT_NAN"}};if(oP(n.value))return{unaryFilter:{field:bc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bc(n.field),op:HY(n.op),value:n.value}}})(t):t instanceof cr?(function(n){const r=n.getFilters().map((i=>T9(i)));return r.length===1?r[0]:{compositeFilter:{op:KY(n.op),filters:r}}})(t):Et(54877,{filter:t})}function WY(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function I9(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function C9(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class ou{constructor(e,n,r,i,a=jt.min(),l=jt.min(),f=oi.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new ou(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ou(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ou(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ou(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class O9{constructor(e){this.yt=e}}function $Y(t,e){let n;if(e.document)n=Mx(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=gt.fromSegments(e.noDocument.path),i=id(e.noDocument.readTime);n=Ur.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Et(56709);{const r=gt.fromSegments(e.unknownDocument.path),i=id(e.unknownDocument.version);n=Ur.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const a=new nr(i[0],i[1]);return jt.fromTimestamp(a)})(e.readTime)),n}function SP(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:tv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,l){return{name:Ap(a,l.key),fields:l.data.value.mapValue.fields,updateTime:Jh(a,l.version.toTimestamp()),createTime:Jh(a,l.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:rd(e.version)};else{if(!e.isUnknownDocument())return Et(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:rd(e.version)}}return r}function tv(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function rd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function id(t){const e=new nr(t.seconds,t.nanoseconds);return jt.fromTimestamp(e)}function jf(t,e){const n=(e.baseMutations||[]).map((a=>cA(t.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const f=e.mutations[a+1];l.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>cA(t.yt,a))),i=nr.fromMillis(e.localWriteTimeMs);return new oT(e.batchId,i,n,r)}function Yg(t){const e=id(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?id(t.lastLimboFreeSnapshotVersion):jt.min();let r;return r=(function(a){return a.documents!==void 0})(t.query)?(function(a){const l=a.documents.length;return Nt(l===1,1966,{count:l}),rs(_m(b9(a.documents[0])))})(t.query):(function(a){return rs(A9(a))})(t.query),new ou(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,oi.fromBase64String(t.resumeToken))}function N9(t,e){const n=rd(e.snapshotVersion),r=rd(e.lastLimboFreeSnapshotVersion);let i;i=Zy(e.target)?_9(t.yt,e.target):jx(t.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ed(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Lx(t){const e=A9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ev(e,e.limit,"L"):e}function W_(t,e){return new uT(e.largestBatchId,cA(t.yt,e.overlayMutation))}function TP(t,e){const n=e.path.lastSegment();return[t,ns(e.path.popLast()),n]}function IP(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:rd(r.readTime),documentKey:ns(r.documentKey.path),largestBatchId:r.largestBatchId}}class YY{getBundleMetadata(e,n){return CP(e).get(n).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:id(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,n){return CP(e).put((function(i){return{bundleId:i.id,createTime:rd(Ci(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return OP(e).get(n).next((r=>{if(r)return(function(a){return{name:a.name,query:Lx(a.bundledQuery),readTime:id(a.readTime)}})(r)}))}saveNamedQuery(e,n){return OP(e).put((function(i){return{name:i.name,readTime:rd(Ci(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function CP(t){return Qi(t,Ix)}function OP(t){return Qi(t,Cx)}class Bx{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Bx(e,r)}getOverlay(e,n){return Ig(e).get(TP(this.userId,n)).next((r=>r?W_(this.serializer,r):null))}getOverlays(e,n){const r=bl();return Ce.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((a,l)=>{const f=new uT(n,l);i.push(this.bt(e,f))})),Ce.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((l=>i.add(ns(l.getCollectionPath()))));const a=[];return i.forEach((l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Ig(e).X(ZE,f))})),Ce.waitFor(a)}getOverlaysForCollection(e,n,r){const i=bl(),a=ns(n),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ig(e).H(ZE,l).next((f=>{for(const m of f){const p=W_(this.serializer,m);i.set(p.getKey(),p)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const a=bl();let l;const f=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ig(e).ee({index:Sj,range:f},((m,p,b)=>{const _=W_(this.serializer,p);a.size()<i||_.largestBatchId===l?(a.set(_.getKey(),_),l=_.largestBatchId):b.done()})).next((()=>a))}bt(e,n){return Ig(e).put((function(i,a,l){const[f,m,p]=TP(a,l.mutation.key);return{userId:a,collectionPath:m,documentId:p,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Sp(i.yt,l.mutation)}})(this.serializer,this.userId,n))}}function Ig(t){return Qi(t,Ox)}class XY{St(e){return Qi(e,ZS)}getSessionToken(e){return this.St(e).get("sessionToken").next((n=>{const r=n?.value;return r?oi.fromUint8Array(r):oi.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.St(e).put({name:"sessionToken",value:n.toUint8Array()})}}class Lf{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Zr(e.integerValue));else if("doubleValue"in e){const r=Zr(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),gp(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=xu(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(bu(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?Bj(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Px(e)?this.kt(e.mapValue,n):(this.Kt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Nt(n)):Et(19022,{Ut:e})}Ot(e,n){this.Ft(n,25),this.$t(e,n)}$t(e,n){n.xt(e)}Kt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=$h,a=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Zr(a)),this.Ot(i,n),this.Ct(r[i],n)}qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),gt.fromName(e).path.forEach((r=>{this.Ft(n,60),this.$t(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Lf.Wt=new Lf;const uh=255;function QY(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function NP(t){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const l=QY(255&r[a]);if(i+=l,l!==8)break}return i})(t);return Math.ceil(e/8)}class ZY{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ht(r.value),r=n.next();this.Jt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const i=n.codePointAt(0);this.Ht(240|i>>>18),this.Ht(128|63&i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i)}}this.Jt()}Yt(e){const n=this.en(e),r=NP(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=NP(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(uh),this.sn(255)}_n(){this.an(uh),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===uh?(this.sn(uh),this.sn(0)):this.sn(n)}Ht(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===uh?(this.an(uh),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class JY{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class eX{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Cg{constructor(){this.cn=new ZY,this.ascending=new JY(this.cn),this.descending=new eX(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class Bf{constructor(e,n,r,i){this.hn=e,this.Pn=n,this.Tn=r,this.In=i}En(){const e=this.In.length,n=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.In,0),n!==e?r.set([0],this.In.length):++r[r.length-1],new Bf(this.hn,this.Pn,this.Tn,r)}Rn(e,n,r){return{indexId:this.hn,uid:e,arrayValue:Ty(this.Tn),directionalValue:Ty(this.In),orderedDocumentKey:Ty(n),documentKey:r.path.toArray()}}An(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function dc(t,e){let n=t.hn-e.hn;return n!==0?n:(n=RP(t.Tn,e.Tn),n!==0?n:(n=RP(t.In,e.In),n!==0?n:gt.comparator(t.Pn,e.Pn)))}function RP(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Ty(t){return W5()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function PP(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class DP{constructor(e){this.Vn=new dr(((n,r)=>qr.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Nt(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const n=YE(e);if(n!==void 0&&!this.pn(n))return!1;const r=Of(e);let i=new Set,a=0,l=0;for(;a<r.length&&this.pn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.Vn.size>0){const f=this.Vn.getIterator().getNext();if(!i.has(f.field.canonicalString())){const m=r[a];if(!this.yn(f,m)||!this.wn(this.dn[l++],m))return!1}++a}for(;a<r.length;++a){const f=r[a];if(l>=this.dn.length||!this.wn(this.dn[l++],f))return!1}return!0}bn(){if(this.fn)return null;let e=new dr(qr.comparator);const n=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Hf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Hf(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Hf(r.field,r.dir==="asc"?0:1)));return new Uh(Uh.UNKNOWN_ID,this.collectionId,n,qh.empty())}pn(e){for(const n of this.mn)if(this.yn(n,e))return!0;return!1}yn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}wn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function R9(t){if(Nt(t instanceof kn||t instanceof cr,20012),t instanceof kn){if(t instanceof Wj){const n=t.value.arrayValue?.values?.map((r=>kn.create(t.field,"==",r)))||[];return cr.create(n,"or")}return t}const e=t.filters.map((n=>R9(n)));return cr.create(e,t.op)}function tX(t){if(t.getFilters().length===0)return[];const e=hA(R9(t));return Nt(P9(e),7391),fA(e)||dA(e)?[e]:e.getFilters()}function fA(t){return t instanceof kn}function dA(t){return t instanceof cr&&nT(t)}function P9(t){return fA(t)||dA(t)||(function(n){if(n instanceof cr&&nA(n)){for(const r of n.getFilters())if(!fA(r)&&!dA(r))return!1;return!0}return!1})(t)}function hA(t){if(Nt(t instanceof kn||t instanceof cr,34018),t instanceof kn)return t;if(t.filters.length===1)return hA(t.filters[0]);const e=t.filters.map((r=>hA(r)));let n=cr.create(e,t.op);return n=nv(n),P9(n)?n:(Nt(n instanceof cr,64498),Nt(Xh(n),40251),Nt(n.filters.length>1,57927),n.filters.reduce(((r,i)=>dT(r,i))))}function dT(t,e){let n;return Nt(t instanceof kn||t instanceof cr,38388),Nt(e instanceof kn||e instanceof cr,25473),n=t instanceof kn?e instanceof kn?(function(i,a){return cr.create([i,a],"and")})(t,e):kP(t,e):e instanceof kn?kP(e,t):(function(i,a){if(Nt(i.filters.length>0&&a.filters.length>0,48005),Xh(i)&&Xh(a))return Gj(i,a.getFilters());const l=nA(i)?i:a,f=nA(i)?a:i,m=l.filters.map((p=>dT(p,f)));return cr.create(m,"or")})(t,e),nv(n)}function kP(t,e){if(Xh(e))return Gj(e,t.getFilters());{const n=e.filters.map((r=>dT(t,r)));return cr.create(n,"or")}}function nv(t){if(Nt(t instanceof kn||t instanceof cr,11850),t instanceof kn)return t;const e=t.getFilters();if(e.length===1)return nv(e[0]);if(Uj(t))return t;const n=e.map((i=>nv(i))),r=[];return n.forEach((i=>{i instanceof kn?r.push(i):i instanceof cr&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:cr.create(r,t.op)}class nX{constructor(){this.Sn=new hT}addToCollectionParentIndex(e,n){return this.Sn.add(n),Ce.resolve()}getCollectionParents(e,n){return Ce.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Ce.resolve()}deleteFieldIndex(e,n){return Ce.resolve()}deleteAllFieldIndexes(e){return Ce.resolve()}createTargetIndexes(e,n){return Ce.resolve()}getDocumentsMatchingTarget(e,n){return Ce.resolve(null)}getIndexType(e,n){return Ce.resolve(0)}getFieldIndexes(e,n){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}getMinOffset(e,n){return Ce.resolve(ao.min())}getMinOffsetFromCollectionGroup(e,n){return Ce.resolve(ao.min())}updateCollectionGroup(e,n,r){return Ce.resolve()}updateIndexEntries(e,n){return Ce.resolve()}}class hT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new dr(Sn.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dr(Sn.comparator)).toArray()}}const MP="IndexedDbIndexManager",q1=new Uint8Array(0);class rX{constructor(e,n){this.databaseId=n,this.Dn=new hT,this.Cn=new Du((r=>ed(r)),((r,i)=>Jp(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Dn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.Dn.add(n)}));const a={collectionId:r,parent:ns(i)};return jP(e).put(a)}return Ce.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[cj(n),""],!1,!0);return jP(e).H(i).next((a=>{for(const l of a){if(l.collectionId!==n)break;r.push(xl(l.parent))}return r}))}addFieldIndex(e,n){const r=Og(e),i=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(n);delete i.indexId;const a=r.add(i);if(n.indexState){const l=fh(e);return a.next((f=>{l.put(IP(f,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return a.next()}deleteFieldIndex(e,n){const r=Og(e),i=fh(e),a=ch(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=Og(e),r=ch(e),i=fh(e);return n.X().next((()=>r.X())).next((()=>i.X()))}createTargetIndexes(e,n){return Ce.forEach(this.vn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new DP(r).bn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,n){const r=ch(e);let i=!0;const a=new Map;return Ce.forEach(this.vn(n),(l=>this.Fn(e,l).next((f=>{i&&(i=!!f),a.set(l,f)})))).next((()=>{if(i){let l=on();const f=[];return Ce.forEach(a,((m,p)=>{nt(MP,`Using index ${(function(K){return`id=${K.indexId}|cg=${K.collectionGroup}|f=${K.fields.map((J=>`${J.fieldPath}:${J.kind}`)).join(",")}`})(m)} to execute ${ed(n)}`);const b=(function(K,J){const ce=YE(J);if(ce===void 0)return null;for(const Z of Jy(K,ce.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null})(p,m),_=(function(K,J){const ce=new Map;for(const Z of Of(J))for(const V of Jy(K,Z.fieldPath))switch(V.op){case"==":case"in":ce.set(Z.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return ce.set(Z.fieldPath.canonicalString(),V.value),Array.from(ce.values())}return null})(p,m),T=(function(K,J){const ce=[];let Z=!0;for(const V of Of(J)){const W=V.kind===0?hP(K,V.fieldPath,K.startAt):mP(K,V.fieldPath,K.startAt);ce.push(W.value),Z&&(Z=W.inclusive)}return new Hc(ce,Z)})(p,m),R=(function(K,J){const ce=[];let Z=!0;for(const V of Of(J)){const W=V.kind===0?mP(K,V.fieldPath,K.endAt):hP(K,V.fieldPath,K.endAt);ce.push(W.value),Z&&(Z=W.inclusive)}return new Hc(ce,Z)})(p,m),j=this.Mn(m,p,T),M=this.Mn(m,p,R),L=this.xn(m,p,_),z=this.On(m.indexId,b,j,T.inclusive,M,R.inclusive,L);return Ce.forEach(z,($=>r.Z($,n.limit).next((K=>{K.forEach((J=>{const ce=gt.fromSegments(J.documentKey);l.has(ce)||(l=l.add(ce),f.push(ce))}))}))))})).next((()=>f))}return Ce.resolve(null)}))}vn(e){let n=this.Cn.get(e);return n||(e.filters.length===0?n=[e]:n=tX(cr.create(e.filters,"and")).map((r=>iA(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,n),n)}On(e,n,r,i,a,l,f){const m=(n!=null?n.length:1)*Math.max(r.length,a.length),p=m/(n!=null?n.length:1),b=[];for(let _=0;_<m;++_){const T=n?this.Nn(n[_/p]):q1,R=this.Bn(e,T,r[_%p],i),j=this.Ln(e,T,a[_%p],l),M=f.map((L=>this.Bn(e,T,L,!0)));b.push(...this.createRange(R,j,M))}return b}Bn(e,n,r,i){const a=new Bf(e,gt.empty(),n,r);return i?a:a.En()}Ln(e,n,r,i){const a=new Bf(e,gt.empty(),n,r);return i?a.En():a}Fn(e,n){const r=new DP(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let l=null;for(const f of a)r.gn(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l}))}getIndexType(e,n){let r=2;const i=this.vn(n);return Ce.forEach(i,(a=>this.Fn(e,a).next((l=>{l?r!==0&&l.fields.length<(function(m){let p=new dr(qr.comparator),b=!1;for(const _ of m.filters)for(const T of _.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?b=!0:p=p.add(T.field));for(const _ of m.orderBy)_.field.isKeyField()||(p=p.add(_.field));return p.size+(b?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(l){return l.limit!==null})(n)&&i.length>1&&r===2?1:r))}kn(e,n){const r=new Cg;for(const i of Of(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const l=r.ln(i.kind);Lf.Wt.Dt(a,l)}return r.un()}Nn(e){const n=new Cg;return Lf.Wt.Dt(e,n.ln(0)),n.un()}Kn(e,n){const r=new Cg;return Lf.Wt.Dt(Jf(this.databaseId,n),r.ln((function(a){const l=Of(a);return l.length===0?0:l[l.length-1].kind})(e))),r.un()}xn(e,n,r){if(r===null)return[];let i=[];i.push(new Cg);let a=0;for(const l of Of(e)){const f=r[a++];for(const m of i)if(this.qn(n,l.fieldPath)&&_p(f))i=this.Un(i,l,f);else{const p=m.ln(l.kind);Lf.Wt.Dt(f,p)}}return this.$n(i)}Mn(e,n,r){return this.xn(e,n,r.position)}$n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Un(e,n,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const m=new Cg;m.seed(f.un()),Lf.Wt.Dt(l,m.ln(n.kind)),a.push(m)}return a}qn(e,n){return!!e.filters.find((r=>r instanceof kn&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=Og(e),i=fh(e);return(n?r.H(QE,IDBKeyRange.bound(n,n)):r.H()).next((a=>{const l=[];return Ce.forEach(a,(f=>i.get([f.indexId,this.uid]).next((m=>{l.push((function(b,_){const T=_?new qh(_.sequenceNumber,new ao(id(_.readTime),new gt(xl(_.documentKey)),_.largestBatchId)):qh.empty(),R=b.fields.map((([j,M])=>new Hf(qr.fromServerFormat(j),M)));return new Uh(b.indexId,b.collectionGroup,R,T)})(f,m))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:Kt(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=Og(e),a=fh(e);return this.Wn(e).next((l=>i.H(QE,IDBKeyRange.bound(n,n)).next((f=>Ce.forEach(f,(m=>a.put(IP(m.indexId,this.uid,l,r))))))))}updateIndexEntries(e,n){const r=new Map;return Ce.forEach(n,((i,a)=>{const l=r.get(i.collectionGroup);return(l?Ce.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next((f=>(r.set(i.collectionGroup,f),Ce.forEach(f,(m=>this.Qn(e,i,m).next((p=>{const b=this.Gn(a,m);return p.isEqual(b)?Ce.resolve():this.zn(e,a,m,p,b)})))))))}))}jn(e,n,r,i){return ch(e).put(i.Rn(this.uid,this.Kn(r,n.key),n.key))}Hn(e,n,r,i){return ch(e).delete(i.An(this.uid,this.Kn(r,n.key),n.key))}Qn(e,n,r){const i=ch(e);let a=new dr(dc);return i.ee({index:Aj,range:IDBKeyRange.only([r.indexId,this.uid,Ty(this.Kn(r,n))])},((l,f)=>{a=a.add(new Bf(r.indexId,n,PP(f.arrayValue),PP(f.directionalValue)))})).next((()=>a))}Gn(e,n){let r=new dr(dc);const i=this.kn(n,e);if(i==null)return r;const a=YE(n);if(a!=null){const l=e.data.field(a.fieldPath);if(_p(l))for(const f of l.arrayValue.values||[])r=r.add(new Bf(n.indexId,e.key,this.Nn(f),i))}else r=r.add(new Bf(n.indexId,e.key,q1,i));return r}zn(e,n,r,i,a){nt(MP,"Updating index entries for document '%s'",n.key);const l=[];return(function(m,p,b,_,T){const R=m.getIterator(),j=p.getIterator();let M=lh(R),L=lh(j);for(;M||L;){let z=!1,$=!1;if(M&&L){const K=b(M,L);K<0?$=!0:K>0&&(z=!0)}else M!=null?$=!0:z=!0;z?(_(L),L=lh(j)):$?(T(M),M=lh(R)):(M=lh(R),L=lh(j))}})(i,a,dc,(f=>{l.push(this.jn(e,n,r,f))}),(f=>{l.push(this.Hn(e,n,r,f))})),Ce.waitFor(l)}Wn(e){let n=1;return fh(e).ee({index:Ej,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((l,f)=>dc(l,f))).filter(((l,f,m)=>!f||dc(l,m[f-1])!==0));const i=[];i.push(e);for(const l of r){const f=dc(l,e),m=dc(l,n);if(f===0)i[0]=e.En();else if(f>0&&m<0)i.push(l),i.push(l.En());else if(m>0)break}i.push(n);const a=[];for(let l=0;l<i.length;l+=2){if(this.Jn(i[l],i[l+1]))return[];const f=i[l].An(this.uid,q1,gt.empty()),m=i[l+1].An(this.uid,q1,gt.empty());a.push(IDBKeyRange.bound(f,m))}return a}Jn(e,n){return dc(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(LP)}getMinOffset(e,n){return Ce.mapArray(this.vn(n),(r=>this.Fn(e,r).next((i=>i||Et(44426))))).next(LP)}}function jP(t){return Qi(t,vp)}function ch(t){return Qi(t,ip)}function Og(t){return Qi(t,QS)}function fh(t){return Qi(t,rp)}function LP(t){Nt(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;$S(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ao(e.readTime,e.documentKey,n)}const BP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},D9=41943040;class es{static withCacheSize(e){return new es(e,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function k9(t,e,n){const r=t.store(Fo),i=t.store(Gh),a=[],l=IDBKeyRange.only(n.batchId);let f=0;const m=r.ee({range:l},((b,_,T)=>(f++,T.delete())));a.push(m.next((()=>{Nt(f===1,47070,{batchId:n.batchId})})));const p=[];for(const b of n.mutations){const _=bj(e,b.key.path,n.batchId);a.push(i.delete(_)),p.push(b.key)}return Ce.waitFor(a).next((()=>p))}function rv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Et(14731);e=t.noDocument}return JSON.stringify(e).length}es.DEFAULT_COLLECTION_PERCENTILE=10,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,es.DEFAULT=new es(D9,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),es.DISABLED=new es(-1,0,0);class Fx{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static wt(e,n,r,i){Nt(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new Fx(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hc(e).ee({index:Ff,range:r},((i,a,l)=>{n=!1,l.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const a=wh(e),l=hc(e);return l.add({}).next((f=>{Nt(typeof f=="number",49019);const m=new oT(f,n,r,i),p=(function(R,j,M){const L=M.baseMutations.map(($=>Sp(R.yt,$))),z=M.mutations.map(($=>Sp(R.yt,$)));return{userId:j,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:L,mutations:z}})(this.serializer,this.userId,m),b=[];let _=new dr(((T,R)=>Kt(T.canonicalString(),R.canonicalString())));for(const T of i){const R=bj(this.userId,T.key.path,f);_=_.add(T.key.path.popLast()),b.push(l.put(p)),b.push(a.put(R,P$))}return _.forEach((T=>{b.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Zn[f]=m.keys()})),Ce.waitFor(b).next((()=>m))}))}lookupMutationBatch(e,n){return hc(e).get(n).next((r=>r?(Nt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),jf(this.serializer,r)):null))}Xn(e,n){return this.Zn[n]?Ce.resolve(this.Zn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Zn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return hc(e).ee({index:Ff,range:i},((l,f,m)=>{f.userId===this.userId&&(Nt(f.batchId>=r,47524,{Yn:r}),a=jf(this.serializer,f)),m.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=jc;return hc(e).ee({index:Ff,range:n,reverse:!0},((i,a,l)=>{r=a.batchId,l.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,jc],[this.userId,Number.POSITIVE_INFINITY]);return hc(e).H(Ff,n).next((r=>r.map((i=>jf(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=xy(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return wh(e).ee({range:i},((l,f,m)=>{const[p,b,_]=l,T=xl(b);if(p===this.userId&&n.path.isEqual(T))return hc(e).get(_).next((R=>{if(!R)throw Et(61480,{er:l,batchId:_});Nt(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:_}),a.push(jf(this.serializer,R))}));m.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dr(Kt);const i=[];return n.forEach((a=>{const l=xy(this.userId,a.path),f=IDBKeyRange.lowerBound(l),m=wh(e).ee({range:f},((p,b,_)=>{const[T,R,j]=p,M=xl(R);T===this.userId&&a.path.isEqual(M)?r=r.add(j):_.done()}));i.push(m)})),Ce.waitFor(i).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=xy(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new dr(Kt);return wh(e).ee({range:l},((m,p,b)=>{const[_,T,R]=m,j=xl(T);_===this.userId&&r.isPrefixOf(j)?j.length===i&&(f=f.add(R)):b.done()})).next((()=>this.tr(e,f)))}tr(e,n){const r=[],i=[];return n.forEach((a=>{i.push(hc(e).get(a).next((l=>{if(l===null)throw Et(35274,{batchId:a});Nt(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:a}),r.push(jf(this.serializer,l))})))})),Ce.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return k9(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.nr(n.batchId)})),Ce.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return Ce.resolve();const r=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),i=[];return wh(e).ee({range:r},((a,l,f)=>{if(a[0]===this.userId){const m=xl(a[1]);i.push(m)}else f.done()})).next((()=>{Nt(i.length===0,56720,{rr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,n){return M9(e,this.userId,n)}ir(e){return j9(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:jc,lastStreamToken:""}))}}function M9(t,e,n){const r=xy(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return wh(t).ee({range:a,Y:!0},((f,m,p)=>{const[b,_,T]=f;b===e&&_===i&&(l=!0),p.done()})).next((()=>l))}function hc(t){return Qi(t,Fo)}function wh(t){return Qi(t,Gh)}function j9(t){return Qi(t,pp)}class ad{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ad(0)}static ar(){return new ad(-1)}}class iX{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.ur(e).next((n=>{const r=new ad(n.highestTargetId);return n.highestTargetId=r.next(),this.cr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((n=>jt.fromTimestamp(new nr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.ur(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.cr(e,i))))}addTargetData(e,n){return this.lr(e,n).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(n,r),this.cr(e,r))))))}updateTargetData(e,n){return this.lr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>dh(e).delete(n.targetId))).next((()=>this.ur(e))).next((r=>(Nt(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,n,r){let i=0;const a=[];return dh(e).ee(((l,f)=>{const m=Yg(f);m.sequenceNumber<=n&&r.get(m.targetId)===null&&(i++,a.push(this.removeTargetData(e,m)))})).next((()=>Ce.waitFor(a))).next((()=>i))}forEachTarget(e,n){return dh(e).ee(((r,i)=>{const a=Yg(i);n(a)}))}ur(e){return FP(e).get(Qy).next((n=>(Nt(n!==null,2888),n)))}cr(e,n){return FP(e).put(Qy,n)}lr(e,n){return dh(e).put(N9(this.serializer,n))}hr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((n=>n.targetCount))}getTargetData(e,n){const r=ed(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return dh(e).ee({range:i,index:_j},((l,f,m)=>{const p=Yg(f);Jp(n,p.target)&&(a=p,m.done())})).next((()=>a))}addMatchingKeys(e,n,r){const i=[],a=wc(e);return n.forEach((l=>{const f=ns(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))})),Ce.waitFor(i)}removeMatchingKeys(e,n,r){const i=wc(e);return Ce.forEach(n,(a=>{const l=ns(a.path);return Ce.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,n){const r=wc(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=wc(e);let a=on();return i.ee({range:r,Y:!0},((l,f,m)=>{const p=xl(l[1]),b=new gt(p);a=a.add(b)})).next((()=>a))}containsKey(e,n){const r=ns(n.path),i=IDBKeyRange.bound([r],[cj(r)],!1,!0);let a=0;return wc(e).ee({index:XS,Y:!0,range:i},(([l,f],m,p)=>{l!==0&&(a++,p.done())})).next((()=>a>0))}At(e,n){return dh(e).get(n).next((r=>r?Yg(r):null))}}function dh(t){return Qi(t,Hh)}function FP(t){return Qi(t,Kf)}function wc(t){return Qi(t,Kh)}const VP="LruGarbageCollector",L9=1048576;function zP([t,e],[n,r]){const i=Kt(t,n);return i===0?Kt(e,r):i}class aX{constructor(e){this.Pr=e,this.buffer=new dr(zP),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();zP(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class B9{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){nt(VP,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){tf(n)?nt(VP,"Ignoring IndexedDB error during garbage collection: ",n):await ef(n)}await this.Ar(3e5)}))}}class sX{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Ce.resolve(Ps.ce);const r=new aX(n);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(nt("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(BP)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(nt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BP):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,a,l,f,m,p;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(nt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,l=Date.now(),this.nthSequenceNumber(e,i)))).next((_=>(r=_,f=Date.now(),this.removeTargets(e,r,n)))).next((_=>(a=_,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(p=Date.now(),vh()<=Dn.DEBUG&&nt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-b}ms
	Determined least recently used ${i} in `+(f-l)+`ms
	Removed ${a} targets in `+(m-f)+`ms
	Removed ${_} documents in `+(p-m)+`ms
Total Duration: ${p-b}ms`),Ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:_}))))}}function F9(t,e){return new sX(t,e)}class oX{constructor(e,n){this.db=e,this.garbageCollector=F9(this,n)}dr(e){const n=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}mr(e,n){return this.yr(e,((r,i)=>n(i)))}addReference(e,n,r){return G1(e,r)}removeReference(e,n,r){return G1(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return G1(e,n)}wr(e,n){return(function(i,a){let l=!1;return j9(i).te((f=>M9(i,f,a).next((m=>(m&&(l=!0),Ce.resolve(!m)))))).next((()=>l))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.yr(e,((l,f)=>{if(f<=n){const m=this.wr(e,l).next((p=>{if(!p)return a++,r.getEntry(e,l).next((()=>(r.removeEntry(l,jt.min()),wc(e).delete((function(_){return[0,ns(_.path)]})(l)))))}));i.push(m)}})).next((()=>Ce.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return G1(e,n)}yr(e,n){const r=wc(e);let i,a=Ps.ce;return r.ee({index:XS},(([l,f],{path:m,sequenceNumber:p})=>{l===0?(a!==Ps.ce&&n(new gt(xl(i)),a),a=p,i=m):a=Ps.ce})).next((()=>{a!==Ps.ce&&n(new gt(xl(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function G1(t,e){return wc(t).put((function(r,i){return{targetId:0,path:ns(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class V9{constructor(){this.changes=new Du((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ur.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ce.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lX{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Sf(e).put(r)}removeEntry(e,n,r){return Sf(e).delete((function(a,l){const f=a.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],tv(l),f[f.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.br(e,r))))}getEntry(e,n){let r=Ur.newInvalidDocument(n);return Sf(e).ee({index:by,range:IDBKeyRange.only(Ng(n))},((i,a)=>{r=this.Sr(n,a)})).next((()=>r))}Dr(e,n){let r={size:0,document:Ur.newInvalidDocument(n)};return Sf(e).ee({index:by,range:IDBKeyRange.only(Ng(n))},((i,a)=>{r={document:this.Sr(n,a),size:rv(a)}})).next((()=>r))}getEntries(e,n){let r=ks();return this.Cr(e,n,((i,a)=>{const l=this.Sr(i,a);r=r.insert(i,l)})).next((()=>r))}vr(e,n){let r=ks(),i=new jr(gt.comparator);return this.Cr(e,n,((a,l)=>{const f=this.Sr(a,l);r=r.insert(a,f),i=i.insert(a,rv(l))})).next((()=>({documents:r,Fr:i})))}Cr(e,n,r){if(n.isEmpty())return Ce.resolve();let i=new dr(GP);n.forEach((m=>i=i.add(m)));const a=IDBKeyRange.bound(Ng(i.first()),Ng(i.last())),l=i.getIterator();let f=l.getNext();return Sf(e).ee({index:by,range:a},((m,p,b)=>{const _=gt.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;f&&GP(f,_)<0;)r(f,null),f=l.getNext();f&&f.isEqual(_)&&(r(f,p),f=l.hasNext()?l.getNext():null),f?b.j(Ng(f)):b.done()})).next((()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,a){const l=n.path,f=[l.popLast().toArray(),l.lastSegment(),tv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Sf(e).H(IDBKeyRange.bound(f,m,!0)).next((p=>{a?.incrementDocumentReadCount(p.length);let b=ks();for(const _ of p){const T=this.Sr(gt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);T.isFoundDocument()&&(t0(n,T)||i.has(T.key))&&(b=b.insert(T.key,T))}return b}))}getAllFromCollectionGroup(e,n,r,i){let a=ks();const l=qP(n,r),f=qP(n,ao.max());return Sf(e).ee({index:wj,range:IDBKeyRange.bound(l,f,!0)},((m,p,b)=>{const _=this.Sr(gt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);a=a.insert(_.key,_),a.size===i&&b.done()})).next((()=>a))}newChangeBuffer(e){return new uX(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return UP(e).get(XE).next((n=>(Nt(!!n,20021),n)))}br(e,n){return UP(e).put(XE,n)}Sr(e,n){if(n){const r=$Y(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(jt.min())))return r}return Ur.newInvalidDocument(e)}}function z9(t){return new lX(t)}class uX extends V9{constructor(e,n){super(),this.Mr=e,this.trackRemovals=n,this.Or=new Du((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new dr(((a,l)=>Kt(a.canonicalString(),l.canonicalString())));return this.changes.forEach(((a,l)=>{const f=this.Or.get(a);if(n.push(this.Mr.removeEntry(e,a,f.readTime)),l.isValidDocument()){const m=SP(this.Mr.serializer,l);i=i.add(a.path.popLast());const p=rv(m);r+=p-f.size,n.push(this.Mr.addEntry(e,a,m))}else if(r-=f.size,this.trackRemovals){const m=SP(this.Mr.serializer,l.convertToNoDocument(jt.min()));n.push(this.Mr.addEntry(e,a,m))}})),i.forEach((a=>{n.push(this.Mr.indexManager.addToCollectionParentIndex(e,a))})),n.push(this.Mr.updateMetadata(e,r)),Ce.waitFor(n)}getFromCache(e,n){return this.Mr.Dr(e,n).next((r=>(this.Or.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Mr.vr(e,n).next((({documents:r,Fr:i})=>(i.forEach(((a,l)=>{this.Or.set(a,{size:l,readTime:r.get(a).readTime})})),r)))}}function UP(t){return Qi(t,yp)}function Sf(t){return Qi(t,Xy)}function Ng(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qP(t,e){const n=e.documentKey.path.toArray();return[t,tv(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function GP(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=Kt(n[a],r[a]),i)return i;return i=Kt(n.length,r.length),i||(i=Kt(n[n.length-2],r[r.length-2]),i||Kt(n[n.length-1],r[r.length-1]))}class cX{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class U9{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&op(r.mutation,i,Ds.empty(),nr.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,on()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=on()){const i=bl();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let l=Wg();return a.forEach(((f,m)=>{l=l.insert(f,m.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const r=bl();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,on())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((l,f)=>{n.set(l,f)}))}))}computeViews(e,n,r,i){let a=ks();const l=sp(),f=(function(){return sp()})();return n.forEach(((m,p)=>{const b=r.get(p.key);i.has(p.key)&&(b===void 0||b.mutation instanceof ku)?a=a.insert(p.key,p):b!==void 0?(l.set(p.key,b.mutation.getFieldMask()),op(b.mutation,p,b.mutation.getFieldMask(),nr.now())):l.set(p.key,Ds.empty())})),this.recalculateAndSaveOverlays(e,a).next((m=>(m.forEach(((p,b)=>l.set(p,b))),n.forEach(((p,b)=>f.set(p,new cX(b,l.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,n){const r=sp();let i=new jr(((l,f)=>l-f)),a=on();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const f of l)f.keys().forEach((m=>{const p=n.get(m);if(p===null)return;let b=r.get(m)||Ds.empty();b=f.applyToLocalView(p,b),r.set(m,b);const _=(i.get(f.batchId)||on()).add(m);i=i.insert(f.batchId,_)}))})).next((()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),p=m.key,b=m.value,_=n9();b.forEach((T=>{if(!a.has(T)){const R=u9(n.get(T),r.get(T));R!==null&&_.set(T,R),a=a.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,_))}return Ce.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return pY(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):rT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):Ce.resolve(bl());let f=zh,m=a;return l.next((p=>Ce.forEach(p,((b,_)=>(f<_.largestBatchId&&(f=_.largestBatchId),a.get(b)?Ce.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{m=m.insert(b,T)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,m,p,on()))).next((b=>({batchId:f,changes:t9(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new gt(n)).next((r=>{let i=Wg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let l=Wg();return this.indexManager.getCollectionParents(e,a).next((f=>Ce.forEach(f,(m=>{const p=(function(_,T){return new Pu(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(n,m.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next((b=>{b.forEach(((_,T)=>{l=l.insert(_,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((l=>{a.forEach(((m,p)=>{const b=p.getKey();l.get(b)===null&&(l=l.insert(b,Ur.newInvalidDocument(b)))}));let f=Wg();return l.forEach(((m,p)=>{const b=a.get(m);b!==void 0&&op(b.mutation,p,Ds.empty(),nr.now()),t0(n,p)&&(f=f.insert(m,p))})),f}))}}class fX{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Ce.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ci(i.createTime)}})(n)),Ce.resolve()}getNamedQuery(e,n){return Ce.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:Lx(i.bundledQuery),readTime:Ci(i.readTime)}})(n)),Ce.resolve()}}class dX{constructor(){this.overlays=new jr(gt.comparator),this.Lr=new Map}getOverlay(e,n){return Ce.resolve(this.overlays.get(n))}getOverlays(e,n){const r=bl();return Ce.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.bt(e,n,a)})),Ce.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),Ce.resolve()}getOverlaysForCollection(e,n,r){const i=bl(),a=n.length+1,l=new gt(n.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const m=f.getNext().value,p=m.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return Ce.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new jr(((p,b)=>p-b));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let b=a.get(p.largestBatchId);b===null&&(b=bl(),a=a.insert(p.largestBatchId,b)),b.set(p.getKey(),p)}}const f=bl(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,b)=>f.set(p,b))),!(f.size()>=i)););return Ce.resolve(f)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new uT(n,r));let a=this.Lr.get(n);a===void 0&&(a=on(),this.Lr.set(n,a)),this.Lr.set(n,a.add(r.key))}}class hX{constructor(){this.sessionToken=oi.EMPTY_BYTE_STRING}getSessionToken(e){return Ce.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ce.resolve()}}class mT{constructor(){this.kr=new dr(da.Kr),this.qr=new dr(da.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new da(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new da(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new gt(new Sn([])),r=new da(n,e),i=new da(n,e+1),a=[];return this.qr.forEachInRange([r,i],(l=>{this.Wr(l),a.push(l.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new gt(new Sn([])),r=new da(n,e),i=new da(n,e+1);let a=on();return this.qr.forEachInRange([r,i],(l=>{a=a.add(l.key)})),a}containsKey(e){const n=new da(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class da{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return gt.comparator(e.key,n.key)||Kt(e.Hr,n.Hr)}static Ur(e,n){return Kt(e.Hr,n.Hr)||gt.comparator(e.key,n.key)}}class mX{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new dr(da.Kr)}checkEmpty(e){return Ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new oT(a,n,r,i);this.mutationQueue.push(l);for(const f of i)this.Jr=this.Jr.add(new da(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Ce.resolve(l)}lookupMutationBatch(e,n){return Ce.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return Ce.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(this.mutationQueue.length===0?jc:this.Yn-1)}getAllMutationBatches(e){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new da(n,0),i=new da(n,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,i],(l=>{const f=this.Zr(l.Hr);a.push(f)})),Ce.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dr(Kt);return n.forEach((i=>{const a=new da(i,0),l=new da(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,l],(f=>{r=r.add(f.Hr)}))})),Ce.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;gt.isDocumentKey(a)||(a=a.child(""));const l=new da(new gt(a),0);let f=new dr(Kt);return this.Jr.forEachWhile((m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(f=f.add(m.Hr)),!0)}),l),Ce.resolve(this.Yr(f))}Yr(e){const n=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Nt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return Ce.forEach(n.mutations,(i=>{const a=new da(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new da(n,0),i=this.Jr.firstAfterOrEqual(r);return Ce.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ce.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class gX{constructor(e){this.ti=e,this.docs=(function(){return new jr(gt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,l=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ce.resolve(r?r.document.mutableCopy():Ur.newInvalidDocument(n))}getEntries(e,n){let r=ks();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Ur.newInvalidDocument(i))})),Ce.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=ks();const l=n.path,f=new gt(l.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:p,value:{document:b}}=m.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||$S(gj(b),r)<=0||(i.has(b.key)||t0(n,b))&&(a=a.insert(b.key,b.mutableCopy()))}return Ce.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Et(9500)}ni(e,n){return Ce.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new pX(this)}getSize(e){return Ce.resolve(this.size)}}class pX extends V9{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),Ce.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class yX{constructor(e){this.persistence=e,this.ri=new Du((n=>ed(n)),Jp),this.lastRemoteSnapshotVersion=jt.min(),this.highestTargetId=0,this.ii=0,this.si=new mT,this.targetCount=0,this.oi=ad._r()}forEachTarget(e,n){return this.ri.forEach(((r,i)=>n(i))),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),Ce.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new ad(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Ce.resolve()}updateTargetData(e,n){return this.lr(n),Ce.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ri.forEach(((l,f)=>{f.sequenceNumber<=n&&r.get(f.targetId)===null&&(this.ri.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)})),Ce.waitFor(a).next((()=>i))}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return Ce.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),Ce.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((l=>{a.push(i.markPotentiallyOrphaned(e,l))})),Ce.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Ce.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return Ce.resolve(r)}containsKey(e,n){return Ce.resolve(this.si.containsKey(n))}}class gT{constructor(e,n){this._i={},this.overlays={},this.ai=new Ps(0),this.ui=!1,this.ui=!0,this.ci=new hX,this.referenceDelegate=e(this),this.li=new yX(this),this.indexManager=new nX,this.remoteDocumentCache=(function(i){return new gX(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new O9(n),this.Pi=new fX(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dX,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new mX(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){nt("MemoryPersistence","Starting transaction:",e);const i=new vX(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((a=>this.referenceDelegate.Ii(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ei(e,n){return Ce.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class vX extends yj{constructor(e){super(),this.currentSequenceNumber=e}}class Vx{constructor(e){this.persistence=e,this.Ri=new mT,this.Ai=null}static Vi(e){return new Vx(e)}get di(){if(this.Ai)return this.Ai;throw Et(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),Ce.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),Ce.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Ce.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.di,(r=>{const i=gt.fromPath(r);return this.mi(e,i).next((a=>{a||n.removeEntry(i,jt.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return Ce.or([()=>Ce.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class iv{constructor(e,n){this.persistence=e,this.fi=new Du((r=>ns(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=F9(this,n)}static Vi(e,n){return new iv(e,n)}Ti(){}Ii(e){return Ce.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return Ce.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((a=>a?Ce.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ni(e,(l=>this.wr(e,l,n).next((f=>{f||(r++,a.removeEntry(l,jt.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Ce.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Ce.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Ce.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Ce.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_y(e.data.value)),n}wr(e,n,r){return Ce.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return Ce.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class xX{constructor(e){this.serializer=e}k(e,n,r,i){const a=new Tx("createOrUpgrade",n);r<1&&i>=1&&((function(m){m.createObjectStore(Zp)})(e),(function(m){m.createObjectStore(pp,{keyPath:R$}),m.createObjectStore(Fo,{keyPath:tP,autoIncrement:!0}).createIndex(Ff,nP,{unique:!0}),m.createObjectStore(Gh)})(e),HP(e),(function(m){m.createObjectStore(Nf)})(e));let l=Ce.resolve();return r<3&&i>=3&&(r!==0&&((function(m){m.deleteObjectStore(Kh),m.deleteObjectStore(Hh),m.deleteObjectStore(Kf)})(e),HP(e)),l=l.next((()=>(function(m){const p=m.store(Kf),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:jt.min().toTimestamp(),targetCount:0};return p.put(Qy,b)})(a)))),r<4&&i>=4&&(r!==0&&(l=l.next((()=>(function(m,p){return p.store(Fo).H().next((_=>{m.deleteObjectStore(Fo),m.createObjectStore(Fo,{keyPath:tP,autoIncrement:!0}).createIndex(Ff,nP,{unique:!0});const T=p.store(Fo),R=_.map((j=>T.put(j)));return Ce.waitFor(R)}))})(e,a)))),l=l.next((()=>{(function(m){m.createObjectStore(Wh,{keyPath:V$})})(e)}))),r<5&&i>=5&&(l=l.next((()=>this.gi(a)))),r<6&&i>=6&&(l=l.next((()=>((function(m){m.createObjectStore(yp)})(e),this.pi(a))))),r<7&&i>=7&&(l=l.next((()=>this.yi(a)))),r<8&&i>=8&&(l=l.next((()=>this.wi(e,a)))),r<9&&i>=9&&(l=l.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(l=l.next((()=>this.bi(a)))),r<11&&i>=11&&(l=l.next((()=>{(function(m){m.createObjectStore(Ix,{keyPath:z$})})(e),(function(m){m.createObjectStore(Cx,{keyPath:U$})})(e)}))),r<12&&i>=12&&(l=l.next((()=>{(function(m){const p=m.createObjectStore(Ox,{keyPath:Y$});p.createIndex(ZE,X$,{unique:!1}),p.createIndex(Sj,Q$,{unique:!1})})(e)}))),r<13&&i>=13&&(l=l.next((()=>(function(m){const p=m.createObjectStore(Xy,{keyPath:D$});p.createIndex(by,k$),p.createIndex(wj,M$)})(e))).next((()=>this.Si(e,a))).next((()=>e.deleteObjectStore(Nf)))),r<14&&i>=14&&(l=l.next((()=>this.Di(e,a)))),r<15&&i>=15&&(l=l.next((()=>(function(m){m.createObjectStore(QS,{keyPath:q$,autoIncrement:!0}).createIndex(QE,G$,{unique:!1}),m.createObjectStore(rp,{keyPath:H$}).createIndex(Ej,K$,{unique:!1}),m.createObjectStore(ip,{keyPath:W$}).createIndex(Aj,$$,{unique:!1})})(e)))),r<16&&i>=16&&(l=l.next((()=>{n.objectStore(rp).clear()})).next((()=>{n.objectStore(ip).clear()}))),r<17&&i>=17&&(l=l.next((()=>{(function(m){m.createObjectStore(ZS,{keyPath:Z$})})(e)}))),r<18&&i>=18&&W5()&&(l=l.next((()=>{n.objectStore(rp).clear()})).next((()=>{n.objectStore(ip).clear()}))),l}pi(e){let n=0;return e.store(Nf).ee(((r,i)=>{n+=rv(i)})).next((()=>{const r={byteSize:n};return e.store(yp).put(XE,r)}))}gi(e){const n=e.store(pp),r=e.store(Fo);return n.H().next((i=>Ce.forEach(i,(a=>{const l=IDBKeyRange.bound([a.userId,jc],[a.userId,a.lastAcknowledgedBatchId]);return r.H(Ff,l).next((f=>Ce.forEach(f,(m=>{Nt(m.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const p=jf(this.serializer,m);return k9(e,a.userId,p).next((()=>{}))}))))}))))}yi(e){const n=e.store(Kh),r=e.store(Nf);return e.store(Kf).get(Qy).next((i=>{const a=[];return r.ee(((l,f)=>{const m=new Sn(l),p=(function(_){return[0,ns(_)]})(m);a.push(n.get(p).next((b=>b?Ce.resolve():(_=>n.put({targetId:0,path:ns(_),sequenceNumber:i.highestListenSequenceNumber}))(m))))})).next((()=>Ce.waitFor(a)))}))}wi(e,n){e.createObjectStore(vp,{keyPath:F$});const r=n.store(vp),i=new hT,a=l=>{if(i.add(l)){const f=l.lastSegment(),m=l.popLast();return r.put({collectionId:f,parent:ns(m)})}};return n.store(Nf).ee({Y:!0},((l,f)=>{const m=new Sn(l);return a(m.popLast())})).next((()=>n.store(Gh).ee({Y:!0},(([l,f,m],p)=>{const b=xl(f);return a(b.popLast())}))))}bi(e){const n=e.store(Hh);return n.ee(((r,i)=>{const a=Yg(i),l=N9(this.serializer,a);return n.put(l)}))}Si(e,n){const r=n.store(Nf),i=[];return r.ee(((a,l)=>{const f=n.store(Xy),m=(function(_){return _.document?new gt(Sn.fromString(_.document.name).popFirst(5)):_.noDocument?gt.fromSegments(_.noDocument.path):_.unknownDocument?gt.fromSegments(_.unknownDocument.path):Et(36783)})(l).path.toArray(),p={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(p))})).next((()=>Ce.waitFor(i)))}Di(e,n){const r=n.store(Fo),i=z9(this.serializer),a=new gT(Vx.Vi,this.serializer.yt);return r.H().next((l=>{const f=new Map;return l.forEach((m=>{let p=f.get(m.userId)??on();jf(this.serializer,m).keys().forEach((b=>p=p.add(b))),f.set(m.userId,p)})),Ce.forEach(f,((m,p)=>{const b=new ma(p),_=Bx.wt(this.serializer,b),T=a.getIndexManager(b),R=Fx.wt(b,this.serializer,T,a.referenceDelegate);return new U9(i,R,_,T).recalculateAndSaveOverlaysForDocumentKeys(new JE(n,Ps.ce),m).next()}))}))}}function HP(t){t.createObjectStore(Kh,{keyPath:L$}).createIndex(XS,B$,{unique:!0}),t.createObjectStore(Hh,{keyPath:"targetId"}).createIndex(_j,j$,{unique:!0}),t.createObjectStore(Kf)}const mc="IndexedDbPersistence",$_=18e5,Y_=5e3,X_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",q9="main";class pT{constructor(e,n,r,i,a,l,f,m,p,b,_=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ci=a,this.window=l,this.document=f,this.Fi=p,this.Mi=b,this.xi=_,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=T=>Promise.resolve(),!pT.v())throw new Ye(ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oX(this,i),this.Ki=n+q9,this.serializer=new O9(m),this.qi=new El(this.Ki,this.xi,new xX(this.serializer)),this.ci=new XY,this.li=new iX(this.referenceDelegate,this.serializer),this.remoteDocumentCache=z9(this.serializer),this.Pi=new YY,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,b===!1&&Si(mc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ye(ke.FAILED_PRECONDITION,X_);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new Ps(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>H1(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((n=>{n||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((n=>this.isPrimary&&!n?this.Ji(e).next((()=>!1)):!!n&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(tf(e))return nt(mc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return nt(mc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Rg(e).get(oh).next((n=>Ce.resolve(this.Xi(n))))}Yi(e){return H1(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,$_)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Qi(n,Wh);return r.H().next((i=>{const a=this.ns(i,$_),l=i.filter((f=>a.indexOf(f)===-1));return Ce.forEach(l,(f=>r.delete(f.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ui)for(const n of e)this.Ui.removeItem(this.rs(n.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?Ce.resolve(!0):Rg(e).get(oh).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,Y_)&&!this.ss(n.ownerId)){if(this.Xi(n)&&this.networkEnabled)return!0;if(!this.Xi(n)){if(!n.allowTabSynchronization)throw new Ye(ke.FAILED_PRECONDITION,X_);return!1}}return!(!this.networkEnabled||!this.inForeground)||H1(e).H().next((r=>this.ns(r,Y_).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(a||l&&f)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&nt(mc,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Zp,Wh],(e=>{const n=new JE(e,Ps.ce);return this.Ji(n).next((()=>this.Yi(n)))})),this.qi.close(),this.ls()}ns(e,n){return e.filter((r=>this.ts(r.updateTimeMs,n)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>H1(e).H().next((n=>this.ns(n,$_).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,n){return Fx.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new rX(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Bx.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,n,r){nt(mc,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(function(m){return m===18?tY:m===17?Oj:m===16?eY:m===15?JS:m===14?Cj:m===13?Ij:m===12?J$:m===11?Tj:void Et(60245)})(this.xi);let l;return this.qi.runTransaction(e,i,a,(f=>(l=new JE(f,this.ai?this.ai.next():Ps.ce),n==="readwrite-primary"?this.ji(l).next((m=>!!m||this.Hi(l))).next((m=>{if(!m)throw Si(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new Ye(ke.FAILED_PRECONDITION,pj);return r(l)})).next((m=>this.Zi(l).next((()=>m)))):this.Ps(l).next((()=>r(l)))))).then((f=>(l.raiseOnCommittedEvent(),f)))}Ps(e){return Rg(e).get(oh).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,Y_)&&!this.ss(n.ownerId)&&!this.Xi(n)&&!(this.Mi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Ye(ke.FAILED_PRECONDITION,X_)}))}Zi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rg(e).put(oh,n)}static v(){return El.v()}Ji(e){const n=Rg(e);return n.get(oh).next((r=>this.Xi(r)?(nt(mc,"Releasing primary lease."),n.delete(oh)):Ce.resolve()))}ts(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Si(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;K5()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const n=this.Ui?.getItem(this.rs(e))!==null;return nt(mc,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Si(mc,"Failed to get zombied client id.",n),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Si("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rg(t){return Qi(t,Zp)}function H1(t){return Qi(t,Wh)}function yT(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class vT{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=on(),i=on();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new vT(e,n.fromCache,r,i)}}class bX{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class G9{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return K5()?8:vj($i())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.gs(e,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ps(e,n,i,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new bX;return this.ys(e,n,l).next((f=>{if(a.result=f,this.As)return this.ws(e,n,l,f.size)}))})).next((()=>a.result))}ws(e,n,r,i){return r.documentReadCount<this.Vs?(vh()<=Dn.DEBUG&&nt("QueryEngine","SDK will not create cache indexes for query:",xh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ce.resolve()):(vh()<=Dn.DEBUG&&nt("QueryEngine","Query:",xh(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(vh()<=Dn.DEBUG&&nt("QueryEngine","The SDK decides to create cache indexes for query:",xh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rs(n))):Ce.resolve())}gs(e,n){if(gP(n))return Ce.resolve(null);let r=rs(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=ev(n,null,"F"),r=rs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=on(...a);return this.fs.getDocuments(e,l).next((f=>this.indexManager.getMinOffset(e,r).next((m=>{const p=this.bs(n,f);return this.Ss(n,p,l,m.readTime)?this.gs(e,ev(n,null,"F")):this.Ds(e,p,n,m)}))))})))))}ps(e,n,r,i){return gP(n)||i.isEqual(jt.min())?Ce.resolve(null):this.fs.getDocuments(e,r).next((a=>{const l=this.bs(n,a);return this.Ss(n,l,r,i)?Ce.resolve(null):(vh()<=Dn.DEBUG&&nt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xh(n)),this.Ds(e,l,n,mj(i,zh)).next((f=>f)))}))}bs(e,n){let r=new dr(Jj(e));return n.forEach(((i,a)=>{t0(e,a)&&(r=r.add(a))})),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ys(e,n,r){return vh()<=Dn.DEBUG&&nt("QueryEngine","Using full collection scan to execute query:",xh(n)),this.fs.getDocumentsMatchingQuery(e,n,ao.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}const xT="LocalStore",wX=3e8;class _X{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new jr(Kt),this.Fs=new Du((a=>ed(a)),Jp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U9(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function H9(t,e,n,r){return new _X(t,e,n,r)}async function K9(t,e){const n=yt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],f=[];let m=on();for(const p of i){l.push(p.batchId);for(const b of p.mutations)m=m.add(b.key)}for(const p of a){f.push(p.batchId);for(const b of p.mutations)m=m.add(b.key)}return n.localDocuments.getDocuments(r,m).next((p=>({Ns:p,removedBatchIds:l,addedBatchIds:f})))}))}))}function EX(t,e){const n=yt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,p,b){const _=p.batch,T=_.keys();let R=Ce.resolve();return T.forEach((j=>{R=R.next((()=>b.getEntry(m,j))).next((M=>{const L=p.docVersions.get(j);Nt(L!==null,48541),M.version.compareTo(L)<0&&(_.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),b.addEntry(M)))}))})),R.next((()=>f.mutationQueue.removeMutationBatch(m,_)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let m=on();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(m=m.add(f.batch.mutations[p].key));return m})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function W9(t){const e=yt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function AX(t,e){const n=yt(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const f=[];e.targetChanges.forEach(((b,_)=>{const T=i.get(_);if(!T)return;f.push(n.li.removeMatchingKeys(a,b.removedDocuments,_).next((()=>n.li.addMatchingKeys(a,b.addedDocuments,_))));let R=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(_)!==null?R=R.withResumeToken(oi.EMPTY_BYTE_STRING,jt.min()).withLastLimboFreeSnapshotVersion(jt.min()):b.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(b.resumeToken,r)),i=i.insert(_,R),(function(M,L,z){return M.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=wX?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(T,R,b)&&f.push(n.li.updateTargetData(a,R))}));let m=ks(),p=on();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(a,b))})),f.push($9(a,l,e.documentUpdates).next((b=>{m=b.Bs,p=b.Ls}))),!r.isEqual(jt.min())){const b=n.li.getLastRemoteSnapshotVersion(a).next((_=>n.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));f.push(b)}return Ce.waitFor(f).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,m,p))).next((()=>m))})).then((a=>(n.vs=i,a)))}function $9(t,e,n){let r=on(),i=on();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let l=ks();return n.forEach(((f,m)=>{const p=a.get(f);m.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(jt.min())?(e.removeEntry(f,m.readTime),l=l.insert(f,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),l=l.insert(f,m)):nt(xT,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",m.version)})),{Bs:l,Ls:i}}))}function SX(t,e){const n=yt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=jc),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function em(t,e){const n=yt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.li.getTargetData(r,e).next((a=>a?(i=a,Ce.resolve(i)):n.li.allocateTargetId(r).next((l=>(i=new ou(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function tm(t,e,n){const r=yt(t),i=r.vs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!tf(l))throw l;nt(xT,`Failed to update sequence numbers for target ${e}: ${l}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function av(t,e,n){const r=yt(t);let i=jt.min(),a=on();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(m,p,b){const _=yt(m),T=_.Fs.get(b);return T!==void 0?Ce.resolve(_.vs.get(T)):_.li.getTargetData(p,b)})(r,l,rs(e)).next((f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(l,f.targetId).next((m=>{a=m}))})).next((()=>r.Cs.getDocumentsMatchingQuery(l,e,n?i:jt.min(),n?a:on()))).next((f=>(Q9(r,Zj(e),f),{documents:f,ks:a})))))}function Y9(t,e){const n=yt(t),r=yt(n.li),i=n.vs.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,e).next((l=>l?l.target:null))))}function X9(t,e){const n=yt(t),r=n.Ms.get(e)||jt.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.xs.getAllFromCollectionGroup(i,e,mj(r,zh),Number.MAX_SAFE_INTEGER))).then((i=>(Q9(n,e,i),i)))}function Q9(t,e,n){let r=t.Ms.get(e)||jt.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Ms.set(e,r)}async function TX(t,e,n,r){const i=yt(t);let a=on(),l=ks();for(const p of n){const b=e.Ks(p.metadata.name);p.document&&(a=a.add(b));const _=e.qs(p);_.setReadTime(e.Us(p.metadata.readTime)),l=l.insert(b,_)}const f=i.xs.newChangeBuffer({trackRemovals:!0}),m=await em(i,(function(b){return rs(_m(Sn.fromString(`__bundle__/docs/${b}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(p=>$9(p,f,l).next((b=>(f.apply(p),b))).next((b=>i.li.removeMatchingKeysForTargetId(p,m.targetId).next((()=>i.li.addMatchingKeys(p,a,m.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(p,b.Bs,b.Ls))).next((()=>b.Bs))))))}async function IX(t,e,n=on()){const r=await em(t,rs(Lx(e.bundledQuery))),i=yt(t);return i.persistence.runTransaction("Save named query","readwrite",(a=>{const l=Ci(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Pi.saveNamedQuery(a,e);const f=r.withResumeToken(oi.EMPTY_BYTE_STRING,l);return i.vs=i.vs.insert(f.targetId,f),i.li.updateTargetData(a,f).next((()=>i.li.removeMatchingKeysForTargetId(a,r.targetId))).next((()=>i.li.addMatchingKeys(a,n,r.targetId))).next((()=>i.Pi.saveNamedQuery(a,e)))}))}const Z9="firestore_clients";function KP(t,e){return`${Z9}_${t}_${e}`}const J9="firestore_mutations";function WP(t,e,n){let r=`${J9}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const e7="firestore_targets";function Q_(t,e){return`${e7}_${t}_${e}`}const gl="SharedClientState";class sv{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static $s(e,n,r){const i=JSON.parse(r);let a,l=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new Ye(i.error.code,i.error.message))),l?new sv(e,n,i.state,a):(Si(gl,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lp{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static $s(e,n){const r=JSON.parse(n);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new Ye(r.error.code,r.error.message))),a?new lp(e,r.state,i):(Si(gl,`Failed to parse target state for ID '${e}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ov{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static $s(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=iT();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=xj(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new ov(e,a):(Si(gl,`Failed to parse client data for instance '${e}': ${n}`),null)}}class bT{constructor(e,n){this.clientId=e,this.onlineState=n}static $s(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new bT(n.clientId,n.onlineState):(Si(gl,`Failed to parse online state: ${e}`),null)}}class mA{constructor(){this.activeTargetIds=iT()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Z_{constructor(e,n,r,i,a){this.window=e,this.Ci=n,this.persistenceKey=r,this.zs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new jr(Kt),this.started=!1,this.Zs=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Xs=KP(this.persistenceKey,this.zs),this.Ys=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new mA),this.eo=new RegExp(`^${Z9}_${l}_([^_]*)$`),this.no=new RegExp(`^${J9}_${l}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${e7}_${l}_(\\d+)$`),this.io=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this.so=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const i=this.getItem(KP(this.persistenceKey,r));if(i){const a=ov.$s(r,i);a&&(this.Js=this.Js.insert(a.clientId,a))}}this.oo();const n=this.storage.getItem(this.io);if(n){const r=this._o(n);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let n=!1;return this.Js.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,n,r){this.co(e,n,r),this.lo(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Q_(this.persistenceKey,e));if(i){const a=lp.$s(e,i);a&&(r=a.state)}}return n&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Q_(this.persistenceKey,e))}updateQueryState(e,n,r){this.Po(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.lo(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return nt(gl,"READ",e,n),n}setItem(e,n){nt(gl,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){nt(gl,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const n=e;if(n.storageArea===this.storage){if(nt(gl,"EVENT",n.key,n.newValue),n.key===this.Xs)return void Si("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.eo.test(n.key)){if(n.newValue==null){const r=this.Eo(n.key);return this.Ro(r,null)}{const r=this.Ao(n.key,n.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(n.key)){if(n.newValue!==null){const r=this.Vo(n.key,n.newValue);if(r)return this.mo(r)}}else if(this.ro.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(n.key===this.io){if(n.newValue!==null){const r=this._o(n.newValue);if(r)return this.ao(r)}}else if(n.key===this.Ys){const r=(function(a){let l=Ps.ce;if(a!=null)try{const f=JSON.parse(a);Nt(typeof f=="number",30636,{yo:a}),l=f}catch(f){Si(gl,"Failed to read sequence number from WebStorage",f)}return l})(n.newValue);r!==Ps.ce&&this.sequenceNumberHandler(r)}else if(n.key===this.so){const r=this.wo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.bo(i))))}}}else this.Zs.push(n)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,n,r){const i=new sv(this.currentUser,e,n,r),a=WP(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Ws())}lo(e){const n=WP(this.persistenceKey,this.currentUser,e);this.removeItem(n)}To(e){const n={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(n))}Po(e,n,r){const i=Q_(this.persistenceKey,e),a=new lp(e,n,r);this.setItem(i,a.Ws())}Io(e){const n=JSON.stringify(Array.from(e));this.setItem(this.so,n)}Eo(e){const n=this.eo.exec(e);return n?n[1]:null}Ao(e,n){const r=this.Eo(e);return ov.$s(r,n)}Vo(e,n){const r=this.no.exec(e),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return sv.$s(new ma(a),i,n)}fo(e,n){const r=this.ro.exec(e),i=Number(r[1]);return lp.$s(i,n)}_o(e){return bT.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);nt(gl,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,n){const r=n?this.Js.insert(e,n):this.Js.remove(e),i=this.uo(this.Js),a=this.uo(r),l=[],f=[];return a.forEach((m=>{i.has(m)||l.push(m)})),i.forEach((m=>{a.has(m)||f.push(m)})),this.syncEngine.Co(l,f).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let n=iT();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class t7{constructor(){this.vo=new mA,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new mA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class CX{Mo(e){}shutdown(){}}const $P="ConnectivityMonitor";class YP{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){nt($P,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){nt($P,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let K1=null;function gA(){return K1===null?K1=(function(){return 268435456+Math.round(2147483648*Math.random())})():K1++,"0x"+K1.toString(16)}const J_="RestConnection",OX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class NX{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===bp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const l=gA(),f=this.Qo(e,n.toUriEncodedString());nt(J_,`Sending RPC '${e}' ${l}:`,f,r);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,i,a);const{host:p}=new URL(f),b=wd(p);return this.zo(e,f,m,r,b).then((_=>(nt(J_,`Received RPC '${e}' ${l}: `,_),_)),(_=>{throw Fs(J_,`RPC '${e}' ${l} failed with error: `,_,"url: ",f,"request:",r),_}))}jo(e,n,r,i,a,l){return this.Wo(e,n,r,i,a)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+wm})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}Qo(e,n){const r=OX[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class RX{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Za="WebChannelConnection",Pg=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Oh extends NX{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Oh.c_){const e=aj();Pg(e,ij.STAT_EVENT,(n=>{n.stat===HE.PROXY?nt(Za,"STAT_EVENT: detected buffering proxy"):n.stat===HE.NOPROXY&&nt(Za,"STAT_EVENT: detected no buffering proxy")})),Oh.c_=!0}}zo(e,n,r,i,a){const l=gA();return new Promise(((f,m)=>{const p=new nj;p.setWithCredentials(!0),p.listenOnce(rj.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case vy.NO_ERROR:const _=p.getResponseJson();nt(Za,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),f(_);break;case vy.TIMEOUT:nt(Za,`RPC '${e}' ${l} timed out`),m(new Ye(ke.DEADLINE_EXCEEDED,"Request time out"));break;case vy.HTTP_ERROR:const T=p.getStatus();if(nt(Za,`RPC '${e}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const j=R?.error;if(j&&j.status&&j.message){const M=(function(z){const $=z.toLowerCase().replace(/_/g,"-");return Object.values(ke).indexOf($)>=0?$:ke.UNKNOWN})(j.status);m(new Ye(M,j.message))}else m(new Ye(ke.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new Ye(ke.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{nt(Za,`RPC '${e}' ${l} completed.`)}}));const b=JSON.stringify(i);nt(Za,`RPC '${e}' ${l} sending request:`,i),p.send(n,"POST",b,r,15)}))}T_(e,n,r){const i=gA(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const p=a.join("");nt(Za,`Creating RPC '${e}' stream ${i}: ${p}`,f);const b=l.createWebChannel(p,f);this.I_(b);let _=!1,T=!1;const R=new RX({Ho:j=>{T?nt(Za,`Not sending because RPC '${e}' stream ${i} is closed:`,j):(_||(nt(Za,`Opening RPC '${e}' stream ${i} transport.`),b.open(),_=!0),nt(Za,`RPC '${e}' stream ${i} sending:`,j),b.send(j))},Jo:()=>b.close()});return Pg(b,Kg.EventType.OPEN,(()=>{T||(nt(Za,`RPC '${e}' stream ${i} transport opened.`),R.i_())})),Pg(b,Kg.EventType.CLOSE,(()=>{T||(T=!0,nt(Za,`RPC '${e}' stream ${i} transport closed`),R.o_(),this.E_(b))})),Pg(b,Kg.EventType.ERROR,(j=>{T||(T=!0,Fs(Za,`RPC '${e}' stream ${i} transport errored. Name:`,j.name,"Message:",j.message),R.o_(new Ye(ke.UNAVAILABLE,"The operation could not be completed")))})),Pg(b,Kg.EventType.MESSAGE,(j=>{if(!T){const M=j.data[0];Nt(!!M,16349);const L=M,z=L?.error||L[0]?.error;if(z){nt(Za,`RPC '${e}' stream ${i} received error:`,z);const $=z.status;let K=(function(Z){const V=Fi[Z];if(V!==void 0)return h9(V)})($),J=z.message;$==="NOT_FOUND"&&J.includes("database")&&J.includes("does not exist")&&J.includes(this.databaseId.database)&&Fs(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),K===void 0&&(K=ke.INTERNAL,J="Unknown error status: "+$+" with message "+z.message),T=!0,R.o_(new Ye(K,J)),b.close()}else nt(Za,`RPC '${e}' stream ${i} received:`,M),R.__(M)}})),Oh.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return sj()}}function PX(t){return new Oh(t)}function n7(){return typeof window<"u"?window:null}function Iy(){return typeof document<"u"?document:null}function Ed(t){return new BY(t,!0)}Oh.c_=!1;class wT{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&nt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const XP="PersistentStream";class r7{constructor(e,n,r,i,a,l,f,m){this.Ci=e,this.b_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ke.RESOURCE_EXHAUSTED?(Si(n.toString()),Si("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ye(ke.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return nt(XP,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(nt(XP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class DX extends r7{constructor(e,n,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=zY(this.serializer,e),r=(function(a){if(!("targetChange"in a))return jt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?jt.min():l.readTime?Ci(l.readTime):jt.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=uA(this.serializer),n.addTarget=(function(a,l){let f;const m=l.target;if(f=Zy(m)?{documents:_9(a,m)}:{query:jx(a,m).ft},f.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){f.resumeToken=y9(a,l.resumeToken);const p=oA(a,l.expectedCount);p!==null&&(f.expectedCount=p)}else if(l.snapshotVersion.compareTo(jt.min())>0){f.readTime=Jh(a,l.snapshotVersion.toTimestamp());const p=oA(a,l.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const r=qY(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=uA(this.serializer),n.removeTarget=e,this.K_(n)}}class kX extends r7{constructor(e,n,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=UY(e.writeResults,e.commitTime),r=Ci(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=uA(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Sp(this.serializer,r)))};this.K_(n)}}class MX{}class jX extends MX{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ye(ke.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,lA(n,r),i,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ye(ke.UNKNOWN,a.toString())}))}jo(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,f])=>this.connection.jo(e,lA(n,r),i,l,f,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ye(ke.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function LX(t,e,n,r){return new jX(t,e,n,r)}class BX{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Si(n),this.aa=!1):nt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const sd="RemoteStore";class FX{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((l=>{r.enqueueAndForget((async()=>{rf(this)&&(nt(sd,"Restarting streams for network reachability change."),await(async function(m){const p=yt(m);p.Ea.add(4),await Sm(p),p.Va.set("Unknown"),p.Ea.delete(4),await a0(p)})(this))}))})),this.Va=new BX(r,i)}}async function a0(t){if(rf(t))for(const e of t.Ra)await e(!0)}async function Sm(t){for(const e of t.Ra)await e(!1)}function zx(t,e){const n=yt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),AT(n)?ET(n):Im(n).O_()&&_T(n,e))}function nm(t,e){const n=yt(t),r=Im(n);n.Ia.delete(e),r.O_()&&i7(n,e),n.Ia.size===0&&(r.O_()?r.L_():rf(n)&&n.Va.set("Unknown"))}function _T(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(jt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Im(t).Z_(e)}function i7(t,e){t.da.$e(e),Im(t).X_(e)}function ET(t){t.da=new kY({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Im(t).start(),t.Va.ua()}function AT(t){return rf(t)&&!Im(t).x_()&&t.Ia.size>0}function rf(t){return yt(t).Ea.size===0}function a7(t){t.da=void 0}async function VX(t){t.Va.set("Online")}async function zX(t){t.Ia.forEach(((e,n)=>{_T(t,e)}))}async function UX(t,e){a7(t),AT(t)?(t.Va.ha(e),ET(t)):t.Va.set("Unknown")}async function qX(t,e,n){if(t.Va.set("Online"),e instanceof p9&&e.state===2&&e.cause)try{await(async function(i,a){const l=a.cause;for(const f of a.targetIds)i.Ia.has(f)&&(await i.remoteSyncer.rejectListen(f,l),i.Ia.delete(f),i.da.removeTarget(f))})(t,e)}catch(r){nt(sd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lv(t,r)}else if(e instanceof Sy?t.da.Xe(e):e instanceof g9?t.da.st(e):t.da.tt(e),!n.isEqual(jt.min()))try{const r=await W9(t.localStore);n.compareTo(r)>=0&&await(function(a,l){const f=a.da.Tt(l);return f.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const b=a.Ia.get(p);b&&a.Ia.set(p,b.withResumeToken(m.resumeToken,l))}})),f.targetMismatches.forEach(((m,p)=>{const b=a.Ia.get(m);if(!b)return;a.Ia.set(m,b.withResumeToken(oi.EMPTY_BYTE_STRING,b.snapshotVersion)),i7(a,m);const _=new ou(b.target,m,p,b.sequenceNumber);_T(a,_)})),a.remoteSyncer.applyRemoteEvent(f)})(t,n)}catch(r){nt(sd,"Failed to raise snapshot:",r),await lv(t,r)}}async function lv(t,e,n){if(!tf(e))throw e;t.Ea.add(1),await Sm(t),t.Va.set("Offline"),n||(n=()=>W9(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{nt(sd,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await a0(t)}))}function s7(t,e){return e().catch((n=>lv(t,n,e)))}async function Tm(t){const e=yt(t),n=Kc(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jc;for(;GX(e);)try{const i=await SX(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,HX(e,i)}catch(i){await lv(e,i)}o7(e)&&l7(e)}function GX(t){return rf(t)&&t.Ta.length<10}function HX(t,e){t.Ta.push(e);const n=Kc(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function o7(t){return rf(t)&&!Kc(t).x_()&&t.Ta.length>0}function l7(t){Kc(t).start()}async function KX(t){Kc(t).ra()}async function WX(t){const e=Kc(t);for(const n of t.Ta)e.ea(n.mutations)}async function $X(t,e,n){const r=t.Ta.shift(),i=lT.from(r,e,n);await s7(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Tm(t)}async function YX(t,e){e&&Kc(t).Y_&&await(async function(r,i){if((function(l){return d9(l)&&l!==ke.ABORTED})(i.code)){const a=r.Ta.shift();Kc(r).B_(),await s7(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Tm(r)}})(t,e),o7(t)&&l7(t)}async function QP(t,e){const n=yt(t);n.asyncQueue.verifyOperationInProgress(),nt(sd,"RemoteStore received new credentials");const r=rf(n);n.Ea.add(3),await Sm(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await a0(n)}async function pA(t,e){const n=yt(t);e?(n.Ea.delete(2),await a0(n)):e||(n.Ea.add(2),await Sm(n),n.Va.set("Unknown"))}function Im(t){return t.ma||(t.ma=(function(n,r,i){const a=yt(n);return a.sa(),new DX(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:VX.bind(null,t),Yo:zX.bind(null,t),t_:UX.bind(null,t),J_:qX.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),AT(t)?ET(t):t.Va.set("Unknown")):(await t.ma.stop(),a7(t))}))),t.ma}function Kc(t){return t.fa||(t.fa=(function(n,r,i){const a=yt(n);return a.sa(),new kX(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:KX.bind(null,t),t_:YX.bind(null,t),ta:WX.bind(null,t),na:$X.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Tm(t)):(await t.fa.stop(),t.Ta.length>0&&(nt(sd,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class ST{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ya,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const l=Date.now()+r,f=new ST(e,n,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ye(ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cm(t,e){if(Si("AsyncQueue",`${e}: ${t}`),tf(t))return new Ye(ke.UNAVAILABLE,`${e}: ${t}`);throw t}class Wf{static emptySet(e){return new Wf(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||gt.comparator(n.key,r.key):(n,r)=>gt.comparator(n.key,r.key),this.keyedMap=Wg(),this.sortedSet=new jr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Wf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class ZP{constructor(){this.ga=new jr(gt.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Et(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class od{constructor(e,n,r,i,a,l,f,m,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,i,a){const l=[];return n.forEach((f=>{l.push({type:0,doc:f})})),new od(e,n,Wf.emptySet(n),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&e0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class XX{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class QX{constructor(){this.queries=JP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=yt(n),a=i.queries;i.queries=JP(),a.forEach(((l,f)=>{for(const m of f.ba)m.onError(r)}))})(this,new Ye(ke.ABORTED,"Firestore shutting down"))}}function JP(){return new Du((t=>Qj(t)),e0)}async function TT(t,e){const n=yt(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.Da()&&(r=2):(a=new XX,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(l){const f=Cm(l,`Initialization of query '${xh(e.query)}' failed`);return void e.onError(f)}n.queries.set(i,a),a.ba.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&CT(n)}async function IT(t,e){const n=yt(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const l=a.ba.indexOf(e);l>=0&&(a.ba.splice(l,1),a.ba.length===0?i=e.Da()?0:1:!a.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ZX(t,e){const n=yt(t);let r=!1;for(const i of e){const a=i.query,l=n.queries.get(a);if(l){for(const f of l.ba)f.Fa(i)&&(r=!0);l.wa=i}}r&&CT(n)}function JX(t,e,n){const r=yt(t),i=r.queries.get(e);if(i)for(const a of i.ba)a.onError(n);r.queries.delete(e)}function CT(t){t.Ca.forEach((e=>{e.next()}))}var yA,e4;(e4=yA||(yA={})).Ma="default",e4.Cache="cache";class OT{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new od(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=od.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yA.Cache}}class u7{constructor(e,n){this.qa=e,this.byteLength=n}Ua(){return"metadata"in this.qa}}class t4{constructor(e){this.serializer=e}Ks(e){return Al(this.serializer,e)}qs(e){return e.metadata.exists?Mx(this.serializer,e.document,!1):Ur.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Ci(e)}}class NT{constructor(e,n){this.$a=e,this.serializer=n,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=c7(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++n;const r=Sn.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new t4(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.Ks(i.metadata.name);for(const l of i.metadata.queries){const f=(n.get(l)||on()).add(a);n.set(l,f)}}return n}async ja(e){const n=await TX(e,new t4(this.serializer),this.Qa,this.$a.id),r=this.za(this.documents);for(const i of this.Wa)await IX(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:n}}}function c7(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class f7{constructor(e){this.key=e}}class d7{constructor(e){this.key=e}}class h7{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=on(),this.mutatedKeys=on(),this.eu=Jj(e),this.tu=new Wf(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new ZP,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,l=i,f=!1;const m=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((b,_)=>{const T=i.get(b),R=t0(this.query,_)?_:null,j=!!T&&this.mutatedKeys.has(T.key),M=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let L=!1;T&&R?T.data.isEqual(R.data)?j!==M&&(r.track({type:3,doc:R}),L=!0):this.su(T,R)||(r.track({type:2,doc:R}),L=!0,(m&&this.eu(R,m)>0||p&&this.eu(R,p)<0)&&(f=!0)):!T&&R?(r.track({type:0,doc:R}),L=!0):T&&!R&&(r.track({type:1,doc:T}),L=!0,(m||p)&&(f=!0)),L&&(R?(l=l.add(R),a=M?a.add(b):a.delete(b)):(l=l.delete(b),a=a.delete(b)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const b=this.query.limitType==="F"?l.last():l.first();l=l.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{tu:l,iu:r,Ss:f,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((b,_)=>(function(R,j){const M=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{Vt:L})}};return M(R)-M(j)})(b.type,_.type)||this.eu(b.doc,_.doc))),this.ou(r),i=i??!1;const f=n&&!i?this._u():[],m=this.Ya.size===0&&this.current&&!i?1:0,p=m!==this.Xa;return this.Xa=m,l.length!==0||p?{snapshot:new od(this.query,e.tu,a,l,e.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ZP,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=on(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new d7(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new f7(r))})),n}cu(e){this.Za=e.ks,this.Ya=on();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return od.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const af="SyncEngine";class eQ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class tQ{constructor(e){this.key=e,this.hu=!1}}class nQ{constructor(e,n,r,i,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Du((f=>Qj(f)),e0),this.Iu=new Map,this.Eu=new Set,this.Ru=new jr(gt.comparator),this.Au=new Map,this.Vu=new mT,this.du={},this.mu=new Map,this.fu=ad.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rQ(t,e,n=!0){const r=Ux(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await m7(r,e,n,!0),i}async function iQ(t,e){const n=Ux(t);await m7(n,e,!0,!1)}async function m7(t,e,n,r){const i=await em(t.localStore,rs(e)),a=i.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let f;return r&&(f=await RT(t,e,a,l==="current",i.resumeToken)),t.isPrimaryClient&&n&&zx(t.remoteStore,i),f}async function RT(t,e,n,r,i){t.pu=(_,T,R)=>(async function(M,L,z,$){let K=L.view.ru(z);K.Ss&&(K=await av(M.localStore,L.query,!1).then((({documents:V})=>L.view.ru(V,K))));const J=$&&$.targetChanges.get(L.targetId),ce=$&&$.targetMismatches.get(L.targetId)!=null,Z=L.view.applyChanges(K,M.isPrimaryClient,J,ce);return vA(M,L.targetId,Z.au),Z.snapshot})(t,_,T,R);const a=await av(t.localStore,e,!0),l=new h7(e,a.ks),f=l.ru(a.documents),m=i0.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),p=l.applyChanges(f,t.isPrimaryClient,m);vA(t,n,p.au);const b=new eQ(e,n,l);return t.Tu.set(e,b),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function aQ(t,e,n){const r=yt(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((l=>!e0(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await tm(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&nm(r.remoteStore,i.targetId),rm(r,i.targetId)})).catch(ef)):(rm(r,i.targetId),await tm(r.localStore,i.targetId,!0))}async function sQ(t,e){const n=yt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),nm(n.remoteStore,r.targetId))}async function oQ(t,e,n){const r=MT(t);try{const i=await(function(l,f){const m=yt(l),p=nr.now(),b=f.reduce(((R,j)=>R.add(j.key)),on());let _,T;return m.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let j=ks(),M=on();return m.xs.getEntries(R,b).next((L=>{j=L,j.forEach(((z,$)=>{$.isValidDocument()||(M=M.add(z))}))})).next((()=>m.localDocuments.getOverlayedDocuments(R,j))).next((L=>{_=L;const z=[];for(const $ of f){const K=NY($,_.get($.key).overlayedDocument);K!=null&&z.push(new ku($.key,K,Vj(K.value.mapValue),ei.exists(!0)))}return m.mutationQueue.addMutationBatch(R,p,z,f)})).next((L=>{T=L;const z=L.applyToLocalDocumentSet(_,M);return m.documentOverlayCache.saveOverlays(R,L.batchId,z)}))})).then((()=>({batchId:T.batchId,changes:t9(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,f,m){let p=l.du[l.currentUser.toKey()];p||(p=new jr(Kt)),p=p.insert(f,m),l.du[l.currentUser.toKey()]=p})(r,i.batchId,n),await Mu(r,i.changes),await Tm(r.remoteStore)}catch(i){const a=Cm(i,"Failed to persist write");n.reject(a)}}async function g7(t,e){const n=yt(t);try{const r=await AX(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const l=n.Au.get(a);l&&(Nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?Nt(l.hu,14607):i.removedDocuments.size>0&&(Nt(l.hu,42227),l.hu=!1))})),await Mu(n,r,e)}catch(r){await ef(r)}}function n4(t,e,n){const r=yt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,l)=>{const f=l.view.va(e);f.snapshot&&i.push(f.snapshot)})),(function(l,f){const m=yt(l);m.onlineState=f;let p=!1;m.queries.forEach(((b,_)=>{for(const T of _.ba)T.va(f)&&(p=!0)})),p&&CT(m)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lQ(t,e,n){const r=yt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let l=new jr(gt.comparator);l=l.insert(a,Ur.newNoDocument(a,jt.min()));const f=on().add(a),m=new r0(jt.min(),new Map,new jr(Kt),l,f);await g7(r,m),r.Ru=r.Ru.remove(a),r.Au.delete(e),kT(r)}else await tm(r.localStore,e,!1).then((()=>rm(r,e,n))).catch(ef)}async function uQ(t,e){const n=yt(t),r=e.batch.batchId;try{const i=await EX(n.localStore,e);DT(n,r,null),PT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mu(n,i)}catch(i){await ef(i)}}async function cQ(t,e,n){const r=yt(t);try{const i=await(function(l,f){const m=yt(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let b;return m.mutationQueue.lookupMutationBatch(p,f).next((_=>(Nt(_!==null,37113),b=_.keys(),m.mutationQueue.removeMutationBatch(p,_)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,b,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,b))).next((()=>m.localDocuments.getDocuments(p,b)))}))})(r.localStore,e);DT(r,e,n),PT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Mu(r,i)}catch(i){await ef(i)}}async function fQ(t,e){const n=yt(t);rf(n.remoteStore)||nt(af,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(l){const f=yt(l);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(m=>f.mutationQueue.getHighestUnacknowledgedBatchId(m)))})(n.localStore);if(r===jc)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=Cm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function PT(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function DT(t,e,n){const r=yt(t);let i=r.du[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function rm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||p7(t,r)}))}function p7(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(nm(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),kT(t))}function vA(t,e,n){for(const r of n)r instanceof f7?(t.Vu.addReference(r.key,e),dQ(t,r)):r instanceof d7?(nt(af,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||p7(t,r.key)):Et(19791,{wu:r})}function dQ(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(nt(af,"New document in limbo: "+n),t.Eu.add(r),kT(t))}function kT(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new gt(Sn.fromString(e)),r=t.fu.next();t.Au.set(r,new tQ(n)),t.Ru=t.Ru.insert(n,r),zx(t.remoteStore,new ou(rs(_m(n.path)),r,"TargetPurposeLimboResolution",Ps.ce))}}async function Mu(t,e,n){const r=yt(t),i=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((f,m)=>{l.push(r.pu(m,e,n).then((p=>{if((p||n)&&r.isPrimaryClient){const b=p?!p.fromCache:n?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,b?"current":"not-current")}if(p){i.push(p);const b=vT.Es(m.targetId,p);a.push(b)}})))})),await Promise.all(l),r.Pu.J_(i),await(async function(m,p){const b=yt(m);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>Ce.forEach(p,(T=>Ce.forEach(T.Ts,(R=>b.persistence.referenceDelegate.addReference(_,T.targetId,R))).next((()=>Ce.forEach(T.Is,(R=>b.persistence.referenceDelegate.removeReference(_,T.targetId,R)))))))))}catch(_){if(!tf(_))throw _;nt(xT,"Failed to update sequence numbers: "+_)}for(const _ of p){const T=_.targetId;if(!_.fromCache){const R=b.vs.get(T),j=R.snapshotVersion,M=R.withLastLimboFreeSnapshotVersion(j);b.vs=b.vs.insert(T,M)}}})(r.localStore,a))}async function hQ(t,e){const n=yt(t);if(!n.currentUser.isEqual(e)){nt(af,"User change. New user:",e.toKey());const r=await K9(n.localStore,e);n.currentUser=e,(function(a,l){a.mu.forEach((f=>{f.forEach((m=>{m.reject(new Ye(ke.CANCELLED,l))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Mu(n,r.Ns)}}function mQ(t,e){const n=yt(t),r=n.Au.get(e);if(r&&r.hu)return on().add(r.key);{let i=on();const a=n.Iu.get(e);if(!a)return i;for(const l of a){const f=n.Tu.get(l);i=i.unionWith(f.view.nu)}return i}}async function gQ(t,e){const n=yt(t),r=await av(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&vA(n,e.targetId,i.au),i}async function pQ(t,e){const n=yt(t);return X9(n.localStore,e).then((r=>Mu(n,r)))}async function yQ(t,e,n,r){const i=yt(t),a=await(function(f,m){const p=yt(f),b=yt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(_=>b.Xn(_,m).next((T=>T?p.localDocuments.getDocuments(_,T):Ce.resolve(null)))))})(i.localStore,e);a!==null?(n==="pending"?await Tm(i.remoteStore):n==="acknowledged"||n==="rejected"?(DT(i,e,r||null),PT(i,e),(function(f,m){yt(yt(f).mutationQueue).nr(m)})(i.localStore,e)):Et(6720,"Unknown batchState",{bu:n}),await Mu(i,a)):nt(af,"Cannot apply mutation batch with id: "+e)}async function vQ(t,e){const n=yt(t);if(Ux(n),MT(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await r4(n,r.toArray());n.gu=!0,await pA(n.remoteStore,!0);for(const a of i)zx(n.remoteStore,a)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((a,l)=>{n.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then((()=>(rm(n,l),tm(n.localStore,l,!0)))),nm(n.remoteStore,l)})),await i,await r4(n,r),(function(l){const f=yt(l);f.Au.forEach(((m,p)=>{nm(f.remoteStore,p)})),f.Vu.zr(),f.Au=new Map,f.Ru=new jr(gt.comparator)})(n),n.gu=!1,await pA(n.remoteStore,!1)}}async function r4(t,e,n){const r=yt(t),i=[],a=[];for(const l of e){let f;const m=r.Iu.get(l);if(m&&m.length!==0){f=await em(r.localStore,rs(m[0]));for(const p of m){const b=r.Tu.get(p),_=await gQ(r,b);_.snapshot&&a.push(_.snapshot)}}else{const p=await Y9(r.localStore,l);f=await em(r.localStore,p),await RT(r,y7(p),l,!1,f.resumeToken)}i.push(f)}return r.Pu.J_(a),i}function y7(t){return $j(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function xQ(t){return(function(n){return yt(yt(n).persistence).hs()})(yt(t).localStore)}async function bQ(t,e,n,r){const i=yt(t);if(i.gu)return void nt(af,"Ignoring unexpected query state notification.");const a=i.Iu.get(e);if(a&&a.length>0)switch(n){case"current":case"not-current":{const l=await X9(i.localStore,Zj(a[0])),f=r0.createSynthesizedRemoteEventForCurrentChange(e,n==="current",oi.EMPTY_BYTE_STRING);await Mu(i,l,f);break}case"rejected":await tm(i.localStore,e,!0),rm(i,e,r);break;default:Et(64155,n)}}async function wQ(t,e,n){const r=Ux(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){nt(af,"Adding an already active target "+i);continue}const a=await Y9(r.localStore,i),l=await em(r.localStore,a);await RT(r,y7(a),l.targetId,!1,l.resumeToken),zx(r.remoteStore,l)}for(const i of n)r.Iu.has(i)&&await tm(r.localStore,i,!1).then((()=>{nm(r.remoteStore,i),rm(r,i)})).catch(ef)}}function Ux(t){const e=yt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=g7.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lQ.bind(null,e),e.Pu.J_=ZX.bind(null,e.eventManager),e.Pu.yu=JX.bind(null,e.eventManager),e}function MT(t){const e=yt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cQ.bind(null,e),e}function _Q(t,e,n){const r=yt(t);(async function(a,l,f){try{const m=await l.getMetadata();if(await(function(R,j){const M=yt(R),L=Ci(j.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",(z=>M.Pi.getBundleMetadata(z,j.id))).then((z=>!!z&&z.createTime.compareTo(L)>=0))})(a.localStore,m))return await l.close(),f._completeWith((function(R){return{taskState:"Success",documentsLoaded:R.totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}})(m)),Promise.resolve(new Set);f._updateProgress(c7(m));const p=new NT(m,l.serializer);let b=await l.Su();for(;b;){const T=await p.Ga(b);T&&f._updateProgress(T),b=await l.Su()}const _=await p.ja(a.localStore);return await Mu(a,_.Ja,void 0),await(function(R,j){const M=yt(R);return M.persistence.runTransaction("Save bundle","readwrite",(L=>M.Pi.saveBundleMetadata(L,j)))})(a.localStore,m),f._completeWith(_.progress),Promise.resolve(_.Ha)}catch(m){return Fs(af,`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}})(r,e,n).then((i=>{r.sharedClientState.notifyBundleLoaded(i)}))}class im{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ed(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return H9(this.persistence,new G9,e.initialUser,this.serializer)}Cu(e){return new gT(Vx.Vi,this.serializer)}Du(e){return new t7}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}im.provider={build:()=>new im};class jT extends im{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Nt(this.persistence.referenceDelegate instanceof iv,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new B9(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?es.withCacheSize(this.cacheSizeBytes):es.DEFAULT;return new gT((r=>iv.Vi(r,n)),this.serializer)}}class LT extends im{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await MT(this.xu.syncEngine),await Tm(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return H9(this.persistence,new G9,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new B9(r,e.asyncQueue,n)}Mu(e,n){const r=new O$(n,this.persistence);return new C$(e.asyncQueue,r)}Cu(e){const n=yT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?es.withCacheSize(this.cacheSizeBytes):es.DEFAULT;return new pT(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,n7(),Iy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new t7}}class v7 extends LT{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Z_&&(this.sharedClientState.syncEngine={So:yQ.bind(null,n),Do:bQ.bind(null,n),Co:wQ.bind(null,n),hs:xQ.bind(null,n),bo:pQ.bind(null,n)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await vQ(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=n7();if(!Z_.v(n))throw new Ye(ke.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=yT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Z_(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Wc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>n4(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hQ.bind(null,this.syncEngine),await pA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new QX})()}createDatastore(e){const n=Ed(e.databaseInfo.databaseId),r=PX(e.databaseInfo);return LX(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,l,f){return new FX(r,i,a,l,f)})(this.localStore,this.datastore,e.asyncQueue,(n=>n4(this.syncEngine,n,0)),(function(){return YP.v()?new YP:new CX})())}createSyncEngine(e,n){return(function(i,a,l,f,m,p,b){const _=new nQ(i,a,l,f,m,p);return b&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=yt(n);nt(sd,"RemoteStore shutting down."),r.Ea.add(5),await Sm(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Wc.provider={build:()=>new Wc};function i4(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class qx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Si("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class EQ{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new ya,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.Ua()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.qu(`length string (${n}) is not valid number`);const i=await this.Uu(r);return new u7(JSON.parse(i),e.length+r)}$u(){return this.buffer.findIndex((e=>e===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Wu(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}class AQ{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.Su();if(!r||!r.Ua())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r?.qa)}`);this.metadata=r;do r=this.Su(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Qu(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;const e=this.Ku(),n=this.Uu(e);return new u7(JSON.parse(n),e)}Uu(e){if(this.cursor+e>this.bundleData.length)throw new Ye(ke.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}Ku(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}let SQ=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ye(ke.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(i,a){const l=yt(i),f={documents:a.map((_=>Ap(l.serializer,_)))},m=await l.jo("BatchGetDocuments",l.serializer.databaseId,Sn.emptyPath(),f,a.length),p=new Map;m.forEach((_=>{const T=VY(l.serializer,_);p.set(T.key.toString(),T)}));const b=[];return a.forEach((_=>{const T=p.get(_.toString());Nt(!!T,55234,{key:_}),b.push(T)})),b})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Am(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const i=gt.fromPath(r);this.mutations.push(new sT(i,this.precondition(i)))})),await(async function(r,i){const a=yt(r),l={writes:i.map((f=>Sp(a.serializer,f)))};await a.Wo("Commit",a.serializer.databaseId,Sn.emptyPath(),l)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Et(50498,{Gu:e.constructor.name});n=jt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Ye(ke.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(jt.min())?ei.exists(!1):ei.updateTime(n):ei.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(jt.min()))throw new Ye(ke.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ei.updateTime(n)}return ei.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};class TQ{constructor(e,n,r,i,a){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.zu=r.maxAttempts,this.M_=new wT(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new SQ(this.datastore),n=this.Ju(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Zu(i)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const n=this.updateFunction(e);return!Qp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!d9(n)}return!1}}const $c="FirestoreClient";class IQ{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=ma.UNAUTHENTICATED,this.clientId=Ax.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{nt($c,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(nt($c,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ya;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Cm(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function e2(t,e){t.asyncQueue.verifyOperationInProgress(),nt($c,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await K9(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function a4(t,e){t.asyncQueue.verifyOperationInProgress();const n=await BT(t);nt($c,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>QP(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>QP(e.remoteStore,i))),t._onlineComponents=e}async function BT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){nt($c,"Using user provided OfflineComponentProvider");try{await e2(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ke.FAILED_PRECONDITION||i.code===ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Fs("Error using user provided cache. Falling back to memory cache: "+n),await e2(t,new im)}}else nt($c,"Using default OfflineComponentProvider"),await e2(t,new jT(void 0));return t._offlineComponents}async function Gx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(nt($c,"Using user provided OnlineComponentProvider"),await a4(t,t._uninitializedComponentsProvider._online)):(nt($c,"Using default OnlineComponentProvider"),await a4(t,new Wc))),t._onlineComponents}function x7(t){return BT(t).then((e=>e.persistence))}function Om(t){return BT(t).then((e=>e.localStore))}function b7(t){return Gx(t).then((e=>e.remoteStore))}function FT(t){return Gx(t).then((e=>e.syncEngine))}function w7(t){return Gx(t).then((e=>e.datastore))}async function am(t){const e=await Gx(t),n=e.eventManager;return n.onListen=rQ.bind(null,e.syncEngine),n.onUnlisten=aQ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iQ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sQ.bind(null,e.syncEngine),n}function CQ(t){return t.asyncQueue.enqueue((async()=>{const e=await x7(t),n=await b7(t);return e.setNetworkEnabled(!0),(function(i){const a=yt(i);return a.Ea.delete(0),a0(a)})(n)}))}function OQ(t){return t.asyncQueue.enqueue((async()=>{const e=await x7(t),n=await b7(t);return e.setNetworkEnabled(!1),(async function(i){const a=yt(i);a.Ea.add(0),await Sm(a),a.Va.set("Offline")})(n)}))}function NQ(t,e,n,r){const i=new qx(r),a=new OT(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>TT(await am(t),a))),()=>{i.Nu(),t.asyncQueue.enqueueAndForget((async()=>IT(await am(t),a)))}}function RQ(t,e){const n=new ya;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,a,l){try{const f=await(function(p,b){const _=yt(p);return _.persistence.runTransaction("read document","readonly",(T=>_.localDocuments.getDocument(T,b)))})(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new Ye(ke.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Cm(f,`Failed to get document '${a} from cache`);l.reject(m)}})(await Om(t),e,n))),n.promise}function _7(t,e,n={}){const r=new ya;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,f,m,p){const b=new qx({next:T=>{b.Nu(),l.enqueueAndForget((()=>IT(a,_)));const R=T.docs.has(f);!R&&T.fromCache?p.reject(new Ye(ke.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&m&&m.source==="server"?p.reject(new Ye(ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),_=new OT(_m(f.path),b,{includeMetadataChanges:!0,Ka:!0});return TT(a,_)})(await am(t),t.asyncQueue,e,n,r))),r.promise}function PQ(t,e){const n=new ya;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,a,l){try{const f=await av(i,a,!0),m=new h7(a,f.ks),p=m.ru(f.documents),b=m.applyChanges(p,!1);l.resolve(b.snapshot)}catch(f){const m=Cm(f,`Failed to execute query '${a} against cache`);l.reject(m)}})(await Om(t),e,n))),n.promise}function E7(t,e,n={}){const r=new ya;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,f,m,p){const b=new qx({next:T=>{b.Nu(),l.enqueueAndForget((()=>IT(a,_))),T.fromCache&&m.source==="server"?p.reject(new Ye(ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),_=new OT(f,b,{includeMetadataChanges:!0,Ka:!0});return TT(a,_)})(await am(t),t.asyncQueue,e,n,r))),r.promise}function DQ(t,e,n){const r=new ya;return t.asyncQueue.enqueueAndForget((async()=>{try{const i=await w7(t);r.resolve((async function(l,f,m){const p=yt(l),{request:b,gt:_,parent:T}=E9(p.serializer,Yj(f),m);p.connection.Ko||delete b.parent;const R=(await p.jo("RunAggregationQuery",p.serializer.databaseId,T,b,1)).filter((M=>!!M.result));Nt(R.length===1,64727);const j=R[0].result?.aggregateFields;return Object.keys(j).reduce(((M,L)=>(M[_[L]]=j[L],M)),{})})(i,e,n))}catch(i){r.reject(i)}})),r.promise}function kQ(t,e){const n=new ya;return t.asyncQueue.enqueueAndForget((async()=>oQ(await FT(t),e,n))),n.promise}function MQ(t,e){const n=new qx(e);return t.asyncQueue.enqueueAndForget((async()=>(function(i,a){yt(i).Ca.add(a),a.next()})(await am(t),n))),()=>{n.Nu(),t.asyncQueue.enqueueAndForget((async()=>(function(i,a){yt(i).Ca.delete(a)})(await am(t),n)))}}function jQ(t,e,n){const r=new ya;return t.asyncQueue.enqueueAndForget((async()=>{const i=await w7(t);new TQ(t.asyncQueue,i,n,e,r).ju()})),r.promise}function LQ(t,e,n,r){const i=(function(l,f){let m;return m=typeof l=="string"?m9().encode(l):l,(function(b,_){return new EQ(b,_)})((function(b,_){if(b instanceof Uint8Array)return i4(b,_);if(b instanceof ArrayBuffer)return i4(new Uint8Array(b),_);if(b instanceof ReadableStream)return b.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(m),f)})(n,Ed(e));t.asyncQueue.enqueueAndForget((async()=>{_Q(await FT(t),i,r)}))}function BQ(t,e){return t.asyncQueue.enqueue((async()=>(function(r,i){const a=yt(r);return a.persistence.runTransaction("Get named query","readonly",(l=>a.Pi.getNamedQuery(l,i)))})(await Om(t),e)))}function A7(t,e){return(function(r,i){return new AQ(r,i)})(t,e)}function FQ(t,e){return t.asyncQueue.enqueue((async()=>(async function(r,i){const a=yt(r),l=a.indexManager,f=[];return a.persistence.runTransaction("Configure indexes","readwrite",(m=>l.getFieldIndexes(m).next((p=>(function(_,T,R,j,M){_=[..._],T=[...T],_.sort(R),T.sort(R);const L=_.length,z=T.length;let $=0,K=0;for(;$<z&&K<L;){const J=R(_[K],T[$]);J<0?M(_[K++]):J>0?j(T[$++]):($++,K++)}for(;$<z;)j(T[$++]);for(;K<L;)M(_[K++])})(p,i,A$,(b=>{f.push(l.addFieldIndex(m,b))}),(b=>{f.push(l.deleteFieldIndex(m,b))})))).next((()=>Ce.waitFor(f)))))})(await Om(t),e)))}function VQ(t,e){return t.asyncQueue.enqueue((async()=>(function(r,i){yt(r).Cs.As=i})(await Om(t),e)))}function zQ(t){return t.asyncQueue.enqueue((async()=>(function(n){const r=yt(n),i=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",(a=>i.deleteAllFieldIndexes(a)))})(await Om(t))))}function S7(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const UQ="ComponentProvider",s4=new Map;function qQ(t,e,n,r,i){return new iY(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,S7(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const T7="firestore.googleapis.com",o4=!0;class l4{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ye(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=T7,this.ssl=o4}else this.host=e.host,this.ssl=e.ssl??o4;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=D9;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L9)throw new Ye(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S7(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ye(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ye(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ye(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class s0{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l4({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ye(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ye(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l4(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new uj;switch(r.type){case"firstParty":return new y$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ye(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=s4.get(n);r&&(nt(UQ,"Removing Datastore"),s4.delete(n),r.terminate())})(this),Promise.resolve()}}function I7(t,e,n,r={}){t=Tn(t,s0);const i=wd(e),a=t._getSettings(),l={...a,emulatorOptions:t._getEmulatorOptions()},f=`${e}:${n}`;i&&(qS(`https://${f}`),G5("Firestore",!0)),a.host!==T7&&a.host!==f&&Fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...a,host:f,ssl:i,emulatorOptions:r};if(!$o(m,l)&&(t._setSettings(m),r.mockUserToken)){let p,b;if(typeof r.mockUserToken=="string")p=r.mockUserToken,b=ma.MOCK_USER;else{p=VK(r.mockUserToken,t._app?.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ye(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new ma(_)}t._authCredentials=new m$(new lj(p,b))}}class Yi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yi(this.firestore,e,this._query)}}class fr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fr(this.firestore,e,this._key)}toJSON(){return{type:fr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_d(n,fr._jsonSchema))return new fr(e,r||null,new gt(Sn.fromString(n.referencePath)))}}fr._jsonSchemaVersion="firestore/documentReference/1.0",fr._jsonSchema={type:Vi("string",fr._jsonSchemaVersion),referencePath:Vi("string")};class Ho extends Yi{constructor(e,n,r){super(e,n,_m(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fr(this.firestore,null,new gt(e))}withConverter(e){return new Ho(this.firestore,e,this._path)}}function Lc(t,e,...n){if(t=wr(t),WS("collection","path",e),t instanceof s0){const r=Sn.fromString(e,...n);return XR(r),new Ho(t,null,r)}{if(!(t instanceof fr||t instanceof Ho))throw new Ye(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Sn.fromString(e,...n));return XR(r),new Ho(t.firestore,null,r)}}function GQ(t,e){if(t=Tn(t,s0),WS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ye(ke.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yi(t,null,(function(r){return new Pu(Sn.emptyPath(),r)})(e))}function ds(t,e,...n){if(t=wr(t),arguments.length===1&&(e=Ax.newId()),WS("doc","path",e),t instanceof s0){const r=Sn.fromString(e,...n);return YR(r),new fr(t,null,new gt(r))}{if(!(t instanceof fr||t instanceof Ho))throw new Ye(ke.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Sn.fromString(e,...n));return YR(r),new fr(t.firestore,t instanceof Ho?t.converter:null,new gt(r))}}function HQ(t,e){return t=wr(t),e=wr(e),(t instanceof fr||t instanceof Ho)&&(e instanceof fr||e instanceof Ho)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function VT(t,e){return t=wr(t),e=wr(e),t instanceof Yi&&e instanceof Yi&&t.firestore===e.firestore&&e0(t._query,e._query)&&t.converter===e.converter}const u4="AsyncQueue";class c4{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wT(this,"async_queue_retry"),this._c=()=>{const r=Iy();r&&nt(u4,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Iy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Iy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ya;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!tf(e))throw e;nt(u4,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Si("INTERNAL UNHANDLED ERROR: ",f4(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=ST.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Et(47125,{Pc:f4(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function f4(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class C7{constructor(){this._progressObserver={},this._taskCompletionResolver=new ya,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const KQ=-1;class _r extends s0{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new c4,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new c4(e),this._firestoreClient=void 0,await e}}}function WQ(t,e,n){n||(n=bp);const r=Xp(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if($o(a,e))return i;throw new Ye(ke.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ye(ke.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L9)throw new Ye(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&wd(e.host)&&qS(e.host),r.initialize({options:e,instanceIdentifier:n})}function O7(t,e){const n=typeof t=="object"?t:Z5(),r=typeof t=="string"?t:e||bp,i=Xp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=BK("firestore");a&&I7(i,...a)}return i}function ri(t){if(t._terminated)throw new Ye(ke.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||N7(t),t._firestoreClient}function N7(t){const e=t._freezeSettings(),n=qQ(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new IQ(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}function $Q(t,e){Fs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return R7(t,Wc.provider,{build:r=>new LT(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function YQ(t){Fs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();R7(t,Wc.provider,{build:n=>new v7(n,e.cacheSizeBytes)})}function R7(t,e,n){if((t=Tn(t,_r))._firestoreClient||t._terminated)throw new Ye(ke.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Ye(ke.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},N7(t)}function XQ(t){if(t._initialized&&!t._terminated)throw new Ye(ke.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ya;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!El.v())return Promise.resolve();const i=r+q9;await El.delete(i)})(yT(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function QQ(t){return(function(n){const r=new ya;return n.asyncQueue.enqueueAndForget((async()=>fQ(await FT(n),r))),r.promise})(ri(t=Tn(t,_r)))}function ZQ(t){return CQ(ri(t=Tn(t,_r)))}function JQ(t){return OQ(ri(t=Tn(t,_r)))}function eZ(t){return ZW(t.app,"firestore",t._databaseId.database),t._delete()}function xA(t,e){const n=ri(t=Tn(t,_r)),r=new C7;return LQ(n,t._databaseId,e,r),r}function P7(t,e){return BQ(ri(t=Tn(t,_r)),e).then((n=>n?new Yi(t,null,n.query):null))}class Rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rs(oi.fromBase64String(e))}catch(n){throw new Ye(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rs(oi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_d(e,Rs._jsonSchema))return Rs.fromBase64String(e.bytes)}}Rs._jsonSchemaVersion="firestore/bytes/1.0",Rs._jsonSchema={type:Vi("string",Rs._jsonSchemaVersion),bytes:Vi("string")};class Ad{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ye(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function tZ(){return new Ad($E)}class sf{constructor(e){this._methodName=e}}class Ko{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ye(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ye(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ko._jsonSchemaVersion}}static fromJSON(e){if(_d(e,Ko._jsonSchema))return new Ko(e.latitude,e.longitude)}}Ko._jsonSchemaVersion="firestore/geoPoint/1.0",Ko._jsonSchema={type:Vi("string",Ko._jsonSchemaVersion),latitude:Vi("number"),longitude:Vi("number")};class ro{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ro._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_d(e,ro._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ro(e.vectorValues);throw new Ye(ke.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ro._jsonSchemaVersion="firestore/vectorValue/1.0",ro._jsonSchema={type:Vi("string",ro._jsonSchemaVersion),vectorValues:Vi("object")};const nZ=/^__.*__$/;class rZ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ku(e,this.data,this.fieldMask,n,this.fieldTransforms):new Em(e,this.data,n,this.fieldTransforms)}}class D7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ku(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function k7(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{dataSource:t})}}class Hx{constructor(e,n,r,i,a,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Hx({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return uv(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(k7(this.dataSource)&&nZ.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class iZ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ed(e)}createContext(e,n,r,i=!1){return new Hx({dataSource:e,methodName:n,targetDoc:r,path:qr.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sd(t){const e=t._freezeSettings(),n=Ed(t._databaseId);return new iZ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Kx(t,e,n,r,i,a={}){const l=t.createContext(a.merge||a.mergeFields?2:0,e,n,i);WT("Data must be an object, but it was:",l,r);const f=L7(r,l);let m,p;if(a.merge)m=new Ds(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const b=[];for(const _ of a.mergeFields){const T=wu(e,_,n);if(!l.contains(T))throw new Ye(ke.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);F7(b,T)||b.push(T)}m=new Ds(b),p=l.fieldTransforms.filter((_=>m.covers(_.field)))}else m=null,p=l.fieldTransforms;return new rZ(new ga(f),m,p)}class o0 extends sf{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof o0}}function M7(t,e,n){return new Hx({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class zT extends sf{_toFieldTransform(e){return new n0(e.path,new Qh)}isEqual(e){return e instanceof zT}}class UT extends sf{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=M7(this,e,!0),r=this.Ac.map((a=>Td(a,n))),i=new td(r);return new n0(e.path,i)}isEqual(e){return e instanceof UT&&$o(this.Ac,e.Ac)}}class qT extends sf{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=M7(this,e,!0),r=this.Ac.map((a=>Td(a,n))),i=new nd(r);return new n0(e.path,i)}isEqual(e){return e instanceof qT&&$o(this.Ac,e.Ac)}}class GT extends sf{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new Zh(e.serializer,i9(e.serializer,this.Vc));return new n0(e.path,n)}isEqual(e){return e instanceof GT&&this.Vc===e.Vc}}function HT(t,e,n,r){const i=t.createContext(1,e,n);WT("Data must be an object, but it was:",i,r);const a=[],l=ga.empty();nf(r,((m,p)=>{const b=$T(e,m,n);p=wr(p);const _=i.childContextForFieldPath(b);if(p instanceof o0)a.push(b);else{const T=Td(p,_);T!=null&&(a.push(b),l.set(b,T))}}));const f=new Ds(a);return new D7(l,f,i.fieldTransforms)}function KT(t,e,n,r,i,a){const l=t.createContext(1,e,n),f=[wu(e,r,n)],m=[i];if(a.length%2!=0)throw new Ye(ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)f.push(wu(e,a[T])),m.push(a[T+1]);const p=[],b=ga.empty();for(let T=f.length-1;T>=0;--T)if(!F7(p,f[T])){const R=f[T];let j=m[T];j=wr(j);const M=l.childContextForFieldPath(R);if(j instanceof o0)p.push(R);else{const L=Td(j,M);L!=null&&(p.push(R),b.set(R,L))}}const _=new Ds(p);return new D7(b,_,l.fieldTransforms)}function j7(t,e,n,r=!1){return Td(n,t.createContext(r?4:3,e))}function Td(t,e){if(B7(t=wr(t)))return WT("Unsupported field value:",e,t),L7(t,e);if(t instanceof sf)return(function(r,i){if(!k7(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const a=[];let l=0;for(const f of r){let m=Td(f,i.childContextForArray(l));m==null&&(m={nullValue:"NULL_VALUE"}),a.push(m),l++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=wr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return i9(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=nr.fromDate(r);return{timestampValue:Jh(i.serializer,a)}}if(r instanceof nr){const a=new nr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jh(i.serializer,a)}}if(r instanceof Ko)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rs)return{bytesValue:y9(i.serializer,r._byteString)};if(r instanceof fr){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:fT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ro)return(function(l,f){const m=l instanceof ro?l.toArray():l;return{mapValue:{fields:{[eT]:{stringValue:tT},[$h]:{arrayValue:{values:m.map((b=>{if(typeof b!="number")throw f.createError("VectorValues must only contain numeric values.");return aT(f.serializer,b)}))}}}}}})(r,i);if(C9(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Sx(r)}`)})(t,e)}function L7(t,e){const n={};return Rj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nf(t,((r,i)=>{const a=Td(i,e.childContextForField(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function B7(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nr||t instanceof Ko||t instanceof Rs||t instanceof fr||t instanceof sf||t instanceof ro||C9(t))}function WT(t,e,n){if(!B7(n)||!dj(n)){const r=Sx(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function wu(t,e,n){if((e=wr(e))instanceof Ad)return e._internalPath;if(typeof e=="string")return $T(t,e);throw uv("Field path arguments must be of type string or ",t,!1,void 0,n)}const aZ=new RegExp("[~\\*/\\[\\]]");function $T(t,e,n){if(e.search(aZ)>=0)throw uv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ad(...e.split("."))._internalPath}catch{throw uv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uv(t,e,n,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let f=`Function ${e}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Ye(ke.INVALID_ARGUMENT,f+t+m)}function F7(t,e){return t.some((n=>n.isEqual(e)))}class YT{convertValue(e,n="none"){switch(qc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(bu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Et(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return nf(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[$h].arrayValue?.values?.map((r=>Zr(r.doubleValue)));return new ro(n)}convertGeoPoint(e){return new Ko(Zr(e.latitude),Zr(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Rx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xp(e));default:return null}}convertTimestamp(e){const n=xu(e);return new nr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Sn.fromString(e);Nt(I9(r),9688,{name:e});const i=new Uc(r.get(1),r.get(3)),a=new gt(r.popFirst(5));return i.isEqual(n)||Si(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}class of extends YT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,n)}}function sZ(){return new o0("deleteField")}function oZ(){return new zT("serverTimestamp")}function lZ(...t){return new UT("arrayUnion",t)}function uZ(...t){return new qT("arrayRemove",t)}function cZ(t){return new GT("increment",t)}function fZ(t){return new ro(t)}function dZ(t){const e=ri(Tn(t.firestore,_r)),n=e._onlineComponents?.datastore.serializer;return n===void 0?null:jx(n,rs(t._query)).ft}function hZ(t,e){const n=Nj(e,((a,l)=>new f9(l,a.aggregateType,a._internalFieldPath))),r=ri(Tn(t.firestore,_r)),i=r._onlineComponents?.datastore.serializer;return i===void 0?null:E9(i,Yj(t._query),n,!0).request}const d4="@firebase/firestore",h4="4.11.0";function Nh(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class sm{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class V7{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new ga({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}class Tp{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new fr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(wu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mZ extends Tp{data(){return super.data()}}function z7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ye(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class XT{}class Nm extends XT{}function gZ(t,e,...n){let r=[];e instanceof XT&&r.push(e),r=r.concat(n),(function(a){const l=a.filter((m=>m instanceof Id)).length,f=a.filter((m=>m instanceof Rm)).length;if(l>1||l>0&&f>0)throw new Ye(ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class Rm extends Nm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Rm(e,n,r)}_apply(e){const n=this._parse(e);return q7(e._query,n),new Yi(e.firestore,e.converter,aA(e._query,n))}_parse(e){const n=Sd(e.firestore);return(function(a,l,f,m,p,b,_){let T;if(p.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Ye(ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){g4(_,b);const j=[];for(const M of _)j.push(m4(m,a,M));T={arrayValue:{values:j}}}else T=m4(m,a,_)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||g4(_,b),T=j7(f,l,_,b==="in"||b==="not-in");return kn.create(p,b,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function pZ(t,e,n){const r=e,i=wu("where",t);return Rm._create(i,r,n)}class Id extends XT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Id(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:cr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let l=i;const f=a.getFlattenedFilters();for(const m of f)q7(l,m),l=aA(l,m)})(e._query,n),new Yi(e.firestore,e.converter,aA(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function yZ(...t){return t.forEach((e=>G7("or",e))),Id._create("or",t)}function vZ(...t){return t.forEach((e=>G7("and",e))),Id._create("and",t)}class Wx extends Nm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Wx(e,n)}_apply(e){const n=(function(i,a,l){if(i.startAt!==null)throw new Ye(ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ye(ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ep(a,l)})(e._query,this._field,this._direction);return new Yi(e.firestore,e.converter,yY(e._query,n))}}function xZ(t,e="asc"){const n=e,r=wu("orderBy",t);return Wx._create(r,n)}class l0 extends Nm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new l0(e,n,r)}_apply(e){return new Yi(e.firestore,e.converter,ev(e._query,this._limit,this._limitType))}}function bZ(t){return hj("limit",t),l0._create("limit",t,"F")}function wZ(t){return hj("limitToLast",t),l0._create("limitToLast",t,"L")}class u0 extends Nm{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new u0(e,n,r)}_apply(e){const n=U7(e,this.type,this._docOrFields,this._inclusive);return new Yi(e.firestore,e.converter,vY(e._query,n))}}function _Z(...t){return u0._create("startAt",t,!0)}function EZ(...t){return u0._create("startAfter",t,!1)}class c0 extends Nm{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new c0(e,n,r)}_apply(e){const n=U7(e,this.type,this._docOrFields,this._inclusive);return new Yi(e.firestore,e.converter,xY(e._query,n))}}function AZ(...t){return c0._create("endBefore",t,!1)}function SZ(...t){return c0._create("endAt",t,!0)}function U7(t,e,n,r){if(n[0]=wr(n[0]),n[0]instanceof Tp)return(function(a,l,f,m,p){if(!m)throw new Ye(ke.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const b=[];for(const _ of Ch(a))if(_.field.isKeyField())b.push(Jf(l,m.key));else{const T=m.data.field(_.field);if(Nx(T))throw new Ye(ke.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(T===null){const R=_.field.canonicalString();throw new Ye(ke.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}b.push(T)}return new Hc(b,p)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Sd(t.firestore);return(function(l,f,m,p,b,_){const T=l.explicitOrderBy;if(b.length>T.length)throw new Ye(ke.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let j=0;j<b.length;j++){const M=b[j];if(T[j].field.isKeyField()){if(typeof M!="string")throw new Ye(ke.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof M}`);if(!rT(l)&&M.indexOf("/")!==-1)throw new Ye(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${M}' contains a slash.`);const L=l.path.child(Sn.fromString(M));if(!gt.isDocumentKey(L))throw new Ye(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${L}' is not because it contains an odd number of segments.`);const z=new gt(L);R.push(Jf(f,z))}else{const L=j7(m,p,M);R.push(L)}}return new Hc(R,_)})(t._query,t.firestore._databaseId,i,e,n,r)}}function m4(t,e,n){if(typeof(n=wr(n))=="string"){if(n==="")throw new Ye(ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rT(e)&&n.indexOf("/")!==-1)throw new Ye(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Sn.fromString(n));if(!gt.isDocumentKey(r))throw new Ye(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jf(t,new gt(r))}if(n instanceof fr)return Jf(t,n._key);throw new Ye(ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sx(n)}.`)}function g4(t,e){if(!Array.isArray(t)||t.length===0)throw new Ye(ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function q7(t,e){const n=(function(i,a){for(const l of i)for(const f of l.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ye(ke.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ye(ke.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function G7(t,e){if(!(e instanceof Rm||e instanceof Id))throw new Ye(ke.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}function $x(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class QT extends YT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,n)}}function TZ(t){return new sm("sum",wu("sum",t))}function IZ(t){return new sm("avg",wu("average",t))}function H7(){return new sm("count")}function CZ(t,e){return t instanceof sm&&e instanceof sm&&t.aggregateType===e.aggregateType&&t._internalFieldPath?.canonicalString()===e._internalFieldPath?.canonicalString()}function OZ(t,e){return VT(t.query,e.query)&&$o(t.data(),e.data())}function NZ(t){return K7(t,{count:H7()})}function K7(t,e){const n=Tn(t.firestore,_r),r=ri(n),i=Nj(e,((a,l)=>new f9(l,a.aggregateType,a._internalFieldPath)));return DQ(r,t._query,i).then((a=>(function(f,m,p){const b=new of(f);return new V7(m,b,p)})(n,t,a)))}class RZ{constructor(e){this.kind="memory",this._onlineComponentProvider=Wc.provider,this._offlineComponentProvider=e?.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new jT(void 0)}}toJSON(){return{kind:this.kind}}}class PZ{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=W7(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class DZ{constructor(){this.kind="memoryEager",this._offlineComponentProvider=im.provider}toJSON(){return{kind:this.kind}}}class kZ{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new jT(e)}}toJSON(){return{kind:this.kind}}}function MZ(){return new DZ}function jZ(t){return new kZ(t?.cacheSizeBytes)}function LZ(t){return new RZ(t)}function BZ(t){return new PZ(t)}class FZ{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Wc.provider,this._offlineComponentProvider={build:n=>new LT(n,e?.cacheSizeBytes,this.forceOwnership)}}}class VZ{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Wc.provider,this._offlineComponentProvider={build:n=>new v7(n,e?.cacheSizeBytes)}}}function W7(t){return new FZ(t?.forceOwnership)}function zZ(){return new VZ}const $7="NOT SUPPORTED";class lu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ls extends Tp{constructor(e,n,r,i,a,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new up(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ye(ke.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ls._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function UZ(t,e,n){if(_d(e,Ls._jsonSchema)){if(e.bundle===$7)throw new Ye(ke.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Ed(t._databaseId),i=A7(e.bundle,r),a=i.t(),l=new NT(i.getMetadata(),r);for(const b of a)l.o(b);const f=l.documents;if(f.length!==1)throw new Ye(ke.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${f.length} documents.`);const m=Mx(r,f[0].document),p=new gt(Sn.fromString(e.bundleName));return new Ls(t,new QT(t),p,m,new lu(!1,!1),n||null)}}Ls._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ls._jsonSchema={type:Vi("string",Ls._jsonSchemaVersion),bundleSource:Vi("string","DocumentSnapshot"),bundleName:Vi("string"),bundle:Vi("string")};class up extends Ls{data(e={}){return super.data(e)}}class Bs{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new lu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new up(this._firestore,this._userDataWriter,r.key,r,new lu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ye(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((f=>{const m=new up(i._firestore,i._userDataWriter,f.doc.key,f.doc,new lu(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const m=new up(i._firestore,i._userDataWriter,f.doc.key,f.doc,new lu(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,b=-1;return f.type!==0&&(p=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),f.type!==1&&(l=l.add(f.doc),b=l.indexOf(f.doc.key)),{type:GZ(f.type),doc:m,oldIndex:p,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ye(ke.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Bs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ax.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function qZ(t,e,n){if(_d(e,Bs._jsonSchema)){if(e.bundle===$7)throw new Ye(ke.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Ed(t._databaseId),i=A7(e.bundle,r),a=i.t(),l=new NT(i.getMetadata(),r);for(const T of a)l.o(T);if(l.queries.length!==1)throw new Ye(ke.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${l.queries.length} queries.`);const f=Lx(l.queries[0].bundledQuery),m=l.documents;let p=new Wf;m.map((T=>{const R=Mx(r,T.document);p=p.add(R)}));const b=od.fromInitialDocuments(f,p,on(),!1,!1),_=new Yi(t,n||null,f);return new Bs(t,new QT(t),_,b)}}function GZ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:t})}}function HZ(t,e){return t instanceof Ls&&e instanceof Ls?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Bs&&e instanceof Bs&&t._firestore===e._firestore&&VT(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}Bs._jsonSchemaVersion="firestore/querySnapshot/1.0",Bs._jsonSchema={type:Vi("string",Bs._jsonSchemaVersion),bundleSource:Vi("string","QuerySnapshot"),bundleName:Vi("string"),bundle:Vi("string")};const KZ={maxAttempts:5};class Y7{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Sd(e)}set(e,n,r){this._verifyNotCommitted();const i=Oc(e,this._firestore),a=$x(i.converter,n,r),l=Kx(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,ei.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=Oc(e,this._firestore);let l;return l=typeof(n=wr(n))=="string"||n instanceof Ad?KT(this._dataReader,"WriteBatch.update",a._key,n,r,i):HT(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(l.toMutation(a._key,ei.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Oc(e,this._firestore);return this._mutations=this._mutations.concat(new Am(n._key,ei.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ye(ke.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Oc(t,e){if((t=wr(t)).firestore!==e)throw new Ye(ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class WZ{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Sd(e)}get(e){const n=Oc(e,this._firestore),r=new QT(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return Et(24041);const a=i[0];if(a.isFoundDocument())return new Tp(this._firestore,r,a.key,a,n.converter);if(a.isNoDocument())return new Tp(this._firestore,r,n._key,null,n.converter);throw Et(18433,{doc:a})}))}set(e,n,r){const i=Oc(e,this._firestore),a=$x(i.converter,n,r),l=Kx(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,l),this}update(e,n,r,...i){const a=Oc(e,this._firestore);let l;return l=typeof(n=wr(n))=="string"||n instanceof Ad?KT(this._dataReader,"Transaction.update",a._key,n,r,i):HT(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,l),this}delete(e){const n=Oc(e,this._firestore);return this._transaction.delete(n._key),this}}class X7 extends WZ{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Oc(e,this._firestore),r=new of(this._firestore);return super.get(e).then((i=>new Ls(this._firestore,r,n._key,i._document,new lu(!1,!1),n.converter)))}}function $Z(t,e,n){t=Tn(t,_r);const r={...KZ,...n};(function(l){if(l.maxAttempts<1)throw new Ye(ke.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const i=ri(t);return jQ(i,(a=>e(new X7(t,a))),r)}function f0(t){t=Tn(t,fr);const e=Tn(t.firestore,_r),n=ri(e);return _7(n,t._key).then((r=>JT(e,t,r)))}function YZ(t){t=Tn(t,fr);const e=Tn(t.firestore,_r),n=ri(e),r=new of(e);return RQ(n,t._key).then((i=>new Ls(e,r,t._key,i,new lu(i!==null&&i.hasLocalMutations,!0),t.converter)))}function XZ(t){t=Tn(t,fr);const e=Tn(t.firestore,_r),n=ri(e);return _7(n,t._key,{source:"server"}).then((r=>JT(e,t,r)))}function Bc(t){t=Tn(t,Yi);const e=Tn(t.firestore,_r),n=ri(e),r=new of(e);return z7(t._query),E7(n,t._query).then((i=>new Bs(e,r,t,i)))}function QZ(t){t=Tn(t,Yi);const e=Tn(t.firestore,_r),n=ri(e),r=new of(e);return PQ(n,t._query).then((i=>new Bs(e,r,t,i)))}function ZZ(t){t=Tn(t,Yi);const e=Tn(t.firestore,_r),n=ri(e),r=new of(e);return E7(n,t._query,{source:"server"}).then((i=>new Bs(e,r,t,i)))}function Cd(t,e,n){t=Tn(t,fr);const r=Tn(t.firestore,_r),i=$x(t.converter,e,n),a=Sd(r);return Pm(r,[Kx(a,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ei.none())])}function ZT(t,e,n,...r){t=Tn(t,fr);const i=Tn(t.firestore,_r),a=Sd(i);let l;return l=typeof(e=wr(e))=="string"||e instanceof Ad?KT(a,"updateDoc",t._key,e,n,r):HT(a,"updateDoc",t._key,e),Pm(i,[l.toMutation(t._key,ei.exists(!0))])}function Q7(t){return Pm(Tn(t.firestore,_r),[new Am(t._key,ei.none())])}function JZ(t,e){const n=Tn(t.firestore,_r),r=ds(t),i=$x(t.converter,e),a=Sd(t.firestore);return Pm(n,[Kx(a,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ei.exists(!1))]).then((()=>r))}function bA(t,...e){t=wr(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Nh(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Nh(e[r])){const p=e[r];e[r]=p.next?.bind(p),e[r+1]=p.error?.bind(p),e[r+2]=p.complete?.bind(p)}let a,l,f;if(t instanceof fr)l=Tn(t.firestore,_r),f=_m(t._key.path),a={next:p=>{e[r]&&e[r](JT(l,t,p))},error:e[r+1],complete:e[r+2]};else{const p=Tn(t,Yi);l=Tn(p.firestore,_r),f=p._query;const b=new of(l);a={next:_=>{e[r]&&e[r](new Bs(l,b,p,_))},error:e[r+1],complete:e[r+2]},z7(t._query)}const m=ri(l);return NQ(m,f,i,a)}function eJ(t,e,...n){const r=wr(t),i=(function(m){const p={bundle:"",bundleName:"",bundleSource:""},b=["bundle","bundleName","bundleSource"];for(const _ of b){if(!(_ in m)){p.error=`snapshotJson missing required field: ${_}`;break}const T=m[_];if(typeof T!="string"){p.error=`snapshotJson field '${_}' must be a string.`;break}if(T.length===0){p.error=`snapshotJson field '${_}' cannot be an empty string.`;break}_==="bundle"?p.bundle=T:_==="bundleName"?p.bundleName=T:_==="bundleSource"&&(p.bundleSource=T)}return p})(e);if(i.error)throw new Ye(ke.INVALID_ARGUMENT,i.error);let a,l=0;if(typeof n[l]!="object"||Nh(n[l])||(a=n[l++]),i.bundleSource==="QuerySnapshot"){let f=null;if(typeof n[l]=="object"&&Nh(n[l])){const m=n[l++];f={next:m.next,error:m.error,complete:m.complete}}else f={next:n[l++],error:n[l++],complete:n[l++]};return(function(p,b,_,T,R){let j,M=!1;return xA(p,b.bundle).then((()=>P7(p,b.bundleName))).then((z=>{z&&!M&&(R&&z.withConverter(R),j=bA(z,_||{},T))})).catch((z=>(T.error&&T.error(z),()=>{}))),()=>{M||(M=!0,j&&j())}})(r,i,a,f,n[l])}if(i.bundleSource==="DocumentSnapshot"){let f=null;if(typeof n[l]=="object"&&Nh(n[l])){const m=n[l++];f={next:m.next,error:m.error,complete:m.complete}}else f={next:n[l++],error:n[l++],complete:n[l++]};return(function(p,b,_,T,R){let j,M=!1;return xA(p,b.bundle).then((()=>{if(!M){const z=new fr(p,R||null,gt.fromPath(b.bundleName));j=bA(z,_||{},T)}})).catch((z=>(T.error&&T.error(z),()=>{}))),()=>{M||(M=!0,j&&j())}})(r,i,a,f,n[l])}throw new Ye(ke.INVALID_ARGUMENT,`unsupported bundle source: ${i.bundleSource}`)}function tJ(t,e){t=Tn(t,_r);const n=ri(t),r=Nh(e)?e:{next:e};return MQ(n,r)}function Pm(t,e){const n=ri(t);return kQ(n,e)}function JT(t,e,n){const r=n.docs.get(e._key),i=new of(t);return new Ls(t,i,e._key,r,new lu(n.hasPendingWrites,n.fromCache),e.converter)}function nJ(t){return t=Tn(t,_r),ri(t),new Y7(t,(e=>Pm(t,e)))}function rJ(t,e){t=Tn(t,_r);const n=ri(t);if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return Fs("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=(function(a){const l=typeof a=="string"?(function(p){try{return JSON.parse(p)}catch(b){throw new Ye(ke.INVALID_ARGUMENT,"Failed to parse JSON: "+b?.message)}})(a):a,f=[];if(Array.isArray(l.indexes))for(const m of l.indexes){const p=p4(m,"collectionGroup"),b=[];if(Array.isArray(m.fields))for(const _ of m.fields){const T=p4(_,"fieldPath"),R=$T("setIndexConfiguration",T);_.arrayConfig==="CONTAINS"?b.push(new Hf(R,2)):_.order==="ASCENDING"?b.push(new Hf(R,0)):_.order==="DESCENDING"&&b.push(new Hf(R,1))}f.push(new Uh(Uh.UNKNOWN_ID,p,b,qh.empty()))}return f})(e);return FQ(n,r)}function p4(t,e){if(typeof t[e]!="string")throw new Ye(ke.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}class Z7{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function iJ(t){t=Tn(t,_r);const e=y4.get(t);if(e)return e;if(ri(t)._uninitializedComponentsProvider?._offline.kind!=="persistent")return null;const r=new Z7(t);return y4.set(t,r),r}function aJ(t){J7(t,!0)}function sJ(t){J7(t,!1)}function oJ(t){const e=ri(t._firestore);zQ(e).then((n=>nt("deleting all persistent cache indexes succeeded"))).catch((n=>Fs("deleting all persistent cache indexes failed",n)))}function J7(t,e){const n=ri(t._firestore);VQ(n,e).then((r=>nt(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((r=>Fs(`setting persistent cache index auto creation isEnabled=${e} failed`,r)))}const y4=new WeakMap;class lJ{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return eI.instance.onExistenceFilterMismatch(e)}}class eI{constructor(){this.i=new Map}static get instance(){return W1||(W1=new eI,PY(W1)),W1}u(e){this.i.forEach((n=>n(e)))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.i;return r.set(n,e),()=>r.delete(n)}}let W1=null;(function(e,n=!0){f$(bm),Fh(new Zf("firestore",((r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),f=new _r(new g$(r.getProvider("auth-internal")),new v$(l,r.getProvider("app-check-internal")),aY(l,i),l);return a={useFetchStreams:n,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),kc(d4,h4,e),kc(d4,h4,"esm2020")})();const uJ=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:YT,AggregateField:sm,AggregateQuerySnapshot:V7,Bytes:Rs,CACHE_SIZE_UNLIMITED:KQ,CollectionReference:Ho,DocumentReference:fr,DocumentSnapshot:Ls,FieldPath:Ad,FieldValue:sf,Firestore:_r,FirestoreError:Ye,GeoPoint:Ko,LoadBundleTask:C7,PersistentCacheIndexManager:Z7,Query:Yi,QueryCompositeFilterConstraint:Id,QueryConstraint:Nm,QueryDocumentSnapshot:up,QueryEndAtConstraint:c0,QueryFieldFilterConstraint:Rm,QueryLimitConstraint:l0,QueryOrderByConstraint:Wx,QuerySnapshot:Bs,QueryStartAtConstraint:u0,SnapshotMetadata:lu,Timestamp:nr,Transaction:X7,VectorValue:ro,WriteBatch:Y7,_AutoId:Ax,_ByteString:oi,_DatabaseId:Uc,_DocumentKey:gt,_EmptyAppCheckTokenProvider:x$,_EmptyAuthCredentialsProvider:uj,_FieldPath:qr,_TestingHooks:lJ,_cast:Tn,_debugAssert:h$,_internalAggregationQueryToProtoRunAggregationQueryRequest:hZ,_internalQueryToProtoQueryTarget:dZ,_isBase64Available:nY,_logWarn:Fs,_validateIsNotUsedTogether:fj,addDoc:JZ,aggregateFieldEqual:CZ,aggregateQuerySnapshotEqual:OZ,and:vZ,arrayRemove:uZ,arrayUnion:lZ,average:IZ,clearIndexedDbPersistence:XQ,collection:Lc,collectionGroup:GQ,connectFirestoreEmulator:I7,count:H7,deleteAllPersistentCacheIndexes:oJ,deleteDoc:Q7,deleteField:sZ,disableNetwork:JQ,disablePersistentCacheIndexAutoCreation:sJ,doc:ds,documentId:tZ,documentSnapshotFromJSON:UZ,enableIndexedDbPersistence:$Q,enableMultiTabIndexedDbPersistence:YQ,enableNetwork:ZQ,enablePersistentCacheIndexAutoCreation:aJ,endAt:SZ,endBefore:AZ,ensureFirestoreConfigured:ri,executeWrite:Pm,getAggregateFromServer:K7,getCountFromServer:NZ,getDoc:f0,getDocFromCache:YZ,getDocFromServer:XZ,getDocs:Bc,getDocsFromCache:QZ,getDocsFromServer:ZZ,getFirestore:O7,getPersistentCacheIndexManager:iJ,increment:cZ,initializeFirestore:WQ,limit:bZ,limitToLast:wZ,loadBundle:xA,memoryEagerGarbageCollector:MZ,memoryLocalCache:LZ,memoryLruGarbageCollector:jZ,namedQuery:P7,onSnapshot:bA,onSnapshotResume:eJ,onSnapshotsInSync:tJ,or:yZ,orderBy:xZ,persistentLocalCache:BZ,persistentMultipleTabManager:zZ,persistentSingleTabManager:W7,query:gZ,queryEqual:VT,querySnapshotFromJSON:qZ,refEqual:HQ,runTransaction:$Z,serverTimestamp:oZ,setDoc:Cd,setIndexConfiguration:rJ,setLogLevel:d$,snapshotEqual:HZ,startAfter:EZ,startAt:_Z,sum:TZ,terminate:eZ,updateDoc:ZT,vector:fZ,waitForPendingWrites:QQ,where:pZ,writeBatch:nJ},Symbol.toStringTag,{value:"Module"}));var cJ="firebase",fJ="12.9.0";kc(cJ,fJ,"app");function eL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dJ=eL,tL=new $p("auth","Firebase",eL());const cv=new GS("@firebase/auth");function hJ(t,...e){cv.logLevel<=Dn.WARN&&cv.warn(`Auth (${bm}): ${t}`,...e)}function Cy(t,...e){cv.logLevel<=Dn.ERROR&&cv.error(`Auth (${bm}): ${t}`,...e)}function Yo(t,...e){throw tI(t,...e)}function Sl(t,...e){return tI(t,...e)}function nL(t,e,n){const r={...dJ(),[e]:n};return new $p("auth","Firebase",r).create(e,{appName:t.name})}function mu(t){return nL(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tI(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tL.create(t,...e)}function Wt(t,e,...n){if(!t)throw tI(e,...n)}function uu(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Cy(e),new Error(e)}function _u(t,e){t||uu(e)}function wA(){return typeof self<"u"&&self.location?.href||""}function mJ(){return v4()==="http:"||v4()==="https:"}function v4(){return typeof self<"u"&&self.location?.protocol||null}function gJ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mJ()||HK()||"connection"in navigator)?navigator.onLine:!0}function pJ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class d0{constructor(e,n){this.shortDelay=e,this.longDelay=n,_u(n>e,"Short delay should be less than long delay!"),this.isMobile=qK()||KK()}get(){return gJ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function nI(t,e){_u(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class rL{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;uu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;uu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;uu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yJ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const vJ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xJ=new d0(3e4,6e4);function lf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function uf(t,e,n,r,i={}){return iL(t,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const f=Yp({key:t.config.apiKey,...l}).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:m,...a};return GK()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&wd(t.emulatorConfig.host)&&(p.credentials="include"),rL.fetch()(await aL(t,t.config.apiHost,n,f),p)})}async function iL(t,e,n){t._canInitEmulator=!1;const r={...yJ,...e};try{const i=new wJ(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw $1(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const f=a.ok?l.errorMessage:l.error.message,[m,p]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw $1(t,"credential-already-in-use",l);if(m==="EMAIL_EXISTS")throw $1(t,"email-already-in-use",l);if(m==="USER_DISABLED")throw $1(t,"user-disabled",l);const b=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw nL(t,b,p);Yo(t,b)}}catch(i){if(i instanceof Ru)throw i;Yo(t,"network-request-failed",{message:String(i)})}}async function h0(t,e,n,r,i={}){const a=await uf(t,e,n,r,i);return"mfaPendingCredential"in a&&Yo(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function aL(t,e,n,r){const i=`${e}${n}?${r}`,a=t,l=a.config.emulator?nI(t.config,i):`${t.config.apiScheme}://${i}`;return vJ.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function bJ(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wJ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sl(this.auth,"network-request-failed")),xJ.get())})}}function $1(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Sl(t,e,r);return i.customData._tokenResponse=n,i}function x4(t){return t!==void 0&&t.enterprise!==void 0}class _J{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return bJ(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function EJ(t,e){return uf(t,"GET","/v2/recaptchaConfig",lf(t,e))}async function AJ(t,e){return uf(t,"POST","/v1/accounts:delete",e)}async function fv(t,e){return uf(t,"POST","/v1/accounts:lookup",e)}function cp(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SJ(t,e=!1){const n=wr(t),r=await n.getIdToken(e),i=rI(r);Wt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a?.sign_in_provider;return{claims:i,token:r,authTime:cp(t2(i.auth_time)),issuedAtTime:cp(t2(i.iat)),expirationTime:cp(t2(i.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function t2(t){return Number(t)*1e3}function rI(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Cy("JWT malformed, contained fewer than 3 sections"),null;try{const i=F5(n);return i?JSON.parse(i):(Cy("Failed to decode base64 JWT payload"),null)}catch(i){return Cy("Caught error parsing JWT payload as JSON",i?.toString()),null}}function b4(t){const e=rI(t);return Wt(e,"internal-error"),Wt(typeof e.exp<"u","internal-error"),Wt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ip(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ru&&TJ(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function TJ({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class IJ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class _A{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cp(this.lastLoginAt),this.creationTime=cp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function dv(t){const e=t.auth,n=await t.getIdToken(),r=await Ip(t,fv(e,{idToken:n}));Wt(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?sL(i.providerUserInfo):[],l=OJ(t.providerData,a),f=t.isAnonymous,m=!(t.email&&i.passwordHash)&&!l?.length,p=f?m:!1,b={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new _A(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,b)}async function CJ(t){const e=wr(t);await dv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OJ(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function sL(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function NJ(t,e){const n=await iL(t,{},async()=>{const r=Yp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,l=await aL(t,i,"/v1/token",`key=${a}`),f=await t._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:r};return t.emulatorConfig&&wd(t.emulatorConfig.host)&&(m.credentials="include"),rL.fetch()(l,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function RJ(t,e){return uf(t,"POST","/v2/accounts:revokeToken",lf(t,e))}class Rh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Wt(e.idToken,"internal-error"),Wt(typeof e.idToken<"u","internal-error"),Wt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):b4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Wt(e.length!==0,"internal-error");const n=b4(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Wt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await NJ(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,l=new Rh;return r&&(Wt(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Wt(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(Wt(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rh,this.toJSON())}_performRefresh(){return uu("not implemented")}}function gc(t,e){Wt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qo{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new IJ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new _A(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ip(this,this.stsTokenManager.getToken(this.auth,e));return Wt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return SJ(this,e)}reload(){return CJ(this)}_assign(e){this!==e&&(Wt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Wt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await dv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ao(this.auth.app))return Promise.reject(mu(this.auth));const e=await this.getIdToken();return await Ip(this,AJ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,l=n.photoURL??void 0,f=n.tenantId??void 0,m=n._redirectEventId??void 0,p=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:R,providerData:j,stsTokenManager:M}=n;Wt(_&&M,e,"internal-error");const L=Rh.fromJSON(this.name,M);Wt(typeof _=="string",e,"internal-error"),gc(r,e.name),gc(i,e.name),Wt(typeof T=="boolean",e,"internal-error"),Wt(typeof R=="boolean",e,"internal-error"),gc(a,e.name),gc(l,e.name),gc(f,e.name),gc(m,e.name),gc(p,e.name),gc(b,e.name);const z=new qo({uid:_,auth:e,email:i,emailVerified:T,displayName:r,isAnonymous:R,photoURL:l,phoneNumber:a,tenantId:f,stsTokenManager:L,createdAt:p,lastLoginAt:b});return j&&Array.isArray(j)&&(z.providerData=j.map($=>({...$}))),m&&(z._redirectEventId=m),z}static async _fromIdTokenResponse(e,n,r=!1){const i=new Rh;i.updateFromServerResponse(n);const a=new qo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await dv(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Wt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?sL(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!a?.length,f=new Rh;f.updateFromIdToken(r);const m=new qo({uid:i.localId,auth:e,stsTokenManager:f,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new _A(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(m,p),m}}const w4=new Map;function cu(t){_u(t instanceof Function,"Expected a class definition");let e=w4.get(t);return e?(_u(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,w4.set(t,e),e)}class oL{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oL.type="NONE";const _4=oL;function Oy(t,e,n){return`firebase:${t}:${e}:${n}`}class Ph{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Oy(this.userKey,i.apiKey,a),this.fullPersistenceKey=Oy("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await fv(this.auth,{idToken:e}).catch(()=>{});return n?qo._fromGetAccountInfoResponse(this.auth,n,e):null}return qo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ph(cu(_4),e,r);const i=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=i[0]||cu(_4);const l=Oy(r,e.config.apiKey,e.name);let f=null;for(const p of n)try{const b=await p._get(l);if(b){let _;if(typeof b=="string"){const T=await fv(e,{idToken:b}).catch(()=>{});if(!T)break;_=await qo._fromGetAccountInfoResponse(e,T,b)}else _=qo._fromJSON(e,b);p!==a&&(f=_),a=p;break}}catch{}const m=i.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new Ph(a,e,r):(a=m[0],f&&await a._set(l,f.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Ph(a,e,r))}}function E4(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hL(e))return"Blackberry";if(mL(e))return"Webos";if(uL(e))return"Safari";if((e.includes("chrome/")||cL(e))&&!e.includes("edge/"))return"Chrome";if(dL(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function lL(t=$i()){return/firefox\//i.test(t)}function uL(t=$i()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cL(t=$i()){return/crios\//i.test(t)}function fL(t=$i()){return/iemobile/i.test(t)}function dL(t=$i()){return/android/i.test(t)}function hL(t=$i()){return/blackberry/i.test(t)}function mL(t=$i()){return/webos/i.test(t)}function iI(t=$i()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function PJ(t=$i()){return iI(t)&&!!window.navigator?.standalone}function DJ(){return WK()&&document.documentMode===10}function gL(t=$i()){return iI(t)||dL(t)||mL(t)||hL(t)||/windows phone/i.test(t)||fL(t)}function pL(t,e=[]){let n;switch(t){case"Browser":n=E4($i());break;case"Worker":n=`${E4($i())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bm}/${r}`}class kJ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((l,f)=>{try{const m=e(a);l(m)}catch(m){f(m)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function MJ(t,e={}){return uf(t,"GET","/v2/passwordPolicy",lf(t,e))}const jJ=6;class LJ{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??jJ,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class BJ{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new A4(this),this.idTokenSubscription=new A4(this),this.beforeStateQueue=new kJ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=cu(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ph.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await fv(this,{idToken:e}),r=await qo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ao(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=r?._redirectEventId,f=await this.tryRedirectSignIn(e);(!a||a===l)&&f?.user&&(r=f.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Wt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await dv(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pJ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ao(this.app))return Promise.reject(mu(this));const n=e?wr(e):null;return n&&Wt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Wt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ao(this.app)?Promise.reject(mu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ao(this.app)?Promise.reject(mu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cu(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MJ(this),n=new LJ(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $p("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await RJ(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&cu(e)||this._popupRedirectResolver;Wt(n,this,"argument-error"),this.redirectPersistenceManager=await Ph.create(this,[cu(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Wt(f,this,"internal-error"),f.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,r,i);return()=>{l=!0,m()}}else{const m=e.addObserver(n);return()=>{l=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Wt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Ao(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&hJ(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Od(t){return wr(t)}class A4{constructor(e){this.auth=e,this.observer=null,this.addObserver=JK(n=>this.observer=n)}get next(){return Wt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Yx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FJ(t){Yx=t}function yL(t){return Yx.loadJS(t)}function VJ(){return Yx.recaptchaEnterpriseScript}function zJ(){return Yx.gapiScript}function UJ(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class qJ{constructor(){this.enterprise=new GJ}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class GJ{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const HJ="recaptcha-enterprise",vL="NO_RECAPTCHA";class KJ{constructor(e){this.type=HJ,this.auth=Od(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,f)=>{EJ(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const p=new _J(m);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(m=>{f(m)})})}function i(a,l,f){const m=window.grecaptcha;x4(m)?m.enterprise.ready(()=>{m.enterprise.execute(a,{action:e}).then(p=>{l(p)}).catch(()=>{l(vL)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qJ().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(f=>{if(!n&&x4(window.grecaptcha))i(f,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let m=VJ();m.length!==0&&(m+=f),yL(m).then(()=>{i(f,a,l)}).catch(p=>{l(p)})}}).catch(f=>{l(f)})})}}async function S4(t,e,n,r=!1,i=!1){const a=new KJ(t);let l;if(i)l=vL;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const f={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,p=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:l}):Object.assign(f,{captchaResponse:l}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function EA(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await S4(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await S4(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}function WJ(t,e){const n=Xp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if($o(a,e??{}))return i;Yo(i,"already-initialized")}return n.initialize({options:e})}function $J(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(cu);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function YJ(t,e,n){const r=Od(t);Wt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=xL(e),{host:l,port:f}=XJ(e),m=f===null?"":`:${f}`,p={url:`${a}//${l}${m}/`},b=Object.freeze({host:l,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Wt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Wt($o(p,r.config.emulator)&&$o(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,wd(l)?(qS(`${a}//${l}${m}`),G5("Auth",!0)):QJ()}function xL(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function XJ(t){const e=xL(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:T4(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:T4(l)}}}function T4(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function QJ(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class aI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return uu("not implemented")}_getIdTokenResponse(e){return uu("not implemented")}_linkToIdToken(e,n){return uu("not implemented")}_getReauthenticationResolver(e){return uu("not implemented")}}async function ZJ(t,e){return uf(t,"POST","/v1/accounts:signUp",e)}async function JJ(t,e){return h0(t,"POST","/v1/accounts:signInWithPassword",lf(t,e))}async function eee(t,e){return h0(t,"POST","/v1/accounts:signInWithEmailLink",lf(t,e))}async function tee(t,e){return h0(t,"POST","/v1/accounts:signInWithEmailLink",lf(t,e))}class Cp extends aI{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Cp(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Cp(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return EA(e,n,"signInWithPassword",JJ);case"emailLink":return eee(e,{email:this._email,oobCode:this._password});default:Yo(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return EA(e,r,"signUpPassword",ZJ);case"emailLink":return tee(e,{idToken:n,email:this._email,oobCode:this._password});default:Yo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Dh(t,e){return h0(t,"POST","/v1/accounts:signInWithIdp",lf(t,e))}const nee="http://localhost";class ld extends aI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ld(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Yo("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const l=new ld(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Dh(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Dh(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Dh(e,n)}buildRequest(){const e={requestUri:nee,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yp(n)}return e}}function ree(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iee(t){const e=Gg(Hg(t)).link,n=e?Gg(Hg(e)).deep_link_id:null,r=Gg(Hg(t)).deep_link_id;return(r?Gg(Hg(r)).link:null)||r||n||e||t}class sI{constructor(e){const n=Gg(Hg(e)),r=n.apiKey??null,i=n.oobCode??null,a=ree(n.mode??null);Wt(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=iee(e);try{return new sI(n)}catch{return null}}}class Dm{constructor(){this.providerId=Dm.PROVIDER_ID}static credential(e,n){return Cp._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=sI.parseLink(n);return Wt(r,"argument-error"),Cp._fromEmailAndCode(e,r.code,r.tenantId)}}Dm.PROVIDER_ID="password";Dm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Dm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class bL{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class m0 extends bL{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _c extends m0{constructor(){super("facebook.com")}static credential(e){return ld._fromParams({providerId:_c.PROVIDER_ID,signInMethod:_c.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _c.credentialFromTaggedObject(e)}static credentialFromError(e){return _c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _c.credential(e.oauthAccessToken)}catch{return null}}}_c.FACEBOOK_SIGN_IN_METHOD="facebook.com";_c.PROVIDER_ID="facebook.com";class Ec extends m0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ld._fromParams({providerId:Ec.PROVIDER_ID,signInMethod:Ec.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ec.credentialFromTaggedObject(e)}static credentialFromError(e){return Ec.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ec.credential(n,r)}catch{return null}}}Ec.GOOGLE_SIGN_IN_METHOD="google.com";Ec.PROVIDER_ID="google.com";class Ac extends m0{constructor(){super("github.com")}static credential(e){return ld._fromParams({providerId:Ac.PROVIDER_ID,signInMethod:Ac.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ac.credentialFromTaggedObject(e)}static credentialFromError(e){return Ac.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ac.credential(e.oauthAccessToken)}catch{return null}}}Ac.GITHUB_SIGN_IN_METHOD="github.com";Ac.PROVIDER_ID="github.com";class Sc extends m0{constructor(){super("twitter.com")}static credential(e,n){return ld._fromParams({providerId:Sc.PROVIDER_ID,signInMethod:Sc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Sc.credentialFromTaggedObject(e)}static credentialFromError(e){return Sc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Sc.credential(n,r)}catch{return null}}}Sc.TWITTER_SIGN_IN_METHOD="twitter.com";Sc.PROVIDER_ID="twitter.com";async function aee(t,e){return h0(t,"POST","/v1/accounts:signUp",lf(t,e))}class ud{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await qo._fromIdTokenResponse(e,r,i),l=I4(r);return new ud({user:a,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=I4(r);return new ud({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function I4(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class hv extends Ru{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,hv.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new hv(e,n,r,i)}}function wL(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?hv._fromErrorAndOperation(t,a,e,r):a})}async function see(t,e,n=!1){const r=await Ip(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ud._forOperation(t,"link",r)}async function oee(t,e,n=!1){const{auth:r}=t;if(Ao(r.app))return Promise.reject(mu(r));const i="reauthenticate";try{const a=await Ip(t,wL(r,i,e,t),n);Wt(a.idToken,r,"internal-error");const l=rI(a.idToken);Wt(l,r,"internal-error");const{sub:f}=l;return Wt(t.uid===f,r,"user-mismatch"),ud._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Yo(r,"user-mismatch"),a}}async function _L(t,e,n=!1){if(Ao(t.app))return Promise.reject(mu(t));const r="signIn",i=await wL(t,r,e),a=await ud._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function lee(t,e){return _L(Od(t),e)}async function EL(t){const e=Od(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function uee(t,e,n){if(Ao(t.app))return Promise.reject(mu(t));const r=Od(t),l=await EA(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aee).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&EL(t),m}),f=await ud._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(f.user),f}function cee(t,e,n){return Ao(t.app)?Promise.reject(mu(t)):lee(wr(t),Dm.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&EL(t),r})}function fee(t,e,n,r){return wr(t).onIdTokenChanged(e,n,r)}function dee(t,e,n){return wr(t).beforeAuthStateChanged(e,n)}function hee(t,e,n,r){return wr(t).onAuthStateChanged(e,n,r)}function mee(t){return wr(t).signOut()}const mv="__sak";class AL{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mv,"1"),this.storage.removeItem(mv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const gee=1e3,pee=10;class SL extends AL{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gL(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,f,m)=>{this.notifyListeners(l,m)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);DJ()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,pee):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},gee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}SL.type="LOCAL";const yee=SL;class TL extends AL{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}TL.type="SESSION";const IL=TL;function vee(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Xx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Xx(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,l=this.handlersMap[i];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const f=Array.from(l).map(async p=>p(n.origin,a)),m=await vee(f);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xx.receivers=[];function oI(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class xee{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((f,m)=>{const p=oI("",20);i.port1.start();const b=setTimeout(()=>{m(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(_){const T=_;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(b),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(T.data.response);break;default:clearTimeout(b),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function Tl(){return window}function bee(t){Tl().location.href=t}function CL(){return typeof Tl().WorkerGlobalScope<"u"&&typeof Tl().importScripts=="function"}async function wee(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _ee(){return navigator?.serviceWorker?.controller||null}function Eee(){return CL()?self:null}const OL="firebaseLocalStorageDb",Aee=1,gv="firebaseLocalStorage",NL="fbase_key";class g0{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qx(t,e){return t.transaction([gv],e?"readwrite":"readonly").objectStore(gv)}function See(){const t=indexedDB.deleteDatabase(OL);return new g0(t).toPromise()}function AA(){const t=indexedDB.open(OL,Aee);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(gv,{keyPath:NL})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(gv)?e(r):(r.close(),await See(),e(await AA()))})})}async function C4(t,e,n){const r=Qx(t,!0).put({[NL]:e,value:n});return new g0(r).toPromise()}async function Tee(t,e){const n=Qx(t,!1).get(e),r=await new g0(n).toPromise();return r===void 0?null:r.value}function O4(t,e){const n=Qx(t,!0).delete(e);return new g0(n).toPromise()}const Iee=800,Cee=3;class RL{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await AA(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Cee)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CL()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xx._getInstance(Eee()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await wee(),!this.activeServiceWorker)return;this.sender=new xee(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_ee()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await AA();return await C4(e,mv,"1"),await O4(e,mv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>C4(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Tee(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>O4(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Qx(i,!1).getAll();return new g0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Iee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RL.type="LOCAL";const Oee=RL;new d0(3e4,6e4);function Nee(t,e){return e?cu(e):(Wt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class lI extends aI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Dh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Dh(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Ree(t){return _L(t.auth,new lI(t),t.bypassAuthState)}function Pee(t){const{auth:e,user:n}=t;return Wt(n,e,"internal-error"),oee(n,new lI(t),t.bypassAuthState)}async function Dee(t){const{auth:e,user:n}=t;return Wt(n,e,"internal-error"),see(n,new lI(t),t.bypassAuthState)}class PL{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:l,type:f}=e;if(l){this.reject(l);return}const m={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ree;case"linkViaPopup":case"linkViaRedirect":return Dee;case"reauthViaPopup":case"reauthViaRedirect":return Pee;default:Yo(this.auth,"internal-error")}}resolve(e){_u(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_u(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const kee=new d0(2e3,1e4);class Ah extends PL{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Ah.currentPopupAction&&Ah.currentPopupAction.cancel(),Ah.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Wt(e,this.auth,"internal-error"),e}async onExecution(){_u(this.filter.length===1,"Popup operations only handle one event");const e=oI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Sl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ah.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kee.get())};e()}}Ah.currentPopupAction=null;const Mee="pendingRedirect",Ny=new Map;class jee extends PL{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ny.get(this.auth._key());if(!e){try{const r=await Lee(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ny.set(this.auth._key(),e)}return this.bypassAuthState||Ny.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Lee(t,e){const n=Vee(e),r=Fee(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Bee(t,e){Ny.set(t._key(),e)}function Fee(t){return cu(t._redirectPersistence)}function Vee(t){return Oy(Mee,t.config.apiKey,t.name)}async function zee(t,e,n=!1){if(Ao(t.app))return Promise.reject(mu(t));const r=Od(t),i=Nee(r,e),l=await new jee(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}const Uee=600*1e3;class qee{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Gee(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!DL(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Sl(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Uee&&this.cachedEventUids.clear(),this.cachedEventUids.has(N4(e))}saveEventToCache(e){this.cachedEventUids.add(N4(e)),this.lastProcessedEventTime=Date.now()}}function N4(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DL({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Gee(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DL(t);default:return!1}}async function Hee(t,e={}){return uf(t,"GET","/v1/projects",e)}const Kee=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wee=/^https?/;async function $ee(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Hee(t);for(const n of e)try{if(Yee(n))return}catch{}Yo(t,"unauthorized-domain")}function Yee(t){const e=wA(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!Wee.test(n))return!1;if(Kee.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Xee=new d0(3e4,6e4);function R4(){const t=Tl().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Qee(t){return new Promise((e,n)=>{function r(){R4(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{R4(),n(Sl(t,"network-request-failed"))},timeout:Xee.get()})}if(Tl().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Tl().gapi?.load)r();else{const i=UJ("iframefcb");return Tl()[i]=()=>{gapi.load?r():n(Sl(t,"network-request-failed"))},yL(`${zJ()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Ry=null,e})}let Ry=null;function Zee(t){return Ry=Ry||Qee(t),Ry}const Jee=new d0(5e3,15e3),ete="__/auth/iframe",tte="emulator/auth/iframe",nte={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rte=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ite(t){const e=t.config;Wt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?nI(e,tte):`https://${t.config.authDomain}/${ete}`,r={apiKey:e.apiKey,appName:t.name,v:bm},i=rte.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Yp(r).slice(1)}`}async function ate(t){const e=await Zee(t),n=Tl().gapi;return Wt(n,t,"internal-error"),e.open({where:document.body,url:ite(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nte,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=Sl(t,"network-request-failed"),f=Tl().setTimeout(()=>{a(l)},Jee.get());function m(){Tl().clearTimeout(f),i(r)}r.ping(m).then(m,()=>{a(l)})}))}const ste={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ote=500,lte=600,ute="_blank",cte="http://localhost";class P4{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fte(t,e,n,r=ote,i=lte){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const m={...ste,width:r.toString(),height:i.toString(),top:a,left:l},p=$i().toLowerCase();n&&(f=cL(p)?ute:n),lL(p)&&(e=e||cte,m.scrollbars="yes");const b=Object.entries(m).reduce((T,[R,j])=>`${T}${R}=${j},`,"");if(PJ(p)&&f!=="_self")return dte(e||"",f),new P4(null);const _=window.open(e||"",f,b);Wt(_,t,"popup-blocked");try{_.focus()}catch{}return new P4(_)}function dte(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const hte="__/auth/handler",mte="emulator/auth/handler",gte=encodeURIComponent("fac");async function D4(t,e,n,r,i,a){Wt(t.config.authDomain,t,"auth-domain-config-required"),Wt(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:bm,eventId:i};if(e instanceof bL){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",ZK(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,_]of Object.entries({}))l[b]=_}if(e instanceof m0){const b=e.getScopes().filter(_=>_!=="");b.length>0&&(l.scopes=b.join(","))}t.tenantId&&(l.tid=t.tenantId);const f=l;for(const b of Object.keys(f))f[b]===void 0&&delete f[b];const m=await t._getAppCheckToken(),p=m?`#${gte}=${encodeURIComponent(m)}`:"";return`${pte(t)}?${Yp(f).slice(1)}${p}`}function pte({config:t}){return t.emulator?nI(t,mte):`https://${t.authDomain}/${hte}`}const n2="webStorageSupport";class yte{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IL,this._completeRedirectFn=zee,this._overrideRedirectResult=Bee}async _openPopup(e,n,r,i){_u(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await D4(e,n,r,wA(),i);return fte(e,a,oI())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await D4(e,n,r,wA(),i);return bee(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(_u(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ate(e),r=new qee(e);return n.register("authEvent",i=>(Wt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(n2,{type:n2},i=>{const a=i?.[0]?.[n2];a!==void 0&&n(!!a),Yo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$ee(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gL()||uL()||iI()}}const vte=yte;var k4="@firebase/auth",M4="1.12.0";class xte{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Wt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bte(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wte(t){Fh(new Zf("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:f}=r.options;Wt(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:l,authDomain:f,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pL(t)},p=new BJ(r,i,a,m);return $J(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Fh(new Zf("auth-internal",e=>{const n=Od(e.getProvider("auth").getImmediate());return(r=>new xte(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kc(k4,M4,bte(t)),kc(k4,M4,"esm2020")}const _te=300,Ete=q5("authIdTokenMaxAge")||_te;let j4=null;const Ate=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ete)return;const i=n?.token;j4!==i&&(j4=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Ste(t=Z5()){const e=Xp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=WJ(t,{popupRedirectResolver:vte,persistence:[Oee,yee,IL]}),r=q5("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=Ate(a.toString());dee(n,l,()=>l(n.currentUser)),fee(n,f=>l(f))}}const i=z5("auth");return i&&YJ(n,`http://${i}`),n}function Tte(){return document.getElementsByTagName("head")?.[0]??document}FJ({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Sl("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",Tte().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wte("Browser");const Ite={apiKey:"AIzaSyCZZ2ywKsEe2ha3LyA-W_LWmFp1v8uqGv0",authDomain:"bodybalance-39bd5.firebaseapp.com",projectId:"bodybalance-39bd5",storageBucket:"bodybalance-39bd5.firebasestorage.app",messagingSenderId:"494273576542",appId:"1:494273576542:web:341c8966ffad7a9a213ecf"},uI=Q5(Ite),Go=Ste(uI),Ti=O7(uI),Cte=Object.freeze(Object.defineProperty({__proto__:null,app:uI,auth:Go,firestore:Ti},Symbol.toStringTag,{value:"Module"})),L4=t=>{let e;const n=new Set,r=(p,b)=>{const _=typeof p=="function"?p(e):p;if(!Object.is(_,e)){const T=e;e=b??(typeof _!="object"||_===null)?_:Object.assign({},e,_),n.forEach(R=>R(e,T))}},i=()=>e,f={setState:r,getState:i,getInitialState:()=>m,subscribe:p=>(n.add(p),()=>n.delete(p))},m=e=t(r,i,f);return f},Ote=(t=>t?L4(t):L4),Nte=t=>t;function Rte(t,e=Nte){const n=qg.useSyncExternalStore(t.subscribe,qg.useCallback(()=>e(t.getState()),[t,e]),qg.useCallback(()=>e(t.getInitialState()),[t,e]));return qg.useDebugValue(n),n}const B4=t=>{const e=Ote(t),n=r=>Rte(e,r);return Object.assign(n,e),n},Zx=(t=>t?B4(t):B4);var Py={exports:{}},Pte=Py.exports,F4;function Dte(){return F4||(F4=1,(function(t,e){((n,r)=>{t.exports=r()})(Pte,function(){var n=function(d,v){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(A,I){A.__proto__=I}:function(A,I){for(var N in I)Object.prototype.hasOwnProperty.call(I,N)&&(A[N]=I[N])}))(d,v)},r=function(){return(r=Object.assign||function(d){for(var v,A=1,I=arguments.length;A<I;A++)for(var N in v=arguments[A])Object.prototype.hasOwnProperty.call(v,N)&&(d[N]=v[N]);return d}).apply(this,arguments)};function i(d,v,A){for(var I,N=0,k=v.length;N<k;N++)!I&&N in v||((I=I||Array.prototype.slice.call(v,0,N))[N]=v[N]);return d.concat(I||Array.prototype.slice.call(v))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ug,l=Object.keys,f=Array.isArray;function m(d,v){return typeof v=="object"&&l(v).forEach(function(A){d[A]=v[A]}),d}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var p=Object.getPrototypeOf,b={}.hasOwnProperty;function _(d,v){return b.call(d,v)}function T(d,v){typeof v=="function"&&(v=v(p(d))),(typeof Reflect>"u"?l:Reflect.ownKeys)(v).forEach(function(A){j(d,A,v[A])})}var R=Object.defineProperty;function j(d,v,A,I){R(d,v,m(A&&_(A,"get")&&typeof A.get=="function"?{get:A.get,set:A.set,configurable:!0}:{value:A,configurable:!0,writable:!0},I))}function M(d){return{from:function(v){return d.prototype=Object.create(v.prototype),j(d.prototype,"constructor",d),{extend:T.bind(null,d.prototype)}}}}var L=Object.getOwnPropertyDescriptor,z=[].slice;function $(d,v,A){return z.call(d,v,A)}function K(d,v){return v(d)}function J(d){if(!d)throw new Error("Assertion Failed")}function ce(d){a.setImmediate?setImmediate(d):setTimeout(d,0)}function Z(d,v){if(typeof v=="string"&&_(d,v))return d[v];if(!v)return d;if(typeof v!="string"){for(var A=[],I=0,N=v.length;I<N;++I){var k=Z(d,v[I]);A.push(k)}return A}var F,G=v.indexOf(".");return G===-1||(F=d[v.substr(0,G)])==null?void 0:Z(F,v.substr(G+1))}function V(d,v,A){if(d&&v!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof v!="string"&&"length"in v){J(typeof A!="string"&&"length"in A);for(var I=0,N=v.length;I<N;++I)V(d,v[I],A[I])}else{var k,F,G=v.indexOf(".");G!==-1?(k=v.substr(0,G),(G=v.substr(G+1))===""?A===void 0?f(d)&&!isNaN(parseInt(k))?d.splice(k,1):delete d[k]:d[k]=A:V(F=(F=d[k])&&_(d,k)?F:d[k]={},G,A)):A===void 0?f(d)&&!isNaN(parseInt(v))?d.splice(v,1):delete d[v]:d[v]=A}}function W(d){var v,A={};for(v in d)_(d,v)&&(A[v]=d[v]);return A}var U=[].concat;function ae(d){return U.apply([],d)}var Ee="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ae([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(v){return v+d+"Array"})}))).filter(function(d){return a[d]}),ie=new Set(Ee.map(function(d){return a[d]})),Q=null;function ne(d){return Q=new WeakMap,d=(function v(A){if(!A||typeof A!="object")return A;var I=Q.get(A);if(I)return I;if(f(A)){I=[],Q.set(A,I);for(var N=0,k=A.length;N<k;++N)I.push(v(A[N]))}else if(ie.has(A.constructor))I=A;else{var F,G=p(A);for(F in I=G===Object.prototype?{}:Object.create(G),Q.set(A,I),A)_(A,F)&&(I[F]=v(A[F]))}return I})(d),Q=null,d}var be={}.toString;function he(d){return be.call(d).slice(8,-1)}var ye=typeof Symbol<"u"?Symbol.iterator:"@@iterator",we=typeof ye=="symbol"?function(d){var v;return d!=null&&(v=d[ye])&&v.apply(d)}:function(){return null};function $e(d,v){v=d.indexOf(v),0<=v&&d.splice(v,1)}var et={};function rt(d){var v,A,I,N;if(arguments.length===1){if(f(d))return d.slice();if(this===et&&typeof d=="string")return[d];if(N=we(d))for(A=[];!(I=N.next()).done;)A.push(I.value);else{if(d==null)return[d];if(typeof(v=d.length)!="number")return[d];for(A=new Array(v);v--;)A[v]=d[v]}}else for(v=arguments.length,A=new Array(v);v--;)A[v]=arguments[v];return A}var de=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ee=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],$n=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ee),Xe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ge(d,v){this.name=d,this.message=v}function vt(d,v){return d+". Errors: "+Object.keys(v).map(function(A){return v[A].toString()}).filter(function(A,I,N){return N.indexOf(A)===I}).join(`
`)}function qe(d,v,A,I){this.failures=v,this.failedKeys=I,this.successCount=A,this.message=vt(d,v)}function ze(d,v){this.name="BulkError",this.failures=Object.keys(v).map(function(A){return v[A]}),this.failuresByPos=v,this.message=vt(d,this.failures)}M(Ge).from(Error).extend({toString:function(){return this.name+": "+this.message}}),M(qe).from(Ge),M(ze).from(Ge);var ct=$n.reduce(function(d,v){return d[v]=v+"Error",d},{}),Se=Ge,Oe=$n.reduce(function(d,v){var A=v+"Error";function I(N,k){this.name=A,N?typeof N=="string"?(this.message="".concat(N).concat(k?`
 `+k:""),this.inner=k||null):typeof N=="object"&&(this.message="".concat(N.name," ").concat(N.message),this.inner=N):(this.message=Xe[v]||A,this.inner=null)}return M(I).from(Se),d[v]=I,d},{}),ft=(Oe.Syntax=SyntaxError,Oe.Type=TypeError,Oe.Range=RangeError,Ee.reduce(function(d,v){return d[v+"Error"]=Oe[v],d},{}));Ee=$n.reduce(function(d,v){return["Syntax","Type","Range"].indexOf(v)===-1&&(d[v+"Error"]=Oe[v]),d},{});function Fe(){}function pt(d){return d}function Lt(d,v){return d==null||d===pt?v:function(A){return v(d(A))}}function cn(d,v){return function(){d.apply(this,arguments),v.apply(this,arguments)}}function Ln(d,v){return d===Fe?v:function(){var A=d.apply(this,arguments),I=(A!==void 0&&(arguments[0]=A),this.onsuccess),N=this.onerror,k=(this.onsuccess=null,this.onerror=null,v.apply(this,arguments));return I&&(this.onsuccess=this.onsuccess?cn(I,this.onsuccess):I),N&&(this.onerror=this.onerror?cn(N,this.onerror):N),k!==void 0?k:A}}function ot(d,v){return d===Fe?v:function(){d.apply(this,arguments);var A=this.onsuccess,I=this.onerror;this.onsuccess=this.onerror=null,v.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?cn(A,this.onsuccess):A),I&&(this.onerror=this.onerror?cn(I,this.onerror):I)}}function Vt(d,v){return d===Fe?v:function(N){var I=d.apply(this,arguments),N=(m(N,I),this.onsuccess),k=this.onerror,F=(this.onsuccess=null,this.onerror=null,v.apply(this,arguments));return N&&(this.onsuccess=this.onsuccess?cn(N,this.onsuccess):N),k&&(this.onerror=this.onerror?cn(k,this.onerror):k),I===void 0?F===void 0?void 0:F:m(I,F)}}function xt(d,v){return d===Fe?v:function(){return v.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function $t(d,v){return d===Fe?v:function(){var A=d.apply(this,arguments);if(A&&typeof A.then=="function"){for(var I=this,N=arguments.length,k=new Array(N);N--;)k[N]=arguments[N];return A.then(function(){return v.apply(I,k)})}return v.apply(this,arguments)}}Ee.ModifyError=qe,Ee.DexieError=Ge,Ee.BulkError=ze;var it=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function na(d){it=d}var zs={},hr=100,ba=typeof Promise>"u"?[]:($n=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[ba=crypto.subtle.digest("SHA-512",new Uint8Array([0])),p(ba),$n]:[$n,p($n),$n]),$n=ba[0],sn=ba[1],sn=sn&&sn.then,Fa=$n&&$n.constructor,bi=!!ba[2],Lr=function(d,v){Fn.push([d,v]),gs&&(queueMicrotask(ii),gs=!1)},Po=!0,gs=!0,ps=[],In=[],at=pt,fn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Fe,pgp:!1,env:{},finalize:Fe},Je=fn,Fn=[],Oi=0,Us=[];function ht(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var v=this._PSD=Je;if(typeof d!="function"){if(d!==zs)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&wa(this,this._value)}else this._state=null,this._value=null,++v.ref,(function A(I,N){try{N(function(k){if(I._state===null){if(k===I)throw new TypeError("A promise cannot be resolved with itself.");var F=I._lib&&Hr();k&&typeof k.then=="function"?A(I,function(G,X){k instanceof ht?k._then(G,X):k.then(G,X)}):(I._state=!0,I._value=k,Va(I)),F&&qi()}},wa.bind(null,I))}catch(k){wa(I,k)}})(this,d)}var tn={get:function(){var d=Je,v=mt;function A(I,N){var k=this,F=!d.global&&(d!==Je||v!==mt),G=F&&!Nr(),X=new ht(function(re,te){Er(k,new Yn(Pi(I,d,F,G),Pi(N,d,F,G),re,te,d))});return this._consoleTask&&(X._consoleTask=this._consoleTask),X}return A.prototype=zs,A},set:function(d){j(this,"then",d&&d.prototype===zs?tn:{get:function(){return d},set:tn.set})}};function Yn(d,v,A,I,N){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof v=="function"?v:null,this.resolve=A,this.reject=I,this.psd=N}function wa(d,v){var A,I;In.push(v),d._state===null&&(A=d._lib&&Hr(),v=at(v),d._state=!1,d._value=v,I=d,ps.some(function(N){return N._value===I._value})||ps.push(I),Va(d),A)&&qi()}function Va(d){var v=d._listeners;d._listeners=[];for(var A=0,I=v.length;A<I;++A)Er(d,v[A]);var N=d._PSD;--N.ref||N.finalize(),Oi===0&&(++Oi,Lr(function(){--Oi==0&&ra()},[]))}function Er(d,v){if(d._state===null)d._listeners.push(v);else{var A=d._state?v.onFulfilled:v.onRejected;if(A===null)return(d._state?v.resolve:v.reject)(d._value);++v.psd.ref,++Oi,Lr(Ll,[A,d,v])}}function Ll(d,v,A){try{var I,N=v._value;!v._state&&In.length&&(In=[]),I=it&&v._consoleTask?v._consoleTask.run(function(){return d(N)}):d(N),v._state||In.indexOf(N)!==-1||(k=>{for(var F=ps.length;F;)if(ps[--F]._value===k._value)return ps.splice(F,1)})(v),A.resolve(I)}catch(k){A.reject(k)}finally{--Oi==0&&ra(),--A.psd.ref||A.psd.finalize()}}function ii(){Ri(fn,function(){Hr()&&qi()})}function Hr(){var d=Po;return gs=Po=!1,d}function qi(){var d,v,A;do for(;0<Fn.length;)for(d=Fn,Fn=[],A=d.length,v=0;v<A;++v){var I=d[v];I[0].apply(null,I[1])}while(0<Fn.length);gs=Po=!0}function ra(){for(var d=ps,v=(ps=[],d.forEach(function(I){I._PSD.onunhandled.call(null,I._value,I)}),Us.slice(0)),A=v.length;A;)v[--A]()}function ys(d){return new ht(zs,!1,d)}function _n(d,v){var A=Je;return function(){var I=Hr(),N=Je;try{return Wr(A,!0),d.apply(this,arguments)}catch(k){v&&v(k)}finally{Wr(N,!1),I&&qi()}}}T(ht.prototype,{then:tn,_then:function(d,v){Er(this,new Yn(null,null,d,v,Je))},catch:function(d){var v,A;return arguments.length===1?this.then(null,d):(v=d,A=arguments[1],typeof v=="function"?this.then(null,function(I){return(I instanceof v?A:ys)(I)}):this.then(null,function(I){return(I&&I.name===v?A:ys)(I)}))},finally:function(d){return this.then(function(v){return ht.resolve(d()).then(function(){return v})},function(v){return ht.resolve(d()).then(function(){return ys(v)})})},timeout:function(d,v){var A=this;return d<1/0?new ht(function(I,N){var k=setTimeout(function(){return N(new Oe.Timeout(v))},d);A.then(I,N).finally(clearTimeout.bind(null,k))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&j(ht.prototype,Symbol.toStringTag,"Dexie.Promise"),fn.env=Bl(),T(ht,{all:function(){var d=rt.apply(null,arguments).map(za);return new ht(function(v,A){d.length===0&&v([]);var I=d.length;d.forEach(function(N,k){return ht.resolve(N).then(function(F){d[k]=F,--I||v(d)},A)})})},resolve:function(d){return d instanceof ht?d:d&&typeof d.then=="function"?new ht(function(v,A){d.then(v,A)}):new ht(zs,!0,d)},reject:ys,race:function(){var d=rt.apply(null,arguments).map(za);return new ht(function(v,A){d.map(function(I){return ht.resolve(I).then(v,A)})})},PSD:{get:function(){return Je},set:function(d){return Je=d}},totalEchoes:{get:function(){return mt}},newPSD:Vn,usePSD:Ri,scheduler:{get:function(){return Lr},set:function(d){Lr=d}},rejectionMapper:{get:function(){return at},set:function(d){at=d}},follow:function(d,v){return new ht(function(A,I){return Vn(function(N,k){var F=Je;F.unhandleds=[],F.onunhandled=k,F.finalize=cn(function(){var G,X=this;G=function(){X.unhandleds.length===0?N():k(X.unhandleds[0])},Us.push(function re(){G(),Us.splice(Us.indexOf(re),1)}),++Oi,Lr(function(){--Oi==0&&ra()},[])},F.finalize),d()},v,A,I)})}}),Fa&&(Fa.allSettled&&j(ht,"allSettled",function(){var d=rt.apply(null,arguments).map(za);return new ht(function(v){d.length===0&&v([]);var A=d.length,I=new Array(A);d.forEach(function(N,k){return ht.resolve(N).then(function(F){return I[k]={status:"fulfilled",value:F}},function(F){return I[k]={status:"rejected",reason:F}}).then(function(){return--A||v(I)})})})}),Fa.any&&typeof AggregateError<"u"&&j(ht,"any",function(){var d=rt.apply(null,arguments).map(za);return new ht(function(v,A){d.length===0&&A(new AggregateError([]));var I=d.length,N=new Array(I);d.forEach(function(k,F){return ht.resolve(k).then(function(G){return v(G)},function(G){N[F]=G,--I||A(new AggregateError(N))})})})}),Fa.withResolvers)&&(ht.withResolvers=Fa.withResolvers);var mr={awaits:0,echoes:0,id:0},Kr=0,ci=[],fi=0,mt=0,Ni=0;function Vn(d,F,A,I){var N=Je,k=Object.create(N),F=(k.parent=N,k.ref=0,k.global=!1,k.id=++Ni,fn.env,k.env=bi?{Promise:ht,PromiseProp:{value:ht,configurable:!0,writable:!0},all:ht.all,race:ht.race,allSettled:ht.allSettled,any:ht.any,resolve:ht.resolve,reject:ht.reject}:{},F&&m(k,F),++N.ref,k.finalize=function(){--this.parent.ref||this.parent.finalize()},Ri(k,d,A,I));return k.ref===0&&k.finalize(),F}function gn(){return mr.id||(mr.id=++Kr),++mr.awaits,mr.echoes+=hr,mr.id}function Nr(){return!!mr.awaits&&(--mr.awaits==0&&(mr.id=0),mr.echoes=mr.awaits*hr,!0)}function za(d){return mr.echoes&&d&&d.constructor===Fa?(gn(),d.then(function(v){return Nr(),v},function(v){return Nr(),Mt(v)})):d}function Zo(){var d=ci[ci.length-1];ci.pop(),Wr(d,!1)}function Wr(d,v){var A,I,N=Je;(v?!mr.echoes||fi++&&d===Je:!fi||--fi&&d===Je)||queueMicrotask(v?(function(k){++mt,mr.echoes&&--mr.echoes!=0||(mr.echoes=mr.awaits=mr.id=0),ci.push(Je),Wr(k,!0)}).bind(null,d):Zo),d!==Je&&(Je=d,N===fn&&(fn.env=Bl()),bi)&&(A=fn.env.Promise,I=d.env,N.global||d.global)&&(Object.defineProperty(a,"Promise",I.PromiseProp),A.all=I.all,A.race=I.race,A.resolve=I.resolve,A.reject=I.reject,I.allSettled&&(A.allSettled=I.allSettled),I.any)&&(A.any=I.any)}function Bl(){var d=a.Promise;return bi?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function Ri(d,v,A,I,N){var k=Je;try{return Wr(d,!0),v(A,I,N)}finally{Wr(k,!1)}}function Pi(d,v,A,I){return typeof d!="function"?d:function(){var N=Je;A&&gn(),Wr(v,!0);try{return d.apply(this,arguments)}finally{Wr(N,!1),I&&queueMicrotask(Nr)}}}function Qn(d){Promise===Fa&&mr.echoes===0?fi===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+sn).indexOf("[native code]")===-1&&(gn=Nr=Fe);var Mt=ht.reject,$r="",rr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ar="String expected.",He=[],uo="__dbnames",Cn="readonly",wi="readwrite";function ss(d,v){return d?v?function(){return d.apply(this,arguments)&&v.apply(this,arguments)}:d:v}var yn={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ln(d){return typeof d!="string"||/\./.test(d)?function(v){return v}:function(v){return v[d]===void 0&&d in v&&delete(v=ne(v))[d],v}}function nn(){throw Oe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Zt(d,v){try{var A=Di(d),I=Di(v);if(A!==I)return A==="Array"?1:I==="Array"?-1:A==="binary"?1:I==="binary"?-1:A==="string"?1:I==="string"?-1:A==="Date"?1:I!=="Date"?NaN:-1;switch(A){case"number":case"Date":case"string":return v<d?1:d<v?-1:0;case"binary":for(var N=Sr(d),k=Sr(v),F=N.length,G=k.length,X=F<G?F:G,re=0;re<X;++re)if(N[re]!==k[re])return N[re]<k[re]?-1:1;return F===G?0:F<G?-1:1;case"Array":for(var te=d,oe=v,fe=te.length,le=oe.length,ge=fe<le?fe:le,me=0;me<ge;++me){var _e=Zt(te[me],oe[me]);if(_e!==0)return _e}return fe===le?0:fe<le?-1:1}}catch{}return NaN}function Di(d){var v=typeof d;return v=="object"&&(ArrayBuffer.isView(d)||(v=he(d))==="ArrayBuffer")?"binary":v}function Sr(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function rn(d,v,A){var I=d.schema.yProps;return I?(v&&0<A.numFailures&&(v=v.filter(function(N,k){return!A.failures[k]})),Promise.all(I.map(function(N){return N=N.updatesTable,v?d.db.table(N).where("k").anyOf(v).delete():d.db.table(N).clear()})).then(function(){return A})):A}Jo.prototype.execute=function(d){var v=this["@@propmod"];if(v.add!==void 0){var A=v.add;if(f(A))return i(i([],f(d)?d:[],!0),A).sort();if(typeof A=="number")return(Number(d)||0)+A;if(typeof A=="bigint")try{return BigInt(d)+A}catch{return BigInt(0)+A}throw new TypeError("Invalid term ".concat(A))}if(v.remove!==void 0){var I=v.remove;if(f(I))return f(d)?d.filter(function(N){return!I.includes(N)}).sort():[];if(typeof I=="number")return Number(d)-I;if(typeof I=="bigint")try{return BigInt(d)-I}catch{return BigInt(0)-I}throw new TypeError("Invalid subtrahend ".concat(I))}return A=(A=v.replacePrefix)==null?void 0:A[0],A&&typeof d=="string"&&d.startsWith(A)?v.replacePrefix[1]+d.substring(A.length):d};var ai=Jo;function Jo(d){this["@@propmod"]=d}function Ut(d,v){for(var A=l(v),I=A.length,N=!1,k=0;k<I;++k){var F=A[k],G=v[F],X=Z(d,F);G instanceof ai?(V(d,F,G.execute(X)),N=!0):X!==G&&(V(d,F,G),N=!0)}return N}vn.prototype._trans=function(d,v,A){var I=this._tx||Je.trans,N=this.name,k=it&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function F(re,te,oe){if(oe.schema[N])return v(oe.idbtrans,oe);throw new Oe.NotFound("Table "+N+" not part of transaction")}var G=Hr();try{var X=I&&I.db._novip===this.db._novip?I===Je.trans?I._promise(d,F,A):Vn(function(){return I._promise(d,F,A)},{trans:I,transless:Je.transless||Je}):(function re(te,oe,fe,le){if(te.idbdb&&(te._state.openComplete||Je.letThrough||te._vip)){var ge=te._createTransaction(oe,fe,te._dbSchema);try{ge.create(),te._state.PR1398_maxLoop=3}catch(me){return me.name===ct.InvalidState&&te.isOpen()&&0<--te._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),te.close({disableAutoOpen:!1}),te.open().then(function(){return re(te,oe,fe,le)})):Mt(me)}return ge._promise(oe,function(me,_e){return Vn(function(){return Je.trans=ge,le(me,_e,ge)})}).then(function(me){if(oe==="readwrite")try{ge.idbtrans.commit()}catch{}return oe==="readonly"?me:ge._completion.then(function(){return me})})}if(te._state.openComplete)return Mt(new Oe.DatabaseClosed(te._state.dbOpenError));if(!te._state.isBeingOpened){if(!te._state.autoOpen)return Mt(new Oe.DatabaseClosed);te.open().catch(Fe)}return te._state.dbReadyPromise.then(function(){return re(te,oe,fe,le)})})(this.db,d,[this.name],F);return k&&(X._consoleTask=k,X=X.catch(function(re){return console.trace(re),Mt(re)})),X}finally{G&&qi()}},vn.prototype.get=function(d,v){var A=this;return d&&d.constructor===Object?this.where(d).first(v):d==null?Mt(new Oe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(I){return A.core.get({trans:I,key:d}).then(function(N){return A.hook.reading.fire(N)})}).then(v)},vn.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(f(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var v=l(d);if(v.length===1)return this.where(v[0]).equals(d[v[0]]);var A=this.schema.indexes.concat(this.schema.primKey).filter(function(G){if(G.compound&&v.every(function(re){return 0<=G.keyPath.indexOf(re)})){for(var X=0;X<v.length;++X)if(v.indexOf(G.keyPath[X])===-1)return!1;return!0}return!1}).sort(function(G,X){return G.keyPath.length-X.keyPath.length})[0];if(A&&this.db._maxKey!==$r)return F=A.keyPath.slice(0,v.length),this.where(F).equals(F.map(function(G){return d[G]}));!A&&it&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(v.join("+"),"]"));var I=this.schema.idxByName;function N(G,X){return Zt(G,X)===0}var F=v.reduce(function(te,X){var re=te[0],te=te[1],oe=I[X],fe=d[X];return[re||oe,re||!oe?ss(te,oe&&oe.multi?function(le){return le=Z(le,X),f(le)&&le.some(function(ge){return N(fe,ge)})}:function(le){return N(fe,Z(le,X))}):te]},[null,null]),k=F[0],F=F[1];return k?this.where(k.name).equals(d[k.keyPath]).filter(F):A?this.filter(F):this.where(v).equals("")},vn.prototype.filter=function(d){return this.toCollection().and(d)},vn.prototype.count=function(d){return this.toCollection().count(d)},vn.prototype.offset=function(d){return this.toCollection().offset(d)},vn.prototype.limit=function(d){return this.toCollection().limit(d)},vn.prototype.each=function(d){return this.toCollection().each(d)},vn.prototype.toArray=function(d){return this.toCollection().toArray(d)},vn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},vn.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,f(d)?"[".concat(d.join("+"),"]"):d))},vn.prototype.reverse=function(){return this.toCollection().reverse()},vn.prototype.mapToClass=function(d){for(var v=this.db,A=this.name,I=((this.schema.mappedClass=d).prototype instanceof nn&&(d=(F=>{var G=te,X=F;if(typeof X!="function"&&X!==null)throw new TypeError("Class extends value "+String(X)+" is not a constructor or null");function re(){this.constructor=G}function te(){return F!==null&&F.apply(this,arguments)||this}return n(G,X),G.prototype=X===null?Object.create(X):(re.prototype=X.prototype,new re),Object.defineProperty(te.prototype,"db",{get:function(){return v},enumerable:!1,configurable:!0}),te.prototype.table=function(){return A},te})(d)),new Set),N=d.prototype;N;N=p(N))Object.getOwnPropertyNames(N).forEach(function(F){return I.add(F)});function k(F){if(!F)return F;var G,X=Object.create(d.prototype);for(G in F)if(!I.has(G))try{X[G]=F[G]}catch{}return X}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=k,this.hook("reading",k),d},vn.prototype.defineClass=function(){return this.mapToClass(function(d){m(this,d)})},vn.prototype.add=function(d,v){var A=this,I=this.schema.primKey,N=I.auto,k=I.keyPath,F=d;return k&&N&&(F=ln(k)(d)),this._trans("readwrite",function(G){return A.core.mutate({trans:G,type:"add",keys:v!=null?[v]:null,values:[F]})}).then(function(G){return G.numFailures?ht.reject(G.failures[0]):G.lastResult}).then(function(G){if(k)try{V(d,k,G)}catch{}return G})},vn.prototype.upsert=function(d,v){var A=this,I=this.schema.primKey.keyPath;return this._trans("readwrite",function(N){return A.core.get({trans:N,key:d}).then(function(k){var F=k??{};return Ut(F,v),I&&V(F,I,d),A.core.mutate({trans:N,type:"put",values:[F],keys:[d],upsert:!0,updates:{keys:[d],changeSpecs:[v]}}).then(function(G){return G.numFailures?ht.reject(G.failures[0]):!!k})})})},vn.prototype.update=function(d,v){return typeof d!="object"||f(d)?this.where(":id").equals(d).modify(v):(d=Z(d,this.schema.primKey.keyPath))===void 0?Mt(new Oe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(v)},vn.prototype.put=function(d,v){var A=this,I=this.schema.primKey,N=I.auto,k=I.keyPath,F=d;return k&&N&&(F=ln(k)(d)),this._trans("readwrite",function(G){return A.core.mutate({trans:G,type:"put",values:[F],keys:v!=null?[v]:null})}).then(function(G){return G.numFailures?ht.reject(G.failures[0]):G.lastResult}).then(function(G){if(k)try{V(d,k,G)}catch{}return G})},vn.prototype.delete=function(d){var v=this;return this._trans("readwrite",function(A){return v.core.mutate({trans:A,type:"delete",keys:[d]}).then(function(I){return rn(v,[d],I)}).then(function(I){return I.numFailures?ht.reject(I.failures[0]):void 0})})},vn.prototype.clear=function(){var d=this;return this._trans("readwrite",function(v){return d.core.mutate({trans:v,type:"deleteRange",range:yn}).then(function(A){return rn(d,null,A)})}).then(function(v){return v.numFailures?ht.reject(v.failures[0]):void 0})},vn.prototype.bulkGet=function(d){var v=this;return this._trans("readonly",function(A){return v.core.getMany({keys:d,trans:A}).then(function(I){return I.map(function(N){return v.hook.reading.fire(N)})})})},vn.prototype.bulkAdd=function(d,v,A){var I=this,N=Array.isArray(v)?v:void 0,k=(A=A||(N?void 0:v))?A.allKeys:void 0;return this._trans("readwrite",function(F){var G=I.schema.primKey,re=G.auto,G=G.keyPath;if(G&&N)throw new Oe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(N&&N.length!==d.length)throw new Oe.InvalidArgument("Arguments objects and keys must have the same length");var X=d.length,re=G&&re?d.map(ln(G)):d;return I.core.mutate({trans:F,type:"add",keys:N,values:re,wantResults:k}).then(function(te){var oe=te.numFailures,fe=te.failures;if(oe===0)return k?te.results:te.lastResult;throw new ze("".concat(I.name,".bulkAdd(): ").concat(oe," of ").concat(X," operations failed"),fe)})})},vn.prototype.bulkPut=function(d,v,A){var I=this,N=Array.isArray(v)?v:void 0,k=(A=A||(N?void 0:v))?A.allKeys:void 0;return this._trans("readwrite",function(F){var G=I.schema.primKey,re=G.auto,G=G.keyPath;if(G&&N)throw new Oe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(N&&N.length!==d.length)throw new Oe.InvalidArgument("Arguments objects and keys must have the same length");var X=d.length,re=G&&re?d.map(ln(G)):d;return I.core.mutate({trans:F,type:"put",keys:N,values:re,wantResults:k}).then(function(te){var oe=te.numFailures,fe=te.failures;if(oe===0)return k?te.results:te.lastResult;throw new ze("".concat(I.name,".bulkPut(): ").concat(oe," of ").concat(X," operations failed"),fe)})})},vn.prototype.bulkUpdate=function(d){var v=this,A=this.core,I=d.map(function(F){return F.key}),N=d.map(function(F){return F.changes}),k=[];return this._trans("readwrite",function(F){return A.getMany({trans:F,keys:I,cache:"clone"}).then(function(G){var X=[],re=[],te=(d.forEach(function(oe,fe){var le=oe.key,ge=oe.changes,me=G[fe];if(me){for(var _e=0,Ne=Object.keys(ge);_e<Ne.length;_e++){var xe=Ne[_e],je=ge[xe];if(xe===v.schema.primKey.keyPath){if(Zt(je,le)!==0)throw new Oe.Constraint("Cannot update primary key in bulkUpdate()")}else V(me,xe,je)}k.push(fe),X.push(le),re.push(me)}}),X.length);return A.mutate({trans:F,type:"put",keys:X,values:re,updates:{keys:I,changeSpecs:N}}).then(function(oe){var fe=oe.numFailures,le=oe.failures;if(fe===0)return te;for(var ge=0,me=Object.keys(le);ge<me.length;ge++){var _e,Ne=me[ge],xe=k[Number(Ne)];xe!=null&&(_e=le[Ne],delete le[Ne],le[xe]=_e)}throw new ze("".concat(v.name,".bulkUpdate(): ").concat(fe," of ").concat(te," operations failed"),le)})})})},vn.prototype.bulkDelete=function(d){var v=this,A=d.length;return this._trans("readwrite",function(I){return v.core.mutate({trans:I,type:"delete",keys:d}).then(function(N){return rn(v,d,N)})}).then(function(I){var N=I.numFailures,k=I.failures;if(N===0)return I.lastResult;throw new ze("".concat(v.name,".bulkDelete(): ").concat(N," of ").concat(A," operations failed"),k)})};var Gi=vn;function vn(){}function ki(d){function v(F,G){if(G){for(var X=arguments.length,re=new Array(X-1);--X;)re[X-1]=arguments[X];return A[F].subscribe.apply(null,re),d}if(typeof F=="string")return A[F]}var A={};v.addEventType=k;for(var I=1,N=arguments.length;I<N;++I)k(arguments[I]);return v;function k(F,G,X){var re,te;if(typeof F!="object")return G=G||xt,te={subscribers:[],fire:X=X||Fe,subscribe:function(oe){te.subscribers.indexOf(oe)===-1&&(te.subscribers.push(oe),te.fire=G(te.fire,oe))},unsubscribe:function(oe){te.subscribers=te.subscribers.filter(function(fe){return fe!==oe}),te.fire=te.subscribers.reduce(G,X)}},A[F]=v[F]=te;l(re=F).forEach(function(oe){var fe=re[oe];if(f(fe))k(oe,re[oe][0],re[oe][1]);else{if(fe!=="asap")throw new Oe.InvalidArgument("Invalid event config");var le=k(oe,pt,function(){for(var ge=arguments.length,me=new Array(ge);ge--;)me[ge]=arguments[ge];le.subscribers.forEach(function(_e){ce(function(){_e.apply(null,me)})})})}})}}function Yt(d,v){return M(v).from({prototype:d}),v}function Zn(d,v){return!(d.filter||d.algorithm||d.or)&&(v?d.justLimit:!d.replayFilter)}function Ie(d,v){d.filter=ss(d.filter,v)}function ue(d,v,A){var I=d.replayFilter;d.replayFilter=I?function(){return ss(I(),v())}:v,d.justLimit=A&&!I}function At(d,v){if(d.isPrimKey)return v.primaryKey;var A=v.getIndexByKeyPath(d.index);if(A)return A;throw new Oe.Schema("KeyPath "+d.index+" on object store "+v.name+" is not indexed")}function Rr(d,v,A){var I=At(d,v.schema);return v.openCursor({trans:A,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:I,range:d.range}})}function Pr(d,v,A,I){var N,k,F=d.replayFilter?ss(d.filter,d.replayFilter()):d.filter;return d.or?(N={},k=function(G,X,re){var te,oe;F&&!F(X,re,function(fe){return X.stop(fe)},function(fe){return X.fail(fe)})||((oe=""+(te=X.primaryKey))=="[object ArrayBuffer]"&&(oe=""+new Uint8Array(te)),_(N,oe))||(N[oe]=!0,v(G,X,re))},Promise.all([d.or._iterate(k,A),Hi(Rr(d,I,A),d.algorithm,k,!d.keysOnly&&d.valueMapper)])):Hi(Rr(d,I,A),ss(d.algorithm,F),v,!d.keysOnly&&d.valueMapper)}function Hi(d,v,A,I){var N=_n(I?function(k,F,G){return A(I(k),F,G)}:A);return d.then(function(k){if(k)return k.start(function(){var F=function(){return k.continue()};v&&!v(k,function(G){return F=G},function(G){k.stop(G),F=Fe},function(G){k.fail(G),F=Fe})||N(k.value,k,function(G){return F=G}),F()})})}qt.prototype._read=function(d,v){var A=this._ctx;return A.error?A.table._trans(null,Mt.bind(null,A.error)):A.table._trans("readonly",d).then(v)},qt.prototype._write=function(d){var v=this._ctx;return v.error?v.table._trans(null,Mt.bind(null,v.error)):v.table._trans("readwrite",d,"locked")},qt.prototype._addAlgorithm=function(d){var v=this._ctx;v.algorithm=ss(v.algorithm,d)},qt.prototype._iterate=function(d,v){return Pr(this._ctx,d,v,this._ctx.table.core)},qt.prototype.clone=function(d){var v=Object.create(this.constructor.prototype),A=Object.create(this._ctx);return d&&m(A,d),v._ctx=A,v},qt.prototype.raw=function(){return this._ctx.valueMapper=null,this},qt.prototype.each=function(d){var v=this._ctx;return this._read(function(A){return Pr(v,d,A,v.table.core)})},qt.prototype.count=function(d){var v=this;return this._read(function(A){var I,N=v._ctx,k=N.table.core;return Zn(N,!0)?k.count({trans:A,query:{index:At(N,k.schema),range:N.range}}).then(function(F){return Math.min(F,N.limit)}):(I=0,Pr(N,function(){return++I,!1},A,k).then(function(){return I}))}).then(d)},qt.prototype.sortBy=function(d,v){var A=d.split(".").reverse(),I=A[0],N=A.length-1;function k(X,re){return re?k(X[A[re]],re-1):X[I]}var F=this._ctx.dir==="next"?1:-1;function G(X,re){return Zt(k(X,N),k(re,N))*F}return this.toArray(function(X){return X.sort(G)}).then(v)},qt.prototype.toArray=function(d){var v=this;return this._read(function(A){var I,N,k,F=v._ctx;return F.dir==="next"&&Zn(F,!0)&&0<F.limit?(I=F.valueMapper,N=At(F,F.table.core.schema),F.table.core.query({trans:A,limit:F.limit,values:!0,query:{index:N,range:F.range}}).then(function(G){return G=G.result,I?G.map(I):G})):(k=[],Pr(F,function(G){return k.push(G)},A,F.table.core).then(function(){return k}))},d)},qt.prototype.offset=function(d){var v=this._ctx;return d<=0||(v.offset+=d,Zn(v)?ue(v,function(){var A=d;return function(I,N){return A===0||(A===1?--A:N(function(){I.advance(A),A=0}),!1)}}):ue(v,function(){var A=d;return function(){return--A<0}})),this},qt.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),ue(this._ctx,function(){var v=d;return function(A,I,N){return--v<=0&&I(N),0<=v}},!0),this},qt.prototype.until=function(d,v){return Ie(this._ctx,function(A,I,N){return!d(A.value)||(I(N),v)}),this},qt.prototype.first=function(d){return this.limit(1).toArray(function(v){return v[0]}).then(d)},qt.prototype.last=function(d){return this.reverse().first(d)},qt.prototype.filter=function(d){var v;return Ie(this._ctx,function(A){return d(A.value)}),(v=this._ctx).isMatch=ss(v.isMatch,d),this},qt.prototype.and=function(d){return this.filter(d)},qt.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},qt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},qt.prototype.desc=function(){return this.reverse()},qt.prototype.eachKey=function(d){var v=this._ctx;return v.keysOnly=!v.isMatch,this.each(function(A,I){d(I.key,I)})},qt.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},qt.prototype.eachPrimaryKey=function(d){var v=this._ctx;return v.keysOnly=!v.isMatch,this.each(function(A,I){d(I.primaryKey,I)})},qt.prototype.keys=function(d){var v=this._ctx,A=(v.keysOnly=!v.isMatch,[]);return this.each(function(I,N){A.push(N.key)}).then(function(){return A}).then(d)},qt.prototype.primaryKeys=function(d){var v=this._ctx;if(v.dir==="next"&&Zn(v,!0)&&0<v.limit)return this._read(function(I){var N=At(v,v.table.core.schema);return v.table.core.query({trans:I,values:!1,limit:v.limit,query:{index:N,range:v.range}})}).then(function(I){return I.result}).then(d);v.keysOnly=!v.isMatch;var A=[];return this.each(function(I,N){A.push(N.primaryKey)}).then(function(){return A}).then(d)},qt.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},qt.prototype.firstKey=function(d){return this.limit(1).keys(function(v){return v[0]}).then(d)},qt.prototype.lastKey=function(d){return this.reverse().firstKey(d)},qt.prototype.distinct=function(){var d,v=this._ctx,v=v.index&&v.table.schema.idxByName[v.index];return v&&v.multi&&(d={},Ie(this._ctx,function(I){var I=I.primaryKey.toString(),N=_(d,I);return d[I]=!0,!N})),this},qt.prototype.modify=function(d){var v=this,A=this._ctx;return this._write(function(I){function N(me,_e){var Ne=_e.failures;fe+=me-_e.numFailures;for(var xe=0,je=l(Ne);xe<je.length;xe++){var Ke=je[xe];oe.push(Ne[Ke])}}var k=typeof d=="function"?d:function(me){return Ut(me,d)},F=A.table.core,te=F.schema.primaryKey,G=te.outbound,X=te.extractKey,re=200,te=v.db._options.modifyChunkSize,oe=(te&&(re=typeof te=="object"?te[F.name]||te["*"]||200:te),[]),fe=0,le=[],ge=d===Rt;return v.clone().primaryKeys().then(function(me){function _e(xe){var je=Math.min(re,me.length-xe),Ke=me.slice(xe,xe+je);return(ge?Promise.resolve([]):F.getMany({trans:I,keys:Ke,cache:"immutable"})).then(function(ut){var dt=[],tt=[],wt=G?[]:null,bt=ge?Ke:[];if(!ge)for(var st=0;st<je;++st){var _t=ut[st],Qt={value:ne(_t),primKey:me[xe+st]};k.call(Qt,Qt.value,Qt)!==!1&&(Qt.value==null?bt.push(me[xe+st]):G||Zt(X(_t),X(Qt.value))===0?(tt.push(Qt.value),G&&wt.push(me[xe+st])):(bt.push(me[xe+st]),dt.push(Qt.value)))}return Promise.resolve(0<dt.length&&F.mutate({trans:I,type:"add",values:dt}).then(function(wn){for(var Ft in wn.failures)bt.splice(parseInt(Ft),1);N(dt.length,wn)})).then(function(){return(0<tt.length||Ne&&typeof d=="object")&&F.mutate({trans:I,type:"put",keys:wt,values:tt,criteria:Ne,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<xe}).then(function(wn){return N(tt.length,wn)})}).then(function(){return(0<bt.length||Ne&&ge)&&F.mutate({trans:I,type:"delete",keys:bt,criteria:Ne,isAdditionalChunk:0<xe}).then(function(wn){return rn(A.table,bt,wn)}).then(function(wn){return N(bt.length,wn)})}).then(function(){return me.length>xe+je&&_e(xe+re)})})}var Ne=Zn(A)&&A.limit===1/0&&(typeof d!="function"||ge)&&{index:A.index,range:A.range};return _e(0).then(function(){if(0<oe.length)throw new qe("Error modifying one or more objects",oe,fe,le);return me.length})})})},qt.prototype.delete=function(){var d=this._ctx,v=d.range;return!Zn(d)||d.table.schema.yProps||!d.isPrimKey&&v.type!==3?this.modify(Rt):this._write(function(A){var I=d.table.core.schema.primaryKey,N=v;return d.table.core.count({trans:A,query:{index:I,range:N}}).then(function(k){return d.table.core.mutate({trans:A,type:"deleteRange",range:N}).then(function(X){var G=X.failures,X=X.numFailures;if(X)throw new qe("Could not delete some values",Object.keys(G).map(function(re){return G[re]}),k-X);return k-X})})})};var el=qt;function qt(){}var Rt=function(d,v){return v.value=null};function zn(d,v){return d<v?-1:d===v?0:1}function Fl(d,v){return v<d?-1:d===v?0:1}function Yr(d,v,A){return d=d instanceof Jn?new d.Collection(d):d,d._ctx.error=new(A||TypeError)(v),d}function _a(d){return new d.Collection(d,function(){return Ea("")}).limit(0)}function _i(le,v,A,I){var N,k,F,G,X,re,te,oe=A.length;if(!A.every(function(me){return typeof me=="string"}))return Yr(le,Ar);function fe(me){N=me==="next"?function(Ne){return Ne.toUpperCase()}:function(Ne){return Ne.toLowerCase()},k=me==="next"?function(Ne){return Ne.toLowerCase()}:function(Ne){return Ne.toUpperCase()},F=me==="next"?zn:Fl;var _e=A.map(function(Ne){return{lower:k(Ne),upper:N(Ne)}}).sort(function(Ne,xe){return F(Ne.lower,xe.lower)});G=_e.map(function(Ne){return Ne.upper}),X=_e.map(function(Ne){return Ne.lower}),te=(re=me)==="next"?"":I}fe("next");var le=new le.Collection(le,function(){return ia(G[0],X[oe-1]+I)}),ge=(le._ondirectionchange=function(me){fe(me)},0);return le._addAlgorithm(function(me,_e,Ne){var xe=me.key;if(typeof xe=="string"){var je=k(xe);if(v(je,X,ge))return!0;for(var Ke=null,ut=ge;ut<oe;++ut){var dt=((tt,wt,bt,st,_t,Qt)=>{for(var wn=Math.min(tt.length,st.length),Ft=-1,Jt=0;Jt<wn;++Jt){var gr=wt[Jt];if(gr!==st[Jt])return _t(tt[Jt],bt[Jt])<0?tt.substr(0,Jt)+bt[Jt]+bt.substr(Jt+1):_t(tt[Jt],st[Jt])<0?tt.substr(0,Jt)+st[Jt]+bt.substr(Jt+1):0<=Ft?tt.substr(0,Ft)+wt[Ft]+bt.substr(Ft+1):null;_t(tt[Jt],gr)<0&&(Ft=Jt)}return wn<st.length&&Qt==="next"?tt+bt.substr(tt.length):wn<tt.length&&Qt==="prev"?tt.substr(0,bt.length):Ft<0?null:tt.substr(0,Ft)+st[Ft]+bt.substr(Ft+1)})(xe,je,G[ut],X[ut],F,re);dt===null&&Ke===null?ge=ut+1:(Ke===null||0<F(Ke,dt))&&(Ke=dt)}_e(Ke!==null?function(){me.continue(Ke+te)}:Ne)}return!1}),le}function ia(d,v,A,I){return{type:2,lower:d,upper:v,lowerOpen:A,upperOpen:I}}function Ea(d){return{type:1,lower:d,upper:d}}Object.defineProperty(Mn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Mn.prototype.between=function(d,v,A,I){A=A!==!1,I=I===!0;try{return 0<this._cmp(d,v)||this._cmp(d,v)===0&&(A||I)&&(!A||!I)?_a(this):new this.Collection(this,function(){return ia(d,v,!A,!I)})}catch{return Yr(this,rr)}},Mn.prototype.equals=function(d){return d==null?Yr(this,rr):new this.Collection(this,function(){return Ea(d)})},Mn.prototype.above=function(d){return d==null?Yr(this,rr):new this.Collection(this,function(){return ia(d,void 0,!0)})},Mn.prototype.aboveOrEqual=function(d){return d==null?Yr(this,rr):new this.Collection(this,function(){return ia(d,void 0,!1)})},Mn.prototype.below=function(d){return d==null?Yr(this,rr):new this.Collection(this,function(){return ia(void 0,d,!1,!0)})},Mn.prototype.belowOrEqual=function(d){return d==null?Yr(this,rr):new this.Collection(this,function(){return ia(void 0,d)})},Mn.prototype.startsWith=function(d){return typeof d!="string"?Yr(this,Ar):this.between(d,d+$r,!0,!0)},Mn.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):_i(this,function(v,A){return v.indexOf(A[0])===0},[d],$r)},Mn.prototype.equalsIgnoreCase=function(d){return _i(this,function(v,A){return v===A[0]},[d],"")},Mn.prototype.anyOfIgnoreCase=function(){var d=rt.apply(et,arguments);return d.length===0?_a(this):_i(this,function(v,A){return A.indexOf(v)!==-1},d,"")},Mn.prototype.startsWithAnyOfIgnoreCase=function(){var d=rt.apply(et,arguments);return d.length===0?_a(this):_i(this,function(v,A){return A.some(function(I){return v.indexOf(I)===0})},d,$r)},Mn.prototype.anyOf=function(){var d,v,A=this,I=rt.apply(et,arguments),N=this._cmp;try{I.sort(N)}catch{return Yr(this,rr)}return I.length===0?_a(this):((d=new this.Collection(this,function(){return ia(I[0],I[I.length-1])}))._ondirectionchange=function(k){N=k==="next"?A._ascending:A._descending,I.sort(N)},v=0,d._addAlgorithm(function(k,F,G){for(var X=k.key;0<N(X,I[v]);)if(++v===I.length)return F(G),!1;return N(X,I[v])===0||(F(function(){k.continue(I[v])}),!1)}),d)},Mn.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Mn.prototype.noneOf=function(){var d=rt.apply(et,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return Yr(this,rr)}var v=d.reduce(function(A,I){return A?A.concat([[A[A.length-1][1],I]]):[[-1/0,I]]},null);return v.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(v,{includeLowers:!1,includeUppers:!1})},Mn.prototype.inAnyRange=function(d,Ne){var A=this,I=this._cmp,N=this._ascending,k=this._descending,F=this._min,G=this._max;if(d.length===0)return _a(this);if(!d.every(function(xe){return xe[0]!==void 0&&xe[1]!==void 0&&N(xe[0],xe[1])<=0}))return Yr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Oe.InvalidArgument);var X=!Ne||Ne.includeLowers!==!1,re=Ne&&Ne.includeUppers===!0,te,oe=N;function fe(xe,je){return oe(xe[0],je[0])}try{(te=d.reduce(function(xe,je){for(var Ke=0,ut=xe.length;Ke<ut;++Ke){var dt=xe[Ke];if(I(je[0],dt[1])<0&&0<I(je[1],dt[0])){dt[0]=F(dt[0],je[0]),dt[1]=G(dt[1],je[1]);break}}return Ke===ut&&xe.push(je),xe},[])).sort(fe)}catch{return Yr(this,rr)}var le=0,ge=re?function(xe){return 0<N(xe,te[le][1])}:function(xe){return 0<=N(xe,te[le][1])},me=X?function(xe){return 0<k(xe,te[le][0])}:function(xe){return 0<=k(xe,te[le][0])},_e=ge,Ne=new this.Collection(this,function(){return ia(te[0][0],te[te.length-1][1],!X,!re)});return Ne._ondirectionchange=function(xe){oe=xe==="next"?(_e=ge,N):(_e=me,k),te.sort(fe)},Ne._addAlgorithm(function(xe,je,Ke){for(var ut,dt=xe.key;_e(dt);)if(++le===te.length)return je(Ke),!1;return!ge(ut=dt)&&!me(ut)||(A._cmp(dt,te[le][1])===0||A._cmp(dt,te[le][0])===0||je(function(){oe===N?xe.continue(te[le][0]):xe.continue(te[le][1])}),!1)}),Ne},Mn.prototype.startsWithAnyOf=function(){var d=rt.apply(et,arguments);return d.every(function(v){return typeof v=="string"})?d.length===0?_a(this):this.inAnyRange(d.map(function(v){return[v,v+$r]})):Yr(this,"startsWithAnyOf() only works with strings")};var Jn=Mn;function Mn(){}function Tr(d){return _n(function(v){return Pt(v),d(v.target.error),!1})}function Pt(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var Ua="storagemutated",Bt="x-storagemutated-1",xn=ki(null,Ua),Do=(an.prototype._lock=function(){return J(!Je.global),++this._reculock,this._reculock!==1||Je.global||(Je.lockOwnerFor=this),this},an.prototype._unlock=function(){if(J(!Je.global),--this._reculock==0)for(Je.global||(Je.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{Ri(d[1],d[0])}catch{}}return this},an.prototype._locked=function(){return this._reculock&&Je.lockOwnerFor!==this},an.prototype.create=function(d){var v=this;if(this.mode){var A=this.db.idbdb,I=this.db._state.dbOpenError;if(J(!this.idbtrans),!d&&!A)switch(I&&I.name){case"DatabaseClosedError":throw new Oe.DatabaseClosed(I);case"MissingAPIError":throw new Oe.MissingAPI(I.message,I);default:throw new Oe.OpenFailed(I)}if(!this.active)throw new Oe.TransactionInactive;J(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||A).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=_n(function(N){Pt(N),v._reject(d.error)}),d.onabort=_n(function(N){Pt(N),v.active&&v._reject(new Oe.Abort(d.error)),v.active=!1,v.on("abort").fire(N)}),d.oncomplete=_n(function(){v.active=!1,v._resolve(),"mutatedParts"in d&&xn.storagemutated.fire(d.mutatedParts)})}return this},an.prototype._promise=function(d,v,A){var I,N=this;return d==="readwrite"&&this.mode!=="readwrite"?Mt(new Oe.ReadOnly("Transaction is readonly")):this.active?this._locked()?new ht(function(k,F){N._blockedFuncs.push([function(){N._promise(d,v,A).then(k,F)},Je])}):A?Vn(function(){var k=new ht(function(F,G){N._lock();var X=v(F,G,N);X&&X.then&&X.then(F,G)});return k.finally(function(){return N._unlock()}),k._lib=!0,k}):((I=new ht(function(k,F){var G=v(k,F,N);G&&G.then&&G.then(k,F)}))._lib=!0,I):Mt(new Oe.TransactionInactive)},an.prototype._root=function(){return this.parent?this.parent._root():this},an.prototype.waitFor=function(d){var v,A=this._root(),I=ht.resolve(d),N=(A._waitingFor?A._waitingFor=A._waitingFor.then(function(){return I}):(A._waitingFor=I,A._waitingQueue=[],v=A.idbtrans.objectStore(A.storeNames[0]),(function k(){for(++A._spinCount;A._waitingQueue.length;)A._waitingQueue.shift()();A._waitingFor&&(v.get(-1/0).onsuccess=k)})()),A._waitingFor);return new ht(function(k,F){I.then(function(G){return A._waitingQueue.push(_n(k.bind(null,G)))},function(G){return A._waitingQueue.push(_n(F.bind(null,G)))}).finally(function(){A._waitingFor===N&&(A._waitingFor=null)})})},an.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Oe.Abort))},an.prototype.table=function(d){var v=this._memoizedTables||(this._memoizedTables={});if(_(v,d))return v[d];var A=this.schema[d];if(A)return(A=new this.db.Table(d,A,this)).core=this.db.core.table(d),v[d]=A;throw new Oe.NotFound("Table "+d+" not part of transaction")},an);function an(){}function Aa(d,v,A,I,N,k,F,G){return{name:d,keyPath:v,unique:A,multi:I,auto:N,compound:k,src:(A&&!F?"&":"")+(I?"*":"")+(N?"++":"")+qa(v),type:G}}function qa(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function qs(d,v,A){return{name:d,primKey:v,indexes:A,mappedClass:null,idxByName:(I=function(N){return[N.name,N]},A.reduce(function(N,k,F){return k=I(k,F),k&&(N[k[0]]=k[1]),N},{}))};var I}var Sa=function(d){try{return d.only([[]]),Sa=function(){return[[]]},[[]]}catch{return Sa=function(){return $r},$r}};function Ta(d){return d==null?function(){}:typeof d=="string"?(v=d).split(".").length===1?function(A){return A[v]}:function(A){return Z(A,v)}:function(A){return Z(A,d)};var v}function aa(d){return[].slice.call(d)}var Ga=0;function ir(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function Ia(d,v,X){function I(ge){if(ge.type===3)return null;if(ge.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var oe=ge.lower,fe=ge.upper,le=ge.lowerOpen,ge=ge.upperOpen;return oe===void 0?fe===void 0?null:v.upperBound(fe,!!ge):fe===void 0?v.lowerBound(oe,!!le):v.bound(oe,fe,!!le,!!ge)}function N(te){var oe,fe=te.name;return{name:fe,schema:te,mutate:function(le){var ge=le.trans,me=le.type,_e=le.keys,Ne=le.values,xe=le.range;return new Promise(function(je,Ke){je=_n(je);var ut=ge.objectStore(fe),dt=ut.keyPath==null,tt=me==="put"||me==="add";if(!tt&&me!=="delete"&&me!=="deleteRange")throw new Error("Invalid operation type: "+me);var wt,bt=(_e||Ne||{length:1}).length;if(_e&&Ne&&_e.length!==Ne.length)throw new Error("Given keys array must have same length as given values array.");if(bt===0)return je({numFailures:0,failures:{},results:[],lastResult:void 0});function st(tr){++wn,Pt(tr)}var _t=[],Qt=[],wn=0;if(me==="deleteRange"){if(xe.type===4)return je({numFailures:wn,failures:Qt,results:[],lastResult:void 0});xe.type===3?_t.push(wt=ut.clear()):_t.push(wt=ut.delete(I(xe)))}else{var dt=tt?dt?[Ne,_e]:[Ne,null]:[_e,null],Ft=dt[0],Jt=dt[1];if(tt)for(var gr=0;gr<bt;++gr)_t.push(wt=Jt&&Jt[gr]!==void 0?ut[me](Ft[gr],Jt[gr]):ut[me](Ft[gr])),wt.onerror=st;else for(gr=0;gr<bt;++gr)_t.push(wt=ut[me](Ft[gr])),wt.onerror=st}function Xa(tr){tr=tr.target.result,_t.forEach(function(sl,qu){return sl.error!=null&&(Qt[qu]=sl.error)}),je({numFailures:wn,failures:Qt,results:me==="delete"?_e:_t.map(function(sl){return sl.result}),lastResult:tr})}wt.onerror=function(tr){st(tr),Xa(tr)},wt.onsuccess=Xa})},getMany:function(le){var ge=le.trans,me=le.keys;return new Promise(function(_e,Ne){_e=_n(_e);for(var xe,je=ge.objectStore(fe),Ke=me.length,ut=new Array(Ke),dt=0,tt=0,wt=function(_t){_t=_t.target,ut[_t._pos]=_t.result,++tt===dt&&_e(ut)},bt=Tr(Ne),st=0;st<Ke;++st)me[st]!=null&&((xe=je.get(me[st]))._pos=st,xe.onsuccess=wt,xe.onerror=bt,++dt);dt===0&&_e(ut)})},get:function(le){var ge=le.trans,me=le.key;return new Promise(function(_e,Ne){_e=_n(_e);var xe=ge.objectStore(fe).get(me);xe.onsuccess=function(je){return _e(je.target.result)},xe.onerror=Tr(Ne)})},query:(oe=G,function(le){return new Promise(function(ge,me){ge=_n(ge);var _e,Ne,xe,tt=le.trans,je=le.values,Ke=le.limit,dt=le.query,ut=Ke===1/0?void 0:Ke,wt=dt.index,dt=dt.range,tt=tt.objectStore(fe),tt=wt.isPrimaryKey?tt:tt.index(wt.name),wt=I(dt);if(Ke===0)return ge({result:[]});oe?((dt=je?tt.getAll(wt,ut):tt.getAllKeys(wt,ut)).onsuccess=function(bt){return ge({result:bt.target.result})},dt.onerror=Tr(me)):(_e=0,Ne=!je&&"openKeyCursor"in tt?tt.openKeyCursor(wt):tt.openCursor(wt),xe=[],Ne.onsuccess=function(bt){var st=Ne.result;return!st||(xe.push(je?st.value:st.primaryKey),++_e===Ke)?ge({result:xe}):void st.continue()},Ne.onerror=Tr(me))})}),openCursor:function(le){var ge=le.trans,me=le.values,_e=le.query,Ne=le.reverse,xe=le.unique;return new Promise(function(je,Ke){je=_n(je);var tt=_e.index,ut=_e.range,dt=ge.objectStore(fe),dt=tt.isPrimaryKey?dt:dt.index(tt.name),tt=Ne?xe?"prevunique":"prev":xe?"nextunique":"next",wt=!me&&"openKeyCursor"in dt?dt.openKeyCursor(I(ut),tt):dt.openCursor(I(ut),tt);wt.onerror=Tr(Ke),wt.onsuccess=_n(function(bt){var st,_t,Qt,wn,Ft=wt.result;Ft?(Ft.___id=++Ga,Ft.done=!1,st=Ft.continue.bind(Ft),_t=(_t=Ft.continuePrimaryKey)&&_t.bind(Ft),Qt=Ft.advance.bind(Ft),wn=function(){throw new Error("Cursor not stopped")},Ft.trans=ge,Ft.stop=Ft.continue=Ft.continuePrimaryKey=Ft.advance=function(){throw new Error("Cursor not started")},Ft.fail=_n(Ke),Ft.next=function(){var Jt=this,gr=1;return this.start(function(){return gr--?Jt.continue():Jt.stop()}).then(function(){return Jt})},Ft.start=function(Jt){function gr(){if(wt.result)try{Jt()}catch(tr){Ft.fail(tr)}else Ft.done=!0,Ft.start=function(){throw new Error("Cursor behind last entry")},Ft.stop()}var Xa=new Promise(function(tr,sl){tr=_n(tr),wt.onerror=Tr(sl),Ft.fail=sl,Ft.stop=function(qu){Ft.stop=Ft.continue=Ft.continuePrimaryKey=Ft.advance=wn,tr(qu)}});return wt.onsuccess=_n(function(tr){wt.onsuccess=gr,gr()}),Ft.continue=st,Ft.continuePrimaryKey=_t,Ft.advance=Qt,gr(),Xa},je(Ft)):je(null)},Ke)})},count:function(le){var ge=le.query,me=le.trans,_e=ge.index,Ne=ge.range;return new Promise(function(xe,je){var Ke=me.objectStore(fe),Ke=_e.isPrimaryKey?Ke:Ke.index(_e.name),ut=I(Ne),ut=ut?Ke.count(ut):Ke.count();ut.onsuccess=_n(function(dt){return xe(dt.target.result)}),ut.onerror=Tr(je)})}}}k=X,F=aa((X=d).objectStoreNames);var k,X={schema:{name:X.name,tables:F.map(function(te){return k.objectStore(te)}).map(function(te){var oe=te.keyPath,fe=te.autoIncrement,ge=f(oe),le={},ge={name:te.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:oe==null,compound:ge,keyPath:oe,autoIncrement:fe,unique:!0,extractKey:Ta(oe)},indexes:aa(te.indexNames).map(function(me){return te.index(me)}).map(function(xe){var je=xe.name,_e=xe.unique,Ne=xe.multiEntry,xe=xe.keyPath,je={name:je,compound:f(xe),keyPath:xe,unique:_e,multiEntry:Ne,extractKey:Ta(xe)};return le[ir(xe)]=je}),getIndexByKeyPath:function(me){return le[ir(me)]}};return le[":id"]=ge.primaryKey,oe!=null&&(le[ir(oe)]=ge.primaryKey),ge})},hasGetAll:0<F.length&&"getAll"in k.objectStore(F[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},F=X.schema,G=X.hasGetAll,X=F.tables.map(N),re={};return X.forEach(function(te){return re[te.name]=te}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(te){if(re[te])return re[te];throw new Error("Table '".concat(te,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Sa(v),schema:F}}function Ir(d,v,A,I){return A=A.IDBKeyRange,v=Ia(v,A,I),{dbcore:d.dbcore.reduce(function(N,k){return k=k.create,r(r({},N),k(N))},v)}}function Ha(d,v){var A=v.db,A=Ir(d._middlewares,A,d._deps,v);d.core=A.dbcore,d.tables.forEach(function(I){var N=I.name;d.core.schema.tables.some(function(k){return k.name===N})&&(I.core=d.core.table(N),d[N]instanceof d.Table)&&(d[N].core=I.core)})}function Gs(d,v,A,I){A.forEach(function(N){var k=I[N];v.forEach(function(F){var G=(function X(re,te){return L(re,te)||(re=p(re))&&X(re,te)})(F,N);(!G||"value"in G&&G.value===void 0)&&(F===d.Transaction.prototype||F instanceof d.Transaction?j(F,N,{get:function(){return this.table(N)},set:function(X){R(this,N,{value:X,writable:!0,configurable:!0,enumerable:!0})}}):F[N]=new d.Table(N,k))})})}function os(d,v){v.forEach(function(A){for(var I in A)A[I]instanceof d.Table&&delete A[I]})}function tl(d,v){return d._cfg.version-v._cfg.version}function vs(d,v,A,I){var N=d._dbSchema,k=(A.objectStoreNames.contains("$meta")&&!N.$meta&&(N.$meta=qs("$meta",Xt("")[0],[]),d._storeNames.push("$meta")),d._createTransaction("readwrite",d._storeNames,N)),F=(k.create(A),k._completion.catch(I),k._reject.bind(k)),G=Je.transless||Je;Vn(function(){if(Je.trans=k,Je.transless=G,v!==0)return Ha(d,A),re=v,((X=k).storeNames.includes("$meta")?X.table("$meta").get("version").then(function(te){return te??re}):ht.resolve(re)).then(function(_e){var oe=d,fe=_e,le=k,ge=A,me=[],_e=oe._versions,Ne=oe._dbSchema=bs(0,oe.idbdb,ge);return(_e=_e.filter(function(xe){return xe._cfg.version>=fe})).length===0?ht.resolve():(_e.forEach(function(xe){me.push(function(){var je,Ke,ut,dt=Ne,tt=xe._cfg.dbschema,wt=(Me(oe,dt,ge),Me(oe,tt,ge),Ne=oe._dbSchema=tt,En(dt,tt)),bt=(wt.add.forEach(function(st){xs(ge,st[0],st[1].primKey,st[1].indexes)}),wt.change.forEach(function(st){if(st.recreate)throw new Oe.Upgrade("Not yet support for changing primary key");var _t=ge.objectStore(st.name);st.add.forEach(function(Qt){return sa(_t,Qt)}),st.change.forEach(function(Qt){_t.deleteIndex(Qt.name),sa(_t,Qt)}),st.del.forEach(function(Qt){return _t.deleteIndex(Qt)})}),xe._cfg.contentUpgrade);if(bt&&xe._cfg.version>fe)return Ha(oe,ge),le._memoizedTables={},je=W(tt),wt.del.forEach(function(st){je[st]=dt[st]}),os(oe,[oe.Transaction.prototype]),Gs(oe,[oe.Transaction.prototype],l(je),je),le.schema=je,(Ke=de(bt))&&gn(),tt=ht.follow(function(){var st;(ut=bt(le))&&Ke&&(st=Nr.bind(null,null),ut.then(st,st))}),ut&&typeof ut.then=="function"?ht.resolve(ut):tt.then(function(){return ut})}),me.push(function(je){var Ke,ut,dt=xe._cfg.dbschema;Ke=dt,ut=je,[].slice.call(ut.db.objectStoreNames).forEach(function(tt){return Ke[tt]==null&&ut.db.deleteObjectStore(tt)}),os(oe,[oe.Transaction.prototype]),Gs(oe,[oe.Transaction.prototype],oe._storeNames,oe._dbSchema),le.schema=oe._dbSchema}),me.push(function(je){oe.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(oe.idbdb.version/10)===xe._cfg.version?(oe.idbdb.deleteObjectStore("$meta"),delete oe._dbSchema.$meta,oe._storeNames=oe._storeNames.filter(function(Ke){return Ke!=="$meta"})):je.objectStore("$meta").put(xe._cfg.version,"version"))})}),(function xe(){return me.length?ht.resolve(me.shift()(le.idbtrans)).then(xe):ht.resolve()})().then(function(){co(Ne,ge)}))}).catch(F);var X,re;l(N).forEach(function(te){xs(A,te,N[te].primKey,N[te].indexes)}),Ha(d,A),ht.follow(function(){return d.on.populate.fire(k)}).catch(F)})}function nl(d,v){co(d._dbSchema,v),v.db.version%10!=0||v.objectStoreNames.contains("$meta")||v.db.createObjectStore("$meta").add(Math.ceil(v.db.version/10-1),"version");var A=bs(0,d.idbdb,v);Me(d,d._dbSchema,v);for(var I=0,N=En(A,d._dbSchema).change;I<N.length;I++){var k=(F=>{if(F.change.length||F.recreate)return console.warn("Unable to patch indexes of table ".concat(F.name," because it has changes on the type of index or primary key.")),{value:void 0};var G=v.objectStore(F.name);F.add.forEach(function(X){it&&console.debug("Dexie upgrade patch: Creating missing index ".concat(F.name,".").concat(X.src)),sa(G,X)})})(N[I]);if(typeof k=="object")return k.value}}function En(d,v){var A,I={del:[],add:[],change:[]};for(A in d)v[A]||I.del.push(A);for(A in v){var N=d[A],k=v[A];if(N){var F={name:A,def:k,recreate:!1,del:[],add:[],change:[]};if(""+(N.primKey.keyPath||"")!=""+(k.primKey.keyPath||"")||N.primKey.auto!==k.primKey.auto)F.recreate=!0,I.change.push(F);else{var G=N.idxByName,X=k.idxByName,re=void 0;for(re in G)X[re]||F.del.push(re);for(re in X){var te=G[re],oe=X[re];te?te.src!==oe.src&&F.change.push(oe):F.add.push(oe)}(0<F.del.length||0<F.add.length||0<F.change.length)&&I.change.push(F)}}else I.add.push([A,k])}return I}function xs(d,v,A,I){var N=d.db.createObjectStore(v,A.keyPath?{keyPath:A.keyPath,autoIncrement:A.auto}:{autoIncrement:A.auto});I.forEach(function(k){return sa(N,k)})}function co(d,v){l(d).forEach(function(A){v.db.objectStoreNames.contains(A)||(it&&console.debug("Dexie: Creating missing table",A),xs(v,A,d[A].primKey,d[A].indexes))})}function sa(d,v){d.createIndex(v.name,v.keyPath,{unique:v.unique,multiEntry:v.multi})}function bs(d,v,A){var I={};return $(v.objectStoreNames,0).forEach(function(N){for(var k=A.objectStore(N),F=Aa(qa(re=k.keyPath),re||"",!0,!1,!!k.autoIncrement,re&&typeof re!="string",!0),G=[],X=0;X<k.indexNames.length;++X){var te=k.index(k.indexNames[X]),re=te.keyPath,te=Aa(te.name,re,!!te.unique,!!te.multiEntry,!1,re&&typeof re!="string",!1);G.push(te)}I[N]=qs(N,F,G)}),I}function Me(d,v,A){for(var I=A.db.objectStoreNames,N=0;N<I.length;++N){var k=I[N],F=A.objectStore(k);d._hasGetAll="getAll"in F;for(var G=0;G<F.indexNames.length;++G){var X,re=F.indexNames[G],te=F.index(re).keyPath,te=typeof te=="string"?te:"["+$(te).join("+")+"]";v[k]&&(X=v[k].idxByName[te])&&(X.name=re,delete v[k].idxByName[te],v[k].idxByName[re]=X)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function Xt(d){return d.split(",").map(function(v,A){var N=v.split(":"),I=(I=N[1])==null?void 0:I.trim(),N=(v=N[0].trim()).replace(/([&*]|\+\+)/g,""),k=/^\[/.test(N)?N.match(/^\[(.*)\]$/)[1].split("+"):N;return Aa(N,k||null,/\&/.test(v),/\*/.test(v),/\+\+/.test(v),f(k),A===0,I)})}Ka.prototype._createTableSchema=qs,Ka.prototype._parseIndexSyntax=Xt,Ka.prototype._parseStoresSpec=function(d,v){var A=this;l(d).forEach(function(I){if(d[I]!==null){var N=A._parseIndexSyntax(d[I]),k=N.shift();if(!k)throw new Oe.Schema("Invalid schema for table "+I+": "+d[I]);if(k.unique=!0,k.multi)throw new Oe.Schema("Primary key cannot be multiEntry*");N.forEach(function(F){if(F.auto)throw new Oe.Schema("Only primary key can be marked as autoIncrement (++)");if(!F.keyPath)throw new Oe.Schema("Index must have a name and cannot be an empty string")}),k=A._createTableSchema(I,k,N),v[I]=k}})},Ka.prototype.stores=function(A){var v=this.db,A=(this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,A):A,v._versions),I={},N={};return A.forEach(function(k){m(I,k._cfg.storesSource),N=k._cfg.dbschema={},k._parseStoresSpec(I,N)}),v._dbSchema=N,os(v,[v._allTables,v,v.Transaction.prototype]),Gs(v,[v._allTables,v,v.Transaction.prototype,this._cfg.tables],l(N),N),v._storeNames=l(N),this},Ka.prototype.upgrade=function(d){return this._cfg.contentUpgrade=$t(this._cfg.contentUpgrade||Fe,d),this};var Dr=Ka;function Ka(){}function ko(d,v){var A=d._dbNamesDB;return A||(A=d._dbNamesDB=new Es(uo,{addons:[],indexedDB:d,IDBKeyRange:v})).version(1).stores({dbnames:"name"}),A.table("dbnames")}function Wa(d){return d&&typeof d.databases=="function"}function rl(d){return Vn(function(){return Je.letThrough=!0,d()})}function il(d){return!("from"in d)}var Br=function(d,v){var A;if(!this)return A=new Br,d&&"d"in d&&m(A,d),A;m(this,arguments.length?{d:1,from:d,to:1<arguments.length?v:d}:{d:0})};function er(d,v,A){var I=Zt(v,A);if(!isNaN(I)){if(0<I)throw RangeError();if(il(d))return m(d,{from:v,to:A,d:1});var I=d.l,N=d.r;if(Zt(A,d.from)<0)return I?er(I,v,A):d.l={from:v,to:A,d:1,l:null,r:null},ls(d);if(0<Zt(v,d.to))return N?er(N,v,A):d.r={from:v,to:A,d:1,l:null,r:null},ls(d);Zt(v,d.from)<0&&(d.from=v,d.l=null,d.d=N?N.d+1:1),0<Zt(A,d.to)&&(d.to=A,d.r=null,d.d=d.l?d.l.d+1:1),v=!d.r,I&&!d.l&&oa(d,I),N&&v&&oa(d,N)}}function oa(d,v){il(v)||(function A(I,N){var k=N.from,F=N.l,G=N.r;er(I,k,N.to),F&&A(I,F),G&&A(I,G)})(d,v)}function dn(d,v){var A=ws(v),I=A.next();if(!I.done)for(var N=I.value,k=ws(d),F=k.next(N.from),G=F.value;!I.done&&!F.done;){if(Zt(G.from,N.to)<=0&&0<=Zt(G.to,N.from))return!0;Zt(N.from,G.from)<0?N=(I=A.next(G.from)).value:G=(F=k.next(N.from)).value}return!1}function ws(d){var v=il(d)?null:{s:0,n:d};return{next:function(A){for(var I=0<arguments.length;v;)switch(v.s){case 0:if(v.s=1,I)for(;v.n.l&&Zt(A,v.n.from)<0;)v={up:v,n:v.n.l,s:1};else for(;v.n.l;)v={up:v,n:v.n.l,s:1};case 1:if(v.s=2,!I||Zt(A,v.n.to)<=0)return{value:v.n,done:!1};case 2:if(v.n.r){v.s=3,v={up:v,n:v.n.r,s:0};continue}case 3:v=v.up}return{done:!0}}}}function ls(d){var v,A,I,N=(((N=d.r)==null?void 0:N.d)||0)-(((N=d.l)==null?void 0:N.d)||0),N=1<N?"r":N<-1?"l":"";N&&(v=N=="r"?"l":"r",A=r({},d),I=d[N],d.from=I.from,d.to=I.to,d[N]=I[N],A[N]=I[v],(d[v]=A).d=pn(A)),d.d=pn(d)}function pn(A){var v=A.r,A=A.l;return(v?A?Math.max(v.d,A.d):v.d:A?A.d:0)+1}function S(d,v){return l(v).forEach(function(A){d[A]?oa(d[A],v[A]):d[A]=(function I(N){var k,F,G={};for(k in N)_(N,k)&&(F=N[k],G[k]=!F||typeof F!="object"||ie.has(F.constructor)?F:I(F));return G})(v[A])}),d}function B(d,v){return d.all||v.all||Object.keys(d).some(function(A){return v[A]&&dn(v[A],d[A])})}T(Br.prototype,(($n={add:function(d){return oa(this,d),this},addKey:function(d){return er(this,d,d),this},addKeys:function(d){var v=this;return d.forEach(function(A){return er(v,A,A)}),this},hasKey:function(d){var v=ws(this).next(d).value;return v&&Zt(v.from,d)<=0&&0<=Zt(v.to,d)}})[ye]=function(){return ws(this)},$n));var H={},se={},Te=!1;function Be(d){S(se,d),Te||(Te=!0,setTimeout(function(){Te=!1,lt(se,!(se={}))},0))}function lt(d,v){v===void 0&&(v=!1);var A=new Set;if(d.all)for(var I=0,N=Object.values(H);I<N.length;I++)Ht(G=N[I],d,A,v);else for(var k in d){var F,G,k=/^idb\:\/\/(.*)\/(.*)\//.exec(k);k&&(F=k[1],k=k[2],G=H["idb://".concat(F,"/").concat(k)])&&Ht(G,d,A,v)}A.forEach(function(X){return X()})}function Ht(d,v,A,I){for(var N=[],k=0,F=Object.entries(d.queries.query);k<F.length;k++){for(var G=F[k],X=G[0],re=[],te=0,oe=G[1];te<oe.length;te++){var fe=oe[te];B(v,fe.obsSet)?fe.subscribers.forEach(function(_e){return A.add(_e)}):I&&re.push(fe)}I&&N.push([X,re])}if(I)for(var le=0,ge=N;le<ge.length;le++){var me=ge[le],X=me[0],re=me[1];d.queries.query[X]=re}}function kr(d){var v=d._state,A=d._deps.indexedDB;if(v.isBeingOpened||d.idbdb)return v.dbReadyPromise.then(function(){return v.dbOpenError?Mt(v.dbOpenError):d});v.isBeingOpened=!0,v.dbOpenError=null,v.openComplete=!1;var I=v.openCanceller,N=Math.round(10*d.verno),k=!1;function F(){if(v.openCanceller!==I)throw new Oe.DatabaseClosed("db.open() was cancelled")}function G(){return new ht(function(fe,le){if(F(),!A)throw new Oe.MissingAPI;var ge=d.name,me=v.autoSchema||!N?A.open(ge):A.open(ge,N);if(!me)throw new Oe.MissingAPI;me.onerror=Tr(le),me.onblocked=_n(d._fireOnBlocked),me.onupgradeneeded=_n(function(_e){var Ne;te=me.transaction,v.autoSchema&&!d._options.allowEmptyDB?(me.onerror=Pt,te.abort(),me.result.close(),(Ne=A.deleteDatabase(ge)).onsuccess=Ne.onerror=_n(function(){le(new Oe.NoSuchDatabase("Database ".concat(ge," doesnt exist")))})):(te.onerror=Tr(le),Ne=_e.oldVersion>Math.pow(2,62)?0:_e.oldVersion,oe=Ne<1,d.idbdb=me.result,k&&nl(d,te),vs(d,Ne/10,te,le))},le),me.onsuccess=_n(function(){te=null;var _e,Ne,xe,je,Ke,ut,dt=d.idbdb=me.result,tt=$(dt.objectStoreNames);if(0<tt.length)try{var wt=dt.transaction((Ke=tt).length===1?Ke[0]:Ke,"readonly");if(v.autoSchema)ut=dt,je=wt,(xe=d).verno=ut.version/10,je=xe._dbSchema=bs(0,ut,je),xe._storeNames=$(ut.objectStoreNames,0),Gs(xe,[xe._allTables],l(je),je);else if(Me(d,d._dbSchema,wt),Ne=wt,((Ne=En(bs(0,(_e=d).idbdb,Ne),_e._dbSchema)).add.length||Ne.change.some(function(bt){return bt.add.length||bt.change.length}))&&!k)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),dt.close(),N=dt.version+1,k=!0,fe(G());Ha(d,wt)}catch{}He.push(d),dt.onversionchange=_n(function(bt){v.vcFired=!0,d.on("versionchange").fire(bt)}),dt.onclose=_n(function(){d.close({disableAutoOpen:!1})}),oe&&(tt=d._deps,Ke=ge,Wa(ut=tt.indexedDB)||Ke===uo||ko(ut,tt.IDBKeyRange).put({name:Ke}).catch(Fe)),fe()},le)}).catch(function(fe){switch(fe?.name){case"UnknownError":if(0<v.PR1398_maxLoop)return v.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),G();break;case"VersionError":if(0<N)return N=0,G()}return ht.reject(fe)})}var X,re=v.dbReadyResolve,te=null,oe=!1;return ht.race([I,(typeof navigator>"u"?ht.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(fe){function le(){return indexedDB.databases().finally(fe)}X=setInterval(le,100),le()}).finally(function(){return clearInterval(X)}):Promise.resolve()).then(G)]).then(function(){return F(),v.onReadyBeingFired=[],ht.resolve(rl(function(){return d.on.ready.fire(d.vip)})).then(function fe(){var le;if(0<v.onReadyBeingFired.length)return le=v.onReadyBeingFired.reduce($t,Fe),v.onReadyBeingFired=[],ht.resolve(rl(function(){return le(d.vip)})).then(fe)})}).finally(function(){v.openCanceller===I&&(v.onReadyBeingFired=null,v.isBeingOpened=!1)}).catch(function(fe){v.dbOpenError=fe;try{te&&te.abort()}catch{}return I===v.openCanceller&&d._close(),Mt(fe)}).finally(function(){v.openComplete=!0,re()}).then(function(){var fe;return oe&&(fe={},d.tables.forEach(function(le){le.schema.indexes.forEach(function(ge){ge.name&&(fe["idb://".concat(d.name,"/").concat(le.name,"/").concat(ge.name)]=new Br(-1/0,[[[]]]))}),fe["idb://".concat(d.name,"/").concat(le.name,"/")]=fe["idb://".concat(d.name,"/").concat(le.name,"/:dels")]=new Br(-1/0,[[[]]])}),xn(Ua).fire(fe),lt(fe,!0)),d})}function bn(d){function v(k){return d.next(k)}var A=N(v),I=N(function(k){return d.throw(k)});function N(k){return function(G){var G=k(G),X=G.value;return G.done?X:X&&typeof X.then=="function"?X.then(A,I):f(X)?Promise.all(X).then(A,I):A(X)}}return N(v)()}function Un(d,v,A){for(var I=f(d)?d.slice():[d],N=0;N<A;++N)I.push(v);return I}var Ca={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return r(r({},d),{table:function(I){var A=d.table(I),I=A.schema,N={},k=[];function F(fe,le,ge){var xe=ir(fe),me=N[xe]=N[xe]||[],_e=fe==null?0:typeof fe=="string"?1:fe.length,Ne=0<le,xe=r(r({},ge),{name:Ne?"".concat(xe,"(virtual-from:").concat(ge.name,")"):ge.name,lowLevelIndex:ge,isVirtual:Ne,keyTail:le,keyLength:_e,extractKey:Ta(fe),unique:!Ne&&ge.unique});return me.push(xe),xe.isPrimaryKey||k.push(xe),1<_e&&F(_e===2?fe[0]:fe.slice(0,_e-1),le+1,ge),me.sort(function(je,Ke){return je.keyTail-Ke.keyTail}),xe}var G=F(I.primaryKey.keyPath,0,I.primaryKey);N[":id"]=[G];for(var X=0,re=I.indexes;X<re.length;X++){var te=re[X];F(te.keyPath,0,te)}function oe(fe){var le,ge=fe.query.index;return ge.isVirtual?r(r({},fe),{query:{index:ge.lowLevelIndex,range:(le=fe.query.range,ge=ge.keyTail,{type:le.type===1?2:le.type,lower:Un(le.lower,le.lowerOpen?d.MAX_KEY:d.MIN_KEY,ge),lowerOpen:!0,upper:Un(le.upper,le.upperOpen?d.MIN_KEY:d.MAX_KEY,ge),upperOpen:!0})}}):fe}return r(r({},A),{schema:r(r({},I),{primaryKey:G,indexes:k,getIndexByKeyPath:function(fe){return(fe=N[ir(fe)])&&fe[0]}}),count:function(fe){return A.count(oe(fe))},query:function(fe){return A.query(oe(fe))},openCursor:function(fe){var le=fe.query.index,ge=le.keyTail,me=le.keyLength;return le.isVirtual?A.openCursor(oe(fe)).then(function(Ne){return Ne&&_e(Ne)}):A.openCursor(fe);function _e(Ne){return Object.create(Ne,{continue:{value:function(xe){xe!=null?Ne.continue(Un(xe,fe.reverse?d.MAX_KEY:d.MIN_KEY,ge)):fe.unique?Ne.continue(Ne.key.slice(0,me).concat(fe.reverse?d.MIN_KEY:d.MAX_KEY,ge)):Ne.continue()}},continuePrimaryKey:{value:function(xe,je){Ne.continuePrimaryKey(Un(xe,d.MAX_KEY,ge),je)}},primaryKey:{get:function(){return Ne.primaryKey}},key:{get:function(){var xe=Ne.key;return me===1?xe[0]:xe.slice(0,me)}},value:{get:function(){return Ne.value}}})}}})}})}};function $a(d,v,A,I){return A=A||{},I=I||"",l(d).forEach(function(N){var k,F,G;_(v,N)?(k=d[N],F=v[N],typeof k=="object"&&typeof F=="object"&&k&&F?(G=he(k))!==he(F)?A[I+N]=v[N]:G==="Object"?$a(k,F,A,I+N+"."):k!==F&&(A[I+N]=v[N]):k!==F&&(A[I+N]=v[N])):A[I+N]=void 0}),l(v).forEach(function(N){_(d,N)||(A[I+N]=v[N])}),A}function di(d,v){return v.type==="delete"?v.keys:v.keys||v.values.map(d.extractKey)}var Oa={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return r(r({},d),{table:function(v){var A=d.table(v),I=A.schema.primaryKey;return r(r({},A),{mutate:function(N){var k=Je.trans,F=k.table(v).hook,G=F.deleting,X=F.creating,re=F.updating;switch(N.type){case"add":if(X.fire===Fe)break;return k._promise("readwrite",function(){return te(N)},!0);case"put":if(X.fire===Fe&&re.fire===Fe)break;return k._promise("readwrite",function(){return te(N)},!0);case"delete":if(G.fire===Fe)break;return k._promise("readwrite",function(){return te(N)},!0);case"deleteRange":if(G.fire===Fe)break;return k._promise("readwrite",function(){return(function oe(fe,le,ge){return A.query({trans:fe,values:!1,query:{index:I,range:le},limit:ge}).then(function(me){var _e=me.result;return te({type:"delete",keys:_e,trans:fe}).then(function(Ne){return 0<Ne.numFailures?Promise.reject(Ne.failures[0]):_e.length<ge?{failures:[],numFailures:0,lastResult:void 0}:oe(fe,r(r({},le),{lower:_e[_e.length-1],lowerOpen:!0}),ge)})})})(N.trans,N.range,1e4)},!0)}return A.mutate(N);function te(oe){var fe,le,ge,me=Je.trans,_e=oe.keys||di(I,oe);if(_e)return(oe=oe.type==="add"||oe.type==="put"?r(r({},oe),{keys:_e}):r({},oe)).type!=="delete"&&(oe.values=i([],oe.values)),oe.keys&&(oe.keys=i([],oe.keys)),fe=A,ge=_e,((le=oe).type==="add"?Promise.resolve([]):fe.getMany({trans:le.trans,keys:ge,cache:"immutable"})).then(function(Ne){var xe=_e.map(function(je,Ke){var ut,dt,tt,wt=Ne[Ke],bt={onerror:null,onsuccess:null};return oe.type==="delete"?G.fire.call(bt,je,wt,me):oe.type==="add"||wt===void 0?(ut=X.fire.call(bt,je,oe.values[Ke],me),je==null&&ut!=null&&(oe.keys[Ke]=je=ut,I.outbound||V(oe.values[Ke],I.keyPath,je))):(ut=$a(wt,oe.values[Ke]),(dt=re.fire.call(bt,ut,je,wt,me))&&(tt=oe.values[Ke],Object.keys(dt).forEach(function(st){_(tt,st)?tt[st]=dt[st]:V(tt,st,dt[st])}))),bt});return A.mutate(oe).then(function(je){for(var Ke=je.failures,ut=je.results,dt=je.numFailures,je=je.lastResult,tt=0;tt<_e.length;++tt){var wt=(ut||_e)[tt],bt=xe[tt];wt==null?bt.onerror&&bt.onerror(Ke[tt]):bt.onsuccess&&bt.onsuccess(oe.type==="put"&&Ne[tt]?oe.values[tt]:wt)}return{failures:Ke,results:ut,numFailures:dt,lastResult:je}}).catch(function(je){return xe.forEach(function(Ke){return Ke.onerror&&Ke.onerror(je)}),Promise.reject(je)})});throw new Error("Keys missing")}}})}})}};function fo(d,v,A){try{if(!v||v.keys.length<d.length)return null;for(var I=[],N=0,k=0;N<v.keys.length&&k<d.length;++N)Zt(v.keys[N],d[k])===0&&(I.push(A?ne(v.values[N]):v.values[N]),++k);return I.length===d.length?I:null}catch{return null}}var _s={stack:"dbcore",level:-1,create:function(d){return{table:function(v){var A=d.table(v);return r(r({},A),{getMany:function(I){var N;return I.cache?(N=fo(I.keys,I.trans._cache,I.cache==="clone"))?ht.resolve(N):A.getMany(I).then(function(k){return I.trans._cache={keys:I.keys,values:I.cache==="clone"?ne(k):k},k}):A.getMany(I)},mutate:function(I){return I.type!=="add"&&(I.trans._cache=null),A.mutate(I)}})}}}};function Mo(d,v){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!v.schema.primaryKey.outbound}function Hs(d,v){switch(d){case"query":return v.values&&!v.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Uu={stack:"dbcore",level:0,name:"Observability",create:function(d){var v=d.schema.name,A=new Br(d.MIN_KEY,d.MAX_KEY);return r(r({},d),{transaction:function(I,N,k){if(Je.subscr&&N!=="readonly")throw new Oe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Je.querier));return d.transaction(I,N,k)},table:function(I){function N(_e){var me,_e=_e.query;return[me=_e.index,new Br((me=(_e=_e.range).lower)!=null?me:d.MIN_KEY,(me=_e.upper)!=null?me:d.MAX_KEY)]}var k=d.table(I),F=k.schema,G=F.primaryKey,X=F.indexes,re=G.extractKey,te=G.outbound,oe=G.autoIncrement&&X.filter(function(ge){return ge.compound&&ge.keyPath.includes(G.keyPath)}),fe=r(r({},k),{mutate:function(ge){function me(_t){return _t="idb://".concat(v,"/").concat(I,"/").concat(_t),Ke[_t]||(Ke[_t]=new Br)}var _e,Ne,xe,je=ge.trans,Ke=ge.mutatedParts||(ge.mutatedParts={}),ut=me(""),dt=me(":dels"),tt=ge.type,bt=ge.type==="deleteRange"?[ge.range]:ge.type==="delete"?[ge.keys]:ge.values.length<50?[di(G,ge).filter(function(_t){return _t}),ge.values]:[],wt=bt[0],bt=bt[1],st=ge.trans._cache;return f(wt)?(ut.addKeys(wt),(tt=tt==="delete"||wt.length===bt.length?fo(wt,st):null)||dt.addKeys(wt),(tt||bt)&&(_e=me,Ne=tt,xe=bt,F.indexes.forEach(function(_t){var Qt=_e(_t.name||"");function wn(Jt){return Jt!=null?_t.extractKey(Jt):null}function Ft(Jt){_t.multiEntry&&f(Jt)?Jt.forEach(function(gr){return Qt.addKey(gr)}):Qt.addKey(Jt)}(Ne||xe).forEach(function(Jt,tr){var Xa=Ne&&wn(Ne[tr]),tr=xe&&wn(xe[tr]);Zt(Xa,tr)!==0&&(Xa!=null&&Ft(Xa),tr!=null)&&Ft(tr)})}))):wt?(bt={from:(st=wt.lower)!=null?st:d.MIN_KEY,to:(tt=wt.upper)!=null?tt:d.MAX_KEY},dt.add(bt),ut.add(bt)):(ut.add(A),dt.add(A),F.indexes.forEach(function(_t){return me(_t.name).add(A)})),k.mutate(ge).then(function(_t){return!wt||ge.type!=="add"&&ge.type!=="put"||(ut.addKeys(_t.results),oe&&oe.forEach(function(Qt){for(var wn=ge.values.map(function(Xa){return Qt.extractKey(Xa)}),Ft=Qt.keyPath.findIndex(function(Xa){return Xa===G.keyPath}),Jt=0,gr=_t.results.length;Jt<gr;++Jt)wn[Jt][Ft]=_t.results[Jt];me(Qt.name).addKeys(wn)})),je.mutatedParts=S(je.mutatedParts||{},Ke),_t})}}),le={get:function(ge){return[G,new Br(ge.key)]},getMany:function(ge){return[G,new Br().addKeys(ge.keys)]},count:N,query:N,openCursor:N};return l(le).forEach(function(ge){fe[ge]=function(me){var _e=Je.subscr,Ne=!!_e,xe=Mo(Je,k)&&Hs(ge,me)?me.obsSet={}:_e;if(Ne){var je,_e=function(bt){return bt="idb://".concat(v,"/").concat(I,"/").concat(bt),xe[bt]||(xe[bt]=new Br)},Ke=_e(""),ut=_e(":dels"),Ne=le[ge](me),dt=Ne[0],Ne=Ne[1];if((ge==="query"&&dt.isPrimaryKey&&!me.values?ut:_e(dt.name||"")).add(Ne),!dt.isPrimaryKey){if(ge!=="count")return je=ge==="query"&&te&&me.values&&k.query(r(r({},me),{values:!1})),k[ge].apply(this,arguments).then(function(bt){if(ge==="query"){if(te&&me.values)return je.then(function(wn){return wn=wn.result,Ke.addKeys(wn),bt});var st=me.values?bt.result.map(re):bt.result;(me.values?Ke:ut).addKeys(st)}else{var _t,Qt;if(ge==="openCursor")return Qt=me.values,(_t=bt)&&Object.create(_t,{key:{get:function(){return ut.addKey(_t.primaryKey),_t.key}},primaryKey:{get:function(){var wn=_t.primaryKey;return ut.addKey(wn),wn}},value:{get:function(){return Qt&&Ke.addKey(_t.primaryKey),_t.value}}})}return bt});ut.add(A)}}return k[ge].apply(this,arguments)}}),fe}})}};function Na(d,v,A){var I;return A.numFailures===0?v:v.type==="deleteRange"||(I=v.keys?v.keys.length:"values"in v&&v.values?v.values.length:1,A.numFailures===I)?null:(I=r({},v),f(I.keys)&&(I.keys=I.keys.filter(function(N,k){return!(k in A.failures)})),"values"in I&&f(I.values)&&(I.values=I.values.filter(function(N,k){return!(k in A.failures)})),I)}function Vl(d,v){return A=d,((I=v).lower===void 0||(I.lowerOpen?0<Zt(A,I.lower):0<=Zt(A,I.lower)))&&(A=d,(I=v).upper===void 0||(I.upperOpen?Zt(A,I.upper)<0:Zt(A,I.upper)<=0));var A,I}function Ya(d,v,A,I,N,k){var F,G,X,re,te,oe;return!A||A.length===0||(F=v.query.index,G=F.multiEntry,X=v.query.range,re=I.schema.primaryKey.extractKey,te=F.extractKey,oe=(F.lowLevelIndex||F).extractKey,(I=A.reduce(function(fe,le){var ge=fe,me=[];if(le.type==="add"||le.type==="put")for(var _e=new Br,Ne=le.values.length-1;0<=Ne;--Ne){var xe,je=le.values[Ne],Ke=re(je);!_e.hasKey(Ke)&&(xe=te(je),G&&f(xe)?xe.some(function(bt){return Vl(bt,X)}):Vl(xe,X))&&(_e.addKey(Ke),me.push(je))}switch(le.type){case"add":var ut=new Br().addKeys(v.values?fe.map(function(st){return re(st)}):fe),ge=fe.concat(v.values?me.filter(function(st){return st=re(st),!ut.hasKey(st)&&(ut.addKey(st),!0)}):me.map(function(st){return re(st)}).filter(function(st){return!ut.hasKey(st)&&(ut.addKey(st),!0)}));break;case"put":var dt=new Br().addKeys(le.values.map(function(st){return re(st)}));ge=fe.filter(function(st){return!dt.hasKey(v.values?re(st):st)}).concat(v.values?me:me.map(function(st){return re(st)}));break;case"delete":var tt=new Br().addKeys(le.keys);ge=fe.filter(function(st){return!tt.hasKey(v.values?re(st):st)});break;case"deleteRange":var wt=le.range;ge=fe.filter(function(st){return!Vl(re(st),wt)})}return ge},d))===d)?d:(I.sort(function(fe,le){return Zt(oe(fe),oe(le))||Zt(re(fe),re(le))}),v.limit&&v.limit<1/0&&(I.length>v.limit?I.length=v.limit:d.length===v.limit&&I.length<v.limit&&(N.dirty=!0)),k?Object.freeze(I):I)}function al(d,v){return Zt(d.lower,v.lower)===0&&Zt(d.upper,v.upper)===0&&!!d.lowerOpen==!!v.lowerOpen&&!!d.upperOpen==!!v.upperOpen}function jo(d,v){return((A,I,N,k)=>{if(A===void 0)return I!==void 0?-1:0;if(I===void 0)return 1;if((A=Zt(A,I))===0){if(N&&k)return 0;if(N)return 1;if(k)return-1}return A})(d.lower,v.lower,d.lowerOpen,v.lowerOpen)<=0&&0<=((A,I,N,k)=>{if(A===void 0)return I!==void 0?1:0;if(I===void 0)return-1;if((A=Zt(A,I))===0){if(N&&k)return 0;if(N)return-1;if(k)return 1}return A})(d.upper,v.upper,d.upperOpen,v.upperOpen)}function Hm(d,v,A,I){d.subscribers.add(A),I.addEventListener("abort",function(){var N,k;d.subscribers.delete(A),d.subscribers.size===0&&(N=d,k=v,setTimeout(function(){N.subscribers.size===0&&$e(k,N)},3e3))})}var zl={stack:"dbcore",level:0,name:"Cache",create:function(d){var v=d.schema.name;return r(r({},d),{transaction:function(A,I,N){var k,F,G=d.transaction(A,I,N);return I==="readwrite"&&(N=(k=new AbortController).signal,G.addEventListener("abort",(F=function(X){return function(){if(k.abort(),I==="readwrite"){for(var re=new Set,te=0,oe=A;te<oe.length;te++){var fe=oe[te],le=H["idb://".concat(v,"/").concat(fe)];if(le){var ge=d.table(fe),me=le.optimisticOps.filter(function(_t){return _t.trans===G});if(G._explicit&&X&&G.mutatedParts)for(var _e=0,Ne=Object.values(le.queries.query);_e<Ne.length;_e++)for(var xe=0,je=(dt=Ne[_e]).slice();xe<je.length;xe++)B((tt=je[xe]).obsSet,G.mutatedParts)&&($e(dt,tt),tt.subscribers.forEach(function(_t){return re.add(_t)}));else if(0<me.length){le.optimisticOps=le.optimisticOps.filter(function(_t){return _t.trans!==G});for(var Ke=0,ut=Object.values(le.queries.query);Ke<ut.length;Ke++)for(var dt,tt,wt,bt=0,st=(dt=ut[Ke]).slice();bt<st.length;bt++)(tt=st[bt]).res!=null&&G.mutatedParts&&(X&&!tt.dirty?(wt=Object.isFrozen(tt.res),wt=Ya(tt.res,tt.req,me,ge,tt,wt),tt.dirty?($e(dt,tt),tt.subscribers.forEach(function(_t){return re.add(_t)})):wt!==tt.res&&(tt.res=wt,tt.promise=ht.resolve({result:wt}))):(tt.dirty&&$e(dt,tt),tt.subscribers.forEach(function(_t){return re.add(_t)})))}}}re.forEach(function(_t){return _t()})}}})(!1),{signal:N}),G.addEventListener("error",F(!1),{signal:N}),G.addEventListener("complete",F(!0),{signal:N})),G},table:function(A){var I=d.table(A),N=I.schema.primaryKey;return r(r({},I),{mutate:function(k){var F,G=Je.trans;return!N.outbound&&G.db._options.cache!=="disabled"&&!G.explicit&&G.idbtrans.mode==="readwrite"&&(F=H["idb://".concat(v,"/").concat(A)])?(G=I.mutate(k),k.type!=="add"&&k.type!=="put"||!(50<=k.values.length||di(N,k).some(function(X){return X==null}))?(F.optimisticOps.push(k),k.mutatedParts&&Be(k.mutatedParts),G.then(function(X){0<X.numFailures&&($e(F.optimisticOps,k),(X=Na(0,k,X))&&F.optimisticOps.push(X),k.mutatedParts)&&Be(k.mutatedParts)}),G.catch(function(){$e(F.optimisticOps,k),k.mutatedParts&&Be(k.mutatedParts)})):G.then(function(X){var re=Na(0,r(r({},k),{values:k.values.map(function(te,oe){var fe;return X.failures[oe]?te:(V(fe=(fe=N.keyPath)!=null&&fe.includes(".")?ne(te):r({},te),N.keyPath,X.results[oe]),fe)})}),X);F.optimisticOps.push(re),queueMicrotask(function(){return k.mutatedParts&&Be(k.mutatedParts)})}),G):I.mutate(k)},query:function(k){var F,G,X,re,te,oe,fe;return Mo(Je,I)&&Hs("query",k)?(F=((X=Je.trans)==null?void 0:X.db._options.cache)==="immutable",G=(X=Je).requery,X=X.signal,oe=((le,ge,me,_e)=>{var Ne=H["idb://".concat(le,"/").concat(ge)];if(!Ne)return[];if(!(le=Ne.queries[me]))return[null,!1,Ne,null];var xe=le[(_e.query?_e.query.index.name:null)||""];if(!xe)return[null,!1,Ne,null];switch(me){case"query":var je=xe.find(function(Ke){return Ke.req.limit===_e.limit&&Ke.req.values===_e.values&&al(Ke.req.query.range,_e.query.range)});return je?[je,!0,Ne,xe]:[xe.find(function(Ke){return("limit"in Ke.req?Ke.req.limit:1/0)>=_e.limit&&(!_e.values||Ke.req.values)&&jo(Ke.req.query.range,_e.query.range)}),!1,Ne,xe];case"count":return je=xe.find(function(Ke){return al(Ke.req.query.range,_e.query.range)}),[je,!!je,Ne,xe]}})(v,A,"query",k),fe=oe[0],re=oe[2],te=oe[3],fe&&oe[1]?fe.obsSet=k.obsSet:(oe=I.query(k).then(function(le){var ge=le.result;if(fe&&(fe.res=ge),F){for(var me=0,_e=ge.length;me<_e;++me)Object.freeze(ge[me]);Object.freeze(ge)}else le.result=ne(ge);return le}).catch(function(le){return te&&fe&&$e(te,fe),Promise.reject(le)}),fe={obsSet:k.obsSet,promise:oe,subscribers:new Set,type:"query",req:k,dirty:!1},te?te.push(fe):(te=[fe],(re=re||(H["idb://".concat(v,"/").concat(A)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[k.query.index.name||""]=te)),Hm(fe,te,G,X),fe.promise.then(function(le){return{result:Ya(le.result,k,re?.optimisticOps,I,fe,F)}})):I.query(k)}})}})}};function la(d,v){return new Proxy(d,{get:function(A,I,N){return I==="db"?v:Reflect.get(A,I,N)}})}ar.prototype.version=function(d){if(isNaN(d)||d<.1)throw new Oe.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new Oe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var v=this._versions,A=v.filter(function(I){return I._cfg.version===d})[0];return A||(A=new this.Version(d),v.push(A),v.sort(tl),A.stores({}),this._state.autoSchema=!1),A},ar.prototype._whenReady=function(d){var v=this;return this.idbdb&&(this._state.openComplete||Je.letThrough||this._vip)?d():new ht(function(A,I){if(v._state.openComplete)return I(new Oe.DatabaseClosed(v._state.dbOpenError));if(!v._state.isBeingOpened){if(!v._state.autoOpen)return void I(new Oe.DatabaseClosed);v.open().catch(Fe)}v._state.dbReadyPromise.then(A,I)}).then(d)},ar.prototype.use=function(N){var v=N.stack,A=N.create,I=N.level,N=N.name,k=(N&&this.unuse({stack:v,name:N}),this._middlewares[v]||(this._middlewares[v]=[]));return k.push({stack:v,create:A,level:I??10,name:N}),k.sort(function(F,G){return F.level-G.level}),this},ar.prototype.unuse=function(d){var v=d.stack,A=d.name,I=d.create;return v&&this._middlewares[v]&&(this._middlewares[v]=this._middlewares[v].filter(function(N){return I?N.create!==I:!!A&&N.name!==A})),this},ar.prototype.open=function(){var d=this;return Ri(fn,function(){return kr(d)})},ar.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,v=He.indexOf(this);if(0<=v&&He.splice(v,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new ht(function(A){d.dbReadyResolve=A}),d.openCanceller=new ht(function(A,I){d.cancelOpen=I}))},ar.prototype.close=function(v){var v=(v===void 0?{disableAutoOpen:!0}:v).disableAutoOpen,A=this._state;v?(A.isBeingOpened&&A.cancelOpen(new Oe.DatabaseClosed),this._close(),A.autoOpen=!1,A.dbOpenError=new Oe.DatabaseClosed):(this._close(),A.autoOpen=this._options.autoOpen||A.isBeingOpened,A.openComplete=!1,A.dbOpenError=null)},ar.prototype.delete=function(d){var v=this,A=(d===void 0&&(d={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),I=this._state;return new ht(function(N,k){function F(){v.close(d);var G=v._deps.indexedDB.deleteDatabase(v.name);G.onsuccess=_n(function(){var X,re,te;X=v._deps,re=v.name,Wa(te=X.indexedDB)||re===uo||ko(te,X.IDBKeyRange).delete(re).catch(Fe),N()}),G.onerror=Tr(k),G.onblocked=v._fireOnBlocked}if(A)throw new Oe.InvalidArgument("Invalid closeOptions argument to db.delete()");I.isBeingOpened?I.dbReadyPromise.then(F):F()})},ar.prototype.backendDB=function(){return this.idbdb},ar.prototype.isOpen=function(){return this.idbdb!==null},ar.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},ar.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ar.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ar.prototype,"tables",{get:function(){var d=this;return l(this._allTables).map(function(v){return d._allTables[v]})},enumerable:!1,configurable:!0}),ar.prototype.transaction=function(){var d=(function(v,A,I){var N=arguments.length;if(N<2)throw new Oe.InvalidArgument("Too few arguments");for(var k=new Array(N-1);--N;)k[N-1]=arguments[N];return I=k.pop(),[v,ae(k),I]}).apply(this,arguments);return this._transaction.apply(this,d)},ar.prototype._transaction=function(d,v,A){var I,N,k=this,F=Je.trans,G=(F&&F.db===this&&d.indexOf("!")===-1||(F=null),d.indexOf("?")!==-1);d=d.replace("!","").replace("?","");try{if(N=v.map(function(re){if(re=re instanceof k.Table?re.name:re,typeof re!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return re}),d=="r"||d===Cn)I=Cn;else{if(d!="rw"&&d!=wi)throw new Oe.InvalidArgument("Invalid transaction mode: "+d);I=wi}if(F){if(F.mode===Cn&&I===wi){if(!G)throw new Oe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");F=null}F&&N.forEach(function(re){if(F&&F.storeNames.indexOf(re)===-1){if(!G)throw new Oe.SubTransaction("Table "+re+" not included in parent transaction.");F=null}}),G&&F&&!F.active&&(F=null)}}catch(re){return F?F._promise(null,function(te,oe){oe(re)}):Mt(re)}var X=(function re(te,oe,fe,le,ge){return ht.resolve().then(function(){var xe=Je.transless||Je,me=te._createTransaction(oe,fe,te._dbSchema,le),xe=(me.explicit=!0,{trans:me,transless:xe});if(le)me.idbtrans=le.idbtrans;else try{me.create(),me.idbtrans._explicit=!0,te._state.PR1398_maxLoop=3}catch(je){return je.name===ct.InvalidState&&te.isOpen()&&0<--te._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),te.close({disableAutoOpen:!1}),te.open().then(function(){return re(te,oe,fe,null,ge)})):Mt(je)}var _e,Ne=de(ge),xe=(Ne&&gn(),ht.follow(function(){var je;(_e=ge.call(me,me))&&(Ne?(je=Nr.bind(null,null),_e.then(je,je)):typeof _e.next=="function"&&typeof _e.throw=="function"&&(_e=bn(_e)))},xe));return(_e&&typeof _e.then=="function"?ht.resolve(_e).then(function(je){return me.active?je:Mt(new Oe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):xe.then(function(){return _e})).then(function(je){return le&&me._resolve(),me._completion.then(function(){return je})}).catch(function(je){return me._reject(je),Mt(je)})})}).bind(null,this,I,N,F,A);return F?F._promise(I,X,"lock"):Je.trans?Ri(Je.transless,function(){return k._whenReady(X)}):this._whenReady(X)},ar.prototype.table=function(d){if(_(this._allTables,d))return this._allTables[d];throw new Oe.InvalidTable("Table ".concat(d," does not exist"))};var Es=ar;function ar(d,v){var A,I,N,k,F,G=this,X=(this._middlewares={},this.verno=0,ar.dependencies),X=(this._options=v=r({addons:ar.addons,autoOpen:!0,indexedDB:X.indexedDB,IDBKeyRange:X.IDBKeyRange,cache:"cloned"},v),this._deps={indexedDB:v.indexedDB,IDBKeyRange:v.IDBKeyRange},v.addons),re=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Fe,dbReadyPromise:null,cancelOpen:Fe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:v.autoOpen}),te=(re.dbReadyPromise=new ht(function(oe){re.dbReadyResolve=oe}),re.openCanceller=new ht(function(oe,fe){re.cancelOpen=fe}),this._state=re,this.name=d,this.on=ki(this,"populate","blocked","versionchange","close",{ready:[$t,Fe]}),this.once=function(oe,fe){var le=function(){for(var ge=[],me=0;me<arguments.length;me++)ge[me]=arguments[me];G.on(oe).unsubscribe(le),fe.apply(G,ge)};return G.on(oe,le)},this.on.ready.subscribe=K(this.on.ready.subscribe,function(oe){return function(fe,le){ar.vip(function(){var ge,me=G._state;me.openComplete?(me.dbOpenError||ht.resolve().then(fe),le&&oe(fe)):me.onReadyBeingFired?(me.onReadyBeingFired.push(fe),le&&oe(fe)):(oe(fe),ge=G,le||oe(function _e(){ge.on.ready.unsubscribe(fe),ge.on.ready.unsubscribe(_e)}))})}}),this.Collection=(A=this,Yt(el.prototype,function(_e,me){this.db=A;var le=yn,ge=null;if(me)try{le=me()}catch(xe){ge=xe}var me=_e._ctx,_e=me.table,Ne=_e.hook.reading.fire;this._ctx={table:_e,index:me.index,isPrimKey:!me.index||_e.schema.primKey.keyPath&&me.index===_e.schema.primKey.name,range:le,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ge,or:me.or,valueMapper:Ne!==pt?Ne:null}})),this.Table=(I=this,Yt(Gi.prototype,function(oe,fe,le){this.db=I,this._tx=le,this.name=oe,this.schema=fe,this.hook=I._allTables[oe]?I._allTables[oe].hook:ki(null,{creating:[Ln,Fe],reading:[Lt,pt],updating:[Vt,Fe],deleting:[ot,Fe]})})),this.Transaction=(N=this,Yt(Do.prototype,function(oe,fe,le,ge,me){var _e=this;oe!=="readonly"&&fe.forEach(function(Ne){Ne=(Ne=le[Ne])==null?void 0:Ne.yProps,Ne&&(fe=fe.concat(Ne.map(function(xe){return xe.updatesTable})))}),this.db=N,this.mode=oe,this.storeNames=fe,this.schema=le,this.chromeTransactionDurability=ge,this.idbtrans=null,this.on=ki(this,"complete","error","abort"),this.parent=me||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ht(function(Ne,xe){_e._resolve=Ne,_e._reject=xe}),this._completion.then(function(){_e.active=!1,_e.on.complete.fire()},function(Ne){var xe=_e.active;return _e.active=!1,_e.on.error.fire(Ne),_e.parent?_e.parent._reject(Ne):xe&&_e.idbtrans&&_e.idbtrans.abort(),Mt(Ne)})})),this.Version=(k=this,Yt(Dr.prototype,function(oe){this.db=k,this._cfg={version:oe,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(F=this,Yt(Jn.prototype,function(oe,fe,le){if(this.db=F,this._ctx={table:oe,index:fe===":id"?null:fe,or:le},this._cmp=this._ascending=Zt,this._descending=function(ge,me){return Zt(me,ge)},this._max=function(ge,me){return 0<Zt(ge,me)?ge:me},this._min=function(ge,me){return Zt(ge,me)<0?ge:me},this._IDBKeyRange=F._deps.IDBKeyRange,!this._IDBKeyRange)throw new Oe.MissingAPI})),this.on("versionchange",function(oe){0<oe.newVersion?console.warn("Another connection wants to upgrade database '".concat(G.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(G.name,"'. Closing db now to resume the delete request.")),G.close({disableAutoOpen:!1})}),this.on("blocked",function(oe){!oe.newVersion||oe.newVersion<oe.oldVersion?console.warn("Dexie.delete('".concat(G.name,"') was blocked")):console.warn("Upgrade '".concat(G.name,"' blocked by other connection holding version ").concat(oe.oldVersion/10))}),this._maxKey=Sa(v.IDBKeyRange),this._createTransaction=function(oe,fe,le,ge){return new G.Transaction(oe,fe,le,G._options.chromeTransactionDurability,ge)},this._fireOnBlocked=function(oe){G.on("blocked").fire(oe),He.filter(function(fe){return fe.name===G.name&&fe!==G&&!fe._state.vcFired}).map(function(fe){return fe.on("versionchange").fire(oe)})},this.use(_s),this.use(zl),this.use(Uu),this.use(Ca),this.use(Oa),new Proxy(this,{get:function(oe,fe,le){var ge;return fe==="_vip"||(fe==="table"?function(me){return la(G.table(me),te)}:(ge=Reflect.get(oe,fe,le))instanceof Gi?la(ge,te):fe==="tables"?ge.map(function(me){return la(me,te)}):fe==="_createTransaction"?function(){return la(ge.apply(this,arguments),te)}:ge)}}));this.vip=te,X.forEach(function(oe){return oe(G)})}var As,sn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ul=(Y.prototype.subscribe=function(d,v,A){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:v,complete:A})},Y.prototype[sn]=function(){return this},Y);function Y(d){this._subscribe=d}try{As={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{As={indexedDB:null,IDBKeyRange:null}}function o(d){var v,A=!1,I=new Ul(function(N){var k=de(d),F,G=!1,X={},re={},te={get closed(){return G},unsubscribe:function(){G||(G=!0,F&&F.abort(),oe&&xn.storagemutated.unsubscribe(le))}},oe=(N.start&&N.start(te),!1),fe=function(){return Qn(ge)},le=function(me){S(X,me),B(re,X)&&fe()},ge=function(){var me,_e,Ne;!G&&As.indexedDB&&(X={},me={},F&&F.abort(),F=new AbortController,Ne=(xe=>{var je=Hr();try{k&&gn();var Ke=Vn(d,xe);return Ke=k?Ke.finally(Nr):Ke}finally{je&&qi()}})(_e={subscr:me,signal:F.signal,requery:fe,querier:d,trans:null}),Promise.resolve(Ne).then(function(xe){A=!0,v=xe,G||_e.signal.aborted||(X={},(je=>{for(var Ke in je)if(_(je,Ke))return;return 1})(re=me)||oe||(xn(Ua,le),oe=!0),Qn(function(){return!G&&N.next&&N.next(xe)}))},function(xe){A=!1,["DatabaseClosedError","AbortError"].includes(xe?.name)||G||Qn(function(){G||N.error&&N.error(xe)})}))};return setTimeout(fe,0),te});return I.hasValue=function(){return A},I.getValue=function(){return v},I}var c=Es;function h(d){var v=x;try{x=!0,xn.storagemutated.fire(d),lt(d,!0)}finally{x=v}}T(c,r(r({},Ee),{delete:function(d){return new c(d,{addons:[]}).delete()},exists:function(d){return new c(d,{addons:[]}).open().then(function(v){return v.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return v=c.dependencies,A=v.indexedDB,v=v.IDBKeyRange,(Wa(A)?Promise.resolve(A.databases()).then(function(I){return I.map(function(N){return N.name}).filter(function(N){return N!==uo})}):ko(A,v).toCollection().primaryKeys()).then(d)}catch{return Mt(new Oe.MissingAPI)}var v,A},defineClass:function(){return function(d){m(this,d)}},ignoreTransaction:function(d){return Je.trans?Ri(Je.transless,d):d()},vip:rl,async:function(d){return function(){try{var v=bn(d.apply(this,arguments));return v&&typeof v.then=="function"?v:ht.resolve(v)}catch(A){return Mt(A)}}},spawn:function(d,v,A){try{var I=bn(d.apply(A,v||[]));return I&&typeof I.then=="function"?I:ht.resolve(I)}catch(N){return Mt(N)}},currentTransaction:{get:function(){return Je.trans||null}},waitFor:function(d,v){return d=ht.resolve(typeof d=="function"?c.ignoreTransaction(d):d).timeout(v||6e4),Je.trans?Je.trans.waitFor(d):d},Promise:ht,debug:{get:function(){return it},set:function(d){na(d)}},derive:M,extend:m,props:T,override:K,Events:ki,on:xn,liveQuery:o,extendObservabilitySet:S,getByKeyPath:Z,setByKeyPath:V,delByKeyPath:function(d,v){typeof v=="string"?V(d,v,void 0):"length"in v&&[].map.call(v,function(A){V(d,A,void 0)})},shallowClone:W,deepClone:ne,getObjectDiff:$a,cmp:Zt,asap:ce,minKey:-1/0,addons:[],connections:He,errnames:ct,dependencies:As,cache:H,semVer:"4.3.0",version:"4.3.0".split(".").map(function(d){return parseInt(d)}).reduce(function(d,v,A){return d+v/Math.pow(10,2*A)})})),c.maxKey=Sa(c.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(xn(Ua,function(d){x||(d=new CustomEvent(Bt,{detail:d}),x=!0,dispatchEvent(d),x=!1)}),addEventListener(Bt,function(d){d=d.detail,x||h(d)}));var y,x=!1,E=function(){};return typeof BroadcastChannel<"u"&&((E=function(){(y=new BroadcastChannel(Bt)).onmessage=function(d){return d.data&&h(d.data)}})(),typeof y.unref=="function"&&y.unref(),xn(Ua,function(d){x||y.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!Es.disableBfCache&&d.persisted){it&&console.debug("Dexie: handling persisted pagehide"),y?.close();for(var v=0,A=He;v<A.length;v++)A[v].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!Es.disableBfCache&&d.persisted&&(it&&console.debug("Dexie: handling persisted pageshow"),E(),h({all:new Br(-1/0,[[]])}))})),ht.rejectionMapper=function(d,v){return!d||d instanceof Ge||d instanceof TypeError||d instanceof SyntaxError||!d.name||!ft[d.name]?d:(v=new ft[d.name](v||d.message,d),"stack"in d&&j(v,"stack",{get:function(){return this.inner.stack}}),v)},na(it),r(Es,Object.freeze({__proto__:null,Dexie:Es,Entity:nn,PropModification:ai,RangeSet:Br,add:function(d){return new ai({add:d})},cmp:Zt,default:Es,liveQuery:o,mergeRanges:oa,rangesOverlap:dn,remove:function(d){return new ai({remove:d})},replacePrefix:function(d,v){return new ai({replacePrefix:[d,v]})}}),{default:Es}),Es})})(Py)),Py.exports}var kte=Dte();const SA=Pl(kte),V4=Symbol.for("Dexie"),pv=globalThis[V4]||(globalThis[V4]=SA);if(SA.semVer!==pv.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${SA.semVer} and ${pv.semVer}`);const{liveQuery:TEe,mergeRanges:IEe,rangesOverlap:CEe,RangeSet:OEe,cmp:NEe,Entity:REe,PropModification:PEe,replacePrefix:DEe,add:kEe,remove:MEe,DexieYProvider:jEe}=pv;function yv(t){return t?t instanceof Date?t.toISOString():t:null}function Y1(t){return t?new Date(t):new Date}async function Dy(t,e){try{const n=ds(Ti,"users",t,"profile","data"),{id:r,anthropicApiKey:i,anthropicApiUrl:a,...l}=e;await Cd(n,{...l,createdAt:yv(e.createdAt),updatedAt:yv(e.updatedAt||new Date)})}catch(n){console.warn("[Sync] Push profile failed:",n)}}async function kL(t,e){try{const n=await Ze.dailyLogs.where("date").equals(e).first();if(!n)return;const r=n.id?await Ze.mealEntries.where("dailyLogId").equals(n.id).toArray():[],i=ds(Ti,"users",t,"days",e);await Cd(i,{date:n.date,totalPointsUsed:n.totalPointsUsed,weeklyPointsUsed:n.weeklyPointsUsed,waterMl:n.waterMl??0,meals:r.map(a=>({foodItem:{name:a.foodItem.name,brand:a.foodItem.brand||"",barcode:a.foodItem.barcode||"",nutrition:a.foodItem.nutrition,pointsPer100g:a.foodItem.pointsPer100g,servingSizeG:a.foodItem.servingSizeG,unit:a.foodItem.unit||"g",isZeroPoint:a.foodItem.isZeroPoint,source:a.foodItem.source},mealType:a.mealType,quantityG:a.quantityG,quantity:a.quantity??1,points:a.points,loggedAt:yv(a.loggedAt)})),updatedAt:new Date().toISOString()})}catch(n){console.warn("[Sync] Push day failed:",n)}}async function ML(t,e){try{const n=ds(Ti,"users",t,"weight",e.date);await Cd(n,{date:e.date,weightKg:e.weightKg,note:e.note||"",updatedAt:new Date().toISOString()})}catch(n){console.warn("[Sync] Push weight failed:",n)}}async function jL(t,e){try{if(e.source!=="user"||!e.id)return;const n=ds(Ti,"users",t,"foods",String(e.id));await Cd(n,{name:e.name,brand:e.brand||"",barcode:e.barcode||"",nutrition:e.nutrition,pointsPer100g:e.pointsPer100g,servingSizeG:e.servingSizeG,unit:e.unit||"g",isZeroPoint:e.isZeroPoint,isFavorite:e.isFavorite||!1,source:e.source,createdAt:yv(e.createdAt),updatedAt:new Date().toISOString()})}catch(n){console.warn("[Sync] Push food failed:",n)}}async function Mte(t){const e=["profile","days","weight","foods"];for(const i of e){const a=await Bc(Lc(Ti,"users",t,i));for(const l of a.docs)await Q7(ds(Ti,"users",t,i,l.id))}const n=ds(Ti,"users",t),r=await f0(n);if(r.exists()){const i=r.data();await Cd(n,{email:i.email||"",lastLogin:i.lastLogin||""})}}async function jte(t){try{let e=!1;const n=ds(Ti,"users",t,"profile","data"),r=await f0(n);if(r.exists()){const f=r.data(),p=(await Ze.userProfiles.toArray())[0],b=f.updatedAt?new Date(f.updatedAt).getTime():0,_=p?.updatedAt?new Date(p.updatedAt).getTime():0;if(b>_){const T={name:f.name,gender:f.gender,dateOfBirth:f.dateOfBirth,heightCm:f.heightCm,currentWeightKg:f.currentWeightKg,goalWeightKg:f.goalWeightKg,activityLevel:f.activityLevel,goal:f.goal,dailyPointsBudget:f.dailyPointsBudget,weeklyPointsBudget:f.weeklyPointsBudget,waterGoalMl:f.waterGoalMl,onboardingComplete:f.onboardingComplete,createdAt:Y1(f.createdAt),updatedAt:Y1(f.updatedAt)};p?.id?await Ze.userProfiles.update(p.id,T):await Ze.userProfiles.add(T),e=!0}}const i=await Bc(Lc(Ti,"users",t,"days"));for(const f of i.docs){const m=f.data(),p=f.id,b=await Ze.dailyLogs.where("date").equals(p).first(),_=m.updatedAt?new Date(m.updatedAt).getTime():0,T=!b||_>b._syncedAt||0;if(T&&m.meals?.length>0){let R;if(b?.id){await Ze.dailyLogs.update(b.id,{totalPointsUsed:m.totalPointsUsed,weeklyPointsUsed:m.weeklyPointsUsed,waterMl:m.waterMl??0}),R=b.id;const j=await Ze.mealEntries.where("dailyLogId").equals(R).toArray();for(const M of j)M.id&&await Ze.mealEntries.delete(M.id)}else R=await Ze.dailyLogs.add({date:p,totalPointsUsed:m.totalPointsUsed,weeklyPointsUsed:m.weeklyPointsUsed,waterMl:m.waterMl??0});for(const j of m.meals)await Ze.mealEntries.add({dailyLogId:R,foodItem:{name:j.foodItem.name,brand:j.foodItem.brand,barcode:j.foodItem.barcode,nutrition:j.foodItem.nutrition,pointsPer100g:j.foodItem.pointsPer100g,servingSizeG:j.foodItem.servingSizeG,unit:j.foodItem.unit||"g",isZeroPoint:j.foodItem.isZeroPoint,source:j.foodItem.source,createdAt:new Date},mealType:j.mealType,quantityG:j.quantityG,quantity:j.quantity??1,points:j.points,loggedAt:Y1(j.loggedAt)});e=!0}else T&&b&&!m.meals?.length&&await Ze.dailyLogs.update(b.id,{waterMl:m.waterMl??b.waterMl??0})}const a=await Bc(Lc(Ti,"users",t,"weight"));for(const f of a.docs){const m=f.data(),p=f.id;await Ze.weightEntries.where("date").equals(p).first()||(await Ze.weightEntries.add({date:p,weightKg:m.weightKg,note:m.note||""}),e=!0)}const l=await Bc(Lc(Ti,"users",t,"foods"));for(const f of l.docs){const m=f.data();await Ze.foodItems.where("name").equalsIgnoreCase(m.name).first()||(await Ze.foodItems.add({name:m.name,brand:m.brand,barcode:m.barcode,nutrition:m.nutrition,pointsPer100g:m.pointsPer100g,servingSizeG:m.servingSizeG,unit:m.unit||"g",isZeroPoint:m.isZeroPoint,isFavorite:m.isFavorite||!1,source:"user",createdAt:Y1(m.createdAt)}),e=!0)}return console.log(`[Sync] Pull complete. Changes: ${e}`),e}catch(e){return console.warn("[Sync] Pull failed:",e),!1}}async function LL(t){try{const e=await Ze.userProfiles.toArray();e[0]&&await Dy(t,e[0]);const n=await Ze.dailyLogs.toArray(),r=await Ze.weightEntries.toArray(),i=await Ze.foodItems.where("source").equals("user").toArray(),a=async(l,f)=>{for(let m=0;m<l.length;m+=5)await Promise.all(l.slice(m,m+5).map(f))};await Promise.all([a(n,l=>kL(t,l.date)),a(r,l=>ML(t,l)),a(i,l=>jL(t,l))]),console.log("[Sync] Push all complete.")}catch(e){console.warn("[Sync] Push all failed:",e)}}const Lte=["thee","kruidenthee","groene thee","muntthee","rooibos","kamillethee","gemberthee","earl grey","tea","green tea","herbal tea","mint tea","chamomile tea","koffie zwart","koffie met melk","koffie met suiker","espresso","americano","filterkoffie","coffee","black coffee","cola zero","cola light","pepsi max","pepsi light","fanta zero","sprite zero","seven up free","7up free","7-up free","fernandes zero","rivella light","diet coke","zero sugar","sugar free","bouillon","heldere soep","consomm","broth","clear soup","spa touch","bar le duc","water met smaak","flavored water","infused water","sourcy","vitaminewater zero"],Bte=["cappuccino","latte macchiato","latte","koffie verkeerd","flat white","caf au lait","mocha","mokka","melk","halfvolle melk","volle melk","magere melk","karnemelk","havermelk","sojamelk","amandelmelk","rijstmelk","kokosmelk","milk","whole milk","skim milk","oat milk","soy milk","almond milk","sinaasappelsap","appelsap","jus d'orange","vruchtensap","fruitsap","perensap","tomatensap","wortelsap","druivensap","cranberrysap","orange juice","apple juice","fruit juice","tomato juice","cola","fanta","sprite","sinas","cassis","frisdrank","limonade","tonic","bitter lemon","ginger ale","ginger beer","rivella","fernandes","ice tea","ijsthee","soda","lemonade","soft drink","iced tea","sportdrank","aa drink","aquarius","isostar","gatorade","powerade","extran","sports drink","chocolademelk","chocomel","cacaodrank","warme chocolademelk","chocolate milk","cocoa drink","hot chocolate","smoothie","fruitsmoothie","groene smoothie","vitaminewater","vitamin water","drinkontbijt","drinkmaaltijd"],Fte=["bier","pils","witbier","ipa","stout","porter","radler","weizen","beer","ale","lager","wijn","rode wijn","witte wijn","ros","prosecco","champagne","cava","wine","red wine","white wine","wodka","vodka","rum","gin","whisky","whiskey","jenever","cognac","brandewijn","tequila","likeur","amaretto","baileys","cocktail","mojito","martini","sangria","glhwein","port","energiedrank","energy drink","energy","red bull","monster","bullit","golden power","burn"];function cI(t){const n=[...t].sort((r,i)=>i.length-r.length).map(r=>r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));return new RegExp(`\\b(?:${n.join("|")})\\b`,"i")}const Vte=cI(Fte),zte=cI(Lte),Ute=cI(Bte);function fI(t){return Vte.test(t)?0:zte.test(t)?1:Ute.test(t)?.5:/\bkoffie\b/i.test(t)||/\bcoffee\b/i.test(t)?1:0}function BL(){return Go.currentUser?.uid??null}function p0(t){const e=BL();e&&kL(e,t).catch(()=>{})}function qte(t){const e=BL();e&&jL(e,t).catch(()=>{})}class Gte extends pv{userProfiles;foodItems;mealEntries;dailyLogs;weightEntries;constructor(){super("BodyBalanceDB"),this.version(1).stores({userProfiles:"++id, name",foodItems:"++id, name, barcode, source",mealEntries:"++id, dailyLogId, mealType, loggedAt",dailyLogs:"++id, &date",weightEntries:"++id, &date"}),this.version(2).stores({foodItems:"++id, name, barcode, source, isFavorite"})}}const Ze=new Gte;async function FL(t){let e=await Ze.dailyLogs.where("date").equals(t).first();if(!e){const n=await Ze.dailyLogs.add({date:t,totalPointsUsed:0,weeklyPointsUsed:0});e=await Ze.dailyLogs.get(n)}return e}async function VL(t){const e=await Ze.dailyLogs.where("date").equals(t).first();return e?.id?Ze.mealEntries.where("dailyLogId").equals(e.id).toArray():[]}async function zL(t,e){const n=await FL(t),r=await Ze.mealEntries.add({...e,dailyLogId:n.id,loggedAt:new Date}),a=(await Ze.mealEntries.where("dailyLogId").equals(n.id).toArray()).reduce((l,f)=>l+f.points,0);return await Ze.dailyLogs.update(n.id,{totalPointsUsed:a}),p0(t),r}async function Hte(t,e){const n=await Ze.mealEntries.get(t);if(!n)return!1;const r=n.waterMlAdded??0;let i=0,a=!1;if(r>0){const l=fI(n.foodItem.name),f=e.quantityG*(e.quantity||1);i=l>0?Math.round(f*l):0,a=i!==r}if(await Ze.mealEntries.update(t,{...e,...r>0?{waterMlAdded:i}:{}}),n.dailyLogId){const f=(await Ze.mealEntries.where("dailyLogId").equals(n.dailyLogId).toArray()).reduce((p,b)=>p+(b.id===t?e.points:b.points),0),m=await Ze.dailyLogs.get(n.dailyLogId);if(m){const p={totalPointsUsed:f};if(a){const b=i-r;p.waterMl=Math.max(0,(m.waterMl??0)+b)}await Ze.dailyLogs.update(n.dailyLogId,p),p0(m.date)}}return a}async function Kte(t){const e=await Ze.mealEntries.get(t);if(!e)return 0;const n=e.waterMlAdded??0;if(await Ze.mealEntries.delete(t),e.dailyLogId){const i=(await Ze.mealEntries.where("dailyLogId").equals(e.dailyLogId).toArray()).reduce((l,f)=>l+f.points,0),a=await Ze.dailyLogs.get(e.dailyLogId);if(a){const l={totalPointsUsed:i};n>0&&(l.waterMl=Math.max(0,(a.waterMl??0)-n)),await Ze.dailyLogs.update(e.dailyLogId,l),p0(a.date)}}return n}async function Wte(t){await Ze.mealEntries.update(t,{waterMlAdded:0})}async function TA(t=15){const e=await Ze.mealEntries.orderBy("loggedAt").reverse().toArray(),n=new Set,r=[];for(const i of e){const a=i.foodItem.name.toLowerCase();if(!n.has(a)){n.add(a);const l=await Ze.foodItems.where("name").equalsIgnoreCase(i.foodItem.name).first();if(r.push({...i.foodItem,isFavorite:l?.isFavorite??!1,id:l?.id??i.foodItem.id}),r.length>=t)break}}return r}async function IA(){return Ze.foodItems.filter(t=>!!t.isFavorite).toArray()}async function $te(t){let e;if(t.id&&(e=await Ze.foodItems.get(t.id)),e||(e=await Ze.foodItems.where("name").equalsIgnoreCase(t.name).first()),e?.id){const n=!e.isFavorite;return await Ze.foodItems.update(e.id,{isFavorite:n}),n}else return await Ze.foodItems.add({...t,id:void 0,isFavorite:!0,createdAt:new Date}),!0}async function dI(t){const e=await Ze.foodItems.add({...t,createdAt:new Date}),n=await Ze.foodItems.get(e);return qte(n),n}async function Yte(t,e){const n=new Date(t),r=n.getDay(),i=r===0?-6:1-r,a=new Date(n);a.setDate(n.getDate()+i);let l=0;for(let f=0;f<7;f++){const m=new Date(a);m.setDate(a.getDate()+f);const p=m.toISOString().split("T")[0];if(p>t)break;const b=await Ze.dailyLogs.where("date").equals(p).first();b&&b.totalPointsUsed>e&&(l+=b.totalPointsUsed-e)}return l}async function Xte(t){return(await Ze.dailyLogs.where("date").equals(t).first())?.waterMl??0}async function Jx(t,e){const n=await FL(t),r=(n.waterMl??0)+e;return await Ze.dailyLogs.update(n.id,{waterMl:r}),p0(t),r}async function Qte(t){const e=await Ze.dailyLogs.where("date").equals(t).first();e?.id&&(await Ze.dailyLogs.update(e.id,{waterMl:0}),p0(t))}async function Zte(t,e){const n=await VL(t);if(n.length===0)return 0;for(const r of n)await zL(e,{foodItem:r.foodItem,mealType:r.mealType,quantityG:r.quantityG,quantity:r.quantity,points:r.points});return n.length}async function Jte(t,e,n,r=0){const i=new Date,a=i.getDay(),l=a===0?-6:1-a,f=new Date(i);f.setDate(i.getDate()+l-r*7);const m=new Date(f);m.setDate(f.getDate()+6);const p=i.toISOString().split("T")[0],b=m.toISOString().split("T")[0],_=b<p?b:p;let T=0,R=0,j=0,M=0,L=0,z=null,$=1/0,K=0;const J=["zo","ma","di","wo","do","vr","za"];for(let Q=0;Q<7;Q++){const ne=new Date(f);ne.setDate(f.getDate()+Q);const be=ne.toISOString().split("T")[0];if(be>_)break;const he=await Ze.dailyLogs.where("date").equals(be).first();if(he){const ye=he.totalPointsUsed;T+=ye,R++,ye<=t&&j++,ye>t&&(K+=ye-t),ye<$&&($=ye,z=J[ne.getDay()]),(he.waterMl??0)>0&&L++,(he.waterMl??0)>=n&&M++}}if(R===0)return null;const ce=f.toISOString().split("T")[0],Z=await Ze.weightEntries.where("date").aboveOrEqual(ce).and(Q=>Q.date<=_).first(),V=await Ze.weightEntries.where("date").belowOrEqual(_).and(Q=>Q.date>=ce).reverse().first(),W=Z&&V&&Z.date!==V.date?V.weightKg-Z.weightKg:null,U=["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"];return{weekLabel:`Week ${ene(f)}  ${f.getDate()}-${m.getDate()} ${U[m.getMonth()]}`,avgPoints:Math.round(T/R),dailyBudget:t,daysWithinBudget:j,totalDays:R,waterDaysOnTarget:M,waterTotalDays:L,weightChange:W,bestDay:z,bestDayPoints:$===1/0?0:$,weeklyPointsUsed:K,weeklyPointsBudget:e}}function ene(t){const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const n=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-n.getTime())/864e5+1)/7)}async function tne(t){let e=0;const n=new Date;for(let r=1;r<=365;r++){const i=new Date(n);i.setDate(n.getDate()-r);const a=i.toISOString().split("T")[0],l=await Ze.dailyLogs.where("date").equals(a).first();if(!l||l.totalPointsUsed===0||l.totalPointsUsed>t)break;e++}return e}async function nne(){const t=await Ze.weightEntries.orderBy("date").reverse().toArray();if(t.length===0)return null;const e=t[0],n=new Date(e.date),r=new Date(n);r.setDate(n.getDate()-7);const i=r.toISOString().split("T")[0],a=t.find(l=>l.date<=i);return{currentKg:e.weightKg,weekChangeKg:a?e.weightKg-a.weightKg:null}}const rne={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9};function ine(t,e,n,r){return r==="male"?10*t+6.25*e-5*n+5:10*t+6.25*e-5*n-161}function ane(t){const e=new Date(t),n=new Date;let r=n.getFullYear()-e.getFullYear();const i=n.getMonth()-e.getMonth();return(i<0||i===0&&n.getDate()<e.getDate())&&r--,r}function sne(t,e){return t*rne[e]}function hI(t,e,n,r,i,a){const l=ane(n),f=ine(t,e,l,r),m=sne(f,i);let p=m;a==="lose"&&(p=m-500),p=Math.max(p,r==="male"?1500:1200);const _=Math.max(23,Math.round(p/30)),T=Math.round(_*1.4);return{dailyPoints:_,weeklyPoints:T,bmr:Math.round(f),tdee:Math.round(m),targetCalories:Math.round(p)}}const cd=Zx((t,e)=>({profile:null,isLoading:!0,loadProfile:async()=>{t({isLoading:!0});const r=(await Ze.userProfiles.toArray())[0]||null;t({profile:r,isLoading:!1})},saveProfile:async n=>{const r=e().profile,i=new Date;if(r?.id){await Ze.userProfiles.update(r.id,{...n,updatedAt:i});const a={...r,...n,updatedAt:i};t({profile:a});const l=Go.currentUser?.uid;l&&Dy(l,a).catch(()=>{})}else{const a=await Ze.userProfiles.add({...n,createdAt:i,updatedAt:i}),l=await Ze.userProfiles.get(a);t({profile:l||null});const f=Go.currentUser?.uid;f&&l&&Dy(f,l).catch(()=>{})}},updateWeight:async n=>{const r=e().profile;if(!r?.id)return null;const i=r.dailyPointsBudget,a=r.weeklyPointsBudget;let l=r.goal;const f=r.goal==="lose"&&n<=r.goalWeightKg,m=f;f&&(l="maintain");const p=hI(n,r.heightCm,r.dateOfBirth,r.gender,r.activityLevel,l),b=new Date,_={currentWeightKg:n,dailyPointsBudget:p.dailyPoints,weeklyPointsBudget:p.weeklyPoints,updatedAt:b};m&&(_.goal="maintain"),await Ze.userProfiles.update(r.id,_);const T={...r,..._};t({profile:T});const R=Go.currentUser?.uid;return R&&Dy(R,T).catch(()=>{}),{oldDailyBudget:i,newDailyBudget:p.dailyPoints,oldWeeklyBudget:a,newWeeklyBudget:p.weeklyPoints,goalReached:f,goalSwitched:m}}})),om=Zx(t=>(hee(Go,e=>{t({user:e,isAuthLoading:!1})}),{user:null,isAuthLoading:!0,error:null,login:async(e,n)=>{t({error:null});try{await cee(Go,e,n)}catch(r){t({error:{"auth/invalid-credential":"Onjuist e-mailadres of wachtwoord","auth/invalid-email":"Ongeldig e-mailadres","auth/user-disabled":"Dit account is uitgeschakeld","auth/user-not-found":"Geen account gevonden met dit e-mailadres","auth/wrong-password":"Onjuist wachtwoord","auth/too-many-requests":"Te veel pogingen. Probeer het later opnieuw","auth/network-request-failed":"Geen internetverbinding"}[r.code]||"Er ging iets mis. Probeer het opnieuw."})}},register:async(e,n)=>{t({error:null});try{await uee(Go,e,n)}catch(r){t({error:{"auth/email-already-in-use":"Er bestaat al een account met dit e-mailadres","auth/invalid-email":"Ongeldig e-mailadres","auth/weak-password":"Wachtwoord moet minimaal 6 tekens zijn","auth/network-request-failed":"Geen internetverbinding"}[r.code]||"Er ging iets mis. Probeer het opnieuw."})}},logout:async()=>{await mee(Go)},clearError:()=>t({error:null})}));const UL=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();const one=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const lne=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase());const z4=t=>{const e=lne(t);return e.charAt(0).toUpperCase()+e.slice(1)};var une={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const cne=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const fne=D.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...f},m)=>D.createElement("svg",{ref:m,...une,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:UL("lucide",i),...!a&&!cne(f)&&{"aria-hidden":"true"},...f},[...l.map(([p,b])=>D.createElement(p,b)),...Array.isArray(a)?a:[a]]));const Dt=(t,e)=>{const n=D.forwardRef(({className:r,...i},a)=>D.createElement(fne,{ref:a,iconNode:e,className:UL(`lucide-${one(z4(t))}`,`lucide-${t}`,r),...i}));return n.displayName=z4(t),n};const dne=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],hne=Dt("arrow-left",dne);const mne=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],gne=Dt("ban",mne);const pne=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],yne=Dt("bell-off",pne);const vne=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],xne=Dt("bell",vne);const bne=[["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M15 10H9",key:"o6yqo3"}],["path",{d:"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z",key:"oz39mx"}]],wne=Dt("bookmark-plus",bne);const _ne=[["path",{d:"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z",key:"oz39mx"}]],Ene=Dt("bookmark",_ne);const Ane=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],X1=Dt("bot",Ane);const Sne=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Tne=Dt("camera",Sne);const Ine=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Cne=Dt("chart-column",Ine);const One=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],qL=Dt("check",One);const Nne=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],Rne=Dt("chef-hat",Nne);const Pne=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],GL=Dt("chevron-down",Pne);const Dne=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],U4=Dt("chevron-left",Dne);const kne=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vv=Dt("chevron-right",kne);const Mne=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],jne=Dt("chevron-up",Mne);const Lne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ky=Dt("circle-alert",Lne);const Bne=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Fne=Dt("circle-check-big",Bne);const Vne=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],mI=Dt("clock",Vne);const zne=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Une=Dt("coffee",zne);const qne=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],HL=Dt("copy",qne);const Gne=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Hne=Dt("download",Gne);const Kne=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],kh=Dt("droplets",Kne);const Wne=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],$ne=Dt("eye-off",Wne);const Yne=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xne=Dt("eye",Yne);const Qne=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Zne=Dt("flame",Qne);const Jne=[["path",{d:"M5.116 4.104A1 1 0 0 1 6.11 3h11.78a1 1 0 0 1 .994 1.105L17.19 20.21A2 2 0 0 1 15.2 22H8.8a2 2 0 0 1-2-1.79z",key:"p55z4y"}],["path",{d:"M6 12a5 5 0 0 1 6 0 5 5 0 0 0 6 0",key:"mjntcy"}]],ere=Dt("glass-water",Jne);const tre=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],eb=Dt("heart",tre);const nre=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],rre=Dt("house",nre);const ire=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],q4=Dt("image-plus",ire);const are=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],sre=Dt("key-round",are);const ore=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],lre=Dt("key",ore);const ure=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],cre=Dt("leaf",ure);const fre=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Nc=Dt("loader-circle",fre);const dre=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],G4=Dt("lock",dre);const hre=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],KL=Dt("log-out",hre);const mre=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],gre=Dt("mail",mre);const pre=[["path",{d:"M5 12h14",key:"1ays0h"}]],CA=Dt("minus",pre);const yre=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],vre=Dt("monitor",yre);const xre=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],bre=Dt("moon",xre);const wre=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Vf=Dt("plus",wre);const _re=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ere=Dt("refresh-cw",_re);const Are=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],WL=Dt("rotate-ccw",Are);const Sre=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],tb=Dt("scale",Sre);const Tre=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]],xv=Dt("scan-barcode",Tre);const Ire=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Op=Dt("search",Ire);const Cre=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ore=Dt("send",Cre);const Nre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Rre=Dt("shield-alert",Nre);const Pre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Dre=Dt("shield",Pre);const kre=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Mre=Dt("sparkles",kre);const jre=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Lre=Dt("sun",jre);const Bre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],$L=Dt("target",Bre);const Fre=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],Vre=Dt("ticket",Fre);const zre=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ure=Dt("trash-2",zre);const qre=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],bv=Dt("trending-down",qre);const Gre=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],H4=Dt("trending-up",Gre);const Hre=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],YL=Dt("trophy",Hre);const Kre=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],Wre=Dt("undo-2",Kre);const $re=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Yre=Dt("upload",$re);const Xre=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],XL=Dt("user",Xre);const Qre=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Zre=Dt("users",Qre);const Jre=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],eie=Dt("wifi-off",Jre);const tie=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],lm=Dt("x",tie),nie=[{path:"/",icon:rre,label:"Home"},{path:"/search",icon:Op,label:"Zoeken"},{path:"/scan",icon:xv,label:"Scan"},{path:"/statistics",icon:Cne,label:"Stats"},{path:"/profile",icon:XL,label:"Profiel"}];function rie(){const t=kl(),e=Jc();return O.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-xl border-t border-ios-separator z-50",style:{paddingBottom:"var(--safe-area-bottom)"},children:O.jsx("div",{className:"flex justify-around items-center h-[50px] max-w-lg mx-auto",children:nie.map(({path:n,icon:r,label:i})=>{const a=t.pathname===n;return O.jsxs("button",{onClick:()=>e(n),className:`flex flex-col items-center justify-center gap-0.5 w-full h-full border-none bg-transparent cursor-pointer transition-colors ${a?"text-primary":"text-ios-secondary"}`,children:[O.jsx(r,{size:24,strokeWidth:a?2.2:1.5}),O.jsx("span",{className:"text-[10px] font-medium",children:i})]},n)})})})}const iie={primary:"bg-primary text-white active:bg-primary-dark",secondary:"bg-ios-bg text-primary active:bg-gray-200",destructive:"bg-ios-destructive text-white active:bg-red-700",ghost:"bg-transparent text-primary active:bg-gray-100"},aie={sm:"px-4 py-2 text-[14px]",md:"px-5 py-3 text-[17px]",lg:"px-6 py-4 text-[17px]"};function to({variant:t="primary",size:e="md",children:n,fullWidth:r=!1,className:i="",disabled:a,...l}){return O.jsx("button",{className:`
        rounded-xl font-semibold border-none cursor-pointer
        transition-all duration-150 select-none
        ${iie[t]}
        ${aie[e]}
        ${r?"w-full":""}
        ${a?"opacity-40 pointer-events-none":""}
        ${i}
      `,disabled:a,...l,children:n})}function sie(){const{login:t,register:e,error:n,clearError:r,isAuthLoading:i}=om(),[a,l]=D.useState("login"),[f,m]=D.useState(""),[p,b]=D.useState(""),[_,T]=D.useState(""),[R,j]=D.useState(""),[M,L]=D.useState(!1),[z,$]=D.useState(!1),[K,J]=D.useState(""),ce=W=>{l(W),r(),J(""),b(""),T(""),j("")},Z=async W=>{if(W.preventDefault(),J(""),!f.trim()||!p){J("Vul je e-mailadres en wachtwoord in");return}if(a==="register"){if(p.length<6){J("Wachtwoord moet minimaal 6 tekens zijn");return}if(p!==_){J("Wachtwoorden komen niet overeen");return}if(!R.trim()){J("Vul een invite code in");return}}if($(!0),a==="login")await t(f.trim(),p);else try{const U=ds(Ti,"inviteCodes",R.trim().toUpperCase()),ae=await f0(U);if(!ae.exists()){J("Ongeldige invite code"),$(!1);return}if(ae.data().usedBy){J("Deze invite code is al gebruikt"),$(!1);return}await e(f.trim(),p);const{currentUser:ie}=await MS(()=>Promise.resolve().then(()=>Cte),[]).then(Q=>Q.auth);ie&&ZT(U,{usedBy:ie.uid,usedEmail:f.trim(),usedAt:new Date().toISOString()}).catch(()=>{})}catch{J("Kon invite code niet controleren. Probeer opnieuw."),$(!1);return}$(!1)},V=K||n;return O.jsxs("div",{className:"flex flex-col h-full bg-ios-bg",style:{paddingTop:"var(--safe-area-top)"},children:[O.jsxs("div",{className:"flex flex-col items-center pt-16 pb-8 px-8",children:[O.jsx("div",{className:"w-20 h-20 rounded-[28px] bg-primary flex items-center justify-center mb-6 shadow-lg",children:O.jsx(tb,{size:40,color:"white"})}),O.jsx("h1",{className:"text-[34px] font-bold text-ios-text mb-1",children:"BodyBalance"}),O.jsx("p",{className:"text-[15px] text-ios-secondary text-center",children:a==="login"?"Log in om verder te gaan":"Maak een account aan"})]}),O.jsxs("form",{onSubmit:Z,className:"flex-1 px-6 flex flex-col gap-4",children:[O.jsxs("div",{className:"relative",children:[O.jsx(gre,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:"email",value:f,onChange:W=>m(W.target.value),placeholder:"E-mailadres",autoComplete:"email",className:"w-full bg-white rounded-xl py-3.5 pl-12 pr-4 text-[17px] text-ios-text border border-ios-separator placeholder:text-ios-secondary/50 outline-none focus:border-primary focus:ring-1 focus:ring-primary/20 transition-colors"})]}),O.jsxs("div",{className:"relative",children:[O.jsx(G4,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:M?"text":"password",value:p,onChange:W=>b(W.target.value),placeholder:"Wachtwoord",autoComplete:a==="login"?"current-password":"new-password",className:"w-full bg-white rounded-xl py-3.5 pl-12 pr-12 text-[17px] text-ios-text border border-ios-separator placeholder:text-ios-secondary/50 outline-none focus:border-primary focus:ring-1 focus:ring-primary/20 transition-colors"}),O.jsx("button",{type:"button",onClick:()=>L(!M),className:"absolute right-4 top-1/2 -translate-y-1/2 bg-transparent border-none cursor-pointer p-0",children:M?O.jsx($ne,{size:18,className:"text-ios-secondary"}):O.jsx(Xne,{size:18,className:"text-ios-secondary"})})]}),a==="register"&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"relative",children:[O.jsx(G4,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:M?"text":"password",value:_,onChange:W=>T(W.target.value),placeholder:"Wachtwoord bevestigen",autoComplete:"new-password",className:"w-full bg-white rounded-xl py-3.5 pl-12 pr-4 text-[17px] text-ios-text border border-ios-separator placeholder:text-ios-secondary/50 outline-none focus:border-primary focus:ring-1 focus:ring-primary/20 transition-colors"})]}),O.jsxs("div",{className:"relative",children:[O.jsx(Vre,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:"text",value:R,onChange:W=>j(W.target.value.toUpperCase()),placeholder:"Invite code",autoComplete:"off",className:"w-full bg-white rounded-xl py-3.5 pl-12 pr-4 text-[17px] text-ios-text border border-ios-separator placeholder:text-ios-secondary/50 outline-none focus:border-primary focus:ring-1 focus:ring-primary/20 transition-colors font-mono tracking-wider"})]})]}),V&&O.jsx("div",{className:"bg-ios-destructive/10 text-ios-destructive text-[14px] rounded-xl px-4 py-3 text-center font-medium",children:V}),O.jsx(to,{type:"submit",fullWidth:!0,size:"lg",disabled:z||i,children:z?a==="login"?"Inloggen...":"Account aanmaken...":a==="login"?"Inloggen":"Account aanmaken"}),O.jsx("div",{className:"text-center pt-2",children:a==="login"?O.jsxs("p",{className:"text-[15px] text-ios-secondary",children:["Nog geen account?"," ",O.jsx("button",{type:"button",onClick:()=>ce("register"),className:"text-primary font-semibold bg-transparent border-none cursor-pointer p-0",children:"Registreren"})]}):O.jsxs("p",{className:"text-[15px] text-ios-secondary",children:["Al een account?"," ",O.jsx("button",{type:"button",onClick:()=>ce("login"),className:"text-primary font-semibold bg-transparent border-none cursor-pointer p-0",children:"Inloggen"})]})})]})]})}function QL({label:t,children:e}){return O.jsxs("div",{className:"flex flex-col gap-1.5",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide px-1",children:t}),e]})}function Tc({label:t,suffix:e,...n}){return O.jsx(QL,{label:t,children:O.jsxs("div",{className:"relative",children:[O.jsx("input",{...n,className:"bg-white rounded-2xl border border-ios-separator px-4 py-3.5 text-[17px] w-full outline-none focus:border-primary focus:ring-2 focus:ring-primary/20"}),e&&O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:e})]})})}function Mh({label:t,options:e,...n}){return O.jsx(QL,{label:t,children:O.jsxs("div",{className:"relative",children:[O.jsx("select",{...n,className:"bg-white rounded-2xl border border-ios-separator px-4 py-3.5 text-[17px] w-full outline-none appearance-none focus:border-primary focus:ring-2 focus:ring-primary/20",children:e.map(r=>O.jsx("option",{value:r.value,children:r.label},r.value))}),O.jsx("svg",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary pointer-events-none",width:"12",height:"12",viewBox:"0 0 12 12",children:O.jsx("path",{fill:"currentColor",d:"M6 8.825L1.175 4 2.238 2.938 6 6.7 9.763 2.937 10.825 4z"})})]})})}const OA={sedentary:"Zittend (weinig/geen beweging)",light:"Licht actief (1-3 dagen/week)",moderate:"Matig actief (3-5 dagen/week)",active:"Actief (6-7 dagen/week)",veryActive:"Zeer actief (zware training)"},NA={lose:"Afvallen",maintain:"Gewicht behouden"};function oie(){const t=Jc(),e=cd(U=>U.saveProfile),[n,r]=D.useState("welcome"),[i,a]=D.useState(""),[l,f]=D.useState("male"),[m,p]=D.useState("1990-01-01"),[b,_]=D.useState("175"),[T,R]=D.useState("80"),[j,M]=D.useState("75"),[L,z]=D.useState("light"),[$,K]=D.useState("lose"),J=Number(b)||175,ce=Number(T)||80,Z=Number(j)||75,V=hI(ce,J,m,l,L,$),W=async()=>{await e({name:i,gender:l,dateOfBirth:m,heightCm:J,currentWeightKg:ce,goalWeightKg:Z,activityLevel:L,goal:$,dailyPointsBudget:V.dailyPoints,weeklyPointsBudget:V.weeklyPoints,onboardingComplete:!0}),t("/")};return n==="welcome"?O.jsxs("div",{className:"flex flex-col items-center justify-center h-full px-8 animate-fade-in",children:[O.jsx("div",{className:"w-20 h-20 rounded-[28px] bg-primary flex items-center justify-center mb-6 shadow-lg",children:O.jsx(tb,{size:40,color:"white"})}),O.jsx("h1",{className:"text-[34px] font-bold text-ios-text mb-2",children:"BodyBalance"}),O.jsx("p",{className:"text-[17px] text-ios-secondary text-center mb-2 leading-relaxed",children:"Houd je voeding bij met een simpel puntensysteem"}),O.jsx("p",{className:"text-[15px] text-ios-secondary text-center mb-10 leading-relaxed",children:"Calorien worden omgezet in punten. Blijf binnen je dagbudget en bereik je streefgewicht."}),O.jsxs(to,{fullWidth:!0,size:"lg",onClick:()=>r("profile"),children:["Aan de slag",O.jsx(vv,{size:20,className:"inline ml-1"})]}),O.jsxs("button",{onClick:()=>om.getState().logout(),className:"mt-4 flex items-center justify-center gap-2 text-[15px] text-ios-secondary bg-transparent border-none cursor-pointer",children:[O.jsx(KL,{size:16}),"Uitloggen"]})]}):n==="profile"?O.jsxs("div",{className:"flex flex-col h-full animate-fade-in",children:[O.jsxs("div",{className:"px-6 pt-12 pb-4",style:{paddingTop:"calc(var(--safe-area-top) + 48px)"},children:[O.jsx("h2",{className:"text-[28px] font-bold text-ios-text mb-1",children:"Jouw profiel"}),O.jsx("p",{className:"text-[15px] text-ios-secondary",children:"We berekenen je dagelijkse puntenbudget"})]}),O.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-32",children:O.jsxs("div",{className:"flex flex-col gap-4",children:[O.jsx(Tc,{label:"Naam",type:"text",placeholder:"Je naam",value:i,onChange:U=>a(U.currentTarget.value)}),O.jsx(Mh,{label:"Geslacht",value:l,onChange:U=>f(U.currentTarget.value),options:[{value:"male",label:"Man"},{value:"female",label:"Vrouw"}]}),O.jsx(Tc,{label:"Geboortedatum",type:"date",value:m,onChange:U=>p(U.currentTarget.value)}),O.jsx(Tc,{label:"Lengte",type:"number",suffix:"cm",value:b,onChange:U=>_(U.currentTarget.value),min:100,max:250}),O.jsx(Tc,{label:"Huidig gewicht",type:"number",suffix:"kg",value:T,onChange:U=>R(U.currentTarget.value),min:30,max:300}),O.jsx(Tc,{label:"Streefgewicht",type:"number",suffix:"kg",value:j,onChange:U=>M(U.currentTarget.value),min:30,max:300}),O.jsx(Mh,{label:"Activiteitsniveau",value:L,onChange:U=>z(U.currentTarget.value),options:Object.entries(OA).map(([U,ae])=>({value:U,label:ae}))}),O.jsx(Mh,{label:"Doel",value:$,onChange:U=>K(U.currentTarget.value),options:Object.entries(NA).map(([U,ae])=>({value:U,label:ae}))})]})}),O.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-xl border-t border-ios-separator px-6 py-4",style:{paddingBottom:"calc(var(--safe-area-bottom) + 16px)"},children:O.jsx(to,{fullWidth:!0,size:"lg",onClick:()=>r("result"),disabled:!i,children:"Bereken mijn budget"})})]}):O.jsxs("div",{className:"flex flex-col items-center justify-center h-full px-8 animate-fade-in",children:[O.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:O.jsx(Mre,{size:32,className:"text-primary"})}),O.jsxs("h2",{className:"text-[28px] font-bold text-ios-text mb-2",children:["Hoi ",i,"!"]}),O.jsx("p",{className:"text-[15px] text-ios-secondary text-center mb-8",children:"Je persoonlijke puntenbudget is berekend"}),O.jsxs("div",{className:"bg-white rounded-3xl shadow-sm p-6 w-full mb-6",children:[O.jsxs("div",{className:"text-center mb-6",children:[O.jsx("div",{className:"text-[64px] font-bold text-primary leading-none",children:V.dailyPoints}),O.jsx("div",{className:"text-[15px] text-ios-secondary mt-1",children:"punten per dag"})]}),O.jsxs("div",{className:"flex justify-around py-4 border-t border-ios-separator",children:[O.jsxs("div",{className:"text-center",children:[O.jsxs("div",{className:"flex items-center gap-1 justify-center mb-1",children:[O.jsx($L,{size:14,className:"text-ios-blue"}),O.jsx("span",{className:"text-[13px] text-ios-secondary",children:"Weekpunten"})]}),O.jsx("span",{className:"text-[20px] font-bold",children:V.weeklyPoints})]}),O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"text-[13px] text-ios-secondary mb-1",children:"Calorien/dag"}),O.jsxs("span",{className:"text-[20px] font-bold",children:["~",V.targetCalories]})]})]})]}),O.jsxs("p",{className:"text-[13px] text-ios-secondary text-center mb-8 leading-relaxed",children:["Je dagelijks budget van ",O.jsxs("strong",{children:[V.dailyPoints," punten"]})," is gebaseerd op je profiel. Daarnaast heb je ",O.jsxs("strong",{children:[V.weeklyPoints," weekpunten"]})," voor extra flexibiliteit."]}),O.jsx(to,{fullWidth:!0,size:"lg",onClick:W,children:"Start met tracken"})]})}const ZL=6048e5,lie=864e5,K4=Symbol.for("constructDateFrom");function Eu(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&K4 in t?t[K4](e):t instanceof Date?new t.constructor(e):new Date(e)}function No(t,e){return Eu(e||t,t)}function My(t,e,n){const r=No(t,n?.in);return isNaN(e)?Eu(t,NaN):(e&&r.setDate(r.getDate()+e),r)}let uie={};function nb(){return uie}function fd(t,e){const n=nb(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=No(t,e?.in),a=i.getDay(),l=(a<r?7:0)+a-r;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function wv(t,e){return fd(t,{...e,weekStartsOn:1})}function JL(t,e){const n=No(t,e?.in),r=n.getFullYear(),i=Eu(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=wv(i),l=Eu(n,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const f=wv(l);return n.getTime()>=a.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function W4(t){const e=No(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function cie(t,...e){const n=Eu.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function $4(t,e){const n=No(t,e?.in);return n.setHours(0,0,0,0),n}function fie(t,e,n){const[r,i]=cie(n?.in,t,e),a=$4(r),l=$4(i),f=+a-W4(a),m=+l-W4(l);return Math.round((f-m)/lie)}function die(t,e){const n=JL(t,e),r=Eu(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),wv(r)}function hie(t,e,n){return My(t,e*7,n)}function mie(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function gie(t){return!(!mie(t)&&typeof t!="number"||isNaN(+No(t)))}function pie(t,e){const n=No(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const yie={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},vie=(t,e,n)=>{let r;const i=yie[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function jh(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const xie={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bie={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wie={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_ie={date:jh({formats:xie,defaultWidth:"full"}),time:jh({formats:bie,defaultWidth:"full"}),dateTime:jh({formats:wie,defaultWidth:"full"})},Eie={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Aie=(t,e,n,r)=>Eie[t];function yl(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,f=n?.width?String(n.width):l;i=t.formattingValues[f]||t.formattingValues[l]}else{const l=t.defaultWidth,f=n?.width?String(n.width):t.defaultWidth;i=t.values[f]||t.values[l]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const Sie={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Tie={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Iie={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Cie={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Oie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Nie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Rie=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Pie={ordinalNumber:Rie,era:yl({values:Sie,defaultWidth:"wide"}),quarter:yl({values:Tie,defaultWidth:"wide",argumentCallback:t=>t-1}),month:yl({values:Iie,defaultWidth:"wide"}),day:yl({values:Cie,defaultWidth:"wide"}),dayPeriod:yl({values:Oie,defaultWidth:"wide",formattingValues:Nie,defaultFormattingWidth:"wide"})};function vl(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const l=a[0],f=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],m=Array.isArray(f)?kie(f,_=>_.test(l)):Die(f,_=>_.test(l));let p;p=t.valueCallback?t.valueCallback(m):m,p=n.valueCallback?n.valueCallback(p):p;const b=e.slice(l.length);return{value:p,rest:b}}}function Die(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function kie(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function eB(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let l=t.valueCallback?t.valueCallback(a[0]):a[0];l=n.valueCallback?n.valueCallback(l):l;const f=e.slice(i.length);return{value:l,rest:f}}}const Mie=/^(\d+)(th|st|nd|rd)?/i,jie=/\d+/i,Lie={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Bie={any:[/^b/i,/^(a|c)/i]},Fie={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Vie={any:[/1/i,/2/i,/3/i,/4/i]},zie={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Uie={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},qie={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Gie={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Hie={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Kie={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Wie={ordinalNumber:eB({matchPattern:Mie,parsePattern:jie,valueCallback:t=>parseInt(t,10)}),era:vl({matchPatterns:Lie,defaultMatchWidth:"wide",parsePatterns:Bie,defaultParseWidth:"any"}),quarter:vl({matchPatterns:Fie,defaultMatchWidth:"wide",parsePatterns:Vie,defaultParseWidth:"any",valueCallback:t=>t+1}),month:vl({matchPatterns:zie,defaultMatchWidth:"wide",parsePatterns:Uie,defaultParseWidth:"any"}),day:vl({matchPatterns:qie,defaultMatchWidth:"wide",parsePatterns:Gie,defaultParseWidth:"any"}),dayPeriod:vl({matchPatterns:Hie,defaultMatchWidth:"any",parsePatterns:Kie,defaultParseWidth:"any"})},$ie={code:"en-US",formatDistance:vie,formatLong:_ie,formatRelative:Aie,localize:Pie,match:Wie,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Yie(t,e){const n=No(t,e?.in);return fie(n,pie(n))+1}function Xie(t,e){const n=No(t,e?.in),r=+wv(n)-+die(n);return Math.round(r/ZL)+1}function tB(t,e){const n=No(t,e?.in),r=n.getFullYear(),i=nb(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=Eu(e?.in||t,0);l.setFullYear(r+1,0,a),l.setHours(0,0,0,0);const f=fd(l,e),m=Eu(e?.in||t,0);m.setFullYear(r,0,a),m.setHours(0,0,0,0);const p=fd(m,e);return+n>=+f?r+1:+n>=+p?r:r-1}function Qie(t,e){const n=nb(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=tB(t,e),a=Eu(e?.in||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),fd(a,e)}function Zie(t,e){const n=No(t,e?.in),r=+fd(n,e)-+Qie(n,e);return Math.round(r/ZL)+1}function lr(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const pc={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return lr(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):lr(n+1,2)},d(t,e){return lr(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return n==="am"?"a.m.":"p.m."}},h(t,e){return lr(t.getHours()%12||12,e.length)},H(t,e){return lr(t.getHours(),e.length)},m(t,e){return lr(t.getMinutes(),e.length)},s(t,e){return lr(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return lr(i,e.length)}},hh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Y4={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return pc.y(t,e)},Y:function(t,e,n,r){const i=tB(t,r),a=i>0?i:1-i;if(e==="YY"){const l=a%100;return lr(l,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):lr(a,e.length)},R:function(t,e){const n=JL(t);return lr(n,e.length)},u:function(t,e){const n=t.getFullYear();return lr(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return lr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return lr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return pc.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return lr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=Zie(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):lr(i,e.length)},I:function(t,e,n){const r=Xie(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):lr(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):pc.d(t,e)},D:function(t,e,n){const r=Yie(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):lr(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return lr(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return lr(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return lr(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=hh.noon:r===0?i=hh.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=hh.evening:r>=12?i=hh.afternoon:r>=4?i=hh.morning:i=hh.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return pc.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):pc.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):lr(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):lr(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):pc.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):pc.s(t,e)},S:function(t,e){return pc.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Q4(r);case"XXXX":case"XX":return Rf(r);default:return Rf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Q4(r);case"xxxx":case"xx":return Rf(r);default:return Rf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+X4(r,":");default:return"GMT"+Rf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+X4(r,":");default:return"GMT"+Rf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return lr(r,e.length)},T:function(t,e,n){return lr(+t,e.length)}};function X4(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+lr(a,2)}function Q4(t,e){return t%60===0?(t>0?"-":"+")+lr(Math.abs(t)/60,2):Rf(t,e)}function Rf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=lr(Math.trunc(r/60),2),a=lr(r%60,2);return n+i+e+a}const Z4=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},nB=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},Jie=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Z4(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Z4(r,e)).replace("{{time}}",nB(i,e))},eae={p:nB,P:Jie},tae=/^D+$/,nae=/^Y+$/,rae=["D","DD","YY","YYYY"];function iae(t){return tae.test(t)}function aae(t){return nae.test(t)}function sae(t,e,n){const r=oae(t,e,n);if(console.warn(r),rae.includes(t))throw new RangeError(r)}function oae(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const lae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,uae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cae=/^'([^]*?)'?$/,fae=/''/g,dae=/[a-zA-Z]/;function Ns(t,e,n){const r=nb(),i=n?.locale??r.locale??$ie,a=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,f=No(t,n?.in);if(!gie(f))throw new RangeError("Invalid time value");let m=e.match(uae).map(b=>{const _=b[0];if(_==="p"||_==="P"){const T=eae[_];return T(b,i.formatLong)}return b}).join("").match(lae).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const _=b[0];if(_==="'")return{isToken:!1,value:hae(b)};if(Y4[_])return{isToken:!0,value:b};if(_.match(dae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:b}});i.localize.preprocessor&&(m=i.localize.preprocessor(f,m));const p={firstWeekContainsDate:a,weekStartsOn:l,locale:i};return m.map(b=>{if(!b.isToken)return b.value;const _=b.value;(!n?.useAdditionalWeekYearTokens&&aae(_)||!n?.useAdditionalDayOfYearTokens&&iae(_))&&sae(_,e,String(t));const T=Y4[_[0]];return T(f,_,i.localize,p)}).join("")}function hae(t){const e=t.match(cae);return e?e[1].replace(fae,"'"):t}function J4(t,e,n){return hie(t,-e,n)}const $f=Zx((t,e)=>({entries:[],selectedDate:Ns(new Date,"yyyy-MM-dd"),isLoading:!1,setDate:n=>{t({selectedDate:n}),e().loadEntries()},loadEntries:async()=>{t({isLoading:!0});const n=await VL(e().selectedDate);t({entries:n,isLoading:!1})},addEntry:async n=>{const r=await zL(e().selectedDate,n);return await e().loadEntries(),r},updateEntry:async(n,r)=>{await Hte(n,r)&&window.dispatchEvent(new CustomEvent("water-changed")),await e().loadEntries()},removeEntry:async n=>{await Kte(n)>0&&window.dispatchEvent(new CustomEvent("water-changed")),await e().loadEntries()},getEntriesByMealType:n=>e().entries.filter(r=>r.mealType===n),getTotalPoints:()=>e().entries.reduce((n,r)=>n+r.points,0),getPointsByMealType:n=>e().entries.filter(r=>r.mealType===n).reduce((r,i)=>r+i.points,0)}));function km({title:t,children:e,rightAction:n,noPadding:r}){return O.jsxs("div",{className:"flex flex-col h-full",children:[O.jsx("header",{className:"bg-white/80 backdrop-blur-xl border-b border-ios-separator flex-shrink-0",style:{paddingTop:"var(--safe-area-top)"},children:O.jsxs("div",{className:"flex items-center justify-between px-4 h-[44px]",children:[O.jsx("h1",{className:"text-[17px] font-semibold text-ios-text",children:t}),n&&O.jsx("div",{children:n})]})}),O.jsx("main",{className:`flex-1 overflow-y-auto overscroll-contain ${r?"":"px-4 py-4"}`,style:{paddingBottom:"calc(60px + var(--safe-area-bottom))"},children:e})]})}function mae({used:t,budget:e,size:n=180}){const r=t>e,i=e-t,a=r?t-e:0,l=Math.min(t/e,1),f=12,m=(n-f)/2,p=2*Math.PI*m,b=p*(1-l),_=n/2;return O.jsxs("div",{className:"flex flex-col items-center gap-2",children:[O.jsxs("div",{className:"relative",style:{width:n,height:n},children:[O.jsxs("svg",{width:n,height:n,className:"-rotate-90",children:[O.jsx("circle",{cx:_,cy:_,r:m,fill:"none",stroke:"#E5E5EA",strokeWidth:f,strokeLinecap:"round"}),O.jsx("circle",{cx:_,cy:_,r:m,fill:"none",stroke:r?"#FF3B30":"#34C759",strokeWidth:f,strokeLinecap:"round",strokeDasharray:p,strokeDashoffset:b,className:"transition-all duration-700 ease-out"})]}),O.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[O.jsx("span",{className:`text-[42px] font-bold leading-none ${r?"text-ios-destructive":"text-ios-text"}`,children:r?a:i}),O.jsx("span",{className:"text-[13px] text-ios-secondary mt-1",children:r?"te veel":"resterend"})]})]}),O.jsxs("div",{className:"flex gap-6 text-[13px] text-ios-secondary",children:[O.jsxs("span",{children:[O.jsx("strong",{className:"text-ios-text",children:t})," gebruikt"]}),O.jsxs("span",{children:[O.jsx("strong",{className:"text-ios-text",children:e})," budget"]})]})]})}const rB={breakfast:"Ontbijt",lunch:"Lunch",dinner:"Diner",snack:"Tussendoor"},gae={breakfast:"",lunch:"",dinner:"",snack:""};function An({children:t,className:e="",onClick:n}){return O.jsx("div",{className:`bg-white rounded-2xl shadow-sm ${n?"active:bg-gray-50 cursor-pointer transition-colors":""} ${e}`,onClick:n,children:t})}function Eo({title:t,rightContent:e}){return O.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-ios-separator",children:[O.jsx("h3",{className:"text-[15px] font-semibold text-ios-secondary uppercase tracking-wide",children:t}),e]})}function pae({mealType:t,entries:e,totalPoints:n,onRemoveEntry:r,onEditEntry:i,onSaveTemplate:a}){const l=Jc();return O.jsxs(An,{className:"animate-fade-in",children:[O.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("span",{className:"text-lg",children:gae[t]}),O.jsx("span",{className:"font-semibold text-[15px]",children:rB[t]})]}),O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsxs("span",{className:"text-[15px] text-ios-secondary font-medium",children:[n," pt"]}),e.length>0&&a&&O.jsx("button",{onClick:()=>a(t),className:"w-7 h-7 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer active:bg-gray-200 transition-colors",children:O.jsx(wne,{size:14,className:"text-ios-secondary"})}),O.jsx("button",{onClick:()=>l(`/search?meal=${t}`),className:"w-7 h-7 rounded-full bg-primary flex items-center justify-center border-none cursor-pointer active:bg-primary-dark transition-colors",children:O.jsx(Vf,{size:16,color:"white",strokeWidth:2.5})})]})]}),e.length>0&&O.jsx("div",{className:"border-t border-ios-separator",children:e.map((f,m)=>O.jsxs("div",{className:`flex items-center justify-between px-4 py-2.5 ${m<e.length-1?"border-b border-ios-separator":""} ${i?"cursor-pointer":""}`,onClick:()=>i?.(f),children:[O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("div",{className:"text-[15px] truncate",children:f.foodItem.name}),O.jsx("div",{className:"text-[13px] text-ios-secondary",children:(()=>{const p=f.foodItem.unit==="ml"?"ml":"g";return f.quantity&&f.quantity>1?`${f.quantity} ${f.quantityG}${p}`:`${f.quantityG}${p}`})()})]}),O.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[O.jsxs("span",{className:`text-[15px] font-medium ${f.points===0?"text-primary":""}`,children:[f.points===0?"0":f.points," pt"]}),f.id!=null&&O.jsx("button",{onClick:p=>{p.stopPropagation(),r(f.id)},className:"text-ios-secondary active:text-ios-destructive border-none bg-transparent cursor-pointer p-2",children:O.jsx(Ure,{size:16})})]})]},f.id??m))}),e.length===0&&O.jsx("div",{className:"px-4 py-3 text-[15px] text-ios-secondary border-t border-ios-separator cursor-pointer active:bg-gray-50",onClick:()=>l(`/search?meal=${t}`),children:"Tik om voedsel toe te voegen..."})]})}function y0(t){const e=t.calories*.03+t.saturatedFat*.28+t.sugar*.12-t.protein*.1-t.fiber*.1-t.unsaturatedFat*.05;return Math.max(0,Math.round(e))}function v0(t,e){return Math.max(0,Math.round(t*e/100))}function yae({entry:t,onSave:e,onClose:n}){const[r,i]=D.useState(String(t.quantityG)),[a,l]=D.useState(String(t.quantity||1)),f=Number(r)||0,m=Math.round(Number(a))||0,p=t.foodItem,b=p.unit==="ml"?"ml":"gram",_=p.unit==="ml"?"ml":"g",R=v0(p.pointsPer100g,f)*m,j=()=>{t.id&&e(t.id,{quantityG:f,quantity:m>1?m:void 0,points:R})};return O.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center animate-fade-in",children:[O.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:n}),O.jsxs("div",{className:"relative bg-white rounded-t-3xl w-full max-w-lg animate-slide-up",style:{paddingBottom:"calc(20px + var(--safe-area-bottom))"},children:[O.jsx("div",{className:"flex justify-center pt-3 pb-2",children:O.jsx("div",{className:"w-9 h-1 rounded-full bg-ios-separator"})}),O.jsx("button",{onClick:n,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer",children:O.jsx(lm,{size:18,className:"text-ios-secondary"})}),O.jsxs("div",{className:"px-5 pb-4",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[p.imageUrl?O.jsx("img",{src:p.imageUrl,alt:p.name,className:"w-14 h-14 rounded-xl object-cover"}):O.jsx("div",{className:"w-14 h-14 rounded-xl bg-primary-light flex items-center justify-center",children:O.jsx("span",{className:"text-primary-dark text-2xl font-bold",children:p.name.charAt(0).toUpperCase()})}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-[17px] font-semibold",children:p.name}),p.brand&&O.jsx("p",{className:"text-[13px] text-ios-secondary",children:p.brand})]})]}),O.jsxs("div",{className:"bg-ios-bg rounded-2xl p-4 mb-5 text-center",children:[O.jsx("div",{className:"text-[48px] font-bold text-primary leading-none",children:R}),O.jsx("div",{className:"text-[13px] text-ios-secondary mt-1",children:"punten"})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1.5 px-1",children:"Hoeveelheid"}),O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>i(String(Math.max(10,f-10))),children:"-"}),O.jsxs("div",{className:"relative flex-1",children:[O.jsx("input",{type:"number",value:r,onChange:M=>i(M.target.value),className:"text-center bg-white rounded-xl text-[20px] font-medium",min:1}),O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:b})]}),O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>i(String(f+10)),children:"+"})]})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1.5 px-1",children:"Aantal"}),O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>l(String(Math.max(1,m-1))),children:"-"}),O.jsxs("div",{className:"relative flex-1",children:[O.jsx("input",{type:"number",value:a,onChange:M=>l(M.target.value),className:"text-center bg-white rounded-xl text-[20px] font-medium",min:1}),O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:"stuks"})]}),O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>l(String(m+1)),children:"+"})]})]}),O.jsx("div",{className:"flex gap-2 mb-5",children:[50,100,150,200].map(M=>O.jsxs("button",{onClick:()=>i(String(M)),className:`flex-1 py-2 rounded-xl text-[14px] font-medium border-none cursor-pointer transition-colors ${f===M?"bg-primary text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:[M,_]},M))}),O.jsxs(to,{fullWidth:!0,size:"lg",onClick:j,children:["Opslaan  ",R," pt",m>1?` (${m})`:""]})]})]})]})}const vae={lessThanXSeconds:{one:"minder dan een seconde",other:"minder dan {{count}} seconden"},xSeconds:{one:"1 seconde",other:"{{count}} seconden"},halfAMinute:"een halve minuut",lessThanXMinutes:{one:"minder dan een minuut",other:"minder dan {{count}} minuten"},xMinutes:{one:"een minuut",other:"{{count}} minuten"},aboutXHours:{one:"ongeveer 1 uur",other:"ongeveer {{count}} uur"},xHours:{one:"1 uur",other:"{{count}} uur"},xDays:{one:"1 dag",other:"{{count}} dagen"},aboutXWeeks:{one:"ongeveer 1 week",other:"ongeveer {{count}} weken"},xWeeks:{one:"1 week",other:"{{count}} weken"},aboutXMonths:{one:"ongeveer 1 maand",other:"ongeveer {{count}} maanden"},xMonths:{one:"1 maand",other:"{{count}} maanden"},aboutXYears:{one:"ongeveer 1 jaar",other:"ongeveer {{count}} jaar"},xYears:{one:"1 jaar",other:"{{count}} jaar"},overXYears:{one:"meer dan 1 jaar",other:"meer dan {{count}} jaar"},almostXYears:{one:"bijna 1 jaar",other:"bijna {{count}} jaar"}},xae=(t,e,n)=>{let r;const i=vae[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",String(e)),n?.addSuffix?n.comparison&&n.comparison>0?"over "+r:r+" geleden":r},bae={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd-MM-y"},wae={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},_ae={full:"{{date}} 'om' {{time}}",long:"{{date}} 'om' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Eae={date:jh({formats:bae,defaultWidth:"full"}),time:jh({formats:wae,defaultWidth:"full"}),dateTime:jh({formats:_ae,defaultWidth:"full"})},Aae={lastWeek:"'afgelopen' eeee 'om' p",yesterday:"'gisteren om' p",today:"'vandaag om' p",tomorrow:"'morgen om' p",nextWeek:"eeee 'om' p",other:"P"},Sae=(t,e,n,r)=>Aae[t],Tae={narrow:["v.C.","n.C."],abbreviated:["v.Chr.","n.Chr."],wide:["voor Christus","na Christus"]},Iae={narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["1e kwartaal","2e kwartaal","3e kwartaal","4e kwartaal"]},Cae={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["jan.","feb.","mrt.","apr.","mei","jun.","jul.","aug.","sep.","okt.","nov.","dec."],wide:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"]},Oae={narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],abbreviated:["zon","maa","din","woe","don","vri","zat"],wide:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},Nae={narrow:{am:"AM",pm:"PM",midnight:"middernacht",noon:"het middaguur",morning:"'s ochtends",afternoon:"'s middags",evening:"'s avonds",night:"'s nachts"},abbreviated:{am:"AM",pm:"PM",midnight:"middernacht",noon:"het middaguur",morning:"'s ochtends",afternoon:"'s middags",evening:"'s avonds",night:"'s nachts"},wide:{am:"AM",pm:"PM",midnight:"middernacht",noon:"het middaguur",morning:"'s ochtends",afternoon:"'s middags",evening:"'s avonds",night:"'s nachts"}},Rae=(t,e)=>Number(t)+"e",Pae={ordinalNumber:Rae,era:yl({values:Tae,defaultWidth:"wide"}),quarter:yl({values:Iae,defaultWidth:"wide",argumentCallback:t=>t-1}),month:yl({values:Cae,defaultWidth:"wide"}),day:yl({values:Oae,defaultWidth:"wide"}),dayPeriod:yl({values:Nae,defaultWidth:"wide"})},Dae=/^(\d+)e?/i,kae=/\d+/i,Mae={narrow:/^([vn]\.? ?C\.?)/,abbreviated:/^([vn]\. ?Chr\.?)/,wide:/^((voor|na) Christus)/},jae={any:[/^v/,/^n/]},Lae={narrow:/^[1234]/i,abbreviated:/^K[1234]/i,wide:/^[1234]e kwartaal/i},Bae={any:[/1/i,/2/i,/3/i,/4/i]},Fae={narrow:/^[jfmasond]/i,abbreviated:/^(jan.|feb.|mrt.|apr.|mei|jun.|jul.|aug.|sep.|okt.|nov.|dec.)/i,wide:/^(januari|februari|maart|april|mei|juni|juli|augustus|september|oktober|november|december)/i},Vae={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^jan/i,/^feb/i,/^m(r|a)/i,/^apr/i,/^mei/i,/^jun/i,/^jul/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i]},zae={narrow:/^[zmdwv]/i,short:/^(zo|ma|di|wo|do|vr|za)/i,abbreviated:/^(zon|maa|din|woe|don|vri|zat)/i,wide:/^(zondag|maandag|dinsdag|woensdag|donderdag|vrijdag|zaterdag)/i},Uae={narrow:[/^z/i,/^m/i,/^d/i,/^w/i,/^d/i,/^v/i,/^z/i],any:[/^zo/i,/^ma/i,/^di/i,/^wo/i,/^do/i,/^vr/i,/^za/i]},qae={any:/^(am|pm|middernacht|het middaguur|'s (ochtends|middags|avonds|nachts))/i},Gae={any:{am:/^am/i,pm:/^pm/i,midnight:/^middernacht/i,noon:/^het middaguur/i,morning:/ochtend/i,afternoon:/middag/i,evening:/avond/i,night:/nacht/i}},Hae={ordinalNumber:eB({matchPattern:Dae,parsePattern:kae,valueCallback:t=>parseInt(t,10)}),era:vl({matchPatterns:Mae,defaultMatchWidth:"wide",parsePatterns:jae,defaultParseWidth:"any"}),quarter:vl({matchPatterns:Lae,defaultMatchWidth:"wide",parsePatterns:Bae,defaultParseWidth:"any",valueCallback:t=>t+1}),month:vl({matchPatterns:Fae,defaultMatchWidth:"wide",parsePatterns:Vae,defaultParseWidth:"any"}),day:vl({matchPatterns:zae,defaultMatchWidth:"wide",parsePatterns:Uae,defaultParseWidth:"any"}),dayPeriod:vl({matchPatterns:qae,defaultMatchWidth:"any",parsePatterns:Gae,defaultParseWidth:"any"})},_h={code:"nl",formatDistance:xae,formatLong:Eae,formatRelative:Sae,localize:Pae,match:Hae,options:{weekStartsOn:1,firstWeekContainsDate:4}},Kae=["breakfast","lunch","dinner","snack"];function fp(){try{const t=localStorage.getItem("bb_templates");return t?JSON.parse(t):[]}catch{return[]}}function Wae(t){const e=fp();e.push(t),localStorage.setItem("bb_templates",JSON.stringify(e))}function $ae(t){const e=fp();e.splice(t,1),localStorage.setItem("bb_templates",JSON.stringify(e))}function Yae(){const t=cd(Oe=>Oe.profile),{entries:e,selectedDate:n,setDate:r,loadEntries:i,addEntry:a,updateEntry:l,removeEntry:f,getEntriesByMealType:m,getTotalPoints:p,getPointsByMealType:b}=$f(),[_,T]=D.useState(0),[R,j]=D.useState(0),M=t?.waterGoalMl||2e3,[L,z]=D.useState(!1),[$,K]=D.useState(fp),[J,ce]=D.useState(0),[Z,V]=D.useState(null),[W,U]=D.useState(0),[ae,ie]=D.useState(()=>{const Oe=new Date;if(Oe.getDay()!==1)return!1;const pt=`bb_weekreport_seen_${Oe.toISOString().split("T")[0]}`;return localStorage.getItem(pt)?!1:(localStorage.setItem(pt,"1"),!0)}),[Q,ne]=D.useState(null),[be,he]=D.useState(null),ye=D.useCallback(async()=>{const Oe=await Xte(n);j(Oe)},[n]);D.useEffect(()=>{i()},[i]),D.useEffect(()=>{t&&Yte(n,t.dailyPointsBudget).then(T)},[n,t,e]),D.useEffect(()=>{ye()},[ye]),D.useEffect(()=>{const Oe=()=>ye();return window.addEventListener("water-changed",Oe),()=>window.removeEventListener("water-changed",Oe)},[ye]),D.useEffect(()=>{t&&tne(t.dailyPointsBudget).then(ce)},[t,e]),D.useEffect(()=>{nne().then(he)},[t]),D.useEffect(()=>{t&&Jte(t.dailyPointsBudget,t.weeklyPointsBudget,t.waterGoalMl||2e3,W).then(V)},[t,e,W]);const we=async Oe=>{const ft=await Jx(n,Oe);j(ft),navigator.vibrate?.(10)},$e=async()=>{await Qte(n),j(0)},et=Oe=>{const ft=m(Oe);if(ft.length===0)return;const Fe=prompt("Naam voor deze template:");if(!Fe)return;const pt={name:Fe,mealType:Oe,items:ft.map(Lt=>({foodItem:Lt.foodItem,quantityG:Lt.quantityG,quantity:Lt.quantity,points:Lt.points}))};Wae(pt),K(fp()),navigator.vibrate?.(10)},rt=async Oe=>{for(const ft of Oe.items)await a({foodItem:ft.foodItem,mealType:Oe.mealType,quantityG:ft.quantityG,quantity:ft.quantity,points:ft.points});z(!1),navigator.vibrate?.(10)},de=Oe=>{$ae(Oe),K(fp())},Ee=()=>{ie(Oe=>!Oe)},Xe=Oe=>{localStorage.setItem(`bb_streak_milestone_${Oe}`,"1")},Ge=async()=>{const Oe=new Date(n);Oe.setDate(Oe.getDate()-1);const ft=Ns(Oe,"yyyy-MM-dd");await Zte(ft,n)>0&&(await i(),navigator.vibrate?.(10))};if(!t)return null;const vt=p(),qe=Math.max(0,t.weeklyPointsBudget-_),ze=n===Ns(new Date,"yyyy-MM-dd"),ct=Oe=>{const ft=new Date(n);ft.setDate(ft.getDate()+Oe),r(Ns(ft,"yyyy-MM-dd"))},Se=ze?"Vandaag":Ns(new Date(n),"d MMMM",{locale:_h});return O.jsxs(km,{title:"BodyBalance",children:[O.jsxs("div",{className:"flex flex-col gap-4 pb-4",children:[O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("button",{onClick:()=>ct(-1),className:"w-9 h-9 rounded-full bg-white flex items-center justify-center border-none cursor-pointer active:bg-gray-100 shadow-sm",children:O.jsx(U4,{size:20,className:"text-ios-text"})}),O.jsx("span",{className:"text-[17px] font-semibold",children:Se}),O.jsx("button",{onClick:()=>ct(1),disabled:ze,className:`w-9 h-9 rounded-full bg-white flex items-center justify-center border-none cursor-pointer shadow-sm ${ze?"opacity-30":"active:bg-gray-100"}`,children:O.jsx(vv,{size:20,className:"text-ios-text"})})]}),O.jsxs(An,{children:[O.jsxs("div",{className:"p-4 flex items-center justify-between",children:[O.jsx("button",{onClick:()=>U(Oe=>Oe+1),className:"w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer active:bg-gray-200",children:O.jsx(U4,{size:18,className:"text-ios-text"})}),O.jsxs("button",{onClick:Ee,className:"flex items-center gap-2 bg-transparent border-none cursor-pointer px-2",children:[O.jsx(YL,{size:18,className:"text-ios-blue"}),O.jsx("span",{className:"text-[15px] font-semibold",children:Z?Z.weekLabel:"Weekoverzicht"}),ae?O.jsx(jne,{size:16,className:"text-ios-secondary"}):O.jsx(GL,{size:16,className:"text-ios-secondary"})]}),O.jsx("button",{onClick:()=>U(Oe=>Math.max(0,Oe-1)),disabled:W===0,className:`w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer ${W===0?"opacity-30":"active:bg-gray-200"}`,children:O.jsx(vv,{size:18,className:"text-ios-text"})})]}),ae&&Z&&O.jsxs("div",{className:"px-4 pb-4 flex flex-col gap-2",children:[O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Punten"}),O.jsxs("span",{className:"text-[14px] font-medium",children:["gem. ",Z.avgPoints,"/",Z.dailyBudget," pt",Z.avgPoints<=Z.dailyBudget?O.jsx("span",{className:"text-primary ml-1",children:""}):O.jsx("span",{className:"text-ios-destructive ml-1",children:""})]})]}),O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Binnen budget"}),O.jsxs("span",{className:"text-[14px] font-medium",children:[Z.daysWithinBudget," van ",Z.totalDays," dagen",Z.daysWithinBudget>=Z.totalDays-1?O.jsx("span",{className:"text-primary ml-1",children:""}):null]})]}),Z.waterTotalDays>0&&O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Water"}),O.jsxs("span",{className:"text-[14px] font-medium",children:[Z.waterDaysOnTarget," van ",Z.waterTotalDays," dagen doel",Z.waterDaysOnTarget>=Z.waterTotalDays-1?O.jsx("span",{className:"text-blue-500 ml-1",children:""}):null]})]}),Z.weightChange!==null&&O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Gewicht"}),O.jsxs("span",{className:`text-[14px] font-medium flex items-center gap-1 ${Z.weightChange<0?"text-primary":Z.weightChange>0?"text-ios-warning":""}`,children:[Z.weightChange<0?O.jsx(bv,{size:14}):Z.weightChange>0?O.jsx(H4,{size:14}):O.jsx(CA,{size:14}),Z.weightChange>0?"+":"",Z.weightChange.toFixed(1)," kg"]})]}),O.jsxs("div",{className:"border-t border-ios-separator mt-1 pt-2 flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Beste dag"}),O.jsxs("span",{className:"text-[14px] font-medium",children:[Z.bestDay," (",Z.bestDayPoints," pt)"]})]}),O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Weekpunten"}),O.jsxs("span",{className:"text-[14px] font-medium",children:[Z.weeklyPointsUsed," van ",Z.weeklyPointsBudget," gebruikt"]})]})]}),ae&&!Z&&O.jsx("div",{className:"px-4 pb-4 text-center",children:O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Geen data voor deze week"})})]}),O.jsxs(An,{className:"py-6 flex flex-col items-center gap-2",children:[O.jsx(mae,{used:vt,budget:t.dailyPointsBudget}),O.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[J>0&&O.jsxs("div",{className:"flex items-center gap-1.5",children:[O.jsx(Zne,{size:16,className:"text-orange-500"}),O.jsxs("span",{className:"text-[14px] font-medium text-ios-secondary",children:[J," ",J===1?"dag":"dagen"," op rij"]})]}),be&&O.jsxs("div",{className:"flex items-center gap-1.5",children:[O.jsx(tb,{size:16,className:"text-ios-secondary"}),O.jsxs("span",{className:"text-[14px] font-medium text-ios-secondary",children:[be.currentKg.toFixed(1)," kg"]}),be.weekChangeKg!==null&&O.jsxs("span",{className:`text-[13px] font-medium flex items-center gap-0.5 ${be.weekChangeKg<0?"text-primary":be.weekChangeKg>0?"text-ios-warning":"text-ios-secondary"}`,children:[be.weekChangeKg<0?O.jsx(bv,{size:13}):be.weekChangeKg>0?O.jsx(H4,{size:13}):O.jsx(CA,{size:13}),be.weekChangeKg>0?"+":"",be.weekChangeKg.toFixed(1)]})]})]})]}),(()=>{const ft=[7,14,30,60,100].find(pt=>J===pt&&!localStorage.getItem(`bb_streak_milestone_${pt}`));if(!ft)return null;const Fe={7:"1 week op rij binnen budget!",14:"2 weken op rij binnen budget!",30:"1 maand op rij! Ongelooflijk!",60:"2 maanden op rij! Wat een discipline!",100:"100 dagen! Je bent een kampioen!"};return O.jsx(An,{className:"bg-primary/10 border border-primary/20",children:O.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("span",{className:"text-[16px]",children:""}),O.jsx("span",{className:"text-[14px] font-semibold text-primary",children:Fe[ft]})]}),O.jsx("button",{onClick:()=>Xe(ft),className:"w-6 h-6 rounded-full bg-transparent border-none cursor-pointer flex items-center justify-center",children:O.jsx(lm,{size:14,className:"text-primary"})})]})})})(),O.jsxs(An,{className:"px-4 py-3 flex items-center justify-between",children:[O.jsx("span",{className:"text-[15px] text-ios-secondary",children:"Weekpunten resterend"}),O.jsxs("span",{className:`text-[17px] font-bold ${qe===0?"text-ios-destructive":"text-ios-blue"}`,children:[qe,O.jsxs("span",{className:"text-[13px] font-normal text-ios-secondary ml-1",children:["/ ",t.weeklyPointsBudget]})]})]}),O.jsxs("div",{className:"flex gap-2",children:[e.length===0&&O.jsxs("button",{onClick:Ge,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-white rounded-xl border border-dashed border-ios-separator text-[13px] font-medium text-ios-secondary cursor-pointer active:bg-gray-50 transition-colors",children:[O.jsx(HL,{size:14}),"Kopieer gisteren"]}),$.length>0&&O.jsxs("button",{onClick:()=>z(!L),className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-white rounded-xl border border-dashed border-ios-separator text-[13px] font-medium text-ios-blue cursor-pointer active:bg-gray-50 transition-colors",children:[O.jsx(Ene,{size:14}),"Templates (",$.length,")"]})]}),L&&O.jsxs(An,{children:[O.jsx("div",{className:"px-4 py-2.5 border-b border-ios-separator",children:O.jsx("span",{className:"text-[13px] font-semibold text-ios-secondary uppercase tracking-wide",children:"Maaltijd templates"})}),$.map((Oe,ft)=>O.jsxs("div",{className:`flex items-center justify-between px-4 py-2.5 ${ft<$.length-1?"border-b border-ios-separator":""}`,children:[O.jsxs("button",{onClick:()=>rt(Oe),className:"flex-1 text-left bg-transparent border-none cursor-pointer p-0",children:[O.jsx("div",{className:"text-[15px] font-medium",children:Oe.name}),O.jsxs("div",{className:"text-[12px] text-ios-secondary",children:[Oe.items.length," items  ",Oe.items.reduce((Fe,pt)=>Fe+pt.points,0)," pt"]})]}),O.jsx("button",{onClick:()=>de(ft),className:"text-[12px] text-ios-destructive bg-transparent border-none cursor-pointer px-2 py-1",children:"Wis"})]},ft))]}),Kae.map(Oe=>O.jsx(pae,{mealType:Oe,entries:m(Oe),totalPoints:b(Oe),onRemoveEntry:f,onEditEntry:ne,onSaveTemplate:et},Oe)),O.jsx(An,{children:O.jsxs("div",{className:"p-4",children:[O.jsxs("div",{className:"flex items-center justify-between mb-3",children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(kh,{size:20,className:"text-blue-500"}),O.jsx("span",{className:"text-[17px] font-semibold",children:"Water"})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsxs("span",{className:"text-[15px] font-bold text-blue-500",children:[(R/1e3).toFixed(1)," / ",(M/1e3).toFixed(1)," L"]}),R>0&&O.jsx("button",{onClick:$e,className:"w-7 h-7 rounded-full bg-transparent border-none cursor-pointer flex items-center justify-center active:bg-gray-100",children:O.jsx(WL,{size:14,className:"text-ios-secondary"})})]})]}),O.jsx("div",{className:"w-full h-3 bg-blue-100 rounded-full overflow-hidden mb-3",children:O.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-300",style:{width:`${Math.min(100,R/M*100)}%`}})}),O.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[O.jsxs("button",{onClick:()=>we(150),className:"flex flex-col items-center gap-1 py-2.5 bg-blue-50 rounded-xl border-none cursor-pointer active:bg-blue-100 transition-colors",children:[O.jsx(ere,{size:18,className:"text-blue-500"}),O.jsx("span",{className:"text-[13px] font-medium text-blue-700",children:"+150ml"}),O.jsx("span",{className:"text-[11px] text-blue-400",children:"glas"})]}),O.jsxs("button",{onClick:()=>we(250),className:"flex flex-col items-center gap-1 py-2.5 bg-blue-50 rounded-xl border-none cursor-pointer active:bg-blue-100 transition-colors",children:[O.jsx(Une,{size:18,className:"text-blue-500"}),O.jsx("span",{className:"text-[13px] font-medium text-blue-700",children:"+250ml"}),O.jsx("span",{className:"text-[11px] text-blue-400",children:"beker"})]}),O.jsxs("button",{onClick:()=>we(500),className:"flex flex-col items-center gap-1 py-2.5 bg-blue-50 rounded-xl border-none cursor-pointer active:bg-blue-100 transition-colors",children:[O.jsx(kh,{size:18,className:"text-blue-500"}),O.jsx("span",{className:"text-[13px] font-medium text-blue-700",children:"+500ml"}),O.jsx("span",{className:"text-[11px] text-blue-400",children:"fles"})]})]}),R>=M&&O.jsx("p",{className:"text-[13px] text-center text-green-600 font-medium mt-2",children:"Waterdoel bereikt!"})]})})]}),Q&&O.jsx(yae,{entry:Q,onSave:(Oe,ft)=>{l(Oe,ft),ne(null),navigator.vibrate?.(10)},onClose:()=>ne(null)})]})}function gI({food:t,onSelect:e,onToggleFavorite:n,showFavorite:r=!0}){const i=v0(t.pointsPer100g,t.servingSizeG||100),a=t.unit==="ml"?"ml":"g";return O.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[O.jsxs("button",{onClick:()=>e(t),className:"flex-1 flex items-center gap-3 bg-transparent border-none cursor-pointer active:bg-gray-50 transition-colors text-left min-w-0",children:[t.imageUrl?O.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-11 h-11 rounded-lg object-cover bg-ios-bg flex-shrink-0"}):O.jsx("div",{className:"w-11 h-11 rounded-lg bg-primary-light flex items-center justify-center flex-shrink-0",children:O.jsx("span",{className:"text-primary-dark text-[18px] font-bold",children:t.name.charAt(0).toUpperCase()})}),O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("div",{className:"text-[15px] font-medium text-ios-text truncate",children:t.name}),t.brand&&O.jsx("div",{className:"text-[13px] text-ios-secondary truncate",children:t.brand})]}),O.jsxs("div",{className:"flex-shrink-0 text-right",children:[O.jsx("div",{className:`text-[17px] font-bold ${t.isZeroPoint?"text-primary":"text-ios-text"}`,children:i}),O.jsxs("div",{className:"text-[11px] text-ios-secondary",children:["pt/",t.servingSizeG,a]})]})]}),r&&n&&O.jsx("button",{onClick:l=>{l.stopPropagation(),n(t)},className:"flex-shrink-0 p-2 border-none bg-transparent cursor-pointer active:scale-125 transition-transform",children:O.jsx(eb,{size:20,className:t.isFavorite?"text-red-500 fill-red-500":"text-ios-separator"})})]})}function Xae(t){try{const e=localStorage.getItem("bb_portions");return e?JSON.parse(e)[t.toLowerCase()]??null:null}catch{return null}}function Qae(t,e){try{const n=localStorage.getItem("bb_portions"),r=n?JSON.parse(n):{};r[t.toLowerCase()]=e,localStorage.setItem("bb_portions",JSON.stringify(r))}catch{}}function iB({food:t,defaultMealType:e,onAdd:n,onClose:r}){const i=Xae(t.name),[a,l]=D.useState(String(i??(t.servingSizeG||100))),[f,m]=D.useState("1"),[p,b]=D.useState(e),_=Number(a)||0,T=Math.round(Number(f))||0,R=t.unit==="ml"?"ml":"gram",j=t.unit==="ml"?"ml":"g",L=v0(t.pointsPer100g,_)*T;return O.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center animate-fade-in",children:[O.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:r}),O.jsxs("div",{className:"relative bg-white rounded-t-3xl w-full max-w-lg animate-slide-up",style:{paddingBottom:"calc(20px + var(--safe-area-bottom))"},children:[O.jsx("div",{className:"flex justify-center pt-3 pb-2",children:O.jsx("div",{className:"w-9 h-1 rounded-full bg-ios-separator"})}),O.jsx("button",{onClick:r,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer",children:O.jsx(lm,{size:18,className:"text-ios-secondary"})}),O.jsxs("div",{className:"px-5 pb-4",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[t.imageUrl?O.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-14 h-14 rounded-xl object-cover"}):O.jsx("div",{className:"w-14 h-14 rounded-xl bg-primary-light flex items-center justify-center",children:O.jsx("span",{className:"text-primary-dark text-2xl font-bold",children:t.name.charAt(0).toUpperCase()})}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-[17px] font-semibold",children:t.name}),t.brand&&O.jsx("p",{className:"text-[13px] text-ios-secondary",children:t.brand})]})]}),O.jsxs("div",{className:"bg-ios-bg rounded-2xl p-4 mb-5 text-center",children:[O.jsx("div",{className:"text-[48px] font-bold text-primary leading-none",children:L}),O.jsx("div",{className:"text-[13px] text-ios-secondary mt-1",children:"punten"})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1.5 px-1",children:"Hoeveelheid"}),O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>l(String(Math.max(10,_-10))),children:"-"}),O.jsxs("div",{className:"relative flex-1",children:[O.jsx("input",{type:"number",value:a,onChange:z=>l(z.target.value),className:"text-center bg-white rounded-xl text-[20px] font-medium",min:1}),O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:R})]}),O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>l(String(_+10)),children:"+"})]})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1.5 px-1",children:"Aantal"}),O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>m(String(Math.max(1,T-1))),children:"-"}),O.jsxs("div",{className:"relative flex-1",children:[O.jsx("input",{type:"number",value:f,onChange:z=>m(z.target.value),className:"text-center bg-white rounded-xl text-[20px] font-medium",min:1}),O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:"stuks"})]}),O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>m(String(T+1)),children:"+"})]})]}),O.jsx("div",{className:"flex gap-2 mb-5",children:[50,100,150,200].map(z=>O.jsxs("button",{onClick:()=>l(String(z)),className:`flex-1 py-2 rounded-xl text-[14px] font-medium border-none cursor-pointer transition-colors ${_===z?"bg-primary text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:[z,j]},z))}),O.jsxs("div",{className:"mb-5",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1.5 px-1",children:"Maaltijd"}),O.jsx("div",{className:"flex gap-2",children:Object.entries(rB).map(([z,$])=>O.jsx("button",{onClick:()=>b(z),className:`flex-1 py-2.5 rounded-xl text-[13px] font-medium border-none cursor-pointer transition-colors ${p===z?"bg-primary text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:$},z))})]}),O.jsxs("div",{className:"flex justify-around mb-5 py-3 bg-ios-bg rounded-xl",children:[O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"text-[15px] font-semibold",children:Math.round(t.nutrition.calories*_*T/100)}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"kcal"})]}),O.jsxs("div",{className:"text-center",children:[O.jsxs("div",{className:"text-[15px] font-semibold",children:[(t.nutrition.protein*_*T/100).toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"eiwit"})]}),O.jsxs("div",{className:"text-center",children:[O.jsxs("div",{className:"text-[15px] font-semibold",children:[(t.nutrition.carbs*_*T/100).toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"koolh."})]}),O.jsxs("div",{className:"text-center",children:[O.jsxs("div",{className:"text-[15px] font-semibold",children:[(t.nutrition.fat*_*T/100).toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"vet"})]})]}),O.jsxs(to,{fullWidth:!0,size:"lg",onClick:()=>{Qae(t.name,_),n(_,p,T>1?T:void 0)},children:["Toevoegen  ",L," pt",T>1?` (${T})`:""]})]})]})]})}function Zae({onCreated:t,onClose:e}){const[n,r]=D.useState(""),[i,a]=D.useState(""),[l,f]=D.useState(""),[m,p]=D.useState("100"),[b,_]=D.useState("g"),[T,R]=D.useState({calories:"",protein:"",fat:"",saturatedFat:"",carbs:"",sugar:"",fiber:""}),j={calories:Number(T.calories)||0,protein:Number(T.protein)||0,fat:Number(T.fat)||0,saturatedFat:Number(T.saturatedFat)||0,unsaturatedFat:Math.max(0,(Number(T.fat)||0)-(Number(T.saturatedFat)||0)),carbs:Number(T.carbs)||0,sugar:Number(T.sugar)||0,addedSugar:0,fiber:Number(T.fiber)||0},M=y0(j),L=n.trim().length>=2&&Number(T.calories)>0,z=async()=>{if(!L)return;const K=await dI({name:n.trim(),brand:i.trim()||void 0,barcode:l.trim()||void 0,nutrition:j,pointsPer100g:M,servingSizeG:Number(m)||100,unit:b,isZeroPoint:M===0,isFavorite:!0,source:"user"});t(K)},$=(K,J)=>{const ce=J.replace(",",".").replace(/[^0-9.]/g,"");R(Z=>({...Z,[K]:ce}))};return O.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center animate-fade-in",children:[O.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:e}),O.jsxs("div",{className:"relative bg-white rounded-t-3xl w-full max-w-lg animate-slide-up overflow-y-auto",style:{paddingBottom:"calc(20px + var(--safe-area-bottom))",maxHeight:"92vh"},children:[O.jsx("div",{className:"flex justify-center pt-3 pb-2",children:O.jsx("div",{className:"w-9 h-1 rounded-full bg-ios-separator"})}),O.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer",children:O.jsx(lm,{size:18,className:"text-ios-secondary"})}),O.jsxs("div",{className:"px-5 pb-4",children:[O.jsx("h2",{className:"text-[20px] font-bold mb-4",children:"Eigen product"}),O.jsxs("div",{className:"flex flex-col gap-3 mb-5",children:[O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Naam *"}),O.jsx("input",{type:"text",placeholder:"bijv. Lavazza Cappuccino",value:n,onChange:K=>r(K.target.value),className:"bg-white rounded-xl px-4 py-3 text-[16px] w-full border border-ios-separator"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Merk (optioneel)"}),O.jsx("input",{type:"text",placeholder:"bijv. Lavazza",value:i,onChange:K=>a(K.target.value),className:"bg-white rounded-xl px-4 py-3 text-[16px] w-full border border-ios-separator"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Barcode (optioneel)"}),O.jsxs("div",{className:"relative",children:[O.jsx("input",{type:"text",inputMode:"numeric",placeholder:"Scan of typ de barcode",value:l,onChange:K=>f(K.target.value.replace(/[^0-9]/g,"")),className:"bg-white rounded-xl pl-4 pr-10 py-3 text-[16px] w-full border border-ios-separator"}),O.jsx(xv,{size:18,className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-ios-secondary"})]}),O.jsx("p",{className:"text-[11px] text-ios-secondary mt-0.5 px-1",children:"Vul de barcode in zodat je dit product later kunt scannen"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Eenheid"}),O.jsx("div",{className:"flex gap-2",children:["g","ml"].map(K=>O.jsx("button",{onClick:()=>_(K),className:`flex-1 py-2.5 rounded-xl text-[14px] font-medium border-none cursor-pointer transition-colors ${b===K?"bg-primary text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:K==="g"?"Gram (g)":"Milliliter (ml)"},K))})]}),O.jsxs("div",{children:[O.jsxs("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:["Standaard portie (",b,")"]}),O.jsx("input",{type:"number",value:m,onChange:K=>p(K.target.value),className:"bg-white rounded-xl px-4 py-3 text-[16px] w-full border border-ios-separator",min:1})]})]}),O.jsxs("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-2 px-1",children:["Voedingswaarden per 100",b," *"]}),O.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[O.jsx(Tf,{label:"Calorien (kcal)",value:T.calories,onChange:K=>$("calories",K)}),O.jsx(Tf,{label:"Eiwit (g)",value:T.protein,onChange:K=>$("protein",K)}),O.jsx(Tf,{label:"Koolhydraten (g)",value:T.carbs,onChange:K=>$("carbs",K)}),O.jsx(Tf,{label:"Suikers (g)",value:T.sugar,onChange:K=>$("sugar",K)}),O.jsx(Tf,{label:"Vet (g)",value:T.fat,onChange:K=>$("fat",K)}),O.jsx(Tf,{label:"Verz. vet (g)",value:T.saturatedFat,onChange:K=>$("saturatedFat",K)}),O.jsx(Tf,{label:"Vezels (g)",value:T.fiber,onChange:K=>$("fiber",K)})]}),O.jsxs("div",{className:"bg-ios-bg rounded-2xl p-4 mb-5 text-center",children:[O.jsx("div",{className:"text-[36px] font-bold text-primary leading-none",children:M}),O.jsxs("div",{className:"text-[13px] text-ios-secondary mt-1",children:["punten per 100",b]})]}),O.jsx("p",{className:"text-[13px] text-ios-secondary mb-4 px-1",children:'Tip: de voedingswaarden vind je op de verpakking of zoek online op "product voedingswaarde per 100g".'}),O.jsxs(to,{fullWidth:!0,size:"lg",onClick:z,disabled:!L,children:["Opslaan  ",M," pt/100",b]})]})]})]})}function Tf({label:t,value:e,onChange:n}){return O.jsxs("div",{children:[O.jsx("label",{className:"text-[12px] text-ios-secondary block mb-0.5 px-1",children:t}),O.jsx("input",{type:"text",inputMode:"decimal",placeholder:"0",value:e,onChange:r=>n(r.target.value),className:"bg-white rounded-xl px-3 py-2.5 text-[16px] w-full border border-ios-separator"})]})}const Jae=[{name:"Boterham wit",nutrition:{calories:264,protein:8.6,fat:3.2,saturatedFat:.7,unsaturatedFat:2.5,carbs:49,sugar:3.2,addedSugar:1,fiber:2.8},servingSizeG:35},{name:"Boterham bruin",nutrition:{calories:254,protein:9.4,fat:3.5,saturatedFat:.7,unsaturatedFat:2.8,carbs:44,sugar:3,addedSugar:1,fiber:5.4},servingSizeG:35},{name:"Boterham volkoren",nutrition:{calories:244,protein:10.2,fat:3.8,saturatedFat:.7,unsaturatedFat:3.1,carbs:40,sugar:2.8,addedSugar:.5,fiber:7.2},servingSizeG:35},{name:"Cruesli naturel",brand:"Quaker",nutrition:{calories:445,protein:10,fat:15,saturatedFat:5.8,unsaturatedFat:9.2,carbs:62,sugar:18,addedSugar:16,fiber:6.5},servingSizeG:45},{name:"Cruesli chocolade",brand:"Quaker",nutrition:{calories:452,protein:9,fat:16,saturatedFat:6.5,unsaturatedFat:9.5,carbs:63,sugar:22,addedSugar:20,fiber:5.5},servingSizeG:45},{name:"Cruesli rood fruit",brand:"Quaker",nutrition:{calories:420,protein:8.5,fat:12,saturatedFat:4.5,unsaturatedFat:7.5,carbs:65,sugar:24,addedSugar:18,fiber:5},servingSizeG:45},{name:"Havermout",nutrition:{calories:370,protein:13,fat:7,saturatedFat:1.2,unsaturatedFat:5.8,carbs:58,sugar:1.3,addedSugar:0,fiber:10},servingSizeG:40},{name:"Beschuit",nutrition:{calories:396,protein:9.8,fat:3.5,saturatedFat:.8,unsaturatedFat:2.7,carbs:78,sugar:8,addedSugar:6,fiber:3.5},servingSizeG:10},{name:"Ontbijtkoek",nutrition:{calories:318,protein:3.5,fat:2,saturatedFat:.5,unsaturatedFat:1.5,carbs:69,sugar:38,addedSugar:35,fiber:1.8},servingSizeG:30},{name:"Crackers volkoren",nutrition:{calories:398,protein:10,fat:9,saturatedFat:1.5,unsaturatedFat:7.5,carbs:64,sugar:3,addedSugar:2,fiber:8},servingSizeG:15},{name:"Hagelslag melk",nutrition:{calories:530,protein:5,fat:27,saturatedFat:16,unsaturatedFat:11,carbs:64,sugar:58,addedSugar:55,fiber:2.5},servingSizeG:10},{name:"Hagelslag puur",nutrition:{calories:505,protein:6,fat:25,saturatedFat:15,unsaturatedFat:10,carbs:60,sugar:52,addedSugar:50,fiber:5},servingSizeG:10},{name:"Pindakaas",nutrition:{calories:615,protein:25,fat:50,saturatedFat:8,unsaturatedFat:42,carbs:12,sugar:6,addedSugar:3,fiber:6},servingSizeG:15},{name:"Jam (aardbei)",nutrition:{calories:250,protein:.5,fat:.1,saturatedFat:0,unsaturatedFat:.1,carbs:61,sugar:47,addedSugar:40,fiber:.8},servingSizeG:15},{name:"Appelstroop",nutrition:{calories:285,protein:.8,fat:.3,saturatedFat:0,unsaturatedFat:.3,carbs:68,sugar:58,addedSugar:0,fiber:1},servingSizeG:15},{name:"Vlokken melk",nutrition:{calories:530,protein:5.5,fat:27,saturatedFat:16,unsaturatedFat:11,carbs:64,sugar:57,addedSugar:55,fiber:2},servingSizeG:10},{name:"Roomboter",nutrition:{calories:740,protein:.6,fat:82,saturatedFat:52,unsaturatedFat:30,carbs:.6,sugar:.6,addedSugar:0,fiber:0},servingSizeG:7},{name:"Margarine",nutrition:{calories:360,protein:.1,fat:40,saturatedFat:10,unsaturatedFat:30,carbs:.3,sugar:.3,addedSugar:0,fiber:0},servingSizeG:7},{name:"Goudse kaas jong",nutrition:{calories:356,protein:25,fat:28,saturatedFat:18,unsaturatedFat:10,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:20},{name:"Goudse kaas oud",nutrition:{calories:403,protein:30,fat:31,saturatedFat:20,unsaturatedFat:11,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:20},{name:"Goudse kaas belegen",nutrition:{calories:375,protein:27,fat:29,saturatedFat:19,unsaturatedFat:10,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:20},{name:"Smeerkaas",nutrition:{calories:230,protein:11,fat:20,saturatedFat:12,unsaturatedFat:8,carbs:2,sugar:2,addedSugar:0,fiber:0},servingSizeG:20},{name:"Melk halfvol",nutrition:{calories:47,protein:3.4,fat:1.5,saturatedFat:1,unsaturatedFat:.5,carbs:4.7,sugar:4.7,addedSugar:0,fiber:0},servingSizeG:200},{name:"Melk vol",nutrition:{calories:65,protein:3.3,fat:3.5,saturatedFat:2.2,unsaturatedFat:1.3,carbs:4.7,sugar:4.7,addedSugar:0,fiber:0},servingSizeG:200},{name:"Melk mager",nutrition:{calories:35,protein:3.5,fat:.1,saturatedFat:.1,unsaturatedFat:0,carbs:4.9,sugar:4.9,addedSugar:0,fiber:0},servingSizeG:200},{name:"Karnemelk",nutrition:{calories:36,protein:3.3,fat:.5,saturatedFat:.3,unsaturatedFat:.2,carbs:4.1,sugar:4.1,addedSugar:0,fiber:0},servingSizeG:200},{name:"Yoghurt vol",nutrition:{calories:72,protein:4,fat:3.5,saturatedFat:2.2,unsaturatedFat:1.3,carbs:5.5,sugar:5.5,addedSugar:0,fiber:0},servingSizeG:150},{name:"Yoghurt mager",nutrition:{calories:40,protein:4.3,fat:.1,saturatedFat:.1,unsaturatedFat:0,carbs:5.5,sugar:5.5,addedSugar:0,fiber:0},servingSizeG:150},{name:"Vla vanille",nutrition:{calories:100,protein:3,fat:2.5,saturatedFat:1.6,unsaturatedFat:.9,carbs:16,sugar:13,addedSugar:10,fiber:0},servingSizeG:150},{name:"Vla chocolade",nutrition:{calories:108,protein:3.2,fat:2.5,saturatedFat:1.6,unsaturatedFat:.9,carbs:18,sugar:15,addedSugar:12,fiber:.5},servingSizeG:150},{name:"Kwark mager",nutrition:{calories:51,protein:9,fat:.2,saturatedFat:.1,unsaturatedFat:.1,carbs:3.5,sugar:3.5,addedSugar:0,fiber:0},servingSizeG:150},{name:"Kwark vol",nutrition:{calories:104,protein:7,fat:5.5,saturatedFat:3.5,unsaturatedFat:2,carbs:6,sugar:6,addedSugar:0,fiber:0},servingSizeG:150},{name:"Cottage cheese",nutrition:{calories:92,protein:12,fat:3.5,saturatedFat:2.2,unsaturatedFat:1.3,carbs:2,sugar:2,addedSugar:0,fiber:0},servingSizeG:100},{name:"Skyr naturel",nutrition:{calories:63,protein:11,fat:.2,saturatedFat:.1,unsaturatedFat:.1,carbs:4,sugar:4,addedSugar:0,fiber:0},servingSizeG:150},{name:"Koffie zwart",nutrition:{calories:2,protein:.3,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:150},{name:"Koffie met melk",nutrition:{calories:12,protein:.8,fat:.4,saturatedFat:.2,unsaturatedFat:.2,carbs:1.2,sugar:1.2,addedSugar:0,fiber:0},servingSizeG:170},{name:"Koffie met melk en suiker",nutrition:{calories:28,protein:.8,fat:.4,saturatedFat:.2,unsaturatedFat:.2,carbs:5.2,sugar:5.2,addedSugar:4,fiber:0},servingSizeG:175},{name:"Cappuccino",nutrition:{calories:40,protein:2,fat:1.5,saturatedFat:1,unsaturatedFat:.5,carbs:4,sugar:4,addedSugar:0,fiber:0},servingSizeG:200},{name:"Latte macchiato",nutrition:{calories:55,protein:3,fat:2.5,saturatedFat:1.5,unsaturatedFat:1,carbs:5,sugar:5,addedSugar:0,fiber:0},servingSizeG:250},{name:"Thee zonder suiker",nutrition:{calories:1,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:.3,sugar:0,addedSugar:0,fiber:0},servingSizeG:200},{name:"Thee met suiker",nutrition:{calories:20,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:5,sugar:5,addedSugar:5,fiber:0},servingSizeG:205},{name:"Jus d'orange (vers)",nutrition:{calories:43,protein:.7,fat:.2,saturatedFat:0,unsaturatedFat:.2,carbs:9.5,sugar:8.5,addedSugar:0,fiber:.2},servingSizeG:200},{name:"Appelsap",nutrition:{calories:46,protein:.1,fat:.1,saturatedFat:0,unsaturatedFat:.1,carbs:11,sugar:10,addedSugar:0,fiber:.1},servingSizeG:200},{name:"Cola",nutrition:{calories:42,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:10.6,sugar:10.6,addedSugar:10.6,fiber:0},servingSizeG:330},{name:"Cola zero",nutrition:{calories:.4,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:330},{name:"Bier (pils)",nutrition:{calories:43,protein:.3,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:3.2,sugar:0,addedSugar:0,fiber:0},servingSizeG:250},{name:"Wijn rood",nutrition:{calories:83,protein:.1,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:2.6,sugar:.6,addedSugar:0,fiber:0},servingSizeG:150},{name:"Wijn wit",nutrition:{calories:82,protein:.1,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:2.6,sugar:.8,addedSugar:0,fiber:0},servingSizeG:150},{name:"Kipfilet",nutrition:{calories:110,protein:24,fat:1.3,saturatedFat:.4,unsaturatedFat:.9,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:150},{name:"Gehakt half om half",nutrition:{calories:215,protein:18,fat:15,saturatedFat:6.5,unsaturatedFat:8.5,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:100},{name:"Gehakt rund mager",nutrition:{calories:156,protein:21,fat:8,saturatedFat:3.5,unsaturatedFat:4.5,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:100},{name:"Rookworst",nutrition:{calories:275,protein:12,fat:24,saturatedFat:9,unsaturatedFat:15,carbs:2,sugar:1,addedSugar:0,fiber:0},servingSizeG:100},{name:"Frikandel",nutrition:{calories:235,protein:10,fat:18,saturatedFat:7,unsaturatedFat:11,carbs:8,sugar:1,addedSugar:0,fiber:.5},servingSizeG:80},{name:"Kroket",nutrition:{calories:210,protein:6,fat:13,saturatedFat:5,unsaturatedFat:8,carbs:17,sugar:1,addedSugar:0,fiber:.5},servingSizeG:65},{name:"Kaassouffl",nutrition:{calories:280,protein:8,fat:19,saturatedFat:8,unsaturatedFat:11,carbs:19,sugar:1,addedSugar:0,fiber:.5},servingSizeG:100},{name:"Zalm (gebakken)",nutrition:{calories:206,protein:20,fat:13,saturatedFat:2.5,unsaturatedFat:10.5,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:125},{name:"Kibbelng",nutrition:{calories:225,protein:14,fat:12,saturatedFat:2,unsaturatedFat:10,carbs:15,sugar:1,addedSugar:0,fiber:.5},servingSizeG:150},{name:"Tonijn in water (blik)",nutrition:{calories:108,protein:24,fat:1,saturatedFat:.3,unsaturatedFat:.7,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:120},{name:"Aardappelen gekookt",nutrition:{calories:80,protein:2,fat:.1,saturatedFat:0,unsaturatedFat:.1,carbs:17,sugar:.8,addedSugar:0,fiber:2},servingSizeG:200},{name:"Patat / Friet",nutrition:{calories:290,protein:3.5,fat:15,saturatedFat:3,unsaturatedFat:12,carbs:35,sugar:.5,addedSugar:0,fiber:3},servingSizeG:200},{name:"Stamppot boerenkool",nutrition:{calories:95,protein:4,fat:3.5,saturatedFat:1.5,unsaturatedFat:2,carbs:11,sugar:2,addedSugar:0,fiber:3},servingSizeG:250},{name:"Stamppot andijvie",nutrition:{calories:85,protein:3.5,fat:3,saturatedFat:1.5,unsaturatedFat:1.5,carbs:10,sugar:1.5,addedSugar:0,fiber:2.5},servingSizeG:250},{name:"Erwtensoep",nutrition:{calories:80,protein:5,fat:2.5,saturatedFat:1,unsaturatedFat:1.5,carbs:9,sugar:1.5,addedSugar:0,fiber:3},servingSizeG:300},{name:"Tosti ham kaas",nutrition:{calories:260,protein:13,fat:12,saturatedFat:6,unsaturatedFat:6,carbs:25,sugar:2,addedSugar:0,fiber:1.5},servingSizeG:120},{name:"Broodje gezond",nutrition:{calories:180,protein:10,fat:6,saturatedFat:2,unsaturatedFat:4,carbs:22,sugar:3,addedSugar:0,fiber:3},servingSizeG:150},{name:"Uitsmijter (2 eieren)",nutrition:{calories:195,protein:14,fat:12,saturatedFat:4,unsaturatedFat:8,carbs:8,sugar:1,addedSugar:0,fiber:1},servingSizeG:200},{name:"Stroopwafel",nutrition:{calories:450,protein:4,fat:19,saturatedFat:9,unsaturatedFat:10,carbs:65,sugar:35,addedSugar:33,fiber:1},servingSizeG:30},{name:"Gevulde koek",nutrition:{calories:430,protein:7,fat:22,saturatedFat:8,unsaturatedFat:14,carbs:50,sugar:28,addedSugar:25,fiber:3},servingSizeG:55},{name:"Appeltaart",nutrition:{calories:260,protein:3,fat:12,saturatedFat:6,unsaturatedFat:6,carbs:35,sugar:20,addedSugar:15,fiber:1.5},servingSizeG:120},{name:"Tompouce",nutrition:{calories:310,protein:3,fat:15,saturatedFat:9,unsaturatedFat:6,carbs:40,sugar:28,addedSugar:25,fiber:.5},servingSizeG:100},{name:"Bitterbal",nutrition:{calories:260,protein:8,fat:16,saturatedFat:6,unsaturatedFat:10,carbs:20,sugar:1,addedSugar:0,fiber:.5},servingSizeG:30},{name:"Chips naturel",nutrition:{calories:536,protein:6,fat:34,saturatedFat:3,unsaturatedFat:31,carbs:50,sugar:1,addedSugar:0,fiber:4},servingSizeG:30},{name:"Nootjes gezouten",nutrition:{calories:607,protein:20,fat:52,saturatedFat:7,unsaturatedFat:45,carbs:14,sugar:5,addedSugar:0,fiber:7},servingSizeG:30},{name:"Ei gekookt",nutrition:{calories:155,protein:13,fat:11,saturatedFat:3.3,unsaturatedFat:7.7,carbs:1.1,sugar:1.1,addedSugar:0,fiber:0},servingSizeG:60},{name:"Spiegelei",nutrition:{calories:196,protein:14,fat:15,saturatedFat:4,unsaturatedFat:11,carbs:.8,sugar:.8,addedSugar:0,fiber:0},servingSizeG:60},{name:"Roerei",nutrition:{calories:160,protein:11,fat:12,saturatedFat:4,unsaturatedFat:8,carbs:1.5,sugar:1.5,addedSugar:0,fiber:0},servingSizeG:100},{name:"Appel",nutrition:{calories:52,protein:.3,fat:.2,saturatedFat:0,unsaturatedFat:.2,carbs:12,sugar:10,addedSugar:0,fiber:2.4},servingSizeG:150},{name:"Banaan",nutrition:{calories:89,protein:1.1,fat:.3,saturatedFat:.1,unsaturatedFat:.2,carbs:20,sugar:12,addedSugar:0,fiber:2.6},servingSizeG:120},{name:"Sinaasappel",nutrition:{calories:47,protein:.9,fat:.1,saturatedFat:0,unsaturatedFat:.1,carbs:10,sugar:9.4,addedSugar:0,fiber:2.4},servingSizeG:150},{name:"Mandarijn",nutrition:{calories:53,protein:.8,fat:.3,saturatedFat:0,unsaturatedFat:.3,carbs:12,sugar:11,addedSugar:0,fiber:1.8},servingSizeG:75},{name:"Druiven",nutrition:{calories:69,protein:.7,fat:.2,saturatedFat:0,unsaturatedFat:.2,carbs:16,sugar:16,addedSugar:0,fiber:.9},servingSizeG:100},{name:"Witte rijst (gekookt)",nutrition:{calories:130,protein:2.7,fat:.3,saturatedFat:.1,unsaturatedFat:.2,carbs:28,sugar:0,addedSugar:0,fiber:.4},servingSizeG:200},{name:"Zilvervliesrijst (gekookt)",nutrition:{calories:123,protein:2.7,fat:1,saturatedFat:.2,unsaturatedFat:.8,carbs:25,sugar:.4,addedSugar:0,fiber:1.8},servingSizeG:200},{name:"Pasta (gekookt)",nutrition:{calories:157,protein:5.8,fat:.9,saturatedFat:.2,unsaturatedFat:.7,carbs:31,sugar:.6,addedSugar:0,fiber:1.8},servingSizeG:200},{name:"Nasi goreng",nutrition:{calories:145,protein:4,fat:5,saturatedFat:1.5,unsaturatedFat:3.5,carbs:21,sugar:2,addedSugar:0,fiber:1},servingSizeG:300},{name:"Bami goreng",nutrition:{calories:140,protein:4,fat:4.5,saturatedFat:1.5,unsaturatedFat:3,carbs:21,sugar:2,addedSugar:0,fiber:1},servingSizeG:300},{name:"Mayonaise",nutrition:{calories:680,protein:1,fat:75,saturatedFat:6,unsaturatedFat:69,carbs:1,sugar:1,addedSugar:0,fiber:0},servingSizeG:15},{name:"Ketchup",nutrition:{calories:112,protein:1.2,fat:.1,saturatedFat:0,unsaturatedFat:.1,carbs:26,sugar:22,addedSugar:18,fiber:.3},servingSizeG:15},{name:"Mosterd",nutrition:{calories:66,protein:4,fat:3.5,saturatedFat:.2,unsaturatedFat:3.3,carbs:4,sugar:2.5,addedSugar:0,fiber:3},servingSizeG:10},{name:"Satsaus",nutrition:{calories:155,protein:6,fat:10,saturatedFat:2,unsaturatedFat:8,carbs:10,sugar:6,addedSugar:3,fiber:1},servingSizeG:30},{name:"Fritessaus",nutrition:{calories:340,protein:.5,fat:33,saturatedFat:3,unsaturatedFat:30,carbs:11,sugar:8,addedSugar:6,fiber:0},servingSizeG:20}],aB=[{name:"Fruit",icon:"",items:["Appel","Banaan","Sinaasappel","Mandarijn","Druiven","Aardbei","Blauwe bes","Framboos","Watermeloen","Mango","Ananas","Kiwi","Peer","Perzik","Pruim","Grapefruit"]},{name:"Groenten",icon:"",items:["Broccoli","Sperziebonen","Spinazie","Tomaat","Komkommer","Wortel","Paprika","Courgette","Bloemkool","Sla","Champignon","Ui","Aubergine","Boerenkool","Andijvie","Spruitjes","Asperge","Selderij","Radijs","Prei"]},{name:"Eiwit",icon:"",items:["Kipfilet","Kalkoenfilet","Ei","Gekookt ei","Tonijn (in water)","Garnalen","Kabeljauw","Zalm","Tilapia","Pangasius"]},{name:"Zuivel",icon:"",items:["Magere yoghurt","Magere kwark","Skyr","Cottage cheese"]},{name:"Peulvruchten",icon:"",items:["Kidneybonen","Kikkererwten","Linzen","Zwarte bonen","Witte bonen","Tuinbonen"]}],ese=aB.flatMap(t=>t.items);function sB(t){const e=t.toLowerCase();return ese.some(n=>{const r=n.toLowerCase().replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`\\b${r}\\b`).test(e)})}const oB="https://nl.openfoodfacts.org";function tse(t){if(!t)return{calories:0,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0};const e=t.fat_100g??0,n=t["saturated-fat_100g"]??0;return{calories:t["energy-kcal_100g"]??0,protein:t.proteins_100g??0,fat:e,saturatedFat:n,unsaturatedFat:Math.max(0,e-n),carbs:t.carbohydrates_100g??0,sugar:t.sugars_100g??0,addedSugar:t.sugars_100g??0,fiber:t.fiber_100g??0}}function nse(t){const e=[t.serving_size,t.quantity].filter(Boolean).join(" ").toLowerCase();return/\bml\b|\bliter\b|\bcl\b|\bdl\b/.test(e)?"ml":"g"}function RA(t){const e=t.product_name_nl||t.product_name;if(!e)return null;const n=tse(t.nutriments);if(n.calories===0&&n.protein===0&&n.fat===0)return null;const r=sB(e),i=r?0:y0(n),a=nse(t);return{name:e,brand:t.brands||void 0,barcode:t.code||void 0,nutrition:n,pointsPer100g:i,servingSizeG:t.serving_quantity||100,unit:a,isZeroPoint:r,source:"openfoodfacts",imageUrl:t.image_front_small_url||void 0,createdAt:new Date}}function pI(t){const e=t.toLowerCase();return Jae.filter(n=>n.name.toLowerCase().includes(e)).map(n=>{const r=sB(n.name),i=r?0:y0(n.nutrition);return{...n,pointsPer100g:i,isZeroPoint:r,source:"nevo",createdAt:new Date}})}async function lB(t){const e=t.toLowerCase();return(await Ze.foodItems.toArray()).filter(r=>r.name.toLowerCase().includes(e))}async function uB(t,e,n){if(!t||t.length<2)return[];const r=n??pI(t);try{const i=new URLSearchParams({search_terms:t,search_simple:"1",action:"process",json:"1",page_size:"15",fields:"product_name,product_name_nl,brands,code,nutriments,serving_quantity,serving_size,quantity,image_front_small_url",lc:"nl",tagtype_0:"countries",tag_contains_0:"contains",tag_0:"Netherlands"}),a=await fetch(`${oB}/cgi/search.pl?${i}`,{signal:e});if(!a.ok)return r;let m=((await a.json()).products||[]).map(RA).filter(_=>_!==null);if(m.length<3)try{const _=new URLSearchParams({search_terms:t,search_simple:"1",action:"process",json:"1",page_size:"10",fields:"product_name,product_name_nl,brands,code,nutriments,serving_quantity,serving_size,quantity,image_front_small_url",lc:"nl"}),T=await fetch(`https://world.openfoodfacts.org/cgi/search.pl?${_}`,{signal:e});if(T.ok){const M=((await T.json()).products||[]).map(RA).filter(z=>z!==null),L=new Set(m.map(z=>z.name.toLowerCase()));for(const z of M)L.has(z.name.toLowerCase())||(m.push(z),L.add(z.name.toLowerCase()))}}catch{}const p=new Set(r.map(_=>_.name.toLowerCase())),b=[...r];for(const _ of m)p.has(_.name.toLowerCase())||(b.push(_),p.add(_.name.toLowerCase()));return b}catch(i){return i instanceof DOMException&&i.name==="AbortError"?[]:(console.error("Zoekfout:",i),r)}}const eD="product_name,product_name_nl,brands,code,nutriments,serving_quantity,serving_size,quantity,image_front_small_url";async function rse(t){try{const e=await Ze.foodItems.where("barcode").equals(t).first();if(e)return e}catch{}try{const e=await nD(`${oB}/api/v2/product/${t}?fields=${eD}`);if(e)return await tD(e),e}catch{}try{const e=await nD(`https://world.openfoodfacts.org/api/v2/product/${t}?fields=${eD}`);if(e)return await tD(e),e}catch(e){console.error("Barcode lookup fout:",e)}return null}async function tD(t){if(t.barcode)try{await Ze.foodItems.where("barcode").equals(t.barcode).first()||await Ze.foodItems.add({...t,source:"openfoodfacts"})}catch{}}async function nD(t){const e=await fetch(t);if(!e.ok)return null;const n=await e.json();return n.status!==1||!n.product?null:RA(n.product)}function ise({onCreated:t,onClose:e}){const[n,r]=D.useState(""),[i,a]=D.useState([]),[l,f]=D.useState(""),[m,p]=D.useState([]),[b,_]=D.useState(!1),[T,R]=D.useState([]),[j,M]=D.useState([]),L=D.useRef(null),z=D.useRef(null);D.useEffect(()=>{IA().then(R),TA(10).then(M)},[]);const $=D.useCallback(async be=>{if(be.length<2){p([]);return}z.current?.abort();const he=new AbortController;z.current=he;const ye=pI(be),we=await lB(be),$e=new Set(ye.map(rt=>rt.name.toLowerCase())),et=[...ye];for(const rt of we)$e.has(rt.name.toLowerCase())||(et.push(rt),$e.add(rt.name.toLowerCase()));!he.signal.aborted&&et.length>0&&p(et),_(!0);try{const rt=await uB(be,he.signal,et);he.signal.aborted||(p(rt),_(!1))}catch{he.signal.aborted||_(!1)}},[]),K=be=>{f(be),L.current&&clearTimeout(L.current),L.current=setTimeout(()=>$(be),400)},J=be=>{a(he=>[...he,{food:be,quantityG:be.servingSizeG||100}]),f(""),p([])},ce=(be,he)=>{a(ye=>ye.map((we,$e)=>$e===be?{...we,quantityG:Math.max(1,he)}:we))},Z=be=>{a(he=>he.filter((ye,we)=>we!==be))},V=i.reduce((be,he)=>be+he.quantityG,0),W=i.reduce((be,he)=>{const ye=he.quantityG/100;return{calories:be.calories+he.food.nutrition.calories*ye,protein:be.protein+he.food.nutrition.protein*ye,fat:be.fat+he.food.nutrition.fat*ye,saturatedFat:be.saturatedFat+he.food.nutrition.saturatedFat*ye,unsaturatedFat:be.unsaturatedFat+he.food.nutrition.unsaturatedFat*ye,carbs:be.carbs+he.food.nutrition.carbs*ye,sugar:be.sugar+he.food.nutrition.sugar*ye,addedSugar:be.addedSugar+he.food.nutrition.addedSugar*ye,fiber:be.fiber+he.food.nutrition.fiber*ye}},{calories:0,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0}),U=V>0?{calories:Math.round(W.calories/V*100),protein:+(W.protein/V*100).toFixed(1),fat:+(W.fat/V*100).toFixed(1),saturatedFat:+(W.saturatedFat/V*100).toFixed(1),unsaturatedFat:+(W.unsaturatedFat/V*100).toFixed(1),carbs:+(W.carbs/V*100).toFixed(1),sugar:+(W.sugar/V*100).toFixed(1),addedSugar:+(W.addedSugar/V*100).toFixed(1),fiber:+(W.fiber/V*100).toFixed(1)}:{calories:0,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0},ae=y0(U),ie=V>0?Math.max(0,Math.round(ae*V/100)):0,Q=n.trim().length>=2&&i.length>=2,ne=async()=>{if(!Q)return;const be=await dI({name:n.trim(),nutrition:U,pointsPer100g:ae,servingSizeG:Math.round(V),isZeroPoint:ae===0,isFavorite:!0,source:"user"});t(be)};return O.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center animate-fade-in",children:[O.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:e}),O.jsxs("div",{className:"relative bg-white rounded-t-3xl w-full max-w-lg animate-slide-up overflow-y-auto",style:{paddingBottom:"calc(20px + var(--safe-area-bottom))",maxHeight:"92vh"},children:[O.jsx("div",{className:"flex justify-center pt-3 pb-2",children:O.jsx("div",{className:"w-9 h-1 rounded-full bg-ios-separator"})}),O.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer",children:O.jsx(lm,{size:18,className:"text-ios-secondary"})}),O.jsxs("div",{className:"px-5 pb-4",children:[O.jsx("h2",{className:"text-[20px] font-bold mb-4",children:"Samengesteld product"}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Naam *"}),O.jsx("input",{type:"text",placeholder:"bijv. Tosti ham-kaas",value:n,onChange:be=>r(be.target.value),className:"bg-white rounded-xl px-4 py-3 text-[16px] w-full border border-ios-separator"})]}),O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Ingredinten toevoegen"}),O.jsxs("div",{className:"relative mb-3",children:[O.jsx(Op,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:"text",placeholder:"Zoek ingredint...",value:l,onChange:be=>K(be.target.value),className:"bg-white rounded-xl pl-9 pr-4 py-2.5 text-[15px] w-full border border-ios-separator"}),b&&O.jsx(Nc,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-ios-secondary animate-spin"})]}),m.length>0&&O.jsx("div",{className:"bg-white border border-ios-separator rounded-xl mb-3 max-h-40 overflow-y-auto",children:m.slice(0,8).map((be,he)=>O.jsxs("button",{onClick:()=>J(be),className:"w-full flex items-center gap-2 px-3 py-2 text-left bg-transparent border-none cursor-pointer active:bg-gray-50 text-[14px]",children:[O.jsx(Vf,{size:14,className:"text-primary flex-shrink-0"}),O.jsx("span",{className:"truncate",children:be.name}),O.jsxs("span",{className:"text-ios-secondary text-[12px] ml-auto flex-shrink-0",children:[be.pointsPer100g," pt"]})]},`${be.name}-${he}`))}),l.length<2&&(T.length>0||j.length>0)&&O.jsxs("div",{className:"bg-white border border-ios-separator rounded-xl mb-3 max-h-48 overflow-y-auto",children:[T.length>0&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-ios-bg",children:[O.jsx(eb,{size:12,className:"text-ios-destructive"}),O.jsx("span",{className:"text-[12px] font-semibold text-ios-secondary uppercase tracking-wide",children:"Favorieten"})]}),T.slice(0,5).map((be,he)=>O.jsxs("button",{onClick:()=>J(be),className:"w-full flex items-center gap-2 px-3 py-2 text-left bg-transparent border-none cursor-pointer active:bg-gray-50 text-[14px]",children:[O.jsx(Vf,{size:14,className:"text-primary flex-shrink-0"}),O.jsx("span",{className:"truncate",children:be.name}),O.jsxs("span",{className:"text-ios-secondary text-[12px] ml-auto flex-shrink-0",children:[be.pointsPer100g," pt"]})]},`fav-${be.name}-${he}`))]}),j.length>0&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-ios-bg",children:[O.jsx(mI,{size:12,className:"text-ios-blue"}),O.jsx("span",{className:"text-[12px] font-semibold text-ios-secondary uppercase tracking-wide",children:"Recent"})]}),j.slice(0,5).map((be,he)=>O.jsxs("button",{onClick:()=>J(be),className:"w-full flex items-center gap-2 px-3 py-2 text-left bg-transparent border-none cursor-pointer active:bg-gray-50 text-[14px]",children:[O.jsx(Vf,{size:14,className:"text-primary flex-shrink-0"}),O.jsx("span",{className:"truncate",children:be.name}),O.jsxs("span",{className:"text-ios-secondary text-[12px] ml-auto flex-shrink-0",children:[be.pointsPer100g," pt"]})]},`recent-${be.name}-${he}`))]})]}),i.length>0&&O.jsx("div",{className:"bg-ios-bg rounded-xl mb-4",children:i.map((be,he)=>O.jsxs("div",{className:`flex items-center gap-2 px-3 py-2.5 ${he<i.length-1?"border-b border-ios-separator":""}`,children:[O.jsx("div",{className:"flex-1 min-w-0",children:O.jsx("div",{className:"text-[14px] font-medium truncate",children:be.food.name})}),O.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[O.jsx("button",{onClick:()=>ce(he,be.quantityG-10),className:"w-7 h-7 rounded-full bg-white flex items-center justify-center border-none cursor-pointer text-ios-secondary",children:O.jsx(CA,{size:12})}),O.jsx("input",{type:"number",value:be.quantityG,onChange:ye=>ce(he,Number(ye.target.value)),className:"w-14 text-center bg-white rounded-lg px-1 py-1 text-[14px] border border-ios-separator"}),O.jsx("span",{className:"text-[12px] text-ios-secondary",children:"g"}),O.jsx("button",{onClick:()=>ce(he,be.quantityG+10),className:"w-7 h-7 rounded-full bg-white flex items-center justify-center border-none cursor-pointer text-ios-secondary",children:O.jsx(Vf,{size:12})}),O.jsx("button",{onClick:()=>Z(he),className:"w-7 h-7 rounded-full flex items-center justify-center border-none cursor-pointer text-ios-destructive bg-transparent",children:O.jsx(lm,{size:14})})]})]},`${be.food.name}-${he}`))}),i.length<2&&O.jsx("p",{className:"text-[13px] text-ios-secondary text-center mb-4",children:"Voeg minimaal 2 ingredinten toe"}),i.length>=2&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"bg-ios-bg rounded-2xl p-4 mb-3 text-center",children:[O.jsx("div",{className:"text-[36px] font-bold text-primary leading-none",children:ie}),O.jsxs("div",{className:"text-[13px] text-ios-secondary mt-1",children:["punten totaal (",Math.round(V),"g)  ",ae," pt/100g"]})]}),O.jsxs("div",{className:"flex justify-around mb-4 py-2 bg-ios-bg rounded-xl text-center",children:[O.jsxs("div",{children:[O.jsx("div",{className:"text-[14px] font-semibold",children:Math.round(W.calories)}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"kcal"})]}),O.jsxs("div",{children:[O.jsxs("div",{className:"text-[14px] font-semibold",children:[W.protein.toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"eiwit"})]}),O.jsxs("div",{children:[O.jsxs("div",{className:"text-[14px] font-semibold",children:[W.carbs.toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"koolh."})]}),O.jsxs("div",{children:[O.jsxs("div",{className:"text-[14px] font-semibold",children:[W.fat.toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"vet"})]})]})]}),O.jsxs(to,{fullWidth:!0,size:"lg",onClick:ne,disabled:!Q,children:["Opslaan  ",ie," pt"]})]})]})]})}const yI=Zx(t=>({visible:!1,waterMl:0,drinkName:"",percentage:1,entryId:null,show:(e,n,r,i)=>{t({visible:!0,waterMl:e,drinkName:n,percentage:r,entryId:i??null})},hide:()=>{t({visible:!1})}}));function ase(){const[t]=SK(),e=t.get("meal")||"lunch",[n,r]=D.useState("recent"),[i,a]=D.useState(""),[l,f]=D.useState([]),[m,p]=D.useState([]),[b,_]=D.useState([]),[T,R]=D.useState(!1),[j,M]=D.useState(!0),[L,z]=D.useState(null),[$,K]=D.useState(!1),[J,ce]=D.useState(!1),[Z,V]=D.useState(!1),W=D.useRef(null),U=D.useRef(null),ae=D.useRef(null),ie=$f(de=>de.addEntry),Q=$f(de=>de.selectedDate),ne=yI(de=>de.show);D.useEffect(()=>{be()},[]);const be=async()=>{M(!0);const[de,Ee]=await Promise.all([TA(),IA()]);p(de),_(Ee),M(!1)},he=D.useCallback(async de=>{if(de.length<2){f([]),V(!1);return}U.current&&U.current.abort();const Ee=new AbortController;U.current=Ee;const Xe=new Set(b.map(Se=>Se.name.toLowerCase())),Ge=Se=>Se.map(Oe=>({...Oe,isFavorite:Xe.has(Oe.name.toLowerCase())})),vt=pI(de),qe=await lB(de),ze=new Set(vt.map(Se=>Se.name.toLowerCase())),ct=[...vt];for(const Se of qe)ze.has(Se.name.toLowerCase())||(ct.push(Se),ze.add(Se.name.toLowerCase()));!Ee.signal.aborted&&ct.length>0&&(f(Ge(ct)),V(!0)),R(!0);try{const Se=await uB(de,Ee.signal,ct);Ee.signal.aborted||(f(Ge(Se)),R(!1),V(!0))}catch{Ee.signal.aborted||R(!1)}},[b]),ye=de=>{a(de),de.length>=2&&r("search"),W.current&&clearTimeout(W.current),W.current=setTimeout(()=>he(de),300)},we=async de=>{const Ee=await $te(de),Xe=vt=>vt.map(qe=>qe.name.toLowerCase()===de.name.toLowerCase()?{...qe,isFavorite:Ee}:qe);p(Xe),f(Xe);const Ge=await IA();_(Ge)},$e=async(de,Ee,Xe)=>{if(!L)return;const vt=v0(L.pointsPer100g,de)*(Xe||1),qe=fI(L.name),ze=qe>0?Math.round(de*(Xe||1)*qe):void 0,ct=await ie({foodItem:L,mealType:Ee,quantityG:de,quantity:Xe,points:vt,waterMlAdded:ze});ze&&ze>0&&(await Jx(Q,ze),window.dispatchEvent(new CustomEvent("water-changed")),ne(ze,L.name,qe,ct)),navigator.vibrate?.(10),z(null);const Se=await TA();p(Se)},et=de=>{K(!1),ce(!1),z(de),be()},rt=de=>{r(de),de==="search"&&setTimeout(()=>ae.current?.focus(),100)};return O.jsxs(km,{title:"Zoek voedsel",children:[O.jsxs("div",{className:"flex flex-col gap-3",children:[O.jsxs("div",{className:"relative",children:[O.jsx(Op,{size:18,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{ref:ae,type:"text",placeholder:"Zoek een product...",value:i,onChange:de=>ye(de.target.value),onFocus:()=>i.length>=2&&r("search"),className:"bg-white rounded-xl pl-10 pr-4 py-3 text-[17px] w-full shadow-sm"}),T&&O.jsx(Nc,{size:18,className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-ios-secondary animate-spin"})]}),O.jsxs("div",{className:"flex gap-1 bg-ios-bg rounded-xl p-1",children:[O.jsx(Q1,{active:n==="recent",onClick:()=>rt("recent"),icon:O.jsx(mI,{size:14}),label:"Recent"}),O.jsx(Q1,{active:n==="favorites",onClick:()=>rt("favorites"),icon:O.jsx(eb,{size:14}),label:"Favorieten"}),O.jsx(Q1,{active:n==="zeropoint",onClick:()=>rt("zeropoint"),icon:O.jsx(cre,{size:14}),label:"0 Punten"}),O.jsx(Q1,{active:n==="search",onClick:()=>rt("search"),icon:O.jsx(Op,{size:14}),label:"Zoeken"})]}),n==="recent"&&O.jsx(sse,{foods:m,isLoading:j,onSelect:z,onToggleFavorite:we}),n==="favorites"&&O.jsx(ose,{foods:b,isLoading:j,onSelect:z,onToggleFavorite:we}),n==="zeropoint"&&O.jsx(lse,{onSelect:z}),n==="search"&&O.jsx(use,{results:l,isSearching:T,hasSearched:Z,query:i,onSelect:z,onToggleFavorite:we}),O.jsxs("div",{className:"flex gap-2",children:[O.jsxs("button",{onClick:()=>K(!0),className:"flex-1 flex items-center justify-center gap-2 py-3.5 bg-white rounded-xl border border-dashed border-ios-separator text-[15px] font-medium text-primary cursor-pointer active:bg-gray-50 transition-colors",children:[O.jsx(Vf,{size:18}),"Eigen product"]}),O.jsxs("button",{onClick:()=>ce(!0),className:"flex-1 flex items-center justify-center gap-2 py-3.5 bg-white rounded-xl border border-dashed border-ios-separator text-[15px] font-medium text-ios-blue cursor-pointer active:bg-gray-50 transition-colors",children:[O.jsx(Rne,{size:18}),"Samengesteld"]})]})]}),L&&O.jsx(iB,{food:L,defaultMealType:e,onAdd:$e,onClose:()=>z(null)}),$&&O.jsx(Zae,{onCreated:et,onClose:()=>K(!1)}),J&&O.jsx(ise,{onCreated:et,onClose:()=>ce(!1)})]})}function Q1({active:t,onClick:e,icon:n,label:r}){return O.jsxs("button",{onClick:e,className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[13px] font-medium border-none cursor-pointer transition-colors ${t?"bg-white text-primary shadow-sm":"bg-transparent text-ios-secondary"}`,children:[n,r]})}function sse({foods:t,isLoading:e,onSelect:n,onToggleFavorite:r}){return e?O.jsx("div",{className:"flex justify-center py-12",children:O.jsx(Nc,{size:24,className:"text-ios-secondary animate-spin"})}):t.length===0?O.jsxs("div",{className:"text-center py-12",children:[O.jsx(mI,{size:48,className:"text-ios-separator mx-auto mb-3"}),O.jsx("p",{className:"text-[17px] text-ios-secondary",children:"Nog geen producten gebruikt"}),O.jsx("p",{className:"text-[13px] text-ios-secondary mt-1",children:"Producten die je logt verschijnen hier automatisch"})]}):O.jsx(An,{children:t.map((i,a)=>O.jsx("div",{className:a<t.length-1?"border-b border-ios-separator":"",children:O.jsx(gI,{food:i,onSelect:n,onToggleFavorite:r})},`recent-${i.name}-${a}`))})}function ose({foods:t,isLoading:e,onSelect:n,onToggleFavorite:r}){return e?O.jsx("div",{className:"flex justify-center py-12",children:O.jsx(Nc,{size:24,className:"text-ios-secondary animate-spin"})}):t.length===0?O.jsxs("div",{className:"text-center py-12",children:[O.jsx(eb,{size:48,className:"text-ios-separator mx-auto mb-3"}),O.jsx("p",{className:"text-[17px] text-ios-secondary",children:"Geen favorieten"}),O.jsx("p",{className:"text-[13px] text-ios-secondary mt-1",children:"Tik op het hartje om een product als favoriet op te slaan"})]}):O.jsx(An,{children:t.map((i,a)=>O.jsx("div",{className:a<t.length-1?"border-b border-ios-separator":"",children:O.jsx(gI,{food:{...i,isFavorite:!0},onSelect:n,onToggleFavorite:r})},`fav-${i.id??i.name}-${a}`))})}function lse({onSelect:t}){const[e,n]=D.useState(null),r=i=>({name:i,nutrition:{calories:0,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0},pointsPer100g:0,servingSizeG:100,isZeroPoint:!0,source:"nevo",createdAt:new Date});return O.jsx("div",{className:"flex flex-col gap-2",children:aB.map(i=>{const a=e===i.name;return O.jsxs(An,{children:[O.jsxs("button",{onClick:()=>n(a?null:i.name),className:"w-full flex items-center justify-between px-4 py-3 border-none bg-transparent cursor-pointer",children:[O.jsxs("div",{className:"flex items-center gap-2.5",children:[O.jsx("span",{className:"text-lg",children:i.icon}),O.jsx("span",{className:"text-[15px] font-semibold",children:i.name}),O.jsxs("span",{className:"text-[13px] text-ios-secondary",children:["(",i.items.length,")"]})]}),a?O.jsx(GL,{size:18,className:"text-ios-secondary"}):O.jsx(vv,{size:18,className:"text-ios-secondary"})]}),a&&O.jsx("div",{className:"border-t border-ios-separator",children:i.items.map((l,f)=>O.jsxs("button",{onClick:()=>t(r(l)),className:`w-full flex items-center justify-between px-4 py-2.5 border-none bg-transparent cursor-pointer active:bg-gray-50 text-left ${f<i.items.length-1?"border-b border-ios-separator":""}`,children:[O.jsx("span",{className:"text-[15px]",children:l}),O.jsx("span",{className:"text-[13px] font-medium text-primary",children:"0 pt"})]},l))})]},i.name)})})}function use({results:t,isSearching:e,hasSearched:n,query:r,onSelect:i,onToggleFavorite:a}){return t.length>0?O.jsx(An,{children:t.map((l,f)=>O.jsx("div",{className:f<t.length-1?"border-b border-ios-separator":"",children:O.jsx(gI,{food:l,onSelect:i,onToggleFavorite:a})},`search-${l.barcode??l.name}-${f}`))}):n&&t.length===0&&!e?O.jsxs("div",{className:"text-center py-12",children:[O.jsxs("p",{className:"text-[17px] text-ios-secondary",children:['Geen resultaten voor "',r,'"']}),O.jsx("p",{className:"text-[13px] text-ios-secondary mt-1",children:"Probeer een andere zoekterm of maak een eigen product aan"})]}):O.jsxs("div",{className:"text-center py-12",children:[O.jsx(Op,{size:48,className:"text-ios-separator mx-auto mb-3"}),O.jsx("p",{className:"text-[17px] text-ios-secondary",children:"Zoek op productnaam of merk"}),O.jsx("p",{className:"text-[13px] text-ios-secondary mt-1",children:"Of gebruik de scanner voor barcodes"})]})}var St;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(St||(St={}));var rD=new Map([[St.QR_CODE,"QR_CODE"],[St.AZTEC,"AZTEC"],[St.CODABAR,"CODABAR"],[St.CODE_39,"CODE_39"],[St.CODE_93,"CODE_93"],[St.CODE_128,"CODE_128"],[St.DATA_MATRIX,"DATA_MATRIX"],[St.MAXICODE,"MAXICODE"],[St.ITF,"ITF"],[St.EAN_13,"EAN_13"],[St.EAN_8,"EAN_8"],[St.PDF_417,"PDF_417"],[St.RSS_14,"RSS_14"],[St.RSS_EXPANDED,"RSS_EXPANDED"],[St.UPC_A,"UPC_A"],[St.UPC_E,"UPC_E"],[St.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),iD;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(iD||(iD={}));function cse(t){return Object.values(St).includes(t)}var _v;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(_v||(_v={}));var fse=(function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[_v.SCAN_TYPE_CAMERA,_v.SCAN_TYPE_FILE],t})(),cB=(function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!rD.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,rD.get(e))},t})(),aD=(function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t})(),PA;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(PA||(PA={}));var dse=(function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:PA.UNKWOWN_ERROR}},t})(),hse=(function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t})();function iu(t){return typeof t>"u"||t===null}var Sh=(function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t})(),fB=(function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(i),l=Object.keys(e),f=0,m=l;f<m.length;f++){var p=m[f];if(a.has(p))return n.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},t})(),Xg={exports:{}},mse=Xg.exports,sD;function gse(){return sD||(sD=1,(function(t,e){(function(n,r){r(e)})(mse,(function(n){function r(Y){return Y==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,o){Y.__proto__=o}||function(Y,o){for(var c in o)o.hasOwnProperty(c)&&(Y[c]=o[c])};function a(Y,o){i(Y,o);function c(){this.constructor=Y}Y.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}function l(Y,o){var c=Object.setPrototypeOf;c?c(Y,o):Y.__proto__=o}function f(Y,o){o===void 0&&(o=Y.constructor);var c=Error.captureStackTrace;c&&c(Y,o)}var m=(function(Y){a(o,Y);function o(c){var h=this.constructor,y=Y.call(this,c)||this;return Object.defineProperty(y,"name",{value:h.name,enumerable:!1}),l(y,h.prototype),f(y),y}return o})(Error);class p extends m{constructor(o=void 0){super(o),this.message=o}getKind(){return this.constructor.kind}}p.kind="Exception";class b extends p{}b.kind="ArgumentException";class _ extends p{}_.kind="IllegalArgumentException";class T{constructor(o){if(this.binarizer=o,o===null)throw new _("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,c){return this.binarizer.getBlackRow(o,c)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,c,h,y){const x=this.binarizer.getLuminanceSource().crop(o,c,h,y);return new T(this.binarizer.createBinarizer(x))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class R extends p{static getChecksumInstance(){return new R}}R.kind="ChecksumException";class j{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class M{static arraycopy(o,c,h,y,x){for(;x--;)h[y++]=o[c++]}static currentTimeMillis(){return Date.now()}}class L extends p{}L.kind="IndexOutOfBoundsException";class z extends L{constructor(o=void 0,c=void 0){super(c),this.index=o,this.message=c}}z.kind="ArrayIndexOutOfBoundsException";class ${static fill(o,c){for(let h=0,y=o.length;h<y;h++)o[h]=c}static fillWithin(o,c,h,y){$.rangeCheck(o.length,c,h);for(let x=c;x<h;x++)o[x]=y}static rangeCheck(o,c,h){if(c>h)throw new _("fromIndex("+c+") > toIndex("+h+")");if(c<0)throw new z(c);if(h>o)throw new z(h)}static asList(...o){return o}static create(o,c,h){return Array.from({length:o}).map(x=>Array.from({length:c}).fill(h))}static createInt32Array(o,c,h){return Array.from({length:o}).map(x=>Int32Array.from({length:c}).fill(h))}static equals(o,c){if(!o||!c||!o.length||!c.length||o.length!==c.length)return!1;for(let h=0,y=o.length;h<y;h++)if(o[h]!==c[h])return!1;return!0}static hashCode(o){if(o===null)return 0;let c=1;for(const h of o)c=31*c+h;return c}static fillUint8Array(o,c){for(let h=0;h!==o.length;h++)o[h]=c}static copyOf(o,c){return o.slice(0,c)}static copyOfUint8Array(o,c){if(o.length<=c){const h=new Uint8Array(c);return h.set(o),h}return o.slice(0,c)}static copyOfRange(o,c,h){const y=h-c,x=new Int32Array(y);return M.arraycopy(o,c,x,0,y),x}static binarySearch(o,c,h){h===void 0&&(h=$.numberComparator);let y=0,x=o.length-1;for(;y<=x;){const E=x+y>>1,d=h(c,o[E]);if(d>0)y=E+1;else if(d<0)x=E-1;else return E}return-y-1}static numberComparator(o,c){return o-c}}class K{static numberOfTrailingZeros(o){let c;if(o===0)return 32;let h=31;return c=o<<16,c!==0&&(h-=16,o=c),c=o<<8,c!==0&&(h-=8,o=c),c=o<<4,c!==0&&(h-=4,o=c),c=o<<2,c!==0&&(h-=2,o=c),h-(o<<1>>>31)}static numberOfLeadingZeros(o){if(o===0)return 32;let c=1;return o>>>16||(c+=16,o<<=16),o>>>24||(c+=8,o<<=8),o>>>28||(c+=4,o<<=4),o>>>30||(c+=2,o<<=2),c-=o>>>31,c}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),o=o+(o>>>4)&252645135,o=o+(o>>>8),o=o+(o>>>16),o&63}static truncDivision(o,c){return Math.trunc(o/c)}static parseInt(o,c=void 0){return parseInt(o,c)}}K.MIN_VALUE_32_BITS=-2147483648,K.MAX_VALUE=Number.MAX_SAFE_INTEGER;class J{constructor(o,c){o===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,c==null?this.bits=J.makeArray(o):this.bits=c)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>this.bits.length*32){const c=J.makeArray(o);M.arraycopy(this.bits,0,c,0,this.bits.length),this.bits=c}}get(o){return(this.bits[Math.floor(o/32)]&1<<(o&31))!==0}set(o){this.bits[Math.floor(o/32)]|=1<<(o&31)}flip(o){this.bits[Math.floor(o/32)]^=1<<(o&31)}getNextSet(o){const c=this.size;if(o>=c)return c;const h=this.bits;let y=Math.floor(o/32),x=h[y];x&=~((1<<(o&31))-1);const E=h.length;for(;x===0;){if(++y===E)return c;x=h[y]}const d=y*32+K.numberOfTrailingZeros(x);return d>c?c:d}getNextUnset(o){const c=this.size;if(o>=c)return c;const h=this.bits;let y=Math.floor(o/32),x=~h[y];x&=~((1<<(o&31))-1);const E=h.length;for(;x===0;){if(++y===E)return c;x=~h[y]}const d=y*32+K.numberOfTrailingZeros(x);return d>c?c:d}setBulk(o,c){this.bits[Math.floor(o/32)]=c}setRange(o,c){if(c<o||o<0||c>this.size)throw new _;if(c===o)return;c--;const h=Math.floor(o/32),y=Math.floor(c/32),x=this.bits;for(let E=h;E<=y;E++){const d=E>h?0:o&31,A=(2<<(E<y?31:c&31))-(1<<d);x[E]|=A}}clear(){const o=this.bits.length,c=this.bits;for(let h=0;h<o;h++)c[h]=0}isRange(o,c,h){if(c<o||o<0||c>this.size)throw new _;if(c===o)return!0;c--;const y=Math.floor(o/32),x=Math.floor(c/32),E=this.bits;for(let d=y;d<=x;d++){const v=d>y?0:o&31,I=(2<<(d<x?31:c&31))-(1<<v)&4294967295;if((E[d]&I)!==(h?I:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(o,c){if(c<0||c>32)throw new _("Num bits must be between 0 and 32");this.ensureCapacity(this.size+c);for(let h=c;h>0;h--)this.appendBit((o>>h-1&1)===1)}appendBitArray(o){const c=o.size;this.ensureCapacity(this.size+c);for(let h=0;h<c;h++)this.appendBit(o.get(h))}xor(o){if(this.size!==o.size)throw new _("Sizes don't match");const c=this.bits;for(let h=0,y=c.length;h<y;h++)c[h]^=o.bits[h]}toBytes(o,c,h,y){for(let x=0;x<y;x++){let E=0;for(let d=0;d<8;d++)this.get(o)&&(E|=1<<7-d),o++;c[h+x]=E}}getBitArray(){return this.bits}reverse(){const o=new Int32Array(this.bits.length),c=Math.floor((this.size-1)/32),h=c+1,y=this.bits;for(let x=0;x<h;x++){let E=y[x];E=E>>1&1431655765|(E&1431655765)<<1,E=E>>2&858993459|(E&858993459)<<2,E=E>>4&252645135|(E&252645135)<<4,E=E>>8&16711935|(E&16711935)<<8,E=E>>16&65535|(E&65535)<<16,o[c-x]=E}if(this.size!==h*32){const x=h*32-this.size;let E=o[0]>>>x;for(let d=1;d<h;d++){const v=o[d];E|=v<<32-x,o[d-1]=E,E=v>>>x}o[h-1]=E}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){if(!(o instanceof J))return!1;const c=o;return this.size===c.size&&$.equals(this.bits,c.bits)}hashCode(){return 31*this.size+$.hashCode(this.bits)}toString(){let o="";for(let c=0,h=this.size;c<h;c++)(c&7)===0&&(o+=" "),o+=this.get(c)?"X":".";return o}clone(){return new J(this.size,this.bits.slice())}}var ce;(function(Y){Y[Y.OTHER=0]="OTHER",Y[Y.PURE_BARCODE=1]="PURE_BARCODE",Y[Y.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",Y[Y.TRY_HARDER=3]="TRY_HARDER",Y[Y.CHARACTER_SET=4]="CHARACTER_SET",Y[Y.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",Y[Y.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",Y[Y.ASSUME_GS1=7]="ASSUME_GS1",Y[Y.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",Y[Y.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",Y[Y.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ce||(ce={}));var Z=ce;class V extends p{static getFormatInstance(){return new V}}V.kind="FormatException";var W;(function(Y){Y[Y.Cp437=0]="Cp437",Y[Y.ISO8859_1=1]="ISO8859_1",Y[Y.ISO8859_2=2]="ISO8859_2",Y[Y.ISO8859_3=3]="ISO8859_3",Y[Y.ISO8859_4=4]="ISO8859_4",Y[Y.ISO8859_5=5]="ISO8859_5",Y[Y.ISO8859_6=6]="ISO8859_6",Y[Y.ISO8859_7=7]="ISO8859_7",Y[Y.ISO8859_8=8]="ISO8859_8",Y[Y.ISO8859_9=9]="ISO8859_9",Y[Y.ISO8859_10=10]="ISO8859_10",Y[Y.ISO8859_11=11]="ISO8859_11",Y[Y.ISO8859_13=12]="ISO8859_13",Y[Y.ISO8859_14=13]="ISO8859_14",Y[Y.ISO8859_15=14]="ISO8859_15",Y[Y.ISO8859_16=15]="ISO8859_16",Y[Y.SJIS=16]="SJIS",Y[Y.Cp1250=17]="Cp1250",Y[Y.Cp1251=18]="Cp1251",Y[Y.Cp1252=19]="Cp1252",Y[Y.Cp1256=20]="Cp1256",Y[Y.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",Y[Y.UTF8=22]="UTF8",Y[Y.ASCII=23]="ASCII",Y[Y.Big5=24]="Big5",Y[Y.GB18030=25]="GB18030",Y[Y.EUC_KR=26]="EUC_KR"})(W||(W={}));class U{constructor(o,c,h,...y){this.valueIdentifier=o,this.name=h,typeof c=="number"?this.values=Int32Array.from([c]):this.values=c,this.otherEncodingNames=y,U.VALUE_IDENTIFIER_TO_ECI.set(o,this),U.NAME_TO_ECI.set(h,this);const x=this.values;for(let E=0,d=x.length;E!==d;E++){const v=x[E];U.VALUES_TO_ECI.set(v,this)}for(const E of y)U.NAME_TO_ECI.set(E,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new V("incorect value");const c=U.VALUES_TO_ECI.get(o);if(c===void 0)throw new V("incorect value");return c}static getCharacterSetECIByName(o){const c=U.NAME_TO_ECI.get(o);if(c===void 0)throw new V("incorect value");return c}equals(o){if(!(o instanceof U))return!1;const c=o;return this.getName()===c.getName()}}U.VALUE_IDENTIFIER_TO_ECI=new Map,U.VALUES_TO_ECI=new Map,U.NAME_TO_ECI=new Map,U.Cp437=new U(W.Cp437,Int32Array.from([0,2]),"Cp437"),U.ISO8859_1=new U(W.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),U.ISO8859_2=new U(W.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),U.ISO8859_3=new U(W.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),U.ISO8859_4=new U(W.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),U.ISO8859_5=new U(W.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),U.ISO8859_6=new U(W.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),U.ISO8859_7=new U(W.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),U.ISO8859_8=new U(W.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),U.ISO8859_9=new U(W.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),U.ISO8859_10=new U(W.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),U.ISO8859_11=new U(W.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),U.ISO8859_13=new U(W.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),U.ISO8859_14=new U(W.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),U.ISO8859_15=new U(W.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),U.ISO8859_16=new U(W.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),U.SJIS=new U(W.SJIS,20,"SJIS","Shift_JIS"),U.Cp1250=new U(W.Cp1250,21,"Cp1250","windows-1250"),U.Cp1251=new U(W.Cp1251,22,"Cp1251","windows-1251"),U.Cp1252=new U(W.Cp1252,23,"Cp1252","windows-1252"),U.Cp1256=new U(W.Cp1256,24,"Cp1256","windows-1256"),U.UnicodeBigUnmarked=new U(W.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),U.UTF8=new U(W.UTF8,26,"UTF8","UTF-8"),U.ASCII=new U(W.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),U.Big5=new U(W.Big5,28,"Big5"),U.GB18030=new U(W.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),U.EUC_KR=new U(W.EUC_KR,30,"EUC_KR","EUC-KR");class ae extends p{}ae.kind="UnsupportedOperationException";class ie{static decode(o,c){const h=this.encodingName(c);return this.customDecoder?this.customDecoder(o,h):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(h)?this.decodeFallback(o,h):new TextDecoder(h).decode(o)}static shouldDecodeOnFallback(o){return!ie.isBrowser()&&o==="ISO-8859-1"}static encode(o,c){const h=this.encodingName(c);return this.customEncoder?this.customEncoder(o,h):typeof TextEncoder>"u"?this.encodeFallback(o):new TextEncoder().encode(o)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(o){return typeof o=="string"?o:o.getName()}static encodingCharacterSet(o){return o instanceof U?o:U.getCharacterSetECIByName(o)}static decodeFallback(o,c){const h=this.encodingCharacterSet(c);if(ie.isDecodeFallbackSupported(h)){let y="";for(let x=0,E=o.length;x<E;x++){let d=o[x].toString(16);d.length<2&&(d="0"+d),y+="%"+d}return decodeURIComponent(y)}if(h.equals(U.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new ae(`Encoding ${this.encodingName(c)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(U.UTF8)||o.equals(U.ISO8859_1)||o.equals(U.ASCII)}static encodeFallback(o){const h=btoa(unescape(encodeURIComponent(o))).split(""),y=[];for(let x=0;x<h.length;x++)y.push(h[x].charCodeAt(0));return new Uint8Array(y)}}class Q{static castAsNonUtf8Char(o,c=null){const h=c?c.getName():this.ISO88591;return ie.decode(new Uint8Array([o]),h)}static guessEncoding(o,c){if(c!=null&&c.get(Z.CHARACTER_SET)!==void 0)return c.get(Z.CHARACTER_SET).toString();const h=o.length;let y=!0,x=!0,E=!0,d=0,v=0,A=0,I=0,N=0,k=0,F=0,G=0,X=0,re=0,te=0;const oe=o.length>3&&o[0]===239&&o[1]===187&&o[2]===191;for(let fe=0;fe<h&&(y||x||E);fe++){const le=o[fe]&255;E&&(d>0?(le&128)===0?E=!1:d--:(le&128)!==0&&((le&64)===0?E=!1:(d++,(le&32)===0?v++:(d++,(le&16)===0?A++:(d++,(le&8)===0?I++:E=!1))))),y&&(le>127&&le<160?y=!1:le>159&&(le<192||le===215||le===247)&&te++),x&&(N>0?le<64||le===127||le>252?x=!1:N--:le===128||le===160||le>239?x=!1:le>160&&le<224?(k++,G=0,F++,F>X&&(X=F)):le>127?(N++,F=0,G++,G>re&&(re=G)):(F=0,G=0))}return E&&d>0&&(E=!1),x&&N>0&&(x=!1),E&&(oe||v+A+I>0)?Q.UTF8:x&&(Q.ASSUME_SHIFT_JIS||X>=3||re>=3)?Q.SHIFT_JIS:y&&x?X===2&&k===2||te*10>=h?Q.SHIFT_JIS:Q.ISO88591:y?Q.ISO88591:x?Q.SHIFT_JIS:E?Q.UTF8:Q.PLATFORM_DEFAULT_ENCODING}static format(o,...c){let h=-1;function y(E,d,v,A,I,N){if(E==="%%")return"%";if(c[++h]===void 0)return;E=A?parseInt(A.substr(1)):void 0;let k=I?parseInt(I.substr(1)):void 0,F;switch(N){case"s":F=c[h];break;case"c":F=c[h][0];break;case"f":F=parseFloat(c[h]).toFixed(E);break;case"p":F=parseFloat(c[h]).toPrecision(E);break;case"e":F=parseFloat(c[h]).toExponential(E);break;case"x":F=parseInt(c[h]).toString(k||16);break;case"d":F=parseFloat(parseInt(c[h],k||10).toPrecision(E)).toFixed(0);break}F=typeof F=="object"?JSON.stringify(F):(+F).toString(k);let G=parseInt(v),X=v&&v[0]+""=="0"?"0":" ";for(;F.length<G;)F=d!==void 0?F+X:X+F;return F}let x=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(x,y)}static getBytes(o,c){return ie.encode(o,c)}static getCharCode(o,c=0){return o.charCodeAt(c)}static getCharAt(o){return String.fromCharCode(o)}}Q.SHIFT_JIS=U.SJIS.getName(),Q.GB2312="GB2312",Q.ISO88591=U.ISO8859_1.getName(),Q.EUC_JP="EUC_JP",Q.UTF8=U.UTF8.getName(),Q.PLATFORM_DEFAULT_ENCODING=Q.UTF8,Q.ASSUME_SHIFT_JIS=!1;class ne{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return typeof o=="string"?this.value+=o.toString():this.encoding?this.value+=Q.castAsNonUtf8Char(o,this.encoding):this.value+=String.fromCharCode(o),this}appendChars(o,c,h){for(let y=c;c<c+h;y++)this.append(o[y]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,c){this.value=this.value.substr(0,o)+c+this.value.substr(o+1)}substring(o,c){return this.value.substring(o,c)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,c){this.value=this.value.substr(0,o)+c+this.value.substr(o+c.length)}}class be{constructor(o,c,h,y){if(this.width=o,this.height=c,this.rowSize=h,this.bits=y,c==null&&(c=o),this.height=c,o<1||c<1)throw new _("Both dimensions must be greater than 0");h==null&&(h=Math.floor((o+31)/32)),this.rowSize=h,y==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){const c=o.length,h=o[0].length,y=new be(h,c);for(let x=0;x<c;x++){const E=o[x];for(let d=0;d<h;d++)E[d]&&y.set(d,x)}return y}static parseFromString(o,c,h){if(o===null)throw new _("stringRepresentation cannot be null");const y=new Array(o.length);let x=0,E=0,d=-1,v=0,A=0;for(;A<o.length;)if(o.charAt(A)===`
`||o.charAt(A)==="\r"){if(x>E){if(d===-1)d=x-E;else if(x-E!==d)throw new _("row lengths do not match");E=x,v++}A++}else if(o.substring(A,A+c.length)===c)A+=c.length,y[x]=!0,x++;else if(o.substring(A,A+h.length)===h)A+=h.length,y[x]=!1,x++;else throw new _("illegal character encountered: "+o.substring(A));if(x>E){if(d===-1)d=x-E;else if(x-E!==d)throw new _("row lengths do not match");v++}const I=new be(d,v);for(let N=0;N<x;N++)y[N]&&I.set(Math.floor(N%d),Math.floor(N/d));return I}get(o,c){const h=c*this.rowSize+Math.floor(o/32);return(this.bits[h]>>>(o&31)&1)!==0}set(o,c){const h=c*this.rowSize+Math.floor(o/32);this.bits[h]|=1<<(o&31)&4294967295}unset(o,c){const h=c*this.rowSize+Math.floor(o/32);this.bits[h]&=~(1<<(o&31)&4294967295)}flip(o,c){const h=c*this.rowSize+Math.floor(o/32);this.bits[h]^=1<<(o&31)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new _("input matrix dimensions do not match");const c=new J(Math.floor(this.width/32)+1),h=this.rowSize,y=this.bits;for(let x=0,E=this.height;x<E;x++){const d=x*h,v=o.getRow(x,c).getBitArray();for(let A=0;A<h;A++)y[d+A]^=v[A]}}clear(){const o=this.bits,c=o.length;for(let h=0;h<c;h++)o[h]=0}setRegion(o,c,h,y){if(c<0||o<0)throw new _("Left and top must be nonnegative");if(y<1||h<1)throw new _("Height and width must be at least 1");const x=o+h,E=c+y;if(E>this.height||x>this.width)throw new _("The region must fit inside the matrix");const d=this.rowSize,v=this.bits;for(let A=c;A<E;A++){const I=A*d;for(let N=o;N<x;N++)v[I+Math.floor(N/32)]|=1<<(N&31)&4294967295}}getRow(o,c){c==null||c.getSize()<this.width?c=new J(this.width):c.clear();const h=this.rowSize,y=this.bits,x=o*h;for(let E=0;E<h;E++)c.setBulk(E*32,y[x+E]);return c}setRow(o,c){M.arraycopy(c.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){const o=this.getWidth(),c=this.getHeight();let h=new J(o),y=new J(o);for(let x=0,E=Math.floor((c+1)/2);x<E;x++)h=this.getRow(x,h),y=this.getRow(c-1-x,y),h.reverse(),y.reverse(),this.setRow(x,y),this.setRow(c-1-x,h)}getEnclosingRectangle(){const o=this.width,c=this.height,h=this.rowSize,y=this.bits;let x=o,E=c,d=-1,v=-1;for(let A=0;A<c;A++)for(let I=0;I<h;I++){const N=y[A*h+I];if(N!==0){if(A<E&&(E=A),A>v&&(v=A),I*32<x){let k=0;for(;(N<<31-k&4294967295)===0;)k++;I*32+k<x&&(x=I*32+k)}if(I*32+31>d){let k=31;for(;!(N>>>k);)k--;I*32+k>d&&(d=I*32+k)}}}return d<x||v<E?null:Int32Array.from([x,E,d-x+1,v-E+1])}getTopLeftOnBit(){const o=this.rowSize,c=this.bits;let h=0;for(;h<c.length&&c[h]===0;)h++;if(h===c.length)return null;const y=h/o;let x=h%o*32;const E=c[h];let d=0;for(;(E<<31-d&4294967295)===0;)d++;return x+=d,Int32Array.from([x,y])}getBottomRightOnBit(){const o=this.rowSize,c=this.bits;let h=c.length-1;for(;h>=0&&c[h]===0;)h--;if(h<0)return null;const y=Math.floor(h/o);let x=Math.floor(h%o)*32;const E=c[h];let d=31;for(;!(E>>>d);)d--;return x+=d,Int32Array.from([x,y])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){if(!(o instanceof be))return!1;const c=o;return this.width===c.width&&this.height===c.height&&this.rowSize===c.rowSize&&$.equals(this.bits,c.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+$.hashCode(this.bits),o}toString(o="X ",c="  ",h=`
`){return this.buildToString(o,c,h)}buildToString(o,c,h){let y=new ne;for(let x=0,E=this.height;x<E;x++){for(let d=0,v=this.width;d<v;d++)y.append(this.get(d,x)?o:c);y.append(h)}return y.toString()}clone(){return new be(this.width,this.height,this.rowSize,this.bits.slice())}}class he extends p{static getNotFoundInstance(){return new he}}he.kind="NotFoundException";class ye extends j{constructor(o){super(o),this.luminances=ye.EMPTY,this.buckets=new Int32Array(ye.LUMINANCE_BUCKETS)}getBlackRow(o,c){const h=this.getLuminanceSource(),y=h.getWidth();c==null||c.getSize()<y?c=new J(y):c.clear(),this.initArrays(y);const x=h.getRow(o,this.luminances),E=this.buckets;for(let v=0;v<y;v++)E[(x[v]&255)>>ye.LUMINANCE_SHIFT]++;const d=ye.estimateBlackPoint(E);if(y<3)for(let v=0;v<y;v++)(x[v]&255)<d&&c.set(v);else{let v=x[0]&255,A=x[1]&255;for(let I=1;I<y-1;I++){const N=x[I+1]&255;(A*4-v-N)/2<d&&c.set(I),v=A,A=N}}return c}getBlackMatrix(){const o=this.getLuminanceSource(),c=o.getWidth(),h=o.getHeight(),y=new be(c,h);this.initArrays(c);const x=this.buckets;for(let v=1;v<5;v++){const A=Math.floor(h*v/5),I=o.getRow(A,this.luminances),N=Math.floor(c*4/5);for(let k=Math.floor(c/5);k<N;k++){const F=I[k]&255;x[F>>ye.LUMINANCE_SHIFT]++}}const E=ye.estimateBlackPoint(x),d=o.getMatrix();for(let v=0;v<h;v++){const A=v*c;for(let I=0;I<c;I++)(d[A+I]&255)<E&&y.set(I,v)}return y}createBinarizer(o){return new ye(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));const c=this.buckets;for(let h=0;h<ye.LUMINANCE_BUCKETS;h++)c[h]=0}static estimateBlackPoint(o){const c=o.length;let h=0,y=0,x=0;for(let I=0;I<c;I++)o[I]>x&&(y=I,x=o[I]),o[I]>h&&(h=o[I]);let E=0,d=0;for(let I=0;I<c;I++){const N=I-y,k=o[I]*N*N;k>d&&(E=I,d=k)}if(y>E){const I=y;y=E,E=I}if(E-y<=c/16)throw new he;let v=E-1,A=-1;for(let I=E-1;I>y;I--){const N=I-y,k=N*N*(E-I)*(h-o[I]);k>A&&(v=I,A=k)}return v<<ye.LUMINANCE_SHIFT}}ye.LUMINANCE_BITS=5,ye.LUMINANCE_SHIFT=8-ye.LUMINANCE_BITS,ye.LUMINANCE_BUCKETS=1<<ye.LUMINANCE_BITS,ye.EMPTY=Uint8ClampedArray.from([0]);class we extends ye{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const o=this.getLuminanceSource(),c=o.getWidth(),h=o.getHeight();if(c>=we.MINIMUM_DIMENSION&&h>=we.MINIMUM_DIMENSION){const y=o.getMatrix();let x=c>>we.BLOCK_SIZE_POWER;(c&we.BLOCK_SIZE_MASK)!==0&&x++;let E=h>>we.BLOCK_SIZE_POWER;(h&we.BLOCK_SIZE_MASK)!==0&&E++;const d=we.calculateBlackPoints(y,x,E,c,h),v=new be(c,h);we.calculateThresholdForBlock(y,x,E,c,h,d,v),this.matrix=v}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new we(o)}static calculateThresholdForBlock(o,c,h,y,x,E,d){const v=x-we.BLOCK_SIZE,A=y-we.BLOCK_SIZE;for(let I=0;I<h;I++){let N=I<<we.BLOCK_SIZE_POWER;N>v&&(N=v);const k=we.cap(I,2,h-3);for(let F=0;F<c;F++){let G=F<<we.BLOCK_SIZE_POWER;G>A&&(G=A);const X=we.cap(F,2,c-3);let re=0;for(let oe=-2;oe<=2;oe++){const fe=E[k+oe];re+=fe[X-2]+fe[X-1]+fe[X]+fe[X+1]+fe[X+2]}const te=re/25;we.thresholdBlock(o,G,N,te,y,d)}}}static cap(o,c,h){return o<c?c:o>h?h:o}static thresholdBlock(o,c,h,y,x,E){for(let d=0,v=h*x+c;d<we.BLOCK_SIZE;d++,v+=x)for(let A=0;A<we.BLOCK_SIZE;A++)(o[v+A]&255)<=y&&E.set(c+A,h+d)}static calculateBlackPoints(o,c,h,y,x){const E=x-we.BLOCK_SIZE,d=y-we.BLOCK_SIZE,v=new Array(h);for(let A=0;A<h;A++){v[A]=new Int32Array(c);let I=A<<we.BLOCK_SIZE_POWER;I>E&&(I=E);for(let N=0;N<c;N++){let k=N<<we.BLOCK_SIZE_POWER;k>d&&(k=d);let F=0,G=255,X=0;for(let te=0,oe=I*y+k;te<we.BLOCK_SIZE;te++,oe+=y){for(let fe=0;fe<we.BLOCK_SIZE;fe++){const le=o[oe+fe]&255;F+=le,le<G&&(G=le),le>X&&(X=le)}if(X-G>we.MIN_DYNAMIC_RANGE)for(te++,oe+=y;te<we.BLOCK_SIZE;te++,oe+=y)for(let fe=0;fe<we.BLOCK_SIZE;fe++)F+=o[oe+fe]&255}let re=F>>we.BLOCK_SIZE_POWER*2;if(X-G<=we.MIN_DYNAMIC_RANGE&&(re=G/2,A>0&&N>0)){const te=(v[A-1][N]+2*v[A][N-1]+v[A-1][N-1])/4;G<te&&(re=te)}v[A][N]=re}}return v}}we.BLOCK_SIZE_POWER=3,we.BLOCK_SIZE=1<<we.BLOCK_SIZE_POWER,we.BLOCK_SIZE_MASK=we.BLOCK_SIZE-1,we.MINIMUM_DIMENSION=we.BLOCK_SIZE*5,we.MIN_DYNAMIC_RANGE=24;class $e{constructor(o,c){this.width=o,this.height=c}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,c,h,y){throw new ae("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ae("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ae("This luminance source does not support rotation by 45 degrees.")}toString(){const o=new Uint8ClampedArray(this.width);let c=new ne;for(let h=0;h<this.height;h++){const y=this.getRow(h,o);for(let x=0;x<this.width;x++){const E=y[x]&255;let d;E<64?d="#":E<128?d="+":E<192?d=".":d=" ",c.append(d)}c.append(`
`)}return c.toString()}}class et extends $e{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,c){const h=this.delegate.getRow(o,c),y=this.getWidth();for(let x=0;x<y;x++)h[x]=255-(h[x]&255);return h}getMatrix(){const o=this.delegate.getMatrix(),c=this.getWidth()*this.getHeight(),h=new Uint8ClampedArray(c);for(let y=0;y<c;y++)h[y]=255-(o[y]&255);return h}isCropSupported(){return this.delegate.isCropSupported()}crop(o,c,h,y){return new et(this.delegate.crop(o,c,h,y))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new et(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new et(this.delegate.rotateCounterClockwise45())}}class rt extends $e{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=rt.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){const c=o.getContext("2d").getImageData(0,0,o.width,o.height);return rt.toGrayscaleBuffer(c.data,o.width,o.height)}static toGrayscaleBuffer(o,c,h){const y=new Uint8ClampedArray(c*h);for(let x=0,E=0,d=o.length;x<d;x+=4,E++){let v;if(o[x+3]===0)v=255;else{const I=o[x],N=o[x+1],k=o[x+2];v=306*I+601*N+117*k+512>>10}y[E]=v}return y}getRow(o,c){if(o<0||o>=this.getHeight())throw new _("Requested row is outside the image: "+o);const h=this.getWidth(),y=o*h;return c===null?c=this.buffer.slice(y,y+h):(c.length<h&&(c=new Uint8ClampedArray(h)),c.set(this.buffer.slice(y,y+h))),c}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,c,h,y){return super.crop(o,c,h,y),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){const c=this.getTempCanvasElement(),h=c.getContext("2d"),y=o*rt.DEGREE_TO_RADIANS,x=this.canvas.width,E=this.canvas.height,d=Math.ceil(Math.abs(Math.cos(y))*x+Math.abs(Math.sin(y))*E),v=Math.ceil(Math.abs(Math.sin(y))*x+Math.abs(Math.cos(y))*E);return c.width=d,c.height=v,h.translate(d/2,v/2),h.rotate(y),h.drawImage(this.canvas,x/-2,E/-2),this.buffer=rt.makeBufferFromCanvasImageData(c),this}invert(){return new et(this)}}rt.DEGREE_TO_RADIANS=Math.PI/180;class de{constructor(o,c,h){this.deviceId=o,this.label=c,this.kind="videoinput",this.groupId=h||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ee=(globalThis||Ug||self||window||void 0)&&(globalThis||Ug||self||window||void 0).__awaiter||function(Y,o,c,h){function y(x){return x instanceof c?x:new c(function(E){E(x)})}return new(c||(c=Promise))(function(x,E){function d(I){try{A(h.next(I))}catch(N){E(N)}}function v(I){try{A(h.throw(I))}catch(N){E(N)}}function A(I){I.done?x(I.value):y(I.value).then(d,v)}A((h=h.apply(Y,o||[])).next())})};class Xe{constructor(o,c=500,h){this.reader=o,this.timeBetweenScansMillis=c,this._hints=h,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return Ee(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const o=yield navigator.mediaDevices.enumerateDevices(),c=[];for(const h of o){const y=h.kind==="video"?"videoinput":h.kind;if(y!=="videoinput")continue;const x=h.deviceId||h.id,E=h.label||`Video device ${c.length+1}`,d=h.groupId,v={deviceId:x,label:E,kind:y,groupId:d};c.push(v)}return c})}getVideoInputDevices(){return Ee(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(c=>new de(c.deviceId,c.label))})}findDeviceById(o){return Ee(this,void 0,void 0,function*(){const c=yield this.listVideoInputDevices();return c?c.find(h=>h.deviceId===o):null})}decodeFromInputVideoDevice(o,c){return Ee(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,c)})}decodeOnceFromVideoDevice(o,c){return Ee(this,void 0,void 0,function*(){this.reset();let h;o?h={deviceId:{exact:o}}:h={facingMode:"environment"};const y={video:h};return yield this.decodeOnceFromConstraints(y,c)})}decodeOnceFromConstraints(o,c){return Ee(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(h,c)})}decodeOnceFromStream(o,c){return Ee(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(o,c);return yield this.decodeOnce(h)})}decodeFromInputVideoDeviceContinuously(o,c,h){return Ee(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,c,h)})}decodeFromVideoDevice(o,c,h){return Ee(this,void 0,void 0,function*(){let y;o?y={deviceId:{exact:o}}:y={facingMode:"environment"};const x={video:y};return yield this.decodeFromConstraints(x,c,h)})}decodeFromConstraints(o,c,h){return Ee(this,void 0,void 0,function*(){const y=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(y,c,h)})}decodeFromStream(o,c,h){return Ee(this,void 0,void 0,function*(){this.reset();const y=yield this.attachStreamToVideo(o,c);return yield this.decodeContinuously(y,h)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,c){return Ee(this,void 0,void 0,function*(){const h=this.prepareVideoElement(c);return this.addVideoSource(h,o),this.videoElement=h,this.stream=o,yield this.playVideoOnLoadAsync(h),h})}playVideoOnLoadAsync(o){return new Promise((c,h)=>this.playVideoOnLoad(o,()=>c()))}playVideoOnLoad(o,c){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",c),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return Ee(this,void 0,void 0,function*(){if(this.isVideoPlaying(o)){console.warn("Trying to play video that is already playing.");return}try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,c){const h=document.getElementById(o);if(!h)throw new b(`element with id '${o}' not found`);if(h.nodeName.toLowerCase()!==c.toLowerCase())throw new b(`element with id '${o}' must be an ${c} element`);return h}decodeFromImage(o,c){if(!o&&!c)throw new b("either imageElement with a src set or an url must be provided");return c&&!o?this.decodeFromImageUrl(c):this.decodeFromImageElement(o)}decodeFromVideo(o,c){if(!o&&!c)throw new b("Either an element with a src set or an URL must be provided");return c&&!o?this.decodeFromVideoUrl(c):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,c,h){if(o===void 0&&c===void 0)throw new b("Either an element with a src set or an URL must be provided");return c&&!o?this.decodeFromVideoUrlContinuously(c,h):this.decodeFromVideoElementContinuously(o,h)}decodeFromImageElement(o){if(!o)throw new b("An image element must be provided.");this.reset();const c=this.prepareImageElement(o);this.imageElement=c;let h;return this.isImageLoaded(c)?h=this.decodeOnce(c,!1,!0):h=this._decodeOnLoadImage(c),h}decodeFromVideoElement(o){const c=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(c)}decodeFromVideoElementContinuously(o,c){const h=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(h,c)}_decodeFromVideoElementSetup(o){if(!o)throw new b("A video element must be provided.");this.reset();const c=this.prepareVideoElement(o);return this.videoElement=c,c}decodeFromImageUrl(o){if(!o)throw new b("An URL must be provided.");this.reset();const c=this.prepareImageElement();this.imageElement=c;const h=this._decodeOnLoadImage(c);return c.src=o,h}decodeFromVideoUrl(o){if(!o)throw new b("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),h=this.decodeFromVideoElement(c);return c.src=o,h}decodeFromVideoUrlContinuously(o,c){if(!o)throw new b("An URL must be provided.");this.reset();const h=this.prepareVideoElement(),y=this.decodeFromVideoElementContinuously(h,c);return h.src=o,y}_decodeOnLoadImage(o){return new Promise((c,h)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(c,h),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return Ee(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,c){return Ee(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,c)})}isImageLoaded(o){return!(!o.complete||o.naturalWidth===0)}prepareImageElement(o){let c;return typeof o>"u"&&(c=document.createElement("img"),c.width=200,c.height=200),typeof o=="string"&&(c=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(c=o),c}prepareVideoElement(o){let c;return!o&&typeof document<"u"&&(c=document.createElement("video"),c.width=200,c.height=200),typeof o=="string"&&(c=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(c=o),c.setAttribute("autoplay","true"),c.setAttribute("muted","true"),c.setAttribute("playsinline","true"),c}decodeOnce(o,c=!0,h=!0){this._stopAsyncDecode=!1;const y=(x,E)=>{if(this._stopAsyncDecode){E(new he("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const d=this.decode(o);x(d)}catch(d){const v=c&&d instanceof he,I=(d instanceof R||d instanceof V)&&h;if(v||I)return setTimeout(y,this._timeBetweenDecodingAttempts,x,E);E(d)}};return new Promise((x,E)=>y(x,E))}decodeContinuously(o,c){this._stopContinuousDecode=!1;const h=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const y=this.decode(o);c(y,null),setTimeout(h,this.timeBetweenScansMillis)}catch(y){c(null,y);const x=y instanceof R||y instanceof V,E=y instanceof he;(x||E)&&setTimeout(h,this._timeBetweenDecodingAttempts)}};h()}decode(o){const c=this.createBinaryBitmap(o);return this.decodeBitmap(c)}_isHTMLVideoElement(o){return o.videoWidth!==0}drawFrameOnCanvas(o,c,h){c||(c={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),h||(h=this.captureCanvasContext),h.drawImage(o,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}drawImageOnCanvas(o,c,h=this.captureCanvasContext){c||(c={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),h||(h=this.captureCanvasContext),h.drawImage(o,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}createBinaryBitmap(o){this.getCaptureCanvasContext(o),this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);const c=this.getCaptureCanvas(o),h=new rt(c),y=new we(h);return new T(y)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){const h=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=h}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){const c=this.createCaptureCanvas(o);this.captureCanvas=c}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const c=document.createElement("canvas");let h,y;return typeof o<"u"&&(o instanceof HTMLVideoElement?(h=o.videoWidth,y=o.videoHeight):o instanceof HTMLImageElement&&(h=o.naturalWidth||o.width,y=o.naturalHeight||o.height)),c.style.width=h+"px",c.style.height=y+"px",c.width=h,c.height=y,c}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,c){try{o.srcObject=c}catch{o.src=URL.createObjectURL(c)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class Ge{constructor(o,c,h=c==null?0:8*c.length,y,x,E=M.currentTimeMillis()){this.text=o,this.rawBytes=c,this.numBits=h,this.resultPoints=y,this.format=x,this.timestamp=E,this.text=o,this.rawBytes=c,h==null?this.numBits=c==null?0:8*c.length:this.numBits=h,this.resultPoints=y,this.format=x,this.resultMetadata=null,E==null?this.timestamp=M.currentTimeMillis():this.timestamp=E}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,c){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(o,c)}putAllMetadata(o){o!==null&&(this.resultMetadata===null?this.resultMetadata=o:this.resultMetadata=new Map(o))}addResultPoints(o){const c=this.resultPoints;if(c===null)this.resultPoints=o;else if(o!==null&&o.length>0){const h=new Array(c.length+o.length);M.arraycopy(c,0,h,0,c.length),M.arraycopy(o,0,h,c.length,o.length),this.resultPoints=h}}getTimestamp(){return this.timestamp}toString(){return this.text}}var vt;(function(Y){Y[Y.AZTEC=0]="AZTEC",Y[Y.CODABAR=1]="CODABAR",Y[Y.CODE_39=2]="CODE_39",Y[Y.CODE_93=3]="CODE_93",Y[Y.CODE_128=4]="CODE_128",Y[Y.DATA_MATRIX=5]="DATA_MATRIX",Y[Y.EAN_8=6]="EAN_8",Y[Y.EAN_13=7]="EAN_13",Y[Y.ITF=8]="ITF",Y[Y.MAXICODE=9]="MAXICODE",Y[Y.PDF_417=10]="PDF_417",Y[Y.QR_CODE=11]="QR_CODE",Y[Y.RSS_14=12]="RSS_14",Y[Y.RSS_EXPANDED=13]="RSS_EXPANDED",Y[Y.UPC_A=14]="UPC_A",Y[Y.UPC_E=15]="UPC_E",Y[Y.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(vt||(vt={}));var qe=vt,ze;(function(Y){Y[Y.OTHER=0]="OTHER",Y[Y.ORIENTATION=1]="ORIENTATION",Y[Y.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",Y[Y.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",Y[Y.ISSUE_NUMBER=4]="ISSUE_NUMBER",Y[Y.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",Y[Y.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",Y[Y.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",Y[Y.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",Y[Y.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",Y[Y.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ze||(ze={}));var ct=ze;class Se{constructor(o,c,h,y,x=-1,E=-1){this.rawBytes=o,this.text=c,this.byteSegments=h,this.ecLevel=y,this.structuredAppendSequenceNumber=x,this.structuredAppendParity=E,this.numBits=o==null?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Oe{exp(o){return this.expTable[o]}log(o){if(o===0)throw new _;return this.logTable[o]}static addOrSubtract(o,c){return o^c}}class ft{constructor(o,c){if(c.length===0)throw new _;this.field=o;const h=c.length;if(h>1&&c[0]===0){let y=1;for(;y<h&&c[y]===0;)y++;y===h?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(h-y),M.arraycopy(c,y,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);const c=this.coefficients;let h;if(o===1){h=0;for(let E=0,d=c.length;E!==d;E++){const v=c[E];h=Oe.addOrSubtract(h,v)}return h}h=c[0];const y=c.length,x=this.field;for(let E=1;E<y;E++)h=Oe.addOrSubtract(x.multiply(o,h),c[E]);return h}addOrSubtract(o){if(!this.field.equals(o.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let c=this.coefficients,h=o.coefficients;if(c.length>h.length){const E=c;c=h,h=E}let y=new Int32Array(h.length);const x=h.length-c.length;M.arraycopy(h,0,y,0,x);for(let E=x;E<h.length;E++)y[E]=Oe.addOrSubtract(c[E-x],h[E]);return new ft(this.field,y)}multiply(o){if(!this.field.equals(o.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();const c=this.coefficients,h=c.length,y=o.coefficients,x=y.length,E=new Int32Array(h+x-1),d=this.field;for(let v=0;v<h;v++){const A=c[v];for(let I=0;I<x;I++)E[v+I]=Oe.addOrSubtract(E[v+I],d.multiply(A,y[I]))}return new ft(d,E)}multiplyScalar(o){if(o===0)return this.field.getZero();if(o===1)return this;const c=this.coefficients.length,h=this.field,y=new Int32Array(c),x=this.coefficients;for(let E=0;E<c;E++)y[E]=h.multiply(x[E],o);return new ft(h,y)}multiplyByMonomial(o,c){if(o<0)throw new _;if(c===0)return this.field.getZero();const h=this.coefficients,y=h.length,x=new Int32Array(y+o),E=this.field;for(let d=0;d<y;d++)x[d]=E.multiply(h[d],c);return new ft(E,x)}divide(o){if(!this.field.equals(o.field))throw new _("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new _("Divide by 0");const c=this.field;let h=c.getZero(),y=this;const x=o.getCoefficient(o.getDegree()),E=c.inverse(x);for(;y.getDegree()>=o.getDegree()&&!y.isZero();){const d=y.getDegree()-o.getDegree(),v=c.multiply(y.getCoefficient(y.getDegree()),E),A=o.multiplyByMonomial(d,v),I=c.buildMonomial(d,v);h=h.addOrSubtract(I),y=y.addOrSubtract(A)}return[h,y]}toString(){let o="";for(let c=this.getDegree();c>=0;c--){let h=this.getCoefficient(c);if(h!==0){if(h<0?(o+=" - ",h=-h):o.length>0&&(o+=" + "),c===0||h!==1){const y=this.field.log(h);y===0?o+="1":y===1?o+="a":(o+="a^",o+=y)}c!==0&&(c===1?o+="x":(o+="x^",o+=c))}}return o}}class Fe extends p{}Fe.kind="ArithmeticException";class pt extends Oe{constructor(o,c,h){super(),this.primitive=o,this.size=c,this.generatorBase=h;const y=new Int32Array(c);let x=1;for(let d=0;d<c;d++)y[d]=x,x*=2,x>=c&&(x^=o,x&=c-1);this.expTable=y;const E=new Int32Array(c);for(let d=0;d<c-1;d++)E[y[d]]=d;this.logTable=E,this.zero=new ft(this,Int32Array.from([0])),this.one=new ft(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,c){if(o<0)throw new _;if(c===0)return this.zero;const h=new Int32Array(o+1);return h[0]=c,new ft(this,h)}inverse(o){if(o===0)throw new Fe;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,c){return o===0||c===0?0:this.expTable[(this.logTable[o]+this.logTable[c])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+K.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}pt.AZTEC_DATA_12=new pt(4201,4096,1),pt.AZTEC_DATA_10=new pt(1033,1024,1),pt.AZTEC_DATA_6=new pt(67,64,1),pt.AZTEC_PARAM=new pt(19,16,1),pt.QR_CODE_FIELD_256=new pt(285,256,0),pt.DATA_MATRIX_FIELD_256=new pt(301,256,1),pt.AZTEC_DATA_8=pt.DATA_MATRIX_FIELD_256,pt.MAXICODE_FIELD_64=pt.AZTEC_DATA_6;class Lt extends p{}Lt.kind="ReedSolomonException";class cn extends p{}cn.kind="IllegalStateException";class Ln{constructor(o){this.field=o}decode(o,c){const h=this.field,y=new ft(h,o),x=new Int32Array(c);let E=!0;for(let F=0;F<c;F++){const G=y.evaluateAt(h.exp(F+h.getGeneratorBase()));x[x.length-1-F]=G,G!==0&&(E=!1)}if(E)return;const d=new ft(h,x),v=this.runEuclideanAlgorithm(h.buildMonomial(c,1),d,c),A=v[0],I=v[1],N=this.findErrorLocations(A),k=this.findErrorMagnitudes(I,N);for(let F=0;F<N.length;F++){const G=o.length-1-h.log(N[F]);if(G<0)throw new Lt("Bad error location");o[G]=pt.addOrSubtract(o[G],k[F])}}runEuclideanAlgorithm(o,c,h){if(o.getDegree()<c.getDegree()){const F=o;o=c,c=F}const y=this.field;let x=o,E=c,d=y.getZero(),v=y.getOne();for(;E.getDegree()>=(h/2|0);){let F=x,G=d;if(x=E,d=v,x.isZero())throw new Lt("r_{i-1} was zero");E=F;let X=y.getZero();const re=x.getCoefficient(x.getDegree()),te=y.inverse(re);for(;E.getDegree()>=x.getDegree()&&!E.isZero();){const oe=E.getDegree()-x.getDegree(),fe=y.multiply(E.getCoefficient(E.getDegree()),te);X=X.addOrSubtract(y.buildMonomial(oe,fe)),E=E.addOrSubtract(x.multiplyByMonomial(oe,fe))}if(v=X.multiply(d).addOrSubtract(G),E.getDegree()>=x.getDegree())throw new cn("Division algorithm failed to reduce polynomial?")}const A=v.getCoefficient(0);if(A===0)throw new Lt("sigmaTilde(0) was zero");const I=y.inverse(A),N=v.multiplyScalar(I),k=E.multiplyScalar(I);return[N,k]}findErrorLocations(o){const c=o.getDegree();if(c===1)return Int32Array.from([o.getCoefficient(1)]);const h=new Int32Array(c);let y=0;const x=this.field;for(let E=1;E<x.getSize()&&y<c;E++)o.evaluateAt(E)===0&&(h[y]=x.inverse(E),y++);if(y!==c)throw new Lt("Error locator degree does not match number of roots");return h}findErrorMagnitudes(o,c){const h=c.length,y=new Int32Array(h),x=this.field;for(let E=0;E<h;E++){const d=x.inverse(c[E]);let v=1;for(let A=0;A<h;A++)if(E!==A){const I=x.multiply(c[A],d),N=(I&1)===0?I|1:I&-2;v=x.multiply(v,N)}y[E]=x.multiply(o.evaluateAt(d),x.inverse(v)),x.getGeneratorBase()!==0&&(y[E]=x.multiply(y[E],d))}return y}}var ot;(function(Y){Y[Y.UPPER=0]="UPPER",Y[Y.LOWER=1]="LOWER",Y[Y.MIXED=2]="MIXED",Y[Y.DIGIT=3]="DIGIT",Y[Y.PUNCT=4]="PUNCT",Y[Y.BINARY=5]="BINARY"})(ot||(ot={}));class Vt{decode(o){this.ddata=o;let c=o.getBits(),h=this.extractBits(c),y=this.correctBits(h),x=Vt.convertBoolArrayToByteArray(y),E=Vt.getEncodedData(y),d=new Se(x,E,null,null);return d.setNumBits(y.length),d}static highLevelDecode(o){return this.getEncodedData(o)}static getEncodedData(o){let c=o.length,h=ot.UPPER,y=ot.UPPER,x="",E=0;for(;E<c;)if(y===ot.BINARY){if(c-E<5)break;let d=Vt.readCode(o,E,5);if(E+=5,d===0){if(c-E<11)break;d=Vt.readCode(o,E,11)+31,E+=11}for(let v=0;v<d;v++){if(c-E<8){E=c;break}const A=Vt.readCode(o,E,8);x+=Q.castAsNonUtf8Char(A),E+=8}y=h}else{let d=y===ot.DIGIT?4:5;if(c-E<d)break;let v=Vt.readCode(o,E,d);E+=d;let A=Vt.getCharacter(y,v);A.startsWith("CTRL_")?(h=y,y=Vt.getTable(A.charAt(5)),A.charAt(6)==="L"&&(h=y)):(x+=A,y=h)}return x}static getTable(o){switch(o){case"L":return ot.LOWER;case"P":return ot.PUNCT;case"M":return ot.MIXED;case"D":return ot.DIGIT;case"B":return ot.BINARY;default:return ot.UPPER}}static getCharacter(o,c){switch(o){case ot.UPPER:return Vt.UPPER_TABLE[c];case ot.LOWER:return Vt.LOWER_TABLE[c];case ot.MIXED:return Vt.MIXED_TABLE[c];case ot.PUNCT:return Vt.PUNCT_TABLE[c];case ot.DIGIT:return Vt.DIGIT_TABLE[c];default:throw new cn("Bad table")}}correctBits(o){let c,h;this.ddata.getNbLayers()<=2?(h=6,c=pt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(h=8,c=pt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(h=10,c=pt.AZTEC_DATA_10):(h=12,c=pt.AZTEC_DATA_12);let y=this.ddata.getNbDatablocks(),x=o.length/h;if(x<y)throw new V;let E=o.length%h,d=new Int32Array(x);for(let k=0;k<x;k++,E+=h)d[k]=Vt.readCode(o,E,h);try{new Ln(c).decode(d,x-y)}catch(k){throw new V(k)}let v=(1<<h)-1,A=0;for(let k=0;k<y;k++){let F=d[k];if(F===0||F===v)throw new V;(F===1||F===v-1)&&A++}let I=new Array(y*h-A),N=0;for(let k=0;k<y;k++){let F=d[k];if(F===1||F===v-1)I.fill(F>1,N,N+h-1),N+=h-1;else for(let G=h-1;G>=0;--G)I[N++]=(F&1<<G)!==0}return I}extractBits(o){let c=this.ddata.isCompact(),h=this.ddata.getNbLayers(),y=(c?11:14)+h*4,x=new Int32Array(y),E=new Array(this.totalBitsInLayer(h,c));if(c)for(let d=0;d<x.length;d++)x[d]=d;else{let d=y+1+2*K.truncDivision(K.truncDivision(y,2)-1,15),v=y/2,A=K.truncDivision(d,2);for(let I=0;I<v;I++){let N=I+K.truncDivision(I,15);x[v-I-1]=A-N-1,x[v+I]=A+N+1}}for(let d=0,v=0;d<h;d++){let A=(h-d)*4+(c?9:12),I=d*2,N=y-1-I;for(let k=0;k<A;k++){let F=k*2;for(let G=0;G<2;G++)E[v+F+G]=o.get(x[I+G],x[I+k]),E[v+2*A+F+G]=o.get(x[I+k],x[N-G]),E[v+4*A+F+G]=o.get(x[N-G],x[N-k]),E[v+6*A+F+G]=o.get(x[N-k],x[I+G])}v+=A*8}return E}static readCode(o,c,h){let y=0;for(let x=c;x<c+h;x++)y<<=1,o[x]&&(y|=1);return y}static readByte(o,c){let h=o.length-c;return h>=8?Vt.readCode(o,c,8):Vt.readCode(o,c,h)<<8-h}static convertBoolArrayToByteArray(o){let c=new Uint8Array((o.length+7)/8);for(let h=0;h<c.length;h++)c[h]=Vt.readByte(o,8*h);return c}totalBitsInLayer(o,c){return((c?88:112)+16*o)*o}}Vt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Vt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Vt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Vt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Vt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class xt{constructor(){}static round(o){return o===NaN?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,c,h,y){const x=o-h,E=c-y;return Math.sqrt(x*x+E*E)}static sum(o){let c=0;for(let h=0,y=o.length;h!==y;h++){const x=o[h];c+=x}return c}}class $t{static floatToIntBits(o){return o}}$t.MAX_VALUE=Number.MAX_SAFE_INTEGER;class it{constructor(o,c){this.x=o,this.y=c}getX(){return this.x}getY(){return this.y}equals(o){if(o instanceof it){const c=o;return this.x===c.x&&this.y===c.y}return!1}hashCode(){return 31*$t.floatToIntBits(this.x)+$t.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){const c=this.distance(o[0],o[1]),h=this.distance(o[1],o[2]),y=this.distance(o[0],o[2]);let x,E,d;if(h>=c&&h>=y?(E=o[0],x=o[1],d=o[2]):y>=h&&y>=c?(E=o[1],x=o[0],d=o[2]):(E=o[2],x=o[0],d=o[1]),this.crossProductZ(x,E,d)<0){const v=x;x=d,d=v}o[0]=x,o[1]=E,o[2]=d}static distance(o,c){return xt.distance(o.x,o.y,c.x,c.y)}static crossProductZ(o,c,h){const y=c.x,x=c.y;return(h.x-y)*(o.y-x)-(h.y-x)*(o.x-y)}}class na{constructor(o,c){this.bits=o,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class zs extends na{constructor(o,c,h,y,x){super(o,c),this.compact=h,this.nbDatablocks=y,this.nbLayers=x}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class hr{constructor(o,c,h,y){this.image=o,this.height=o.getHeight(),this.width=o.getWidth(),c==null&&(c=hr.INIT_SIZE),h==null&&(h=o.getWidth()/2|0),y==null&&(y=o.getHeight()/2|0);const x=c/2|0;if(this.leftInit=h-x,this.rightInit=h+x,this.upInit=y-x,this.downInit=y+x,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new he}detect(){let o=this.leftInit,c=this.rightInit,h=this.upInit,y=this.downInit,x=!1,E=!0,d=!1,v=!1,A=!1,I=!1,N=!1;const k=this.width,F=this.height;for(;E;){E=!1;let G=!0;for(;(G||!v)&&c<k;)G=this.containsBlackPoint(h,y,c,!1),G?(c++,E=!0,v=!0):v||c++;if(c>=k){x=!0;break}let X=!0;for(;(X||!A)&&y<F;)X=this.containsBlackPoint(o,c,y,!0),X?(y++,E=!0,A=!0):A||y++;if(y>=F){x=!0;break}let re=!0;for(;(re||!I)&&o>=0;)re=this.containsBlackPoint(h,y,o,!1),re?(o--,E=!0,I=!0):I||o--;if(o<0){x=!0;break}let te=!0;for(;(te||!N)&&h>=0;)te=this.containsBlackPoint(o,c,h,!0),te?(h--,E=!0,N=!0):N||h--;if(h<0){x=!0;break}E&&(d=!0)}if(!x&&d){const G=c-o;let X=null;for(let fe=1;X===null&&fe<G;fe++)X=this.getBlackPointOnSegment(o,y-fe,o+fe,y);if(X==null)throw new he;let re=null;for(let fe=1;re===null&&fe<G;fe++)re=this.getBlackPointOnSegment(o,h+fe,o+fe,h);if(re==null)throw new he;let te=null;for(let fe=1;te===null&&fe<G;fe++)te=this.getBlackPointOnSegment(c,h+fe,c-fe,h);if(te==null)throw new he;let oe=null;for(let fe=1;oe===null&&fe<G;fe++)oe=this.getBlackPointOnSegment(c,y-fe,c-fe,y);if(oe==null)throw new he;return this.centerEdges(oe,X,te,re)}else throw new he}getBlackPointOnSegment(o,c,h,y){const x=xt.round(xt.distance(o,c,h,y)),E=(h-o)/x,d=(y-c)/x,v=this.image;for(let A=0;A<x;A++){const I=xt.round(o+A*E),N=xt.round(c+A*d);if(v.get(I,N))return new it(I,N)}return null}centerEdges(o,c,h,y){const x=o.getX(),E=o.getY(),d=c.getX(),v=c.getY(),A=h.getX(),I=h.getY(),N=y.getX(),k=y.getY(),F=hr.CORR;return x<this.width/2?[new it(N-F,k+F),new it(d+F,v+F),new it(A-F,I-F),new it(x+F,E-F)]:[new it(N+F,k+F),new it(d+F,v-F),new it(A-F,I+F),new it(x-F,E-F)]}containsBlackPoint(o,c,h,y){const x=this.image;if(y){for(let E=o;E<=c;E++)if(x.get(E,h))return!0}else for(let E=o;E<=c;E++)if(x.get(h,E))return!0;return!1}}hr.INIT_SIZE=10,hr.CORR=1;class ba{static checkAndNudgePoints(o,c){const h=o.getWidth(),y=o.getHeight();let x=!0;for(let E=0;E<c.length&&x;E+=2){const d=Math.floor(c[E]),v=Math.floor(c[E+1]);if(d<-1||d>h||v<-1||v>y)throw new he;x=!1,d===-1?(c[E]=0,x=!0):d===h&&(c[E]=h-1,x=!0),v===-1?(c[E+1]=0,x=!0):v===y&&(c[E+1]=y-1,x=!0)}x=!0;for(let E=c.length-2;E>=0&&x;E-=2){const d=Math.floor(c[E]),v=Math.floor(c[E+1]);if(d<-1||d>h||v<-1||v>y)throw new he;x=!1,d===-1?(c[E]=0,x=!0):d===h&&(c[E]=h-1,x=!0),v===-1?(c[E+1]=0,x=!0):v===y&&(c[E+1]=y-1,x=!0)}}}class $n{constructor(o,c,h,y,x,E,d,v,A){this.a11=o,this.a21=c,this.a31=h,this.a12=y,this.a22=x,this.a32=E,this.a13=d,this.a23=v,this.a33=A}static quadrilateralToQuadrilateral(o,c,h,y,x,E,d,v,A,I,N,k,F,G,X,re){const te=$n.quadrilateralToSquare(o,c,h,y,x,E,d,v);return $n.squareToQuadrilateral(A,I,N,k,F,G,X,re).times(te)}transformPoints(o){const c=o.length,h=this.a11,y=this.a12,x=this.a13,E=this.a21,d=this.a22,v=this.a23,A=this.a31,I=this.a32,N=this.a33;for(let k=0;k<c;k+=2){const F=o[k],G=o[k+1],X=x*F+v*G+N;o[k]=(h*F+E*G+A)/X,o[k+1]=(y*F+d*G+I)/X}}transformPointsWithValues(o,c){const h=this.a11,y=this.a12,x=this.a13,E=this.a21,d=this.a22,v=this.a23,A=this.a31,I=this.a32,N=this.a33,k=o.length;for(let F=0;F<k;F++){const G=o[F],X=c[F],re=x*G+v*X+N;o[F]=(h*G+E*X+A)/re,c[F]=(y*G+d*X+I)/re}}static squareToQuadrilateral(o,c,h,y,x,E,d,v){const A=o-h+x-d,I=c-y+E-v;if(A===0&&I===0)return new $n(h-o,x-h,o,y-c,E-y,c,0,0,1);{const N=h-x,k=d-x,F=y-E,G=v-E,X=N*G-k*F,re=(A*G-k*I)/X,te=(N*I-A*F)/X;return new $n(h-o+re*h,d-o+te*d,o,y-c+re*y,v-c+te*v,c,re,te,1)}}static quadrilateralToSquare(o,c,h,y,x,E,d,v){return $n.squareToQuadrilateral(o,c,h,y,x,E,d,v).buildAdjoint()}buildAdjoint(){return new $n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new $n(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class Fa extends ba{sampleGrid(o,c,h,y,x,E,d,v,A,I,N,k,F,G,X,re,te,oe,fe){const le=$n.quadrilateralToQuadrilateral(y,x,E,d,v,A,I,N,k,F,G,X,re,te,oe,fe);return this.sampleGridWithTransform(o,c,h,le)}sampleGridWithTransform(o,c,h,y){if(c<=0||h<=0)throw new he;const x=new be(c,h),E=new Float32Array(2*c);for(let d=0;d<h;d++){const v=E.length,A=d+.5;for(let I=0;I<v;I+=2)E[I]=I/2+.5,E[I+1]=A;y.transformPoints(E),ba.checkAndNudgePoints(o,E);try{for(let I=0;I<v;I+=2)o.get(Math.floor(E[I]),Math.floor(E[I+1]))&&x.set(I/2,d)}catch{throw new he}}return x}}class bi{static setGridSampler(o){bi.gridSampler=o}static getInstance(){return bi.gridSampler}}bi.gridSampler=new Fa;class Lr{constructor(o,c){this.x=o,this.y=c}toResultPoint(){return new it(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Po{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let c=this.getMatrixCenter(),h=this.getBullsEyeCorners(c);if(o){let E=h[0];h[0]=h[2],h[2]=E}this.extractParameters(h);let y=this.sampleGrid(this.image,h[this.shift%4],h[(this.shift+1)%4],h[(this.shift+2)%4],h[(this.shift+3)%4]),x=this.getMatrixCornerPoints(h);return new zs(y,x,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!this.isValidPoint(o[0])||!this.isValidPoint(o[1])||!this.isValidPoint(o[2])||!this.isValidPoint(o[3]))throw new he;let c=2*this.nbCenterLayers,h=new Int32Array([this.sampleLine(o[0],o[1],c),this.sampleLine(o[1],o[2],c),this.sampleLine(o[2],o[3],c),this.sampleLine(o[3],o[0],c)]);this.shift=this.getRotation(h,c);let y=0;for(let E=0;E<4;E++){let d=h[(this.shift+E)%4];this.compact?(y<<=7,y+=d>>1&127):(y<<=10,y+=(d>>2&992)+(d>>1&31))}let x=this.getCorrectedParameterData(y,this.compact);this.compact?(this.nbLayers=(x>>6)+1,this.nbDataBlocks=(x&63)+1):(this.nbLayers=(x>>11)+1,this.nbDataBlocks=(x&2047)+1)}getRotation(o,c){let h=0;o.forEach((y,x,E)=>{let d=(y>>c-2<<1)+(y&1);h=(h<<3)+d}),h=((h&1)<<11)+(h>>1);for(let y=0;y<4;y++)if(K.bitCount(h^this.EXPECTED_CORNER_BITS[y])<=2)return y;throw new he}getCorrectedParameterData(o,c){let h,y;c?(h=7,y=2):(h=10,y=4);let x=h-y,E=new Int32Array(h);for(let v=h-1;v>=0;--v)E[v]=o&15,o>>=4;try{new Ln(pt.AZTEC_PARAM).decode(E,x)}catch{throw new he}let d=0;for(let v=0;v<y;v++)d=(d<<4)+E[v];return d}getBullsEyeCorners(o){let c=o,h=o,y=o,x=o,E=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let N=this.getFirstDifferent(c,E,1,-1),k=this.getFirstDifferent(h,E,1,1),F=this.getFirstDifferent(y,E,-1,1),G=this.getFirstDifferent(x,E,-1,-1);if(this.nbCenterLayers>2){let X=this.distancePoint(G,N)*this.nbCenterLayers/(this.distancePoint(x,c)*(this.nbCenterLayers+2));if(X<.75||X>1.25||!this.isWhiteOrBlackRectangle(N,k,F,G))break}c=N,h=k,y=F,x=G,E=!E}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new he;this.compact=this.nbCenterLayers===5;let d=new it(c.getX()+.5,c.getY()-.5),v=new it(h.getX()+.5,h.getY()+.5),A=new it(y.getX()-.5,y.getY()+.5),I=new it(x.getX()-.5,x.getY()-.5);return this.expandSquare([d,v,A,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,c,h,y;try{let d=new hr(this.image).detect();o=d[0],c=d[1],h=d[2],y=d[3]}catch{let v=this.image.getWidth()/2,A=this.image.getHeight()/2;o=this.getFirstDifferent(new Lr(v+7,A-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new Lr(v+7,A+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new Lr(v-7,A+7),!1,-1,1).toResultPoint(),y=this.getFirstDifferent(new Lr(v-7,A-7),!1,-1,-1).toResultPoint()}let x=xt.round((o.getX()+y.getX()+c.getX()+h.getX())/4),E=xt.round((o.getY()+y.getY()+c.getY()+h.getY())/4);try{let d=new hr(this.image,15,x,E).detect();o=d[0],c=d[1],h=d[2],y=d[3]}catch{o=this.getFirstDifferent(new Lr(x+7,E-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new Lr(x+7,E+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new Lr(x-7,E+7),!1,-1,1).toResultPoint(),y=this.getFirstDifferent(new Lr(x-7,E-7),!1,-1,-1).toResultPoint()}return x=xt.round((o.getX()+y.getX()+c.getX()+h.getX())/4),E=xt.round((o.getY()+y.getY()+c.getY()+h.getY())/4),new Lr(x,E)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,c,h,y,x){let E=bi.getInstance(),d=this.getDimension(),v=d/2-this.nbCenterLayers,A=d/2+this.nbCenterLayers;return E.sampleGrid(o,d,d,v,v,A,v,A,A,v,A,c.getX(),c.getY(),h.getX(),h.getY(),y.getX(),y.getY(),x.getX(),x.getY())}sampleLine(o,c,h){let y=0,x=this.distanceResultPoint(o,c),E=x/h,d=o.getX(),v=o.getY(),A=E*(c.getX()-o.getX())/x,I=E*(c.getY()-o.getY())/x;for(let N=0;N<h;N++)this.image.get(xt.round(d+N*A),xt.round(v+N*I))&&(y|=1<<h-N-1);return y}isWhiteOrBlackRectangle(o,c,h,y){let x=3;o=new Lr(o.getX()-x,o.getY()+x),c=new Lr(c.getX()-x,c.getY()-x),h=new Lr(h.getX()+x,h.getY()-x),y=new Lr(y.getX()+x,y.getY()+x);let E=this.getColor(y,o);if(E===0)return!1;let d=this.getColor(o,c);return d!==E||(d=this.getColor(c,h),d!==E)?!1:(d=this.getColor(h,y),d===E)}getColor(o,c){let h=this.distancePoint(o,c),y=(c.getX()-o.getX())/h,x=(c.getY()-o.getY())/h,E=0,d=o.getX(),v=o.getY(),A=this.image.get(o.getX(),o.getY()),I=Math.ceil(h);for(let k=0;k<I;k++)d+=y,v+=x,this.image.get(xt.round(d),xt.round(v))!==A&&E++;let N=E/h;return N>.1&&N<.9?0:N<=.1===A?1:-1}getFirstDifferent(o,c,h,y){let x=o.getX()+h,E=o.getY()+y;for(;this.isValid(x,E)&&this.image.get(x,E)===c;)x+=h,E+=y;for(x-=h,E-=y;this.isValid(x,E)&&this.image.get(x,E)===c;)x+=h;for(x-=h;this.isValid(x,E)&&this.image.get(x,E)===c;)E+=y;return E-=y,new Lr(x,E)}expandSquare(o,c,h){let y=h/(2*c),x=o[0].getX()-o[2].getX(),E=o[0].getY()-o[2].getY(),d=(o[0].getX()+o[2].getX())/2,v=(o[0].getY()+o[2].getY())/2,A=new it(d+y*x,v+y*E),I=new it(d-y*x,v-y*E);x=o[1].getX()-o[3].getX(),E=o[1].getY()-o[3].getY(),d=(o[1].getX()+o[3].getX())/2,v=(o[1].getY()+o[3].getY())/2;let N=new it(d+y*x,v+y*E),k=new it(d-y*x,v-y*E);return[A,N,I,k]}isValid(o,c){return o>=0&&o<this.image.getWidth()&&c>0&&c<this.image.getHeight()}isValidPoint(o){let c=xt.round(o.getX()),h=xt.round(o.getY());return this.isValid(c,h)}distancePoint(o,c){return xt.distance(o.getX(),o.getY(),c.getX(),c.getY())}distanceResultPoint(o,c){return xt.distance(o.getX(),o.getY(),c.getX(),c.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(K.truncDivision(this.nbLayers-4,8)+1)+15}}class gs{decode(o,c=null){let h=null,y=new Po(o.getBlackMatrix()),x=null,E=null;try{let I=y.detectMirror(!1);x=I.getPoints(),this.reportFoundResultPoints(c,x),E=new Vt().decode(I)}catch(I){h=I}if(E==null)try{let I=y.detectMirror(!0);x=I.getPoints(),this.reportFoundResultPoints(c,x),E=new Vt().decode(I)}catch(I){throw h??I}let d=new Ge(E.getText(),E.getRawBytes(),E.getNumBits(),x,qe.AZTEC,M.currentTimeMillis()),v=E.getByteSegments();v!=null&&d.putMetadata(ct.BYTE_SEGMENTS,v);let A=E.getECLevel();return A!=null&&d.putMetadata(ct.ERROR_CORRECTION_LEVEL,A),d}reportFoundResultPoints(o,c){if(o!=null){let h=o.get(Z.NEED_RESULT_POINT_CALLBACK);h!=null&&c.forEach((y,x,E)=>{h.foundPossibleResultPoint(y)})}}reset(){}}class ps extends Xe{constructor(o=500){super(new gs,o)}}class In{decode(o,c){try{return this.doDecode(o,c)}catch{if(c&&c.get(Z.TRY_HARDER)===!0&&o.isRotateSupported()){const x=o.rotateCounterClockwise(),E=this.doDecode(x,c),d=E.getResultMetadata();let v=270;d!==null&&d.get(ct.ORIENTATION)===!0&&(v=v+d.get(ct.ORIENTATION)%360),E.putMetadata(ct.ORIENTATION,v);const A=E.getResultPoints();if(A!==null){const I=x.getHeight();for(let N=0;N<A.length;N++)A[N]=new it(I-A[N].getY()-1,A[N].getX())}return E}else throw new he}}reset(){}doDecode(o,c){const h=o.getWidth(),y=o.getHeight();let x=new J(h);const E=c&&c.get(Z.TRY_HARDER)===!0,d=Math.max(1,y>>(E?8:5));let v;E?v=y:v=15;const A=Math.trunc(y/2);for(let I=0;I<v;I++){const N=Math.trunc((I+1)/2),k=(I&1)===0,F=A+d*(k?N:-N);if(F<0||F>=y)break;try{x=o.getBlackRow(F,x)}catch{continue}for(let G=0;G<2;G++){if(G===1&&(x.reverse(),c&&c.get(Z.NEED_RESULT_POINT_CALLBACK)===!0)){const X=new Map;c.forEach((re,te)=>X.set(te,re)),X.delete(Z.NEED_RESULT_POINT_CALLBACK),c=X}try{const X=this.decodeRow(F,x,c);if(G===1){X.putMetadata(ct.ORIENTATION,180);const re=X.getResultPoints();re!==null&&(re[0]=new it(h-re[0].getX()-1,re[0].getY()),re[1]=new it(h-re[1].getX()-1,re[1].getY()))}return X}catch{}}}throw new he}static recordPattern(o,c,h){const y=h.length;for(let A=0;A<y;A++)h[A]=0;const x=o.getSize();if(c>=x)throw new he;let E=!o.get(c),d=0,v=c;for(;v<x;){if(o.get(v)!==E)h[d]++;else{if(++d===y)break;h[d]=1,E=!E}v++}if(!(d===y||d===y-1&&v===x))throw new he}static recordPatternInReverse(o,c,h){let y=h.length,x=o.get(c);for(;c>0&&y>=0;)o.get(--c)!==x&&(y--,x=!x);if(y>=0)throw new he;In.recordPattern(o,c+1,h)}static patternMatchVariance(o,c,h){const y=o.length;let x=0,E=0;for(let A=0;A<y;A++)x+=o[A],E+=c[A];if(x<E)return Number.POSITIVE_INFINITY;const d=x/E;h*=d;let v=0;for(let A=0;A<y;A++){const I=o[A],N=c[A]*d,k=I>N?I-N:N-I;if(k>h)return Number.POSITIVE_INFINITY;v+=k}return v/x}}class at extends In{static findStartPattern(o){const c=o.getSize(),h=o.getNextSet(0);let y=0,x=Int32Array.from([0,0,0,0,0,0]),E=h,d=!1;const v=6;for(let A=h;A<c;A++)if(o.get(A)!==d)x[y]++;else{if(y===v-1){let I=at.MAX_AVG_VARIANCE,N=-1;for(let k=at.CODE_START_A;k<=at.CODE_START_C;k++){const F=In.patternMatchVariance(x,at.CODE_PATTERNS[k],at.MAX_INDIVIDUAL_VARIANCE);F<I&&(I=F,N=k)}if(N>=0&&o.isRange(Math.max(0,E-(A-E)/2),E,!1))return Int32Array.from([E,A,N]);E+=x[0]+x[1],x=x.slice(2,x.length-1),x[y-1]=0,x[y]=0,y--}else y++;x[y]=1,d=!d}throw new he}static decodeCode(o,c,h){In.recordPattern(o,h,c);let y=at.MAX_AVG_VARIANCE,x=-1;for(let E=0;E<at.CODE_PATTERNS.length;E++){const d=at.CODE_PATTERNS[E],v=this.patternMatchVariance(c,d,at.MAX_INDIVIDUAL_VARIANCE);v<y&&(y=v,x=E)}if(x>=0)return x;throw new he}decodeRow(o,c,h){const y=h&&h.get(Z.ASSUME_GS1)===!0,x=at.findStartPattern(c),E=x[2];let d=0;const v=new Uint8Array(20);v[d++]=E;let A;switch(E){case at.CODE_START_A:A=at.CODE_CODE_A;break;case at.CODE_START_B:A=at.CODE_CODE_B;break;case at.CODE_START_C:A=at.CODE_CODE_C;break;default:throw new V}let I=!1,N=!1,k="",F=x[0],G=x[1];const X=Int32Array.from([0,0,0,0,0,0]);let re=0,te=0,oe=E,fe=0,le=!0,ge=!1,me=!1;for(;!I;){const tt=N;switch(N=!1,re=te,te=at.decodeCode(c,X,G),v[d++]=te,te!==at.CODE_STOP&&(le=!0),te!==at.CODE_STOP&&(fe++,oe+=fe*te),F=G,G+=X.reduce((wt,bt)=>wt+bt,0),te){case at.CODE_START_A:case at.CODE_START_B:case at.CODE_START_C:throw new V}switch(A){case at.CODE_CODE_A:if(te<64)me===ge?k+=String.fromCharCode(32+te):k+=String.fromCharCode(32+te+128),me=!1;else if(te<96)me===ge?k+=String.fromCharCode(te-64):k+=String.fromCharCode(te+64),me=!1;else switch(te!==at.CODE_STOP&&(le=!1),te){case at.CODE_FNC_1:y&&(k.length===0?k+="]C1":k+="");break;case at.CODE_FNC_2:case at.CODE_FNC_3:break;case at.CODE_FNC_4_A:!ge&&me?(ge=!0,me=!1):ge&&me?(ge=!1,me=!1):me=!0;break;case at.CODE_SHIFT:N=!0,A=at.CODE_CODE_B;break;case at.CODE_CODE_B:A=at.CODE_CODE_B;break;case at.CODE_CODE_C:A=at.CODE_CODE_C;break;case at.CODE_STOP:I=!0;break}break;case at.CODE_CODE_B:if(te<96)me===ge?k+=String.fromCharCode(32+te):k+=String.fromCharCode(32+te+128),me=!1;else switch(te!==at.CODE_STOP&&(le=!1),te){case at.CODE_FNC_1:y&&(k.length===0?k+="]C1":k+="");break;case at.CODE_FNC_2:case at.CODE_FNC_3:break;case at.CODE_FNC_4_B:!ge&&me?(ge=!0,me=!1):ge&&me?(ge=!1,me=!1):me=!0;break;case at.CODE_SHIFT:N=!0,A=at.CODE_CODE_A;break;case at.CODE_CODE_A:A=at.CODE_CODE_A;break;case at.CODE_CODE_C:A=at.CODE_CODE_C;break;case at.CODE_STOP:I=!0;break}break;case at.CODE_CODE_C:if(te<100)te<10&&(k+="0"),k+=te;else switch(te!==at.CODE_STOP&&(le=!1),te){case at.CODE_FNC_1:y&&(k.length===0?k+="]C1":k+="");break;case at.CODE_CODE_A:A=at.CODE_CODE_A;break;case at.CODE_CODE_B:A=at.CODE_CODE_B;break;case at.CODE_STOP:I=!0;break}break}tt&&(A=A===at.CODE_CODE_A?at.CODE_CODE_B:at.CODE_CODE_A)}const _e=G-F;if(G=c.getNextUnset(G),!c.isRange(G,Math.min(c.getSize(),G+(G-F)/2),!1))throw new he;if(oe-=fe*re,oe%103!==re)throw new R;const Ne=k.length;if(Ne===0)throw new he;Ne>0&&le&&(A===at.CODE_CODE_C?k=k.substring(0,Ne-2):k=k.substring(0,Ne-1));const xe=(x[1]+x[0])/2,je=F+_e/2,Ke=v.length,ut=new Uint8Array(Ke);for(let tt=0;tt<Ke;tt++)ut[tt]=v[tt];const dt=[new it(xe,o),new it(je,o)];return new Ge(k,ut,0,dt,qe.CODE_128,new Date().getTime())}}at.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],at.MAX_AVG_VARIANCE=.25,at.MAX_INDIVIDUAL_VARIANCE=.7,at.CODE_SHIFT=98,at.CODE_CODE_C=99,at.CODE_CODE_B=100,at.CODE_CODE_A=101,at.CODE_FNC_1=102,at.CODE_FNC_2=97,at.CODE_FNC_3=96,at.CODE_FNC_4_A=101,at.CODE_FNC_4_B=100,at.CODE_START_A=103,at.CODE_START_B=104,at.CODE_START_C=105,at.CODE_STOP=106;class fn extends In{constructor(o=!1,c=!1){super(),this.usingCheckDigit=o,this.extendedMode=c,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(o,c,h){let y=this.counters;y.fill(0),this.decodeRowResult="";let x=fn.findAsteriskPattern(c,y),E=c.getNextSet(x[1]),d=c.getSize(),v,A;do{fn.recordPattern(c,E,y);let X=fn.toNarrowWidePattern(y);if(X<0)throw new he;v=fn.patternToChar(X),this.decodeRowResult+=v,A=E;for(let re of y)E+=re;E=c.getNextSet(E)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let X of y)I+=X;let N=E-A-I;if(E!==d&&N*2<I)throw new he;if(this.usingCheckDigit){let X=this.decodeRowResult.length-1,re=0;for(let te=0;te<X;te++)re+=fn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(te));if(this.decodeRowResult.charAt(X)!==fn.ALPHABET_STRING.charAt(re%43))throw new R;this.decodeRowResult=this.decodeRowResult.substring(0,X)}if(this.decodeRowResult.length===0)throw new he;let k;this.extendedMode?k=fn.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;let F=(x[1]+x[0])/2,G=A+I/2;return new Ge(k,null,0,[new it(F,o),new it(G,o)],qe.CODE_39,new Date().getTime())}static findAsteriskPattern(o,c){let h=o.getSize(),y=o.getNextSet(0),x=0,E=y,d=!1,v=c.length;for(let A=y;A<h;A++)if(o.get(A)!==d)c[x]++;else{if(x===v-1){if(this.toNarrowWidePattern(c)===fn.ASTERISK_ENCODING&&o.isRange(Math.max(0,E-Math.floor((A-E)/2)),E,!1))return[E,A];E+=c[0]+c[1],c.copyWithin(0,2,2+x-1),c[x-1]=0,c[x]=0,x--}else x++;c[x]=1,d=!d}throw new he}static toNarrowWidePattern(o){let c=o.length,h=0,y;do{let x=2147483647;for(let v of o)v<x&&v>h&&(x=v);h=x,y=0;let E=0,d=0;for(let v=0;v<c;v++){let A=o[v];A>h&&(d|=1<<c-1-v,y++,E+=A)}if(y===3){for(let v=0;v<c&&y>0;v++){let A=o[v];if(A>h&&(y--,A*2>=E))return-1}return d}}while(y>3);return-1}static patternToChar(o){for(let c=0;c<fn.CHARACTER_ENCODINGS.length;c++)if(fn.CHARACTER_ENCODINGS[c]===o)return fn.ALPHABET_STRING.charAt(c);if(o===fn.ASTERISK_ENCODING)return"*";throw new he}static decodeExtended(o){let c=o.length,h="";for(let y=0;y<c;y++){let x=o.charAt(y);if(x==="+"||x==="$"||x==="%"||x==="/"){let E=o.charAt(y+1),d="\0";switch(x){case"+":if(E>="A"&&E<="Z")d=String.fromCharCode(E.charCodeAt(0)+32);else throw new V;break;case"$":if(E>="A"&&E<="Z")d=String.fromCharCode(E.charCodeAt(0)-64);else throw new V;break;case"%":if(E>="A"&&E<="E")d=String.fromCharCode(E.charCodeAt(0)-38);else if(E>="F"&&E<="J")d=String.fromCharCode(E.charCodeAt(0)-11);else if(E>="K"&&E<="O")d=String.fromCharCode(E.charCodeAt(0)+16);else if(E>="P"&&E<="T")d=String.fromCharCode(E.charCodeAt(0)+43);else if(E==="U")d="\0";else if(E==="V")d="@";else if(E==="W")d="`";else if(E==="X"||E==="Y"||E==="Z")d="";else throw new V;break;case"/":if(E>="A"&&E<="O")d=String.fromCharCode(E.charCodeAt(0)-32);else if(E==="Z")d=":";else throw new V;break}h+=d,y++}else h+=x}return h}}fn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",fn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],fn.ASTERISK_ENCODING=148;class Je extends In{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,c,h){let y=this.decodeStart(c),x=this.decodeEnd(c),E=new ne;Je.decodeMiddle(c,y[1],x[0],E);let d=E.toString(),v=null;h!=null&&(v=h.get(Z.ALLOWED_LENGTHS)),v==null&&(v=Je.DEFAULT_ALLOWED_LENGTHS);let A=d.length,I=!1,N=0;for(let G of v){if(A===G){I=!0;break}G>N&&(N=G)}if(!I&&A>N&&(I=!0),!I)throw new V;const k=[new it(y[1],o),new it(x[0],o)];return new Ge(d,null,0,k,qe.ITF,new Date().getTime())}static decodeMiddle(o,c,h,y){let x=new Int32Array(10),E=new Int32Array(5),d=new Int32Array(5);for(x.fill(0),E.fill(0),d.fill(0);c<h;){In.recordPattern(o,c,x);for(let A=0;A<5;A++){let I=2*A;E[A]=x[I],d[A]=x[I+1]}let v=Je.decodeDigit(E);y.append(v.toString()),v=this.decodeDigit(d),y.append(v.toString()),x.forEach(function(A){c+=A})}}decodeStart(o){let c=Je.skipWhiteSpace(o),h=Je.findGuardPattern(o,c,Je.START_PATTERN);return this.narrowLineWidth=(h[1]-h[0])/4,this.validateQuietZone(o,h[0]),h}validateQuietZone(o,c){let h=this.narrowLineWidth*10;h=h<c?h:c;for(let y=c-1;h>0&&y>=0&&!o.get(y);y--)h--;if(h!==0)throw new he}static skipWhiteSpace(o){const c=o.getSize(),h=o.getNextSet(0);if(h===c)throw new he;return h}decodeEnd(o){o.reverse();try{let c=Je.skipWhiteSpace(o),h;try{h=Je.findGuardPattern(o,c,Je.END_PATTERN_REVERSED[0])}catch(x){x instanceof he&&(h=Je.findGuardPattern(o,c,Je.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,h[0]);let y=h[0];return h[0]=o.getSize()-h[1],h[1]=o.getSize()-y,h}finally{o.reverse()}}static findGuardPattern(o,c,h){let y=h.length,x=new Int32Array(y),E=o.getSize(),d=!1,v=0,A=c;x.fill(0);for(let I=c;I<E;I++)if(o.get(I)!==d)x[v]++;else{if(v===y-1){if(In.patternMatchVariance(x,h,Je.MAX_INDIVIDUAL_VARIANCE)<Je.MAX_AVG_VARIANCE)return[A,I];A+=x[0]+x[1],M.arraycopy(x,2,x,0,v-1),x[v-1]=0,x[v]=0,v--}else v++;x[v]=1,d=!d}throw new he}static decodeDigit(o){let c=Je.MAX_AVG_VARIANCE,h=-1,y=Je.PATTERNS.length;for(let x=0;x<y;x++){let E=Je.PATTERNS[x],d=In.patternMatchVariance(o,E,Je.MAX_INDIVIDUAL_VARIANCE);d<c?(c=d,h=x):d===c&&(h=-1)}if(h>=0)return h%10;throw new he}}Je.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Je.MAX_AVG_VARIANCE=.38,Je.MAX_INDIVIDUAL_VARIANCE=.5,Je.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Je.START_PATTERN=Int32Array.from([1,1,1,1]),Je.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Fn extends In{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let c=!1,h,y=0,x=Int32Array.from([0,0,0]);for(;!c;){x=Int32Array.from([0,0,0]),h=Fn.findGuardPattern(o,y,!1,this.START_END_PATTERN,x);let E=h[0];y=h[1];let d=E-(y-E);d>=0&&(c=o.isRange(d,E,!1))}return h}static checkChecksum(o){return Fn.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let c=o.length;if(c===0)return!1;let h=parseInt(o.charAt(c-1),10);return Fn.getStandardUPCEANChecksum(o.substring(0,c-1))===h}static getStandardUPCEANChecksum(o){let c=o.length,h=0;for(let y=c-1;y>=0;y-=2){let x=o.charAt(y).charCodeAt(0)-48;if(x<0||x>9)throw new V;h+=x}h*=3;for(let y=c-2;y>=0;y-=2){let x=o.charAt(y).charCodeAt(0)-48;if(x<0||x>9)throw new V;h+=x}return(1e3-h)%10}static decodeEnd(o,c){return Fn.findGuardPattern(o,c,!1,Fn.START_END_PATTERN,new Int32Array(Fn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,c,h,y){return this.findGuardPattern(o,c,h,y,new Int32Array(y.length))}static findGuardPattern(o,c,h,y,x){let E=o.getSize();c=h?o.getNextUnset(c):o.getNextSet(c);let d=0,v=c,A=y.length,I=h;for(let N=c;N<E;N++)if(o.get(N)!==I)x[d]++;else{if(d===A-1){if(In.patternMatchVariance(x,y,Fn.MAX_INDIVIDUAL_VARIANCE)<Fn.MAX_AVG_VARIANCE)return Int32Array.from([v,N]);v+=x[0]+x[1];let k=x.slice(2,x.length-1);for(let F=0;F<d-1;F++)x[F]=k[F];x[d-1]=0,x[d]=0,d--}else d++;x[d]=1,I=!I}throw new he}static decodeDigit(o,c,h,y){this.recordPattern(o,h,c);let x=this.MAX_AVG_VARIANCE,E=-1,d=y.length;for(let v=0;v<d;v++){let A=y[v],I=In.patternMatchVariance(c,A,Fn.MAX_INDIVIDUAL_VARIANCE);I<x&&(x=I,E=v)}if(E>=0)return E;throw new he}}Fn.MAX_AVG_VARIANCE=.48,Fn.MAX_INDIVIDUAL_VARIANCE=.7,Fn.START_END_PATTERN=Int32Array.from([1,1,1]),Fn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Fn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Fn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Oi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,c,h){let y=this.decodeRowStringBuffer,x=this.decodeMiddle(c,h,y),E=y.toString(),d=Oi.parseExtensionString(E),v=[new it((h[0]+h[1])/2,o),new it(x,o)],A=new Ge(E,null,0,v,qe.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&A.putAllMetadata(d),A}decodeMiddle(o,c,h){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let x=o.getSize(),E=c[1],d=0;for(let A=0;A<5&&E<x;A++){let I=Fn.decodeDigit(o,y,E,Fn.L_AND_G_PATTERNS);h+=String.fromCharCode(48+I%10);for(let N of y)E+=N;I>=10&&(d|=1<<4-A),A!==4&&(E=o.getNextSet(E),E=o.getNextUnset(E))}if(h.length!==5)throw new he;let v=this.determineCheckDigit(d);if(Oi.extensionChecksum(h.toString())!==v)throw new he;return E}static extensionChecksum(o){let c=o.length,h=0;for(let y=c-2;y>=0;y-=2)h+=o.charAt(y).charCodeAt(0)-48;h*=3;for(let y=c-1;y>=0;y-=2)h+=o.charAt(y).charCodeAt(0)-48;return h*=3,h%10}determineCheckDigit(o){for(let c=0;c<10;c++)if(o===this.CHECK_DIGIT_ENCODINGS[c])return c;throw new he}static parseExtensionString(o){if(o.length!==5)return null;let c=Oi.parseExtension5String(o);return c==null?null:new Map([[ct.SUGGESTED_PRICE,c]])}static parseExtension5String(o){let c;switch(o.charAt(0)){case"0":c="";break;case"5":c="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}c="";break;default:c="";break}let h=parseInt(o.substring(1)),y=(h/100).toString(),x=h%100,E=x<10?"0"+x:x.toString();return c+y+"."+E}}class Us{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,c,h){let y=this.decodeRowStringBuffer,x=this.decodeMiddle(c,h,y),E=y.toString(),d=Us.parseExtensionString(E),v=[new it((h[0]+h[1])/2,o),new it(x,o)],A=new Ge(E,null,0,v,qe.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&A.putAllMetadata(d),A}decodeMiddle(o,c,h){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let x=o.getSize(),E=c[1],d=0;for(let v=0;v<2&&E<x;v++){let A=Fn.decodeDigit(o,y,E,Fn.L_AND_G_PATTERNS);h+=String.fromCharCode(48+A%10);for(let I of y)E+=I;A>=10&&(d|=1<<1-v),v!==1&&(E=o.getNextSet(E),E=o.getNextUnset(E))}if(h.length!==2)throw new he;if(parseInt(h.toString())%4!==d)throw new he;return E}static parseExtensionString(o){return o.length!==2?null:new Map([[ct.ISSUE_NUMBER,parseInt(o)]])}}class ht{static decodeRow(o,c,h){let y=Fn.findGuardPattern(c,h,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Oi().decodeRow(o,c,y)}catch{return new Us().decodeRow(o,c,y)}}}ht.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class tn extends Fn{constructor(){super(),this.decodeRowStringBuffer="",tn.L_AND_G_PATTERNS=tn.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let c=tn.L_PATTERNS[o-10],h=new Int32Array(c.length);for(let y=0;y<c.length;y++)h[y]=c[c.length-y-1];tn.L_AND_G_PATTERNS[o]=h}}decodeRow(o,c,h){let y=tn.findStartGuardPattern(c),x=h==null?null:h.get(Z.NEED_RESULT_POINT_CALLBACK);if(x!=null){const le=new it((y[0]+y[1])/2,o);x.foundPossibleResultPoint(le)}let E=this.decodeMiddle(c,y,this.decodeRowStringBuffer),d=E.rowOffset,v=E.resultString;if(x!=null){const le=new it(d,o);x.foundPossibleResultPoint(le)}let A=this.decodeEnd(c,d);if(x!=null){const le=new it((A[0]+A[1])/2,o);x.foundPossibleResultPoint(le)}let I=A[1],N=I+(I-A[0]);if(N>=c.getSize()||!c.isRange(I,N,!1))throw new he;let k=v.toString();if(k.length<8)throw new V;if(!tn.checkChecksum(k))throw new R;let F=(y[1]+y[0])/2,G=(A[1]+A[0])/2,X=this.getBarcodeFormat(),re=[new it(F,o),new it(G,o)],te=new Ge(k,null,0,re,X,new Date().getTime()),oe=0;try{let le=ht.decodeRow(o,c,A[1]);te.putMetadata(ct.UPC_EAN_EXTENSION,le.getText()),te.putAllMetadata(le.getResultMetadata()),te.addResultPoints(le.getResultPoints()),oe=le.getText().length}catch{}let fe=h==null?null:h.get(Z.ALLOWED_EAN_EXTENSIONS);if(fe!=null){let le=!1;for(let ge in fe)if(oe.toString()===ge){le=!0;break}if(!le)throw new he}return te}decodeEnd(o,c){return tn.findGuardPattern(o,c,!1,tn.START_END_PATTERN,new Int32Array(tn.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return tn.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let c=o.length;if(c===0)return!1;let h=parseInt(o.charAt(c-1),10);return tn.getStandardUPCEANChecksum(o.substring(0,c-1))===h}static getStandardUPCEANChecksum(o){let c=o.length,h=0;for(let y=c-1;y>=0;y-=2){let x=o.charAt(y).charCodeAt(0)-48;if(x<0||x>9)throw new V;h+=x}h*=3;for(let y=c-2;y>=0;y-=2){let x=o.charAt(y).charCodeAt(0)-48;if(x<0||x>9)throw new V;h+=x}return(1e3-h)%10}}class Yn extends tn{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,c,h){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let x=o.getSize(),E=c[1],d=0;for(let A=0;A<6&&E<x;A++){let I=tn.decodeDigit(o,y,E,tn.L_AND_G_PATTERNS);h+=String.fromCharCode(48+I%10);for(let N of y)E+=N;I>=10&&(d|=1<<5-A)}h=Yn.determineFirstDigit(h,d),E=tn.findGuardPattern(o,E,!0,tn.MIDDLE_PATTERN,new Int32Array(tn.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<6&&E<x;A++){let I=tn.decodeDigit(o,y,E,tn.L_PATTERNS);h+=String.fromCharCode(48+I);for(let N of y)E+=N}return{rowOffset:E,resultString:h}}getBarcodeFormat(){return qe.EAN_13}static determineFirstDigit(o,c){for(let h=0;h<10;h++)if(c===this.FIRST_DIGIT_ENCODINGS[h])return o=String.fromCharCode(48+h)+o,o;throw new he}}Yn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class wa extends tn{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,c,h){const y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let x=o.getSize(),E=c[1];for(let v=0;v<4&&E<x;v++){let A=tn.decodeDigit(o,y,E,tn.L_PATTERNS);h+=String.fromCharCode(48+A);for(let I of y)E+=I}E=tn.findGuardPattern(o,E,!0,tn.MIDDLE_PATTERN,new Int32Array(tn.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<4&&E<x;v++){let A=tn.decodeDigit(o,y,E,tn.L_PATTERNS);h+=String.fromCharCode(48+A);for(let I of y)E+=I}return{rowOffset:E,resultString:h}}getBarcodeFormat(){return qe.EAN_8}}class Va extends tn{constructor(){super(...arguments),this.ean13Reader=new Yn}getBarcodeFormat(){return qe.UPC_A}decode(o,c){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,c,h){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,c,h))}decodeMiddle(o,c,h){return this.ean13Reader.decodeMiddle(o,c,h)}maybeReturnResult(o){let c=o.getText();if(c.charAt(0)==="0"){let h=new Ge(c.substring(1),null,null,o.getResultPoints(),qe.UPC_A);return o.getResultMetadata()!=null&&h.putAllMetadata(o.getResultMetadata()),h}else throw new he}reset(){this.ean13Reader.reset()}}class Er extends tn{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,c,h){const y=this.decodeMiddleCounters.map(A=>A);y[0]=0,y[1]=0,y[2]=0,y[3]=0;const x=o.getSize();let E=c[1],d=0;for(let A=0;A<6&&E<x;A++){const I=Er.decodeDigit(o,y,E,Er.L_AND_G_PATTERNS);h+=String.fromCharCode(48+I%10);for(let N of y)E+=N;I>=10&&(d|=1<<5-A)}let v=Er.determineNumSysAndCheckDigit(h,d);return{rowOffset:E,resultString:v}}decodeEnd(o,c){return Er.findGuardPatternWithoutCounters(o,c,!0,Er.MIDDLE_END_PATTERN)}checkChecksum(o){return tn.checkChecksum(Er.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,c){for(let h=0;h<=1;h++)for(let y=0;y<10;y++)if(c===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[h][y]){let x=String.fromCharCode(48+h),E=String.fromCharCode(48+y);return x+o+E}throw he.getNotFoundInstance()}getBarcodeFormat(){return qe.UPC_E}static convertUPCEtoUPCA(o){const c=o.slice(1,7).split("").map(x=>x.charCodeAt(0)),h=new ne;h.append(o.charAt(0));let y=c[5];switch(y){case 0:case 1:case 2:h.appendChars(c,0,2),h.append(y),h.append("0000"),h.appendChars(c,2,3);break;case 3:h.appendChars(c,0,3),h.append("00000"),h.appendChars(c,3,2);break;case 4:h.appendChars(c,0,4),h.append("00000"),h.append(c[4]);break;default:h.appendChars(c,0,5),h.append("0000"),h.append(y);break}return o.length>=8&&h.append(o.charAt(7)),h.toString()}}Er.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Er.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ll extends In{constructor(o){super();let c=o==null?null:o.get(Z.POSSIBLE_FORMATS),h=[];r(c)?(h.push(new Yn),h.push(new Va),h.push(new wa),h.push(new Er)):(c.indexOf(qe.EAN_13)>-1&&h.push(new Yn),c.indexOf(qe.UPC_A)>-1&&h.push(new Va),c.indexOf(qe.EAN_8)>-1&&h.push(new wa),c.indexOf(qe.UPC_E)>-1&&h.push(new Er)),this.readers=h}decodeRow(o,c,h){for(let y of this.readers)try{const x=y.decodeRow(o,c,h),E=x.getBarcodeFormat()===qe.EAN_13&&x.getText().charAt(0)==="0",d=h==null?null:h.get(Z.POSSIBLE_FORMATS),v=d==null||d.includes(qe.UPC_A);if(E&&v){const A=x.getRawBytes(),I=new Ge(x.getText().substring(1),A,A?A.length:null,x.getResultPoints(),qe.UPC_A);return I.putAllMetadata(x.getResultMetadata()),I}return x}catch{}throw new he}reset(){for(let o of this.readers)o.reset()}}class ii extends In{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(o,c){for(let h=0;h<c.length;h++)if(In.patternMatchVariance(o,c[h],ii.MAX_INDIVIDUAL_VARIANCE)<ii.MAX_AVG_VARIANCE)return h;throw new he}static count(o){return xt.sum(new Int32Array(o))}static increment(o,c){let h=0,y=c[0];for(let x=1;x<o.length;x++)c[x]>y&&(y=c[x],h=x);o[h]++}static decrement(o,c){let h=0,y=c[0];for(let x=1;x<o.length;x++)c[x]<y&&(y=c[x],h=x);o[h]--}static isFinderPattern(o){let c=o[0]+o[1],h=c+o[2]+o[3],y=c/h;if(y>=ii.MIN_FINDER_PATTERN_RATIO&&y<=ii.MAX_FINDER_PATTERN_RATIO){let x=Number.MAX_SAFE_INTEGER,E=Number.MIN_SAFE_INTEGER;for(let d of o)d>E&&(E=d),d<x&&(x=d);return E<10*x}return!1}}ii.MAX_AVG_VARIANCE=.2,ii.MAX_INDIVIDUAL_VARIANCE=.45,ii.MIN_FINDER_PATTERN_RATIO=9.5/12,ii.MAX_FINDER_PATTERN_RATIO=12.5/14;class Hr{constructor(o,c){this.value=o,this.checksumPortion=c}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){if(!(o instanceof Hr))return!1;const c=o;return this.value===c.value&&this.checksumPortion===c.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class qi{constructor(o,c,h,y,x){this.value=o,this.startEnd=c,this.value=o,this.startEnd=c,this.resultPoints=new Array,this.resultPoints.push(new it(h,x)),this.resultPoints.push(new it(y,x))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){if(!(o instanceof qi))return!1;const c=o;return this.value===c.value}hashCode(){return this.value}}class ra{constructor(){}static getRSSvalue(o,c,h){let y=0;for(let v of o)y+=v;let x=0,E=0,d=o.length;for(let v=0;v<d-1;v++){let A;for(A=1,E|=1<<v;A<o[v];A++,E&=~(1<<v)){let I=ra.combins(y-A-1,d-v-2);if(h&&E===0&&y-A-(d-v-1)>=d-v-1&&(I-=ra.combins(y-A-(d-v),d-v-2)),d-v-1>1){let N=0;for(let k=y-A-(d-v-2);k>c;k--)N+=ra.combins(y-A-k-1,d-v-3);I-=N*(d-1-v)}else y-A>c&&I--;x+=I}y-=A}return x}static combins(o,c){let h,y;o-c>c?(y=c,h=o-c):(y=o-c,h=c);let x=1,E=1;for(let d=o;d>h;d--)x*=d,E<=y&&(x/=E,E++);for(;E<=y;)x/=E,E++;return x}}class ys{static buildBitArray(o){let c=o.length*2-1;o[o.length-1].getRightChar()==null&&(c-=1);let h=12*c,y=new J(h),x=0,d=o[0].getRightChar().getValue();for(let v=11;v>=0;--v)(d&1<<v)!=0&&y.set(x),x++;for(let v=1;v<o.length;++v){let A=o[v],I=A.getLeftChar().getValue();for(let N=11;N>=0;--N)(I&1<<N)!=0&&y.set(x),x++;if(A.getRightChar()!=null){let N=A.getRightChar().getValue();for(let k=11;k>=0;--k)(N&1<<k)!=0&&y.set(x),x++}}return y}}class _n{constructor(o,c){c?this.decodedInformation=null:(this.finished=o,this.decodedInformation=c)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class mr{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}class Kr extends mr{constructor(o,c){super(o),this.value=c}getValue(){return this.value}isFNC1(){return this.value===Kr.FNC1}}Kr.FNC1="$";class ci extends mr{constructor(o,c,h){super(o),h?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=c}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class fi extends mr{constructor(o,c,h){if(super(o),c<0||c>10||h<0||h>10)throw new V;this.firstDigit=c,this.secondDigit=h}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===fi.FNC1}isSecondDigitFNC1(){return this.secondDigit===fi.FNC1}isAnyFNC1(){return this.firstDigit===fi.FNC1||this.secondDigit===fi.FNC1}}fi.FNC1=10;class mt{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new he;let c=o.substring(0,2);for(let x of mt.TWO_DIGIT_DATA_LENGTH)if(x[0]===c)return x[1]===mt.VARIABLE_LENGTH?mt.processVariableAI(2,x[2],o):mt.processFixedAI(2,x[1],o);if(o.length<3)throw new he;let h=o.substring(0,3);for(let x of mt.THREE_DIGIT_DATA_LENGTH)if(x[0]===h)return x[1]===mt.VARIABLE_LENGTH?mt.processVariableAI(3,x[2],o):mt.processFixedAI(3,x[1],o);for(let x of mt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(x[0]===h)return x[1]===mt.VARIABLE_LENGTH?mt.processVariableAI(4,x[2],o):mt.processFixedAI(4,x[1],o);if(o.length<4)throw new he;let y=o.substring(0,4);for(let x of mt.FOUR_DIGIT_DATA_LENGTH)if(x[0]===y)return x[1]===mt.VARIABLE_LENGTH?mt.processVariableAI(4,x[2],o):mt.processFixedAI(4,x[1],o);throw new he}static processFixedAI(o,c,h){if(h.length<o)throw new he;let y=h.substring(0,o);if(h.length<o+c)throw new he;let x=h.substring(o,o+c),E=h.substring(o+c),d="("+y+")"+x,v=mt.parseFieldsInGeneralPurpose(E);return v==null?d:d+v}static processVariableAI(o,c,h){let y=h.substring(0,o),x;h.length<o+c?x=h.length:x=o+c;let E=h.substring(o,x),d=h.substring(x),v="("+y+")"+E,A=mt.parseFieldsInGeneralPurpose(d);return A==null?v:v+A}}mt.VARIABLE_LENGTH=[],mt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",mt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",mt.VARIABLE_LENGTH,20],["22",mt.VARIABLE_LENGTH,29],["30",mt.VARIABLE_LENGTH,8],["37",mt.VARIABLE_LENGTH,8],["90",mt.VARIABLE_LENGTH,30],["91",mt.VARIABLE_LENGTH,30],["92",mt.VARIABLE_LENGTH,30],["93",mt.VARIABLE_LENGTH,30],["94",mt.VARIABLE_LENGTH,30],["95",mt.VARIABLE_LENGTH,30],["96",mt.VARIABLE_LENGTH,30],["97",mt.VARIABLE_LENGTH,3],["98",mt.VARIABLE_LENGTH,30],["99",mt.VARIABLE_LENGTH,30]],mt.THREE_DIGIT_DATA_LENGTH=[["240",mt.VARIABLE_LENGTH,30],["241",mt.VARIABLE_LENGTH,30],["242",mt.VARIABLE_LENGTH,6],["250",mt.VARIABLE_LENGTH,30],["251",mt.VARIABLE_LENGTH,30],["253",mt.VARIABLE_LENGTH,17],["254",mt.VARIABLE_LENGTH,20],["400",mt.VARIABLE_LENGTH,30],["401",mt.VARIABLE_LENGTH,30],["402",17],["403",mt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",mt.VARIABLE_LENGTH,20],["421",mt.VARIABLE_LENGTH,15],["422",3],["423",mt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],mt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",mt.VARIABLE_LENGTH,15],["391",mt.VARIABLE_LENGTH,18],["392",mt.VARIABLE_LENGTH,15],["393",mt.VARIABLE_LENGTH,18],["703",mt.VARIABLE_LENGTH,30]],mt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",mt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",mt.VARIABLE_LENGTH,20],["8003",mt.VARIABLE_LENGTH,30],["8004",mt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",mt.VARIABLE_LENGTH,30],["8008",mt.VARIABLE_LENGTH,12],["8018",18],["8020",mt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",mt.VARIABLE_LENGTH,70],["8200",mt.VARIABLE_LENGTH,70]];class Ni{constructor(o){this.buffer=new ne,this.information=o}decodeAllCodes(o,c){let h=c,y=null;do{let x=this.decodeGeneralPurposeField(h,y),E=mt.parseFieldsInGeneralPurpose(x.getNewString());if(E!=null&&o.append(E),x.isRemaining()?y=""+x.getRemainingValue():y=null,h===x.getNewPosition())break;h=x.getNewPosition()}while(!0);return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let c=o;c<o+3;++c)if(this.information.get(c))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let x=this.extractNumericValueFromBitArray(o,4);return x===0?new fi(this.information.getSize(),fi.FNC1,fi.FNC1):new fi(this.information.getSize(),x-1,fi.FNC1)}let c=this.extractNumericValueFromBitArray(o,7),h=(c-8)/11,y=(c-8)%11;return new fi(o+7,h,y)}extractNumericValueFromBitArray(o,c){return Ni.extractNumericValueFromBitArray(this.information,o,c)}static extractNumericValueFromBitArray(o,c,h){let y=0;for(let x=0;x<h;++x)o.get(c+x)&&(y|=1<<h-x-1);return y}decodeGeneralPurposeField(o,c){this.buffer.setLengthToZero(),c!=null&&this.buffer.append(c),this.current.setPosition(o);let h=this.parseBlocks();return h!=null&&h.isRemaining()?new ci(this.current.getPosition(),this.buffer.toString(),h.getRemainingValue()):new ci(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,c;do{let h=this.current.getPosition();if(this.current.isAlpha()?(c=this.parseAlphaBlock(),o=c.isFinished()):this.current.isIsoIec646()?(c=this.parseIsoIec646Block(),o=c.isFinished()):(c=this.parseNumericBlock(),o=c.isFinished()),!(h!==this.current.getPosition())&&!o)break}while(!o);return c.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let c;return o.isSecondDigitFNC1()?c=new ci(this.current.getPosition(),this.buffer.toString()):c=new ci(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new _n(!0,c)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let c=new ci(this.current.getPosition(),this.buffer.toString());return new _n(!0,c)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new _n(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let c=new ci(this.current.getPosition(),this.buffer.toString());return new _n(!0,c)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new _n(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let c=new ci(this.current.getPosition(),this.buffer.toString());return new _n(!0,c)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new _n(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,5);if(c>=5&&c<16)return!0;if(o+7>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(o,7);if(h>=64&&h<116)return!0;if(o+8>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(o,8);return y>=232&&y<253}decodeIsoIec646(o){let c=this.extractNumericValueFromBitArray(o,5);if(c===15)return new Kr(o+5,Kr.FNC1);if(c>=5&&c<15)return new Kr(o+5,"0"+(c-5));let h=this.extractNumericValueFromBitArray(o,7);if(h>=64&&h<90)return new Kr(o+7,""+(h+1));if(h>=90&&h<116)return new Kr(o+7,""+(h+7));let y=this.extractNumericValueFromBitArray(o,8),x;switch(y){case 232:x="!";break;case 233:x='"';break;case 234:x="%";break;case 235:x="&";break;case 236:x="'";break;case 237:x="(";break;case 238:x=")";break;case 239:x="*";break;case 240:x="+";break;case 241:x=",";break;case 242:x="-";break;case 243:x=".";break;case 244:x="/";break;case 245:x=":";break;case 246:x=";";break;case 247:x="<";break;case 248:x="=";break;case 249:x=">";break;case 250:x="?";break;case 251:x="_";break;case 252:x=" ";break;default:throw new V}return new Kr(o+8,x)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,5);if(c>=5&&c<16)return!0;if(o+6>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(o,6);return h>=16&&h<63}decodeAlphanumeric(o){let c=this.extractNumericValueFromBitArray(o,5);if(c===15)return new Kr(o+5,Kr.FNC1);if(c>=5&&c<15)return new Kr(o+5,"0"+(c-5));let h=this.extractNumericValueFromBitArray(o,6);if(h>=32&&h<58)return new Kr(o+6,""+(h+33));let y;switch(h){case 58:y="*";break;case 59:y=",";break;case 60:y="-";break;case 61:y=".";break;case 62:y="/";break;default:throw new cn("Decoding invalid alphanumeric value: "+h)}return new Kr(o+6,y)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let c=0;c<5&&c+o<this.information.getSize();++c)if(c===2){if(!this.information.get(o+2))return!1}else if(this.information.get(o+c))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let c=o;c<o+3;++c)if(this.information.get(c))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let c=0;c<4&&c+o<this.information.getSize();++c)if(this.information.get(o+c))return!1;return!0}}class Vn{constructor(o){this.information=o,this.generalDecoder=new Ni(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class gn extends Vn{constructor(o){super(o)}encodeCompressedGtin(o,c){o.append("(01)");let h=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,c,h)}encodeCompressedGtinWithoutAI(o,c,h){for(let y=0;y<4;++y){let x=this.getGeneralDecoder().extractNumericValueFromBitArray(c+10*y,10);x/100===0&&o.append("0"),x/10===0&&o.append("0"),o.append(x)}gn.appendCheckDigit(o,h)}static appendCheckDigit(o,c){let h=0;for(let y=0;y<13;y++){let x=o.charAt(y+c).charCodeAt(0)-48;h+=(y&1)===0?3*x:x}h=10-h%10,h===10&&(h=0),o.append(h)}}gn.GTIN_SIZE=40;class Nr extends gn{constructor(o){super(o)}parseInformation(){let o=new ne;o.append("(01)");let c=o.length(),h=this.getGeneralDecoder().extractNumericValueFromBitArray(Nr.HEADER_SIZE,4);return o.append(h),this.encodeCompressedGtinWithoutAI(o,Nr.HEADER_SIZE+4,c),this.getGeneralDecoder().decodeAllCodes(o,Nr.HEADER_SIZE+44)}}Nr.HEADER_SIZE=4;class za extends Vn{constructor(o){super(o)}parseInformation(){let o=new ne;return this.getGeneralDecoder().decodeAllCodes(o,za.HEADER_SIZE)}}za.HEADER_SIZE=5;class Zo extends gn{constructor(o){super(o)}encodeCompressedWeight(o,c,h){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(c,h);this.addWeightCode(o,y);let x=this.checkWeight(y),E=1e5;for(let d=0;d<5;++d)x/E===0&&o.append("0"),E/=10;o.append(x)}}class Wr extends Zo{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()!=Wr.HEADER_SIZE+Zo.GTIN_SIZE+Wr.WEIGHT_SIZE)throw new he;let o=new ne;return this.encodeCompressedGtin(o,Wr.HEADER_SIZE),this.encodeCompressedWeight(o,Wr.HEADER_SIZE+Zo.GTIN_SIZE,Wr.WEIGHT_SIZE),o.toString()}}Wr.HEADER_SIZE=5,Wr.WEIGHT_SIZE=15;class Bl extends Wr{constructor(o){super(o)}addWeightCode(o,c){o.append("(3103)")}checkWeight(o){return o}}class Ri extends Wr{constructor(o){super(o)}addWeightCode(o,c){c<1e4?o.append("(3202)"):o.append("(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}class Pi extends gn{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<Pi.HEADER_SIZE+gn.GTIN_SIZE)throw new he;let o=new ne;this.encodeCompressedGtin(o,Pi.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(Pi.HEADER_SIZE+gn.GTIN_SIZE,Pi.LAST_DIGIT_SIZE);o.append("(392"),o.append(c),o.append(")");let h=this.getGeneralDecoder().decodeGeneralPurposeField(Pi.HEADER_SIZE+gn.GTIN_SIZE+Pi.LAST_DIGIT_SIZE,null);return o.append(h.getNewString()),o.toString()}}Pi.HEADER_SIZE=8,Pi.LAST_DIGIT_SIZE=2;class Qn extends gn{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<Qn.HEADER_SIZE+gn.GTIN_SIZE)throw new he;let o=new ne;this.encodeCompressedGtin(o,Qn.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(Qn.HEADER_SIZE+gn.GTIN_SIZE,Qn.LAST_DIGIT_SIZE);o.append("(393"),o.append(c),o.append(")");let h=this.getGeneralDecoder().extractNumericValueFromBitArray(Qn.HEADER_SIZE+gn.GTIN_SIZE+Qn.LAST_DIGIT_SIZE,Qn.FIRST_THREE_DIGITS_SIZE);h/100==0&&o.append("0"),h/10==0&&o.append("0"),o.append(h);let y=this.getGeneralDecoder().decodeGeneralPurposeField(Qn.HEADER_SIZE+gn.GTIN_SIZE+Qn.LAST_DIGIT_SIZE+Qn.FIRST_THREE_DIGITS_SIZE,null);return o.append(y.getNewString()),o.toString()}}Qn.HEADER_SIZE=8,Qn.LAST_DIGIT_SIZE=2,Qn.FIRST_THREE_DIGITS_SIZE=10;class Mt extends Zo{constructor(o,c,h){super(o),this.dateCode=h,this.firstAIdigits=c}parseInformation(){if(this.getInformation().getSize()!=Mt.HEADER_SIZE+Mt.GTIN_SIZE+Mt.WEIGHT_SIZE+Mt.DATE_SIZE)throw new he;let o=new ne;return this.encodeCompressedGtin(o,Mt.HEADER_SIZE),this.encodeCompressedWeight(o,Mt.HEADER_SIZE+Mt.GTIN_SIZE,Mt.WEIGHT_SIZE),this.encodeCompressedDate(o,Mt.HEADER_SIZE+Mt.GTIN_SIZE+Mt.WEIGHT_SIZE),o.toString()}encodeCompressedDate(o,c){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(c,Mt.DATE_SIZE);if(h==38400)return;o.append("("),o.append(this.dateCode),o.append(")");let y=h%32;h/=32;let x=h%12+1;h/=12;let E=h;E/10==0&&o.append("0"),o.append(E),x/10==0&&o.append("0"),o.append(x),y/10==0&&o.append("0"),o.append(y)}addWeightCode(o,c){o.append("("),o.append(this.firstAIdigits),o.append(c/1e5),o.append(")")}checkWeight(o){return o%1e5}}Mt.HEADER_SIZE=8,Mt.WEIGHT_SIZE=20,Mt.DATE_SIZE=16;function $r(Y){try{if(Y.get(1))return new Nr(Y);if(!Y.get(2))return new za(Y);switch(Ni.extractNumericValueFromBitArray(Y,1,4)){case 4:return new Bl(Y);case 5:return new Ri(Y)}switch(Ni.extractNumericValueFromBitArray(Y,1,5)){case 12:return new Pi(Y);case 13:return new Qn(Y)}switch(Ni.extractNumericValueFromBitArray(Y,1,7)){case 56:return new Mt(Y,"310","11");case 57:return new Mt(Y,"320","11");case 58:return new Mt(Y,"310","13");case 59:return new Mt(Y,"320","13");case 60:return new Mt(Y,"310","15");case 61:return new Mt(Y,"320","15");case 62:return new Mt(Y,"310","17");case 63:return new Mt(Y,"320","17")}}catch(o){throw console.log(o),new cn("unknown decoder: "+Y)}}class rr{constructor(o,c,h,y){this.leftchar=o,this.rightchar=c,this.finderpattern=h,this.maybeLast=y}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(o,c){return o instanceof rr?rr.equalsOrNull(o.leftchar,c.leftchar)&&rr.equalsOrNull(o.rightchar,c.rightchar)&&rr.equalsOrNull(o.finderpattern,c.finderpattern):!1}static equalsOrNull(o,c){return o===null?c===null:rr.equals(o,c)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ar{constructor(o,c,h){this.pairs=o,this.rowNumber=c,this.wasReversed=h}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,c){return o instanceof Ar?this.checkEqualitity(o,c)&&o.wasReversed===c.wasReversed:!1}checkEqualitity(o,c){if(!o||!c)return;let h;return o.forEach((y,x)=>{c.forEach(E=>{y.getLeftChar().getValue()===E.getLeftChar().getValue()&&y.getRightChar().getValue()===E.getRightChar().getValue()&&y.getFinderPatter().getValue()===E.getFinderPatter().getValue()&&(h=!0)})}),h}}class He extends ii{constructor(o){super(...arguments),this.pairs=new Array(He.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=o===!0}decodeRow(o,c,h){this.pairs.length=0,this.startFromEven=!1;try{return He.constructResult(this.decodeRow2pairs(o,c))}catch(y){this.verbose&&console.log(y)}return this.pairs.length=0,this.startFromEven=!0,He.constructResult(this.decodeRow2pairs(o,c))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,c){let h=!1;for(;!h;)try{this.pairs.push(this.retrieveNextPair(c,this.pairs,o))}catch(x){if(x instanceof he){if(!this.pairs.length)throw new he;h=!0}}if(this.checkChecksum())return this.pairs;let y;if(this.rows.length?y=!0:y=!1,this.storeRow(o,!1),y){let x=this.checkRowsBoolean(!1);if(x!=null||(x=this.checkRowsBoolean(!0),x!=null))return x}throw new he}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let c=null;try{c=this.checkRows(new Array,0)}catch(h){this.verbose&&console.log(h)}return o&&(this.rows=this.rows.reverse()),c}checkRows(o,c){for(let h=c;h<this.rows.length;h++){let y=this.rows[h];this.pairs.length=0;for(let E of o)this.pairs.push(E.getPairs());if(this.pairs.push(y.getPairs()),!He.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let x=new Array(o);x.push(y);try{return this.checkRows(x,h+1)}catch(E){this.verbose&&console.log(E)}}throw new he}static isValidSequence(o){for(let c of He.FINDER_PATTERN_SEQUENCES){if(o.length>c.length)continue;let h=!0;for(let y=0;y<o.length;y++)if(o[y].getFinderPattern().getValue()!=c[y]){h=!1;break}if(h)return!0}return!1}storeRow(o,c){let h=0,y=!1,x=!1;for(;h<this.rows.length;){let E=this.rows[h];if(E.getRowNumber()>o){x=E.isEquivalent(this.pairs);break}y=E.isEquivalent(this.pairs),h++}x||y||He.isPartialRow(this.pairs,this.rows)||(this.rows.push(h,new Ar(this.pairs,o,c)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,c){for(let h of c)if(h.getPairs().length!==o.length){for(let y of h.getPairs())for(let x of o)if(rr.equals(y,x))break}}static isPartialRow(o,c){for(let h of c){let y=!0;for(let x of o){let E=!1;for(let d of h.getPairs())if(x.equals(d)){E=!0;break}if(!E){y=!1;break}}if(y)return!0}return!1}getRows(){return this.rows}static constructResult(o){let c=ys.buildBitArray(o),y=$r(c).parseInformation(),x=o[0].getFinderPattern().getResultPoints(),E=o[o.length-1].getFinderPattern().getResultPoints(),d=[x[0],x[1],E[0],E[1]];return new Ge(y,null,null,d,qe.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),c=o.getLeftChar(),h=o.getRightChar();if(h==null)return!1;let y=h.getChecksumPortion(),x=2;for(let d=1;d<this.pairs.size();++d){let v=this.pairs.get(d);y+=v.getLeftChar().getChecksumPortion(),x++;let A=v.getRightChar();A!=null&&(y+=A.getChecksumPortion(),x++)}return y%=211,211*(x-4)+y==c.getValue()}static getNextSecondBar(o,c){let h;return o.get(c)?(h=o.getNextUnset(c),h=o.getNextSet(h)):(h=o.getNextSet(c),h=o.getNextUnset(h)),h}retrieveNextPair(o,c,h){let y=c.length%2==0;this.startFromEven&&(y=!y);let x,E=!0,d=-1;do this.findNextPair(o,c,d),x=this.parseFoundFinderPattern(o,h,y),x==null?d=He.getNextSecondBar(o,this.startEnd[0]):E=!1;while(E);let v=this.decodeDataCharacter(o,x,y,!0);if(!this.isEmptyPair(c)&&c[c.length-1].mustBeLast())throw new he;let A;try{A=this.decodeDataCharacter(o,x,y,!1)}catch(I){A=null,this.verbose&&console.log(I)}return new rr(v,A,x,!0)}isEmptyPair(o){return o.length===0}findNextPair(o,c,h){let y=this.getDecodeFinderCounters();y[0]=0,y[1]=0,y[2]=0,y[3]=0;let x=o.getSize(),E;h>=0?E=h:this.isEmptyPair(c)?E=0:E=c[c.length-1].getFinderPattern().getStartEnd()[1];let d=c.length%2!=0;this.startFromEven&&(d=!d);let v=!1;for(;E<x&&(v=!o.get(E),!!v);)E++;let A=0,I=E;for(let N=E;N<x;N++)if(o.get(N)!=v)y[A]++;else{if(A==3){if(d&&He.reverseCounters(y),He.isFinderPattern(y)){this.startEnd[0]=I,this.startEnd[1]=N;return}d&&He.reverseCounters(y),I+=y[0]+y[1],y[0]=y[2],y[1]=y[3],y[2]=0,y[3]=0,A--}else A++;y[A]=1,v=!v}throw new he}static reverseCounters(o){let c=o.length;for(let h=0;h<c/2;++h){let y=o[h];o[h]=o[c-h-1],o[c-h-1]=y}}parseFoundFinderPattern(o,c,h){let y,x,E;if(h){let A=this.startEnd[0]-1;for(;A>=0&&!o.get(A);)A--;A++,y=this.startEnd[0]-A,x=A,E=this.startEnd[1]}else x=this.startEnd[0],E=o.getNextUnset(this.startEnd[1]+1),y=E-this.startEnd[1];let d=this.getDecodeFinderCounters();M.arraycopy(d,0,d,1,d.length-1),d[0]=y;let v;try{v=this.parseFinderValue(d,He.FINDER_PATTERNS)}catch{return null}return new qi(v,[x,E],x,E,c)}decodeDataCharacter(o,c,h,y){let x=this.getDataCharacterCounters();for(let je=0;je<x.length;je++)x[je]=0;if(y)He.recordPatternInReverse(o,c.getStartEnd()[0],x);else{He.recordPattern(o,c.getStartEnd()[1],x);for(let je=0,Ke=x.length-1;je<Ke;je++,Ke--){let ut=x[je];x[je]=x[Ke],x[Ke]=ut}}let E=17,d=xt.sum(new Int32Array(x))/E,v=(c.getStartEnd()[1]-c.getStartEnd()[0])/15;if(Math.abs(d-v)/v>.3)throw new he;let A=this.getOddCounts(),I=this.getEvenCounts(),N=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let je=0;je<x.length;je++){let Ke=1*x[je]/d,ut=Ke+.5;if(ut<1){if(Ke<.3)throw new he;ut=1}else if(ut>8){if(Ke>8.7)throw new he;ut=8}let dt=je/2;(je&1)==0?(A[dt]=ut,N[dt]=Ke-ut):(I[dt]=ut,k[dt]=Ke-ut)}this.adjustOddEvenCounts(E);let F=4*c.getValue()+(h?0:2)+(y?0:1)-1,G=0,X=0;for(let je=A.length-1;je>=0;je--){if(He.isNotA1left(c,h,y)){let Ke=He.WEIGHTS[F][2*je];X+=A[je]*Ke}G+=A[je]}let re=0;for(let je=I.length-1;je>=0;je--)if(He.isNotA1left(c,h,y)){let Ke=He.WEIGHTS[F][2*je+1];re+=I[je]*Ke}let te=X+re;if((G&1)!=0||G>13||G<4)throw new he;let oe=(13-G)/2,fe=He.SYMBOL_WIDEST[oe],le=9-fe,ge=ra.getRSSvalue(A,fe,!0),me=ra.getRSSvalue(I,le,!1),_e=He.EVEN_TOTAL_SUBSET[oe],Ne=He.GSUM[oe],xe=ge*_e+me+Ne;return new Hr(xe,te)}static isNotA1left(o,c,h){return!(o.getValue()==0&&c&&h)}adjustOddEvenCounts(o){let c=xt.sum(new Int32Array(this.getOddCounts())),h=xt.sum(new Int32Array(this.getEvenCounts())),y=!1,x=!1;c>13?x=!0:c<4&&(y=!0);let E=!1,d=!1;h>13?d=!0:h<4&&(E=!0);let v=c+h-o,A=(c&1)==1,I=(h&1)==0;if(v==1)if(A){if(I)throw new he;x=!0}else{if(!I)throw new he;d=!0}else if(v==-1)if(A){if(I)throw new he;y=!0}else{if(!I)throw new he;E=!0}else if(v==0){if(A){if(!I)throw new he;c<h?(y=!0,d=!0):(x=!0,E=!0)}else if(I)throw new he}else throw new he;if(y){if(x)throw new he;He.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(x&&He.decrement(this.getOddCounts(),this.getOddRoundingErrors()),E){if(d)throw new he;He.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&He.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}He.SYMBOL_WIDEST=[7,5,4,3,1],He.EVEN_TOTAL_SUBSET=[4,20,52,104,204],He.GSUM=[0,348,1388,2948,3988],He.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],He.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],He.FINDER_PAT_A=0,He.FINDER_PAT_B=1,He.FINDER_PAT_C=2,He.FINDER_PAT_D=3,He.FINDER_PAT_E=4,He.FINDER_PAT_F=5,He.FINDER_PATTERN_SEQUENCES=[[He.FINDER_PAT_A,He.FINDER_PAT_A],[He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B],[He.FINDER_PAT_A,He.FINDER_PAT_C,He.FINDER_PAT_B,He.FINDER_PAT_D],[He.FINDER_PAT_A,He.FINDER_PAT_E,He.FINDER_PAT_B,He.FINDER_PAT_D,He.FINDER_PAT_C],[He.FINDER_PAT_A,He.FINDER_PAT_E,He.FINDER_PAT_B,He.FINDER_PAT_D,He.FINDER_PAT_D,He.FINDER_PAT_F],[He.FINDER_PAT_A,He.FINDER_PAT_E,He.FINDER_PAT_B,He.FINDER_PAT_D,He.FINDER_PAT_E,He.FINDER_PAT_F,He.FINDER_PAT_F],[He.FINDER_PAT_A,He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B,He.FINDER_PAT_C,He.FINDER_PAT_C,He.FINDER_PAT_D,He.FINDER_PAT_D],[He.FINDER_PAT_A,He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B,He.FINDER_PAT_C,He.FINDER_PAT_C,He.FINDER_PAT_D,He.FINDER_PAT_E,He.FINDER_PAT_E],[He.FINDER_PAT_A,He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B,He.FINDER_PAT_C,He.FINDER_PAT_C,He.FINDER_PAT_D,He.FINDER_PAT_E,He.FINDER_PAT_F,He.FINDER_PAT_F],[He.FINDER_PAT_A,He.FINDER_PAT_A,He.FINDER_PAT_B,He.FINDER_PAT_B,He.FINDER_PAT_C,He.FINDER_PAT_D,He.FINDER_PAT_D,He.FINDER_PAT_E,He.FINDER_PAT_E,He.FINDER_PAT_F,He.FINDER_PAT_F]],He.MAX_PAIRS=11;class uo extends Hr{constructor(o,c,h){super(o,c),this.count=0,this.finderPattern=h}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Cn extends ii{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,c,h){const y=this.decodePair(c,!1,o,h);Cn.addOrTally(this.possibleLeftPairs,y),c.reverse();let x=this.decodePair(c,!0,o,h);Cn.addOrTally(this.possibleRightPairs,x),c.reverse();for(let E of this.possibleLeftPairs)if(E.getCount()>1){for(let d of this.possibleRightPairs)if(d.getCount()>1&&Cn.checkChecksum(E,d))return Cn.constructResult(E,d)}throw new he}static addOrTally(o,c){if(c==null)return;let h=!1;for(let y of o)if(y.getValue()===c.getValue()){y.incrementCount(),h=!0;break}h||o.push(c)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,c){let h=4537077*o.getValue()+c.getValue(),y=new String(h).toString(),x=new ne;for(let A=13-y.length;A>0;A--)x.append("0");x.append(y);let E=0;for(let A=0;A<13;A++){let I=x.charAt(A).charCodeAt(0)-48;E+=(A&1)===0?3*I:I}E=10-E%10,E===10&&(E=0),x.append(E.toString());let d=o.getFinderPattern().getResultPoints(),v=c.getFinderPattern().getResultPoints();return new Ge(x.toString(),null,0,[d[0],d[1],v[0],v[1]],qe.RSS_14,new Date().getTime())}static checkChecksum(o,c){let h=(o.getChecksumPortion()+16*c.getChecksumPortion())%79,y=9*o.getFinderPattern().getValue()+c.getFinderPattern().getValue();return y>72&&y--,y>8&&y--,h===y}decodePair(o,c,h,y){try{let x=this.findFinderPattern(o,c),E=this.parseFoundFinderPattern(o,h,c,x),d=y==null?null:y.get(Z.NEED_RESULT_POINT_CALLBACK);if(d!=null){let I=(x[0]+x[1])/2;c&&(I=o.getSize()-1-I),d.foundPossibleResultPoint(new it(I,h))}let v=this.decodeDataCharacter(o,E,!0),A=this.decodeDataCharacter(o,E,!1);return new uo(1597*v.getValue()+A.getValue(),v.getChecksumPortion()+4*A.getChecksumPortion(),E)}catch{return null}}decodeDataCharacter(o,c,h){let y=this.getDataCharacterCounters();for(let re=0;re<y.length;re++)y[re]=0;if(h)In.recordPatternInReverse(o,c.getStartEnd()[0],y);else{In.recordPattern(o,c.getStartEnd()[1]+1,y);for(let re=0,te=y.length-1;re<te;re++,te--){let oe=y[re];y[re]=y[te],y[te]=oe}}let x=h?16:15,E=xt.sum(new Int32Array(y))/x,d=this.getOddCounts(),v=this.getEvenCounts(),A=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let re=0;re<y.length;re++){let te=y[re]/E,oe=Math.floor(te+.5);oe<1?oe=1:oe>8&&(oe=8);let fe=Math.floor(re/2);(re&1)===0?(d[fe]=oe,A[fe]=te-oe):(v[fe]=oe,I[fe]=te-oe)}this.adjustOddEvenCounts(h,x);let N=0,k=0;for(let re=d.length-1;re>=0;re--)k*=9,k+=d[re],N+=d[re];let F=0,G=0;for(let re=v.length-1;re>=0;re--)F*=9,F+=v[re],G+=v[re];let X=k+3*F;if(h){if((N&1)!==0||N>12||N<4)throw new he;let re=(12-N)/2,te=Cn.OUTSIDE_ODD_WIDEST[re],oe=9-te,fe=ra.getRSSvalue(d,te,!1),le=ra.getRSSvalue(v,oe,!0),ge=Cn.OUTSIDE_EVEN_TOTAL_SUBSET[re],me=Cn.OUTSIDE_GSUM[re];return new Hr(fe*ge+le+me,X)}else{if((G&1)!==0||G>10||G<4)throw new he;let re=(10-G)/2,te=Cn.INSIDE_ODD_WIDEST[re],oe=9-te,fe=ra.getRSSvalue(d,te,!0),le=ra.getRSSvalue(v,oe,!1),ge=Cn.INSIDE_ODD_TOTAL_SUBSET[re],me=Cn.INSIDE_GSUM[re];return new Hr(le*ge+fe+me,X)}}findFinderPattern(o,c){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let y=o.getSize(),x=!1,E=0;for(;E<y&&(x=!o.get(E),c!==x);)E++;let d=0,v=E;for(let A=E;A<y;A++)if(o.get(A)!==x)h[d]++;else{if(d===3){if(ii.isFinderPattern(h))return[v,A];v+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,d--}else d++;h[d]=1,x=!x}throw new he}parseFoundFinderPattern(o,c,h,y){let x=o.get(y[0]),E=y[0]-1;for(;E>=0&&x!==o.get(E);)E--;E++;const d=y[0]-E,v=this.getDecodeFinderCounters(),A=new Int32Array(v.length);M.arraycopy(v,0,A,1,v.length-1),A[0]=d;const I=this.parseFinderValue(A,Cn.FINDER_PATTERNS);let N=E,k=y[1];return h&&(N=o.getSize()-1-N,k=o.getSize()-1-k),new qi(I,[E,y[1]],N,k,c)}adjustOddEvenCounts(o,c){let h=xt.sum(new Int32Array(this.getOddCounts())),y=xt.sum(new Int32Array(this.getEvenCounts())),x=!1,E=!1,d=!1,v=!1;o?(h>12?E=!0:h<4&&(x=!0),y>12?v=!0:y<4&&(d=!0)):(h>11?E=!0:h<5&&(x=!0),y>10?v=!0:y<4&&(d=!0));let A=h+y-c,I=(h&1)===(o?1:0),N=(y&1)===1;if(A===1)if(I){if(N)throw new he;E=!0}else{if(!N)throw new he;v=!0}else if(A===-1)if(I){if(N)throw new he;x=!0}else{if(!N)throw new he;d=!0}else if(A===0){if(I){if(!N)throw new he;h<y?(x=!0,v=!0):(E=!0,d=!0)}else if(N)throw new he}else throw new he;if(x){if(E)throw new he;ii.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(E&&ii.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(v)throw new he;ii.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&ii.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Cn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Cn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Cn.OUTSIDE_GSUM=[0,161,961,2015,2715],Cn.INSIDE_GSUM=[0,336,1036,1516],Cn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Cn.INSIDE_ODD_WIDEST=[2,4,6,8],Cn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class wi extends In{constructor(o,c){super(),this.readers=[],this.verbose=c===!0;const h=o?o.get(Z.POSSIBLE_FORMATS):null,y=o&&o.get(Z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;h?((h.includes(qe.EAN_13)||h.includes(qe.UPC_A)||h.includes(qe.EAN_8)||h.includes(qe.UPC_E))&&this.readers.push(new Ll(o)),h.includes(qe.CODE_39)&&this.readers.push(new fn(y)),h.includes(qe.CODE_128)&&this.readers.push(new at),h.includes(qe.ITF)&&this.readers.push(new Je),h.includes(qe.RSS_14)&&this.readers.push(new Cn),h.includes(qe.RSS_EXPANDED)&&this.readers.push(new He(this.verbose))):(this.readers.push(new Ll(o)),this.readers.push(new fn),this.readers.push(new Ll(o)),this.readers.push(new at),this.readers.push(new Je),this.readers.push(new Cn),this.readers.push(new He(this.verbose)))}decodeRow(o,c,h){for(let y=0;y<this.readers.length;y++)try{return this.readers[y].decodeRow(o,c,h)}catch{}throw new he}reset(){this.readers.forEach(o=>o.reset())}}class ss extends Xe{constructor(o=500,c){super(new wi(c),o,c)}}class yn{constructor(o,c,h){this.ecCodewords=o,this.ecBlocks=[c],h&&this.ecBlocks.push(h)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ln{constructor(o,c){this.count=o,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class nn{constructor(o,c,h,y,x,E){this.versionNumber=o,this.symbolSizeRows=c,this.symbolSizeColumns=h,this.dataRegionSizeRows=y,this.dataRegionSizeColumns=x,this.ecBlocks=E;let d=0;const v=E.getECCodewords(),A=E.getECBlocks();for(let I of A)d+=I.getCount()*(I.getDataCodewords()+v);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,c){if((o&1)!==0||(c&1)!==0)throw new V;for(let h of nn.VERSIONS)if(h.symbolSizeRows===o&&h.symbolSizeColumns===c)return h;throw new V}toString(){return""+this.versionNumber}static buildVersions(){return[new nn(1,10,10,8,8,new yn(5,new ln(1,3))),new nn(2,12,12,10,10,new yn(7,new ln(1,5))),new nn(3,14,14,12,12,new yn(10,new ln(1,8))),new nn(4,16,16,14,14,new yn(12,new ln(1,12))),new nn(5,18,18,16,16,new yn(14,new ln(1,18))),new nn(6,20,20,18,18,new yn(18,new ln(1,22))),new nn(7,22,22,20,20,new yn(20,new ln(1,30))),new nn(8,24,24,22,22,new yn(24,new ln(1,36))),new nn(9,26,26,24,24,new yn(28,new ln(1,44))),new nn(10,32,32,14,14,new yn(36,new ln(1,62))),new nn(11,36,36,16,16,new yn(42,new ln(1,86))),new nn(12,40,40,18,18,new yn(48,new ln(1,114))),new nn(13,44,44,20,20,new yn(56,new ln(1,144))),new nn(14,48,48,22,22,new yn(68,new ln(1,174))),new nn(15,52,52,24,24,new yn(42,new ln(2,102))),new nn(16,64,64,14,14,new yn(56,new ln(2,140))),new nn(17,72,72,16,16,new yn(36,new ln(4,92))),new nn(18,80,80,18,18,new yn(48,new ln(4,114))),new nn(19,88,88,20,20,new yn(56,new ln(4,144))),new nn(20,96,96,22,22,new yn(68,new ln(4,174))),new nn(21,104,104,24,24,new yn(56,new ln(6,136))),new nn(22,120,120,18,18,new yn(68,new ln(6,175))),new nn(23,132,132,20,20,new yn(62,new ln(8,163))),new nn(24,144,144,22,22,new yn(62,new ln(8,156),new ln(2,155))),new nn(25,8,18,6,16,new yn(7,new ln(1,5))),new nn(26,8,32,6,14,new yn(11,new ln(1,10))),new nn(27,12,26,10,24,new yn(14,new ln(1,16))),new nn(28,12,36,10,16,new yn(18,new ln(1,22))),new nn(29,16,36,14,16,new yn(24,new ln(1,32))),new nn(30,16,48,14,22,new yn(28,new ln(1,49)))]}}nn.VERSIONS=nn.buildVersions();class Zt{constructor(o){const c=o.getHeight();if(c<8||c>144||(c&1)!==0)throw new V;this.version=Zt.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new be(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){const c=o.getHeight(),h=o.getWidth();return nn.getVersionForDimensions(c,h)}readCodewords(){const o=new Int8Array(this.version.getTotalCodewords());let c=0,h=4,y=0;const x=this.mappingBitMatrix.getHeight(),E=this.mappingBitMatrix.getWidth();let d=!1,v=!1,A=!1,I=!1;do if(h===x&&y===0&&!d)o[c++]=this.readCorner1(x,E)&255,h-=2,y+=2,d=!0;else if(h===x-2&&y===0&&(E&3)!==0&&!v)o[c++]=this.readCorner2(x,E)&255,h-=2,y+=2,v=!0;else if(h===x+4&&y===2&&(E&7)===0&&!A)o[c++]=this.readCorner3(x,E)&255,h-=2,y+=2,A=!0;else if(h===x-2&&y===0&&(E&7)===4&&!I)o[c++]=this.readCorner4(x,E)&255,h-=2,y+=2,I=!0;else{do h<x&&y>=0&&!this.readMappingMatrix.get(y,h)&&(o[c++]=this.readUtah(h,y,x,E)&255),h-=2,y+=2;while(h>=0&&y<E);h+=1,y+=3;do h>=0&&y<E&&!this.readMappingMatrix.get(y,h)&&(o[c++]=this.readUtah(h,y,x,E)&255),h+=2,y-=2;while(h<x&&y>=0);h+=3,y+=1}while(h<x||y<E);if(c!==this.version.getTotalCodewords())throw new V;return o}readModule(o,c,h,y){return o<0&&(o+=h,c+=4-(h+4&7)),c<0&&(c+=y,o+=4-(y+4&7)),this.readMappingMatrix.set(c,o),this.mappingBitMatrix.get(c,o)}readUtah(o,c,h,y){let x=0;return this.readModule(o-2,c-2,h,y)&&(x|=1),x<<=1,this.readModule(o-2,c-1,h,y)&&(x|=1),x<<=1,this.readModule(o-1,c-2,h,y)&&(x|=1),x<<=1,this.readModule(o-1,c-1,h,y)&&(x|=1),x<<=1,this.readModule(o-1,c,h,y)&&(x|=1),x<<=1,this.readModule(o,c-2,h,y)&&(x|=1),x<<=1,this.readModule(o,c-1,h,y)&&(x|=1),x<<=1,this.readModule(o,c,h,y)&&(x|=1),x}readCorner1(o,c){let h=0;return this.readModule(o-1,0,o,c)&&(h|=1),h<<=1,this.readModule(o-1,1,o,c)&&(h|=1),h<<=1,this.readModule(o-1,2,o,c)&&(h|=1),h<<=1,this.readModule(0,c-2,o,c)&&(h|=1),h<<=1,this.readModule(0,c-1,o,c)&&(h|=1),h<<=1,this.readModule(1,c-1,o,c)&&(h|=1),h<<=1,this.readModule(2,c-1,o,c)&&(h|=1),h<<=1,this.readModule(3,c-1,o,c)&&(h|=1),h}readCorner2(o,c){let h=0;return this.readModule(o-3,0,o,c)&&(h|=1),h<<=1,this.readModule(o-2,0,o,c)&&(h|=1),h<<=1,this.readModule(o-1,0,o,c)&&(h|=1),h<<=1,this.readModule(0,c-4,o,c)&&(h|=1),h<<=1,this.readModule(0,c-3,o,c)&&(h|=1),h<<=1,this.readModule(0,c-2,o,c)&&(h|=1),h<<=1,this.readModule(0,c-1,o,c)&&(h|=1),h<<=1,this.readModule(1,c-1,o,c)&&(h|=1),h}readCorner3(o,c){let h=0;return this.readModule(o-1,0,o,c)&&(h|=1),h<<=1,this.readModule(o-1,c-1,o,c)&&(h|=1),h<<=1,this.readModule(0,c-3,o,c)&&(h|=1),h<<=1,this.readModule(0,c-2,o,c)&&(h|=1),h<<=1,this.readModule(0,c-1,o,c)&&(h|=1),h<<=1,this.readModule(1,c-3,o,c)&&(h|=1),h<<=1,this.readModule(1,c-2,o,c)&&(h|=1),h<<=1,this.readModule(1,c-1,o,c)&&(h|=1),h}readCorner4(o,c){let h=0;return this.readModule(o-3,0,o,c)&&(h|=1),h<<=1,this.readModule(o-2,0,o,c)&&(h|=1),h<<=1,this.readModule(o-1,0,o,c)&&(h|=1),h<<=1,this.readModule(0,c-2,o,c)&&(h|=1),h<<=1,this.readModule(0,c-1,o,c)&&(h|=1),h<<=1,this.readModule(1,c-1,o,c)&&(h|=1),h<<=1,this.readModule(2,c-1,o,c)&&(h|=1),h<<=1,this.readModule(3,c-1,o,c)&&(h|=1),h}extractDataRegion(o){const c=this.version.getSymbolSizeRows(),h=this.version.getSymbolSizeColumns();if(o.getHeight()!==c)throw new _("Dimension of bitMatrix must match the version size");const y=this.version.getDataRegionSizeRows(),x=this.version.getDataRegionSizeColumns(),E=c/y|0,d=h/x|0,v=E*y,A=d*x,I=new be(A,v);for(let N=0;N<E;++N){const k=N*y;for(let F=0;F<d;++F){const G=F*x;for(let X=0;X<y;++X){const re=N*(y+2)+1+X,te=k+X;for(let oe=0;oe<x;++oe){const fe=F*(x+2)+1+oe;if(o.get(fe,re)){const le=G+oe;I.set(le,te)}}}}}return I}}class Di{constructor(o,c){this.numDataCodewords=o,this.codewords=c}static getDataBlocks(o,c){const h=c.getECBlocks();let y=0;const x=h.getECBlocks();for(let X of x)y+=X.getCount();const E=new Array(y);let d=0;for(let X of x)for(let re=0;re<X.getCount();re++){const te=X.getDataCodewords(),oe=h.getECCodewords()+te;E[d++]=new Di(te,new Uint8Array(oe))}const A=E[0].codewords.length-h.getECCodewords(),I=A-1;let N=0;for(let X=0;X<I;X++)for(let re=0;re<d;re++)E[re].codewords[X]=o[N++];const k=c.getVersionNumber()===24,F=k?8:d;for(let X=0;X<F;X++)E[X].codewords[A-1]=o[N++];const G=E[0].codewords.length;for(let X=A;X<G;X++)for(let re=0;re<d;re++){const te=k?(re+8)%d:re,oe=k&&te>7?X-1:X;E[te].codewords[oe]=o[N++]}if(N!==o.length)throw new _;return E}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Sr{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new _(""+o);let c=0,h=this.bitOffset,y=this.byteOffset;const x=this.bytes;if(h>0){const E=8-h,d=o<E?o:E,v=E-d,A=255>>8-d<<v;c=(x[y]&A)>>v,o-=d,h+=d,h===8&&(h=0,y++)}if(o>0){for(;o>=8;)c=c<<8|x[y]&255,y++,o-=8;if(o>0){const E=8-o,d=255>>E<<E;c=c<<o|(x[y]&d)>>E,h+=o}}return this.bitOffset=h,this.byteOffset=y,c}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var rn;(function(Y){Y[Y.PAD_ENCODE=0]="PAD_ENCODE",Y[Y.ASCII_ENCODE=1]="ASCII_ENCODE",Y[Y.C40_ENCODE=2]="C40_ENCODE",Y[Y.TEXT_ENCODE=3]="TEXT_ENCODE",Y[Y.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",Y[Y.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",Y[Y.BASE256_ENCODE=6]="BASE256_ENCODE"})(rn||(rn={}));class ai{static decode(o){const c=new Sr(o),h=new ne,y=new ne,x=new Array;let E=rn.ASCII_ENCODE;do if(E===rn.ASCII_ENCODE)E=this.decodeAsciiSegment(c,h,y);else{switch(E){case rn.C40_ENCODE:this.decodeC40Segment(c,h);break;case rn.TEXT_ENCODE:this.decodeTextSegment(c,h);break;case rn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(c,h);break;case rn.EDIFACT_ENCODE:this.decodeEdifactSegment(c,h);break;case rn.BASE256_ENCODE:this.decodeBase256Segment(c,h,x);break;default:throw new V}E=rn.ASCII_ENCODE}while(E!==rn.PAD_ENCODE&&c.available()>0);return y.length()>0&&h.append(y.toString()),new Se(o,h.toString(),x.length===0?null:x,null)}static decodeAsciiSegment(o,c,h){let y=!1;do{let x=o.readBits(8);if(x===0)throw new V;if(x<=128)return y&&(x+=128),c.append(String.fromCharCode(x-1)),rn.ASCII_ENCODE;if(x===129)return rn.PAD_ENCODE;if(x<=229){const E=x-130;E<10&&c.append("0"),c.append(""+E)}else switch(x){case 230:return rn.C40_ENCODE;case 231:return rn.BASE256_ENCODE;case 232:c.append("");break;case 233:case 234:break;case 235:y=!0;break;case 236:c.append("[)>05"),h.insert(0,"");break;case 237:c.append("[)>06"),h.insert(0,"");break;case 238:return rn.ANSIX12_ENCODE;case 239:return rn.TEXT_ENCODE;case 240:return rn.EDIFACT_ENCODE;case 241:break;default:if(x!==254||o.available()!==0)throw new V;break}}while(o.available()>0);return rn.ASCII_ENCODE}static decodeC40Segment(o,c){let h=!1;const y=[];let x=0;do{if(o.available()===8)return;const E=o.readBits(8);if(E===254)return;this.parseTwoBytes(E,o.readBits(8),y);for(let d=0;d<3;d++){const v=y[d];switch(x){case 0:if(v<3)x=v+1;else if(v<this.C40_BASIC_SET_CHARS.length){const A=this.C40_BASIC_SET_CHARS[v];h?(c.append(String.fromCharCode(A.charCodeAt(0)+128)),h=!1):c.append(A)}else throw new V;break;case 1:h?(c.append(String.fromCharCode(v+128)),h=!1):c.append(String.fromCharCode(v)),x=0;break;case 2:if(v<this.C40_SHIFT2_SET_CHARS.length){const A=this.C40_SHIFT2_SET_CHARS[v];h?(c.append(String.fromCharCode(A.charCodeAt(0)+128)),h=!1):c.append(A)}else switch(v){case 27:c.append("");break;case 30:h=!0;break;default:throw new V}x=0;break;case 3:h?(c.append(String.fromCharCode(v+224)),h=!1):c.append(String.fromCharCode(v+96)),x=0;break;default:throw new V}}}while(o.available()>0)}static decodeTextSegment(o,c){let h=!1,y=[],x=0;do{if(o.available()===8)return;const E=o.readBits(8);if(E===254)return;this.parseTwoBytes(E,o.readBits(8),y);for(let d=0;d<3;d++){const v=y[d];switch(x){case 0:if(v<3)x=v+1;else if(v<this.TEXT_BASIC_SET_CHARS.length){const A=this.TEXT_BASIC_SET_CHARS[v];h?(c.append(String.fromCharCode(A.charCodeAt(0)+128)),h=!1):c.append(A)}else throw new V;break;case 1:h?(c.append(String.fromCharCode(v+128)),h=!1):c.append(String.fromCharCode(v)),x=0;break;case 2:if(v<this.TEXT_SHIFT2_SET_CHARS.length){const A=this.TEXT_SHIFT2_SET_CHARS[v];h?(c.append(String.fromCharCode(A.charCodeAt(0)+128)),h=!1):c.append(A)}else switch(v){case 27:c.append("");break;case 30:h=!0;break;default:throw new V}x=0;break;case 3:if(v<this.TEXT_SHIFT3_SET_CHARS.length){const A=this.TEXT_SHIFT3_SET_CHARS[v];h?(c.append(String.fromCharCode(A.charCodeAt(0)+128)),h=!1):c.append(A),x=0}else throw new V;break;default:throw new V}}}while(o.available()>0)}static decodeAnsiX12Segment(o,c){const h=[];do{if(o.available()===8)return;const y=o.readBits(8);if(y===254)return;this.parseTwoBytes(y,o.readBits(8),h);for(let x=0;x<3;x++){const E=h[x];switch(E){case 0:c.append("\r");break;case 1:c.append("*");break;case 2:c.append(">");break;case 3:c.append(" ");break;default:if(E<14)c.append(String.fromCharCode(E+44));else if(E<40)c.append(String.fromCharCode(E+51));else throw new V;break}}}while(o.available()>0)}static parseTwoBytes(o,c,h){let y=(o<<8)+c-1,x=Math.floor(y/1600);h[0]=x,y-=x*1600,x=Math.floor(y/40),h[1]=x,h[2]=y-x*40}static decodeEdifactSegment(o,c){do{if(o.available()<=16)return;for(let h=0;h<4;h++){let y=o.readBits(6);if(y===31){const x=8-o.getBitOffset();x!==8&&o.readBits(x);return}(y&32)===0&&(y|=64),c.append(String.fromCharCode(y))}}while(o.available()>0)}static decodeBase256Segment(o,c,h){let y=1+o.getByteOffset();const x=this.unrandomize255State(o.readBits(8),y++);let E;if(x===0?E=o.available()/8|0:x<250?E=x:E=250*(x-249)+this.unrandomize255State(o.readBits(8),y++),E<0)throw new V;const d=new Uint8Array(E);for(let v=0;v<E;v++){if(o.available()<8)throw new V;d[v]=this.unrandomize255State(o.readBits(8),y++)}h.push(d);try{c.append(ie.decode(d,Q.ISO88591))}catch(v){throw new cn("Platform does not support required encoding: "+v.message)}}static unrandomize255State(o,c){const h=149*c%255+1,y=o-h;return y>=0?y:y+256}}ai.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ai.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ai.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ai.TEXT_SHIFT2_SET_CHARS=ai.C40_SHIFT2_SET_CHARS,ai.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Jo{constructor(){this.rsDecoder=new Ln(pt.DATA_MATRIX_FIELD_256)}decode(o){const c=new Zt(o),h=c.getVersion(),y=c.readCodewords(),x=Di.getDataBlocks(y,h);let E=0;for(let A of x)E+=A.getNumDataCodewords();const d=new Uint8Array(E),v=x.length;for(let A=0;A<v;A++){const I=x[A],N=I.getCodewords(),k=I.getNumDataCodewords();this.correctErrors(N,k);for(let F=0;F<k;F++)d[F*v+A]=N[F]}return ai.decode(d)}correctErrors(o,c){const h=new Int32Array(o);try{this.rsDecoder.decode(h,o.length-c)}catch{throw new R}for(let y=0;y<c;y++)o[y]=h[y]}}class Ut{constructor(o){this.image=o,this.rectangleDetector=new hr(this.image)}detect(){const o=this.rectangleDetector.detect();let c=this.detectSolid1(o);if(c=this.detectSolid2(c),c[3]=this.correctTopRight(c),!c[3])throw new he;c=this.shiftToModuleCenter(c);const h=c[0],y=c[1],x=c[2],E=c[3];let d=this.transitionsBetween(h,E)+1,v=this.transitionsBetween(x,E)+1;(d&1)===1&&(d+=1),(v&1)===1&&(v+=1),4*d<7*v&&4*v<7*d&&(d=v=Math.max(d,v));let A=Ut.sampleGrid(this.image,h,y,x,E,d,v);return new na(A,[h,y,x,E])}static shiftPoint(o,c,h){let y=(c.getX()-o.getX())/(h+1),x=(c.getY()-o.getY())/(h+1);return new it(o.getX()+y,o.getY()+x)}static moveAway(o,c,h){let y=o.getX(),x=o.getY();return y<c?y-=1:y+=1,x<h?x-=1:x+=1,new it(y,x)}detectSolid1(o){let c=o[0],h=o[1],y=o[3],x=o[2],E=this.transitionsBetween(c,h),d=this.transitionsBetween(h,y),v=this.transitionsBetween(y,x),A=this.transitionsBetween(x,c),I=E,N=[x,c,h,y];return I>d&&(I=d,N[0]=c,N[1]=h,N[2]=y,N[3]=x),I>v&&(I=v,N[0]=h,N[1]=y,N[2]=x,N[3]=c),I>A&&(N[0]=y,N[1]=x,N[2]=c,N[3]=h),N}detectSolid2(o){let c=o[0],h=o[1],y=o[2],x=o[3],E=this.transitionsBetween(c,x),d=Ut.shiftPoint(h,y,(E+1)*4),v=Ut.shiftPoint(y,h,(E+1)*4),A=this.transitionsBetween(d,c),I=this.transitionsBetween(v,x);return A<I?(o[0]=c,o[1]=h,o[2]=y,o[3]=x):(o[0]=h,o[1]=y,o[2]=x,o[3]=c),o}correctTopRight(o){let c=o[0],h=o[1],y=o[2],x=o[3],E=this.transitionsBetween(c,x),d=this.transitionsBetween(h,x),v=Ut.shiftPoint(c,h,(d+1)*4),A=Ut.shiftPoint(y,h,(E+1)*4);E=this.transitionsBetween(v,x),d=this.transitionsBetween(A,x);let I=new it(x.getX()+(y.getX()-h.getX())/(E+1),x.getY()+(y.getY()-h.getY())/(E+1)),N=new it(x.getX()+(c.getX()-h.getX())/(d+1),x.getY()+(c.getY()-h.getY())/(d+1));if(!this.isValid(I))return this.isValid(N)?N:null;if(!this.isValid(N))return I;let k=this.transitionsBetween(v,I)+this.transitionsBetween(A,I),F=this.transitionsBetween(v,N)+this.transitionsBetween(A,N);return k>F?I:N}shiftToModuleCenter(o){let c=o[0],h=o[1],y=o[2],x=o[3],E=this.transitionsBetween(c,x)+1,d=this.transitionsBetween(y,x)+1,v=Ut.shiftPoint(c,h,d*4),A=Ut.shiftPoint(y,h,E*4);E=this.transitionsBetween(v,x)+1,d=this.transitionsBetween(A,x)+1,(E&1)===1&&(E+=1),(d&1)===1&&(d+=1);let I=(c.getX()+h.getX()+y.getX()+x.getX())/4,N=(c.getY()+h.getY()+y.getY()+x.getY())/4;c=Ut.moveAway(c,I,N),h=Ut.moveAway(h,I,N),y=Ut.moveAway(y,I,N),x=Ut.moveAway(x,I,N);let k,F;return v=Ut.shiftPoint(c,h,d*4),v=Ut.shiftPoint(v,x,E*4),k=Ut.shiftPoint(h,c,d*4),k=Ut.shiftPoint(k,y,E*4),A=Ut.shiftPoint(y,x,d*4),A=Ut.shiftPoint(A,h,E*4),F=Ut.shiftPoint(x,y,d*4),F=Ut.shiftPoint(F,c,E*4),[v,k,A,F]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,c,h,y,x,E,d){return bi.getInstance().sampleGrid(o,E,d,.5,.5,E-.5,.5,E-.5,d-.5,.5,d-.5,c.getX(),c.getY(),x.getX(),x.getY(),y.getX(),y.getY(),h.getX(),h.getY())}transitionsBetween(o,c){let h=Math.trunc(o.getX()),y=Math.trunc(o.getY()),x=Math.trunc(c.getX()),E=Math.trunc(c.getY()),d=Math.abs(E-y)>Math.abs(x-h);if(d){let X=h;h=y,y=X,X=x,x=E,E=X}let v=Math.abs(x-h),A=Math.abs(E-y),I=-v/2,N=y<E?1:-1,k=h<x?1:-1,F=0,G=this.image.get(d?y:h,d?h:y);for(let X=h,re=y;X!==x;X+=k){let te=this.image.get(d?re:X,d?X:re);if(te!==G&&(F++,G=te),I+=A,I>0){if(re===E)break;re+=N,I-=v}}return F}}class Gi{constructor(){this.decoder=new Jo}decode(o,c=null){let h,y;if(c!=null&&c.has(Z.PURE_BARCODE)){const A=Gi.extractPureBits(o.getBlackMatrix());h=this.decoder.decode(A),y=Gi.NO_POINTS}else{const A=new Ut(o.getBlackMatrix()).detect();h=this.decoder.decode(A.getBits()),y=A.getPoints()}const x=h.getRawBytes(),E=new Ge(h.getText(),x,8*x.length,y,qe.DATA_MATRIX,M.currentTimeMillis()),d=h.getByteSegments();d!=null&&E.putMetadata(ct.BYTE_SEGMENTS,d);const v=h.getECLevel();return v!=null&&E.putMetadata(ct.ERROR_CORRECTION_LEVEL,v),E}reset(){}static extractPureBits(o){const c=o.getTopLeftOnBit(),h=o.getBottomRightOnBit();if(c==null||h==null)throw new he;const y=this.moduleSize(c,o);let x=c[1];const E=h[1];let d=c[0];const A=(h[0]-d+1)/y,I=(E-x+1)/y;if(A<=0||I<=0)throw new he;const N=y/2;x+=N,d+=N;const k=new be(A,I);for(let F=0;F<I;F++){const G=x+F*y;for(let X=0;X<A;X++)o.get(d+X*y,G)&&k.set(X,F)}return k}static moduleSize(o,c){const h=c.getWidth();let y=o[0];const x=o[1];for(;y<h&&c.get(y,x);)y++;if(y===h)throw new he;const E=y-o[0];if(E===0)throw new he;return E}}Gi.NO_POINTS=[];class vn extends Xe{constructor(o=500){super(new Gi,o)}}var ki;(function(Y){Y[Y.L=0]="L",Y[Y.M=1]="M",Y[Y.Q=2]="Q",Y[Y.H=3]="H"})(ki||(ki={}));class Yt{constructor(o,c,h){this.value=o,this.stringValue=c,this.bits=h,Yt.FOR_BITS.set(h,this),Yt.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return Yt.L;case"M":return Yt.M;case"Q":return Yt.Q;case"H":return Yt.H;default:throw new b(o+"not available")}}toString(){return this.stringValue}equals(o){if(!(o instanceof Yt))return!1;const c=o;return this.value===c.value}static forBits(o){if(o<0||o>=Yt.FOR_BITS.size)throw new _;return Yt.FOR_BITS.get(o)}}Yt.FOR_BITS=new Map,Yt.FOR_VALUE=new Map,Yt.L=new Yt(ki.L,"L",1),Yt.M=new Yt(ki.M,"M",0),Yt.Q=new Yt(ki.Q,"Q",3),Yt.H=new Yt(ki.H,"H",2);class Zn{constructor(o){this.errorCorrectionLevel=Yt.forBits(o>>3&3),this.dataMask=o&7}static numBitsDiffering(o,c){return K.bitCount(o^c)}static decodeFormatInformation(o,c){const h=Zn.doDecodeFormatInformation(o,c);return h!==null?h:Zn.doDecodeFormatInformation(o^Zn.FORMAT_INFO_MASK_QR,c^Zn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,c){let h=Number.MAX_SAFE_INTEGER,y=0;for(const x of Zn.FORMAT_INFO_DECODE_LOOKUP){const E=x[0];if(E===o||E===c)return new Zn(x[1]);let d=Zn.numBitsDiffering(o,E);d<h&&(y=x[1],h=d),o!==c&&(d=Zn.numBitsDiffering(c,E),d<h&&(y=x[1],h=d))}return h<=3?new Zn(y):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){if(!(o instanceof Zn))return!1;const c=o;return this.errorCorrectionLevel===c.errorCorrectionLevel&&this.dataMask===c.dataMask}}Zn.FORMAT_INFO_MASK_QR=21522,Zn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Ie{constructor(o,...c){this.ecCodewordsPerBlock=o,this.ecBlocks=c}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0;const c=this.ecBlocks;for(const h of c)o+=h.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ue{constructor(o,c){this.count=o,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class At{constructor(o,c,...h){this.versionNumber=o,this.alignmentPatternCenters=c,this.ecBlocks=h;let y=0;const x=h[0].getECCodewordsPerBlock(),E=h[0].getECBlocks();for(const d of E)y+=d.getCount()*(d.getDataCodewords()+x);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!==1)throw new V;try{return this.getVersionForNumber((o-17)/4)}catch{throw new V}}static getVersionForNumber(o){if(o<1||o>40)throw new _;return At.VERSIONS[o-1]}static decodeVersionInformation(o){let c=Number.MAX_SAFE_INTEGER,h=0;for(let y=0;y<At.VERSION_DECODE_INFO.length;y++){const x=At.VERSION_DECODE_INFO[y];if(x===o)return At.getVersionForNumber(y+7);const E=Zn.numBitsDiffering(o,x);E<c&&(h=y+7,c=E)}return c<=3?At.getVersionForNumber(h):null}buildFunctionPattern(){const o=this.getDimensionForVersion(),c=new be(o);c.setRegion(0,0,9,9),c.setRegion(o-8,0,8,9),c.setRegion(0,o-8,9,8);const h=this.alignmentPatternCenters.length;for(let y=0;y<h;y++){const x=this.alignmentPatternCenters[y]-2;for(let E=0;E<h;E++)y===0&&(E===0||E===h-1)||y===h-1&&E===0||c.setRegion(this.alignmentPatternCenters[E]-2,x,5,5)}return c.setRegion(6,9,1,o-17),c.setRegion(9,6,o-17,1),this.versionNumber>6&&(c.setRegion(o-11,0,3,6),c.setRegion(0,o-11,6,3)),c}toString(){return""+this.versionNumber}}At.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),At.VERSIONS=[new At(1,new Int32Array(0),new Ie(7,new ue(1,19)),new Ie(10,new ue(1,16)),new Ie(13,new ue(1,13)),new Ie(17,new ue(1,9))),new At(2,Int32Array.from([6,18]),new Ie(10,new ue(1,34)),new Ie(16,new ue(1,28)),new Ie(22,new ue(1,22)),new Ie(28,new ue(1,16))),new At(3,Int32Array.from([6,22]),new Ie(15,new ue(1,55)),new Ie(26,new ue(1,44)),new Ie(18,new ue(2,17)),new Ie(22,new ue(2,13))),new At(4,Int32Array.from([6,26]),new Ie(20,new ue(1,80)),new Ie(18,new ue(2,32)),new Ie(26,new ue(2,24)),new Ie(16,new ue(4,9))),new At(5,Int32Array.from([6,30]),new Ie(26,new ue(1,108)),new Ie(24,new ue(2,43)),new Ie(18,new ue(2,15),new ue(2,16)),new Ie(22,new ue(2,11),new ue(2,12))),new At(6,Int32Array.from([6,34]),new Ie(18,new ue(2,68)),new Ie(16,new ue(4,27)),new Ie(24,new ue(4,19)),new Ie(28,new ue(4,15))),new At(7,Int32Array.from([6,22,38]),new Ie(20,new ue(2,78)),new Ie(18,new ue(4,31)),new Ie(18,new ue(2,14),new ue(4,15)),new Ie(26,new ue(4,13),new ue(1,14))),new At(8,Int32Array.from([6,24,42]),new Ie(24,new ue(2,97)),new Ie(22,new ue(2,38),new ue(2,39)),new Ie(22,new ue(4,18),new ue(2,19)),new Ie(26,new ue(4,14),new ue(2,15))),new At(9,Int32Array.from([6,26,46]),new Ie(30,new ue(2,116)),new Ie(22,new ue(3,36),new ue(2,37)),new Ie(20,new ue(4,16),new ue(4,17)),new Ie(24,new ue(4,12),new ue(4,13))),new At(10,Int32Array.from([6,28,50]),new Ie(18,new ue(2,68),new ue(2,69)),new Ie(26,new ue(4,43),new ue(1,44)),new Ie(24,new ue(6,19),new ue(2,20)),new Ie(28,new ue(6,15),new ue(2,16))),new At(11,Int32Array.from([6,30,54]),new Ie(20,new ue(4,81)),new Ie(30,new ue(1,50),new ue(4,51)),new Ie(28,new ue(4,22),new ue(4,23)),new Ie(24,new ue(3,12),new ue(8,13))),new At(12,Int32Array.from([6,32,58]),new Ie(24,new ue(2,92),new ue(2,93)),new Ie(22,new ue(6,36),new ue(2,37)),new Ie(26,new ue(4,20),new ue(6,21)),new Ie(28,new ue(7,14),new ue(4,15))),new At(13,Int32Array.from([6,34,62]),new Ie(26,new ue(4,107)),new Ie(22,new ue(8,37),new ue(1,38)),new Ie(24,new ue(8,20),new ue(4,21)),new Ie(22,new ue(12,11),new ue(4,12))),new At(14,Int32Array.from([6,26,46,66]),new Ie(30,new ue(3,115),new ue(1,116)),new Ie(24,new ue(4,40),new ue(5,41)),new Ie(20,new ue(11,16),new ue(5,17)),new Ie(24,new ue(11,12),new ue(5,13))),new At(15,Int32Array.from([6,26,48,70]),new Ie(22,new ue(5,87),new ue(1,88)),new Ie(24,new ue(5,41),new ue(5,42)),new Ie(30,new ue(5,24),new ue(7,25)),new Ie(24,new ue(11,12),new ue(7,13))),new At(16,Int32Array.from([6,26,50,74]),new Ie(24,new ue(5,98),new ue(1,99)),new Ie(28,new ue(7,45),new ue(3,46)),new Ie(24,new ue(15,19),new ue(2,20)),new Ie(30,new ue(3,15),new ue(13,16))),new At(17,Int32Array.from([6,30,54,78]),new Ie(28,new ue(1,107),new ue(5,108)),new Ie(28,new ue(10,46),new ue(1,47)),new Ie(28,new ue(1,22),new ue(15,23)),new Ie(28,new ue(2,14),new ue(17,15))),new At(18,Int32Array.from([6,30,56,82]),new Ie(30,new ue(5,120),new ue(1,121)),new Ie(26,new ue(9,43),new ue(4,44)),new Ie(28,new ue(17,22),new ue(1,23)),new Ie(28,new ue(2,14),new ue(19,15))),new At(19,Int32Array.from([6,30,58,86]),new Ie(28,new ue(3,113),new ue(4,114)),new Ie(26,new ue(3,44),new ue(11,45)),new Ie(26,new ue(17,21),new ue(4,22)),new Ie(26,new ue(9,13),new ue(16,14))),new At(20,Int32Array.from([6,34,62,90]),new Ie(28,new ue(3,107),new ue(5,108)),new Ie(26,new ue(3,41),new ue(13,42)),new Ie(30,new ue(15,24),new ue(5,25)),new Ie(28,new ue(15,15),new ue(10,16))),new At(21,Int32Array.from([6,28,50,72,94]),new Ie(28,new ue(4,116),new ue(4,117)),new Ie(26,new ue(17,42)),new Ie(28,new ue(17,22),new ue(6,23)),new Ie(30,new ue(19,16),new ue(6,17))),new At(22,Int32Array.from([6,26,50,74,98]),new Ie(28,new ue(2,111),new ue(7,112)),new Ie(28,new ue(17,46)),new Ie(30,new ue(7,24),new ue(16,25)),new Ie(24,new ue(34,13))),new At(23,Int32Array.from([6,30,54,78,102]),new Ie(30,new ue(4,121),new ue(5,122)),new Ie(28,new ue(4,47),new ue(14,48)),new Ie(30,new ue(11,24),new ue(14,25)),new Ie(30,new ue(16,15),new ue(14,16))),new At(24,Int32Array.from([6,28,54,80,106]),new Ie(30,new ue(6,117),new ue(4,118)),new Ie(28,new ue(6,45),new ue(14,46)),new Ie(30,new ue(11,24),new ue(16,25)),new Ie(30,new ue(30,16),new ue(2,17))),new At(25,Int32Array.from([6,32,58,84,110]),new Ie(26,new ue(8,106),new ue(4,107)),new Ie(28,new ue(8,47),new ue(13,48)),new Ie(30,new ue(7,24),new ue(22,25)),new Ie(30,new ue(22,15),new ue(13,16))),new At(26,Int32Array.from([6,30,58,86,114]),new Ie(28,new ue(10,114),new ue(2,115)),new Ie(28,new ue(19,46),new ue(4,47)),new Ie(28,new ue(28,22),new ue(6,23)),new Ie(30,new ue(33,16),new ue(4,17))),new At(27,Int32Array.from([6,34,62,90,118]),new Ie(30,new ue(8,122),new ue(4,123)),new Ie(28,new ue(22,45),new ue(3,46)),new Ie(30,new ue(8,23),new ue(26,24)),new Ie(30,new ue(12,15),new ue(28,16))),new At(28,Int32Array.from([6,26,50,74,98,122]),new Ie(30,new ue(3,117),new ue(10,118)),new Ie(28,new ue(3,45),new ue(23,46)),new Ie(30,new ue(4,24),new ue(31,25)),new Ie(30,new ue(11,15),new ue(31,16))),new At(29,Int32Array.from([6,30,54,78,102,126]),new Ie(30,new ue(7,116),new ue(7,117)),new Ie(28,new ue(21,45),new ue(7,46)),new Ie(30,new ue(1,23),new ue(37,24)),new Ie(30,new ue(19,15),new ue(26,16))),new At(30,Int32Array.from([6,26,52,78,104,130]),new Ie(30,new ue(5,115),new ue(10,116)),new Ie(28,new ue(19,47),new ue(10,48)),new Ie(30,new ue(15,24),new ue(25,25)),new Ie(30,new ue(23,15),new ue(25,16))),new At(31,Int32Array.from([6,30,56,82,108,134]),new Ie(30,new ue(13,115),new ue(3,116)),new Ie(28,new ue(2,46),new ue(29,47)),new Ie(30,new ue(42,24),new ue(1,25)),new Ie(30,new ue(23,15),new ue(28,16))),new At(32,Int32Array.from([6,34,60,86,112,138]),new Ie(30,new ue(17,115)),new Ie(28,new ue(10,46),new ue(23,47)),new Ie(30,new ue(10,24),new ue(35,25)),new Ie(30,new ue(19,15),new ue(35,16))),new At(33,Int32Array.from([6,30,58,86,114,142]),new Ie(30,new ue(17,115),new ue(1,116)),new Ie(28,new ue(14,46),new ue(21,47)),new Ie(30,new ue(29,24),new ue(19,25)),new Ie(30,new ue(11,15),new ue(46,16))),new At(34,Int32Array.from([6,34,62,90,118,146]),new Ie(30,new ue(13,115),new ue(6,116)),new Ie(28,new ue(14,46),new ue(23,47)),new Ie(30,new ue(44,24),new ue(7,25)),new Ie(30,new ue(59,16),new ue(1,17))),new At(35,Int32Array.from([6,30,54,78,102,126,150]),new Ie(30,new ue(12,121),new ue(7,122)),new Ie(28,new ue(12,47),new ue(26,48)),new Ie(30,new ue(39,24),new ue(14,25)),new Ie(30,new ue(22,15),new ue(41,16))),new At(36,Int32Array.from([6,24,50,76,102,128,154]),new Ie(30,new ue(6,121),new ue(14,122)),new Ie(28,new ue(6,47),new ue(34,48)),new Ie(30,new ue(46,24),new ue(10,25)),new Ie(30,new ue(2,15),new ue(64,16))),new At(37,Int32Array.from([6,28,54,80,106,132,158]),new Ie(30,new ue(17,122),new ue(4,123)),new Ie(28,new ue(29,46),new ue(14,47)),new Ie(30,new ue(49,24),new ue(10,25)),new Ie(30,new ue(24,15),new ue(46,16))),new At(38,Int32Array.from([6,32,58,84,110,136,162]),new Ie(30,new ue(4,122),new ue(18,123)),new Ie(28,new ue(13,46),new ue(32,47)),new Ie(30,new ue(48,24),new ue(14,25)),new Ie(30,new ue(42,15),new ue(32,16))),new At(39,Int32Array.from([6,26,54,82,110,138,166]),new Ie(30,new ue(20,117),new ue(4,118)),new Ie(28,new ue(40,47),new ue(7,48)),new Ie(30,new ue(43,24),new ue(22,25)),new Ie(30,new ue(10,15),new ue(67,16))),new At(40,Int32Array.from([6,30,58,86,114,142,170]),new Ie(30,new ue(19,118),new ue(6,119)),new Ie(28,new ue(18,47),new ue(31,48)),new Ie(30,new ue(34,24),new ue(34,25)),new Ie(30,new ue(20,15),new ue(61,16)))];var Rr;(function(Y){Y[Y.DATA_MASK_000=0]="DATA_MASK_000",Y[Y.DATA_MASK_001=1]="DATA_MASK_001",Y[Y.DATA_MASK_010=2]="DATA_MASK_010",Y[Y.DATA_MASK_011=3]="DATA_MASK_011",Y[Y.DATA_MASK_100=4]="DATA_MASK_100",Y[Y.DATA_MASK_101=5]="DATA_MASK_101",Y[Y.DATA_MASK_110=6]="DATA_MASK_110",Y[Y.DATA_MASK_111=7]="DATA_MASK_111"})(Rr||(Rr={}));class Pr{constructor(o,c){this.value=o,this.isMasked=c}unmaskBitMatrix(o,c){for(let h=0;h<c;h++)for(let y=0;y<c;y++)this.isMasked(h,y)&&o.flip(y,h)}}Pr.values=new Map([[Rr.DATA_MASK_000,new Pr(Rr.DATA_MASK_000,(Y,o)=>(Y+o&1)===0)],[Rr.DATA_MASK_001,new Pr(Rr.DATA_MASK_001,(Y,o)=>(Y&1)===0)],[Rr.DATA_MASK_010,new Pr(Rr.DATA_MASK_010,(Y,o)=>o%3===0)],[Rr.DATA_MASK_011,new Pr(Rr.DATA_MASK_011,(Y,o)=>(Y+o)%3===0)],[Rr.DATA_MASK_100,new Pr(Rr.DATA_MASK_100,(Y,o)=>(Math.floor(Y/2)+Math.floor(o/3)&1)===0)],[Rr.DATA_MASK_101,new Pr(Rr.DATA_MASK_101,(Y,o)=>Y*o%6===0)],[Rr.DATA_MASK_110,new Pr(Rr.DATA_MASK_110,(Y,o)=>Y*o%6<3)],[Rr.DATA_MASK_111,new Pr(Rr.DATA_MASK_111,(Y,o)=>(Y+o+Y*o%3&1)===0)]]);class Hi{constructor(o){const c=o.getHeight();if(c<21||(c&3)!==1)throw new V;this.bitMatrix=o}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let o=0;for(let x=0;x<6;x++)o=this.copyBit(x,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let x=5;x>=0;x--)o=this.copyBit(8,x,o);const c=this.bitMatrix.getHeight();let h=0;const y=c-7;for(let x=c-1;x>=y;x--)h=this.copyBit(8,x,h);for(let x=c-8;x<c;x++)h=this.copyBit(x,8,h);if(this.parsedFormatInfo=Zn.decodeFormatInformation(o,h),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new V}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const o=this.bitMatrix.getHeight(),c=Math.floor((o-17)/4);if(c<=6)return At.getVersionForNumber(c);let h=0;const y=o-11;for(let E=5;E>=0;E--)for(let d=o-9;d>=y;d--)h=this.copyBit(d,E,h);let x=At.decodeVersionInformation(h);if(x!==null&&x.getDimensionForVersion()===o)return this.parsedVersion=x,x;h=0;for(let E=5;E>=0;E--)for(let d=o-9;d>=y;d--)h=this.copyBit(E,d,h);if(x=At.decodeVersionInformation(h),x!==null&&x.getDimensionForVersion()===o)return this.parsedVersion=x,x;throw new V}copyBit(o,c,h){return(this.isMirror?this.bitMatrix.get(c,o):this.bitMatrix.get(o,c))?h<<1|1:h<<1}readCodewords(){const o=this.readFormatInformation(),c=this.readVersion(),h=Pr.values.get(o.getDataMask()),y=this.bitMatrix.getHeight();h.unmaskBitMatrix(this.bitMatrix,y);const x=c.buildFunctionPattern();let E=!0;const d=new Uint8Array(c.getTotalCodewords());let v=0,A=0,I=0;for(let N=y-1;N>0;N-=2){N===6&&N--;for(let k=0;k<y;k++){const F=E?y-1-k:k;for(let G=0;G<2;G++)x.get(N-G,F)||(I++,A<<=1,this.bitMatrix.get(N-G,F)&&(A|=1),I===8&&(d[v++]=A,I=0,A=0))}E=!E}if(v!==c.getTotalCodewords())throw new V;return d}remask(){if(this.parsedFormatInfo===null)return;const o=Pr.values[this.parsedFormatInfo.getDataMask()],c=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,c)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){const o=this.bitMatrix;for(let c=0,h=o.getWidth();c<h;c++)for(let y=c+1,x=o.getHeight();y<x;y++)o.get(c,y)!==o.get(y,c)&&(o.flip(y,c),o.flip(c,y))}}class el{constructor(o,c){this.numDataCodewords=o,this.codewords=c}static getDataBlocks(o,c,h){if(o.length!==c.getTotalCodewords())throw new _;const y=c.getECBlocksForLevel(h);let x=0;const E=y.getECBlocks();for(const G of E)x+=G.getCount();const d=new Array(x);let v=0;for(const G of E)for(let X=0;X<G.getCount();X++){const re=G.getDataCodewords(),te=y.getECCodewordsPerBlock()+re;d[v++]=new el(re,new Uint8Array(te))}const A=d[0].codewords.length;let I=d.length-1;for(;I>=0&&d[I].codewords.length!==A;)I--;I++;const N=A-y.getECCodewordsPerBlock();let k=0;for(let G=0;G<N;G++)for(let X=0;X<v;X++)d[X].codewords[G]=o[k++];for(let G=I;G<v;G++)d[G].codewords[N]=o[k++];const F=d[0].codewords.length;for(let G=N;G<F;G++)for(let X=0;X<v;X++){const re=X<I?G:G+1;d[X].codewords[re]=o[k++]}return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var qt;(function(Y){Y[Y.TERMINATOR=0]="TERMINATOR",Y[Y.NUMERIC=1]="NUMERIC",Y[Y.ALPHANUMERIC=2]="ALPHANUMERIC",Y[Y.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",Y[Y.BYTE=4]="BYTE",Y[Y.ECI=5]="ECI",Y[Y.KANJI=6]="KANJI",Y[Y.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",Y[Y.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",Y[Y.HANZI=9]="HANZI"})(qt||(qt={}));class Rt{constructor(o,c,h,y){this.value=o,this.stringValue=c,this.characterCountBitsForVersions=h,this.bits=y,Rt.FOR_BITS.set(y,this),Rt.FOR_VALUE.set(o,this)}static forBits(o){const c=Rt.FOR_BITS.get(o);if(c===void 0)throw new _;return c}getCharacterCountBits(o){const c=o.getVersionNumber();let h;return c<=9?h=0:c<=26?h=1:h=2,this.characterCountBitsForVersions[h]}getValue(){return this.value}getBits(){return this.bits}equals(o){if(!(o instanceof Rt))return!1;const c=o;return this.value===c.value}toString(){return this.stringValue}}Rt.FOR_BITS=new Map,Rt.FOR_VALUE=new Map,Rt.TERMINATOR=new Rt(qt.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Rt.NUMERIC=new Rt(qt.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Rt.ALPHANUMERIC=new Rt(qt.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Rt.STRUCTURED_APPEND=new Rt(qt.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Rt.BYTE=new Rt(qt.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Rt.ECI=new Rt(qt.ECI,"ECI",Int32Array.from([0,0,0]),7),Rt.KANJI=new Rt(qt.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Rt.FNC1_FIRST_POSITION=new Rt(qt.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Rt.FNC1_SECOND_POSITION=new Rt(qt.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Rt.HANZI=new Rt(qt.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class zn{static decode(o,c,h,y){const x=new Sr(o);let E=new ne;const d=new Array;let v=-1,A=-1;try{let I=null,N=!1,k;do{if(x.available()<4)k=Rt.TERMINATOR;else{const F=x.readBits(4);k=Rt.forBits(F)}switch(k){case Rt.TERMINATOR:break;case Rt.FNC1_FIRST_POSITION:case Rt.FNC1_SECOND_POSITION:N=!0;break;case Rt.STRUCTURED_APPEND:if(x.available()<16)throw new V;v=x.readBits(8),A=x.readBits(8);break;case Rt.ECI:const F=zn.parseECIValue(x);if(I=U.getCharacterSetECIByValue(F),I===null)throw new V;break;case Rt.HANZI:const G=x.readBits(4),X=x.readBits(k.getCharacterCountBits(c));G===zn.GB2312_SUBSET&&zn.decodeHanziSegment(x,E,X);break;default:const re=x.readBits(k.getCharacterCountBits(c));switch(k){case Rt.NUMERIC:zn.decodeNumericSegment(x,E,re);break;case Rt.ALPHANUMERIC:zn.decodeAlphanumericSegment(x,E,re,N);break;case Rt.BYTE:zn.decodeByteSegment(x,E,re,I,d,y);break;case Rt.KANJI:zn.decodeKanjiSegment(x,E,re);break;default:throw new V}break}}while(k!==Rt.TERMINATOR)}catch{throw new V}return new Se(o,E.toString(),d.length===0?null:d,h===null?null:h.toString(),v,A)}static decodeHanziSegment(o,c,h){if(h*13>o.available())throw new V;const y=new Uint8Array(2*h);let x=0;for(;h>0;){const E=o.readBits(13);let d=E/96<<8&4294967295|E%96;d<959?d+=41377:d+=42657,y[x]=d>>8&255,y[x+1]=d&255,x+=2,h--}try{c.append(ie.decode(y,Q.GB2312))}catch(E){throw new V(E)}}static decodeKanjiSegment(o,c,h){if(h*13>o.available())throw new V;const y=new Uint8Array(2*h);let x=0;for(;h>0;){const E=o.readBits(13);let d=E/192<<8&4294967295|E%192;d<7936?d+=33088:d+=49472,y[x]=d>>8,y[x+1]=d,x+=2,h--}try{c.append(ie.decode(y,Q.SHIFT_JIS))}catch(E){throw new V(E)}}static decodeByteSegment(o,c,h,y,x,E){if(8*h>o.available())throw new V;const d=new Uint8Array(h);for(let A=0;A<h;A++)d[A]=o.readBits(8);let v;y===null?v=Q.guessEncoding(d,E):v=y.getName();try{c.append(ie.decode(d,v))}catch(A){throw new V(A)}x.push(d)}static toAlphaNumericChar(o){if(o>=zn.ALPHANUMERIC_CHARS.length)throw new V;return zn.ALPHANUMERIC_CHARS[o]}static decodeAlphanumericSegment(o,c,h,y){const x=c.length();for(;h>1;){if(o.available()<11)throw new V;const E=o.readBits(11);c.append(zn.toAlphaNumericChar(Math.floor(E/45))),c.append(zn.toAlphaNumericChar(E%45)),h-=2}if(h===1){if(o.available()<6)throw new V;c.append(zn.toAlphaNumericChar(o.readBits(6)))}if(y)for(let E=x;E<c.length();E++)c.charAt(E)==="%"&&(E<c.length()-1&&c.charAt(E+1)==="%"?c.deleteCharAt(E+1):c.setCharAt(E,""))}static decodeNumericSegment(o,c,h){for(;h>=3;){if(o.available()<10)throw new V;const y=o.readBits(10);if(y>=1e3)throw new V;c.append(zn.toAlphaNumericChar(Math.floor(y/100))),c.append(zn.toAlphaNumericChar(Math.floor(y/10)%10)),c.append(zn.toAlphaNumericChar(y%10)),h-=3}if(h===2){if(o.available()<7)throw new V;const y=o.readBits(7);if(y>=100)throw new V;c.append(zn.toAlphaNumericChar(Math.floor(y/10))),c.append(zn.toAlphaNumericChar(y%10))}else if(h===1){if(o.available()<4)throw new V;const y=o.readBits(4);if(y>=10)throw new V;c.append(zn.toAlphaNumericChar(y))}}static parseECIValue(o){const c=o.readBits(8);if((c&128)===0)return c&127;if((c&192)===128){const h=o.readBits(8);return(c&63)<<8&4294967295|h}if((c&224)===192){const h=o.readBits(16);return(c&31)<<16&4294967295|h}throw new V}}zn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",zn.GB2312_SUBSET=1;class Fl{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||o===null||o.length<3)return;const c=o[0];o[0]=o[2],o[2]=c}}class Yr{constructor(){this.rsDecoder=new Ln(pt.QR_CODE_FIELD_256)}decodeBooleanArray(o,c){return this.decodeBitMatrix(be.parseFromBooleanArray(o),c)}decodeBitMatrix(o,c){const h=new Hi(o);let y=null;try{return this.decodeBitMatrixParser(h,c)}catch(x){y=x}try{h.remask(),h.setMirror(!0),h.readVersion(),h.readFormatInformation(),h.mirror();const x=this.decodeBitMatrixParser(h,c);return x.setOther(new Fl(!0)),x}catch(x){throw y!==null?y:x}}decodeBitMatrixParser(o,c){const h=o.readVersion(),y=o.readFormatInformation().getErrorCorrectionLevel(),x=o.readCodewords(),E=el.getDataBlocks(x,h,y);let d=0;for(const I of E)d+=I.getNumDataCodewords();const v=new Uint8Array(d);let A=0;for(const I of E){const N=I.getCodewords(),k=I.getNumDataCodewords();this.correctErrors(N,k);for(let F=0;F<k;F++)v[A++]=N[F]}return zn.decode(v,h,y,c)}correctErrors(o,c){const h=new Int32Array(o);try{this.rsDecoder.decode(h,o.length-c)}catch{throw new R}for(let y=0;y<c;y++)o[y]=h[y]}}class _a extends it{constructor(o,c,h){super(o,c),this.estimatedModuleSize=h}aboutEquals(o,c,h){if(Math.abs(c-this.getY())<=o&&Math.abs(h-this.getX())<=o){const y=Math.abs(o-this.estimatedModuleSize);return y<=1||y<=this.estimatedModuleSize}return!1}combineEstimate(o,c,h){const y=(this.getX()+c)/2,x=(this.getY()+o)/2,E=(this.estimatedModuleSize+h)/2;return new _a(y,x,E)}}class _i{constructor(o,c,h,y,x,E,d){this.image=o,this.startX=c,this.startY=h,this.width=y,this.height=x,this.moduleSize=E,this.resultPointCallback=d,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const o=this.startX,c=this.height,h=this.width,y=o+h,x=this.startY+c/2,E=new Int32Array(3),d=this.image;for(let v=0;v<c;v++){const A=x+((v&1)===0?Math.floor((v+1)/2):-Math.floor((v+1)/2));E[0]=0,E[1]=0,E[2]=0;let I=o;for(;I<y&&!d.get(I,A);)I++;let N=0;for(;I<y;){if(d.get(I,A))if(N===1)E[1]++;else if(N===2){if(this.foundPatternCross(E)){const k=this.handlePossibleCenter(E,A,I);if(k!==null)return k}E[0]=E[2],E[1]=1,E[2]=0,N=1}else E[++N]++;else N===1&&N++,E[N]++;I++}if(this.foundPatternCross(E)){const k=this.handlePossibleCenter(E,A,y);if(k!==null)return k}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new he}static centerFromEnd(o,c){return c-o[2]-o[1]/2}foundPatternCross(o){const c=this.moduleSize,h=c/2;for(let y=0;y<3;y++)if(Math.abs(c-o[y])>=h)return!1;return!0}crossCheckVertical(o,c,h,y){const x=this.image,E=x.getHeight(),d=this.crossCheckStateCount;d[0]=0,d[1]=0,d[2]=0;let v=o;for(;v>=0&&x.get(c,v)&&d[1]<=h;)d[1]++,v--;if(v<0||d[1]>h)return NaN;for(;v>=0&&!x.get(c,v)&&d[0]<=h;)d[0]++,v--;if(d[0]>h)return NaN;for(v=o+1;v<E&&x.get(c,v)&&d[1]<=h;)d[1]++,v++;if(v===E||d[1]>h)return NaN;for(;v<E&&!x.get(c,v)&&d[2]<=h;)d[2]++,v++;if(d[2]>h)return NaN;const A=d[0]+d[1]+d[2];return 5*Math.abs(A-y)>=2*y?NaN:this.foundPatternCross(d)?_i.centerFromEnd(d,v):NaN}handlePossibleCenter(o,c,h){const y=o[0]+o[1]+o[2],x=_i.centerFromEnd(o,h),E=this.crossCheckVertical(c,x,2*o[1],y);if(!isNaN(E)){const d=(o[0]+o[1]+o[2])/3;for(const A of this.possibleCenters)if(A.aboutEquals(d,E,x))return A.combineEstimate(E,x,d);const v=new _a(x,E,d);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null}}class ia extends it{constructor(o,c,h,y){super(o,c),this.estimatedModuleSize=h,this.count=y,y===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,c,h){if(Math.abs(c-this.getY())<=o&&Math.abs(h-this.getX())<=o){const y=Math.abs(o-this.estimatedModuleSize);return y<=1||y<=this.estimatedModuleSize}return!1}combineEstimate(o,c,h){const y=this.count+1,x=(this.count*this.getX()+c)/y,E=(this.count*this.getY()+o)/y,d=(this.count*this.estimatedModuleSize+h)/y;return new ia(x,E,d,y)}}class Ea{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Jn{constructor(o,c){this.image=o,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=c}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(o){const c=o!=null&&o.get(Z.TRY_HARDER)!==void 0,h=o!=null&&o.get(Z.PURE_BARCODE)!==void 0,y=this.image,x=y.getHeight(),E=y.getWidth();let d=Math.floor(3*x/(4*Jn.MAX_MODULES));(d<Jn.MIN_SKIP||c)&&(d=Jn.MIN_SKIP);let v=!1;const A=new Int32Array(5);for(let N=d-1;N<x&&!v;N+=d){A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0;let k=0;for(let F=0;F<E;F++)if(y.get(F,N))(k&1)===1&&k++,A[k]++;else if((k&1)===0)if(k===4)if(Jn.foundPatternCross(A)){if(this.handlePossibleCenter(A,N,F,h)===!0)if(d=2,this.hasSkipped===!0)v=this.haveMultiplyConfirmedCenters();else{const X=this.findRowSkip();X>A[2]&&(N+=X-A[2]-d,F=E-1)}else{A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,k=3;continue}k=0,A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0}else A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,k=3;else A[++k]++;else A[k]++;Jn.foundPatternCross(A)&&this.handlePossibleCenter(A,N,E,h)===!0&&(d=A[0],this.hasSkipped&&(v=this.haveMultiplyConfirmedCenters()))}const I=this.selectBestPatterns();return it.orderBestPatterns(I),new Ea(I)}static centerFromEnd(o,c){return c-o[4]-o[3]-o[2]/2}static foundPatternCross(o){let c=0;for(let x=0;x<5;x++){const E=o[x];if(E===0)return!1;c+=E}if(c<7)return!1;const h=c/7,y=h/2;return Math.abs(h-o[0])<y&&Math.abs(h-o[1])<y&&Math.abs(3*h-o[2])<3*y&&Math.abs(h-o[3])<y&&Math.abs(h-o[4])<y}getCrossCheckStateCount(){const o=this.crossCheckStateCount;return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o}crossCheckDiagonal(o,c,h,y){const x=this.getCrossCheckStateCount();let E=0;const d=this.image;for(;o>=E&&c>=E&&d.get(c-E,o-E);)x[2]++,E++;if(o<E||c<E)return!1;for(;o>=E&&c>=E&&!d.get(c-E,o-E)&&x[1]<=h;)x[1]++,E++;if(o<E||c<E||x[1]>h)return!1;for(;o>=E&&c>=E&&d.get(c-E,o-E)&&x[0]<=h;)x[0]++,E++;if(x[0]>h)return!1;const v=d.getHeight(),A=d.getWidth();for(E=1;o+E<v&&c+E<A&&d.get(c+E,o+E);)x[2]++,E++;if(o+E>=v||c+E>=A)return!1;for(;o+E<v&&c+E<A&&!d.get(c+E,o+E)&&x[3]<h;)x[3]++,E++;if(o+E>=v||c+E>=A||x[3]>=h)return!1;for(;o+E<v&&c+E<A&&d.get(c+E,o+E)&&x[4]<h;)x[4]++,E++;if(x[4]>=h)return!1;const I=x[0]+x[1]+x[2]+x[3]+x[4];return Math.abs(I-y)<2*y&&Jn.foundPatternCross(x)}crossCheckVertical(o,c,h,y){const x=this.image,E=x.getHeight(),d=this.getCrossCheckStateCount();let v=o;for(;v>=0&&x.get(c,v);)d[2]++,v--;if(v<0)return NaN;for(;v>=0&&!x.get(c,v)&&d[1]<=h;)d[1]++,v--;if(v<0||d[1]>h)return NaN;for(;v>=0&&x.get(c,v)&&d[0]<=h;)d[0]++,v--;if(d[0]>h)return NaN;for(v=o+1;v<E&&x.get(c,v);)d[2]++,v++;if(v===E)return NaN;for(;v<E&&!x.get(c,v)&&d[3]<h;)d[3]++,v++;if(v===E||d[3]>=h)return NaN;for(;v<E&&x.get(c,v)&&d[4]<h;)d[4]++,v++;if(d[4]>=h)return NaN;const A=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(A-y)>=2*y?NaN:Jn.foundPatternCross(d)?Jn.centerFromEnd(d,v):NaN}crossCheckHorizontal(o,c,h,y){const x=this.image,E=x.getWidth(),d=this.getCrossCheckStateCount();let v=o;for(;v>=0&&x.get(v,c);)d[2]++,v--;if(v<0)return NaN;for(;v>=0&&!x.get(v,c)&&d[1]<=h;)d[1]++,v--;if(v<0||d[1]>h)return NaN;for(;v>=0&&x.get(v,c)&&d[0]<=h;)d[0]++,v--;if(d[0]>h)return NaN;for(v=o+1;v<E&&x.get(v,c);)d[2]++,v++;if(v===E)return NaN;for(;v<E&&!x.get(v,c)&&d[3]<h;)d[3]++,v++;if(v===E||d[3]>=h)return NaN;for(;v<E&&x.get(v,c)&&d[4]<h;)d[4]++,v++;if(d[4]>=h)return NaN;const A=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(A-y)>=y?NaN:Jn.foundPatternCross(d)?Jn.centerFromEnd(d,v):NaN}handlePossibleCenter(o,c,h,y){const x=o[0]+o[1]+o[2]+o[3]+o[4];let E=Jn.centerFromEnd(o,h),d=this.crossCheckVertical(c,Math.floor(E),o[2],x);if(!isNaN(d)&&(E=this.crossCheckHorizontal(Math.floor(E),Math.floor(d),o[2],x),!isNaN(E)&&(!y||this.crossCheckDiagonal(Math.floor(d),Math.floor(E),o[2],x)))){const v=x/7;let A=!1;const I=this.possibleCenters;for(let N=0,k=I.length;N<k;N++){const F=I[N];if(F.aboutEquals(v,d,E)){I[N]=F.combineEstimate(d,E,v),A=!0;break}}if(!A){const N=new ia(E,d,v);I.push(N),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(N)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let c=null;for(const h of this.possibleCenters)if(h.getCount()>=Jn.CENTER_QUORUM)if(c==null)c=h;else return this.hasSkipped=!0,Math.floor((Math.abs(c.getX()-h.getX())-Math.abs(c.getY()-h.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let o=0,c=0;const h=this.possibleCenters.length;for(const E of this.possibleCenters)E.getCount()>=Jn.CENTER_QUORUM&&(o++,c+=E.getEstimatedModuleSize());if(o<3)return!1;const y=c/h;let x=0;for(const E of this.possibleCenters)x+=Math.abs(E.getEstimatedModuleSize()-y);return x<=.05*c}selectBestPatterns(){const o=this.possibleCenters.length;if(o<3)throw new he;const c=this.possibleCenters;let h;if(o>3){let y=0,x=0;for(const v of this.possibleCenters){const A=v.getEstimatedModuleSize();y+=A,x+=A*A}h=y/o;let E=Math.sqrt(x/o-h*h);c.sort((v,A)=>{const I=Math.abs(A.getEstimatedModuleSize()-h),N=Math.abs(v.getEstimatedModuleSize()-h);return I<N?-1:I>N?1:0});const d=Math.max(.2*h,E);for(let v=0;v<c.length&&c.length>3;v++){const A=c[v];Math.abs(A.getEstimatedModuleSize()-h)>d&&(c.splice(v,1),v--)}}if(c.length>3){let y=0;for(const x of c)y+=x.getEstimatedModuleSize();h=y/c.length,c.sort((x,E)=>{if(E.getCount()===x.getCount()){const d=Math.abs(E.getEstimatedModuleSize()-h),v=Math.abs(x.getEstimatedModuleSize()-h);return d<v?1:d>v?-1:0}else return E.getCount()-x.getCount()}),c.splice(3)}return[c[0],c[1],c[2]]}}Jn.CENTER_QUORUM=2,Jn.MIN_SKIP=3,Jn.MAX_MODULES=57;class Mn{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=o==null?null:o.get(Z.NEED_RESULT_POINT_CALLBACK);const h=new Jn(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(h)}processFinderPatternInfo(o){const c=o.getTopLeft(),h=o.getTopRight(),y=o.getBottomLeft(),x=this.calculateModuleSize(c,h,y);if(x<1)throw new he("No pattern found in proccess finder.");const E=Mn.computeDimension(c,h,y,x),d=At.getProvisionalVersionForDimension(E),v=d.getDimensionForVersion()-7;let A=null;if(d.getAlignmentPatternCenters().length>0){const F=h.getX()-c.getX()+y.getX(),G=h.getY()-c.getY()+y.getY(),X=1-3/v,re=Math.floor(c.getX()+X*(F-c.getX())),te=Math.floor(c.getY()+X*(G-c.getY()));for(let oe=4;oe<=16;oe<<=1)try{A=this.findAlignmentInRegion(x,re,te,oe);break}catch(fe){if(!(fe instanceof he))throw fe}}const I=Mn.createTransform(c,h,y,A,E),N=Mn.sampleGrid(this.image,I,E);let k;return A===null?k=[y,c,h]:k=[y,c,h,A],new na(N,k)}static createTransform(o,c,h,y,x){const E=x-3.5;let d,v,A,I;return y!==null?(d=y.getX(),v=y.getY(),A=E-3,I=A):(d=c.getX()-o.getX()+h.getX(),v=c.getY()-o.getY()+h.getY(),A=E,I=E),$n.quadrilateralToQuadrilateral(3.5,3.5,E,3.5,A,I,3.5,E,o.getX(),o.getY(),c.getX(),c.getY(),d,v,h.getX(),h.getY())}static sampleGrid(o,c,h){return bi.getInstance().sampleGridWithTransform(o,h,h,c)}static computeDimension(o,c,h,y){const x=xt.round(it.distance(o,c)/y),E=xt.round(it.distance(o,h)/y);let d=Math.floor((x+E)/2)+7;switch(d&3){case 0:d++;break;case 2:d--;break;case 3:throw new he("Dimensions could be not found.")}return d}calculateModuleSize(o,c,h){return(this.calculateModuleSizeOneWay(o,c)+this.calculateModuleSizeOneWay(o,h))/2}calculateModuleSizeOneWay(o,c){const h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(c.getX()),Math.floor(c.getY())),y=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(c.getX()),Math.floor(c.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(h)?y/7:isNaN(y)?h/7:(h+y)/14}sizeOfBlackWhiteBlackRunBothWays(o,c,h,y){let x=this.sizeOfBlackWhiteBlackRun(o,c,h,y),E=1,d=o-(h-o);d<0?(E=o/(o-d),d=0):d>=this.image.getWidth()&&(E=(this.image.getWidth()-1-o)/(d-o),d=this.image.getWidth()-1);let v=Math.floor(c-(y-c)*E);return E=1,v<0?(E=c/(c-v),v=0):v>=this.image.getHeight()&&(E=(this.image.getHeight()-1-c)/(v-c),v=this.image.getHeight()-1),d=Math.floor(o+(d-o)*E),x+=this.sizeOfBlackWhiteBlackRun(o,c,d,v),x-1}sizeOfBlackWhiteBlackRun(o,c,h,y){const x=Math.abs(y-c)>Math.abs(h-o);if(x){let F=o;o=c,c=F,F=h,h=y,y=F}const E=Math.abs(h-o),d=Math.abs(y-c);let v=-E/2;const A=o<h?1:-1,I=c<y?1:-1;let N=0;const k=h+A;for(let F=o,G=c;F!==k;F+=A){const X=x?G:F,re=x?F:G;if(N===1===this.image.get(X,re)){if(N===2)return xt.distance(F,G,o,c);N++}if(v+=d,v>0){if(G===y)break;G+=I,v-=E}}return N===2?xt.distance(h+A,y,o,c):NaN}findAlignmentInRegion(o,c,h,y){const x=Math.floor(y*o),E=Math.max(0,c-x),d=Math.min(this.image.getWidth()-1,c+x);if(d-E<o*3)throw new he("Alignment top exceeds estimated module size.");const v=Math.max(0,h-x),A=Math.min(this.image.getHeight()-1,h+x);if(A-v<o*3)throw new he("Alignment bottom exceeds estimated module size.");return new _i(this.image,E,v,d-E,A-v,o,this.resultPointCallback).find()}}class Tr{constructor(){this.decoder=new Yr}getDecoder(){return this.decoder}decode(o,c){let h,y;if(c!=null&&c.get(Z.PURE_BARCODE)!==void 0){const v=Tr.extractPureBits(o.getBlackMatrix());h=this.decoder.decodeBitMatrix(v,c),y=Tr.NO_POINTS}else{const v=new Mn(o.getBlackMatrix()).detect(c);h=this.decoder.decodeBitMatrix(v.getBits(),c),y=v.getPoints()}h.getOther()instanceof Fl&&h.getOther().applyMirroredCorrection(y);const x=new Ge(h.getText(),h.getRawBytes(),void 0,y,qe.QR_CODE,void 0),E=h.getByteSegments();E!==null&&x.putMetadata(ct.BYTE_SEGMENTS,E);const d=h.getECLevel();return d!==null&&x.putMetadata(ct.ERROR_CORRECTION_LEVEL,d),h.hasStructuredAppend()&&(x.putMetadata(ct.STRUCTURED_APPEND_SEQUENCE,h.getStructuredAppendSequenceNumber()),x.putMetadata(ct.STRUCTURED_APPEND_PARITY,h.getStructuredAppendParity())),x}reset(){}static extractPureBits(o){const c=o.getTopLeftOnBit(),h=o.getBottomRightOnBit();if(c===null||h===null)throw new he;const y=this.moduleSize(c,o);let x=c[1],E=h[1],d=c[0],v=h[0];if(d>=v||x>=E)throw new he;if(E-x!==v-d&&(v=d+(E-x),v>=o.getWidth()))throw new he;const A=Math.round((v-d+1)/y),I=Math.round((E-x+1)/y);if(A<=0||I<=0)throw new he;if(I!==A)throw new he;const N=Math.floor(y/2);x+=N,d+=N;const k=d+Math.floor((A-1)*y)-v;if(k>0){if(k>N)throw new he;d-=k}const F=x+Math.floor((I-1)*y)-E;if(F>0){if(F>N)throw new he;x-=F}const G=new be(A,I);for(let X=0;X<I;X++){const re=x+Math.floor(X*y);for(let te=0;te<A;te++)o.get(d+Math.floor(te*y),re)&&G.set(te,X)}return G}static moduleSize(o,c){const h=c.getHeight(),y=c.getWidth();let x=o[0],E=o[1],d=!0,v=0;for(;x<y&&E<h;){if(d!==c.get(x,E)){if(++v===5)break;d=!d}x++,E++}if(x===y||E===h)throw new he;return(x-o[0])/7}}Tr.NO_POINTS=new Array;class Pt{PDF417Common(){}static getBitCountSum(o){return xt.sum(o)}static toIntArray(o){if(o==null||!o.length)return Pt.EMPTY_INT_ARRAY;const c=new Int32Array(o.length);let h=0;for(const y of o)c[h++]=y;return c}static getCodeword(o){const c=$.binarySearch(Pt.SYMBOL_TABLE,o&262143);return c<0?-1:(Pt.CODEWORD_TABLE[c]-1)%Pt.NUMBER_OF_CODEWORDS}}Pt.NUMBER_OF_CODEWORDS=929,Pt.MAX_CODEWORDS_IN_BARCODE=Pt.NUMBER_OF_CODEWORDS-1,Pt.MIN_ROWS_IN_BARCODE=3,Pt.MAX_ROWS_IN_BARCODE=90,Pt.MODULES_IN_CODEWORD=17,Pt.MODULES_IN_STOP_PATTERN=18,Pt.BARS_IN_MODULE=8,Pt.EMPTY_INT_ARRAY=new Int32Array([]),Pt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Pt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ua{constructor(o,c){this.bits=o,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class Bt{static detectMultiple(o,c,h){let y=o.getBlackMatrix(),x=Bt.detect(h,y);return x.length||(y=y.clone(),y.rotate180(),x=Bt.detect(h,y)),new Ua(y,x)}static detect(o,c){const h=new Array;let y=0,x=0,E=!1;for(;y<c.getHeight();){const d=Bt.findVertices(c,y,x);if(d[0]==null&&d[3]==null){if(!E)break;E=!1,x=0;for(const v of h)v[1]!=null&&(y=Math.trunc(Math.max(y,v[1].getY()))),v[3]!=null&&(y=Math.max(y,Math.trunc(v[3].getY())));y+=Bt.ROW_STEP;continue}if(E=!0,h.push(d),!o)break;d[2]!=null?(x=Math.trunc(d[2].getX()),y=Math.trunc(d[2].getY())):(x=Math.trunc(d[4].getX()),y=Math.trunc(d[4].getY()))}return h}static findVertices(o,c,h){const y=o.getHeight(),x=o.getWidth(),E=new Array(8);return Bt.copyToResult(E,Bt.findRowsWithPattern(o,y,x,c,h,Bt.START_PATTERN),Bt.INDEXES_START_PATTERN),E[4]!=null&&(h=Math.trunc(E[4].getX()),c=Math.trunc(E[4].getY())),Bt.copyToResult(E,Bt.findRowsWithPattern(o,y,x,c,h,Bt.STOP_PATTERN),Bt.INDEXES_STOP_PATTERN),E}static copyToResult(o,c,h){for(let y=0;y<h.length;y++)o[h[y]]=c[y]}static findRowsWithPattern(o,c,h,y,x,E){const d=new Array(4);let v=!1;const A=new Int32Array(E.length);for(;y<c;y+=Bt.ROW_STEP){let N=Bt.findGuardPattern(o,x,y,h,!1,E,A);if(N!=null){for(;y>0;){const k=Bt.findGuardPattern(o,x,--y,h,!1,E,A);if(k!=null)N=k;else{y++;break}}d[0]=new it(N[0],y),d[1]=new it(N[1],y),v=!0;break}}let I=y+1;if(v){let N=0,k=Int32Array.from([Math.trunc(d[0].getX()),Math.trunc(d[1].getX())]);for(;I<c;I++){const F=Bt.findGuardPattern(o,k[0],I,h,!1,E,A);if(F!=null&&Math.abs(k[0]-F[0])<Bt.MAX_PATTERN_DRIFT&&Math.abs(k[1]-F[1])<Bt.MAX_PATTERN_DRIFT)k=F,N=0;else{if(N>Bt.SKIPPED_ROW_COUNT_MAX)break;N++}}I-=N+1,d[2]=new it(k[0],I),d[3]=new it(k[1],I)}return I-y<Bt.BARCODE_MIN_HEIGHT&&$.fill(d,null),d}static findGuardPattern(o,c,h,y,x,E,d){$.fillWithin(d,0,d.length,0);let v=c,A=0;for(;o.get(v,h)&&v>0&&A++<Bt.MAX_PIXEL_DRIFT;)v--;let I=v,N=0,k=E.length;for(let F=x;I<y;I++)if(o.get(I,h)!==F)d[N]++;else{if(N===k-1){if(Bt.patternMatchVariance(d,E,Bt.MAX_INDIVIDUAL_VARIANCE)<Bt.MAX_AVG_VARIANCE)return new Int32Array([v,I]);v+=d[0]+d[1],M.arraycopy(d,2,d,0,N-1),d[N-1]=0,d[N]=0,N--}else N++;d[N]=1,F=!F}return N===k-1&&Bt.patternMatchVariance(d,E,Bt.MAX_INDIVIDUAL_VARIANCE)<Bt.MAX_AVG_VARIANCE?new Int32Array([v,I-1]):null}static patternMatchVariance(o,c,h){let y=o.length,x=0,E=0;for(let A=0;A<y;A++)x+=o[A],E+=c[A];if(x<E)return 1/0;let d=x/E;h*=d;let v=0;for(let A=0;A<y;A++){let I=o[A],N=c[A]*d,k=I>N?I-N:N-I;if(k>h)return 1/0;v+=k}return v/x}}Bt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Bt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Bt.MAX_AVG_VARIANCE=.42,Bt.MAX_INDIVIDUAL_VARIANCE=.8,Bt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Bt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Bt.MAX_PIXEL_DRIFT=3,Bt.MAX_PATTERN_DRIFT=5,Bt.SKIPPED_ROW_COUNT_MAX=25,Bt.ROW_STEP=5,Bt.BARCODE_MIN_HEIGHT=10;class xn{constructor(o,c){if(c.length===0)throw new _;this.field=o;let h=c.length;if(h>1&&c[0]===0){let y=1;for(;y<h&&c[y]===0;)y++;y===h?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(h-y),M.arraycopy(c,y,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);if(o===1){let y=0;for(let x of this.coefficients)y=this.field.add(y,x);return y}let c=this.coefficients[0],h=this.coefficients.length;for(let y=1;y<h;y++)c=this.field.add(this.field.multiply(o,c),this.coefficients[y]);return c}add(o){if(!this.field.equals(o.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let c=this.coefficients,h=o.coefficients;if(c.length>h.length){let E=c;c=h,h=E}let y=new Int32Array(h.length),x=h.length-c.length;M.arraycopy(h,0,y,0,x);for(let E=x;E<h.length;E++)y[E]=this.field.add(c[E-x],h[E]);return new xn(this.field,y)}subtract(o){if(!this.field.equals(o.field))throw new _("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof xn?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new xn(this.field,new Int32Array([0]));let c=this.coefficients,h=c.length,y=o.coefficients,x=y.length,E=new Int32Array(h+x-1);for(let d=0;d<h;d++){let v=c[d];for(let A=0;A<x;A++)E[d+A]=this.field.add(E[d+A],this.field.multiply(v,y[A]))}return new xn(this.field,E)}negative(){let o=this.coefficients.length,c=new Int32Array(o);for(let h=0;h<o;h++)c[h]=this.field.subtract(0,this.coefficients[h]);return new xn(this.field,c)}multiplyScalar(o){if(o===0)return new xn(this.field,new Int32Array([0]));if(o===1)return this;let c=this.coefficients.length,h=new Int32Array(c);for(let y=0;y<c;y++)h[y]=this.field.multiply(this.coefficients[y],o);return new xn(this.field,h)}multiplyByMonomial(o,c){if(o<0)throw new _;if(c===0)return new xn(this.field,new Int32Array([0]));let h=this.coefficients.length,y=new Int32Array(h+o);for(let x=0;x<h;x++)y[x]=this.field.multiply(this.coefficients[x],c);return new xn(this.field,y)}toString(){let o=new ne;for(let c=this.getDegree();c>=0;c--){let h=this.getCoefficient(c);h!==0&&(h<0?(o.append(" - "),h=-h):o.length()>0&&o.append(" + "),(c===0||h!==1)&&o.append(h),c!==0&&(c===1?o.append("x"):(o.append("x^"),o.append(c))))}return o.toString()}}class Do{add(o,c){return(o+c)%this.modulus}subtract(o,c){return(this.modulus+o-c)%this.modulus}exp(o){return this.expTable[o]}log(o){if(o===0)throw new _;return this.logTable[o]}inverse(o){if(o===0)throw new Fe;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,c){return o===0||c===0?0:this.expTable[(this.logTable[o]+this.logTable[c])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class an extends Do{constructor(o,c){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let h=1;for(let y=0;y<o;y++)this.expTable[y]=h,h=h*c%o;for(let y=0;y<o-1;y++)this.logTable[this.expTable[y]]=y;this.zero=new xn(this,new Int32Array([0])),this.one=new xn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,c){if(o<0)throw new _;if(c===0)return this.zero;let h=new Int32Array(o+1);return h[0]=c,new xn(this,h)}}an.PDF417_GF=new an(Pt.NUMBER_OF_CODEWORDS,3);class Aa{constructor(){this.field=an.PDF417_GF}decode(o,c,h){let y=new xn(this.field,o),x=new Int32Array(c),E=!1;for(let G=c;G>0;G--){let X=y.evaluateAt(this.field.exp(G));x[c-G]=X,X!==0&&(E=!0)}if(!E)return 0;let d=this.field.getOne();if(h!=null)for(const G of h){let X=this.field.exp(o.length-1-G),re=new xn(this.field,new Int32Array([this.field.subtract(0,X),1]));d=d.multiply(re)}let v=new xn(this.field,x),A=this.runEuclideanAlgorithm(this.field.buildMonomial(c,1),v,c),I=A[0],N=A[1],k=this.findErrorLocations(I),F=this.findErrorMagnitudes(N,I,k);for(let G=0;G<k.length;G++){let X=o.length-1-this.field.log(k[G]);if(X<0)throw R.getChecksumInstance();o[X]=this.field.subtract(o[X],F[G])}return k.length}runEuclideanAlgorithm(o,c,h){if(o.getDegree()<c.getDegree()){let k=o;o=c,c=k}let y=o,x=c,E=this.field.getZero(),d=this.field.getOne();for(;x.getDegree()>=Math.round(h/2);){let k=y,F=E;if(y=x,E=d,y.isZero())throw R.getChecksumInstance();x=k;let G=this.field.getZero(),X=y.getCoefficient(y.getDegree()),re=this.field.inverse(X);for(;x.getDegree()>=y.getDegree()&&!x.isZero();){let te=x.getDegree()-y.getDegree(),oe=this.field.multiply(x.getCoefficient(x.getDegree()),re);G=G.add(this.field.buildMonomial(te,oe)),x=x.subtract(y.multiplyByMonomial(te,oe))}d=G.multiply(E).subtract(F).negative()}let v=d.getCoefficient(0);if(v===0)throw R.getChecksumInstance();let A=this.field.inverse(v),I=d.multiply(A),N=x.multiply(A);return[I,N]}findErrorLocations(o){let c=o.getDegree(),h=new Int32Array(c),y=0;for(let x=1;x<this.field.getSize()&&y<c;x++)o.evaluateAt(x)===0&&(h[y]=this.field.inverse(x),y++);if(y!==c)throw R.getChecksumInstance();return h}findErrorMagnitudes(o,c,h){let y=c.getDegree(),x=new Int32Array(y);for(let A=1;A<=y;A++)x[y-A]=this.field.multiply(A,c.getCoefficient(A));let E=new xn(this.field,x),d=h.length,v=new Int32Array(d);for(let A=0;A<d;A++){let I=this.field.inverse(h[A]),N=this.field.subtract(0,o.evaluateAt(I)),k=this.field.inverse(E.evaluateAt(I));v[A]=this.field.multiply(N,k)}return v}}class qa{constructor(o,c,h,y,x){o instanceof qa?this.constructor_2(o):this.constructor_1(o,c,h,y,x)}constructor_1(o,c,h,y,x){const E=c==null||h==null,d=y==null||x==null;if(E&&d)throw new he;E?(c=new it(0,y.getY()),h=new it(0,x.getY())):d&&(y=new it(o.getWidth()-1,c.getY()),x=new it(o.getWidth()-1,h.getY())),this.image=o,this.topLeft=c,this.bottomLeft=h,this.topRight=y,this.bottomRight=x,this.minX=Math.trunc(Math.min(c.getX(),h.getX())),this.maxX=Math.trunc(Math.max(y.getX(),x.getX())),this.minY=Math.trunc(Math.min(c.getY(),y.getY())),this.maxY=Math.trunc(Math.max(h.getY(),x.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,c){return o==null?c:c==null?o:new qa(o.image,o.topLeft,o.bottomLeft,c.topRight,c.bottomRight)}addMissingRows(o,c,h){let y=this.topLeft,x=this.bottomLeft,E=this.topRight,d=this.bottomRight;if(o>0){let v=h?this.topLeft:this.topRight,A=Math.trunc(v.getY()-o);A<0&&(A=0);let I=new it(v.getX(),A);h?y=I:E=I}if(c>0){let v=h?this.bottomLeft:this.bottomRight,A=Math.trunc(v.getY()+c);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);let I=new it(v.getX(),A);h?x=I:d=I}return new qa(this.image,y,x,E,d)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class qs{constructor(o,c,h,y){this.columnCount=o,this.errorCorrectionLevel=y,this.rowCountUpperPart=c,this.rowCountLowerPart=h,this.rowCount=c+h}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Sa{constructor(){this.buffer=""}static form(o,c){let h=-1;function y(E,d,v,A,I,N){if(E==="%%")return"%";if(c[++h]===void 0)return;E=A?parseInt(A.substr(1)):void 0;let k=I?parseInt(I.substr(1)):void 0,F;switch(N){case"s":F=c[h];break;case"c":F=c[h][0];break;case"f":F=parseFloat(c[h]).toFixed(E);break;case"p":F=parseFloat(c[h]).toPrecision(E);break;case"e":F=parseFloat(c[h]).toExponential(E);break;case"x":F=parseInt(c[h]).toString(k||16);break;case"d":F=parseFloat(parseInt(c[h],k||10).toPrecision(E)).toFixed(0);break}F=typeof F=="object"?JSON.stringify(F):(+F).toString(k);let G=parseInt(v),X=v&&v[0]+""=="0"?"0":" ";for(;F.length<G;)F=d!==void 0?F+X:X+F;return F}let x=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(x,y)}format(o,...c){this.buffer+=Sa.form(o,c)}toString(){return this.buffer}}class Ta{constructor(o){this.boundingBox=new qa(o),this.codewords=new Array(o.getMaxY()-o.getMinY()+1)}getCodewordNearby(o){let c=this.getCodeword(o);if(c!=null)return c;for(let h=1;h<Ta.MAX_NEARBY_DISTANCE;h++){let y=this.imageRowToCodewordIndex(o)-h;if(y>=0&&(c=this.codewords[y],c!=null)||(y=this.imageRowToCodewordIndex(o)+h,y<this.codewords.length&&(c=this.codewords[y],c!=null)))return c}return null}imageRowToCodewordIndex(o){return o-this.boundingBox.getMinY()}setCodeword(o,c){this.codewords[this.imageRowToCodewordIndex(o)]=c}getCodeword(o){return this.codewords[this.imageRowToCodewordIndex(o)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const o=new Sa;let c=0;for(const h of this.codewords){if(h==null){o.format("%3d:    |   %n",c++);continue}o.format("%3d: %3d|%3d%n",c++,h.getRowNumber(),h.getValue())}return o.toString()}}Ta.MAX_NEARBY_DISTANCE=5;class aa{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let c=this.values.get(o);c==null&&(c=0),c++,this.values.set(o,c)}getValue(){let o=-1,c=new Array;for(const[h,y]of this.values.entries()){const x={getKey:()=>h,getValue:()=>y};x.getValue()>o?(o=x.getValue(),c=[],c.push(x.getKey())):x.getValue()===o&&c.push(x.getKey())}return Pt.toIntArray(c)}getConfidence(o){return this.values.get(o)}}class Ga extends Ta{constructor(o,c){super(o),this._isLeft=c}setRowNumbers(){for(let o of this.getCodewords())o?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let c=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(c,o);let h=this.getBoundingBox(),y=this._isLeft?h.getTopLeft():h.getTopRight(),x=this._isLeft?h.getBottomLeft():h.getBottomRight(),E=this.imageRowToCodewordIndex(Math.trunc(y.getY())),d=this.imageRowToCodewordIndex(Math.trunc(x.getY())),v=-1,A=1,I=0;for(let N=E;N<d;N++){if(c[N]==null)continue;let k=c[N],F=k.getRowNumber()-v;if(F===0)I++;else if(F===1)A=Math.max(A,I),I=1,v=k.getRowNumber();else if(F<0||k.getRowNumber()>=o.getRowCount()||F>N)c[N]=null;else{let G;A>2?G=(A-2)*F:G=F;let X=G>=N;for(let re=1;re<=G&&!X;re++)X=c[N-re]!=null;X?c[N]=null:(v=k.getRowNumber(),I=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let c=new Int32Array(o.getRowCount());for(let h of this.getCodewords())if(h!=null){let y=h.getRowNumber();if(y>=c.length)continue;c[y]++}return c}adjustIncompleteIndicatorColumnRowNumbers(o){let c=this.getBoundingBox(),h=this._isLeft?c.getTopLeft():c.getTopRight(),y=this._isLeft?c.getBottomLeft():c.getBottomRight(),x=this.imageRowToCodewordIndex(Math.trunc(h.getY())),E=this.imageRowToCodewordIndex(Math.trunc(y.getY())),d=this.getCodewords(),v=-1;for(let A=x;A<E;A++){if(d[A]==null)continue;let I=d[A];I.setRowNumberAsRowIndicatorColumn();let N=I.getRowNumber()-v;N===0||(N===1?v=I.getRowNumber():I.getRowNumber()>=o.getRowCount()?d[A]=null:v=I.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),c=new aa,h=new aa,y=new aa,x=new aa;for(let d of o){if(d==null)continue;d.setRowNumberAsRowIndicatorColumn();let v=d.getValue()%30,A=d.getRowNumber();switch(this._isLeft||(A+=2),A%3){case 0:h.setValue(v*3+1);break;case 1:x.setValue(v/3),y.setValue(v%3);break;case 2:c.setValue(v+1);break}}if(c.getValue().length===0||h.getValue().length===0||y.getValue().length===0||x.getValue().length===0||c.getValue()[0]<1||h.getValue()[0]+y.getValue()[0]<Pt.MIN_ROWS_IN_BARCODE||h.getValue()[0]+y.getValue()[0]>Pt.MAX_ROWS_IN_BARCODE)return null;let E=new qs(c.getValue()[0],h.getValue()[0],y.getValue()[0],x.getValue()[0]);return this.removeIncorrectCodewords(o,E),E}removeIncorrectCodewords(o,c){for(let h=0;h<o.length;h++){let y=o[h];if(o[h]==null)continue;let x=y.getValue()%30,E=y.getRowNumber();if(E>c.getRowCount()){o[h]=null;continue}switch(this._isLeft||(E+=2),E%3){case 0:x*3+1!==c.getRowCountUpperPart()&&(o[h]=null);break;case 1:(Math.trunc(x/3)!==c.getErrorCorrectionLevel()||x%3!==c.getRowCountLowerPart())&&(o[h]=null);break;case 2:x+1!==c.getColumnCount()&&(o[h]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ir{constructor(o,c){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=c,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o=Pt.MAX_CODEWORDS_IN_BARCODE,c;do c=o,o=this.adjustRowNumbersAndGetCount();while(o>0&&o<c);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(o===0)return 0;for(let c=1;c<this.barcodeColumnCount+1;c++){let h=this.detectionResultColumns[c].getCodewords();for(let y=0;y<h.length;y++)h[y]!=null&&(h[y].hasValidRowNumber()||this.adjustRowNumbers(c,y,h))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let o=this.detectionResultColumns[0].getCodewords(),c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<o.length;h++)if(o[h]!=null&&c[h]!=null&&o[h].getRowNumber()===c[h].getRowNumber())for(let y=1;y<=this.barcodeColumnCount;y++){let x=this.detectionResultColumns[y].getCodewords()[h];x!=null&&(x.setRowNumber(o[h].getRowNumber()),x.hasValidRowNumber()||(this.detectionResultColumns[y].getCodewords()[h]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let o=0,c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<c.length;h++){if(c[h]==null)continue;let y=c[h].getRowNumber(),x=0;for(let E=this.barcodeColumnCount+1;E>0&&x<this.ADJUST_ROW_NUMBER_SKIP;E--){let d=this.detectionResultColumns[E].getCodewords()[h];d!=null&&(x=ir.adjustRowNumberIfValid(y,x,d),d.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let o=0,c=this.detectionResultColumns[0].getCodewords();for(let h=0;h<c.length;h++){if(c[h]==null)continue;let y=c[h].getRowNumber(),x=0;for(let E=1;E<this.barcodeColumnCount+1&&x<this.ADJUST_ROW_NUMBER_SKIP;E++){let d=this.detectionResultColumns[E].getCodewords()[h];d!=null&&(x=ir.adjustRowNumberIfValid(y,x,d),d.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,c,h){return h==null||h.hasValidRowNumber()||(h.isValidRowNumber(o)?(h.setRowNumber(o),c=0):++c),c}adjustRowNumbers(o,c,h){if(!this.detectionResultColumns[o-1])return;let y=h[c],x=this.detectionResultColumns[o-1].getCodewords(),E=x;this.detectionResultColumns[o+1]!=null&&(E=this.detectionResultColumns[o+1].getCodewords());let d=new Array(14);d[2]=x[c],d[3]=E[c],c>0&&(d[0]=h[c-1],d[4]=x[c-1],d[5]=E[c-1]),c>1&&(d[8]=h[c-2],d[10]=x[c-2],d[11]=E[c-2]),c<h.length-1&&(d[1]=h[c+1],d[6]=x[c+1],d[7]=E[c+1]),c<h.length-2&&(d[9]=h[c+2],d[12]=x[c+2],d[13]=E[c+2]);for(let v of d)if(ir.adjustRowNumber(y,v))return}static adjustRowNumber(o,c){return c==null?!1:c.hasValidRowNumber()&&c.getBucket()===o.getBucket()?(o.setRowNumber(c.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,c){this.detectionResultColumns[o]=c}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];o==null&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let c=new Sa;for(let h=0;h<o.getCodewords().length;h++){c.format("CW %3d:",h);for(let y=0;y<this.barcodeColumnCount+2;y++){if(this.detectionResultColumns[y]==null){c.format("    |   ");continue}let x=this.detectionResultColumns[y].getCodewords()[h];if(x==null){c.format("    |   ");continue}c.format(" %3d|%3d",x.getRowNumber(),x.getValue())}c.format("%n")}return c.toString()}}class Ia{constructor(o,c,h,y){this.rowNumber=Ia.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(o),this.endX=Math.trunc(c),this.bucket=Math.trunc(h),this.value=Math.trunc(y)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(o){return o!==Ia.BARCODE_ROW_UNKNOWN&&this.bucket===o%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(o){this.rowNumber=o}toString(){return this.rowNumber+"|"+this.value}}Ia.BARCODE_ROW_UNKNOWN=-1;class Ir{static initialize(){for(let o=0;o<Pt.SYMBOL_TABLE.length;o++){let c=Pt.SYMBOL_TABLE[o],h=c&1;for(let y=0;y<Pt.BARS_IN_MODULE;y++){let x=0;for(;(c&1)===h;)x+=1,c>>=1;h=c&1,Ir.RATIOS_TABLE[o]||(Ir.RATIOS_TABLE[o]=new Array(Pt.BARS_IN_MODULE)),Ir.RATIOS_TABLE[o][Pt.BARS_IN_MODULE-y-1]=Math.fround(x/Pt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let c=Ir.getDecodedCodewordValue(Ir.sampleBitCounts(o));return c!==-1?c:Ir.getClosestDecodedValue(o)}static sampleBitCounts(o){let c=xt.sum(o),h=new Int32Array(Pt.BARS_IN_MODULE),y=0,x=0;for(let E=0;E<Pt.MODULES_IN_CODEWORD;E++){let d=c/(2*Pt.MODULES_IN_CODEWORD)+E*c/Pt.MODULES_IN_CODEWORD;x+o[y]<=d&&(x+=o[y],y++),h[y]++}return h}static getDecodedCodewordValue(o){let c=Ir.getBitValue(o);return Pt.getCodeword(c)===-1?-1:c}static getBitValue(o){let c=0;for(let h=0;h<o.length;h++)for(let y=0;y<o[h];y++)c=c<<1|(h%2===0?1:0);return Math.trunc(c)}static getClosestDecodedValue(o){let c=xt.sum(o),h=new Array(Pt.BARS_IN_MODULE);if(c>1)for(let E=0;E<h.length;E++)h[E]=Math.fround(o[E]/c);let y=$t.MAX_VALUE,x=-1;this.bSymbolTableReady||Ir.initialize();for(let E=0;E<Ir.RATIOS_TABLE.length;E++){let d=0,v=Ir.RATIOS_TABLE[E];for(let A=0;A<Pt.BARS_IN_MODULE;A++){let I=Math.fround(v[A]-h[A]);if(d+=Math.fround(I*I),d>=y)break}d<y&&(y=d,x=Pt.SYMBOL_TABLE[E])}return x}}Ir.bSymbolTableReady=!1,Ir.RATIOS_TABLE=new Array(Pt.SYMBOL_TABLE.length).map(Y=>new Array(Pt.BARS_IN_MODULE));class Ha{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class Gs{static parseLong(o,c=void 0){return parseInt(o,c)}}class os extends p{}os.kind="NullPointerException";class tl{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,c,h){if(o==null)throw new os;if(c<0||c>o.length||h<0||c+h>o.length||c+h<0)throw new L;if(h===0)return;for(let y=0;y<h;y++)this.write(o[c+y])}flush(){}close(){}}class vs extends p{}class nl extends tl{constructor(o=32){if(super(),this.count=0,o<0)throw new _("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let h=this.buf.length<<1;if(h-o<0&&(h=o),h<0){if(o<0)throw new vs;h=K.MAX_VALUE}this.buf=$.copyOfUint8Array(this.buf,h)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,c,h){if(c<0||c>o.length||h<0||c+h-o.length>0)throw new L;this.ensureCapacity(this.count+h),M.arraycopy(o,c,this.buf,this.count,h),this.count+=h}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return $.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var En;(function(Y){Y[Y.ALPHA=0]="ALPHA",Y[Y.LOWER=1]="LOWER",Y[Y.MIXED=2]="MIXED",Y[Y.PUNCT=3]="PUNCT",Y[Y.ALPHA_SHIFT=4]="ALPHA_SHIFT",Y[Y.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(En||(En={}));function xs(){if(typeof window<"u")return window.BigInt||null;if(typeof Ug<"u")return Ug.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let co;function sa(Y){if(typeof co>"u"&&(co=xs()),co===null)throw new Error("BigInt is not supported!");return co(Y)}function bs(){let Y=[];Y[0]=sa(1);let o=sa(900);Y[1]=o;for(let c=2;c<16;c++)Y[c]=Y[c-1]*o;return Y}class Me{static decode(o,c){let h=new ne(""),y=U.ISO8859_1;h.enableDecoding(y);let x=1,E=o[x++],d=new Ha;for(;x<o[0];){switch(E){case Me.TEXT_COMPACTION_MODE_LATCH:x=Me.textCompaction(o,x,h);break;case Me.BYTE_COMPACTION_MODE_LATCH:case Me.BYTE_COMPACTION_MODE_LATCH_6:x=Me.byteCompaction(E,o,y,x,h);break;case Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[x++]);break;case Me.NUMERIC_COMPACTION_MODE_LATCH:x=Me.numericCompaction(o,x,h);break;case Me.ECI_CHARSET:U.getCharacterSetECIByValue(o[x++]);break;case Me.ECI_GENERAL_PURPOSE:x+=2;break;case Me.ECI_USER_DEFINED:x++;break;case Me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:x=Me.decodeMacroBlock(o,x,d);break;case Me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Me.MACRO_PDF417_TERMINATOR:throw new V;default:x--,x=Me.textCompaction(o,x,h);break}if(x<o.length)E=o[x++];else throw V.getFormatInstance()}if(h.length()===0)throw V.getFormatInstance();let v=new Se(null,h.toString(),null,c);return v.setOther(d),v}static decodeMacroBlock(o,c,h){if(c+Me.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw V.getFormatInstance();let y=new Int32Array(Me.NUMBER_OF_SEQUENCE_CODEWORDS);for(let d=0;d<Me.NUMBER_OF_SEQUENCE_CODEWORDS;d++,c++)y[d]=o[c];h.setSegmentIndex(K.parseInt(Me.decodeBase900toBase10(y,Me.NUMBER_OF_SEQUENCE_CODEWORDS)));let x=new ne;c=Me.textCompaction(o,c,x),h.setFileId(x.toString());let E=-1;for(o[c]===Me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(E=c+1);c<o[0];)switch(o[c]){case Me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(c++,o[c]){case Me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let d=new ne;c=Me.textCompaction(o,c+1,d),h.setFileName(d.toString());break;case Me.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let v=new ne;c=Me.textCompaction(o,c+1,v),h.setSender(v.toString());break;case Me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let A=new ne;c=Me.textCompaction(o,c+1,A),h.setAddressee(A.toString());break;case Me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let I=new ne;c=Me.numericCompaction(o,c+1,I),h.setSegmentCount(K.parseInt(I.toString()));break;case Me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let N=new ne;c=Me.numericCompaction(o,c+1,N),h.setTimestamp(Gs.parseLong(N.toString()));break;case Me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let k=new ne;c=Me.numericCompaction(o,c+1,k),h.setChecksum(K.parseInt(k.toString()));break;case Me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let F=new ne;c=Me.numericCompaction(o,c+1,F),h.setFileSize(Gs.parseLong(F.toString()));break;default:throw V.getFormatInstance()}break;case Me.MACRO_PDF417_TERMINATOR:c++,h.setLastSegment(!0);break;default:throw V.getFormatInstance()}if(E!==-1){let d=c-E;h.isLastSegment()&&d--,h.setOptionalData($.copyOfRange(o,E,E+d))}return c}static textCompaction(o,c,h){let y=new Int32Array((o[0]-c)*2),x=new Int32Array((o[0]-c)*2),E=0,d=!1;for(;c<o[0]&&!d;){let v=o[c++];if(v<Me.TEXT_COMPACTION_MODE_LATCH)y[E]=v/30,y[E+1]=v%30,E+=2;else switch(v){case Me.TEXT_COMPACTION_MODE_LATCH:y[E++]=Me.TEXT_COMPACTION_MODE_LATCH;break;case Me.BYTE_COMPACTION_MODE_LATCH:case Me.BYTE_COMPACTION_MODE_LATCH_6:case Me.NUMERIC_COMPACTION_MODE_LATCH:case Me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Me.MACRO_PDF417_TERMINATOR:c--,d=!0;break;case Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y[E]=Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,v=o[c++],x[E]=v,E++;break}}return Me.decodeTextCompaction(y,x,E,h),c}static decodeTextCompaction(o,c,h,y){let x=En.ALPHA,E=En.ALPHA,d=0;for(;d<h;){let v=o[d],A="";switch(x){case En.ALPHA:if(v<26)A=String.fromCharCode(65+v);else switch(v){case 26:A=" ";break;case Me.LL:x=En.LOWER;break;case Me.ML:x=En.MIXED;break;case Me.PS:E=x,x=En.PUNCT_SHIFT;break;case Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(c[d]);break;case Me.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break;case En.LOWER:if(v<26)A=String.fromCharCode(97+v);else switch(v){case 26:A=" ";break;case Me.AS:E=x,x=En.ALPHA_SHIFT;break;case Me.ML:x=En.MIXED;break;case Me.PS:E=x,x=En.PUNCT_SHIFT;break;case Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(c[d]);break;case Me.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break;case En.MIXED:if(v<Me.PL)A=Me.MIXED_CHARS[v];else switch(v){case Me.PL:x=En.PUNCT;break;case 26:A=" ";break;case Me.LL:x=En.LOWER;break;case Me.AL:x=En.ALPHA;break;case Me.PS:E=x,x=En.PUNCT_SHIFT;break;case Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(c[d]);break;case Me.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break;case En.PUNCT:if(v<Me.PAL)A=Me.PUNCT_CHARS[v];else switch(v){case Me.PAL:x=En.ALPHA;break;case Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(c[d]);break;case Me.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break;case En.ALPHA_SHIFT:if(x=E,v<26)A=String.fromCharCode(65+v);else switch(v){case 26:A=" ";break;case Me.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break;case En.PUNCT_SHIFT:if(x=E,v<Me.PAL)A=Me.PUNCT_CHARS[v];else switch(v){case Me.PAL:x=En.ALPHA;break;case Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(c[d]);break;case Me.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break}A!==""&&y.append(A),d++}}static byteCompaction(o,c,h,y,x){let E=new nl,d=0,v=0,A=!1;switch(o){case Me.BYTE_COMPACTION_MODE_LATCH:let I=new Int32Array(6),N=c[y++];for(;y<c[0]&&!A;)switch(I[d++]=N,v=900*v+N,N=c[y++],N){case Me.TEXT_COMPACTION_MODE_LATCH:case Me.BYTE_COMPACTION_MODE_LATCH:case Me.NUMERIC_COMPACTION_MODE_LATCH:case Me.BYTE_COMPACTION_MODE_LATCH_6:case Me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Me.MACRO_PDF417_TERMINATOR:y--,A=!0;break;default:if(d%5===0&&d>0){for(let k=0;k<6;++k)E.write(Number(sa(v)>>sa(8*(5-k))));v=0,d=0}break}y===c[0]&&N<Me.TEXT_COMPACTION_MODE_LATCH&&(I[d++]=N);for(let k=0;k<d;k++)E.write(I[k]);break;case Me.BYTE_COMPACTION_MODE_LATCH_6:for(;y<c[0]&&!A;){let k=c[y++];if(k<Me.TEXT_COMPACTION_MODE_LATCH)d++,v=900*v+k;else switch(k){case Me.TEXT_COMPACTION_MODE_LATCH:case Me.BYTE_COMPACTION_MODE_LATCH:case Me.NUMERIC_COMPACTION_MODE_LATCH:case Me.BYTE_COMPACTION_MODE_LATCH_6:case Me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Me.MACRO_PDF417_TERMINATOR:y--,A=!0;break}if(d%5===0&&d>0){for(let F=0;F<6;++F)E.write(Number(sa(v)>>sa(8*(5-F))));v=0,d=0}}break}return x.append(ie.decode(E.toByteArray(),h)),y}static numericCompaction(o,c,h){let y=0,x=!1,E=new Int32Array(Me.MAX_NUMERIC_CODEWORDS);for(;c<o[0]&&!x;){let d=o[c++];if(c===o[0]&&(x=!0),d<Me.TEXT_COMPACTION_MODE_LATCH)E[y]=d,y++;else switch(d){case Me.TEXT_COMPACTION_MODE_LATCH:case Me.BYTE_COMPACTION_MODE_LATCH:case Me.BYTE_COMPACTION_MODE_LATCH_6:case Me.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Me.MACRO_PDF417_TERMINATOR:c--,x=!0;break}(y%Me.MAX_NUMERIC_CODEWORDS===0||d===Me.NUMERIC_COMPACTION_MODE_LATCH||x)&&y>0&&(h.append(Me.decodeBase900toBase10(E,y)),y=0)}return c}static decodeBase900toBase10(o,c){let h=sa(0);for(let x=0;x<c;x++)h+=Me.EXP900[c-x-1]*sa(o[x]);let y=h.toString();if(y.charAt(0)!=="1")throw new V;return y.substring(1)}}Me.TEXT_COMPACTION_MODE_LATCH=900,Me.BYTE_COMPACTION_MODE_LATCH=901,Me.NUMERIC_COMPACTION_MODE_LATCH=902,Me.BYTE_COMPACTION_MODE_LATCH_6=924,Me.ECI_USER_DEFINED=925,Me.ECI_GENERAL_PURPOSE=926,Me.ECI_CHARSET=927,Me.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Me.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Me.MACRO_PDF417_TERMINATOR=922,Me.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Me.MAX_NUMERIC_CODEWORDS=15,Me.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Me.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Me.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Me.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Me.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Me.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Me.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Me.PL=25,Me.LL=27,Me.AS=27,Me.ML=28,Me.AL=28,Me.PS=29,Me.PAL=29,Me.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Me.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Me.EXP900=xs()?bs():[],Me.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Xt{constructor(){}static decode(o,c,h,y,x,E,d){let v=new qa(o,c,h,y,x),A=null,I=null,N;for(let G=!0;;G=!1){if(c!=null&&(A=Xt.getRowIndicatorColumn(o,v,c,!0,E,d)),y!=null&&(I=Xt.getRowIndicatorColumn(o,v,y,!1,E,d)),N=Xt.merge(A,I),N==null)throw he.getNotFoundInstance();let X=N.getBoundingBox();if(G&&X!=null&&(X.getMinY()<v.getMinY()||X.getMaxY()>v.getMaxY()))v=X;else break}N.setBoundingBox(v);let k=N.getBarcodeColumnCount()+1;N.setDetectionResultColumn(0,A),N.setDetectionResultColumn(k,I);let F=A!=null;for(let G=1;G<=k;G++){let X=F?G:k-G;if(N.getDetectionResultColumn(X)!==void 0)continue;let re;X===0||X===k?re=new Ga(v,X===0):re=new Ta(v),N.setDetectionResultColumn(X,re);let te=-1,oe=te;for(let fe=v.getMinY();fe<=v.getMaxY();fe++){if(te=Xt.getStartColumn(N,X,fe,F),te<0||te>v.getMaxX()){if(oe===-1)continue;te=oe}let le=Xt.detectCodeword(o,v.getMinX(),v.getMaxX(),F,te,fe,E,d);le!=null&&(re.setCodeword(fe,le),oe=te,E=Math.min(E,le.getWidth()),d=Math.max(d,le.getWidth()))}}return Xt.createDecoderResult(N)}static merge(o,c){if(o==null&&c==null)return null;let h=Xt.getBarcodeMetadata(o,c);if(h==null)return null;let y=qa.merge(Xt.adjustBoundingBox(o),Xt.adjustBoundingBox(c));return new ir(h,y)}static adjustBoundingBox(o){if(o==null)return null;let c=o.getRowHeights();if(c==null)return null;let h=Xt.getMax(c),y=0;for(let d of c)if(y+=h-d,d>0)break;let x=o.getCodewords();for(let d=0;y>0&&x[d]==null;d++)y--;let E=0;for(let d=c.length-1;d>=0&&(E+=h-c[d],!(c[d]>0));d--);for(let d=x.length-1;E>0&&x[d]==null;d--)E--;return o.getBoundingBox().addMissingRows(y,E,o.isLeft())}static getMax(o){let c=-1;for(let h of o)c=Math.max(c,h);return c}static getBarcodeMetadata(o,c){let h;if(o==null||(h=o.getBarcodeMetadata())==null)return c==null?null:c.getBarcodeMetadata();let y;return c==null||(y=c.getBarcodeMetadata())==null?h:h.getColumnCount()!==y.getColumnCount()&&h.getErrorCorrectionLevel()!==y.getErrorCorrectionLevel()&&h.getRowCount()!==y.getRowCount()?null:h}static getRowIndicatorColumn(o,c,h,y,x,E){let d=new Ga(c,y);for(let v=0;v<2;v++){let A=v===0?1:-1,I=Math.trunc(Math.trunc(h.getX()));for(let N=Math.trunc(Math.trunc(h.getY()));N<=c.getMaxY()&&N>=c.getMinY();N+=A){let k=Xt.detectCodeword(o,0,o.getWidth(),y,I,N,x,E);k!=null&&(d.setCodeword(N,k),y?I=k.getStartX():I=k.getEndX())}}return d}static adjustCodewordCount(o,c){let h=c[0][1],y=h.getValue(),x=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-Xt.getNumberOfECCodeWords(o.getBarcodeECLevel());if(y.length===0){if(x<1||x>Pt.MAX_CODEWORDS_IN_BARCODE)throw he.getNotFoundInstance();h.setValue(x)}else y[0]!==x&&h.setValue(x)}static createDecoderResult(o){let c=Xt.createBarcodeMatrix(o);Xt.adjustCodewordCount(o,c);let h=new Array,y=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),x=[],E=new Array;for(let v=0;v<o.getBarcodeRowCount();v++)for(let A=0;A<o.getBarcodeColumnCount();A++){let I=c[v][A+1].getValue(),N=v*o.getBarcodeColumnCount()+A;I.length===0?h.push(N):I.length===1?y[N]=I[0]:(E.push(N),x.push(I))}let d=new Array(x.length);for(let v=0;v<d.length;v++)d[v]=x[v];return Xt.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),y,Pt.toIntArray(h),Pt.toIntArray(E),d)}static createDecoderResultFromAmbiguousValues(o,c,h,y,x){let E=new Int32Array(y.length),d=100;for(;d-- >0;){for(let v=0;v<E.length;v++)c[y[v]]=x[v][E[v]];try{return Xt.decodeCodewords(c,o,h)}catch(v){if(!(v instanceof R))throw v}if(E.length===0)throw R.getChecksumInstance();for(let v=0;v<E.length;v++)if(E[v]<x[v].length-1){E[v]++;break}else if(E[v]=0,v===E.length-1)throw R.getChecksumInstance()}throw R.getChecksumInstance()}static createBarcodeMatrix(o){let c=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let y=0;y<c.length;y++)for(let x=0;x<c[y].length;x++)c[y][x]=new aa;let h=0;for(let y of o.getDetectionResultColumns()){if(y!=null){for(let x of y.getCodewords())if(x!=null){let E=x.getRowNumber();if(E>=0){if(E>=c.length)continue;c[E][h].setValue(x.getValue())}}}h++}return c}static isValidBarcodeColumn(o,c){return c>=0&&c<=o.getBarcodeColumnCount()+1}static getStartColumn(o,c,h,y){let x=y?1:-1,E=null;if(Xt.isValidBarcodeColumn(o,c-x)&&(E=o.getDetectionResultColumn(c-x).getCodeword(h)),E!=null)return y?E.getEndX():E.getStartX();if(E=o.getDetectionResultColumn(c).getCodewordNearby(h),E!=null)return y?E.getStartX():E.getEndX();if(Xt.isValidBarcodeColumn(o,c-x)&&(E=o.getDetectionResultColumn(c-x).getCodewordNearby(h)),E!=null)return y?E.getEndX():E.getStartX();let d=0;for(;Xt.isValidBarcodeColumn(o,c-x);){c-=x;for(let v of o.getDetectionResultColumn(c).getCodewords())if(v!=null)return(y?v.getEndX():v.getStartX())+x*d*(v.getEndX()-v.getStartX());d++}return y?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,c,h,y,x,E,d,v){x=Xt.adjustCodewordStartColumn(o,c,h,y,x,E);let A=Xt.getModuleBitCount(o,c,h,y,x,E);if(A==null)return null;let I,N=xt.sum(A);if(y)I=x+N;else{for(let G=0;G<A.length/2;G++){let X=A[G];A[G]=A[A.length-1-G],A[A.length-1-G]=X}I=x,x=I-N}if(!Xt.checkCodewordSkew(N,d,v))return null;let k=Ir.getDecodedValue(A),F=Pt.getCodeword(k);return F===-1?null:new Ia(x,I,Xt.getCodewordBucketNumber(k),F)}static getModuleBitCount(o,c,h,y,x,E){let d=x,v=new Int32Array(8),A=0,I=y?1:-1,N=y;for(;(y?d<h:d>=c)&&A<v.length;)o.get(d,E)===N?(v[A]++,d+=I):(A++,N=!N);return A===v.length||d===(y?h:c)&&A===v.length-1?v:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,c,h,y,x,E){let d=x,v=y?-1:1;for(let A=0;A<2;A++){for(;(y?d>=c:d<h)&&y===o.get(d,E);){if(Math.abs(x-d)>Xt.CODEWORD_SKEW_SIZE)return x;d+=v}v=-v,y=!y}return d}static checkCodewordSkew(o,c,h){return c-Xt.CODEWORD_SKEW_SIZE<=o&&o<=h+Xt.CODEWORD_SKEW_SIZE}static decodeCodewords(o,c,h){if(o.length===0)throw V.getFormatInstance();let y=1<<c+1,x=Xt.correctErrors(o,h,y);Xt.verifyCodewordCount(o,y);let E=Me.decode(o,""+c);return E.setErrorsCorrected(x),E.setErasures(h.length),E}static correctErrors(o,c,h){if(c!=null&&c.length>h/2+Xt.MAX_ERRORS||h<0||h>Xt.MAX_EC_CODEWORDS)throw R.getChecksumInstance();return Xt.errorCorrection.decode(o,h,c)}static verifyCodewordCount(o,c){if(o.length<4)throw V.getFormatInstance();let h=o[0];if(h>o.length)throw V.getFormatInstance();if(h===0)if(c<o.length)o[0]=o.length-c;else throw V.getFormatInstance()}static getBitCountForCodeword(o){let c=new Int32Array(8),h=0,y=c.length-1;for(;!((o&1)!==h&&(h=o&1,y--,y<0));)c[y]++,o>>=1;return c}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return Xt.getCodewordBucketNumber(Xt.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let c=new Sa;for(let h=0;h<o.length;h++){c.format("Row %2d: ",h);for(let y=0;y<o[h].length;y++){let x=o[h][y];x.getValue().length===0?c.format("        ",null):c.format("%4d(%2d)",x.getValue()[0],x.getConfidence(x.getValue()[0]))}c.format("%n")}return c.toString()}}Xt.CODEWORD_SKEW_SIZE=2,Xt.MAX_ERRORS=3,Xt.MAX_EC_CODEWORDS=512,Xt.errorCorrection=new Aa;class Dr{decode(o,c=null){let h=Dr.decode(o,c,!1);if(h==null||h.length===0||h[0]==null)throw he.getNotFoundInstance();return h[0]}decodeMultiple(o,c=null){try{return Dr.decode(o,c,!0)}catch(h){throw h instanceof V||h instanceof R?he.getNotFoundInstance():h}}static decode(o,c,h){const y=new Array,x=Bt.detectMultiple(o,c,h);for(const E of x.getPoints()){const d=Xt.decode(x.getBits(),E[4],E[5],E[6],E[7],Dr.getMinCodewordWidth(E),Dr.getMaxCodewordWidth(E)),v=new Ge(d.getText(),d.getRawBytes(),void 0,E,qe.PDF_417);v.putMetadata(ct.ERROR_CORRECTION_LEVEL,d.getECLevel());const A=d.getOther();A!=null&&v.putMetadata(ct.PDF417_EXTRA_METADATA,A),y.push(v)}return y.map(E=>E)}static getMaxWidth(o,c){return o==null||c==null?0:Math.trunc(Math.abs(o.getX()-c.getX()))}static getMinWidth(o,c){return o==null||c==null?K.MAX_VALUE:Math.trunc(Math.abs(o.getX()-c.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(Dr.getMaxWidth(o[0],o[4]),Dr.getMaxWidth(o[6],o[2])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN),Math.max(Dr.getMaxWidth(o[1],o[5]),Dr.getMaxWidth(o[7],o[3])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(Dr.getMinWidth(o[0],o[4]),Dr.getMinWidth(o[6],o[2])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN),Math.min(Dr.getMinWidth(o[1],o[5]),Dr.getMinWidth(o[7],o[3])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ka extends p{}Ka.kind="ReaderException";class ko{constructor(o,c){this.verbose=o===!0,c&&this.setHints(c)}decode(o,c){return c&&this.setHints(c),this.decodeInternal(o)}decodeWithState(o){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;const c=!r(o)&&o.get(Z.TRY_HARDER)===!0,h=r(o)?null:o.get(Z.POSSIBLE_FORMATS),y=new Array;if(!r(h)){const x=h.some(E=>E===qe.UPC_A||E===qe.UPC_E||E===qe.EAN_13||E===qe.EAN_8||E===qe.CODABAR||E===qe.CODE_39||E===qe.CODE_93||E===qe.CODE_128||E===qe.ITF||E===qe.RSS_14||E===qe.RSS_EXPANDED);x&&!c&&y.push(new wi(o,this.verbose)),h.includes(qe.QR_CODE)&&y.push(new Tr),h.includes(qe.DATA_MATRIX)&&y.push(new Gi),h.includes(qe.AZTEC)&&y.push(new gs),h.includes(qe.PDF_417)&&y.push(new Dr),x&&c&&y.push(new wi(o,this.verbose))}y.length===0&&(c||y.push(new wi(o,this.verbose)),y.push(new Tr),y.push(new Gi),y.push(new gs),y.push(new Dr),c&&y.push(new wi(o,this.verbose))),this.readers=y}reset(){if(this.readers!==null)for(const o of this.readers)o.reset()}decodeInternal(o){if(this.readers===null)throw new Ka("No readers where selected, nothing can be read.");for(const c of this.readers)try{return c.decode(o,this.hints)}catch(h){if(h instanceof Ka)continue}throw new he("No MultiFormat Readers were able to detect the code.")}}class Wa extends Xe{constructor(o=null,c=500){const h=new ko;h.setHints(o),super(h,c)}decodeBitmap(o){return this.reader.decodeWithState(o)}}class rl extends Xe{constructor(o=500){super(new Dr,o)}}class il extends Xe{constructor(o=500){super(new Tr,o)}}var Br;(function(Y){Y[Y.ERROR_CORRECTION=0]="ERROR_CORRECTION",Y[Y.CHARACTER_SET=1]="CHARACTER_SET",Y[Y.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",Y[Y.MIN_SIZE=3]="MIN_SIZE",Y[Y.MAX_SIZE=4]="MAX_SIZE",Y[Y.MARGIN=5]="MARGIN",Y[Y.PDF417_COMPACT=6]="PDF417_COMPACT",Y[Y.PDF417_COMPACTION=7]="PDF417_COMPACTION",Y[Y.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",Y[Y.AZTEC_LAYERS=9]="AZTEC_LAYERS",Y[Y.QR_VERSION=10]="QR_VERSION"})(Br||(Br={}));var er=Br;class oa{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new ft(o,Int32Array.from([1])))}buildGenerator(o){const c=this.cachedGenerators;if(o>=c.length){let h=c[c.length-1];const y=this.field;for(let x=c.length;x<=o;x++){const E=h.multiply(new ft(y,Int32Array.from([1,y.exp(x-1+y.getGeneratorBase())])));c.push(E),h=E}}return c[o]}encode(o,c){if(c===0)throw new _("No error correction bytes");const h=o.length-c;if(h<=0)throw new _("No data bytes provided");const y=this.buildGenerator(c),x=new Int32Array(h);M.arraycopy(o,0,x,0,h);let E=new ft(this.field,x);E=E.multiplyByMonomial(c,1);const v=E.divide(y)[1].getCoefficients(),A=c-v.length;for(let I=0;I<A;I++)o[h+I]=0;M.arraycopy(v,0,o,h+A,v.length)}}class dn{constructor(){}static applyMaskPenaltyRule1(o){return dn.applyMaskPenaltyRule1Internal(o,!0)+dn.applyMaskPenaltyRule1Internal(o,!1)}static applyMaskPenaltyRule2(o){let c=0;const h=o.getArray(),y=o.getWidth(),x=o.getHeight();for(let E=0;E<x-1;E++){const d=h[E];for(let v=0;v<y-1;v++){const A=d[v];A===d[v+1]&&A===h[E+1][v]&&A===h[E+1][v+1]&&c++}}return dn.N2*c}static applyMaskPenaltyRule3(o){let c=0;const h=o.getArray(),y=o.getWidth(),x=o.getHeight();for(let E=0;E<x;E++)for(let d=0;d<y;d++){const v=h[E];d+6<y&&v[d]===1&&v[d+1]===0&&v[d+2]===1&&v[d+3]===1&&v[d+4]===1&&v[d+5]===0&&v[d+6]===1&&(dn.isWhiteHorizontal(v,d-4,d)||dn.isWhiteHorizontal(v,d+7,d+11))&&c++,E+6<x&&h[E][d]===1&&h[E+1][d]===0&&h[E+2][d]===1&&h[E+3][d]===1&&h[E+4][d]===1&&h[E+5][d]===0&&h[E+6][d]===1&&(dn.isWhiteVertical(h,d,E-4,E)||dn.isWhiteVertical(h,d,E+7,E+11))&&c++}return c*dn.N3}static isWhiteHorizontal(o,c,h){c=Math.max(c,0),h=Math.min(h,o.length);for(let y=c;y<h;y++)if(o[y]===1)return!1;return!0}static isWhiteVertical(o,c,h,y){h=Math.max(h,0),y=Math.min(y,o.length);for(let x=h;x<y;x++)if(o[x][c]===1)return!1;return!0}static applyMaskPenaltyRule4(o){let c=0;const h=o.getArray(),y=o.getWidth(),x=o.getHeight();for(let v=0;v<x;v++){const A=h[v];for(let I=0;I<y;I++)A[I]===1&&c++}const E=o.getHeight()*o.getWidth();return Math.floor(Math.abs(c*2-E)*10/E)*dn.N4}static getDataMaskBit(o,c,h){let y,x;switch(o){case 0:y=h+c&1;break;case 1:y=h&1;break;case 2:y=c%3;break;case 3:y=(h+c)%3;break;case 4:y=Math.floor(h/2)+Math.floor(c/3)&1;break;case 5:x=h*c,y=(x&1)+x%3;break;case 6:x=h*c,y=(x&1)+x%3&1;break;case 7:x=h*c,y=x%3+(h+c&1)&1;break;default:throw new _("Invalid mask pattern: "+o)}return y===0}static applyMaskPenaltyRule1Internal(o,c){let h=0;const y=c?o.getHeight():o.getWidth(),x=c?o.getWidth():o.getHeight(),E=o.getArray();for(let d=0;d<y;d++){let v=0,A=-1;for(let I=0;I<x;I++){const N=c?E[d][I]:E[I][d];N===A?v++:(v>=5&&(h+=dn.N1+(v-5)),v=1,A=N)}v>=5&&(h+=dn.N1+(v-5))}return h}}dn.N1=3,dn.N2=3,dn.N3=40,dn.N4=10;class ws{constructor(o,c){this.width=o,this.height=c;const h=new Array(c);for(let y=0;y!==c;y++)h[y]=new Uint8Array(o);this.bytes=h}getHeight(){return this.height}getWidth(){return this.width}get(o,c){return this.bytes[c][o]}getArray(){return this.bytes}setNumber(o,c,h){this.bytes[c][o]=h}setBoolean(o,c,h){this.bytes[c][o]=h?1:0}clear(o){for(const c of this.bytes)$.fill(c,o)}equals(o){if(!(o instanceof ws))return!1;const c=o;if(this.width!==c.width||this.height!==c.height)return!1;for(let h=0,y=this.height;h<y;++h){const x=this.bytes[h],E=c.bytes[h];for(let d=0,v=this.width;d<v;++d)if(x[d]!==E[d])return!1}return!0}toString(){const o=new ne;for(let c=0,h=this.height;c<h;++c){const y=this.bytes[c];for(let x=0,E=this.width;x<E;++x)switch(y[x]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ");break}o.append(`
`)}return o.toString()}}class ls{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const o=new ne;return o.append(`<<
`),o.append(" mode: "),o.append(this.mode?this.mode.toString():"null"),o.append(`
 ecLevel: `),o.append(this.ecLevel?this.ecLevel.toString():"null"),o.append(`
 version: `),o.append(this.version?this.version.toString():"null"),o.append(`
 maskPattern: `),o.append(this.maskPattern.toString()),this.matrix?(o.append(`
 matrix:
`),o.append(this.matrix.toString())):o.append(`
 matrix: null
`),o.append(`>>
`),o.toString()}setMode(o){this.mode=o}setECLevel(o){this.ecLevel=o}setVersion(o){this.version=o}setMaskPattern(o){this.maskPattern=o}setMatrix(o){this.matrix=o}static isValidMaskPattern(o){return o>=0&&o<ls.NUM_MASK_PATTERNS}}ls.NUM_MASK_PATTERNS=8;class pn extends p{}pn.kind="WriterException";class S{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,c,h,y,x){S.clearMatrix(x),S.embedBasicPatterns(h,x),S.embedTypeInfo(c,y,x),S.maybeEmbedVersionInfo(h,x),S.embedDataBits(o,y,x)}static embedBasicPatterns(o,c){S.embedPositionDetectionPatternsAndSeparators(c),S.embedDarkDotAtLeftBottomCorner(c),S.maybeEmbedPositionAdjustmentPatterns(o,c),S.embedTimingPatterns(c)}static embedTypeInfo(o,c,h){const y=new J;S.makeTypeInfoBits(o,c,y);for(let x=0,E=y.getSize();x<E;++x){const d=y.get(y.getSize()-1-x),v=S.TYPE_INFO_COORDINATES[x],A=v[0],I=v[1];if(h.setBoolean(A,I,d),x<8){const N=h.getWidth()-x-1;h.setBoolean(N,8,d)}else{const k=h.getHeight()-7+(x-8);h.setBoolean(8,k,d)}}}static maybeEmbedVersionInfo(o,c){if(o.getVersionNumber()<7)return;const h=new J;S.makeVersionInfoBits(o,h);let y=17;for(let x=0;x<6;++x)for(let E=0;E<3;++E){const d=h.get(y);y--,c.setBoolean(x,c.getHeight()-11+E,d),c.setBoolean(c.getHeight()-11+E,x,d)}}static embedDataBits(o,c,h){let y=0,x=-1,E=h.getWidth()-1,d=h.getHeight()-1;for(;E>0;){for(E===6&&(E-=1);d>=0&&d<h.getHeight();){for(let v=0;v<2;++v){const A=E-v;if(!S.isEmpty(h.get(A,d)))continue;let I;y<o.getSize()?(I=o.get(y),++y):I=!1,c!==255&&dn.getDataMaskBit(c,A,d)&&(I=!I),h.setBoolean(A,d,I)}d+=x}x=-x,d+=x,E-=2}if(y!==o.getSize())throw new pn("Not all bits consumed: "+y+"/"+o.getSize())}static findMSBSet(o){return 32-K.numberOfLeadingZeros(o)}static calculateBCHCode(o,c){if(c===0)throw new _("0 polynomial");const h=S.findMSBSet(c);for(o<<=h-1;S.findMSBSet(o)>=h;)o^=c<<S.findMSBSet(o)-h;return o}static makeTypeInfoBits(o,c,h){if(!ls.isValidMaskPattern(c))throw new pn("Invalid mask pattern");const y=o.getBits()<<3|c;h.appendBits(y,5);const x=S.calculateBCHCode(y,S.TYPE_INFO_POLY);h.appendBits(x,10);const E=new J;if(E.appendBits(S.TYPE_INFO_MASK_PATTERN,15),h.xor(E),h.getSize()!==15)throw new pn("should not happen but we got: "+h.getSize())}static makeVersionInfoBits(o,c){c.appendBits(o.getVersionNumber(),6);const h=S.calculateBCHCode(o.getVersionNumber(),S.VERSION_INFO_POLY);if(c.appendBits(h,12),c.getSize()!==18)throw new pn("should not happen but we got: "+c.getSize())}static isEmpty(o){return o===255}static embedTimingPatterns(o){for(let c=8;c<o.getWidth()-8;++c){const h=(c+1)%2;S.isEmpty(o.get(c,6))&&o.setNumber(c,6,h),S.isEmpty(o.get(6,c))&&o.setNumber(6,c,h)}}static embedDarkDotAtLeftBottomCorner(o){if(o.get(8,o.getHeight()-8)===0)throw new pn;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,c,h){for(let y=0;y<8;++y){if(!S.isEmpty(h.get(o+y,c)))throw new pn;h.setNumber(o+y,c,0)}}static embedVerticalSeparationPattern(o,c,h){for(let y=0;y<7;++y){if(!S.isEmpty(h.get(o,c+y)))throw new pn;h.setNumber(o,c+y,0)}}static embedPositionAdjustmentPattern(o,c,h){for(let y=0;y<5;++y){const x=S.POSITION_ADJUSTMENT_PATTERN[y];for(let E=0;E<5;++E)h.setNumber(o+E,c+y,x[E])}}static embedPositionDetectionPattern(o,c,h){for(let y=0;y<7;++y){const x=S.POSITION_DETECTION_PATTERN[y];for(let E=0;E<7;++E)h.setNumber(o+E,c+y,x[E])}}static embedPositionDetectionPatternsAndSeparators(o){const c=S.POSITION_DETECTION_PATTERN[0].length;S.embedPositionDetectionPattern(0,0,o),S.embedPositionDetectionPattern(o.getWidth()-c,0,o),S.embedPositionDetectionPattern(0,o.getWidth()-c,o);const h=8;S.embedHorizontalSeparationPattern(0,h-1,o),S.embedHorizontalSeparationPattern(o.getWidth()-h,h-1,o),S.embedHorizontalSeparationPattern(0,o.getWidth()-h,o);const y=7;S.embedVerticalSeparationPattern(y,0,o),S.embedVerticalSeparationPattern(o.getHeight()-y-1,0,o),S.embedVerticalSeparationPattern(y,o.getHeight()-y,o)}static maybeEmbedPositionAdjustmentPatterns(o,c){if(o.getVersionNumber()<2)return;const h=o.getVersionNumber()-1,y=S.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[h];for(let x=0,E=y.length;x!==E;x++){const d=y[x];if(d>=0)for(let v=0;v!==E;v++){const A=y[v];A>=0&&S.isEmpty(c.get(A,d))&&S.embedPositionAdjustmentPattern(A-2,d-2,c)}}}}S.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),S.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),S.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),S.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),S.VERSION_INFO_POLY=7973,S.TYPE_INFO_POLY=1335,S.TYPE_INFO_MASK_PATTERN=21522;class B{constructor(o,c){this.dataBytes=o,this.errorCorrectionBytes=c}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class H{constructor(){}static calculateMaskPenalty(o){return dn.applyMaskPenaltyRule1(o)+dn.applyMaskPenaltyRule2(o)+dn.applyMaskPenaltyRule3(o)+dn.applyMaskPenaltyRule4(o)}static encode(o,c,h=null){let y=H.DEFAULT_BYTE_MODE_ENCODING;const x=h!==null&&h.get(er.CHARACTER_SET)!==void 0;x&&(y=h.get(er.CHARACTER_SET).toString());const E=this.chooseMode(o,y),d=new J;if(E===Rt.BYTE&&(x||H.DEFAULT_BYTE_MODE_ENCODING!==y)){const fe=U.getCharacterSetECIByName(y);fe!==void 0&&this.appendECI(fe,d)}this.appendModeInfo(E,d);const v=new J;this.appendBytes(o,E,v,y);let A;if(h!==null&&h.get(er.QR_VERSION)!==void 0){const fe=Number.parseInt(h.get(er.QR_VERSION).toString(),10);A=At.getVersionForNumber(fe);const le=this.calculateBitsNeeded(E,d,v,A);if(!this.willFit(le,A,c))throw new pn("Data too big for requested version")}else A=this.recommendVersion(c,E,d,v);const I=new J;I.appendBitArray(d);const N=E===Rt.BYTE?v.getSizeInBytes():o.length;this.appendLengthInfo(N,A,E,I),I.appendBitArray(v);const k=A.getECBlocksForLevel(c),F=A.getTotalCodewords()-k.getTotalECCodewords();this.terminateBits(F,I);const G=this.interleaveWithECBytes(I,A.getTotalCodewords(),F,k.getNumBlocks()),X=new ls;X.setECLevel(c),X.setMode(E),X.setVersion(A);const re=A.getDimensionForVersion(),te=new ws(re,re),oe=this.chooseMaskPattern(G,c,A,te);return X.setMaskPattern(oe),S.buildMatrix(G,c,A,oe,te),X.setMatrix(te),X}static recommendVersion(o,c,h,y){const x=this.calculateBitsNeeded(c,h,y,At.getVersionForNumber(1)),E=this.chooseVersion(x,o),d=this.calculateBitsNeeded(c,h,y,E);return this.chooseVersion(d,o)}static calculateBitsNeeded(o,c,h,y){return c.getSize()+o.getCharacterCountBits(y)+h.getSize()}static getAlphanumericCode(o){return o<H.ALPHANUMERIC_TABLE.length?H.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,c=null){if(U.SJIS.getName()===c&&this.isOnlyDoubleByteKanji(o))return Rt.KANJI;let h=!1,y=!1;for(let x=0,E=o.length;x<E;++x){const d=o.charAt(x);if(H.isDigit(d))h=!0;else if(this.getAlphanumericCode(d.charCodeAt(0))!==-1)y=!0;else return Rt.BYTE}return y?Rt.ALPHANUMERIC:h?Rt.NUMERIC:Rt.BYTE}static isOnlyDoubleByteKanji(o){let c;try{c=ie.encode(o,U.SJIS)}catch{return!1}const h=c.length;if(h%2!==0)return!1;for(let y=0;y<h;y+=2){const x=c[y]&255;if((x<129||x>159)&&(x<224||x>235))return!1}return!0}static chooseMaskPattern(o,c,h,y){let x=Number.MAX_SAFE_INTEGER,E=-1;for(let d=0;d<ls.NUM_MASK_PATTERNS;d++){S.buildMatrix(o,c,h,d,y);let v=this.calculateMaskPenalty(y);v<x&&(x=v,E=d)}return E}static chooseVersion(o,c){for(let h=1;h<=40;h++){const y=At.getVersionForNumber(h);if(H.willFit(o,y,c))return y}throw new pn("Data too big")}static willFit(o,c,h){const y=c.getTotalCodewords(),E=c.getECBlocksForLevel(h).getTotalECCodewords(),d=y-E,v=(o+7)/8;return d>=v}static terminateBits(o,c){const h=o*8;if(c.getSize()>h)throw new pn("data bits cannot fit in the QR Code"+c.getSize()+" > "+h);for(let E=0;E<4&&c.getSize()<h;++E)c.appendBit(!1);const y=c.getSize()&7;if(y>0)for(let E=y;E<8;E++)c.appendBit(!1);const x=o-c.getSizeInBytes();for(let E=0;E<x;++E)c.appendBits((E&1)===0?236:17,8);if(c.getSize()!==h)throw new pn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,c,h,y,x,E){if(y>=h)throw new pn("Block ID too large");const d=o%h,v=h-d,A=Math.floor(o/h),I=A+1,N=Math.floor(c/h),k=N+1,F=A-N,G=I-k;if(F!==G)throw new pn("EC bytes mismatch");if(h!==v+d)throw new pn("RS blocks mismatch");if(o!==(N+F)*v+(k+G)*d)throw new pn("Total bytes mismatch");y<v?(x[0]=N,E[0]=F):(x[0]=k,E[0]=G)}static interleaveWithECBytes(o,c,h,y){if(o.getSizeInBytes()!==h)throw new pn("Number of bits and data bytes does not match");let x=0,E=0,d=0;const v=new Array;for(let I=0;I<y;++I){const N=new Int32Array(1),k=new Int32Array(1);H.getNumDataBytesAndNumECBytesForBlockID(c,h,y,I,N,k);const F=N[0],G=new Uint8Array(F);o.toBytes(8*x,G,0,F);const X=H.generateECBytes(G,k[0]);v.push(new B(G,X)),E=Math.max(E,F),d=Math.max(d,X.length),x+=N[0]}if(h!==x)throw new pn("Data bytes does not match offset");const A=new J;for(let I=0;I<E;++I)for(const N of v){const k=N.getDataBytes();I<k.length&&A.appendBits(k[I],8)}for(let I=0;I<d;++I)for(const N of v){const k=N.getErrorCorrectionBytes();I<k.length&&A.appendBits(k[I],8)}if(c!==A.getSizeInBytes())throw new pn("Interleaving error: "+c+" and "+A.getSizeInBytes()+" differ.");return A}static generateECBytes(o,c){const h=o.length,y=new Int32Array(h+c);for(let E=0;E<h;E++)y[E]=o[E]&255;new oa(pt.QR_CODE_FIELD_256).encode(y,c);const x=new Uint8Array(c);for(let E=0;E<c;E++)x[E]=y[h+E];return x}static appendModeInfo(o,c){c.appendBits(o.getBits(),4)}static appendLengthInfo(o,c,h,y){const x=h.getCharacterCountBits(c);if(o>=1<<x)throw new pn(o+" is bigger than "+((1<<x)-1));y.appendBits(o,x)}static appendBytes(o,c,h,y){switch(c){case Rt.NUMERIC:H.appendNumericBytes(o,h);break;case Rt.ALPHANUMERIC:H.appendAlphanumericBytes(o,h);break;case Rt.BYTE:H.append8BitBytes(o,h,y);break;case Rt.KANJI:H.appendKanjiBytes(o,h);break;default:throw new pn("Invalid mode: "+c)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){const c=H.getDigit(o);return c>=0&&c<=9}static appendNumericBytes(o,c){const h=o.length;let y=0;for(;y<h;){const x=H.getDigit(o.charAt(y));if(y+2<h){const E=H.getDigit(o.charAt(y+1)),d=H.getDigit(o.charAt(y+2));c.appendBits(x*100+E*10+d,10),y+=3}else if(y+1<h){const E=H.getDigit(o.charAt(y+1));c.appendBits(x*10+E,7),y+=2}else c.appendBits(x,4),y++}}static appendAlphanumericBytes(o,c){const h=o.length;let y=0;for(;y<h;){const x=H.getAlphanumericCode(o.charCodeAt(y));if(x===-1)throw new pn;if(y+1<h){const E=H.getAlphanumericCode(o.charCodeAt(y+1));if(E===-1)throw new pn;c.appendBits(x*45+E,11),y+=2}else c.appendBits(x,6),y++}}static append8BitBytes(o,c,h){let y;try{y=ie.encode(o,h)}catch(x){throw new pn(x)}for(let x=0,E=y.length;x!==E;x++){const d=y[x];c.appendBits(d,8)}}static appendKanjiBytes(o,c){let h;try{h=ie.encode(o,U.SJIS)}catch(x){throw new pn(x)}const y=h.length;for(let x=0;x<y;x+=2){const E=h[x]&255,d=h[x+1]&255,v=E<<8&4294967295|d;let A=-1;if(v>=33088&&v<=40956?A=v-33088:v>=57408&&v<=60351&&(A=v-49472),A===-1)throw new pn("Invalid byte sequence");const I=(A>>8)*192+(A&255);c.appendBits(I,13)}}static appendECI(o,c){c.appendBits(Rt.ECI.getBits(),4),c.appendBits(o.getValue(),8)}}H.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),H.DEFAULT_BYTE_MODE_ENCODING=U.UTF8.getName();class se{write(o,c,h,y=null){if(o.length===0)throw new _("Found empty contents");if(c<0||h<0)throw new _("Requested dimensions are too small: "+c+"x"+h);let x=Yt.L,E=se.QUIET_ZONE_SIZE;y!==null&&(y.get(er.ERROR_CORRECTION)!==void 0&&(x=Yt.fromString(y.get(er.ERROR_CORRECTION).toString())),y.get(er.MARGIN)!==void 0&&(E=Number.parseInt(y.get(er.MARGIN).toString(),10)));const d=H.encode(o,x,y);return this.renderResult(d,c,h,E)}writeToDom(o,c,h,y,x=null){typeof o=="string"&&(o=document.querySelector(o));const E=this.write(c,h,y,x);o&&o.appendChild(E)}renderResult(o,c,h,y){const x=o.getMatrix();if(x===null)throw new cn;const E=x.getWidth(),d=x.getHeight(),v=E+y*2,A=d+y*2,I=Math.max(c,v),N=Math.max(h,A),k=Math.min(Math.floor(I/v),Math.floor(N/A)),F=Math.floor((I-E*k)/2),G=Math.floor((N-d*k)/2),X=this.createSVGElement(I,N);for(let re=0,te=G;re<d;re++,te+=k)for(let oe=0,fe=F;oe<E;oe++,fe+=k)if(x.get(oe,re)===1){const le=this.createSvgRectElement(fe,te,k,k);X.appendChild(le)}return X}createSVGElement(o,c){const h=document.createElementNS(se.SVG_NS,"svg");return h.setAttributeNS(null,"height",o.toString()),h.setAttributeNS(null,"width",c.toString()),h}createSvgRectElement(o,c,h,y){const x=document.createElementNS(se.SVG_NS,"rect");return x.setAttributeNS(null,"x",o.toString()),x.setAttributeNS(null,"y",c.toString()),x.setAttributeNS(null,"height",h.toString()),x.setAttributeNS(null,"width",y.toString()),x.setAttributeNS(null,"fill","#000000"),x}}se.QUIET_ZONE_SIZE=4,se.SVG_NS="http://www.w3.org/2000/svg";class Te{encode(o,c,h,y,x){if(o.length===0)throw new _("Found empty contents");if(c!==qe.QR_CODE)throw new _("Can only encode QR_CODE, but got "+c);if(h<0||y<0)throw new _(`Requested dimensions are too small: ${h}x${y}`);let E=Yt.L,d=Te.QUIET_ZONE_SIZE;x!==null&&(x.get(er.ERROR_CORRECTION)!==void 0&&(E=Yt.fromString(x.get(er.ERROR_CORRECTION).toString())),x.get(er.MARGIN)!==void 0&&(d=Number.parseInt(x.get(er.MARGIN).toString(),10)));const v=H.encode(o,E,x);return Te.renderResult(v,h,y,d)}static renderResult(o,c,h,y){const x=o.getMatrix();if(x===null)throw new cn;const E=x.getWidth(),d=x.getHeight(),v=E+y*2,A=d+y*2,I=Math.max(c,v),N=Math.max(h,A),k=Math.min(Math.floor(I/v),Math.floor(N/A)),F=Math.floor((I-E*k)/2),G=Math.floor((N-d*k)/2),X=new be(I,N);for(let re=0,te=G;re<d;re++,te+=k)for(let oe=0,fe=F;oe<E;oe++,fe+=k)x.get(oe,re)===1&&X.setRegion(fe,te,k,k);return X}}Te.QUIET_ZONE_SIZE=4;class Be{encode(o,c,h,y,x){let E;if(c===qe.QR_CODE)E=new Te;else throw new _("No encoder available for format "+c);return E.encode(o,c,h,y,x)}}class lt extends $e{constructor(o,c,h,y,x,E,d,v){if(super(E,d),this.yuvData=o,this.dataWidth=c,this.dataHeight=h,this.left=y,this.top=x,y+E>c||x+d>h)throw new _("Crop rectangle does not fit within image data.");v&&this.reverseHorizontal(E,d)}getRow(o,c){if(o<0||o>=this.getHeight())throw new _("Requested row is outside the image: "+o);const h=this.getWidth();(c==null||c.length<h)&&(c=new Uint8ClampedArray(h));const y=(o+this.top)*this.dataWidth+this.left;return M.arraycopy(this.yuvData,y,c,0,h),c}getMatrix(){const o=this.getWidth(),c=this.getHeight();if(o===this.dataWidth&&c===this.dataHeight)return this.yuvData;const h=o*c,y=new Uint8ClampedArray(h);let x=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return M.arraycopy(this.yuvData,x,y,0,h),y;for(let E=0;E<c;E++){const d=E*o;M.arraycopy(this.yuvData,x,y,d,o),x+=this.dataWidth}return y}isCropSupported(){return!0}crop(o,c,h,y){return new lt(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+c,h,y,!1)}renderThumbnail(){const o=this.getWidth()/lt.THUMBNAIL_SCALE_FACTOR,c=this.getHeight()/lt.THUMBNAIL_SCALE_FACTOR,h=new Int32Array(o*c),y=this.yuvData;let x=this.top*this.dataWidth+this.left;for(let E=0;E<c;E++){const d=E*o;for(let v=0;v<o;v++){const A=y[x+v*lt.THUMBNAIL_SCALE_FACTOR]&255;h[d+v]=4278190080|A*65793}x+=this.dataWidth*lt.THUMBNAIL_SCALE_FACTOR}return h}getThumbnailWidth(){return this.getWidth()/lt.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/lt.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(o,c){const h=this.yuvData;for(let y=0,x=this.top*this.dataWidth+this.left;y<c;y++,x+=this.dataWidth){const E=x+o/2;for(let d=x,v=x+o-1;d<E;d++,v--){const A=h[d];h[d]=h[v],h[v]=A}}}invert(){return new et(this)}}lt.THUMBNAIL_SCALE_FACTOR=2;class Ht extends $e{constructor(o,c,h,y,x,E,d){if(super(c,h),this.dataWidth=y,this.dataHeight=x,this.left=E,this.top=d,o.BYTES_PER_ELEMENT===4){const v=c*h,A=new Uint8ClampedArray(v);for(let I=0;I<v;I++){const N=o[I],k=N>>16&255,F=N>>7&510,G=N&255;A[I]=(k+F+G)/4&255}this.luminances=A}else this.luminances=o;if(y===void 0&&(this.dataWidth=c),x===void 0&&(this.dataHeight=h),E===void 0&&(this.left=0),d===void 0&&(this.top=0),this.left+c>this.dataWidth||this.top+h>this.dataHeight)throw new _("Crop rectangle does not fit within image data.")}getRow(o,c){if(o<0||o>=this.getHeight())throw new _("Requested row is outside the image: "+o);const h=this.getWidth();(c==null||c.length<h)&&(c=new Uint8ClampedArray(h));const y=(o+this.top)*this.dataWidth+this.left;return M.arraycopy(this.luminances,y,c,0,h),c}getMatrix(){const o=this.getWidth(),c=this.getHeight();if(o===this.dataWidth&&c===this.dataHeight)return this.luminances;const h=o*c,y=new Uint8ClampedArray(h);let x=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return M.arraycopy(this.luminances,x,y,0,h),y;for(let E=0;E<c;E++){const d=E*o;M.arraycopy(this.luminances,x,y,d,o),x+=this.dataWidth}return y}isCropSupported(){return!0}crop(o,c,h,y){return new Ht(this.luminances,h,y,this.dataWidth,this.dataHeight,this.left+o,this.top+c)}invert(){return new et(this)}}class kr extends U{static forName(o){return this.getCharacterSetECIByName(o)}}class bn{}bn.ISO_8859_1=U.ISO8859_1;class Un{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class Ca{static singletonList(o){return[o]}static min(o,c){return o.sort(c)[0]}}class $a{constructor(o){this.previous=o}getPrevious(){return this.previous}}class di extends $a{constructor(o,c,h){super(o),this.value=c,this.bitCount=h}appendTo(o,c){o.appendBits(this.value,this.bitCount)}add(o,c){return new di(this,o,c)}addBinaryShift(o,c){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new di(this,o,c)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+K.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class Oa extends di{constructor(o,c,h){super(o,0,0),this.binaryShiftStart=c,this.binaryShiftByteCount=h}appendTo(o,c){for(let h=0;h<this.binaryShiftByteCount;h++)(h===0||h===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):h===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(c[this.binaryShiftStart+h],8)}addBinaryShift(o,c){return new Oa(this,o,c)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function fo(Y,o,c){return new Oa(Y,o,c)}function _s(Y,o,c){return new di(Y,o,c)}const Mo=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Hs=0,Uu=1,Na=2,Vl=3,Ya=4,al=new di(null,0,0),jo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Hm(Y){for(let o of Y)$.fill(o,-1);return Y[Hs][Ya]=0,Y[Uu][Ya]=0,Y[Uu][Hs]=28,Y[Vl][Ya]=0,Y[Na][Ya]=0,Y[Na][Hs]=15,Y}const zl=Hm($.createInt32Array(6,6));class la{constructor(o,c,h,y){this.token=o,this.mode=c,this.binaryShiftByteCount=h,this.bitCount=y}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,c){let h=this.bitCount,y=this.token;if(o!==this.mode){let E=jo[this.mode][o];y=_s(y,E&65535,E>>16),h+=E>>16}let x=o===Na?4:5;return y=_s(y,c,x),new la(y,o,0,h+x)}shiftAndAppend(o,c){let h=this.token,y=this.mode===Na?4:5;return h=_s(h,zl[this.mode][o],y),h=_s(h,c,5),new la(h,this.mode,0,this.bitCount+y+5)}addBinaryShiftChar(o){let c=this.token,h=this.mode,y=this.bitCount;if(this.mode===Ya||this.mode===Na){let d=jo[h][Hs];c=_s(c,d&65535,d>>16),y+=d>>16,h=Hs}let x=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,E=new la(c,h,this.binaryShiftByteCount+1,y+x);return E.binaryShiftByteCount===2078&&(E=E.endBinaryShift(o+1)),E}endBinaryShift(o){if(this.binaryShiftByteCount===0)return this;let c=this.token;return c=fo(c,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new la(c,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let c=this.bitCount+(jo[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?c+=la.calculateBinaryShiftCost(o)-la.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(c+=10),c<=o.bitCount}toBitArray(o){let c=[];for(let y=this.endBinaryShift(o.length).token;y!==null;y=y.getPrevious())c.unshift(y);let h=new J;for(const y of c)y.appendTo(h,o);return h}toString(){return Q.format("%s bits=%d bytes=%d",Mo[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}la.INITIAL_STATE=new la(al,Hs,0,0);function Es(Y){const o=Q.getCharCode(" "),c=Q.getCharCode("."),h=Q.getCharCode(",");Y[Hs][o]=1;const y=Q.getCharCode("Z"),x=Q.getCharCode("A");for(let k=x;k<=y;k++)Y[Hs][k]=k-x+2;Y[Uu][o]=1;const E=Q.getCharCode("z"),d=Q.getCharCode("a");for(let k=d;k<=E;k++)Y[Uu][k]=k-d+2;Y[Na][o]=1;const v=Q.getCharCode("9"),A=Q.getCharCode("0");for(let k=A;k<=v;k++)Y[Na][k]=k-A+2;Y[Na][h]=12,Y[Na][c]=13;const I=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let k=0;k<I.length;k++)Y[Vl][Q.getCharCode(I[k])]=k;const N=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let k=0;k<N.length;k++)Q.getCharCode(N[k])>0&&(Y[Ya][Q.getCharCode(N[k])]=k);return Y}const ar=Es($.createInt32Array(5,256));class As{constructor(o){this.text=o}encode(){const o=Q.getCharCode(" "),c=Q.getCharCode(`
`);let h=Ca.singletonList(la.INITIAL_STATE);for(let x=0;x<this.text.length;x++){let E,d=x+1<this.text.length?this.text[x+1]:0;switch(this.text[x]){case Q.getCharCode("\r"):E=d===c?2:0;break;case Q.getCharCode("."):E=d===o?3:0;break;case Q.getCharCode(","):E=d===o?4:0;break;case Q.getCharCode(":"):E=d===o?5:0;break;default:E=0}E>0?(h=As.updateStateListForPair(h,x,E),x++):h=this.updateStateListForChar(h,x)}return Ca.min(h,(x,E)=>x.getBitCount()-E.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,c){const h=[];for(let y of o)this.updateStateForChar(y,c,h);return As.simplifyStates(h)}updateStateForChar(o,c,h){let y=this.text[c]&255,x=ar[o.getMode()][y]>0,E=null;for(let d=0;d<=Ya;d++){let v=ar[d][y];if(v>0){if(E==null&&(E=o.endBinaryShift(c)),!x||d===o.getMode()||d===Na){const A=E.latchAndAppend(d,v);h.push(A)}if(!x&&zl[o.getMode()][d]>=0){const A=E.shiftAndAppend(d,v);h.push(A)}}}if(o.getBinaryShiftByteCount()>0||ar[o.getMode()][y]===0){let d=o.addBinaryShiftChar(c);h.push(d)}}static updateStateListForPair(o,c,h){const y=[];for(let x of o)this.updateStateForPair(x,c,h,y);return this.simplifyStates(y)}static updateStateForPair(o,c,h,y){let x=o.endBinaryShift(c);if(y.push(x.latchAndAppend(Ya,h)),o.getMode()!==Ya&&y.push(x.shiftAndAppend(Ya,h)),h===3||h===4){let E=x.latchAndAppend(Na,16-h).latchAndAppend(Na,1);y.push(E)}if(o.getBinaryShiftByteCount()>0){let E=o.addBinaryShiftChar(c).addBinaryShiftChar(c+1);y.push(E)}}static simplifyStates(o){let c=[];for(const h of o){let y=!0;for(const x of c){if(x.isBetterThanOrEqualTo(h)){y=!1;break}h.isBetterThanOrEqualTo(x)&&(c=c.filter(E=>E!==x))}y&&c.push(h)}return c}}class sn{constructor(){}static encodeBytes(o){return sn.encode(o,sn.DEFAULT_EC_PERCENT,sn.DEFAULT_AZTEC_LAYERS)}static encode(o,c,h){let y=new As(o).encode(),x=K.truncDivision(y.getSize()*c,100)+11,E=y.getSize()+x,d,v,A,I,N;if(h!==sn.DEFAULT_AZTEC_LAYERS){if(d=h<0,v=Math.abs(h),v>(d?sn.MAX_NB_BITS_COMPACT:sn.MAX_NB_BITS))throw new _(Q.format("Illegal value %s for layers",h));A=sn.totalBitsInLayer(v,d),I=sn.WORD_SIZE[v];let le=A-A%I;if(N=sn.stuffBits(y,I),N.getSize()+x>le)throw new _("Data to large for user specified layer");if(d&&N.getSize()>I*64)throw new _("Data to large for user specified layer")}else{I=0,N=null;for(let le=0;;le++){if(le>sn.MAX_NB_BITS)throw new _("Data too large for an Aztec code");if(d=le<=3,v=d?le+1:le,A=sn.totalBitsInLayer(v,d),E>A)continue;(N==null||I!==sn.WORD_SIZE[v])&&(I=sn.WORD_SIZE[v],N=sn.stuffBits(y,I));let ge=A-A%I;if(!(d&&N.getSize()>I*64)&&N.getSize()+x<=ge)break}}let k=sn.generateCheckWords(N,A,I),F=N.getSize()/I,G=sn.generateModeMessage(d,v,F),X=(d?11:14)+v*4,re=new Int32Array(X),te;if(d){te=X;for(let le=0;le<re.length;le++)re[le]=le}else{te=X+1+2*K.truncDivision(K.truncDivision(X,2)-1,15);let le=K.truncDivision(X,2),ge=K.truncDivision(te,2);for(let me=0;me<le;me++){let _e=me+K.truncDivision(me,15);re[le-me-1]=ge-_e-1,re[le+me]=ge+_e+1}}let oe=new be(te);for(let le=0,ge=0;le<v;le++){let me=(v-le)*4+(d?9:12);for(let _e=0;_e<me;_e++){let Ne=_e*2;for(let xe=0;xe<2;xe++)k.get(ge+Ne+xe)&&oe.set(re[le*2+xe],re[le*2+_e]),k.get(ge+me*2+Ne+xe)&&oe.set(re[le*2+_e],re[X-1-le*2-xe]),k.get(ge+me*4+Ne+xe)&&oe.set(re[X-1-le*2-xe],re[X-1-le*2-_e]),k.get(ge+me*6+Ne+xe)&&oe.set(re[X-1-le*2-_e],re[le*2+xe])}ge+=me*8}if(sn.drawModeMessage(oe,d,te,G),d)sn.drawBullsEye(oe,K.truncDivision(te,2),5);else{sn.drawBullsEye(oe,K.truncDivision(te,2),7);for(let le=0,ge=0;le<K.truncDivision(X,2)-1;le+=15,ge+=16)for(let me=K.truncDivision(te,2)&1;me<te;me+=2)oe.set(K.truncDivision(te,2)-ge,me),oe.set(K.truncDivision(te,2)+ge,me),oe.set(me,K.truncDivision(te,2)-ge),oe.set(me,K.truncDivision(te,2)+ge)}let fe=new Un;return fe.setCompact(d),fe.setSize(te),fe.setLayers(v),fe.setCodeWords(F),fe.setMatrix(oe),fe}static drawBullsEye(o,c,h){for(let y=0;y<h;y+=2)for(let x=c-y;x<=c+y;x++)o.set(x,c-y),o.set(x,c+y),o.set(c-y,x),o.set(c+y,x);o.set(c-h,c-h),o.set(c-h+1,c-h),o.set(c-h,c-h+1),o.set(c+h,c-h),o.set(c+h,c-h+1),o.set(c+h,c+h-1)}static generateModeMessage(o,c,h){let y=new J;return o?(y.appendBits(c-1,2),y.appendBits(h-1,6),y=sn.generateCheckWords(y,28,4)):(y.appendBits(c-1,5),y.appendBits(h-1,11),y=sn.generateCheckWords(y,40,4)),y}static drawModeMessage(o,c,h,y){let x=K.truncDivision(h,2);if(c)for(let E=0;E<7;E++){let d=x-3+E;y.get(E)&&o.set(d,x-5),y.get(E+7)&&o.set(x+5,d),y.get(20-E)&&o.set(d,x+5),y.get(27-E)&&o.set(x-5,d)}else for(let E=0;E<10;E++){let d=x-5+E+K.truncDivision(E,5);y.get(E)&&o.set(d,x-7),y.get(E+10)&&o.set(x+7,d),y.get(29-E)&&o.set(d,x+7),y.get(39-E)&&o.set(x-7,d)}}static generateCheckWords(o,c,h){let y=o.getSize()/h,x=new oa(sn.getGF(h)),E=K.truncDivision(c,h),d=sn.bitsToWords(o,h,E);x.encode(d,E-y);let v=c%h,A=new J;A.appendBits(0,v);for(const I of Array.from(d))A.appendBits(I,h);return A}static bitsToWords(o,c,h){let y=new Int32Array(h),x,E;for(x=0,E=o.getSize()/c;x<E;x++){let d=0;for(let v=0;v<c;v++)d|=o.get(x*c+v)?1<<c-v-1:0;y[x]=d}return y}static getGF(o){switch(o){case 4:return pt.AZTEC_PARAM;case 6:return pt.AZTEC_DATA_6;case 8:return pt.AZTEC_DATA_8;case 10:return pt.AZTEC_DATA_10;case 12:return pt.AZTEC_DATA_12;default:throw new _("Unsupported word size "+o)}}static stuffBits(o,c){let h=new J,y=o.getSize(),x=(1<<c)-2;for(let E=0;E<y;E+=c){let d=0;for(let v=0;v<c;v++)(E+v>=y||o.get(E+v))&&(d|=1<<c-1-v);(d&x)===x?(h.appendBits(d&x,c),E--):(d&x)===0?(h.appendBits(d|1,c),E--):h.appendBits(d,c)}return h}static totalBitsInLayer(o,c){return((c?88:112)+16*o)*o}}sn.DEFAULT_EC_PERCENT=33,sn.DEFAULT_AZTEC_LAYERS=0,sn.MAX_NB_BITS=32,sn.MAX_NB_BITS_COMPACT=4,sn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ul{encode(o,c,h,y){return this.encodeWithHints(o,c,h,y,null)}encodeWithHints(o,c,h,y,x){let E=bn.ISO_8859_1,d=sn.DEFAULT_EC_PERCENT,v=sn.DEFAULT_AZTEC_LAYERS;return x!=null&&(x.has(er.CHARACTER_SET)&&(E=kr.forName(x.get(er.CHARACTER_SET).toString())),x.has(er.ERROR_CORRECTION)&&(d=K.parseInt(x.get(er.ERROR_CORRECTION).toString())),x.has(er.AZTEC_LAYERS)&&(v=K.parseInt(x.get(er.AZTEC_LAYERS).toString()))),Ul.encodeLayers(o,c,h,y,E,d,v)}static encodeLayers(o,c,h,y,x,E,d){if(c!==qe.AZTEC)throw new _("Can only encode AZTEC, but got "+c);let v=sn.encode(Q.getBytes(o,x),E,d);return Ul.renderResult(v,h,y)}static renderResult(o,c,h){let y=o.getMatrix();if(y==null)throw new cn;let x=y.getWidth(),E=y.getHeight(),d=Math.max(c,x),v=Math.max(h,E),A=Math.min(d/x,v/E),I=(d-x*A)/2,N=(v-E*A)/2,k=new be(d,v);for(let F=0,G=N;F<E;F++,G+=A)for(let X=0,re=I;X<x;X++,re+=A)y.get(X,F)&&k.setRegion(re,G,A,A);return k}}n.AbstractExpandedDecoder=Vn,n.ArgumentException=b,n.ArithmeticException=Fe,n.AztecCode=Un,n.AztecCodeReader=gs,n.AztecCodeWriter=Ul,n.AztecDecoder=Vt,n.AztecDetector=Po,n.AztecDetectorResult=zs,n.AztecEncoder=sn,n.AztecHighLevelEncoder=As,n.AztecPoint=Lr,n.BarcodeFormat=qe,n.Binarizer=j,n.BinaryBitmap=T,n.BitArray=J,n.BitMatrix=be,n.BitSource=Sr,n.BrowserAztecCodeReader=ps,n.BrowserBarcodeReader=ss,n.BrowserCodeReader=Xe,n.BrowserDatamatrixCodeReader=vn,n.BrowserMultiFormatReader=Wa,n.BrowserPDF417Reader=rl,n.BrowserQRCodeReader=il,n.BrowserQRCodeSvgWriter=se,n.CharacterSetECI=U,n.ChecksumException=R,n.Code128Reader=at,n.Code39Reader=fn,n.DataMatrixDecodedBitStreamParser=ai,n.DataMatrixReader=Gi,n.DecodeHintType=Z,n.DecoderResult=Se,n.DefaultGridSampler=Fa,n.DetectorResult=na,n.EAN13Reader=Yn,n.EncodeHintType=er,n.Exception=p,n.FormatException=V,n.GenericGF=pt,n.GenericGFPoly=ft,n.GlobalHistogramBinarizer=ye,n.GridSampler=ba,n.GridSamplerInstance=bi,n.HTMLCanvasElementLuminanceSource=rt,n.HybridBinarizer=we,n.ITFReader=Je,n.IllegalArgumentException=_,n.IllegalStateException=cn,n.InvertedLuminanceSource=et,n.LuminanceSource=$e,n.MathUtils=xt,n.MultiFormatOneDReader=wi,n.MultiFormatReader=ko,n.MultiFormatWriter=Be,n.NotFoundException=he,n.OneDReader=In,n.PDF417DecodedBitStreamParser=Me,n.PDF417DecoderErrorCorrection=Aa,n.PDF417Reader=Dr,n.PDF417ResultMetadata=Ha,n.PerspectiveTransform=$n,n.PlanarYUVLuminanceSource=lt,n.QRCodeByteMatrix=ws,n.QRCodeDataMask=Pr,n.QRCodeDecodedBitStreamParser=zn,n.QRCodeDecoderErrorCorrectionLevel=Yt,n.QRCodeDecoderFormatInformation=Zn,n.QRCodeEncoder=H,n.QRCodeEncoderQRCode=ls,n.QRCodeMaskUtil=dn,n.QRCodeMatrixUtil=S,n.QRCodeMode=Rt,n.QRCodeReader=Tr,n.QRCodeVersion=At,n.QRCodeWriter=Te,n.RGBLuminanceSource=Ht,n.RSS14Reader=Cn,n.RSSExpandedReader=He,n.ReaderException=Ka,n.ReedSolomonDecoder=Ln,n.ReedSolomonEncoder=oa,n.ReedSolomonException=Lt,n.Result=Ge,n.ResultMetadataType=ct,n.ResultPoint=it,n.StringUtils=Q,n.UnsupportedOperationException=ae,n.VideoInputDevice=de,n.WhiteRectangleDetector=hr,n.WriterException=pn,n.ZXingArrays=$,n.ZXingCharset=kr,n.ZXingInteger=K,n.ZXingStandardCharsets=bn,n.ZXingStringBuilder=ne,n.ZXingStringEncoding=ie,n.ZXingSystem=M,n.createAbstractExpandedDecoder=$r,Object.defineProperty(n,"__esModule",{value:!0})}))})(Xg,Xg.exports)),Xg.exports}var si=gse();const pse=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var oD=(function(){function t(e,n,r){if(this.formatMap=new Map([[St.QR_CODE,si.BarcodeFormat.QR_CODE],[St.AZTEC,si.BarcodeFormat.AZTEC],[St.CODABAR,si.BarcodeFormat.CODABAR],[St.CODE_39,si.BarcodeFormat.CODE_39],[St.CODE_93,si.BarcodeFormat.CODE_93],[St.CODE_128,si.BarcodeFormat.CODE_128],[St.DATA_MATRIX,si.BarcodeFormat.DATA_MATRIX],[St.MAXICODE,si.BarcodeFormat.MAXICODE],[St.ITF,si.BarcodeFormat.ITF],[St.EAN_13,si.BarcodeFormat.EAN_13],[St.EAN_8,si.BarcodeFormat.EAN_8],[St.PDF_417,si.BarcodeFormat.PDF_417],[St.RSS_14,si.BarcodeFormat.RSS_14],[St.RSS_EXPANDED,si.BarcodeFormat.RSS_EXPANDED],[St.UPC_A,si.BarcodeFormat.UPC_A],[St.UPC_E,si.BarcodeFormat.UPC_E],[St.UPC_EAN_EXTENSION,si.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!pse)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(e),a=new Map;a.set(si.DecodeHintType.POSSIBLE_FORMATS,i),a.set(si.DecodeHintType.TRY_HARDER,!1),this.hints=a}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,i){try{r(n.decode(e))}catch(a){i(a)}})},t.prototype.decode=function(e){var n=new si.MultiFormatReader(this.verbose,this.hints),r=new si.HTMLCanvasElementLuminanceSource(e),i=new si.BinaryBitmap(new si.HybridBinarizer(r)),a=n.decode(i);return{text:a.text,format:cB.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t})(),yse=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(b){try{p(r.next(b))}catch(_){l(_)}}function m(b){try{p(r.throw(b))}catch(_){l(_)}}function p(b){b.done?a(b.value):i(b.value).then(f,m)}p((r=r.apply(t,e||[])).next())})},vse=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(b){return m([p,b])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(b){p=[6,b],i=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},lD=(function(){function t(e,n,r){if(this.formatMap=new Map([[St.QR_CODE,"qr_code"],[St.AZTEC,"aztec"],[St.CODABAR,"codabar"],[St.CODE_39,"code_39"],[St.CODE_93,"code_93"],[St.CODE_128,"code_128"],[St.DATA_MATRIX,"data_matrix"],[St.ITF,"itf"],[St.EAN_13,"ean_13"],[St.EAN_8,"ean_8"],[St.PDF_417,"pdf417"],[St.UPC_A,"upc_a"],[St.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return yse(this,void 0,void 0,function(){var n,r;return vse(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:cB.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,i=0,a=e;i<a.length;i++){var l=a[i],f=l.boundingBox.width*l.boundingBox.height;f>r&&(r=f,n=l)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t})(),uD=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(b){try{p(r.next(b))}catch(_){l(_)}}function m(b){try{p(r.throw(b))}catch(_){l(_)}}function p(b){b.done?a(b.value):i(b.value).then(f,m)}p((r=r.apply(t,e||[])).next())})},cD=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(b){return m([p,b])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(b){p=[6,b],i=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},xse=(function(){function t(e,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&lD.isSupported()?(this.primaryDecoder=new lD(e,r,i),this.secondaryDecoder=new oD(e,r,i)):this.primaryDecoder=new oD(e,r,i)}return t.prototype.decodeAsync=function(e){return uD(this,void 0,void 0,function(){var n;return cD(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return uD(this,void 0,void 0,function(){var n,r;return cD(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];e+=i}var a=e/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t})(),vI=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ev=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(b){try{p(r.next(b))}catch(_){l(_)}}function m(b){try{p(r.throw(b))}catch(_){l(_)}}function p(b){b.done?a(b.value):i(b.value).then(f,m)}p((r=r.apply(t,e||[])).next())})},Av=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(b){return m([p,b])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(b){p=[6,b],i=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},dB=(function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t})(),bse=(function(t){vI(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(dB),wse=(function(t){vI(e,t);function e(n){return t.call(this,"zoom",n)||this}return e})(bse),_se=(function(t){vI(e,t);function e(n){return t.call(this,"torch",n)||this}return e})(dB),Ese=(function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new wse(this.track)},t.prototype.torchFeature=function(){return new _se(this.track)},t})(),Ase=(function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,i),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,i){return Ev(this,void 0,void 0,function(){var a,l;return Av(this,function(f){switch(f.label){case 0:return a=new t(e,n,i),r.aspectRatio?(l={aspectRatio:r.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(l)]):[3,2];case 1:f.sent(),f.label=2;case 2:return a.setupSurface(),[2,a]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Ev(this,void 0,void 0,function(){return Av(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var i=e.mediaStream.getVideoTracks(),a=i.length,l=0;e.mediaStream.getVideoTracks().forEach(function(f){e.mediaStream.removeTrack(f),f.stop(),++l,l>=a&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new Ese(this.getFirstTrackOrFail())},t})(),Sse=(function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return Ev(this,void 0,void 0,function(){return Av(this,function(i){return[2,Ase.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return Ev(this,void 0,void 0,function(){var n,r;return Av(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new t(r)]}})})},t})(),fD=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(b){try{p(r.next(b))}catch(_){l(_)}}function m(b){try{p(r.throw(b))}catch(_){l(_)}}function p(b){b.done?a(b.value):i(b.value).then(f,m)}p((r=r.apply(t,e||[])).next())})},dD=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(b){return m([p,b])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(b){p=[6,b],i=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Tse=(function(){function t(){}return t.failIfNotSupported=function(){return fD(this,void 0,void 0,function(){return dD(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return fD(this,void 0,void 0,function(){return dD(this,function(n){return[2,Sse.create(e)]})})},t})(),Ise=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(b){try{p(r.next(b))}catch(_){l(_)}}function m(b){try{p(r.throw(b))}catch(_){l(_)}}function p(b){b.done?a(b.value):i(b.value).then(f,m)}p((r=r.apply(t,e||[])).next())})},Cse=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(b){return m([p,b])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(b){p=[6,b],i=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Ose=(function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Sh.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Sh.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return Ise(this,void 0,void 0,function(){var e,n,r,i,a,l,f;return Cse(this,function(m){switch(m.label){case 0:return e=function(p){for(var b=p.getVideoTracks(),_=0,T=b;_<T.length;_++){var R=T[_];R.enabled=!1,R.stop(),p.removeTrack(R)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=m.sent(),i=[],a=0,l=r;a<l.length;a++)f=l[a],f.kind==="videoinput"&&i.push({id:f.deviceId,label:f.label});return e(n),[2,i]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(a){for(var l=[],f=0,m=a;f<m.length;f++){var p=m[f];p.kind==="video"&&l.push({id:p.id,label:p.label})}e(l)},i=MediaStreamTrack;i.getSources(r)})},t})(),gi;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(gi||(gi={}));var Nse=(function(){function t(){this.state=gi.NOT_STARTED,this.onGoingTransactionNewState=gi.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===gi.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=gi.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===gi.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=gi.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==gi.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case gi.UNKNOWN:throw"Transition from unknown is not allowed";case gi.NOT_STARTED:this.failIfNewStateIs(e,[gi.PAUSED]);break;case gi.SCANNING:break;case gi.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,i=n;r<i.length;r++){var a=i[r];if(e===a)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t})(),Rse=(function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===gi.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==gi.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===gi.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===gi.PAUSED},t})(),Pse=(function(){function t(){}return t.create=function(){return new Rse(new Nse)},t})(),Dse=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Zs=(function(t){Dse(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(fse),kse=(function(){function t(e,n){this.logger=n,this.fps=Zs.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Zs.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?fB.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!iu(this.qrbox)},t.create=function(e,n){return new t(e,n)},t})(),Mse=(function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new hse(this.verbose),this.qrcode=new xse(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Pse.create()}return t.prototype.start=function(e,n,r,i){var a=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var l;i?l=i:l=this.verbose?this.logger.log:function(){};var f=kse.create(n,this.logger);this.clearElement();var m=!1;f.videoConstraints&&(f.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=m,b=document.getElementById(this.elementId);b.clientWidth?b.clientWidth:Zs.DEFAULT_WIDTH,b.style.position="relative",this.shouldScan=!0,this.element=b;var _=this,T=this.stateManagerProxy.startTransition(gi.SCANNING);return new Promise(function(R,j){var M=p?f.videoConstraints:_.createVideoConstraints(e);if(!M){T.cancel(),j("videoConstraints should be defined");return}var L={};(!p||f.aspectRatio)&&(L.aspectRatio=f.aspectRatio);var z={onRenderSurfaceReady:function($,K){_.setupUi($,K,f),_.isScanning=!0,_.foreverScan(f,r,l)}};Tse.failIfNotSupported().then(function($){$.create(M).then(function(K){return K.render(a.element,L,z).then(function(J){_.renderedCamera=J,T.execute(),R(null)}).catch(function(J){T.cancel(),j(J)})}).catch(function(K){T.cancel(),j(Sh.errorGettingUserMedia(K))})}).catch(function($){T.cancel(),j(Sh.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(gi.PAUSED),this.showPausedState(),(iu(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(gi.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(gi.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var a=document.getElementById(Zs.SHADED_REGION_ELEMENT_ID);a&&e.element.removeChild(a)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(iu(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,a){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var l=new Image;l.onload=function(){var f=l.width,m=l.height,p=document.getElementById(r.elementId),b=p.clientWidth?p.clientWidth:Zs.DEFAULT_WIDTH,_=Math.max(p.clientHeight?p.clientHeight:m,Zs.FILE_SCAN_MIN_HEIGHT),T=r.computeCanvasDrawConfig(f,m,b,_);if(n){var R=r.createCanvasElement(b,_,"qr-canvas-visible");R.style.display="inline-block",p.appendChild(R);var j=R.getContext("2d");if(!j)throw"Unable to get 2d context from canvas";j.canvas.width=b,j.canvas.height=_,j.drawImage(l,0,0,f,m,T.x,T.y,T.width,T.height)}var M=Zs.FILE_SCAN_HIDDEN_CANVAS_PADDING,L=Math.max(l.width,T.width),z=Math.max(l.height,T.height),$=L+2*M,K=z+2*M,J=r.createCanvasElement($,K);p.appendChild(J);var ce=J.getContext("2d");if(!ce)throw"Unable to get 2d context from canvas";ce.canvas.width=$,ce.canvas.height=K,ce.drawImage(l,0,0,f,m,M,M,L,z);try{r.qrcode.decodeRobustlyAsync(J).then(function(Z){i(aD.createFromQrcodeResult(Z))}).catch(a)}catch(Z){a("QR code parse error, error = ".concat(Z))}},l.onerror=a,l.onabort=a,l.onstalled=a,l.onsuspend=a,l.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return Ose.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!fB.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[St.QR_CODE,St.AZTEC,St.CODABAR,St.CODE_39,St.CODE_93,St.CODE_128,St.DATA_MATRIX,St.MAXICODE,St.ITF,St.EAN_13,St.EAN_8,St.PDF_417,St.RSS_14,St.RSS_EXPANDED,St.UPC_A,St.UPC_E,St.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,a=e.formatsToSupport;i<a.length;i++){var l=a[i];cse(l)?r.push(l):this.logger.warn("Invalid format: ".concat(l," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(iu(e))return!0;if(!iu(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(iu(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return iu(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var i=this,a=r.qrbox;this.validateQrboxConfig(a);var l=this.toQrdimensions(e,n,a),f=function(p){if(p<Zs.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Zs.MIN_QR_BOX_SIZE,"px.")},m=function(p){return p>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=e),p};f(l.width),f(l.height),l.width=m(l.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var i=iu(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(i);var a=this.toQrdimensions(e,n,i);a.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var l=r.isShadedBoxEnabled()&&a.height<=n,f={x:0,y:0,width:e,height:n},m=l?this.getShadedRegionBounds(e,n,a):f,p=this.createCanvasElement(m.width,m.height),b={willReadFrequently:!0},_=p.getContext("2d",b);_.canvas.width=m.width,_.canvas.height=m.height,this.element.append(p),l&&this.possiblyInsertShadingElement(this.element,e,n,a),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=_,this.canvasElement=p},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Sh.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,aD.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var a=Sh.codeParseError(i);return n(a,dse.createFrom(a)),!1})},t.prototype.foreverScan=function(e,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),l=a.videoWidth/a.clientWidth,f=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*l,p=this.qrRegion.height*f,b=this.qrRegion.x*l,_=this.qrRegion.y*f;this.context.drawImage(a,b,_,m,p,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,n,r)},i.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(R){!R&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){T()})):T()}).catch(function(R){i.logger.logError("Error happend while scanning context",R),T()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},a="exact",l=function(j){if(j in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(j,"'")},f=Object.keys(e);if(f.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(f.length," keys");var m=Object.keys(e)[0];if(m!==n&&m!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(m===n){var p=e.facingMode;if(typeof p=="string"){if(l(p))return{facingMode:p}}else if(typeof p=="object")if(a in p){if(l(p["".concat(a)]))return{facingMode:{exact:p["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var b=typeof p;throw"Invalid type of 'facingMode' = ".concat(b)}}else{var _=e.deviceId;if(typeof _=="string")return{deviceId:_};if(typeof _=="object"){if(a in _)return{deviceId:{exact:_["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var T=typeof _;throw"Invalid type of 'deviceId' = ".concat(T)}}}var R=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(R)},t.prototype.computeCanvasDrawConfig=function(e,n,r,i){if(e<=r&&n<=i){var a=(r-e)/2,l=(i-n)/2;return{x:a,y:l,width:e,height:n}}else{var f=e,m=n;return e>r&&(n=r/e*n,e=r),n>i&&(e=i/n*e,n=i),this.logger.log("Image downsampled from "+"".concat(f,"X").concat(m)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,i)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Zs.BORDER_SHADER_MATCH_COLOR:Zs.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var i=e,a=n,l=document.createElement("canvas");return l.style.width="".concat(i,"px"),l.style.height="".concat(a,"px"),l.style.display="none",l.id=iu(r)?"qr-canvas":r,l},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,i){if(!(n-i.width<1||r-i.height<1)){var a=document.createElement("div");a.style.position="absolute";var l=(n-i.width)/2,f=(r-i.height)/2;if(a.style.borderLeft="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(Zs.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var m=5,p=40;this.insertShaderBorders(a,p,m,-m,null,0,!0),this.insertShaderBorders(a,p,m,-m,null,0,!1),this.insertShaderBorders(a,p,m,null,-m,0,!0),this.insertShaderBorders(a,p,m,null,-m,0,!1),this.insertShaderBorders(a,m,p+m,-m,null,-m,!0),this.insertShaderBorders(a,m,p+m,null,-m,-m,!0),this.insertShaderBorders(a,m,p+m,-m,null,-m,!1),this.insertShaderBorders(a,m,p+m,null,-m,-m,!1),this.hasBorderShaders=!0}e.append(a)}},t.prototype.insertShaderBorders=function(e,n,r,i,a,l,f){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=Zs.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(n,"px"),m.style.height="".concat(r,"px"),i!==null&&(m.style.top="".concat(i,"px")),a!==null&&(m.style.bottom="".concat(a,"px")),f?m.style.left="".concat(l,"px"):m.style.right="".concat(l,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),e.appendChild(m)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t})(),hD;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(hD||(hD={}));const xI="https://api.anthropic.com/v1/messages",jse="claude-haiku-4-5-20251001",Lse="claude-haiku-4-5-20251001";async function Sv(){const t=await Ze.userProfiles.toCollection().first();if(!t)return null;const e=t,n=e.anthropicApiKey;if(!n)return null;const r=e.anthropicApiUrl;return{apiKey:n,apiUrl:r||xI}}async function Bse(t,e){const n=await Ze.userProfiles.toCollection().first();n?.id&&await Ze.userProfiles.update(n.id,{anthropicApiKey:t,anthropicApiUrl:e||xI})}async function hB(t,e,n){const r=await Sv();if(!r?.apiKey)throw new Error("Geen API-sleutel ingesteld. Ga naar Profiel  AI Instellingen.");const i=await fetch(r.apiUrl||xI,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":r.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:n||jse,max_tokens:1024,system:e,messages:t})});if(!i.ok){const f=(await i.json().catch(()=>({})))?.error?.message||i.statusText;throw new Error(`AI fout: ${f}`)}return(await i.json()).content?.[0]?.text||"Geen antwoord ontvangen."}async function Fse(t,e){return hB([{role:"user",content:[{type:"image",source:{type:"base64",media_type:e,data:t}},{type:"text",text:"Welk voedsel zie je op deze foto? Geef de voedingswaarden."}]}],`Je bent een Nederlandse voedingsassistent. Analyseer de foto van voedsel.
Geef voor elk herkend product:
- Naam (in het Nederlands)
- Geschatte hoeveelheid in gram
- Geschatte voedingswaarden per 100g: calorien, eiwit, vet, verzadigd vet, koolhydraten, suikers, vezels

Antwoord in JSON-formaat:
[{"naam": "...", "hoeveelheid_g": 100, "per_100g": {"calories": 0, "protein": 0, "fat": 0, "saturatedFat": 0, "carbs": 0, "sugar": 0, "fiber": 0}}]

Als je geen voedsel herkent, antwoord dan met een lege array [].`,Lse)}function Vse(){const[t,e]=D.useState("barcode"),[n,r]=D.useState("idle"),[i,a]=D.useState(null),[l,f]=D.useState(null),[m,p]=D.useState(null),b=D.useRef(null),_=$f(ze=>ze.addEntry),T=$f(ze=>ze.selectedDate),{getTotalPoints:R}=$f(),j=cd(ze=>ze.profile),M=yI(ze=>ze.show),[L,z]=D.useState([]),[$,K]=D.useState(""),[J,ce]=D.useState(!1),[Z,V]=D.useState(null),W=D.useRef(null),[U,ae]=D.useState(null),[ie,Q]=D.useState(!1),[ne,be]=D.useState([]),[he,ye]=D.useState(null),we=D.useRef(null);D.useEffect(()=>((!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)&&r("unavailable"),()=>{$e()}),[]);const $e=D.useCallback(async()=>{if(b.current){try{b.current.getState()===2&&await b.current.stop()}catch{}b.current=null}r("idle")},[]),et=D.useCallback(async ze=>{if(ze===m)return;if(p(ze),b.current){try{b.current.getState()===2&&await b.current.stop()}catch{}b.current=null}r("looking-up"),f(null);const ct=await rse(ze);ct?(a(ct),r("idle")):(f(`Product niet gevonden voor barcode: ${ze}`),r("idle"))},[m]),rt=async()=>{f(null),p(null),a(null),r("requesting");let ze;try{ze=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),ze.getTracks().forEach(ct=>ct.stop())}catch(ct){const Se=ct instanceof Error?ct.message:String(ct);Se.includes("NotAllowed")||Se.includes("Permission")||Se.includes("denied")?r("denied"):Se.includes("NotFound")||Se.includes("DevicesNotFound")||Se.includes("NotReadableError")?r("unavailable"):r("denied");return}try{const ct=new Mse("scanner-region");b.current=ct,r("scanning"),await new Promise(Se=>requestAnimationFrame(Se)),await ct.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150},aspectRatio:1},Se=>{et(Se)},()=>{})}catch(ct){const Se=ct instanceof Error?ct.message:String(ct);Se.includes("Permission")||Se.includes("NotAllowed")?r("denied"):(f("Kan scanner niet starten. Probeer het opnieuw."),r("idle"))}},de=async(ze,ct,Se)=>{if(!i)return;const ft=v0(i.pointsPer100g,ze)*(Se||1),Fe=fI(i.name),pt=Fe>0?Math.round(ze*(Se||1)*Fe):void 0,Lt=await _({foodItem:i,mealType:ct,quantityG:ze,quantity:Se,points:ft,waterMlAdded:pt});pt&&pt>0&&(await Jx(T,pt),window.dispatchEvent(new CustomEvent("water-changed")),M(pt,i.name,Fe,Lt)),a(null),p(null)},Ee=async ze=>{const ct=ze.target.files?.[0];if(!ct)return;ye(null),be([]);const Se=new FileReader;Se.onload=async Oe=>{const ft=Oe.target?.result;if(ae(ft),!(await Sv())?.apiKey){ye("Geen API-sleutel ingesteld. Ga naar Profiel  AI Instellingen.");return}Q(!0);try{const pt=ft.split(",")[1],Lt=ct.type||"image/jpeg",Ln=(await Fse(pt,Lt)).match(/\[[\s\S]*\]/);if(Ln){const Vt=JSON.parse(Ln[0]).map(xt=>{const $t={calories:xt.per_100g.calories||0,protein:xt.per_100g.protein||0,fat:xt.per_100g.fat||0,saturatedFat:xt.per_100g.saturatedFat||0,unsaturatedFat:Math.max(0,(xt.per_100g.fat||0)-(xt.per_100g.saturatedFat||0)),carbs:xt.per_100g.carbs||0,sugar:xt.per_100g.sugar||0,addedSugar:0,fiber:xt.per_100g.fiber||0},it=y0($t);return{name:xt.naam,nutrition:$t,pointsPer100g:it,servingSizeG:xt.hoeveelheid_g||100,isZeroPoint:it===0,source:"user",createdAt:new Date}});be(Vt)}else ye("Kon geen voedsel herkennen op de foto. Probeer een andere foto.")}catch(pt){ye(pt instanceof Error?pt.message:"Fout bij analyseren")}finally{Q(!1)}},Se.readAsDataURL(ct)},Xe=async ze=>{const ct=await dI({name:ze.name,nutrition:ze.nutrition,pointsPer100g:ze.pointsPer100g,servingSizeG:ze.servingSizeG,isZeroPoint:ze.isZeroPoint,isFavorite:!1,source:"user"});a(ct)},Ge=ze=>{t==="photo"&&ze!=="photo"&&(ae(null),be([]),ye(null)),t==="barcode"&&ze!=="barcode"&&$e(),e(ze)};D.useEffect(()=>{t==="chat"&&Z===null&&Sv().then(ze=>V(!!ze?.apiKey))},[t,Z]),D.useEffect(()=>{W.current?.scrollIntoView({behavior:"smooth"})},[L]);const vt=()=>{const ze=R(),ct=j?.dailyPointsBudget??30,Se=ct-ze;return`Je bent een vriendelijke Nederlandse voedingsassistent voor de app BodyBalance.
De gebruiker volgt een puntensysteem vergelijkbaar met Weight Watchers.

Huidige status:
- Dagbudget: ${ct} punten
- Vandaag gebruikt: ${ze} punten
- Resterend: ${Se} punten

Puntenformule: (cal  0.03) + (verz.vet  0.28) + (suiker  0.12) - (eiwit  0.10) - (vezels  0.10) - (onverz.vet  0.05), minimum 0.

Regels:
- Antwoord altijd in het Nederlands
- Geef korte, praktische antwoorden
- Bij vragen over punten: bereken met de formule hierboven
- Bij suggesties: houd rekening met resterende punten
- Gebruik geen emojis tenzij de gebruiker ze gebruikt`},qe=async()=>{if(!$.trim()||J)return;const ze={role:"user",content:$.trim()},ct=[...L,ze];z(ct),K(""),ce(!0);try{const Se=await hB(ct.map(Oe=>({role:Oe.role,content:Oe.content})),vt());z([...ct,{role:"assistant",content:Se}])}catch(Se){const Oe=Se instanceof Error?Se.message:"Onbekende fout";z([...ct,{role:"assistant",content:`Fout: ${Oe}`}])}finally{ce(!1)}};return O.jsxs(km,{title:"Scanner",children:[O.jsxs("div",{className:"flex flex-col items-center gap-4",children:[O.jsxs("div",{className:"flex gap-1 bg-ios-bg rounded-xl p-1 w-full",children:[O.jsxs("button",{onClick:()=>Ge("barcode"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[13px] font-medium border-none cursor-pointer transition-colors ${t==="barcode"?"bg-white text-primary shadow-sm":"bg-transparent text-ios-secondary"}`,children:[O.jsx(xv,{size:14}),"Barcode"]}),O.jsxs("button",{onClick:()=>Ge("photo"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[13px] font-medium border-none cursor-pointer transition-colors ${t==="photo"?"bg-white text-primary shadow-sm":"bg-transparent text-ios-secondary"}`,children:[O.jsx(q4,{size:14}),"AI Foto"]}),O.jsxs("button",{onClick:()=>Ge("chat"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[13px] font-medium border-none cursor-pointer transition-colors ${t==="chat"?"bg-white text-primary shadow-sm":"bg-transparent text-ios-secondary"}`,children:[O.jsx(X1,{size:14}),"Assistent"]})]}),t==="barcode"&&O.jsxs(O.Fragment,{children:[O.jsxs(An,{className:"w-full overflow-hidden",children:[O.jsx("div",{id:"scanner-region",className:"w-full bg-black overflow-hidden",style:{minHeight:n==="scanning"?300:0,transition:"min-height 0.2s ease"}}),n==="idle"&&!i&&O.jsxs("div",{className:"flex flex-col items-center py-12 px-4",children:[O.jsx("div",{className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:O.jsx(xv,{size:40,className:"text-primary"})}),O.jsx("h3",{className:"text-[17px] font-semibold mb-1",children:"Scan een barcode"}),O.jsx("p",{className:"text-[13px] text-ios-secondary text-center mb-6 leading-relaxed",children:"Richt je camera op de barcode van een product"}),O.jsx("button",{onClick:rt,className:"px-8 py-3 bg-primary text-white rounded-xl text-[17px] font-semibold border-none cursor-pointer active:bg-primary-dark transition-colors",children:"Open camera"})]}),n==="requesting"&&O.jsxs("div",{className:"flex flex-col items-center py-12 px-4",children:[O.jsx(Nc,{size:40,className:"text-primary animate-spin mb-3"}),O.jsx("p",{className:"text-[15px] text-ios-secondary",children:"Camera-toegang aanvragen..."}),O.jsx("p",{className:"text-[12px] text-ios-secondary mt-2 text-center",children:'Tik op "Sta toe" als je browser om toestemming vraagt'})]}),n==="looking-up"&&O.jsxs("div",{className:"flex flex-col items-center py-12",children:[O.jsx(Nc,{size:40,className:"text-primary animate-spin mb-3"}),O.jsx("p",{className:"text-[15px] text-ios-secondary",children:"Product opzoeken..."})]}),n==="denied"&&O.jsxs("div",{className:"flex flex-col items-center py-12 px-6",children:[O.jsx("div",{className:"w-20 h-20 rounded-full bg-ios-warning/10 flex items-center justify-center mb-4",children:O.jsx(Tne,{size:40,className:"text-ios-warning"})}),O.jsx("h3",{className:"text-[17px] font-semibold mb-2 text-center",children:"Camera-toegang geweigerd"}),O.jsx("p",{className:"text-[13px] text-ios-secondary text-center leading-relaxed mb-4",children:"Geef toestemming via je instellingen:"}),O.jsxs("div",{className:"bg-ios-bg rounded-xl p-4 w-full mb-6",children:[O.jsx("p",{className:"text-[14px] font-medium mb-2",children:"Op iPhone / iPad:"}),O.jsxs("ol",{className:"text-[13px] text-ios-secondary leading-relaxed list-decimal list-inside space-y-1",children:[O.jsxs("li",{children:["Open ",O.jsx("strong",{children:"Instellingen"})]}),O.jsxs("li",{children:["Scroll naar ",O.jsx("strong",{children:"Safari"})]}),O.jsxs("li",{children:["Tik op ",O.jsx("strong",{children:"Camera"})]}),O.jsxs("li",{children:["Kies ",O.jsx("strong",{children:"Sta toe"})]})]})]}),O.jsx("button",{onClick:rt,className:"px-8 py-3 bg-primary text-white rounded-xl text-[17px] font-semibold border-none cursor-pointer active:bg-primary-dark transition-colors",children:"Opnieuw proberen"})]}),n==="unavailable"&&O.jsxs("div",{className:"flex flex-col items-center py-12 px-6",children:[O.jsx("div",{className:"w-20 h-20 rounded-full bg-ios-destructive/10 flex items-center justify-center mb-4",children:O.jsx(Rre,{size:40,className:"text-ios-destructive"})}),O.jsx("h3",{className:"text-[17px] font-semibold mb-2",children:"Camera niet beschikbaar"}),O.jsxs("p",{className:"text-[13px] text-ios-secondary text-center leading-relaxed",children:["Open de app via ",O.jsx("strong",{children:"Safari"})," op je iPhone."]})]})]}),l&&n==="idle"&&O.jsxs(An,{className:"w-full px-4 py-3 flex items-center gap-3",children:[O.jsx(ky,{size:20,className:"text-ios-destructive flex-shrink-0"}),O.jsx("div",{className:"flex-1",children:O.jsx("p",{className:"text-[15px] text-ios-text",children:l})}),O.jsx("button",{onClick:rt,className:"text-[15px] text-primary font-medium border-none bg-transparent cursor-pointer flex-shrink-0",children:"Opnieuw"})]}),n==="scanning"&&O.jsx("button",{onClick:$e,className:"px-6 py-3 bg-ios-destructive text-white rounded-xl text-[15px] font-semibold border-none cursor-pointer",children:"Stop scanner"})]}),t==="photo"&&O.jsxs(O.Fragment,{children:[O.jsx(An,{className:"w-full",children:U?O.jsxs("div",{children:[O.jsx("img",{src:U,alt:"Foto",className:"w-full h-48 object-cover"}),ie&&O.jsxs("div",{className:"flex flex-col items-center py-6",children:[O.jsx(Nc,{size:32,className:"text-primary animate-spin mb-2"}),O.jsx("p",{className:"text-[15px] text-ios-secondary",children:"AI analyseert je foto..."})]})]}):O.jsxs("div",{className:"flex flex-col items-center py-12 px-4",children:[O.jsx("div",{className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:O.jsx(q4,{size:40,className:"text-primary"})}),O.jsx("h3",{className:"text-[17px] font-semibold mb-1",children:"Herken voedsel via foto"}),O.jsx("p",{className:"text-[13px] text-ios-secondary text-center mb-6 leading-relaxed",children:"Maak een foto van je maaltijd en AI herkent de producten met voedingswaarden"}),O.jsx("button",{onClick:()=>we.current?.click(),className:"px-8 py-3 bg-primary text-white rounded-xl text-[17px] font-semibold border-none cursor-pointer active:bg-primary-dark transition-colors",children:"Maak foto"}),O.jsx("input",{ref:we,type:"file",accept:"image/*",capture:"environment",onChange:Ee,className:"hidden"})]})}),he&&O.jsxs(An,{className:"w-full px-4 py-3 flex items-center gap-3",children:[O.jsx(ky,{size:20,className:"text-ios-destructive flex-shrink-0"}),O.jsx("p",{className:"text-[14px] text-ios-text flex-1",children:he})]}),ne.length>0&&O.jsxs(An,{className:"w-full",children:[O.jsx("div",{className:"px-4 py-3 border-b border-ios-separator",children:O.jsx("p",{className:"text-[15px] font-semibold",children:"Herkende producten"})}),ne.map((ze,ct)=>O.jsxs("div",{className:`flex items-center justify-between px-4 py-3 ${ct<ne.length-1?"border-b border-ios-separator":""}`,children:[O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("div",{className:"text-[15px] font-medium",children:ze.name}),O.jsxs("div",{className:"text-[13px] text-ios-secondary",children:[ze.servingSizeG,"g  ",ze.pointsPer100g," pt/100g"]})]}),O.jsx("button",{onClick:()=>Xe(ze),className:"px-3 py-1.5 bg-primary text-white rounded-lg text-[13px] font-medium border-none cursor-pointer",children:"Toevoegen"})]},`${ze.name}-${ct}`))]}),U&&!ie&&O.jsx("button",{onClick:()=>{ae(null),be([]),ye(null),we.current?.click()},className:"px-6 py-3 bg-white text-primary rounded-xl text-[15px] font-semibold border border-ios-separator cursor-pointer",children:"Nieuwe foto"})]}),t==="chat"&&(Z===!1?O.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-6",children:[O.jsx("div",{className:"w-20 h-20 rounded-full bg-ios-warning/10 flex items-center justify-center mb-4",children:O.jsx(ky,{size:40,className:"text-ios-warning"})}),O.jsx("h3",{className:"text-[17px] font-semibold mb-2 text-center",children:"API-sleutel vereist"}),O.jsxs("p",{className:"text-[14px] text-ios-secondary text-center leading-relaxed",children:["Om de AI assistent te gebruiken heb je een Anthropic API-sleutel nodig. Ga naar ",O.jsx("strong",{children:"Profiel  AI Instellingen"})," om je sleutel in te voeren."]})]}):O.jsxs("div",{className:"flex flex-col w-full",style:{minHeight:"calc(100vh - 230px)"},children:[O.jsxs("div",{className:"flex-1 flex flex-col gap-3 pb-4",children:[L.length===0&&O.jsxs("div",{className:"text-center py-8",children:[O.jsx(X1,{size:48,className:"text-ios-separator mx-auto mb-3"}),O.jsx("p",{className:"text-[17px] text-ios-secondary font-medium",children:"Hoi! Ik ben je voedingsassistent"}),O.jsx("p",{className:"text-[13px] text-ios-secondary mt-2 max-w-xs mx-auto leading-relaxed",children:"Stel me vragen over punten, voedingswaarden of vraag om maaltijdsuggesties."}),O.jsx("div",{className:"flex flex-col gap-2 mt-5 max-w-xs mx-auto",children:["Hoeveel punten heeft een broodje kaas?","Wat kan ik eten met 5 punten?","Geef me een gezond lunch-idee"].map(ze=>O.jsx("button",{onClick:()=>K(ze),className:"text-left px-4 py-2.5 bg-white rounded-xl text-[14px] text-primary border border-ios-separator cursor-pointer active:bg-gray-50",children:ze},ze))})]}),L.map((ze,ct)=>O.jsxs("div",{className:`flex gap-2.5 ${ze.role==="user"?"justify-end":"justify-start"}`,children:[ze.role==="assistant"&&O.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0 mt-0.5",children:O.jsx(X1,{size:16,className:"text-primary"})}),O.jsx(An,{className:`max-w-[80%] px-4 py-3 ${ze.role==="user"?"bg-primary text-white":""}`,children:O.jsx("p",{className:`text-[15px] leading-relaxed whitespace-pre-wrap ${ze.role==="user"?"text-white":""}`,children:ze.content})}),ze.role==="user"&&O.jsx("div",{className:"w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center flex-shrink-0 mt-0.5",children:O.jsx(XL,{size:16,className:"text-ios-secondary"})})]},ct)),J&&O.jsxs("div",{className:"flex gap-2.5",children:[O.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:O.jsx(X1,{size:16,className:"text-primary"})}),O.jsx(An,{className:"px-4 py-3",children:O.jsx(Nc,{size:18,className:"text-ios-secondary animate-spin"})})]}),O.jsx("div",{ref:W})]}),O.jsx("div",{className:"sticky bottom-[70px] bg-ios-bg pt-2 pb-2",children:O.jsxs("div",{className:"flex gap-2",children:[O.jsx("input",{type:"text",placeholder:"Stel een vraag...",value:$,onChange:ze=>K(ze.target.value),onKeyDown:ze=>ze.key==="Enter"&&qe(),className:"flex-1 bg-white rounded-xl px-4 py-3 text-[16px] border border-ios-separator"}),O.jsx("button",{onClick:qe,disabled:!$.trim()||J,className:`w-11 h-11 rounded-full flex items-center justify-center border-none cursor-pointer transition-colors ${$.trim()&&!J?"bg-primary text-white":"bg-ios-bg text-ios-separator"}`,children:O.jsx(Ore,{size:18})})]})})]}))]}),i&&O.jsx(iB,{food:i,defaultMealType:"snack",onAdd:de,onClose:()=>{a(null),p(null)}})]})}function mB(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=mB(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Hn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=mB(t))&&(r&&(r+=" "),r+=e);return r}var zse=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function bI(t){if(typeof t!="string")return!1;var e=zse;return e.includes(t)}var Use=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],qse=new Set(Use);function gB(t){return typeof t!="string"?!1:qse.has(t)}function pB(t){return typeof t=="string"&&t.startsWith("data-")}function so(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(gB(n)||pB(n))&&(e[n]=t[n]);return e}function dd(t){if(t==null)return null;if(D.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return so(e)}return typeof t=="object"&&!Array.isArray(t)?so(t):null}function as(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(gB(n)||pB(n)||bI(n))&&(e[n]=t[n]);return e}function Gse(t){return t==null?null:D.isValidElement(t)?as(t.props):typeof t=="object"&&!Array.isArray(t)?as(t):null}var Hse=["children","width","height","viewBox","className","style","title","desc"];function DA(){return DA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DA.apply(null,arguments)}function Kse(t,e){if(t==null)return{};var n,r,i=Wse(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Wse(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var yB=D.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:l,style:f,title:m,desc:p}=t,b=Kse(t,Hse),_=a||{width:r,height:i,x:0,y:0},T=Hn("recharts-surface",l);return D.createElement("svg",DA({},as(b),{className:T,width:r,height:i,style:f,viewBox:"".concat(_.x," ").concat(_.y," ").concat(_.width," ").concat(_.height),ref:e}),D.createElement("title",null,m),D.createElement("desc",null,p),n)}),$se=["children","className"];function kA(){return kA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kA.apply(null,arguments)}function Yse(t,e){if(t==null)return{};var n,r,i=Xse(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Xse(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Xi=D.forwardRef((t,e)=>{var{children:n,className:r}=t,i=Yse(t,$se),a=Hn("recharts-layer",r);return D.createElement("g",kA({className:a},as(i),{ref:e}),n)}),Qse=D.createContext(null);function Mr(t){return function(){return t}}const vB=Math.cos,Tv=Math.sin,Qo=Math.sqrt,Iv=Math.PI,rb=2*Iv,MA=Math.PI,jA=2*MA,Pf=1e-6,Zse=jA-Pf;function xB(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Jse(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return xB;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class eoe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?xB:Jse(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,l){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+l}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let l=this._x1,f=this._y1,m=r-e,p=i-n,b=l-e,_=f-n,T=b*b+_*_;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(T>Pf)if(!(Math.abs(_*m-p*b)>Pf)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let R=r-l,j=i-f,M=m*m+p*p,L=R*R+j*j,z=Math.sqrt(M),$=Math.sqrt(T),K=a*Math.tan((MA-Math.acos((M+T-L)/(2*z*$)))/2),J=K/$,ce=K/z;Math.abs(J-1)>Pf&&this._append`L${e+J*b},${n+J*_}`,this._append`A${a},${a},0,0,${+(_*R>b*j)},${this._x1=e+ce*m},${this._y1=n+ce*p}`}}arc(e,n,r,i,a,l){if(e=+e,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let f=r*Math.cos(i),m=r*Math.sin(i),p=e+f,b=n+m,_=1^l,T=l?i-a:a-i;this._x1===null?this._append`M${p},${b}`:(Math.abs(this._x1-p)>Pf||Math.abs(this._y1-b)>Pf)&&this._append`L${p},${b}`,r&&(T<0&&(T=T%jA+jA),T>Zse?this._append`A${r},${r},0,1,${_},${e-f},${n-m}A${r},${r},0,1,${_},${this._x1=p},${this._y1=b}`:T>Pf&&this._append`A${r},${r},0,${+(T>=MA)},${_},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function wI(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new eoe(e)}function _I(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function bB(t){this._context=t}bB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ib(t){return new bB(t)}function wB(t){return t[0]}function _B(t){return t[1]}function EB(t,e){var n=Mr(!0),r=null,i=ib,a=null,l=wI(f);t=typeof t=="function"?t:t===void 0?wB:Mr(t),e=typeof e=="function"?e:e===void 0?_B:Mr(e);function f(m){var p,b=(m=_I(m)).length,_,T=!1,R;for(r==null&&(a=i(R=l())),p=0;p<=b;++p)!(p<b&&n(_=m[p],p,m))===T&&((T=!T)?a.lineStart():a.lineEnd()),T&&a.point(+t(_,p,m),+e(_,p,m));if(R)return a=null,R+""||null}return f.x=function(m){return arguments.length?(t=typeof m=="function"?m:Mr(+m),f):t},f.y=function(m){return arguments.length?(e=typeof m=="function"?m:Mr(+m),f):e},f.defined=function(m){return arguments.length?(n=typeof m=="function"?m:Mr(!!m),f):n},f.curve=function(m){return arguments.length?(i=m,r!=null&&(a=i(r)),f):i},f.context=function(m){return arguments.length?(m==null?r=a=null:a=i(r=m),f):r},f}function Z1(t,e,n){var r=null,i=Mr(!0),a=null,l=ib,f=null,m=wI(p);t=typeof t=="function"?t:t===void 0?wB:Mr(+t),e=typeof e=="function"?e:Mr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?_B:Mr(+n);function p(_){var T,R,j,M=(_=_I(_)).length,L,z=!1,$,K=new Array(M),J=new Array(M);for(a==null&&(f=l($=m())),T=0;T<=M;++T){if(!(T<M&&i(L=_[T],T,_))===z)if(z=!z)R=T,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),j=T-1;j>=R;--j)f.point(K[j],J[j]);f.lineEnd(),f.areaEnd()}z&&(K[T]=+t(L,T,_),J[T]=+e(L,T,_),f.point(r?+r(L,T,_):K[T],n?+n(L,T,_):J[T]))}if($)return f=null,$+""||null}function b(){return EB().defined(i).curve(l).context(a)}return p.x=function(_){return arguments.length?(t=typeof _=="function"?_:Mr(+_),r=null,p):t},p.x0=function(_){return arguments.length?(t=typeof _=="function"?_:Mr(+_),p):t},p.x1=function(_){return arguments.length?(r=_==null?null:typeof _=="function"?_:Mr(+_),p):r},p.y=function(_){return arguments.length?(e=typeof _=="function"?_:Mr(+_),n=null,p):e},p.y0=function(_){return arguments.length?(e=typeof _=="function"?_:Mr(+_),p):e},p.y1=function(_){return arguments.length?(n=_==null?null:typeof _=="function"?_:Mr(+_),p):n},p.lineX0=p.lineY0=function(){return b().x(t).y(e)},p.lineY1=function(){return b().x(t).y(n)},p.lineX1=function(){return b().x(r).y(e)},p.defined=function(_){return arguments.length?(i=typeof _=="function"?_:Mr(!!_),p):i},p.curve=function(_){return arguments.length?(l=_,a!=null&&(f=l(a)),p):l},p.context=function(_){return arguments.length?(_==null?a=f=null:f=l(a=_),p):a},p}class AB{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function toe(t){return new AB(t,!0)}function noe(t){return new AB(t,!1)}const EI={draw(t,e){const n=Qo(e/Iv);t.moveTo(n,0),t.arc(0,0,n,0,rb)}},roe={draw(t,e){const n=Qo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},SB=Qo(1/3),ioe=SB*2,aoe={draw(t,e){const n=Qo(e/ioe),r=n*SB;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},soe={draw(t,e){const n=Qo(e),r=-n/2;t.rect(r,r,n,n)}},ooe=.8908130915292852,TB=Tv(Iv/10)/Tv(7*Iv/10),loe=Tv(rb/10)*TB,uoe=-vB(rb/10)*TB,coe={draw(t,e){const n=Qo(e*ooe),r=loe*n,i=uoe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const l=rb*a/5,f=vB(l),m=Tv(l);t.lineTo(m*n,-f*n),t.lineTo(f*r-m*i,m*r+f*i)}t.closePath()}},r2=Qo(3),foe={draw(t,e){const n=-Qo(e/(r2*3));t.moveTo(0,n*2),t.lineTo(-r2*n,-n),t.lineTo(r2*n,-n),t.closePath()}},bo=-.5,wo=Qo(3)/2,LA=1/Qo(12),doe=(LA/2+1)*3,hoe={draw(t,e){const n=Qo(e/doe),r=n/2,i=n*LA,a=r,l=n*LA+n,f=-a,m=l;t.moveTo(r,i),t.lineTo(a,l),t.lineTo(f,m),t.lineTo(bo*r-wo*i,wo*r+bo*i),t.lineTo(bo*a-wo*l,wo*a+bo*l),t.lineTo(bo*f-wo*m,wo*f+bo*m),t.lineTo(bo*r+wo*i,bo*i-wo*r),t.lineTo(bo*a+wo*l,bo*l-wo*a),t.lineTo(bo*f+wo*m,bo*m-wo*f),t.closePath()}};function moe(t,e){let n=null,r=wI(i);t=typeof t=="function"?t:Mr(t||EI),e=typeof e=="function"?e:Mr(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Mr(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Mr(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Cv(){}function Ov(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function IB(t){this._context=t}IB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ov(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ov(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function goe(t){return new IB(t)}function CB(t){this._context=t}CB.prototype={areaStart:Cv,areaEnd:Cv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Ov(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function poe(t){return new CB(t)}function OB(t){this._context=t}OB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Ov(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function yoe(t){return new OB(t)}function NB(t){this._context=t}NB.prototype={areaStart:Cv,areaEnd:Cv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function voe(t){return new NB(t)}function mD(t){return t<0?-1:1}function gD(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),l=(n-t._y1)/(i||r<0&&-0),f=(a*i+l*r)/(r+i);return(mD(a)+mD(l))*Math.min(Math.abs(a),Math.abs(l),.5*Math.abs(f))||0}function pD(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function i2(t,e,n){var r=t._x0,i=t._y0,a=t._x1,l=t._y1,f=(a-r)/3;t._context.bezierCurveTo(r+f,i+f*e,a-f,l-f*n,a,l)}function Nv(t){this._context=t}Nv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:i2(this,this._t0,pD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,i2(this,pD(this,n=gD(this,t,e)),n);break;default:i2(this,this._t0,n=gD(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function RB(t){this._context=new PB(t)}(RB.prototype=Object.create(Nv.prototype)).point=function(t,e){Nv.prototype.point.call(this,e,t)};function PB(t){this._context=t}PB.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function xoe(t){return new Nv(t)}function boe(t){return new RB(t)}function DB(t){this._context=t}DB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=yD(t),i=yD(e),a=0,l=1;l<n;++a,++l)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[l],e[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function yD(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),l=new Array(n);for(i[0]=0,a[0]=2,l[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,l[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,l[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,l[e]-=r*l[e-1];for(i[n-1]=l[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(l[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function woe(t){return new DB(t)}function ab(t,e){this._context=t,this._t=e}ab.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function _oe(t){return new ab(t,.5)}function Eoe(t){return new ab(t,0)}function Aoe(t){return new ab(t,1)}function hd(t,e){if((l=t.length)>1)for(var n=1,r,i,a=t[e[0]],l,f=a.length;n<l;++n)for(i=a,a=t[e[n]],r=0;r<f;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function BA(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Soe(t,e){return t[e]}function Toe(t){const e=[];return e.key=t,e}function Ioe(){var t=Mr([]),e=BA,n=hd,r=Soe;function i(a){var l=Array.from(t.apply(this,arguments),Toe),f,m=l.length,p=-1,b;for(const _ of a)for(f=0,++p;f<m;++f)(l[f][p]=[0,+r(_,l[f].key,p,a)]).data=_;for(f=0,b=_I(e(l));f<m;++f)l[b[f]].index=f;return n(l,b),l}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Mr(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Mr(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?BA:typeof a=="function"?a:Mr(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??hd,i):n},i}function Coe(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,l;i<a;++i){for(l=n=0;n<r;++n)l+=t[n][i][1]||0;if(l)for(n=0;n<r;++n)t[n][i][1]/=l}hd(t,e)}}function Ooe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var l=0,f=0;l<i;++l)f+=t[l][n][1]||0;r[n][1]+=r[n][0]=-f/2}hd(t,e)}}function Noe(t,e){if(!(!((l=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,l;r<a;++r){for(var f=0,m=0,p=0;f<l;++f){for(var b=t[e[f]],_=b[r][1]||0,T=b[r-1][1]||0,R=(_-T)/2,j=0;j<f;++j){var M=t[e[j]],L=M[r][1]||0,z=M[r-1][1]||0;R+=L-z}m+=_,p+=R*_}i[r-1][1]+=i[r-1][0]=n,m&&(n-=p/m)}i[r-1][1]+=i[r-1][0]=n,hd(t,e)}}var a2={},s2={},vD;function Roe(){return vD||(vD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(s2)),s2}var o2={},xD;function kB(){return xD||(xD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(o2)),o2}var l2={},bD;function AI(){return bD||(bD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(l2)),l2}var u2={},c2={},wD;function Poe(){return wD||(wD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(c2)),c2}var _D;function SI(){return _D||(_D=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Poe(),n=AI();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],l=i.length;if(l===0)return a;let f=0,m="",p="",b=!1;for(i.charCodeAt(0)===46&&(a.push(""),f++);f<l;){const _=i[f];p?_==="\\"&&f+1<l?(f++,m+=i[f]):_===p?p="":m+=_:b?_==='"'||_==="'"?p=_:_==="]"?(b=!1,a.push(m),m=""):m+=_:_==="["?(b=!0,m&&(a.push(m),m="")):_==="."?m&&(a.push(m),m=""):m+=_,f++}return m&&a.push(m),a}t.toPath=r})(u2)),u2}var ED;function TI(){return ED||(ED=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Roe(),n=kB(),r=AI(),i=SI();function a(f,m,p){if(f==null)return p;switch(typeof m){case"string":{if(e.isUnsafeProperty(m))return p;const b=f[m];return b===void 0?n.isDeepKey(m)?a(f,i.toPath(m),p):p:b}case"number":case"symbol":{typeof m=="number"&&(m=r.toKey(m));const b=f[m];return b===void 0?p:b}default:{if(Array.isArray(m))return l(f,m,p);if(Object.is(m?.valueOf(),-0)?m="-0":m=String(m),e.isUnsafeProperty(m))return p;const b=f[m];return b===void 0?p:b}}}function l(f,m,p){if(m.length===0)return p;let b=f;for(let _=0;_<m.length;_++){if(b==null||e.isUnsafeProperty(m[_]))return p;b=b[m[_]]}return b===void 0?p:b}t.get=a})(a2)),a2}var f2,AD;function Doe(){return AD||(AD=1,f2=TI().get),f2}var koe=Doe();const md=Pl(koe);var Moe=4;function Rc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Moe,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function yi(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,a,l)=>{var f=n[l-1];return typeof f=="string"?i+f+a:f!==void 0?i+Rc(f)+a:i+a},"")}var pa=t=>t===0?0:t>0?1:-1,Ol=t=>typeof t=="number"&&t!=+t,gd=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Tt=t=>(typeof t=="number"||t instanceof Number)&&!Ol(t),Io=t=>Tt(t)||typeof t=="string",joe=0,Np=t=>{var e=++joe;return"".concat(t||"").concat(e)},is=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Tt(e)&&typeof e!="string")return r;var a;if(gd(e)){if(n==null)return r;var l=e.indexOf("%");a=n*parseFloat(e.slice(0,l))/100}else a=+e;return Ol(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},MB=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function Jr(t,e,n){return Tt(t)&&Tt(e)?Rc(t+n*(e-t)):e}function jB(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):md(r,e))===n)}var li=t=>t===null||typeof t>"u",x0=t=>li(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Ms(t){return t!=null}function Nd(){}var Loe=["type","size","sizeType"];function FA(){return FA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FA.apply(null,arguments)}function SD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function TD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SD(Object(n),!0).forEach(function(r){Boe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Boe(t,e,n){return(e=Foe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Foe(t){var e=Voe(t,"string");return typeof e=="symbol"?e:e+""}function Voe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zoe(t,e){if(t==null)return{};var n,r,i=Uoe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Uoe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var LB={symbolCircle:EI,symbolCross:roe,symbolDiamond:aoe,symbolSquare:soe,symbolStar:coe,symbolTriangle:foe,symbolWye:hoe},qoe=Math.PI/180,Goe=t=>{var e="symbol".concat(x0(t));return LB[e]||EI},Hoe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*qoe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Koe=(t,e)=>{LB["symbol".concat(x0(t))]=e},BB=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=zoe(t,Loe),a=TD(TD({},i),{},{type:e,size:n,sizeType:r}),l="circle";typeof e=="string"&&(l=e);var f=()=>{var T=Goe(l),R=moe().type(T).size(Hoe(n,r,l)),j=R();if(j!==null)return j},{className:m,cx:p,cy:b}=a,_=as(a);return Tt(p)&&Tt(b)&&Tt(n)?D.createElement("path",FA({},_,{className:Hn("recharts-symbols",m),transform:"translate(".concat(p,", ").concat(b,")"),d:f()})):null};BB.registerSymbol=Koe;var FB=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,II=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(D.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{bI(i)&&(r[i]=(a=>n[i](n,a)))}),r},Woe=(t,e,n)=>r=>(t(e,n,r),null),sb=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];bI(i)&&typeof a=="function"&&(r||(r={}),r[i]=Woe(a,e,n))}),r};function ID(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $oe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ID(Object(n),!0).forEach(function(r){Yoe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ID(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yoe(t,e,n){return(e=Xoe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xoe(t){var e=Qoe(t,"string");return typeof e=="symbol"?e:e+""}function Qoe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zi(t,e){var n=$oe({},t),r=e,i=Object.keys(e),a=i.reduce((l,f)=>(l[f]===void 0&&r[f]!==void 0&&(l[f]=r[f]),l),n);return a}var d2={},h2={},CD;function Zoe(){return CD||(CD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const l=n[a],f=r(l,a,n);i.has(f)||i.set(f,l)}return Array.from(i.values())}t.uniqBy=e})(h2)),h2}var m2={},OD;function Joe(){return OD||(OD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return function(...i){return n.apply(this,i.slice(0,r))}}t.ary=e})(m2)),m2}var g2={},ND;function VB(){return ND||(ND=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(g2)),g2}var p2={},y2={},v2={},RD;function ele(){return RD||(RD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(v2)),v2}var PD;function CI(){return PD||(PD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ele();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(y2)),y2}var x2={},DD;function tle(){return DD||(DD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(x2)),x2}var kD;function nle(){return kD||(kD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CI(),n=tle();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(p2)),p2}var b2={},w2={},MD;function rle(){return MD||(MD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=TI();function n(r){return function(i){return e.get(i,r)}}t.property=n})(w2)),w2}var _2={},E2={},A2={},S2={},jD;function zB(){return jD||(jD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(S2)),S2}var T2={},LD;function UB(){return LD||(LD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(T2)),T2}var I2={},BD;function qB(){return BD||(BD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.isEqualsSameValueZero=e})(I2)),I2}var FD;function ile(){return FD||(FD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zB(),n=UB(),r=qB();function i(b,_,T){return typeof T!="function"?i(b,_,()=>{}):a(b,_,function R(j,M,L,z,$,K){const J=T(j,M,L,z,$,K);return J!==void 0?!!J:a(j,M,R,K)},new Map)}function a(b,_,T,R){if(_===b)return!0;switch(typeof _){case"object":return l(b,_,T,R);case"function":return Object.keys(_).length>0?a(b,{..._},T,R):r.isEqualsSameValueZero(b,_);default:return e.isObject(b)?typeof _=="string"?_==="":!0:r.isEqualsSameValueZero(b,_)}}function l(b,_,T,R){if(_==null)return!0;if(Array.isArray(_))return m(b,_,T,R);if(_ instanceof Map)return f(b,_,T,R);if(_ instanceof Set)return p(b,_,T,R);const j=Object.keys(_);if(b==null||n.isPrimitive(b))return j.length===0;if(j.length===0)return!0;if(R?.has(_))return R.get(_)===b;R?.set(_,b);try{for(let M=0;M<j.length;M++){const L=j[M];if(!n.isPrimitive(b)&&!(L in b)||_[L]===void 0&&b[L]!==void 0||_[L]===null&&b[L]!==null||!T(b[L],_[L],L,b,_,R))return!1}return!0}finally{R?.delete(_)}}function f(b,_,T,R){if(_.size===0)return!0;if(!(b instanceof Map))return!1;for(const[j,M]of _.entries()){const L=b.get(j);if(T(L,M,j,b,_,R)===!1)return!1}return!0}function m(b,_,T,R){if(_.length===0)return!0;if(!Array.isArray(b))return!1;const j=new Set;for(let M=0;M<_.length;M++){const L=_[M];let z=!1;for(let $=0;$<b.length;$++){if(j.has($))continue;const K=b[$];let J=!1;if(T(K,L,M,b,_,R)&&(J=!0),J){j.add($),z=!0;break}}if(!z)return!1}return!0}function p(b,_,T,R){return _.size===0?!0:b instanceof Set?m([...b],[..._],T,R):!1}t.isMatchWith=i,t.isSetMatch=p})(A2)),A2}var VD;function GB(){return VD||(VD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ile();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(E2)),E2}var C2={},O2={},N2={},zD;function ale(){return zD||(zD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(N2)),N2}var R2={},UD;function OI(){return UD||(UD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(R2)),R2}var P2={},qD;function HB(){return qD||(qD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",l="[object Symbol]",f="[object Date]",m="[object Map]",p="[object Set]",b="[object Array]",_="[object Function]",T="[object ArrayBuffer]",R="[object Object]",j="[object Error]",M="[object DataView]",L="[object Uint8Array]",z="[object Uint8ClampedArray]",$="[object Uint16Array]",K="[object Uint32Array]",J="[object BigUint64Array]",ce="[object Int8Array]",Z="[object Int16Array]",V="[object Int32Array]",W="[object BigInt64Array]",U="[object Float32Array]",ae="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=T,t.arrayTag=b,t.bigInt64ArrayTag=W,t.bigUint64ArrayTag=J,t.booleanTag=i,t.dataViewTag=M,t.dateTag=f,t.errorTag=j,t.float32ArrayTag=U,t.float64ArrayTag=ae,t.functionTag=_,t.int16ArrayTag=Z,t.int32ArrayTag=V,t.int8ArrayTag=ce,t.mapTag=m,t.numberTag=r,t.objectTag=R,t.regexpTag=e,t.setTag=p,t.stringTag=n,t.symbolTag=l,t.uint16ArrayTag=$,t.uint32ArrayTag=K,t.uint8ArrayTag=L,t.uint8ClampedArrayTag=z})(P2)),P2}var D2={},GD;function sle(){return GD||(GD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(D2)),D2}var HD;function KB(){return HD||(HD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ale(),n=OI(),r=HB(),i=UB(),a=sle();function l(b,_){return f(b,void 0,b,new Map,_)}function f(b,_,T,R=new Map,j=void 0){const M=j?.(b,_,T,R);if(M!==void 0)return M;if(i.isPrimitive(b))return b;if(R.has(b))return R.get(b);if(Array.isArray(b)){const L=new Array(b.length);R.set(b,L);for(let z=0;z<b.length;z++)L[z]=f(b[z],z,T,R,j);return Object.hasOwn(b,"index")&&(L.index=b.index),Object.hasOwn(b,"input")&&(L.input=b.input),L}if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp){const L=new RegExp(b.source,b.flags);return L.lastIndex=b.lastIndex,L}if(b instanceof Map){const L=new Map;R.set(b,L);for(const[z,$]of b)L.set(z,f($,z,T,R,j));return L}if(b instanceof Set){const L=new Set;R.set(b,L);for(const z of b)L.add(f(z,void 0,T,R,j));return L}if(typeof Buffer<"u"&&Buffer.isBuffer(b))return b.subarray();if(a.isTypedArray(b)){const L=new(Object.getPrototypeOf(b)).constructor(b.length);R.set(b,L);for(let z=0;z<b.length;z++)L[z]=f(b[z],z,T,R,j);return L}if(b instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&b instanceof SharedArrayBuffer)return b.slice(0);if(b instanceof DataView){const L=new DataView(b.buffer.slice(0),b.byteOffset,b.byteLength);return R.set(b,L),m(L,b,T,R,j),L}if(typeof File<"u"&&b instanceof File){const L=new File([b],b.name,{type:b.type});return R.set(b,L),m(L,b,T,R,j),L}if(typeof Blob<"u"&&b instanceof Blob){const L=new Blob([b],{type:b.type});return R.set(b,L),m(L,b,T,R,j),L}if(b instanceof Error){const L=new b.constructor;return R.set(b,L),L.message=b.message,L.name=b.name,L.stack=b.stack,L.cause=b.cause,m(L,b,T,R,j),L}if(b instanceof Boolean){const L=new Boolean(b.valueOf());return R.set(b,L),m(L,b,T,R,j),L}if(b instanceof Number){const L=new Number(b.valueOf());return R.set(b,L),m(L,b,T,R,j),L}if(b instanceof String){const L=new String(b.valueOf());return R.set(b,L),m(L,b,T,R,j),L}if(typeof b=="object"&&p(b)){const L=Object.create(Object.getPrototypeOf(b));return R.set(b,L),m(L,b,T,R,j),L}return b}function m(b,_,T=b,R,j){const M=[...Object.keys(_),...e.getSymbols(_)];for(let L=0;L<M.length;L++){const z=M[L],$=Object.getOwnPropertyDescriptor(b,z);($==null||$.writable)&&(b[z]=f(_[z],z,T,R,j))}}function p(b){switch(n.getTag(b)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=l,t.cloneDeepWithImpl=f,t.copyProperties=m})(O2)),O2}var KD;function ole(){return KD||(KD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KB();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(C2)),C2}var WD;function lle(){return WD||(WD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GB(),n=ole();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(_2)),_2}var k2={},M2={},j2={},$D;function ule(){return $D||($D=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KB(),n=OI(),r=HB();function i(a,l){return e.cloneDeepWith(a,(f,m,p,b)=>{const _=l?.(f,m,p,b);if(_!==void 0)return _;if(typeof a=="object"){if(n.getTag(a)===r.objectTag&&typeof a.constructor!="function"){const T={};return b.set(a,T),e.copyProperties(T,a,p,b),T}switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const T=new a.constructor(a?.valueOf());return e.copyProperties(T,a),T}case r.argumentsTag:{const T={};return e.copyProperties(T,a),T.length=a.length,T[Symbol.iterator]=a[Symbol.iterator],T}default:return}}})}t.cloneDeepWith=i})(j2)),j2}var YD;function cle(){return YD||(YD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ule();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(M2)),M2}var L2={},B2={},XD;function WB(){return XD||(XD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(B2)),B2}var F2={},QD;function fle(){return QD||(QD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OI();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(F2)),F2}var ZD;function dle(){return ZD||(ZD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kB(),n=WB(),r=fle(),i=SI();function a(l,f){let m;if(Array.isArray(f)?m=f:typeof f=="string"&&e.isDeepKey(f)&&l?.[f]==null?m=i.toPath(f):m=[f],m.length===0)return!1;let p=l;for(let b=0;b<m.length;b++){const _=m[b];if((p==null||!Object.hasOwn(p,_))&&!((Array.isArray(p)||r.isArguments(p))&&n.isIndex(_)&&_<p.length))return!1;p=p[_]}return!0}t.has=a})(L2)),L2}var JD;function hle(){return JD||(JD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GB(),n=AI(),r=cle(),i=TI(),a=dle();function l(f,m){switch(typeof f){case"object":{Object.is(f?.valueOf(),-0)&&(f="-0");break}case"number":{f=n.toKey(f);break}}return m=r.cloneDeep(m),function(p){const b=i.get(p,f);return b===void 0?a.has(p,f):m===void 0?b===void 0:e.isMatch(b,m)}}t.matchesProperty=l})(k2)),k2}var ek;function mle(){return ek||(ek=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VB(),n=rle(),r=lle(),i=hle();function a(l){if(l==null)return e.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}t.iteratee=a})(b2)),b2}var tk;function gle(){return tk||(tk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Zoe(),n=Joe(),r=VB(),i=nle(),a=mle();function l(f,m=r.identity){return i.isArrayLikeObject(f)?e.uniqBy(Array.from(f),n.ary(a.iteratee(m),1)):[]}t.uniqBy=l})(d2)),d2}var V2,nk;function ple(){return nk||(nk=1,V2=gle().uniqBy),V2}var yle=ple();const rk=Pl(yle);function vle(t,e,n){return e===!0?rk(t,n):typeof e=="function"?rk(t,e):t}var z2={exports:{}},U2={},q2={exports:{}},G2={};var ik;function xle(){if(ik)return G2;ik=1;var t=pm();function e(_,T){return _===T&&(_!==0||1/_===1/T)||_!==_&&T!==T}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,l=t.useDebugValue;function f(_,T){var R=T(),j=r({inst:{value:R,getSnapshot:T}}),M=j[0].inst,L=j[1];return a(function(){M.value=R,M.getSnapshot=T,m(M)&&L({inst:M})},[_,R,T]),i(function(){return m(M)&&L({inst:M}),_(function(){m(M)&&L({inst:M})})},[_]),l(R),R}function m(_){var T=_.getSnapshot;_=_.value;try{var R=T();return!n(_,R)}catch{return!0}}function p(_,T){return T()}var b=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:f;return G2.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:b,G2}var ak;function ble(){return ak||(ak=1,q2.exports=xle()),q2.exports}var sk;function wle(){if(sk)return U2;sk=1;var t=pm(),e=ble();function n(p,b){return p===b&&(p!==0||1/p===1/b)||p!==p&&b!==b}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,l=t.useEffect,f=t.useMemo,m=t.useDebugValue;return U2.useSyncExternalStoreWithSelector=function(p,b,_,T,R){var j=a(null);if(j.current===null){var M={hasValue:!1,value:null};j.current=M}else M=j.current;j=f(function(){function z(Z){if(!$){if($=!0,K=Z,Z=T(Z),R!==void 0&&M.hasValue){var V=M.value;if(R(V,Z))return J=V}return J=Z}if(V=J,r(K,Z))return V;var W=T(Z);return R!==void 0&&R(V,W)?(K=Z,V):(K=Z,J=W)}var $=!1,K,J,ce=_===void 0?null:_;return[function(){return z(b())},ce===null?void 0:function(){return z(ce())}]},[b,_,T,R]);var L=i(p,j[0],j[1]);return l(function(){M.hasValue=!0,M.value=L},[L]),m(L),L},U2}var ok;function _le(){return ok||(ok=1,z2.exports=wle()),z2.exports}var Ele=_le(),NI=D.createContext(null),Ale=t=>t,Gr=()=>{var t=D.useContext(NI);return t?t.store.dispatch:Ale},jy=()=>{},Sle=()=>jy,Tle=(t,e)=>t===e;function It(t){var e=D.useContext(NI),n=D.useMemo(()=>e?r=>{if(r!=null)return t(r)}:jy,[e,t]);return Ele.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Sle,e?e.store.getState:jy,e?e.store.getState:jy,n,Tle)}function Ile(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function Cle(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function Ole(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var lk=t=>Array.isArray(t)?t:[t];function Nle(t){const e=Array.isArray(t[0])?t[0]:t;return Ole(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Rle(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var Ple=class{constructor(t){this.value=t}deref(){return this.value}},Dle=typeof WeakRef<"u"?WeakRef:Ple,kle=0,uk=1;function J1(){return{s:kle,v:void 0,o:null,p:null}}function $B(t,e={}){let n=J1();const{resultEqualityCheck:r}=e;let i,a=0;function l(){let f=n;const{length:m}=arguments;for(let _=0,T=m;_<T;_++){const R=arguments[_];if(typeof R=="function"||typeof R=="object"&&R!==null){let j=f.o;j===null&&(f.o=j=new WeakMap);const M=j.get(R);M===void 0?(f=J1(),j.set(R,f)):f=M}else{let j=f.p;j===null&&(f.p=j=new Map);const M=j.get(R);M===void 0?(f=J1(),j.set(R,f)):f=M}}const p=f;let b;if(f.s===uk)b=f.v;else if(b=t.apply(null,arguments),a++,r){const _=i?.deref?.()??i;_!=null&&r(_,b)&&(b=_,a!==0&&a--),i=typeof b=="object"&&b!==null||typeof b=="function"?new Dle(b):b}return p.s=uk,p.v=b,b}return l.clearCache=()=>{n=J1(),l.resetResultsCount()},l.resultsCount=()=>a,l.resetResultsCount=()=>{a=0},l}function Mle(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,l=0,f,m={},p=i.pop();typeof p=="object"&&(m=p,p=i.pop()),Ile(p,`createSelector expects an output function after the inputs, but received: [${typeof p}]`);const b={...n,...m},{memoize:_,memoizeOptions:T=[],argsMemoize:R=$B,argsMemoizeOptions:j=[]}=b,M=lk(T),L=lk(j),z=Nle(i),$=_(function(){return a++,p.apply(null,arguments)},...M),K=R(function(){l++;const ce=Rle(z,arguments);return f=$.apply(null,ce),f},...L);return Object.assign(K,{resultFunc:p,memoizedResultFunc:$,dependencies:z,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>f,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:_,argsMemoize:R})};return Object.assign(r,{withTypes:()=>r}),r}var Re=Mle($B),jle=Object.assign((t,e=Re)=>{Cle(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((l,f,m)=>(l[n[m]]=f,l),{}))},{withTypes:()=>jle}),H2={},K2={},W2={},ck;function Lle(){return ck||(ck=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const l=e(r),f=e(i);if(l===f&&l===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?f-l:l-f}return 0};t.compareValues=n})(W2)),W2}var $2={},Y2={},fk;function YB(){return fk||(fk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(Y2)),Y2}var dk;function Ble(){return dk||(dk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YB(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,l){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||l!=null&&Object.hasOwn(l,a)}t.isKey=i})($2)),$2}var hk;function Fle(){return hk||(hk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Lle(),n=Ble(),r=SI();function i(a,l,f,m){if(a==null)return[];f=m?void 0:f,Array.isArray(a)||(a=Object.values(a)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(f)||(f=f==null?[]:[f]),f=f.map(R=>String(R));const p=(R,j)=>{let M=R;for(let L=0;L<j.length&&M!=null;++L)M=M[j[L]];return M},b=(R,j)=>j==null||R==null?j:typeof R=="object"&&"key"in R?Object.hasOwn(j,R.key)?j[R.key]:p(j,R.path):typeof R=="function"?R(j):Array.isArray(R)?p(j,R):typeof j=="object"?j[R]:j,_=l.map(R=>(Array.isArray(R)&&R.length===1&&(R=R[0]),R==null||typeof R=="function"||Array.isArray(R)||n.isKey(R)?R:{key:R,path:r.toPath(R)}));return a.map(R=>({original:R,criteria:_.map(j=>b(j,R))})).slice().sort((R,j)=>{for(let M=0;M<_.length;M++){const L=e.compareValues(R.criteria[M],j.criteria[M],f[M]);if(L!==0)return L}return 0}).map(R=>R.original)}t.orderBy=i})(K2)),K2}var X2={},mk;function Vle(){return mk||(mk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),l=(f,m)=>{for(let p=0;p<f.length;p++){const b=f[p];Array.isArray(b)&&m<a?l(b,m+1):i.push(b)}};return l(n,0),i}t.flatten=e})(X2)),X2}var Q2={},gk;function XB(){return gk||(gk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WB(),n=CI(),r=zB(),i=qB();function a(l,f,m){return r.isObject(m)&&(typeof f=="number"&&n.isArrayLike(m)&&e.isIndex(f)&&f<m.length||typeof f=="string"&&f in m)?i.isEqualsSameValueZero(m[f],l):!1}t.isIterateeCall=a})(Q2)),Q2}var pk;function zle(){return pk||(pk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Fle(),n=Vle(),r=XB();function i(a,...l){const f=l.length;return f>1&&r.isIterateeCall(a,l[0],l[1])?l=[]:f>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),e.orderBy(a,n.flatten(l),["asc"])}t.sortBy=i})(H2)),H2}var Z2,yk;function Ule(){return yk||(yk=1,Z2=zle().sortBy),Z2}var qle=Ule();const ob=Pl(qle);var QB=t=>t.legend.settings,Gle=t=>t.legend.size,Hle=t=>t.legend.payload;Re([Hle,QB],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?ob(r,n):r});var ey=1;function Kle(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=D.useState({height:0,left:0,top:0,width:0}),r=D.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),l={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(l.height-e.height)>ey||Math.abs(l.left-e.left)>ey||Math.abs(l.top-e.top)>ey||Math.abs(l.width-e.width)>ey)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Ma(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Wle=typeof Symbol=="function"&&Symbol.observable||"@@observable",vk=Wle,J2=()=>Math.random().toString(36).substring(7).split("").join("."),$le={INIT:`@@redux/INIT${J2()}`,REPLACE:`@@redux/REPLACE${J2()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${J2()}`},Rv=$le;function RI(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function ZB(t,e,n){if(typeof t!="function")throw new Error(Ma(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ma(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ma(1));return n(ZB)(t,e)}let r=t,i=e,a=new Map,l=a,f=0,m=!1;function p(){l===a&&(l=new Map,a.forEach((L,z)=>{l.set(z,L)}))}function b(){if(m)throw new Error(Ma(3));return i}function _(L){if(typeof L!="function")throw new Error(Ma(4));if(m)throw new Error(Ma(5));let z=!0;p();const $=f++;return l.set($,L),function(){if(z){if(m)throw new Error(Ma(6));z=!1,p(),l.delete($),a=null}}}function T(L){if(!RI(L))throw new Error(Ma(7));if(typeof L.type>"u")throw new Error(Ma(8));if(typeof L.type!="string")throw new Error(Ma(17));if(m)throw new Error(Ma(9));try{m=!0,i=r(i,L)}finally{m=!1}return(a=l).forEach($=>{$()}),L}function R(L){if(typeof L!="function")throw new Error(Ma(10));r=L,T({type:Rv.REPLACE})}function j(){const L=_;return{subscribe(z){if(typeof z!="object"||z===null)throw new Error(Ma(11));function $(){const J=z;J.next&&J.next(b())}return $(),{unsubscribe:L($)}},[vk](){return this}}}return T({type:Rv.INIT}),{dispatch:T,subscribe:_,getState:b,replaceReducer:R,[vk]:j}}function Yle(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Rv.INIT})>"u")throw new Error(Ma(12));if(typeof n(void 0,{type:Rv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ma(13))})}function JB(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const l=e[a];typeof t[l]=="function"&&(n[l]=t[l])}const r=Object.keys(n);let i;try{Yle(n)}catch(a){i=a}return function(l={},f){if(i)throw i;let m=!1;const p={};for(let b=0;b<r.length;b++){const _=r[b],T=n[_],R=l[_],j=T(R,f);if(typeof j>"u")throw f&&f.type,new Error(Ma(14));p[_]=j,m=m||j!==R}return m=m||r.length!==Object.keys(l).length,m?p:l}}function Pv(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Xle(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(Ma(15))};const l={getState:i.getState,dispatch:(m,...p)=>a(m,...p)},f=t.map(m=>m(l));return a=Pv(...f)(i.dispatch),{...i,dispatch:a}}}function eF(t){return RI(t)&&"type"in t&&typeof t.type=="string"}var tF=Symbol.for("immer-nothing"),xk=Symbol.for("immer-draftable"),hs=Symbol.for("immer-state");function Vo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var no=Object,um=no.getPrototypeOf,Dv="constructor",lb="prototype",VA="configurable",kv="enumerable",Ly="writable",Rp="value",Au=t=>!!t&&!!t[hs];function Xo(t){return t?nF(t)||cb(t)||!!t[xk]||!!t[Dv]?.[xk]||fb(t)||db(t):!1}var Qle=no[lb][Dv].toString(),bk=new WeakMap;function nF(t){if(!t||!PI(t))return!1;const e=um(t);if(e===null||e===no[lb])return!0;const n=no.hasOwnProperty.call(e,Dv)&&e[Dv];if(n===Object)return!0;if(!Eh(n))return!1;let r=bk.get(n);return r===void 0&&(r=Function.toString.call(n),bk.set(n,r)),r===Qle}function ub(t,e,n=!0){b0(t)===0?(n?Reflect.ownKeys(t):no.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function b0(t){const e=t[hs];return e?e.type_:cb(t)?1:fb(t)?2:db(t)?3:0}var wk=(t,e,n=b0(t))=>n===2?t.has(e):no[lb].hasOwnProperty.call(t,e),zA=(t,e,n=b0(t))=>n===2?t.get(e):t[e],Mv=(t,e,n,r=b0(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function Zle(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var cb=Array.isArray,fb=t=>t instanceof Map,db=t=>t instanceof Set,PI=t=>typeof t=="object",Eh=t=>typeof t=="function",eE=t=>typeof t=="boolean";function Jle(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var au=t=>t.copy_||t.base_,DI=t=>t.modified_?t.copy_:t.base_;function UA(t,e){if(fb(t))return new Map(t);if(db(t))return new Set(t);if(cb(t))return Array[lb].slice.call(t);const n=nF(t);if(e===!0||e==="class_only"&&!n){const r=no.getOwnPropertyDescriptors(t);delete r[hs];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const l=i[a],f=r[l];f[Ly]===!1&&(f[Ly]=!0,f[VA]=!0),(f.get||f.set)&&(r[l]={[VA]:!0,[Ly]:!0,[kv]:f[kv],[Rp]:t[l]})}return no.create(um(t),r)}else{const r=um(t);if(r!==null&&n)return{...t};const i=no.create(r);return no.assign(i,t)}}function kI(t,e=!1){return hb(t)||Au(t)||!Xo(t)||(b0(t)>1&&no.defineProperties(t,{set:ty,add:ty,clear:ty,delete:ty}),no.freeze(t),e&&ub(t,(n,r)=>{kI(r,!0)},!1)),t}function eue(){Vo(2)}var ty={[Rp]:eue};function hb(t){return t===null||!PI(t)?!0:no.isFrozen(t)}var jv="MapSet",qA="Patches",_k="ArrayMethods",rF={};function pd(t){const e=rF[t];return e||Vo(0,t),e}var Ek=t=>!!rF[t],Pp,iF=()=>Pp,tue=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Ek(jv)?pd(jv):void 0,arrayMethodsPlugin_:Ek(_k)?pd(_k):void 0});function Ak(t,e){e&&(t.patchPlugin_=pd(qA),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function GA(t){HA(t),t.drafts_.forEach(nue),t.drafts_=null}function HA(t){t===Pp&&(Pp=t.parent_)}var Sk=t=>Pp=tue(Pp,t);function nue(t){const e=t[hs];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Tk(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[hs].modified_&&(GA(e),Vo(4)),Xo(t)&&(t=Ik(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[hs].base_,t,e)}else t=Ik(e,n);return rue(e,t,!0),GA(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==tF?t:void 0}function Ik(t,e){if(hb(e))return e;const n=e[hs];if(!n)return Lv(e,t.handledSet_,t);if(!mb(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);oF(n,t)}return n.copy_}function rue(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&kI(e,n)}function aF(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var mb=(t,e)=>t.scope_===e,iue=[];function sF(t,e,n,r){const i=au(t),a=t.type_;if(r!==void 0&&zA(i,r,a)===e){Mv(i,r,n,a);return}if(!t.draftLocations_){const f=t.draftLocations_=new Map;ub(i,(m,p)=>{if(Au(p)){const b=f.get(p)||[];b.push(m),f.set(p,b)}})}const l=t.draftLocations_.get(e)??iue;for(const f of l)Mv(i,f,n,a)}function aue(t,e,n){t.callbacks_.push(function(i){const a=e;if(!a||!mb(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const l=DI(a);sF(t,a.draft_??a,l,n),oF(a,i)})}function oF(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}aF(t)}}function sue(t,e,n){const{scope_:r}=t;if(Au(n)){const i=n[hs];mb(i,r)&&i.callbacks_.push(function(){By(t);const l=DI(i);sF(t,n,l,e)})}else Xo(n)&&t.callbacks_.push(function(){const a=au(t);t.type_===3?a.has(n)&&Lv(n,r.handledSet_,r):zA(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&Lv(zA(t.copy_,e,t.type_),r.handledSet_,r)})}function Lv(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Au(t)||e.has(t)||!Xo(t)||hb(t)||(e.add(t),ub(t,(r,i)=>{if(Au(i)){const a=i[hs];if(mb(a,n)){const l=DI(a);Mv(t,r,l,t.type_),aF(a)}}else Xo(i)&&Lv(i,e,n)})),t}function oue(t,e){const n=cb(t),r={type_:n?1:0,scope_:e?e.scope_:iF(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=Bv;n&&(i=[r],a=Dp);const{revoke:l,proxy:f}=Proxy.revocable(i,a);return r.draft_=f,r.revoke_=l,[f,r]}var Bv={get(t,e){if(e===hs)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=au(t);if(!wk(i,e,t.type_))return lue(t,i,e);const a=i[e];if(t.finalized_||!Xo(a)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&Jle(e))return a;if(a===tE(t.base_,e)){By(t);const l=t.type_===1?+e:e,f=WA(t.scope_,a,t,l);return t.copy_[l]=f}return a},has(t,e){return e in au(t)},ownKeys(t){return Reflect.ownKeys(au(t))},set(t,e,n){const r=lF(au(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=tE(au(t),e),a=i?.[hs];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(Zle(n,i)&&(n!==void 0||wk(t.base_,e,t.type_)))return!0;By(t),KA(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),sue(t,e,n)),!0},deleteProperty(t,e){return By(t),tE(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),KA(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=au(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[Ly]:!0,[VA]:t.type_!==1||e!=="length",[kv]:r[kv],[Rp]:n[e]}},defineProperty(){Vo(11)},getPrototypeOf(t){return um(t.base_)},setPrototypeOf(){Vo(12)}},Dp={};for(let t in Bv){let e=Bv[t];Dp[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}Dp.deleteProperty=function(t,e){return Dp.set.call(this,t,e,void 0)};Dp.set=function(t,e,n){return Bv.set.call(this,t[0],e,n,t[0])};function tE(t,e){const n=t[hs];return(n?au(n):t)[e]}function lue(t,e,n){const r=lF(e,n);return r?Rp in r?r[Rp]:r.get?.call(t.draft_):void 0}function lF(t,e){if(!(e in t))return;let n=um(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=um(n)}}function KA(t){t.modified_||(t.modified_=!0,t.parent_&&KA(t.parent_))}function By(t){t.copy_||(t.assigned_=new Map,t.copy_=UA(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var uue=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Eh(n)&&!Eh(r)){const l=r;r=n;const f=this;return function(p=l,...b){return f.produce(p,_=>r.call(this,_,...b))}}Eh(r)||Vo(6),i!==void 0&&!Eh(i)&&Vo(7);let a;if(Xo(n)){const l=Sk(this),f=WA(l,n,void 0);let m=!0;try{a=r(f),m=!1}finally{m?GA(l):HA(l)}return Ak(l,i),Tk(a,l)}else if(!n||!PI(n)){if(a=r(n),a===void 0&&(a=n),a===tF&&(a=void 0),this.autoFreeze_&&kI(a,!0),i){const l=[],f=[];pd(qA).generateReplacementPatches_(n,a,{patches_:l,inversePatches_:f}),i(l,f)}return a}else Vo(1,n)},this.produceWithPatches=(n,r)=>{if(Eh(n))return(f,...m)=>this.produceWithPatches(f,p=>n(p,...m));let i,a;return[this.produce(n,r,(f,m)=>{i=f,a=m}),i,a]},eE(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),eE(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),eE(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Xo(e)||Vo(8),Au(e)&&(e=Wo(e));const n=Sk(this),r=WA(n,e,void 0);return r[hs].isManual_=!0,HA(n),r}finishDraft(e,n){const r=e&&e[hs];(!r||!r.isManual_)&&Vo(9);const{scope_:i}=r;return Ak(i,n),Tk(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=pd(qA).applyPatches_;return Au(e)?i(e,n):this.produce(e,a=>i(a,n))}};function WA(t,e,n,r){const[i,a]=fb(e)?pd(jv).proxyMap_(e,n):db(e)?pd(jv).proxySet_(e,n):oue(e,n);return(n?.scope_??iF()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?aue(n,a,r):a.callbacks_.push(function(m){m.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:p}=m;a.modified_&&p&&p.generatePatches_(a,[],m)}),i}function Wo(t){return Au(t)||Vo(10,t),uF(t)}function uF(t){if(!Xo(t)||hb(t))return t;const e=t[hs];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=UA(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=UA(t,!0);return ub(n,(i,a)=>{Mv(n,i,uF(a))},r),e&&(e.finalized_=!1),n}var cue=new uue,cF=cue.produce;function fF(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var fue=fF(),due=fF,hue=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Pv:Pv.apply(null,arguments)};function Co(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(io(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>eF(r)&&r.type===t,n}var dF=class Qg extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Qg.prototype)}static get[Symbol.species](){return Qg}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Qg(...e[0].concat(this)):new Qg(...e.concat(this))}};function Ck(t){return Xo(t)?cF(t,()=>{}):t}function ny(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function mue(t){return typeof t=="boolean"}var gue=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let l=new dF;return n&&(mue(n)?l.push(fue):l.push(due(n.extraArgument))),l},hF="RTK_autoBatch",Qr=()=>t=>({payload:t,meta:{[hF]:!0}}),Ok=t=>e=>{setTimeout(e,t)},mF=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,l=!1;const f=new Set,m=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Ok(10):t.type==="callback"?t.queueNotification:Ok(t.timeout),p=()=>{l=!1,a&&(a=!1,f.forEach(b=>b()))};return Object.assign({},r,{subscribe(b){const _=()=>i&&b(),T=r.subscribe(_);return f.add(b),()=>{T(),f.delete(b)}},dispatch(b){try{return i=!b?.meta?.[hF],a=!i,a&&(l||(l=!0,m(p))),r.dispatch(b)}finally{i=!0}}})},pue=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new dF(t);return r&&i.push(mF(typeof r=="object"?r:void 0)),i};function yue(t){const e=gue(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:l=void 0}=t||{};let f;if(typeof n=="function")f=n;else if(RI(n))f=JB(n);else throw new Error(io(1));let m;typeof r=="function"?m=r(e):m=e();let p=Pv;i&&(p=hue({trace:!1,...typeof i=="object"&&i}));const b=Xle(...m),_=pue(b);let T=typeof l=="function"?l(_):_();const R=p(...T);return ZB(f,a,R)}function gF(t){const e={},n=[];let r;const i={addCase(a,l){const f=typeof a=="string"?a:a.type;if(!f)throw new Error(io(28));if(f in e)throw new Error(io(29));return e[f]=l,i},addAsyncThunk(a,l){return l.pending&&(e[a.pending.type]=l.pending),l.rejected&&(e[a.rejected.type]=l.rejected),l.fulfilled&&(e[a.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:a.settled,reducer:l.settled}),i},addMatcher(a,l){return n.push({matcher:a,reducer:l}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function vue(t){return typeof t=="function"}function xue(t,e){let[n,r,i]=gF(e),a;if(vue(t))a=()=>Ck(t());else{const f=Ck(t);a=()=>f}function l(f=a(),m){let p=[n[m.type],...r.filter(({matcher:b})=>b(m)).map(({reducer:b})=>b)];return p.filter(b=>!!b).length===0&&(p=[i]),p.reduce((b,_)=>{if(_)if(Au(b)){const R=_(b,m);return R===void 0?b:R}else{if(Xo(b))return cF(b,T=>_(T,m));{const T=_(b,m);if(T===void 0){if(b===null)return b;throw Error("A case reducer on a non-draftable value must not return undefined")}return T}}return b},f)}return l.getInitialState=a,l}var bue="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",wue=(t=21)=>{let e="",n=t;for(;n--;)e+=bue[Math.random()*64|0];return e},_ue=Symbol.for("rtk-slice-createasyncthunk");function Eue(t,e){return`${t}/${e}`}function Aue({creators:t}={}){const e=t?.asyncThunk?.[_ue];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(io(11));const l=(typeof r.reducers=="function"?r.reducers(Tue()):r.reducers)||{},f=Object.keys(l),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(K,J){const ce=typeof K=="string"?K:K.type;if(!ce)throw new Error(io(12));if(ce in m.sliceCaseReducersByType)throw new Error(io(13));return m.sliceCaseReducersByType[ce]=J,p},addMatcher(K,J){return m.sliceMatchers.push({matcher:K,reducer:J}),p},exposeAction(K,J){return m.actionCreators[K]=J,p},exposeCaseReducer(K,J){return m.sliceCaseReducersByName[K]=J,p}};f.forEach(K=>{const J=l[K],ce={reducerName:K,type:Eue(i,K),createNotation:typeof r.reducers=="function"};Cue(J)?Nue(ce,J,p,e):Iue(ce,J,p)});function b(){const[K={},J=[],ce=void 0]=typeof r.extraReducers=="function"?gF(r.extraReducers):[r.extraReducers],Z={...K,...m.sliceCaseReducersByType};return xue(r.initialState,V=>{for(let W in Z)V.addCase(W,Z[W]);for(let W of m.sliceMatchers)V.addMatcher(W.matcher,W.reducer);for(let W of J)V.addMatcher(W.matcher,W.reducer);ce&&V.addDefaultCase(ce)})}const _=K=>K,T=new Map,R=new WeakMap;let j;function M(K,J){return j||(j=b()),j(K,J)}function L(){return j||(j=b()),j.getInitialState()}function z(K,J=!1){function ce(V){let W=V[K];return typeof W>"u"&&J&&(W=ny(R,ce,L)),W}function Z(V=_){const W=ny(T,J,()=>new WeakMap);return ny(W,V,()=>{const U={};for(const[ae,ie]of Object.entries(r.selectors??{}))U[ae]=Sue(ie,V,()=>ny(R,V,L),J);return U})}return{reducerPath:K,getSelectors:Z,get selectors(){return Z(ce)},selectSlice:ce}}const $={name:i,reducer:M,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:L,...z(a),injectInto(K,{reducerPath:J,...ce}={}){const Z=J??a;return K.inject({reducerPath:Z,reducer:M},ce),{...$,...z(Z,!0)}}};return $}}function Sue(t,e,n,r){function i(a,...l){let f=e(a);return typeof f>"u"&&r&&(f=n()),t(f,...l)}return i.unwrapped=t,i}var Vs=Aue();function Tue(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Iue({type:t,reducerName:e,createNotation:n},r,i){let a,l;if("reducer"in r){if(n&&!Oue(r))throw new Error(io(17));a=r.reducer,l=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,l?Co(t,l):Co(t))}function Cue(t){return t._reducerDefinitionType==="asyncThunk"}function Oue(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Nue({type:t,reducerName:e},n,r,i){if(!i)throw new Error(io(18));const{payloadCreator:a,fulfilled:l,pending:f,rejected:m,settled:p,options:b}=n,_=i(t,a,b);r.exposeAction(e,_),l&&r.addCase(_.fulfilled,l),f&&r.addCase(_.pending,f),m&&r.addCase(_.rejected,m),p&&r.addMatcher(_.settled,p),r.exposeCaseReducer(e,{fulfilled:l||ry,pending:f||ry,rejected:m||ry,settled:p||ry})}function ry(){}var Rue="task",pF="listener",yF="completed",MI="cancelled",Pue=`task-${MI}`,Due=`task-${yF}`,$A=`${pF}-${MI}`,kue=`${pF}-${yF}`,gb=class{constructor(t){this.code=t,this.message=`${Rue} ${MI} (reason: ${t})`}name="TaskAbortError";message},jI=(t,e)=>{if(typeof t!="function")throw new TypeError(io(32))},Fv=()=>{},vF=(t,e=Fv)=>(t.catch(e),t),xF=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Yf=t=>{if(t.aborted)throw new gb(t.reason)};function bF(t,e){let n=Fv;return new Promise((r,i)=>{const a=()=>i(new gb(t.reason));if(t.aborted){a();return}n=xF(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=Fv})}var Mue=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof gb?"cancelled":"rejected",error:n}}finally{e?.()}},Vv=t=>e=>vF(bF(t,e).then(n=>(Yf(t),n))),wF=t=>{const e=Vv(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Lh}=Object,Nk={},pb="listenerMiddleware",jue=(t,e)=>{const n=r=>xF(t,()=>r.abort(t.reason));return(r,i)=>{jI(r);const a=new AbortController;n(a);const l=Mue(async()=>{Yf(t),Yf(a.signal);const f=await r({pause:Vv(a.signal),delay:wF(a.signal),signal:a.signal});return Yf(a.signal),f},()=>a.abort(Due));return i?.autoJoin&&e.push(l.catch(Fv)),{result:Vv(t)(l),cancel(){a.abort(Pue)}}}},Lue=(t,e)=>{const n=async(r,i)=>{Yf(e);let a=()=>{};const f=[new Promise((m,p)=>{let b=t({predicate:r,effect:(_,T)=>{T.unsubscribe(),m([_,T.getState(),T.getOriginalState()])}});a=()=>{b(),p()}})];i!=null&&f.push(new Promise(m=>setTimeout(m,i,null)));try{const m=await bF(e,Promise.race(f));return Yf(e),m}finally{a()}};return(r,i)=>vF(n(r,i))},_F=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=Co(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(io(21));return jI(a),{predicate:i,type:e,effect:a}},EF=Lh(t=>{const{type:e,predicate:n,effect:r}=_F(t);return{id:wue(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(io(22))}}},{withTypes:()=>EF}),Rk=(t,e)=>{const{type:n,effect:r,predicate:i}=_F(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},YA=t=>{t.pending.forEach(e=>{e.abort($A)})},Bue=(t,e)=>()=>{for(const n of e.keys())YA(n);t.clear()},Pk=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},AF=Lh(Co(`${pb}/add`),{withTypes:()=>AF}),Fue=Co(`${pb}/removeAll`),SF=Lh(Co(`${pb}/remove`),{withTypes:()=>SF}),Vue=(...t)=>{console.error(`${pb}/error`,...t)},w0=(t={})=>{const e=new Map,n=new Map,r=R=>{const j=n.get(R)??0;n.set(R,j+1)},i=R=>{const j=n.get(R)??1;j===1?n.delete(R):n.set(R,j-1)},{extra:a,onError:l=Vue}=t;jI(l);const f=R=>(R.unsubscribe=()=>e.delete(R.id),e.set(R.id,R),j=>{R.unsubscribe(),j?.cancelActive&&YA(R)}),m=R=>{const j=Rk(e,R)??EF(R);return f(j)};Lh(m,{withTypes:()=>m});const p=R=>{const j=Rk(e,R);return j&&(j.unsubscribe(),R.cancelActive&&YA(j)),!!j};Lh(p,{withTypes:()=>p});const b=async(R,j,M,L)=>{const z=new AbortController,$=Lue(m,z.signal),K=[];try{R.pending.add(z),r(R),await Promise.resolve(R.effect(j,Lh({},M,{getOriginalState:L,condition:(J,ce)=>$(J,ce).then(Boolean),take:$,delay:wF(z.signal),pause:Vv(z.signal),extra:a,signal:z.signal,fork:jue(z.signal,K),unsubscribe:R.unsubscribe,subscribe:()=>{e.set(R.id,R)},cancelActiveListeners:()=>{R.pending.forEach((J,ce,Z)=>{J!==z&&(J.abort($A),Z.delete(J))})},cancel:()=>{z.abort($A),R.pending.delete(z)},throwIfCancelled:()=>{Yf(z.signal)}})))}catch(J){J instanceof gb||Pk(l,J,{raisedBy:"effect"})}finally{await Promise.all(K),z.abort(kue),i(R),R.pending.delete(z)}},_=Bue(e,n);return{middleware:R=>j=>M=>{if(!eF(M))return j(M);if(AF.match(M))return m(M.payload);if(Fue.match(M)){_();return}if(SF.match(M))return p(M.payload);let L=R.getState();const z=()=>{if(L===Nk)throw new Error(io(23));return L};let $;try{if($=j(M),e.size>0){const K=R.getState(),J=Array.from(e.values());for(const ce of J){let Z=!1;try{Z=ce.predicate(M,K,L)}catch(V){Z=!1,Pk(l,V,{raisedBy:"predicate"})}Z&&b(ce,M,R,z)}}}finally{L=Nk}return $},startListening:m,stopListening:p,clearListeners:_}};function io(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var zue={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},TF=Vs({name:"chartLayout",initialState:zue,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:Uue,setLayout:que,setChartSize:Gue,setScale:Hue}=TF.actions,Kue=TF.reducer;function IF(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function mn(t){return Number.isFinite(t)}function Nl(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function Dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Th(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dk(Object(n),!0).forEach(function(r){Wue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wue(t,e,n){return(e=$ue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ue(t){var e=Yue(t,"string");return typeof e=="symbol"?e:e+""}function Yue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function br(t,e,n){return li(t)||li(e)?n:Io(e)?md(t,e,n):typeof e=="function"?e(t):n}var Xue=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:l,layout:f}=e;if((f==="vertical"||f==="horizontal"&&l==="middle")&&a!=="center"&&Tt(t[a]))return Th(Th({},t),{},{[a]:t[a]+(r||0)});if((f==="horizontal"||f==="vertical"&&a==="center")&&l!=="middle"&&Tt(t[l]))return Th(Th({},t),{},{[l]:t[l]+(i||0)})}return t},ju=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",CF=(t,e,n,r)=>{if(r)return t.map(f=>f.coordinate);var i,a,l=t.map(f=>(f.coordinate===e&&(i=!0),f.coordinate===n&&(a=!0),f.coordinate));return i||l.push(e),a||l.push(n),l},OF=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:l,realScaleType:f,isCategorical:m,categoricalDomain:p,tickCount:b,ticks:_,niceTicks:T,axisType:R}=t;if(!l)return null;var j=f==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,M=i==="category"&&l.bandwidth?l.bandwidth()/j:0;if(M=R==="angleAxis"&&a&&a.length>=2?pa(a[0]-a[1])*2*M:M,_||T){var L=(_||T||[]).map((z,$)=>{var K=r?r.indexOf(z):z,J=l.map(K);return mn(J)?{coordinate:J+M,value:z,offset:M,index:$}:null}).filter(Ms);return L}return m&&p?p.map((z,$)=>{var K=l.map(z);return mn(K)?{coordinate:K+M,value:z,index:$,offset:M}:null}).filter(Ms):l.ticks&&b!=null?l.ticks(b).map((z,$)=>{var K=l.map(z);return mn(K)?{coordinate:K+M,value:z,index:$,offset:M}:null}).filter(Ms):l.domain().map((z,$)=>{var K=l.map(z);return mn(K)?{coordinate:K+M,value:r?r[z]:z,index:$,offset:M}:null}).filter(Ms)},Que=(t,e)=>{if(!e||e.length!==2||!Tt(e[0])||!Tt(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Tt(t[0])||t[0]<n)&&(i[0]=n),(!Tt(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},Zue=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,l=0,f=0;f<n;++f){var m=t[f],p=m?.[i];if(p!=null){var b=p[1],_=p[0],T=Ol(b)?_:b;T>=0?(p[0]=a,a+=T,p[1]=a):(p[0]=l,l+=T,p[1]=l)}}}},Jue=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,l=0;l<n;++l){var f=t[l],m=f?.[i];if(m!=null){var p=Ol(m[1])?m[0]:m[1];p>=0?(m[0]=a,a+=p,m[1]=a):(m[0]=0,m[1]=0)}}}},ece={sign:Zue,expand:Coe,none:hd,silhouette:Ooe,wiggle:Noe,positive:Jue},tce=(t,e,n)=>{var r,i=(r=ece[n])!==null&&r!==void 0?r:hd,a=Ioe().keys(e).value((f,m)=>Number(br(f,m,0))).order(BA).offset(i),l=a(t);return l.forEach((f,m)=>{f.forEach((p,b)=>{var _=br(t[b],e[m],0);Array.isArray(_)&&_.length===2&&Tt(_[0])&&Tt(_[1])&&(p[0]=_[0],p[1]=_[1])})}),l};function nce(t){return t==null?void 0:String(t)}function kk(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:a,dataKey:l}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!li(i[e.dataKey])){var f=jB(n,"value",i[e.dataKey]);if(f)return f.coordinate+r/2}return n!=null&&n[a]?n[a].coordinate+r/2:null}var m=br(i,li(l)?e.dataKey:l),p=e.scale.map(m);return Tt(p)?p:null}var Mk=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:l}=t;if(e.type==="category")return n[l]?n[l].coordinate+r:null;var f=br(a,e.dataKey,e.scale.domain()[l]);if(li(f))return null;var m=e.scale.map(f);return Tt(m)?m-i/2+r:null},rce=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},ice=t=>{var e=t.flat(2).filter(Tt);return[Math.min(...e),Math.max(...e)]},ace=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],sce=(t,e,n)=>{if(t!=null)return ace(Object.keys(t).reduce((r,i)=>{var a=t[i];if(!a)return r;var{stackedData:l}=a,f=l.reduce((m,p)=>{var b=IF(p,e,n),_=ice(b);return!mn(_[0])||!mn(_[1])?m:[Math.min(m[0],_[0]),Math.max(m[1],_[1])]},[1/0,-1/0]);return[Math.min(f[0],r[0]),Math.max(f[1],r[1])]},[1/0,-1/0]))},jk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Lk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cm=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=ob(e,b=>b.coordinate),a=1/0,l=1,f=i.length;l<f;l++){var m=i[l],p=i[l-1];a=Math.min((m?.coordinate||0)-(p?.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function Bk(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return Th(Th({},e),{},{dataKey:n,payload:r,value:i,name:a})}function Mm(t,e){if(t)return String(t);if(typeof e=="string")return e}var oce=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},lce=(t,e)=>e==="centric"?t.angle:t.radius,Lu=t=>t.layout.width,Bu=t=>t.layout.height,uce=t=>t.layout.scale,NF=t=>t.layout.margin,yb=Re(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),vb=Re(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),RF="data-recharts-item-index",PF="data-recharts-item-id",_0=60;function Fk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fk(Object(n),!0).forEach(function(r){cce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cce(t,e,n){return(e=fce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fce(t){var e=dce(t,"string");return typeof e=="symbol"?e:e+""}function dce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hce=t=>t.brush.height;function mce(t){var e=vb(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:_0;return n+i}return n},0)}function gce(t){var e=vb(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:_0;return n+i}return n},0)}function pce(t){var e=yb(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function yce(t){var e=yb(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Ji=Re([Lu,Bu,NF,hce,mce,gce,pce,yce,QB,Gle],(t,e,n,r,i,a,l,f,m,p)=>{var b={left:(n.left||0)+i,right:(n.right||0)+a},_={top:(n.top||0)+l,bottom:(n.bottom||0)+f},T=iy(iy({},_),b),R=T.bottom;T.bottom+=r,T=Xue(T,m,p);var j=t-T.left-T.right,M=e-T.top-T.bottom;return iy(iy({brushBottom:R},T),{},{width:Math.max(j,0),height:Math.max(M,0)})}),vce=Re(Ji,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),LI=Re(Lu,Bu,(t,e)=>({x:0,y:0,width:t,height:e})),xce=D.createContext(null),Ba=()=>D.useContext(xce)!=null,xb=t=>t.brush,bb=Re([xb,Ji,NF],(t,e,n)=>({height:t.height,x:Tt(t.x)?t.x:e.left,y:Tt(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:Tt(t.width)?t.width:e.width})),nE={},rE={},iE={},Vk;function bce(){return Vk||(Vk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let l,f=null;const m=a!=null&&a.includes("leading"),p=a==null||a.includes("trailing"),b=()=>{f!==null&&(n.apply(l,f),l=void 0,f=null)},_=()=>{p&&b(),M()};let T=null;const R=()=>{T!=null&&clearTimeout(T),T=setTimeout(()=>{T=null,_()},r)},j=()=>{T!==null&&(clearTimeout(T),T=null)},M=()=>{j(),l=void 0,f=null},L=()=>{b()},z=function(...$){if(i?.aborted)return;l=this,f=$;const K=T==null;R(),m&&K&&b()};return z.schedule=R,z.cancel=M,z.flush=L,i?.addEventListener("abort",M,{once:!0}),z}t.debounce=e})(iE)),iE}var zk;function wce(){return zk||(zk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bce();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:l=!1,trailing:f=!0,maxWait:m}=a,p=Array(2);l&&(p[0]="leading"),f&&(p[1]="trailing");let b,_=null;const T=e.debounce(function(...M){b=r.apply(this,M),_=null},i,{edges:p}),R=function(...M){return m!=null&&(_===null&&(_=Date.now()),Date.now()-_>=m)?(b=r.apply(this,M),_=Date.now(),T.cancel(),T.schedule(),b):(T.apply(this,M),b)},j=()=>(T.flush(),b);return R.cancel=T.cancel,R.flush=j,R}t.debounce=n})(rE)),rE}var Uk;function _ce(){return Uk||(Uk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wce();function n(r,i=0,a={}){const{leading:l=!0,trailing:f=!0}=a;return e.debounce(r,i,{leading:l,maxWait:i,trailing:f})}t.throttle=n})(nE)),nE}var aE,qk;function Ece(){return qk||(qk=1,aE=_ce().throttle),aE}var Ace=Ece();const Sce=Pl(Ace);var zv=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=0;console.warn(n.replace(/%s/g,()=>i[l++]))}},wl={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},DF=(t,e,n)=>{var{width:r=wl.width,height:i=wl.height,aspect:a,maxHeight:l}=n,f=gd(r)?t:Number(r),m=gd(i)?e:Number(i);return a&&a>0&&(f?m=f/a:m&&(f=m*a),l&&m!=null&&m>l&&(m=l)),{calculatedWidth:f,calculatedHeight:m}},Tce={width:0,height:0,overflow:"visible"},Ice={width:0,overflowX:"visible"},Cce={height:0,overflowY:"visible"},Oce={},Nce=t=>{var{width:e,height:n}=t,r=gd(e),i=gd(n);return r&&i?Tce:r?Ice:i?Cce:Oce};function Rce(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i=wl.width,a=wl.height):i===void 0?i=r&&r>0?void 0:wl.width:a===void 0&&(a=r&&r>0?void 0:wl.height),{width:i,height:a}}function XA(){return XA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XA.apply(null,arguments)}function Gk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gk(Object(n),!0).forEach(function(r){Pce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pce(t,e,n){return(e=Dce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dce(t){var e=kce(t,"string");return typeof e=="symbol"?e:e+""}function kce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kF=D.createContext(wl.initialDimension);function Mce(t){return Nl(t.width)&&Nl(t.height)}function MF(t){var{children:e,width:n,height:r}=t,i=D.useMemo(()=>({width:n,height:r}),[n,r]);return Mce(i)?D.createElement(kF.Provider,{value:i},e):null}var BI=()=>D.useContext(kF),jce=D.forwardRef((t,e)=>{var{aspect:n,initialDimension:r=wl.initialDimension,width:i,height:a,minWidth:l=wl.minWidth,minHeight:f,maxHeight:m,children:p,debounce:b=wl.debounce,id:_,className:T,onResize:R,style:j={}}=t,M=D.useRef(null),L=D.useRef();L.current=R,D.useImperativeHandle(e,()=>M.current);var[z,$]=D.useState({containerWidth:r.width,containerHeight:r.height}),K=D.useCallback((W,U)=>{$(ae=>{var ie=Math.round(W),Q=Math.round(U);return ae.containerWidth===ie&&ae.containerHeight===Q?ae:{containerWidth:ie,containerHeight:Q}})},[]);D.useEffect(()=>{if(M.current==null||typeof ResizeObserver>"u")return Nd;var W=Q=>{var ne,be=Q[0];if(be!=null){var{width:he,height:ye}=be.contentRect;K(he,ye),(ne=L.current)===null||ne===void 0||ne.call(L,he,ye)}};b>0&&(W=Sce(W,b,{trailing:!0,leading:!1}));var U=new ResizeObserver(W),{width:ae,height:ie}=M.current.getBoundingClientRect();return K(ae,ie),U.observe(M.current),()=>{U.disconnect()}},[K,b]);var{containerWidth:J,containerHeight:ce}=z;zv(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:Z,calculatedHeight:V}=DF(J,ce,{width:i,height:a,aspect:n,maxHeight:m});return zv(Z!=null&&Z>0||V!=null&&V>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Z,V,i,a,l,f,n),D.createElement("div",{id:_?"".concat(_):void 0,className:Hn("recharts-responsive-container",T),style:Hk(Hk({},j),{},{width:i,height:a,minWidth:l,minHeight:f,maxHeight:m}),ref:M},D.createElement("div",{style:Nce({width:i,height:a})},D.createElement(MF,{width:Z,height:V},p)))}),ay=D.forwardRef((t,e)=>{var n=BI();if(Nl(n.width)&&Nl(n.height))return t.children;var{width:r,height:i}=Rce({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:l}=DF(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Tt(a)&&Tt(l)?D.createElement(MF,{width:a,height:l},t.children):D.createElement(jce,XA({},t,{width:r,height:i,ref:e}))});function FI(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var E0=()=>{var t,e=Ba(),n=It(vce),r=It(bb),i=(t=It(xb))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},Lce={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},jF=()=>{var t;return(t=It(Ji))!==null&&t!==void 0?t:Lce},LF=()=>It(Lu),BF=()=>It(Bu),Wn=t=>t.layout.layoutType,Rd=()=>It(Wn),FF=()=>{var t=Rd();if(t==="horizontal"||t==="vertical")return t},VF=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},Bce=()=>{var t=Rd();return t!==void 0},A0=t=>{var e=Gr(),n=Ba(),{width:r,height:i}=t,a=BI(),l=r,f=i;return a&&(l=a.width>0?a.width:r,f=a.height>0?a.height:i),D.useEffect(()=>{!n&&Nl(l)&&Nl(f)&&e(Gue({width:l,height:f}))},[e,n,l,f]),null},zF=Symbol.for("immer-nothing"),Kk=Symbol.for("immer-draftable"),oo=Symbol.for("immer-state");function zo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var kp=Object.getPrototypeOf;function fm(t){return!!t&&!!t[oo]}function yd(t){return t?UF(t)||Array.isArray(t)||!!t[Kk]||!!t.constructor?.[Kk]||S0(t)||_b(t):!1}var Fce=Object.prototype.constructor.toString(),Wk=new WeakMap;function UF(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=Wk.get(n);return r===void 0&&(r=Function.toString.call(n),Wk.set(n,r)),r===Fce}function Uv(t,e,n=!0){wb(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function wb(t){const e=t[oo];return e?e.type_:Array.isArray(t)?1:S0(t)?2:_b(t)?3:0}function QA(t,e){return wb(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function qF(t,e,n){const r=wb(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Vce(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function S0(t){return t instanceof Map}function _b(t){return t instanceof Set}function Df(t){return t.copy_||t.base_}function ZA(t,e){if(S0(t))return new Map(t);if(_b(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=UF(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[oo];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const l=i[a],f=r[l];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(r[l]={configurable:!0,writable:!0,enumerable:f.enumerable,value:t[l]})}return Object.create(kp(t),r)}else{const r=kp(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function VI(t,e=!1){return Eb(t)||fm(t)||!yd(t)||(wb(t)>1&&Object.defineProperties(t,{set:sy,add:sy,clear:sy,delete:sy}),Object.freeze(t),e&&Object.values(t).forEach(n=>VI(n,!0))),t}function zce(){zo(2)}var sy={value:zce};function Eb(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var Uce={};function vd(t){const e=Uce[t];return e||zo(0,t),e}var Mp;function GF(){return Mp}function qce(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function $k(t,e){e&&(vd("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function JA(t){eS(t),t.drafts_.forEach(Gce),t.drafts_=null}function eS(t){t===Mp&&(Mp=t.parent_)}function Yk(t){return Mp=qce(Mp,t)}function Gce(t){const e=t[oo];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Xk(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[oo].modified_&&(JA(e),zo(4)),yd(t)&&(t=qv(e,t),e.parent_||Gv(e,t)),e.patches_&&vd("Patches").generateReplacementPatches_(n[oo].base_,t,e.patches_,e.inversePatches_)):t=qv(e,n,[]),JA(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==zF?t:void 0}function qv(t,e,n){if(Eb(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[oo];if(!i)return Uv(e,(a,l)=>Qk(t,i,e,a,l,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return Gv(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let l=a,f=!1;i.type_===3&&(l=new Set(a),a.clear(),f=!0),Uv(l,(m,p)=>Qk(t,i,a,m,p,n,f),r),Gv(t,a,!1),n&&t.patches_&&vd("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function Qk(t,e,n,r,i,a,l){if(i==null||typeof i!="object"&&!l)return;const f=Eb(i);if(!(f&&!l)){if(fm(i)){const m=a&&e&&e.type_!==3&&!QA(e.assigned_,r)?a.concat(r):void 0,p=qv(t,i,m);if(qF(n,r,p),fm(p))t.canAutoFreeze_=!1;else return}else l&&n.add(i);if(yd(i)&&!f){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&f)return;qv(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(S0(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Gv(t,i)}}}function Gv(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&VI(e,n)}function Hce(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:GF(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=zI;n&&(i=[r],a=jp);const{revoke:l,proxy:f}=Proxy.revocable(i,a);return r.draft_=f,r.revoke_=l,f}var zI={get(t,e){if(e===oo)return t;const n=Df(t);if(!QA(n,e))return Kce(t,n,e);const r=n[e];return t.finalized_||!yd(r)?r:r===sE(t.base_,e)?(oE(t),t.copy_[e]=nS(r,t)):r},has(t,e){return e in Df(t)},ownKeys(t){return Reflect.ownKeys(Df(t))},set(t,e,n){const r=HF(Df(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=sE(Df(t),e),a=i?.[oo];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Vce(n,i)&&(n!==void 0||QA(t.base_,e)))return!0;oE(t),tS(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return sE(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,oE(t),tS(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Df(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){zo(11)},getPrototypeOf(t){return kp(t.base_)},setPrototypeOf(){zo(12)}},jp={};Uv(zI,(t,e)=>{jp[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});jp.deleteProperty=function(t,e){return jp.set.call(this,t,e,void 0)};jp.set=function(t,e,n){return zI.set.call(this,t[0],e,n,t[0])};function sE(t,e){const n=t[oo];return(n?Df(n):t)[e]}function Kce(t,e,n){const r=HF(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function HF(t,e){if(!(e in t))return;let n=kp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=kp(n)}}function tS(t){t.modified_||(t.modified_=!0,t.parent_&&tS(t.parent_))}function oE(t){t.copy_||(t.copy_=ZA(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Wce=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const l=this;return function(m=a,...p){return l.produce(m,b=>n.call(this,b,...p))}}typeof n!="function"&&zo(6),r!==void 0&&typeof r!="function"&&zo(7);let i;if(yd(e)){const a=Yk(this),l=nS(e,void 0);let f=!0;try{i=n(l),f=!1}finally{f?JA(a):eS(a)}return $k(a,r),Xk(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===zF&&(i=void 0),this.autoFreeze_&&VI(i,!0),r){const a=[],l=[];vd("Patches").generateReplacementPatches_(e,i,a,l),r(a,l)}return i}else zo(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(l,...f)=>this.produceWithPatches(l,m=>e(m,...f));let r,i;return[this.produce(e,n,(l,f)=>{r=l,i=f}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){yd(t)||zo(8),fm(t)&&(t=$ce(t));const e=Yk(this),n=nS(t,void 0);return n[oo].isManual_=!0,eS(e),n}finishDraft(t,e){const n=t&&t[oo];(!n||!n.isManual_)&&zo(9);const{scope_:r}=n;return $k(r,e),Xk(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=vd("Patches").applyPatches_;return fm(t)?r(t,e):this.produce(t,i=>r(i,e))}};function nS(t,e){const n=S0(t)?vd("MapSet").proxyMap_(t,e):_b(t)?vd("MapSet").proxySet_(t,e):Hce(t,e);return(e?e.scope_:GF()).drafts_.push(n),n}function $ce(t){return fm(t)||zo(10,t),KF(t)}function KF(t){if(!yd(t)||Eb(t))return t;const e=t[oo];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=ZA(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=ZA(t,!0);return Uv(n,(i,a)=>{qF(n,i,KF(a))},r),e&&(e.finalized_=!1),n}var Yce=new Wce;Yce.produce;var Xce={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},WF=Vs({name:"legend",initialState:Xce,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Qr()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Wo(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Qr()},removeLegendPayload:{reducer(t,e){var n=Wo(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Qr()}}}),{setLegendSize:BEe,setLegendSettings:FEe,addLegendPayload:$F,replaceLegendPayload:YF,removeLegendPayload:XF}=WF.actions,Qce=WF.reducer;function rS(){return rS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rS.apply(null,arguments)}function Zk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zk(Object(n),!0).forEach(function(r){Zce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zce(t,e,n){return(e=Jce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jce(t){var e=efe(t,"string");return typeof e=="symbol"?e:e+""}function efe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tfe(t){return Array.isArray(t)&&Io(t[0])&&Io(t[1])?t.join(" ~ "):t}var mh={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},nfe=t=>{var{separator:e=mh.separator,contentStyle:n,itemStyle:r,labelStyle:i=mh.labelStyle,payload:a,formatter:l,itemSorter:f,wrapperClassName:m,labelClassName:p,label:b,labelFormatter:_,accessibilityLayer:T=mh.accessibilityLayer}=t,R=()=>{if(a&&a.length){var ce={padding:0,margin:0},Z=(f?ob(a,f):a).map((V,W)=>{if(V.type==="none")return null;var U=V.formatter||l||tfe,{value:ae,name:ie}=V,Q=ae,ne=ie;if(U){var be=U(ae,ie,V,W,a);if(Array.isArray(be))[Q,ne]=be;else if(be!=null)Q=be;else return null}var he=Dg(Dg({},mh.itemStyle),{},{color:V.color||mh.itemStyle.color},r);return D.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:he},Io(ne)?D.createElement("span",{className:"recharts-tooltip-item-name"},ne):null,Io(ne)?D.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,D.createElement("span",{className:"recharts-tooltip-item-value"},Q),D.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return D.createElement("ul",{className:"recharts-tooltip-item-list",style:ce},Z)}return null},j=Dg(Dg({},mh.contentStyle),n),M=Dg({margin:0},i),L=!li(b),z=L?b:"",$=Hn("recharts-default-tooltip",m),K=Hn("recharts-tooltip-label",p);L&&_&&a!==void 0&&a!==null&&(z=_(b,a));var J=T?{role:"status","aria-live":"assertive"}:{};return D.createElement("div",rS({className:$,style:j},J),D.createElement("p",{className:K,style:M},D.isValidElement(z)?z:"".concat(z)),R())},kg="recharts-tooltip-wrapper",rfe={visibility:"hidden"};function ife(t){var{coordinate:e,translateX:n,translateY:r}=t;return Hn(kg,{["".concat(kg,"-right")]:Tt(n)&&e&&Tt(e.x)&&n>=e.x,["".concat(kg,"-left")]:Tt(n)&&e&&Tt(e.x)&&n<e.x,["".concat(kg,"-bottom")]:Tt(r)&&e&&Tt(e.y)&&r>=e.y,["".concat(kg,"-top")]:Tt(r)&&e&&Tt(e.y)&&r<e.y})}function Jk(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offset:i,position:a,reverseDirection:l,tooltipDimension:f,viewBox:m,viewBoxDimension:p}=t;if(a&&Tt(a[r]))return a[r];var b=n[r]-f-(i>0?i:0),_=n[r]+i;if(e[r])return l[r]?b:_;var T=m[r];if(T==null)return 0;if(l[r]){var R=b,j=T;return R<j?Math.max(_,T):Math.max(b,T)}if(p==null)return 0;var M=_+f,L=T+p;return M>L?Math.max(b,T):Math.max(_,T)}function afe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function sfe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTop:r,offsetLeft:i,position:a,reverseDirection:l,tooltipBox:f,useTranslate3d:m,viewBox:p}=t,b,_,T;return f.height>0&&f.width>0&&n?(_=Jk({allowEscapeViewBox:e,coordinate:n,key:"x",offset:i,position:a,reverseDirection:l,tooltipDimension:f.width,viewBox:p,viewBoxDimension:p.width}),T=Jk({allowEscapeViewBox:e,coordinate:n,key:"y",offset:r,position:a,reverseDirection:l,tooltipDimension:f.height,viewBox:p,viewBoxDimension:p.height}),b=afe({translateX:_,translateY:T,useTranslate3d:m})):b=rfe,{cssProperties:b,cssClasses:ife({translateX:_,translateY:T,coordinate:n})}}function eM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eM(Object(n),!0).forEach(function(r){iS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iS(t,e,n){return(e=ofe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ofe(t){var e=lfe(t,"string");return typeof e=="symbol"?e:e+""}function lfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class ufe extends D.PureComponent{constructor(){super(...arguments),iS(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),iS(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:l,hasPayload:f,isAnimationActive:m,offset:p,position:b,reverseDirection:_,useTranslate3d:T,viewBox:R,wrapperStyle:j,lastBoundingBox:M,innerRef:L,hasPortalFromProps:z}=this.props,$=typeof p=="number"?p:p.x,K=typeof p=="number"?p:p.y,{cssClasses:J,cssProperties:ce}=sfe({allowEscapeViewBox:n,coordinate:l,offsetLeft:$,offsetTop:K,position:b,reverseDirection:_,tooltipBox:{height:M.height,width:M.width},useTranslate3d:T,viewBox:R}),Z=z?{}:oy(oy({transition:m&&e?"transform ".concat(r,"ms ").concat(i):void 0},ce),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&f?"visible":"hidden",position:"absolute",top:0,left:0}),V=oy(oy({},Z),{},{visibility:!this.state.dismissed&&e&&f?"visible":"hidden"},j);return D.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:J,style:V,ref:L},a)}}var QF=()=>{var t;return(t=It(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function aS(){return aS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aS.apply(null,arguments)}function tM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tM(Object(n),!0).forEach(function(r){cfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cfe(t,e,n){return(e=ffe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ffe(t){var e=dfe(t,"string");return typeof e=="symbol"?e:e+""}function dfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rM={curveBasisClosed:poe,curveBasisOpen:yoe,curveBasis:goe,curveBumpX:toe,curveBumpY:noe,curveLinearClosed:voe,curveLinear:ib,curveMonotoneX:xoe,curveMonotoneY:boe,curveNatural:woe,curveStep:_oe,curveStepAfter:Aoe,curveStepBefore:Eoe},Hv=t=>mn(t.x)&&mn(t.y),iM=t=>t.base!=null&&Hv(t.base)&&Hv(t),Mg=t=>t.x,jg=t=>t.y,hfe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(x0(t));if((n==="curveMonotone"||n==="curveBump")&&e){var r=rM["".concat(n).concat(e==="vertical"?"Y":"X")];if(r)return r}return rM[n]||ib},aM={connectNulls:!1,type:"linear"},mfe=t=>{var{type:e=aM.type,points:n=[],baseLine:r,layout:i,connectNulls:a=aM.connectNulls}=t,l=hfe(e,i),f=a?n.filter(Hv):n;if(Array.isArray(r)){var m,p=n.map((j,M)=>nM(nM({},j),{},{base:r[M]}));i==="vertical"?m=Z1().y(jg).x1(Mg).x0(j=>j.base.x):m=Z1().x(Mg).y1(jg).y0(j=>j.base.y);var b=m.defined(iM).curve(l),_=a?p.filter(iM):p;return b(_)}var T;i==="vertical"&&Tt(r)?T=Z1().y(jg).x1(Mg).x0(r):Tt(r)?T=Z1().x(Mg).y1(jg).y0(r):T=EB().x(Mg).y(jg);var R=T.defined(Hv).curve(l);return R(f)},UI=t=>{var{className:e,points:n,path:r,pathRef:i}=t,a=Rd();if((!n||!n.length)&&!r)return null;var l={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},f=n&&n.length?mfe(l):r;return D.createElement("path",aS({},so(t),II(t),{className:Hn("recharts-curve",e),d:f===null?void 0:f,ref:i}))},gfe=["x","y","top","left","width","height","className"];function sS(){return sS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sS.apply(null,arguments)}function sM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pfe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sM(Object(n),!0).forEach(function(r){yfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yfe(t,e,n){return(e=vfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vfe(t){var e=xfe(t,"string");return typeof e=="symbol"?e:e+""}function xfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bfe(t,e){if(t==null)return{};var n,r,i=wfe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function wfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _fe=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),Efe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:l=0,className:f}=t,m=bfe(t,gfe),p=pfe({x:e,y:n,top:r,left:i,width:a,height:l},m);return!Tt(e)||!Tt(n)||!Tt(a)||!Tt(l)||!Tt(r)||!Tt(i)?null:D.createElement("path",sS({},as(p),{className:Hn("recharts-cross",f),d:_fe(e,n,a,l,r,i)}))};function Afe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function oM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oM(Object(n),!0).forEach(function(r){Sfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sfe(t,e,n){return(e=Tfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tfe(t){var e=Ife(t,"string");return typeof e=="symbol"?e:e+""}function Ife(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cfe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),ZF=(t,e,n)=>t.map(r=>"".concat(Cfe(r)," ").concat(e,"ms ").concat(n)).join(","),Ofe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Lp=(t,e)=>Object.keys(e).reduce((n,r)=>lM(lM({},n),{},{[r]:t(r,e[r])}),{});function uM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uM(Object(n),!0).forEach(function(r){Nfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nfe(t,e,n){return(e=Rfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rfe(t){var e=Pfe(t,"string");return typeof e=="symbol"?e:e+""}function Pfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kv=(t,e,n)=>t+(e-t)*n,oS=t=>{var{from:e,to:n}=t;return e!==n},JF=(t,e,n)=>{var r=Lp((i,a)=>{if(oS(a)){var[l,f]=t(a.from,a.to,a.velocity);return Wi(Wi({},a),{},{from:l,velocity:f})}return a},e);return n<1?Lp((i,a)=>oS(a)&&r[i]!=null?Wi(Wi({},a),{},{velocity:Kv(a.velocity,r[i].velocity,n),from:Kv(a.from,r[i].from,n)}):a,e):JF(t,r,n-1)};function Dfe(t,e,n,r,i,a){var l,f=r.reduce((T,R)=>Wi(Wi({},T),{},{[R]:{from:t[R],velocity:0,to:e[R]}}),{}),m=()=>Lp((T,R)=>R.from,f),p=()=>!Object.values(f).filter(oS).length,b=null,_=T=>{l||(l=T);var R=T-l,j=R/n.dt;f=JF(n,f,j),i(Wi(Wi(Wi({},t),e),m())),l=T,p()||(b=a.setTimeout(_))};return()=>(b=a.setTimeout(_),()=>{var T;(T=b)===null||T===void 0||T()})}function kfe(t,e,n,r,i,a,l){var f=null,m=i.reduce((_,T)=>{var R=t[T],j=e[T];return R==null||j==null?_:Wi(Wi({},_),{},{[T]:[R,j]})},{}),p,b=_=>{p||(p=_);var T=(_-p)/r,R=Lp((M,L)=>Kv(...L,n(T)),m);if(a(Wi(Wi(Wi({},t),e),R)),T<1)f=l.setTimeout(b);else{var j=Lp((M,L)=>Kv(...L,n(1)),m);a(Wi(Wi(Wi({},t),e),j))}};return()=>(f=l.setTimeout(b),()=>{var _;(_=f)===null||_===void 0||_()})}const Mfe=(t,e,n,r,i,a)=>{var l=Ofe(t,e);return n==null?()=>(i(Wi(Wi({},t),e)),()=>{}):n.isStepper===!0?Dfe(t,e,n,l,i,a):kfe(t,e,n,r,l,i,a)};var Wv=1e-4,eV=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],tV=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),cM=(t,e)=>n=>{var r=eV(t,e);return tV(r,n)},jfe=(t,e)=>n=>{var r=eV(t,e),i=[...r.map((a,l)=>a*l).slice(1),0];return tV(i,n)},Lfe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},Bfe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=Lfe(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},Ffe=(t,e,n,r)=>{var i=cM(t,n),a=cM(e,r),l=jfe(t,n),f=p=>p>1?1:p<0?0:p,m=p=>{for(var b=p>1?1:p,_=b,T=0;T<8;++T){var R=i(_)-b,j=l(_);if(Math.abs(R-b)<Wv||j<Wv)return a(_);_=f(_-R/j)}return a(_)};return m.isStepper=!1,m},fM=function(){return Ffe(...Bfe(...arguments))},Vfe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(l,f,m)=>{var p=-(l-f)*n,b=m*r,_=m+(p-b)*i/1e3,T=m*i/1e3+l;return Math.abs(T-f)<Wv&&Math.abs(_)<Wv?[f,0]:[T,_]};return a.isStepper=!0,a.dt=i,a},zfe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return fM(t);case"spring":return Vfe();default:if(t.split("(")[0]==="cubic-bezier")return fM(t)}return typeof t=="function"?t:null};function Ufe(t){var e,n=()=>null,r=!1,i=null,a=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var f=l,[m,...p]=f;if(typeof m=="number"){i=t.setTimeout(a.bind(null,p),m);return}a(m),i=t.setTimeout(a.bind(null,p));return}typeof l=="string"&&(e=l,n(e)),typeof l=="object"&&(e=l,n(e)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),a(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>t}}class qfe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=l=>{l-r>=n?e(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function Gfe(){return Ufe(new qfe)}var Hfe=D.createContext(Gfe);function Kfe(t,e){var n=D.useContext(Hfe);return D.useMemo(()=>e??n(t),[t,e,n])}var Wfe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ab={isSsr:Wfe()},$fe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},dM={t:0},lE={t:1};function T0(t){var e=Zi(t,$fe),{isActive:n,canBegin:r,duration:i,easing:a,begin:l,onAnimationEnd:f,onAnimationStart:m,children:p}=e,b=n==="auto"?!Ab.isSsr:n,_=Kfe(e.animationId,e.animationManager),[T,R]=D.useState(b?dM:lE),j=D.useRef(null);return D.useEffect(()=>{b||R(lE)},[b]),D.useEffect(()=>{if(!b||!r)return Nd;var M=Mfe(dM,lE,zfe(a),i,R,_.getTimeoutController()),L=()=>{j.current=M()};return _.start([m,l,L,i,f]),()=>{_.stop(),j.current&&j.current(),f()}},[b,r,i,a,l,m,f,_]),p(T.t)}function I0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=D.useRef(Np(e)),r=D.useRef(t);return r.current!==t&&(n.current=Np(e),r.current=t),n.current}var Yfe=["radius"],Xfe=["radius"],hM,mM,gM,pM,yM,vM,xM,bM,wM,_M;function EM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EM(Object(n),!0).forEach(function(r){Qfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qfe(t,e,n){return(e=Zfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zfe(t){var e=Jfe(t,"string");return typeof e=="symbol"?e:e+""}function Jfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $v(){return $v=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$v.apply(null,arguments)}function SM(t,e){if(t==null)return{};var n,r,i=ede(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ede(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function fl(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var TM=(t,e,n,r,i)=>{var a=Rc(n),l=Rc(r),f=Math.min(Math.abs(a)/2,Math.abs(l)/2),m=l>=0?1:-1,p=a>=0?1:-1,b=l>=0&&a>=0||l<0&&a<0?1:0,_;if(f>0&&Array.isArray(i)){for(var T=[0,0,0,0],R=0,j=4;R<j;R++){var M,L=(M=i[R])!==null&&M!==void 0?M:0;T[R]=L>f?f:L}_=yi(hM||(hM=fl(["M",",",""])),t,e+m*T[0]),T[0]>0&&(_+=yi(mM||(mM=fl(["A ",",",",0,0,",",",",",""])),T[0],T[0],b,t+p*T[0],e)),_+=yi(gM||(gM=fl(["L ",",",""])),t+n-p*T[1],e),T[1]>0&&(_+=yi(pM||(pM=fl(["A ",",",",0,0,",`,
        `,",",""])),T[1],T[1],b,t+n,e+m*T[1])),_+=yi(yM||(yM=fl(["L ",",",""])),t+n,e+r-m*T[2]),T[2]>0&&(_+=yi(vM||(vM=fl(["A ",",",",0,0,",`,
        `,",",""])),T[2],T[2],b,t+n-p*T[2],e+r)),_+=yi(xM||(xM=fl(["L ",",",""])),t+p*T[3],e+r),T[3]>0&&(_+=yi(bM||(bM=fl(["A ",",",",0,0,",`,
        `,",",""])),T[3],T[3],b,t,e+r-m*T[3])),_+="Z"}else if(f>0&&i===+i&&i>0){var z=Math.min(f,i);_=yi(wM||(wM=fl(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+m*z,z,z,b,t+p*z,e,t+n-p*z,e,z,z,b,t+n,e+m*z,t+n,e+r-m*z,z,z,b,t+n-p*z,e+r,t+p*z,e+r,z,z,b,t,e+r-m*z)}else _=yi(_M||(_M=fl(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return _},IM={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},nV=t=>{var e=Zi(t,IM),n=D.useRef(null),[r,i]=D.useState(-1);D.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var we=n.current.getTotalLength();we&&i(we)}catch{}},[]);var{x:a,y:l,width:f,height:m,radius:p,className:b}=e,{animationEasing:_,animationDuration:T,animationBegin:R,isAnimationActive:j,isUpdateAnimationActive:M}=e,L=D.useRef(f),z=D.useRef(m),$=D.useRef(a),K=D.useRef(l),J=D.useMemo(()=>({x:a,y:l,width:f,height:m,radius:p}),[a,l,f,m,p]),ce=I0(J,"rectangle-");if(a!==+a||l!==+l||f!==+f||m!==+m||f===0||m===0)return null;var Z=Hn("recharts-rectangle",b);if(!M){var V=as(e),{radius:W}=V,U=SM(V,Yfe);return D.createElement("path",$v({},U,{x:Rc(a),y:Rc(l),width:Rc(f),height:Rc(m),radius:typeof p=="number"?p:void 0,className:Z,d:TM(a,l,f,m,p)}))}var ae=L.current,ie=z.current,Q=$.current,ne=K.current,be="0px ".concat(r===-1?1:r,"px"),he="".concat(r,"px 0px"),ye=ZF(["strokeDasharray"],T,typeof _=="string"?_:IM.animationEasing);return D.createElement(T0,{animationId:ce,key:ce,canBegin:r>0,duration:T,easing:_,isActive:M,begin:R},we=>{var $e=Jr(ae,f,we),et=Jr(ie,m,we),rt=Jr(Q,a,we),de=Jr(ne,l,we);n.current&&(L.current=$e,z.current=et,$.current=rt,K.current=de);var Ee;j?we>0?Ee={transition:ye,strokeDasharray:he}:Ee={strokeDasharray:be}:Ee={strokeDasharray:he};var Xe=as(e),{radius:Ge}=Xe,vt=SM(Xe,Xfe);return D.createElement("path",$v({},vt,{radius:typeof p=="number"?p:void 0,className:Z,d:TM(rt,de,$e,et,p),ref:n,style:AM(AM({},Ee),e.style)}))})};function CM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CM(Object(n),!0).forEach(function(r){tde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tde(t,e,n){return(e=nde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nde(t){var e=rde(t,"string");return typeof e=="symbol"?e:e+""}function rde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yv=Math.PI/180,ide=t=>t*180/Math.PI,zi=(t,e,n,r)=>({x:t+Math.cos(-Yv*r)*n,y:e+Math.sin(-Yv*r)*n}),rV=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},ade=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},sde=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,l=ade({x:n,y:r},{x:i,y:a});if(l<=0)return{radius:l,angle:0};var f=(n-i)/l,m=Math.acos(f);return r>a&&(m=2*Math.PI-m),{radius:l,angle:ide(m),angleInRadian:m}},ode=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},lde=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),l=Math.min(i,a);return t+l*360},ude=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=sde({x:n,y:r},e),{innerRadius:l,outerRadius:f}=e;if(i<l||i>f||i===0)return null;var{startAngle:m,endAngle:p}=ode(e),b=a,_;if(m<=p){for(;b>p;)b-=360;for(;b<m;)b+=360;_=b>=m&&b<=p}else{for(;b>m;)b-=360;for(;b<p;)b+=360;_=b>=p&&b<=m}return _?OM(OM({},e),{},{radius:i,angle:lde(b,e)}):null};function iV(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,l=zi(e,n,r,i),f=zi(e,n,r,a);return{points:[l,f],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}var NM,RM,PM,DM,kM,MM,jM;function lS(){return lS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lS.apply(null,arguments)}function zf(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var cde=(t,e)=>{var n=pa(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},ly=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:l,cornerRadius:f,cornerIsExternal:m}=t,p=f*(l?1:-1)+r,b=Math.asin(f/p)/Yv,_=m?i:i+a*b,T=zi(e,n,p,_),R=zi(e,n,r,_),j=m?i-a*b:i,M=zi(e,n,p*Math.cos(b*Yv),j);return{center:T,circleTangency:R,lineTangency:M,theta:b}},aV=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:l}=t,f=cde(a,l),m=a+f,p=zi(e,n,i,a),b=zi(e,n,i,m),_=yi(NM||(NM=zf(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),p.x,p.y,i,i,+(Math.abs(f)>180),+(a>m),b.x,b.y);if(r>0){var T=zi(e,n,r,a),R=zi(e,n,r,m);_+=yi(RM||(RM=zf(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),R.x,R.y,r,r,+(Math.abs(f)>180),+(a<=m),T.x,T.y)}else _+=yi(PM||(PM=zf(["L ",","," Z"])),e,n);return _},fde=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:f,startAngle:m,endAngle:p}=t,b=pa(p-m),{circleTangency:_,lineTangency:T,theta:R}=ly({cx:e,cy:n,radius:i,angle:m,sign:b,cornerRadius:a,cornerIsExternal:f}),{circleTangency:j,lineTangency:M,theta:L}=ly({cx:e,cy:n,radius:i,angle:p,sign:-b,cornerRadius:a,cornerIsExternal:f}),z=f?Math.abs(m-p):Math.abs(m-p)-R-L;if(z<0)return l?yi(DM||(DM=zf(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),T.x,T.y,a,a,a*2,a,a,-a*2):aV({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:m,endAngle:p});var $=yi(kM||(kM=zf(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),T.x,T.y,a,a,+(b<0),_.x,_.y,i,i,+(z>180),+(b<0),j.x,j.y,a,a,+(b<0),M.x,M.y);if(r>0){var{circleTangency:K,lineTangency:J,theta:ce}=ly({cx:e,cy:n,radius:r,angle:m,sign:b,isExternal:!0,cornerRadius:a,cornerIsExternal:f}),{circleTangency:Z,lineTangency:V,theta:W}=ly({cx:e,cy:n,radius:r,angle:p,sign:-b,isExternal:!0,cornerRadius:a,cornerIsExternal:f}),U=f?Math.abs(m-p):Math.abs(m-p)-ce-W;if(U<0&&a===0)return"".concat($,"L").concat(e,",").concat(n,"Z");$+=yi(MM||(MM=zf(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),V.x,V.y,a,a,+(b<0),Z.x,Z.y,r,r,+(U>180),+(b>0),K.x,K.y,a,a,+(b<0),J.x,J.y)}else $+=yi(jM||(jM=zf(["L",",","Z"])),e,n);return $},dde={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},sV=t=>{var e=Zi(t,dde),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:l,forceCornerRadius:f,cornerIsExternal:m,startAngle:p,endAngle:b,className:_}=e;if(a<i||p===b)return null;var T=Hn("recharts-sector",_),R=a-i,j=is(l,R,0,!0),M;return j>0&&Math.abs(p-b)<360?M=fde({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(j,R/2),forceCornerRadius:f,cornerIsExternal:m,startAngle:p,endAngle:b}):M=aV({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:p,endAngle:b}),D.createElement("path",lS({},as(e),{className:T,d:M}))};function hde(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(FB(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:l,angle:f}=e,m=zi(r,i,a,f),p=zi(r,i,l,f);return[{x:m.x,y:m.y},{x:p.x,y:p.y}]}return iV(e)}}var uE={},cE={},fE={},LM;function mde(){return LM||(LM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YB();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(fE)),fE}var BM;function gde(){return BM||(BM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mde();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(cE)),cE}var FM;function pde(){return FM||(FM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XB(),n=gde();function r(i,a,l){l&&typeof l!="number"&&e.isIterateeCall(i,a,l)&&(a=l=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),l=l===void 0?i<a?1:-1:n.toFinite(l);const f=Math.max(Math.ceil((a-i)/(l||1)),0),m=new Array(f);for(let p=0;p<f;p++)m[p]=i,i+=l;return m}t.range=r})(uE)),uE}var dE,VM;function yde(){return VM||(VM=1,dE=pde().range),dE}var vde=yde();const oV=Pl(vde);function Fc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xde(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qI(t){let e,n,r;t.length!==2?(e=Fc,n=(f,m)=>Fc(t(f),m),r=(f,m)=>t(f)-m):(e=t===Fc||t===xde?t:bde,n=t,r=t);function i(f,m,p=0,b=f.length){if(p<b){if(e(m,m)!==0)return b;do{const _=p+b>>>1;n(f[_],m)<0?p=_+1:b=_}while(p<b)}return p}function a(f,m,p=0,b=f.length){if(p<b){if(e(m,m)!==0)return b;do{const _=p+b>>>1;n(f[_],m)<=0?p=_+1:b=_}while(p<b)}return p}function l(f,m,p=0,b=f.length){const _=i(f,m,p,b-1);return _>p&&r(f[_-1],m)>-r(f[_],m)?_-1:_}return{left:i,center:l,right:a}}function bde(){return 0}function lV(t){return t===null?NaN:+t}function*wde(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const _de=qI(Fc),C0=_de.right;qI(lV).center;class zM extends Map{constructor(e,n=Sde){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(UM(this,e))}has(e){return super.has(UM(this,e))}set(e,n){return super.set(Ede(this,e),n)}delete(e){return super.delete(Ade(this,e))}}function UM({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Ede({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Ade({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Sde(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Tde(t=Fc){if(t===Fc)return uV;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function uV(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Ide=Math.sqrt(50),Cde=Math.sqrt(10),Ode=Math.sqrt(2);function Xv(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),l=a>=Ide?10:a>=Cde?5:a>=Ode?2:1;let f,m,p;return i<0?(p=Math.pow(10,-i)/l,f=Math.round(t*p),m=Math.round(e*p),f/p<t&&++f,m/p>e&&--m,p=-p):(p=Math.pow(10,i)*l,f=Math.round(t/p),m=Math.round(e/p),f*p<t&&++f,m*p>e&&--m),m<f&&.5<=n&&n<2?Xv(t,e,n*2):[f,m,p]}function uS(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,l]=r?Xv(e,t,n):Xv(t,e,n);if(!(a>=i))return[];const f=a-i+1,m=new Array(f);if(r)if(l<0)for(let p=0;p<f;++p)m[p]=(a-p)/-l;else for(let p=0;p<f;++p)m[p]=(a-p)*l;else if(l<0)for(let p=0;p<f;++p)m[p]=(i+p)/-l;else for(let p=0;p<f;++p)m[p]=(i+p)*l;return m}function cS(t,e,n){return e=+e,t=+t,n=+n,Xv(t,e,n)[2]}function fS(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?cS(e,t,n):cS(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function qM(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function GM(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function cV(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?uV:Tde(i);r>n;){if(r-n>600){const m=r-n+1,p=e-n+1,b=Math.log(m),_=.5*Math.exp(2*b/3),T=.5*Math.sqrt(b*_*(m-_)/m)*(p-m/2<0?-1:1),R=Math.max(n,Math.floor(e-p*_/m+T)),j=Math.min(r,Math.floor(e+(m-p)*_/m+T));cV(t,e,R,j,i)}const a=t[e];let l=n,f=r;for(Lg(t,n,e),i(t[r],a)>0&&Lg(t,n,r);l<f;){for(Lg(t,l,f),++l,--f;i(t[l],a)<0;)++l;for(;i(t[f],a)>0;)--f}i(t[n],a)===0?Lg(t,n,f):(++f,Lg(t,f,r)),f<=e&&(n=f+1),e<=f&&(r=f-1)}return t}function Lg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Nde(t,e,n){if(t=Float64Array.from(wde(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return GM(t);if(e>=1)return qM(t);var r,i=(r-1)*e,a=Math.floor(i),l=qM(cV(t,a).subarray(0,a+1)),f=GM(t.subarray(a+1));return l+(f-l)*(i-a)}}function Rde(t,e,n=lV){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),l=+n(t[a],a,t),f=+n(t[a+1],a+1,t);return l+(f-l)*(i-a)}}function Pde(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Ro(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Fu(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const dS=Symbol("implicit");function GI(){var t=new zM,e=[],n=[],r=dS;function i(a){let l=t.get(a);if(l===void 0){if(r!==dS)return r;t.set(a,l=e.push(a)-1)}return n[l%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new zM;for(const l of a)t.has(l)||t.set(l,e.push(l)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return GI(e,n).unknown(r)},Ro.apply(i,arguments),i}function HI(){var t=GI().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,l,f=!1,m=0,p=0,b=.5;delete t.unknown;function _(){var T=e().length,R=i<r,j=R?i:r,M=R?r:i;a=(M-j)/Math.max(1,T-m+p*2),f&&(a=Math.floor(a)),j+=(M-j-a*(T-m))*b,l=a*(1-m),f&&(j=Math.round(j),l=Math.round(l));var L=Pde(T).map(function(z){return j+a*z});return n(R?L.reverse():L)}return t.domain=function(T){return arguments.length?(e(T),_()):e()},t.range=function(T){return arguments.length?([r,i]=T,r=+r,i=+i,_()):[r,i]},t.rangeRound=function(T){return[r,i]=T,r=+r,i=+i,f=!0,_()},t.bandwidth=function(){return l},t.step=function(){return a},t.round=function(T){return arguments.length?(f=!!T,_()):f},t.padding=function(T){return arguments.length?(m=Math.min(1,p=+T),_()):m},t.paddingInner=function(T){return arguments.length?(m=Math.min(1,T),_()):m},t.paddingOuter=function(T){return arguments.length?(p=+T,_()):p},t.align=function(T){return arguments.length?(b=Math.max(0,Math.min(1,T)),_()):b},t.copy=function(){return HI(e(),[r,i]).round(f).paddingInner(m).paddingOuter(p).align(b)},Ro.apply(_(),arguments)}function fV(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return fV(e())},t}function Dde(){return fV(HI.apply(null,arguments).paddingInner(1))}function KI(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function dV(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function O0(){}var Bp=.7,Qv=1/Bp,Bh="\\s*([+-]?\\d+)\\s*",Fp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Il="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kde=/^#([0-9a-f]{3,8})$/,Mde=new RegExp(`^rgb\\(${Bh},${Bh},${Bh}\\)$`),jde=new RegExp(`^rgb\\(${Il},${Il},${Il}\\)$`),Lde=new RegExp(`^rgba\\(${Bh},${Bh},${Bh},${Fp}\\)$`),Bde=new RegExp(`^rgba\\(${Il},${Il},${Il},${Fp}\\)$`),Fde=new RegExp(`^hsl\\(${Fp},${Il},${Il}\\)$`),Vde=new RegExp(`^hsla\\(${Fp},${Il},${Il},${Fp}\\)$`),HM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};KI(O0,Vp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:KM,formatHex:KM,formatHex8:zde,formatHsl:Ude,formatRgb:WM,toString:WM});function KM(){return this.rgb().formatHex()}function zde(){return this.rgb().formatHex8()}function Ude(){return hV(this).formatHsl()}function WM(){return this.rgb().formatRgb()}function Vp(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=kde.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?$M(e):n===3?new js(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?uy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?uy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Mde.exec(t))?new js(e[1],e[2],e[3],1):(e=jde.exec(t))?new js(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Lde.exec(t))?uy(e[1],e[2],e[3],e[4]):(e=Bde.exec(t))?uy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Fde.exec(t))?QM(e[1],e[2]/100,e[3]/100,1):(e=Vde.exec(t))?QM(e[1],e[2]/100,e[3]/100,e[4]):HM.hasOwnProperty(t)?$M(HM[t]):t==="transparent"?new js(NaN,NaN,NaN,0):null}function $M(t){return new js(t>>16&255,t>>8&255,t&255,1)}function uy(t,e,n,r){return r<=0&&(t=e=n=NaN),new js(t,e,n,r)}function qde(t){return t instanceof O0||(t=Vp(t)),t?(t=t.rgb(),new js(t.r,t.g,t.b,t.opacity)):new js}function hS(t,e,n,r){return arguments.length===1?qde(t):new js(t,e,n,r??1)}function js(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}KI(js,hS,dV(O0,{brighter(t){return t=t==null?Qv:Math.pow(Qv,t),new js(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Bp:Math.pow(Bp,t),new js(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new js(Xf(this.r),Xf(this.g),Xf(this.b),Zv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YM,formatHex:YM,formatHex8:Gde,formatRgb:XM,toString:XM}));function YM(){return`#${Uf(this.r)}${Uf(this.g)}${Uf(this.b)}`}function Gde(){return`#${Uf(this.r)}${Uf(this.g)}${Uf(this.b)}${Uf((isNaN(this.opacity)?1:this.opacity)*255)}`}function XM(){const t=Zv(this.opacity);return`${t===1?"rgb(":"rgba("}${Xf(this.r)}, ${Xf(this.g)}, ${Xf(this.b)}${t===1?")":`, ${t})`}`}function Zv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Xf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Uf(t){return t=Xf(t),(t<16?"0":"")+t.toString(16)}function QM(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Uo(t,e,n,r)}function hV(t){if(t instanceof Uo)return new Uo(t.h,t.s,t.l,t.opacity);if(t instanceof O0||(t=Vp(t)),!t)return new Uo;if(t instanceof Uo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),l=NaN,f=a-i,m=(a+i)/2;return f?(e===a?l=(n-r)/f+(n<r)*6:n===a?l=(r-e)/f+2:l=(e-n)/f+4,f/=m<.5?a+i:2-a-i,l*=60):f=m>0&&m<1?0:l,new Uo(l,f,m,t.opacity)}function Hde(t,e,n,r){return arguments.length===1?hV(t):new Uo(t,e,n,r??1)}function Uo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}KI(Uo,Hde,dV(O0,{brighter(t){return t=t==null?Qv:Math.pow(Qv,t),new Uo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Bp:Math.pow(Bp,t),new Uo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new js(hE(t>=240?t-240:t+120,i,r),hE(t,i,r),hE(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Uo(ZM(this.h),cy(this.s),cy(this.l),Zv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Zv(this.opacity);return`${t===1?"hsl(":"hsla("}${ZM(this.h)}, ${cy(this.s)*100}%, ${cy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ZM(t){return t=(t||0)%360,t<0?t+360:t}function cy(t){return Math.max(0,Math.min(1,t||0))}function hE(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const WI=t=>()=>t;function Kde(t,e){return function(n){return t+n*e}}function Wde(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function $de(t){return(t=+t)==1?mV:function(e,n){return n-e?Wde(e,n,t):WI(isNaN(e)?n:e)}}function mV(t,e){var n=e-t;return n?Kde(t,n):WI(isNaN(t)?e:t)}const JM=(function t(e){var n=$de(e);function r(i,a){var l=n((i=hS(i)).r,(a=hS(a)).r),f=n(i.g,a.g),m=n(i.b,a.b),p=mV(i.opacity,a.opacity);return function(b){return i.r=l(b),i.g=f(b),i.b=m(b),i.opacity=p(b),i+""}}return r.gamma=t,r})(1);function Yde(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Xde(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Qde(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),l;for(l=0;l<r;++l)i[l]=jm(t[l],e[l]);for(;l<n;++l)a[l]=e[l];return function(f){for(l=0;l<r;++l)a[l]=i[l](f);return a}}function Zde(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Jv(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Jde(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=jm(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var mS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mE=new RegExp(mS.source,"g");function ehe(t){return function(){return t}}function the(t){return function(e){return t(e)+""}}function nhe(t,e){var n=mS.lastIndex=mE.lastIndex=0,r,i,a,l=-1,f=[],m=[];for(t=t+"",e=e+"";(r=mS.exec(t))&&(i=mE.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),f[l]?f[l]+=a:f[++l]=a),(r=r[0])===(i=i[0])?f[l]?f[l]+=i:f[++l]=i:(f[++l]=null,m.push({i:l,x:Jv(r,i)})),n=mE.lastIndex;return n<e.length&&(a=e.slice(n),f[l]?f[l]+=a:f[++l]=a),f.length<2?m[0]?the(m[0].x):ehe(e):(e=m.length,function(p){for(var b=0,_;b<e;++b)f[(_=m[b]).i]=_.x(p);return f.join("")})}function jm(t,e){var n=typeof e,r;return e==null||n==="boolean"?WI(e):(n==="number"?Jv:n==="string"?(r=Vp(e))?(e=r,JM):nhe:e instanceof Vp?JM:e instanceof Date?Zde:Xde(e)?Yde:Array.isArray(e)?Qde:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Jde:Jv)(t,e)}function $I(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function rhe(t,e){e===void 0&&(e=t,t=jm);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(l){var f=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return a[f](l-f)}}function ihe(t){return function(){return t}}function ex(t){return+t}var e8=[0,1];function fs(t){return t}function gS(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:ihe(isNaN(e)?NaN:.5)}function ahe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function she(t,e,n){var r=t[0],i=t[1],a=e[0],l=e[1];return i<r?(r=gS(i,r),a=n(l,a)):(r=gS(r,i),a=n(a,l)),function(f){return a(r(f))}}function ohe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),l=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<r;)i[l]=gS(t[l],t[l+1]),a[l]=n(e[l],e[l+1]);return function(f){var m=C0(t,f,1,r)-1;return a[m](i[m](f))}}function N0(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Sb(){var t=e8,e=e8,n=jm,r,i,a,l=fs,f,m,p;function b(){var T=Math.min(t.length,e.length);return l!==fs&&(l=ahe(t[0],t[T-1])),f=T>2?ohe:she,m=p=null,_}function _(T){return T==null||isNaN(T=+T)?a:(m||(m=f(t.map(r),e,n)))(r(l(T)))}return _.invert=function(T){return l(i((p||(p=f(e,t.map(r),Jv)))(T)))},_.domain=function(T){return arguments.length?(t=Array.from(T,ex),b()):t.slice()},_.range=function(T){return arguments.length?(e=Array.from(T),b()):e.slice()},_.rangeRound=function(T){return e=Array.from(T),n=$I,b()},_.clamp=function(T){return arguments.length?(l=T?!0:fs,b()):l!==fs},_.interpolate=function(T){return arguments.length?(n=T,b()):n},_.unknown=function(T){return arguments.length?(a=T,_):a},function(T,R){return r=T,i=R,b()}}function YI(){return Sb()(fs,fs)}function lhe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function tx(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function dm(t){return t=tx(Math.abs(t)),t?t[1]:NaN}function uhe(t,e){return function(n,r){for(var i=n.length,a=[],l=0,f=t[0],m=0;i>0&&f>0&&(m+f+1>r&&(f=Math.max(1,r-m)),a.push(n.substring(i-=f,i+f)),!((m+=f+1)>r));)f=t[l=(l+1)%t.length];return a.reverse().join(e)}}function che(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var fhe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zp(t){if(!(e=fhe.exec(t)))throw new Error("invalid format: "+t);var e;return new XI({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}zp.prototype=XI.prototype;function XI(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}XI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dhe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var nx;function hhe(t,e){var n=tx(t,e);if(!n)return nx=void 0,t.toPrecision(e);var r=n[0],i=n[1],a=i-(nx=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return a===l?r:a>l?r+new Array(a-l+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+tx(t,Math.max(0,e+a-1))[0]}function t8(t,e){var n=tx(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const n8={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:lhe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>t8(t*100,e),r:t8,s:hhe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function r8(t){return t}var i8=Array.prototype.map,a8=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function mhe(t){var e=t.grouping===void 0||t.thousands===void 0?r8:uhe(i8.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?r8:che(i8.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",f=t.minus===void 0?"":t.minus+"",m=t.nan===void 0?"NaN":t.nan+"";function p(_,T){_=zp(_);var R=_.fill,j=_.align,M=_.sign,L=_.symbol,z=_.zero,$=_.width,K=_.comma,J=_.precision,ce=_.trim,Z=_.type;Z==="n"?(K=!0,Z="g"):n8[Z]||(J===void 0&&(J=12),ce=!0,Z="g"),(z||R==="0"&&j==="=")&&(z=!0,R="0",j="=");var V=(T&&T.prefix!==void 0?T.prefix:"")+(L==="$"?n:L==="#"&&/[boxX]/.test(Z)?"0"+Z.toLowerCase():""),W=(L==="$"?r:/[%p]/.test(Z)?l:"")+(T&&T.suffix!==void 0?T.suffix:""),U=n8[Z],ae=/[defgprs%]/.test(Z);J=J===void 0?6:/[gprs]/.test(Z)?Math.max(1,Math.min(21,J)):Math.max(0,Math.min(20,J));function ie(Q){var ne=V,be=W,he,ye,we;if(Z==="c")be=U(Q)+be,Q="";else{Q=+Q;var $e=Q<0||1/Q<0;if(Q=isNaN(Q)?m:U(Math.abs(Q),J),ce&&(Q=dhe(Q)),$e&&+Q==0&&M!=="+"&&($e=!1),ne=($e?M==="("?M:f:M==="-"||M==="("?"":M)+ne,be=(Z==="s"&&!isNaN(Q)&&nx!==void 0?a8[8+nx/3]:"")+be+($e&&M==="("?")":""),ae){for(he=-1,ye=Q.length;++he<ye;)if(we=Q.charCodeAt(he),48>we||we>57){be=(we===46?i+Q.slice(he+1):Q.slice(he))+be,Q=Q.slice(0,he);break}}}K&&!z&&(Q=e(Q,1/0));var et=ne.length+Q.length+be.length,rt=et<$?new Array($-et+1).join(R):"";switch(K&&z&&(Q=e(rt+Q,rt.length?$-be.length:1/0),rt=""),j){case"<":Q=ne+Q+be+rt;break;case"=":Q=ne+rt+Q+be;break;case"^":Q=rt.slice(0,et=rt.length>>1)+ne+Q+be+rt.slice(et);break;default:Q=rt+ne+Q+be;break}return a(Q)}return ie.toString=function(){return _+""},ie}function b(_,T){var R=Math.max(-8,Math.min(8,Math.floor(dm(T)/3)))*3,j=Math.pow(10,-R),M=p((_=zp(_),_.type="f",_),{suffix:a8[8+R/3]});return function(L){return M(j*L)}}return{format:p,formatPrefix:b}}var fy,QI,gV;ghe({thousands:",",grouping:[3],currency:["$",""]});function ghe(t){return fy=mhe(t),QI=fy.format,gV=fy.formatPrefix,fy}function phe(t){return Math.max(0,-dm(Math.abs(t)))}function yhe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(dm(e)/3)))*3-dm(Math.abs(t)))}function vhe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,dm(e)-dm(t))+1}function pV(t,e,n,r){var i=fS(t,e,n),a;switch(r=zp(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=yhe(i,l))&&(r.precision=a),gV(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=vhe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=phe(i))&&(r.precision=a-(r.type==="%")*2);break}}return QI(r)}function cf(t){var e=t.domain;return t.ticks=function(n){var r=e();return uS(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return pV(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,l=r[i],f=r[a],m,p,b=10;for(f<l&&(p=l,l=f,f=p,p=i,i=a,a=p);b-- >0;){if(p=cS(l,f,n),p===m)return r[i]=l,r[a]=f,e(r);if(p>0)l=Math.floor(l/p)*p,f=Math.ceil(f/p)*p;else if(p<0)l=Math.ceil(l*p)/p,f=Math.floor(f*p)/p;else break;m=p}return t},t}function yV(){var t=YI();return t.copy=function(){return N0(t,yV())},Ro.apply(t,arguments),cf(t)}function vV(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,ex),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return vV(t).unknown(e)},t=arguments.length?Array.from(t,ex):[0,1],cf(n)}function xV(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],l;return a<i&&(l=n,n=r,r=l,l=i,i=a,a=l),t[n]=e.floor(i),t[r]=e.ceil(a),t}function s8(t){return Math.log(t)}function o8(t){return Math.exp(t)}function xhe(t){return-Math.log(-t)}function bhe(t){return-Math.exp(-t)}function whe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function _he(t){return t===10?whe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Ehe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function l8(t){return(e,n)=>-t(-e,n)}function ZI(t){const e=t(s8,o8),n=e.domain;let r=10,i,a;function l(){return i=Ehe(r),a=_he(r),n()[0]<0?(i=l8(i),a=l8(a),t(xhe,bhe)):t(s8,o8),e}return e.base=function(f){return arguments.length?(r=+f,l()):r},e.domain=function(f){return arguments.length?(n(f),l()):n()},e.ticks=f=>{const m=n();let p=m[0],b=m[m.length-1];const _=b<p;_&&([p,b]=[b,p]);let T=i(p),R=i(b),j,M;const L=f==null?10:+f;let z=[];if(!(r%1)&&R-T<L){if(T=Math.floor(T),R=Math.ceil(R),p>0){for(;T<=R;++T)for(j=1;j<r;++j)if(M=T<0?j/a(-T):j*a(T),!(M<p)){if(M>b)break;z.push(M)}}else for(;T<=R;++T)for(j=r-1;j>=1;--j)if(M=T>0?j/a(-T):j*a(T),!(M<p)){if(M>b)break;z.push(M)}z.length*2<L&&(z=uS(p,b,L))}else z=uS(T,R,Math.min(R-T,L)).map(a);return _?z.reverse():z},e.tickFormat=(f,m)=>{if(f==null&&(f=10),m==null&&(m=r===10?"s":","),typeof m!="function"&&(!(r%1)&&(m=zp(m)).precision==null&&(m.trim=!0),m=QI(m)),f===1/0)return m;const p=Math.max(1,r*f/e.ticks().length);return b=>{let _=b/a(Math.round(i(b)));return _*r<r-.5&&(_*=r),_<=p?m(b):""}},e.nice=()=>n(xV(n(),{floor:f=>a(Math.floor(i(f))),ceil:f=>a(Math.ceil(i(f)))})),e}function bV(){const t=ZI(Sb()).domain([1,10]);return t.copy=()=>N0(t,bV()).base(t.base()),Ro.apply(t,arguments),t}function u8(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function c8(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function JI(t){var e=1,n=t(u8(e),c8(e));return n.constant=function(r){return arguments.length?t(u8(e=+r),c8(e)):e},cf(n)}function wV(){var t=JI(Sb());return t.copy=function(){return N0(t,wV()).constant(t.constant())},Ro.apply(t,arguments)}function f8(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Ahe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function She(t){return t<0?-t*t:t*t}function eC(t){var e=t(fs,fs),n=1;function r(){return n===1?t(fs,fs):n===.5?t(Ahe,She):t(f8(n),f8(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},cf(e)}function tC(){var t=eC(Sb());return t.copy=function(){return N0(t,tC()).exponent(t.exponent())},Ro.apply(t,arguments),t}function The(){return tC.apply(null,arguments).exponent(.5)}function d8(t){return Math.sign(t)*t*t}function Ihe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function _V(){var t=YI(),e=[0,1],n=!1,r;function i(a){var l=Ihe(t(a));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(a){return t.invert(d8(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,ex)).map(d8)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return _V(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Ro.apply(i,arguments),cf(i)}function EV(){var t=[],e=[],n=[],r;function i(){var l=0,f=Math.max(1,e.length);for(n=new Array(f-1);++l<f;)n[l-1]=Rde(t,l/f);return a}function a(l){return l==null||isNaN(l=+l)?r:e[C0(n,l)]}return a.invertExtent=function(l){var f=e.indexOf(l);return f<0?[NaN,NaN]:[f>0?n[f-1]:t[0],f<n.length?n[f]:t[t.length-1]]},a.domain=function(l){if(!arguments.length)return t.slice();t=[];for(let f of l)f!=null&&!isNaN(f=+f)&&t.push(f);return t.sort(Fc),i()},a.range=function(l){return arguments.length?(e=Array.from(l),i()):e.slice()},a.unknown=function(l){return arguments.length?(r=l,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return EV().domain(t).range(e).unknown(r)},Ro.apply(a,arguments)}function AV(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function l(m){return m!=null&&m<=m?i[C0(r,m,0,n)]:a}function f(){var m=-1;for(r=new Array(n);++m<n;)r[m]=((m+1)*e-(m-n)*t)/(n+1);return l}return l.domain=function(m){return arguments.length?([t,e]=m,t=+t,e=+e,f()):[t,e]},l.range=function(m){return arguments.length?(n=(i=Array.from(m)).length-1,f()):i.slice()},l.invertExtent=function(m){var p=i.indexOf(m);return p<0?[NaN,NaN]:p<1?[t,r[0]]:p>=n?[r[n-1],e]:[r[p-1],r[p]]},l.unknown=function(m){return arguments.length&&(a=m),l},l.thresholds=function(){return r.slice()},l.copy=function(){return AV().domain([t,e]).range(i).unknown(a)},Ro.apply(cf(l),arguments)}function SV(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[C0(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var l=e.indexOf(a);return[t[l-1],t[l]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return SV().domain(t).range(e).unknown(n)},Ro.apply(i,arguments)}const gE=new Date,pE=new Date;function ea(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const l=i(a),f=i.ceil(a);return a-l<f-a?l:f},i.offset=(a,l)=>(e(a=new Date(+a),l==null?1:Math.floor(l)),a),i.range=(a,l,f)=>{const m=[];if(a=i.ceil(a),f=f==null?1:Math.floor(f),!(a<l)||!(f>0))return m;let p;do m.push(p=new Date(+a)),e(a,f),t(a);while(p<a&&a<l);return m},i.filter=a=>ea(l=>{if(l>=l)for(;t(l),!a(l);)l.setTime(l-1)},(l,f)=>{if(l>=l)if(f<0)for(;++f<=0;)for(;e(l,-1),!a(l););else for(;--f>=0;)for(;e(l,1),!a(l););}),n&&(i.count=(a,l)=>(gE.setTime(+a),pE.setTime(+l),t(gE),t(pE),Math.floor(n(gE,pE))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?l=>r(l)%a===0:l=>i.count(0,l)%a===0):i)),i}const rx=ea(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);rx.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ea(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):rx);rx.range;const fu=1e3,So=fu*60,du=So*60,Su=du*24,nC=Su*7,h8=Su*30,yE=Su*365,qf=ea(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*fu)},(t,e)=>(e-t)/fu,t=>t.getUTCSeconds());qf.range;const rC=ea(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*fu)},(t,e)=>{t.setTime(+t+e*So)},(t,e)=>(e-t)/So,t=>t.getMinutes());rC.range;const iC=ea(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*So)},(t,e)=>(e-t)/So,t=>t.getUTCMinutes());iC.range;const aC=ea(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*fu-t.getMinutes()*So)},(t,e)=>{t.setTime(+t+e*du)},(t,e)=>(e-t)/du,t=>t.getHours());aC.range;const sC=ea(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*du)},(t,e)=>(e-t)/du,t=>t.getUTCHours());sC.range;const R0=ea(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*So)/Su,t=>t.getDate()-1);R0.range;const Tb=ea(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Su,t=>t.getUTCDate()-1);Tb.range;const TV=ea(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Su,t=>Math.floor(t/Su));TV.range;function Pd(t){return ea(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*So)/nC)}const Ib=Pd(0),ix=Pd(1),Che=Pd(2),Ohe=Pd(3),hm=Pd(4),Nhe=Pd(5),Rhe=Pd(6);Ib.range;ix.range;Che.range;Ohe.range;hm.range;Nhe.range;Rhe.range;function Dd(t){return ea(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/nC)}const Cb=Dd(0),ax=Dd(1),Phe=Dd(2),Dhe=Dd(3),mm=Dd(4),khe=Dd(5),Mhe=Dd(6);Cb.range;ax.range;Phe.range;Dhe.range;mm.range;khe.range;Mhe.range;const oC=ea(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());oC.range;const lC=ea(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());lC.range;const Tu=ea(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Tu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ea(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Tu.range;const Iu=ea(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Iu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ea(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Iu.range;function IV(t,e,n,r,i,a){const l=[[qf,1,fu],[qf,5,5*fu],[qf,15,15*fu],[qf,30,30*fu],[a,1,So],[a,5,5*So],[a,15,15*So],[a,30,30*So],[i,1,du],[i,3,3*du],[i,6,6*du],[i,12,12*du],[r,1,Su],[r,2,2*Su],[n,1,nC],[e,1,h8],[e,3,3*h8],[t,1,yE]];function f(p,b,_){const T=b<p;T&&([p,b]=[b,p]);const R=_&&typeof _.range=="function"?_:m(p,b,_),j=R?R.range(p,+b+1):[];return T?j.reverse():j}function m(p,b,_){const T=Math.abs(b-p)/_,R=qI(([,,L])=>L).right(l,T);if(R===l.length)return t.every(fS(p/yE,b/yE,_));if(R===0)return rx.every(Math.max(fS(p,b,_),1));const[j,M]=l[T/l[R-1][2]<l[R][2]/T?R-1:R];return j.every(M)}return[f,m]}const[jhe,Lhe]=IV(Iu,lC,Cb,TV,sC,iC),[Bhe,Fhe]=IV(Tu,oC,Ib,R0,aC,rC);function vE(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function xE(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Vhe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,l=t.shortDays,f=t.months,m=t.shortMonths,p=Fg(i),b=Vg(i),_=Fg(a),T=Vg(a),R=Fg(l),j=Vg(l),M=Fg(f),L=Vg(f),z=Fg(m),$=Vg(m),K={a:we,A:$e,b:et,B:rt,c:null,d:x8,e:x8,f:ume,g:xme,G:wme,H:sme,I:ome,j:lme,L:CV,m:cme,M:fme,p:de,q:Ee,Q:_8,s:E8,S:dme,u:hme,U:mme,V:gme,w:pme,W:yme,x:null,X:null,y:vme,Y:bme,Z:_me,"%":w8},J={a:Xe,A:Ge,b:vt,B:qe,c:null,d:b8,e:b8,f:Tme,g:jme,G:Bme,H:Eme,I:Ame,j:Sme,L:NV,m:Ime,M:Cme,p:ze,q:ct,Q:_8,s:E8,S:Ome,u:Nme,U:Rme,V:Pme,w:Dme,W:kme,x:null,X:null,y:Mme,Y:Lme,Z:Fme,"%":w8},ce={a:ae,A:ie,b:Q,B:ne,c:be,d:y8,e:y8,f:nme,g:p8,G:g8,H:v8,I:v8,j:Zhe,L:tme,m:Qhe,M:Jhe,p:U,q:Xhe,Q:ime,s:ame,S:eme,u:Hhe,U:Khe,V:Whe,w:Ghe,W:$he,x:he,X:ye,y:p8,Y:g8,Z:Yhe,"%":rme};K.x=Z(n,K),K.X=Z(r,K),K.c=Z(e,K),J.x=Z(n,J),J.X=Z(r,J),J.c=Z(e,J);function Z(Se,Oe){return function(ft){var Fe=[],pt=-1,Lt=0,cn=Se.length,Ln,ot,Vt;for(ft instanceof Date||(ft=new Date(+ft));++pt<cn;)Se.charCodeAt(pt)===37&&(Fe.push(Se.slice(Lt,pt)),(ot=m8[Ln=Se.charAt(++pt)])!=null?Ln=Se.charAt(++pt):ot=Ln==="e"?" ":"0",(Vt=Oe[Ln])&&(Ln=Vt(ft,ot)),Fe.push(Ln),Lt=pt+1);return Fe.push(Se.slice(Lt,pt)),Fe.join("")}}function V(Se,Oe){return function(ft){var Fe=Bg(1900,void 0,1),pt=W(Fe,Se,ft+="",0),Lt,cn;if(pt!=ft.length)return null;if("Q"in Fe)return new Date(Fe.Q);if("s"in Fe)return new Date(Fe.s*1e3+("L"in Fe?Fe.L:0));if(Oe&&!("Z"in Fe)&&(Fe.Z=0),"p"in Fe&&(Fe.H=Fe.H%12+Fe.p*12),Fe.m===void 0&&(Fe.m="q"in Fe?Fe.q:0),"V"in Fe){if(Fe.V<1||Fe.V>53)return null;"w"in Fe||(Fe.w=1),"Z"in Fe?(Lt=xE(Bg(Fe.y,0,1)),cn=Lt.getUTCDay(),Lt=cn>4||cn===0?ax.ceil(Lt):ax(Lt),Lt=Tb.offset(Lt,(Fe.V-1)*7),Fe.y=Lt.getUTCFullYear(),Fe.m=Lt.getUTCMonth(),Fe.d=Lt.getUTCDate()+(Fe.w+6)%7):(Lt=vE(Bg(Fe.y,0,1)),cn=Lt.getDay(),Lt=cn>4||cn===0?ix.ceil(Lt):ix(Lt),Lt=R0.offset(Lt,(Fe.V-1)*7),Fe.y=Lt.getFullYear(),Fe.m=Lt.getMonth(),Fe.d=Lt.getDate()+(Fe.w+6)%7)}else("W"in Fe||"U"in Fe)&&("w"in Fe||(Fe.w="u"in Fe?Fe.u%7:"W"in Fe?1:0),cn="Z"in Fe?xE(Bg(Fe.y,0,1)).getUTCDay():vE(Bg(Fe.y,0,1)).getDay(),Fe.m=0,Fe.d="W"in Fe?(Fe.w+6)%7+Fe.W*7-(cn+5)%7:Fe.w+Fe.U*7-(cn+6)%7);return"Z"in Fe?(Fe.H+=Fe.Z/100|0,Fe.M+=Fe.Z%100,xE(Fe)):vE(Fe)}}function W(Se,Oe,ft,Fe){for(var pt=0,Lt=Oe.length,cn=ft.length,Ln,ot;pt<Lt;){if(Fe>=cn)return-1;if(Ln=Oe.charCodeAt(pt++),Ln===37){if(Ln=Oe.charAt(pt++),ot=ce[Ln in m8?Oe.charAt(pt++):Ln],!ot||(Fe=ot(Se,ft,Fe))<0)return-1}else if(Ln!=ft.charCodeAt(Fe++))return-1}return Fe}function U(Se,Oe,ft){var Fe=p.exec(Oe.slice(ft));return Fe?(Se.p=b.get(Fe[0].toLowerCase()),ft+Fe[0].length):-1}function ae(Se,Oe,ft){var Fe=R.exec(Oe.slice(ft));return Fe?(Se.w=j.get(Fe[0].toLowerCase()),ft+Fe[0].length):-1}function ie(Se,Oe,ft){var Fe=_.exec(Oe.slice(ft));return Fe?(Se.w=T.get(Fe[0].toLowerCase()),ft+Fe[0].length):-1}function Q(Se,Oe,ft){var Fe=z.exec(Oe.slice(ft));return Fe?(Se.m=$.get(Fe[0].toLowerCase()),ft+Fe[0].length):-1}function ne(Se,Oe,ft){var Fe=M.exec(Oe.slice(ft));return Fe?(Se.m=L.get(Fe[0].toLowerCase()),ft+Fe[0].length):-1}function be(Se,Oe,ft){return W(Se,e,Oe,ft)}function he(Se,Oe,ft){return W(Se,n,Oe,ft)}function ye(Se,Oe,ft){return W(Se,r,Oe,ft)}function we(Se){return l[Se.getDay()]}function $e(Se){return a[Se.getDay()]}function et(Se){return m[Se.getMonth()]}function rt(Se){return f[Se.getMonth()]}function de(Se){return i[+(Se.getHours()>=12)]}function Ee(Se){return 1+~~(Se.getMonth()/3)}function Xe(Se){return l[Se.getUTCDay()]}function Ge(Se){return a[Se.getUTCDay()]}function vt(Se){return m[Se.getUTCMonth()]}function qe(Se){return f[Se.getUTCMonth()]}function ze(Se){return i[+(Se.getUTCHours()>=12)]}function ct(Se){return 1+~~(Se.getUTCMonth()/3)}return{format:function(Se){var Oe=Z(Se+="",K);return Oe.toString=function(){return Se},Oe},parse:function(Se){var Oe=V(Se+="",!1);return Oe.toString=function(){return Se},Oe},utcFormat:function(Se){var Oe=Z(Se+="",J);return Oe.toString=function(){return Se},Oe},utcParse:function(Se){var Oe=V(Se+="",!0);return Oe.toString=function(){return Se},Oe}}}var m8={"-":"",_:" ",0:"0"},va=/^\s*\d+/,zhe=/^%/,Uhe=/[\\^$*+?|[\]().{}]/g;function Kn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function qhe(t){return t.replace(Uhe,"\\$&")}function Fg(t){return new RegExp("^(?:"+t.map(qhe).join("|")+")","i")}function Vg(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Ghe(t,e,n){var r=va.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Hhe(t,e,n){var r=va.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Khe(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Whe(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function $he(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function g8(t,e,n){var r=va.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function p8(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Yhe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Xhe(t,e,n){var r=va.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Qhe(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function y8(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Zhe(t,e,n){var r=va.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function v8(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Jhe(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function eme(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function tme(t,e,n){var r=va.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function nme(t,e,n){var r=va.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function rme(t,e,n){var r=zhe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ime(t,e,n){var r=va.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function ame(t,e,n){var r=va.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function x8(t,e){return Kn(t.getDate(),e,2)}function sme(t,e){return Kn(t.getHours(),e,2)}function ome(t,e){return Kn(t.getHours()%12||12,e,2)}function lme(t,e){return Kn(1+R0.count(Tu(t),t),e,3)}function CV(t,e){return Kn(t.getMilliseconds(),e,3)}function ume(t,e){return CV(t,e)+"000"}function cme(t,e){return Kn(t.getMonth()+1,e,2)}function fme(t,e){return Kn(t.getMinutes(),e,2)}function dme(t,e){return Kn(t.getSeconds(),e,2)}function hme(t){var e=t.getDay();return e===0?7:e}function mme(t,e){return Kn(Ib.count(Tu(t)-1,t),e,2)}function OV(t){var e=t.getDay();return e>=4||e===0?hm(t):hm.ceil(t)}function gme(t,e){return t=OV(t),Kn(hm.count(Tu(t),t)+(Tu(t).getDay()===4),e,2)}function pme(t){return t.getDay()}function yme(t,e){return Kn(ix.count(Tu(t)-1,t),e,2)}function vme(t,e){return Kn(t.getFullYear()%100,e,2)}function xme(t,e){return t=OV(t),Kn(t.getFullYear()%100,e,2)}function bme(t,e){return Kn(t.getFullYear()%1e4,e,4)}function wme(t,e){var n=t.getDay();return t=n>=4||n===0?hm(t):hm.ceil(t),Kn(t.getFullYear()%1e4,e,4)}function _me(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Kn(e/60|0,"0",2)+Kn(e%60,"0",2)}function b8(t,e){return Kn(t.getUTCDate(),e,2)}function Eme(t,e){return Kn(t.getUTCHours(),e,2)}function Ame(t,e){return Kn(t.getUTCHours()%12||12,e,2)}function Sme(t,e){return Kn(1+Tb.count(Iu(t),t),e,3)}function NV(t,e){return Kn(t.getUTCMilliseconds(),e,3)}function Tme(t,e){return NV(t,e)+"000"}function Ime(t,e){return Kn(t.getUTCMonth()+1,e,2)}function Cme(t,e){return Kn(t.getUTCMinutes(),e,2)}function Ome(t,e){return Kn(t.getUTCSeconds(),e,2)}function Nme(t){var e=t.getUTCDay();return e===0?7:e}function Rme(t,e){return Kn(Cb.count(Iu(t)-1,t),e,2)}function RV(t){var e=t.getUTCDay();return e>=4||e===0?mm(t):mm.ceil(t)}function Pme(t,e){return t=RV(t),Kn(mm.count(Iu(t),t)+(Iu(t).getUTCDay()===4),e,2)}function Dme(t){return t.getUTCDay()}function kme(t,e){return Kn(ax.count(Iu(t)-1,t),e,2)}function Mme(t,e){return Kn(t.getUTCFullYear()%100,e,2)}function jme(t,e){return t=RV(t),Kn(t.getUTCFullYear()%100,e,2)}function Lme(t,e){return Kn(t.getUTCFullYear()%1e4,e,4)}function Bme(t,e){var n=t.getUTCDay();return t=n>=4||n===0?mm(t):mm.ceil(t),Kn(t.getUTCFullYear()%1e4,e,4)}function Fme(){return"+0000"}function w8(){return"%"}function _8(t){return+t}function E8(t){return Math.floor(+t/1e3)}var gh,PV,DV;Vme({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Vme(t){return gh=Vhe(t),PV=gh.format,gh.parse,DV=gh.utcFormat,gh.utcParse,gh}function zme(t){return new Date(t)}function Ume(t){return t instanceof Date?+t:+new Date(+t)}function uC(t,e,n,r,i,a,l,f,m,p){var b=YI(),_=b.invert,T=b.domain,R=p(".%L"),j=p(":%S"),M=p("%I:%M"),L=p("%I %p"),z=p("%a %d"),$=p("%b %d"),K=p("%B"),J=p("%Y");function ce(Z){return(m(Z)<Z?R:f(Z)<Z?j:l(Z)<Z?M:a(Z)<Z?L:r(Z)<Z?i(Z)<Z?z:$:n(Z)<Z?K:J)(Z)}return b.invert=function(Z){return new Date(_(Z))},b.domain=function(Z){return arguments.length?T(Array.from(Z,Ume)):T().map(zme)},b.ticks=function(Z){var V=T();return t(V[0],V[V.length-1],Z??10)},b.tickFormat=function(Z,V){return V==null?ce:p(V)},b.nice=function(Z){var V=T();return(!Z||typeof Z.range!="function")&&(Z=e(V[0],V[V.length-1],Z??10)),Z?T(xV(V,Z)):b},b.copy=function(){return N0(b,uC(t,e,n,r,i,a,l,f,m,p))},b}function qme(){return Ro.apply(uC(Bhe,Fhe,Tu,oC,Ib,R0,aC,rC,qf,PV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Gme(){return Ro.apply(uC(jhe,Lhe,Iu,lC,Cb,Tb,sC,iC,qf,DV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ob(){var t=0,e=1,n,r,i,a,l=fs,f=!1,m;function p(_){return _==null||isNaN(_=+_)?m:l(i===0?.5:(_=(a(_)-n)*i,f?Math.max(0,Math.min(1,_)):_))}p.domain=function(_){return arguments.length?([t,e]=_,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),p):[t,e]},p.clamp=function(_){return arguments.length?(f=!!_,p):f},p.interpolator=function(_){return arguments.length?(l=_,p):l};function b(_){return function(T){var R,j;return arguments.length?([R,j]=T,l=_(R,j),p):[l(0),l(1)]}}return p.range=b(jm),p.rangeRound=b($I),p.unknown=function(_){return arguments.length?(m=_,p):m},function(_){return a=_,n=_(t),r=_(e),i=n===r?0:1/(r-n),p}}function ff(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function kV(){var t=cf(Ob()(fs));return t.copy=function(){return ff(t,kV())},Fu.apply(t,arguments)}function MV(){var t=ZI(Ob()).domain([1,10]);return t.copy=function(){return ff(t,MV()).base(t.base())},Fu.apply(t,arguments)}function jV(){var t=JI(Ob());return t.copy=function(){return ff(t,jV()).constant(t.constant())},Fu.apply(t,arguments)}function cC(){var t=eC(Ob());return t.copy=function(){return ff(t,cC()).exponent(t.exponent())},Fu.apply(t,arguments)}function Hme(){return cC.apply(null,arguments).exponent(.5)}function LV(){var t=[],e=fs;function n(r){if(r!=null&&!isNaN(r=+r))return e((C0(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Fc),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>Nde(t,a/r))},n.copy=function(){return LV(e).domain(t)},Fu.apply(n,arguments)}function Nb(){var t=0,e=.5,n=1,r=1,i,a,l,f,m,p=fs,b,_=!1,T;function R(M){return isNaN(M=+M)?T:(M=.5+((M=+b(M))-a)*(r*M<r*a?f:m),p(_?Math.max(0,Math.min(1,M)):M))}R.domain=function(M){return arguments.length?([t,e,n]=M,i=b(t=+t),a=b(e=+e),l=b(n=+n),f=i===a?0:.5/(a-i),m=a===l?0:.5/(l-a),r=a<i?-1:1,R):[t,e,n]},R.clamp=function(M){return arguments.length?(_=!!M,R):_},R.interpolator=function(M){return arguments.length?(p=M,R):p};function j(M){return function(L){var z,$,K;return arguments.length?([z,$,K]=L,p=rhe(M,[z,$,K]),R):[p(0),p(.5),p(1)]}}return R.range=j(jm),R.rangeRound=j($I),R.unknown=function(M){return arguments.length?(T=M,R):T},function(M){return b=M,i=M(t),a=M(e),l=M(n),f=i===a?0:.5/(a-i),m=a===l?0:.5/(l-a),r=a<i?-1:1,R}}function BV(){var t=cf(Nb()(fs));return t.copy=function(){return ff(t,BV())},Fu.apply(t,arguments)}function FV(){var t=ZI(Nb()).domain([.1,1,10]);return t.copy=function(){return ff(t,FV()).base(t.base())},Fu.apply(t,arguments)}function VV(){var t=JI(Nb());return t.copy=function(){return ff(t,VV()).constant(t.constant())},Fu.apply(t,arguments)}function fC(){var t=eC(Nb());return t.copy=function(){return ff(t,fC()).exponent(t.exponent())},Fu.apply(t,arguments)}function Kme(){return fC.apply(null,arguments).exponent(.5)}const Zg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:HI,scaleDiverging:BV,scaleDivergingLog:FV,scaleDivergingPow:fC,scaleDivergingSqrt:Kme,scaleDivergingSymlog:VV,scaleIdentity:vV,scaleImplicit:dS,scaleLinear:yV,scaleLog:bV,scaleOrdinal:GI,scalePoint:Dde,scalePow:tC,scaleQuantile:EV,scaleQuantize:AV,scaleRadial:_V,scaleSequential:kV,scaleSequentialLog:MV,scaleSequentialPow:cC,scaleSequentialQuantile:LV,scaleSequentialSqrt:Hme,scaleSequentialSymlog:jV,scaleSqrt:The,scaleSymlog:wV,scaleThreshold:SV,scaleTime:qme,scaleUtc:Gme,tickFormat:pV},Symbol.toStringTag,{value:"Module"}));var Vu=t=>t.chartData,Rb=Re([Vu],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),dC=(t,e,n,r)=>r?Rb(t):Vu(t),Wme=(t,e,n)=>n?Rb(t):Vu(t);function Cu(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(mn(e)&&mn(n))return!0}return!1}function A8(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function zV(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(mn(n))i=n;else if(typeof n=="function")return;if(mn(r))a=r;else if(typeof r=="function")return;var l=[i,a];if(Cu(l))return l}}function $me(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Cu(r))return A8(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,l,f;if(i==="auto")e!=null&&(l=Math.min(...e));else if(Tt(i))l=i;else if(typeof i=="function")try{e!=null&&(l=i(e?.[0]))}catch{}else if(typeof i=="string"&&jk.test(i)){var m=jk.exec(i);if(m==null||m[1]==null||e==null)l=void 0;else{var p=+m[1];l=e[0]-p}}else l=e?.[0];if(a==="auto")e!=null&&(f=Math.max(...e));else if(Tt(a))f=a;else if(typeof a=="function")try{e!=null&&(f=a(e?.[1]))}catch{}else if(typeof a=="string"&&Lk.test(a)){var b=Lk.exec(a);if(b==null||b[1]==null||e==null)f=void 0;else{var _=+b[1];f=e[1]+_}}else f=e?.[1];var T=[l,f];if(Cu(T))return e==null?T:A8(T,e,n)}}}var Lm=1e9,Yme={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},mC,ti=!0,Oo="[DecimalError] ",Qf=Oo+"Invalid argument: ",hC=Oo+"Exponent out of range: ",Bm=Math.floor,kf=Math.pow,Xme=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,eo,ha=1e7,zr=7,UV=9007199254740991,sx=Bm(UV/zr),Ct={};Ct.absoluteValue=Ct.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ct.comparedTo=Ct.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Ct.decimalPlaces=Ct.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*zr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ct.dividedBy=Ct.div=function(t){return gu(this,new this.constructor(t))};Ct.dividedToIntegerBy=Ct.idiv=function(t){var e=this,n=e.constructor;return Or(gu(e,new n(t),0,1),n.precision)};Ct.equals=Ct.eq=function(t){return!this.cmp(t)};Ct.exponent=function(){return Ui(this)};Ct.greaterThan=Ct.gt=function(t){return this.cmp(t)>0};Ct.greaterThanOrEqualTo=Ct.gte=function(t){return this.cmp(t)>=0};Ct.isInteger=Ct.isint=function(){return this.e>this.d.length-2};Ct.isNegative=Ct.isneg=function(){return this.s<0};Ct.isPositive=Ct.ispos=function(){return this.s>0};Ct.isZero=function(){return this.s===0};Ct.lessThan=Ct.lt=function(t){return this.cmp(t)<0};Ct.lessThanOrEqualTo=Ct.lte=function(t){return this.cmp(t)<1};Ct.logarithm=Ct.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(eo))throw Error(Oo+"NaN");if(n.s<1)throw Error(Oo+(n.s?"NaN":"-Infinity"));return n.eq(eo)?new r(0):(ti=!1,e=gu(Up(n,a),Up(t,a),a),ti=!0,Or(e,i))};Ct.minus=Ct.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?HV(e,t):qV(e,(t.s=-t.s,t))};Ct.modulo=Ct.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Oo+"NaN");return n.s?(ti=!1,e=gu(n,t,0,1).times(t),ti=!0,n.minus(e)):Or(new r(n),i)};Ct.naturalExponential=Ct.exp=function(){return GV(this)};Ct.naturalLogarithm=Ct.ln=function(){return Up(this)};Ct.negated=Ct.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ct.plus=Ct.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?qV(e,t):HV(e,(t.s=-t.s,t))};Ct.precision=Ct.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Qf+t);if(e=Ui(i)+1,r=i.d.length-1,n=r*zr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ct.squareRoot=Ct.sqrt=function(){var t,e,n,r,i,a,l,f=this,m=f.constructor;if(f.s<1){if(!f.s)return new m(0);throw Error(Oo+"NaN")}for(t=Ui(f),ti=!1,i=Math.sqrt(+f),i==0||i==1/0?(e=_l(f.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Bm((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new m(e)):r=new m(i.toString()),n=m.precision,i=l=n+3;;)if(a=r,r=a.plus(gu(f,a,l+2)).times(.5),_l(a.d).slice(0,l)===(e=_l(r.d)).slice(0,l)){if(e=e.slice(l-3,l+1),i==l&&e=="4999"){if(Or(a,n+1,0),a.times(a).eq(f)){r=a;break}}else if(e!="9999")break;l+=4}return ti=!0,Or(r,n)};Ct.times=Ct.mul=function(t){var e,n,r,i,a,l,f,m,p,b=this,_=b.constructor,T=b.d,R=(t=new _(t)).d;if(!b.s||!t.s)return new _(0);for(t.s*=b.s,n=b.e+t.e,m=T.length,p=R.length,m<p&&(a=T,T=R,R=a,l=m,m=p,p=l),a=[],l=m+p,r=l;r--;)a.push(0);for(r=p;--r>=0;){for(e=0,i=m+r;i>r;)f=a[i]+R[r]*T[i-r-1]+e,a[i--]=f%ha|0,e=f/ha|0;a[i]=(a[i]+e)%ha|0}for(;!a[--l];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,ti?Or(t,_.precision):t};Ct.toDecimalPlaces=Ct.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Rl(t,0,Lm),e===void 0?e=r.rounding:Rl(e,0,8),Or(n,t+Ui(n)+1,e))};Ct.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=xd(r,!0):(Rl(t,0,Lm),e===void 0?e=i.rounding:Rl(e,0,8),r=Or(new i(r),t+1,e),n=xd(r,!0,t+1)),n};Ct.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?xd(i):(Rl(t,0,Lm),e===void 0?e=a.rounding:Rl(e,0,8),r=Or(new a(i),t+Ui(i)+1,e),n=xd(r.abs(),!1,t+Ui(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ct.toInteger=Ct.toint=function(){var t=this,e=t.constructor;return Or(new e(t),Ui(t)+1,e.rounding)};Ct.toNumber=function(){return+this};Ct.toPower=Ct.pow=function(t){var e,n,r,i,a,l,f=this,m=f.constructor,p=12,b=+(t=new m(t));if(!t.s)return new m(eo);if(f=new m(f),!f.s){if(t.s<1)throw Error(Oo+"Infinity");return f}if(f.eq(eo))return f;if(r=m.precision,t.eq(eo))return Or(f,r);if(e=t.e,n=t.d.length-1,l=e>=n,a=f.s,l){if((n=b<0?-b:b)<=UV){for(i=new m(eo),e=Math.ceil(r/zr+4),ti=!1;n%2&&(i=i.times(f),T8(i.d,e)),n=Bm(n/2),n!==0;)f=f.times(f),T8(f.d,e);return ti=!0,t.s<0?new m(eo).div(i):Or(i,r)}}else if(a<0)throw Error(Oo+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,f.s=1,ti=!1,i=t.times(Up(f,r+p)),ti=!0,i=GV(i),i.s=a,i};Ct.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=Ui(i),r=xd(i,n<=a.toExpNeg||n>=a.toExpPos)):(Rl(t,1,Lm),e===void 0?e=a.rounding:Rl(e,0,8),i=Or(new a(i),t,e),n=Ui(i),r=xd(i,t<=n||n<=a.toExpNeg,t)),r};Ct.toSignificantDigits=Ct.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Rl(t,1,Lm),e===void 0?e=r.rounding:Rl(e,0,8)),Or(new r(n),t,e)};Ct.toString=Ct.valueOf=Ct.val=Ct.toJSON=Ct[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ui(t),n=t.constructor;return xd(t,e<=n.toExpNeg||e>=n.toExpPos)};function qV(t,e){var n,r,i,a,l,f,m,p,b=t.constructor,_=b.precision;if(!t.s||!e.s)return e.s||(e=new b(t)),ti?Or(e,_):e;if(m=t.d,p=e.d,l=t.e,i=e.e,m=m.slice(),a=l-i,a){for(a<0?(r=m,a=-a,f=p.length):(r=p,i=l,f=m.length),l=Math.ceil(_/zr),f=l>f?l+1:f+1,a>f&&(a=f,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(f=m.length,a=p.length,f-a<0&&(a=f,r=p,p=m,m=r),n=0;a;)n=(m[--a]=m[a]+p[a]+n)/ha|0,m[a]%=ha;for(n&&(m.unshift(n),++i),f=m.length;m[--f]==0;)m.pop();return e.d=m,e.e=i,ti?Or(e,_):e}function Rl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Qf+t)}function _l(t){var e,n,r,i=t.length-1,a="",l=t[0];if(i>0){for(a+=l,e=1;e<i;e++)r=t[e]+"",n=zr-r.length,n&&(a+=vc(n)),a+=r;l=t[e],r=l+"",n=zr-r.length,n&&(a+=vc(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}var gu=(function(){function t(r,i){var a,l=0,f=r.length;for(r=r.slice();f--;)a=r[f]*i+l,r[f]=a%ha|0,l=a/ha|0;return l&&r.unshift(l),r}function e(r,i,a,l){var f,m;if(a!=l)m=a>l?1:-1;else for(f=m=0;f<a;f++)if(r[f]!=i[f]){m=r[f]>i[f]?1:-1;break}return m}function n(r,i,a){for(var l=0;a--;)r[a]-=l,l=r[a]<i[a]?1:0,r[a]=l*ha+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,l){var f,m,p,b,_,T,R,j,M,L,z,$,K,J,ce,Z,V,W,U=r.constructor,ae=r.s==i.s?1:-1,ie=r.d,Q=i.d;if(!r.s)return new U(r);if(!i.s)throw Error(Oo+"Division by zero");for(m=r.e-i.e,V=Q.length,ce=ie.length,R=new U(ae),j=R.d=[],p=0;Q[p]==(ie[p]||0);)++p;if(Q[p]>(ie[p]||0)&&--m,a==null?$=a=U.precision:l?$=a+(Ui(r)-Ui(i))+1:$=a,$<0)return new U(0);if($=$/zr+2|0,p=0,V==1)for(b=0,Q=Q[0],$++;(p<ce||b)&&$--;p++)K=b*ha+(ie[p]||0),j[p]=K/Q|0,b=K%Q|0;else{for(b=ha/(Q[0]+1)|0,b>1&&(Q=t(Q,b),ie=t(ie,b),V=Q.length,ce=ie.length),J=V,M=ie.slice(0,V),L=M.length;L<V;)M[L++]=0;W=Q.slice(),W.unshift(0),Z=Q[0],Q[1]>=ha/2&&++Z;do b=0,f=e(Q,M,V,L),f<0?(z=M[0],V!=L&&(z=z*ha+(M[1]||0)),b=z/Z|0,b>1?(b>=ha&&(b=ha-1),_=t(Q,b),T=_.length,L=M.length,f=e(_,M,T,L),f==1&&(b--,n(_,V<T?W:Q,T))):(b==0&&(f=b=1),_=Q.slice()),T=_.length,T<L&&_.unshift(0),n(M,_,L),f==-1&&(L=M.length,f=e(Q,M,V,L),f<1&&(b++,n(M,V<L?W:Q,L))),L=M.length):f===0&&(b++,M=[0]),j[p++]=b,f&&M[0]?M[L++]=ie[J]||0:(M=[ie[J]],L=1);while((J++<ce||M[0]!==void 0)&&$--)}return j[0]||j.shift(),R.e=m,Or(R,l?a+Ui(R)+1:a)}})();function GV(t,e){var n,r,i,a,l,f,m=0,p=0,b=t.constructor,_=b.precision;if(Ui(t)>16)throw Error(hC+Ui(t));if(!t.s)return new b(eo);for(ti=!1,f=_,l=new b(.03125);t.abs().gte(.1);)t=t.times(l),p+=5;for(r=Math.log(kf(2,p))/Math.LN10*2+5|0,f+=r,n=i=a=new b(eo),b.precision=f;;){if(i=Or(i.times(t),f),n=n.times(++m),l=a.plus(gu(i,n,f)),_l(l.d).slice(0,f)===_l(a.d).slice(0,f)){for(;p--;)a=Or(a.times(a),f);return b.precision=_,e==null?(ti=!0,Or(a,_)):a}a=l}}function Ui(t){for(var e=t.e*zr,n=t.d[0];n>=10;n/=10)e++;return e}function bE(t,e,n){if(e>t.LN10.sd())throw ti=!0,n&&(t.precision=n),Error(Oo+"LN10 precision limit exceeded");return Or(new t(t.LN10),e)}function vc(t){for(var e="";t--;)e+="0";return e}function Up(t,e){var n,r,i,a,l,f,m,p,b,_=1,T=10,R=t,j=R.d,M=R.constructor,L=M.precision;if(R.s<1)throw Error(Oo+(R.s?"NaN":"-Infinity"));if(R.eq(eo))return new M(0);if(e==null?(ti=!1,p=L):p=e,R.eq(10))return e==null&&(ti=!0),bE(M,p);if(p+=T,M.precision=p,n=_l(j),r=n.charAt(0),a=Ui(R),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)R=R.times(t),n=_l(R.d),r=n.charAt(0),_++;a=Ui(R),r>1?(R=new M("0."+n),a++):R=new M(r+"."+n.slice(1))}else return m=bE(M,p+2,L).times(a+""),R=Up(new M(r+"."+n.slice(1)),p-T).plus(m),M.precision=L,e==null?(ti=!0,Or(R,L)):R;for(f=l=R=gu(R.minus(eo),R.plus(eo),p),b=Or(R.times(R),p),i=3;;){if(l=Or(l.times(b),p),m=f.plus(gu(l,new M(i),p)),_l(m.d).slice(0,p)===_l(f.d).slice(0,p))return f=f.times(2),a!==0&&(f=f.plus(bE(M,p+2,L).times(a+""))),f=gu(f,new M(_),p),M.precision=L,e==null?(ti=!0,Or(f,L)):f;f=m,i+=2}}function S8(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Bm(n/zr),t.d=[],r=(n+1)%zr,n<0&&(r+=zr),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=zr;r<i;)t.d.push(+e.slice(r,r+=zr));e=e.slice(r),r=zr-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),ti&&(t.e>sx||t.e<-sx))throw Error(hC+n)}else t.s=0,t.e=0,t.d=[0];return t}function Or(t,e,n){var r,i,a,l,f,m,p,b,_=t.d;for(l=1,a=_[0];a>=10;a/=10)l++;if(r=e-l,r<0)r+=zr,i=e,p=_[b=0];else{if(b=Math.ceil((r+1)/zr),a=_.length,b>=a)return t;for(p=a=_[b],l=1;a>=10;a/=10)l++;r%=zr,i=r-zr+l}if(n!==void 0&&(a=kf(10,l-i-1),f=p/a%10|0,m=e<0||_[b+1]!==void 0||p%a,m=n<4?(f||m)&&(n==0||n==(t.s<0?3:2)):f>5||f==5&&(n==4||m||n==6&&(r>0?i>0?p/kf(10,l-i):0:_[b-1])%10&1||n==(t.s<0?8:7))),e<1||!_[0])return m?(a=Ui(t),_.length=1,e=e-a-1,_[0]=kf(10,(zr-e%zr)%zr),t.e=Bm(-e/zr)||0):(_.length=1,_[0]=t.e=t.s=0),t;if(r==0?(_.length=b,a=1,b--):(_.length=b+1,a=kf(10,zr-r),_[b]=i>0?(p/kf(10,l-i)%kf(10,i)|0)*a:0),m)for(;;)if(b==0){(_[0]+=a)==ha&&(_[0]=1,++t.e);break}else{if(_[b]+=a,_[b]!=ha)break;_[b--]=0,a=1}for(r=_.length;_[--r]===0;)_.pop();if(ti&&(t.e>sx||t.e<-sx))throw Error(hC+Ui(t));return t}function HV(t,e){var n,r,i,a,l,f,m,p,b,_,T=t.constructor,R=T.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new T(t),ti?Or(e,R):e;if(m=t.d,_=e.d,r=e.e,p=t.e,m=m.slice(),l=p-r,l){for(b=l<0,b?(n=m,l=-l,f=_.length):(n=_,r=p,f=m.length),i=Math.max(Math.ceil(R/zr),f)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=m.length,f=_.length,b=i<f,b&&(f=i),i=0;i<f;i++)if(m[i]!=_[i]){b=m[i]<_[i];break}l=0}for(b&&(n=m,m=_,_=n,e.s=-e.s),f=m.length,i=_.length-f;i>0;--i)m[f++]=0;for(i=_.length;i>l;){if(m[--i]<_[i]){for(a=i;a&&m[--a]===0;)m[a]=ha-1;--m[a],m[i]+=ha}m[i]-=_[i]}for(;m[--f]===0;)m.pop();for(;m[0]===0;m.shift())--r;return m[0]?(e.d=m,e.e=r,ti?Or(e,R):e):new T(0)}function xd(t,e,n){var r,i=Ui(t),a=_l(t.d),l=a.length;return e?(n&&(r=n-l)>0?a=a.charAt(0)+"."+a.slice(1)+vc(r):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+vc(-i-1)+a,n&&(r=n-l)>0&&(a+=vc(r))):i>=l?(a+=vc(i+1-l),n&&(r=n-i-1)>0&&(a=a+"."+vc(r))):((r=i+1)<l&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(a+="."),a+=vc(r))),t.s<0?"-"+a:a}function T8(t,e){if(t.length>e)return t.length=e,!0}function KV(t){var e,n,r;function i(a){var l=this;if(!(l instanceof i))return new i(a);if(l.constructor=i,a instanceof i){l.s=a.s,l.e=a.e,l.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Qf+a);if(a>0)l.s=1;else if(a<0)a=-a,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(a===~~a&&a<1e7){l.e=0,l.d=[a];return}return S8(l,a.toString())}else if(typeof a!="string")throw Error(Qf+a);if(a.charCodeAt(0)===45?(a=a.slice(1),l.s=-1):l.s=1,Xme.test(a))S8(l,a);else throw Error(Qf+a)}if(i.prototype=Ct,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=KV,i.config=i.set=Qme,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Qme(t){if(!t||typeof t!="object")throw Error(Oo+"Object expected");var e,n,r,i=["precision",1,Lm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Bm(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Qf+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Qf+n+": "+r);return this}var mC=KV(Yme);eo=new mC(1);const ur=mC;function WV(t){var e;return t===0?e=1:e=Math.floor(new ur(t).abs().log(10).toNumber())+1,e}function $V(t,e,n){for(var r=new ur(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var YV=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},XV=(t,e,n)=>{if(t.lte(0))return new ur(0);var r=WV(t.toNumber()),i=new ur(10).pow(r),a=t.div(i),l=r!==1?.05:.1,f=new ur(Math.ceil(a.div(l).toNumber())).add(n).mul(l),m=f.mul(i);return e?new ur(m.toNumber()):new ur(Math.ceil(m.toNumber()))},Zme=(t,e,n)=>{var r=new ur(1),i=new ur(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new ur(10).pow(WV(t)-1),i=new ur(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new ur(Math.floor(t)))}else t===0?i=new ur(Math.floor((e-1)/2)):n||(i=new ur(Math.floor(t)));for(var l=Math.floor((e-1)/2),f=[],m=0;m<e;m++)f.push(i.add(new ur(m-l).mul(r)).toNumber());return f},QV=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new ur(0),tickMin:new ur(0),tickMax:new ur(0)};var l=XV(new ur(n).sub(e).div(r-1),i,a),f;e<=0&&n>=0?f=new ur(0):(f=new ur(e).add(n).div(2),f=f.sub(new ur(f).mod(l)));var m=Math.ceil(f.sub(e).div(l).toNumber()),p=Math.ceil(new ur(n).sub(f).div(l).toNumber()),b=m+p+1;return b>r?QV(e,n,r,i,a+1):(b<r&&(p=n>0?p+(r-b):p,m=n>0?m:m+(r-b)),{step:l,tickMin:f.sub(new ur(m).mul(l)),tickMax:f.add(new ur(p).mul(l))})},Jme=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(i,2),[f,m]=YV([n,r]);if(f===-1/0||m===1/0){var p=m===1/0?[f,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),m];return n>r?p.reverse():p}if(f===m)return Zme(f,i,a);var{step:b,tickMin:_,tickMax:T}=QV(f,m,l,a,0),R=$V(_,T.add(new ur(.1).mul(b)),b);return n>r?R.reverse():R},ege=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,f]=YV([r,i]);if(l===-1/0||f===1/0)return[r,i];if(l===f)return[l];var m=Math.max(n,2),p=XV(new ur(f).sub(l).div(m-1),a,0),b=[...$V(new ur(l),new ur(f),p),f];return a===!1&&(b=b.map(_=>Math.round(_))),r>i?b.reverse():b},ZV=t=>t.rootProps.maxBarSize,tge=t=>t.rootProps.barGap,JV=t=>t.rootProps.barCategoryGap,nge=t=>t.rootProps.barSize,P0=t=>t.rootProps.stackOffset,ez=t=>t.rootProps.reverseStackOrder,gC=t=>t.options.chartName,pC=t=>t.rootProps.syncId,tz=t=>t.rootProps.syncMethod,yC=t=>t.options.eventEmitter,Ii={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},If={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},dl={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},Pb=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function Db(t,e,n){if(n!=="auto")return n;if(t!=null)return ju(t,e)?"category":"number"}function I8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ox(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I8(Object(n),!0).forEach(function(r){rge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rge(t,e,n){return(e=ige(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ige(t){var e=age(t,"string");return typeof e=="symbol"?e:e+""}function age(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var C8={allowDataOverflow:If.allowDataOverflow,allowDecimals:If.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:If.angleAxisId,includeHidden:!1,name:void 0,reversed:If.reversed,scale:If.scale,tick:If.tick,tickCount:void 0,ticks:void 0,type:If.type,unit:void 0},O8={allowDataOverflow:dl.allowDataOverflow,allowDecimals:dl.allowDecimals,allowDuplicatedCategory:dl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:dl.radiusAxisId,includeHidden:dl.includeHidden,name:void 0,reversed:dl.reversed,scale:dl.scale,tick:dl.tick,tickCount:dl.tickCount,ticks:void 0,type:dl.type,unit:void 0},sge=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},vC=Re([sge,VF],(t,e)=>{var n;if(t!=null)return t;var r=(n=Db(e,"angleAxis",C8.type))!==null&&n!==void 0?n:"category";return ox(ox({},C8),{},{type:r})}),oge=(t,e)=>t.polarAxis.radiusAxis[e],xC=Re([oge,VF],(t,e)=>{var n;if(t!=null)return t;var r=(n=Db(e,"radiusAxis",O8.type))!==null&&n!==void 0?n:"category";return ox(ox({},O8),{},{type:r})}),kb=t=>t.polarOptions,bC=Re([Lu,Bu,Ji],rV),nz=Re([kb,bC],(t,e)=>{if(t!=null)return is(t.innerRadius,e,0)}),rz=Re([kb,bC],(t,e)=>{if(t!=null)return is(t.outerRadius,e,e*.8)}),lge=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},iz=Re([kb],lge);Re([vC,iz],Pb);var az=Re([bC,nz,rz],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Re([xC,az],Pb);var sz=Re([Wn,kb,nz,rz,Lu,Bu],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:l,cy:f,startAngle:m,endAngle:p}=e;return{cx:is(l,i,i/2),cy:is(f,a,a/2),innerRadius:n,outerRadius:r,startAngle:m,endAngle:p,clockWise:!1}}}),ui=(t,e)=>e,D0=(t,e,n)=>n;function wC(t){return t?.id}function oz(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,l=new Map;return t.forEach(f=>{var m,p=(m=f.data)!==null&&m!==void 0?m:r;if(!(p==null||p.length===0)){var b=wC(f);p.forEach((_,T)=>{var R=a==null||i?T:String(br(_,a,null)),j=br(_,f.dataKey,0),M;l.has(R)?M=l.get(R):M={},Object.assign(M,{[b]:j}),l.set(R,M)})}}),Array.from(l.values())}function Mb(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var jb=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function Lb(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function uge(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var xa=t=>{var e=Wn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Fm=t=>t.tooltip.settings.axisId;function cge(t){if(t in Zg)return Zg[t]();var e="scale".concat(x0(t));if(e in Zg)return Zg[e]()}function N8(t){var e=t.ticks,n=t.bandwidth,r=t.range(),i=[Math.min(...r),Math.max(...r)];return{domain:()=>t.domain(),range:(function(a){function l(){return a.apply(this,arguments)}return l.toString=function(){return a.toString()},l})(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(a){var l=i[0],f=i[1];return l<=f?a>=l&&a<=f:a>=f&&a<=l},bandwidth:n?()=>n.call(t):void 0,ticks:e?a=>e.call(t,a):void 0,map:(a,l)=>{var f=t(a);if(f!=null){if(t.bandwidth&&l!==null&&l!==void 0&&l.position){var m=t.bandwidth();switch(l.position){case"middle":f+=m/2;break;case"end":f+=m;break}}return f}}}}function R8(t,e,n){if(typeof t=="function")return N8(t.copy().domain(e).range(n));if(t!=null){var r=cge(t);if(r!=null)return r.domain(e).range(n),N8(r)}}var lz=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!Cu(e)){for(var n,r,i=0;i<e.length;i++){var a=e[i];mn(a)&&((n===void 0||a<n)&&(n=a),(r===void 0||a>r)&&(r=a))}return n!==void 0&&r!==void 0?[n,r]:void 0}return e}default:return e}};function P8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P8(Object(n),!0).forEach(function(r){fge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fge(t,e,n){return(e=dge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dge(t){var e=hge(t,"string");return typeof e=="symbol"?e:e+""}function hge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pS=[0,"auto"],ca={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},uz=(t,e)=>t.cartesianAxis.xAxis[e],Ml=(t,e)=>{var n=uz(t,e);return n??ca},fa={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:pS,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:_0},cz=(t,e)=>t.cartesianAxis.yAxis[e],jl=(t,e)=>{var n=cz(t,e);return n??fa},mge={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},_C=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??mge},xi=(t,e,n)=>{switch(e){case"xAxis":return Ml(t,n);case"yAxis":return jl(t,n);case"zAxis":return _C(t,n);case"angleAxis":return vC(t,n);case"radiusAxis":return xC(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},gge=(t,e,n)=>{switch(e){case"xAxis":return Ml(t,n);case"yAxis":return jl(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Vm=(t,e,n)=>{switch(e){case"xAxis":return Ml(t,n);case"yAxis":return jl(t,n);case"angleAxis":return vC(t,n);case"radiusAxis":return xC(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},fz=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function EC(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var Bb=t=>t.graphicalItems.cartesianItems,pge=Re([ui,D0],EC),AC=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),k0=Re([Bb,xi,pge],AC,{memoizeOptions:{resultEqualityCheck:Lb}}),dz=Re([k0],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(Mb)),hz=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),yge=Re([k0],hz),SC=t=>t.map(e=>e.data).filter(Boolean).flat(1),vge=Re([k0],SC,{memoizeOptions:{resultEqualityCheck:Lb}}),TC=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},IC=Re([vge,dC],TC),CC=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:br(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:br(i,r)}))):t.map(r=>({value:r})),Fb=Re([IC,xi,k0],CC);function mz(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Fy(t){if(Io(t)||t instanceof Date){var e=Number(t);if(mn(e))return e}}function D8(t){if(Array.isArray(t)){var e=[Fy(t[0]),Fy(t[1])];return Cu(e)?e:void 0}var n=Fy(t);if(n!=null)return[n,n]}function Ou(t){return t.map(Fy).filter(Ms)}function xge(t,e,n){return!n||typeof e!="number"||Ol(e)?[]:n.length?Ou(n.flatMap(r=>{var i=br(t,r.dataKey),a,l;if(Array.isArray(i)?[a,l]=i:a=l=i,!(!mn(a)||!mn(l)))return[e-a,e+l]})):[]}var ta=t=>{var e=xa(t),n=Fm(t);return Vm(t,e,n)},M0=Re([ta],t=>t?.dataKey),bge=Re([dz,dC,ta],oz),gz=(t,e,n,r)=>{var i={},a=e.reduce((l,f)=>{if(f.stackId==null)return l;var m=l[f.stackId];return m==null&&(m=[]),m.push(f),l[f.stackId]=m,l},i);return Object.fromEntries(Object.entries(a).map(l=>{var[f,m]=l,p=r?[...m].reverse():m,b=p.map(wC);return[f,{stackedData:tce(t,b,n),graphicalItems:p}]}))},yS=Re([bge,dz,P0,ez],gz),pz=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var l=sce(t,i,a);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},wge=Re([xi],t=>t.allowDataOverflow),OC=t=>{var e;if(t==null||!("domain"in t))return pS;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Ou(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:pS},NC=Re([xi],OC),RC=Re([NC,wge],zV),_ge=Re([yS,Vu,ui,RC],pz,{memoizeOptions:{resultEqualityCheck:jb}}),Vb=t=>t.errorBars,Ege=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>mz(n,r)),ux=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),l=Math.min(...a),f=Math.max(...a);return[l,f]}},PC=(t,e,n,r,i)=>{var a,l;if(n.length>0&&t.forEach(f=>{n.forEach(m=>{var p,b,_=(p=r[m.id])===null||p===void 0?void 0:p.filter(z=>mz(i,z)),T=br(f,(b=e.dataKey)!==null&&b!==void 0?b:m.dataKey),R=xge(f,T,_);if(R.length>=2){var j=Math.min(...R),M=Math.max(...R);(a==null||j<a)&&(a=j),(l==null||M>l)&&(l=M)}var L=D8(T);L!=null&&(a=a==null?L[0]:Math.min(a,L[0]),l=l==null?L[1]:Math.max(l,L[1]))})}),e?.dataKey!=null&&t.forEach(f=>{var m=D8(br(f,e.dataKey));m!=null&&(a=a==null?m[0]:Math.min(a,m[0]),l=l==null?m[1]:Math.max(l,m[1]))}),mn(a)&&mn(l))return[a,l]},Age=Re([IC,xi,yge,Vb,ui],PC,{memoizeOptions:{resultEqualityCheck:jb}});function Sge(t){var{value:e}=t;if(Io(e)||e instanceof Date)return e}var Tge=(t,e,n)=>{var r=t.map(Sge).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&MB(r))?oV(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},yz=t=>t.referenceElements.dots,zm=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),Ige=Re([yz,ui,D0],zm),vz=t=>t.referenceElements.areas,Cge=Re([vz,ui,D0],zm),xz=t=>t.referenceElements.lines,Oge=Re([xz,ui,D0],zm),bz=(t,e)=>{if(t!=null){var n=Ou(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Nge=Re(Ige,ui,bz),wz=(t,e)=>{if(t!=null){var n=Ou(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Rge=Re([Cge,ui],wz);function Pge(t){var e;if(t.x!=null)return Ou([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Ou(n)}function Dge(t){var e;if(t.y!=null)return Ou([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Ou(n)}var _z=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?Pge(r):Dge(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},kge=Re([Oge,ui],_z),Mge=Re(Nge,kge,Rge,(t,e,n)=>ux(t,n,e)),DC=(t,e,n,r,i,a,l,f)=>{if(n!=null)return n;var m=l==="vertical"&&f==="xAxis"||l==="horizontal"&&f==="yAxis",p=m?ux(r,a,i):ux(a,i);return $me(e,p,t.allowDataOverflow)},jge=Re([xi,NC,RC,_ge,Age,Mge,Wn,ui],DC,{memoizeOptions:{resultEqualityCheck:jb}}),Lge=[0,1],kC=(t,e,n,r,i,a,l)=>{if(!((t==null||n==null||n.length===0)&&l===void 0)){var{dataKey:f,type:m}=t,p=ju(e,a);if(p&&f==null){var b;return oV(0,(b=n?.length)!==null&&b!==void 0?b:0)}return m==="category"?Tge(r,t,p):i==="expand"?Lge:l}},MC=Re([xi,Wn,IC,Fb,P0,ui,jge],kC);function Bge(t){return t in Zg}var Ez=(t,e,n)=>{if(t!=null){var{scale:r,type:i}=t;if(r==="auto")return i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!e)?"point":i==="category"?"band":"linear";if(typeof r=="string"){var a="scale".concat(x0(r));return Bge(a)?a:"point"}}},df=Re([xi,fz,gC],Ez);function jC(t,e,n,r){if(!(n==null||r==null))return typeof t.scale=="function"?R8(t.scale,n,r):R8(e,n,r)}var LC=(t,e,n)=>{var r=OC(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Cu(t))return Jme(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Cu(t))return ege(t,e.tickCount,e.allowDecimals)}},BC=Re([MC,Vm,df],LC),FC=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&Cu(e)&&Array.isArray(n)&&n.length>0){var i,a,l=e[0],f=(i=n[0])!==null&&i!==void 0?i:0,m=e[1],p=(a=n[n.length-1])!==null&&a!==void 0?a:0;return[Math.min(l,f),Math.max(m,p)]}return e},Fge=Re([xi,MC,BC,ui],FC),Vge=Re(Fb,xi,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Ou(t.map(_=>_.value))).sort((_,T)=>_-T),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var l=a-i;if(l===0)return 1/0;for(var f=0;f<r.length-1;f++){var m=r[f],p=r[f+1];if(!(m==null||p==null)){var b=p-m;n=Math.min(n,b)}}return n/l}}),Az=Re(Vge,Wn,JV,Ji,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!mn(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var l=is(n,t*a),f=t*a/2;return f-l-(f-l)/a*l}return 0}),zge=(t,e,n)=>{var r=Ml(t,e);return r==null||typeof r.padding!="string"?0:Az(t,"xAxis",e,n,r.padding)},Uge=(t,e,n)=>{var r=jl(t,e);return r==null||typeof r.padding!="string"?0:Az(t,"yAxis",e,n,r.padding)},qge=Re(Ml,zge,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),Gge=Re(jl,Uge,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),Hge=Re([Ji,qge,bb,xb,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),Kge=Re([Ji,Wn,Gge,bb,xb,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:l}=i;return a?[r.height-l.bottom,l.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),j0=(t,e,n,r)=>{var i;switch(e){case"xAxis":return Hge(t,n,r);case"yAxis":return Kge(t,n,r);case"zAxis":return(i=_C(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return iz(t);case"radiusAxis":return az(t,n);default:return}},Sz=Re([xi,j0],Pb),Wge=Re([df,Fge],lz),gm=Re([xi,df,Wge,Sz],jC);Re([k0,Vb,ui],Ege);function Tz(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var zb=(t,e)=>e,Ub=(t,e,n)=>n,$ge=Re(yb,zb,Ub,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Tz)),Yge=Re(vb,zb,Ub,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Tz)),Iz=(t,e)=>({width:t.width,height:e.height}),Xge=(t,e)=>{var n=typeof e.width=="number"?e.width:_0;return{width:n,height:t.height}},Cz=Re(Ji,Ml,Iz),Qge=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},Zge=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},Jge=Re(Bu,Ji,$ge,zb,Ub,(t,e,n,r,i)=>{var a={},l;return n.forEach(f=>{var m=Iz(e,f);l==null&&(l=Qge(e,r,t));var p=r==="top"&&!i||r==="bottom"&&i;a[f.id]=l-Number(p)*m.height,l+=(p?-1:1)*m.height}),a}),epe=Re(Lu,Ji,Yge,zb,Ub,(t,e,n,r,i)=>{var a={},l;return n.forEach(f=>{var m=Xge(e,f);l==null&&(l=Zge(e,r,t));var p=r==="left"&&!i||r==="right"&&i;a[f.id]=l-Number(p)*m.width,l+=(p?-1:1)*m.width}),a}),tpe=(t,e)=>{var n=Ml(t,e);if(n!=null)return Jge(t,n.orientation,n.mirror)},npe=Re([Ji,Ml,tpe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),rpe=(t,e)=>{var n=jl(t,e);if(n!=null)return epe(t,n.orientation,n.mirror)},ipe=Re([Ji,jl,rpe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),Oz=Re(Ji,jl,(t,e)=>{var n=typeof e.width=="number"?e.width:_0;return{width:n,height:t.height}}),k8=(t,e,n)=>{switch(e){case"xAxis":return Cz(t,n).width;case"yAxis":return Oz(t,n).height;default:return}},Nz=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:l}=n,f=ju(t,r),m=e.map(p=>p.value);if(l&&f&&a==="category"&&i&&MB(m))return m}},VC=Re([Wn,Fb,xi,ui],Nz),Rz=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,l=ju(t,r);if(l&&(i==="number"||a!=="auto"))return e.map(f=>f.value)}},zC=Re([Wn,Fb,Vm,ui],Rz),M8=Re([Wn,gge,df,gm,VC,zC,j0,BC,ui],(t,e,n,r,i,a,l,f,m)=>{if(e!=null){var p=ju(t,m);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:m,categoricalDomain:a,duplicateDomain:i,isCategorical:p,niceTicks:f,range:l,realScaleType:n,scale:r}}}),ape=(t,e,n,r,i,a,l,f,m)=>{if(!(e==null||r==null)){var p=ju(t,m),{type:b,ticks:_,tickCount:T}=e,R=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,j=b==="category"&&r.bandwidth?r.bandwidth()/R:0;j=m==="angleAxis"&&a!=null&&a.length>=2?pa(a[0]-a[1])*2*j:j;var M=_||i;return M?M.map((L,z)=>{var $=l?l.indexOf(L):L,K=r.map($);return mn(K)?{index:z,coordinate:K+j,value:L,offset:j}:null}).filter(Ms):p&&f?f.map((L,z)=>{var $=r.map(L);return mn($)?{coordinate:$+j,value:L,index:z,offset:j}:null}).filter(Ms):r.ticks?r.ticks(T).map((L,z)=>{var $=r.map(L);return mn($)?{coordinate:$+j,value:L,index:z,offset:j}:null}).filter(Ms):r.domain().map((L,z)=>{var $=r.map(L);return mn($)?{coordinate:$+j,value:l?l[L]:L,index:z,offset:j}:null}).filter(Ms)}},Pz=Re([Wn,Vm,df,gm,BC,j0,VC,zC,ui],ape),spe=(t,e,n,r,i,a,l)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var f=ju(t,l),{tickCount:m}=e,p=0;return p=l==="angleAxis"&&r?.length>=2?pa(r[0]-r[1])*2*p:p,f&&a?a.map((b,_)=>{var T=n.map(b);return mn(T)?{coordinate:T+p,value:b,index:_,offset:p}:null}).filter(Ms):n.ticks?n.ticks(m).map((b,_)=>{var T=n.map(b);return mn(T)?{coordinate:T+p,value:b,index:_,offset:p}:null}).filter(Ms):n.domain().map((b,_)=>{var T=n.map(b);return mn(T)?{coordinate:T+p,value:i?i[b]:b,index:_,offset:p}:null}).filter(Ms)}},Yc=Re([Wn,Vm,gm,j0,VC,zC,ui],spe),Xc=Re(xi,gm,(t,e)=>{if(!(t==null||e==null))return lx(lx({},t),{},{scale:e})}),ope=Re([xi,df,MC,Sz],jC);Re((t,e,n)=>_C(t,n),ope,(t,e)=>{if(!(t==null||e==null))return lx(lx({},t),{},{scale:e})});var lpe=Re([Wn,yb,vb],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Dz=t=>t.options.defaultTooltipEventType,kz=t=>t.options.validateTooltipEventTypes;function Mz(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function UC(t,e){var n=Dz(t),r=kz(t);return Mz(e,n,r)}function upe(t){return It(e=>UC(e,t))}var jz=(t,e)=>{var n,r=Number(e);if(!(Ol(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},cpe=t=>t.tooltip.settings,Ic={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},fpe={itemInteraction:{click:Ic,hover:Ic},axisInteraction:{click:Ic,hover:Ic},keyboardInteraction:Ic,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Lz=Vs({name:"tooltip",initialState:fpe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Qr()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Wo(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Qr()},removeTooltipEntrySettings:{reducer(t,e){var n=Wo(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Qr()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:dpe,replaceTooltipEntrySettings:hpe,removeTooltipEntrySettings:mpe,setTooltipSettingsState:gpe,setActiveMouseOverItemIndex:Bz,mouseLeaveItem:ppe,mouseLeaveChart:Fz,setActiveClickItemIndex:ype,setMouseOverAxisIndex:Vz,setMouseClickAxisIndex:vpe,setSyncInteraction:vS,setKeyboardInteraction:xS}=Lz.actions,xpe=Lz.reducer;function j8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j8(Object(n),!0).forEach(function(r){bpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bpe(t,e,n){return(e=wpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wpe(t){var e=_pe(t,"string");return typeof e=="symbol"?e:e+""}function _pe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Epe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Ape(t){return t.index!=null}var zz=(t,e,n,r)=>{if(e==null)return Ic;var i=Epe(t,e,n);if(i==null)return Ic;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(Ape(i)){if(a)return dy(dy({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return dy(dy({},Ic),{},{coordinate:i.coordinate})};function Spe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function Tpe(t,e){var n=Spe(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),l=Math.max(r,i);return n>=a&&n<=l}function Ipe(t,e,n){if(n==null||e==null)return!0;var r=br(t,e);return r==null||!Cu(n)?!0:Tpe(r,n)}var qC=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var a=Number(i);if(!mn(a))return i;var l=0,f=1/0;e.length>0&&(f=e.length-1);var m=Math.max(l,Math.min(a,f)),p=e[m];return p==null||Ipe(p,n,r)?String(m):null},Uz=(t,e,n,r,i,a,l)=>{if(a!=null){var f=l[0],m=f?.getPosition(a);if(m!=null)return m;var p=i?.[Number(a)];if(p)return n==="horizontal"?{x:p.coordinate,y:(r.top+e)/2}:{x:(r.left+t)/2,y:p.coordinate}}},qz=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(l=>{var f;return((f=l.settings)===null||f===void 0?void 0:f.graphicalItemId)===i})},Gz=t=>t.options.tooltipPayloadSearcher,Um=t=>t.tooltip;function L8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function B8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L8(Object(n),!0).forEach(function(r){Cpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cpe(t,e,n){return(e=Ope(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ope(t){var e=Npe(t,"string");return typeof e=="symbol"?e:e+""}function Npe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rpe(t,e){return t??e}var Hz=(t,e,n,r,i,a,l)=>{if(!(e==null||a==null)){var{chartData:f,computedData:m,dataStartIndex:p,dataEndIndex:b}=n,_=[];return t.reduce((T,R)=>{var j,{dataDefinedOnItem:M,settings:L}=R,z=Rpe(M,f),$=Array.isArray(z)?IF(z,p,b):z,K=(j=L?.dataKey)!==null&&j!==void 0?j:r,J=L?.nameKey,ce;if(r&&Array.isArray($)&&!Array.isArray($[0])&&l==="axis"?ce=jB($,r,i):ce=a($,e,m,J),Array.isArray(ce))ce.forEach(V=>{var W=B8(B8({},L),{},{name:V.name,unit:V.unit,color:void 0,fill:void 0});T.push(Bk({tooltipEntrySettings:W,dataKey:V.dataKey,payload:V.payload,value:br(V.payload,V.dataKey),name:V.name}))});else{var Z;T.push(Bk({tooltipEntrySettings:L,dataKey:K,payload:ce,value:br(ce,K),name:(Z=br(ce,J))!==null&&Z!==void 0?Z:L?.name}))}return T},_)}},GC=Re([ta,fz,gC],Ez),Ppe=Re([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Dpe=Re([xa,Fm],EC),qm=Re([Ppe,ta,Dpe],AC,{memoizeOptions:{resultEqualityCheck:Lb}}),kpe=Re([qm],t=>t.filter(Mb)),Mpe=Re([qm],SC,{memoizeOptions:{resultEqualityCheck:Lb}}),Gm=Re([Mpe,Vu],TC),jpe=Re([kpe,Vu,ta],oz),HC=Re([Gm,ta,qm],CC),Kz=Re([ta],OC),Lpe=Re([ta],t=>t.allowDataOverflow),Wz=Re([Kz,Lpe],zV),Bpe=Re([qm],t=>t.filter(Mb)),Fpe=Re([jpe,Bpe,P0,ez],gz),Vpe=Re([Fpe,Vu,xa,Wz],pz),zpe=Re([qm],hz),Upe=Re([Gm,ta,zpe,Vb,xa],PC,{memoizeOptions:{resultEqualityCheck:jb}}),qpe=Re([yz,xa,Fm],zm),Gpe=Re([qpe,xa],bz),Hpe=Re([vz,xa,Fm],zm),Kpe=Re([Hpe,xa],wz),Wpe=Re([xz,xa,Fm],zm),$pe=Re([Wpe,xa],_z),Ype=Re([Gpe,$pe,Kpe],ux),Xpe=Re([ta,Kz,Wz,Vpe,Upe,Ype,Wn,xa],DC),L0=Re([ta,Wn,Gm,HC,P0,xa,Xpe],kC),Qpe=Re([L0,ta,GC],LC),Zpe=Re([ta,L0,Qpe,xa],FC),$z=t=>{var e=xa(t),n=Fm(t),r=!1;return j0(t,e,n,r)},Yz=Re([ta,$z],Pb),Xz=Re([ta,GC,Zpe,Yz],jC),Jpe=Re([Wn,HC,ta,xa],Nz),e0e=Re([Wn,HC,ta,xa],Rz),t0e=(t,e,n,r,i,a,l,f)=>{if(e){var{type:m}=e,p=ju(t,f);if(r){var b=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,_=m==="category"&&r.bandwidth?r.bandwidth()/b:0;return _=f==="angleAxis"&&i!=null&&i?.length>=2?pa(i[0]-i[1])*2*_:_,p&&l?l.map((T,R)=>{var j=r.map(T);return mn(j)?{coordinate:j+_,value:T,index:R,offset:_}:null}).filter(Ms):r.domain().map((T,R)=>{var j=r.map(T);return mn(j)?{coordinate:j+_,value:a?a[T]:T,index:R,offset:_}:null}).filter(Ms)}}},zu=Re([Wn,ta,GC,Xz,$z,Jpe,e0e,xa],t0e),KC=Re([Dz,kz,cpe],(t,e,n)=>Mz(n.shared,t,e)),Qz=t=>t.tooltip.settings.trigger,WC=t=>t.tooltip.settings.defaultIndex,B0=Re([Um,KC,Qz,WC],zz),Qc=Re([B0,Gm,M0,L0],qC),Zz=Re([zu,Qc],jz),$C=Re([B0],t=>{if(t)return t.dataKey}),n0e=Re([B0],t=>{if(t)return t.graphicalItemId}),Jz=Re([Um,KC,Qz,WC],qz),r0e=Re([Lu,Bu,Wn,Ji,zu,WC,Jz],Uz),i0e=Re([B0,r0e],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),a0e=Re([B0],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),s0e=Re([Jz,Qc,Vu,M0,Zz,Gz,KC],Hz),o0e=Re([s0e],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function F8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function V8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F8(Object(n),!0).forEach(function(r){l0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l0e(t,e,n){return(e=u0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u0e(t){var e=c0e(t,"string");return typeof e=="symbol"?e:e+""}function c0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var f0e=()=>It(ta),d0e=()=>{var t=f0e(),e=It(zu),n=It(Xz);return cm(!t||!n?void 0:V8(V8({},t),{},{scale:n}),e)};function z8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ph(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z8(Object(n),!0).forEach(function(r){h0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function h0e(t,e,n){return(e=m0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m0e(t){var e=g0e(t,"string");return typeof e=="symbol"?e:e+""}function g0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p0e=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},y0e=(t,e,n,r)=>{var i=e.find(p=>p&&p.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:l}=r;return ph(ph(ph({},r),zi(r.cx,r.cy,l,a)),{},{angle:a,radius:l})}var f=i.coordinate,{angle:m}=r;return ph(ph(ph({},r),zi(r.cx,r.cy,f,m)),{},{angle:m,radius:f})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function v0e(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var eU=(t,e,n,r,i)=>{var a,l=(a=e?.length)!==null&&a!==void 0?a:0;if(l<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var f=0;f<l;f++){var m,p,b,_,T,R=f>0?(m=n[f-1])===null||m===void 0?void 0:m.coordinate:(p=n[l-1])===null||p===void 0?void 0:p.coordinate,j=(b=n[f])===null||b===void 0?void 0:b.coordinate,M=f>=l-1?(_=n[0])===null||_===void 0?void 0:_.coordinate:(T=n[f+1])===null||T===void 0?void 0:T.coordinate,L=void 0;if(!(R==null||j==null||M==null))if(pa(j-R)!==pa(M-j)){var z=[];if(pa(M-j)===pa(i[1]-i[0])){L=M;var $=j+i[1]-i[0];z[0]=Math.min($,($+R)/2),z[1]=Math.max($,($+R)/2)}else{L=R;var K=M+i[1]-i[0];z[0]=Math.min(j,(K+j)/2),z[1]=Math.max(j,(K+j)/2)}var J=[Math.min(j,(L+j)/2),Math.max(j,(L+j)/2)];if(t>J[0]&&t<=J[1]||t>=z[0]&&t<=z[1]){var ce;return(ce=n[f])===null||ce===void 0?void 0:ce.index}}else{var Z=Math.min(R,M),V=Math.max(R,M);if(t>(Z+j)/2&&t<=(V+j)/2){var W;return(W=n[f])===null||W===void 0?void 0:W.index}}}else if(e)for(var U=0;U<l;U++){var ae=e[U];if(ae!=null){var ie=e[U+1],Q=e[U-1];if(U===0&&ie!=null&&t<=(ae.coordinate+ie.coordinate)/2||U===l-1&&Q!=null&&t>(ae.coordinate+Q.coordinate)/2||U>0&&U<l-1&&Q!=null&&ie!=null&&t>(ae.coordinate+Q.coordinate)/2&&t<=(ae.coordinate+ie.coordinate)/2)return ae.index}}return-1},x0e=()=>It(gC),YC=(t,e)=>e,tU=(t,e,n)=>n,XC=(t,e,n,r)=>r,b0e=Re(zu,t=>ob(t,e=>e.coordinate)),QC=Re([Um,YC,tU,XC],zz),ZC=Re([QC,Gm,M0,L0],qC),w0e=(t,e,n)=>{if(e!=null){var r=Um(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},nU=Re([Um,YC,tU,XC],qz),cx=Re([Lu,Bu,Wn,Ji,zu,XC,nU],Uz),_0e=Re([QC,cx],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),rU=Re([zu,ZC],jz),E0e=Re([nU,ZC,Vu,M0,rU,Gz,YC],Hz),A0e=Re([QC,ZC],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),S0e=(t,e,n,r,i,a,l)=>{if(!(!t||!n||!r||!i)&&v0e(t,l)){var f=oce(t,e),m=eU(f,a,i,n,r),p=p0e(e,i,m,t);return{activeIndex:String(m),activeCoordinate:p}}},T0e=(t,e,n,r,i,a,l)=>{if(!(!t||!r||!i||!a||!n)){var f=ude(t,n);if(f){var m=lce(f,e),p=eU(m,l,a,r,i),b=y0e(e,a,p,f);return{activeIndex:String(p),activeCoordinate:b}}}},I0e=(t,e,n,r,i,a,l,f)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?S0e(t,e,r,i,a,l,f):T0e(t,e,n,r,i,a,l)},C0e=Re(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),O0e=Re(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Ii)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:uge}});function U8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function q8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U8(Object(n),!0).forEach(function(r){N0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function N0e(t,e,n){return(e=R0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R0e(t){var e=P0e(t,"string");return typeof e=="symbol"?e:e+""}function P0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var D0e={},k0e={zIndexMap:Object.values(Ii).reduce((t,e)=>q8(q8({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),D0e)},M0e=new Set(Object.values(Ii));function j0e(t){return M0e.has(t)}var iU=Vs({name:"zIndex",initialState:k0e,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Qr()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!j0e(n)&&delete t.zIndexMap[n])},prepare:Qr()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:Qr()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Qr()}}}),{registerZIndexPortal:L0e,unregisterZIndexPortal:B0e,registerZIndexPortalElement:F0e,unregisterZIndexPortalElement:V0e}=iU.actions,z0e=iU.reducer;function ms(t){var{zIndex:e,children:n}=t,r=Bce(),i=r&&e!==void 0&&e!==0,a=Ba(),l=Gr();D.useLayoutEffect(()=>i?(l(L0e({zIndex:e})),()=>{l(B0e({zIndex:e}))}):Nd,[l,e,i]);var f=It(m=>C0e(m,e,a));return i?f?j5.createPortal(n,f):null:n}function bS(){return bS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bS.apply(null,arguments)}function G8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G8(Object(n),!0).forEach(function(r){U0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function U0e(t,e,n){return(e=q0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q0e(t){var e=G0e(t,"string");return typeof e=="symbol"?e:e+""}function G0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H0e(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return D.isValidElement(e)?D.cloneElement(e,r):D.createElement(n,r)}function K0e(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:l,layout:f,cursor:m,tooltipEventType:p,chartName:b}=t,_=n,T=r,R=i;if(!m||!_||b!=="ScatterChart"&&p!=="axis")return null;var j,M,L;if(b==="ScatterChart")j=_,M=Efe,L=Ii.cursorLine;else if(b==="BarChart")j=Afe(f,_,a,l),M=nV,L=Ii.cursorRectangle;else if(f==="radial"&&FB(_)){var{cx:z,cy:$,radius:K,startAngle:J,endAngle:ce}=iV(_);j={cx:z,cy:$,startAngle:J,endAngle:ce,innerRadius:K,outerRadius:K},M=sV,L=Ii.cursorLine}else j={points:hde(f,_,a)},M=UI,L=Ii.cursorLine;var Z=typeof m=="object"&&"className"in m?m.className:void 0,V=hy(hy(hy(hy({stroke:"#ccc",pointerEvents:"none"},a),j),dd(m)),{},{payload:T,payloadIndex:R,className:Hn("recharts-tooltip-cursor",Z)});return D.createElement(ms,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:L},D.createElement(H0e,{cursor:m,cursorComp:M,cursorProps:V}))}function W0e(t){var e=d0e(),n=jF(),r=Rd(),i=x0e();return e==null||n==null||r==null||i==null?null:D.createElement(K0e,bS({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var aU=D.createContext(null),$0e=()=>D.useContext(aU),wE={exports:{}},H8;function Y0e(){return H8||(H8=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(m,p,b){this.fn=m,this.context=p,this.once=b||!1}function a(m,p,b,_,T){if(typeof b!="function")throw new TypeError("The listener must be a function");var R=new i(b,_||m,T),j=n?n+p:p;return m._events[j]?m._events[j].fn?m._events[j]=[m._events[j],R]:m._events[j].push(R):(m._events[j]=R,m._eventsCount++),m}function l(m,p){--m._eventsCount===0?m._events=new r:delete m._events[p]}function f(){this._events=new r,this._eventsCount=0}f.prototype.eventNames=function(){var p=[],b,_;if(this._eventsCount===0)return p;for(_ in b=this._events)e.call(b,_)&&p.push(n?_.slice(1):_);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(b)):p},f.prototype.listeners=function(p){var b=n?n+p:p,_=this._events[b];if(!_)return[];if(_.fn)return[_.fn];for(var T=0,R=_.length,j=new Array(R);T<R;T++)j[T]=_[T].fn;return j},f.prototype.listenerCount=function(p){var b=n?n+p:p,_=this._events[b];return _?_.fn?1:_.length:0},f.prototype.emit=function(p,b,_,T,R,j){var M=n?n+p:p;if(!this._events[M])return!1;var L=this._events[M],z=arguments.length,$,K;if(L.fn){switch(L.once&&this.removeListener(p,L.fn,void 0,!0),z){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,b),!0;case 3:return L.fn.call(L.context,b,_),!0;case 4:return L.fn.call(L.context,b,_,T),!0;case 5:return L.fn.call(L.context,b,_,T,R),!0;case 6:return L.fn.call(L.context,b,_,T,R,j),!0}for(K=1,$=new Array(z-1);K<z;K++)$[K-1]=arguments[K];L.fn.apply(L.context,$)}else{var J=L.length,ce;for(K=0;K<J;K++)switch(L[K].once&&this.removeListener(p,L[K].fn,void 0,!0),z){case 1:L[K].fn.call(L[K].context);break;case 2:L[K].fn.call(L[K].context,b);break;case 3:L[K].fn.call(L[K].context,b,_);break;case 4:L[K].fn.call(L[K].context,b,_,T);break;default:if(!$)for(ce=1,$=new Array(z-1);ce<z;ce++)$[ce-1]=arguments[ce];L[K].fn.apply(L[K].context,$)}}return!0},f.prototype.on=function(p,b,_){return a(this,p,b,_,!1)},f.prototype.once=function(p,b,_){return a(this,p,b,_,!0)},f.prototype.removeListener=function(p,b,_,T){var R=n?n+p:p;if(!this._events[R])return this;if(!b)return l(this,R),this;var j=this._events[R];if(j.fn)j.fn===b&&(!T||j.once)&&(!_||j.context===_)&&l(this,R);else{for(var M=0,L=[],z=j.length;M<z;M++)(j[M].fn!==b||T&&!j[M].once||_&&j[M].context!==_)&&L.push(j[M]);L.length?this._events[R]=L.length===1?L[0]:L:l(this,R)}return this},f.prototype.removeAllListeners=function(p){var b;return p?(b=n?n+p:p,this._events[b]&&l(this,b)):(this._events=new r,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=n,f.EventEmitter=f,t.exports=f})(wE)),wE.exports}var X0e=Y0e();const Q0e=Pl(X0e);var qp=new Q0e,wS="recharts.syncEvent.tooltip",K8="recharts.syncEvent.brush",JC=(t,e)=>{if(e&&Array.isArray(t)){var n=Number.parseInt(e,10);if(!Ol(n))return t[n]}},Z0e={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},sU=Vs({name:"options",initialState:Z0e,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),J0e=sU.reducer,{createEventEmitter:e1e}=sU.actions;function t1e(t){return t.tooltip.syncInteraction}var n1e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},oU=Vs({name:"chartData",initialState:n1e,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:W8,setDataStartEndIndexes:r1e,setComputedData:VEe}=oU.actions,i1e=oU.reducer,a1e=["x","y"];function $8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$8(Object(n),!0).forEach(function(r){s1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function s1e(t,e,n){return(e=o1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o1e(t){var e=l1e(t,"string");return typeof e=="symbol"?e:e+""}function l1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function u1e(t,e){if(t==null)return{};var n,r,i=c1e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function c1e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function f1e(){var t=It(pC),e=It(yC),n=Gr(),r=It(tz),i=It(zu),a=Rd(),l=E0(),f=It(m=>m.rootProps.className);D.useEffect(()=>{if(t==null)return Nd;var m=(p,b,_)=>{if(e!==_&&t===p){if(r==="index"){var T;if(l&&b!==null&&b!==void 0&&(T=b.payload)!==null&&T!==void 0&&T.coordinate&&b.payload.sourceViewBox){var R=b.payload.coordinate,{x:j,y:M}=R,L=u1e(R,a1e),{x:z,y:$,width:K,height:J}=b.payload.sourceViewBox,ce=yh(yh({},L),{},{x:l.x+(K?(j-z)/K:0)*l.width,y:l.y+(J?(M-$)/J:0)*l.height});n(yh(yh({},b),{},{payload:yh(yh({},b.payload),{},{coordinate:ce})}))}else n(b);return}if(i!=null){var Z;if(typeof r=="function"){var V={activeTooltipIndex:b.payload.index==null?void 0:Number(b.payload.index),isTooltipActive:b.payload.active,activeIndex:b.payload.index==null?void 0:Number(b.payload.index),activeLabel:b.payload.label,activeDataKey:b.payload.dataKey,activeCoordinate:b.payload.coordinate},W=r(i,V);Z=i[W]}else r==="value"&&(Z=i.find(ye=>String(ye.value)===b.payload.label));var{coordinate:U}=b.payload;if(Z==null||b.payload.active===!1||U==null||l==null){n(vS({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:ae,y:ie}=U,Q=Math.min(ae,l.x+l.width),ne=Math.min(ie,l.y+l.height),be={x:a==="horizontal"?Z.coordinate:Q,y:a==="horizontal"?ne:Z.coordinate},he=vS({active:b.payload.active,coordinate:be,dataKey:b.payload.dataKey,index:String(Z.index),label:b.payload.label,sourceViewBox:b.payload.sourceViewBox,graphicalItemId:b.payload.graphicalItemId});n(he)}}};return qp.on(wS,m),()=>{qp.off(wS,m)}},[f,n,e,t,r,i,a,l])}function d1e(){var t=It(pC),e=It(yC),n=Gr();D.useEffect(()=>{if(t==null)return Nd;var r=(i,a,l)=>{e!==l&&t===i&&n(r1e(a))};return qp.on(K8,r),()=>{qp.off(K8,r)}},[n,e,t])}function h1e(){var t=Gr();D.useEffect(()=>{t(e1e())},[t]),f1e(),d1e()}function m1e(t,e,n,r,i,a){var l=It(R=>w0e(R,t,e)),f=It(yC),m=It(pC),p=It(tz),b=It(t1e),_=b?.active,T=E0();D.useEffect(()=>{if(!_&&m!=null&&f!=null){var R=vS({active:a,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:T,graphicalItemId:void 0});qp.emit(wS,m,R,f)}},[_,n,l,i,r,f,m,p,a,T])}function Y8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y8(Object(n),!0).forEach(function(r){g1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g1e(t,e,n){return(e=p1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p1e(t){var e=y1e(t,"string");return typeof e=="symbol"?e:e+""}function y1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function v1e(t){return t.dataKey}function x1e(t,e){return D.isValidElement(t)?D.cloneElement(t,e):typeof t=="function"?D.createElement(t,e):D.createElement(nfe,e)}var Q8=[],b1e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function _E(t){var e,n,r=Zi(t,b1e),{active:i,allowEscapeViewBox:a,animationDuration:l,animationEasing:f,content:m,filterNull:p,isAnimationActive:b,offset:_,payloadUniqBy:T,position:R,reverseDirection:j,useTranslate3d:M,wrapperStyle:L,cursor:z,shared:$,trigger:K,defaultIndex:J,portal:ce,axisId:Z}=r,V=Gr(),W=typeof J=="number"?String(J):J;D.useEffect(()=>{V(gpe({shared:$,trigger:K,axisId:Z,active:i,defaultIndex:W}))},[V,$,K,Z,i,W]);var U=E0(),ae=QF(),ie=upe($),{activeIndex:Q,isActive:ne}=(e=It(ze=>A0e(ze,ie,K,W)))!==null&&e!==void 0?e:{},be=It(ze=>E0e(ze,ie,K,W)),he=It(ze=>rU(ze,ie,K,W)),ye=It(ze=>_0e(ze,ie,K,W)),we=be,$e=$0e(),et=(n=i??ne)!==null&&n!==void 0?n:!1,[rt,de]=Kle([we,et]),Ee=ie==="axis"?he:void 0;m1e(ie,K,ye,Ee,Q,et);var Xe=ce??$e;if(Xe==null||U==null||ie==null)return null;var Ge=we??Q8;et||(Ge=Q8),p&&Ge.length&&(Ge=vle(Ge.filter(ze=>ze.value!=null&&(ze.hide!==!0||r.includeHidden)),T,v1e));var vt=Ge.length>0,qe=D.createElement(ufe,{allowEscapeViewBox:a,animationDuration:l,animationEasing:f,isAnimationActive:b,active:et,coordinate:ye,hasPayload:vt,offset:_,position:R,reverseDirection:j,useTranslate3d:M,viewBox:U,wrapperStyle:L,lastBoundingBox:rt,innerRef:de,hasPortalFromProps:!!ce},x1e(m,X8(X8({},r),{},{payload:Ge,label:Ee,active:et,activeIndex:Q,coordinate:ye,accessibilityLayer:ae})));return D.createElement(D.Fragment,null,j5.createPortal(qe,Xe),et&&D.createElement(W0e,{cursor:z,tooltipEventType:ie,coordinate:ye,payload:Ge,index:Q}))}var F0=t=>null;F0.displayName="Cell";function w1e(t,e,n){return(e=_1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _1e(t){var e=E1e(t,"string");return typeof e=="symbol"?e:e+""}function E1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class A1e{constructor(e){w1e(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function Z8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function S1e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z8(Object(n),!0).forEach(function(r){T1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function T1e(t,e,n){return(e=I1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I1e(t){var e=C1e(t,"string");return typeof e=="symbol"?e:e+""}function C1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var O1e={cacheSize:2e3,enableCache:!0},lU=S1e({},O1e),J8=new A1e(lU.cacheSize),N1e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},e6="recharts_measurement_span";function R1e(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",l=e.letterSpacing||"",f=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(l,"|").concat(f)}var t6=(t,e)=>{try{var n=document.getElementById(e6);n||(n=document.createElement("span"),n.setAttribute("id",e6),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,N1e,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},dp=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ab.isSsr)return{width:0,height:0};if(!lU.enableCache)return t6(e,n);var r=R1e(e,n),i=J8.get(r);if(i)return i;var a=t6(e,n);return J8.set(r,a),a},uU;function P1e(t,e,n){return(e=D1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D1e(t){var e=k1e(t,"string");return typeof e=="symbol"?e:e+""}function k1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var n6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,r6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,M1e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,j1e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,L1e={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},B1e=["cm","mm","pt","pc","in","Q","px"];function F1e(t){return B1e.includes(t)}var Ih="NaN";function V1e(t,e){return t*L1e[e]}class ja{static parse(e){var n,[,r,i]=(n=j1e.exec(e))!==null&&n!==void 0?n:[];return r==null?ja.NaN:new ja(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Ol(e)&&(this.unit=""),n!==""&&!M1e.test(n)&&(this.num=NaN,this.unit=""),F1e(n)&&(this.num=V1e(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new ja(NaN,""):new ja(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new ja(NaN,""):new ja(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ja(NaN,""):new ja(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ja(NaN,""):new ja(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ol(this.num)}}uU=ja;P1e(ja,"NaN",new uU(NaN,""));function cU(t){if(t==null||t.includes(Ih))return Ih;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=n6.exec(e))!==null&&n!==void 0?n:[],l=ja.parse(r??""),f=ja.parse(a??""),m=i==="*"?l.multiply(f):l.divide(f);if(m.isNaN())return Ih;e=e.replace(n6,m.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,[,b,_,T]=(p=r6.exec(e))!==null&&p!==void 0?p:[],R=ja.parse(b??""),j=ja.parse(T??""),M=_==="+"?R.add(j):R.subtract(j);if(M.isNaN())return Ih;e=e.replace(r6,M.toString())}return e}var i6=/\(([^()]*)\)/;function z1e(t){for(var e=t,n;(n=i6.exec(e))!=null;){var[,r]=n;e=e.replace(i6,cU(r))}return e}function U1e(t){var e=t.replace(/\s+/g,"");return e=z1e(e),e=cU(e),e}function q1e(t){try{return U1e(t)}catch{return Ih}}function EE(t){var e=q1e(t.slice(5,-1));return e===Ih?"":e}var G1e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],H1e=["dx","dy","angle","className","breakAll"];function _S(){return _S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_S.apply(null,arguments)}function a6(t,e){if(t==null)return{};var n,r,i=K1e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function K1e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var fU=/[ \f\n\r\t\v\u2028\u2029]+/,dU=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];li(e)||(n?i=e.toString().split(""):i=e.toString().split(fU));var a=i.map(f=>({word:f,width:dp(f,r).width})),l=n?0:dp("",r).width;return{wordsWithComputedWidth:a,spaceWidth:l}}catch{return null}};function W1e(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var hU=(t,e,n,r)=>t.reduce((i,a)=>{var{word:l,width:f}=a,m=i[i.length-1];if(m&&f!=null&&(e==null||r||m.width+f+n<Number(e)))m.words.push(l),m.width+=f+n;else{var p={words:[l],width:f};i.push(p)}return i},[]),mU=t=>t.reduce((e,n)=>e.width>n.width?e:n),$1e="",s6=(t,e,n,r,i,a,l,f)=>{var m=t.slice(0,e),p=dU({breakAll:n,style:r,children:m+$1e});if(!p)return[!1,[]];var b=hU(p.wordsWithComputedWidth,a,l,f),_=b.length>i||mU(b).width>Number(a);return[_,b]},Y1e=(t,e,n,r,i)=>{var{maxLines:a,children:l,style:f,breakAll:m}=t,p=Tt(a),b=String(l),_=hU(e,r,n,i);if(!p||i)return _;var T=_.length>a||mU(_).width>Number(r);if(!T)return _;for(var R=0,j=b.length-1,M=0,L;R<=j&&M<=b.length-1;){var z=Math.floor((R+j)/2),$=z-1,[K,J]=s6(b,$,m,f,a,r,n,i),[ce]=s6(b,z,m,f,a,r,n,i);if(!K&&!ce&&(R=z+1),K&&ce&&(j=z-1),!K&&ce){L=J;break}M++}return L||_},o6=t=>{var e=li(t)?[]:t.toString().split(fU);return[{words:e,width:void 0}]},X1e=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:l}=t;if((e||n)&&!Ab.isSsr){var f,m,p=dU({breakAll:a,children:r,style:i});if(p){var{wordsWithComputedWidth:b,spaceWidth:_}=p;f=b,m=_}else return o6(r);return Y1e({breakAll:a,children:r,maxLines:l,style:i},f,m,e,!!n)}return o6(r)},gU="#808080",Q1e={angle:0,breakAll:!1,capHeight:"0.71em",fill:gU,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},qb=D.forwardRef((t,e)=>{var n=Zi(t,Q1e),{x:r,y:i,lineHeight:a,capHeight:l,fill:f,scaleToFit:m,textAnchor:p,verticalAnchor:b}=n,_=a6(n,G1e),T=D.useMemo(()=>X1e({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:m,style:_.style,width:_.width}),[_.breakAll,_.children,_.maxLines,m,_.style,_.width]),{dx:R,dy:j,angle:M,className:L,breakAll:z}=_,$=a6(_,H1e);if(!Io(r)||!Io(i)||T.length===0)return null;var K=Number(r)+(Tt(R)?R:0),J=Number(i)+(Tt(j)?j:0);if(!mn(K)||!mn(J))return null;var ce;switch(b){case"start":ce=EE("calc(".concat(l,")"));break;case"middle":ce=EE("calc(".concat((T.length-1)/2," * -").concat(a," + (").concat(l," / 2))"));break;default:ce=EE("calc(".concat(T.length-1," * -").concat(a,")"));break}var Z=[],V=T[0];if(m&&V!=null){var W=V.width,{width:U}=_;Z.push("scale(".concat(Tt(U)&&Tt(W)?U/W:1,")"))}return M&&Z.push("rotate(".concat(M,", ").concat(K,", ").concat(J,")")),Z.length&&($.transform=Z.join(" ")),D.createElement("text",_S({},as($),{ref:e,x:K,y:J,className:Hn("recharts-text",L),textAnchor:p,fill:f.includes("url")?gU:f}),T.map((ae,ie)=>{var Q=ae.words.join(z?"":" ");return D.createElement("tspan",{x:K,dy:ie===0?ce:a,key:"".concat(Q,"-").concat(ie)},Q)}))});qb.displayName="Text";function l6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l6(Object(n),!0).forEach(function(r){Z1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Z1e(t,e,n){return(e=J1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J1e(t){var e=eye(t,"string");return typeof e=="symbol"?e:e+""}function eye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tye=t=>{var{viewBox:e,position:n,offset:r=0,parentViewBox:i}=t,{x:a,y:l,height:f,upperWidth:m,lowerWidth:p}=FI(e),b=a,_=a+(m-p)/2,T=(b+_)/2,R=(m+p)/2,j=b+m/2,M=f>=0?1:-1,L=M*r,z=M>0?"end":"start",$=M>0?"start":"end",K=m>=0?1:-1,J=K*r,ce=K>0?"end":"start",Z=K>0?"start":"end",V=i;if(n==="top"){var W={x:b+m/2,y:l-L,horizontalAnchor:"middle",verticalAnchor:z};return V&&(W.height=Math.max(l-V.y,0),W.width=m),W}if(n==="bottom"){var U={x:_+p/2,y:l+f+L,horizontalAnchor:"middle",verticalAnchor:$};return V&&(U.height=Math.max(V.y+V.height-(l+f),0),U.width=p),U}if(n==="left"){var ae={x:T-J,y:l+f/2,horizontalAnchor:ce,verticalAnchor:"middle"};return V&&(ae.width=Math.max(ae.x-V.x,0),ae.height=f),ae}if(n==="right"){var ie={x:T+R+J,y:l+f/2,horizontalAnchor:Z,verticalAnchor:"middle"};return V&&(ie.width=Math.max(V.x+V.width-ie.x,0),ie.height=f),ie}var Q=V?{width:R,height:f}:{};return n==="insideLeft"?hl({x:T+J,y:l+f/2,horizontalAnchor:Z,verticalAnchor:"middle"},Q):n==="insideRight"?hl({x:T+R-J,y:l+f/2,horizontalAnchor:ce,verticalAnchor:"middle"},Q):n==="insideTop"?hl({x:b+m/2,y:l+L,horizontalAnchor:"middle",verticalAnchor:$},Q):n==="insideBottom"?hl({x:_+p/2,y:l+f-L,horizontalAnchor:"middle",verticalAnchor:z},Q):n==="insideTopLeft"?hl({x:b+J,y:l+L,horizontalAnchor:Z,verticalAnchor:$},Q):n==="insideTopRight"?hl({x:b+m-J,y:l+L,horizontalAnchor:ce,verticalAnchor:$},Q):n==="insideBottomLeft"?hl({x:_+J,y:l+f-L,horizontalAnchor:Z,verticalAnchor:z},Q):n==="insideBottomRight"?hl({x:_+p-J,y:l+f-L,horizontalAnchor:ce,verticalAnchor:z},Q):n&&typeof n=="object"&&(Tt(n.x)||gd(n.x))&&(Tt(n.y)||gd(n.y))?hl({x:a+is(n.x,R),y:l+is(n.y,f),horizontalAnchor:"end",verticalAnchor:"end"},Q):hl({x:j,y:l+f/2,horizontalAnchor:"middle",verticalAnchor:"middle"},Q)},nye=["labelRef"],rye=["content"];function u6(t,e){if(t==null)return{};var n,r,i=iye(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function iye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function c6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c6(Object(n),!0).forEach(function(r){aye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aye(t,e,n){return(e=sye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sye(t){var e=oye(t,"string");return typeof e=="symbol"?e:e+""}function oye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function su(){return su=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},su.apply(null,arguments)}var pU=D.createContext(null),yU=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:l,children:f}=t,m=D.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:l}),[e,n,r,i,a,l]);return D.createElement(pU.Provider,{value:m},f)},vU=()=>{var t=D.useContext(pU),e=E0();return t||(e?FI(e):void 0)},lye=D.createContext(null),uye=()=>{var t=D.useContext(lye),e=It(sz);return t||e},cye=t=>{var{value:e,formatter:n}=t,r=li(t.children)?e:t.children;return typeof n=="function"?n(r):r},eO=t=>t!=null&&typeof t=="function",fye=(t,e)=>{var n=pa(e-t),r=Math.min(Math.abs(e-t),360);return n*r},dye=(t,e,n,r,i)=>{var{offset:a,className:l}=t,{cx:f,cy:m,innerRadius:p,outerRadius:b,startAngle:_,endAngle:T,clockWise:R}=i,j=(p+b)/2,M=fye(_,T),L=M>=0?1:-1,z,$;switch(e){case"insideStart":z=_+L*a,$=R;break;case"insideEnd":z=T-L*a,$=!R;break;case"end":z=T+L*a,$=R;break;default:throw new Error("Unsupported position ".concat(e))}$=M<=0?$:!$;var K=zi(f,m,j,z),J=zi(f,m,j,z+($?1:-1)*359),ce="M".concat(K.x,",").concat(K.y,`
    A`).concat(j,",").concat(j,",0,1,").concat($?0:1,`,
    `).concat(J.x,",").concat(J.y),Z=li(t.id)?Np("recharts-radial-line-"):t.id;return D.createElement("text",su({},r,{dominantBaseline:"central",className:Hn("recharts-radial-bar-label",l)}),D.createElement("defs",null,D.createElement("path",{id:Z,d:ce})),D.createElement("textPath",{xlinkHref:"#".concat(Z)},n))},hye=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:l,startAngle:f,endAngle:m}=t,p=(f+m)/2;if(n==="outside"){var{x:b,y:_}=zi(r,i,l+e,p);return{x:b,y:_,textAnchor:b>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var T=(a+l)/2,{x:R,y:j}=zi(r,i,T,p);return{x:R,y:j,textAnchor:"middle",verticalAnchor:"middle"}},Vy=t=>t!=null&&"cx"in t&&Tt(t.cx),mye={angle:0,offset:5,zIndex:Ii.label,position:"middle",textBreakAll:!1};function gye(t){if(!Vy(t))return t;var{cx:e,cy:n,outerRadius:r}=t,i=r*2;return{x:e-r,y:n-r,width:i,upperWidth:i,lowerWidth:i,height:i}}function xc(t){var e=Zi(t,mye),{viewBox:n,parentViewBox:r,position:i,value:a,children:l,content:f,className:m="",textBreakAll:p,labelRef:b}=e,_=uye(),T=vU(),R=i==="center"?T:_??T,j,M,L;n==null?j=R:Vy(n)?j=n:j=FI(n);var z=gye(j);if(!j||li(a)&&li(l)&&!D.isValidElement(f)&&typeof f!="function")return null;var $=Jg(Jg({},e),{},{viewBox:j});if(D.isValidElement(f)){var{labelRef:K}=$,J=u6($,nye);return D.cloneElement(f,J)}if(typeof f=="function"){var{content:ce}=$,Z=u6($,rye);if(M=D.createElement(f,Z),D.isValidElement(M))return M}else M=cye(e);var V=as(e);if(Vy(j)){if(i==="insideStart"||i==="insideEnd"||i==="end")return dye(e,i,M,V,j);L=hye(j,e.offset,e.position)}else{if(!z)return null;var W=tye({viewBox:z,position:i,offset:e.offset,parentViewBox:Vy(r)?void 0:r});L=Jg(Jg({x:W.x,y:W.y,textAnchor:W.horizontalAnchor,verticalAnchor:W.verticalAnchor},W.width!==void 0?{width:W.width}:{}),W.height!==void 0?{height:W.height}:{})}return D.createElement(ms,{zIndex:e.zIndex},D.createElement(qb,su({ref:b,className:Hn("recharts-label",m)},V,L,{textAnchor:W1e(V.textAnchor)?V.textAnchor:L.textAnchor,breakAll:p}),M))}xc.displayName="Label";var pye=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?D.createElement(xc,su({key:"label-implicit"},r)):Io(t)?D.createElement(xc,su({key:"label-implicit",value:t},r)):D.isValidElement(t)?t.type===xc?D.cloneElement(t,Jg({key:"label-implicit"},r)):D.createElement(xc,su({key:"label-implicit",content:t},r)):eO(t)?D.createElement(xc,su({key:"label-implicit",content:t},r)):t&&typeof t=="object"?D.createElement(xc,su({},t,{key:"label-implicit"},r)):null};function xU(t){var{label:e,labelRef:n}=t,r=vU();return pye(e,r,n)||null}var AE={},SE={},f6;function yye(){return f6||(f6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(SE)),SE}var TE={},d6;function vye(){return d6||(d6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(TE)),TE}var h6;function xye(){return h6||(h6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yye(),n=vye(),r=CI();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(AE)),AE}var IE,m6;function bye(){return m6||(m6=1,IE=xye().last),IE}var wye=bye();const _ye=Pl(wye);var Eye=["valueAccessor"],Aye=["dataKey","clockWise","id","textBreakAll","zIndex"];function fx(){return fx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fx.apply(null,arguments)}function g6(t,e){if(t==null)return{};var n,r,i=Sye(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Sye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Tye=t=>Array.isArray(t.value)?_ye(t.value):t.value,bU=D.createContext(void 0),wU=bU.Provider,_U=D.createContext(void 0),Iye=_U.Provider;function Cye(){return D.useContext(bU)}function Oye(){return D.useContext(_U)}function zy(t){var{valueAccessor:e=Tye}=t,n=g6(t,Eye),{dataKey:r,clockWise:i,id:a,textBreakAll:l,zIndex:f}=n,m=g6(n,Aye),p=Cye(),b=Oye(),_=p||b;return!_||!_.length?null:D.createElement(ms,{zIndex:f??Ii.label},D.createElement(Xi,{className:"recharts-label-list"},_.map((T,R)=>{var j,M=li(r)?e(T,R):br(T.payload,r),L=li(a)?{}:{id:"".concat(a,"-").concat(R)};return D.createElement(xc,fx({key:"label-".concat(R)},as(T),m,L,{fill:(j=n.fill)!==null&&j!==void 0?j:T.fill,parentViewBox:T.parentViewBox,value:M,textBreakAll:l,viewBox:T.viewBox,index:R,zIndex:0}))})))}zy.displayName="LabelList";function tO(t){var{label:e}=t;return e?e===!0?D.createElement(zy,{key:"labelList-implicit"}):D.isValidElement(e)||eO(e)?D.createElement(zy,{key:"labelList-implicit",content:e}):typeof e=="object"?D.createElement(zy,fx({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function ES(){return ES=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ES.apply(null,arguments)}var EU=t=>{var{cx:e,cy:n,r,className:i}=t,a=Hn("recharts-dot",i);return Tt(e)&&Tt(n)&&Tt(r)?D.createElement("circle",ES({},so(t),II(t),{className:a,cx:e,cy:n,r})):null},AU=t=>t.graphicalItems.polarItems,Nye=Re([ui,D0],EC),Gb=Re([AU,xi,Nye],AC),Rye=Re([Gb],SC),Hb=Re([Rye,Rb],TC),Pye=Re([Hb,xi,Gb],CC);Re([Hb,xi,Gb],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var a,l=br(r,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:br(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var p6=()=>{},Dye=Re([Hb,xi,Gb,Vb,ui],PC),kye=Re([xi,NC,RC,p6,Dye,p6,Wn,ui],DC),SU=Re([xi,Wn,Hb,Pye,P0,ui,kye],kC),Mye=Re([SU,Vm,df],LC),jye=Re([xi,SU,Mye,ui],FC);Re([df,jye],lz);var Lye={radiusAxis:{},angleAxis:{}},TU=Vs({name:"polarAxis",initialState:Lye,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:zEe,removeRadiusAxis:UEe,addAngleAxis:qEe,removeAngleAxis:GEe}=TU.actions,Bye=TU.reducer;function IU(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}function y6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function v6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y6(Object(n),!0).forEach(function(r){Fye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fye(t,e,n){return(e=Vye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vye(t){var e=zye(t,"string");return typeof e=="symbol"?e:e+""}function zye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uye=(t,e)=>e,nO=Re([AU,Uye],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),qye=[],rO=(t,e,n)=>n?.length===0?qye:n,CU=Re([Rb,nO,rO],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>v6(v6({},e.presentationProps),a.props))),i!=null)return i}}),Gye=Re([CU,nO,rO],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var a,l=br(r,e.nameKey,e.name),f;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?f=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?f=r.fill:f=e.fill,{value:Mm(l,e.dataKey),color:f,payload:r,type:e.legendType}})}),Hye=Re([CU,nO,rO,Ji],(t,e,n,r)=>{if(!(e==null||t==null))return Kve({offset:r,pieSettings:e,displayedData:t,cells:n})}),CE={exports:{}},xr={};var x6;function Kye(){if(x6)return xr;x6=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.view_transition"),R=Symbol.for("react.client.reference");function j(M){if(typeof M=="object"&&M!==null){var L=M.$$typeof;switch(L){case t:switch(M=M.type,M){case n:case i:case r:case m:case p:case T:return M;default:switch(M=M&&M.$$typeof,M){case l:case f:case _:case b:return M;case a:return M;default:return L}}case e:return L}}}return xr.ContextConsumer=a,xr.ContextProvider=l,xr.Element=t,xr.ForwardRef=f,xr.Fragment=n,xr.Lazy=_,xr.Memo=b,xr.Portal=e,xr.Profiler=i,xr.StrictMode=r,xr.Suspense=m,xr.SuspenseList=p,xr.isContextConsumer=function(M){return j(M)===a},xr.isContextProvider=function(M){return j(M)===l},xr.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===t},xr.isForwardRef=function(M){return j(M)===f},xr.isFragment=function(M){return j(M)===n},xr.isLazy=function(M){return j(M)===_},xr.isMemo=function(M){return j(M)===b},xr.isPortal=function(M){return j(M)===e},xr.isProfiler=function(M){return j(M)===i},xr.isStrictMode=function(M){return j(M)===r},xr.isSuspense=function(M){return j(M)===m},xr.isSuspenseList=function(M){return j(M)===p},xr.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===n||M===i||M===r||M===m||M===p||typeof M=="object"&&M!==null&&(M.$$typeof===_||M.$$typeof===b||M.$$typeof===l||M.$$typeof===a||M.$$typeof===f||M.$$typeof===R||M.getModuleId!==void 0)},xr.typeOf=j,xr}var b6;function Wye(){return b6||(b6=1,CE.exports=Kye()),CE.exports}var $ye=Wye(),w6=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",_6=null,OE=null,OU=t=>{if(t===_6&&Array.isArray(OE))return OE;var e=[];return D.Children.forEach(t,n=>{li(n)||($ye.isFragment(n)?e=e.concat(OU(n.props.children)):e.push(n))}),OE=e,_6=t,e};function iO(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>w6(i)):r=[w6(e)],OU(t).forEach(i=>{var a=md(i,"type.displayName")||md(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var NU=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,NE={},E6;function Yye(){return E6||(E6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(NE)),NE}var RE,A6;function Xye(){return A6||(A6=1,RE=Yye().isPlainObject),RE}var Qye=Xye();const Zye=Pl(Qye);var S6,T6,I6,C6,O6;function N6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function R6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N6(Object(n),!0).forEach(function(r){Jye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jye(t,e,n){return(e=eve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eve(t){var e=tve(t,"string");return typeof e=="symbol"?e:e+""}function tve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dx(){return dx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dx.apply(null,arguments)}function zg(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var P6=(t,e,n,r,i)=>{var a=n-r,l;return l=yi(S6||(S6=zg(["M ",",",""])),t,e),l+=yi(T6||(T6=zg(["L ",",",""])),t+n,e),l+=yi(I6||(I6=zg(["L ",",",""])),t+n-a/2,e+i),l+=yi(C6||(C6=zg(["L ",",",""])),t+n-a/2-r,e+i),l+=yi(O6||(O6=zg(["L ",","," Z"])),t,e),l},nve={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},rve=t=>{var e=Zi(t,nve),{x:n,y:r,upperWidth:i,lowerWidth:a,height:l,className:f}=e,{animationEasing:m,animationDuration:p,animationBegin:b,isUpdateAnimationActive:_}=e,T=D.useRef(null),[R,j]=D.useState(-1),M=D.useRef(i),L=D.useRef(a),z=D.useRef(l),$=D.useRef(n),K=D.useRef(r),J=I0(t,"trapezoid-");if(D.useEffect(()=>{if(T.current&&T.current.getTotalLength)try{var be=T.current.getTotalLength();be&&j(be)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||l!==+l||i===0&&a===0||l===0)return null;var ce=Hn("recharts-trapezoid",f);if(!_)return D.createElement("g",null,D.createElement("path",dx({},as(e),{className:ce,d:P6(n,r,i,a,l)})));var Z=M.current,V=L.current,W=z.current,U=$.current,ae=K.current,ie="0px ".concat(R===-1?1:R,"px"),Q="".concat(R,"px 0px"),ne=ZF(["strokeDasharray"],p,m);return D.createElement(T0,{animationId:J,key:J,canBegin:R>0,duration:p,easing:m,isActive:_,begin:b},be=>{var he=Jr(Z,i,be),ye=Jr(V,a,be),we=Jr(W,l,be),$e=Jr(U,n,be),et=Jr(ae,r,be);T.current&&(M.current=he,L.current=ye,z.current=we,$.current=$e,K.current=et);var rt=be>0?{transition:ne,strokeDasharray:Q}:{strokeDasharray:ie};return D.createElement("path",dx({},as(e),{className:ce,d:P6($e,et,he,ye,we),ref:T,style:R6(R6({},rt),e.style)}))})},ive=["option","shapeType","activeClassName"];function ave(t,e){if(t==null)return{};var n,r,i=sve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function D6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D6(Object(n),!0).forEach(function(r){ove(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ove(t,e,n){return(e=lve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lve(t){var e=uve(t,"string");return typeof e=="symbol"?e:e+""}function uve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cve(t,e){return hx(hx({},e),t)}function fve(t,e){return t==="symbols"}function k6(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return D.createElement(nV,n);case"trapezoid":return D.createElement(rve,n);case"sector":return D.createElement(sV,n);case"symbols":if(fve(e))return D.createElement(BB,n);break;case"curve":return D.createElement(UI,n);default:return null}}function dve(t){return D.isValidElement(t)?t.props:t}function aO(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=ave(t,ive),a;if(D.isValidElement(e))a=D.cloneElement(e,hx(hx({},i),dve(e)));else if(typeof e=="function")a=e(i,i.index);else if(Zye(e)&&typeof e!="boolean"){var l=cve(e,i);a=D.createElement(k6,{shapeType:n,elementProps:l})}else{var f=i;a=D.createElement(k6,{shapeType:n,elementProps:f})}return i.isActive?D.createElement(Xi,{className:r},a):a}var sO=(t,e,n)=>{var r=Gr();return(i,a)=>l=>{t?.(i,a,l),r(Bz({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},oO=t=>{var e=Gr();return(n,r)=>i=>{t?.(n,r,i),e(ppe())}},lO=(t,e,n)=>{var r=Gr();return(i,a)=>l=>{t?.(i,a,l),r(ype({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function uO(t){var{tooltipEntrySettings:e}=t,n=Gr(),r=Ba(),i=D.useRef(null);return D.useLayoutEffect(()=>{r||(i.current===null?n(dpe(e)):i.current!==e&&n(hpe({prev:i.current,next:e})),i.current=e)},[e,n,r]),D.useLayoutEffect(()=>()=>{i.current&&(n(mpe(i.current)),i.current=null)},[n]),null}function RU(t){var{legendPayload:e}=t,n=Gr(),r=Ba(),i=D.useRef(null);return D.useLayoutEffect(()=>{r||(i.current===null?n($F(e)):i.current!==e&&n(YF({prev:i.current,next:e})),i.current=e)},[n,r,e]),D.useLayoutEffect(()=>()=>{i.current&&(n(XF(i.current)),i.current=null)},[n]),null}function hve(t){var{legendPayload:e}=t,n=Gr(),r=It(Wn),i=D.useRef(null);return D.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n($F(e)):i.current!==e&&n(YF({prev:i.current,next:e})),i.current=e)},[n,r,e]),D.useLayoutEffect(()=>()=>{i.current&&(n(XF(i.current)),i.current=null)},[n]),null}var PE,mve=()=>{var[t]=D.useState(()=>Np("uid-"));return t},gve=(PE=qG.useId)!==null&&PE!==void 0?PE:mve;function pve(t,e){var n=gve();return e||(t?"".concat(t,"-").concat(n):n)}var yve=D.createContext(void 0),cO=t=>{var{id:e,type:n,children:r}=t,i=pve("recharts-".concat(n),e);return D.createElement(yve.Provider,{value:i},r(i))},vve={cartesianItems:[],polarItems:[]},PU=Vs({name:"graphicalItems",initialState:vve,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Qr()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Wo(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Qr()},removeCartesianGraphicalItem:{reducer(t,e){var n=Wo(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Qr()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Qr()},removePolarGraphicalItem:{reducer(t,e){var n=Wo(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Qr()}}}),{addCartesianGraphicalItem:xve,replaceCartesianGraphicalItem:bve,removeCartesianGraphicalItem:wve,addPolarGraphicalItem:_ve,removePolarGraphicalItem:Eve}=PU.actions,Ave=PU.reducer,Sve=t=>{var e=Gr(),n=D.useRef(null);return D.useLayoutEffect(()=>{n.current===null?e(xve(t)):n.current!==t&&e(bve({prev:n.current,next:t})),n.current=t},[e,t]),D.useLayoutEffect(()=>()=>{n.current&&(e(wve(n.current)),n.current=null)},[e]),null},DU=D.memo(Sve);function Tve(t){var e=Gr();return D.useLayoutEffect(()=>(e(_ve(t)),()=>{e(Eve(t))}),[e,t]),null}var Ive=["key"],Cve=["onMouseEnter","onClick","onMouseLeave"],Ove=["id"],Nve=["id"];function M6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M6(Object(n),!0).forEach(function(r){Rve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rve(t,e,n){return(e=Pve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pve(t){var e=Dve(t,"string");return typeof e=="symbol"?e:e+""}function Dve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zc(){return Zc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zc.apply(null,arguments)}function Kb(t,e){if(t==null)return{};var n,r,i=kve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Mve(t){var e=D.useMemo(()=>iO(t.children,F0),[t.children]),n=It(r=>Gye(r,t.id,e));return n==null?null:D.createElement(hve,{legendPayload:n})}var jve=D.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:l,name:f,hide:m,tooltipType:p,id:b}=t,_={dataDefinedOnItem:r.map(T=>T.tooltipPayload),getPosition:T=>{var R;return(R=r[Number(T)])===null||R===void 0?void 0:R.tooltipPosition},settings:{stroke:i,strokeWidth:a,fill:l,dataKey:e,nameKey:n,name:Mm(f,e),hide:m,type:p,color:l,unit:"",graphicalItemId:b}};return D.createElement(uO,{tooltipEntrySettings:_})}),Lve=(t,e)=>t>e?"start":t<e?"end":"middle",Bve=(t,e,n)=>is(typeof e=="function"?e(t):e,n,n*.8),Fve=(t,e,n)=>{var{top:r,left:i,width:a,height:l}=e,f=rV(a,l),m=i+is(t.cx,a,a/2),p=r+is(t.cy,l,l/2),b=is(t.innerRadius,f,0),_=Bve(n,t.outerRadius,f),T=t.maxRadius||Math.sqrt(a*a+l*l)/2;return{cx:m,cy:p,innerRadius:b,outerRadius:_,maxRadius:T}},Vve=(t,e)=>{var n=pa(e-t),r=Math.min(Math.abs(e-t),360);return n*r},zve=(t,e)=>{if(D.isValidElement(t))return D.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Hn("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=Kb(e,Ive);return D.createElement(UI,Zc({},i,{type:"linear",className:n}))},Uve=(t,e,n)=>{if(D.isValidElement(t))return D.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),D.isValidElement(r)))return r;var i=Hn("recharts-pie-label-text",IU(t));return D.createElement(qb,Zc({},e,{alignmentBaseline:"middle",className:i}),r)};function qve(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:a,dataKey:l}=n;if(!r||!i||!e)return null;var f=so(n),m=dd(i),p=dd(a),b=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,_=e.map((T,R)=>{var j=(T.startAngle+T.endAngle)/2,M=zi(T.cx,T.cy,T.outerRadius+b,j),L=vi(vi(vi(vi({},f),T),{},{stroke:"none"},m),{},{index:R,textAnchor:Lve(M.x,T.cx)},M),z=vi(vi(vi(vi({},f),T),{},{fill:"none",stroke:T.fill},p),{},{index:R,points:[zi(T.cx,T.cy,T.outerRadius,j),M],key:"line"});return D.createElement(ms,{zIndex:Ii.label,key:"label-".concat(T.startAngle,"-").concat(T.endAngle,"-").concat(T.midAngle,"-").concat(R)},D.createElement(Xi,null,a&&zve(a,z),Uve(i,L,br(T,l))))});return D.createElement(Xi,{className:"recharts-pie-labels"},_)}function Gve(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?D.createElement(tO,{label:i}):D.createElement(qve,{sectors:e,props:n,showLabels:r})}function Hve(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:a,id:l}=t,f=It(Qc),m=It($C),p=It(n0e),{onMouseEnter:b,onClick:_,onMouseLeave:T}=i,R=Kb(i,Cve),j=sO(b,i.dataKey,l),M=oO(T),L=lO(_,i.dataKey,l);return e==null||e.length===0?null:D.createElement(D.Fragment,null,e.map((z,$)=>{if(z?.startAngle===0&&z?.endAngle===0&&e.length!==1)return null;var K=p==null||p===l,J=String($)===f&&(m==null||i.dataKey===m)&&K,ce=f?r:null,Z=n&&J?n:ce,V=vi(vi({},z),{},{stroke:z.stroke,tabIndex:-1,[RF]:$,[PF]:l});return D.createElement(Xi,Zc({key:"sector-".concat(z?.startAngle,"-").concat(z?.endAngle,"-").concat(z.midAngle,"-").concat($),tabIndex:-1,className:"recharts-pie-sector"},sb(R,z,$),{onMouseEnter:j(z,$),onMouseLeave:M(z,$),onClick:L(z,$)}),D.createElement(aO,Zc({option:a??Z,index:$,shapeType:"sector",isActive:J},V)))}))}function Kve(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:a}=t,{cornerRadius:l,startAngle:f,endAngle:m,dataKey:p,nameKey:b,tooltipType:_}=n,T=Math.abs(n.minAngle),R=Vve(f,m),j=Math.abs(R),M=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,L=r.filter(Z=>br(Z,p,0)!==0).length,z=(j>=360?L:L-1)*M,$=j-L*T-z,K=r.reduce((Z,V)=>{var W=br(V,p,0);return Z+(Tt(W)?W:0)},0),J;if(K>0){var ce;J=r.map((Z,V)=>{var W=br(Z,p,0),U=br(Z,b,V),ae=Fve(n,a,Z),ie=(Tt(W)?W:0)/K,Q,ne=vi(vi({},Z),i&&i[V]&&i[V].props);V?Q=ce.endAngle+pa(R)*M*(W!==0?1:0):Q=f;var be=Q+pa(R)*((W!==0?T:0)+ie*$),he=(Q+be)/2,ye=(ae.innerRadius+ae.outerRadius)/2,we=[{name:U,value:W,payload:ne,dataKey:p,type:_,graphicalItemId:n.id}],$e=zi(ae.cx,ae.cy,ye,he);return ce=vi(vi(vi(vi({},n.presentationProps),{},{percent:ie,cornerRadius:typeof l=="string"?parseFloat(l):l,name:U,tooltipPayload:we,midAngle:he,middleRadius:ye,tooltipPosition:$e},ne),ae),{},{value:W,dataKey:p,startAngle:Q,endAngle:be,payload:ne,paddingAngle:pa(R)*M}),ce})}return J}function Wve(t){var{showLabels:e,sectors:n,children:r}=t,i=D.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return D.createElement(Iye,{value:e?i:void 0},r)}function $ve(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:a,animationBegin:l,animationDuration:f,animationEasing:m,activeShape:p,inactiveShape:b,onAnimationStart:_,onAnimationEnd:T}=e,R=I0(e,"recharts-pie-"),j=n.current,[M,L]=D.useState(!1),z=D.useCallback(()=>{typeof T=="function"&&T(),L(!1)},[T]),$=D.useCallback(()=>{typeof _=="function"&&_(),L(!0)},[_]);return D.createElement(Wve,{showLabels:!M,sectors:i},D.createElement(T0,{animationId:R,begin:l,duration:f,isActive:a,easing:m,onAnimationStart:$,onAnimationEnd:z,key:R},K=>{var J,ce=[],Z=i&&i[0],V=(J=Z?.startAngle)!==null&&J!==void 0?J:0;return i?.forEach((W,U)=>{var ae=j&&j[U],ie=U>0?md(W,"paddingAngle",0):0;if(ae){var Q=Jr(ae.endAngle-ae.startAngle,W.endAngle-W.startAngle,K),ne=vi(vi({},W),{},{startAngle:V+ie,endAngle:V+Q+ie});ce.push(ne),V=ne.endAngle}else{var{endAngle:be,startAngle:he}=W,ye=Jr(0,be-he,K),we=vi(vi({},W),{},{startAngle:V+ie,endAngle:V+ye+ie});ce.push(we),V=we.endAngle}}),n.current=ce,D.createElement(Xi,null,D.createElement(Hve,{sectors:ce,activeShape:p,inactiveShape:b,allOtherPieProps:e,shape:e.shape,id:r}))}),D.createElement(Gve,{showLabels:!M,sectors:i,props:e}),e.children)}var Yve={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ii.area};function Xve(t){var{id:e}=t,n=Kb(t,Ove),{hide:r,className:i,rootTabIndex:a}=t,l=D.useMemo(()=>iO(t.children,F0),[t.children]),f=It(b=>Hye(b,e,l)),m=D.useRef(null),p=Hn("recharts-pie",i);return r||f==null?(m.current=null,D.createElement(Xi,{tabIndex:a,className:p})):D.createElement(ms,{zIndex:t.zIndex},D.createElement(jve,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:f,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),D.createElement(Xi,{tabIndex:a,className:p},D.createElement($ve,{props:vi(vi({},n),{},{sectors:f}),previousSectorsRef:m,id:e})))}function kU(t){var e=Zi(t,Yve),{id:n}=e,r=Kb(e,Nve),i=so(r);return D.createElement(cO,{id:n,type:"pie"},a=>D.createElement(D.Fragment,null,D.createElement(Tve,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),D.createElement(Mve,Zc({},r,{id:a})),D.createElement(Xve,Zc({},r,{id:a}))))}kU.displayName="Pie";var Qve=["points"];function j6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j6(Object(n),!0).forEach(function(r){Zve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zve(t,e,n){return(e=Jve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jve(t){var e=exe(t,"string");return typeof e=="symbol"?e:e+""}function exe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mx(){return mx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mx.apply(null,arguments)}function txe(t,e){if(t==null)return{};var n,r,i=nxe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function nxe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function rxe(t){var{option:e,dotProps:n,className:r}=t;if(D.isValidElement(e))return D.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Hn(r,typeof e!="boolean"?e.className:""),a=n??{},{points:l}=a,f=txe(a,Qve);return D.createElement(EU,mx({},f,{className:i}))}function ixe(t,e){return t==null?!1:e?!0:t.length===1}function axe(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:a,baseProps:l,needClip:f,clipPathId:m,zIndex:p=Ii.scatter}=t;if(!ixe(e,n))return null;var b=NU(n),_=Gse(n),T=e.map((j,M)=>{var L,z,$=DE(DE(DE({r:3},l),_),{},{index:M,cx:(L=j.x)!==null&&L!==void 0?L:void 0,cy:(z=j.y)!==null&&z!==void 0?z:void 0,dataKey:a,value:j.value,payload:j.payload,points:e});return D.createElement(rxe,{key:"dot-".concat(M),option:n,dotProps:$,className:i})}),R={};return f&&m!=null&&(R.clipPath="url(#clipPath-".concat(b?"":"dots-").concat(m,")")),D.createElement(ms,{zIndex:p},D.createElement(Xi,mx({className:r},R),T))}function L6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function B6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L6(Object(n),!0).forEach(function(r){sxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sxe(t,e,n){return(e=oxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oxe(t){var e=lxe(t,"string");return typeof e=="symbol"?e:e+""}function lxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MU=0,uxe={xAxis:{},yAxis:{},zAxis:{}},jU=Vs({name:"cartesianAxis",initialState:uxe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Qr()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Qr()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Qr()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Qr()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Qr()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Qr()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Qr()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Qr()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Qr()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a,l=i.widthHistory||[];if(l.length===3&&l[0]===l[2]&&r===l[1]&&r!==i.width&&Math.abs(r-((a=l[0])!==null&&a!==void 0?a:0))<=1)return;var f=[...l,r].slice(-3);t.yAxis[n]=B6(B6({},i),{},{width:r,widthHistory:f})}}}}),{addXAxis:cxe,replaceXAxis:fxe,removeXAxis:dxe,addYAxis:hxe,replaceYAxis:mxe,removeYAxis:gxe,addZAxis:HEe,replaceZAxis:KEe,removeZAxis:WEe,updateYAxisWidth:pxe}=jU.actions,yxe=jU.reducer,vxe=Re([Ji],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),xxe=Re([vxe,Lu,Bu],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),fO=()=>It(xxe),bxe=()=>It(o0e);function F6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F6(Object(n),!0).forEach(function(r){wxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wxe(t,e,n){return(e=_xe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _xe(t){var e=Exe(t,"string");return typeof e=="symbol"?e:e+""}function Exe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Axe=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:a,clipPath:l}=t;if(i===!1||e.x==null||e.y==null)return null;var f={index:n,dataKey:a,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},m=kE(kE(kE({},f),dd(i)),II(i)),p;return D.isValidElement(i)?p=D.cloneElement(i,m):typeof i=="function"?p=i(m):p=D.createElement(EU,m),D.createElement(Xi,{className:"recharts-active-dot",clipPath:l},p)};function Sxe(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:a,zIndex:l=Ii.activeDot}=t,f=It(Qc),m=bxe();if(e==null||m==null)return null;var p=e.find(b=>m.includes(b.payload));return li(p)?null:D.createElement(ms,{zIndex:l},D.createElement(Axe,{point:p,childIndex:Number(f),mainColor:n,dataKey:i,activeDot:r,clipPath:a}))}var V6=(t,e,n)=>{var r=n??t;if(!li(r))return is(r,e,0)},Txe=(t,e,n)=>{var r={},i=t.filter(Mb),a=t.filter(p=>p.stackId==null),l=i.reduce((p,b)=>{var _=p[b.stackId];return _==null&&(_=[]),_.push(b),p[b.stackId]=_,p},r),f=Object.entries(l).map(p=>{var b,[_,T]=p,R=T.map(M=>M.dataKey),j=V6(e,n,(b=T[0])===null||b===void 0?void 0:b.barSize);return{stackId:_,dataKeys:R,barSize:j}}),m=a.map(p=>{var b=[p.dataKey].filter(T=>T!=null),_=V6(e,n,p.barSize);return{stackId:void 0,dataKeys:b,barSize:_}});return[...f,...m]};function z6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function my(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z6(Object(n),!0).forEach(function(r){Ixe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ixe(t,e,n){return(e=Cxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cxe(t){var e=Oxe(t,"string");return typeof e=="symbol"?e:e+""}function Oxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nxe(t,e,n,r,i){var a,l=r.length;if(!(l<1)){var f=is(t,n,0,!0),m,p=[];if(mn((a=r[0])===null||a===void 0?void 0:a.barSize)){var b=!1,_=n/l,T=r.reduce(($,K)=>$+(K.barSize||0),0);T+=(l-1)*f,T>=n&&(T-=(l-1)*f,f=0),T>=n&&_>0&&(b=!0,_*=.9,T=l*_);var R=(n-T)/2>>0,j={offset:R-f,size:0};m=r.reduce(($,K)=>{var J,ce={stackId:K.stackId,dataKeys:K.dataKeys,position:{offset:j.offset+j.size+f,size:b?_:(J=K.barSize)!==null&&J!==void 0?J:0}},Z=[...$,ce];return j=ce.position,Z},p)}else{var M=is(e,n,0,!0);n-2*M-(l-1)*f<=0&&(f=0);var L=(n-2*M-(l-1)*f)/l;L>1&&(L>>=0);var z=mn(i)?Math.min(L,i):L;m=r.reduce(($,K,J)=>[...$,{stackId:K.stackId,dataKeys:K.dataKeys,position:{offset:M+(L+f)*J+(L-z)/2,size:z}}],p)}return m}}var Rxe=(t,e,n,r,i,a,l)=>{var f=li(l)?e:l,m=Nxe(n,r,i!==a?i:a,t,f);return i!==a&&m!=null&&(m=m.map(p=>my(my({},p),{},{position:my(my({},p.position),{},{offset:p.position.offset-i/2})}))),m},Pxe=(t,e)=>{var n=wC(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(l=>l.key===n)}}}},Dxe=(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}};function kxe(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&mn(t.zIndex)?t.zIndex:e}var LU=t=>{var{chartData:e}=t,n=Gr(),r=Ba();return D.useEffect(()=>r?()=>{}:(n(W8(e)),()=>{n(W8(void 0))}),[e,n,r]),null},U6={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},BU=Vs({name:"brush",initialState:U6,reducers:{setBrushSettings(t,e){return e.payload==null?U6:e.payload}}}),{setBrushSettings:$Ee}=BU.actions,Mxe=BU.reducer,jxe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},Lxe=t=>{var{x1:e,y1:n,x2:r,y2:i}=t;return jxe({x:e,y:n},{x:r,y:i})};function Bxe(t){return(t%180+180)%180}var Fxe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Bxe(i),l=a*Math.PI/180,f=Math.atan(r/n),m=l>f&&l<Math.PI-f?r/Math.sin(l):n/Math.cos(l);return Math.abs(m)},Vxe={dots:[],areas:[],lines:[]},FU=Vs({name:"referenceElements",initialState:Vxe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Wo(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Wo(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Wo(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:YEe,removeDot:XEe,addArea:QEe,removeArea:ZEe,addLine:zxe,removeLine:Uxe}=FU.actions,qxe=FU.reducer,VU=D.createContext(void 0),Gxe=t=>{var{children:e}=t,[n]=D.useState("".concat(Np("recharts"),"-clip")),r=fO();if(r==null)return null;var{x:i,y:a,width:l,height:f}=r;return D.createElement(VU.Provider,{value:n},D.createElement("defs",null,D.createElement("clipPath",{id:n},D.createElement("rect",{x:i,y:a,height:f,width:l}))),e)},Hxe=()=>D.useContext(VU);class Kxe{constructor(e){var{x:n,y:r}=e;this.xAxisScale=n,this.yAxisScale=r}map(e,n){var r,i,{position:a}=n;return{x:(r=this.xAxisScale.map(e.x,{position:a}))!==null&&r!==void 0?r:0,y:(i=this.yAxisScale.map(e.y,{position:a}))!==null&&i!==void 0?i:0}}mapWithFallback(e,n){var r,i,{position:a,fallback:l}=n,f,m;return l==="rangeMin"?f=this.yAxisScale.rangeMin():l==="rangeMax"?f=this.yAxisScale.rangeMax():f=0,l==="rangeMin"?m=this.xAxisScale.rangeMin():l==="rangeMax"?m=this.xAxisScale.rangeMax():m=0,{x:(r=this.xAxisScale.map(e.x,{position:a}))!==null&&r!==void 0?r:m,y:(i=this.yAxisScale.map(e.y,{position:a}))!==null&&i!==void 0?i:f}}isInRange(e){var{x:n,y:r}=e,i=n==null||this.xAxisScale.isInRange(n),a=r==null||this.yAxisScale.isInRange(r);return i&&a}}function q6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q6(Object(n),!0).forEach(function(r){Wxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wxe(t,e,n){return(e=$xe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $xe(t){var e=Yxe(t,"string");return typeof e=="symbol"?e:e+""}function Yxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gx(){return gx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gx.apply(null,arguments)}var Xxe=(t,e)=>{var n;if(D.isValidElement(t))n=D.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!mn(e.x1)||!mn(e.y1)||!mn(e.x2)||!mn(e.y2))return null;n=D.createElement("line",gx({},e,{className:"recharts-reference-line-line"}))}return n},Qxe=(t,e,n,r,i,a)=>{var{x:l,width:f}=a,m=i.map(t,{position:n});if(!mn(m)||e==="discard"&&!i.isInRange(m))return null;var p=[{x:l+f,y:m},{x:l,y:m}];return r==="left"?p.reverse():p},Zxe=(t,e,n,r,i,a)=>{var{y:l,height:f}=a,m=i.map(t,{position:n});if(!mn(m)||e==="discard"&&!i.isInRange(m))return null;var p=[{x:m,y:l+f},{x:m,y:l}];return r==="top"?p.reverse():p},Jxe=(t,e,n,r)=>{var i=[r.mapWithFallback(t[0],{position:n,fallback:"rangeMin"}),r.mapWithFallback(t[1],{position:n,fallback:"rangeMax"})];return e==="discard"&&i.some(a=>!r.isInRange(a))?null:i},ebe=(t,e,n,r,i,a,l)=>{var{x:f,y:m,segment:p,ifOverflow:b}=l,_=Io(f),T=Io(m);return T?Qxe(m,b,r,a,e,n):_?Zxe(f,b,r,i,t,n):p!=null&&p.length===2?Jxe(p,b,r,new Kxe({x:t,y:e})):null};function tbe(t){var e=Gr();return D.useEffect(()=>(e(zxe(t)),()=>{e(Uxe(t))})),null}function nbe(t){var{xAxisId:e,yAxisId:n,shape:r,className:i,ifOverflow:a}=t,l=Ba(),f=Hxe(),m=It(V=>Ml(V,e)),p=It(V=>jl(V,n)),b=It(V=>gm(V,"xAxis",e,l)),_=It(V=>gm(V,"yAxis",n,l)),T=E0();if(!f||!T||m==null||p==null||b==null||_==null)return null;var R=ebe(b,_,T,t.position,m.orientation,p.orientation,t);if(!R)return null;var j=R[0],M=R[1];if(j==null||M==null)return null;var{x:L,y:z}=j,{x:$,y:K}=M,J=a==="hidden"?"url(#".concat(f,")"):void 0,ce=G6(G6({clipPath:J},as(t)),{},{x1:L,y1:z,x2:$,y2:K}),Z=Lxe({x1:L,y1:z,x2:$,y2:K});return D.createElement(ms,{zIndex:t.zIndex},D.createElement(Xi,{className:Hn("recharts-reference-line",i)},Xxe(r,ce),D.createElement(yU,gx({},Z,{lowerWidth:Z.width,upperWidth:Z.width}),D.createElement(xU,{label:t.label}),t.children)))}var rbe={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",label:!1,stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Ii.line};function AS(t){var e=Zi(t,rbe);return D.createElement(D.Fragment,null,D.createElement(tbe,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),D.createElement(nbe,e))}AS.displayName="ReferenceLine";function zU(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function ibe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Fxe(r,n)}function abe(t,e,n){var r=n==="width",{x:i,y:a,width:l,height:f}=t;return e===1?{start:r?i:a,end:r?i+l:a+f}:{start:r?i+l:a+f,end:r?i:a}}function Gp(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function sbe(t,e){return zU(t,e+1)}function obe(t,e,n,r,i){for(var a=(r||[]).slice(),{start:l,end:f}=e,m=0,p=1,b=l,_=function(){var j=r?.[m];if(j===void 0)return{v:zU(r,p)};var M=m,L,z=()=>(L===void 0&&(L=n(j,M)),L),$=j.coordinate,K=m===0||Gp(t,$,z,b,f);K||(m=0,b=l,p+=1),K&&(b=$+t*(z()/2+i),m+=p)},T;p<=a.length;)if(T=_(),T)return T.v;return[]}function lbe(t,e,n,r,i){var a=(r||[]).slice(),l=a.length;if(l===0)return[];for(var{start:f,end:m}=e,p=1;p<=l;p++){for(var b=(l-1)%p,_=f,T=!0,R=function(){var J=r[M];if(J==null)return 0;var ce=M,Z,V=()=>(Z===void 0&&(Z=n(J,ce)),Z),W=J.coordinate,U=M===b||Gp(t,W,V,_,m);if(!U)return T=!1,1;U&&(_=W+t*(V()/2+i))},j,M=b;M<l&&(j=R(),!(j!==0&&j===1));M+=p);if(T){for(var L=[],z=b;z<l;z+=p){var $=r[z];$!=null&&L.push($)}return L}}return[]}function H6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ja(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H6(Object(n),!0).forEach(function(r){ube(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ube(t,e,n){return(e=cbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cbe(t){var e=fbe(t,"string");return typeof e=="symbol"?e:e+""}function fbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dbe(t,e,n,r,i){for(var a=(r||[]).slice(),l=a.length,{start:f}=e,{end:m}=e,p=function(T){var R=a[T];if(R==null)return 1;var j=R,M,L=()=>(M===void 0&&(M=n(R,T)),M);if(T===l-1){var z=t*(j.coordinate+t*L()/2-m);a[T]=j=Ja(Ja({},j),{},{tickCoord:z>0?j.coordinate-z*t:j.coordinate})}else a[T]=j=Ja(Ja({},j),{},{tickCoord:j.coordinate});if(j.tickCoord!=null){var $=Gp(t,j.tickCoord,L,f,m);$&&(m=j.tickCoord-t*(L()/2+i),a[T]=Ja(Ja({},j),{},{isShow:!0}))}},b=l-1;b>=0;b--)p(b);return a}function hbe(t,e,n,r,i,a){var l=(r||[]).slice(),f=l.length,{start:m,end:p}=e;if(a){var b=r[f-1];if(b!=null){var _=n(b,f-1),T=t*(b.coordinate+t*_/2-p);if(l[f-1]=b=Ja(Ja({},b),{},{tickCoord:T>0?b.coordinate-T*t:b.coordinate}),b.tickCoord!=null){var R=Gp(t,b.tickCoord,()=>_,m,p);R&&(p=b.tickCoord-t*(_/2+i),l[f-1]=Ja(Ja({},b),{},{isShow:!0}))}}}for(var j=a?f-1:f,M=function($){var K=l[$];if(K==null)return 1;var J=K,ce,Z=()=>(ce===void 0&&(ce=n(K,$)),ce);if($===0){var V=t*(J.coordinate-t*Z()/2-m);l[$]=J=Ja(Ja({},J),{},{tickCoord:V<0?J.coordinate-V*t:J.coordinate})}else l[$]=J=Ja(Ja({},J),{},{tickCoord:J.coordinate});if(J.tickCoord!=null){var W=Gp(t,J.tickCoord,Z,m,p);W&&(m=J.tickCoord+t*(Z()/2+i),l[$]=Ja(Ja({},J),{},{isShow:!0}))}},L=0;L<j;L++)M(L);return l}function dO(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:l,orientation:f,interval:m,tickFormatter:p,unit:b,angle:_}=t;if(!i||!i.length||!r)return[];if(Tt(m)||Ab.isSsr){var T;return(T=sbe(i,Tt(m)?m:0))!==null&&T!==void 0?T:[]}var R=[],j=f==="top"||f==="bottom"?"width":"height",M=b&&j==="width"?dp(b,{fontSize:e,letterSpacing:n}):{width:0,height:0},L=(ce,Z)=>{var V=typeof p=="function"?p(ce.value,Z):ce.value;return j==="width"?ibe(dp(V,{fontSize:e,letterSpacing:n}),M,_):dp(V,{fontSize:e,letterSpacing:n})[j]},z=i[0],$=i[1],K=i.length>=2&&z!=null&&$!=null?pa($.coordinate-z.coordinate):1,J=abe(a,K,j);return m==="equidistantPreserveStart"?obe(K,J,L,i,l):m==="equidistantPreserveEnd"?lbe(K,J,L,i,l):(m==="preserveStart"||m==="preserveStartEnd"?R=hbe(K,J,L,i,l,m==="preserveStartEnd"):R=dbe(K,J,L,i,l),R.filter(ce=>ce.isShow))}var mbe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,l=0;if(e){Array.from(e).forEach(b=>{if(b){var _=b.getBoundingClientRect();_.width>l&&(l=_.width)}});var f=n?n.getBoundingClientRect().width:0,m=i+a,p=l+m+f+(n?r:0);return Math.round(p)}return 0},gbe=["axisLine","width","height","className","hide","ticks","axisType"];function pbe(t,e){if(t==null)return{};var n,r,i=ybe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ybe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function bd(){return bd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bd.apply(null,arguments)}function K6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K6(Object(n),!0).forEach(function(r){vbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vbe(t,e,n){return(e=xbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xbe(t){var e=bbe(t,"string");return typeof e=="symbol"?e:e+""}function bbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pu={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ii.axis};function wbe(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:l,axisLine:f,otherSvgProps:m}=t;if(!f)return null;var p=pi(pi(pi({},m),so(f)),{},{fill:"none"});if(a==="top"||a==="bottom"){var b=+(a==="top"&&!l||a==="bottom"&&l);p=pi(pi({},p),{},{x1:e,y1:n+b*i,x2:e+r,y2:n+b*i})}else{var _=+(a==="left"&&!l||a==="right"&&l);p=pi(pi({},p),{},{x1:e+_*r,y1:n,x2:e+_*r,y2:n+i})}return D.createElement("line",bd({},p,{className:Hn("recharts-cartesian-axis-line",md(f,"className"))}))}function _be(t,e,n,r,i,a,l,f,m){var p,b,_,T,R,j,M=f?-1:1,L=t.tickSize||l,z=Tt(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":p=b=t.coordinate,T=n+ +!f*i,_=T-M*L,j=_-M*m,R=z;break;case"left":_=T=t.coordinate,b=e+ +!f*r,p=b-M*L,R=p-M*m,j=z;break;case"right":_=T=t.coordinate,b=e+ +f*r,p=b+M*L,R=p+M*m,j=z;break;default:p=b=t.coordinate,T=n+ +f*i,_=T+M*L,j=_+M*m,R=z;break}return{line:{x1:p,y1:_,x2:b,y2:T},tick:{x:R,y:j}}}function Ebe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Abe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Sbe(t){var{option:e,tickProps:n,value:r}=t,i,a=Hn(n.className,"recharts-cartesian-axis-tick-value");if(D.isValidElement(e))i=D.cloneElement(e,pi(pi({},n),{},{className:a}));else if(typeof e=="function")i=e(pi(pi({},n),{},{className:a}));else{var l="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(l=Hn(l,IU(e))),i=D.createElement(qb,bd({},n,{className:l}),r)}return i}var Tbe=D.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:l,unit:f,padding:m,tickTextProps:p,orientation:b,mirror:_,x:T,y:R,width:j,height:M,tickSize:L,tickMargin:z,fontSize:$,letterSpacing:K,getTicksConfig:J,events:ce,axisType:Z}=t,V=dO(pi(pi({},J),{},{ticks:n}),$,K),W=Ebe(b,_),U=Abe(b,_),ae=so(J),ie=dd(r),Q={};typeof i=="object"&&(Q=i);var ne=pi(pi({},ae),{},{fill:"none"},Q),be=V.map(we=>pi({entry:we},_be(we,T,R,j,M,b,L,_,z))),he=be.map(we=>{var{entry:$e,line:et}=we;return D.createElement(Xi,{className:"recharts-cartesian-axis-tick",key:"tick-".concat($e.value,"-").concat($e.coordinate,"-").concat($e.tickCoord)},i&&D.createElement("line",bd({},ne,et,{className:Hn("recharts-cartesian-axis-tick-line",md(i,"className"))})))}),ye=be.map((we,$e)=>{var et,rt,{entry:de,tick:Ee}=we,Xe=pi(pi(pi(pi({verticalAnchor:U},ae),{},{textAnchor:W,stroke:"none",fill:a},Ee),{},{index:$e,payload:de,visibleTicksCount:V.length,tickFormatter:l,padding:m},p),{},{angle:(et=(rt=p?.angle)!==null&&rt!==void 0?rt:ae.angle)!==null&&et!==void 0?et:0}),Ge=pi(pi({},Xe),ie);return D.createElement(Xi,bd({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(de.value,"-").concat(de.coordinate,"-").concat(de.tickCoord)},sb(ce,de,$e)),r&&D.createElement(Sbe,{option:r,tickProps:Ge,value:"".concat(typeof l=="function"?l(de.value,$e):de.value).concat(f||"")}))});return D.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(Z,"-ticks")},ye.length>0&&D.createElement(ms,{zIndex:Ii.label},D.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(Z,"-tick-labels"),ref:e},ye)),he.length>0&&D.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(Z,"-tick-lines")},he))}),Ibe=D.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:l,ticks:f,axisType:m}=t,p=pbe(t,gbe),[b,_]=D.useState(""),[T,R]=D.useState(""),j=D.useRef(null);D.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var L;return mbe({ticks:j.current,label:(L=t.labelRef)===null||L===void 0?void 0:L.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var M=D.useCallback(L=>{if(L){var z=L.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=z;var $=z[0];if($){var K=window.getComputedStyle($),J=K.fontSize,ce=K.letterSpacing;(J!==b||ce!==T)&&(_(J),R(ce))}}},[b,T]);return l||r!=null&&r<=0||i!=null&&i<=0?null:D.createElement(ms,{zIndex:t.zIndex},D.createElement(Xi,{className:Hn("recharts-cartesian-axis",a)},D.createElement(wbe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:so(t)}),D.createElement(Tbe,{ref:M,axisType:m,events:p,fontSize:b,getTicksConfig:t,height:t.height,letterSpacing:T,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:f,unit:t.unit,width:t.width,x:t.x,y:t.y}),D.createElement(yU,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},D.createElement(xU,{label:t.label,labelRef:t.labelRef}),t.children)))}),hO=D.forwardRef((t,e)=>{var n=Zi(t,pu);return D.createElement(Ibe,bd({},n,{ref:e}))});hO.displayName="CartesianAxis";var Cbe=["x1","y1","x2","y2","key"],Obe=["offset"],Nbe=["xAxisId","yAxisId"],Rbe=["xAxisId","yAxisId"];function W6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ts(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W6(Object(n),!0).forEach(function(r){Pbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pbe(t,e,n){return(e=Dbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dbe(t){var e=kbe(t,"string");return typeof e=="symbol"?e:e+""}function kbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gf(){return Gf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gf.apply(null,arguments)}function px(t,e){if(t==null)return{};var n,r,i=Mbe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Mbe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var jbe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:l,ry:f}=t;return D.createElement("rect",{x:r,y:i,ry:f,width:a,height:l,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function UU(t){var{option:e,lineItemProps:n}=t,r;if(D.isValidElement(e))r=D.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:l,x2:f,y2:m,key:p}=n,b=px(n,Cbe),_=(i=so(b))!==null&&i!==void 0?i:{},{offset:T}=_,R=px(_,Obe);r=D.createElement("line",Gf({},R,{x1:a,y1:l,x2:f,y2:m,fill:"none",key:p}))}return r}function Lbe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:l}=t,f=px(t,Nbe),m=i.map((p,b)=>{var _=ts(ts({},f),{},{x1:e,y1:p,x2:e+n,y2:p,key:"line-".concat(b),index:b});return D.createElement(UU,{key:"line-".concat(b),option:r,lineItemProps:_})});return D.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function Bbe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:l}=t,f=px(t,Rbe),m=i.map((p,b)=>{var _=ts(ts({},f),{},{x1:p,y1:e,x2:p,y2:e+n,key:"line-".concat(b),index:b});return D.createElement(UU,{option:r,lineItemProps:_,key:"line-".concat(b)})});return D.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function Fbe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:l,horizontalPoints:f,horizontal:m=!0}=t;if(!m||!e||!e.length||f==null)return null;var p=f.map(_=>Math.round(_+i-i)).sort((_,T)=>_-T);i!==p[0]&&p.unshift(0);var b=p.map((_,T)=>{var R=p[T+1],j=R==null,M=j?i+l-_:R-_;if(M<=0)return null;var L=T%e.length;return D.createElement("rect",{key:"react-".concat(T),y:_,x:r,height:M,width:a,stroke:"none",fill:e[L],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},b)}function Vbe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:l,height:f,verticalPoints:m}=t;if(!e||!n||!n.length)return null;var p=m.map(_=>Math.round(_+i-i)).sort((_,T)=>_-T);i!==p[0]&&p.unshift(0);var b=p.map((_,T)=>{var R=p[T+1],j=R==null,M=j?i+l-_:R-_;if(M<=0)return null;var L=T%n.length;return D.createElement("rect",{key:"react-".concat(T),x:_,y:a,width:M,height:f,stroke:"none",fill:n[L],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},b)}var zbe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return CF(dO(ts(ts(ts({},pu),n),{},{ticks:OF(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},Ube=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return CF(dO(ts(ts(ts({},pu),n),{},{ticks:OF(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},qbe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ii.grid};function Uy(t){var e=LF(),n=BF(),r=jF(),i=ts(ts({},Zi(t,qbe)),{},{x:Tt(t.x)?t.x:r.left,y:Tt(t.y)?t.y:r.top,width:Tt(t.width)?t.width:r.width,height:Tt(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:l,x:f,y:m,width:p,height:b,syncWithTicks:_,horizontalValues:T,verticalValues:R}=i,j=Ba(),M=It(U=>M8(U,"xAxis",a,j)),L=It(U=>M8(U,"yAxis",l,j));if(!Nl(p)||!Nl(b)||!Tt(f)||!Tt(m))return null;var z=i.verticalCoordinatesGenerator||zbe,$=i.horizontalCoordinatesGenerator||Ube,{horizontalPoints:K,verticalPoints:J}=i;if((!K||!K.length)&&typeof $=="function"){var ce=T&&T.length,Z=$({yAxis:L?ts(ts({},L),{},{ticks:ce?T:L.ticks}):void 0,width:e??p,height:n??b,offset:r},ce?!0:_);zv(Array.isArray(Z),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof Z,"]")),Array.isArray(Z)&&(K=Z)}if((!J||!J.length)&&typeof z=="function"){var V=R&&R.length,W=z({xAxis:M?ts(ts({},M),{},{ticks:V?R:M.ticks}):void 0,width:e??p,height:n??b,offset:r},V?!0:_);zv(Array.isArray(W),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof W,"]")),Array.isArray(W)&&(J=W)}return D.createElement(ms,{zIndex:i.zIndex},D.createElement("g",{className:"recharts-cartesian-grid"},D.createElement(jbe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),D.createElement(Fbe,Gf({},i,{horizontalPoints:K})),D.createElement(Vbe,Gf({},i,{verticalPoints:J})),D.createElement(Lbe,Gf({},i,{offset:r,horizontalPoints:K,xAxis:M,yAxis:L})),D.createElement(Bbe,Gf({},i,{offset:r,verticalPoints:J,xAxis:M,yAxis:L}))))}Uy.displayName="CartesianGrid";var Gbe={},qU=Vs({name:"errorBars",initialState:Gbe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:JEe,replaceErrorBar:eAe,removeErrorBar:tAe}=qU.actions,Hbe=qU.reducer,Kbe=["children"];function Wbe(t,e){if(t==null)return{};var n,r,i=$be(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function $be(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ybe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Xbe=D.createContext(Ybe);function GU(t){var{children:e}=t,n=Wbe(t,Kbe);return D.createElement(Xbe.Provider,{value:n},e)}function mO(t,e){var n,r,i=It(p=>Ml(p,t)),a=It(p=>jl(p,e)),l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:ca.allowDataOverflow,f=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:fa.allowDataOverflow,m=l||f;return{needClip:m,needClipX:l,needClipY:f}}function HU(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=fO(),{needClipX:a,needClipY:l,needClip:f}=mO(e,n);if(!f||!i)return null;var{x:m,y:p,width:b,height:_}=i;return D.createElement("clipPath",{id:"clipPath-".concat(r)},D.createElement("rect",{x:a?m:m-b/2,y:l?p:p-_/2,width:a?b:b*2,height:l?_:_*2}))}var KU=(t,e,n,r)=>Xc(t,"xAxis",e,r),WU=(t,e,n,r)=>Yc(t,"xAxis",e,r),$U=(t,e,n,r)=>Xc(t,"yAxis",n,r),YU=(t,e,n,r)=>Yc(t,"yAxis",n,r),Qbe=Re([Wn,KU,$U,WU,YU],(t,e,n,r,i)=>ju(t,"xAxis")?cm(e,r,!1):cm(n,i,!1)),Zbe=(t,e,n,r,i)=>i;function Jbe(t){return t.type==="line"}var ewe=Re([Bb,Zbe],(t,e)=>t.filter(Jbe).find(n=>n.id===e)),twe=Re([Wn,KU,$U,WU,YU,ewe,Qbe,dC],(t,e,n,r,i,a,l,f)=>{var{chartData:m,dataStartIndex:p,dataEndIndex:b}=f;if(!(a==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||l==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:_,data:T}=a,R;if(T!=null&&T.length>0?R=T:R=m?.slice(p,b+1),R!=null)return Uwe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:_,bandSize:l,displayedData:R})}});function nwe(t){var e=dd(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:a}=e,l=Number(i),f=Number(a);return(Number.isNaN(l)||l<0)&&(l=n),(Number.isNaN(f)||f<0)&&(f=r),{r:l,strokeWidth:f}}return{r:n,strokeWidth:r}}var ME={exports:{}},jE={};var $6;function rwe(){if($6)return jE;$6=1;var t=pm();function e(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,l=t.useMemo,f=t.useDebugValue;return jE.useSyncExternalStoreWithSelector=function(m,p,b,_,T){var R=i(null);if(R.current===null){var j={hasValue:!1,value:null};R.current=j}else j=R.current;R=l(function(){function L(ce){if(!z){if(z=!0,$=ce,ce=_(ce),T!==void 0&&j.hasValue){var Z=j.value;if(T(Z,ce))return K=Z}return K=ce}if(Z=K,n($,ce))return Z;var V=_(ce);return T!==void 0&&T(Z,V)?($=ce,Z):($=ce,K=V)}var z=!1,$,K,J=b===void 0?null:b;return[function(){return L(p())},J===null?void 0:function(){return L(J())}]},[p,b,_,T]);var M=r(m,R[0],R[1]);return a(function(){j.hasValue=!0,j.value=M},[M]),f(M),M},jE}var Y6;function iwe(){return Y6||(Y6=1,ME.exports=rwe()),ME.exports}iwe();function awe(t){t()}function swe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){awe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var X6={notify(){},get:()=>[]};function owe(t,e){let n,r=X6,i=0,a=!1;function l(M){b();const L=r.subscribe(M);let z=!1;return()=>{z||(z=!0,L(),_())}}function f(){r.notify()}function m(){j.onStateChange&&j.onStateChange()}function p(){return a}function b(){i++,n||(n=t.subscribe(m),r=swe())}function _(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=X6)}function T(){a||(a=!0,b())}function R(){a&&(a=!1,_())}const j={addNestedSub:l,notifyNestedSubs:f,handleChangeWrapper:m,isSubscribed:p,trySubscribe:T,tryUnsubscribe:R,getListeners:()=>r};return j}var lwe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uwe=lwe(),cwe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",fwe=cwe(),dwe=()=>uwe||fwe?D.useLayoutEffect:D.useEffect,hwe=dwe();function Q6(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function mwe(t,e){if(Q6(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!Q6(t[n[i]],e[n[i]]))return!1;return!0}var gwe=Symbol.for("react-redux-context"),pwe=typeof globalThis<"u"?globalThis:{};function ywe(){if(!D.createContext)return{};const t=pwe[gwe]??=new Map;let e=t.get(D.createContext);return e||(e=D.createContext(null),t.set(D.createContext,e)),e}var vwe=ywe();function xwe(t){const{children:e,context:n,serverState:r,store:i}=t,a=D.useMemo(()=>{const m=owe(i);return{store:i,subscription:m,getServerState:r?()=>r:void 0}},[i,r]),l=D.useMemo(()=>i.getState(),[i]);hwe(()=>{const{subscription:m}=a;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),l!==i.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[a,l]);const f=n||vwe;return D.createElement(f.Provider,{value:a},e)}var bwe=xwe,wwe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function _we(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function Wb(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(wwe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!mwe(t[r],e[r]))return!1}else if(!_we(t[r],e[r]))return!1;return!0}var Ewe=["id"],Awe=["type","layout","connectNulls","needClip","shape"],Swe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Hp(){return Hp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hp.apply(null,arguments)}function Z6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z6(Object(n),!0).forEach(function(r){Twe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Twe(t,e,n){return(e=Iwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Iwe(t){var e=Cwe(t,"string");return typeof e=="symbol"?e:e+""}function Cwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gO(t,e){if(t==null)return{};var n,r,i=Owe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Owe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Nwe=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:Mm(n,e),payload:t}]},Rwe=D.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:a,name:l,hide:f,unit:m,tooltipType:p,id:b}=t,_={dataDefinedOnItem:n,getPosition:Nd,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:Mm(l,e),hide:f,type:p,color:r,unit:m,graphicalItemId:b}};return D.createElement(uO,{tooltipEntrySettings:_})}),XU=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function Pwe(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var Dwe=(t,e,n)=>{var r=n.reduce((R,j)=>R+j);if(!r)return XU(e,t);for(var i=Math.floor(t/r),a=t%r,l=e-t,f=[],m=0,p=0;m<n.length;p+=(b=n[m])!==null&&b!==void 0?b:0,++m){var b,_=n[m];if(_!=null&&p+_>a){f=[...n.slice(0,m),a-p];break}}var T=f.length%2===0?[0,l]:[l];return[...Pwe(n,i),...f,...T].map(R=>"".concat(R,"px")).join(", ")};function kwe(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:a,needClip:l}=r,{id:f}=r,m=gO(r,Ewe),p=so(m);return D.createElement(axe,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:p,needClip:l,clipPathId:e})}function Mwe(t){var{showLabels:e,children:n,points:r}=t,i=D.useMemo(()=>r?.map(a=>{var l,f,m={x:(l=a.x)!==null&&l!==void 0?l:0,y:(f=a.y)!==null&&f!==void 0?f:0,width:0,lowerWidth:0,upperWidth:0,height:0};return pl(pl({},m),{},{value:a.value,payload:a.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[r]);return D.createElement(wU,{value:e?i:void 0},n)}function J6(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:a}=t,{type:l,layout:f,connectNulls:m,needClip:p,shape:b}=a,_=gO(a,Awe),T=pl(pl({},as(_)),{},{fill:"none",className:"recharts-line-curve",clipPath:p?"url(#clipPath-".concat(e,")"):void 0,points:r,type:l,layout:f,connectNulls:m,strokeDasharray:i??a.strokeDasharray});return D.createElement(D.Fragment,null,r?.length>1&&D.createElement(aO,Hp({shapeType:"curve",option:b},T,{pathRef:n})),D.createElement(kwe,{points:r,clipPathId:e,props:a}))}function jwe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function Lwe(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:a}=t,{points:l,strokeDasharray:f,isAnimationActive:m,animationBegin:p,animationDuration:b,animationEasing:_,animateNewValues:T,width:R,height:j,onAnimationEnd:M,onAnimationStart:L}=n,z=i.current,$=I0(l,"recharts-line-"),K=D.useRef($),[J,ce]=D.useState(!1),Z=!J,V=D.useCallback(()=>{typeof M=="function"&&M(),ce(!1)},[M]),W=D.useCallback(()=>{typeof L=="function"&&L(),ce(!0)},[L]),U=jwe(r.current),ae=D.useRef(0);K.current!==$&&(ae.current=a.current,K.current=$);var ie=ae.current;return D.createElement(Mwe,{points:l,showLabels:Z},n.children,D.createElement(T0,{animationId:$,begin:p,duration:b,isActive:m,easing:_,onAnimationEnd:V,onAnimationStart:W,key:$},Q=>{var ne=Jr(ie,U+ie,Q),be=Math.min(ne,U),he;if(m)if(f){var ye="".concat(f).split(/[,\s]+/gim).map(et=>parseFloat(et));he=Dwe(be,U,ye)}else he=XU(U,be);else he=f==null?void 0:String(f);if(Q>0&&U>0&&(i.current=l,a.current=Math.max(a.current,be)),z){var we=z.length/l.length,$e=Q===1?l:l.map((et,rt)=>{var de=Math.floor(rt*we);if(z[de]){var Ee=z[de];return pl(pl({},et),{},{x:Jr(Ee.x,et.x,Q),y:Jr(Ee.y,et.y,Q)})}return T?pl(pl({},et),{},{x:Jr(R*2,et.x,Q),y:Jr(j/2,et.y,Q)}):pl(pl({},et),{},{x:et.x,y:et.y})});return i.current=$e,D.createElement(J6,{props:n,points:$e,clipPathId:e,pathRef:r,strokeDasharray:he})}return D.createElement(J6,{props:n,points:l,clipPathId:e,pathRef:r,strokeDasharray:he})}),D.createElement(tO,{label:n.label}))}function Bwe(t){var{clipPathId:e,props:n}=t,r=D.useRef(null),i=D.useRef(0),a=D.useRef(null);return D.createElement(Lwe,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:a})}var Fwe=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:br(t.payload,e)}};class Vwe extends D.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:a,yAxisId:l,top:f,left:m,width:p,height:b,id:_,needClip:T,zIndex:R}=this.props;if(e)return null;var j=Hn("recharts-line",i),M=_,{r:L,strokeWidth:z}=nwe(n),$=NU(n),K=L*2+z,J=T?"url(#clipPath-".concat($?"":"dots-").concat(M,")"):void 0;return D.createElement(ms,{zIndex:R},D.createElement(Xi,{className:j},T&&D.createElement("defs",null,D.createElement(HU,{clipPathId:M,xAxisId:a,yAxisId:l}),!$&&D.createElement("clipPath",{id:"clipPath-dots-".concat(M)},D.createElement("rect",{x:m-K/2,y:f-K/2,width:p+K,height:b+K}))),D.createElement(GU,{xAxisId:a,yAxisId:l,data:r,dataPointFormatter:Fwe,errorBarOffset:0},D.createElement(Bwe,{props:this.props,clipPathId:M}))),D.createElement(Sxe,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:J}))}}var QU={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Ii.line,type:"linear"};function zwe(t){var e=Zi(t,QU),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:l,connectNulls:f,dot:m,hide:p,isAnimationActive:b,label:_,legendType:T,xAxisId:R,yAxisId:j,id:M}=e,L=gO(e,Swe),{needClip:z}=mO(R,j),$=fO(),K=Rd(),J=Ba(),ce=It(ae=>twe(ae,R,j,J,M));if(K!=="horizontal"&&K!=="vertical"||ce==null||$==null)return null;var{height:Z,width:V,x:W,y:U}=$;return D.createElement(Vwe,Hp({},L,{id:M,connectNulls:f,dot:m,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:l,isAnimationActive:b,hide:p,label:_,legendType:T,xAxisId:R,yAxisId:j,points:ce,layout:K,height:Z,width:V,left:W,top:U,needClip:z}))}function Uwe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,dataKey:l,bandSize:f,displayedData:m}=t;return m.map((p,b)=>{var _=br(p,l);if(e==="horizontal"){var T=kk({axis:n,ticks:i,bandSize:f,entry:p,index:b}),R=li(_)?null:r.scale.map(_);return{x:T,y:R??null,value:_,payload:p}}var j=li(_)?null:n.scale.map(_),M=kk({axis:r,ticks:a,bandSize:f,entry:p,index:b});return j==null||M==null?null:{x:j,y:M,value:_,payload:p}}).filter(Boolean)}function qwe(t){var e=Zi(t,QU),n=Ba();return D.createElement(cO,{id:e.id,type:"line"},r=>D.createElement(D.Fragment,null,D.createElement(RU,{legendPayload:Nwe(e)}),D.createElement(Rwe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),D.createElement(DU,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),D.createElement(zwe,Hp({},e,{id:r}))))}var ZU=D.memo(qwe,Wb);ZU.displayName="Line";function kd(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:MU}function Md(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:MU}var Gwe="Invariant failed";function Hwe(t,e){throw new Error(Gwe)}function SS(){return SS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SS.apply(null,arguments)}function yx(t){return D.createElement(aO,SS({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var Kwe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Tt(e))return e;var a=Tt(r)||li(r);return a?e(r,i):(a||Hwe(),n)}},Wwe=(t,e,n)=>n,$we=(t,e)=>e,V0=Re([Bb,$we],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),Ywe=Re([V0],t=>t?.maxBarSize),Xwe=(t,e,n,r)=>r,Qwe=Re([Wn,Bb,kd,Md,Wwe],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),Zwe=(t,e,n)=>{var r=Wn(t),i=kd(t,e),a=Md(t,e);if(!(i==null||a==null))return r==="horizontal"?yS(t,"yAxis",a,n):yS(t,"xAxis",i,n)},Jwe=(t,e)=>{var n=Wn(t),r=kd(t,e),i=Md(t,e);if(!(r==null||i==null))return n==="horizontal"?k8(t,"xAxis",r):k8(t,"yAxis",i)},e_e=Re([Qwe,nge,Jwe],Txe),t_e=(t,e,n)=>{var r,i,a=V0(t,e);if(a==null)return 0;var l=kd(t,e),f=Md(t,e);if(l==null||f==null)return 0;var m=Wn(t),p=ZV(t),{maxBarSize:b}=a,_=li(b)?p:b,T,R;return m==="horizontal"?(T=Xc(t,"xAxis",l,n),R=Yc(t,"xAxis",l,n)):(T=Xc(t,"yAxis",f,n),R=Yc(t,"yAxis",f,n)),(r=(i=cm(T,R,!0))!==null&&i!==void 0?i:_)!==null&&r!==void 0?r:0},JU=(t,e,n)=>{var r=Wn(t),i=kd(t,e),a=Md(t,e);if(!(i==null||a==null)){var l,f;return r==="horizontal"?(l=Xc(t,"xAxis",i,n),f=Yc(t,"xAxis",i,n)):(l=Xc(t,"yAxis",a,n),f=Yc(t,"yAxis",a,n)),cm(l,f)}},n_e=Re([e_e,ZV,tge,JV,t_e,JU,Ywe],Rxe),r_e=(t,e,n)=>{var r=kd(t,e);if(r!=null)return Xc(t,"xAxis",r,n)},i_e=(t,e,n)=>{var r=Md(t,e);if(r!=null)return Xc(t,"yAxis",r,n)},a_e=(t,e,n)=>{var r=kd(t,e);if(r!=null)return Yc(t,"xAxis",r,n)},s_e=(t,e,n)=>{var r=Md(t,e);if(r!=null)return Yc(t,"yAxis",r,n)},o_e=Re([n_e,V0],Dxe),l_e=Re([Zwe,V0],Pxe),u_e=Re([Ji,LI,r_e,i_e,a_e,s_e,o_e,Wn,Wme,JU,l_e,V0,Xwe],(t,e,n,r,i,a,l,f,m,p,b,_,T)=>{var{chartData:R,dataStartIndex:j,dataEndIndex:M}=m;if(!(_==null||l==null||e==null||f!=="horizontal"&&f!=="vertical"||n==null||r==null||i==null||a==null||p==null)){var{data:L}=_,z;if(L!=null&&L.length>0?z=L:z=R?.slice(j,M+1),z!=null)return L_e({layout:f,barSettings:_,pos:l,parentViewBox:e,bandSize:p,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:b,displayedData:z,offset:t,cells:T,dataStartIndex:j})}}),c_e=["index"];function TS(){return TS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TS.apply(null,arguments)}function f_e(t,e){if(t==null)return{};var n,r,i=d_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function d_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var eq=D.createContext(void 0),h_e=t=>{var e=D.useContext(eq);if(e!=null)return e.stackId;if(t!=null)return nce(t)},m_e=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),g_e=t=>{var e=D.useContext(eq);if(e!=null){var{stackId:n}=e;return"url(#".concat(m_e(n,t),")")}},tq=t=>{var{index:e}=t,n=f_e(t,c_e),r=g_e(e);return D.createElement(Xi,TS({className:"recharts-bar-stack-layer",clipPath:r},n))},p_e=["onMouseEnter","onMouseLeave","onClick"],y_e=["value","background","tooltipPosition"],v_e=["id"],x_e=["onMouseEnter","onClick","onMouseLeave"];function Nu(){return Nu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nu.apply(null,arguments)}function e5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e5(Object(n),!0).forEach(function(r){b_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b_e(t,e,n){return(e=w_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w_e(t){var e=__e(t,"string");return typeof e=="symbol"?e:e+""}function __e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vx(t,e){if(t==null)return{};var n,r,i=E_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function E_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var A_e=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:Mm(n,e),payload:t}]},S_e=D.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:l,unit:f,tooltipType:m,id:p}=t,b={dataDefinedOnItem:void 0,getPosition:Nd,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:Mm(a,e),hide:l,type:m,color:i,unit:f,graphicalItemId:p}};return D.createElement(uO,{tooltipEntrySettings:b})});function T_e(t){var e=It(Qc),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:l,onMouseLeave:f,onClick:m}=a,p=vx(a,p_e),b=sO(l,r,a.id),_=oO(f),T=lO(m,r,a.id);if(!i||n==null)return null;var R=dd(i);return D.createElement(ms,{zIndex:kxe(i,Ii.barBackground)},n.map((j,M)=>{var{value:L,background:z,tooltipPosition:$}=j,K=vx(j,y_e);if(!z)return null;var J=b(j,M),ce=_(j,M),Z=T(j,M),V=cs(cs(cs(cs(cs({option:i,isActive:String(M)===e},K),{},{fill:"#eee"},z),R),sb(p,j,M)),{},{onMouseEnter:J,onMouseLeave:ce,onClick:Z,dataKey:r,index:M,className:"recharts-bar-background-rectangle"});return D.createElement(yx,Nu({key:"background-bar-".concat(M)},V))}))}function I_e(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(a=>{var l={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return cs(cs({},l),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:l,fill:a.fill})});return D.createElement(wU,{value:e?i:void 0},n)}function C_e(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:a,dataKey:l}=t,f=It(Qc),m=It($C),p=n&&String(a)===f&&(m==null||l===m),b=p?n:e;return p?D.createElement(ms,{zIndex:Ii.activeBar},D.createElement(tq,{index:a},D.createElement(yx,Nu({},r,{name:String(r.name)},i,{isActive:p,option:b,index:a,dataKey:l})))):D.createElement(yx,Nu({},r,{name:String(r.name)},i,{isActive:p,option:b,index:a,dataKey:l}))}function O_e(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:a}=t;return D.createElement(yx,Nu({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:a}))}function N_e(t){var e,{data:n,props:r}=t,i=(e=so(r))!==null&&e!==void 0?e:{},{id:a}=i,l=vx(i,v_e),{shape:f,dataKey:m,activeBar:p}=r,{onMouseEnter:b,onClick:_,onMouseLeave:T}=r,R=vx(r,x_e),j=sO(b,m,a),M=oO(T),L=lO(_,m,a);return n?D.createElement(D.Fragment,null,n.map((z,$)=>D.createElement(tq,Nu({index:$,key:"rectangle-".concat(z?.x,"-").concat(z?.y,"-").concat(z?.value,"-").concat($),className:"recharts-bar-rectangle"},sb(R,z,$),{onMouseEnter:j(z,$),onMouseLeave:M(z,$),onClick:L(z,$)}),p?D.createElement(C_e,{shape:f,activeBar:p,baseProps:l,entry:z,index:$,dataKey:m}):D.createElement(O_e,{shape:f,baseProps:l,entry:z,index:$,dataKey:m})))):null}function R_e(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:l,animationDuration:f,animationEasing:m,onAnimationEnd:p,onAnimationStart:b}=e,_=n.current,T=I0(e,"recharts-bar-"),[R,j]=D.useState(!1),M=!R,L=D.useCallback(()=>{typeof p=="function"&&p(),j(!1)},[p]),z=D.useCallback(()=>{typeof b=="function"&&b(),j(!0)},[b]);return D.createElement(I_e,{showLabels:M,rects:r},D.createElement(T0,{animationId:T,begin:l,duration:f,isActive:a,easing:m,onAnimationEnd:L,onAnimationStart:z,key:T},$=>{var K=$===1?r:r?.map((J,ce)=>{var Z=_&&_[ce];if(Z)return cs(cs({},J),{},{x:Jr(Z.x,J.x,$),y:Jr(Z.y,J.y,$),width:Jr(Z.width,J.width,$),height:Jr(Z.height,J.height,$)});if(i==="horizontal"){var V=Jr(0,J.height,$),W=Jr(J.stackedBarStart,J.y,$);return cs(cs({},J),{},{y:W,height:V})}var U=Jr(0,J.width,$),ae=Jr(J.stackedBarStart,J.x,$);return cs(cs({},J),{},{width:U,x:ae})});return $>0&&(n.current=K??null),K==null?null:D.createElement(Xi,null,D.createElement(N_e,{props:e,data:K}))}),D.createElement(tO,{label:e.label}),e.children)}function P_e(t){var e=D.useRef(null);return D.createElement(R_e,{previousRectanglesRef:e,props:t})}var nq=0,D_e=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:br(t,e)}};class k_e extends D.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:l,needClip:f,background:m,id:p}=this.props;if(e||n==null)return null;var b=Hn("recharts-bar",i),_=p;return D.createElement(Xi,{className:b,id:p},f&&D.createElement("defs",null,D.createElement(HU,{clipPathId:_,xAxisId:a,yAxisId:l})),D.createElement(Xi,{className:"recharts-bar-rectangles",clipPath:f?"url(#clipPath-".concat(_,")"):void 0},D.createElement(T_e,{data:n,dataKey:r,background:m,allOtherBarProps:this.props}),D.createElement(P_e,this.props)))}}var M_e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:nq,xAxisId:0,yAxisId:0,zIndex:Ii.bar};function j_e(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:l,animationBegin:f,animationDuration:m,animationEasing:p,isAnimationActive:b}=t,{needClip:_}=mO(e,n),T=Rd(),R=Ba(),j=iO(t.children,F0),M=It($=>u_e($,t.id,R,j));if(T!=="vertical"&&T!=="horizontal")return null;var L,z=M?.[0];return z==null||z.height==null||z.width==null?L=0:L=T==="vertical"?z.height/2:z.width/2,D.createElement(GU,{xAxisId:e,yAxisId:n,data:M,dataPointFormatter:D_e,errorBarOffset:L},D.createElement(k_e,Nu({},t,{layout:T,needClip:_,data:M,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:l,animationBegin:f,animationDuration:m,animationEasing:p,isAnimationActive:b})))}function L_e(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:l,yAxis:f,xAxisTicks:m,yAxisTicks:p,stackedData:b,displayedData:_,offset:T,cells:R,parentViewBox:j,dataStartIndex:M}=t,L=e==="horizontal"?f:l,z=b?L.scale.domain():null,$=rce({numericAxis:L}),K=L.scale.map($);return _.map((J,ce)=>{var Z,V,W,U,ae,ie;if(b){var Q=b[ce+M];if(Q==null)return null;Z=Que(Q,z)}else Z=br(J,n),Array.isArray(Z)||(Z=[$,Z]);var ne=Kwe(r,nq)(Z[1],ce);if(e==="horizontal"){var be,he=f.scale.map(Z[0]),ye=f.scale.map(Z[1]);if(he==null||ye==null)return null;V=Mk({axis:l,ticks:m,bandSize:a,offset:i.offset,entry:J,index:ce}),W=(be=ye??he)!==null&&be!==void 0?be:void 0,U=i.size;var we=he-ye;if(ae=Ol(we)?0:we,ie={x:V,y:T.top,width:U,height:T.height},Math.abs(ne)>0&&Math.abs(ae)<Math.abs(ne)){var $e=pa(ae||ne)*(Math.abs(ne)-Math.abs(ae));W-=$e,ae+=$e}}else{var et=l.scale.map(Z[0]),rt=l.scale.map(Z[1]);if(et==null||rt==null)return null;if(V=et,W=Mk({axis:f,ticks:p,bandSize:a,offset:i.offset,entry:J,index:ce}),U=rt-et,ae=i.size,ie={x:T.left,y:W,width:T.width,height:ae},Math.abs(ne)>0&&Math.abs(U)<Math.abs(ne)){var de=pa(U||ne)*(Math.abs(ne)-Math.abs(U));U+=de}}if(V==null||W==null||U==null||ae==null)return null;var Ee=cs(cs({},J),{},{stackedBarStart:K,x:V,y:W,width:U,height:ae,value:b?Z:Z[1],payload:J,background:ie,tooltipPosition:{x:V+U/2,y:W+ae/2},parentViewBox:j},R&&R[ce]&&R[ce].props);return Ee}).filter(Boolean)}function B_e(t){var e=Zi(t,M_e),n=h_e(e.stackId),r=Ba();return D.createElement(cO,{id:e.id,type:"bar"},i=>D.createElement(D.Fragment,null,D.createElement(RU,{legendPayload:A_e(e)}),D.createElement(S_e,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),D.createElement(DU,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),D.createElement(ms,{zIndex:e.zIndex},D.createElement(j_e,Nu({},e,{id:i})))))}var IS=D.memo(B_e,Wb);IS.displayName="Bar";var F_e=["domain","range"],V_e=["domain","range"];function t5(t,e){if(t==null)return{};var n,r,i=z_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function z_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function n5(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function rq(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=t5(t,F_e),{domain:a,range:l}=e,f=t5(e,V_e);return!n5(n,a)||!n5(r,l)?!1:Wb(i,f)}var U_e=["type"],q_e=["dangerouslySetInnerHTML","ticks","scale"],G_e=["id","scale"];function CS(){return CS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CS.apply(null,arguments)}function r5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function i5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r5(Object(n),!0).forEach(function(r){H_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H_e(t,e,n){return(e=K_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K_e(t){var e=W_e(t,"string");return typeof e=="symbol"?e:e+""}function W_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OS(t,e){if(t==null)return{};var n,r,i=$_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function $_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Y_e(t){var e=Gr(),n=D.useRef(null),r=FF(),{type:i}=t,a=OS(t,U_e),l=Db(r,"xAxis",i),f=D.useMemo(()=>{if(l!=null)return i5(i5({},a),{},{type:l})},[a,l]);return D.useLayoutEffect(()=>{f!=null&&(n.current===null?e(cxe(f)):n.current!==f&&e(fxe({prev:n.current,next:f})),n.current=f)},[f,e]),D.useLayoutEffect(()=>()=>{n.current&&(e(dxe(n.current)),n.current=null)},[e]),null}var X_e=t=>{var{xAxisId:e,className:n}=t,r=It(LI),i=Ba(),a="xAxis",l=It(z=>Pz(z,a,e,i)),f=It(z=>Cz(z,e)),m=It(z=>npe(z,e)),p=It(z=>uz(z,e));if(f==null||m==null||p==null)return null;var{dangerouslySetInnerHTML:b,ticks:_,scale:T}=t,R=OS(t,q_e),{id:j,scale:M}=p,L=OS(p,G_e);return D.createElement(hO,CS({},R,L,{x:m.x,y:m.y,width:f.width,height:f.height,className:Hn("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:l,axisType:a}))},Q_e={allowDataOverflow:ca.allowDataOverflow,allowDecimals:ca.allowDecimals,allowDuplicatedCategory:ca.allowDuplicatedCategory,angle:ca.angle,axisLine:pu.axisLine,height:ca.height,hide:!1,includeHidden:ca.includeHidden,interval:ca.interval,label:!1,minTickGap:ca.minTickGap,mirror:ca.mirror,orientation:ca.orientation,padding:ca.padding,reversed:ca.reversed,scale:ca.scale,tick:ca.tick,tickCount:ca.tickCount,tickLine:pu.tickLine,tickSize:pu.tickSize,type:ca.type,xAxisId:0},Z_e=t=>{var e=Zi(t,Q_e);return D.createElement(D.Fragment,null,D.createElement(Y_e,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),D.createElement(X_e,e))},qy=D.memo(Z_e,rq);qy.displayName="XAxis";var J_e=["type"],e2e=["dangerouslySetInnerHTML","ticks","scale"],t2e=["id","scale"];function NS(){return NS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NS.apply(null,arguments)}function a5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function s5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a5(Object(n),!0).forEach(function(r){n2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n2e(t,e,n){return(e=r2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r2e(t){var e=i2e(t,"string");return typeof e=="symbol"?e:e+""}function i2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RS(t,e){if(t==null)return{};var n,r,i=a2e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function a2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function s2e(t){var e=Gr(),n=D.useRef(null),r=FF(),{type:i}=t,a=RS(t,J_e),l=Db(r,"yAxis",i),f=D.useMemo(()=>{if(l!=null)return s5(s5({},a),{},{type:l})},[l,a]);return D.useLayoutEffect(()=>{f!=null&&(n.current===null?e(hxe(f)):n.current!==f&&e(mxe({prev:n.current,next:f})),n.current=f)},[f,e]),D.useLayoutEffect(()=>()=>{n.current&&(e(gxe(n.current)),n.current=null)},[e]),null}function o2e(t){var{yAxisId:e,className:n,width:r,label:i}=t,a=D.useRef(null),l=D.useRef(null),f=It(LI),m=Ba(),p=Gr(),b="yAxis",_=It(Z=>Oz(Z,e)),T=It(Z=>ipe(Z,e)),R=It(Z=>Pz(Z,b,e,m)),j=It(Z=>cz(Z,e));if(D.useLayoutEffect(()=>{if(!(r!=="auto"||!_||eO(i)||D.isValidElement(i)||j==null)){var Z=a.current;if(Z){var V=Z.getCalculatedWidth();Math.round(_.width)!==Math.round(V)&&p(pxe({id:e,width:V}))}}},[R,_,p,i,e,r,j]),_==null||T==null||j==null)return null;var{dangerouslySetInnerHTML:M,ticks:L,scale:z}=t,$=RS(t,e2e),{id:K,scale:J}=j,ce=RS(j,t2e);return D.createElement(hO,NS({},$,ce,{ref:a,labelRef:l,x:T.x,y:T.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:_.width,height:_.height,className:Hn("recharts-".concat(b," ").concat(b),n),viewBox:f,ticks:R,axisType:b}))}var l2e={allowDataOverflow:fa.allowDataOverflow,allowDecimals:fa.allowDecimals,allowDuplicatedCategory:fa.allowDuplicatedCategory,angle:fa.angle,axisLine:pu.axisLine,hide:!1,includeHidden:fa.includeHidden,interval:fa.interval,label:!1,minTickGap:fa.minTickGap,mirror:fa.mirror,orientation:fa.orientation,padding:fa.padding,reversed:fa.reversed,scale:fa.scale,tick:fa.tick,tickCount:fa.tickCount,tickLine:pu.tickLine,tickSize:pu.tickSize,type:fa.type,width:fa.width,yAxisId:0},u2e=t=>{var e=Zi(t,l2e);return D.createElement(D.Fragment,null,D.createElement(s2e,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),D.createElement(o2e,e))},Gy=D.memo(u2e,rq);Gy.displayName="YAxis";var c2e=(t,e)=>e,pO=Re([c2e,Wn,sz,xa,Yz,zu,b0e,Ji],I0e),yO=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},iq=Co("mouseClick"),aq=w0();aq.startListening({actionCreator:iq,effect:(t,e)=>{var n=t.payload,r=pO(e.getState(),yO(n));r?.activeIndex!=null&&e.dispatch(vpe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var PS=Co("mouseMove"),sq=w0(),gy=null;sq.startListening({actionCreator:PS,effect:(t,e)=>{var n=t.payload;gy!==null&&cancelAnimationFrame(gy);var r=yO(n);gy=requestAnimationFrame(()=>{var i=e.getState(),a=UC(i,i.tooltip.settings.shared);if(a==="axis"){var l=pO(i,r);l?.activeIndex!=null?e.dispatch(Vz({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):e.dispatch(Fz())}gy=null})}});function f2e(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var o5={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},oq=Vs({name:"rootProps",initialState:o5,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:o5.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),d2e=oq.reducer,{updateOptions:h2e}=oq.actions,m2e=null,g2e={updatePolarOptions:(t,e)=>e.payload},lq=Vs({name:"polarOptions",initialState:m2e,reducers:g2e}),{updatePolarOptions:p2e}=lq.actions,y2e=lq.reducer,uq=Co("keyDown"),cq=Co("focus"),vO=w0();vO.startListening({actionCreator:uq,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var l=qC(i,Gm(n),M0(n),L0(n)),f=l==null?-1:Number(l);if(!(!Number.isFinite(f)||f<0)){var m=zu(n);if(a==="Enter"){var p=cx(n,"axis","hover",String(i.index));e.dispatch(xS({active:!i.active,activeIndex:i.index,activeCoordinate:p}));return}var b=lpe(n),_=b==="left-to-right"?1:-1,T=a==="ArrowRight"?1:-1,R=f+T*_;if(!(m==null||R>=m.length||R<0)){var j=cx(n,"axis","hover",String(R));e.dispatch(xS({active:!0,activeIndex:R.toString(),activeCoordinate:j}))}}}}}});vO.startListening({actionCreator:cq,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",l=cx(n,"axis","hover",String(a));e.dispatch(xS({active:!0,activeIndex:a,activeCoordinate:l}))}}}});var _o=Co("externalEvent"),fq=w0(),LE=new Map;fq.startListening({actionCreator:_o,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=LE.get(i);a!==void 0&&cancelAnimationFrame(a);var l=requestAnimationFrame(()=>{try{var f=e.getState(),m={activeCoordinate:i0e(f),activeDataKey:$C(f),activeIndex:Qc(f),activeLabel:Zz(f),activeTooltipIndex:Qc(f),isTooltipActive:a0e(f)};n(m,r)}finally{LE.delete(i)}});LE.set(i,l)}}});var v2e=Re([Um],t=>t.tooltipItemPayloads),x2e=Re([v2e,(t,e)=>e,(t,e,n)=>n],(t,e,n)=>{if(e!=null){var r=t.find(a=>a.settings.graphicalItemId===n);if(r!=null){var{getPosition:i}=r;if(i!=null)return i(e)}}}),dq=Co("touchMove"),hq=w0();hq.startListening({actionCreator:dq,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=UC(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var l=pO(r,yO({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));l?.activeIndex!=null&&e.dispatch(Vz({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(i==="item"){var f,m=n.touches[0];if(document.elementFromPoint==null||m==null)return;var p=document.elementFromPoint(m.clientX,m.clientY);if(!p||!p.getAttribute)return;var b=p.getAttribute(RF),_=(f=p.getAttribute(PF))!==null&&f!==void 0?f:void 0,T=qm(r).find(M=>M.id===_);if(b==null||T==null||_==null)return;var{dataKey:R}=T,j=x2e(r,b,_);e.dispatch(Bz({activeDataKey:R,activeIndex:b,activeCoordinate:j,activeGraphicalItemId:_}))}}}});var b2e=JB({brush:Mxe,cartesianAxis:yxe,chartData:i1e,errorBars:Hbe,graphicalItems:Ave,layout:Kue,legend:Qce,options:J0e,polarAxis:Bye,polarOptions:y2e,referenceElements:qxe,rootProps:d2e,tooltip:xpe,zIndex:z0e}),w2e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return yue({reducer:b2e,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([aq.middleware,sq.middleware,vO.middleware,fq.middleware,hq.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(mF({type:"raf"}))},devTools:{serialize:{replacer:f2e},name:"recharts-".concat(n)}})};function mq(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Ba(),a=D.useRef(null);if(i)return n;a.current==null&&(a.current=w2e(e,r));var l=NI;return D.createElement(bwe,{context:l,store:a.current},n)}function _2e(t){var{layout:e,margin:n}=t,r=Gr(),i=Ba();return D.useEffect(()=>{i||(r(que(e)),r(Uue(n)))},[r,i,e,n]),null}var gq=D.memo(_2e,Wb);function pq(t){var e=Gr();return D.useEffect(()=>{e(h2e(t))},[e,t]),null}function l5(t){var{zIndex:e,isPanorama:n}=t,r=D.useRef(null),i=Gr();return D.useLayoutEffect(()=>(r.current&&i(F0e({zIndex:e,element:r.current,isPanorama:n})),()=>{i(V0e({zIndex:e,isPanorama:n}))}),[i,e,n]),D.createElement("g",{tabIndex:-1,ref:r})}function u5(t){var{children:e,isPanorama:n}=t,r=It(O0e);if(!r||r.length===0)return e;var i=r.filter(l=>l<0),a=r.filter(l=>l>0);return D.createElement(D.Fragment,null,i.map(l=>D.createElement(l5,{key:l,zIndex:l,isPanorama:n})),e,a.map(l=>D.createElement(l5,{key:l,zIndex:l,isPanorama:n})))}var E2e=["children"];function A2e(t,e){if(t==null)return{};var n,r,i=S2e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function S2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function xx(){return xx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xx.apply(null,arguments)}var T2e={width:"100%",height:"100%",display:"block"},I2e=D.forwardRef((t,e)=>{var n=LF(),r=BF(),i=QF();if(!Nl(n)||!Nl(r))return null;var{children:a,otherAttributes:l,title:f,desc:m}=t,p,b;return l!=null&&(typeof l.tabIndex=="number"?p=l.tabIndex:p=i?0:void 0,typeof l.role=="string"?b=l.role:b=i?"application":void 0),D.createElement(yB,xx({},l,{title:f,desc:m,role:b,tabIndex:p,width:n,height:r,style:T2e,ref:e}),a)}),C2e=t=>{var{children:e}=t,n=It(bb);if(!n)return null;var{width:r,height:i,y:a,x:l}=n;return D.createElement(yB,{width:r,height:i,x:l,y:a},e)},c5=D.forwardRef((t,e)=>{var{children:n}=t,r=A2e(t,E2e),i=Ba();return i?D.createElement(C2e,null,D.createElement(u5,{isPanorama:!0},n)):D.createElement(I2e,xx({ref:e},r),D.createElement(u5,{isPanorama:!1},n))});function O2e(){var t=Gr(),[e,n]=D.useState(null),r=It(uce);return D.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;mn(a)&&a!==r&&t(Hue(a))}},[e,t,r]),n}function f5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function N2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f5(Object(n),!0).forEach(function(r){R2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function R2e(t,e,n){return(e=P2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P2e(t){var e=D2e(t,"string");return typeof e=="symbol"?e:e+""}function D2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vc(){return Vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vc.apply(null,arguments)}var k2e=()=>(h1e(),null);function bx(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var M2e=D.forwardRef((t,e)=>{var n,r,i=D.useRef(null),[a,l]=D.useState({containerWidth:bx((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:bx((r=t.style)===null||r===void 0?void 0:r.height)}),f=D.useCallback((p,b)=>{l(_=>{var T=Math.round(p),R=Math.round(b);return _.containerWidth===T&&_.containerHeight===R?_:{containerWidth:T,containerHeight:R}})},[]),m=D.useCallback(p=>{if(typeof e=="function"&&e(p),p!=null&&typeof ResizeObserver<"u"){var{width:b,height:_}=p.getBoundingClientRect();f(b,_);var T=j=>{var M=j[0];if(M!=null){var{width:L,height:z}=M.contentRect;f(L,z)}},R=new ResizeObserver(T);R.observe(p),i.current=R}},[e,f]);return D.useEffect(()=>()=>{var p=i.current;p?.disconnect()},[f]),D.createElement(D.Fragment,null,D.createElement(A0,{width:a.containerWidth,height:a.containerHeight}),D.createElement("div",Vc({ref:m},t)))}),j2e=D.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=D.useState({containerWidth:bx(n),containerHeight:bx(r)}),l=D.useCallback((m,p)=>{a(b=>{var _=Math.round(m),T=Math.round(p);return b.containerWidth===_&&b.containerHeight===T?b:{containerWidth:_,containerHeight:T}})},[]),f=D.useCallback(m=>{if(typeof e=="function"&&e(m),m!=null){var{width:p,height:b}=m.getBoundingClientRect();l(p,b)}},[e,l]);return D.createElement(D.Fragment,null,D.createElement(A0,{width:i.containerWidth,height:i.containerHeight}),D.createElement("div",Vc({ref:f},t)))}),L2e=D.forwardRef((t,e)=>{var{width:n,height:r}=t;return D.createElement(D.Fragment,null,D.createElement(A0,{width:n,height:r}),D.createElement("div",Vc({ref:e},t)))}),B2e=D.forwardRef((t,e)=>{var{width:n,height:r}=t;return typeof n=="string"||typeof r=="string"?D.createElement(j2e,Vc({},t,{ref:e})):typeof n=="number"&&typeof r=="number"?D.createElement(L2e,Vc({},t,{width:n,height:r,ref:e})):D.createElement(D.Fragment,null,D.createElement(A0,{width:n,height:r}),D.createElement("div",Vc({ref:e},t)))});function F2e(t){return t?M2e:B2e}var V2e=D.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:l,onDoubleClick:f,onMouseDown:m,onMouseEnter:p,onMouseLeave:b,onMouseMove:_,onMouseUp:T,onTouchEnd:R,onTouchMove:j,onTouchStart:M,style:L,width:z,responsive:$,dispatchTouchEvents:K=!0}=t,J=D.useRef(null),ce=Gr(),[Z,V]=D.useState(null),[W,U]=D.useState(null),ae=O2e(),ie=BI(),Q=ie?.width>0?ie.width:z,ne=ie?.height>0?ie.height:i,be=D.useCallback(Se=>{ae(Se),typeof e=="function"&&e(Se),V(Se),U(Se),Se!=null&&(J.current=Se)},[ae,e,V,U]),he=D.useCallback(Se=>{ce(iq(Se)),ce(_o({handler:a,reactEvent:Se}))},[ce,a]),ye=D.useCallback(Se=>{ce(PS(Se)),ce(_o({handler:p,reactEvent:Se}))},[ce,p]),we=D.useCallback(Se=>{ce(Fz()),ce(_o({handler:b,reactEvent:Se}))},[ce,b]),$e=D.useCallback(Se=>{ce(PS(Se)),ce(_o({handler:_,reactEvent:Se}))},[ce,_]),et=D.useCallback(()=>{ce(cq())},[ce]),rt=D.useCallback(Se=>{ce(uq(Se.key))},[ce]),de=D.useCallback(Se=>{ce(_o({handler:l,reactEvent:Se}))},[ce,l]),Ee=D.useCallback(Se=>{ce(_o({handler:f,reactEvent:Se}))},[ce,f]),Xe=D.useCallback(Se=>{ce(_o({handler:m,reactEvent:Se}))},[ce,m]),Ge=D.useCallback(Se=>{ce(_o({handler:T,reactEvent:Se}))},[ce,T]),vt=D.useCallback(Se=>{ce(_o({handler:M,reactEvent:Se}))},[ce,M]),qe=D.useCallback(Se=>{K&&ce(dq(Se)),ce(_o({handler:j,reactEvent:Se}))},[ce,K,j]),ze=D.useCallback(Se=>{ce(_o({handler:R,reactEvent:Se}))},[ce,R]),ct=F2e($);return D.createElement(aU.Provider,{value:Z},D.createElement(Qse.Provider,{value:W},D.createElement(ct,{width:Q??L?.width,height:ne??L?.height,className:Hn("recharts-wrapper",r),style:N2e({position:"relative",cursor:"default",width:Q,height:ne},L),onClick:he,onContextMenu:de,onDoubleClick:Ee,onFocus:et,onKeyDown:rt,onMouseDown:Xe,onMouseEnter:ye,onMouseLeave:we,onMouseMove:$e,onMouseUp:Ge,onTouchEnd:ze,onTouchMove:qe,onTouchStart:vt,ref:be},D.createElement(k2e,null),n)))}),z2e=["width","height","responsive","children","className","style","compact","title","desc"];function U2e(t,e){if(t==null)return{};var n,r,i=q2e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function q2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var yq=D.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:l,style:f,compact:m,title:p,desc:b}=t,_=U2e(t,z2e),T=so(_);return m?D.createElement(D.Fragment,null,D.createElement(A0,{width:n,height:r}),D.createElement(c5,{otherAttributes:T,title:p,desc:b},a)):D.createElement(V2e,{className:l,style:f,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},D.createElement(c5,{otherAttributes:T,title:p,desc:b,ref:e},D.createElement(Gxe,null,a)))});function DS(){return DS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DS.apply(null,arguments)}var G2e={top:5,right:5,bottom:5,left:5},H2e={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:G2e,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},vq=D.forwardRef(function(e,n){var r,i=Zi(e.categoricalChartProps,H2e),{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:f,tooltipPayloadSearcher:m,categoricalChartProps:p}=e,b={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:f,tooltipPayloadSearcher:m,eventEmitter:void 0};return D.createElement(mq,{preloadedState:{options:b},reduxStoreName:(r=p.id)!==null&&r!==void 0?r:a},D.createElement(LU,{chartData:p.data}),D.createElement(gq,{layout:i.layout,margin:i.margin}),D.createElement(pq,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),D.createElement(yq,DS({},i,{ref:n})))}),K2e=["axis"],W2e=D.forwardRef((t,e)=>D.createElement(vq,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:K2e,tooltipPayloadSearcher:JC,categoricalChartProps:t,ref:e})),$2e=["axis","item"],d5=D.forwardRef((t,e)=>D.createElement(vq,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:$2e,tooltipPayloadSearcher:JC,categoricalChartProps:t,ref:e}));function Y2e(t){var e=Gr();return D.useEffect(()=>{e(p2e(t))},[e,t]),null}var X2e=["layout"];function kS(){return kS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kS.apply(null,arguments)}function Q2e(t,e){if(t==null)return{};var n,r,i=Z2e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Z2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var J2e={top:5,right:5,bottom:5,left:5},xq={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:J2e,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},eEe=D.forwardRef(function(e,n){var r,i=Zi(e.categoricalChartProps,xq),{layout:a}=i,l=Q2e(i,X2e),{chartName:f,defaultTooltipEventType:m,validateTooltipEventTypes:p,tooltipPayloadSearcher:b}=e,_={chartName:f,defaultTooltipEventType:m,validateTooltipEventTypes:p,tooltipPayloadSearcher:b,eventEmitter:void 0};return D.createElement(mq,{preloadedState:{options:_},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:f},D.createElement(LU,{chartData:i.data}),D.createElement(gq,{layout:a,margin:i.margin}),D.createElement(pq,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),D.createElement(Y2e,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),D.createElement(yq,kS({},l,{ref:n})))});function h5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function m5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h5(Object(n),!0).forEach(function(r){tEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tEe(t,e,n){return(e=nEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nEe(t){var e=rEe(t,"string");return typeof e=="symbol"?e:e+""}function rEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iEe=["item"],aEe=m5(m5({},xq),{},{layout:"centric",startAngle:0,endAngle:360}),sEe=D.forwardRef((t,e)=>{var n=Zi(t,aEe);return D.createElement(eEe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:iEe,tooltipPayloadSearcher:JC,categoricalChartProps:n,ref:e})});function oEe(){const t=cd(L=>L.profile),[e,n]=D.useState([]),[r,i]=D.useState([]),[a,l]=D.useState([]),[f,m]=D.useState([]),[p,b]=D.useState(0);D.useEffect(()=>{t&&_()},[t,p]);const _=async()=>{if(!t)return;const z=J4(new Date,p),$=fd(z,{weekStartsOn:1}),K=[],J=[],ce=t.waterGoalMl||2e3;for(let U=0;U<7;U++){const ae=My($,U),ie=Ns(ae,"yyyy-MM-dd"),Q=await Ze.dailyLogs.where("date").equals(ie).first();K.push({dag:Ns(ae,"EEE",{locale:_h}),punten:Q?.totalPointsUsed??0,budget:t.dailyPointsBudget}),J.push({dag:Ns(ae,"EEE",{locale:_h}),water:Q?.waterMl??0,doel:ce})}n(K),i(J);const Z={Ontbijt:0,Lunch:0,Diner:0,Tussendoor:0},V={breakfast:"Ontbijt",lunch:"Lunch",dinner:"Diner",snack:"Tussendoor"};for(let U=0;U<7;U++){const ae=My($,U),ie=Ns(ae,"yyyy-MM-dd"),Q=await Ze.dailyLogs.where("date").equals(ie).first();if(Q?.id){const ne=await Ze.mealEntries.where("dailyLogId").equals(Q.id).toArray();for(const be of ne){const he=V[be.mealType]||"Tussendoor";Z[he]+=be.points}}}l(Object.entries(Z).filter(([,U])=>U>0).map(([U,ae])=>({name:U,value:ae})));const W=await Ze.weightEntries.orderBy("date").reverse().limit(30).toArray();m(W.reverse().map(U=>({date:Ns(new Date(U.date),"d MMM",{locale:_h}),gewicht:U.weightKg})))};if(!t)return null;const T=(()=>{const L=J4(new Date,p),z=fd(L,{weekStartsOn:1}),$=My(z,6);return`${Ns(z,"d MMM",{locale:_h})} - ${Ns($,"d MMM",{locale:_h})}`})(),R=e.reduce((L,z)=>L+z.punten,0),j=e.filter(L=>L.punten>0).length>0?Math.round(R/e.filter(L=>L.punten>0).length):0,M=["#FF9500","#34C759","#007AFF","#FF3B30"];return O.jsx(km,{title:"Statistieken",children:O.jsxs("div",{className:"flex flex-col gap-4 pb-4",children:[t&&O.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[O.jsxs(An,{className:"p-3 text-center",children:[O.jsx(tb,{size:20,className:"text-primary mx-auto mb-1"}),O.jsx("div",{className:"text-[20px] font-bold",children:t.currentWeightKg}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"kg nu"})]}),O.jsxs(An,{className:"p-3 text-center",children:[O.jsx($L,{size:20,className:"text-ios-blue mx-auto mb-1"}),O.jsx("div",{className:"text-[20px] font-bold",children:t.goalWeightKg}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"kg doel"})]}),O.jsxs(An,{className:"p-3 text-center",children:[O.jsx(bv,{size:20,className:"text-ios-warning mx-auto mb-1"}),O.jsx("div",{className:"text-[20px] font-bold",children:t.currentWeightKg-t.goalWeightKg>0?(t.currentWeightKg-t.goalWeightKg).toFixed(1):"0"}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"kg te gaan"})]})]}),O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("button",{onClick:()=>b(L=>L+1),className:"px-3 py-1.5 rounded-lg bg-white text-[13px] font-medium border-none cursor-pointer shadow-sm active:bg-gray-100",children:" Vorige"}),O.jsx("span",{className:"text-[15px] font-semibold",children:T}),O.jsx("button",{onClick:()=>b(L=>Math.max(0,L-1)),disabled:p===0,className:`px-3 py-1.5 rounded-lg bg-white text-[13px] font-medium border-none cursor-pointer shadow-sm ${p===0?"opacity-30":"active:bg-gray-100"}`,children:"Volgende "})]}),O.jsxs(An,{children:[O.jsx(Eo,{title:"Punten per dag"}),O.jsx("div",{className:"px-2 pb-4",children:O.jsx(ay,{width:"100%",height:200,children:O.jsxs(d5,{data:e,children:[O.jsx(Uy,{strokeDasharray:"3 3",stroke:"#E5E5EA"}),O.jsx(qy,{dataKey:"dag",tick:{fontSize:12,fill:"#8E8E93"},tickLine:!1}),O.jsx(Gy,{tick:{fontSize:11,fill:"#8E8E93"},tickLine:!1}),O.jsx(_E,{}),O.jsx(AS,{y:t.dailyPointsBudget,stroke:"#FF3B30",strokeDasharray:"5 5",label:{value:"Budget",fontSize:11,fill:"#FF3B30"}}),O.jsx(IS,{dataKey:"punten",fill:"#34C759",radius:[4,4,0,0]})]})})})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[O.jsxs(An,{className:"p-3 text-center",children:[O.jsx("div",{className:"text-[22px] font-bold text-primary",children:R}),O.jsx("div",{className:"text-[12px] text-ios-secondary",children:"Totaal deze week"})]}),O.jsxs(An,{className:"p-3 text-center",children:[O.jsx("div",{className:"text-[22px] font-bold text-ios-blue",children:j}),O.jsx("div",{className:"text-[12px] text-ios-secondary",children:"Gemiddeld per dag"})]})]}),O.jsxs(An,{children:[O.jsx(Eo,{title:"Water per dag"}),O.jsx("div",{className:"px-2 pb-4",children:O.jsx(ay,{width:"100%",height:200,children:O.jsxs(d5,{data:r,children:[O.jsx(Uy,{strokeDasharray:"3 3",stroke:"#E5E5EA"}),O.jsx(qy,{dataKey:"dag",tick:{fontSize:12,fill:"#8E8E93"},tickLine:!1}),O.jsx(Gy,{tick:{fontSize:11,fill:"#8E8E93"},tickLine:!1,tickFormatter:L=>`${L/1e3}L`}),O.jsx(_E,{formatter:L=>[`${L} ml`,"Water"]}),O.jsx(AS,{y:t.waterGoalMl||2e3,stroke:"#3B82F6",strokeDasharray:"5 5",label:{value:"Doel",fontSize:11,fill:"#3B82F6"}}),O.jsx(IS,{dataKey:"water",fill:"#3B82F6",radius:[4,4,0,0]})]})})})]}),a.length>0&&O.jsxs(An,{children:[O.jsx(Eo,{title:"Verdeling per maaltijd"}),O.jsxs("div",{className:"flex items-center px-4 pb-4",children:[O.jsx("div",{className:"w-32 h-32",children:O.jsx(ay,{width:"100%",height:"100%",children:O.jsx(sEe,{children:O.jsx(kU,{data:a,dataKey:"value",cx:"50%",cy:"50%",outerRadius:55,innerRadius:30,children:a.map((L,z)=>O.jsx(F0,{fill:M[z%M.length]},z))})})})}),O.jsx("div",{className:"flex-1 flex flex-col gap-2 ml-4",children:a.map((L,z)=>O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:M[z%M.length]}}),O.jsx("span",{className:"text-[13px] flex-1",children:L.name}),O.jsxs("span",{className:"text-[13px] font-medium",children:[L.value," pt"]})]},L.name))})]})]}),f.length>1&&O.jsxs(An,{children:[O.jsx(Eo,{title:"Gewichtstrend"}),O.jsx("div",{className:"p-4",children:O.jsx(ay,{width:"100%",height:180,children:O.jsxs(W2e,{data:f,children:[O.jsx(Uy,{strokeDasharray:"3 3",stroke:"#E5E5EA"}),O.jsx(qy,{dataKey:"date",tick:{fontSize:11,fill:"#8E8E93"},tickLine:!1}),O.jsx(Gy,{tick:{fontSize:11,fill:"#8E8E93"},tickLine:!1,domain:["dataMin - 1","dataMax + 1"]}),O.jsx(_E,{}),O.jsx(ZU,{type:"monotone",dataKey:"gewicht",stroke:"#007AFF",strokeWidth:2.5,dot:{fill:"#007AFF",r:3}})]})})})]})]})})}const bq=["bodybalanceapp@gmail.com","marcelvandernet@gmail.com"];function wq(){const t=Go.currentUser?.email;return t?bq.includes(t):!1}function lEe(){const t=Jc(),[e,n]=D.useState([]),[r,i]=D.useState([]),[a,l]=D.useState(""),[f,m]=D.useState(!0),[p,b]=D.useState(null),[_,T]=D.useState(null),[R,j]=D.useState(null);D.useEffect(()=>{if(!wq()){t("/");return}M()},[t]);const M=async()=>{m(!0),await Promise.all([L(),z()]),m(!1)},L=async()=>{try{const U=await Bc(Lc(Ti,"inviteCodes")),ae=[];U.forEach(ie=>{const Q=ie.data();ae.push({code:ie.id,label:Q.label||"",createdAt:Q.createdAt||"",usedBy:Q.usedBy||null,usedAt:Q.usedAt||null,usedEmail:Q.usedEmail||""})}),ae.sort((ie,Q)=>(Q.createdAt||"").localeCompare(ie.createdAt||"")),n(ae)}catch(U){console.warn("[Admin] Load codes failed:",U)}},z=async()=>{try{const U=await Bc(Lc(Ti,"users")),ae=[];for(const ie of U.docs){const Q=ie.id;try{const ne=await Bc(Lc(Ti,"users",Q,"profile"));for(const be of ne.docs){const he=be.data();ae.push({userId:Q,email:he.email||"",name:he.name||"Onbekend",disabled:he.disabled===!0,lastLogin:he.updatedAt||""})}}catch{}}i(ae)}catch(U){console.warn("[Admin] Load users failed:",U)}},$=()=>{const U="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let ae="";for(let ie=0;ie<8;ie++)ae+=U[Math.floor(Math.random()*U.length)];return ae},K=async()=>{const U=$();try{await Cd(ds(Ti,"inviteCodes",U),{label:a.trim()||"",createdAt:new Date().toISOString(),usedBy:null,usedAt:null,usedEmail:null}),l(""),await L()}catch(ae){console.warn("[Admin] Create code failed:",ae)}},J=async U=>{try{await navigator.clipboard.writeText(U),b(U),setTimeout(()=>b(null),2e3)}catch{b(U),setTimeout(()=>b(null),2e3)}},ce=async U=>{try{const ae=ds(Ti,"users",U.userId,"profile","data");await ZT(ae,{disabled:!U.disabled}),i(r.map(ie=>ie.userId===U.userId?{...ie,disabled:!ie.disabled}:ie))}catch(ae){console.warn("[Admin] Toggle user failed:",ae)}},Z=async U=>{if(confirm(`Weet je zeker dat je alle data van ${U.email} wilt wissen? De gebruiker moet opnieuw door onboarding.`))try{T(U.userId),await Mte(U.userId),T(null),j(U.userId),setTimeout(()=>j(null),3e3),await z()}catch(ae){console.warn("[Admin] Reset user failed:",ae),T(null)}},V=e.filter(U=>!U.usedBy),W=e.filter(U=>U.usedBy);return O.jsx(km,{title:"Admin",children:O.jsxs("div",{className:"flex flex-col gap-4",children:[O.jsxs("button",{onClick:()=>t("/profile"),className:"flex items-center gap-2 text-primary text-[15px] font-medium bg-transparent border-none cursor-pointer p-0",children:[O.jsx(hne,{size:18}),"Terug naar profiel"]}),f?O.jsx("div",{className:"flex justify-center py-12",children:O.jsx("div",{className:"w-8 h-8 rounded-full border-3 border-primary border-t-transparent animate-spin"})}):O.jsxs(O.Fragment,{children:[O.jsxs(An,{children:[O.jsxs("div",{className:"px-4 py-3 border-b border-ios-separator flex items-center gap-2",children:[O.jsx(sre,{size:18,className:"text-primary"}),O.jsx("span",{className:"text-[15px] font-semibold",children:"Invite Codes"})]}),O.jsxs("div",{className:"p-4",children:[O.jsxs("div",{className:"flex gap-2 mb-4",children:[O.jsx("input",{type:"text",value:a,onChange:U=>l(U.target.value),placeholder:"Label (bijv. naam)",className:"flex-1 bg-ios-bg rounded-xl px-4 py-2.5 text-[15px] border border-ios-separator"}),O.jsxs(to,{onClick:K,className:"flex items-center gap-1.5",children:[O.jsx(Vf,{size:16}),"Maak code"]})]}),V.length>0&&O.jsxs("div",{className:"mb-3",children:[O.jsxs("p",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide mb-2",children:["Beschikbaar (",V.length,")"]}),V.map(U=>O.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-ios-separator last:border-b-0",children:[O.jsxs("div",{children:[O.jsx("span",{className:"text-[17px] font-mono font-bold tracking-wider",children:U.code}),U.label&&O.jsx("span",{className:"text-[13px] text-ios-secondary ml-2",children:U.label})]}),O.jsxs("button",{onClick:()=>J(U.code),className:"flex items-center gap-1 text-primary text-[13px] font-medium bg-transparent border-none cursor-pointer p-1",children:[p===U.code?O.jsx(qL,{size:14}):O.jsx(HL,{size:14}),p===U.code?"Gekopieerd":"Kopieer"]})]},U.code))]}),W.length>0&&O.jsxs("div",{children:[O.jsxs("p",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide mb-2",children:["Gebruikt (",W.length,")"]}),W.map(U=>O.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-ios-separator last:border-b-0 opacity-50",children:[O.jsxs("div",{children:[O.jsx("span",{className:"text-[15px] font-mono line-through",children:U.code}),U.usedEmail&&O.jsx("span",{className:"text-[13px] text-ios-secondary ml-2",children:U.usedEmail}),!U.usedEmail&&U.label&&O.jsx("span",{className:"text-[13px] text-ios-secondary ml-2",children:U.label})]}),O.jsx("span",{className:"text-[12px] text-ios-secondary",children:U.usedAt?new Date(U.usedAt).toLocaleDateString("nl-NL"):""})]},U.code))]}),e.length===0&&O.jsx("p",{className:"text-[15px] text-ios-secondary text-center py-4",children:"Nog geen codes aangemaakt"})]})]}),O.jsxs(An,{children:[O.jsxs("div",{className:"px-4 py-3 border-b border-ios-separator flex items-center gap-2",children:[O.jsx(Zre,{size:18,className:"text-primary"}),O.jsxs("span",{className:"text-[15px] font-semibold",children:["Gebruikers (",r.length,")"]})]}),r.length>0?O.jsx("div",{children:r.map((U,ae)=>O.jsxs("div",{className:`flex items-center justify-between px-4 py-3 ${ae<r.length-1?"border-b border-ios-separator":""}`,children:[O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsxs("div",{className:"text-[15px] font-medium truncate",children:[U.name,U.disabled&&O.jsx("span",{className:"text-ios-destructive ml-1",children:"(geblokkeerd)"})]}),O.jsx("div",{className:"text-[13px] text-ios-secondary truncate",children:U.email})]}),O.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[R===U.userId?O.jsx("span",{className:"text-[13px] text-primary font-medium",children:"Data gewist"}):O.jsxs("button",{onClick:()=>Z(U),disabled:_===U.userId,className:"flex items-center gap-1 px-2.5 py-1.5 rounded-lg text-[13px] font-medium border-none cursor-pointer bg-ios-warning/10 text-ios-warning",children:[O.jsx(WL,{size:14,className:_===U.userId?"animate-spin":""}),"Reset"]}),!bq.includes(U.email)&&O.jsx("button",{onClick:()=>ce(U),className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-[13px] font-medium border-none cursor-pointer ${U.disabled?"bg-primary/10 text-primary":"bg-ios-destructive/10 text-ios-destructive"}`,children:U.disabled?O.jsxs(O.Fragment,{children:[O.jsx(Fne,{size:14})," Activeer"]}):O.jsxs(O.Fragment,{children:[O.jsx(gne,{size:14})," Blokkeer"]})})]})]},U.userId))}):O.jsx("p",{className:"text-[15px] text-ios-secondary text-center py-8",children:"Nog geen gebruikers"})]})]})]})})}function uEe(){const t=Jc(),{profile:e,saveProfile:n,updateWeight:r}=cd(),[i,a]=D.useState(""),[l,f]=D.useState(!1),[m,p]=D.useState(""),[b,_]=D.useState("male"),[T,R]=D.useState(""),[j,M]=D.useState(0),[L,z]=D.useState(0),[$,K]=D.useState("light"),[J,ce]=D.useState("lose"),[Z,V]=D.useState(""),[W,U]=D.useState(""),[ae,ie]=D.useState(!1),[Q,ne]=D.useState(()=>localStorage.getItem("bb_meal_reminder")==="true"),[be,he]=D.useState(()=>localStorage.getItem("bb_water_reminder")==="true"),[ye,we]=D.useState("default"),[$e,et]=D.useState(()=>localStorage.getItem("bb_theme")||"auto"),[rt,de]=D.useState(null),[Ee,Xe]=D.useState(null),[Ge,vt]=D.useState(null);D.useEffect(()=>{ze(),Se()},[]),D.useEffect(()=>{e&&(p(e.name),_(e.gender),R(e.dateOfBirth),M(e.heightCm),z(e.goalWeightKg),K(e.activityLevel),ce(e.goal))},[e]);const qe=async()=>{const ot=parseFloat(i);if(isNaN(ot)||ot<30||ot>300)return;const Vt=Ns(new Date,"yyyy-MM-dd"),xt=await Ze.weightEntries.where("date").equals(Vt).first();xt?.id?await Ze.weightEntries.update(xt.id,{weightKg:ot}):await Ze.weightEntries.add({date:Vt,weightKg:ot});const $t=await r(ot);a(""),$t&&($t.goalReached?(de({message:`Gefeliciteerd! Je hebt je streefgewicht bereikt! Je budget is verhoogd naar ${$t.newDailyBudget} punten per dag.`,type:"success"}),setTimeout(()=>de(null),8e3)):$t.newDailyBudget!==$t.oldDailyBudget&&(de({message:`Je budget is aangepast naar ${$t.newDailyBudget} punten per dag (was ${$t.oldDailyBudget}).`,type:"info"}),setTimeout(()=>de(null),6e3)));const it=om.getState().user?.uid;it&&ML(it,{date:Vt,weightKg:ot}).catch(()=>{})},ze=async()=>{const ot=await Sv();ot&&(V(ot.apiKey),U(ot.apiUrl||""))},ct=async()=>{await Bse(Z,W||void 0),ie(!0),setTimeout(()=>ie(!1),2e3)},Se=()=>{"Notification"in window&&we(Notification.permission)},Oe=async()=>{if(!("Notification"in window))return!1;if(Notification.permission==="granted")return!0;if(Notification.permission==="default"){const ot=await Notification.requestPermission();if(we(ot),ot==="granted")return new Notification("BodyBalance",{body:"Notificaties zijn ingeschakeld!",icon:"/icons/icon-192.png"}),!0}return!1},ft=async()=>{if(Q){ne(!1),localStorage.setItem("bb_meal_reminder","false");return}await Oe()&&(ne(!0),localStorage.setItem("bb_meal_reminder","true"))},Fe=async()=>{if(be){he(!1),localStorage.setItem("bb_water_reminder","false");return}await Oe()&&(he(!0),localStorage.setItem("bb_water_reminder","true"))},pt=ot=>{et(ot),localStorage.setItem("bb_theme",ot),window.dispatchEvent(new Event("themechange"))},Lt=async()=>{try{Xe("Exporteren...");const ot={version:2,exportDate:new Date().toISOString(),userProfiles:(await Ze.userProfiles.toArray()).map(it=>{const{...na}=it;return delete na.anthropicApiKey,delete na.anthropicApiUrl,na}),foodItems:await Ze.foodItems.toArray(),mealEntries:await Ze.mealEntries.toArray(),dailyLogs:await Ze.dailyLogs.toArray(),weightEntries:await Ze.weightEntries.toArray()},Vt=new Blob([JSON.stringify(ot,null,2)],{type:"application/json"}),xt=URL.createObjectURL(Vt),$t=document.createElement("a");$t.href=xt,$t.download=`bodybalance-backup-${Ns(new Date,"yyyy-MM-dd")}.json`,$t.click(),URL.revokeObjectURL(xt),Xe("Export gelukt!"),setTimeout(()=>Xe(null),3e3)}catch{Xe("Export mislukt"),setTimeout(()=>Xe(null),3e3)}},cn=()=>{const ot=document.createElement("input");ot.type="file",ot.accept=".json",ot.onchange=async Vt=>{const xt=Vt.target.files?.[0];if(xt)try{vt("Importeren...");const $t=await xt.text(),it=JSON.parse($t);if(!it.version||!it.userProfiles){vt("Ongeldig bestand"),setTimeout(()=>vt(null),3e3);return}await Ze.transaction("rw",[Ze.userProfiles,Ze.foodItems,Ze.mealEntries,Ze.dailyLogs,Ze.weightEntries],async()=>{await Ze.foodItems.clear(),await Ze.mealEntries.clear(),await Ze.dailyLogs.clear(),await Ze.weightEntries.clear(),await Ze.userProfiles.clear(),it.userProfiles?.length&&await Ze.userProfiles.bulkAdd(it.userProfiles),it.foodItems?.length&&await Ze.foodItems.bulkAdd(it.foodItems),it.mealEntries?.length&&await Ze.mealEntries.bulkAdd(it.mealEntries),it.dailyLogs?.length&&await Ze.dailyLogs.bulkAdd(it.dailyLogs),it.weightEntries?.length&&await Ze.weightEntries.bulkAdd(it.weightEntries)});const na=Go.currentUser?.uid;na&&LL(na).catch(()=>{}),vt("Import gelukt! Pagina herlaadt..."),setTimeout(()=>window.location.reload(),500)}catch{vt("Import mislukt - ongeldig bestand"),setTimeout(()=>vt(null),3e3)}},ot.click()},Ln=async()=>{if(!e)return;const ot=hI(e.currentWeightKg,j,T,b,$,J);await n({name:m,gender:b,dateOfBirth:T,heightCm:j,currentWeightKg:e.currentWeightKg,goalWeightKg:L,activityLevel:$,goal:J,dailyPointsBudget:ot.dailyPoints,weeklyPointsBudget:ot.weeklyPoints,onboardingComplete:!0}),f(!1)};return e?O.jsx(km,{title:"Profiel",children:O.jsxs("div",{className:"flex flex-col gap-4 pb-4",children:[O.jsxs(An,{children:[O.jsx(Eo,{title:"Gewicht loggen"}),O.jsxs("div",{className:"p-4 flex gap-3",children:[O.jsxs("div",{className:"relative flex-1",children:[O.jsx("input",{type:"number",placeholder:String(e.currentWeightKg),value:i,onChange:ot=>a(ot.target.value),step:"0.1",min:"30",max:"300",className:"bg-ios-bg rounded-xl px-4 py-3 text-[17px] w-full"}),O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:"kg"})]}),O.jsx(to,{onClick:qe,disabled:!i,children:"Log"})]})]}),rt&&O.jsx(An,{className:rt.type==="success"?"bg-primary/10 border border-primary/20":"bg-ios-blue/10 border border-ios-blue/20",children:O.jsxs("div",{className:"px-4 py-3 flex items-start gap-3",children:[rt.type==="success"?O.jsx(YL,{size:20,className:"text-primary flex-shrink-0 mt-0.5"}):O.jsx(bv,{size:20,className:"text-ios-blue flex-shrink-0 mt-0.5"}),O.jsx("p",{className:`text-[14px] font-medium ${rt.type==="success"?"text-primary":"text-ios-blue"}`,children:rt.message})]})}),O.jsxs(An,{children:[O.jsx(Eo,{title:"Puntenbudget"}),O.jsxs("div",{className:"px-4 py-3 flex justify-between items-center border-b border-ios-separator",children:[O.jsx("span",{className:"text-[15px]",children:"Dagelijks budget"}),O.jsxs("span",{className:"text-[17px] font-bold text-primary",children:[e.dailyPointsBudget," pt"]})]}),O.jsxs("div",{className:"px-4 py-3 flex justify-between items-center",children:[O.jsx("span",{className:"text-[15px]",children:"Weekpunten"}),O.jsxs("span",{className:"text-[17px] font-bold text-ios-blue",children:[e.weeklyPointsBudget," pt"]})]})]}),O.jsxs(An,{children:[O.jsx(Eo,{title:"Gegevens",rightContent:O.jsx("button",{onClick:()=>f(!l),className:"text-[15px] text-primary font-medium border-none bg-transparent cursor-pointer",children:l?"Annuleer":"Wijzig"})}),l?O.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[O.jsx(Tc,{label:"Naam",value:m,onChange:ot=>p(ot.currentTarget.value)}),O.jsx(Mh,{label:"Geslacht",value:b,onChange:ot=>_(ot.currentTarget.value),options:[{value:"male",label:"Man"},{value:"female",label:"Vrouw"}]}),O.jsx(Tc,{label:"Lengte",type:"number",suffix:"cm",value:j,onChange:ot=>M(Number(ot.currentTarget.value))}),O.jsx(Tc,{label:"Streefgewicht",type:"number",suffix:"kg",value:L,onChange:ot=>z(Number(ot.currentTarget.value))}),O.jsx(Mh,{label:"Activiteitsniveau",value:$,onChange:ot=>K(ot.currentTarget.value),options:Object.entries(OA).map(([ot,Vt])=>({value:ot,label:Vt}))}),O.jsx(Mh,{label:"Doel",value:J,onChange:ot=>ce(ot.currentTarget.value),options:Object.entries(NA).map(([ot,Vt])=>({value:ot,label:Vt}))}),O.jsx(to,{fullWidth:!0,onClick:Ln,className:"mt-2",children:"Opslaan"})]}):O.jsx("div",{children:[["Naam",e.name],["Geslacht",e.gender==="male"?"Man":"Vrouw"],["Lengte",`${e.heightCm} cm`],["Activiteit",OA[e.activityLevel]],["Doel",NA[e.goal]]].map(([ot,Vt],xt,$t)=>O.jsxs("div",{className:`px-4 py-3 flex justify-between ${xt<$t.length-1?"border-b border-ios-separator":""}`,children:[O.jsx("span",{className:"text-[15px] text-ios-secondary",children:ot}),O.jsx("span",{className:"text-[15px]",children:Vt})]},ot))})]}),O.jsxs(An,{children:[O.jsx(Eo,{title:"AI Instellingen"}),O.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Anthropic API-sleutel"}),O.jsxs("div",{className:"relative",children:[O.jsx(lre,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:"password",placeholder:"sk-ant-...",value:Z,onChange:ot=>V(ot.target.value),className:"bg-ios-bg rounded-xl pl-9 pr-4 py-3 text-[15px] w-full"})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"API URL (optioneel)"}),O.jsx("input",{type:"url",placeholder:"https://api.anthropic.com/v1/messages",value:W,onChange:ot=>U(ot.target.value),className:"bg-ios-bg rounded-xl px-4 py-3 text-[15px] w-full"})]}),O.jsx(to,{fullWidth:!0,onClick:ct,disabled:!Z.trim(),children:ae?O.jsxs("span",{className:"flex items-center justify-center gap-2",children:[O.jsx(qL,{size:16})," Opgeslagen"]}):"Opslaan"}),O.jsx("p",{className:"text-[12px] text-ios-secondary text-center",children:"Nodig voor AI foto-herkenning en de voedingsassistent"})]})]}),O.jsxs(An,{children:[O.jsx(Eo,{title:"Waterdoel"}),O.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx(kh,{size:20,className:"text-blue-500"}),O.jsx("span",{className:"text-[15px]",children:"Dagelijks doel"})]}),O.jsx("div",{className:"flex items-center gap-2",children:[1500,2e3,2500,3e3].map(ot=>O.jsxs("button",{onClick:async()=>{e?.id&&(await Ze.userProfiles.update(e.id,{waterGoalMl:ot,updatedAt:new Date}),cd.setState({profile:{...e,waterGoalMl:ot}}))},className:`px-2.5 py-1 rounded-lg text-[13px] font-medium border-none cursor-pointer transition-colors ${(e?.waterGoalMl||2e3)===ot?"bg-blue-500 text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:[ot/1e3,"L"]},ot))})]})]}),O.jsxs(An,{children:[O.jsx(Eo,{title:"Weergave"}),O.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[$e==="dark"?O.jsx(bre,{size:20,className:"text-ios-blue"}):$e==="light"?O.jsx(Lre,{size:20,className:"text-ios-warning"}):O.jsx(vre,{size:20,className:"text-ios-secondary"}),O.jsx("span",{className:"text-[15px]",children:"Thema"})]}),O.jsx("div",{className:"flex items-center gap-1",children:[{key:"auto",label:"Auto"},{key:"light",label:"Licht"},{key:"dark",label:"Donker"}].map(({key:ot,label:Vt})=>O.jsx("button",{onClick:()=>pt(ot),className:`px-3 py-1 rounded-lg text-[13px] font-medium border-none cursor-pointer transition-colors ${$e===ot?"bg-ios-blue text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:Vt},ot))})]})]}),O.jsxs(An,{children:[O.jsx(Eo,{title:"Notificaties"}),O.jsxs("div",{className:"px-4 py-3 flex items-center justify-between border-b border-ios-separator",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[Q?O.jsx(xne,{size:20,className:"text-primary"}):O.jsx(yne,{size:20,className:"text-ios-secondary"}),O.jsx("span",{className:"text-[15px]",children:"Maaltijd herinnering"})]}),O.jsx("button",{onClick:ft,className:`relative w-[51px] h-[31px] rounded-full border-none cursor-pointer transition-colors ${Q?"bg-primary":"bg-ios-separator"}`,children:O.jsx("div",{className:`absolute top-0.5 w-[27px] h-[27px] rounded-full bg-white shadow-sm transition-transform ${Q?"translate-x-[22px]":"translate-x-0.5"}`})})]}),O.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[be?O.jsx(kh,{size:20,className:"text-blue-500"}):O.jsx(kh,{size:20,className:"text-ios-secondary"}),O.jsx("span",{className:"text-[15px]",children:"Water herinnering"})]}),O.jsx("button",{onClick:Fe,className:`relative w-[51px] h-[31px] rounded-full border-none cursor-pointer transition-colors ${be?"bg-blue-500":"bg-ios-separator"}`,children:O.jsx("div",{className:`absolute top-0.5 w-[27px] h-[27px] rounded-full bg-white shadow-sm transition-transform ${be?"translate-x-[22px]":"translate-x-0.5"}`})})]}),ye==="denied"&&O.jsxs("div",{className:"px-4 pb-3 flex items-start gap-2",children:[O.jsx(ky,{size:14,className:"text-ios-destructive flex-shrink-0 mt-0.5"}),O.jsx("p",{className:"text-[12px] text-ios-destructive",children:"Notificaties zijn geblokkeerd. Ga naar je browserinstellingen om dit te wijzigen."})]})]}),O.jsxs(An,{children:[O.jsx(Eo,{title:"Data beheer"}),O.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[O.jsxs("button",{onClick:Lt,className:"flex items-center justify-center gap-2 py-3 bg-ios-bg rounded-xl text-[15px] font-medium text-ios-text border-none cursor-pointer active:bg-gray-200 transition-colors",children:[O.jsx(Hne,{size:18}),"Data exporteren (JSON)"]}),O.jsxs("button",{onClick:cn,className:"flex items-center justify-center gap-2 py-3 bg-ios-bg rounded-xl text-[15px] font-medium text-ios-text border-none cursor-pointer active:bg-gray-200 transition-colors",children:[O.jsx(Yre,{size:18}),"Data importeren"]}),(Ee||Ge)&&O.jsx("p",{className:"text-[13px] text-center text-ios-secondary",children:Ee||Ge}),O.jsx("p",{className:"text-[12px] text-ios-secondary text-center",children:"Maak een backup van al je data of herstel van een eerdere backup"})]})]}),wq()&&O.jsxs("button",{onClick:()=>t("/admin"),className:"flex items-center gap-3 w-full p-4 bg-white dark:bg-ios-card rounded-2xl shadow-sm border-none cursor-pointer active:bg-gray-50 text-left",children:[O.jsx("div",{className:"w-10 h-10 rounded-full bg-ios-blue/10 flex items-center justify-center",children:O.jsx(Dre,{size:20,className:"text-ios-blue"})}),O.jsxs("div",{className:"flex-1",children:[O.jsx("div",{className:"text-[15px] font-semibold",children:"Admin Panel"}),O.jsx("div",{className:"text-[13px] text-ios-secondary",children:"Invite codes en gebruikersbeheer"})]})]}),O.jsxs(to,{variant:"ghost",fullWidth:!0,onClick:()=>om.getState().logout(),className:"flex items-center justify-center gap-2 text-ios-destructive",children:[O.jsx(KL,{size:18}),"Uitloggen"]})]})}):null}const cEe=4e3;function fEe(){const{visible:t,waterMl:e,drinkName:n,percentage:r,entryId:i,hide:a}=yI(),l=D.useRef(null),f=$f(b=>b.selectedDate);D.useEffect(()=>(t&&(l.current=setTimeout(a,cEe)),()=>{l.current&&clearTimeout(l.current)}),[t,a]);const m=D.useCallback(async()=>{await Jx(f,-e),i&&await Wte(i),window.dispatchEvent(new CustomEvent("water-changed")),a()},[e,f,a,i]);if(!t)return null;const p=r<1?`${e}ml toegevoegd aan waterinname (${Math.round(r*100)}% van ${n})`:`${e}ml toegevoegd aan waterinname`;return O.jsx("div",{className:"fixed bottom-[80px] left-4 right-4 z-[90] animate-toast-up",style:{marginBottom:"var(--safe-area-bottom)"},children:O.jsxs("div",{className:"bg-blue-600 text-white rounded-2xl px-4 py-3 flex items-center gap-3 shadow-lg",children:[O.jsx(kh,{size:18,className:"flex-shrink-0"}),O.jsx("span",{className:"text-[14px] font-medium flex-1 leading-snug",children:p}),O.jsxs("button",{onClick:m,className:"flex items-center gap-1 bg-white/20 text-white px-3 py-1.5 rounded-lg text-[13px] font-semibold border-none cursor-pointer active:bg-white/30 flex-shrink-0",children:[O.jsx(Wre,{size:13}),"Ongedaan"]})]})})}function dEe(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:l}=t;let f,m,p;const b=async(T=!0)=>{await m,p?.()};async function _(){if("serviceWorker"in navigator){if(f=await MS(async()=>{const{Workbox:T}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:T}},[]).then(({Workbox:T})=>new T("/sw.js",{scope:"/",type:"classic"})).catch(T=>{l?.(T)}),!f)return;p=()=>{f?.messageSkipWaiting()};{let T=!1;const R=()=>{T=!0,f?.addEventListener("controlling",j=>{j.isUpdate&&window.location.reload()}),n?.()};f.addEventListener("installed",j=>{typeof j.isUpdate>"u"?typeof j.isExternal<"u"&&j.isExternal?R():!T&&r?.():j.isUpdate||r?.()}),f.addEventListener("waiting",R)}f.register({immediate:e}).then(T=>{a?a("/sw.js",T):i?.(T)}).catch(T=>{l?.(T)})}}return m=_(),b}function hEe(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:l}=t,[f,m]=D.useState(!1),[p,b]=D.useState(!1),[_]=D.useState(()=>dEe({immediate:e,onOfflineReady(){b(!0),r?.()},onNeedRefresh(){m(!0),n?.()},onRegistered:i,onRegisteredSW:a,onRegisterError:l}));return{needRefresh:[f,m],offlineReady:[p,b],updateServiceWorker:_}}function mEe(){const{user:t,isAuthLoading:e}=om(),{profile:n,isLoading:r,loadProfile:i}=cd(),a=D.useRef(!1);return D.useEffect(()=>{if(!t){a.current=!1;return}(async()=>{try{const m=ds(Ti,"users",t.uid,"profile","data"),p=await f0(m);if(p.exists()&&p.data().disabled===!0){om.getState().logout();return}}catch{}if(t.email)try{const{setDoc:m}=await MS(async()=>{const{setDoc:_}=await Promise.resolve().then(()=>uJ);return{setDoc:_}},void 0),p=ds(Ti,"users",t.uid);await m(p,{email:t.email,lastLogin:new Date().toISOString()},{merge:!0});const b=ds(Ti,"users",t.uid,"profile","data");await m(b,{email:t.email},{merge:!0})}catch{}if(localStorage.getItem("bb_current_uid")!==t.uid&&await Ze.transaction("rw",[Ze.userProfiles,Ze.foodItems,Ze.mealEntries,Ze.dailyLogs,Ze.weightEntries],async()=>{await Ze.userProfiles.clear(),await Ze.foodItems.clear(),await Ze.mealEntries.clear(),await Ze.dailyLogs.clear(),await Ze.weightEntries.clear()}),localStorage.setItem("bb_current_uid",t.uid),await i(),!a.current){a.current=!0;try{await jte(t.uid)?await i():LL(t.uid).catch(p=>console.warn("[Sync] Push all failed:",p))}catch(m){console.warn("[Sync] Initial sync failed:",m)}}})()},[t,i]),e?O.jsx("div",{className:"flex items-center justify-center h-full",children:O.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-primary border-t-transparent animate-spin"})}):t?r?O.jsx("div",{className:"flex items-center justify-center h-full",children:O.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-primary border-t-transparent animate-spin"})}):n?.onboardingComplete?O.jsxs(O.Fragment,{children:[O.jsxs(YH,{children:[O.jsx(yc,{path:"/",element:O.jsx(Yae,{})}),O.jsx(yc,{path:"/search",element:O.jsx(ase,{})}),O.jsx(yc,{path:"/scan",element:O.jsx(Vse,{})}),O.jsx(yc,{path:"/statistics",element:O.jsx(oEe,{})}),O.jsx(yc,{path:"/profile",element:O.jsx(uEe,{})}),O.jsx(yc,{path:"/admin",element:O.jsx(lEe,{})}),O.jsx(yc,{path:"*",element:O.jsx(WH,{to:"/",replace:!0})})]}),O.jsx(rie,{})]}):O.jsx(oie,{}):O.jsx(sie,{})}function gEe(){const[t,e]=D.useState(!navigator.onLine);return D.useEffect(()=>{const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("offline",n),window.addEventListener("online",r),()=>{window.removeEventListener("offline",n),window.removeEventListener("online",r)}},[]),t?O.jsxs("div",{className:"fixed top-0 left-0 right-0 z-[100] bg-ios-warning text-white text-center py-1.5 text-[13px] font-medium flex items-center justify-center gap-1.5",style:{paddingTop:"calc(6px + var(--safe-area-top))"},children:[O.jsx(eie,{size:14}),"Geen internetverbinding  zoeken werkt offline niet"]}):null}function pEe(){const{needRefresh:[t],updateServiceWorker:e}=hEe();return t?O.jsxs("div",{className:"fixed bottom-[70px] left-4 right-4 z-[100] bg-ios-blue text-white rounded-2xl px-4 py-3 flex items-center justify-between shadow-lg animate-slide-up",style:{marginBottom:"var(--safe-area-bottom)"},children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(Ere,{size:16}),O.jsx("span",{className:"text-[14px] font-medium",children:"Update beschikbaar"})]}),O.jsx("button",{onClick:()=>e(!0),className:"bg-white text-ios-blue px-3 py-1.5 rounded-lg text-[13px] font-semibold border-none cursor-pointer",children:"Bijwerken"})]}):null}const yEe=[{hour:8,minute:0,label:"Tijd om je ontbijt te loggen!"},{hour:12,minute:30,label:"Tijd om je lunch te loggen!"},{hour:18,minute:0,label:"Tijd om je avondeten te loggen!"}],vEe=[8,10,12,14,16,18,20,22];function g5(t,e){"Notification"in window&&Notification.permission==="granted"&&new Notification(t,{body:e,icon:"/icons/icon-192x192.png"})}function xEe(){D.useEffect(()=>{const t=()=>{const n=new Date,r=n.getHours(),i=n.getMinutes(),a=`${n.getFullYear()}-${n.getMonth()}-${n.getDate()}`;if(localStorage.getItem("bb_meal_reminder")==="true"){for(const l of yEe)if(r===l.hour&&i>=l.minute){const f=`bb_notif_meal_${l.hour}_${a}`;localStorage.getItem(f)||(g5("BodyBalance",l.label),localStorage.setItem(f,"1"))}}if(localStorage.getItem("bb_water_reminder")==="true"&&vEe.includes(r)){const l=`bb_notif_water_${r}_${a}`;localStorage.getItem(l)||(g5("BodyBalance","Vergeet niet water te drinken!"),localStorage.setItem(l,"1"))}for(let l=localStorage.length-1;l>=0;l--){const f=localStorage.key(l);f?.startsWith("bb_notif_")&&!f.endsWith(a)&&localStorage.removeItem(f)}};t();const e=setInterval(t,6e4);return()=>clearInterval(e)},[])}function p5(){const t=localStorage.getItem("bb_theme")||"auto",e=window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="dark"||t==="auto"&&e;document.documentElement.classList.toggle("dark",n)}function bEe(){D.useEffect(()=>{p5();const t=window.matchMedia("(prefers-color-scheme: dark)"),e=()=>p5();return t.addEventListener("change",e),window.addEventListener("storage",e),window.addEventListener("themechange",e),()=>{t.removeEventListener("change",e),window.removeEventListener("storage",e),window.removeEventListener("themechange",e)}},[])}function wEe(){return bEe(),xEe(),O.jsxs(bK,{children:[O.jsx(gEe,{}),O.jsx(pEe,{}),O.jsx(fEe,{}),O.jsx(mEe,{})]})}YG.createRoot(document.getElementById("root")).render(O.jsx(D.StrictMode,{children:O.jsx(wEe,{})}));
