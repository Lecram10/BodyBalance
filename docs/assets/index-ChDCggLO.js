function PG(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Vg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var I_={exports:{}},_g={};var hP;function RG(){if(hP)return _g;hP=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var l=null;if(a!==void 0&&(l=""+a),i.key!==void 0&&(l=""+i.key),"key"in i){a={};for(var f in i)f!=="key"&&(a[f]=i[f])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:l,ref:i!==void 0?i:null,props:a}}return _g.Fragment=e,_g.jsx=n,_g.jsxs=n,_g}var mP;function DG(){return mP||(mP=1,I_.exports=RG()),I_.exports}var O=DG(),C_={exports:{}},tn={};var gP;function kG(){if(gP)return tn;gP=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function N(me){return me===null||typeof me!="object"?null:(me=T&&me[T]||me["@@iterator"],typeof me=="function"?me:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,L={};function z(me,Se,Ye){this.props=me,this.context=Se,this.refs=L,this.updater=Ye||j}z.prototype.isReactComponent={},z.prototype.setState=function(me,Se){if(typeof me!="object"&&typeof me!="function"&&me!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,me,Se,"setState")},z.prototype.forceUpdate=function(me){this.updater.enqueueForceUpdate(this,me,"forceUpdate")};function $(){}$.prototype=z.prototype;function K(me,Se,Ye){this.props=me,this.context=Se,this.refs=L,this.updater=Ye||j}var X=K.prototype=new $;X.constructor=K,M(X,z.prototype),X.isPureReactComponent=!0;var se=Array.isArray;function J(){}var V={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function H(me,Se,Ye){var ze=Ye.ref;return{$$typeof:t,type:me,key:Se,ref:ze!==void 0?ze:null,props:Ye}}function oe(me,Se){return H(me.type,Se,me.props)}function ae(me){return typeof me=="object"&&me!==null&&me.$$typeof===t}function Z(me){var Se={"=":"=0",":":"=2"};return"$"+me.replace(/[=:]/g,function(Ye){return Se[Ye]})}var ee=/\/+/g;function xe(me,Se){return typeof me=="object"&&me!==null&&me.key!=null?Z(""+me.key):Se.toString(36)}function de(me){switch(me.status){case"fulfilled":return me.value;case"rejected":throw me.reason;default:switch(typeof me.status=="string"?me.then(J,J):(me.status="pending",me.then(function(Se){me.status==="pending"&&(me.status="fulfilled",me.value=Se)},function(Se){me.status==="pending"&&(me.status="rejected",me.reason=Se)})),me.status){case"fulfilled":return me.value;case"rejected":throw me.reason}}throw me}function ye(me,Se,Ye,ze,yt){var $e=typeof me;($e==="undefined"||$e==="boolean")&&(me=null);var pt=!1;if(me===null)pt=!0;else switch($e){case"bigint":case"string":case"number":pt=!0;break;case"object":switch(me.$$typeof){case t:case e:pt=!0;break;case b:return pt=me._init,ye(pt(me._payload),Se,Ye,ze,yt)}}if(pt)return yt=yt(me),pt=ze===""?"."+xe(me,0):ze,se(yt)?(Ye="",pt!=null&&(Ye=pt.replace(ee,"$&/")+"/"),ye(yt,Se,Ye,"",function(Xe){return Xe})):yt!=null&&(ae(yt)&&(yt=oe(yt,Ye+(yt.key==null||me&&me.key===yt.key?"":(""+yt.key).replace(ee,"$&/")+"/")+pt)),Se.push(yt)),1;pt=0;var lt=ze===""?".":ze+":";if(se(me))for(var Ne=0;Ne<me.length;Ne++)ze=me[Ne],$e=lt+xe(ze,Ne),pt+=ye(ze,Se,Ye,$e,yt);else if(Ne=N(me),typeof Ne=="function")for(me=Ne.call(me),Ne=0;!(ze=me.next()).done;)ze=ze.value,$e=lt+xe(ze,Ne++),pt+=ye(ze,Se,Ye,$e,yt);else if($e==="object"){if(typeof me.then=="function")return ye(de(me),Se,Ye,ze,yt);throw Se=String(me),Error("Objects are not valid as a React child (found: "+(Se==="[object Object]"?"object with keys {"+Object.keys(me).join(", ")+"}":Se)+"). If you meant to render a collection of children, use an array instead.")}return pt}function _e(me,Se,Ye){if(me==null)return me;var ze=[],yt=0;return ye(me,ze,"","",function($e){return Se.call(Ye,$e,yt++)}),ze}function qe(me){if(me._status===-1){var Se=me._result;Se=Se(),Se.then(function(Ye){(me._status===0||me._status===-1)&&(me._status=1,me._result=Ye)},function(Ye){(me._status===0||me._status===-1)&&(me._status=2,me._result=Ye)}),me._status===-1&&(me._status=0,me._result=Se)}if(me._status===1)return me._result.default;throw me._result}var Ve=typeof reportError=="function"?reportError:function(me){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof me=="object"&&me!==null&&typeof me.message=="string"?String(me.message):String(me),error:me});if(!window.dispatchEvent(Se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",me);return}console.error(me)},tt={map:_e,forEach:function(me,Se,Ye){_e(me,function(){Se.apply(this,arguments)},Ye)},count:function(me){var Se=0;return _e(me,function(){Se++}),Se},toArray:function(me){return _e(me,function(Se){return Se})||[]},only:function(me){if(!ae(me))throw Error("React.Children.only expected to receive a single React element child.");return me}};return tn.Activity=_,tn.Children=tt,tn.Component=z,tn.Fragment=n,tn.Profiler=i,tn.PureComponent=K,tn.StrictMode=r,tn.Suspense=m,tn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,tn.__COMPILER_RUNTIME={__proto__:null,c:function(me){return V.H.useMemoCache(me)}},tn.cache=function(me){return function(){return me.apply(null,arguments)}},tn.cacheSignal=function(){return null},tn.cloneElement=function(me,Se,Ye){if(me==null)throw Error("The argument must be a React element, but you passed "+me+".");var ze=M({},me.props),yt=me.key;if(Se!=null)for($e in Se.key!==void 0&&(yt=""+Se.key),Se)!W.call(Se,$e)||$e==="key"||$e==="__self"||$e==="__source"||$e==="ref"&&Se.ref===void 0||(ze[$e]=Se[$e]);var $e=arguments.length-2;if($e===1)ze.children=Ye;else if(1<$e){for(var pt=Array($e),lt=0;lt<$e;lt++)pt[lt]=arguments[lt+2];ze.children=pt}return H(me.type,yt,ze)},tn.createContext=function(me){return me={$$typeof:l,_currentValue:me,_currentValue2:me,_threadCount:0,Provider:null,Consumer:null},me.Provider=me,me.Consumer={$$typeof:a,_context:me},me},tn.createElement=function(me,Se,Ye){var ze,yt={},$e=null;if(Se!=null)for(ze in Se.key!==void 0&&($e=""+Se.key),Se)W.call(Se,ze)&&ze!=="key"&&ze!=="__self"&&ze!=="__source"&&(yt[ze]=Se[ze]);var pt=arguments.length-2;if(pt===1)yt.children=Ye;else if(1<pt){for(var lt=Array(pt),Ne=0;Ne<pt;Ne++)lt[Ne]=arguments[Ne+2];yt.children=lt}if(me&&me.defaultProps)for(ze in pt=me.defaultProps,pt)yt[ze]===void 0&&(yt[ze]=pt[ze]);return H(me,$e,yt)},tn.createRef=function(){return{current:null}},tn.forwardRef=function(me){return{$$typeof:f,render:me}},tn.isValidElement=ae,tn.lazy=function(me){return{$$typeof:b,_payload:{_status:-1,_result:me},_init:qe}},tn.memo=function(me,Se){return{$$typeof:p,type:me,compare:Se===void 0?null:Se}},tn.startTransition=function(me){var Se=V.T,Ye={};V.T=Ye;try{var ze=me(),yt=V.S;yt!==null&&yt(Ye,ze),typeof ze=="object"&&ze!==null&&typeof ze.then=="function"&&ze.then(J,Ve)}catch($e){Ve($e)}finally{Se!==null&&Ye.types!==null&&(Se.types=Ye.types),V.T=Se}},tn.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},tn.use=function(me){return V.H.use(me)},tn.useActionState=function(me,Se,Ye){return V.H.useActionState(me,Se,Ye)},tn.useCallback=function(me,Se){return V.H.useCallback(me,Se)},tn.useContext=function(me){return V.H.useContext(me)},tn.useDebugValue=function(){},tn.useDeferredValue=function(me,Se){return V.H.useDeferredValue(me,Se)},tn.useEffect=function(me,Se){return V.H.useEffect(me,Se)},tn.useEffectEvent=function(me){return V.H.useEffectEvent(me)},tn.useId=function(){return V.H.useId()},tn.useImperativeHandle=function(me,Se,Ye){return V.H.useImperativeHandle(me,Se,Ye)},tn.useInsertionEffect=function(me,Se){return V.H.useInsertionEffect(me,Se)},tn.useLayoutEffect=function(me,Se){return V.H.useLayoutEffect(me,Se)},tn.useMemo=function(me,Se){return V.H.useMemo(me,Se)},tn.useOptimistic=function(me,Se){return V.H.useOptimistic(me,Se)},tn.useReducer=function(me,Se,Ye){return V.H.useReducer(me,Se,Ye)},tn.useRef=function(me){return V.H.useRef(me)},tn.useState=function(me){return V.H.useState(me)},tn.useSyncExternalStore=function(me,Se,Ye){return V.H.useSyncExternalStore(me,Se,Ye)},tn.useTransition=function(){return V.H.useTransition()},tn.version="19.2.4",tn}var pP;function mm(){return pP||(pP=1,C_.exports=kG()),C_.exports}var D=mm();const zg=Rl(D),MG=PG({__proto__:null,default:zg},[D]);var O_={exports:{}},Eg={},N_={exports:{}},P_={};var yP;function jG(){return yP||(yP=1,(function(t){function e(ye,_e){var qe=ye.length;ye.push(_e);e:for(;0<qe;){var Ve=qe-1>>>1,tt=ye[Ve];if(0<i(tt,_e))ye[Ve]=_e,ye[qe]=tt,qe=Ve;else break e}}function n(ye){return ye.length===0?null:ye[0]}function r(ye){if(ye.length===0)return null;var _e=ye[0],qe=ye.pop();if(qe!==_e){ye[0]=qe;e:for(var Ve=0,tt=ye.length,me=tt>>>1;Ve<me;){var Se=2*(Ve+1)-1,Ye=ye[Se],ze=Se+1,yt=ye[ze];if(0>i(Ye,qe))ze<tt&&0>i(yt,Ye)?(ye[Ve]=yt,ye[ze]=qe,Ve=ze):(ye[Ve]=Ye,ye[Se]=qe,Ve=Se);else if(ze<tt&&0>i(yt,qe))ye[Ve]=yt,ye[ze]=qe,Ve=ze;else break e}}return _e}function i(ye,_e){var qe=ye.sortIndex-_e.sortIndex;return qe!==0?qe:ye.id-_e.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,f=l.now();t.unstable_now=function(){return l.now()-f}}var m=[],p=[],b=1,_=null,T=3,N=!1,j=!1,M=!1,L=!1,z=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function X(ye){for(var _e=n(p);_e!==null;){if(_e.callback===null)r(p);else if(_e.startTime<=ye)r(p),_e.sortIndex=_e.expirationTime,e(m,_e);else break;_e=n(p)}}function se(ye){if(M=!1,X(ye),!j)if(n(m)!==null)j=!0,J||(J=!0,Z());else{var _e=n(p);_e!==null&&de(se,_e.startTime-ye)}}var J=!1,V=-1,W=5,H=-1;function oe(){return L?!0:!(t.unstable_now()-H<W)}function ae(){if(L=!1,J){var ye=t.unstable_now();H=ye;var _e=!0;try{e:{j=!1,M&&(M=!1,$(V),V=-1),N=!0;var qe=T;try{t:{for(X(ye),_=n(m);_!==null&&!(_.expirationTime>ye&&oe());){var Ve=_.callback;if(typeof Ve=="function"){_.callback=null,T=_.priorityLevel;var tt=Ve(_.expirationTime<=ye);if(ye=t.unstable_now(),typeof tt=="function"){_.callback=tt,X(ye),_e=!0;break t}_===n(m)&&r(m),X(ye)}else r(m);_=n(m)}if(_!==null)_e=!0;else{var me=n(p);me!==null&&de(se,me.startTime-ye),_e=!1}}break e}finally{_=null,T=qe,N=!1}_e=void 0}}finally{_e?Z():J=!1}}}var Z;if(typeof K=="function")Z=function(){K(ae)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,xe=ee.port2;ee.port1.onmessage=ae,Z=function(){xe.postMessage(null)}}else Z=function(){z(ae,0)};function de(ye,_e){V=z(function(){ye(t.unstable_now())},_e)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ye){ye.callback=null},t.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<ye?Math.floor(1e3/ye):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(ye){switch(T){case 1:case 2:case 3:var _e=3;break;default:_e=T}var qe=T;T=_e;try{return ye()}finally{T=qe}},t.unstable_requestPaint=function(){L=!0},t.unstable_runWithPriority=function(ye,_e){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var qe=T;T=ye;try{return _e()}finally{T=qe}},t.unstable_scheduleCallback=function(ye,_e,qe){var Ve=t.unstable_now();switch(typeof qe=="object"&&qe!==null?(qe=qe.delay,qe=typeof qe=="number"&&0<qe?Ve+qe:Ve):qe=Ve,ye){case 1:var tt=-1;break;case 2:tt=250;break;case 5:tt=1073741823;break;case 4:tt=1e4;break;default:tt=5e3}return tt=qe+tt,ye={id:b++,callback:_e,priorityLevel:ye,startTime:qe,expirationTime:tt,sortIndex:-1},qe>Ve?(ye.sortIndex=qe,e(p,ye),n(m)===null&&ye===n(p)&&(M?($(V),V=-1):M=!0,de(se,qe-Ve))):(ye.sortIndex=tt,e(m,ye),j||N||(j=!0,J||(J=!0,Z()))),ye},t.unstable_shouldYield=oe,t.unstable_wrapCallback=function(ye){var _e=T;return function(){var qe=T;T=_e;try{return ye.apply(this,arguments)}finally{T=qe}}}})(P_)),P_}var vP;function LG(){return vP||(vP=1,N_.exports=jG()),N_.exports}var R_={exports:{}},Xa={};var xP;function BG(){if(xP)return Xa;xP=1;var t=mm();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(m,p,b){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:_==null?null:""+_,children:m,containerInfo:p,implementation:b}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Xa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Xa.createPortal=function(m,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(m,p,null,b)},Xa.flushSync=function(m){var p=l.T,b=r.p;try{if(l.T=null,r.p=2,m)return m()}finally{l.T=p,r.p=b,r.d.f()}},Xa.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},Xa.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},Xa.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var b=p.as,_=f(b,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,N=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:N}):b==="script"&&r.d.X(m,{crossOrigin:_,integrity:T,fetchPriority:N,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Xa.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=f(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},Xa.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,_=f(b,p.crossOrigin);r.d.L(m,b,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Xa.preloadModule=function(m,p){if(typeof m=="string")if(p){var b=f(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},Xa.requestFormReset=function(m){r.d.r(m)},Xa.unstable_batchedUpdates=function(m,p){return m(p)},Xa.useFormState=function(m,p,b){return l.H.useFormState(m,p,b)},Xa.useFormStatus=function(){return l.H.useHostTransitionStatus()},Xa.version="19.2.4",Xa}var bP;function u5(){if(bP)return R_.exports;bP=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),R_.exports=BG(),R_.exports}var wP;function FG(){if(wP)return Eg;wP=1;var t=LG(),e=mm(),n=u5();function r(s){var u="https://react.dev/errors/"+s;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+s+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var u=s,g=s;if(s.alternate)for(;u.return;)u=u.return;else{s=u;do u=s,(u.flags&4098)!==0&&(g=u.return),s=u.return;while(s)}return u.tag===3?g:null}function l(s){if(s.tag===13){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function f(s){if(s.tag===31){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function m(s){if(a(s)!==s)throw Error(r(188))}function p(s){var u=s.alternate;if(!u){if(u=a(s),u===null)throw Error(r(188));return u!==s?null:s}for(var g=s,w=u;;){var C=g.return;if(C===null)break;var R=C.alternate;if(R===null){if(w=C.return,w!==null){g=w;continue}break}if(C.child===R.child){for(R=C.child;R;){if(R===g)return m(C),s;if(R===w)return m(C),u;R=R.sibling}throw Error(r(188))}if(g.return!==w.return)g=C,w=R;else{for(var U=!1,te=C.child;te;){if(te===g){U=!0,g=C,w=R;break}if(te===w){U=!0,w=C,g=R;break}te=te.sibling}if(!U){for(te=R.child;te;){if(te===g){U=!0,g=R,w=C;break}if(te===w){U=!0,w=R,g=C;break}te=te.sibling}if(!U)throw Error(r(189))}}if(g.alternate!==w)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?s:u}function b(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s;for(s=s.child;s!==null;){if(u=b(s),u!==null)return u;s=s.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),K=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function Z(s){return s===null||typeof s!="object"?null:(s=ae&&s[ae]||s["@@iterator"],typeof s=="function"?s:null)}var ee=Symbol.for("react.client.reference");function xe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ee?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case M:return"Fragment";case z:return"Profiler";case L:return"StrictMode";case se:return"Suspense";case J:return"SuspenseList";case H:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case j:return"Portal";case K:return s.displayName||"Context";case $:return(s._context.displayName||"Context")+".Consumer";case X:var u=s.render;return s=s.displayName,s||(s=u.displayName||u.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case V:return u=s.displayName||null,u!==null?u:xe(s.type)||"Memo";case W:u=s._payload,s=s._init;try{return xe(s(u))}catch{}}return null}var de=Array.isArray,ye=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qe={pending:!1,data:null,method:null,action:null},Ve=[],tt=-1;function me(s){return{current:s}}function Se(s){0>tt||(s.current=Ve[tt],Ve[tt]=null,tt--)}function Ye(s,u){tt++,Ve[tt]=s.current,s.current=u}var ze=me(null),yt=me(null),$e=me(null),pt=me(null);function lt(s,u){switch(Ye($e,u),Ye(yt,s),Ye(ze,null),u.nodeType){case 9:case 11:s=(s=u.documentElement)&&(s=s.namespaceURI)?jN(s):0;break;default:if(s=u.tagName,u=u.namespaceURI)u=jN(u),s=LN(u,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Se(ze),Ye(ze,s)}function Ne(){Se(ze),Se(yt),Se($e)}function Xe(s){s.memoizedState!==null&&Ye(pt,s);var u=ze.current,g=LN(u,s.type);u!==g&&(Ye(yt,s),Ye(ze,g))}function Et(s){yt.current===s&&(Se(ze),Se(yt)),pt.current===s&&(Se(pt),vg._currentValue=qe)}var Fe,Rt;function Kt(s){if(Fe===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);Fe=u&&u[1]||"",Rt=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fe+s+Rt}var nt=!1;function Zt(s,u){if(!s||nt)return"";nt=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(u){var Qe=function(){throw Error()};if(Object.defineProperty(Qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Qe,[])}catch(Be){var je=Be}Reflect.construct(s,[],Qe)}else{try{Qe.call()}catch(Be){je=Be}s.call(Qe.prototype)}}else{try{throw Error()}catch(Be){je=Be}(Qe=s())&&typeof Qe.catch=="function"&&Qe.catch(function(){})}}catch(Be){if(Be&&je&&typeof Be.stack=="string")return[Be.stack,je.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=w.DetermineComponentFrameRoot(),U=R[0],te=R[1];if(U&&te){var pe=U.split(`
`),Re=te.split(`
`);for(C=w=0;w<pe.length&&!pe[w].includes("DetermineComponentFrameRoot");)w++;for(;C<Re.length&&!Re[C].includes("DetermineComponentFrameRoot");)C++;if(w===pe.length||C===Re.length)for(w=pe.length-1,C=Re.length-1;1<=w&&0<=C&&pe[w]!==Re[C];)C--;for(;1<=w&&0<=C;w--,C--)if(pe[w]!==Re[C]){if(w!==1||C!==1)do if(w--,C--,0>C||pe[w]!==Re[C]){var Ue=`
`+pe[w].replace(" at new "," at ");return s.displayName&&Ue.includes("<anonymous>")&&(Ue=Ue.replace("<anonymous>",s.displayName)),Ue}while(1<=w&&0<=C);break}}}finally{nt=!1,Error.prepareStackTrace=g}return(g=s?s.displayName||s.name:"")?Kt(g):""}function Jt(s,u){switch(s.tag){case 26:case 27:case 5:return Kt(s.type);case 16:return Kt("Lazy");case 13:return s.child!==u&&u!==null?Kt("Suspense Fallback"):Kt("Suspense");case 19:return Kt("SuspenseList");case 0:case 15:return Zt(s.type,!1);case 11:return Zt(s.type.render,!1);case 1:return Zt(s.type,!0);case 31:return Kt("Activity");default:return""}}function Wt(s){try{var u="",g=null;do u+=Jt(s,g),g=s,s=s.return;while(s);return u}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}var xt=Object.prototype.hasOwnProperty,Mn=t.unstable_scheduleCallback,mt=t.unstable_cancelCallback,Po=t.unstable_shouldYield,Fs=t.unstable_requestPaint,hr=t.unstable_now,xa=t.unstable_getCurrentPriorityLevel,$n=t.unstable_ImmediatePriority,Ba=t.unstable_UserBlockingPriority,bi=t.unstable_NormalPriority,Lr=t.unstable_LowPriority,Ro=t.unstable_IdlePriority,hs=t.log,ms=t.unstable_setDisableYieldValue,Tn=null,rt=null;function fn(s){if(typeof hs=="function"&&ms(s),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(Tn,s)}catch{}}var Ze=Math.clz32?Math.clz32:Vs,Fn=Math.log,Ci=Math.LN2;function Vs(s){return s>>>=0,s===0?32:31-(Fn(s)/Ci|0)|0}var ct=256,nn=262144,Yn=4194304;function ba(s){var u=s&42;if(u!==0)return u;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Fa(s,u,g){var w=s.pendingLanes;if(w===0)return 0;var C=0,R=s.suspendedLanes,U=s.pingedLanes;s=s.warmLanes;var te=w&134217727;return te!==0?(w=te&~R,w!==0?C=ba(w):(U&=te,U!==0?C=ba(U):g||(g=te&~s,g!==0&&(C=ba(g))))):(te=w&~R,te!==0?C=ba(te):U!==0?C=ba(U):g||(g=w&~s,g!==0&&(C=ba(g)))),C===0?0:u!==0&&u!==C&&(u&R)===0&&(R=C&-C,g=u&-u,R>=g||R===32&&(g&4194048)!==0)?u:C}function Er(s,u){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&u)===0}function Ll(s,u){switch(s){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ii(){var s=Yn;return Yn<<=1,(Yn&62914560)===0&&(Yn=4194304),s}function Hr(s){for(var u=[],g=0;31>g;g++)u.push(s);return u}function Ui(s,u){s.pendingLanes|=u,u!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ta(s,u,g,w,C,R){var U=s.pendingLanes;s.pendingLanes=g,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=g,s.entangledLanes&=g,s.errorRecoveryDisabledLanes&=g,s.shellSuspendCounter=0;var te=s.entanglements,pe=s.expirationTimes,Re=s.hiddenUpdates;for(g=U&~g;0<g;){var Ue=31-Ze(g),Qe=1<<Ue;te[Ue]=0,pe[Ue]=-1;var je=Re[Ue];if(je!==null)for(Re[Ue]=null,Ue=0;Ue<je.length;Ue++){var Be=je[Ue];Be!==null&&(Be.lane&=-536870913)}g&=~Qe}w!==0&&gs(s,w,0),R!==0&&C===0&&s.tag!==0&&(s.suspendedLanes|=R&~(U&~u))}function gs(s,u,g){s.pendingLanes|=u,s.suspendedLanes&=~u;var w=31-Ze(u);s.entangledLanes|=u,s.entanglements[w]=s.entanglements[w]|1073741824|g&261930}function _n(s,u){var g=s.entangledLanes|=u;for(s=s.entanglements;g;){var w=31-Ze(g),C=1<<w;C&u|s[w]&u&&(s[w]|=u),g&=~C}}function mr(s,u){var g=u&-u;return g=(g&42)!==0?1:Kr(g),(g&(s.suspendedLanes|u))!==0?0:g}function Kr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ci(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function fi(){var s=_e.p;return s!==0?s:(s=window.event,s===void 0?32:sP(s.type))}function ft(s,u){var g=_e.p;try{return _e.p=s,u()}finally{_e.p=g}}var Oi=Math.random().toString(36).slice(2),Vn="__reactFiber$"+Oi,gn="__reactProps$"+Oi,Nr="__reactContainer$"+Oi,Va="__reactEvents$"+Oi,Qo="__reactListeners$"+Oi,Wr="__reactHandles$"+Oi,Bl="__reactResources$"+Oi,Ni="__reactMarker$"+Oi;function Pi(s){delete s[Vn],delete s[gn],delete s[Va],delete s[Qo],delete s[Wr]}function Qn(s){var u=s[Vn];if(u)return u;for(var g=s.parentNode;g;){if(u=g[Nr]||g[Vn]){if(g=u.alternate,u.child!==null||g!==null&&g.child!==null)for(s=GN(s);s!==null;){if(g=s[Vn])return g;s=GN(s)}return u}s=g,g=s.parentNode}return null}function Mt(s){if(s=s[Vn]||s[Nr]){var u=s.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return s}return null}function $r(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s.stateNode;throw Error(r(33))}function rr(s){var u=s[Bl];return u||(u=s[Bl]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Ar(s){s[Ni]=!0}var Ge=new Set,lo={};function In(s,u){wi(s,u),wi(s+"Capture",u)}function wi(s,u){for(lo[s]=u,s=0;s<u.length;s++)Ge.add(u[s])}var as=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yn={},un={};function rn(s){return xt.call(un,s)?!0:xt.call(yn,s)?!1:as.test(s)?un[s]=!0:(yn[s]=!0,!1)}function Qt(s,u,g){if(rn(u))if(g===null)s.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":s.removeAttribute(u);return;case"boolean":var w=u.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){s.removeAttribute(u);return}}s.setAttribute(u,""+g)}}function Ri(s,u,g){if(g===null)s.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttribute(u,""+g)}}function Sr(s,u,g,w){if(w===null)s.removeAttribute(g);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(g);return}s.setAttributeNS(u,g,""+w)}}function an(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ai(s){var u=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Zo(s,u,g){var w=Object.getOwnPropertyDescriptor(s.constructor.prototype,u);if(!s.hasOwnProperty(u)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var C=w.get,R=w.set;return Object.defineProperty(s,u,{configurable:!0,get:function(){return C.call(this)},set:function(U){g=""+U,R.call(this,U)}}),Object.defineProperty(s,u,{enumerable:w.enumerable}),{getValue:function(){return g},setValue:function(U){g=""+U},stopTracking:function(){s._valueTracker=null,delete s[u]}}}}function Vt(s){if(!s._valueTracker){var u=ai(s)?"checked":"value";s._valueTracker=Zo(s,u,""+s[u])}}function qi(s){if(!s)return!1;var u=s._valueTracker;if(!u)return!0;var g=u.getValue(),w="";return s&&(w=ai(s)?s.checked?"true":"false":s.value),s=w,s!==g?(u.setValue(s),!0):!1}function vn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Di=/[\n"\\]/g;function $t(s){return s.replace(Di,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Zn(s,u,g,w,C,R,U,te){s.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?s.type=U:s.removeAttribute("type"),u!=null?U==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+an(u)):s.value!==""+an(u)&&(s.value=""+an(u)):U!=="submit"&&U!=="reset"||s.removeAttribute("value"),u!=null?ce(s,U,an(u)):g!=null?ce(s,U,an(g)):w!=null&&s.removeAttribute("value"),C==null&&R!=null&&(s.defaultChecked=!!R),C!=null&&(s.checked=C&&typeof C!="function"&&typeof C!="symbol"),te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?s.name=""+an(te):s.removeAttribute("name")}function Te(s,u,g,w,C,R,U,te){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(s.type=R),u!=null||g!=null){if(!(R!=="submit"&&R!=="reset"||u!=null)){Vt(s);return}g=g!=null?""+an(g):"",u=u!=null?""+an(u):g,te||u===s.value||(s.value=u),s.defaultValue=u}w=w??C,w=typeof w!="function"&&typeof w!="symbol"&&!!w,s.checked=te?s.checked:!!w,s.defaultChecked=!!w,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(s.name=U),Vt(s)}function ce(s,u,g){u==="number"&&vn(s.ownerDocument)===s||s.defaultValue===""+g||(s.defaultValue=""+g)}function _t(s,u,g,w){if(s=s.options,u){u={};for(var C=0;C<g.length;C++)u["$"+g[C]]=!0;for(g=0;g<s.length;g++)C=u.hasOwnProperty("$"+s[g].value),s[g].selected!==C&&(s[g].selected=C),C&&w&&(s[g].defaultSelected=!0)}else{for(g=""+an(g),u=null,C=0;C<s.length;C++){if(s[C].value===g){s[C].selected=!0,w&&(s[C].defaultSelected=!0);return}u!==null||s[C].disabled||(u=s[C])}u!==null&&(u.selected=!0)}}function Pr(s,u,g){if(u!=null&&(u=""+an(u),u!==s.value&&(s.value=u),g==null)){s.defaultValue!==u&&(s.defaultValue=u);return}s.defaultValue=g!=null?""+an(g):""}function Rr(s,u,g,w){if(u==null){if(w!=null){if(g!=null)throw Error(r(92));if(de(w)){if(1<w.length)throw Error(r(93));w=w[0]}g=w}g==null&&(g=""),u=g}g=an(u),s.defaultValue=g,w=s.textContent,w===g&&w!==""&&w!==null&&(s.value=w),Vt(s)}function Gi(s,u){if(u){var g=s.firstChild;if(g&&g===s.lastChild&&g.nodeType===3){g.nodeValue=u;return}}s.textContent=u}var Jo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zt(s,u,g){var w=u.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?w?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="":w?s.setProperty(u,g):typeof g!="number"||g===0||Jo.has(u)?u==="float"?s.cssFloat=g:s[u]=(""+g).trim():s[u]=g+"px"}function Nt(s,u,g){if(u!=null&&typeof u!="object")throw Error(r(62));if(s=s.style,g!=null){for(var w in g)!g.hasOwnProperty(w)||u!=null&&u.hasOwnProperty(w)||(w.indexOf("--")===0?s.setProperty(w,""):w==="float"?s.cssFloat="":s[w]="");for(var C in u)w=u[C],u.hasOwnProperty(C)&&g[C]!==w&&zt(s,C,w)}else for(var R in u)u.hasOwnProperty(R)&&zt(s,R,u[R])}function zn(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wa(s){return Yr.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function _i(){}var na=null;function _a(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Jn=null,jn=null;function Tr(s){var u=Mt(s);if(u&&(s=u.stateNode)){var g=s[gn]||null;e:switch(s=u.stateNode,u.type){case"input":if(Zn(s,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),u=g.name,g.type==="radio"&&u!=null){for(g=s;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+$t(""+u)+'"][type="radio"]'),u=0;u<g.length;u++){var w=g[u];if(w!==s&&w.form===s.form){var C=w[gn]||null;if(!C)throw Error(r(90));Zn(w,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(u=0;u<g.length;u++)w=g[u],w.form===s.form&&qi(w)}break e;case"textarea":Pr(s,g.value,g.defaultValue);break e;case"select":u=g.value,u!=null&&_t(s,!!g.multiple,u,!1)}}}var Pt=!1;function za(s,u,g){if(Pt)return s(u,g);Pt=!0;try{var w=s(u);return w}finally{if(Pt=!1,(Jn!==null||jn!==null)&&(g1(),Jn&&(u=Jn,s=jn,jn=Jn=null,Tr(u),s)))for(u=0;u<s.length;u++)Tr(s[u])}}function Lt(s,u){var g=s.stateNode;if(g===null)return null;var w=g[gn]||null;if(w===null)return null;g=w[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(s=s.type,w=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!w;break e;default:s=!1}if(s)return null;if(g&&typeof g!="function")throw Error(r(231,u,typeof g));return g}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Do=!1;if(xn)try{var sn={};Object.defineProperty(sn,"passive",{get:function(){Do=!0}}),window.addEventListener("test",sn,sn),window.removeEventListener("test",sn,sn)}catch{Do=!1}var Ea=null,Ua=null,zs=null;function Aa(){if(zs)return zs;var s,u=Ua,g=u.length,w,C="value"in Ea?Ea.value:Ea.textContent,R=C.length;for(s=0;s<g&&u[s]===C[s];s++);var U=g-s;for(w=1;w<=U&&u[g-w]===C[R-w];w++);return zs=C.slice(s,1<w?1-w:void 0)}function Sa(s){var u=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&u===13&&(s=13)):s=u,s===10&&(s=13),32<=s||s===13?s:0}function ra(){return!0}function qa(){return!1}function ir(s){function u(g,w,C,R,U){this._reactName=g,this._targetInst=C,this.type=w,this.nativeEvent=R,this.target=U,this.currentTarget=null;for(var te in s)s.hasOwnProperty(te)&&(g=s[te],this[te]=g?g(R):R[te]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?ra:qa,this.isPropagationStopped=qa,this}return _(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),u}var Ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ir=ir(Ta),Ga=_({},Ta,{view:0,detail:0}),Us=ir(Ga),ss,el,ps,tl=_({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aa,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ps&&(ps&&s.type==="mousemove"?(ss=s.screenX-ps.screenX,el=s.screenY-ps.screenY):el=ss=0,ps=s),ss)},movementY:function(s){return"movementY"in s?s.movementY:el}}),En=ir(tl),ys=_({},tl,{dataTransfer:0}),uo=ir(ys),ia=_({},Ga,{relatedTarget:0}),vs=ir(ia),ke=_({},Ta,{animationName:0,elapsedTime:0,pseudoElement:0}),Yt=ir(ke),Dr=_({},Ta,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ha=ir(Dr),ko=_({},Ta,{data:0}),Ka=ir(ko),nl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Br={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function er(s){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(s):(s=Br[s])?!!u[s]:!1}function aa(){return er}var dn=_({},Ga,{key:function(s){if(s.key){var u=nl[s.key]||s.key;if(u!=="Unidentified")return u}return s.type==="keypress"?(s=Sa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?rl[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aa,charCode:function(s){return s.type==="keypress"?Sa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Sa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),xs=ir(dn),os=_({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pn=ir(os),S=_({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aa}),B=ir(S),G=_({},Ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),ie=ir(G),Ae=_({},tl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=ir(Ae),at=_({},Ta,{newState:0,oldState:0}),qt=ir(at),kr=[9,13,27,32],bn=xn&&"CompositionEvent"in window,Un=null;xn&&"documentMode"in document&&(Un=document.documentMode);var Ia=xn&&"TextEvent"in window&&!Un,Wa=xn&&(!bn||Un&&8<Un&&11>=Un),di=" ",Ca=!1;function co(s,u){switch(s){case"keyup":return kr.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bs(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Mo=!1;function qs(s,u){switch(s){case"compositionend":return bs(u);case"keypress":return u.which!==32?null:(Ca=!0,di);case"textInput":return s=u.data,s===di&&Ca?null:s;default:return null}}function qu(s,u){if(Mo)return s==="compositionend"||!bn&&co(s,u)?(s=Aa(),zs=Ua=Ea=null,Mo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Wa&&u.locale!=="ko"?null:u.data;default:return null}}var Oa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vl(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u==="input"?!!Oa[s.type]:u==="textarea"}function $a(s,u,g,w){Jn?jn?jn.push(w):jn=[w]:Jn=w,u=_1(u,"onChange"),0<u.length&&(g=new Ir("onChange","change",null,g,w),s.push({event:g,listeners:u}))}var il=null,jo=null;function qm(s){NN(s,0)}function zl(s){var u=$r(s);if(qi(u))return s}function sa(s,u){if(s==="change")return u}var ws=!1;if(xn){var ar;if(xn){var _s="oninput"in document;if(!_s){var on=document.createElement("div");on.setAttribute("oninput","return;"),_s=typeof on.oninput=="function"}ar=_s}else ar=!1;ws=ar&&(!document.documentMode||9<document.documentMode)}function Ul(){il&&(il.detachEvent("onpropertychange",Y),jo=il=null)}function Y(s){if(s.propertyName==="value"&&zl(jo)){var u=[];$a(u,jo,s,_a(s)),za(qm,u)}}function o(s,u,g){s==="focusin"?(Ul(),il=u,jo=g,il.attachEvent("onpropertychange",Y)):s==="focusout"&&Ul()}function c(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return zl(jo)}function h(s,u){if(s==="click")return zl(u)}function y(s,u){if(s==="input"||s==="change")return zl(u)}function x(s,u){return s===u&&(s!==0||1/s===1/u)||s!==s&&u!==u}var E=typeof Object.is=="function"?Object.is:x;function d(s,u){if(E(s,u))return!0;if(typeof s!="object"||s===null||typeof u!="object"||u===null)return!1;var g=Object.keys(s),w=Object.keys(u);if(g.length!==w.length)return!1;for(w=0;w<g.length;w++){var C=g[w];if(!xt.call(u,C)||!E(s[C],u[C]))return!1}return!0}function v(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function A(s,u){var g=v(s);s=0;for(var w;g;){if(g.nodeType===3){if(w=s+g.textContent.length,s<=u&&w>=u)return{node:g,offset:u-s};s=w}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=v(g)}}function I(s,u){return s&&u?s===u?!0:s&&s.nodeType===3?!1:u&&u.nodeType===3?I(s,u.parentNode):"contains"in s?s.contains(u):s.compareDocumentPosition?!!(s.compareDocumentPosition(u)&16):!1:!1}function P(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var u=vn(s.document);u instanceof s.HTMLIFrameElement;){try{var g=typeof u.contentWindow.location.href=="string"}catch{g=!1}if(g)s=u.contentWindow;else break;u=vn(s.document)}return u}function k(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u&&(u==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||u==="textarea"||s.contentEditable==="true")}var F=xn&&"documentMode"in document&&11>=document.documentMode,q=null,Q=null,re=null,ne=!1;function le(s,u,g){var w=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;ne||q==null||q!==vn(w)||(w=q,"selectionStart"in w&&k(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),re&&d(re,w)||(re=w,w=_1(Q,"onSelect"),0<w.length&&(u=new Ir("onSelect","select",null,u,g),s.push({event:u,listeners:w}),u.target=q)))}function fe(s,u){var g={};return g[s.toLowerCase()]=u.toLowerCase(),g["Webkit"+s]="webkit"+u,g["Moz"+s]="moz"+u,g}var ue={animationend:fe("Animation","AnimationEnd"),animationiteration:fe("Animation","AnimationIteration"),animationstart:fe("Animation","AnimationStart"),transitionrun:fe("Transition","TransitionRun"),transitionstart:fe("Transition","TransitionStart"),transitioncancel:fe("Transition","TransitionCancel"),transitionend:fe("Transition","TransitionEnd")},ge={},he={};xn&&(he=document.createElement("div").style,"AnimationEvent"in window||(delete ue.animationend.animation,delete ue.animationiteration.animation,delete ue.animationstart.animation),"TransitionEvent"in window||delete ue.transitionend.transition);function we(s){if(ge[s])return ge[s];if(!ue[s])return s;var u=ue[s],g;for(g in u)if(u.hasOwnProperty(g)&&g in he)return ge[s]=u[g];return s}var Ce=we("animationend"),be=we("animationiteration"),Me=we("animationstart"),He=we("transitionrun"),st=we("transitionstart"),ut=we("transitioncancel"),Je=we("transitionend"),vt=new Map,gt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gt.push("scrollEnd");function it(s,u){vt.set(s,u),In(u,[s])}var bt=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Xt=[],wn=0,Bt=0;function en(){for(var s=wn,u=Bt=wn=0;u<s;){var g=Xt[u];Xt[u++]=null;var w=Xt[u];Xt[u++]=null;var C=Xt[u];Xt[u++]=null;var R=Xt[u];if(Xt[u++]=null,w!==null&&C!==null){var U=w.pending;U===null?C.next=C:(C.next=U.next,U.next=C),w.pending=C}R!==0&&al(g,C,R)}}function gr(s,u,g,w){Xt[wn++]=s,Xt[wn++]=u,Xt[wn++]=g,Xt[wn++]=w,Bt|=w,s.lanes|=w,s=s.alternate,s!==null&&(s.lanes|=w)}function Ya(s,u,g,w){return gr(s,u,g,w),Gu(s)}function tr(s,u){return gr(s,null,null,u),Gu(s)}function al(s,u,g){s.lanes|=g;var w=s.alternate;w!==null&&(w.lanes|=g);for(var C=!1,R=s.return;R!==null;)R.childLanes|=g,w=R.alternate,w!==null&&(w.childLanes|=g),R.tag===22&&(s=R.stateNode,s===null||s._visibility&1||(C=!0)),s=R,R=R.return;return s.tag===3?(R=s.stateNode,C&&u!==null&&(C=31-Ze(g),s=R.hiddenUpdates,w=s[C],w===null?s[C]=[u]:w.push(u),u.lane=g|536870912),R):null}function Gu(s){if(50<fg)throw fg=0,Qw=null,Error(r(185));for(var u=s.return;u!==null;)s=u,u=s.return;return s.tag===3?s.stateNode:null}var Md={};function mq(s,u,g,w){this.tag=s,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(s,u,g,w){return new mq(s,u,g,w)}function qb(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ql(s,u){var g=s.alternate;return g===null?(g=Gs(s.tag,u,s.key,s.mode),g.elementType=s.elementType,g.type=s.type,g.stateNode=s.stateNode,g.alternate=s,s.alternate=g):(g.pendingProps=u,g.type=s.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=s.flags&65011712,g.childLanes=s.childLanes,g.lanes=s.lanes,g.child=s.child,g.memoizedProps=s.memoizedProps,g.memoizedState=s.memoizedState,g.updateQueue=s.updateQueue,u=s.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=s.sibling,g.index=s.index,g.ref=s.ref,g.refCleanup=s.refCleanup,g}function dO(s,u){s.flags&=65011714;var g=s.alternate;return g===null?(s.childLanes=0,s.lanes=u,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=g.childLanes,s.lanes=g.lanes,s.child=g.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=g.memoizedProps,s.memoizedState=g.memoizedState,s.updateQueue=g.updateQueue,s.type=g.type,u=g.dependencies,s.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),s}function F0(s,u,g,w,C,R){var U=0;if(w=s,typeof s=="function")qb(s)&&(U=1);else if(typeof s=="string")U=xG(s,g,ze.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case H:return s=Gs(31,g,u,C),s.elementType=H,s.lanes=R,s;case M:return df(g.children,C,R,u);case L:U=8,C|=24;break;case z:return s=Gs(12,g,u,C|2),s.elementType=z,s.lanes=R,s;case se:return s=Gs(13,g,u,C),s.elementType=se,s.lanes=R,s;case J:return s=Gs(19,g,u,C),s.elementType=J,s.lanes=R,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case K:U=10;break e;case $:U=9;break e;case X:U=11;break e;case V:U=14;break e;case W:U=16,w=null;break e}U=29,g=Error(r(130,s===null?"null":typeof s,"")),w=null}return u=Gs(U,g,u,C),u.elementType=s,u.type=w,u.lanes=R,u}function df(s,u,g,w){return s=Gs(7,s,w,u),s.lanes=g,s}function Gb(s,u,g){return s=Gs(6,s,null,u),s.lanes=g,s}function hO(s){var u=Gs(18,null,null,0);return u.stateNode=s,u}function Hb(s,u,g){return u=Gs(4,s.children!==null?s.children:[],s.key,u),u.lanes=g,u.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},u}var mO=new WeakMap;function fo(s,u){if(typeof s=="object"&&s!==null){var g=mO.get(s);return g!==void 0?g:(u={value:s,source:u,stack:Wt(u)},mO.set(s,u),u)}return{value:s,source:u,stack:Wt(u)}}var jd=[],Ld=0,V0=null,Gm=0,ho=[],mo=0,Hu=null,sl=1,ol="";function Gl(s,u){jd[Ld++]=Gm,jd[Ld++]=V0,V0=s,Gm=u}function gO(s,u,g){ho[mo++]=sl,ho[mo++]=ol,ho[mo++]=Hu,Hu=s;var w=sl;s=ol;var C=32-Ze(w)-1;w&=~(1<<C),g+=1;var R=32-Ze(u)+C;if(30<R){var U=C-C%5;R=(w&(1<<U)-1).toString(32),w>>=U,C-=U,sl=1<<32-Ze(u)+C|g<<C|w,ol=R+s}else sl=1<<R|g<<C|w,ol=s}function Kb(s){s.return!==null&&(Gl(s,1),gO(s,1,0))}function Wb(s){for(;s===V0;)V0=jd[--Ld],jd[Ld]=null,Gm=jd[--Ld],jd[Ld]=null;for(;s===Hu;)Hu=ho[--mo],ho[mo]=null,ol=ho[--mo],ho[mo]=null,sl=ho[--mo],ho[mo]=null}function pO(s,u){ho[mo++]=sl,ho[mo++]=ol,ho[mo++]=Hu,sl=u.id,ol=u.overflow,Hu=s}var Na=null,Fr=null,Ln=!1,Ku=null,go=!1,$b=Error(r(519));function Wu(s){var u=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hm(fo(u,s)),$b}function yO(s){var u=s.stateNode,g=s.type,w=s.memoizedProps;switch(u[Vn]=s,u[gn]=w,g){case"dialog":On("cancel",u),On("close",u);break;case"iframe":case"object":case"embed":On("load",u);break;case"video":case"audio":for(g=0;g<hg.length;g++)On(hg[g],u);break;case"source":On("error",u);break;case"img":case"image":case"link":On("error",u),On("load",u);break;case"details":On("toggle",u);break;case"input":On("invalid",u),Te(u,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0);break;case"select":On("invalid",u);break;case"textarea":On("invalid",u),Rr(u,w.value,w.defaultValue,w.children)}g=w.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||u.textContent===""+g||w.suppressHydrationWarning===!0||kN(u.textContent,g)?(w.popover!=null&&(On("beforetoggle",u),On("toggle",u)),w.onScroll!=null&&On("scroll",u),w.onScrollEnd!=null&&On("scrollend",u),w.onClick!=null&&(u.onclick=_i),u=!0):u=!1,u||Wu(s,!0)}function vO(s){for(Na=s.return;Na;)switch(Na.tag){case 5:case 31:case 13:go=!1;return;case 27:case 3:go=!0;return;default:Na=Na.return}}function Bd(s){if(s!==Na)return!1;if(!Ln)return vO(s),Ln=!0,!1;var u=s.tag,g;if((g=u!==3&&u!==27)&&((g=u===5)&&(g=s.type,g=!(g!=="form"&&g!=="button")||d_(s.type,s.memoizedProps)),g=!g),g&&Fr&&Wu(s),vO(s),u===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Fr=qN(s)}else if(u===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Fr=qN(s)}else u===27?(u=Fr,oc(s.type)?(s=y_,y_=null,Fr=s):Fr=u):Fr=Na?yo(s.stateNode.nextSibling):null;return!0}function hf(){Fr=Na=null,Ln=!1}function Yb(){var s=Ku;return s!==null&&(Ts===null?Ts=s:Ts.push.apply(Ts,s),Ku=null),s}function Hm(s){Ku===null?Ku=[s]:Ku.push(s)}var Xb=me(null),mf=null,Hl=null;function $u(s,u,g){Ye(Xb,u._currentValue),u._currentValue=g}function Kl(s){s._currentValue=Xb.current,Se(Xb)}function Qb(s,u,g){for(;s!==null;){var w=s.alternate;if((s.childLanes&u)!==u?(s.childLanes|=u,w!==null&&(w.childLanes|=u)):w!==null&&(w.childLanes&u)!==u&&(w.childLanes|=u),s===g)break;s=s.return}}function Zb(s,u,g,w){var C=s.child;for(C!==null&&(C.return=s);C!==null;){var R=C.dependencies;if(R!==null){var U=C.child;R=R.firstContext;e:for(;R!==null;){var te=R;R=C;for(var pe=0;pe<u.length;pe++)if(te.context===u[pe]){R.lanes|=g,te=R.alternate,te!==null&&(te.lanes|=g),Qb(R.return,g,s),w||(U=null);break e}R=te.next}}else if(C.tag===18){if(U=C.return,U===null)throw Error(r(341));U.lanes|=g,R=U.alternate,R!==null&&(R.lanes|=g),Qb(U,g,s),U=null}else U=C.child;if(U!==null)U.return=C;else for(U=C;U!==null;){if(U===s){U=null;break}if(C=U.sibling,C!==null){C.return=U.return,U=C;break}U=U.return}C=U}}function Fd(s,u,g,w){s=null;for(var C=u,R=!1;C!==null;){if(!R){if((C.flags&524288)!==0)R=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var U=C.alternate;if(U===null)throw Error(r(387));if(U=U.memoizedProps,U!==null){var te=C.type;E(C.pendingProps.value,U.value)||(s!==null?s.push(te):s=[te])}}else if(C===pt.current){if(U=C.alternate,U===null)throw Error(r(387));U.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(s!==null?s.push(vg):s=[vg])}C=C.return}s!==null&&Zb(u,s,g,w),u.flags|=262144}function z0(s){for(s=s.firstContext;s!==null;){if(!E(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function gf(s){mf=s,Hl=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Pa(s){return xO(mf,s)}function U0(s,u){return mf===null&&gf(s),xO(s,u)}function xO(s,u){var g=u._currentValue;if(u={context:u,memoizedValue:g,next:null},Hl===null){if(s===null)throw Error(r(308));Hl=u,s.dependencies={lanes:0,firstContext:u},s.flags|=524288}else Hl=Hl.next=u;return g}var gq=typeof AbortController<"u"?AbortController:function(){var s=[],u=this.signal={aborted:!1,addEventListener:function(g,w){s.push(w)}};this.abort=function(){u.aborted=!0,s.forEach(function(g){return g()})}},pq=t.unstable_scheduleCallback,yq=t.unstable_NormalPriority,ki={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jb(){return{controller:new gq,data:new Map,refCount:0}}function Km(s){s.refCount--,s.refCount===0&&pq(yq,function(){s.controller.abort()})}var Wm=null,ew=0,Vd=0,zd=null;function vq(s,u){if(Wm===null){var g=Wm=[];ew=0,Vd=r_(),zd={status:"pending",value:void 0,then:function(w){g.push(w)}}}return ew++,u.then(bO,bO),u}function bO(){if(--ew===0&&Wm!==null){zd!==null&&(zd.status="fulfilled");var s=Wm;Wm=null,Vd=0,zd=null;for(var u=0;u<s.length;u++)(0,s[u])()}}function xq(s,u){var g=[],w={status:"pending",value:null,reason:null,then:function(C){g.push(C)}};return s.then(function(){w.status="fulfilled",w.value=u;for(var C=0;C<g.length;C++)(0,g[C])(u)},function(C){for(w.status="rejected",w.reason=C,C=0;C<g.length;C++)(0,g[C])(void 0)}),w}var wO=ye.S;ye.S=function(s,u){iN=hr(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&vq(s,u),wO!==null&&wO(s,u)};var pf=me(null);function tw(){var s=pf.current;return s!==null?s:Cr.pooledCache}function q0(s,u){u===null?Ye(pf,pf.current):Ye(pf,u.pool)}function _O(){var s=tw();return s===null?null:{parent:ki._currentValue,pool:s}}var Ud=Error(r(460)),nw=Error(r(474)),G0=Error(r(542)),H0={then:function(){}};function EO(s){return s=s.status,s==="fulfilled"||s==="rejected"}function AO(s,u,g){switch(g=s[g],g===void 0?s.push(u):g!==u&&(u.then(_i,_i),u=g),u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,TO(s),s;default:if(typeof u.status=="string")u.then(_i,_i);else{if(s=Cr,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=u,s.status="pending",s.then(function(w){if(u.status==="pending"){var C=u;C.status="fulfilled",C.value=w}},function(w){if(u.status==="pending"){var C=u;C.status="rejected",C.reason=w}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,TO(s),s}throw vf=u,Ud}}function yf(s){try{var u=s._init;return u(s._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(vf=g,Ud):g}}var vf=null;function SO(){if(vf===null)throw Error(r(459));var s=vf;return vf=null,s}function TO(s){if(s===Ud||s===G0)throw Error(r(483))}var qd=null,$m=0;function K0(s){var u=$m;return $m+=1,qd===null&&(qd=[]),AO(qd,s,u)}function Ym(s,u){u=u.props.ref,s.ref=u!==void 0?u:null}function W0(s,u){throw u.$$typeof===T?Error(r(525)):(s=Object.prototype.toString.call(u),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":s)))}function IO(s){function u(Ee,ve){if(s){var Pe=Ee.deletions;Pe===null?(Ee.deletions=[ve],Ee.flags|=16):Pe.push(ve)}}function g(Ee,ve){if(!s)return null;for(;ve!==null;)u(Ee,ve),ve=ve.sibling;return null}function w(Ee){for(var ve=new Map;Ee!==null;)Ee.key!==null?ve.set(Ee.key,Ee):ve.set(Ee.index,Ee),Ee=Ee.sibling;return ve}function C(Ee,ve){return Ee=ql(Ee,ve),Ee.index=0,Ee.sibling=null,Ee}function R(Ee,ve,Pe){return Ee.index=Pe,s?(Pe=Ee.alternate,Pe!==null?(Pe=Pe.index,Pe<ve?(Ee.flags|=67108866,ve):Pe):(Ee.flags|=67108866,ve)):(Ee.flags|=1048576,ve)}function U(Ee){return s&&Ee.alternate===null&&(Ee.flags|=67108866),Ee}function te(Ee,ve,Pe,Ke){return ve===null||ve.tag!==6?(ve=Gb(Pe,Ee.mode,Ke),ve.return=Ee,ve):(ve=C(ve,Pe),ve.return=Ee,ve)}function pe(Ee,ve,Pe,Ke){var Ft=Pe.type;return Ft===M?Ue(Ee,ve,Pe.props.children,Ke,Pe.key):ve!==null&&(ve.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===W&&yf(Ft)===ve.type)?(ve=C(ve,Pe.props),Ym(ve,Pe),ve.return=Ee,ve):(ve=F0(Pe.type,Pe.key,Pe.props,null,Ee.mode,Ke),Ym(ve,Pe),ve.return=Ee,ve)}function Re(Ee,ve,Pe,Ke){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Pe.containerInfo||ve.stateNode.implementation!==Pe.implementation?(ve=Hb(Pe,Ee.mode,Ke),ve.return=Ee,ve):(ve=C(ve,Pe.children||[]),ve.return=Ee,ve)}function Ue(Ee,ve,Pe,Ke,Ft){return ve===null||ve.tag!==7?(ve=df(Pe,Ee.mode,Ke,Ft),ve.return=Ee,ve):(ve=C(ve,Pe),ve.return=Ee,ve)}function Qe(Ee,ve,Pe){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ve=Gb(""+ve,Ee.mode,Pe),ve.return=Ee,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case N:return Pe=F0(ve.type,ve.key,ve.props,null,Ee.mode,Pe),Ym(Pe,ve),Pe.return=Ee,Pe;case j:return ve=Hb(ve,Ee.mode,Pe),ve.return=Ee,ve;case W:return ve=yf(ve),Qe(Ee,ve,Pe)}if(de(ve)||Z(ve))return ve=df(ve,Ee.mode,Pe,null),ve.return=Ee,ve;if(typeof ve.then=="function")return Qe(Ee,K0(ve),Pe);if(ve.$$typeof===K)return Qe(Ee,U0(Ee,ve),Pe);W0(Ee,ve)}return null}function je(Ee,ve,Pe,Ke){var Ft=ve!==null?ve.key:null;if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Ft!==null?null:te(Ee,ve,""+Pe,Ke);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case N:return Pe.key===Ft?pe(Ee,ve,Pe,Ke):null;case j:return Pe.key===Ft?Re(Ee,ve,Pe,Ke):null;case W:return Pe=yf(Pe),je(Ee,ve,Pe,Ke)}if(de(Pe)||Z(Pe))return Ft!==null?null:Ue(Ee,ve,Pe,Ke,null);if(typeof Pe.then=="function")return je(Ee,ve,K0(Pe),Ke);if(Pe.$$typeof===K)return je(Ee,ve,U0(Ee,Pe),Ke);W0(Ee,Pe)}return null}function Be(Ee,ve,Pe,Ke,Ft){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return Ee=Ee.get(Pe)||null,te(ve,Ee,""+Ke,Ft);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case N:return Ee=Ee.get(Ke.key===null?Pe:Ke.key)||null,pe(ve,Ee,Ke,Ft);case j:return Ee=Ee.get(Ke.key===null?Pe:Ke.key)||null,Re(ve,Ee,Ke,Ft);case W:return Ke=yf(Ke),Be(Ee,ve,Pe,Ke,Ft)}if(de(Ke)||Z(Ke))return Ee=Ee.get(Pe)||null,Ue(ve,Ee,Ke,Ft,null);if(typeof Ke.then=="function")return Be(Ee,ve,Pe,K0(Ke),Ft);if(Ke.$$typeof===K)return Be(Ee,ve,Pe,U0(ve,Ke),Ft);W0(ve,Ke)}return null}function Ct(Ee,ve,Pe,Ke){for(var Ft=null,qn=null,Dt=ve,hn=ve=0,Rn=null;Dt!==null&&hn<Pe.length;hn++){Dt.index>hn?(Rn=Dt,Dt=null):Rn=Dt.sibling;var Gn=je(Ee,Dt,Pe[hn],Ke);if(Gn===null){Dt===null&&(Dt=Rn);break}s&&Dt&&Gn.alternate===null&&u(Ee,Dt),ve=R(Gn,ve,hn),qn===null?Ft=Gn:qn.sibling=Gn,qn=Gn,Dt=Rn}if(hn===Pe.length)return g(Ee,Dt),Ln&&Gl(Ee,hn),Ft;if(Dt===null){for(;hn<Pe.length;hn++)Dt=Qe(Ee,Pe[hn],Ke),Dt!==null&&(ve=R(Dt,ve,hn),qn===null?Ft=Dt:qn.sibling=Dt,qn=Dt);return Ln&&Gl(Ee,hn),Ft}for(Dt=w(Dt);hn<Pe.length;hn++)Rn=Be(Dt,Ee,hn,Pe[hn],Ke),Rn!==null&&(s&&Rn.alternate!==null&&Dt.delete(Rn.key===null?hn:Rn.key),ve=R(Rn,ve,hn),qn===null?Ft=Rn:qn.sibling=Rn,qn=Rn);return s&&Dt.forEach(function(dc){return u(Ee,dc)}),Ln&&Gl(Ee,hn),Ft}function Ut(Ee,ve,Pe,Ke){if(Pe==null)throw Error(r(151));for(var Ft=null,qn=null,Dt=ve,hn=ve=0,Rn=null,Gn=Pe.next();Dt!==null&&!Gn.done;hn++,Gn=Pe.next()){Dt.index>hn?(Rn=Dt,Dt=null):Rn=Dt.sibling;var dc=je(Ee,Dt,Gn.value,Ke);if(dc===null){Dt===null&&(Dt=Rn);break}s&&Dt&&dc.alternate===null&&u(Ee,Dt),ve=R(dc,ve,hn),qn===null?Ft=dc:qn.sibling=dc,qn=dc,Dt=Rn}if(Gn.done)return g(Ee,Dt),Ln&&Gl(Ee,hn),Ft;if(Dt===null){for(;!Gn.done;hn++,Gn=Pe.next())Gn=Qe(Ee,Gn.value,Ke),Gn!==null&&(ve=R(Gn,ve,hn),qn===null?Ft=Gn:qn.sibling=Gn,qn=Gn);return Ln&&Gl(Ee,hn),Ft}for(Dt=w(Dt);!Gn.done;hn++,Gn=Pe.next())Gn=Be(Dt,Ee,hn,Gn.value,Ke),Gn!==null&&(s&&Gn.alternate!==null&&Dt.delete(Gn.key===null?hn:Gn.key),ve=R(Gn,ve,hn),qn===null?Ft=Gn:qn.sibling=Gn,qn=Gn);return s&&Dt.forEach(function(NG){return u(Ee,NG)}),Ln&&Gl(Ee,hn),Ft}function vr(Ee,ve,Pe,Ke){if(typeof Pe=="object"&&Pe!==null&&Pe.type===M&&Pe.key===null&&(Pe=Pe.props.children),typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case N:e:{for(var Ft=Pe.key;ve!==null;){if(ve.key===Ft){if(Ft=Pe.type,Ft===M){if(ve.tag===7){g(Ee,ve.sibling),Ke=C(ve,Pe.props.children),Ke.return=Ee,Ee=Ke;break e}}else if(ve.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===W&&yf(Ft)===ve.type){g(Ee,ve.sibling),Ke=C(ve,Pe.props),Ym(Ke,Pe),Ke.return=Ee,Ee=Ke;break e}g(Ee,ve);break}else u(Ee,ve);ve=ve.sibling}Pe.type===M?(Ke=df(Pe.props.children,Ee.mode,Ke,Pe.key),Ke.return=Ee,Ee=Ke):(Ke=F0(Pe.type,Pe.key,Pe.props,null,Ee.mode,Ke),Ym(Ke,Pe),Ke.return=Ee,Ee=Ke)}return U(Ee);case j:e:{for(Ft=Pe.key;ve!==null;){if(ve.key===Ft)if(ve.tag===4&&ve.stateNode.containerInfo===Pe.containerInfo&&ve.stateNode.implementation===Pe.implementation){g(Ee,ve.sibling),Ke=C(ve,Pe.children||[]),Ke.return=Ee,Ee=Ke;break e}else{g(Ee,ve);break}else u(Ee,ve);ve=ve.sibling}Ke=Hb(Pe,Ee.mode,Ke),Ke.return=Ee,Ee=Ke}return U(Ee);case W:return Pe=yf(Pe),vr(Ee,ve,Pe,Ke)}if(de(Pe))return Ct(Ee,ve,Pe,Ke);if(Z(Pe)){if(Ft=Z(Pe),typeof Ft!="function")throw Error(r(150));return Pe=Ft.call(Pe),Ut(Ee,ve,Pe,Ke)}if(typeof Pe.then=="function")return vr(Ee,ve,K0(Pe),Ke);if(Pe.$$typeof===K)return vr(Ee,ve,U0(Ee,Pe),Ke);W0(Ee,Pe)}return typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint"?(Pe=""+Pe,ve!==null&&ve.tag===6?(g(Ee,ve.sibling),Ke=C(ve,Pe),Ke.return=Ee,Ee=Ke):(g(Ee,ve),Ke=Gb(Pe,Ee.mode,Ke),Ke.return=Ee,Ee=Ke),U(Ee)):g(Ee,ve)}return function(Ee,ve,Pe,Ke){try{$m=0;var Ft=vr(Ee,ve,Pe,Ke);return qd=null,Ft}catch(Dt){if(Dt===Ud||Dt===G0)throw Dt;var qn=Gs(29,Dt,null,Ee.mode);return qn.lanes=Ke,qn.return=Ee,qn}}}var xf=IO(!0),CO=IO(!1),Yu=!1;function rw(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function iw(s,u){s=s.updateQueue,u.updateQueue===s&&(u.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Xu(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Qu(s,u,g){var w=s.updateQueue;if(w===null)return null;if(w=w.shared,(Xn&2)!==0){var C=w.pending;return C===null?u.next=u:(u.next=C.next,C.next=u),w.pending=u,u=Gu(s),al(s,null,g),u}return gr(s,w,u,g),Gu(s)}function Xm(s,u,g){if(u=u.updateQueue,u!==null&&(u=u.shared,(g&4194048)!==0)){var w=u.lanes;w&=s.pendingLanes,g|=w,u.lanes=g,_n(s,g)}}function aw(s,u){var g=s.updateQueue,w=s.alternate;if(w!==null&&(w=w.updateQueue,g===w)){var C=null,R=null;if(g=g.firstBaseUpdate,g!==null){do{var U={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};R===null?C=R=U:R=R.next=U,g=g.next}while(g!==null);R===null?C=R=u:R=R.next=u}else C=R=u;g={baseState:w.baseState,firstBaseUpdate:C,lastBaseUpdate:R,shared:w.shared,callbacks:w.callbacks},s.updateQueue=g;return}s=g.lastBaseUpdate,s===null?g.firstBaseUpdate=u:s.next=u,g.lastBaseUpdate=u}var sw=!1;function Qm(){if(sw){var s=zd;if(s!==null)throw s}}function Zm(s,u,g,w){sw=!1;var C=s.updateQueue;Yu=!1;var R=C.firstBaseUpdate,U=C.lastBaseUpdate,te=C.shared.pending;if(te!==null){C.shared.pending=null;var pe=te,Re=pe.next;pe.next=null,U===null?R=Re:U.next=Re,U=pe;var Ue=s.alternate;Ue!==null&&(Ue=Ue.updateQueue,te=Ue.lastBaseUpdate,te!==U&&(te===null?Ue.firstBaseUpdate=Re:te.next=Re,Ue.lastBaseUpdate=pe))}if(R!==null){var Qe=C.baseState;U=0,Ue=Re=pe=null,te=R;do{var je=te.lane&-536870913,Be=je!==te.lane;if(Be?(Pn&je)===je:(w&je)===je){je!==0&&je===Vd&&(sw=!0),Ue!==null&&(Ue=Ue.next={lane:0,tag:te.tag,payload:te.payload,callback:null,next:null});e:{var Ct=s,Ut=te;je=u;var vr=g;switch(Ut.tag){case 1:if(Ct=Ut.payload,typeof Ct=="function"){Qe=Ct.call(vr,Qe,je);break e}Qe=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Ut.payload,je=typeof Ct=="function"?Ct.call(vr,Qe,je):Ct,je==null)break e;Qe=_({},Qe,je);break e;case 2:Yu=!0}}je=te.callback,je!==null&&(s.flags|=64,Be&&(s.flags|=8192),Be=C.callbacks,Be===null?C.callbacks=[je]:Be.push(je))}else Be={lane:je,tag:te.tag,payload:te.payload,callback:te.callback,next:null},Ue===null?(Re=Ue=Be,pe=Qe):Ue=Ue.next=Be,U|=je;if(te=te.next,te===null){if(te=C.shared.pending,te===null)break;Be=te,te=Be.next,Be.next=null,C.lastBaseUpdate=Be,C.shared.pending=null}}while(!0);Ue===null&&(pe=Qe),C.baseState=pe,C.firstBaseUpdate=Re,C.lastBaseUpdate=Ue,R===null&&(C.shared.lanes=0),nc|=U,s.lanes=U,s.memoizedState=Qe}}function OO(s,u){if(typeof s!="function")throw Error(r(191,s));s.call(u)}function NO(s,u){var g=s.callbacks;if(g!==null)for(s.callbacks=null,s=0;s<g.length;s++)OO(g[s],u)}var Gd=me(null),$0=me(0);function PO(s,u){s=tu,Ye($0,s),Ye(Gd,u),tu=s|u.baseLanes}function ow(){Ye($0,tu),Ye(Gd,Gd.current)}function lw(){tu=$0.current,Se(Gd),Se($0)}var Hs=me(null),po=null;function Zu(s){var u=s.alternate;Ye(Ei,Ei.current&1),Ye(Hs,s),po===null&&(u===null||Gd.current!==null||u.memoizedState!==null)&&(po=s)}function uw(s){Ye(Ei,Ei.current),Ye(Hs,s),po===null&&(po=s)}function RO(s){s.tag===22?(Ye(Ei,Ei.current),Ye(Hs,s),po===null&&(po=s)):Ju()}function Ju(){Ye(Ei,Ei.current),Ye(Hs,Hs.current)}function Ks(s){Se(Hs),po===s&&(po=null),Se(Ei)}var Ei=me(0);function Y0(s){for(var u=s;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g_(g)||p_(g)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Wl=0,cn=null,pr=null,Mi=null,X0=!1,Hd=!1,bf=!1,Q0=0,Jm=0,Kd=null,bq=0;function hi(){throw Error(r(321))}function cw(s,u){if(u===null)return!1;for(var g=0;g<u.length&&g<s.length;g++)if(!E(s[g],u[g]))return!1;return!0}function fw(s,u,g,w,C,R){return Wl=R,cn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ye.H=s===null||s.memoizedState===null?g3:Tw,bf=!1,R=g(w,C),bf=!1,Hd&&(R=kO(u,g,w,C)),DO(s),R}function DO(s){ye.H=ng;var u=pr!==null&&pr.next!==null;if(Wl=0,Mi=pr=cn=null,X0=!1,Jm=0,Kd=null,u)throw Error(r(300));s===null||ji||(s=s.dependencies,s!==null&&z0(s)&&(ji=!0))}function kO(s,u,g,w){cn=s;var C=0;do{if(Hd&&(Kd=null),Jm=0,Hd=!1,25<=C)throw Error(r(301));if(C+=1,Mi=pr=null,s.updateQueue!=null){var R=s.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}ye.H=p3,R=u(g,w)}while(Hd);return R}function wq(){var s=ye.H,u=s.useState()[0];return u=typeof u.then=="function"?eg(u):u,s=s.useState()[0],(pr!==null?pr.memoizedState:null)!==s&&(cn.flags|=1024),u}function dw(){var s=Q0!==0;return Q0=0,s}function hw(s,u,g){u.updateQueue=s.updateQueue,u.flags&=-2053,s.lanes&=~g}function mw(s){if(X0){for(s=s.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}X0=!1}Wl=0,Mi=pr=cn=null,Hd=!1,Jm=Q0=0,Kd=null}function ls(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mi===null?cn.memoizedState=Mi=s:Mi=Mi.next=s,Mi}function Ai(){if(pr===null){var s=cn.alternate;s=s!==null?s.memoizedState:null}else s=pr.next;var u=Mi===null?cn.memoizedState:Mi.next;if(u!==null)Mi=u,pr=s;else{if(s===null)throw cn.alternate===null?Error(r(467)):Error(r(310));pr=s,s={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},Mi===null?cn.memoizedState=Mi=s:Mi=Mi.next=s}return Mi}function Z0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eg(s){var u=Jm;return Jm+=1,Kd===null&&(Kd=[]),s=AO(Kd,s,u),u=cn,(Mi===null?u.memoizedState:Mi.next)===null&&(u=u.alternate,ye.H=u===null||u.memoizedState===null?g3:Tw),s}function J0(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return eg(s);if(s.$$typeof===K)return Pa(s)}throw Error(r(438,String(s)))}function gw(s){var u=null,g=cn.updateQueue;if(g!==null&&(u=g.memoCache),u==null){var w=cn.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(u={data:w.data.map(function(C){return C.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),g===null&&(g=Z0(),cn.updateQueue=g),g.memoCache=u,g=u.data[u.index],g===void 0)for(g=u.data[u.index]=Array(s),w=0;w<s;w++)g[w]=oe;return u.index++,g}function $l(s,u){return typeof u=="function"?u(s):u}function e1(s){var u=Ai();return pw(u,pr,s)}function pw(s,u,g){var w=s.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=g;var C=s.baseQueue,R=w.pending;if(R!==null){if(C!==null){var U=C.next;C.next=R.next,R.next=U}u.baseQueue=C=R,w.pending=null}if(R=s.baseState,C===null)s.memoizedState=R;else{u=C.next;var te=U=null,pe=null,Re=u,Ue=!1;do{var Qe=Re.lane&-536870913;if(Qe!==Re.lane?(Pn&Qe)===Qe:(Wl&Qe)===Qe){var je=Re.revertLane;if(je===0)pe!==null&&(pe=pe.next={lane:0,revertLane:0,gesture:null,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),Qe===Vd&&(Ue=!0);else if((Wl&je)===je){Re=Re.next,je===Vd&&(Ue=!0);continue}else Qe={lane:0,revertLane:Re.revertLane,gesture:null,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},pe===null?(te=pe=Qe,U=R):pe=pe.next=Qe,cn.lanes|=je,nc|=je;Qe=Re.action,bf&&g(R,Qe),R=Re.hasEagerState?Re.eagerState:g(R,Qe)}else je={lane:Qe,revertLane:Re.revertLane,gesture:Re.gesture,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},pe===null?(te=pe=je,U=R):pe=pe.next=je,cn.lanes|=Qe,nc|=Qe;Re=Re.next}while(Re!==null&&Re!==u);if(pe===null?U=R:pe.next=te,!E(R,s.memoizedState)&&(ji=!0,Ue&&(g=zd,g!==null)))throw g;s.memoizedState=R,s.baseState=U,s.baseQueue=pe,w.lastRenderedState=R}return C===null&&(w.lanes=0),[s.memoizedState,w.dispatch]}function yw(s){var u=Ai(),g=u.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=s;var w=g.dispatch,C=g.pending,R=u.memoizedState;if(C!==null){g.pending=null;var U=C=C.next;do R=s(R,U.action),U=U.next;while(U!==C);E(R,u.memoizedState)||(ji=!0),u.memoizedState=R,u.baseQueue===null&&(u.baseState=R),g.lastRenderedState=R}return[R,w]}function MO(s,u,g){var w=cn,C=Ai(),R=Ln;if(R){if(g===void 0)throw Error(r(407));g=g()}else g=u();var U=!E((pr||C).memoizedState,g);if(U&&(C.memoizedState=g,ji=!0),C=C.queue,bw(BO.bind(null,w,C,s),[s]),C.getSnapshot!==u||U||Mi!==null&&Mi.memoizedState.tag&1){if(w.flags|=2048,Wd(9,{destroy:void 0},LO.bind(null,w,C,g,u),null),Cr===null)throw Error(r(349));R||(Wl&127)!==0||jO(w,u,g)}return g}function jO(s,u,g){s.flags|=16384,s={getSnapshot:u,value:g},u=cn.updateQueue,u===null?(u=Z0(),cn.updateQueue=u,u.stores=[s]):(g=u.stores,g===null?u.stores=[s]:g.push(s))}function LO(s,u,g,w){u.value=g,u.getSnapshot=w,FO(u)&&VO(s)}function BO(s,u,g){return g(function(){FO(u)&&VO(s)})}function FO(s){var u=s.getSnapshot;s=s.value;try{var g=u();return!E(s,g)}catch{return!0}}function VO(s){var u=tr(s,2);u!==null&&Is(u,s,2)}function vw(s){var u=ls();if(typeof s=="function"){var g=s;if(s=g(),bf){fn(!0);try{g()}finally{fn(!1)}}}return u.memoizedState=u.baseState=s,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:s},u}function zO(s,u,g,w){return s.baseState=g,pw(s,pr,typeof w=="function"?w:$l)}function _q(s,u,g,w,C){if(r1(s))throw Error(r(485));if(s=u.action,s!==null){var R={payload:C,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){R.listeners.push(U)}};ye.T!==null?g(!0):R.isTransition=!1,w(R),g=u.pending,g===null?(R.next=u.pending=R,UO(u,R)):(R.next=g.next,u.pending=g.next=R)}}function UO(s,u){var g=u.action,w=u.payload,C=s.state;if(u.isTransition){var R=ye.T,U={};ye.T=U;try{var te=g(C,w),pe=ye.S;pe!==null&&pe(U,te),qO(s,u,te)}catch(Re){xw(s,u,Re)}finally{R!==null&&U.types!==null&&(R.types=U.types),ye.T=R}}else try{R=g(C,w),qO(s,u,R)}catch(Re){xw(s,u,Re)}}function qO(s,u,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(w){GO(s,u,w)},function(w){return xw(s,u,w)}):GO(s,u,g)}function GO(s,u,g){u.status="fulfilled",u.value=g,HO(u),s.state=g,u=s.pending,u!==null&&(g=u.next,g===u?s.pending=null:(g=g.next,u.next=g,UO(s,g)))}function xw(s,u,g){var w=s.pending;if(s.pending=null,w!==null){w=w.next;do u.status="rejected",u.reason=g,HO(u),u=u.next;while(u!==w)}s.action=null}function HO(s){s=s.listeners;for(var u=0;u<s.length;u++)(0,s[u])()}function KO(s,u){return u}function WO(s,u){if(Ln){var g=Cr.formState;if(g!==null){e:{var w=cn;if(Ln){if(Fr){t:{for(var C=Fr,R=go;C.nodeType!==8;){if(!R){C=null;break t}if(C=yo(C.nextSibling),C===null){C=null;break t}}R=C.data,C=R==="F!"||R==="F"?C:null}if(C){Fr=yo(C.nextSibling),w=C.data==="F!";break e}}Wu(w)}w=!1}w&&(u=g[0])}}return g=ls(),g.memoizedState=g.baseState=u,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:KO,lastRenderedState:u},g.queue=w,g=d3.bind(null,cn,w),w.dispatch=g,w=vw(!1),R=Sw.bind(null,cn,!1,w.queue),w=ls(),C={state:u,dispatch:null,action:s,pending:null},w.queue=C,g=_q.bind(null,cn,C,R,g),C.dispatch=g,w.memoizedState=s,[u,g,!1]}function $O(s){var u=Ai();return YO(u,pr,s)}function YO(s,u,g){if(u=pw(s,u,KO)[0],s=e1($l)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var w=eg(u)}catch(U){throw U===Ud?G0:U}else w=u;u=Ai();var C=u.queue,R=C.dispatch;return g!==u.memoizedState&&(cn.flags|=2048,Wd(9,{destroy:void 0},Eq.bind(null,C,g),null)),[w,R,s]}function Eq(s,u){s.action=u}function XO(s){var u=Ai(),g=pr;if(g!==null)return YO(u,g,s);Ai(),u=u.memoizedState,g=Ai();var w=g.queue.dispatch;return g.memoizedState=s,[u,w,!1]}function Wd(s,u,g,w){return s={tag:s,create:g,deps:w,inst:u,next:null},u=cn.updateQueue,u===null&&(u=Z0(),cn.updateQueue=u),g=u.lastEffect,g===null?u.lastEffect=s.next=s:(w=g.next,g.next=s,s.next=w,u.lastEffect=s),s}function QO(){return Ai().memoizedState}function t1(s,u,g,w){var C=ls();cn.flags|=s,C.memoizedState=Wd(1|u,{destroy:void 0},g,w===void 0?null:w)}function n1(s,u,g,w){var C=Ai();w=w===void 0?null:w;var R=C.memoizedState.inst;pr!==null&&w!==null&&cw(w,pr.memoizedState.deps)?C.memoizedState=Wd(u,R,g,w):(cn.flags|=s,C.memoizedState=Wd(1|u,R,g,w))}function ZO(s,u){t1(8390656,8,s,u)}function bw(s,u){n1(2048,8,s,u)}function Aq(s){cn.flags|=4;var u=cn.updateQueue;if(u===null)u=Z0(),cn.updateQueue=u,u.events=[s];else{var g=u.events;g===null?u.events=[s]:g.push(s)}}function JO(s){var u=Ai().memoizedState;return Aq({ref:u,nextImpl:s}),function(){if((Xn&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}function e3(s,u){return n1(4,2,s,u)}function t3(s,u){return n1(4,4,s,u)}function n3(s,u){if(typeof u=="function"){s=s();var g=u(s);return function(){typeof g=="function"?g():u(null)}}if(u!=null)return s=s(),u.current=s,function(){u.current=null}}function r3(s,u,g){g=g!=null?g.concat([s]):null,n1(4,4,n3.bind(null,u,s),g)}function ww(){}function i3(s,u){var g=Ai();u=u===void 0?null:u;var w=g.memoizedState;return u!==null&&cw(u,w[1])?w[0]:(g.memoizedState=[s,u],s)}function a3(s,u){var g=Ai();u=u===void 0?null:u;var w=g.memoizedState;if(u!==null&&cw(u,w[1]))return w[0];if(w=s(),bf){fn(!0);try{s()}finally{fn(!1)}}return g.memoizedState=[w,u],w}function _w(s,u,g){return g===void 0||(Wl&1073741824)!==0&&(Pn&261930)===0?s.memoizedState=u:(s.memoizedState=g,s=sN(),cn.lanes|=s,nc|=s,g)}function s3(s,u,g,w){return E(g,u)?g:Gd.current!==null?(s=_w(s,g,w),E(s,u)||(ji=!0),s):(Wl&42)===0||(Wl&1073741824)!==0&&(Pn&261930)===0?(ji=!0,s.memoizedState=g):(s=sN(),cn.lanes|=s,nc|=s,u)}function o3(s,u,g,w,C){var R=_e.p;_e.p=R!==0&&8>R?R:8;var U=ye.T,te={};ye.T=te,Sw(s,!1,u,g);try{var pe=C(),Re=ye.S;if(Re!==null&&Re(te,pe),pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var Ue=xq(pe,w);tg(s,u,Ue,Ys(s))}else tg(s,u,w,Ys(s))}catch(Qe){tg(s,u,{then:function(){},status:"rejected",reason:Qe},Ys())}finally{_e.p=R,U!==null&&te.types!==null&&(U.types=te.types),ye.T=U}}function Sq(){}function Ew(s,u,g,w){if(s.tag!==5)throw Error(r(476));var C=l3(s).queue;o3(s,C,u,qe,g===null?Sq:function(){return u3(s),g(w)})}function l3(s){var u=s.memoizedState;if(u!==null)return u;u={memoizedState:qe,baseState:qe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:qe},next:null};var g={};return u.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:g},next:null},s.memoizedState=u,s=s.alternate,s!==null&&(s.memoizedState=u),u}function u3(s){var u=l3(s);u.next===null&&(u=s.alternate.memoizedState),tg(s,u.next.queue,{},Ys())}function Aw(){return Pa(vg)}function c3(){return Ai().memoizedState}function f3(){return Ai().memoizedState}function Tq(s){for(var u=s.return;u!==null;){switch(u.tag){case 24:case 3:var g=Ys();s=Xu(g);var w=Qu(u,s,g);w!==null&&(Is(w,u,g),Xm(w,u,g)),u={cache:Jb()},s.payload=u;return}u=u.return}}function Iq(s,u,g){var w=Ys();g={lane:w,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},r1(s)?h3(u,g):(g=Ya(s,u,g,w),g!==null&&(Is(g,s,w),m3(g,u,w)))}function d3(s,u,g){var w=Ys();tg(s,u,g,w)}function tg(s,u,g,w){var C={lane:w,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(r1(s))h3(u,C);else{var R=s.alternate;if(s.lanes===0&&(R===null||R.lanes===0)&&(R=u.lastRenderedReducer,R!==null))try{var U=u.lastRenderedState,te=R(U,g);if(C.hasEagerState=!0,C.eagerState=te,E(te,U))return gr(s,u,C,0),Cr===null&&en(),!1}catch{}if(g=Ya(s,u,C,w),g!==null)return Is(g,s,w),m3(g,u,w),!0}return!1}function Sw(s,u,g,w){if(w={lane:2,revertLane:r_(),gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},r1(s)){if(u)throw Error(r(479))}else u=Ya(s,g,w,2),u!==null&&Is(u,s,2)}function r1(s){var u=s.alternate;return s===cn||u!==null&&u===cn}function h3(s,u){Hd=X0=!0;var g=s.pending;g===null?u.next=u:(u.next=g.next,g.next=u),s.pending=u}function m3(s,u,g){if((g&4194048)!==0){var w=u.lanes;w&=s.pendingLanes,g|=w,u.lanes=g,_n(s,g)}}var ng={readContext:Pa,use:J0,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useLayoutEffect:hi,useInsertionEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useSyncExternalStore:hi,useId:hi,useHostTransitionStatus:hi,useFormState:hi,useActionState:hi,useOptimistic:hi,useMemoCache:hi,useCacheRefresh:hi};ng.useEffectEvent=hi;var g3={readContext:Pa,use:J0,useCallback:function(s,u){return ls().memoizedState=[s,u===void 0?null:u],s},useContext:Pa,useEffect:ZO,useImperativeHandle:function(s,u,g){g=g!=null?g.concat([s]):null,t1(4194308,4,n3.bind(null,u,s),g)},useLayoutEffect:function(s,u){return t1(4194308,4,s,u)},useInsertionEffect:function(s,u){t1(4,2,s,u)},useMemo:function(s,u){var g=ls();u=u===void 0?null:u;var w=s();if(bf){fn(!0);try{s()}finally{fn(!1)}}return g.memoizedState=[w,u],w},useReducer:function(s,u,g){var w=ls();if(g!==void 0){var C=g(u);if(bf){fn(!0);try{g(u)}finally{fn(!1)}}}else C=u;return w.memoizedState=w.baseState=C,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:C},w.queue=s,s=s.dispatch=Iq.bind(null,cn,s),[w.memoizedState,s]},useRef:function(s){var u=ls();return s={current:s},u.memoizedState=s},useState:function(s){s=vw(s);var u=s.queue,g=d3.bind(null,cn,u);return u.dispatch=g,[s.memoizedState,g]},useDebugValue:ww,useDeferredValue:function(s,u){var g=ls();return _w(g,s,u)},useTransition:function(){var s=vw(!1);return s=o3.bind(null,cn,s.queue,!0,!1),ls().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,u,g){var w=cn,C=ls();if(Ln){if(g===void 0)throw Error(r(407));g=g()}else{if(g=u(),Cr===null)throw Error(r(349));(Pn&127)!==0||jO(w,u,g)}C.memoizedState=g;var R={value:g,getSnapshot:u};return C.queue=R,ZO(BO.bind(null,w,R,s),[s]),w.flags|=2048,Wd(9,{destroy:void 0},LO.bind(null,w,R,g,u),null),g},useId:function(){var s=ls(),u=Cr.identifierPrefix;if(Ln){var g=ol,w=sl;g=(w&~(1<<32-Ze(w)-1)).toString(32)+g,u="_"+u+"R_"+g,g=Q0++,0<g&&(u+="H"+g.toString(32)),u+="_"}else g=bq++,u="_"+u+"r_"+g.toString(32)+"_";return s.memoizedState=u},useHostTransitionStatus:Aw,useFormState:WO,useActionState:WO,useOptimistic:function(s){var u=ls();u.memoizedState=u.baseState=s;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=g,u=Sw.bind(null,cn,!0,g),g.dispatch=u,[s,u]},useMemoCache:gw,useCacheRefresh:function(){return ls().memoizedState=Tq.bind(null,cn)},useEffectEvent:function(s){var u=ls(),g={impl:s};return u.memoizedState=g,function(){if((Xn&2)!==0)throw Error(r(440));return g.impl.apply(void 0,arguments)}}},Tw={readContext:Pa,use:J0,useCallback:i3,useContext:Pa,useEffect:bw,useImperativeHandle:r3,useInsertionEffect:e3,useLayoutEffect:t3,useMemo:a3,useReducer:e1,useRef:QO,useState:function(){return e1($l)},useDebugValue:ww,useDeferredValue:function(s,u){var g=Ai();return s3(g,pr.memoizedState,s,u)},useTransition:function(){var s=e1($l)[0],u=Ai().memoizedState;return[typeof s=="boolean"?s:eg(s),u]},useSyncExternalStore:MO,useId:c3,useHostTransitionStatus:Aw,useFormState:$O,useActionState:$O,useOptimistic:function(s,u){var g=Ai();return zO(g,pr,s,u)},useMemoCache:gw,useCacheRefresh:f3};Tw.useEffectEvent=JO;var p3={readContext:Pa,use:J0,useCallback:i3,useContext:Pa,useEffect:bw,useImperativeHandle:r3,useInsertionEffect:e3,useLayoutEffect:t3,useMemo:a3,useReducer:yw,useRef:QO,useState:function(){return yw($l)},useDebugValue:ww,useDeferredValue:function(s,u){var g=Ai();return pr===null?_w(g,s,u):s3(g,pr.memoizedState,s,u)},useTransition:function(){var s=yw($l)[0],u=Ai().memoizedState;return[typeof s=="boolean"?s:eg(s),u]},useSyncExternalStore:MO,useId:c3,useHostTransitionStatus:Aw,useFormState:XO,useActionState:XO,useOptimistic:function(s,u){var g=Ai();return pr!==null?zO(g,pr,s,u):(g.baseState=s,[s,g.queue.dispatch])},useMemoCache:gw,useCacheRefresh:f3};p3.useEffectEvent=JO;function Iw(s,u,g,w){u=s.memoizedState,g=g(w,u),g=g==null?u:_({},u,g),s.memoizedState=g,s.lanes===0&&(s.updateQueue.baseState=g)}var Cw={enqueueSetState:function(s,u,g){s=s._reactInternals;var w=Ys(),C=Xu(w);C.payload=u,g!=null&&(C.callback=g),u=Qu(s,C,w),u!==null&&(Is(u,s,w),Xm(u,s,w))},enqueueReplaceState:function(s,u,g){s=s._reactInternals;var w=Ys(),C=Xu(w);C.tag=1,C.payload=u,g!=null&&(C.callback=g),u=Qu(s,C,w),u!==null&&(Is(u,s,w),Xm(u,s,w))},enqueueForceUpdate:function(s,u){s=s._reactInternals;var g=Ys(),w=Xu(g);w.tag=2,u!=null&&(w.callback=u),u=Qu(s,w,g),u!==null&&(Is(u,s,g),Xm(u,s,g))}};function y3(s,u,g,w,C,R,U){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(w,R,U):u.prototype&&u.prototype.isPureReactComponent?!d(g,w)||!d(C,R):!0}function v3(s,u,g,w){s=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,w),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,w),u.state!==s&&Cw.enqueueReplaceState(u,u.state,null)}function wf(s,u){var g=u;if("ref"in u){g={};for(var w in u)w!=="ref"&&(g[w]=u[w])}if(s=s.defaultProps){g===u&&(g=_({},g));for(var C in s)g[C]===void 0&&(g[C]=s[C])}return g}function x3(s){bt(s)}function b3(s){console.error(s)}function w3(s){bt(s)}function i1(s,u){try{var g=s.onUncaughtError;g(u.value,{componentStack:u.stack})}catch(w){setTimeout(function(){throw w})}}function _3(s,u,g){try{var w=s.onCaughtError;w(g.value,{componentStack:g.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function Ow(s,u,g){return g=Xu(g),g.tag=3,g.payload={element:null},g.callback=function(){i1(s,u)},g}function E3(s){return s=Xu(s),s.tag=3,s}function A3(s,u,g,w){var C=g.type.getDerivedStateFromError;if(typeof C=="function"){var R=w.value;s.payload=function(){return C(R)},s.callback=function(){_3(u,g,w)}}var U=g.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(s.callback=function(){_3(u,g,w),typeof C!="function"&&(rc===null?rc=new Set([this]):rc.add(this));var te=w.stack;this.componentDidCatch(w.value,{componentStack:te!==null?te:""})})}function Cq(s,u,g,w,C){if(g.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(u=g.alternate,u!==null&&Fd(u,g,C,!0),g=Hs.current,g!==null){switch(g.tag){case 31:case 13:return po===null?p1():g.alternate===null&&mi===0&&(mi=3),g.flags&=-257,g.flags|=65536,g.lanes=C,w===H0?g.flags|=16384:(u=g.updateQueue,u===null?g.updateQueue=new Set([w]):u.add(w),e_(s,w,C)),!1;case 22:return g.flags|=65536,w===H0?g.flags|=16384:(u=g.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([w])},g.updateQueue=u):(g=u.retryQueue,g===null?u.retryQueue=new Set([w]):g.add(w)),e_(s,w,C)),!1}throw Error(r(435,g.tag))}return e_(s,w,C),p1(),!1}if(Ln)return u=Hs.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=C,w!==$b&&(s=Error(r(422),{cause:w}),Hm(fo(s,g)))):(w!==$b&&(u=Error(r(423),{cause:w}),Hm(fo(u,g))),s=s.current.alternate,s.flags|=65536,C&=-C,s.lanes|=C,w=fo(w,g),C=Ow(s.stateNode,w,C),aw(s,C),mi!==4&&(mi=2)),!1;var R=Error(r(520),{cause:w});if(R=fo(R,g),cg===null?cg=[R]:cg.push(R),mi!==4&&(mi=2),u===null)return!0;w=fo(w,g),g=u;do{switch(g.tag){case 3:return g.flags|=65536,s=C&-C,g.lanes|=s,s=Ow(g.stateNode,w,s),aw(g,s),!1;case 1:if(u=g.type,R=g.stateNode,(g.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(rc===null||!rc.has(R))))return g.flags|=65536,C&=-C,g.lanes|=C,C=E3(C),A3(C,s,g,w),aw(g,C),!1}g=g.return}while(g!==null);return!1}var Nw=Error(r(461)),ji=!1;function Ra(s,u,g,w){u.child=s===null?CO(u,null,g,w):xf(u,s.child,g,w)}function S3(s,u,g,w,C){g=g.render;var R=u.ref;if("ref"in w){var U={};for(var te in w)te!=="ref"&&(U[te]=w[te])}else U=w;return gf(u),w=fw(s,u,g,U,R,C),te=dw(),s!==null&&!ji?(hw(s,u,C),Yl(s,u,C)):(Ln&&te&&Kb(u),u.flags|=1,Ra(s,u,w,C),u.child)}function T3(s,u,g,w,C){if(s===null){var R=g.type;return typeof R=="function"&&!qb(R)&&R.defaultProps===void 0&&g.compare===null?(u.tag=15,u.type=R,I3(s,u,R,w,C)):(s=F0(g.type,null,w,u,u.mode,C),s.ref=u.ref,s.return=u,u.child=s)}if(R=s.child,!Bw(s,C)){var U=R.memoizedProps;if(g=g.compare,g=g!==null?g:d,g(U,w)&&s.ref===u.ref)return Yl(s,u,C)}return u.flags|=1,s=ql(R,w),s.ref=u.ref,s.return=u,u.child=s}function I3(s,u,g,w,C){if(s!==null){var R=s.memoizedProps;if(d(R,w)&&s.ref===u.ref)if(ji=!1,u.pendingProps=w=R,Bw(s,C))(s.flags&131072)!==0&&(ji=!0);else return u.lanes=s.lanes,Yl(s,u,C)}return Pw(s,u,g,w,C)}function C3(s,u,g,w){var C=w.children,R=s!==null?s.memoizedState:null;if(s===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),w.mode==="hidden"){if((u.flags&128)!==0){if(R=R!==null?R.baseLanes|g:g,s!==null){for(w=u.child=s.child,C=0;w!==null;)C=C|w.lanes|w.childLanes,w=w.sibling;w=C&~R}else w=0,u.child=null;return O3(s,u,R,g,w)}if((g&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},s!==null&&q0(u,R!==null?R.cachePool:null),R!==null?PO(u,R):ow(),RO(u);else return w=u.lanes=536870912,O3(s,u,R!==null?R.baseLanes|g:g,g,w)}else R!==null?(q0(u,R.cachePool),PO(u,R),Ju(),u.memoizedState=null):(s!==null&&q0(u,null),ow(),Ju());return Ra(s,u,C,g),u.child}function rg(s,u){return s!==null&&s.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function O3(s,u,g,w,C){var R=tw();return R=R===null?null:{parent:ki._currentValue,pool:R},u.memoizedState={baseLanes:g,cachePool:R},s!==null&&q0(u,null),ow(),RO(u),s!==null&&Fd(s,u,w,!0),u.childLanes=C,null}function a1(s,u){return u=o1({mode:u.mode,children:u.children},s.mode),u.ref=s.ref,s.child=u,u.return=s,u}function N3(s,u,g){return xf(u,s.child,null,g),s=a1(u,u.pendingProps),s.flags|=2,Ks(u),u.memoizedState=null,s}function Oq(s,u,g){var w=u.pendingProps,C=(u.flags&128)!==0;if(u.flags&=-129,s===null){if(Ln){if(w.mode==="hidden")return s=a1(u,w),u.lanes=536870912,rg(null,s);if(uw(u),(s=Fr)?(s=UN(s,go),s=s!==null&&s.data==="&"?s:null,s!==null&&(u.memoizedState={dehydrated:s,treeContext:Hu!==null?{id:sl,overflow:ol}:null,retryLane:536870912,hydrationErrors:null},g=hO(s),g.return=u,u.child=g,Na=u,Fr=null)):s=null,s===null)throw Wu(u);return u.lanes=536870912,null}return a1(u,w)}var R=s.memoizedState;if(R!==null){var U=R.dehydrated;if(uw(u),C)if(u.flags&256)u.flags&=-257,u=N3(s,u,g);else if(u.memoizedState!==null)u.child=s.child,u.flags|=128,u=null;else throw Error(r(558));else if(ji||Fd(s,u,g,!1),C=(g&s.childLanes)!==0,ji||C){if(w=Cr,w!==null&&(U=mr(w,g),U!==0&&U!==R.retryLane))throw R.retryLane=U,tr(s,U),Is(w,s,U),Nw;p1(),u=N3(s,u,g)}else s=R.treeContext,Fr=yo(U.nextSibling),Na=u,Ln=!0,Ku=null,go=!1,s!==null&&pO(u,s),u=a1(u,w),u.flags|=4096;return u}return s=ql(s.child,{mode:w.mode,children:w.children}),s.ref=u.ref,u.child=s,s.return=u,s}function s1(s,u){var g=u.ref;if(g===null)s!==null&&s.ref!==null&&(u.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(r(284));(s===null||s.ref!==g)&&(u.flags|=4194816)}}function Pw(s,u,g,w,C){return gf(u),g=fw(s,u,g,w,void 0,C),w=dw(),s!==null&&!ji?(hw(s,u,C),Yl(s,u,C)):(Ln&&w&&Kb(u),u.flags|=1,Ra(s,u,g,C),u.child)}function P3(s,u,g,w,C,R){return gf(u),u.updateQueue=null,g=kO(u,w,g,C),DO(s),w=dw(),s!==null&&!ji?(hw(s,u,R),Yl(s,u,R)):(Ln&&w&&Kb(u),u.flags|=1,Ra(s,u,g,R),u.child)}function R3(s,u,g,w,C){if(gf(u),u.stateNode===null){var R=Md,U=g.contextType;typeof U=="object"&&U!==null&&(R=Pa(U)),R=new g(w,R),u.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=Cw,u.stateNode=R,R._reactInternals=u,R=u.stateNode,R.props=w,R.state=u.memoizedState,R.refs={},rw(u),U=g.contextType,R.context=typeof U=="object"&&U!==null?Pa(U):Md,R.state=u.memoizedState,U=g.getDerivedStateFromProps,typeof U=="function"&&(Iw(u,g,U,w),R.state=u.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(U=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),U!==R.state&&Cw.enqueueReplaceState(R,R.state,null),Zm(u,w,R,C),Qm(),R.state=u.memoizedState),typeof R.componentDidMount=="function"&&(u.flags|=4194308),w=!0}else if(s===null){R=u.stateNode;var te=u.memoizedProps,pe=wf(g,te);R.props=pe;var Re=R.context,Ue=g.contextType;U=Md,typeof Ue=="object"&&Ue!==null&&(U=Pa(Ue));var Qe=g.getDerivedStateFromProps;Ue=typeof Qe=="function"||typeof R.getSnapshotBeforeUpdate=="function",te=u.pendingProps!==te,Ue||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(te||Re!==U)&&v3(u,R,w,U),Yu=!1;var je=u.memoizedState;R.state=je,Zm(u,w,R,C),Qm(),Re=u.memoizedState,te||je!==Re||Yu?(typeof Qe=="function"&&(Iw(u,g,Qe,w),Re=u.memoizedState),(pe=Yu||y3(u,g,pe,w,je,Re,U))?(Ue||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(u.flags|=4194308)):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=w,u.memoizedState=Re),R.props=w,R.state=Re,R.context=U,w=pe):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),w=!1)}else{R=u.stateNode,iw(s,u),U=u.memoizedProps,Ue=wf(g,U),R.props=Ue,Qe=u.pendingProps,je=R.context,Re=g.contextType,pe=Md,typeof Re=="object"&&Re!==null&&(pe=Pa(Re)),te=g.getDerivedStateFromProps,(Re=typeof te=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(U!==Qe||je!==pe)&&v3(u,R,w,pe),Yu=!1,je=u.memoizedState,R.state=je,Zm(u,w,R,C),Qm();var Be=u.memoizedState;U!==Qe||je!==Be||Yu||s!==null&&s.dependencies!==null&&z0(s.dependencies)?(typeof te=="function"&&(Iw(u,g,te,w),Be=u.memoizedState),(Ue=Yu||y3(u,g,Ue,w,je,Be,pe)||s!==null&&s.dependencies!==null&&z0(s.dependencies))?(Re||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(w,Be,pe),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(w,Be,pe)),typeof R.componentDidUpdate=="function"&&(u.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof R.componentDidUpdate!="function"||U===s.memoizedProps&&je===s.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||U===s.memoizedProps&&je===s.memoizedState||(u.flags|=1024),u.memoizedProps=w,u.memoizedState=Be),R.props=w,R.state=Be,R.context=pe,w=Ue):(typeof R.componentDidUpdate!="function"||U===s.memoizedProps&&je===s.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||U===s.memoizedProps&&je===s.memoizedState||(u.flags|=1024),w=!1)}return R=w,s1(s,u),w=(u.flags&128)!==0,R||w?(R=u.stateNode,g=w&&typeof g.getDerivedStateFromError!="function"?null:R.render(),u.flags|=1,s!==null&&w?(u.child=xf(u,s.child,null,C),u.child=xf(u,null,g,C)):Ra(s,u,g,C),u.memoizedState=R.state,s=u.child):s=Yl(s,u,C),s}function D3(s,u,g,w){return hf(),u.flags|=256,Ra(s,u,g,w),u.child}var Rw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dw(s){return{baseLanes:s,cachePool:_O()}}function kw(s,u,g){return s=s!==null?s.childLanes&~g:0,u&&(s|=$s),s}function k3(s,u,g){var w=u.pendingProps,C=!1,R=(u.flags&128)!==0,U;if((U=R)||(U=s!==null&&s.memoizedState===null?!1:(Ei.current&2)!==0),U&&(C=!0,u.flags&=-129),U=(u.flags&32)!==0,u.flags&=-33,s===null){if(Ln){if(C?Zu(u):Ju(),(s=Fr)?(s=UN(s,go),s=s!==null&&s.data!=="&"?s:null,s!==null&&(u.memoizedState={dehydrated:s,treeContext:Hu!==null?{id:sl,overflow:ol}:null,retryLane:536870912,hydrationErrors:null},g=hO(s),g.return=u,u.child=g,Na=u,Fr=null)):s=null,s===null)throw Wu(u);return p_(s)?u.lanes=32:u.lanes=536870912,null}var te=w.children;return w=w.fallback,C?(Ju(),C=u.mode,te=o1({mode:"hidden",children:te},C),w=df(w,C,g,null),te.return=u,w.return=u,te.sibling=w,u.child=te,w=u.child,w.memoizedState=Dw(g),w.childLanes=kw(s,U,g),u.memoizedState=Rw,rg(null,w)):(Zu(u),Mw(u,te))}var pe=s.memoizedState;if(pe!==null&&(te=pe.dehydrated,te!==null)){if(R)u.flags&256?(Zu(u),u.flags&=-257,u=jw(s,u,g)):u.memoizedState!==null?(Ju(),u.child=s.child,u.flags|=128,u=null):(Ju(),te=w.fallback,C=u.mode,w=o1({mode:"visible",children:w.children},C),te=df(te,C,g,null),te.flags|=2,w.return=u,te.return=u,w.sibling=te,u.child=w,xf(u,s.child,null,g),w=u.child,w.memoizedState=Dw(g),w.childLanes=kw(s,U,g),u.memoizedState=Rw,u=rg(null,w));else if(Zu(u),p_(te)){if(U=te.nextSibling&&te.nextSibling.dataset,U)var Re=U.dgst;U=Re,w=Error(r(419)),w.stack="",w.digest=U,Hm({value:w,source:null,stack:null}),u=jw(s,u,g)}else if(ji||Fd(s,u,g,!1),U=(g&s.childLanes)!==0,ji||U){if(U=Cr,U!==null&&(w=mr(U,g),w!==0&&w!==pe.retryLane))throw pe.retryLane=w,tr(s,w),Is(U,s,w),Nw;g_(te)||p1(),u=jw(s,u,g)}else g_(te)?(u.flags|=192,u.child=s.child,u=null):(s=pe.treeContext,Fr=yo(te.nextSibling),Na=u,Ln=!0,Ku=null,go=!1,s!==null&&pO(u,s),u=Mw(u,w.children),u.flags|=4096);return u}return C?(Ju(),te=w.fallback,C=u.mode,pe=s.child,Re=pe.sibling,w=ql(pe,{mode:"hidden",children:w.children}),w.subtreeFlags=pe.subtreeFlags&65011712,Re!==null?te=ql(Re,te):(te=df(te,C,g,null),te.flags|=2),te.return=u,w.return=u,w.sibling=te,u.child=w,rg(null,w),w=u.child,te=s.child.memoizedState,te===null?te=Dw(g):(C=te.cachePool,C!==null?(pe=ki._currentValue,C=C.parent!==pe?{parent:pe,pool:pe}:C):C=_O(),te={baseLanes:te.baseLanes|g,cachePool:C}),w.memoizedState=te,w.childLanes=kw(s,U,g),u.memoizedState=Rw,rg(s.child,w)):(Zu(u),g=s.child,s=g.sibling,g=ql(g,{mode:"visible",children:w.children}),g.return=u,g.sibling=null,s!==null&&(U=u.deletions,U===null?(u.deletions=[s],u.flags|=16):U.push(s)),u.child=g,u.memoizedState=null,g)}function Mw(s,u){return u=o1({mode:"visible",children:u},s.mode),u.return=s,s.child=u}function o1(s,u){return s=Gs(22,s,null,u),s.lanes=0,s}function jw(s,u,g){return xf(u,s.child,null,g),s=Mw(u,u.pendingProps.children),s.flags|=2,u.memoizedState=null,s}function M3(s,u,g){s.lanes|=u;var w=s.alternate;w!==null&&(w.lanes|=u),Qb(s.return,u,g)}function Lw(s,u,g,w,C,R){var U=s.memoizedState;U===null?s.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:w,tail:g,tailMode:C,treeForkCount:R}:(U.isBackwards=u,U.rendering=null,U.renderingStartTime=0,U.last=w,U.tail=g,U.tailMode=C,U.treeForkCount=R)}function j3(s,u,g){var w=u.pendingProps,C=w.revealOrder,R=w.tail;w=w.children;var U=Ei.current,te=(U&2)!==0;if(te?(U=U&1|2,u.flags|=128):U&=1,Ye(Ei,U),Ra(s,u,w,g),w=Ln?Gm:0,!te&&s!==null&&(s.flags&128)!==0)e:for(s=u.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&M3(s,g,u);else if(s.tag===19)M3(s,g,u);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===u)break e;for(;s.sibling===null;){if(s.return===null||s.return===u)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(C){case"forwards":for(g=u.child,C=null;g!==null;)s=g.alternate,s!==null&&Y0(s)===null&&(C=g),g=g.sibling;g=C,g===null?(C=u.child,u.child=null):(C=g.sibling,g.sibling=null),Lw(u,!1,C,g,R,w);break;case"backwards":case"unstable_legacy-backwards":for(g=null,C=u.child,u.child=null;C!==null;){if(s=C.alternate,s!==null&&Y0(s)===null){u.child=C;break}s=C.sibling,C.sibling=g,g=C,C=s}Lw(u,!0,g,null,R,w);break;case"together":Lw(u,!1,null,null,void 0,w);break;default:u.memoizedState=null}return u.child}function Yl(s,u,g){if(s!==null&&(u.dependencies=s.dependencies),nc|=u.lanes,(g&u.childLanes)===0)if(s!==null){if(Fd(s,u,g,!1),(g&u.childLanes)===0)return null}else return null;if(s!==null&&u.child!==s.child)throw Error(r(153));if(u.child!==null){for(s=u.child,g=ql(s,s.pendingProps),u.child=g,g.return=u;s.sibling!==null;)s=s.sibling,g=g.sibling=ql(s,s.pendingProps),g.return=u;g.sibling=null}return u.child}function Bw(s,u){return(s.lanes&u)!==0?!0:(s=s.dependencies,!!(s!==null&&z0(s)))}function Nq(s,u,g){switch(u.tag){case 3:lt(u,u.stateNode.containerInfo),$u(u,ki,s.memoizedState.cache),hf();break;case 27:case 5:Xe(u);break;case 4:lt(u,u.stateNode.containerInfo);break;case 10:$u(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,uw(u),null;break;case 13:var w=u.memoizedState;if(w!==null)return w.dehydrated!==null?(Zu(u),u.flags|=128,null):(g&u.child.childLanes)!==0?k3(s,u,g):(Zu(u),s=Yl(s,u,g),s!==null?s.sibling:null);Zu(u);break;case 19:var C=(s.flags&128)!==0;if(w=(g&u.childLanes)!==0,w||(Fd(s,u,g,!1),w=(g&u.childLanes)!==0),C){if(w)return j3(s,u,g);u.flags|=128}if(C=u.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Ye(Ei,Ei.current),w)break;return null;case 22:return u.lanes=0,C3(s,u,g,u.pendingProps);case 24:$u(u,ki,s.memoizedState.cache)}return Yl(s,u,g)}function L3(s,u,g){if(s!==null)if(s.memoizedProps!==u.pendingProps)ji=!0;else{if(!Bw(s,g)&&(u.flags&128)===0)return ji=!1,Nq(s,u,g);ji=(s.flags&131072)!==0}else ji=!1,Ln&&(u.flags&1048576)!==0&&gO(u,Gm,u.index);switch(u.lanes=0,u.tag){case 16:e:{var w=u.pendingProps;if(s=yf(u.elementType),u.type=s,typeof s=="function")qb(s)?(w=wf(s,w),u.tag=1,u=R3(null,u,s,w,g)):(u.tag=0,u=Pw(null,u,s,w,g));else{if(s!=null){var C=s.$$typeof;if(C===X){u.tag=11,u=S3(null,u,s,w,g);break e}else if(C===V){u.tag=14,u=T3(null,u,s,w,g);break e}}throw u=xe(s)||s,Error(r(306,u,""))}}return u;case 0:return Pw(s,u,u.type,u.pendingProps,g);case 1:return w=u.type,C=wf(w,u.pendingProps),R3(s,u,w,C,g);case 3:e:{if(lt(u,u.stateNode.containerInfo),s===null)throw Error(r(387));w=u.pendingProps;var R=u.memoizedState;C=R.element,iw(s,u),Zm(u,w,null,g);var U=u.memoizedState;if(w=U.cache,$u(u,ki,w),w!==R.cache&&Zb(u,[ki],g,!0),Qm(),w=U.element,R.isDehydrated)if(R={element:w,isDehydrated:!1,cache:U.cache},u.updateQueue.baseState=R,u.memoizedState=R,u.flags&256){u=D3(s,u,w,g);break e}else if(w!==C){C=fo(Error(r(424)),u),Hm(C),u=D3(s,u,w,g);break e}else for(s=u.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Fr=yo(s.firstChild),Na=u,Ln=!0,Ku=null,go=!0,g=CO(u,null,w,g),u.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(hf(),w===C){u=Yl(s,u,g);break e}Ra(s,u,w,g)}u=u.child}return u;case 26:return s1(s,u),s===null?(g=$N(u.type,null,u.pendingProps,null))?u.memoizedState=g:Ln||(g=u.type,s=u.pendingProps,w=E1($e.current).createElement(g),w[Vn]=u,w[gn]=s,Da(w,g,s),Ar(w),u.stateNode=w):u.memoizedState=$N(u.type,s.memoizedProps,u.pendingProps,s.memoizedState),null;case 27:return Xe(u),s===null&&Ln&&(w=u.stateNode=HN(u.type,u.pendingProps,$e.current),Na=u,go=!0,C=Fr,oc(u.type)?(y_=C,Fr=yo(w.firstChild)):Fr=C),Ra(s,u,u.pendingProps.children,g),s1(s,u),s===null&&(u.flags|=4194304),u.child;case 5:return s===null&&Ln&&((C=w=Fr)&&(w=sG(w,u.type,u.pendingProps,go),w!==null?(u.stateNode=w,Na=u,Fr=yo(w.firstChild),go=!1,C=!0):C=!1),C||Wu(u)),Xe(u),C=u.type,R=u.pendingProps,U=s!==null?s.memoizedProps:null,w=R.children,d_(C,R)?w=null:U!==null&&d_(C,U)&&(u.flags|=32),u.memoizedState!==null&&(C=fw(s,u,wq,null,null,g),vg._currentValue=C),s1(s,u),Ra(s,u,w,g),u.child;case 6:return s===null&&Ln&&((s=g=Fr)&&(g=oG(g,u.pendingProps,go),g!==null?(u.stateNode=g,Na=u,Fr=null,s=!0):s=!1),s||Wu(u)),null;case 13:return k3(s,u,g);case 4:return lt(u,u.stateNode.containerInfo),w=u.pendingProps,s===null?u.child=xf(u,null,w,g):Ra(s,u,w,g),u.child;case 11:return S3(s,u,u.type,u.pendingProps,g);case 7:return Ra(s,u,u.pendingProps,g),u.child;case 8:return Ra(s,u,u.pendingProps.children,g),u.child;case 12:return Ra(s,u,u.pendingProps.children,g),u.child;case 10:return w=u.pendingProps,$u(u,u.type,w.value),Ra(s,u,w.children,g),u.child;case 9:return C=u.type._context,w=u.pendingProps.children,gf(u),C=Pa(C),w=w(C),u.flags|=1,Ra(s,u,w,g),u.child;case 14:return T3(s,u,u.type,u.pendingProps,g);case 15:return I3(s,u,u.type,u.pendingProps,g);case 19:return j3(s,u,g);case 31:return Oq(s,u,g);case 22:return C3(s,u,g,u.pendingProps);case 24:return gf(u),w=Pa(ki),s===null?(C=tw(),C===null&&(C=Cr,R=Jb(),C.pooledCache=R,R.refCount++,R!==null&&(C.pooledCacheLanes|=g),C=R),u.memoizedState={parent:w,cache:C},rw(u),$u(u,ki,C)):((s.lanes&g)!==0&&(iw(s,u),Zm(u,null,null,g),Qm()),C=s.memoizedState,R=u.memoizedState,C.parent!==w?(C={parent:w,cache:w},u.memoizedState=C,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=C),$u(u,ki,w)):(w=R.cache,$u(u,ki,w),w!==C.cache&&Zb(u,[ki],g,!0))),Ra(s,u,u.pendingProps.children,g),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Xl(s){s.flags|=4}function Fw(s,u,g,w,C){if((u=(s.mode&32)!==0)&&(u=!1),u){if(s.flags|=16777216,(C&335544128)===C)if(s.stateNode.complete)s.flags|=8192;else if(cN())s.flags|=8192;else throw vf=H0,nw}else s.flags&=-16777217}function B3(s,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!JN(u))if(cN())s.flags|=8192;else throw vf=H0,nw}function l1(s,u){u!==null&&(s.flags|=4),s.flags&16384&&(u=s.tag!==22?ii():536870912,s.lanes|=u,Qd|=u)}function ig(s,u){if(!Ln)switch(s.tailMode){case"hidden":u=s.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?s.tail=null:g.sibling=null;break;case"collapsed":g=s.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?u||s.tail===null?s.tail=null:s.tail.sibling=null:w.sibling=null}}function Vr(s){var u=s.alternate!==null&&s.alternate.child===s.child,g=0,w=0;if(u)for(var C=s.child;C!==null;)g|=C.lanes|C.childLanes,w|=C.subtreeFlags&65011712,w|=C.flags&65011712,C.return=s,C=C.sibling;else for(C=s.child;C!==null;)g|=C.lanes|C.childLanes,w|=C.subtreeFlags,w|=C.flags,C.return=s,C=C.sibling;return s.subtreeFlags|=w,s.childLanes=g,u}function Pq(s,u,g){var w=u.pendingProps;switch(Wb(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(u),null;case 1:return Vr(u),null;case 3:return g=u.stateNode,w=null,s!==null&&(w=s.memoizedState.cache),u.memoizedState.cache!==w&&(u.flags|=2048),Kl(ki),Ne(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(Bd(u)?Xl(u):s===null||s.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Yb())),Vr(u),null;case 26:var C=u.type,R=u.memoizedState;return s===null?(Xl(u),R!==null?(Vr(u),B3(u,R)):(Vr(u),Fw(u,C,null,w,g))):R?R!==s.memoizedState?(Xl(u),Vr(u),B3(u,R)):(Vr(u),u.flags&=-16777217):(s=s.memoizedProps,s!==w&&Xl(u),Vr(u),Fw(u,C,s,w,g)),null;case 27:if(Et(u),g=$e.current,C=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==w&&Xl(u);else{if(!w){if(u.stateNode===null)throw Error(r(166));return Vr(u),null}s=ze.current,Bd(u)?yO(u):(s=HN(C,w,g),u.stateNode=s,Xl(u))}return Vr(u),null;case 5:if(Et(u),C=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==w&&Xl(u);else{if(!w){if(u.stateNode===null)throw Error(r(166));return Vr(u),null}if(R=ze.current,Bd(u))yO(u);else{var U=E1($e.current);switch(R){case 1:R=U.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:R=U.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":R=U.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":R=U.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":R=U.createElement("div"),R.innerHTML="<script><\/script>",R=R.removeChild(R.firstChild);break;case"select":R=typeof w.is=="string"?U.createElement("select",{is:w.is}):U.createElement("select"),w.multiple?R.multiple=!0:w.size&&(R.size=w.size);break;default:R=typeof w.is=="string"?U.createElement(C,{is:w.is}):U.createElement(C)}}R[Vn]=u,R[gn]=w;e:for(U=u.child;U!==null;){if(U.tag===5||U.tag===6)R.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===u)break e;for(;U.sibling===null;){if(U.return===null||U.return===u)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}u.stateNode=R;e:switch(Da(R,C,w),C){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&Xl(u)}}return Vr(u),Fw(u,u.type,s===null?null:s.memoizedProps,u.pendingProps,g),null;case 6:if(s&&u.stateNode!=null)s.memoizedProps!==w&&Xl(u);else{if(typeof w!="string"&&u.stateNode===null)throw Error(r(166));if(s=$e.current,Bd(u)){if(s=u.stateNode,g=u.memoizedProps,w=null,C=Na,C!==null)switch(C.tag){case 27:case 5:w=C.memoizedProps}s[Vn]=u,s=!!(s.nodeValue===g||w!==null&&w.suppressHydrationWarning===!0||kN(s.nodeValue,g)),s||Wu(u,!0)}else s=E1(s).createTextNode(w),s[Vn]=u,u.stateNode=s}return Vr(u),null;case 31:if(g=u.memoizedState,s===null||s.memoizedState!==null){if(w=Bd(u),g!==null){if(s===null){if(!w)throw Error(r(318));if(s=u.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Vn]=u}else hf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Vr(u),s=!1}else g=Yb(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),s=!0;if(!s)return u.flags&256?(Ks(u),u):(Ks(u),null);if((u.flags&128)!==0)throw Error(r(558))}return Vr(u),null;case 13:if(w=u.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(C=Bd(u),w!==null&&w.dehydrated!==null){if(s===null){if(!C)throw Error(r(318));if(C=u.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[Vn]=u}else hf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Vr(u),C=!1}else C=Yb(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=C),C=!0;if(!C)return u.flags&256?(Ks(u),u):(Ks(u),null)}return Ks(u),(u.flags&128)!==0?(u.lanes=g,u):(g=w!==null,s=s!==null&&s.memoizedState!==null,g&&(w=u.child,C=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(C=w.alternate.memoizedState.cachePool.pool),R=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(R=w.memoizedState.cachePool.pool),R!==C&&(w.flags|=2048)),g!==s&&g&&(u.child.flags|=8192),l1(u,u.updateQueue),Vr(u),null);case 4:return Ne(),s===null&&o_(u.stateNode.containerInfo),Vr(u),null;case 10:return Kl(u.type),Vr(u),null;case 19:if(Se(Ei),w=u.memoizedState,w===null)return Vr(u),null;if(C=(u.flags&128)!==0,R=w.rendering,R===null)if(C)ig(w,!1);else{if(mi!==0||s!==null&&(s.flags&128)!==0)for(s=u.child;s!==null;){if(R=Y0(s),R!==null){for(u.flags|=128,ig(w,!1),s=R.updateQueue,u.updateQueue=s,l1(u,s),u.subtreeFlags=0,s=g,g=u.child;g!==null;)dO(g,s),g=g.sibling;return Ye(Ei,Ei.current&1|2),Ln&&Gl(u,w.treeForkCount),u.child}s=s.sibling}w.tail!==null&&hr()>h1&&(u.flags|=128,C=!0,ig(w,!1),u.lanes=4194304)}else{if(!C)if(s=Y0(R),s!==null){if(u.flags|=128,C=!0,s=s.updateQueue,u.updateQueue=s,l1(u,s),ig(w,!0),w.tail===null&&w.tailMode==="hidden"&&!R.alternate&&!Ln)return Vr(u),null}else 2*hr()-w.renderingStartTime>h1&&g!==536870912&&(u.flags|=128,C=!0,ig(w,!1),u.lanes=4194304);w.isBackwards?(R.sibling=u.child,u.child=R):(s=w.last,s!==null?s.sibling=R:u.child=R,w.last=R)}return w.tail!==null?(s=w.tail,w.rendering=s,w.tail=s.sibling,w.renderingStartTime=hr(),s.sibling=null,g=Ei.current,Ye(Ei,C?g&1|2:g&1),Ln&&Gl(u,w.treeForkCount),s):(Vr(u),null);case 22:case 23:return Ks(u),lw(),w=u.memoizedState!==null,s!==null?s.memoizedState!==null!==w&&(u.flags|=8192):w&&(u.flags|=8192),w?(g&536870912)!==0&&(u.flags&128)===0&&(Vr(u),u.subtreeFlags&6&&(u.flags|=8192)):Vr(u),g=u.updateQueue,g!==null&&l1(u,g.retryQueue),g=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),w=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(w=u.memoizedState.cachePool.pool),w!==g&&(u.flags|=2048),s!==null&&Se(pf),null;case 24:return g=null,s!==null&&(g=s.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),Kl(ki),Vr(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function Rq(s,u){switch(Wb(u),u.tag){case 1:return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 3:return Kl(ki),Ne(),s=u.flags,(s&65536)!==0&&(s&128)===0?(u.flags=s&-65537|128,u):null;case 26:case 27:case 5:return Et(u),null;case 31:if(u.memoizedState!==null){if(Ks(u),u.alternate===null)throw Error(r(340));hf()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 13:if(Ks(u),s=u.memoizedState,s!==null&&s.dehydrated!==null){if(u.alternate===null)throw Error(r(340));hf()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 19:return Se(Ei),null;case 4:return Ne(),null;case 10:return Kl(u.type),null;case 22:case 23:return Ks(u),lw(),s!==null&&Se(pf),s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 24:return Kl(ki),null;case 25:return null;default:return null}}function F3(s,u){switch(Wb(u),u.tag){case 3:Kl(ki),Ne();break;case 26:case 27:case 5:Et(u);break;case 4:Ne();break;case 31:u.memoizedState!==null&&Ks(u);break;case 13:Ks(u);break;case 19:Se(Ei);break;case 10:Kl(u.type);break;case 22:case 23:Ks(u),lw(),s!==null&&Se(pf);break;case 24:Kl(ki)}}function ag(s,u){try{var g=u.updateQueue,w=g!==null?g.lastEffect:null;if(w!==null){var C=w.next;g=C;do{if((g.tag&s)===s){w=void 0;var R=g.create,U=g.inst;w=R(),U.destroy=w}g=g.next}while(g!==C)}}catch(te){or(u,u.return,te)}}function ec(s,u,g){try{var w=u.updateQueue,C=w!==null?w.lastEffect:null;if(C!==null){var R=C.next;w=R;do{if((w.tag&s)===s){var U=w.inst,te=U.destroy;if(te!==void 0){U.destroy=void 0,C=u;var pe=g,Re=te;try{Re()}catch(Ue){or(C,pe,Ue)}}}w=w.next}while(w!==R)}}catch(Ue){or(u,u.return,Ue)}}function V3(s){var u=s.updateQueue;if(u!==null){var g=s.stateNode;try{NO(u,g)}catch(w){or(s,s.return,w)}}}function z3(s,u,g){g.props=wf(s.type,s.memoizedProps),g.state=s.memoizedState;try{g.componentWillUnmount()}catch(w){or(s,u,w)}}function sg(s,u){try{var g=s.ref;if(g!==null){switch(s.tag){case 26:case 27:case 5:var w=s.stateNode;break;case 30:w=s.stateNode;break;default:w=s.stateNode}typeof g=="function"?s.refCleanup=g(w):g.current=w}}catch(C){or(s,u,C)}}function ll(s,u){var g=s.ref,w=s.refCleanup;if(g!==null)if(typeof w=="function")try{w()}catch(C){or(s,u,C)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(C){or(s,u,C)}else g.current=null}function U3(s){var u=s.type,g=s.memoizedProps,w=s.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":g.autoFocus&&w.focus();break e;case"img":g.src?w.src=g.src:g.srcSet&&(w.srcset=g.srcSet)}}catch(C){or(s,s.return,C)}}function Vw(s,u,g){try{var w=s.stateNode;eG(w,s.type,g,u),w[gn]=u}catch(C){or(s,s.return,C)}}function q3(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&oc(s.type)||s.tag===4}function zw(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||q3(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&oc(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Uw(s,u,g){var w=s.tag;if(w===5||w===6)s=s.stateNode,u?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(s,u):(u=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,u.appendChild(s),g=g._reactRootContainer,g!=null||u.onclick!==null||(u.onclick=_i));else if(w!==4&&(w===27&&oc(s.type)&&(g=s.stateNode,u=null),s=s.child,s!==null))for(Uw(s,u,g),s=s.sibling;s!==null;)Uw(s,u,g),s=s.sibling}function u1(s,u,g){var w=s.tag;if(w===5||w===6)s=s.stateNode,u?g.insertBefore(s,u):g.appendChild(s);else if(w!==4&&(w===27&&oc(s.type)&&(g=s.stateNode),s=s.child,s!==null))for(u1(s,u,g),s=s.sibling;s!==null;)u1(s,u,g),s=s.sibling}function G3(s){var u=s.stateNode,g=s.memoizedProps;try{for(var w=s.type,C=u.attributes;C.length;)u.removeAttributeNode(C[0]);Da(u,w,g),u[Vn]=s,u[gn]=g}catch(R){or(s,s.return,R)}}var Ql=!1,Li=!1,qw=!1,H3=typeof WeakSet=="function"?WeakSet:Set,oa=null;function Dq(s,u){if(s=s.containerInfo,c_=N1,s=P(s),k(s)){if("selectionStart"in s)var g={start:s.selectionStart,end:s.selectionEnd};else e:{g=(g=s.ownerDocument)&&g.defaultView||window;var w=g.getSelection&&g.getSelection();if(w&&w.rangeCount!==0){g=w.anchorNode;var C=w.anchorOffset,R=w.focusNode;w=w.focusOffset;try{g.nodeType,R.nodeType}catch{g=null;break e}var U=0,te=-1,pe=-1,Re=0,Ue=0,Qe=s,je=null;t:for(;;){for(var Be;Qe!==g||C!==0&&Qe.nodeType!==3||(te=U+C),Qe!==R||w!==0&&Qe.nodeType!==3||(pe=U+w),Qe.nodeType===3&&(U+=Qe.nodeValue.length),(Be=Qe.firstChild)!==null;)je=Qe,Qe=Be;for(;;){if(Qe===s)break t;if(je===g&&++Re===C&&(te=U),je===R&&++Ue===w&&(pe=U),(Be=Qe.nextSibling)!==null)break;Qe=je,je=Qe.parentNode}Qe=Be}g=te===-1||pe===-1?null:{start:te,end:pe}}else g=null}g=g||{start:0,end:0}}else g=null;for(f_={focusedElem:s,selectionRange:g},N1=!1,oa=u;oa!==null;)if(u=oa,s=u.child,(u.subtreeFlags&1028)!==0&&s!==null)s.return=u,oa=s;else for(;oa!==null;){switch(u=oa,R=u.alternate,s=u.flags,u.tag){case 0:if((s&4)!==0&&(s=u.updateQueue,s=s!==null?s.events:null,s!==null))for(g=0;g<s.length;g++)C=s[g],C.ref.impl=C.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&R!==null){s=void 0,g=u,C=R.memoizedProps,R=R.memoizedState,w=g.stateNode;try{var Ct=wf(g.type,C);s=w.getSnapshotBeforeUpdate(Ct,R),w.__reactInternalSnapshotBeforeUpdate=s}catch(Ut){or(g,g.return,Ut)}}break;case 3:if((s&1024)!==0){if(s=u.stateNode.containerInfo,g=s.nodeType,g===9)m_(s);else if(g===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":m_(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=u.sibling,s!==null){s.return=u.return,oa=s;break}oa=u.return}}function K3(s,u,g){var w=g.flags;switch(g.tag){case 0:case 11:case 15:Jl(s,g),w&4&&ag(5,g);break;case 1:if(Jl(s,g),w&4)if(s=g.stateNode,u===null)try{s.componentDidMount()}catch(U){or(g,g.return,U)}else{var C=wf(g.type,u.memoizedProps);u=u.memoizedState;try{s.componentDidUpdate(C,u,s.__reactInternalSnapshotBeforeUpdate)}catch(U){or(g,g.return,U)}}w&64&&V3(g),w&512&&sg(g,g.return);break;case 3:if(Jl(s,g),w&64&&(s=g.updateQueue,s!==null)){if(u=null,g.child!==null)switch(g.child.tag){case 27:case 5:u=g.child.stateNode;break;case 1:u=g.child.stateNode}try{NO(s,u)}catch(U){or(g,g.return,U)}}break;case 27:u===null&&w&4&&G3(g);case 26:case 5:Jl(s,g),u===null&&w&4&&U3(g),w&512&&sg(g,g.return);break;case 12:Jl(s,g);break;case 31:Jl(s,g),w&4&&Y3(s,g);break;case 13:Jl(s,g),w&4&&X3(s,g),w&64&&(s=g.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(g=Uq.bind(null,g),lG(s,g))));break;case 22:if(w=g.memoizedState!==null||Ql,!w){u=u!==null&&u.memoizedState!==null||Li,C=Ql;var R=Li;Ql=w,(Li=u)&&!R?eu(s,g,(g.subtreeFlags&8772)!==0):Jl(s,g),Ql=C,Li=R}break;case 30:break;default:Jl(s,g)}}function W3(s){var u=s.alternate;u!==null&&(s.alternate=null,W3(u)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(u=s.stateNode,u!==null&&Pi(u)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Xr=null,Es=!1;function Zl(s,u,g){for(g=g.child;g!==null;)$3(s,u,g),g=g.sibling}function $3(s,u,g){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(Tn,g)}catch{}switch(g.tag){case 26:Li||ll(g,u),Zl(s,u,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Li||ll(g,u);var w=Xr,C=Es;oc(g.type)&&(Xr=g.stateNode,Es=!1),Zl(s,u,g),gg(g.stateNode),Xr=w,Es=C;break;case 5:Li||ll(g,u);case 6:if(w=Xr,C=Es,Xr=null,Zl(s,u,g),Xr=w,Es=C,Xr!==null)if(Es)try{(Xr.nodeType===9?Xr.body:Xr.nodeName==="HTML"?Xr.ownerDocument.body:Xr).removeChild(g.stateNode)}catch(R){or(g,u,R)}else try{Xr.removeChild(g.stateNode)}catch(R){or(g,u,R)}break;case 18:Xr!==null&&(Es?(s=Xr,VN(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,g.stateNode),ah(s)):VN(Xr,g.stateNode));break;case 4:w=Xr,C=Es,Xr=g.stateNode.containerInfo,Es=!0,Zl(s,u,g),Xr=w,Es=C;break;case 0:case 11:case 14:case 15:ec(2,g,u),Li||ec(4,g,u),Zl(s,u,g);break;case 1:Li||(ll(g,u),w=g.stateNode,typeof w.componentWillUnmount=="function"&&z3(g,u,w)),Zl(s,u,g);break;case 21:Zl(s,u,g);break;case 22:Li=(w=Li)||g.memoizedState!==null,Zl(s,u,g),Li=w;break;default:Zl(s,u,g)}}function Y3(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ah(s)}catch(g){or(u,u.return,g)}}}function X3(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ah(s)}catch(g){or(u,u.return,g)}}function kq(s){switch(s.tag){case 31:case 13:case 19:var u=s.stateNode;return u===null&&(u=s.stateNode=new H3),u;case 22:return s=s.stateNode,u=s._retryCache,u===null&&(u=s._retryCache=new H3),u;default:throw Error(r(435,s.tag))}}function c1(s,u){var g=kq(s);u.forEach(function(w){if(!g.has(w)){g.add(w);var C=qq.bind(null,s,w);w.then(C,C)}})}function As(s,u){var g=u.deletions;if(g!==null)for(var w=0;w<g.length;w++){var C=g[w],R=s,U=u,te=U;e:for(;te!==null;){switch(te.tag){case 27:if(oc(te.type)){Xr=te.stateNode,Es=!1;break e}break;case 5:Xr=te.stateNode,Es=!1;break e;case 3:case 4:Xr=te.stateNode.containerInfo,Es=!0;break e}te=te.return}if(Xr===null)throw Error(r(160));$3(R,U,C),Xr=null,Es=!1,R=C.alternate,R!==null&&(R.return=null),C.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)Q3(u,s),u=u.sibling}var Lo=null;function Q3(s,u){var g=s.alternate,w=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:As(u,s),Ss(s),w&4&&(ec(3,s,s.return),ag(3,s),ec(5,s,s.return));break;case 1:As(u,s),Ss(s),w&512&&(Li||g===null||ll(g,g.return)),w&64&&Ql&&(s=s.updateQueue,s!==null&&(w=s.callbacks,w!==null&&(g=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=g===null?w:g.concat(w))));break;case 26:var C=Lo;if(As(u,s),Ss(s),w&512&&(Li||g===null||ll(g,g.return)),w&4){var R=g!==null?g.memoizedState:null;if(w=s.memoizedState,g===null)if(w===null)if(s.stateNode===null){e:{w=s.type,g=s.memoizedProps,C=C.ownerDocument||C;t:switch(w){case"title":R=C.getElementsByTagName("title")[0],(!R||R[Ni]||R[Vn]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=C.createElement(w),C.head.insertBefore(R,C.querySelector("head > title"))),Da(R,w,g),R[Vn]=s,Ar(R),w=R;break e;case"link":var U=QN("link","href",C).get(w+(g.href||""));if(U){for(var te=0;te<U.length;te++)if(R=U[te],R.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&R.getAttribute("rel")===(g.rel==null?null:g.rel)&&R.getAttribute("title")===(g.title==null?null:g.title)&&R.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){U.splice(te,1);break t}}R=C.createElement(w),Da(R,w,g),C.head.appendChild(R);break;case"meta":if(U=QN("meta","content",C).get(w+(g.content||""))){for(te=0;te<U.length;te++)if(R=U[te],R.getAttribute("content")===(g.content==null?null:""+g.content)&&R.getAttribute("name")===(g.name==null?null:g.name)&&R.getAttribute("property")===(g.property==null?null:g.property)&&R.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&R.getAttribute("charset")===(g.charSet==null?null:g.charSet)){U.splice(te,1);break t}}R=C.createElement(w),Da(R,w,g),C.head.appendChild(R);break;default:throw Error(r(468,w))}R[Vn]=s,Ar(R),w=R}s.stateNode=w}else ZN(C,s.type,s.stateNode);else s.stateNode=XN(C,w,s.memoizedProps);else R!==w?(R===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):R.count--,w===null?ZN(C,s.type,s.stateNode):XN(C,w,s.memoizedProps)):w===null&&s.stateNode!==null&&Vw(s,s.memoizedProps,g.memoizedProps)}break;case 27:As(u,s),Ss(s),w&512&&(Li||g===null||ll(g,g.return)),g!==null&&w&4&&Vw(s,s.memoizedProps,g.memoizedProps);break;case 5:if(As(u,s),Ss(s),w&512&&(Li||g===null||ll(g,g.return)),s.flags&32){C=s.stateNode;try{Gi(C,"")}catch(Ct){or(s,s.return,Ct)}}w&4&&s.stateNode!=null&&(C=s.memoizedProps,Vw(s,C,g!==null?g.memoizedProps:C)),w&1024&&(qw=!0);break;case 6:if(As(u,s),Ss(s),w&4){if(s.stateNode===null)throw Error(r(162));w=s.memoizedProps,g=s.stateNode;try{g.nodeValue=w}catch(Ct){or(s,s.return,Ct)}}break;case 3:if(T1=null,C=Lo,Lo=A1(u.containerInfo),As(u,s),Lo=C,Ss(s),w&4&&g!==null&&g.memoizedState.isDehydrated)try{ah(u.containerInfo)}catch(Ct){or(s,s.return,Ct)}qw&&(qw=!1,Z3(s));break;case 4:w=Lo,Lo=A1(s.stateNode.containerInfo),As(u,s),Ss(s),Lo=w;break;case 12:As(u,s),Ss(s);break;case 31:As(u,s),Ss(s),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,c1(s,w)));break;case 13:As(u,s),Ss(s),s.child.flags&8192&&s.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(d1=hr()),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,c1(s,w)));break;case 22:C=s.memoizedState!==null;var pe=g!==null&&g.memoizedState!==null,Re=Ql,Ue=Li;if(Ql=Re||C,Li=Ue||pe,As(u,s),Li=Ue,Ql=Re,Ss(s),w&8192)e:for(u=s.stateNode,u._visibility=C?u._visibility&-2:u._visibility|1,C&&(g===null||pe||Ql||Li||_f(s)),g=null,u=s;;){if(u.tag===5||u.tag===26){if(g===null){pe=g=u;try{if(R=pe.stateNode,C)U=R.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{te=pe.stateNode;var Qe=pe.memoizedProps.style,je=Qe!=null&&Qe.hasOwnProperty("display")?Qe.display:null;te.style.display=je==null||typeof je=="boolean"?"":(""+je).trim()}}catch(Ct){or(pe,pe.return,Ct)}}}else if(u.tag===6){if(g===null){pe=u;try{pe.stateNode.nodeValue=C?"":pe.memoizedProps}catch(Ct){or(pe,pe.return,Ct)}}}else if(u.tag===18){if(g===null){pe=u;try{var Be=pe.stateNode;C?zN(Be,!0):zN(pe.stateNode,!1)}catch(Ct){or(pe,pe.return,Ct)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===s)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break e;for(;u.sibling===null;){if(u.return===null||u.return===s)break e;g===u&&(g=null),u=u.return}g===u&&(g=null),u.sibling.return=u.return,u=u.sibling}w&4&&(w=s.updateQueue,w!==null&&(g=w.retryQueue,g!==null&&(w.retryQueue=null,c1(s,g))));break;case 19:As(u,s),Ss(s),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,c1(s,w)));break;case 30:break;case 21:break;default:As(u,s),Ss(s)}}function Ss(s){var u=s.flags;if(u&2){try{for(var g,w=s.return;w!==null;){if(q3(w)){g=w;break}w=w.return}if(g==null)throw Error(r(160));switch(g.tag){case 27:var C=g.stateNode,R=zw(s);u1(s,R,C);break;case 5:var U=g.stateNode;g.flags&32&&(Gi(U,""),g.flags&=-33);var te=zw(s);u1(s,te,U);break;case 3:case 4:var pe=g.stateNode.containerInfo,Re=zw(s);Uw(s,Re,pe);break;default:throw Error(r(161))}}catch(Ue){or(s,s.return,Ue)}s.flags&=-3}u&4096&&(s.flags&=-4097)}function Z3(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var u=s;Z3(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),s=s.sibling}}function Jl(s,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)K3(s,u.alternate,u),u=u.sibling}function _f(s){for(s=s.child;s!==null;){var u=s;switch(u.tag){case 0:case 11:case 14:case 15:ec(4,u,u.return),_f(u);break;case 1:ll(u,u.return);var g=u.stateNode;typeof g.componentWillUnmount=="function"&&z3(u,u.return,g),_f(u);break;case 27:gg(u.stateNode);case 26:case 5:ll(u,u.return),_f(u);break;case 22:u.memoizedState===null&&_f(u);break;case 30:_f(u);break;default:_f(u)}s=s.sibling}}function eu(s,u,g){for(g=g&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var w=u.alternate,C=s,R=u,U=R.flags;switch(R.tag){case 0:case 11:case 15:eu(C,R,g),ag(4,R);break;case 1:if(eu(C,R,g),w=R,C=w.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(Re){or(w,w.return,Re)}if(w=R,C=w.updateQueue,C!==null){var te=w.stateNode;try{var pe=C.shared.hiddenCallbacks;if(pe!==null)for(C.shared.hiddenCallbacks=null,C=0;C<pe.length;C++)OO(pe[C],te)}catch(Re){or(w,w.return,Re)}}g&&U&64&&V3(R),sg(R,R.return);break;case 27:G3(R);case 26:case 5:eu(C,R,g),g&&w===null&&U&4&&U3(R),sg(R,R.return);break;case 12:eu(C,R,g);break;case 31:eu(C,R,g),g&&U&4&&Y3(C,R);break;case 13:eu(C,R,g),g&&U&4&&X3(C,R);break;case 22:R.memoizedState===null&&eu(C,R,g),sg(R,R.return);break;case 30:break;default:eu(C,R,g)}u=u.sibling}}function Gw(s,u){var g=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),s=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(s=u.memoizedState.cachePool.pool),s!==g&&(s!=null&&s.refCount++,g!=null&&Km(g))}function Hw(s,u){s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&Km(s))}function Bo(s,u,g,w){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)J3(s,u,g,w),u=u.sibling}function J3(s,u,g,w){var C=u.flags;switch(u.tag){case 0:case 11:case 15:Bo(s,u,g,w),C&2048&&ag(9,u);break;case 1:Bo(s,u,g,w);break;case 3:Bo(s,u,g,w),C&2048&&(s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&Km(s)));break;case 12:if(C&2048){Bo(s,u,g,w),s=u.stateNode;try{var R=u.memoizedProps,U=R.id,te=R.onPostCommit;typeof te=="function"&&te(U,u.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(pe){or(u,u.return,pe)}}else Bo(s,u,g,w);break;case 31:Bo(s,u,g,w);break;case 13:Bo(s,u,g,w);break;case 23:break;case 22:R=u.stateNode,U=u.alternate,u.memoizedState!==null?R._visibility&2?Bo(s,u,g,w):og(s,u):R._visibility&2?Bo(s,u,g,w):(R._visibility|=2,$d(s,u,g,w,(u.subtreeFlags&10256)!==0||!1)),C&2048&&Gw(U,u);break;case 24:Bo(s,u,g,w),C&2048&&Hw(u.alternate,u);break;default:Bo(s,u,g,w)}}function $d(s,u,g,w,C){for(C=C&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var R=s,U=u,te=g,pe=w,Re=U.flags;switch(U.tag){case 0:case 11:case 15:$d(R,U,te,pe,C),ag(8,U);break;case 23:break;case 22:var Ue=U.stateNode;U.memoizedState!==null?Ue._visibility&2?$d(R,U,te,pe,C):og(R,U):(Ue._visibility|=2,$d(R,U,te,pe,C)),C&&Re&2048&&Gw(U.alternate,U);break;case 24:$d(R,U,te,pe,C),C&&Re&2048&&Hw(U.alternate,U);break;default:$d(R,U,te,pe,C)}u=u.sibling}}function og(s,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var g=s,w=u,C=w.flags;switch(w.tag){case 22:og(g,w),C&2048&&Gw(w.alternate,w);break;case 24:og(g,w),C&2048&&Hw(w.alternate,w);break;default:og(g,w)}u=u.sibling}}var lg=8192;function Yd(s,u,g){if(s.subtreeFlags&lg)for(s=s.child;s!==null;)eN(s,u,g),s=s.sibling}function eN(s,u,g){switch(s.tag){case 26:Yd(s,u,g),s.flags&lg&&s.memoizedState!==null&&bG(g,Lo,s.memoizedState,s.memoizedProps);break;case 5:Yd(s,u,g);break;case 3:case 4:var w=Lo;Lo=A1(s.stateNode.containerInfo),Yd(s,u,g),Lo=w;break;case 22:s.memoizedState===null&&(w=s.alternate,w!==null&&w.memoizedState!==null?(w=lg,lg=16777216,Yd(s,u,g),lg=w):Yd(s,u,g));break;default:Yd(s,u,g)}}function tN(s){var u=s.alternate;if(u!==null&&(s=u.child,s!==null)){u.child=null;do u=s.sibling,s.sibling=null,s=u;while(s!==null)}}function ug(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var w=u[g];oa=w,rN(w,s)}tN(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)nN(s),s=s.sibling}function nN(s){switch(s.tag){case 0:case 11:case 15:ug(s),s.flags&2048&&ec(9,s,s.return);break;case 3:ug(s);break;case 12:ug(s);break;case 22:var u=s.stateNode;s.memoizedState!==null&&u._visibility&2&&(s.return===null||s.return.tag!==13)?(u._visibility&=-3,f1(s)):ug(s);break;default:ug(s)}}function f1(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var w=u[g];oa=w,rN(w,s)}tN(s)}for(s=s.child;s!==null;){switch(u=s,u.tag){case 0:case 11:case 15:ec(8,u,u.return),f1(u);break;case 22:g=u.stateNode,g._visibility&2&&(g._visibility&=-3,f1(u));break;default:f1(u)}s=s.sibling}}function rN(s,u){for(;oa!==null;){var g=oa;switch(g.tag){case 0:case 11:case 15:ec(8,g,u);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var w=g.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Km(g.memoizedState.cache)}if(w=g.child,w!==null)w.return=g,oa=w;else e:for(g=s;oa!==null;){w=oa;var C=w.sibling,R=w.return;if(W3(w),w===g){oa=null;break e}if(C!==null){C.return=R,oa=C;break e}oa=R}}}var Mq={getCacheForType:function(s){var u=Pa(ki),g=u.data.get(s);return g===void 0&&(g=s(),u.data.set(s,g)),g},cacheSignal:function(){return Pa(ki).controller.signal}},jq=typeof WeakMap=="function"?WeakMap:Map,Xn=0,Cr=null,Cn=null,Pn=0,sr=0,Ws=null,tc=!1,Xd=!1,Kw=!1,tu=0,mi=0,nc=0,Ef=0,Ww=0,$s=0,Qd=0,cg=null,Ts=null,$w=!1,d1=0,iN=0,h1=1/0,m1=null,rc=null,Hi=0,ic=null,Zd=null,nu=0,Yw=0,Xw=null,aN=null,fg=0,Qw=null;function Ys(){return(Xn&2)!==0&&Pn!==0?Pn&-Pn:ye.T!==null?r_():fi()}function sN(){if($s===0)if((Pn&536870912)===0||Ln){var s=nn;nn<<=1,(nn&3932160)===0&&(nn=262144),$s=s}else $s=536870912;return s=Hs.current,s!==null&&(s.flags|=32),$s}function Is(s,u,g){(s===Cr&&(sr===2||sr===9)||s.cancelPendingCommit!==null)&&(Jd(s,0),ac(s,Pn,$s,!1)),Ui(s,g),((Xn&2)===0||s!==Cr)&&(s===Cr&&((Xn&2)===0&&(Ef|=g),mi===4&&ac(s,Pn,$s,!1)),ul(s))}function oN(s,u,g){if((Xn&6)!==0)throw Error(r(327));var w=!g&&(u&127)===0&&(u&s.expiredLanes)===0||Er(s,u),C=w?Fq(s,u):Jw(s,u,!0),R=w;do{if(C===0){Xd&&!w&&ac(s,u,0,!1);break}else{if(g=s.current.alternate,R&&!Lq(g)){C=Jw(s,u,!1),R=!1;continue}if(C===2){if(R=u,s.errorRecoveryDisabledLanes&R)var U=0;else U=s.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){u=U;e:{var te=s;C=cg;var pe=te.current.memoizedState.isDehydrated;if(pe&&(Jd(te,U).flags|=256),U=Jw(te,U,!1),U!==2){if(Kw&&!pe){te.errorRecoveryDisabledLanes|=R,Ef|=R,C=4;break e}R=Ts,Ts=C,R!==null&&(Ts===null?Ts=R:Ts.push.apply(Ts,R))}C=U}if(R=!1,C!==2)continue}}if(C===1){Jd(s,0),ac(s,u,0,!0);break}e:{switch(w=s,R=C,R){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:ac(w,u,$s,!tc);break e;case 2:Ts=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(C=d1+300-hr(),10<C)){if(ac(w,u,$s,!tc),Fa(w,0,!0)!==0)break e;nu=u,w.timeoutHandle=BN(lN.bind(null,w,g,Ts,m1,$w,u,$s,Ef,Qd,tc,R,"Throttled",-0,0),C);break e}lN(w,g,Ts,m1,$w,u,$s,Ef,Qd,tc,R,null,-0,0)}}break}while(!0);ul(s)}function lN(s,u,g,w,C,R,U,te,pe,Re,Ue,Qe,je,Be){if(s.timeoutHandle=-1,Qe=u.subtreeFlags,Qe&8192||(Qe&16785408)===16785408){Qe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_i},eN(u,R,Qe);var Ct=(R&62914560)===R?d1-hr():(R&4194048)===R?iN-hr():0;if(Ct=wG(Qe,Ct),Ct!==null){nu=R,s.cancelPendingCommit=Ct(pN.bind(null,s,u,R,g,w,C,U,te,pe,Ue,Qe,null,je,Be)),ac(s,R,U,!Re);return}}pN(s,u,R,g,w,C,U,te,pe)}function Lq(s){for(var u=s;;){var g=u.tag;if((g===0||g===11||g===15)&&u.flags&16384&&(g=u.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var w=0;w<g.length;w++){var C=g[w],R=C.getSnapshot;C=C.value;try{if(!E(R(),C))return!1}catch{return!1}}if(g=u.child,u.subtreeFlags&16384&&g!==null)g.return=u,u=g;else{if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ac(s,u,g,w){u&=~Ww,u&=~Ef,s.suspendedLanes|=u,s.pingedLanes&=~u,w&&(s.warmLanes|=u),w=s.expirationTimes;for(var C=u;0<C;){var R=31-Ze(C),U=1<<R;w[R]=-1,C&=~U}g!==0&&gs(s,g,u)}function g1(){return(Xn&6)===0?(dg(0),!1):!0}function Zw(){if(Cn!==null){if(sr===0)var s=Cn.return;else s=Cn,Hl=mf=null,mw(s),qd=null,$m=0,s=Cn;for(;s!==null;)F3(s.alternate,s),s=s.return;Cn=null}}function Jd(s,u){var g=s.timeoutHandle;g!==-1&&(s.timeoutHandle=-1,rG(g)),g=s.cancelPendingCommit,g!==null&&(s.cancelPendingCommit=null,g()),nu=0,Zw(),Cr=s,Cn=g=ql(s.current,null),Pn=u,sr=0,Ws=null,tc=!1,Xd=Er(s,u),Kw=!1,Qd=$s=Ww=Ef=nc=mi=0,Ts=cg=null,$w=!1,(u&8)!==0&&(u|=u&32);var w=s.entangledLanes;if(w!==0)for(s=s.entanglements,w&=u;0<w;){var C=31-Ze(w),R=1<<C;u|=s[C],w&=~R}return tu=u,en(),g}function uN(s,u){cn=null,ye.H=ng,u===Ud||u===G0?(u=SO(),sr=3):u===nw?(u=SO(),sr=4):sr=u===Nw?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ws=u,Cn===null&&(mi=1,i1(s,fo(u,s.current)))}function cN(){var s=Hs.current;return s===null?!0:(Pn&4194048)===Pn?po===null:(Pn&62914560)===Pn||(Pn&536870912)!==0?s===po:!1}function fN(){var s=ye.H;return ye.H=ng,s===null?ng:s}function dN(){var s=ye.A;return ye.A=Mq,s}function p1(){mi=4,tc||(Pn&4194048)!==Pn&&Hs.current!==null||(Xd=!0),(nc&134217727)===0&&(Ef&134217727)===0||Cr===null||ac(Cr,Pn,$s,!1)}function Jw(s,u,g){var w=Xn;Xn|=2;var C=fN(),R=dN();(Cr!==s||Pn!==u)&&(m1=null,Jd(s,u)),u=!1;var U=mi;e:do try{if(sr!==0&&Cn!==null){var te=Cn,pe=Ws;switch(sr){case 8:Zw(),U=6;break e;case 3:case 2:case 9:case 6:Hs.current===null&&(u=!0);var Re=sr;if(sr=0,Ws=null,eh(s,te,pe,Re),g&&Xd){U=0;break e}break;default:Re=sr,sr=0,Ws=null,eh(s,te,pe,Re)}}Bq(),U=mi;break}catch(Ue){uN(s,Ue)}while(!0);return u&&s.shellSuspendCounter++,Hl=mf=null,Xn=w,ye.H=C,ye.A=R,Cn===null&&(Cr=null,Pn=0,en()),U}function Bq(){for(;Cn!==null;)hN(Cn)}function Fq(s,u){var g=Xn;Xn|=2;var w=fN(),C=dN();Cr!==s||Pn!==u?(m1=null,h1=hr()+500,Jd(s,u)):Xd=Er(s,u);e:do try{if(sr!==0&&Cn!==null){u=Cn;var R=Ws;t:switch(sr){case 1:sr=0,Ws=null,eh(s,u,R,1);break;case 2:case 9:if(EO(R)){sr=0,Ws=null,mN(u);break}u=function(){sr!==2&&sr!==9||Cr!==s||(sr=7),ul(s)},R.then(u,u);break e;case 3:sr=7;break e;case 4:sr=5;break e;case 7:EO(R)?(sr=0,Ws=null,mN(u)):(sr=0,Ws=null,eh(s,u,R,7));break;case 5:var U=null;switch(Cn.tag){case 26:U=Cn.memoizedState;case 5:case 27:var te=Cn;if(U?JN(U):te.stateNode.complete){sr=0,Ws=null;var pe=te.sibling;if(pe!==null)Cn=pe;else{var Re=te.return;Re!==null?(Cn=Re,y1(Re)):Cn=null}break t}}sr=0,Ws=null,eh(s,u,R,5);break;case 6:sr=0,Ws=null,eh(s,u,R,6);break;case 8:Zw(),mi=6;break e;default:throw Error(r(462))}}Vq();break}catch(Ue){uN(s,Ue)}while(!0);return Hl=mf=null,ye.H=w,ye.A=C,Xn=g,Cn!==null?0:(Cr=null,Pn=0,en(),mi)}function Vq(){for(;Cn!==null&&!Po();)hN(Cn)}function hN(s){var u=L3(s.alternate,s,tu);s.memoizedProps=s.pendingProps,u===null?y1(s):Cn=u}function mN(s){var u=s,g=u.alternate;switch(u.tag){case 15:case 0:u=P3(g,u,u.pendingProps,u.type,void 0,Pn);break;case 11:u=P3(g,u,u.pendingProps,u.type.render,u.ref,Pn);break;case 5:mw(u);default:F3(g,u),u=Cn=dO(u,tu),u=L3(g,u,tu)}s.memoizedProps=s.pendingProps,u===null?y1(s):Cn=u}function eh(s,u,g,w){Hl=mf=null,mw(u),qd=null,$m=0;var C=u.return;try{if(Cq(s,C,u,g,Pn)){mi=1,i1(s,fo(g,s.current)),Cn=null;return}}catch(R){if(C!==null)throw Cn=C,R;mi=1,i1(s,fo(g,s.current)),Cn=null;return}u.flags&32768?(Ln||w===1?s=!0:Xd||(Pn&536870912)!==0?s=!1:(tc=s=!0,(w===2||w===9||w===3||w===6)&&(w=Hs.current,w!==null&&w.tag===13&&(w.flags|=16384))),gN(u,s)):y1(u)}function y1(s){var u=s;do{if((u.flags&32768)!==0){gN(u,tc);return}s=u.return;var g=Pq(u.alternate,u,tu);if(g!==null){Cn=g;return}if(u=u.sibling,u!==null){Cn=u;return}Cn=u=s}while(u!==null);mi===0&&(mi=5)}function gN(s,u){do{var g=Rq(s.alternate,s);if(g!==null){g.flags&=32767,Cn=g;return}if(g=s.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!u&&(s=s.sibling,s!==null)){Cn=s;return}Cn=s=g}while(s!==null);mi=6,Cn=null}function pN(s,u,g,w,C,R,U,te,pe){s.cancelPendingCommit=null;do v1();while(Hi!==0);if((Xn&6)!==0)throw Error(r(327));if(u!==null){if(u===s.current)throw Error(r(177));if(R=u.lanes|u.childLanes,R|=Bt,ta(s,g,R,U,te,pe),s===Cr&&(Cn=Cr=null,Pn=0),Zd=u,ic=s,nu=g,Yw=R,Xw=C,aN=w,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Gq(bi,function(){return wN(),null})):(s.callbackNode=null,s.callbackPriority=0),w=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||w){w=ye.T,ye.T=null,C=_e.p,_e.p=2,U=Xn,Xn|=4;try{Dq(s,u,g)}finally{Xn=U,_e.p=C,ye.T=w}}Hi=1,yN(),vN(),xN()}}function yN(){if(Hi===1){Hi=0;var s=ic,u=Zd,g=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||g){g=ye.T,ye.T=null;var w=_e.p;_e.p=2;var C=Xn;Xn|=4;try{Q3(u,s);var R=f_,U=P(s.containerInfo),te=R.focusedElem,pe=R.selectionRange;if(U!==te&&te&&te.ownerDocument&&I(te.ownerDocument.documentElement,te)){if(pe!==null&&k(te)){var Re=pe.start,Ue=pe.end;if(Ue===void 0&&(Ue=Re),"selectionStart"in te)te.selectionStart=Re,te.selectionEnd=Math.min(Ue,te.value.length);else{var Qe=te.ownerDocument||document,je=Qe&&Qe.defaultView||window;if(je.getSelection){var Be=je.getSelection(),Ct=te.textContent.length,Ut=Math.min(pe.start,Ct),vr=pe.end===void 0?Ut:Math.min(pe.end,Ct);!Be.extend&&Ut>vr&&(U=vr,vr=Ut,Ut=U);var Ee=A(te,Ut),ve=A(te,vr);if(Ee&&ve&&(Be.rangeCount!==1||Be.anchorNode!==Ee.node||Be.anchorOffset!==Ee.offset||Be.focusNode!==ve.node||Be.focusOffset!==ve.offset)){var Pe=Qe.createRange();Pe.setStart(Ee.node,Ee.offset),Be.removeAllRanges(),Ut>vr?(Be.addRange(Pe),Be.extend(ve.node,ve.offset)):(Pe.setEnd(ve.node,ve.offset),Be.addRange(Pe))}}}}for(Qe=[],Be=te;Be=Be.parentNode;)Be.nodeType===1&&Qe.push({element:Be,left:Be.scrollLeft,top:Be.scrollTop});for(typeof te.focus=="function"&&te.focus(),te=0;te<Qe.length;te++){var Ke=Qe[te];Ke.element.scrollLeft=Ke.left,Ke.element.scrollTop=Ke.top}}N1=!!c_,f_=c_=null}finally{Xn=C,_e.p=w,ye.T=g}}s.current=u,Hi=2}}function vN(){if(Hi===2){Hi=0;var s=ic,u=Zd,g=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||g){g=ye.T,ye.T=null;var w=_e.p;_e.p=2;var C=Xn;Xn|=4;try{K3(s,u.alternate,u)}finally{Xn=C,_e.p=w,ye.T=g}}Hi=3}}function xN(){if(Hi===4||Hi===3){Hi=0,Fs();var s=ic,u=Zd,g=nu,w=aN;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Hi=5:(Hi=0,Zd=ic=null,bN(s,s.pendingLanes));var C=s.pendingLanes;if(C===0&&(rc=null),ci(g),u=u.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(Tn,u,void 0,(u.current.flags&128)===128)}catch{}if(w!==null){u=ye.T,C=_e.p,_e.p=2,ye.T=null;try{for(var R=s.onRecoverableError,U=0;U<w.length;U++){var te=w[U];R(te.value,{componentStack:te.stack})}}finally{ye.T=u,_e.p=C}}(nu&3)!==0&&v1(),ul(s),C=s.pendingLanes,(g&261930)!==0&&(C&42)!==0?s===Qw?fg++:(fg=0,Qw=s):fg=0,dg(0)}}function bN(s,u){(s.pooledCacheLanes&=u)===0&&(u=s.pooledCache,u!=null&&(s.pooledCache=null,Km(u)))}function v1(){return yN(),vN(),xN(),wN()}function wN(){if(Hi!==5)return!1;var s=ic,u=Yw;Yw=0;var g=ci(nu),w=ye.T,C=_e.p;try{_e.p=32>g?32:g,ye.T=null,g=Xw,Xw=null;var R=ic,U=nu;if(Hi=0,Zd=ic=null,nu=0,(Xn&6)!==0)throw Error(r(331));var te=Xn;if(Xn|=4,nN(R.current),J3(R,R.current,U,g),Xn=te,dg(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(Tn,R)}catch{}return!0}finally{_e.p=C,ye.T=w,bN(s,u)}}function _N(s,u,g){u=fo(g,u),u=Ow(s.stateNode,u,2),s=Qu(s,u,2),s!==null&&(Ui(s,2),ul(s))}function or(s,u,g){if(s.tag===3)_N(s,s,g);else for(;u!==null;){if(u.tag===3){_N(u,s,g);break}else if(u.tag===1){var w=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(rc===null||!rc.has(w))){s=fo(g,s),g=E3(2),w=Qu(u,g,2),w!==null&&(A3(g,w,u,s),Ui(w,2),ul(w));break}}u=u.return}}function e_(s,u,g){var w=s.pingCache;if(w===null){w=s.pingCache=new jq;var C=new Set;w.set(u,C)}else C=w.get(u),C===void 0&&(C=new Set,w.set(u,C));C.has(g)||(Kw=!0,C.add(g),s=zq.bind(null,s,u,g),u.then(s,s))}function zq(s,u,g){var w=s.pingCache;w!==null&&w.delete(u),s.pingedLanes|=s.suspendedLanes&g,s.warmLanes&=~g,Cr===s&&(Pn&g)===g&&(mi===4||mi===3&&(Pn&62914560)===Pn&&300>hr()-d1?(Xn&2)===0&&Jd(s,0):Ww|=g,Qd===Pn&&(Qd=0)),ul(s)}function EN(s,u){u===0&&(u=ii()),s=tr(s,u),s!==null&&(Ui(s,u),ul(s))}function Uq(s){var u=s.memoizedState,g=0;u!==null&&(g=u.retryLane),EN(s,g)}function qq(s,u){var g=0;switch(s.tag){case 31:case 13:var w=s.stateNode,C=s.memoizedState;C!==null&&(g=C.retryLane);break;case 19:w=s.stateNode;break;case 22:w=s.stateNode._retryCache;break;default:throw Error(r(314))}w!==null&&w.delete(u),EN(s,g)}function Gq(s,u){return Mn(s,u)}var x1=null,th=null,t_=!1,b1=!1,n_=!1,sc=0;function ul(s){s!==th&&s.next===null&&(th===null?x1=th=s:th=th.next=s),b1=!0,t_||(t_=!0,Kq())}function dg(s,u){if(!n_&&b1){n_=!0;do for(var g=!1,w=x1;w!==null;){if(s!==0){var C=w.pendingLanes;if(C===0)var R=0;else{var U=w.suspendedLanes,te=w.pingedLanes;R=(1<<31-Ze(42|s)+1)-1,R&=C&~(U&~te),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(g=!0,IN(w,R))}else R=Pn,R=Fa(w,w===Cr?R:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(R&3)===0||Er(w,R)||(g=!0,IN(w,R));w=w.next}while(g);n_=!1}}function Hq(){AN()}function AN(){b1=t_=!1;var s=0;sc!==0&&nG()&&(s=sc);for(var u=hr(),g=null,w=x1;w!==null;){var C=w.next,R=SN(w,u);R===0?(w.next=null,g===null?x1=C:g.next=C,C===null&&(th=g)):(g=w,(s!==0||(R&3)!==0)&&(b1=!0)),w=C}Hi!==0&&Hi!==5||dg(s),sc!==0&&(sc=0)}function SN(s,u){for(var g=s.suspendedLanes,w=s.pingedLanes,C=s.expirationTimes,R=s.pendingLanes&-62914561;0<R;){var U=31-Ze(R),te=1<<U,pe=C[U];pe===-1?((te&g)===0||(te&w)!==0)&&(C[U]=Ll(te,u)):pe<=u&&(s.expiredLanes|=te),R&=~te}if(u=Cr,g=Pn,g=Fa(s,s===u?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),w=s.callbackNode,g===0||s===u&&(sr===2||sr===9)||s.cancelPendingCommit!==null)return w!==null&&w!==null&&mt(w),s.callbackNode=null,s.callbackPriority=0;if((g&3)===0||Er(s,g)){if(u=g&-g,u===s.callbackPriority)return u;switch(w!==null&&mt(w),ci(g)){case 2:case 8:g=Ba;break;case 32:g=bi;break;case 268435456:g=Ro;break;default:g=bi}return w=TN.bind(null,s),g=Mn(g,w),s.callbackPriority=u,s.callbackNode=g,u}return w!==null&&w!==null&&mt(w),s.callbackPriority=2,s.callbackNode=null,2}function TN(s,u){if(Hi!==0&&Hi!==5)return s.callbackNode=null,s.callbackPriority=0,null;var g=s.callbackNode;if(v1()&&s.callbackNode!==g)return null;var w=Pn;return w=Fa(s,s===Cr?w:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),w===0?null:(oN(s,w,u),SN(s,hr()),s.callbackNode!=null&&s.callbackNode===g?TN.bind(null,s):null)}function IN(s,u){if(v1())return null;oN(s,u,!0)}function Kq(){iG(function(){(Xn&6)!==0?Mn($n,Hq):AN()})}function r_(){if(sc===0){var s=Vd;s===0&&(s=ct,ct<<=1,(ct&261888)===0&&(ct=256)),sc=s}return sc}function CN(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:wa(""+s)}function ON(s,u){var g=u.ownerDocument.createElement("input");return g.name=u.name,g.value=u.value,s.id&&g.setAttribute("form",s.id),u.parentNode.insertBefore(g,u),s=new FormData(s),g.parentNode.removeChild(g),s}function Wq(s,u,g,w,C){if(u==="submit"&&g&&g.stateNode===C){var R=CN((C[gn]||null).action),U=w.submitter;U&&(u=(u=U[gn]||null)?CN(u.formAction):U.getAttribute("formAction"),u!==null&&(R=u,U=null));var te=new Ir("action","action",null,w,C);s.push({event:te,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(sc!==0){var pe=U?ON(C,U):new FormData(C);Ew(g,{pending:!0,data:pe,method:C.method,action:R},null,pe)}}else typeof R=="function"&&(te.preventDefault(),pe=U?ON(C,U):new FormData(C),Ew(g,{pending:!0,data:pe,method:C.method,action:R},R,pe))},currentTarget:C}]})}}for(var i_=0;i_<gt.length;i_++){var a_=gt[i_],$q=a_.toLowerCase(),Yq=a_[0].toUpperCase()+a_.slice(1);it($q,"on"+Yq)}it(Ce,"onAnimationEnd"),it(be,"onAnimationIteration"),it(Me,"onAnimationStart"),it("dblclick","onDoubleClick"),it("focusin","onFocus"),it("focusout","onBlur"),it(He,"onTransitionRun"),it(st,"onTransitionStart"),it(ut,"onTransitionCancel"),it(Je,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),In("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),In("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),In("onBeforeInput",["compositionend","keypress","textInput","paste"]),In("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),In("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),In("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hg));function NN(s,u){u=(u&4)!==0;for(var g=0;g<s.length;g++){var w=s[g],C=w.event;w=w.listeners;e:{var R=void 0;if(u)for(var U=w.length-1;0<=U;U--){var te=w[U],pe=te.instance,Re=te.currentTarget;if(te=te.listener,pe!==R&&C.isPropagationStopped())break e;R=te,C.currentTarget=Re;try{R(C)}catch(Ue){bt(Ue)}C.currentTarget=null,R=pe}else for(U=0;U<w.length;U++){if(te=w[U],pe=te.instance,Re=te.currentTarget,te=te.listener,pe!==R&&C.isPropagationStopped())break e;R=te,C.currentTarget=Re;try{R(C)}catch(Ue){bt(Ue)}C.currentTarget=null,R=pe}}}}function On(s,u){var g=u[Va];g===void 0&&(g=u[Va]=new Set);var w=s+"__bubble";g.has(w)||(PN(u,s,2,!1),g.add(w))}function s_(s,u,g){var w=0;u&&(w|=4),PN(g,s,w,u)}var w1="_reactListening"+Math.random().toString(36).slice(2);function o_(s){if(!s[w1]){s[w1]=!0,Ge.forEach(function(g){g!=="selectionchange"&&(Xq.has(g)||s_(g,!1,s),s_(g,!0,s))});var u=s.nodeType===9?s:s.ownerDocument;u===null||u[w1]||(u[w1]=!0,s_("selectionchange",!1,u))}}function PN(s,u,g,w){switch(sP(u)){case 2:var C=AG;break;case 8:C=SG;break;default:C=__}g=C.bind(null,u,g,s),C=void 0,!Do||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(C=!0),w?C!==void 0?s.addEventListener(u,g,{capture:!0,passive:C}):s.addEventListener(u,g,!0):C!==void 0?s.addEventListener(u,g,{passive:C}):s.addEventListener(u,g,!1)}function l_(s,u,g,w,C){var R=w;if((u&1)===0&&(u&2)===0&&w!==null)e:for(;;){if(w===null)return;var U=w.tag;if(U===3||U===4){var te=w.stateNode.containerInfo;if(te===C)break;if(U===4)for(U=w.return;U!==null;){var pe=U.tag;if((pe===3||pe===4)&&U.stateNode.containerInfo===C)return;U=U.return}for(;te!==null;){if(U=Qn(te),U===null)return;if(pe=U.tag,pe===5||pe===6||pe===26||pe===27){w=R=U;continue e}te=te.parentNode}}w=w.return}za(function(){var Re=R,Ue=_a(g),Qe=[];e:{var je=vt.get(s);if(je!==void 0){var Be=Ir,Ct=s;switch(s){case"keypress":if(Sa(g)===0)break e;case"keydown":case"keyup":Be=xs;break;case"focusin":Ct="focus",Be=vs;break;case"focusout":Ct="blur",Be=vs;break;case"beforeblur":case"afterblur":Be=vs;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=En;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=uo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=B;break;case Ce:case be:case Me:Be=Yt;break;case Je:Be=ie;break;case"scroll":case"scrollend":Be=Us;break;case"wheel":Be=Le;break;case"copy":case"cut":case"paste":Be=Ha;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=pn;break;case"toggle":case"beforetoggle":Be=qt}var Ut=(u&4)!==0,vr=!Ut&&(s==="scroll"||s==="scrollend"),Ee=Ut?je!==null?je+"Capture":null:je;Ut=[];for(var ve=Re,Pe;ve!==null;){var Ke=ve;if(Pe=Ke.stateNode,Ke=Ke.tag,Ke!==5&&Ke!==26&&Ke!==27||Pe===null||Ee===null||(Ke=Lt(ve,Ee),Ke!=null&&Ut.push(mg(ve,Ke,Pe))),vr)break;ve=ve.return}0<Ut.length&&(je=new Be(je,Ct,null,g,Ue),Qe.push({event:je,listeners:Ut}))}}if((u&7)===0){e:{if(je=s==="mouseover"||s==="pointerover",Be=s==="mouseout"||s==="pointerout",je&&g!==na&&(Ct=g.relatedTarget||g.fromElement)&&(Qn(Ct)||Ct[Nr]))break e;if((Be||je)&&(je=Ue.window===Ue?Ue:(je=Ue.ownerDocument)?je.defaultView||je.parentWindow:window,Be?(Ct=g.relatedTarget||g.toElement,Be=Re,Ct=Ct?Qn(Ct):null,Ct!==null&&(vr=a(Ct),Ut=Ct.tag,Ct!==vr||Ut!==5&&Ut!==27&&Ut!==6)&&(Ct=null)):(Be=null,Ct=Re),Be!==Ct)){if(Ut=En,Ke="onMouseLeave",Ee="onMouseEnter",ve="mouse",(s==="pointerout"||s==="pointerover")&&(Ut=pn,Ke="onPointerLeave",Ee="onPointerEnter",ve="pointer"),vr=Be==null?je:$r(Be),Pe=Ct==null?je:$r(Ct),je=new Ut(Ke,ve+"leave",Be,g,Ue),je.target=vr,je.relatedTarget=Pe,Ke=null,Qn(Ue)===Re&&(Ut=new Ut(Ee,ve+"enter",Ct,g,Ue),Ut.target=Pe,Ut.relatedTarget=vr,Ke=Ut),vr=Ke,Be&&Ct)t:{for(Ut=Qq,Ee=Be,ve=Ct,Pe=0,Ke=Ee;Ke;Ke=Ut(Ke))Pe++;Ke=0;for(var Ft=ve;Ft;Ft=Ut(Ft))Ke++;for(;0<Pe-Ke;)Ee=Ut(Ee),Pe--;for(;0<Ke-Pe;)ve=Ut(ve),Ke--;for(;Pe--;){if(Ee===ve||ve!==null&&Ee===ve.alternate){Ut=Ee;break t}Ee=Ut(Ee),ve=Ut(ve)}Ut=null}else Ut=null;Be!==null&&RN(Qe,je,Be,Ut,!1),Ct!==null&&vr!==null&&RN(Qe,vr,Ct,Ut,!0)}}e:{if(je=Re?$r(Re):window,Be=je.nodeName&&je.nodeName.toLowerCase(),Be==="select"||Be==="input"&&je.type==="file")var qn=sa;else if(Vl(je))if(ws)qn=y;else{qn=c;var Dt=o}else Be=je.nodeName,!Be||Be.toLowerCase()!=="input"||je.type!=="checkbox"&&je.type!=="radio"?Re&&zn(Re.elementType)&&(qn=sa):qn=h;if(qn&&(qn=qn(s,Re))){$a(Qe,qn,g,Ue);break e}Dt&&Dt(s,je,Re),s==="focusout"&&Re&&je.type==="number"&&Re.memoizedProps.value!=null&&ce(je,"number",je.value)}switch(Dt=Re?$r(Re):window,s){case"focusin":(Vl(Dt)||Dt.contentEditable==="true")&&(q=Dt,Q=Re,re=null);break;case"focusout":re=Q=q=null;break;case"mousedown":ne=!0;break;case"contextmenu":case"mouseup":case"dragend":ne=!1,le(Qe,g,Ue);break;case"selectionchange":if(F)break;case"keydown":case"keyup":le(Qe,g,Ue)}var hn;if(bn)e:{switch(s){case"compositionstart":var Rn="onCompositionStart";break e;case"compositionend":Rn="onCompositionEnd";break e;case"compositionupdate":Rn="onCompositionUpdate";break e}Rn=void 0}else Mo?co(s,g)&&(Rn="onCompositionEnd"):s==="keydown"&&g.keyCode===229&&(Rn="onCompositionStart");Rn&&(Wa&&g.locale!=="ko"&&(Mo||Rn!=="onCompositionStart"?Rn==="onCompositionEnd"&&Mo&&(hn=Aa()):(Ea=Ue,Ua="value"in Ea?Ea.value:Ea.textContent,Mo=!0)),Dt=_1(Re,Rn),0<Dt.length&&(Rn=new Ka(Rn,s,null,g,Ue),Qe.push({event:Rn,listeners:Dt}),hn?Rn.data=hn:(hn=bs(g),hn!==null&&(Rn.data=hn)))),(hn=Ia?qs(s,g):qu(s,g))&&(Rn=_1(Re,"onBeforeInput"),0<Rn.length&&(Dt=new Ka("onBeforeInput","beforeinput",null,g,Ue),Qe.push({event:Dt,listeners:Rn}),Dt.data=hn)),Wq(Qe,s,Re,g,Ue)}NN(Qe,u)})}function mg(s,u,g){return{instance:s,listener:u,currentTarget:g}}function _1(s,u){for(var g=u+"Capture",w=[];s!==null;){var C=s,R=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||R===null||(C=Lt(s,g),C!=null&&w.unshift(mg(s,C,R)),C=Lt(s,u),C!=null&&w.push(mg(s,C,R))),s.tag===3)return w;s=s.return}return[]}function Qq(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function RN(s,u,g,w,C){for(var R=u._reactName,U=[];g!==null&&g!==w;){var te=g,pe=te.alternate,Re=te.stateNode;if(te=te.tag,pe!==null&&pe===w)break;te!==5&&te!==26&&te!==27||Re===null||(pe=Re,C?(Re=Lt(g,R),Re!=null&&U.unshift(mg(g,Re,pe))):C||(Re=Lt(g,R),Re!=null&&U.push(mg(g,Re,pe)))),g=g.return}U.length!==0&&s.push({event:u,listeners:U})}var Zq=/\r\n?/g,Jq=/\u0000|\uFFFD/g;function DN(s){return(typeof s=="string"?s:""+s).replace(Zq,`
`).replace(Jq,"")}function kN(s,u){return u=DN(u),DN(s)===u}function yr(s,u,g,w,C,R){switch(g){case"children":typeof w=="string"?u==="body"||u==="textarea"&&w===""||Gi(s,w):(typeof w=="number"||typeof w=="bigint")&&u!=="body"&&Gi(s,""+w);break;case"className":Ri(s,"class",w);break;case"tabIndex":Ri(s,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Ri(s,g,w);break;case"style":Nt(s,w,R);break;case"data":if(u!=="object"){Ri(s,"data",w);break}case"src":case"href":if(w===""&&(u!=="a"||g!=="href")){s.removeAttribute(g);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){s.removeAttribute(g);break}w=wa(""+w),s.setAttribute(g,w);break;case"action":case"formAction":if(typeof w=="function"){s.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(g==="formAction"?(u!=="input"&&yr(s,u,"name",C.name,C,null),yr(s,u,"formEncType",C.formEncType,C,null),yr(s,u,"formMethod",C.formMethod,C,null),yr(s,u,"formTarget",C.formTarget,C,null)):(yr(s,u,"encType",C.encType,C,null),yr(s,u,"method",C.method,C,null),yr(s,u,"target",C.target,C,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){s.removeAttribute(g);break}w=wa(""+w),s.setAttribute(g,w);break;case"onClick":w!=null&&(s.onclick=_i);break;case"onScroll":w!=null&&On("scroll",s);break;case"onScrollEnd":w!=null&&On("scrollend",s);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(g=w.__html,g!=null){if(C.children!=null)throw Error(r(60));s.innerHTML=g}}break;case"multiple":s.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":s.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){s.removeAttribute("xlink:href");break}g=wa(""+w),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(g,""+w):s.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(g,""):s.removeAttribute(g);break;case"capture":case"download":w===!0?s.setAttribute(g,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(g,w):s.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?s.setAttribute(g,w):s.removeAttribute(g);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?s.removeAttribute(g):s.setAttribute(g,w);break;case"popover":On("beforetoggle",s),On("toggle",s),Qt(s,"popover",w);break;case"xlinkActuate":Sr(s,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":Sr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":Sr(s,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":Sr(s,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":Sr(s,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":Sr(s,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":Sr(s,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":Sr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":Sr(s,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":Qt(s,"is",w);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=Fl.get(g)||g,Qt(s,g,w))}}function u_(s,u,g,w,C,R){switch(g){case"style":Nt(s,w,R);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(g=w.__html,g!=null){if(C.children!=null)throw Error(r(60));s.innerHTML=g}}break;case"children":typeof w=="string"?Gi(s,w):(typeof w=="number"||typeof w=="bigint")&&Gi(s,""+w);break;case"onScroll":w!=null&&On("scroll",s);break;case"onScrollEnd":w!=null&&On("scrollend",s);break;case"onClick":w!=null&&(s.onclick=_i);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lo.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(C=g.endsWith("Capture"),u=g.slice(2,C?g.length-7:void 0),R=s[gn]||null,R=R!=null?R[g]:null,typeof R=="function"&&s.removeEventListener(u,R,C),typeof w=="function")){typeof R!="function"&&R!==null&&(g in s?s[g]=null:s.hasAttribute(g)&&s.removeAttribute(g)),s.addEventListener(u,w,C);break e}g in s?s[g]=w:w===!0?s.setAttribute(g,""):Qt(s,g,w)}}}function Da(s,u,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":On("error",s),On("load",s);var w=!1,C=!1,R;for(R in g)if(g.hasOwnProperty(R)){var U=g[R];if(U!=null)switch(R){case"src":w=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:yr(s,u,R,U,g,null)}}C&&yr(s,u,"srcSet",g.srcSet,g,null),w&&yr(s,u,"src",g.src,g,null);return;case"input":On("invalid",s);var te=R=U=C=null,pe=null,Re=null;for(w in g)if(g.hasOwnProperty(w)){var Ue=g[w];if(Ue!=null)switch(w){case"name":C=Ue;break;case"type":U=Ue;break;case"checked":pe=Ue;break;case"defaultChecked":Re=Ue;break;case"value":R=Ue;break;case"defaultValue":te=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(r(137,u));break;default:yr(s,u,w,Ue,g,null)}}Te(s,R,te,pe,Re,U,C,!1);return;case"select":On("invalid",s),w=U=R=null;for(C in g)if(g.hasOwnProperty(C)&&(te=g[C],te!=null))switch(C){case"value":R=te;break;case"defaultValue":U=te;break;case"multiple":w=te;default:yr(s,u,C,te,g,null)}u=R,g=U,s.multiple=!!w,u!=null?_t(s,!!w,u,!1):g!=null&&_t(s,!!w,g,!0);return;case"textarea":On("invalid",s),R=C=w=null;for(U in g)if(g.hasOwnProperty(U)&&(te=g[U],te!=null))switch(U){case"value":w=te;break;case"defaultValue":C=te;break;case"children":R=te;break;case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(91));break;default:yr(s,u,U,te,g,null)}Rr(s,w,C,R);return;case"option":for(pe in g)g.hasOwnProperty(pe)&&(w=g[pe],w!=null)&&(pe==="selected"?s.selected=w&&typeof w!="function"&&typeof w!="symbol":yr(s,u,pe,w,g,null));return;case"dialog":On("beforetoggle",s),On("toggle",s),On("cancel",s),On("close",s);break;case"iframe":case"object":On("load",s);break;case"video":case"audio":for(w=0;w<hg.length;w++)On(hg[w],s);break;case"image":On("error",s),On("load",s);break;case"details":On("toggle",s);break;case"embed":case"source":case"link":On("error",s),On("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Re in g)if(g.hasOwnProperty(Re)&&(w=g[Re],w!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:yr(s,u,Re,w,g,null)}return;default:if(zn(u)){for(Ue in g)g.hasOwnProperty(Ue)&&(w=g[Ue],w!==void 0&&u_(s,u,Ue,w,g,void 0));return}}for(te in g)g.hasOwnProperty(te)&&(w=g[te],w!=null&&yr(s,u,te,w,g,null))}function eG(s,u,g,w){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,R=null,U=null,te=null,pe=null,Re=null,Ue=null;for(Be in g){var Qe=g[Be];if(g.hasOwnProperty(Be)&&Qe!=null)switch(Be){case"checked":break;case"value":break;case"defaultValue":pe=Qe;default:w.hasOwnProperty(Be)||yr(s,u,Be,null,w,Qe)}}for(var je in w){var Be=w[je];if(Qe=g[je],w.hasOwnProperty(je)&&(Be!=null||Qe!=null))switch(je){case"type":R=Be;break;case"name":C=Be;break;case"checked":Re=Be;break;case"defaultChecked":Ue=Be;break;case"value":U=Be;break;case"defaultValue":te=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(r(137,u));break;default:Be!==Qe&&yr(s,u,je,Be,w,Qe)}}Zn(s,U,te,pe,Re,Ue,R,C);return;case"select":Be=U=te=je=null;for(R in g)if(pe=g[R],g.hasOwnProperty(R)&&pe!=null)switch(R){case"value":break;case"multiple":Be=pe;default:w.hasOwnProperty(R)||yr(s,u,R,null,w,pe)}for(C in w)if(R=w[C],pe=g[C],w.hasOwnProperty(C)&&(R!=null||pe!=null))switch(C){case"value":je=R;break;case"defaultValue":te=R;break;case"multiple":U=R;default:R!==pe&&yr(s,u,C,R,w,pe)}u=te,g=U,w=Be,je!=null?_t(s,!!g,je,!1):!!w!=!!g&&(u!=null?_t(s,!!g,u,!0):_t(s,!!g,g?[]:"",!1));return;case"textarea":Be=je=null;for(te in g)if(C=g[te],g.hasOwnProperty(te)&&C!=null&&!w.hasOwnProperty(te))switch(te){case"value":break;case"children":break;default:yr(s,u,te,null,w,C)}for(U in w)if(C=w[U],R=g[U],w.hasOwnProperty(U)&&(C!=null||R!=null))switch(U){case"value":je=C;break;case"defaultValue":Be=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==R&&yr(s,u,U,C,w,R)}Pr(s,je,Be);return;case"option":for(var Ct in g)je=g[Ct],g.hasOwnProperty(Ct)&&je!=null&&!w.hasOwnProperty(Ct)&&(Ct==="selected"?s.selected=!1:yr(s,u,Ct,null,w,je));for(pe in w)je=w[pe],Be=g[pe],w.hasOwnProperty(pe)&&je!==Be&&(je!=null||Be!=null)&&(pe==="selected"?s.selected=je&&typeof je!="function"&&typeof je!="symbol":yr(s,u,pe,je,w,Be));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ut in g)je=g[Ut],g.hasOwnProperty(Ut)&&je!=null&&!w.hasOwnProperty(Ut)&&yr(s,u,Ut,null,w,je);for(Re in w)if(je=w[Re],Be=g[Re],w.hasOwnProperty(Re)&&je!==Be&&(je!=null||Be!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(r(137,u));break;default:yr(s,u,Re,je,w,Be)}return;default:if(zn(u)){for(var vr in g)je=g[vr],g.hasOwnProperty(vr)&&je!==void 0&&!w.hasOwnProperty(vr)&&u_(s,u,vr,void 0,w,je);for(Ue in w)je=w[Ue],Be=g[Ue],!w.hasOwnProperty(Ue)||je===Be||je===void 0&&Be===void 0||u_(s,u,Ue,je,w,Be);return}}for(var Ee in g)je=g[Ee],g.hasOwnProperty(Ee)&&je!=null&&!w.hasOwnProperty(Ee)&&yr(s,u,Ee,null,w,je);for(Qe in w)je=w[Qe],Be=g[Qe],!w.hasOwnProperty(Qe)||je===Be||je==null&&Be==null||yr(s,u,Qe,je,w,Be)}function MN(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tG(){if(typeof performance.getEntriesByType=="function"){for(var s=0,u=0,g=performance.getEntriesByType("resource"),w=0;w<g.length;w++){var C=g[w],R=C.transferSize,U=C.initiatorType,te=C.duration;if(R&&te&&MN(U)){for(U=0,te=C.responseEnd,w+=1;w<g.length;w++){var pe=g[w],Re=pe.startTime;if(Re>te)break;var Ue=pe.transferSize,Qe=pe.initiatorType;Ue&&MN(Qe)&&(pe=pe.responseEnd,U+=Ue*(pe<te?1:(te-Re)/(pe-Re)))}if(--w,u+=8*(R+U)/(C.duration/1e3),s++,10<s)break}}if(0<s)return u/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var c_=null,f_=null;function E1(s){return s.nodeType===9?s:s.ownerDocument}function jN(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function LN(s,u){if(s===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&u==="foreignObject"?0:s}function d_(s,u){return s==="textarea"||s==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var h_=null;function nG(){var s=window.event;return s&&s.type==="popstate"?s===h_?!1:(h_=s,!0):(h_=null,!1)}var BN=typeof setTimeout=="function"?setTimeout:void 0,rG=typeof clearTimeout=="function"?clearTimeout:void 0,FN=typeof Promise=="function"?Promise:void 0,iG=typeof queueMicrotask=="function"?queueMicrotask:typeof FN<"u"?function(s){return FN.resolve(null).then(s).catch(aG)}:BN;function aG(s){setTimeout(function(){throw s})}function oc(s){return s==="head"}function VN(s,u){var g=u,w=0;do{var C=g.nextSibling;if(s.removeChild(g),C&&C.nodeType===8)if(g=C.data,g==="/$"||g==="/&"){if(w===0){s.removeChild(C),ah(u);return}w--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")w++;else if(g==="html")gg(s.ownerDocument.documentElement);else if(g==="head"){g=s.ownerDocument.head,gg(g);for(var R=g.firstChild;R;){var U=R.nextSibling,te=R.nodeName;R[Ni]||te==="SCRIPT"||te==="STYLE"||te==="LINK"&&R.rel.toLowerCase()==="stylesheet"||g.removeChild(R),R=U}}else g==="body"&&gg(s.ownerDocument.body);g=C}while(g);ah(u)}function zN(s,u){var g=s;s=0;do{var w=g.nextSibling;if(g.nodeType===1?u?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(u?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),w&&w.nodeType===8)if(g=w.data,g==="/$"){if(s===0)break;s--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||s++;g=w}while(g)}function m_(s){var u=s.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var g=u;switch(u=u.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":m_(g),Pi(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}s.removeChild(g)}}function sG(s,u,g,w){for(;s.nodeType===1;){var C=g;if(s.nodeName.toLowerCase()!==u.toLowerCase()){if(!w&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(w){if(!s[Ni])switch(u){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(R=s.getAttribute("rel"),R==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(R!==C.rel||s.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||s.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||s.getAttribute("title")!==(C.title==null?null:C.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(R=s.getAttribute("src"),(R!==(C.src==null?null:C.src)||s.getAttribute("type")!==(C.type==null?null:C.type)||s.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&R&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(u==="input"&&s.type==="hidden"){var R=C.name==null?null:""+C.name;if(C.type==="hidden"&&s.getAttribute("name")===R)return s}else return s;if(s=yo(s.nextSibling),s===null)break}return null}function oG(s,u,g){if(u==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!g||(s=yo(s.nextSibling),s===null))return null;return s}function UN(s,u){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=yo(s.nextSibling),s===null))return null;return s}function g_(s){return s.data==="$?"||s.data==="$~"}function p_(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function lG(s,u){var g=s.ownerDocument;if(s.data==="$~")s._reactRetry=u;else if(s.data!=="$?"||g.readyState!=="loading")u();else{var w=function(){u(),g.removeEventListener("DOMContentLoaded",w)};g.addEventListener("DOMContentLoaded",w),s._reactRetry=w}}function yo(s){for(;s!=null;s=s.nextSibling){var u=s.nodeType;if(u===1||u===3)break;if(u===8){if(u=s.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return s}var y_=null;function qN(s){s=s.nextSibling;for(var u=0;s;){if(s.nodeType===8){var g=s.data;if(g==="/$"||g==="/&"){if(u===0)return yo(s.nextSibling);u--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||u++}s=s.nextSibling}return null}function GN(s){s=s.previousSibling;for(var u=0;s;){if(s.nodeType===8){var g=s.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(u===0)return s;u--}else g!=="/$"&&g!=="/&"||u++}s=s.previousSibling}return null}function HN(s,u,g){switch(u=E1(g),s){case"html":if(s=u.documentElement,!s)throw Error(r(452));return s;case"head":if(s=u.head,!s)throw Error(r(453));return s;case"body":if(s=u.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function gg(s){for(var u=s.attributes;u.length;)s.removeAttributeNode(u[0]);Pi(s)}var vo=new Map,KN=new Set;function A1(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ru=_e.d;_e.d={f:uG,r:cG,D:fG,C:dG,L:hG,m:mG,X:pG,S:gG,M:yG};function uG(){var s=ru.f(),u=g1();return s||u}function cG(s){var u=Mt(s);u!==null&&u.tag===5&&u.type==="form"?u3(u):ru.r(s)}var nh=typeof document>"u"?null:document;function WN(s,u,g){var w=nh;if(w&&typeof u=="string"&&u){var C=$t(u);C='link[rel="'+s+'"][href="'+C+'"]',typeof g=="string"&&(C+='[crossorigin="'+g+'"]'),KN.has(C)||(KN.add(C),s={rel:s,crossOrigin:g,href:u},w.querySelector(C)===null&&(u=w.createElement("link"),Da(u,"link",s),Ar(u),w.head.appendChild(u)))}}function fG(s){ru.D(s),WN("dns-prefetch",s,null)}function dG(s,u){ru.C(s,u),WN("preconnect",s,u)}function hG(s,u,g){ru.L(s,u,g);var w=nh;if(w&&s&&u){var C='link[rel="preload"][as="'+$t(u)+'"]';u==="image"&&g&&g.imageSrcSet?(C+='[imagesrcset="'+$t(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(C+='[imagesizes="'+$t(g.imageSizes)+'"]')):C+='[href="'+$t(s)+'"]';var R=C;switch(u){case"style":R=rh(s);break;case"script":R=ih(s)}vo.has(R)||(s=_({rel:"preload",href:u==="image"&&g&&g.imageSrcSet?void 0:s,as:u},g),vo.set(R,s),w.querySelector(C)!==null||u==="style"&&w.querySelector(pg(R))||u==="script"&&w.querySelector(yg(R))||(u=w.createElement("link"),Da(u,"link",s),Ar(u),w.head.appendChild(u)))}}function mG(s,u){ru.m(s,u);var g=nh;if(g&&s){var w=u&&typeof u.as=="string"?u.as:"script",C='link[rel="modulepreload"][as="'+$t(w)+'"][href="'+$t(s)+'"]',R=C;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=ih(s)}if(!vo.has(R)&&(s=_({rel:"modulepreload",href:s},u),vo.set(R,s),g.querySelector(C)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(yg(R)))return}w=g.createElement("link"),Da(w,"link",s),Ar(w),g.head.appendChild(w)}}}function gG(s,u,g){ru.S(s,u,g);var w=nh;if(w&&s){var C=rr(w).hoistableStyles,R=rh(s);u=u||"default";var U=C.get(R);if(!U){var te={loading:0,preload:null};if(U=w.querySelector(pg(R)))te.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":u},g),(g=vo.get(R))&&v_(s,g);var pe=U=w.createElement("link");Ar(pe),Da(pe,"link",s),pe._p=new Promise(function(Re,Ue){pe.onload=Re,pe.onerror=Ue}),pe.addEventListener("load",function(){te.loading|=1}),pe.addEventListener("error",function(){te.loading|=2}),te.loading|=4,S1(U,u,w)}U={type:"stylesheet",instance:U,count:1,state:te},C.set(R,U)}}}function pG(s,u){ru.X(s,u);var g=nh;if(g&&s){var w=rr(g).hoistableScripts,C=ih(s),R=w.get(C);R||(R=g.querySelector(yg(C)),R||(s=_({src:s,async:!0},u),(u=vo.get(C))&&x_(s,u),R=g.createElement("script"),Ar(R),Da(R,"link",s),g.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},w.set(C,R))}}function yG(s,u){ru.M(s,u);var g=nh;if(g&&s){var w=rr(g).hoistableScripts,C=ih(s),R=w.get(C);R||(R=g.querySelector(yg(C)),R||(s=_({src:s,async:!0,type:"module"},u),(u=vo.get(C))&&x_(s,u),R=g.createElement("script"),Ar(R),Da(R,"link",s),g.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},w.set(C,R))}}function $N(s,u,g,w){var C=(C=$e.current)?A1(C):null;if(!C)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(u=rh(g.href),g=rr(C).hoistableStyles,w=g.get(u),w||(w={type:"style",instance:null,count:0,state:null},g.set(u,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){s=rh(g.href);var R=rr(C).hoistableStyles,U=R.get(s);if(U||(C=C.ownerDocument||C,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(s,U),(R=C.querySelector(pg(s)))&&!R._p&&(U.instance=R,U.state.loading=5),vo.has(s)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},vo.set(s,g),R||vG(C,s,g,U.state))),u&&w===null)throw Error(r(528,""));return U}if(u&&w!==null)throw Error(r(529,""));return null;case"script":return u=g.async,g=g.src,typeof g=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=ih(g),g=rr(C).hoistableScripts,w=g.get(u),w||(w={type:"script",instance:null,count:0,state:null},g.set(u,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function rh(s){return'href="'+$t(s)+'"'}function pg(s){return'link[rel="stylesheet"]['+s+"]"}function YN(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function vG(s,u,g,w){s.querySelector('link[rel="preload"][as="style"]['+u+"]")?w.loading=1:(u=s.createElement("link"),w.preload=u,u.addEventListener("load",function(){return w.loading|=1}),u.addEventListener("error",function(){return w.loading|=2}),Da(u,"link",g),Ar(u),s.head.appendChild(u))}function ih(s){return'[src="'+$t(s)+'"]'}function yg(s){return"script[async]"+s}function XN(s,u,g){if(u.count++,u.instance===null)switch(u.type){case"style":var w=s.querySelector('style[data-href~="'+$t(g.href)+'"]');if(w)return u.instance=w,Ar(w),w;var C=_({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return w=(s.ownerDocument||s).createElement("style"),Ar(w),Da(w,"style",C),S1(w,g.precedence,s),u.instance=w;case"stylesheet":C=rh(g.href);var R=s.querySelector(pg(C));if(R)return u.state.loading|=4,u.instance=R,Ar(R),R;w=YN(g),(C=vo.get(C))&&v_(w,C),R=(s.ownerDocument||s).createElement("link"),Ar(R);var U=R;return U._p=new Promise(function(te,pe){U.onload=te,U.onerror=pe}),Da(R,"link",w),u.state.loading|=4,S1(R,g.precedence,s),u.instance=R;case"script":return R=ih(g.src),(C=s.querySelector(yg(R)))?(u.instance=C,Ar(C),C):(w=g,(C=vo.get(R))&&(w=_({},g),x_(w,C)),s=s.ownerDocument||s,C=s.createElement("script"),Ar(C),Da(C,"link",w),s.head.appendChild(C),u.instance=C);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(w=u.instance,u.state.loading|=4,S1(w,g.precedence,s));return u.instance}function S1(s,u,g){for(var w=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=w.length?w[w.length-1]:null,R=C,U=0;U<w.length;U++){var te=w[U];if(te.dataset.precedence===u)R=te;else if(R!==C)break}R?R.parentNode.insertBefore(s,R.nextSibling):(u=g.nodeType===9?g.head:g,u.insertBefore(s,u.firstChild))}function v_(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.title==null&&(s.title=u.title)}function x_(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.integrity==null&&(s.integrity=u.integrity)}var T1=null;function QN(s,u,g){if(T1===null){var w=new Map,C=T1=new Map;C.set(g,w)}else C=T1,w=C.get(g),w||(w=new Map,C.set(g,w));if(w.has(s))return w;for(w.set(s,null),g=g.getElementsByTagName(s),C=0;C<g.length;C++){var R=g[C];if(!(R[Ni]||R[Vn]||s==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var U=R.getAttribute(u)||"";U=s+U;var te=w.get(U);te?te.push(R):w.set(U,[R])}}return w}function ZN(s,u,g){s=s.ownerDocument||s,s.head.insertBefore(g,u==="title"?s.querySelector("head > title"):null)}function xG(s,u,g){if(g===1||u.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;return u.rel==="stylesheet"?(s=u.disabled,typeof u.precedence=="string"&&s==null):!0;case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function JN(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function bG(s,u,g,w){if(g.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var C=rh(w.href),R=u.querySelector(pg(C));if(R){u=R._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(s.count++,s=I1.bind(s),u.then(s,s)),g.state.loading|=4,g.instance=R,Ar(R);return}R=u.ownerDocument||u,w=YN(w),(C=vo.get(C))&&v_(w,C),R=R.createElement("link"),Ar(R);var U=R;U._p=new Promise(function(te,pe){U.onload=te,U.onerror=pe}),Da(R,"link",w),g.instance=R}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(g,u),(u=g.state.preload)&&(g.state.loading&3)===0&&(s.count++,g=I1.bind(s),u.addEventListener("load",g),u.addEventListener("error",g))}}var b_=0;function wG(s,u){return s.stylesheets&&s.count===0&&O1(s,s.stylesheets),0<s.count||0<s.imgCount?function(g){var w=setTimeout(function(){if(s.stylesheets&&O1(s,s.stylesheets),s.unsuspend){var R=s.unsuspend;s.unsuspend=null,R()}},6e4+u);0<s.imgBytes&&b_===0&&(b_=62500*tG());var C=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&O1(s,s.stylesheets),s.unsuspend)){var R=s.unsuspend;s.unsuspend=null,R()}},(s.imgBytes>b_?50:800)+u);return s.unsuspend=g,function(){s.unsuspend=null,clearTimeout(w),clearTimeout(C)}}:null}function I1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)O1(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var C1=null;function O1(s,u){s.stylesheets=null,s.unsuspend!==null&&(s.count++,C1=new Map,u.forEach(_G,s),C1=null,I1.call(s))}function _G(s,u){if(!(u.state.loading&4)){var g=C1.get(s);if(g)var w=g.get(null);else{g=new Map,C1.set(s,g);for(var C=s.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<C.length;R++){var U=C[R];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(g.set(U.dataset.precedence,U),w=U)}w&&g.set(null,w)}C=u.instance,U=C.getAttribute("data-precedence"),R=g.get(U)||w,R===w&&g.set(null,C),g.set(U,C),this.count++,w=I1.bind(this),C.addEventListener("load",w),C.addEventListener("error",w),R?R.parentNode.insertBefore(C,R.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(C,s.firstChild)),u.state.loading|=4}}var vg={$$typeof:K,Provider:null,Consumer:null,_currentValue:qe,_currentValue2:qe,_threadCount:0};function EG(s,u,g,w,C,R,U,te,pe){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hr(0),this.hiddenUpdates=Hr(null),this.identifierPrefix=w,this.onUncaughtError=C,this.onCaughtError=R,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function eP(s,u,g,w,C,R,U,te,pe,Re,Ue,Qe){return s=new EG(s,u,g,U,pe,Re,Ue,Qe,te),u=1,R===!0&&(u|=24),R=Gs(3,null,null,u),s.current=R,R.stateNode=s,u=Jb(),u.refCount++,s.pooledCache=u,u.refCount++,R.memoizedState={element:w,isDehydrated:g,cache:u},rw(R),s}function tP(s){return s?(s=Md,s):Md}function nP(s,u,g,w,C,R){C=tP(C),w.context===null?w.context=C:w.pendingContext=C,w=Xu(u),w.payload={element:g},R=R===void 0?null:R,R!==null&&(w.callback=R),g=Qu(s,w,u),g!==null&&(Is(g,s,u),Xm(g,s,u))}function rP(s,u){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var g=s.retryLane;s.retryLane=g!==0&&g<u?g:u}}function w_(s,u){rP(s,u),(s=s.alternate)&&rP(s,u)}function iP(s){if(s.tag===13||s.tag===31){var u=tr(s,67108864);u!==null&&Is(u,s,67108864),w_(s,67108864)}}function aP(s){if(s.tag===13||s.tag===31){var u=Ys();u=Kr(u);var g=tr(s,u);g!==null&&Is(g,s,u),w_(s,u)}}var N1=!0;function AG(s,u,g,w){var C=ye.T;ye.T=null;var R=_e.p;try{_e.p=2,__(s,u,g,w)}finally{_e.p=R,ye.T=C}}function SG(s,u,g,w){var C=ye.T;ye.T=null;var R=_e.p;try{_e.p=8,__(s,u,g,w)}finally{_e.p=R,ye.T=C}}function __(s,u,g,w){if(N1){var C=E_(w);if(C===null)l_(s,u,w,P1,g),oP(s,w);else if(IG(C,s,u,g,w))w.stopPropagation();else if(oP(s,w),u&4&&-1<TG.indexOf(s)){for(;C!==null;){var R=Mt(C);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var U=ba(R.pendingLanes);if(U!==0){var te=R;for(te.pendingLanes|=2,te.entangledLanes|=2;U;){var pe=1<<31-Ze(U);te.entanglements[1]|=pe,U&=~pe}ul(R),(Xn&6)===0&&(h1=hr()+500,dg(0))}}break;case 31:case 13:te=tr(R,2),te!==null&&Is(te,R,2),g1(),w_(R,2)}if(R=E_(w),R===null&&l_(s,u,w,P1,g),R===C)break;C=R}C!==null&&w.stopPropagation()}else l_(s,u,w,null,g)}}function E_(s){return s=_a(s),A_(s)}var P1=null;function A_(s){if(P1=null,s=Qn(s),s!==null){var u=a(s);if(u===null)s=null;else{var g=u.tag;if(g===13){if(s=l(u),s!==null)return s;s=null}else if(g===31){if(s=f(u),s!==null)return s;s=null}else if(g===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;s=null}else u!==s&&(s=null)}}return P1=s,null}function sP(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xa()){case $n:return 2;case Ba:return 8;case bi:case Lr:return 32;case Ro:return 268435456;default:return 32}default:return 32}}var S_=!1,lc=null,uc=null,cc=null,xg=new Map,bg=new Map,fc=[],TG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oP(s,u){switch(s){case"focusin":case"focusout":lc=null;break;case"dragenter":case"dragleave":uc=null;break;case"mouseover":case"mouseout":cc=null;break;case"pointerover":case"pointerout":xg.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":bg.delete(u.pointerId)}}function wg(s,u,g,w,C,R){return s===null||s.nativeEvent!==R?(s={blockedOn:u,domEventName:g,eventSystemFlags:w,nativeEvent:R,targetContainers:[C]},u!==null&&(u=Mt(u),u!==null&&iP(u)),s):(s.eventSystemFlags|=w,u=s.targetContainers,C!==null&&u.indexOf(C)===-1&&u.push(C),s)}function IG(s,u,g,w,C){switch(u){case"focusin":return lc=wg(lc,s,u,g,w,C),!0;case"dragenter":return uc=wg(uc,s,u,g,w,C),!0;case"mouseover":return cc=wg(cc,s,u,g,w,C),!0;case"pointerover":var R=C.pointerId;return xg.set(R,wg(xg.get(R)||null,s,u,g,w,C)),!0;case"gotpointercapture":return R=C.pointerId,bg.set(R,wg(bg.get(R)||null,s,u,g,w,C)),!0}return!1}function lP(s){var u=Qn(s.target);if(u!==null){var g=a(u);if(g!==null){if(u=g.tag,u===13){if(u=l(g),u!==null){s.blockedOn=u,ft(s.priority,function(){aP(g)});return}}else if(u===31){if(u=f(g),u!==null){s.blockedOn=u,ft(s.priority,function(){aP(g)});return}}else if(u===3&&g.stateNode.current.memoizedState.isDehydrated){s.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}s.blockedOn=null}function R1(s){if(s.blockedOn!==null)return!1;for(var u=s.targetContainers;0<u.length;){var g=E_(s.nativeEvent);if(g===null){g=s.nativeEvent;var w=new g.constructor(g.type,g);na=w,g.target.dispatchEvent(w),na=null}else return u=Mt(g),u!==null&&iP(u),s.blockedOn=g,!1;u.shift()}return!0}function uP(s,u,g){R1(s)&&g.delete(u)}function CG(){S_=!1,lc!==null&&R1(lc)&&(lc=null),uc!==null&&R1(uc)&&(uc=null),cc!==null&&R1(cc)&&(cc=null),xg.forEach(uP),bg.forEach(uP)}function D1(s,u){s.blockedOn===u&&(s.blockedOn=null,S_||(S_=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,CG)))}var k1=null;function cP(s){k1!==s&&(k1=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){k1===s&&(k1=null);for(var u=0;u<s.length;u+=3){var g=s[u],w=s[u+1],C=s[u+2];if(typeof w!="function"){if(A_(w||g)===null)continue;break}var R=Mt(g);R!==null&&(s.splice(u,3),u-=3,Ew(R,{pending:!0,data:C,method:g.method,action:w},w,C))}}))}function ah(s){function u(pe){return D1(pe,s)}lc!==null&&D1(lc,s),uc!==null&&D1(uc,s),cc!==null&&D1(cc,s),xg.forEach(u),bg.forEach(u);for(var g=0;g<fc.length;g++){var w=fc[g];w.blockedOn===s&&(w.blockedOn=null)}for(;0<fc.length&&(g=fc[0],g.blockedOn===null);)lP(g),g.blockedOn===null&&fc.shift();if(g=(s.ownerDocument||s).$$reactFormReplay,g!=null)for(w=0;w<g.length;w+=3){var C=g[w],R=g[w+1],U=C[gn]||null;if(typeof R=="function")U||cP(g);else if(U){var te=null;if(R&&R.hasAttribute("formAction")){if(C=R,U=R[gn]||null)te=U.formAction;else if(A_(C)!==null)continue}else te=U.action;typeof te=="function"?g[w+1]=te:(g.splice(w,3),w-=3),cP(g)}}}function fP(){function s(R){R.canIntercept&&R.info==="react-transition"&&R.intercept({handler:function(){return new Promise(function(U){return C=U})},focusReset:"manual",scroll:"manual"})}function u(){C!==null&&(C(),C=null),w||setTimeout(g,20)}function g(){if(!w&&!navigation.transition){var R=navigation.currentEntry;R&&R.url!=null&&navigation.navigate(R.url,{state:R.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var w=!1,C=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(g,100),function(){w=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),C!==null&&(C(),C=null)}}}function T_(s){this._internalRoot=s}M1.prototype.render=T_.prototype.render=function(s){var u=this._internalRoot;if(u===null)throw Error(r(409));var g=u.current,w=Ys();nP(g,w,s,u,null,null)},M1.prototype.unmount=T_.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var u=s.containerInfo;nP(s.current,2,null,s,null,null),g1(),u[Nr]=null}};function M1(s){this._internalRoot=s}M1.prototype.unstable_scheduleHydration=function(s){if(s){var u=fi();s={blockedOn:null,target:s,priority:u};for(var g=0;g<fc.length&&u!==0&&u<fc[g].priority;g++);fc.splice(g,0,s),g===0&&lP(s)}};var dP=e.version;if(dP!=="19.2.4")throw Error(r(527,dP,"19.2.4"));_e.findDOMNode=function(s){var u=s._reactInternals;if(u===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=p(u),s=s!==null?b(s):null,s=s===null?null:s.stateNode,s};var OG={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ye,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var j1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!j1.isDisabled&&j1.supportsFiber)try{Tn=j1.inject(OG),rt=j1}catch{}}return Eg.createRoot=function(s,u){if(!i(s))throw Error(r(299));var g=!1,w="",C=x3,R=b3,U=w3;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(R=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError)),u=eP(s,1,!1,null,null,g,w,null,C,R,U,fP),s[Nr]=u.current,o_(s),new T_(u)},Eg.hydrateRoot=function(s,u,g){if(!i(s))throw Error(r(299));var w=!1,C="",R=x3,U=b3,te=w3,pe=null;return g!=null&&(g.unstable_strictMode===!0&&(w=!0),g.identifierPrefix!==void 0&&(C=g.identifierPrefix),g.onUncaughtError!==void 0&&(R=g.onUncaughtError),g.onCaughtError!==void 0&&(U=g.onCaughtError),g.onRecoverableError!==void 0&&(te=g.onRecoverableError),g.formState!==void 0&&(pe=g.formState)),u=eP(s,1,!0,u,g??null,w,C,pe,R,U,te,fP),u.context=tP(null),g=u.current,w=Ys(),w=Kr(w),C=Xu(w),C.callback=null,Qu(g,C,w),g=w,u.current.lanes=g,Ui(u,g),ul(u),s[Nr]=u.current,o_(s),new M1(u)},Eg.version="19.2.4",Eg}var _P;function VG(){if(_P)return O_.exports;_P=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),O_.exports=FG(),O_.exports}var zG=VG();const UG="modulepreload",qG=function(t){return"/"+t},EP={},NS=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let p=function(b){return Promise.all(b.map(_=>Promise.resolve(_).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};var l=p;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=f?.nonce||f?.getAttribute("nonce");i=p(n.map(b=>{if(b=qG(b),b in EP)return;EP[b]=!0;const _=b.endsWith(".css"),T=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${T}`))return;const N=document.createElement("link");if(N.rel=_?"stylesheet":UG,_||(N.as="script"),N.crossOrigin="",N.href=b,m&&N.setAttribute("nonce",m),document.head.appendChild(N),_)return new Promise((j,M)=>{N.addEventListener("load",j),N.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${b}`)))})}))}function a(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return i.then(f=>{for(const m of f||[])m.status==="rejected"&&a(m.reason);return e().catch(a)})};var AP="popstate";function GG(t={}){function e(r,i){let{pathname:a,search:l,hash:f}=r.location;return DE("",{pathname:a,search:l,hash:f},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:dp(i)}return KG(e,n,null,t)}function ni(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function So(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HG(){return Math.random().toString(36).substring(2,10)}function SP(t,e){return{usr:t.state,key:t.key,idx:e}}function DE(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?gm(e):e,state:n,key:e&&e.key||r||HG()}}function dp({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function gm(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function KG(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,f="POP",m=null,p=b();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function b(){return(l.state||{idx:null}).idx}function _(){f="POP";let L=b(),z=L==null?null:L-p;p=L,m&&m({action:f,location:M.location,delta:z})}function T(L,z){f="PUSH";let $=DE(M.location,L,z);p=b()+1;let K=SP($,p),X=M.createHref($);try{l.pushState(K,"",X)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;i.location.assign(X)}a&&m&&m({action:f,location:M.location,delta:1})}function N(L,z){f="REPLACE";let $=DE(M.location,L,z);p=b();let K=SP($,p),X=M.createHref($);l.replaceState(K,"",X),a&&m&&m({action:f,location:M.location,delta:0})}function j(L){return WG(L)}let M={get action(){return f},get location(){return t(i,l)},listen(L){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(AP,_),m=L,()=>{i.removeEventListener(AP,_),m=null}},createHref(L){return e(i,L)},createURL:j,encodeLocation(L){let z=j(L);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:T,replace:N,go(L){return l.go(L)}};return M}function WG(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ni(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:dp(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function c5(t,e,n="/"){return $G(t,e,n,!1)}function $G(t,e,n,r){let i=typeof e=="string"?gm(e):e,a=vu(i.pathname||"/",n);if(a==null)return null;let l=f5(t);YG(l);let f=null;for(let m=0;f==null&&m<l.length;++m){let p=sH(a);f=iH(l[m],p,r)}return f}function f5(t,e=[],n=[],r="",i=!1){let a=(l,f,m=i,p)=>{let b={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:f,route:l};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(r)&&m)return;ni(b.relativePath.startsWith(r),`Absolute route path "${b.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(r.length)}let _=mu([r,b.relativePath]),T=n.concat(b);l.children&&l.children.length>0&&(ni(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),f5(l.children,e,T,_,m)),!(l.path==null&&!l.index)&&e.push({path:_,score:nH(_,l.index),routesMeta:T})};return t.forEach((l,f)=>{if(l.path===""||!l.path?.includes("?"))a(l,f);else for(let m of d5(l.path))a(l,f,!0,m)}),e}function d5(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=d5(r.join("/")),f=[];return f.push(...l.map(m=>m===""?a:[a,m].join("/"))),i&&f.push(...l),f.map(m=>t.startsWith("/")&&m===""?"/":m)}function YG(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rH(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var XG=/^:[\w-]+$/,QG=3,ZG=2,JG=1,eH=10,tH=-2,TP=t=>t==="*";function nH(t,e){let n=t.split("/"),r=n.length;return n.some(TP)&&(r+=tH),e&&(r+=ZG),n.filter(i=>!TP(i)).reduce((i,a)=>i+(XG.test(a)?QG:a===""?JG:eH),r)}function rH(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function iH(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",l=[];for(let f=0;f<r.length;++f){let m=r[f],p=f===r.length-1,b=a==="/"?e:e.slice(a.length)||"/",_=zy({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},b),T=m.route;if(!_&&p&&n&&!r[r.length-1].route.index&&(_=zy({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},b)),!_)return null;Object.assign(i,_.params),l.push({params:i,pathname:mu([a,_.pathname]),pathnameBase:cH(mu([a,_.pathnameBase])),route:T}),_.pathnameBase!=="/"&&(a=mu([a,_.pathnameBase]))}return l}function zy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=aH(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),f=i.slice(1);return{params:r.reduce((p,{paramName:b,isOptional:_},T)=>{if(b==="*"){let j=f[T]||"";l=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const N=f[T];return _&&!N?p[b]=void 0:p[b]=(N||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:l,pattern:t}}function aH(t,e=!1,n=!0){So(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,f,m)=>(r.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function sH(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return So(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function vu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var oH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function lH(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?gm(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=IP(n.substring(1),"/"):a=IP(n,e)):a=e,{pathname:a,search:fH(r),hash:dH(i)}}function IP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function D_(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function uH(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function PS(t){let e=uH(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function RS(t,e,n,r=!1){let i;typeof t=="string"?i=gm(t):(i={...t},ni(!i.pathname||!i.pathname.includes("?"),D_("?","pathname","search",i)),ni(!i.pathname||!i.pathname.includes("#"),D_("#","pathname","hash",i)),ni(!i.search||!i.search.includes("#"),D_("#","search","hash",i)));let a=t===""||i.pathname==="",l=a?"/":i.pathname,f;if(l==null)f=n;else{let _=e.length-1;if(!r&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),_-=1;i.pathname=T.join("/")}f=_>=0?e[_]:"/"}let m=lH(i,f),p=l&&l!=="/"&&l.endsWith("/"),b=(a||l===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(p||b)&&(m.pathname+="/"),m}var mu=t=>t.join("/").replace(/\/\/+/g,"/"),cH=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fH=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dH=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,hH=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function mH(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function gH(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var h5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function m5(t,e){let n=t;if(typeof n!="string"||!oH.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(h5)try{let a=new URL(window.location.href),l=n.startsWith("//")?new URL(a.protocol+n):new URL(n),f=vu(l.pathname,e);l.origin===a.origin&&f!=null?n=f+l.search+l.hash:i=!0}catch{So(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var g5=["POST","PUT","PATCH","DELETE"];new Set(g5);var pH=["GET",...g5];new Set(pH);var pm=D.createContext(null);pm.displayName="DataRouter";var px=D.createContext(null);px.displayName="DataRouterState";var yH=D.createContext(!1),p5=D.createContext({isTransitioning:!1});p5.displayName="ViewTransition";var vH=D.createContext(new Map);vH.displayName="Fetchers";var xH=D.createContext(null);xH.displayName="Await";var oo=D.createContext(null);oo.displayName="Navigation";var Hp=D.createContext(null);Hp.displayName="Location";var Dl=D.createContext({outlet:null,matches:[],isDataRoute:!1});Dl.displayName="Route";var DS=D.createContext(null);DS.displayName="RouteError";var y5="REACT_ROUTER_ERROR",bH="REDIRECT",wH="ROUTE_ERROR_RESPONSE";function _H(t){if(t.startsWith(`${y5}:${bH}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function EH(t){if(t.startsWith(`${y5}:${wH}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new hH(e.status,e.statusText,e.data)}catch{}}function AH(t,{relative:e}={}){ni(ym(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=D.useContext(oo),{hash:i,pathname:a,search:l}=Kp(t,{relative:e}),f=a;return n!=="/"&&(f=a==="/"?n:mu([n,a])),r.createHref({pathname:f,search:l,hash:i})}function ym(){return D.useContext(Hp)!=null}function kl(){return ni(ym(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(Hp).location}var v5="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function x5(t){D.useContext(oo).static||D.useLayoutEffect(t)}function Zc(){let{isDataRoute:t}=D.useContext(Dl);return t?LH():SH()}function SH(){ni(ym(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(pm),{basename:e,navigator:n}=D.useContext(oo),{matches:r}=D.useContext(Dl),{pathname:i}=kl(),a=JSON.stringify(PS(r)),l=D.useRef(!1);return x5(()=>{l.current=!0}),D.useCallback((m,p={})=>{if(So(l.current,v5),!l.current)return;if(typeof m=="number"){n.go(m);return}let b=RS(m,JSON.parse(a),i,p.relative==="path");t==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:mu([e,b.pathname])),(p.replace?n.replace:n.push)(b,p.state,p)},[e,n,a,i,t])}D.createContext(null);function Kp(t,{relative:e}={}){let{matches:n}=D.useContext(Dl),{pathname:r}=kl(),i=JSON.stringify(PS(n));return D.useMemo(()=>RS(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function TH(t,e){return b5(t,e)}function b5(t,e,n,r,i){ni(ym(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=D.useContext(oo),{matches:l}=D.useContext(Dl),f=l[l.length-1],m=f?f.params:{},p=f?f.pathname:"/",b=f?f.pathnameBase:"/",_=f&&f.route;{let $=_&&_.path||"";_5(p,!_||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let T=kl(),N;if(e){let $=typeof e=="string"?gm(e):e;ni(b==="/"||$.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${$.pathname}" was given in the \`location\` prop.`),N=$}else N=T;let j=N.pathname||"/",M=j;if(b!=="/"){let $=b.replace(/^\//,"").split("/");M="/"+j.replace(/^\//,"").split("/").slice($.length).join("/")}let L=c5(t,{pathname:M});So(_||L!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),So(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=PH(L&&L.map($=>Object.assign({},$,{params:Object.assign({},m,$.params),pathname:mu([b,a.encodeLocation?a.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?b:mu([b,a.encodeLocation?a.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),l,n,r,i);return e&&z?D.createElement(Hp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},z):z}function IH(){let t=jH(),e=mH(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:a},"ErrorBoundary")," or"," ",D.createElement("code",{style:a},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,l)}var CH=D.createElement(IH,null),w5=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=EH(t.digest);n&&(t=n)}let e=t!==void 0?D.createElement(Dl.Provider,{value:this.props.routeContext},D.createElement(DS.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?D.createElement(OH,{error:t},e):e}};w5.contextType=yH;var k_=new WeakMap;function OH({children:t,error:e}){let{basename:n}=D.useContext(oo);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=_H(e.digest);if(r){let i=k_.get(e);if(i)throw i;let a=m5(r.location,n);if(h5&&!k_.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw k_.set(e,l),l}return D.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function NH({routeContext:t,match:e,children:n}){let r=D.useContext(pm);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(Dl.Provider,{value:t},n)}function PH(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=n?.errors;if(l!=null){let b=a.findIndex(_=>_.route.id&&l?.[_.route.id]!==void 0);ni(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,b+1))}let f=!1,m=-1;if(n)for(let b=0;b<a.length;b++){let _=a[b];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=b),_.route.id){let{loaderData:T,errors:N}=n,j=_.route.loader&&!T.hasOwnProperty(_.route.id)&&(!N||N[_.route.id]===void 0);if(_.route.lazy||j){f=!0,m>=0?a=a.slice(0,m+1):a=[a[0]];break}}}let p=n&&r?(b,_)=>{r(b,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:gH(n.matches),errorInfo:_})}:void 0;return a.reduceRight((b,_,T)=>{let N,j=!1,M=null,L=null;n&&(N=l&&_.route.id?l[_.route.id]:void 0,M=_.route.errorElement||CH,f&&(m<0&&T===0?(_5("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,L=null):m===T&&(j=!0,L=_.route.hydrateFallbackElement||null)));let z=e.concat(a.slice(0,T+1)),$=()=>{let K;return N?K=M:j?K=L:_.route.Component?K=D.createElement(_.route.Component,null):_.route.element?K=_.route.element:K=b,D.createElement(NH,{match:_,routeContext:{outlet:b,matches:z,isDataRoute:n!=null},children:K})};return n&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?D.createElement(w5,{location:n.location,revalidation:n.revalidation,component:M,error:N,children:$(),routeContext:{outlet:null,matches:z,isDataRoute:!0},onError:p}):$()},null)}function kS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RH(t){let e=D.useContext(pm);return ni(e,kS(t)),e}function DH(t){let e=D.useContext(px);return ni(e,kS(t)),e}function kH(t){let e=D.useContext(Dl);return ni(e,kS(t)),e}function MS(t){let e=kH(t),n=e.matches[e.matches.length-1];return ni(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function MH(){return MS("useRouteId")}function jH(){let t=D.useContext(DS),e=DH("useRouteError"),n=MS("useRouteError");return t!==void 0?t:e.errors?.[n]}function LH(){let{router:t}=RH("useNavigate"),e=MS("useNavigate"),n=D.useRef(!1);return x5(()=>{n.current=!0}),D.useCallback(async(i,a={})=>{So(n.current,v5),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var CP={};function _5(t,e,n){!e&&!CP[t]&&(CP[t]=!0,So(!1,n))}D.memo(BH);function BH({routes:t,future:e,state:n,onError:r}){return b5(t,void 0,n,r,e)}function FH({to:t,replace:e,state:n,relative:r}){ni(ym(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=D.useContext(oo);So(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=D.useContext(Dl),{pathname:l}=kl(),f=Zc(),m=RS(t,PS(a),l,r==="path"),p=JSON.stringify(m);return D.useEffect(()=>{f(JSON.parse(p),{replace:e,state:n,relative:r})},[f,p,r,e,n]),null}function iu(t){ni(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function VH({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:l}){ni(!ym(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=t.replace(/^\/*/,"/"),m=D.useMemo(()=>({basename:f,navigator:i,static:a,unstable_useTransitions:l,future:{}}),[f,i,a,l]);typeof n=="string"&&(n=gm(n));let{pathname:p="/",search:b="",hash:_="",state:T=null,key:N="default"}=n,j=D.useMemo(()=>{let M=vu(p,f);return M==null?null:{location:{pathname:M,search:b,hash:_,state:T,key:N},navigationType:r}},[f,p,b,_,T,N,r]);return So(j!=null,`<Router basename="${f}"> is not able to match the URL "${p}${b}${_}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:D.createElement(oo.Provider,{value:m},D.createElement(Hp.Provider,{children:e,value:j}))}function zH({children:t,location:e}){return TH(kE(t),e)}function kE(t,e=[]){let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let a=[...e,i];if(r.type===D.Fragment){n.push.apply(n,kE(r.props.children,a));return}ni(r.type===iu,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ni(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=kE(r.props.children,a)),n.push(l)}),n}var hy="get",my="application/x-www-form-urlencoded";function yx(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function UH(t){return yx(t)&&t.tagName.toLowerCase()==="button"}function qH(t){return yx(t)&&t.tagName.toLowerCase()==="form"}function GH(t){return yx(t)&&t.tagName.toLowerCase()==="input"}function HH(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function KH(t,e){return t.button===0&&(!e||e==="_self")&&!HH(t)}function ME(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function WH(t,e){let n=ME(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var L1=null;function $H(){if(L1===null)try{new FormData(document.createElement("form"),0),L1=!1}catch{L1=!0}return L1}var YH=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function M_(t){return t!=null&&!YH.has(t)?(So(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${my}"`),null):t}function XH(t,e){let n,r,i,a,l;if(qH(t)){let f=t.getAttribute("action");r=f?vu(f,e):null,n=t.getAttribute("method")||hy,i=M_(t.getAttribute("enctype"))||my,a=new FormData(t)}else if(UH(t)||GH(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=t.getAttribute("formaction")||f.getAttribute("action");if(r=m?vu(m,e):null,n=t.getAttribute("formmethod")||f.getAttribute("method")||hy,i=M_(t.getAttribute("formenctype"))||M_(f.getAttribute("enctype"))||my,a=new FormData(f,t),!$H()){let{name:p,type:b,value:_}=t;if(b==="image"){let T=p?`${p}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else p&&a.append(p,_)}}else{if(yx(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=hy,r=null,i=my,l=t}return a&&i==="text/plain"&&(l=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function jS(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function QH(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&vu(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function ZH(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function JH(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function eK(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await ZH(a,n);return l.links?l.links():[]}return[]}));return iK(r.flat(1).filter(JH).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function OP(t,e,n,r,i,a){let l=(m,p)=>n[p]?m.route.id!==n[p].route.id:!0,f=(m,p)=>n[p].pathname!==m.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==m.params["*"];return a==="assets"?e.filter((m,p)=>l(m,p)||f(m,p)):a==="data"?e.filter((m,p)=>{let b=r.routes[m.route.id];if(!b||!b.hasLoader)return!1;if(l(m,p)||f(m,p))return!0;if(m.route.shouldRevalidate){let _=m.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function tK(t,e,{includeHydrateFallback:n}={}){return nK(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function nK(t){return[...new Set(t)]}function rK(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function iK(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(rK(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function E5(){let t=D.useContext(pm);return jS(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function aK(){let t=D.useContext(px);return jS(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var LS=D.createContext(void 0);LS.displayName="FrameworkContext";function A5(){let t=D.useContext(LS);return jS(t,"You must render this element inside a <HydratedRouter> element"),t}function sK(t,e){let n=D.useContext(LS),[r,i]=D.useState(!1),[a,l]=D.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:p,onMouseLeave:b,onTouchStart:_}=e,T=D.useRef(null);D.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let M=z=>{z.forEach($=>{l($.isIntersecting)})},L=new IntersectionObserver(M,{threshold:.5});return T.current&&L.observe(T.current),()=>{L.disconnect()}}},[t]),D.useEffect(()=>{if(r){let M=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(M)}}},[r]);let N=()=>{i(!0)},j=()=>{i(!1),l(!1)};return n?t!=="intent"?[a,T,{}]:[a,T,{onFocus:Ag(f,N),onBlur:Ag(m,j),onMouseEnter:Ag(p,N),onMouseLeave:Ag(b,j),onTouchStart:Ag(_,N)}]:[!1,T,{}]}function Ag(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function oK({page:t,...e}){let{router:n}=E5(),r=D.useMemo(()=>c5(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?D.createElement(uK,{page:t,matches:r,...e}):null}function lK(t){let{manifest:e,routeModules:n}=A5(),[r,i]=D.useState([]);return D.useEffect(()=>{let a=!1;return eK(t,e,n).then(l=>{a||i(l)}),()=>{a=!0}},[t,e,n]),r}function uK({page:t,matches:e,...n}){let r=kl(),{future:i,manifest:a,routeModules:l}=A5(),{basename:f}=E5(),{loaderData:m,matches:p}=aK(),b=D.useMemo(()=>OP(t,e,p,a,r,"data"),[t,e,p,a,r]),_=D.useMemo(()=>OP(t,e,p,a,r,"assets"),[t,e,p,a,r]),T=D.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let M=new Set,L=!1;if(e.forEach($=>{let K=a.routes[$.route.id];!K||!K.hasLoader||(!b.some(X=>X.route.id===$.route.id)&&$.route.id in m&&l[$.route.id]?.shouldRevalidate||K.hasClientLoader?L=!0:M.add($.route.id))}),M.size===0)return[];let z=QH(t,f,i.unstable_trailingSlashAwareDataRequests,"data");return L&&M.size>0&&z.searchParams.set("_routes",e.filter($=>M.has($.route.id)).map($=>$.route.id).join(",")),[z.pathname+z.search]},[f,i.unstable_trailingSlashAwareDataRequests,m,r,a,b,e,t,l]),N=D.useMemo(()=>tK(_,a),[_,a]),j=lK(_);return D.createElement(D.Fragment,null,T.map(M=>D.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),N.map(M=>D.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),j.map(({key:M,link:L})=>D.createElement("link",{key:M,nonce:n.nonce,...L,crossOrigin:L.crossOrigin??n.crossOrigin})))}function cK(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var fK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{fK&&(window.__reactRouterVersion="7.13.0")}catch{}function dK({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=D.useRef();i.current==null&&(i.current=GG({window:r,v5Compat:!0}));let a=i.current,[l,f]=D.useState({action:a.action,location:a.location}),m=D.useCallback(p=>{n===!1?f(p):D.startTransition(()=>f(p))},[n]);return D.useLayoutEffect(()=>a.listen(m),[a,m]),D.createElement(VH,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:n})}var S5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,T5=D.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:l,state:f,target:m,to:p,preventScrollReset:b,viewTransition:_,unstable_defaultShouldRevalidate:T,...N},j){let{basename:M,unstable_useTransitions:L}=D.useContext(oo),z=typeof p=="string"&&S5.test(p),$=m5(p,M);p=$.to;let K=AH(p,{relative:i}),[X,se,J]=sK(r,N),V=pK(p,{replace:l,state:f,target:m,preventScrollReset:b,relative:i,viewTransition:_,unstable_defaultShouldRevalidate:T,unstable_useTransitions:L});function W(oe){e&&e(oe),oe.defaultPrevented||V(oe)}let H=D.createElement("a",{...N,...J,href:$.absoluteURL||K,onClick:$.isExternal||a?e:W,ref:cK(j,se),target:m,"data-discover":!z&&n==="render"?"true":void 0});return X&&!z?D.createElement(D.Fragment,null,H,D.createElement(oK,{page:K})):H});T5.displayName="Link";var hK=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:l,viewTransition:f,children:m,...p},b){let _=Kp(l,{relative:p.relative}),T=kl(),N=D.useContext(px),{navigator:j,basename:M}=D.useContext(oo),L=N!=null&&_K(_)&&f===!0,z=j.encodeLocation?j.encodeLocation(_).pathname:_.pathname,$=T.pathname,K=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;n||($=$.toLowerCase(),K=K?K.toLowerCase():null,z=z.toLowerCase()),K&&M&&(K=vu(K,M)||K);const X=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let se=$===z||!i&&$.startsWith(z)&&$.charAt(X)==="/",J=K!=null&&(K===z||!i&&K.startsWith(z)&&K.charAt(z.length)==="/"),V={isActive:se,isPending:J,isTransitioning:L},W=se?e:void 0,H;typeof r=="function"?H=r(V):H=[r,se?"active":null,J?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let oe=typeof a=="function"?a(V):a;return D.createElement(T5,{...p,"aria-current":W,className:H,ref:b,style:oe,to:l,viewTransition:f},typeof m=="function"?m(V):m)});hK.displayName="NavLink";var mK=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:l=hy,action:f,onSubmit:m,relative:p,preventScrollReset:b,viewTransition:_,unstable_defaultShouldRevalidate:T,...N},j)=>{let{unstable_useTransitions:M}=D.useContext(oo),L=bK(),z=wK(f,{relative:p}),$=l.toLowerCase()==="get"?"get":"post",K=typeof f=="string"&&S5.test(f),X=se=>{if(m&&m(se),se.defaultPrevented)return;se.preventDefault();let J=se.nativeEvent.submitter,V=J?.getAttribute("formmethod")||l,W=()=>L(J||se.currentTarget,{fetcherKey:e,method:V,navigate:n,replace:i,state:a,relative:p,preventScrollReset:b,viewTransition:_,unstable_defaultShouldRevalidate:T});M&&n!==!1?D.startTransition(()=>W()):W()};return D.createElement("form",{ref:j,method:$,action:z,onSubmit:r?m:X,...N,"data-discover":!K&&t==="render"?"true":void 0})});mK.displayName="Form";function gK(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function I5(t){let e=D.useContext(pm);return ni(e,gK(t)),e}function pK(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let p=Zc(),b=kl(),_=Kp(t,{relative:a});return D.useCallback(T=>{if(KH(T,e)){T.preventDefault();let N=n!==void 0?n:dp(b)===dp(_),j=()=>p(t,{replace:N,state:r,preventScrollReset:i,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:f});m?D.startTransition(()=>j()):j()}},[b,p,_,n,r,e,t,i,a,l,f,m])}function yK(t){So(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=D.useRef(ME(t)),n=D.useRef(!1),r=kl(),i=D.useMemo(()=>WH(r.search,n.current?null:e.current),[r.search]),a=Zc(),l=D.useCallback((f,m)=>{const p=ME(typeof f=="function"?f(new URLSearchParams(i)):f);n.current=!0,a("?"+p,m)},[a,i]);return[i,l]}var vK=0,xK=()=>`__${String(++vK)}__`;function bK(){let{router:t}=I5("useSubmit"),{basename:e}=D.useContext(oo),n=MH(),r=t.fetch,i=t.navigate;return D.useCallback(async(a,l={})=>{let{action:f,method:m,encType:p,formData:b,body:_}=XH(a,e);if(l.navigate===!1){let T=l.fetcherKey||xK();await r(T,n,l.action||f,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:b,body:_,formMethod:l.method||m,formEncType:l.encType||p,flushSync:l.flushSync})}else await i(l.action||f,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:b,body:_,formMethod:l.method||m,formEncType:l.encType||p,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,i,e,n])}function wK(t,{relative:e}={}){let{basename:n}=D.useContext(oo),r=D.useContext(Dl);ni(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Kp(t||".",{relative:e})},l=kl();if(t==null){a.search=l.search;let f=new URLSearchParams(a.search),m=f.getAll("index");if(m.some(b=>b==="")){f.delete("index"),m.filter(_=>_).forEach(_=>f.append("index",_));let b=f.toString();a.search=b?`?${b}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:mu([n,a.pathname])),dp(a)}function _K(t,{relative:e}={}){let n=D.useContext(p5);ni(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=I5("useViewTransitionState"),i=Kp(t,{relative:e});if(!n.isTransitioning)return!1;let a=vu(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=vu(n.nextLocation.pathname,r)||n.nextLocation.pathname;return zy(i.pathname,l)!=null||zy(i.pathname,a)!=null}var C5=u5();const EK=()=>{};var NP={};const O5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},AK=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],l=t[n++],f=t[n++],m=((i&7)<<18|(a&63)<<12|(l&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const a=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},N5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],l=i+1<t.length,f=l?t[i+1]:0,m=i+2<t.length,p=m?t[i+2]:0,b=a>>2,_=(a&3)<<4|f>>4;let T=(f&15)<<2|p>>6,N=p&63;m||(N=64,l||(T=64)),r.push(n[b],n[_],n[T],n[N])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(O5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AK(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],f=i<t.length?n[t.charAt(i)]:0;++i;const p=i<t.length?n[t.charAt(i)]:64;++i;const _=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||f==null||p==null||_==null)throw new SK;const T=a<<2|f>>4;if(r.push(T),p!==64){const N=f<<4&240|p>>2;if(r.push(N),_!==64){const j=p<<6&192|_;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class SK extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TK=function(t){const e=O5(t);return N5.encodeByteArray(e,!0)},Uy=function(t){return TK(t).replace(/\./g,"")},P5=function(t){try{return N5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function R5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const IK=()=>R5().__FIREBASE_DEFAULTS__,CK=()=>{if(typeof process>"u"||typeof NP>"u")return;const t=NP.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},OK=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&P5(t[1]);return e&&JSON.parse(e)},vx=()=>{try{return EK()||IK()||CK()||OK()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},D5=t=>vx()?.emulatorHosts?.[t],NK=t=>{const e=D5(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},k5=()=>vx()?.config,M5=t=>vx()?.[`_${t}`];class PK{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function wd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function BS(t){return(await fetch(t,{credentials:"include"})).ok}function RK(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Uy(JSON.stringify(n)),Uy(JSON.stringify(l)),""].join(".")}const Zg={};function DK(){const t={prod:[],emulator:[]};for(const e of Object.keys(Zg))Zg[e]?t.emulator.push(e):t.prod.push(e);return t}function kK(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let PP=!1;function j5(t,e){if(typeof window>"u"||typeof document>"u"||!wd(window.location.host)||Zg[t]===e||Zg[t]||PP)return;Zg[t]=e;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",a=DK().prod.length>0;function l(){const T=document.getElementById(r);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,N){T.setAttribute("width","24"),T.setAttribute("id",N),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{PP=!0,l()},T}function b(T,N){T.setAttribute("id",N),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=kK(r),N=n("text"),j=document.getElementById(N)||document.createElement("span"),M=n("learnmore"),L=document.getElementById(M)||document.createElement("a"),z=n("preprendIcon"),$=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const K=T.element;f(K),b(L,M);const X=p();m($,z),K.append($,j,L,X),document.body.appendChild(K)}a?(j.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function Wi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MK(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wi())}function L5(){const t=vx()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jK(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LK(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function BK(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FK(){const t=Wi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function B5(){return!L5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function F5(){return!L5()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function V5(){try{return typeof indexedDB=="object"}catch{return!1}}function VK(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const zK="FirebaseError";class Ru extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=zK,Object.setPrototypeOf(this,Ru.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wp.prototype.create)}}class Wp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?UK(a,r):"Error",f=`${this.serviceName}: ${l} (${i}).`;return new Ru(i,f,r)}}function UK(t,e){return t.replace(qK,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const qK=/\{\$([^}]+)}/g;function GK(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],l=e[i];if(RP(a)&&RP(l)){if(!Wo(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function RP(t){return t!==null&&typeof t=="object"}function $p(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ug(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function qg(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function HK(t,e){const n=new KK(t,e);return n.subscribe.bind(n)}class KK{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");WK(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=j_),i.error===void 0&&(i.error=j_),i.complete===void 0&&(i.complete=j_);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WK(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function j_(){}function wr(t){return t&&t._delegate?t._delegate:t}class Zf{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const If="[DEFAULT]";let $K=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new PK;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XK(e))try{this.getOrInitializeService({instanceIdentifier:If})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=If){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=If){return this.instances.has(e)}getOptions(e=If){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,l]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);r===f&&l.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:YK(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=If){return this.component?this.component.multipleInstances?e:If:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function YK(t){return t===If?void 0:t}function XK(t){return t.instantiationMode==="EAGER"}class QK{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $K(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Dn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Dn||(Dn={}));const ZK={debug:Dn.DEBUG,verbose:Dn.VERBOSE,info:Dn.INFO,warn:Dn.WARN,error:Dn.ERROR,silent:Dn.SILENT},JK=Dn.INFO,eW={[Dn.DEBUG]:"log",[Dn.VERBOSE]:"log",[Dn.INFO]:"info",[Dn.WARN]:"warn",[Dn.ERROR]:"error"},tW=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=eW[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class FS{constructor(e){this.name=e,this._logLevel=JK,this._logHandler=tW,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Dn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Dn.DEBUG,...e),this._logHandler(this,Dn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Dn.VERBOSE,...e),this._logHandler(this,Dn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Dn.INFO,...e),this._logHandler(this,Dn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Dn.WARN,...e),this._logHandler(this,Dn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Dn.ERROR,...e),this._logHandler(this,Dn.ERROR,...e)}}const nW=(t,e)=>e.some(n=>t instanceof n);let DP,kP;function rW(){return DP||(DP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iW(){return kP||(kP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const z5=new WeakMap,jE=new WeakMap,U5=new WeakMap,L_=new WeakMap,VS=new WeakMap;function aW(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(Pc(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&z5.set(n,t)}).catch(()=>{}),VS.set(e,t),e}function sW(t){if(jE.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});jE.set(t,e)}let LE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||U5.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oW(t){LE=t(LE)}function lW(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(B_(this),e,...n);return U5.set(r,e.sort?e.sort():[e]),Pc(r)}:iW().includes(t)?function(...e){return t.apply(B_(this),e),Pc(z5.get(this))}:function(...e){return Pc(t.apply(B_(this),e))}}function uW(t){return typeof t=="function"?lW(t):(t instanceof IDBTransaction&&sW(t),nW(t,rW())?new Proxy(t,LE):t)}function Pc(t){if(t instanceof IDBRequest)return aW(t);if(L_.has(t))return L_.get(t);const e=uW(t);return e!==t&&(L_.set(t,e),VS.set(e,t)),e}const B_=t=>VS.get(t);function cW(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(t,e),f=Pc(l);return r&&l.addEventListener("upgradeneeded",m=>{r(Pc(l.result),m.oldVersion,m.newVersion,Pc(l.transaction),m)}),n&&l.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),f.then(m=>{a&&m.addEventListener("close",()=>a()),i&&m.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const fW=["get","getKey","getAll","getAllKeys","count"],dW=["put","add","delete","clear"],F_=new Map;function MP(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(F_.get(e))return F_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=dW.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fW.includes(n)))return;const a=async function(l,...f){const m=this.transaction(l,i?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(f.shift())),(await Promise.all([p[n](...f),i&&m.done]))[0]};return F_.set(e,a),a}oW(t=>({...t,get:(e,n,r)=>MP(e,n)||t.get(e,n,r),has:(e,n)=>!!MP(e,n)||t.has(e,n)}));class hW{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mW(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mW(t){return t.getComponent()?.type==="VERSION"}const BE="@firebase/app",jP="0.14.8";const xu=new FS("@firebase/app"),gW="@firebase/app-compat",pW="@firebase/analytics-compat",yW="@firebase/analytics",vW="@firebase/app-check-compat",xW="@firebase/app-check",bW="@firebase/auth",wW="@firebase/auth-compat",_W="@firebase/database",EW="@firebase/data-connect",AW="@firebase/database-compat",SW="@firebase/functions",TW="@firebase/functions-compat",IW="@firebase/installations",CW="@firebase/installations-compat",OW="@firebase/messaging",NW="@firebase/messaging-compat",PW="@firebase/performance",RW="@firebase/performance-compat",DW="@firebase/remote-config",kW="@firebase/remote-config-compat",MW="@firebase/storage",jW="@firebase/storage-compat",LW="@firebase/firestore",BW="@firebase/ai",FW="@firebase/firestore-compat",VW="firebase",zW="12.9.0";const qy="[DEFAULT]",UW={[BE]:"fire-core",[gW]:"fire-core-compat",[yW]:"fire-analytics",[pW]:"fire-analytics-compat",[xW]:"fire-app-check",[vW]:"fire-app-check-compat",[bW]:"fire-auth",[wW]:"fire-auth-compat",[_W]:"fire-rtdb",[EW]:"fire-data-connect",[AW]:"fire-rtdb-compat",[SW]:"fire-fn",[TW]:"fire-fn-compat",[IW]:"fire-iid",[CW]:"fire-iid-compat",[OW]:"fire-fcm",[NW]:"fire-fcm-compat",[PW]:"fire-perf",[RW]:"fire-perf-compat",[DW]:"fire-rc",[kW]:"fire-rc-compat",[MW]:"fire-gcs",[jW]:"fire-gcs-compat",[LW]:"fire-fst",[FW]:"fire-fst-compat",[BW]:"fire-vertex","fire-js":"fire-js",[VW]:"fire-js-all"};const Gy=new Map,qW=new Map,FE=new Map;function LP(t,e){try{t.container.addComponent(e)}catch(n){xu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Lh(t){const e=t.name;if(FE.has(e))return xu.debug(`There were multiple attempts to register component ${e}.`),!1;FE.set(e,t);for(const n of Gy.values())LP(n,t);for(const n of qW.values())LP(n,t);return!0}function Yp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function GW(t,e,n=qy){Yp(t,e).clearInstance(n)}function Eo(t){return t==null?!1:t.settings!==void 0}const HW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rc=new Wp("app","Firebase",HW);class KW{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rc.create("app-deleted",{appName:this._name})}}const vm=zW;function q5(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:qy,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Rc.create("bad-app-name",{appName:String(i)});if(n||(n=k5()),!n)throw Rc.create("no-options");const a=Gy.get(i);if(a){if(Wo(n,a.options)&&Wo(r,a.config))return a;throw Rc.create("duplicate-app",{appName:i})}const l=new QK(i);for(const m of FE.values())l.addComponent(m);const f=new KW(n,r,l);return Gy.set(i,f),f}function G5(t=qy){const e=Gy.get(t);if(!e&&t===qy&&k5())return q5();if(!e)throw Rc.create("no-app",{appName:t});return e}function Dc(t,e,n){let r=UW[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xu.warn(l.join(" "));return}Lh(new Zf(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const WW="firebase-heartbeat-database",$W=1,hp="firebase-heartbeat-store";let V_=null;function H5(){return V_||(V_=cW(WW,$W,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(hp)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rc.create("idb-open",{originalErrorMessage:t.message})})),V_}async function YW(t){try{const n=(await H5()).transaction(hp),r=await n.objectStore(hp).get(K5(t));return await n.done,r}catch(e){if(e instanceof Ru)xu.warn(e.message);else{const n=Rc.create("idb-get",{originalErrorMessage:e?.message});xu.warn(n.message)}}}async function BP(t,e){try{const r=(await H5()).transaction(hp,"readwrite");await r.objectStore(hp).put(e,K5(t)),await r.done}catch(n){if(n instanceof Ru)xu.warn(n.message);else{const r=Rc.create("idb-set",{originalErrorMessage:n?.message});xu.warn(r.message)}}}function K5(t){return`${t.name}!${t.options.appId}`}const XW=1024,QW=30;class ZW{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new e$(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=FP();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>QW){const i=t$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){xu.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=FP(),{heartbeatsToSend:n,unsentEntries:r}=JW(this._heartbeatsCache.heartbeats),i=Uy(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return xu.warn(e),""}}}function FP(){return new Date().toISOString().substring(0,10)}function JW(t,e=XW){const n=[];let r=t.slice();for(const i of t){const a=n.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),VP(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),VP(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class e${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return V5()?VK().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YW(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return BP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return BP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function VP(t){return Uy(JSON.stringify({version:2,heartbeats:t})).length}function t$(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function n$(t){Lh(new Zf("platform-logger",e=>new hW(e),"PRIVATE")),Lh(new Zf("heartbeat",e=>new ZW(e),"PRIVATE")),Dc(BE,jP,t),Dc(BE,jP,"esm2020"),Dc("fire-js","")}n$("");var zP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var kc,W5;(function(){var t;function e(V,W){function H(){}H.prototype=W.prototype,V.F=W.prototype,V.prototype=new H,V.prototype.constructor=V,V.D=function(oe,ae,Z){for(var ee=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)ee[xe-2]=arguments[xe];return W.prototype[ae].apply(oe,ee)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(V,W,H){H||(H=0);const oe=Array(16);if(typeof W=="string")for(var ae=0;ae<16;++ae)oe[ae]=W.charCodeAt(H++)|W.charCodeAt(H++)<<8|W.charCodeAt(H++)<<16|W.charCodeAt(H++)<<24;else for(ae=0;ae<16;++ae)oe[ae]=W[H++]|W[H++]<<8|W[H++]<<16|W[H++]<<24;W=V.g[0],H=V.g[1],ae=V.g[2];let Z=V.g[3],ee;ee=W+(Z^H&(ae^Z))+oe[0]+3614090360&4294967295,W=H+(ee<<7&4294967295|ee>>>25),ee=Z+(ae^W&(H^ae))+oe[1]+3905402710&4294967295,Z=W+(ee<<12&4294967295|ee>>>20),ee=ae+(H^Z&(W^H))+oe[2]+606105819&4294967295,ae=Z+(ee<<17&4294967295|ee>>>15),ee=H+(W^ae&(Z^W))+oe[3]+3250441966&4294967295,H=ae+(ee<<22&4294967295|ee>>>10),ee=W+(Z^H&(ae^Z))+oe[4]+4118548399&4294967295,W=H+(ee<<7&4294967295|ee>>>25),ee=Z+(ae^W&(H^ae))+oe[5]+1200080426&4294967295,Z=W+(ee<<12&4294967295|ee>>>20),ee=ae+(H^Z&(W^H))+oe[6]+2821735955&4294967295,ae=Z+(ee<<17&4294967295|ee>>>15),ee=H+(W^ae&(Z^W))+oe[7]+4249261313&4294967295,H=ae+(ee<<22&4294967295|ee>>>10),ee=W+(Z^H&(ae^Z))+oe[8]+1770035416&4294967295,W=H+(ee<<7&4294967295|ee>>>25),ee=Z+(ae^W&(H^ae))+oe[9]+2336552879&4294967295,Z=W+(ee<<12&4294967295|ee>>>20),ee=ae+(H^Z&(W^H))+oe[10]+4294925233&4294967295,ae=Z+(ee<<17&4294967295|ee>>>15),ee=H+(W^ae&(Z^W))+oe[11]+2304563134&4294967295,H=ae+(ee<<22&4294967295|ee>>>10),ee=W+(Z^H&(ae^Z))+oe[12]+1804603682&4294967295,W=H+(ee<<7&4294967295|ee>>>25),ee=Z+(ae^W&(H^ae))+oe[13]+4254626195&4294967295,Z=W+(ee<<12&4294967295|ee>>>20),ee=ae+(H^Z&(W^H))+oe[14]+2792965006&4294967295,ae=Z+(ee<<17&4294967295|ee>>>15),ee=H+(W^ae&(Z^W))+oe[15]+1236535329&4294967295,H=ae+(ee<<22&4294967295|ee>>>10),ee=W+(ae^Z&(H^ae))+oe[1]+4129170786&4294967295,W=H+(ee<<5&4294967295|ee>>>27),ee=Z+(H^ae&(W^H))+oe[6]+3225465664&4294967295,Z=W+(ee<<9&4294967295|ee>>>23),ee=ae+(W^H&(Z^W))+oe[11]+643717713&4294967295,ae=Z+(ee<<14&4294967295|ee>>>18),ee=H+(Z^W&(ae^Z))+oe[0]+3921069994&4294967295,H=ae+(ee<<20&4294967295|ee>>>12),ee=W+(ae^Z&(H^ae))+oe[5]+3593408605&4294967295,W=H+(ee<<5&4294967295|ee>>>27),ee=Z+(H^ae&(W^H))+oe[10]+38016083&4294967295,Z=W+(ee<<9&4294967295|ee>>>23),ee=ae+(W^H&(Z^W))+oe[15]+3634488961&4294967295,ae=Z+(ee<<14&4294967295|ee>>>18),ee=H+(Z^W&(ae^Z))+oe[4]+3889429448&4294967295,H=ae+(ee<<20&4294967295|ee>>>12),ee=W+(ae^Z&(H^ae))+oe[9]+568446438&4294967295,W=H+(ee<<5&4294967295|ee>>>27),ee=Z+(H^ae&(W^H))+oe[14]+3275163606&4294967295,Z=W+(ee<<9&4294967295|ee>>>23),ee=ae+(W^H&(Z^W))+oe[3]+4107603335&4294967295,ae=Z+(ee<<14&4294967295|ee>>>18),ee=H+(Z^W&(ae^Z))+oe[8]+1163531501&4294967295,H=ae+(ee<<20&4294967295|ee>>>12),ee=W+(ae^Z&(H^ae))+oe[13]+2850285829&4294967295,W=H+(ee<<5&4294967295|ee>>>27),ee=Z+(H^ae&(W^H))+oe[2]+4243563512&4294967295,Z=W+(ee<<9&4294967295|ee>>>23),ee=ae+(W^H&(Z^W))+oe[7]+1735328473&4294967295,ae=Z+(ee<<14&4294967295|ee>>>18),ee=H+(Z^W&(ae^Z))+oe[12]+2368359562&4294967295,H=ae+(ee<<20&4294967295|ee>>>12),ee=W+(H^ae^Z)+oe[5]+4294588738&4294967295,W=H+(ee<<4&4294967295|ee>>>28),ee=Z+(W^H^ae)+oe[8]+2272392833&4294967295,Z=W+(ee<<11&4294967295|ee>>>21),ee=ae+(Z^W^H)+oe[11]+1839030562&4294967295,ae=Z+(ee<<16&4294967295|ee>>>16),ee=H+(ae^Z^W)+oe[14]+4259657740&4294967295,H=ae+(ee<<23&4294967295|ee>>>9),ee=W+(H^ae^Z)+oe[1]+2763975236&4294967295,W=H+(ee<<4&4294967295|ee>>>28),ee=Z+(W^H^ae)+oe[4]+1272893353&4294967295,Z=W+(ee<<11&4294967295|ee>>>21),ee=ae+(Z^W^H)+oe[7]+4139469664&4294967295,ae=Z+(ee<<16&4294967295|ee>>>16),ee=H+(ae^Z^W)+oe[10]+3200236656&4294967295,H=ae+(ee<<23&4294967295|ee>>>9),ee=W+(H^ae^Z)+oe[13]+681279174&4294967295,W=H+(ee<<4&4294967295|ee>>>28),ee=Z+(W^H^ae)+oe[0]+3936430074&4294967295,Z=W+(ee<<11&4294967295|ee>>>21),ee=ae+(Z^W^H)+oe[3]+3572445317&4294967295,ae=Z+(ee<<16&4294967295|ee>>>16),ee=H+(ae^Z^W)+oe[6]+76029189&4294967295,H=ae+(ee<<23&4294967295|ee>>>9),ee=W+(H^ae^Z)+oe[9]+3654602809&4294967295,W=H+(ee<<4&4294967295|ee>>>28),ee=Z+(W^H^ae)+oe[12]+3873151461&4294967295,Z=W+(ee<<11&4294967295|ee>>>21),ee=ae+(Z^W^H)+oe[15]+530742520&4294967295,ae=Z+(ee<<16&4294967295|ee>>>16),ee=H+(ae^Z^W)+oe[2]+3299628645&4294967295,H=ae+(ee<<23&4294967295|ee>>>9),ee=W+(ae^(H|~Z))+oe[0]+4096336452&4294967295,W=H+(ee<<6&4294967295|ee>>>26),ee=Z+(H^(W|~ae))+oe[7]+1126891415&4294967295,Z=W+(ee<<10&4294967295|ee>>>22),ee=ae+(W^(Z|~H))+oe[14]+2878612391&4294967295,ae=Z+(ee<<15&4294967295|ee>>>17),ee=H+(Z^(ae|~W))+oe[5]+4237533241&4294967295,H=ae+(ee<<21&4294967295|ee>>>11),ee=W+(ae^(H|~Z))+oe[12]+1700485571&4294967295,W=H+(ee<<6&4294967295|ee>>>26),ee=Z+(H^(W|~ae))+oe[3]+2399980690&4294967295,Z=W+(ee<<10&4294967295|ee>>>22),ee=ae+(W^(Z|~H))+oe[10]+4293915773&4294967295,ae=Z+(ee<<15&4294967295|ee>>>17),ee=H+(Z^(ae|~W))+oe[1]+2240044497&4294967295,H=ae+(ee<<21&4294967295|ee>>>11),ee=W+(ae^(H|~Z))+oe[8]+1873313359&4294967295,W=H+(ee<<6&4294967295|ee>>>26),ee=Z+(H^(W|~ae))+oe[15]+4264355552&4294967295,Z=W+(ee<<10&4294967295|ee>>>22),ee=ae+(W^(Z|~H))+oe[6]+2734768916&4294967295,ae=Z+(ee<<15&4294967295|ee>>>17),ee=H+(Z^(ae|~W))+oe[13]+1309151649&4294967295,H=ae+(ee<<21&4294967295|ee>>>11),ee=W+(ae^(H|~Z))+oe[4]+4149444226&4294967295,W=H+(ee<<6&4294967295|ee>>>26),ee=Z+(H^(W|~ae))+oe[11]+3174756917&4294967295,Z=W+(ee<<10&4294967295|ee>>>22),ee=ae+(W^(Z|~H))+oe[2]+718787259&4294967295,ae=Z+(ee<<15&4294967295|ee>>>17),ee=H+(Z^(ae|~W))+oe[9]+3951481745&4294967295,V.g[0]=V.g[0]+W&4294967295,V.g[1]=V.g[1]+(ae+(ee<<21&4294967295|ee>>>11))&4294967295,V.g[2]=V.g[2]+ae&4294967295,V.g[3]=V.g[3]+Z&4294967295}r.prototype.v=function(V,W){W===void 0&&(W=V.length);const H=W-this.blockSize,oe=this.C;let ae=this.h,Z=0;for(;Z<W;){if(ae==0)for(;Z<=H;)i(this,V,Z),Z+=this.blockSize;if(typeof V=="string"){for(;Z<W;)if(oe[ae++]=V.charCodeAt(Z++),ae==this.blockSize){i(this,oe),ae=0;break}}else for(;Z<W;)if(oe[ae++]=V[Z++],ae==this.blockSize){i(this,oe),ae=0;break}}this.h=ae,this.o+=W},r.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var W=1;W<V.length-8;++W)V[W]=0;W=this.o*8;for(var H=V.length-8;H<V.length;++H)V[H]=W&255,W/=256;for(this.v(V),V=Array(16),W=0,H=0;H<4;++H)for(let oe=0;oe<32;oe+=8)V[W++]=this.g[H]>>>oe&255;return V};function a(V,W){var H=f;return Object.prototype.hasOwnProperty.call(H,V)?H[V]:H[V]=W(V)}function l(V,W){this.h=W;const H=[];let oe=!0;for(let ae=V.length-1;ae>=0;ae--){const Z=V[ae]|0;oe&&Z==W||(H[ae]=Z,oe=!1)}this.g=H}var f={};function m(V){return-128<=V&&V<128?a(V,function(W){return new l([W|0],W<0?-1:0)}):new l([V|0],V<0?-1:0)}function p(V){if(isNaN(V)||!isFinite(V))return _;if(V<0)return L(p(-V));const W=[];let H=1;for(let oe=0;V>=H;oe++)W[oe]=V/H|0,H*=4294967296;return new l(W,0)}function b(V,W){if(V.length==0)throw Error("number format error: empty string");if(W=W||10,W<2||36<W)throw Error("radix out of range: "+W);if(V.charAt(0)=="-")return L(b(V.substring(1),W));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const H=p(Math.pow(W,8));let oe=_;for(let Z=0;Z<V.length;Z+=8){var ae=Math.min(8,V.length-Z);const ee=parseInt(V.substring(Z,Z+ae),W);ae<8?(ae=p(Math.pow(W,ae)),oe=oe.j(ae).add(p(ee))):(oe=oe.j(H),oe=oe.add(p(ee)))}return oe}var _=m(0),T=m(1),N=m(16777216);t=l.prototype,t.m=function(){if(M(this))return-L(this).m();let V=0,W=1;for(let H=0;H<this.g.length;H++){const oe=this.i(H);V+=(oe>=0?oe:4294967296+oe)*W,W*=4294967296}return V},t.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(j(this))return"0";if(M(this))return"-"+L(this).toString(V);const W=p(Math.pow(V,6));var H=this;let oe="";for(;;){const ae=X(H,W).g;H=z(H,ae.j(W));let Z=((H.g.length>0?H.g[0]:H.h)>>>0).toString(V);if(H=ae,j(H))return Z+oe;for(;Z.length<6;)Z="0"+Z;oe=Z+oe}},t.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function j(V){if(V.h!=0)return!1;for(let W=0;W<V.g.length;W++)if(V.g[W]!=0)return!1;return!0}function M(V){return V.h==-1}t.l=function(V){return V=z(this,V),M(V)?-1:j(V)?0:1};function L(V){const W=V.g.length,H=[];for(let oe=0;oe<W;oe++)H[oe]=~V.g[oe];return new l(H,~V.h).add(T)}t.abs=function(){return M(this)?L(this):this},t.add=function(V){const W=Math.max(this.g.length,V.g.length),H=[];let oe=0;for(let ae=0;ae<=W;ae++){let Z=oe+(this.i(ae)&65535)+(V.i(ae)&65535),ee=(Z>>>16)+(this.i(ae)>>>16)+(V.i(ae)>>>16);oe=ee>>>16,Z&=65535,ee&=65535,H[ae]=ee<<16|Z}return new l(H,H[H.length-1]&-2147483648?-1:0)};function z(V,W){return V.add(L(W))}t.j=function(V){if(j(this)||j(V))return _;if(M(this))return M(V)?L(this).j(L(V)):L(L(this).j(V));if(M(V))return L(this.j(L(V)));if(this.l(N)<0&&V.l(N)<0)return p(this.m()*V.m());const W=this.g.length+V.g.length,H=[];for(var oe=0;oe<2*W;oe++)H[oe]=0;for(oe=0;oe<this.g.length;oe++)for(let ae=0;ae<V.g.length;ae++){const Z=this.i(oe)>>>16,ee=this.i(oe)&65535,xe=V.i(ae)>>>16,de=V.i(ae)&65535;H[2*oe+2*ae]+=ee*de,$(H,2*oe+2*ae),H[2*oe+2*ae+1]+=Z*de,$(H,2*oe+2*ae+1),H[2*oe+2*ae+1]+=ee*xe,$(H,2*oe+2*ae+1),H[2*oe+2*ae+2]+=Z*xe,$(H,2*oe+2*ae+2)}for(V=0;V<W;V++)H[V]=H[2*V+1]<<16|H[2*V];for(V=W;V<2*W;V++)H[V]=0;return new l(H,0)};function $(V,W){for(;(V[W]&65535)!=V[W];)V[W+1]+=V[W]>>>16,V[W]&=65535,W++}function K(V,W){this.g=V,this.h=W}function X(V,W){if(j(W))throw Error("division by zero");if(j(V))return new K(_,_);if(M(V))return W=X(L(V),W),new K(L(W.g),L(W.h));if(M(W))return W=X(V,L(W)),new K(L(W.g),W.h);if(V.g.length>30){if(M(V)||M(W))throw Error("slowDivide_ only works with positive integers.");for(var H=T,oe=W;oe.l(V)<=0;)H=se(H),oe=se(oe);var ae=J(H,1),Z=J(oe,1);for(oe=J(oe,2),H=J(H,2);!j(oe);){var ee=Z.add(oe);ee.l(V)<=0&&(ae=ae.add(H),Z=ee),oe=J(oe,1),H=J(H,1)}return W=z(V,ae.j(W)),new K(ae,W)}for(ae=_;V.l(W)>=0;){for(H=Math.max(1,Math.floor(V.m()/W.m())),oe=Math.ceil(Math.log(H)/Math.LN2),oe=oe<=48?1:Math.pow(2,oe-48),Z=p(H),ee=Z.j(W);M(ee)||ee.l(V)>0;)H-=oe,Z=p(H),ee=Z.j(W);j(Z)&&(Z=T),ae=ae.add(Z),V=z(V,ee)}return new K(ae,V)}t.B=function(V){return X(this,V).h},t.and=function(V){const W=Math.max(this.g.length,V.g.length),H=[];for(let oe=0;oe<W;oe++)H[oe]=this.i(oe)&V.i(oe);return new l(H,this.h&V.h)},t.or=function(V){const W=Math.max(this.g.length,V.g.length),H=[];for(let oe=0;oe<W;oe++)H[oe]=this.i(oe)|V.i(oe);return new l(H,this.h|V.h)},t.xor=function(V){const W=Math.max(this.g.length,V.g.length),H=[];for(let oe=0;oe<W;oe++)H[oe]=this.i(oe)^V.i(oe);return new l(H,this.h^V.h)};function se(V){const W=V.g.length+1,H=[];for(let oe=0;oe<W;oe++)H[oe]=V.i(oe)<<1|V.i(oe-1)>>>31;return new l(H,V.h)}function J(V,W){const H=W>>5;W%=32;const oe=V.g.length-H,ae=[];for(let Z=0;Z<oe;Z++)ae[Z]=W>0?V.i(Z+H)>>>W|V.i(Z+H+1)<<32-W:V.i(Z+H);return new l(ae,V.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,W5=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=b,kc=l}).apply(typeof zP<"u"?zP:typeof self<"u"?self:typeof window<"u"?window:{});var B1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var $5,Gg,Y5,gy,VE,X5,Q5,Z5;(function(){var t,e=Object.defineProperty;function n(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof B1=="object"&&B1];for(var B=0;B<S.length;++B){var G=S[B];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}var r=n(this);function i(S,B){if(B)e:{var G=r;S=S.split(".");for(var ie=0;ie<S.length-1;ie++){var Ae=S[ie];if(!(Ae in G))break e;G=G[Ae]}S=S[S.length-1],ie=G[S],B=B(ie),B!=ie&&B!=null&&e(G,S,{configurable:!0,writable:!0,value:B})}}i("Symbol.dispose",function(S){return S||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(S){return S||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(S){return S||function(B){var G=[],ie;for(ie in B)Object.prototype.hasOwnProperty.call(B,ie)&&G.push([ie,B[ie]]);return G}});var a=a||{},l=this||self;function f(S){var B=typeof S;return B=="object"&&S!=null||B=="function"}function m(S,B,G){return S.call.apply(S.bind,arguments)}function p(S,B,G){return p=m,p.apply(null,arguments)}function b(S,B){var G=Array.prototype.slice.call(arguments,1);return function(){var ie=G.slice();return ie.push.apply(ie,arguments),S.apply(this,ie)}}function _(S,B){function G(){}G.prototype=B.prototype,S.Z=B.prototype,S.prototype=new G,S.prototype.constructor=S,S.Ob=function(ie,Ae,Le){for(var at=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)at[qt-2]=arguments[qt];return B.prototype[Ae].apply(ie,at)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?S=>S&&AsyncContext.Snapshot.wrap(S):S=>S;function N(S){const B=S.length;if(B>0){const G=Array(B);for(let ie=0;ie<B;ie++)G[ie]=S[ie];return G}return[]}function j(S,B){for(let ie=1;ie<arguments.length;ie++){const Ae=arguments[ie];var G=typeof Ae;if(G=G!="object"?G:Ae?Array.isArray(Ae)?"array":G:"null",G=="array"||G=="object"&&typeof Ae.length=="number"){G=S.length||0;const Le=Ae.length||0;S.length=G+Le;for(let at=0;at<Le;at++)S[G+at]=Ae[at]}else S.push(Ae)}}class M{constructor(B,G){this.i=B,this.j=G,this.h=0,this.g=null}get(){let B;return this.h>0?(this.h--,B=this.g,this.g=B.next,B.next=null):B=this.i(),B}}function L(S){l.setTimeout(()=>{throw S},0)}function z(){var S=V;let B=null;return S.g&&(B=S.g,S.g=S.g.next,S.g||(S.h=null),B.next=null),B}class ${constructor(){this.h=this.g=null}add(B,G){const ie=K.get();ie.set(B,G),this.h?this.h.next=ie:this.g=ie,this.h=ie}}var K=new M(()=>new X,S=>S.reset());class X{constructor(){this.next=this.g=this.h=null}set(B,G){this.h=B,this.g=G,this.next=null}reset(){this.next=this.g=this.h=null}}let se,J=!1,V=new $,W=()=>{const S=Promise.resolve(void 0);se=()=>{S.then(H)}};function H(){for(var S;S=z();){try{S.h.call(S.g)}catch(G){L(G)}var B=K;B.j(S),B.h<100&&(B.h++,S.next=B.g,B.g=S)}J=!1}function oe(){this.u=this.u,this.C=this.C}oe.prototype.u=!1,oe.prototype.dispose=function(){this.u||(this.u=!0,this.N())},oe.prototype[Symbol.dispose]=function(){this.dispose()},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(S,B){this.type=S,this.g=this.target=B,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var Z=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var S=!1,B=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const G=()=>{};l.addEventListener("test",G,B),l.removeEventListener("test",G,B)}catch{}return S})();function ee(S){return/^[\s\xa0]*$/.test(S)}function xe(S,B){ae.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S&&this.init(S,B)}_(xe,ae),xe.prototype.init=function(S,B){const G=this.type=S.type,ie=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;this.target=S.target||S.srcElement,this.g=B,B=S.relatedTarget,B||(G=="mouseover"?B=S.fromElement:G=="mouseout"&&(B=S.toElement)),this.relatedTarget=B,ie?(this.clientX=ie.clientX!==void 0?ie.clientX:ie.pageX,this.clientY=ie.clientY!==void 0?ie.clientY:ie.pageY,this.screenX=ie.screenX||0,this.screenY=ie.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=S.pointerType,this.state=S.state,this.i=S,S.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),ye=0;function _e(S,B,G,ie,Ae){this.listener=S,this.proxy=null,this.src=B,this.type=G,this.capture=!!ie,this.ha=Ae,this.key=++ye,this.da=this.fa=!1}function qe(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function Ve(S,B,G){for(const ie in S)B.call(G,S[ie],ie,S)}function tt(S,B){for(const G in S)B.call(void 0,S[G],G,S)}function me(S){const B={};for(const G in S)B[G]=S[G];return B}const Se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ye(S,B){let G,ie;for(let Ae=1;Ae<arguments.length;Ae++){ie=arguments[Ae];for(G in ie)S[G]=ie[G];for(let Le=0;Le<Se.length;Le++)G=Se[Le],Object.prototype.hasOwnProperty.call(ie,G)&&(S[G]=ie[G])}}function ze(S){this.src=S,this.g={},this.h=0}ze.prototype.add=function(S,B,G,ie,Ae){const Le=S.toString();S=this.g[Le],S||(S=this.g[Le]=[],this.h++);const at=$e(S,B,ie,Ae);return at>-1?(B=S[at],G||(B.fa=!1)):(B=new _e(B,this.src,Le,!!ie,Ae),B.fa=G,S.push(B)),B};function yt(S,B){const G=B.type;if(G in S.g){var ie=S.g[G],Ae=Array.prototype.indexOf.call(ie,B,void 0),Le;(Le=Ae>=0)&&Array.prototype.splice.call(ie,Ae,1),Le&&(qe(B),S.g[G].length==0&&(delete S.g[G],S.h--))}}function $e(S,B,G,ie){for(let Ae=0;Ae<S.length;++Ae){const Le=S[Ae];if(!Le.da&&Le.listener==B&&Le.capture==!!G&&Le.ha==ie)return Ae}return-1}var pt="closure_lm_"+(Math.random()*1e6|0),lt={};function Ne(S,B,G,ie,Ae){if(Array.isArray(B)){for(let Le=0;Le<B.length;Le++)Ne(S,B[Le],G,ie,Ae);return null}return G=Wt(G),S&&S[de]?S.J(B,G,f(ie)?!!ie.capture:!1,Ae):Xe(S,B,G,!1,ie,Ae)}function Xe(S,B,G,ie,Ae,Le){if(!B)throw Error("Invalid event type");const at=f(Ae)?!!Ae.capture:!!Ae;let qt=Zt(S);if(qt||(S[pt]=qt=new ze(S)),G=qt.add(B,G,ie,at,Le),G.proxy)return G;if(ie=Et(),G.proxy=ie,ie.src=S,ie.listener=G,S.addEventListener)Z||(Ae=at),Ae===void 0&&(Ae=!1),S.addEventListener(B.toString(),ie,Ae);else if(S.attachEvent)S.attachEvent(Kt(B.toString()),ie);else if(S.addListener&&S.removeListener)S.addListener(ie);else throw Error("addEventListener and attachEvent are unavailable.");return G}function Et(){function S(G){return B.call(S.src,S.listener,G)}const B=nt;return S}function Fe(S,B,G,ie,Ae){if(Array.isArray(B))for(var Le=0;Le<B.length;Le++)Fe(S,B[Le],G,ie,Ae);else ie=f(ie)?!!ie.capture:!!ie,G=Wt(G),S&&S[de]?(S=S.i,Le=String(B).toString(),Le in S.g&&(B=S.g[Le],G=$e(B,G,ie,Ae),G>-1&&(qe(B[G]),Array.prototype.splice.call(B,G,1),B.length==0&&(delete S.g[Le],S.h--)))):S&&(S=Zt(S))&&(B=S.g[B.toString()],S=-1,B&&(S=$e(B,G,ie,Ae)),(G=S>-1?B[S]:null)&&Rt(G))}function Rt(S){if(typeof S!="number"&&S&&!S.da){var B=S.src;if(B&&B[de])yt(B.i,S);else{var G=S.type,ie=S.proxy;B.removeEventListener?B.removeEventListener(G,ie,S.capture):B.detachEvent?B.detachEvent(Kt(G),ie):B.addListener&&B.removeListener&&B.removeListener(ie),(G=Zt(B))?(yt(G,S),G.h==0&&(G.src=null,B[pt]=null)):qe(S)}}}function Kt(S){return S in lt?lt[S]:lt[S]="on"+S}function nt(S,B){if(S.da)S=!0;else{B=new xe(B,this);const G=S.listener,ie=S.ha||S.src;S.fa&&Rt(S),S=G.call(ie,B)}return S}function Zt(S){return S=S[pt],S instanceof ze?S:null}var Jt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wt(S){return typeof S=="function"?S:(S[Jt]||(S[Jt]=function(B){return S.handleEvent(B)}),S[Jt])}function xt(){oe.call(this),this.i=new ze(this),this.M=this,this.G=null}_(xt,oe),xt.prototype[de]=!0,xt.prototype.removeEventListener=function(S,B,G,ie){Fe(this,S,B,G,ie)};function Mn(S,B){var G,ie=S.G;if(ie)for(G=[];ie;ie=ie.G)G.push(ie);if(S=S.M,ie=B.type||B,typeof B=="string")B=new ae(B,S);else if(B instanceof ae)B.target=B.target||S;else{var Ae=B;B=new ae(ie,S),Ye(B,Ae)}Ae=!0;let Le,at;if(G)for(at=G.length-1;at>=0;at--)Le=B.g=G[at],Ae=mt(Le,ie,!0,B)&&Ae;if(Le=B.g=S,Ae=mt(Le,ie,!0,B)&&Ae,Ae=mt(Le,ie,!1,B)&&Ae,G)for(at=0;at<G.length;at++)Le=B.g=G[at],Ae=mt(Le,ie,!1,B)&&Ae}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var S=this.i;for(const B in S.g){const G=S.g[B];for(let ie=0;ie<G.length;ie++)qe(G[ie]);delete S.g[B],S.h--}}this.G=null},xt.prototype.J=function(S,B,G,ie){return this.i.add(String(S),B,!1,G,ie)},xt.prototype.K=function(S,B,G,ie){return this.i.add(String(S),B,!0,G,ie)};function mt(S,B,G,ie){if(B=S.i.g[String(B)],!B)return!0;B=B.concat();let Ae=!0;for(let Le=0;Le<B.length;++Le){const at=B[Le];if(at&&!at.da&&at.capture==G){const qt=at.listener,kr=at.ha||at.src;at.fa&&yt(S.i,at),Ae=qt.call(kr,ie)!==!1&&Ae}}return Ae&&!ie.defaultPrevented}function Po(S,B){if(typeof S!="function")if(S&&typeof S.handleEvent=="function")S=p(S.handleEvent,S);else throw Error("Invalid listener argument");return Number(B)>2147483647?-1:l.setTimeout(S,B||0)}function Fs(S){S.g=Po(()=>{S.g=null,S.i&&(S.i=!1,Fs(S))},S.l);const B=S.h;S.h=null,S.m.apply(null,B)}class hr extends oe{constructor(B,G){super(),this.m=B,this.l=G,this.h=null,this.i=!1,this.g=null}j(B){this.h=arguments,this.g?this.i=!0:Fs(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xa(S){oe.call(this),this.h=S,this.g={}}_(xa,oe);var $n=[];function Ba(S){Ve(S.g,function(B,G){this.g.hasOwnProperty(G)&&Rt(B)},S),S.g={}}xa.prototype.N=function(){xa.Z.N.call(this),Ba(this)},xa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bi=l.JSON.stringify,Lr=l.JSON.parse,Ro=class{stringify(S){return l.JSON.stringify(S,void 0)}parse(S){return l.JSON.parse(S,void 0)}};function hs(){}function ms(){}var Tn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rt(){ae.call(this,"d")}_(rt,ae);function fn(){ae.call(this,"c")}_(fn,ae);var Ze={},Fn=null;function Ci(){return Fn=Fn||new xt}Ze.Ia="serverreachability";function Vs(S){ae.call(this,Ze.Ia,S)}_(Vs,ae);function ct(S){const B=Ci();Mn(B,new Vs(B))}Ze.STAT_EVENT="statevent";function nn(S,B){ae.call(this,Ze.STAT_EVENT,S),this.stat=B}_(nn,ae);function Yn(S){const B=Ci();Mn(B,new nn(B,S))}Ze.Ja="timingevent";function ba(S,B){ae.call(this,Ze.Ja,S),this.size=B}_(ba,ae);function Fa(S,B){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){S()},B)}function Er(){this.g=!0}Er.prototype.ua=function(){this.g=!1};function Ll(S,B,G,ie,Ae,Le){S.info(function(){if(S.g)if(Le){var at="",qt=Le.split("&");for(let bn=0;bn<qt.length;bn++){var kr=qt[bn].split("=");if(kr.length>1){const Un=kr[0];kr=kr[1];const Ia=Un.split("_");at=Ia.length>=2&&Ia[1]=="type"?at+(Un+"="+kr+"&"):at+(Un+"=redacted&")}}}else at=null;else at=Le;return"XMLHTTP REQ ("+ie+") [attempt "+Ae+"]: "+B+`
`+G+`
`+at})}function ii(S,B,G,ie,Ae,Le,at){S.info(function(){return"XMLHTTP RESP ("+ie+") [ attempt "+Ae+"]: "+B+`
`+G+`
`+Le+" "+at})}function Hr(S,B,G,ie){S.info(function(){return"XMLHTTP TEXT ("+B+"): "+ta(S,G)+(ie?" "+ie:"")})}function Ui(S,B){S.info(function(){return"TIMEOUT: "+B})}Er.prototype.info=function(){};function ta(S,B){if(!S.g)return B;if(!B)return null;try{const Le=JSON.parse(B);if(Le){for(S=0;S<Le.length;S++)if(Array.isArray(Le[S])){var G=Le[S];if(!(G.length<2)){var ie=G[1];if(Array.isArray(ie)&&!(ie.length<1)){var Ae=ie[0];if(Ae!="noop"&&Ae!="stop"&&Ae!="close")for(let at=1;at<ie.length;at++)ie[at]=""}}}}return bi(Le)}catch{return B}}var gs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_n={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mr;function Kr(){}_(Kr,hs),Kr.prototype.g=function(){return new XMLHttpRequest},mr=new Kr;function ci(S){return encodeURIComponent(String(S))}function fi(S){var B=1;S=S.split(":");const G=[];for(;B>0&&S.length;)G.push(S.shift()),B--;return S.length&&G.push(S.join(":")),G}function ft(S,B,G,ie){this.j=S,this.i=B,this.l=G,this.S=ie||1,this.V=new xa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Oi}function Oi(){this.i=null,this.g="",this.h=!1}var Vn={},gn={};function Nr(S,B,G){S.M=1,S.A=qi(Sr(B)),S.u=G,S.R=!0,Va(S,null)}function Va(S,B){S.F=Date.now(),Ni(S),S.B=Sr(S.A);var G=S.B,ie=S.S;Array.isArray(ie)||(ie=[String(ie)]),zn(G.i,"t",ie),S.C=0,G=S.j.L,S.h=new Oi,S.g=Br(S.j,G?B:null,!S.u),S.P>0&&(S.O=new hr(p(S.Y,S,S.g),S.P)),B=S.V,G=S.g,ie=S.ba;var Ae="readystatechange";Array.isArray(Ae)||(Ae&&($n[0]=Ae.toString()),Ae=$n);for(let Le=0;Le<Ae.length;Le++){const at=Ne(G,Ae[Le],ie||B.handleEvent,!1,B.h||B);if(!at)break;B.g[at.key]=at}B=S.J?me(S.J):{},S.u?(S.v||(S.v="POST"),B["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.B,S.v,S.u,B)):(S.v="GET",S.g.ea(S.B,S.v,null,B)),ct(),Ll(S.i,S.v,S.B,S.l,S.S,S.u)}ft.prototype.ba=function(S){S=S.target;const B=this.O;B&&qa(S)==3?B.j():this.Y(S)},ft.prototype.Y=function(S){try{if(S==this.g)e:{const qt=qa(this.g),kr=this.g.ya(),bn=this.g.ca();if(!(qt<3)&&(qt!=3||this.g&&(this.h.h||this.g.la()||ir(this.g)))){this.K||qt!=4||kr==7||(kr==8||bn<=0?ct(3):ct(2)),Qn(this);var B=this.g.ca();this.X=B;var G=Qo(this);if(this.o=B==200,ii(this.i,this.v,this.B,this.l,this.S,qt,B),this.o){if(this.U&&!this.L){t:{if(this.g){var ie,Ae=this.g;if((ie=Ae.g?Ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(ie)){var Le=ie;break t}}Le=null}if(S=Le)Hr(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rr(this,S);else{this.o=!1,this.m=3,Yn(12),$r(this),Mt(this);break e}}if(this.R){S=!0;let Un;for(;!this.K&&this.C<G.length;)if(Un=Bl(this,G),Un==gn){qt==4&&(this.m=4,Yn(14),S=!1),Hr(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==Vn){this.m=4,Yn(15),Hr(this.i,this.l,G,"[Invalid Chunk]"),S=!1;break}else Hr(this.i,this.l,Un,null),rr(this,Un);if(Wr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||G.length!=0||this.h.h||(this.m=1,Yn(16),S=!1),this.o=this.o&&S,!S)Hr(this.i,this.l,G,"[Invalid Chunked Response]"),$r(this),Mt(this);else if(G.length>0&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.aa&&!at.P&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),ke(at),at.P=!0,Yn(11))}}else Hr(this.i,this.l,G,null),rr(this,G);qt==4&&$r(this),this.o&&!this.K&&(qt==4?Ha(this.j,this):(this.o=!1,Ni(this)))}else Ta(this.g),B==400&&G.indexOf("Unknown SID")>0?(this.m=3,Yn(12)):(this.m=0,Yn(13)),$r(this),Mt(this)}}}catch{}};function Qo(S){if(!Wr(S))return S.g.la();const B=ir(S.g);if(B==="")return"";let G="";const ie=B.length,Ae=qa(S.g)==4;if(!S.h.i){if(typeof TextDecoder>"u")return $r(S),Mt(S),"";S.h.i=new l.TextDecoder}for(let Le=0;Le<ie;Le++)S.h.h=!0,G+=S.h.i.decode(B[Le],{stream:!(Ae&&Le==ie-1)});return B.length=0,S.h.g+=G,S.C=0,S.h.g}function Wr(S){return S.g?S.v=="GET"&&S.M!=2&&S.j.Aa:!1}function Bl(S,B){var G=S.C,ie=B.indexOf(`
`,G);return ie==-1?gn:(G=Number(B.substring(G,ie)),isNaN(G)?Vn:(ie+=1,ie+G>B.length?gn:(B=B.slice(ie,ie+G),S.C=ie+G,B)))}ft.prototype.cancel=function(){this.K=!0,$r(this)};function Ni(S){S.T=Date.now()+S.H,Pi(S,S.H)}function Pi(S,B){if(S.D!=null)throw Error("WatchDog timer not null");S.D=Fa(p(S.aa,S),B)}function Qn(S){S.D&&(l.clearTimeout(S.D),S.D=null)}ft.prototype.aa=function(){this.D=null;const S=Date.now();S-this.T>=0?(Ui(this.i,this.B),this.M!=2&&(ct(),Yn(17)),$r(this),this.m=2,Mt(this)):Pi(this,this.T-S)};function Mt(S){S.j.I==0||S.K||Ha(S.j,S)}function $r(S){Qn(S);var B=S.O;B&&typeof B.dispose=="function"&&B.dispose(),S.O=null,Ba(S.V),S.g&&(B=S.g,S.g=null,B.abort(),B.dispose())}function rr(S,B){try{var G=S.j;if(G.I!=0&&(G.g==S||wi(G.h,S))){if(!S.L&&wi(G.h,S)&&G.I==3){try{var ie=G.Ba.g.parse(B)}catch{ie=null}if(Array.isArray(ie)&&ie.length==3){var Ae=ie;if(Ae[0]==0){e:if(!G.v){if(G.g)if(G.g.F+3e3<S.F)Dr(G),ss(G);else break e;vs(G),Yn(18)}}else G.xa=Ae[1],0<G.xa-G.K&&Ae[2]<37500&&G.F&&G.A==0&&!G.C&&(G.C=Fa(p(G.Va,G),6e3));In(G.h)<=1&&G.ta&&(G.ta=void 0)}else Ka(G,11)}else if((S.L||G.g==S)&&Dr(G),!ee(B))for(Ae=G.Ba.g.parse(B),B=0;B<Ae.length;B++){let bn=Ae[B];const Un=bn[0];if(!(Un<=G.K))if(G.K=Un,bn=bn[1],G.I==2)if(bn[0]=="c"){G.M=bn[1],G.ba=bn[2];const Ia=bn[3];Ia!=null&&(G.ka=Ia,G.j.info("VER="+G.ka));const Wa=bn[4];Wa!=null&&(G.za=Wa,G.j.info("SVER="+G.za));const di=bn[5];di!=null&&typeof di=="number"&&di>0&&(ie=1.5*di,G.O=ie,G.j.info("backChannelRequestTimeoutMs_="+ie)),ie=G;const Ca=S.g;if(Ca){const co=Ca.g?Ca.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(co){var Le=ie.h;Le.g||co.indexOf("spdy")==-1&&co.indexOf("quic")==-1&&co.indexOf("h2")==-1||(Le.j=Le.l,Le.g=new Set,Le.h&&(as(Le,Le.h),Le.h=null))}if(ie.G){const bs=Ca.g?Ca.g.getResponseHeader("X-HTTP-Session-Id"):null;bs&&(ie.wa=bs,Vt(ie.J,ie.G,bs))}}G.I=3,G.l&&G.l.ra(),G.aa&&(G.T=Date.now()-S.F,G.j.info("Handshake RTT: "+G.T+"ms")),ie=G;var at=S;if(ie.na=rl(ie,ie.L?ie.ba:null,ie.W),at.L){yn(ie.h,at);var qt=at,kr=ie.O;kr&&(qt.H=kr),qt.D&&(Qn(qt),Ni(qt)),ie.g=at}else ia(ie);G.i.length>0&&ps(G)}else bn[0]!="stop"&&bn[0]!="close"||Ka(G,7);else G.I==3&&(bn[0]=="stop"||bn[0]=="close"?bn[0]=="stop"?Ka(G,7):Us(G):bn[0]!="noop"&&G.l&&G.l.qa(bn),G.A=0)}}ct(4)}catch{}}var Ar=class{constructor(S,B){this.g=S,this.map=B}};function Ge(S){this.l=S||10,l.PerformanceNavigationTiming?(S=l.performance.getEntriesByType("navigation"),S=S.length>0&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function lo(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function In(S){return S.h?1:S.g?S.g.size:0}function wi(S,B){return S.h?S.h==B:S.g?S.g.has(B):!1}function as(S,B){S.g?S.g.add(B):S.h=B}function yn(S,B){S.h&&S.h==B?S.h=null:S.g&&S.g.has(B)&&S.g.delete(B)}Ge.prototype.cancel=function(){if(this.i=un(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function un(S){if(S.h!=null)return S.i.concat(S.h.G);if(S.g!=null&&S.g.size!==0){let B=S.i;for(const G of S.g.values())B=B.concat(G.G);return B}return N(S.i)}var rn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qt(S,B){if(S){S=S.split("&");for(let G=0;G<S.length;G++){const ie=S[G].indexOf("=");let Ae,Le=null;ie>=0?(Ae=S[G].substring(0,ie),Le=S[G].substring(ie+1)):Ae=S[G],B(Ae,Le?decodeURIComponent(Le.replace(/\+/g," ")):"")}}}function Ri(S){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let B;S instanceof Ri?(this.l=S.l,an(this,S.j),this.o=S.o,this.g=S.g,ai(this,S.u),this.h=S.h,Zo(this,Fl(S.i)),this.m=S.m):S&&(B=String(S).match(rn))?(this.l=!1,an(this,B[1]||"",!0),this.o=vn(B[2]||""),this.g=vn(B[3]||"",!0),ai(this,B[4]),this.h=vn(B[5]||"",!0),Zo(this,B[6]||"",!0),this.m=vn(B[7]||"")):(this.l=!1,this.i=new Rr(null,this.l))}Ri.prototype.toString=function(){const S=[];var B=this.j;B&&S.push(Di(B,Zn,!0),":");var G=this.g;return(G||B=="file")&&(S.push("//"),(B=this.o)&&S.push(Di(B,Zn,!0),"@"),S.push(ci(G).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),G=this.u,G!=null&&S.push(":",String(G))),(G=this.h)&&(this.g&&G.charAt(0)!="/"&&S.push("/"),S.push(Di(G,G.charAt(0)=="/"?ce:Te,!0))),(G=this.i.toString())&&S.push("?",G),(G=this.m)&&S.push("#",Di(G,Pr)),S.join("")},Ri.prototype.resolve=function(S){const B=Sr(this);let G=!!S.j;G?an(B,S.j):G=!!S.o,G?B.o=S.o:G=!!S.g,G?B.g=S.g:G=S.u!=null;var ie=S.h;if(G)ai(B,S.u);else if(G=!!S.h){if(ie.charAt(0)!="/")if(this.g&&!this.h)ie="/"+ie;else{var Ae=B.h.lastIndexOf("/");Ae!=-1&&(ie=B.h.slice(0,Ae+1)+ie)}if(Ae=ie,Ae==".."||Ae==".")ie="";else if(Ae.indexOf("./")!=-1||Ae.indexOf("/.")!=-1){ie=Ae.lastIndexOf("/",0)==0,Ae=Ae.split("/");const Le=[];for(let at=0;at<Ae.length;){const qt=Ae[at++];qt=="."?ie&&at==Ae.length&&Le.push(""):qt==".."?((Le.length>1||Le.length==1&&Le[0]!="")&&Le.pop(),ie&&at==Ae.length&&Le.push("")):(Le.push(qt),ie=!0)}ie=Le.join("/")}else ie=Ae}return G?B.h=ie:G=S.i.toString()!=="",G?Zo(B,Fl(S.i)):G=!!S.m,G&&(B.m=S.m),B};function Sr(S){return new Ri(S)}function an(S,B,G){S.j=G?vn(B,!0):B,S.j&&(S.j=S.j.replace(/:$/,""))}function ai(S,B){if(B){if(B=Number(B),isNaN(B)||B<0)throw Error("Bad port number "+B);S.u=B}else S.u=null}function Zo(S,B,G){B instanceof Rr?(S.i=B,wa(S.i,S.l)):(G||(B=Di(B,_t)),S.i=new Rr(B,S.l))}function Vt(S,B,G){S.i.set(B,G)}function qi(S){return Vt(S,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),S}function vn(S,B){return S?B?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function Di(S,B,G){return typeof S=="string"?(S=encodeURI(S).replace(B,$t),G&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function $t(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var Zn=/[#\/\?@]/g,Te=/[#\?:]/g,ce=/[#\?]/g,_t=/[#\?@]/g,Pr=/#/g;function Rr(S,B){this.h=this.g=null,this.i=S||null,this.j=!!B}function Gi(S){S.g||(S.g=new Map,S.h=0,S.i&&Qt(S.i,function(B,G){S.add(decodeURIComponent(B.replace(/\+/g," ")),G)}))}t=Rr.prototype,t.add=function(S,B){Gi(this),this.i=null,S=Yr(this,S);let G=this.g.get(S);return G||this.g.set(S,G=[]),G.push(B),this.h+=1,this};function Jo(S,B){Gi(S),B=Yr(S,B),S.g.has(B)&&(S.i=null,S.h-=S.g.get(B).length,S.g.delete(B))}function zt(S,B){return Gi(S),B=Yr(S,B),S.g.has(B)}t.forEach=function(S,B){Gi(this),this.g.forEach(function(G,ie){G.forEach(function(Ae){S.call(B,Ae,ie,this)},this)},this)};function Nt(S,B){Gi(S);let G=[];if(typeof B=="string")zt(S,B)&&(G=G.concat(S.g.get(Yr(S,B))));else for(S=Array.from(S.g.values()),B=0;B<S.length;B++)G=G.concat(S[B]);return G}t.set=function(S,B){return Gi(this),this.i=null,S=Yr(this,S),zt(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[B]),this.h+=1,this},t.get=function(S,B){return S?(S=Nt(this,S),S.length>0?String(S[0]):B):B};function zn(S,B,G){Jo(S,B),G.length>0&&(S.i=null,S.g.set(Yr(S,B),N(G)),S.h+=G.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],B=Array.from(this.g.keys());for(let ie=0;ie<B.length;ie++){var G=B[ie];const Ae=ci(G);G=Nt(this,G);for(let Le=0;Le<G.length;Le++){let at=Ae;G[Le]!==""&&(at+="="+ci(G[Le])),S.push(at)}}return this.i=S.join("&")};function Fl(S){const B=new Rr;return B.i=S.i,S.g&&(B.g=new Map(S.g),B.h=S.h),B}function Yr(S,B){return B=String(B),S.j&&(B=B.toLowerCase()),B}function wa(S,B){B&&!S.j&&(Gi(S),S.i=null,S.g.forEach(function(G,ie){const Ae=ie.toLowerCase();ie!=Ae&&(Jo(this,ie),zn(this,Ae,G))},S)),S.j=B}function _i(S,B){const G=new Er;if(l.Image){const ie=new Image;ie.onload=b(_a,G,"TestLoadImage: loaded",!0,B,ie),ie.onerror=b(_a,G,"TestLoadImage: error",!1,B,ie),ie.onabort=b(_a,G,"TestLoadImage: abort",!1,B,ie),ie.ontimeout=b(_a,G,"TestLoadImage: timeout",!1,B,ie),l.setTimeout(function(){ie.ontimeout&&ie.ontimeout()},1e4),ie.src=S}else B(!1)}function na(S,B){const G=new Er,ie=new AbortController,Ae=setTimeout(()=>{ie.abort(),_a(G,"TestPingServer: timeout",!1,B)},1e4);fetch(S,{signal:ie.signal}).then(Le=>{clearTimeout(Ae),Le.ok?_a(G,"TestPingServer: ok",!0,B):_a(G,"TestPingServer: server error",!1,B)}).catch(()=>{clearTimeout(Ae),_a(G,"TestPingServer: error",!1,B)})}function _a(S,B,G,ie,Ae){try{Ae&&(Ae.onload=null,Ae.onerror=null,Ae.onabort=null,Ae.ontimeout=null),ie(G)}catch{}}function Jn(){this.g=new Ro}function jn(S){this.i=S.Sb||null,this.h=S.ab||!1}_(jn,hs),jn.prototype.g=function(){return new Tr(this.i,this.h)};function Tr(S,B){xt.call(this),this.H=S,this.o=B,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Tr,xt),t=Tr.prototype,t.open=function(S,B){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=S,this.D=B,this.readyState=1,Lt(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const B={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};S&&(B.body=S),(this.H||l).fetch(new Request(this.D,B)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,za(this)),this.readyState=0},t.Pa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Lt(this)),this.g&&(this.readyState=3,Lt(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pt(this)}else S.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pt(S){S.j.read().then(S.Ma.bind(S)).catch(S.ga.bind(S))}t.Ma=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var B=S.value?S.value:new Uint8Array(0);(B=this.B.decode(B,{stream:!S.done}))&&(this.response=this.responseText+=B)}S.done?za(this):Lt(this),this.readyState==3&&Pt(this)}},t.Oa=function(S){this.g&&(this.response=this.responseText=S,za(this))},t.Na=function(S){this.g&&(this.response=S,za(this))},t.ga=function(){this.g&&za(this)};function za(S){S.readyState=4,S.l=null,S.j=null,S.B=null,Lt(S)}t.setRequestHeader=function(S,B){this.A.append(S,B)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],B=this.h.entries();for(var G=B.next();!G.done;)G=G.value,S.push(G[0]+": "+G[1]),G=B.next();return S.join(`\r
`)};function Lt(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(Tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function xn(S){let B="";return Ve(S,function(G,ie){B+=ie,B+=":",B+=G,B+=`\r
`}),B}function Do(S,B,G){e:{for(ie in G){var ie=!1;break e}ie=!0}ie||(G=xn(G),typeof S=="string"?G!=null&&ci(G):Vt(S,B,G))}function sn(S){xt.call(this),this.headers=new Map,this.L=S||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(sn,xt);var Ea=/^https?$/i,Ua=["POST","PUT"];t=sn.prototype,t.Fa=function(S){this.H=S},t.ea=function(S,B,G,ie){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);B=B?B.toUpperCase():"GET",this.D=S,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mr.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(B,String(S),!0),this.B=!1}catch(Le){zs(this,Le);return}if(S=G||"",G=new Map(this.headers),ie)if(Object.getPrototypeOf(ie)===Object.prototype)for(var Ae in ie)G.set(Ae,ie[Ae]);else if(typeof ie.keys=="function"&&typeof ie.get=="function")for(const Le of ie.keys())G.set(Le,ie.get(Le));else throw Error("Unknown input type for opt_headers: "+String(ie));ie=Array.from(G.keys()).find(Le=>Le.toLowerCase()=="content-type"),Ae=l.FormData&&S instanceof l.FormData,!(Array.prototype.indexOf.call(Ua,B,void 0)>=0)||ie||Ae||G.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Le,at]of G)this.g.setRequestHeader(Le,at);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(S),this.v=!1}catch(Le){zs(this,Le)}};function zs(S,B){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=B,S.o=5,Aa(S),ra(S)}function Aa(S){S.A||(S.A=!0,Mn(S,"complete"),Mn(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=S||7,Mn(this,"complete"),Mn(this,"abort"),ra(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ra(this,!0)),sn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Sa(this):this.Xa())},t.Xa=function(){Sa(this)};function Sa(S){if(S.h&&typeof a<"u"){if(S.v&&qa(S)==4)setTimeout(S.Ca.bind(S),0);else if(Mn(S,"readystatechange"),qa(S)==4){S.h=!1;try{const Le=S.ca();e:switch(Le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var B=!0;break e;default:B=!1}var G;if(!(G=B)){var ie;if(ie=Le===0){let at=String(S.D).match(rn)[1]||null;!at&&l.self&&l.self.location&&(at=l.self.location.protocol.slice(0,-1)),ie=!Ea.test(at?at.toLowerCase():"")}G=ie}if(G)Mn(S,"complete"),Mn(S,"success");else{S.o=6;try{var Ae=qa(S)>2?S.g.statusText:""}catch{Ae=""}S.l=Ae+" ["+S.ca()+"]",Aa(S)}}finally{ra(S)}}}}function ra(S,B){if(S.g){S.m&&(clearTimeout(S.m),S.m=null);const G=S.g;S.g=null,B||Mn(S,"ready");try{G.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function qa(S){return S.g?S.g.readyState:0}t.ca=function(){try{return qa(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(S){if(this.g){var B=this.g.responseText;return S&&B.indexOf(S)==0&&(B=B.substring(S.length)),Lr(B)}};function ir(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.F){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function Ta(S){const B={};S=(S.g&&qa(S)>=2&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let ie=0;ie<S.length;ie++){if(ee(S[ie]))continue;var G=fi(S[ie]);const Ae=G[0];if(G=G[1],typeof G!="string")continue;G=G.trim();const Le=B[Ae]||[];B[Ae]=Le,Le.push(G)}tt(B,function(ie){return ie.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ir(S,B,G){return G&&G.internalChannelParams&&G.internalChannelParams[S]||B}function Ga(S){this.za=0,this.i=[],this.j=new Er,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ir("failFast",!1,S),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ir("baseRetryDelayMs",5e3,S),this.Za=Ir("retryDelaySeedMs",1e4,S),this.Ta=Ir("forwardChannelMaxRetries",2,S),this.va=Ir("forwardChannelRequestTimeoutMs",2e4,S),this.ma=S&&S.xmlHttpFactory||void 0,this.Ua=S&&S.Rb||void 0,this.Aa=S&&S.useFetchStreams||!1,this.O=void 0,this.L=S&&S.supportsCrossDomainXhr||!1,this.M="",this.h=new Ge(S&&S.concurrentRequestLimit),this.Ba=new Jn,this.S=S&&S.fastHandshake||!1,this.R=S&&S.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=S&&S.Pb||!1,S&&S.ua&&this.j.ua(),S&&S.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&S&&S.detectBufferingProxy||!1,this.ia=void 0,S&&S.longPollingTimeout&&S.longPollingTimeout>0&&(this.ia=S.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ga.prototype,t.ka=8,t.I=1,t.connect=function(S,B,G,ie){Yn(0),this.W=S,this.H=B||{},G&&ie!==void 0&&(this.H.OSID=G,this.H.OAID=ie),this.F=this.X,this.J=rl(this,null,this.W),ps(this)};function Us(S){if(el(S),S.I==3){var B=S.V++,G=Sr(S.J);if(Vt(G,"SID",S.M),Vt(G,"RID",B),Vt(G,"TYPE","terminate"),ys(S,G),B=new ft(S,S.j,B),B.M=2,B.A=qi(Sr(G)),G=!1,l.navigator&&l.navigator.sendBeacon)try{G=l.navigator.sendBeacon(B.A.toString(),"")}catch{}!G&&l.Image&&(new Image().src=B.A,G=!0),G||(B.g=Br(B.j,null),B.g.ea(B.A)),B.F=Date.now(),Ni(B)}nl(S)}function ss(S){S.g&&(ke(S),S.g.cancel(),S.g=null)}function el(S){ss(S),S.v&&(l.clearTimeout(S.v),S.v=null),Dr(S),S.h.cancel(),S.m&&(typeof S.m=="number"&&l.clearTimeout(S.m),S.m=null)}function ps(S){if(!lo(S.h)&&!S.m){S.m=!0;var B=S.Ea;se||W(),J||(se(),J=!0),V.add(B,S),S.D=0}}function tl(S,B){return In(S.h)>=S.h.j-(S.m?1:0)?!1:S.m?(S.i=B.G.concat(S.i),!0):S.I==1||S.I==2||S.D>=(S.Sa?0:S.Ta)?!1:(S.m=Fa(p(S.Ea,S,B),ko(S,S.D)),S.D++,!0)}t.Ea=function(S){if(this.m)if(this.m=null,this.I==1){if(!S){this.V=Math.floor(Math.random()*1e5),S=this.V++;const Ae=new ft(this,this.j,S);let Le=this.o;if(this.U&&(Le?(Le=me(Le),Ye(Le,this.U)):Le=this.U),this.u!==null||this.R||(Ae.J=Le,Le=null),this.S)e:{for(var B=0,G=0;G<this.i.length;G++){t:{var ie=this.i[G];if("__data__"in ie.map&&(ie=ie.map.__data__,typeof ie=="string")){ie=ie.length;break t}ie=void 0}if(ie===void 0)break;if(B+=ie,B>4096){B=G;break e}if(B===4096||G===this.i.length-1){B=G+1;break e}}B=1e3}else B=1e3;B=uo(this,Ae,B),G=Sr(this.J),Vt(G,"RID",S),Vt(G,"CVER",22),this.G&&Vt(G,"X-HTTP-Session-Id",this.G),ys(this,G),Le&&(this.R?B="headers="+ci(xn(Le))+"&"+B:this.u&&Do(G,this.u,Le)),as(this.h,Ae),this.Ra&&Vt(G,"TYPE","init"),this.S?(Vt(G,"$req",B),Vt(G,"SID","null"),Ae.U=!0,Nr(Ae,G,null)):Nr(Ae,G,B),this.I=2}}else this.I==3&&(S?En(this,S):this.i.length==0||lo(this.h)||En(this))};function En(S,B){var G;B?G=B.l:G=S.V++;const ie=Sr(S.J);Vt(ie,"SID",S.M),Vt(ie,"RID",G),Vt(ie,"AID",S.K),ys(S,ie),S.u&&S.o&&Do(ie,S.u,S.o),G=new ft(S,S.j,G,S.D+1),S.u===null&&(G.J=S.o),B&&(S.i=B.G.concat(S.i)),B=uo(S,G,1e3),G.H=Math.round(S.va*.5)+Math.round(S.va*.5*Math.random()),as(S.h,G),Nr(G,ie,B)}function ys(S,B){S.H&&Ve(S.H,function(G,ie){Vt(B,ie,G)}),S.l&&Ve({},function(G,ie){Vt(B,ie,G)})}function uo(S,B,G){G=Math.min(S.i.length,G);const ie=S.l?p(S.l.Ka,S.l,S):null;e:{var Ae=S.i;let qt=-1;for(;;){const kr=["count="+G];qt==-1?G>0?(qt=Ae[0].g,kr.push("ofs="+qt)):qt=0:kr.push("ofs="+qt);let bn=!0;for(let Un=0;Un<G;Un++){var Le=Ae[Un].g;const Ia=Ae[Un].map;if(Le-=qt,Le<0)qt=Math.max(0,Ae[Un].g-100),bn=!1;else try{Le="req"+Le+"_"||"";try{var at=Ia instanceof Map?Ia:Object.entries(Ia);for(const[Wa,di]of at){let Ca=di;f(di)&&(Ca=bi(di)),kr.push(Le+Wa+"="+encodeURIComponent(Ca))}}catch(Wa){throw kr.push(Le+"type="+encodeURIComponent("_badmap")),Wa}}catch{ie&&ie(Ia)}}if(bn){at=kr.join("&");break e}}at=void 0}return S=S.i.splice(0,G),B.G=S,at}function ia(S){if(!S.g&&!S.v){S.Y=1;var B=S.Da;se||W(),J||(se(),J=!0),V.add(B,S),S.A=0}}function vs(S){return S.g||S.v||S.A>=3?!1:(S.Y++,S.v=Fa(p(S.Da,S),ko(S,S.A)),S.A++,!0)}t.Da=function(){if(this.v=null,Yt(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var S=4*this.T;this.j.info("BP detection timer enabled: "+S),this.B=Fa(p(this.Wa,this),S)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Yn(10),ss(this),Yt(this))};function ke(S){S.B!=null&&(l.clearTimeout(S.B),S.B=null)}function Yt(S){S.g=new ft(S,S.j,"rpc",S.Y),S.u===null&&(S.g.J=S.o),S.g.P=0;var B=Sr(S.na);Vt(B,"RID","rpc"),Vt(B,"SID",S.M),Vt(B,"AID",S.K),Vt(B,"CI",S.F?"0":"1"),!S.F&&S.ia&&Vt(B,"TO",S.ia),Vt(B,"TYPE","xmlhttp"),ys(S,B),S.u&&S.o&&Do(B,S.u,S.o),S.O&&(S.g.H=S.O);var G=S.g;S=S.ba,G.M=1,G.A=qi(Sr(B)),G.u=null,G.R=!0,Va(G,S)}t.Va=function(){this.C!=null&&(this.C=null,ss(this),vs(this),Yn(19))};function Dr(S){S.C!=null&&(l.clearTimeout(S.C),S.C=null)}function Ha(S,B){var G=null;if(S.g==B){Dr(S),ke(S),S.g=null;var ie=2}else if(wi(S.h,B))G=B.G,yn(S.h,B),ie=1;else return;if(S.I!=0){if(B.o)if(ie==1){G=B.u?B.u.length:0,B=Date.now()-B.F;var Ae=S.D;ie=Ci(),Mn(ie,new ba(ie,G)),ps(S)}else ia(S);else if(Ae=B.m,Ae==3||Ae==0&&B.X>0||!(ie==1&&tl(S,B)||ie==2&&vs(S)))switch(G&&G.length>0&&(B=S.h,B.i=B.i.concat(G)),Ae){case 1:Ka(S,5);break;case 4:Ka(S,10);break;case 3:Ka(S,6);break;default:Ka(S,2)}}}function ko(S,B){let G=S.Qa+Math.floor(Math.random()*S.Za);return S.isActive()||(G*=2),G*B}function Ka(S,B){if(S.j.info("Error code "+B),B==2){var G=p(S.bb,S),ie=S.Ua;const Ae=!ie;ie=new Ri(ie||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||an(ie,"https"),qi(ie),Ae?_i(ie.toString(),G):na(ie.toString(),G)}else Yn(2);S.I=0,S.l&&S.l.pa(B),nl(S),el(S)}t.bb=function(S){S?(this.j.info("Successfully pinged google.com"),Yn(2)):(this.j.info("Failed to ping google.com"),Yn(1))};function nl(S){if(S.I=0,S.ja=[],S.l){const B=un(S.h);(B.length!=0||S.i.length!=0)&&(j(S.ja,B),j(S.ja,S.i),S.h.i.length=0,N(S.i),S.i.length=0),S.l.oa()}}function rl(S,B,G){var ie=G instanceof Ri?Sr(G):new Ri(G);if(ie.g!="")B&&(ie.g=B+"."+ie.g),ai(ie,ie.u);else{var Ae=l.location;ie=Ae.protocol,B=B?B+"."+Ae.hostname:Ae.hostname,Ae=+Ae.port;const Le=new Ri(null);ie&&an(Le,ie),B&&(Le.g=B),Ae&&ai(Le,Ae),G&&(Le.h=G),ie=Le}return G=S.G,B=S.wa,G&&B&&Vt(ie,G,B),Vt(ie,"VER",S.ka),ys(S,ie),ie}function Br(S,B,G){if(B&&!S.L)throw Error("Can't create secondary domain capable XhrIo object.");return B=S.Aa&&!S.ma?new sn(new jn({ab:G})):new sn(S.ma),B.Fa(S.L),B}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function er(){}t=er.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function aa(){}aa.prototype.g=function(S,B){return new dn(S,B)};function dn(S,B){xt.call(this),this.g=new Ga(B),this.l=S,this.h=B&&B.messageUrlParams||null,S=B&&B.messageHeaders||null,B&&B.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=B&&B.initMessageHeaders||null,B&&B.messageContentType&&(S?S["X-WebChannel-Content-Type"]=B.messageContentType:S={"X-WebChannel-Content-Type":B.messageContentType}),B&&B.sa&&(S?S["X-WebChannel-Client-Profile"]=B.sa:S={"X-WebChannel-Client-Profile":B.sa}),this.g.U=S,(S=B&&B.Qb)&&!ee(S)&&(this.g.u=S),this.A=B&&B.supportsCrossDomainXhr||!1,this.v=B&&B.sendRawJson||!1,(B=B&&B.httpSessionIdParam)&&!ee(B)&&(this.g.G=B,S=this.h,S!==null&&B in S&&(S=this.h,B in S&&delete S[B])),this.j=new pn(this)}_(dn,xt),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Us(this.g)},dn.prototype.o=function(S){var B=this.g;if(typeof S=="string"){var G={};G.__data__=S,S=G}else this.v&&(G={},G.__data__=bi(S),S=G);B.i.push(new Ar(B.Ya++,S)),B.I==3&&ps(B)},dn.prototype.N=function(){this.g.l=null,delete this.j,Us(this.g),delete this.g,dn.Z.N.call(this)};function xs(S){rt.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var B=S.__sm__;if(B){e:{for(const G in B){S=G;break e}S=void 0}(this.i=S)&&(S=this.i,B=B!==null&&S in B?B[S]:void 0),this.data=B}else this.data=S}_(xs,rt);function os(){fn.call(this),this.status=1}_(os,fn);function pn(S){this.g=S}_(pn,er),pn.prototype.ra=function(){Mn(this.g,"a")},pn.prototype.qa=function(S){Mn(this.g,new xs(S))},pn.prototype.pa=function(S){Mn(this.g,new os)},pn.prototype.oa=function(){Mn(this.g,"b")},aa.prototype.createWebChannel=aa.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,Z5=function(){return new aa},Q5=function(){return Ci()},X5=Ze,VE={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},gs.NO_ERROR=0,gs.TIMEOUT=8,gs.HTTP_ERROR=6,gy=gs,_n.COMPLETE="complete",Y5=_n,ms.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",xt.prototype.listen=xt.prototype.J,Gg=ms,sn.prototype.listenOnce=sn.prototype.K,sn.prototype.getLastError=sn.prototype.Ha,sn.prototype.getLastErrorCode=sn.prototype.ya,sn.prototype.getStatus=sn.prototype.ca,sn.prototype.getResponseJson=sn.prototype.La,sn.prototype.getResponseText=sn.prototype.la,sn.prototype.send=sn.prototype.ea,sn.prototype.setWithCredentials=sn.prototype.Fa,$5=sn}).apply(typeof B1<"u"?B1:typeof self<"u"?self:typeof window<"u"?window:{});let da=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};da.UNAUTHENTICATED=new da(null),da.GOOGLE_CREDENTIALS=new da("google-credentials-uid"),da.FIRST_PARTY=new da("first-party-uid"),da.MOCK_USER=new da("mock-user");let xm="12.9.0";function r$(t){xm=t}const Fc=new FS("@firebase/firestore");function yh(){return Fc.logLevel}function i$(t){Fc.setLogLevel(t)}function et(t,...e){if(Fc.logLevel<=Dn.DEBUG){const n=e.map(zS);Fc.debug(`Firestore (${xm}): ${t}`,...n)}}function Si(t,...e){if(Fc.logLevel<=Dn.ERROR){const n=e.map(zS);Fc.error(`Firestore (${xm}): ${t}`,...n)}}function Ls(t,...e){if(Fc.logLevel<=Dn.WARN){const n=e.map(zS);Fc.warn(`Firestore (${xm}): ${t}`,...n)}}function zS(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function wt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,J5(t,r,n)}function J5(t,e,n){let r=`FIRESTORE (${xm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Si(r),new Error(r)}function Ot(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||J5(e,i,r)}function a$(t,e){t||wt(57014,e)}function ht(t,e){return t}const De={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class We extends Ru{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pa{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class ej{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(da.UNAUTHENTICATED)))}shutdown(){}}class s${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class o${constructor(e){this.t=e,this.currentUser=da.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ot(this.o===void 0,42304);let r=this.i;const i=m=>this.i!==r?(r=this.i,n(m)):Promise.resolve();let a=new pa;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new pa,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const m=a;e.enqueueRetryable((async()=>{await m.promise,await i(this.currentUser)}))},f=m=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new pa)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ot(typeof r.accessToken=="string",31837,{l:r}),new ej(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ot(e===null||typeof e=="string",2055,{h:e}),new da(e)}}class l${constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=da.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class u${constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new l$(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(da.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c${constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Eo(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ot(this.o===void 0,3512);const r=a=>{a.error!=null&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,et("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new zE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ot(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class f${getToken(){return Promise.resolve(new zE(""))}invalidateToken(){}start(e,n){}shutdown(){}}function d$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class xx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=d$(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function Gt(t,e){return t<e?-1:t>e?1:0}function UE(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return z_(i)===z_(a)?Gt(i,a):z_(i)?1:-1}return Gt(t.length,e.length)}const h$=55296,m$=57343;function z_(t){const e=t.charCodeAt(0);return e>=h$&&e<=m$}function Bh(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function nj(t){return t+"\0"}const qE="__name__";class hl{constructor(e,n,r){n===void 0?n=0:n>e.length&&wt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&wt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return hl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hl?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=hl.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return Gt(e.length,n.length)}static compareSegments(e,n){const r=hl.isNumericId(e),i=hl.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?hl.extractNumericId(e).compare(hl.extractNumericId(n)):UE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return kc.fromString(e.substring(4,e.length-2))}}class An extends hl{construct(e,n,r){return new An(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new We(De.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new An(n)}static emptyPath(){return new An([])}}const g$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qr extends hl{construct(e,n,r){return new qr(e,n,r)}static isValidIdentifier(e){return g$.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qE}static keyField(){return new qr([qE])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new We(De.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if(f==="\\"){if(i+1===e.length)throw new We(De.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new We(De.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else f==="`"?(l=!l,i++):f!=="."||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new We(De.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qr(n)}static emptyPath(){return new qr([])}}class dt{constructor(e){this.path=e}static fromPath(e){return new dt(An.fromString(e))}static fromName(e){return new dt(An.fromString(e).popFirst(5))}static empty(){return new dt(An.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&An.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return An.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dt(new An(e.slice()))}}function US(t,e,n){if(!n)throw new We(De.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rj(t,e,n,r){if(e===!0&&r===!0)throw new We(De.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function UP(t){if(!dt.isDocumentKey(t))throw new We(De.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qP(t){if(dt.isDocumentKey(t))throw new We(De.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ij(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function bx(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":wt(12329,{type:typeof t})}function Sn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new We(De.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bx(t);throw new We(De.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function aj(t,e){if(e<=0)throw new We(De.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Fi(t,e){const n={typeString:t};return e&&(n.value=e),n}function _d(t,e){if(!ij(t))throw new We(De.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(i&&typeof l!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new We(De.INVALID_ARGUMENT,n);return!0}const GP=-62135596800,HP=1e6;class nr{static now(){return nr.fromMillis(Date.now())}static fromDate(e){return nr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*HP);return new nr(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new We(De.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new We(De.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<GP)throw new We(De.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new We(De.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/HP}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_d(e,nr._jsonSchema))return new nr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-GP;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nr._jsonSchemaVersion="firestore/timestamp/1.0",nr._jsonSchema={type:Fi("string",nr._jsonSchemaVersion),seconds:Fi("number"),nanoseconds:Fi("number")};class jt{static fromTimestamp(e){return new jt(e)}static min(){return new jt(new nr(0,0))}static max(){return new jt(new nr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Fh=-1;class Vh{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function GE(t){return t.fields.find((e=>e.kind===2))}function Cf(t){return t.fields.filter((e=>e.kind!==2))}function p$(t,e){let n=Gt(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=y$(t.fields[r],e.fields[r]),n!==0)return n;return Gt(t.fields.length,e.fields.length)}Vh.UNKNOWN_ID=-1;class Gf{constructor(e,n){this.fieldPath=e,this.kind=n}}function y$(t,e){const n=qr.comparator(t.fieldPath,e.fieldPath);return n!==0?n:Gt(t.kind,e.kind)}class zh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new zh(0,io.min())}}function sj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=jt.fromTimestamp(r===1e9?new nr(n+1,0):new nr(n,r));return new io(i,dt.empty(),e)}function oj(t){return new io(t.readTime,t.key,Fh)}class io{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new io(jt.min(),dt.empty(),Fh)}static max(){return new io(jt.max(),dt.empty(),Fh)}}function qS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=dt.comparator(t.documentKey,e.documentKey),n!==0?n:Gt(t.largestBatchId,e.largestBatchId))}const lj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Jc(t){if(t.code!==De.FAILED_PRECONDITION||t.message!==lj)throw t;et("LocalStore","Unexpectedly lost primary lease")}class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&wt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ie(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ie?n:Ie.resolve(n)}catch(n){return Ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ie.reject(n)}static resolve(e){return new Ie(((n,r)=>{n(e)}))}static reject(e){return new Ie(((n,r)=>{r(e)}))}static waitFor(e){return new Ie(((n,r)=>{let i=0,a=0,l=!1;e.forEach((f=>{++i,f.next((()=>{++a,l&&a===i&&n()}),(m=>r(m)))})),l=!0,a===i&&n()}))}static or(e){let n=Ie.resolve(!1);for(const r of e)n=n.next((i=>i?Ie.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new Ie(((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let m=0;m<a;m++){const p=m;n(e[p]).next((b=>{l[p]=b,++f,f===a&&r(l)}),(b=>i(b)))}}))}static doWhile(e,n){return new Ie(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}const Qs="SimpleDb";class wx{static open(e,n,r,i){try{return new wx(n,e.transaction(i,r))}catch(a){throw new Jg(n,a)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new pa,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Jg(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=GS(r.target.error);this.S.reject(new Jg(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(et(Qs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new x$(n)}}class El{static delete(e){return et(Qs,"Removing database:",e),kf(R5().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!V5())return!1;if(El.F())return!0;const e=Wi(),n=El.M(e),r=0<n&&n<10,i=cj(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,El.M(Wi())===12.2&&Si("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(et(Qs,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const l=a.target.result;n(l)},i.onblocked=()=>{r(new Jg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const l=a.target.error;l.name==="VersionError"?r(new We(De.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new We(De.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new Jg(e,l))},i.onupgradeneeded=a=>{et(Qs,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.N.k(l,i.transaction,a.oldVersion,this.version).next((()=>{et(Qs,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=n=>this.K(n)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const f=wx.open(this.db,e,a?"readonly":"readwrite",r),m=i(f).next((p=>(f.C(),p))).catch((p=>(f.abort(p),Ie.reject(p)))).toPromise();return m.catch((()=>{})),await f.D,m}catch(f){const m=f,p=m.name!=="FirebaseError"&&l<3;if(et(Qs,"Transaction failed with error:",m.message,"Retrying:",p),this.close(),!p)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function cj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class v${constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return kf(this.U.delete())}}class Jg extends We{constructor(e,n){super(De.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ef(t){return t.name==="IndexedDbTransactionError"}class x${constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(et(Qs,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(et(Qs,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),kf(r)}add(e){return et(Qs,"ADD",this.store.name,e,e),kf(this.store.add(e))}get(e){return kf(this.store.get(e)).next((n=>(n===void 0&&(n=null),et(Qs,"GET",this.store.name,e,n),n)))}delete(e){return et(Qs,"DELETE",this.store.name,e),kf(this.store.delete(e))}count(){return et(Qs,"COUNT",this.store.name),kf(this.store.count())}H(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new Ie(((l,f)=>{a.onerror=m=>{f(m.target.error)},a.onsuccess=m=>{l(m.target.result)}}))}{const a=this.cursor(r),l=[];return this.J(a,((f,m)=>{l.push(m)})).next((()=>l))}}Z(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new Ie(((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}}))}X(e,n){et(Qs,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const i=this.cursor(r);return this.J(i,((a,l,f)=>f.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.J(i,n)}te(e){const n=this.cursor({});return new Ie(((r,i)=>{n.onerror=a=>{const l=GS(a.target.error);i(l)},n.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next((f=>{f?l.continue():r()})):r()}}))}J(e,n){const r=[];return new Ie(((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const m=new v$(f),p=n(f.primaryKey,f.value,m);if(p instanceof Ie){const b=p.catch((_=>(m.done(),Ie.reject(_))));r.push(b)}m.isDone?i():m.G===null?f.continue():f.continue(m.G)}})).next((()=>Ie.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function kf(t){return new Ie(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=GS(r.target.error);n(i)}}))}let KP=!1;function GS(t){const e=El.M(Wi());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new We("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return KP||(KP=!0,setTimeout((()=>{throw r}),0)),r}}return t}const ep="IndexBackfiller";class b${constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){et(ep,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();et(ep,`Documents written: ${n}`)}catch(n){ef(n)?et(ep,"Ignoring IndexedDB error during index backfill: ",n):await Jc(n)}await this.re(6e4)}))}}class w${constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,a=!0;return Ie.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!r.has(l))return et(ep,`Processing collection: ${l}`),this.oe(e,l,i).next((f=>{i-=f,r.add(l)}));a=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(i,a))).next((f=>(et(ep,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,n,f)))).next((()=>l.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,a)=>{const l=oj(a);qS(l,r)>0&&(r=l)})),new io(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class Ns{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ns.ce=-1;const Mc=-1;function Xp(t){return t==null}function mp(t){return t===0&&1/t==-1/0}function fj(t){return typeof t=="number"&&Number.isInteger(t)&&!mp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Hy="";function ts(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=WP(e)),e=_$(t.get(n),e);return WP(e)}function _$(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case Hy:n+="";break;default:n+=a}}return n}function WP(t){return t+Hy+""}function vl(t){const e=t.length;if(Ot(e>=2,64408,{path:t}),e===2)return Ot(t.charAt(0)===Hy&&t.charAt(1)==="",56145,{path:t}),An.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const l=t.indexOf(Hy,a);switch((l<0||l>n)&&wt(50515,{path:t}),t.charAt(l+1)){case"":const f=t.substring(a,l);let m;i.length===0?m=f:(i+=f,m=i,i=""),r.push(m);break;case"":i+=t.substring(a,l),i+="\0";break;case"":i+=t.substring(a,l+1);break;default:wt(61167,{path:t})}a=l+2}return new An(r)}const Of="remoteDocuments",Qp="owner",sh="owner",gp="mutationQueues",E$="userId",Fo="mutations",$P="batchId",Bf="userMutationsIndex",YP=["userId","batchId"];function py(t,e){return[t,ts(e)]}function dj(t,e,n){return[t,ts(e),n]}const A$={},Uh="documentMutations",Ky="remoteDocumentsV14",S$=["prefixPath","collectionGroup","readTime","documentId"],yy="documentKeyIndex",T$=["prefixPath","collectionGroup","documentId"],hj="collectionGroupIndex",I$=["collectionGroup","readTime","prefixPath","documentId"],pp="remoteDocumentGlobal",HE="remoteDocumentGlobalKey",qh="targets",mj="queryTargetsIndex",C$=["canonicalId","targetId"],Gh="targetDocuments",O$=["targetId","path"],HS="documentTargetsIndex",N$=["path","targetId"],Wy="targetGlobalKey",Hf="targetGlobal",yp="collectionParents",P$=["collectionId","parent"],Hh="clientMetadata",R$="clientId",_x="bundles",D$="bundleId",Ex="namedQueries",k$="name",KS="indexConfiguration",M$="indexId",KE="collectionGroupIndex",j$="collectionGroup",tp="indexState",L$=["indexId","uid"],gj="sequenceNumberIndex",B$=["uid","sequenceNumber"],np="indexEntries",F$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pj="documentKeyIndex",V$=["indexId","uid","orderedDocumentKey"],Ax="documentOverlays",z$=["userId","collectionPath","documentId"],WE="collectionPathOverlayIndex",U$=["userId","collectionPath","largestBatchId"],yj="collectionGroupOverlayIndex",q$=["userId","collectionGroup","largestBatchId"],WS="globals",G$="name",vj=[gp,Fo,Uh,Of,qh,Qp,Hf,Gh,Hh,pp,yp,_x,Ex],H$=[...vj,Ax],xj=[gp,Fo,Uh,Ky,qh,Qp,Hf,Gh,Hh,pp,yp,_x,Ex,Ax],bj=xj,$S=[...bj,KS,tp,np],K$=$S,wj=[...$S,WS],W$=wj;class $E extends uj{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Xi(t,e){const n=ht(t);return El.O(n.le,e)}function XP(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function tf(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _j(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function Ej(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class jr{constructor(e,n){this.comparator=e,this.root=n||ja.EMPTY}insert(e,n){return new jr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ja.BLACK,null,null))}remove(e){return new jr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ja.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new F1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new F1(this.root,e,this.comparator,!1)}getReverseIterator(){return new F1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new F1(this.root,e,this.comparator,!0)}}class F1{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ja{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??ja.RED,this.left=i??ja.EMPTY,this.right=a??ja.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new ja(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ja.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ja.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ja.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ja.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw wt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw wt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw wt(27949);return e+(this.isRed()?0:1)}}ja.EMPTY=null,ja.RED=!0,ja.BLACK=!1;ja.EMPTY=new class{constructor(){this.size=0}get key(){throw wt(57766)}get value(){throw wt(16141)}get color(){throw wt(16727)}get left(){throw wt(29726)}get right(){throw wt(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new ja(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dr{constructor(e){this.comparator=e,this.data=new jr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new QP(this.data.getIterator())}getIteratorFrom(e){return new QP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof dr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new dr(this.comparator);return n.data=e,n}}class QP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function oh(t){return t.hasNext()?t.getNext():void 0}class Ps{constructor(e){this.fields=e,e.sort(qr.comparator)}static empty(){return new Ps([])}unionWith(e){let n=new dr(qr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ps(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bh(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class Aj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function $$(){return typeof atob<"u"}class oi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Aj("Invalid base64 string: "+a):a}})(e);return new oi(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a})(e);return new oi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oi.EMPTY_BYTE_STRING=new oi("");const Y$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bu(t){if(Ot(!!t,39018),typeof t=="string"){let e=0;const n=Y$.exec(t);if(Ot(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Zr(t.seconds),nanos:Zr(t.nanos)}}function Zr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wu(t){return typeof t=="string"?oi.fromBase64String(t):oi.fromUint8Array(t)}const Sj="server_timestamp",Tj="__type__",Ij="__previous_value__",Cj="__local_write_time__";function Sx(t){return(t?.mapValue?.fields||{})[Tj]?.stringValue===Sj}function Tx(t){const e=t.mapValue.fields[Ij];return Sx(e)?Tx(e):e}function vp(t){const e=bu(t.mapValue.fields[Cj].timestampValue);return new nr(e.seconds,e.nanos)}class X${constructor(e,n,r,i,a,l,f,m,p,b,_){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=b,this.apiKey=_}}const xp="(default)";class Vc{constructor(e,n){this.projectId=e,this.database=n||xp}static empty(){return new Vc("","")}get isDefaultDatabase(){return this.database===xp}isEqual(e){return e instanceof Vc&&e.projectId===this.projectId&&e.database===this.database}}function Q$(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new We(De.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vc(t.options.projectId,e)}const YS="__type__",Oj="__max__",Cc={mapValue:{fields:{__type__:{stringValue:Oj}}}},XS="__vector__",Kh="value",vy={nullValue:"NULL_VALUE"};function zc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sx(t)?4:Nj(t)?9007199254740991:Ix(t)?10:11:wt(28295,{value:t})}function Cl(t,e){if(t===e)return!0;const n=zc(t);if(n!==zc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vp(t).isEqual(vp(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=bu(i.timestampValue),f=bu(a.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return wu(i.bytesValue).isEqual(wu(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return Zr(i.geoPointValue.latitude)===Zr(a.geoPointValue.latitude)&&Zr(i.geoPointValue.longitude)===Zr(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Zr(i.integerValue)===Zr(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=Zr(i.doubleValue),f=Zr(a.doubleValue);return l===f?mp(l)===mp(f):isNaN(l)&&isNaN(f)}return!1})(t,e);case 9:return Bh(t.arrayValue.values||[],e.arrayValue.values||[],Cl);case 10:case 11:return(function(i,a){const l=i.mapValue.fields||{},f=a.mapValue.fields||{};if(XP(l)!==XP(f))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(f[m]===void 0||!Cl(l[m],f[m])))return!1;return!0})(t,e);default:return wt(52216,{left:t})}}function bp(t,e){return(t.values||[]).find((n=>Cl(n,e)))!==void 0}function Uc(t,e){if(t===e)return 0;const n=zc(t),r=zc(e);if(n!==r)return Gt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Gt(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const f=Zr(a.integerValue||a.doubleValue),m=Zr(l.integerValue||l.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(t,e);case 3:return ZP(t.timestampValue,e.timestampValue);case 4:return ZP(vp(t),vp(e));case 5:return UE(t.stringValue,e.stringValue);case 6:return(function(a,l){const f=wu(a),m=wu(l);return f.compareTo(m)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const f=a.split("/"),m=l.split("/");for(let p=0;p<f.length&&p<m.length;p++){const b=Gt(f[p],m[p]);if(b!==0)return b}return Gt(f.length,m.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const f=Gt(Zr(a.latitude),Zr(l.latitude));return f!==0?f:Gt(Zr(a.longitude),Zr(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return JP(t.arrayValue,e.arrayValue);case 10:return(function(a,l){const f=a.fields||{},m=l.fields||{},p=f[Kh]?.arrayValue,b=m[Kh]?.arrayValue,_=Gt(p?.values?.length||0,b?.values?.length||0);return _!==0?_:JP(p,b)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Cc.mapValue&&l===Cc.mapValue)return 0;if(a===Cc.mapValue)return 1;if(l===Cc.mapValue)return-1;const f=a.fields||{},m=Object.keys(f),p=l.fields||{},b=Object.keys(p);m.sort(),b.sort();for(let _=0;_<m.length&&_<b.length;++_){const T=UE(m[_],b[_]);if(T!==0)return T;const N=Uc(f[m[_]],p[b[_]]);if(N!==0)return N}return Gt(m.length,b.length)})(t.mapValue,e.mapValue);default:throw wt(23264,{he:n})}}function ZP(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Gt(t,e);const n=bu(t),r=bu(e),i=Gt(n.seconds,r.seconds);return i!==0?i:Gt(n.nanos,r.nanos)}function JP(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Uc(n[i],r[i]);if(a)return a}return Gt(n.length,r.length)}function Wh(t){return YE(t)}function YE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=bu(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return wu(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return dt.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=YE(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${YE(n.fields[l])}`;return i+"}"})(t.mapValue):wt(61005,{value:t})}function xy(t){switch(zc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tx(t);return e?16+xy(e):16;case 5:return 2*t.stringValue.length;case 6:return wu(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+xy(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return tf(r.fields,((a,l)=>{i+=a.length+xy(l)})),i})(t.mapValue);default:throw wt(13486,{value:t})}}function Jf(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function XE(t){return!!t&&"integerValue"in t}function wp(t){return!!t&&"arrayValue"in t}function eR(t){return!!t&&"nullValue"in t}function tR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function by(t){return!!t&&"mapValue"in t}function Ix(t){return(t?.mapValue?.fields||{})[YS]?.stringValue===XS}function rp(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return tf(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=rp(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rp(t.arrayValue.values[n]);return e}return{...t}}function Nj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Oj}const Pj={mapValue:{fields:{[YS]:{stringValue:XS},[Kh]:{arrayValue:{}}}}};function Z$(t){return"nullValue"in t?vy:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Jf(Vc.empty(),dt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Ix(t)?Pj:{mapValue:{}}:wt(35942,{value:t})}function J$(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Jf(Vc.empty(),dt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Pj:"mapValue"in t?Ix(t)?{mapValue:{}}:Cc:wt(61959,{value:t})}function nR(t,e){const n=Uc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function rR(t,e){const n=Uc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class ha{constructor(e){this.value=e}static empty(){return new ha({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!by(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=rp(n)}setAll(e){let n=qr.emptyPath(),r={},i=[];e.forEach(((l,f)=>{if(!n.isImmediateParentOf(f)){const m=this.getFieldsMap(n);this.applyChanges(m,r,i),r={},i=[],n=f.popLast()}l?r[f.lastSegment()]=rp(l):i.push(f.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());by(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cl(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];by(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){tf(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new ha(rp(this.value))}}function Rj(t){const e=[];return tf(t.fields,((n,r)=>{const i=new qr([n]);if(by(r)){const a=Rj(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)})),new Ps(e)}class Ur{constructor(e,n,r,i,a,l,f){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new Ur(e,0,jt.min(),jt.min(),jt.min(),ha.empty(),0)}static newFoundDocument(e,n,r,i){return new Ur(e,1,n,jt.min(),r,i,0)}static newNoDocument(e,n){return new Ur(e,2,n,jt.min(),jt.min(),ha.empty(),0)}static newUnknownDocument(e,n){return new Ur(e,3,n,jt.min(),jt.min(),ha.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(jt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ha.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ha.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ur&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ur(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qc{constructor(e,n){this.position=e,this.inclusive=n}}function iR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],l=t.position[i];if(a.field.isKeyField()?r=dt.comparator(dt.fromName(l.referenceValue),n.key):r=Uc(l,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function aR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cl(t.position[n],e.position[n]))return!1;return!0}class _p{constructor(e,n="asc"){this.field=e,this.dir=n}}function eY(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Dj{}class kn extends Dj{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new tY(e,n,r):n==="array-contains"?new iY(e,r):n==="in"?new Fj(e,r):n==="not-in"?new aY(e,r):n==="array-contains-any"?new sY(e,r):new kn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new nY(e,r):new rY(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Uc(n,this.value)):n!==null&&zc(this.value)===zc(n)&&this.matchesComparison(Uc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return wt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cr extends Dj{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new cr(e,n)}matches(e){return $h(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $h(t){return t.op==="and"}function QE(t){return t.op==="or"}function QS(t){return kj(t)&&$h(t)}function kj(t){for(const e of t.filters)if(e instanceof cr)return!1;return!0}function ZE(t){if(t instanceof kn)return t.field.canonicalString()+t.op.toString()+Wh(t.value);if(QS(t))return t.filters.map((e=>ZE(e))).join(",");{const e=t.filters.map((n=>ZE(n))).join(",");return`${t.op}(${e})`}}function Mj(t,e){return t instanceof kn?(function(r,i){return i instanceof kn&&r.op===i.op&&r.field.isEqual(i.field)&&Cl(r.value,i.value)})(t,e):t instanceof cr?(function(r,i){return i instanceof cr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,l,f)=>a&&Mj(l,i.filters[f])),!0):!1})(t,e):void wt(19439)}function jj(t,e){const n=t.filters.concat(e);return cr.create(n,t.op)}function Lj(t){return t instanceof kn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Wh(n.value)}`})(t):t instanceof cr?(function(n){return n.op.toString()+" {"+n.getFilters().map(Lj).join(" ,")+"}"})(t):"Filter"}class tY extends kn{constructor(e,n,r){super(e,n,r),this.key=dt.fromName(r.referenceValue)}matches(e){const n=dt.comparator(e.key,this.key);return this.matchesComparison(n)}}class nY extends kn{constructor(e,n){super(e,"in",n),this.keys=Bj("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class rY extends kn{constructor(e,n){super(e,"not-in",n),this.keys=Bj("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Bj(t,e){return(e.arrayValue?.values||[]).map((n=>dt.fromName(n.referenceValue)))}class iY extends kn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wp(n)&&bp(n.arrayValue,this.value)}}class Fj extends kn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&bp(this.value.arrayValue,n)}}class aY extends kn{constructor(e,n){super(e,"not-in",n)}matches(e){if(bp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!bp(this.value.arrayValue,n)}}class sY extends kn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>bp(this.value.arrayValue,r)))}}class oY{constructor(e,n=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.Te=null}}function JE(t,e=null,n=[],r=[],i=null,a=null,l=null){return new oY(t,e,n,r,i,a,l)}function ed(t){const e=ht(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>ZE(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Xp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Wh(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Wh(r))).join(",")),e.Te=n}return e.Te}function Zp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!eY(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Mj(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!aR(t.startAt,e.startAt)&&aR(t.endAt,e.endAt)}function $y(t){return dt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Yy(t,e){return t.filters.filter((n=>n instanceof kn&&n.field.isEqual(e)))}function sR(t,e,n){let r=vy,i=!0;for(const a of Yy(t,e)){let l=vy,f=!0;switch(a.op){case"<":case"<=":l=Z$(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=vy}nR({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const l=n.position[a];nR({value:r,inclusive:i},{value:l,inclusive:n.inclusive})<0&&(r=l,i=n.inclusive);break}}return{value:r,inclusive:i}}function oR(t,e,n){let r=Cc,i=!0;for(const a of Yy(t,e)){let l=Cc,f=!0;switch(a.op){case">=":case">":l=J$(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=Cc}rR({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const l=n.position[a];rR({value:r,inclusive:i},{value:l,inclusive:n.inclusive})>0&&(r=l,i=n.inclusive);break}}return{value:r,inclusive:i}}class Du{constructor(e,n=null,r=[],i=[],a=null,l="F",f=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Vj(t,e,n,r,i,a,l,f){return new Du(t,e,n,r,i,a,l,f)}function bm(t){return new Du(t)}function lR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lY(t){return dt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ZS(t){return t.collectionGroup!==null}function Ih(t){const e=ht(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let f=new dr(qr.comparator);return l.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new _p(a,r))})),n.has(qr.keyField().canonicalString())||e.Ie.push(new _p(qr.keyField(),r))}return e.Ie}function ns(t){const e=ht(t);return e.Ee||(e.Ee=Uj(e,Ih(t))),e.Ee}function zj(t){const e=ht(t);return e.Re||(e.Re=Uj(e,t.explicitOrderBy)),e.Re}function Uj(t,e){if(t.limitType==="F")return JE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new _p(i.field,a)}));const n=t.endAt?new qc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new qc(t.startAt.position,t.startAt.inclusive):null;return JE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function eA(t,e){const n=t.filters.concat([e]);return new Du(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function uY(t,e){const n=t.explicitOrderBy.concat([e]);return new Du(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Xy(t,e,n){return new Du(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cY(t,e){return new Du(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}function fY(t,e){return new Du(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}function Jp(t,e){return Zp(ns(t),ns(e))&&t.limitType===e.limitType}function qj(t){return`${ed(ns(t))}|lt:${t.limitType}`}function vh(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>Lj(i))).join(", ")}]`),Xp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Wh(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Wh(i))).join(",")),`Target(${r})`})(ns(t))}; limitType=${t.limitType})`}function e0(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):dt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of Ih(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(l,f,m){const p=iR(l,f,m);return l.inclusive?p<=0:p<0})(r.startAt,Ih(r),i)||r.endAt&&!(function(l,f,m){const p=iR(l,f,m);return l.inclusive?p>=0:p>0})(r.endAt,Ih(r),i))})(t,e)}function Gj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Hj(t){return(e,n)=>{let r=!1;for(const i of Ih(t)){const a=dY(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function dY(t,e,n){const r=t.field.isKeyField()?dt.comparator(e.key,n.key):(function(a,l,f){const m=l.data.field(a),p=f.data.field(a);return m!==null&&p!==null?Uc(m,p):wt(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return wt(19790,{direction:t.dir})}}class ku{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){tf(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return Ej(this.inner)}size(){return this.innerSize}}const hY=new jr(dt.comparator);function Rs(){return hY}const Kj=new jr(dt.comparator);function Hg(...t){let e=Kj;for(const n of t)e=e.insert(n.key,n);return e}function Wj(t){let e=Kj;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function xl(){return ip()}function $j(){return ip()}function ip(){return new ku((t=>t.toString()),((t,e)=>t.isEqual(e)))}const mY=new jr(dt.comparator),gY=new dr(dt.comparator);function ln(...t){let e=gY;for(const n of t)e=e.add(n);return e}const pY=new dr(Gt);function JS(){return pY}function eT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mp(e)?"-0":e}}function Yj(t){return{integerValue:""+t}}function Xj(t,e){return fj(e)?Yj(e):eT(t,e)}class Cx{constructor(){this._=void 0}}function yY(t,e,n){return t instanceof Yh?(function(i,a){const l={fields:{[Tj]:{stringValue:Sj},[Cj]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Sx(a)&&(a=Tx(a)),a&&(l.fields[Ij]=a),{mapValue:l}})(n,e):t instanceof td?Zj(t,e):t instanceof nd?Jj(t,e):(function(i,a){const l=Qj(i,a),f=uR(l)+uR(i.Ae);return XE(l)&&XE(i.Ae)?Yj(f):eT(i.serializer,f)})(t,e)}function vY(t,e,n){return t instanceof td?Zj(t,e):t instanceof nd?Jj(t,e):n}function Qj(t,e){return t instanceof Xh?(function(r){return XE(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Yh extends Cx{}class td extends Cx{constructor(e){super(),this.elements=e}}function Zj(t,e){const n=e9(e);for(const r of t.elements)n.some((i=>Cl(i,r)))||n.push(r);return{arrayValue:{values:n}}}class nd extends Cx{constructor(e){super(),this.elements=e}}function Jj(t,e){let n=e9(e);for(const r of t.elements)n=n.filter((i=>!Cl(i,r)));return{arrayValue:{values:n}}}class Xh extends Cx{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function uR(t){return Zr(t.integerValue||t.doubleValue)}function e9(t){return wp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class t0{constructor(e,n){this.field=e,this.transform=n}}function xY(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof td&&i instanceof td||r instanceof nd&&i instanceof nd?Bh(r.elements,i.elements,Cl):r instanceof Xh&&i instanceof Xh?Cl(r.Ae,i.Ae):r instanceof Yh&&i instanceof Yh})(t.transform,e.transform)}class bY{constructor(e,n){this.version=e,this.transformResults=n}}class ei{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ei}static exists(e){return new ei(void 0,e)}static updateTime(e){return new ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wy(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ox{}function t9(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _m(t.key,ei.none()):new wm(t.key,t.data,ei.none());{const n=t.data,r=ha.empty();let i=new dr(qr.comparator);for(let a of e.fields)if(!i.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new Mu(t.key,r,new Ps(i.toArray()),ei.none())}}function wY(t,e,n){t instanceof wm?(function(i,a,l){const f=i.value.clone(),m=fR(i.fieldTransforms,a,l.transformResults);f.setAll(m),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(t,e,n):t instanceof Mu?(function(i,a,l){if(!wy(i.precondition,a))return void a.convertToUnknownDocument(l.version);const f=fR(i.fieldTransforms,a,l.transformResults),m=a.data;m.setAll(n9(i)),m.setAll(f),a.convertToFoundDocument(l.version,m).setHasCommittedMutations()})(t,e,n):(function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function ap(t,e,n,r){return t instanceof wm?(function(a,l,f,m){if(!wy(a.precondition,l))return f;const p=a.value.clone(),b=dR(a.fieldTransforms,m,l);return p.setAll(b),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(t,e,n,r):t instanceof Mu?(function(a,l,f,m){if(!wy(a.precondition,l))return f;const p=dR(a.fieldTransforms,m,l),b=l.data;return b.setAll(n9(a)),b.setAll(p),l.convertToFoundDocument(l.version,b).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((_=>_.field)))})(t,e,n,r):(function(a,l,f){return wy(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):f})(t,e,n)}function _Y(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=Qj(r.transform,i||null);a!=null&&(n===null&&(n=ha.empty()),n.set(r.field,a))}return n||null}function cR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bh(r,i,((a,l)=>xY(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wm extends Ox{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Mu extends Ox{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function n9(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function fR(t,e,n){const r=new Map;Ot(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const a=t[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,vY(l,f,n[i]))}return r}function dR(t,e,n){const r=new Map;for(const i of t){const a=i.transform,l=n.data.field(i.field);r.set(i.field,yY(a,l,e))}return r}class _m extends Ox{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tT extends Ox{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nT{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&wY(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ap(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ap(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$j();return this.mutations.forEach((i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=n.has(i.key)?null:f;const m=t9(l,f);m!==null&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(jt.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ln())}isEqual(e){return this.batchId===e.batchId&&Bh(this.mutations,e.mutations,((n,r)=>cR(n,r)))&&Bh(this.baseMutations,e.baseMutations,((n,r)=>cR(n,r)))}}class rT{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ot(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return mY})();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new rT(e,n,r,i)}}class iT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class r9{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}class EY{constructor(e,n){this.count=e,this.unchangedNames=n}}var Bi,Bn;function i9(t){switch(t){case De.OK:return wt(64938);case De.CANCELLED:case De.UNKNOWN:case De.DEADLINE_EXCEEDED:case De.RESOURCE_EXHAUSTED:case De.INTERNAL:case De.UNAVAILABLE:case De.UNAUTHENTICATED:return!1;case De.INVALID_ARGUMENT:case De.NOT_FOUND:case De.ALREADY_EXISTS:case De.PERMISSION_DENIED:case De.FAILED_PRECONDITION:case De.ABORTED:case De.OUT_OF_RANGE:case De.UNIMPLEMENTED:case De.DATA_LOSS:return!0;default:return wt(15467,{code:t})}}function a9(t){if(t===void 0)return Si("GRPC error has no .code"),De.UNKNOWN;switch(t){case Bi.OK:return De.OK;case Bi.CANCELLED:return De.CANCELLED;case Bi.UNKNOWN:return De.UNKNOWN;case Bi.DEADLINE_EXCEEDED:return De.DEADLINE_EXCEEDED;case Bi.RESOURCE_EXHAUSTED:return De.RESOURCE_EXHAUSTED;case Bi.INTERNAL:return De.INTERNAL;case Bi.UNAVAILABLE:return De.UNAVAILABLE;case Bi.UNAUTHENTICATED:return De.UNAUTHENTICATED;case Bi.INVALID_ARGUMENT:return De.INVALID_ARGUMENT;case Bi.NOT_FOUND:return De.NOT_FOUND;case Bi.ALREADY_EXISTS:return De.ALREADY_EXISTS;case Bi.PERMISSION_DENIED:return De.PERMISSION_DENIED;case Bi.FAILED_PRECONDITION:return De.FAILED_PRECONDITION;case Bi.ABORTED:return De.ABORTED;case Bi.OUT_OF_RANGE:return De.OUT_OF_RANGE;case Bi.UNIMPLEMENTED:return De.UNIMPLEMENTED;case Bi.DATA_LOSS:return De.DATA_LOSS;default:return wt(39323,{code:t})}}(Bn=Bi||(Bi={}))[Bn.OK=0]="OK",Bn[Bn.CANCELLED=1]="CANCELLED",Bn[Bn.UNKNOWN=2]="UNKNOWN",Bn[Bn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bn[Bn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bn[Bn.NOT_FOUND=5]="NOT_FOUND",Bn[Bn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bn[Bn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bn[Bn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bn[Bn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bn[Bn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bn[Bn.ABORTED=10]="ABORTED",Bn[Bn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bn[Bn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bn[Bn.INTERNAL=13]="INTERNAL",Bn[Bn.UNAVAILABLE=14]="UNAVAILABLE",Bn[Bn.DATA_LOSS=15]="DATA_LOSS";let tA=null;function AY(t){if(tA)throw new Error("a TestingHooksSpi instance is already set");tA=t}function s9(){return new TextEncoder}const SY=new kc([4294967295,4294967295],0);function hR(t){const e=s9().encode(t),n=new W5;return n.update(e),new Uint8Array(n.digest())}function mR(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new kc([n,r],0),new kc([i,a],0)]}class aT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Kg(`Invalid padding: ${n}`);if(r<0)throw new Kg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Kg(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Kg(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=kc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(kc.fromNumber(r)));return i.compare(SY)===1&&(i=new kc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=hR(e),[r,i]=mR(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);if(!this.we(l))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new aT(a,i,n);return r.forEach((f=>l.insert(f))),l}insert(e){if(this.ge===0)return;const n=hR(e),[r,i]=mR(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);this.be(l)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Kg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class n0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,r0.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new n0(jt.min(),i,new jr(Gt),Rs(),ln())}}class r0{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new r0(r,n,ln(),ln(),ln())}}class _y{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class o9{constructor(e,n){this.targetId=e,this.Ce=n}}class l9{constructor(e,n,r=oi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class gR{constructor(){this.ve=0,this.Fe=pR(),this.Me=oi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ln(),n=ln(),r=ln();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:wt(38017,{changeType:a})}})),new r0(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=pR()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ot(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class TY{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rs(),this.He=V1(),this.Je=V1(),this.Ze=new jr(Gt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:wt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if($y(a))if(r===0){const l=new dt(a.path);this.et(n,l,Ur.newNoDocument(l,jt.min()))}else Ot(r===1,20013,{expectedCount:r});else{const l=this._t(n);if(l!==r){const f=this.ut(e),m=f?this.ct(f,e,l):1;if(m!==0){this.it(n);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,p)}tA?.lt((function(b,_,T,N,j){const M={localCacheCount:b,existenceFilterCount:_.count,databaseId:T.database,projectId:T.projectId},L=_.unchangedNames;return L&&(M.bloomFilter={applied:j===0,hashCount:L?.hashCount??0,bitmapLength:L?.bits?.bitmap?.length??0,padding:L?.bits?.padding??0,mightContain:z=>N?.mightContain(z)??!1}),M})(l,e.Ce,this.Ge.ht(),f,m))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let l,f;try{l=wu(r).toUint8Array()}catch(m){if(m instanceof Aj)return Ls("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new aT(l,i,a)}catch(m){return Ls(m instanceof Kg?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const l=this.Ge.ht(),f=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,l)=>{const f=this.ot(l);if(f){if(a.current&&$y(f.target)){const m=new dt(f.target.path);this.It(m).has(l)||this.Et(l,m)||this.et(l,m,Ur.newNoDocument(m,e))}a.Be&&(n.set(l,a.ke()),a.Ke())}}));let r=ln();this.Je.forEach(((a,l)=>{let f=!0;l.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const i=new n0(e,n,this.Ze,this.je,r);return this.je=Rs(),this.He=V1(),this.Je=V1(),this.Ze=new jr(Gt),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new gR,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new dr(Gt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new dr(Gt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||et("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gR),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function V1(){return new jr(dt.comparator)}function pR(){return new jr(dt.comparator)}const IY={asc:"ASCENDING",desc:"DESCENDING"},CY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OY={and:"AND",or:"OR"};class NY{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nA(t,e){return t.useProto3Json||Xp(e)?e:{value:e}}function Qh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function u9(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function PY(t,e){return Qh(t,e.toTimestamp())}function Ii(t){return Ot(!!t,49232),jt.fromTimestamp((function(n){const r=bu(n);return new nr(r.seconds,r.nanos)})(t))}function sT(t,e){return rA(t,e).canonicalString()}function rA(t,e){const n=(function(i){return new An(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function c9(t){const e=An.fromString(t);return Ot(x9(e),10190,{key:e.toString()}),e}function Ep(t,e){return sT(t.databaseId,e.path)}function Al(t,e){const n=c9(e);if(n.get(1)!==t.databaseId.projectId)throw new We(De.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new We(De.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new dt(h9(n))}function f9(t,e){return sT(t.databaseId,e)}function d9(t){const e=c9(t);return e.length===4?An.emptyPath():h9(e)}function iA(t){return new An(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function h9(t){return Ot(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function yR(t,e,n){return{name:Ep(t,e),fields:n.value.mapValue.fields}}function Nx(t,e,n){const r=Al(t,e.name),i=Ii(e.updateTime),a=e.createTime?Ii(e.createTime):jt.min(),l=new ha({mapValue:{fields:e.fields}}),f=Ur.newFoundDocument(r,i,a,l);return n&&f.setHasCommittedMutations(),n?f.setHasCommittedMutations():f}function RY(t,e){return"found"in e?(function(r,i){Ot(!!i.found,43571),i.found.name,i.found.updateTime;const a=Al(r,i.found.name),l=Ii(i.found.updateTime),f=i.found.createTime?Ii(i.found.createTime):jt.min(),m=new ha({mapValue:{fields:i.found.fields}});return Ur.newFoundDocument(a,l,f,m)})(t,e):"missing"in e?(function(r,i){Ot(!!i.missing,3894),Ot(!!i.readTime,22933);const a=Al(r,i.missing),l=Ii(i.readTime);return Ur.newNoDocument(a,l)})(t,e):wt(7234,{result:e})}function DY(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:wt(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(p,b){return p.useProto3Json?(Ot(b===void 0||typeof b=="string",58123),oi.fromBase64String(b||"")):(Ot(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),oi.fromUint8Array(b||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&(function(p){const b=p.code===void 0?De.UNKNOWN:a9(p.code);return new We(b,p.message||"")})(l);n=new l9(r,i,a,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Al(t,r.document.name),a=Ii(r.document.updateTime),l=r.document.createTime?Ii(r.document.createTime):jt.min(),f=new ha({mapValue:{fields:r.document.fields}}),m=Ur.newFoundDocument(i,a,l,f),p=r.targetIds||[],b=r.removedTargetIds||[];n=new _y(p,b,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Al(t,r.document),a=r.readTime?Ii(r.readTime):jt.min(),l=Ur.newNoDocument(i,a),f=r.removedTargetIds||[];n=new _y([],f,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Al(t,r.document),a=r.removedTargetIds||[];n=new _y([],a,i,null)}else{if(!("filter"in e))return wt(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new EY(i,a),f=r.targetId;n=new o9(f,l)}}return n}function Ap(t,e){let n;if(e instanceof wm)n={update:yR(t,e.key,e.value)};else if(e instanceof _m)n={delete:Ep(t,e.key)};else if(e instanceof Mu)n={update:yR(t,e.key,e.data),updateMask:FY(e.fieldMask)};else{if(!(e instanceof tT))return wt(16599,{dt:e.type});n={verify:Ep(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const f=l.transform;if(f instanceof Yh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof td)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof nd)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Xh)return{fieldPath:l.field.canonicalString(),increment:f.Ae};throw wt(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:PY(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:wt(27497)})(t,e.precondition)),n}function aA(t,e){const n=e.currentDocument?(function(a){return a.updateTime!==void 0?ei.updateTime(Ii(a.updateTime)):a.exists!==void 0?ei.exists(a.exists):ei.none()})(e.currentDocument):ei.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(l,f){let m=null;if("setToServerValue"in f)Ot(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),m=new Yh;else if("appendMissingElements"in f){const b=f.appendMissingElements.values||[];m=new td(b)}else if("removeAllFromArray"in f){const b=f.removeAllFromArray.values||[];m=new nd(b)}else"increment"in f?m=new Xh(l,f.increment):wt(16584,{proto:f});const p=qr.fromServerFormat(f.fieldPath);return new t0(p,m)})(t,i))):[];if(e.update){e.update.name;const i=Al(t,e.update.name),a=new ha({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(m){const p=m.fieldPaths||[];return new Ps(p.map((b=>qr.fromServerFormat(b))))})(e.updateMask);return new Mu(i,a,l,n,r)}return new wm(i,a,n,r)}if(e.delete){const i=Al(t,e.delete);return new _m(i,n)}if(e.verify){const i=Al(t,e.verify);return new tT(i,n)}return wt(1463,{proto:e})}function kY(t,e){return t&&t.length>0?(Ot(e!==void 0,14353),t.map((n=>(function(i,a){let l=i.updateTime?Ii(i.updateTime):Ii(a);return l.isEqual(jt.min())&&(l=Ii(a)),new bY(l,i.transformResults||[])})(n,e)))):[]}function m9(t,e){return{documents:[f9(t,e.path)]}}function Px(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=f9(t,i);const a=(function(p){if(p.length!==0)return v9(cr.create(p,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const l=(function(p){if(p.length!==0)return p.map((b=>(function(T){return{field:bc(T.field),direction:jY(T.dir)}})(b)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const f=nA(t,e.limit);return f!==null&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:i}}function g9(t,e,n,r){const{ft:i,parent:a}=Px(t,e),l={},f=[];let m=0;return n.forEach((p=>{const b=r?p.alias:"aggregate_"+m++;l[b]=p.alias,p.aggregateType==="count"?f.push({alias:b,count:{}}):p.aggregateType==="avg"?f.push({alias:b,avg:{field:bc(p.fieldPath)}}):p.aggregateType==="sum"&&f.push({alias:b,sum:{field:bc(p.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:f,structuredQuery:i.structuredQuery},parent:i.parent},gt:l,parent:a}}function p9(t){let e=d9(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ot(r===1,65062);const b=n.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];n.where&&(a=(function(_){const T=y9(_);return T instanceof cr&&QS(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(_){return _.map((T=>(function(j){return new _p(xh(j.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(T)))})(n.orderBy));let f=null;n.limit&&(f=(function(_){let T;return T=typeof _=="object"?_.value:_,Xp(T)?null:T})(n.limit));let m=null;n.startAt&&(m=(function(_){const T=!!_.before,N=_.values||[];return new qc(N,T)})(n.startAt));let p=null;return n.endAt&&(p=(function(_){const T=!_.before,N=_.values||[];return new qc(N,T)})(n.endAt)),Vj(e,i,l,a,f,"F",m,p)}function MY(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function y9(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xh(n.unaryFilter.field);return kn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xh(n.unaryFilter.field);return kn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=xh(n.unaryFilter.field);return kn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=xh(n.unaryFilter.field);return kn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return wt(61313);default:return wt(60726)}})(t):t.fieldFilter!==void 0?(function(n){return kn.create(xh(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return wt(58110);default:return wt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return cr.create(n.compositeFilter.filters.map((r=>y9(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return wt(1026)}})(n.compositeFilter.op))})(t):wt(30097,{filter:t})}function jY(t){return IY[t]}function LY(t){return CY[t]}function BY(t){return OY[t]}function bc(t){return{fieldPath:t.canonicalString()}}function xh(t){return qr.fromServerFormat(t.fieldPath)}function v9(t){return t instanceof kn?(function(n){if(n.op==="=="){if(tR(n.value))return{unaryFilter:{field:bc(n.field),op:"IS_NAN"}};if(eR(n.value))return{unaryFilter:{field:bc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tR(n.value))return{unaryFilter:{field:bc(n.field),op:"IS_NOT_NAN"}};if(eR(n.value))return{unaryFilter:{field:bc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bc(n.field),op:LY(n.op),value:n.value}}})(t):t instanceof cr?(function(n){const r=n.getFilters().map((i=>v9(i)));return r.length===1?r[0]:{compositeFilter:{op:BY(n.op),filters:r}}})(t):wt(54877,{filter:t})}function FY(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function x9(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function b9(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class lu{constructor(e,n,r,i,a=jt.min(),l=jt.min(),f=oi.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new lu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class w9{constructor(e){this.yt=e}}function VY(t,e){let n;if(e.document)n=Nx(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=dt.fromSegments(e.noDocument.path),i=id(e.noDocument.readTime);n=Ur.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return wt(56709);{const r=dt.fromSegments(e.unknownDocument.path),i=id(e.unknownDocument.version);n=Ur.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const a=new nr(i[0],i[1]);return jt.fromTimestamp(a)})(e.readTime)),n}function vR(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Qy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,l){return{name:Ep(a,l.key),fields:l.data.value.mapValue.fields,updateTime:Qh(a,l.version.toTimestamp()),createTime:Qh(a,l.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:rd(e.version)};else{if(!e.isUnknownDocument())return wt(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:rd(e.version)}}return r}function Qy(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function rd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function id(t){const e=new nr(t.seconds,t.nanoseconds);return jt.fromTimestamp(e)}function Mf(t,e){const n=(e.baseMutations||[]).map((a=>aA(t.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const f=e.mutations[a+1];l.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>aA(t.yt,a))),i=nr.fromMillis(e.localWriteTimeMs);return new nT(e.batchId,i,n,r)}function Wg(t){const e=id(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?id(t.lastLimboFreeSnapshotVersion):jt.min();let r;return r=(function(a){return a.documents!==void 0})(t.query)?(function(a){const l=a.documents.length;return Ot(l===1,1966,{count:l}),ns(bm(d9(a.documents[0])))})(t.query):(function(a){return ns(p9(a))})(t.query),new lu(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,oi.fromBase64String(t.resumeToken))}function _9(t,e){const n=rd(e.snapshotVersion),r=rd(e.lastLimboFreeSnapshotVersion);let i;i=$y(e.target)?m9(t.yt,e.target):Px(t.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ed(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Rx(t){const e=p9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xy(e,e.limit,"L"):e}function U_(t,e){return new iT(e.largestBatchId,aA(t.yt,e.overlayMutation))}function xR(t,e){const n=e.path.lastSegment();return[t,ts(e.path.popLast()),n]}function bR(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:rd(r.readTime),documentKey:ts(r.documentKey.path),largestBatchId:r.largestBatchId}}class zY{getBundleMetadata(e,n){return wR(e).get(n).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:id(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,n){return wR(e).put((function(i){return{bundleId:i.id,createTime:rd(Ii(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return _R(e).get(n).next((r=>{if(r)return(function(a){return{name:a.name,query:Rx(a.bundledQuery),readTime:id(a.readTime)}})(r)}))}saveNamedQuery(e,n){return _R(e).put((function(i){return{name:i.name,readTime:rd(Ii(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function wR(t){return Xi(t,_x)}function _R(t){return Xi(t,Ex)}class Dx{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Dx(e,r)}getOverlay(e,n){return Sg(e).get(xR(this.userId,n)).next((r=>r?U_(this.serializer,r):null))}getOverlays(e,n){const r=xl();return Ie.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((a,l)=>{const f=new iT(n,l);i.push(this.bt(e,f))})),Ie.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((l=>i.add(ts(l.getCollectionPath()))));const a=[];return i.forEach((l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Sg(e).X(WE,f))})),Ie.waitFor(a)}getOverlaysForCollection(e,n,r){const i=xl(),a=ts(n),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Sg(e).H(WE,l).next((f=>{for(const m of f){const p=U_(this.serializer,m);i.set(p.getKey(),p)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const a=xl();let l;const f=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Sg(e).ee({index:yj,range:f},((m,p,b)=>{const _=U_(this.serializer,p);a.size()<i||_.largestBatchId===l?(a.set(_.getKey(),_),l=_.largestBatchId):b.done()})).next((()=>a))}bt(e,n){return Sg(e).put((function(i,a,l){const[f,m,p]=xR(a,l.mutation.key);return{userId:a,collectionPath:m,documentId:p,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Ap(i.yt,l.mutation)}})(this.serializer,this.userId,n))}}function Sg(t){return Xi(t,Ax)}class UY{St(e){return Xi(e,WS)}getSessionToken(e){return this.St(e).get("sessionToken").next((n=>{const r=n?.value;return r?oi.fromUint8Array(r):oi.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.St(e).put({name:"sessionToken",value:n.toUint8Array()})}}class jf{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Zr(e.integerValue));else if("doubleValue"in e){const r=Zr(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),mp(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=bu(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(wu(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?Nj(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Ix(e)?this.kt(e.mapValue,n):(this.Kt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Nt(n)):wt(19022,{Ut:e})}Ot(e,n){this.Ft(n,25),this.$t(e,n)}$t(e,n){n.xt(e)}Kt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=Kh,a=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Zr(a)),this.Ot(i,n),this.Ct(r[i],n)}qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),dt.fromName(e).path.forEach((r=>{this.Ft(n,60),this.$t(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}jf.Wt=new jf;const lh=255;function qY(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function ER(t){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const l=qY(255&r[a]);if(i+=l,l!==8)break}return i})(t);return Math.ceil(e/8)}class GY{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ht(r.value),r=n.next();this.Jt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const i=n.codePointAt(0);this.Ht(240|i>>>18),this.Ht(128|63&i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i)}}this.Jt()}Yt(e){const n=this.en(e),r=ER(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=ER(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(lh),this.sn(255)}_n(){this.an(lh),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===lh?(this.sn(lh),this.sn(0)):this.sn(n)}Ht(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===lh?(this.an(lh),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class HY{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class KY{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Tg{constructor(){this.cn=new GY,this.ascending=new HY(this.cn),this.descending=new KY(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class Lf{constructor(e,n,r,i){this.hn=e,this.Pn=n,this.Tn=r,this.In=i}En(){const e=this.In.length,n=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.In,0),n!==e?r.set([0],this.In.length):++r[r.length-1],new Lf(this.hn,this.Pn,this.Tn,r)}Rn(e,n,r){return{indexId:this.hn,uid:e,arrayValue:Ey(this.Tn),directionalValue:Ey(this.In),orderedDocumentKey:Ey(n),documentKey:r.path.toArray()}}An(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function hc(t,e){let n=t.hn-e.hn;return n!==0?n:(n=AR(t.Tn,e.Tn),n!==0?n:(n=AR(t.In,e.In),n!==0?n:dt.comparator(t.Pn,e.Pn)))}function AR(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Ey(t){return F5()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function SR(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class TR{constructor(e){this.Vn=new dr(((n,r)=>qr.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Ot(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const n=GE(e);if(n!==void 0&&!this.pn(n))return!1;const r=Cf(e);let i=new Set,a=0,l=0;for(;a<r.length&&this.pn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.Vn.size>0){const f=this.Vn.getIterator().getNext();if(!i.has(f.field.canonicalString())){const m=r[a];if(!this.yn(f,m)||!this.wn(this.dn[l++],m))return!1}++a}for(;a<r.length;++a){const f=r[a];if(l>=this.dn.length||!this.wn(this.dn[l++],f))return!1}return!0}bn(){if(this.fn)return null;let e=new dr(qr.comparator);const n=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Gf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Gf(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Gf(r.field,r.dir==="asc"?0:1)));return new Vh(Vh.UNKNOWN_ID,this.collectionId,n,zh.empty())}pn(e){for(const n of this.mn)if(this.yn(n,e))return!0;return!1}yn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}wn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function E9(t){if(Ot(t instanceof kn||t instanceof cr,20012),t instanceof kn){if(t instanceof Fj){const n=t.value.arrayValue?.values?.map((r=>kn.create(t.field,"==",r)))||[];return cr.create(n,"or")}return t}const e=t.filters.map((n=>E9(n)));return cr.create(e,t.op)}function WY(t){if(t.getFilters().length===0)return[];const e=lA(E9(t));return Ot(A9(e),7391),sA(e)||oA(e)?[e]:e.getFilters()}function sA(t){return t instanceof kn}function oA(t){return t instanceof cr&&QS(t)}function A9(t){return sA(t)||oA(t)||(function(n){if(n instanceof cr&&QE(n)){for(const r of n.getFilters())if(!sA(r)&&!oA(r))return!1;return!0}return!1})(t)}function lA(t){if(Ot(t instanceof kn||t instanceof cr,34018),t instanceof kn)return t;if(t.filters.length===1)return lA(t.filters[0]);const e=t.filters.map((r=>lA(r)));let n=cr.create(e,t.op);return n=Zy(n),A9(n)?n:(Ot(n instanceof cr,64498),Ot($h(n),40251),Ot(n.filters.length>1,57927),n.filters.reduce(((r,i)=>oT(r,i))))}function oT(t,e){let n;return Ot(t instanceof kn||t instanceof cr,38388),Ot(e instanceof kn||e instanceof cr,25473),n=t instanceof kn?e instanceof kn?(function(i,a){return cr.create([i,a],"and")})(t,e):IR(t,e):e instanceof kn?IR(e,t):(function(i,a){if(Ot(i.filters.length>0&&a.filters.length>0,48005),$h(i)&&$h(a))return jj(i,a.getFilters());const l=QE(i)?i:a,f=QE(i)?a:i,m=l.filters.map((p=>oT(p,f)));return cr.create(m,"or")})(t,e),Zy(n)}function IR(t,e){if($h(e))return jj(e,t.getFilters());{const n=e.filters.map((r=>oT(t,r)));return cr.create(n,"or")}}function Zy(t){if(Ot(t instanceof kn||t instanceof cr,11850),t instanceof kn)return t;const e=t.getFilters();if(e.length===1)return Zy(e[0]);if(kj(t))return t;const n=e.map((i=>Zy(i))),r=[];return n.forEach((i=>{i instanceof kn?r.push(i):i instanceof cr&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:cr.create(r,t.op)}class $Y{constructor(){this.Sn=new lT}addToCollectionParentIndex(e,n){return this.Sn.add(n),Ie.resolve()}getCollectionParents(e,n){return Ie.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Ie.resolve()}deleteFieldIndex(e,n){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,n){return Ie.resolve()}getDocumentsMatchingTarget(e,n){return Ie.resolve(null)}getIndexType(e,n){return Ie.resolve(0)}getFieldIndexes(e,n){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,n){return Ie.resolve(io.min())}getMinOffsetFromCollectionGroup(e,n){return Ie.resolve(io.min())}updateCollectionGroup(e,n,r){return Ie.resolve()}updateIndexEntries(e,n){return Ie.resolve()}}class lT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new dr(An.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dr(An.comparator)).toArray()}}const CR="IndexedDbIndexManager",z1=new Uint8Array(0);class YY{constructor(e,n){this.databaseId=n,this.Dn=new lT,this.Cn=new ku((r=>ed(r)),((r,i)=>Zp(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Dn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.Dn.add(n)}));const a={collectionId:r,parent:ts(i)};return OR(e).put(a)}return Ie.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[nj(n),""],!1,!0);return OR(e).H(i).next((a=>{for(const l of a){if(l.collectionId!==n)break;r.push(vl(l.parent))}return r}))}addFieldIndex(e,n){const r=Ig(e),i=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(n);delete i.indexId;const a=r.add(i);if(n.indexState){const l=ch(e);return a.next((f=>{l.put(bR(f,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return a.next()}deleteFieldIndex(e,n){const r=Ig(e),i=ch(e),a=uh(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=Ig(e),r=uh(e),i=ch(e);return n.X().next((()=>r.X())).next((()=>i.X()))}createTargetIndexes(e,n){return Ie.forEach(this.vn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new TR(r).bn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,n){const r=uh(e);let i=!0;const a=new Map;return Ie.forEach(this.vn(n),(l=>this.Fn(e,l).next((f=>{i&&(i=!!f),a.set(l,f)})))).next((()=>{if(i){let l=ln();const f=[];return Ie.forEach(a,((m,p)=>{et(CR,`Using index ${(function(K){return`id=${K.indexId}|cg=${K.collectionGroup}|f=${K.fields.map((X=>`${X.fieldPath}:${X.kind}`)).join(",")}`})(m)} to execute ${ed(n)}`);const b=(function(K,X){const se=GE(X);if(se===void 0)return null;for(const J of Yy(K,se.fieldPath))switch(J.op){case"array-contains-any":return J.value.arrayValue.values||[];case"array-contains":return[J.value]}return null})(p,m),_=(function(K,X){const se=new Map;for(const J of Cf(X))for(const V of Yy(K,J.fieldPath))switch(V.op){case"==":case"in":se.set(J.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return se.set(J.fieldPath.canonicalString(),V.value),Array.from(se.values())}return null})(p,m),T=(function(K,X){const se=[];let J=!0;for(const V of Cf(X)){const W=V.kind===0?sR(K,V.fieldPath,K.startAt):oR(K,V.fieldPath,K.startAt);se.push(W.value),J&&(J=W.inclusive)}return new qc(se,J)})(p,m),N=(function(K,X){const se=[];let J=!0;for(const V of Cf(X)){const W=V.kind===0?oR(K,V.fieldPath,K.endAt):sR(K,V.fieldPath,K.endAt);se.push(W.value),J&&(J=W.inclusive)}return new qc(se,J)})(p,m),j=this.Mn(m,p,T),M=this.Mn(m,p,N),L=this.xn(m,p,_),z=this.On(m.indexId,b,j,T.inclusive,M,N.inclusive,L);return Ie.forEach(z,($=>r.Z($,n.limit).next((K=>{K.forEach((X=>{const se=dt.fromSegments(X.documentKey);l.has(se)||(l=l.add(se),f.push(se))}))}))))})).next((()=>f))}return Ie.resolve(null)}))}vn(e){let n=this.Cn.get(e);return n||(e.filters.length===0?n=[e]:n=WY(cr.create(e.filters,"and")).map((r=>JE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,n),n)}On(e,n,r,i,a,l,f){const m=(n!=null?n.length:1)*Math.max(r.length,a.length),p=m/(n!=null?n.length:1),b=[];for(let _=0;_<m;++_){const T=n?this.Nn(n[_/p]):z1,N=this.Bn(e,T,r[_%p],i),j=this.Ln(e,T,a[_%p],l),M=f.map((L=>this.Bn(e,T,L,!0)));b.push(...this.createRange(N,j,M))}return b}Bn(e,n,r,i){const a=new Lf(e,dt.empty(),n,r);return i?a:a.En()}Ln(e,n,r,i){const a=new Lf(e,dt.empty(),n,r);return i?a.En():a}Fn(e,n){const r=new TR(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let l=null;for(const f of a)r.gn(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l}))}getIndexType(e,n){let r=2;const i=this.vn(n);return Ie.forEach(i,(a=>this.Fn(e,a).next((l=>{l?r!==0&&l.fields.length<(function(m){let p=new dr(qr.comparator),b=!1;for(const _ of m.filters)for(const T of _.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?b=!0:p=p.add(T.field));for(const _ of m.orderBy)_.field.isKeyField()||(p=p.add(_.field));return p.size+(b?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(l){return l.limit!==null})(n)&&i.length>1&&r===2?1:r))}kn(e,n){const r=new Tg;for(const i of Cf(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const l=r.ln(i.kind);jf.Wt.Dt(a,l)}return r.un()}Nn(e){const n=new Tg;return jf.Wt.Dt(e,n.ln(0)),n.un()}Kn(e,n){const r=new Tg;return jf.Wt.Dt(Jf(this.databaseId,n),r.ln((function(a){const l=Cf(a);return l.length===0?0:l[l.length-1].kind})(e))),r.un()}xn(e,n,r){if(r===null)return[];let i=[];i.push(new Tg);let a=0;for(const l of Cf(e)){const f=r[a++];for(const m of i)if(this.qn(n,l.fieldPath)&&wp(f))i=this.Un(i,l,f);else{const p=m.ln(l.kind);jf.Wt.Dt(f,p)}}return this.$n(i)}Mn(e,n,r){return this.xn(e,n,r.position)}$n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Un(e,n,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const m=new Tg;m.seed(f.un()),jf.Wt.Dt(l,m.ln(n.kind)),a.push(m)}return a}qn(e,n){return!!e.filters.find((r=>r instanceof kn&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=Ig(e),i=ch(e);return(n?r.H(KE,IDBKeyRange.bound(n,n)):r.H()).next((a=>{const l=[];return Ie.forEach(a,(f=>i.get([f.indexId,this.uid]).next((m=>{l.push((function(b,_){const T=_?new zh(_.sequenceNumber,new io(id(_.readTime),new dt(vl(_.documentKey)),_.largestBatchId)):zh.empty(),N=b.fields.map((([j,M])=>new Gf(qr.fromServerFormat(j),M)));return new Vh(b.indexId,b.collectionGroup,N,T)})(f,m))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:Gt(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=Ig(e),a=ch(e);return this.Wn(e).next((l=>i.H(KE,IDBKeyRange.bound(n,n)).next((f=>Ie.forEach(f,(m=>a.put(bR(m.indexId,this.uid,l,r))))))))}updateIndexEntries(e,n){const r=new Map;return Ie.forEach(n,((i,a)=>{const l=r.get(i.collectionGroup);return(l?Ie.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next((f=>(r.set(i.collectionGroup,f),Ie.forEach(f,(m=>this.Qn(e,i,m).next((p=>{const b=this.Gn(a,m);return p.isEqual(b)?Ie.resolve():this.zn(e,a,m,p,b)})))))))}))}jn(e,n,r,i){return uh(e).put(i.Rn(this.uid,this.Kn(r,n.key),n.key))}Hn(e,n,r,i){return uh(e).delete(i.An(this.uid,this.Kn(r,n.key),n.key))}Qn(e,n,r){const i=uh(e);let a=new dr(hc);return i.ee({index:pj,range:IDBKeyRange.only([r.indexId,this.uid,Ey(this.Kn(r,n))])},((l,f)=>{a=a.add(new Lf(r.indexId,n,SR(f.arrayValue),SR(f.directionalValue)))})).next((()=>a))}Gn(e,n){let r=new dr(hc);const i=this.kn(n,e);if(i==null)return r;const a=GE(n);if(a!=null){const l=e.data.field(a.fieldPath);if(wp(l))for(const f of l.arrayValue.values||[])r=r.add(new Lf(n.indexId,e.key,this.Nn(f),i))}else r=r.add(new Lf(n.indexId,e.key,z1,i));return r}zn(e,n,r,i,a){et(CR,"Updating index entries for document '%s'",n.key);const l=[];return(function(m,p,b,_,T){const N=m.getIterator(),j=p.getIterator();let M=oh(N),L=oh(j);for(;M||L;){let z=!1,$=!1;if(M&&L){const K=b(M,L);K<0?$=!0:K>0&&(z=!0)}else M!=null?$=!0:z=!0;z?(_(L),L=oh(j)):$?(T(M),M=oh(N)):(M=oh(N),L=oh(j))}})(i,a,hc,(f=>{l.push(this.jn(e,n,r,f))}),(f=>{l.push(this.Hn(e,n,r,f))})),Ie.waitFor(l)}Wn(e){let n=1;return ch(e).ee({index:gj,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((l,f)=>hc(l,f))).filter(((l,f,m)=>!f||hc(l,m[f-1])!==0));const i=[];i.push(e);for(const l of r){const f=hc(l,e),m=hc(l,n);if(f===0)i[0]=e.En();else if(f>0&&m<0)i.push(l),i.push(l.En());else if(m>0)break}i.push(n);const a=[];for(let l=0;l<i.length;l+=2){if(this.Jn(i[l],i[l+1]))return[];const f=i[l].An(this.uid,z1,dt.empty()),m=i[l+1].An(this.uid,z1,dt.empty());a.push(IDBKeyRange.bound(f,m))}return a}Jn(e,n){return hc(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(NR)}getMinOffset(e,n){return Ie.mapArray(this.vn(n),(r=>this.Fn(e,r).next((i=>i||wt(44426))))).next(NR)}}function OR(t){return Xi(t,yp)}function uh(t){return Xi(t,np)}function Ig(t){return Xi(t,KS)}function ch(t){return Xi(t,tp)}function NR(t){Ot(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;qS(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new io(e.readTime,e.documentKey,n)}const PR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},S9=41943040;class Ja{static withCacheSize(e){return new Ja(e,Ja.DEFAULT_COLLECTION_PERCENTILE,Ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function T9(t,e,n){const r=t.store(Fo),i=t.store(Uh),a=[],l=IDBKeyRange.only(n.batchId);let f=0;const m=r.ee({range:l},((b,_,T)=>(f++,T.delete())));a.push(m.next((()=>{Ot(f===1,47070,{batchId:n.batchId})})));const p=[];for(const b of n.mutations){const _=dj(e,b.key.path,n.batchId);a.push(i.delete(_)),p.push(b.key)}return Ie.waitFor(a).next((()=>p))}function Jy(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw wt(14731);e=t.noDocument}return JSON.stringify(e).length}Ja.DEFAULT_COLLECTION_PERCENTILE=10,Ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ja.DEFAULT=new Ja(S9,Ja.DEFAULT_COLLECTION_PERCENTILE,Ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ja.DISABLED=new Ja(-1,0,0);class kx{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static wt(e,n,r,i){Ot(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new kx(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mc(e).ee({index:Bf,range:r},((i,a,l)=>{n=!1,l.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const a=bh(e),l=mc(e);return l.add({}).next((f=>{Ot(typeof f=="number",49019);const m=new nT(f,n,r,i),p=(function(N,j,M){const L=M.baseMutations.map(($=>Ap(N.yt,$))),z=M.mutations.map(($=>Ap(N.yt,$)));return{userId:j,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:L,mutations:z}})(this.serializer,this.userId,m),b=[];let _=new dr(((T,N)=>Gt(T.canonicalString(),N.canonicalString())));for(const T of i){const N=dj(this.userId,T.key.path,f);_=_.add(T.key.path.popLast()),b.push(l.put(p)),b.push(a.put(N,A$))}return _.forEach((T=>{b.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Zn[f]=m.keys()})),Ie.waitFor(b).next((()=>m))}))}lookupMutationBatch(e,n){return mc(e).get(n).next((r=>r?(Ot(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Mf(this.serializer,r)):null))}Xn(e,n){return this.Zn[n]?Ie.resolve(this.Zn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Zn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return mc(e).ee({index:Bf,range:i},((l,f,m)=>{f.userId===this.userId&&(Ot(f.batchId>=r,47524,{Yn:r}),a=Mf(this.serializer,f)),m.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Mc;return mc(e).ee({index:Bf,range:n,reverse:!0},((i,a,l)=>{r=a.batchId,l.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Mc],[this.userId,Number.POSITIVE_INFINITY]);return mc(e).H(Bf,n).next((r=>r.map((i=>Mf(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=py(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return bh(e).ee({range:i},((l,f,m)=>{const[p,b,_]=l,T=vl(b);if(p===this.userId&&n.path.isEqual(T))return mc(e).get(_).next((N=>{if(!N)throw wt(61480,{er:l,batchId:_});Ot(N.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:N.userId,batchId:_}),a.push(Mf(this.serializer,N))}));m.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dr(Gt);const i=[];return n.forEach((a=>{const l=py(this.userId,a.path),f=IDBKeyRange.lowerBound(l),m=bh(e).ee({range:f},((p,b,_)=>{const[T,N,j]=p,M=vl(N);T===this.userId&&a.path.isEqual(M)?r=r.add(j):_.done()}));i.push(m)})),Ie.waitFor(i).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=py(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new dr(Gt);return bh(e).ee({range:l},((m,p,b)=>{const[_,T,N]=m,j=vl(T);_===this.userId&&r.isPrefixOf(j)?j.length===i&&(f=f.add(N)):b.done()})).next((()=>this.tr(e,f)))}tr(e,n){const r=[],i=[];return n.forEach((a=>{i.push(mc(e).get(a).next((l=>{if(l===null)throw wt(35274,{batchId:a});Ot(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:a}),r.push(Mf(this.serializer,l))})))})),Ie.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return T9(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.nr(n.batchId)})),Ie.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return Ie.resolve();const r=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),i=[];return bh(e).ee({range:r},((a,l,f)=>{if(a[0]===this.userId){const m=vl(a[1]);i.push(m)}else f.done()})).next((()=>{Ot(i.length===0,56720,{rr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,n){return I9(e,this.userId,n)}ir(e){return C9(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:Mc,lastStreamToken:""}))}}function I9(t,e,n){const r=py(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return bh(t).ee({range:a,Y:!0},((f,m,p)=>{const[b,_,T]=f;b===e&&_===i&&(l=!0),p.done()})).next((()=>l))}function mc(t){return Xi(t,Fo)}function bh(t){return Xi(t,Uh)}function C9(t){return Xi(t,gp)}class ad{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ad(0)}static ar(){return new ad(-1)}}class XY{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.ur(e).next((n=>{const r=new ad(n.highestTargetId);return n.highestTargetId=r.next(),this.cr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((n=>jt.fromTimestamp(new nr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.ur(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.cr(e,i))))}addTargetData(e,n){return this.lr(e,n).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(n,r),this.cr(e,r))))))}updateTargetData(e,n){return this.lr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>fh(e).delete(n.targetId))).next((()=>this.ur(e))).next((r=>(Ot(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,n,r){let i=0;const a=[];return fh(e).ee(((l,f)=>{const m=Wg(f);m.sequenceNumber<=n&&r.get(m.targetId)===null&&(i++,a.push(this.removeTargetData(e,m)))})).next((()=>Ie.waitFor(a))).next((()=>i))}forEachTarget(e,n){return fh(e).ee(((r,i)=>{const a=Wg(i);n(a)}))}ur(e){return RR(e).get(Wy).next((n=>(Ot(n!==null,2888),n)))}cr(e,n){return RR(e).put(Wy,n)}lr(e,n){return fh(e).put(_9(this.serializer,n))}hr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((n=>n.targetCount))}getTargetData(e,n){const r=ed(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return fh(e).ee({range:i,index:mj},((l,f,m)=>{const p=Wg(f);Zp(n,p.target)&&(a=p,m.done())})).next((()=>a))}addMatchingKeys(e,n,r){const i=[],a=wc(e);return n.forEach((l=>{const f=ts(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))})),Ie.waitFor(i)}removeMatchingKeys(e,n,r){const i=wc(e);return Ie.forEach(n,(a=>{const l=ts(a.path);return Ie.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,n){const r=wc(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=wc(e);let a=ln();return i.ee({range:r,Y:!0},((l,f,m)=>{const p=vl(l[1]),b=new dt(p);a=a.add(b)})).next((()=>a))}containsKey(e,n){const r=ts(n.path),i=IDBKeyRange.bound([r],[nj(r)],!1,!0);let a=0;return wc(e).ee({index:HS,Y:!0,range:i},(([l,f],m,p)=>{l!==0&&(a++,p.done())})).next((()=>a>0))}At(e,n){return fh(e).get(n).next((r=>r?Wg(r):null))}}function fh(t){return Xi(t,qh)}function RR(t){return Xi(t,Hf)}function wc(t){return Xi(t,Gh)}const DR="LruGarbageCollector",O9=1048576;function kR([t,e],[n,r]){const i=Gt(t,n);return i===0?Gt(e,r):i}class QY{constructor(e){this.Pr=e,this.buffer=new dr(kR),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();kR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class N9{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){et(DR,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ef(n)?et(DR,"Ignoring IndexedDB error during garbage collection: ",n):await Jc(n)}await this.Ar(3e5)}))}}class ZY{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Ie.resolve(Ns.ce);const r=new QY(n);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(et("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(PR)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PR):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,a,l,f,m,p;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,l=Date.now(),this.nthSequenceNumber(e,i)))).next((_=>(r=_,f=Date.now(),this.removeTargets(e,r,n)))).next((_=>(a=_,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(p=Date.now(),yh()<=Dn.DEBUG&&et("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-b}ms
	Determined least recently used ${i} in `+(f-l)+`ms
	Removed ${a} targets in `+(m-f)+`ms
	Removed ${_} documents in `+(p-m)+`ms
Total Duration: ${p-b}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:_}))))}}function P9(t,e){return new ZY(t,e)}class JY{constructor(e,n){this.db=e,this.garbageCollector=P9(this,n)}dr(e){const n=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}mr(e,n){return this.yr(e,((r,i)=>n(i)))}addReference(e,n,r){return U1(e,r)}removeReference(e,n,r){return U1(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return U1(e,n)}wr(e,n){return(function(i,a){let l=!1;return C9(i).te((f=>I9(i,f,a).next((m=>(m&&(l=!0),Ie.resolve(!m)))))).next((()=>l))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.yr(e,((l,f)=>{if(f<=n){const m=this.wr(e,l).next((p=>{if(!p)return a++,r.getEntry(e,l).next((()=>(r.removeEntry(l,jt.min()),wc(e).delete((function(_){return[0,ts(_.path)]})(l)))))}));i.push(m)}})).next((()=>Ie.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return U1(e,n)}yr(e,n){const r=wc(e);let i,a=Ns.ce;return r.ee({index:HS},(([l,f],{path:m,sequenceNumber:p})=>{l===0?(a!==Ns.ce&&n(new dt(vl(i)),a),a=p,i=m):a=Ns.ce})).next((()=>{a!==Ns.ce&&n(new dt(vl(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function U1(t,e){return wc(t).put((function(r,i){return{targetId:0,path:ts(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class R9{constructor(){this.changes=new ku((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ur.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ie.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class eX{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Af(e).put(r)}removeEntry(e,n,r){return Af(e).delete((function(a,l){const f=a.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Qy(l),f[f.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.br(e,r))))}getEntry(e,n){let r=Ur.newInvalidDocument(n);return Af(e).ee({index:yy,range:IDBKeyRange.only(Cg(n))},((i,a)=>{r=this.Sr(n,a)})).next((()=>r))}Dr(e,n){let r={size:0,document:Ur.newInvalidDocument(n)};return Af(e).ee({index:yy,range:IDBKeyRange.only(Cg(n))},((i,a)=>{r={document:this.Sr(n,a),size:Jy(a)}})).next((()=>r))}getEntries(e,n){let r=Rs();return this.Cr(e,n,((i,a)=>{const l=this.Sr(i,a);r=r.insert(i,l)})).next((()=>r))}vr(e,n){let r=Rs(),i=new jr(dt.comparator);return this.Cr(e,n,((a,l)=>{const f=this.Sr(a,l);r=r.insert(a,f),i=i.insert(a,Jy(l))})).next((()=>({documents:r,Fr:i})))}Cr(e,n,r){if(n.isEmpty())return Ie.resolve();let i=new dr(LR);n.forEach((m=>i=i.add(m)));const a=IDBKeyRange.bound(Cg(i.first()),Cg(i.last())),l=i.getIterator();let f=l.getNext();return Af(e).ee({index:yy,range:a},((m,p,b)=>{const _=dt.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;f&&LR(f,_)<0;)r(f,null),f=l.getNext();f&&f.isEqual(_)&&(r(f,p),f=l.hasNext()?l.getNext():null),f?b.j(Cg(f)):b.done()})).next((()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,a){const l=n.path,f=[l.popLast().toArray(),l.lastSegment(),Qy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Af(e).H(IDBKeyRange.bound(f,m,!0)).next((p=>{a?.incrementDocumentReadCount(p.length);let b=Rs();for(const _ of p){const T=this.Sr(dt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);T.isFoundDocument()&&(e0(n,T)||i.has(T.key))&&(b=b.insert(T.key,T))}return b}))}getAllFromCollectionGroup(e,n,r,i){let a=Rs();const l=jR(n,r),f=jR(n,io.max());return Af(e).ee({index:hj,range:IDBKeyRange.bound(l,f,!0)},((m,p,b)=>{const _=this.Sr(dt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);a=a.insert(_.key,_),a.size===i&&b.done()})).next((()=>a))}newChangeBuffer(e){return new tX(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return MR(e).get(HE).next((n=>(Ot(!!n,20021),n)))}br(e,n){return MR(e).put(HE,n)}Sr(e,n){if(n){const r=VY(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(jt.min())))return r}return Ur.newInvalidDocument(e)}}function D9(t){return new eX(t)}class tX extends R9{constructor(e,n){super(),this.Mr=e,this.trackRemovals=n,this.Or=new ku((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new dr(((a,l)=>Gt(a.canonicalString(),l.canonicalString())));return this.changes.forEach(((a,l)=>{const f=this.Or.get(a);if(n.push(this.Mr.removeEntry(e,a,f.readTime)),l.isValidDocument()){const m=vR(this.Mr.serializer,l);i=i.add(a.path.popLast());const p=Jy(m);r+=p-f.size,n.push(this.Mr.addEntry(e,a,m))}else if(r-=f.size,this.trackRemovals){const m=vR(this.Mr.serializer,l.convertToNoDocument(jt.min()));n.push(this.Mr.addEntry(e,a,m))}})),i.forEach((a=>{n.push(this.Mr.indexManager.addToCollectionParentIndex(e,a))})),n.push(this.Mr.updateMetadata(e,r)),Ie.waitFor(n)}getFromCache(e,n){return this.Mr.Dr(e,n).next((r=>(this.Or.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Mr.vr(e,n).next((({documents:r,Fr:i})=>(i.forEach(((a,l)=>{this.Or.set(a,{size:l,readTime:r.get(a).readTime})})),r)))}}function MR(t){return Xi(t,pp)}function Af(t){return Xi(t,Ky)}function Cg(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jR(t,e){const n=e.documentKey.path.toArray();return[t,Qy(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function LR(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=Gt(n[a],r[a]),i)return i;return i=Gt(n.length,r.length),i||(i=Gt(n[n.length-2],r[r.length-2]),i||Gt(n[n.length-1],r[r.length-1]))}class nX{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class k9{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&ap(r.mutation,i,Ps.empty(),nr.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ln()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ln()){const i=xl();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let l=Hg();return a.forEach(((f,m)=>{l=l.insert(f,m.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const r=xl();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ln())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((l,f)=>{n.set(l,f)}))}))}computeViews(e,n,r,i){let a=Rs();const l=ip(),f=(function(){return ip()})();return n.forEach(((m,p)=>{const b=r.get(p.key);i.has(p.key)&&(b===void 0||b.mutation instanceof Mu)?a=a.insert(p.key,p):b!==void 0?(l.set(p.key,b.mutation.getFieldMask()),ap(b.mutation,p,b.mutation.getFieldMask(),nr.now())):l.set(p.key,Ps.empty())})),this.recalculateAndSaveOverlays(e,a).next((m=>(m.forEach(((p,b)=>l.set(p,b))),n.forEach(((p,b)=>f.set(p,new nX(b,l.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,n){const r=ip();let i=new jr(((l,f)=>l-f)),a=ln();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const f of l)f.keys().forEach((m=>{const p=n.get(m);if(p===null)return;let b=r.get(m)||Ps.empty();b=f.applyToLocalView(p,b),r.set(m,b);const _=(i.get(f.batchId)||ln()).add(m);i=i.insert(f.batchId,_)}))})).next((()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),p=m.key,b=m.value,_=$j();b.forEach((T=>{if(!a.has(T)){const N=t9(n.get(T),r.get(T));N!==null&&_.set(T,N),a=a.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,_))}return Ie.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return lY(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):Ie.resolve(xl());let f=Fh,m=a;return l.next((p=>Ie.forEach(p,((b,_)=>(f<_.largestBatchId&&(f=_.largestBatchId),a.get(b)?Ie.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{m=m.insert(b,T)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,m,p,ln()))).next((b=>({batchId:f,changes:Wj(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new dt(n)).next((r=>{let i=Hg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let l=Hg();return this.indexManager.getCollectionParents(e,a).next((f=>Ie.forEach(f,(m=>{const p=(function(_,T){return new Du(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(n,m.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next((b=>{b.forEach(((_,T)=>{l=l.insert(_,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((l=>{a.forEach(((m,p)=>{const b=p.getKey();l.get(b)===null&&(l=l.insert(b,Ur.newInvalidDocument(b)))}));let f=Hg();return l.forEach(((m,p)=>{const b=a.get(m);b!==void 0&&ap(b.mutation,p,Ps.empty(),nr.now()),e0(n,p)&&(f=f.insert(m,p))})),f}))}}class rX{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Ie.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ii(i.createTime)}})(n)),Ie.resolve()}getNamedQuery(e,n){return Ie.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:Rx(i.bundledQuery),readTime:Ii(i.readTime)}})(n)),Ie.resolve()}}class iX{constructor(){this.overlays=new jr(dt.comparator),this.Lr=new Map}getOverlay(e,n){return Ie.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xl();return Ie.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.bt(e,n,a)})),Ie.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),Ie.resolve()}getOverlaysForCollection(e,n,r){const i=xl(),a=n.length+1,l=new dt(n.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const m=f.getNext().value,p=m.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return Ie.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new jr(((p,b)=>p-b));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let b=a.get(p.largestBatchId);b===null&&(b=xl(),a=a.insert(p.largestBatchId,b)),b.set(p.getKey(),p)}}const f=xl(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,b)=>f.set(p,b))),!(f.size()>=i)););return Ie.resolve(f)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new iT(n,r));let a=this.Lr.get(n);a===void 0&&(a=ln(),this.Lr.set(n,a)),this.Lr.set(n,a.add(r.key))}}class aX{constructor(){this.sessionToken=oi.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ie.resolve()}}class uT{constructor(){this.kr=new dr(ca.Kr),this.qr=new dr(ca.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new ca(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new ca(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new dt(new An([])),r=new ca(n,e),i=new ca(n,e+1),a=[];return this.qr.forEachInRange([r,i],(l=>{this.Wr(l),a.push(l.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new dt(new An([])),r=new ca(n,e),i=new ca(n,e+1);let a=ln();return this.qr.forEachInRange([r,i],(l=>{a=a.add(l.key)})),a}containsKey(e){const n=new ca(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ca{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return dt.comparator(e.key,n.key)||Gt(e.Hr,n.Hr)}static Ur(e,n){return Gt(e.Hr,n.Hr)||dt.comparator(e.key,n.key)}}class sX{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new dr(ca.Kr)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new nT(a,n,r,i);this.mutationQueue.push(l);for(const f of i)this.Jr=this.Jr.add(new ca(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Ie.resolve(l)}lookupMutationBatch(e,n){return Ie.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return Ie.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?Mc:this.Yn-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ca(n,0),i=new ca(n,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,i],(l=>{const f=this.Zr(l.Hr);a.push(f)})),Ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dr(Gt);return n.forEach((i=>{const a=new ca(i,0),l=new ca(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,l],(f=>{r=r.add(f.Hr)}))})),Ie.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;dt.isDocumentKey(a)||(a=a.child(""));const l=new ca(new dt(a),0);let f=new dr(Gt);return this.Jr.forEachWhile((m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(f=f.add(m.Hr)),!0)}),l),Ie.resolve(this.Yr(f))}Yr(e){const n=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Ot(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return Ie.forEach(n.mutations,(i=>{const a=new ca(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new ca(n,0),i=this.Jr.firstAfterOrEqual(r);return Ie.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class oX{constructor(e){this.ti=e,this.docs=(function(){return new jr(dt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,l=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ie.resolve(r?r.document.mutableCopy():Ur.newInvalidDocument(n))}getEntries(e,n){let r=Rs();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Ur.newInvalidDocument(i))})),Ie.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=Rs();const l=n.path,f=new dt(l.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:p,value:{document:b}}=m.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||qS(oj(b),r)<=0||(i.has(b.key)||e0(n,b))&&(a=a.insert(b.key,b.mutableCopy()))}return Ie.resolve(a)}getAllFromCollectionGroup(e,n,r,i){wt(9500)}ni(e,n){return Ie.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new lX(this)}getSize(e){return Ie.resolve(this.size)}}class lX extends R9{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),Ie.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class uX{constructor(e){this.persistence=e,this.ri=new ku((n=>ed(n)),Zp),this.lastRemoteSnapshotVersion=jt.min(),this.highestTargetId=0,this.ii=0,this.si=new uT,this.targetCount=0,this.oi=ad._r()}forEachTarget(e,n){return this.ri.forEach(((r,i)=>n(i))),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),Ie.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new ad(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Ie.resolve()}updateTargetData(e,n){return this.lr(n),Ie.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ri.forEach(((l,f)=>{f.sequenceNumber<=n&&r.get(f.targetId)===null&&(this.ri.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)})),Ie.waitFor(a).next((()=>i))}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return Ie.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),Ie.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((l=>{a.push(i.markPotentiallyOrphaned(e,l))})),Ie.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Ie.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return Ie.resolve(r)}containsKey(e,n){return Ie.resolve(this.si.containsKey(n))}}class cT{constructor(e,n){this._i={},this.overlays={},this.ai=new Ns(0),this.ui=!1,this.ui=!0,this.ci=new aX,this.referenceDelegate=e(this),this.li=new uX(this),this.indexManager=new $Y,this.remoteDocumentCache=(function(i){return new oX(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new w9(n),this.Pi=new rX(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new iX,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new sX(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){et("MemoryPersistence","Starting transaction:",e);const i=new cX(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((a=>this.referenceDelegate.Ii(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ei(e,n){return Ie.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class cX extends uj{constructor(e){super(),this.currentSequenceNumber=e}}class Mx{constructor(e){this.persistence=e,this.Ri=new uT,this.Ai=null}static Vi(e){return new Mx(e)}get di(){if(this.Ai)return this.Ai;throw wt(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),Ie.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),Ie.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Ie.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.di,(r=>{const i=dt.fromPath(r);return this.mi(e,i).next((a=>{a||n.removeEntry(i,jt.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return Ie.or([()=>Ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class ev{constructor(e,n){this.persistence=e,this.fi=new ku((r=>ts(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=P9(this,n)}static Vi(e,n){return new ev(e,n)}Ti(){}Ii(e){return Ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return Ie.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((a=>a?Ie.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ni(e,(l=>this.wr(e,l,n).next((f=>{f||(r++,a.removeEntry(l,jt.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Ie.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Ie.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Ie.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Ie.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=xy(e.data.value)),n}wr(e,n,r){return Ie.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return Ie.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class fX{constructor(e){this.serializer=e}k(e,n,r,i){const a=new wx("createOrUpgrade",n);r<1&&i>=1&&((function(m){m.createObjectStore(Qp)})(e),(function(m){m.createObjectStore(gp,{keyPath:E$}),m.createObjectStore(Fo,{keyPath:$P,autoIncrement:!0}).createIndex(Bf,YP,{unique:!0}),m.createObjectStore(Uh)})(e),BR(e),(function(m){m.createObjectStore(Of)})(e));let l=Ie.resolve();return r<3&&i>=3&&(r!==0&&((function(m){m.deleteObjectStore(Gh),m.deleteObjectStore(qh),m.deleteObjectStore(Hf)})(e),BR(e)),l=l.next((()=>(function(m){const p=m.store(Hf),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:jt.min().toTimestamp(),targetCount:0};return p.put(Wy,b)})(a)))),r<4&&i>=4&&(r!==0&&(l=l.next((()=>(function(m,p){return p.store(Fo).H().next((_=>{m.deleteObjectStore(Fo),m.createObjectStore(Fo,{keyPath:$P,autoIncrement:!0}).createIndex(Bf,YP,{unique:!0});const T=p.store(Fo),N=_.map((j=>T.put(j)));return Ie.waitFor(N)}))})(e,a)))),l=l.next((()=>{(function(m){m.createObjectStore(Hh,{keyPath:R$})})(e)}))),r<5&&i>=5&&(l=l.next((()=>this.gi(a)))),r<6&&i>=6&&(l=l.next((()=>((function(m){m.createObjectStore(pp)})(e),this.pi(a))))),r<7&&i>=7&&(l=l.next((()=>this.yi(a)))),r<8&&i>=8&&(l=l.next((()=>this.wi(e,a)))),r<9&&i>=9&&(l=l.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(l=l.next((()=>this.bi(a)))),r<11&&i>=11&&(l=l.next((()=>{(function(m){m.createObjectStore(_x,{keyPath:D$})})(e),(function(m){m.createObjectStore(Ex,{keyPath:k$})})(e)}))),r<12&&i>=12&&(l=l.next((()=>{(function(m){const p=m.createObjectStore(Ax,{keyPath:z$});p.createIndex(WE,U$,{unique:!1}),p.createIndex(yj,q$,{unique:!1})})(e)}))),r<13&&i>=13&&(l=l.next((()=>(function(m){const p=m.createObjectStore(Ky,{keyPath:S$});p.createIndex(yy,T$),p.createIndex(hj,I$)})(e))).next((()=>this.Si(e,a))).next((()=>e.deleteObjectStore(Of)))),r<14&&i>=14&&(l=l.next((()=>this.Di(e,a)))),r<15&&i>=15&&(l=l.next((()=>(function(m){m.createObjectStore(KS,{keyPath:M$,autoIncrement:!0}).createIndex(KE,j$,{unique:!1}),m.createObjectStore(tp,{keyPath:L$}).createIndex(gj,B$,{unique:!1}),m.createObjectStore(np,{keyPath:F$}).createIndex(pj,V$,{unique:!1})})(e)))),r<16&&i>=16&&(l=l.next((()=>{n.objectStore(tp).clear()})).next((()=>{n.objectStore(np).clear()}))),r<17&&i>=17&&(l=l.next((()=>{(function(m){m.createObjectStore(WS,{keyPath:G$})})(e)}))),r<18&&i>=18&&F5()&&(l=l.next((()=>{n.objectStore(tp).clear()})).next((()=>{n.objectStore(np).clear()}))),l}pi(e){let n=0;return e.store(Of).ee(((r,i)=>{n+=Jy(i)})).next((()=>{const r={byteSize:n};return e.store(pp).put(HE,r)}))}gi(e){const n=e.store(gp),r=e.store(Fo);return n.H().next((i=>Ie.forEach(i,(a=>{const l=IDBKeyRange.bound([a.userId,Mc],[a.userId,a.lastAcknowledgedBatchId]);return r.H(Bf,l).next((f=>Ie.forEach(f,(m=>{Ot(m.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const p=Mf(this.serializer,m);return T9(e,a.userId,p).next((()=>{}))}))))}))))}yi(e){const n=e.store(Gh),r=e.store(Of);return e.store(Hf).get(Wy).next((i=>{const a=[];return r.ee(((l,f)=>{const m=new An(l),p=(function(_){return[0,ts(_)]})(m);a.push(n.get(p).next((b=>b?Ie.resolve():(_=>n.put({targetId:0,path:ts(_),sequenceNumber:i.highestListenSequenceNumber}))(m))))})).next((()=>Ie.waitFor(a)))}))}wi(e,n){e.createObjectStore(yp,{keyPath:P$});const r=n.store(yp),i=new lT,a=l=>{if(i.add(l)){const f=l.lastSegment(),m=l.popLast();return r.put({collectionId:f,parent:ts(m)})}};return n.store(Of).ee({Y:!0},((l,f)=>{const m=new An(l);return a(m.popLast())})).next((()=>n.store(Uh).ee({Y:!0},(([l,f,m],p)=>{const b=vl(f);return a(b.popLast())}))))}bi(e){const n=e.store(qh);return n.ee(((r,i)=>{const a=Wg(i),l=_9(this.serializer,a);return n.put(l)}))}Si(e,n){const r=n.store(Of),i=[];return r.ee(((a,l)=>{const f=n.store(Ky),m=(function(_){return _.document?new dt(An.fromString(_.document.name).popFirst(5)):_.noDocument?dt.fromSegments(_.noDocument.path):_.unknownDocument?dt.fromSegments(_.unknownDocument.path):wt(36783)})(l).path.toArray(),p={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(p))})).next((()=>Ie.waitFor(i)))}Di(e,n){const r=n.store(Fo),i=D9(this.serializer),a=new cT(Mx.Vi,this.serializer.yt);return r.H().next((l=>{const f=new Map;return l.forEach((m=>{let p=f.get(m.userId)??ln();Mf(this.serializer,m).keys().forEach((b=>p=p.add(b))),f.set(m.userId,p)})),Ie.forEach(f,((m,p)=>{const b=new da(p),_=Dx.wt(this.serializer,b),T=a.getIndexManager(b),N=kx.wt(b,this.serializer,T,a.referenceDelegate);return new k9(i,N,_,T).recalculateAndSaveOverlaysForDocumentKeys(new $E(n,Ns.ce),m).next()}))}))}}function BR(t){t.createObjectStore(Gh,{keyPath:O$}).createIndex(HS,N$,{unique:!0}),t.createObjectStore(qh,{keyPath:"targetId"}).createIndex(mj,C$,{unique:!0}),t.createObjectStore(Hf)}const gc="IndexedDbPersistence",q_=18e5,G_=5e3,H_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",M9="main";class fT{constructor(e,n,r,i,a,l,f,m,p,b,_=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ci=a,this.window=l,this.document=f,this.Fi=p,this.Mi=b,this.xi=_,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=T=>Promise.resolve(),!fT.v())throw new We(De.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new JY(this,i),this.Ki=n+M9,this.serializer=new w9(m),this.qi=new El(this.Ki,this.xi,new fX(this.serializer)),this.ci=new UY,this.li=new XY(this.referenceDelegate,this.serializer),this.remoteDocumentCache=D9(this.serializer),this.Pi=new zY,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,b===!1&&Si(gc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new We(De.FAILED_PRECONDITION,H_);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new Ns(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>q1(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((n=>{n||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((n=>this.isPrimary&&!n?this.Ji(e).next((()=>!1)):!!n&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(ef(e))return et(gc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return et(gc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Og(e).get(sh).next((n=>Ie.resolve(this.Xi(n))))}Yi(e){return q1(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,q_)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Xi(n,Hh);return r.H().next((i=>{const a=this.ns(i,q_),l=i.filter((f=>a.indexOf(f)===-1));return Ie.forEach(l,(f=>r.delete(f.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ui)for(const n of e)this.Ui.removeItem(this.rs(n.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?Ie.resolve(!0):Og(e).get(sh).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,G_)&&!this.ss(n.ownerId)){if(this.Xi(n)&&this.networkEnabled)return!0;if(!this.Xi(n)){if(!n.allowTabSynchronization)throw new We(De.FAILED_PRECONDITION,H_);return!1}}return!(!this.networkEnabled||!this.inForeground)||q1(e).H().next((r=>this.ns(r,G_).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(a||l&&f)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&et(gc,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Qp,Hh],(e=>{const n=new $E(e,Ns.ce);return this.Ji(n).next((()=>this.Yi(n)))})),this.qi.close(),this.ls()}ns(e,n){return e.filter((r=>this.ts(r.updateTimeMs,n)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>q1(e).H().next((n=>this.ns(n,q_).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,n){return kx.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new YY(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Dx.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,n,r){et(gc,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(function(m){return m===18?W$:m===17?wj:m===16?K$:m===15?$S:m===14?bj:m===13?xj:m===12?H$:m===11?vj:void wt(60245)})(this.xi);let l;return this.qi.runTransaction(e,i,a,(f=>(l=new $E(f,this.ai?this.ai.next():Ns.ce),n==="readwrite-primary"?this.ji(l).next((m=>!!m||this.Hi(l))).next((m=>{if(!m)throw Si(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new We(De.FAILED_PRECONDITION,lj);return r(l)})).next((m=>this.Zi(l).next((()=>m)))):this.Ps(l).next((()=>r(l)))))).then((f=>(l.raiseOnCommittedEvent(),f)))}Ps(e){return Og(e).get(sh).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,G_)&&!this.ss(n.ownerId)&&!this.Xi(n)&&!(this.Mi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new We(De.FAILED_PRECONDITION,H_)}))}Zi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Og(e).put(sh,n)}static v(){return El.v()}Ji(e){const n=Og(e);return n.get(sh).next((r=>this.Xi(r)?(et(gc,"Releasing primary lease."),n.delete(sh)):Ie.resolve()))}ts(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Si(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;B5()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const n=this.Ui?.getItem(this.rs(e))!==null;return et(gc,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Si(gc,"Failed to get zombied client id.",n),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Si("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Og(t){return Xi(t,Qp)}function q1(t){return Xi(t,Hh)}function dT(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class hT{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=ln(),i=ln();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new hT(e,n.fromCache,r,i)}}class dX{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class j9{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return B5()?8:cj(Wi())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.gs(e,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ps(e,n,i,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new dX;return this.ys(e,n,l).next((f=>{if(a.result=f,this.As)return this.ws(e,n,l,f.size)}))})).next((()=>a.result))}ws(e,n,r,i){return r.documentReadCount<this.Vs?(yh()<=Dn.DEBUG&&et("QueryEngine","SDK will not create cache indexes for query:",vh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ie.resolve()):(yh()<=Dn.DEBUG&&et("QueryEngine","Query:",vh(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(yh()<=Dn.DEBUG&&et("QueryEngine","The SDK decides to create cache indexes for query:",vh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ns(n))):Ie.resolve())}gs(e,n){if(lR(n))return Ie.resolve(null);let r=ns(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Xy(n,null,"F"),r=ns(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=ln(...a);return this.fs.getDocuments(e,l).next((f=>this.indexManager.getMinOffset(e,r).next((m=>{const p=this.bs(n,f);return this.Ss(n,p,l,m.readTime)?this.gs(e,Xy(n,null,"F")):this.Ds(e,p,n,m)}))))})))))}ps(e,n,r,i){return lR(n)||i.isEqual(jt.min())?Ie.resolve(null):this.fs.getDocuments(e,r).next((a=>{const l=this.bs(n,a);return this.Ss(n,l,r,i)?Ie.resolve(null):(yh()<=Dn.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vh(n)),this.Ds(e,l,n,sj(i,Fh)).next((f=>f)))}))}bs(e,n){let r=new dr(Hj(e));return n.forEach(((i,a)=>{e0(e,a)&&(r=r.add(a))})),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ys(e,n,r){return yh()<=Dn.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",vh(n)),this.fs.getDocumentsMatchingQuery(e,n,io.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}const mT="LocalStore",hX=3e8;class mX{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new jr(Gt),this.Fs=new ku((a=>ed(a)),Zp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new k9(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function L9(t,e,n,r){return new mX(t,e,n,r)}async function B9(t,e){const n=ht(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],f=[];let m=ln();for(const p of i){l.push(p.batchId);for(const b of p.mutations)m=m.add(b.key)}for(const p of a){f.push(p.batchId);for(const b of p.mutations)m=m.add(b.key)}return n.localDocuments.getDocuments(r,m).next((p=>({Ns:p,removedBatchIds:l,addedBatchIds:f})))}))}))}function gX(t,e){const n=ht(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,p,b){const _=p.batch,T=_.keys();let N=Ie.resolve();return T.forEach((j=>{N=N.next((()=>b.getEntry(m,j))).next((M=>{const L=p.docVersions.get(j);Ot(L!==null,48541),M.version.compareTo(L)<0&&(_.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),b.addEntry(M)))}))})),N.next((()=>f.mutationQueue.removeMutationBatch(m,_)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let m=ln();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(m=m.add(f.batch.mutations[p].key));return m})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function F9(t){const e=ht(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function pX(t,e){const n=ht(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const f=[];e.targetChanges.forEach(((b,_)=>{const T=i.get(_);if(!T)return;f.push(n.li.removeMatchingKeys(a,b.removedDocuments,_).next((()=>n.li.addMatchingKeys(a,b.addedDocuments,_))));let N=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(_)!==null?N=N.withResumeToken(oi.EMPTY_BYTE_STRING,jt.min()).withLastLimboFreeSnapshotVersion(jt.min()):b.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(b.resumeToken,r)),i=i.insert(_,N),(function(M,L,z){return M.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=hX?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(T,N,b)&&f.push(n.li.updateTargetData(a,N))}));let m=Rs(),p=ln();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(a,b))})),f.push(V9(a,l,e.documentUpdates).next((b=>{m=b.Bs,p=b.Ls}))),!r.isEqual(jt.min())){const b=n.li.getLastRemoteSnapshotVersion(a).next((_=>n.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));f.push(b)}return Ie.waitFor(f).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,m,p))).next((()=>m))})).then((a=>(n.vs=i,a)))}function V9(t,e,n){let r=ln(),i=ln();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let l=Rs();return n.forEach(((f,m)=>{const p=a.get(f);m.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(jt.min())?(e.removeEntry(f,m.readTime),l=l.insert(f,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),l=l.insert(f,m)):et(mT,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",m.version)})),{Bs:l,Ls:i}}))}function yX(t,e){const n=ht(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Mc),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Zh(t,e){const n=ht(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.li.getTargetData(r,e).next((a=>a?(i=a,Ie.resolve(i)):n.li.allocateTargetId(r).next((l=>(i=new lu(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function Jh(t,e,n){const r=ht(t),i=r.vs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!ef(l))throw l;et(mT,`Failed to update sequence numbers for target ${e}: ${l}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function tv(t,e,n){const r=ht(t);let i=jt.min(),a=ln();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(m,p,b){const _=ht(m),T=_.Fs.get(b);return T!==void 0?Ie.resolve(_.vs.get(T)):_.li.getTargetData(p,b)})(r,l,ns(e)).next((f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(l,f.targetId).next((m=>{a=m}))})).next((()=>r.Cs.getDocumentsMatchingQuery(l,e,n?i:jt.min(),n?a:ln()))).next((f=>(q9(r,Gj(e),f),{documents:f,ks:a})))))}function z9(t,e){const n=ht(t),r=ht(n.li),i=n.vs.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,e).next((l=>l?l.target:null))))}function U9(t,e){const n=ht(t),r=n.Ms.get(e)||jt.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.xs.getAllFromCollectionGroup(i,e,sj(r,Fh),Number.MAX_SAFE_INTEGER))).then((i=>(q9(n,e,i),i)))}function q9(t,e,n){let r=t.Ms.get(e)||jt.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Ms.set(e,r)}async function vX(t,e,n,r){const i=ht(t);let a=ln(),l=Rs();for(const p of n){const b=e.Ks(p.metadata.name);p.document&&(a=a.add(b));const _=e.qs(p);_.setReadTime(e.Us(p.metadata.readTime)),l=l.insert(b,_)}const f=i.xs.newChangeBuffer({trackRemovals:!0}),m=await Zh(i,(function(b){return ns(bm(An.fromString(`__bundle__/docs/${b}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(p=>V9(p,f,l).next((b=>(f.apply(p),b))).next((b=>i.li.removeMatchingKeysForTargetId(p,m.targetId).next((()=>i.li.addMatchingKeys(p,a,m.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(p,b.Bs,b.Ls))).next((()=>b.Bs))))))}async function xX(t,e,n=ln()){const r=await Zh(t,ns(Rx(e.bundledQuery))),i=ht(t);return i.persistence.runTransaction("Save named query","readwrite",(a=>{const l=Ii(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Pi.saveNamedQuery(a,e);const f=r.withResumeToken(oi.EMPTY_BYTE_STRING,l);return i.vs=i.vs.insert(f.targetId,f),i.li.updateTargetData(a,f).next((()=>i.li.removeMatchingKeysForTargetId(a,r.targetId))).next((()=>i.li.addMatchingKeys(a,n,r.targetId))).next((()=>i.Pi.saveNamedQuery(a,e)))}))}const G9="firestore_clients";function FR(t,e){return`${G9}_${t}_${e}`}const H9="firestore_mutations";function VR(t,e,n){let r=`${H9}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const K9="firestore_targets";function K_(t,e){return`${K9}_${t}_${e}`}const ml="SharedClientState";class nv{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static $s(e,n,r){const i=JSON.parse(r);let a,l=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new We(i.error.code,i.error.message))),l?new nv(e,n,i.state,a):(Si(ml,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sp{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static $s(e,n){const r=JSON.parse(n);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new We(r.error.code,r.error.message))),a?new sp(e,r.state,i):(Si(ml,`Failed to parse target state for ID '${e}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rv{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static $s(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=JS();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=fj(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new rv(e,a):(Si(ml,`Failed to parse client data for instance '${e}': ${n}`),null)}}class gT{constructor(e,n){this.clientId=e,this.onlineState=n}static $s(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new gT(n.clientId,n.onlineState):(Si(ml,`Failed to parse online state: ${e}`),null)}}class uA{constructor(){this.activeTargetIds=JS()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class W_{constructor(e,n,r,i,a){this.window=e,this.Ci=n,this.persistenceKey=r,this.zs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new jr(Gt),this.started=!1,this.Zs=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Xs=FR(this.persistenceKey,this.zs),this.Ys=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new uA),this.eo=new RegExp(`^${G9}_${l}_([^_]*)$`),this.no=new RegExp(`^${H9}_${l}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${K9}_${l}_(\\d+)$`),this.io=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this.so=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const i=this.getItem(FR(this.persistenceKey,r));if(i){const a=rv.$s(r,i);a&&(this.Js=this.Js.insert(a.clientId,a))}}this.oo();const n=this.storage.getItem(this.io);if(n){const r=this._o(n);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let n=!1;return this.Js.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,n,r){this.co(e,n,r),this.lo(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(K_(this.persistenceKey,e));if(i){const a=sp.$s(e,i);a&&(r=a.state)}}return n&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(K_(this.persistenceKey,e))}updateQueryState(e,n,r){this.Po(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.lo(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return et(ml,"READ",e,n),n}setItem(e,n){et(ml,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){et(ml,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const n=e;if(n.storageArea===this.storage){if(et(ml,"EVENT",n.key,n.newValue),n.key===this.Xs)return void Si("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.eo.test(n.key)){if(n.newValue==null){const r=this.Eo(n.key);return this.Ro(r,null)}{const r=this.Ao(n.key,n.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(n.key)){if(n.newValue!==null){const r=this.Vo(n.key,n.newValue);if(r)return this.mo(r)}}else if(this.ro.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(n.key===this.io){if(n.newValue!==null){const r=this._o(n.newValue);if(r)return this.ao(r)}}else if(n.key===this.Ys){const r=(function(a){let l=Ns.ce;if(a!=null)try{const f=JSON.parse(a);Ot(typeof f=="number",30636,{yo:a}),l=f}catch(f){Si(ml,"Failed to read sequence number from WebStorage",f)}return l})(n.newValue);r!==Ns.ce&&this.sequenceNumberHandler(r)}else if(n.key===this.so){const r=this.wo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.bo(i))))}}}else this.Zs.push(n)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,n,r){const i=new nv(this.currentUser,e,n,r),a=VR(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Ws())}lo(e){const n=VR(this.persistenceKey,this.currentUser,e);this.removeItem(n)}To(e){const n={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(n))}Po(e,n,r){const i=K_(this.persistenceKey,e),a=new sp(e,n,r);this.setItem(i,a.Ws())}Io(e){const n=JSON.stringify(Array.from(e));this.setItem(this.so,n)}Eo(e){const n=this.eo.exec(e);return n?n[1]:null}Ao(e,n){const r=this.Eo(e);return rv.$s(r,n)}Vo(e,n){const r=this.no.exec(e),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return nv.$s(new da(a),i,n)}fo(e,n){const r=this.ro.exec(e),i=Number(r[1]);return sp.$s(i,n)}_o(e){return gT.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);et(ml,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,n){const r=n?this.Js.insert(e,n):this.Js.remove(e),i=this.uo(this.Js),a=this.uo(r),l=[],f=[];return a.forEach((m=>{i.has(m)||l.push(m)})),i.forEach((m=>{a.has(m)||f.push(m)})),this.syncEngine.Co(l,f).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let n=JS();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class W9{constructor(){this.vo=new uA,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new uA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class bX{Mo(e){}shutdown(){}}const zR="ConnectivityMonitor";class UR{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){et(zR,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){et(zR,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let G1=null;function cA(){return G1===null?G1=(function(){return 268435456+Math.round(2147483648*Math.random())})():G1++,"0x"+G1.toString(16)}const $_="RestConnection",wX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class _X{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===xp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const l=cA(),f=this.Qo(e,n.toUriEncodedString());et($_,`Sending RPC '${e}' ${l}:`,f,r);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,i,a);const{host:p}=new URL(f),b=wd(p);return this.zo(e,f,m,r,b).then((_=>(et($_,`Received RPC '${e}' ${l}: `,_),_)),(_=>{throw Ls($_,`RPC '${e}' ${l} failed with error: `,_,"url: ",f,"request:",r),_}))}jo(e,n,r,i,a,l){return this.Wo(e,n,r,i,a)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xm})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}Qo(e,n){const r=wX[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class EX{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Qa="WebChannelConnection",Ng=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Ch extends _X{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ch.c_){const e=Q5();Ng(e,X5.STAT_EVENT,(n=>{n.stat===VE.PROXY?et(Qa,"STAT_EVENT: detected buffering proxy"):n.stat===VE.NOPROXY&&et(Qa,"STAT_EVENT: detected no buffering proxy")})),Ch.c_=!0}}zo(e,n,r,i,a){const l=cA();return new Promise(((f,m)=>{const p=new $5;p.setWithCredentials(!0),p.listenOnce(Y5.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case gy.NO_ERROR:const _=p.getResponseJson();et(Qa,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),f(_);break;case gy.TIMEOUT:et(Qa,`RPC '${e}' ${l} timed out`),m(new We(De.DEADLINE_EXCEEDED,"Request time out"));break;case gy.HTTP_ERROR:const T=p.getStatus();if(et(Qa,`RPC '${e}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let N=p.getResponseJson();Array.isArray(N)&&(N=N[0]);const j=N?.error;if(j&&j.status&&j.message){const M=(function(z){const $=z.toLowerCase().replace(/_/g,"-");return Object.values(De).indexOf($)>=0?$:De.UNKNOWN})(j.status);m(new We(M,j.message))}else m(new We(De.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new We(De.UNAVAILABLE,"Connection failed."));break;default:wt(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{et(Qa,`RPC '${e}' ${l} completed.`)}}));const b=JSON.stringify(i);et(Qa,`RPC '${e}' ${l} sending request:`,i),p.send(n,"POST",b,r,15)}))}T_(e,n,r){const i=cA(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const p=a.join("");et(Qa,`Creating RPC '${e}' stream ${i}: ${p}`,f);const b=l.createWebChannel(p,f);this.I_(b);let _=!1,T=!1;const N=new EX({Ho:j=>{T?et(Qa,`Not sending because RPC '${e}' stream ${i} is closed:`,j):(_||(et(Qa,`Opening RPC '${e}' stream ${i} transport.`),b.open(),_=!0),et(Qa,`RPC '${e}' stream ${i} sending:`,j),b.send(j))},Jo:()=>b.close()});return Ng(b,Gg.EventType.OPEN,(()=>{T||(et(Qa,`RPC '${e}' stream ${i} transport opened.`),N.i_())})),Ng(b,Gg.EventType.CLOSE,(()=>{T||(T=!0,et(Qa,`RPC '${e}' stream ${i} transport closed`),N.o_(),this.E_(b))})),Ng(b,Gg.EventType.ERROR,(j=>{T||(T=!0,Ls(Qa,`RPC '${e}' stream ${i} transport errored. Name:`,j.name,"Message:",j.message),N.o_(new We(De.UNAVAILABLE,"The operation could not be completed")))})),Ng(b,Gg.EventType.MESSAGE,(j=>{if(!T){const M=j.data[0];Ot(!!M,16349);const L=M,z=L?.error||L[0]?.error;if(z){et(Qa,`RPC '${e}' stream ${i} received error:`,z);const $=z.status;let K=(function(J){const V=Bi[J];if(V!==void 0)return a9(V)})($),X=z.message;$==="NOT_FOUND"&&X.includes("database")&&X.includes("does not exist")&&X.includes(this.databaseId.database)&&Ls(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),K===void 0&&(K=De.INTERNAL,X="Unknown error status: "+$+" with message "+z.message),T=!0,N.o_(new We(K,X)),b.close()}else et(Qa,`RPC '${e}' stream ${i} received:`,M),N.__(M)}})),Ch.u_(),setTimeout((()=>{N.s_()}),0),N}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Z5()}}function AX(t){return new Ch(t)}function $9(){return typeof window<"u"?window:null}function Ay(){return typeof document<"u"?document:null}function Ed(t){return new NY(t,!0)}Ch.c_=!1;class pT{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&et("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const qR="PersistentStream";class Y9{constructor(e,n,r,i,a,l,f,m){this.Ci=e,this.b_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new pT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===De.RESOURCE_EXHAUSTED?(Si(n.toString()),Si("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===De.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new We(De.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return et(qR,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(et(qR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SX extends Y9{constructor(e,n,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=DY(this.serializer,e),r=(function(a){if(!("targetChange"in a))return jt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?jt.min():l.readTime?Ii(l.readTime):jt.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=iA(this.serializer),n.addTarget=(function(a,l){let f;const m=l.target;if(f=$y(m)?{documents:m9(a,m)}:{query:Px(a,m).ft},f.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){f.resumeToken=u9(a,l.resumeToken);const p=nA(a,l.expectedCount);p!==null&&(f.expectedCount=p)}else if(l.snapshotVersion.compareTo(jt.min())>0){f.readTime=Qh(a,l.snapshotVersion.toTimestamp());const p=nA(a,l.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const r=MY(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=iA(this.serializer),n.removeTarget=e,this.K_(n)}}class TX extends Y9{constructor(e,n,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=kY(e.writeResults,e.commitTime),r=Ii(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=iA(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Ap(this.serializer,r)))};this.K_(n)}}class IX{}class CX extends IX{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new We(De.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,rA(n,r),i,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===De.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new We(De.UNKNOWN,a.toString())}))}jo(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,f])=>this.connection.jo(e,rA(n,r),i,l,f,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===De.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new We(De.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function OX(t,e,n,r){return new CX(t,e,n,r)}class NX{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Si(n),this.aa=!1):et("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const sd="RemoteStore";class PX{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((l=>{r.enqueueAndForget((async()=>{nf(this)&&(et(sd,"Restarting streams for network reachability change."),await(async function(m){const p=ht(m);p.Ea.add(4),await Em(p),p.Va.set("Unknown"),p.Ea.delete(4),await i0(p)})(this))}))})),this.Va=new NX(r,i)}}async function i0(t){if(nf(t))for(const e of t.Ra)await e(!0)}async function Em(t){for(const e of t.Ra)await e(!1)}function jx(t,e){const n=ht(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),xT(n)?vT(n):Sm(n).O_()&&yT(n,e))}function em(t,e){const n=ht(t),r=Sm(n);n.Ia.delete(e),r.O_()&&X9(n,e),n.Ia.size===0&&(r.O_()?r.L_():nf(n)&&n.Va.set("Unknown"))}function yT(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(jt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sm(t).Z_(e)}function X9(t,e){t.da.$e(e),Sm(t).X_(e)}function vT(t){t.da=new TY({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Sm(t).start(),t.Va.ua()}function xT(t){return nf(t)&&!Sm(t).x_()&&t.Ia.size>0}function nf(t){return ht(t).Ea.size===0}function Q9(t){t.da=void 0}async function RX(t){t.Va.set("Online")}async function DX(t){t.Ia.forEach(((e,n)=>{yT(t,e)}))}async function kX(t,e){Q9(t),xT(t)?(t.Va.ha(e),vT(t)):t.Va.set("Unknown")}async function MX(t,e,n){if(t.Va.set("Online"),e instanceof l9&&e.state===2&&e.cause)try{await(async function(i,a){const l=a.cause;for(const f of a.targetIds)i.Ia.has(f)&&(await i.remoteSyncer.rejectListen(f,l),i.Ia.delete(f),i.da.removeTarget(f))})(t,e)}catch(r){et(sd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await iv(t,r)}else if(e instanceof _y?t.da.Xe(e):e instanceof o9?t.da.st(e):t.da.tt(e),!n.isEqual(jt.min()))try{const r=await F9(t.localStore);n.compareTo(r)>=0&&await(function(a,l){const f=a.da.Tt(l);return f.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const b=a.Ia.get(p);b&&a.Ia.set(p,b.withResumeToken(m.resumeToken,l))}})),f.targetMismatches.forEach(((m,p)=>{const b=a.Ia.get(m);if(!b)return;a.Ia.set(m,b.withResumeToken(oi.EMPTY_BYTE_STRING,b.snapshotVersion)),X9(a,m);const _=new lu(b.target,m,p,b.sequenceNumber);yT(a,_)})),a.remoteSyncer.applyRemoteEvent(f)})(t,n)}catch(r){et(sd,"Failed to raise snapshot:",r),await iv(t,r)}}async function iv(t,e,n){if(!ef(e))throw e;t.Ea.add(1),await Em(t),t.Va.set("Offline"),n||(n=()=>F9(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{et(sd,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await i0(t)}))}function Z9(t,e){return e().catch((n=>iv(t,n,e)))}async function Am(t){const e=ht(t),n=Gc(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Mc;for(;jX(e);)try{const i=await yX(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,LX(e,i)}catch(i){await iv(e,i)}J9(e)&&e7(e)}function jX(t){return nf(t)&&t.Ta.length<10}function LX(t,e){t.Ta.push(e);const n=Gc(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function J9(t){return nf(t)&&!Gc(t).x_()&&t.Ta.length>0}function e7(t){Gc(t).start()}async function BX(t){Gc(t).ra()}async function FX(t){const e=Gc(t);for(const n of t.Ta)e.ea(n.mutations)}async function VX(t,e,n){const r=t.Ta.shift(),i=rT.from(r,e,n);await Z9(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Am(t)}async function zX(t,e){e&&Gc(t).Y_&&await(async function(r,i){if((function(l){return i9(l)&&l!==De.ABORTED})(i.code)){const a=r.Ta.shift();Gc(r).B_(),await Z9(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Am(r)}})(t,e),J9(t)&&e7(t)}async function GR(t,e){const n=ht(t);n.asyncQueue.verifyOperationInProgress(),et(sd,"RemoteStore received new credentials");const r=nf(n);n.Ea.add(3),await Em(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await i0(n)}async function fA(t,e){const n=ht(t);e?(n.Ea.delete(2),await i0(n)):e||(n.Ea.add(2),await Em(n),n.Va.set("Unknown"))}function Sm(t){return t.ma||(t.ma=(function(n,r,i){const a=ht(n);return a.sa(),new SX(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:RX.bind(null,t),Yo:DX.bind(null,t),t_:kX.bind(null,t),J_:MX.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),xT(t)?vT(t):t.Va.set("Unknown")):(await t.ma.stop(),Q9(t))}))),t.ma}function Gc(t){return t.fa||(t.fa=(function(n,r,i){const a=ht(n);return a.sa(),new TX(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:BX.bind(null,t),t_:zX.bind(null,t),ta:FX.bind(null,t),na:VX.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Am(t)):(await t.fa.stop(),t.Ta.length>0&&(et(sd,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class bT{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new pa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const l=Date.now()+r,f=new bT(e,n,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new We(De.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tm(t,e){if(Si("AsyncQueue",`${e}: ${t}`),ef(t))return new We(De.UNAVAILABLE,`${e}: ${t}`);throw t}class Kf{static emptySet(e){return new Kf(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||dt.comparator(n.key,r.key):(n,r)=>dt.comparator(n.key,r.key),this.keyedMap=Hg(),this.sortedSet=new jr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Kf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Kf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class HR{constructor(){this.ga=new jr(dt.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):wt(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class od{constructor(e,n,r,i,a,l,f,m,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,i,a){const l=[];return n.forEach((f=>{l.push({type:0,doc:f})})),new od(e,n,Kf.emptySet(n),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class UX{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class qX{constructor(){this.queries=KR(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ht(n),a=i.queries;i.queries=KR(),a.forEach(((l,f)=>{for(const m of f.ba)m.onError(r)}))})(this,new We(De.ABORTED,"Firestore shutting down"))}}function KR(){return new ku((t=>qj(t)),Jp)}async function wT(t,e){const n=ht(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.Da()&&(r=2):(a=new UX,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(l){const f=Tm(l,`Initialization of query '${vh(e.query)}' failed`);return void e.onError(f)}n.queries.set(i,a),a.ba.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&ET(n)}async function _T(t,e){const n=ht(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const l=a.ba.indexOf(e);l>=0&&(a.ba.splice(l,1),a.ba.length===0?i=e.Da()?0:1:!a.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function GX(t,e){const n=ht(t);let r=!1;for(const i of e){const a=i.query,l=n.queries.get(a);if(l){for(const f of l.ba)f.Fa(i)&&(r=!0);l.wa=i}}r&&ET(n)}function HX(t,e,n){const r=ht(t),i=r.queries.get(e);if(i)for(const a of i.ba)a.onError(n);r.queries.delete(e)}function ET(t){t.Ca.forEach((e=>{e.next()}))}var dA,WR;(WR=dA||(dA={})).Ma="default",WR.Cache="cache";class AT{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new od(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=od.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dA.Cache}}class t7{constructor(e,n){this.qa=e,this.byteLength=n}Ua(){return"metadata"in this.qa}}class $R{constructor(e){this.serializer=e}Ks(e){return Al(this.serializer,e)}qs(e){return e.metadata.exists?Nx(this.serializer,e.document,!1):Ur.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Ii(e)}}class ST{constructor(e,n){this.$a=e,this.serializer=n,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=n7(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++n;const r=An.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new $R(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.Ks(i.metadata.name);for(const l of i.metadata.queries){const f=(n.get(l)||ln()).add(a);n.set(l,f)}}return n}async ja(e){const n=await vX(e,new $R(this.serializer),this.Qa,this.$a.id),r=this.za(this.documents);for(const i of this.Wa)await xX(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:n}}}function n7(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class r7{constructor(e){this.key=e}}class i7{constructor(e){this.key=e}}class a7{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ln(),this.mutatedKeys=ln(),this.eu=Hj(e),this.tu=new Kf(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new HR,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,l=i,f=!1;const m=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((b,_)=>{const T=i.get(b),N=e0(this.query,_)?_:null,j=!!T&&this.mutatedKeys.has(T.key),M=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let L=!1;T&&N?T.data.isEqual(N.data)?j!==M&&(r.track({type:3,doc:N}),L=!0):this.su(T,N)||(r.track({type:2,doc:N}),L=!0,(m&&this.eu(N,m)>0||p&&this.eu(N,p)<0)&&(f=!0)):!T&&N?(r.track({type:0,doc:N}),L=!0):T&&!N&&(r.track({type:1,doc:T}),L=!0,(m||p)&&(f=!0)),L&&(N?(l=l.add(N),a=M?a.add(b):a.delete(b)):(l=l.delete(b),a=a.delete(b)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const b=this.query.limitType==="F"?l.last():l.first();l=l.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{tu:l,iu:r,Ss:f,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((b,_)=>(function(N,j){const M=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt(20277,{Vt:L})}};return M(N)-M(j)})(b.type,_.type)||this.eu(b.doc,_.doc))),this.ou(r),i=i??!1;const f=n&&!i?this._u():[],m=this.Ya.size===0&&this.current&&!i?1:0,p=m!==this.Xa;return this.Xa=m,l.length!==0||p?{snapshot:new od(this.query,e.tu,a,l,e.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new HR,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ln(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new i7(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new r7(r))})),n}cu(e){this.Za=e.ks,this.Ya=ln();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return od.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const rf="SyncEngine";class KX{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class WX{constructor(e){this.key=e,this.hu=!1}}class $X{constructor(e,n,r,i,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new ku((f=>qj(f)),Jp),this.Iu=new Map,this.Eu=new Set,this.Ru=new jr(dt.comparator),this.Au=new Map,this.Vu=new uT,this.du={},this.mu=new Map,this.fu=ad.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YX(t,e,n=!0){const r=Lx(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await s7(r,e,n,!0),i}async function XX(t,e){const n=Lx(t);await s7(n,e,!0,!1)}async function s7(t,e,n,r){const i=await Zh(t.localStore,ns(e)),a=i.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let f;return r&&(f=await TT(t,e,a,l==="current",i.resumeToken)),t.isPrimaryClient&&n&&jx(t.remoteStore,i),f}async function TT(t,e,n,r,i){t.pu=(_,T,N)=>(async function(M,L,z,$){let K=L.view.ru(z);K.Ss&&(K=await tv(M.localStore,L.query,!1).then((({documents:V})=>L.view.ru(V,K))));const X=$&&$.targetChanges.get(L.targetId),se=$&&$.targetMismatches.get(L.targetId)!=null,J=L.view.applyChanges(K,M.isPrimaryClient,X,se);return hA(M,L.targetId,J.au),J.snapshot})(t,_,T,N);const a=await tv(t.localStore,e,!0),l=new a7(e,a.ks),f=l.ru(a.documents),m=r0.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),p=l.applyChanges(f,t.isPrimaryClient,m);hA(t,n,p.au);const b=new KX(e,n,l);return t.Tu.set(e,b),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function QX(t,e,n){const r=ht(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((l=>!Jp(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Jh(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&em(r.remoteStore,i.targetId),tm(r,i.targetId)})).catch(Jc)):(tm(r,i.targetId),await Jh(r.localStore,i.targetId,!0))}async function ZX(t,e){const n=ht(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),em(n.remoteStore,r.targetId))}async function JX(t,e,n){const r=NT(t);try{const i=await(function(l,f){const m=ht(l),p=nr.now(),b=f.reduce(((N,j)=>N.add(j.key)),ln());let _,T;return m.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let j=Rs(),M=ln();return m.xs.getEntries(N,b).next((L=>{j=L,j.forEach(((z,$)=>{$.isValidDocument()||(M=M.add(z))}))})).next((()=>m.localDocuments.getOverlayedDocuments(N,j))).next((L=>{_=L;const z=[];for(const $ of f){const K=_Y($,_.get($.key).overlayedDocument);K!=null&&z.push(new Mu($.key,K,Rj(K.value.mapValue),ei.exists(!0)))}return m.mutationQueue.addMutationBatch(N,p,z,f)})).next((L=>{T=L;const z=L.applyToLocalDocumentSet(_,M);return m.documentOverlayCache.saveOverlays(N,L.batchId,z)}))})).then((()=>({batchId:T.batchId,changes:Wj(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,f,m){let p=l.du[l.currentUser.toKey()];p||(p=new jr(Gt)),p=p.insert(f,m),l.du[l.currentUser.toKey()]=p})(r,i.batchId,n),await ju(r,i.changes),await Am(r.remoteStore)}catch(i){const a=Tm(i,"Failed to persist write");n.reject(a)}}async function o7(t,e){const n=ht(t);try{const r=await pX(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const l=n.Au.get(a);l&&(Ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?Ot(l.hu,14607):i.removedDocuments.size>0&&(Ot(l.hu,42227),l.hu=!1))})),await ju(n,r,e)}catch(r){await Jc(r)}}function YR(t,e,n){const r=ht(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,l)=>{const f=l.view.va(e);f.snapshot&&i.push(f.snapshot)})),(function(l,f){const m=ht(l);m.onlineState=f;let p=!1;m.queries.forEach(((b,_)=>{for(const T of _.ba)T.va(f)&&(p=!0)})),p&&ET(m)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function eQ(t,e,n){const r=ht(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let l=new jr(dt.comparator);l=l.insert(a,Ur.newNoDocument(a,jt.min()));const f=ln().add(a),m=new n0(jt.min(),new Map,new jr(Gt),l,f);await o7(r,m),r.Ru=r.Ru.remove(a),r.Au.delete(e),OT(r)}else await Jh(r.localStore,e,!1).then((()=>tm(r,e,n))).catch(Jc)}async function tQ(t,e){const n=ht(t),r=e.batch.batchId;try{const i=await gX(n.localStore,e);CT(n,r,null),IT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ju(n,i)}catch(i){await Jc(i)}}async function nQ(t,e,n){const r=ht(t);try{const i=await(function(l,f){const m=ht(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let b;return m.mutationQueue.lookupMutationBatch(p,f).next((_=>(Ot(_!==null,37113),b=_.keys(),m.mutationQueue.removeMutationBatch(p,_)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,b,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,b))).next((()=>m.localDocuments.getDocuments(p,b)))}))})(r.localStore,e);CT(r,e,n),IT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ju(r,i)}catch(i){await Jc(i)}}async function rQ(t,e){const n=ht(t);nf(n.remoteStore)||et(rf,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(l){const f=ht(l);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(m=>f.mutationQueue.getHighestUnacknowledgedBatchId(m)))})(n.localStore);if(r===Mc)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=Tm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function IT(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function CT(t,e,n){const r=ht(t);let i=r.du[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function tm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||l7(t,r)}))}function l7(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(em(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),OT(t))}function hA(t,e,n){for(const r of n)r instanceof r7?(t.Vu.addReference(r.key,e),iQ(t,r)):r instanceof i7?(et(rf,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||l7(t,r.key)):wt(19791,{wu:r})}function iQ(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(et(rf,"New document in limbo: "+n),t.Eu.add(r),OT(t))}function OT(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new dt(An.fromString(e)),r=t.fu.next();t.Au.set(r,new WX(n)),t.Ru=t.Ru.insert(n,r),jx(t.remoteStore,new lu(ns(bm(n.path)),r,"TargetPurposeLimboResolution",Ns.ce))}}async function ju(t,e,n){const r=ht(t),i=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((f,m)=>{l.push(r.pu(m,e,n).then((p=>{if((p||n)&&r.isPrimaryClient){const b=p?!p.fromCache:n?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,b?"current":"not-current")}if(p){i.push(p);const b=hT.Es(m.targetId,p);a.push(b)}})))})),await Promise.all(l),r.Pu.J_(i),await(async function(m,p){const b=ht(m);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>Ie.forEach(p,(T=>Ie.forEach(T.Ts,(N=>b.persistence.referenceDelegate.addReference(_,T.targetId,N))).next((()=>Ie.forEach(T.Is,(N=>b.persistence.referenceDelegate.removeReference(_,T.targetId,N)))))))))}catch(_){if(!ef(_))throw _;et(mT,"Failed to update sequence numbers: "+_)}for(const _ of p){const T=_.targetId;if(!_.fromCache){const N=b.vs.get(T),j=N.snapshotVersion,M=N.withLastLimboFreeSnapshotVersion(j);b.vs=b.vs.insert(T,M)}}})(r.localStore,a))}async function aQ(t,e){const n=ht(t);if(!n.currentUser.isEqual(e)){et(rf,"User change. New user:",e.toKey());const r=await B9(n.localStore,e);n.currentUser=e,(function(a,l){a.mu.forEach((f=>{f.forEach((m=>{m.reject(new We(De.CANCELLED,l))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ju(n,r.Ns)}}function sQ(t,e){const n=ht(t),r=n.Au.get(e);if(r&&r.hu)return ln().add(r.key);{let i=ln();const a=n.Iu.get(e);if(!a)return i;for(const l of a){const f=n.Tu.get(l);i=i.unionWith(f.view.nu)}return i}}async function oQ(t,e){const n=ht(t),r=await tv(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&hA(n,e.targetId,i.au),i}async function lQ(t,e){const n=ht(t);return U9(n.localStore,e).then((r=>ju(n,r)))}async function uQ(t,e,n,r){const i=ht(t),a=await(function(f,m){const p=ht(f),b=ht(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(_=>b.Xn(_,m).next((T=>T?p.localDocuments.getDocuments(_,T):Ie.resolve(null)))))})(i.localStore,e);a!==null?(n==="pending"?await Am(i.remoteStore):n==="acknowledged"||n==="rejected"?(CT(i,e,r||null),IT(i,e),(function(f,m){ht(ht(f).mutationQueue).nr(m)})(i.localStore,e)):wt(6720,"Unknown batchState",{bu:n}),await ju(i,a)):et(rf,"Cannot apply mutation batch with id: "+e)}async function cQ(t,e){const n=ht(t);if(Lx(n),NT(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await XR(n,r.toArray());n.gu=!0,await fA(n.remoteStore,!0);for(const a of i)jx(n.remoteStore,a)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((a,l)=>{n.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then((()=>(tm(n,l),Jh(n.localStore,l,!0)))),em(n.remoteStore,l)})),await i,await XR(n,r),(function(l){const f=ht(l);f.Au.forEach(((m,p)=>{em(f.remoteStore,p)})),f.Vu.zr(),f.Au=new Map,f.Ru=new jr(dt.comparator)})(n),n.gu=!1,await fA(n.remoteStore,!1)}}async function XR(t,e,n){const r=ht(t),i=[],a=[];for(const l of e){let f;const m=r.Iu.get(l);if(m&&m.length!==0){f=await Zh(r.localStore,ns(m[0]));for(const p of m){const b=r.Tu.get(p),_=await oQ(r,b);_.snapshot&&a.push(_.snapshot)}}else{const p=await z9(r.localStore,l);f=await Zh(r.localStore,p),await TT(r,u7(p),l,!1,f.resumeToken)}i.push(f)}return r.Pu.J_(a),i}function u7(t){return Vj(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function fQ(t){return(function(n){return ht(ht(n).persistence).hs()})(ht(t).localStore)}async function dQ(t,e,n,r){const i=ht(t);if(i.gu)return void et(rf,"Ignoring unexpected query state notification.");const a=i.Iu.get(e);if(a&&a.length>0)switch(n){case"current":case"not-current":{const l=await U9(i.localStore,Gj(a[0])),f=n0.createSynthesizedRemoteEventForCurrentChange(e,n==="current",oi.EMPTY_BYTE_STRING);await ju(i,l,f);break}case"rejected":await Jh(i.localStore,e,!0),tm(i,e,r);break;default:wt(64155,n)}}async function hQ(t,e,n){const r=Lx(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){et(rf,"Adding an already active target "+i);continue}const a=await z9(r.localStore,i),l=await Zh(r.localStore,a);await TT(r,u7(a),l.targetId,!1,l.resumeToken),jx(r.remoteStore,l)}for(const i of n)r.Iu.has(i)&&await Jh(r.localStore,i,!1).then((()=>{em(r.remoteStore,i),tm(r,i)})).catch(Jc)}}function Lx(t){const e=ht(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=o7.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eQ.bind(null,e),e.Pu.J_=GX.bind(null,e.eventManager),e.Pu.yu=HX.bind(null,e.eventManager),e}function NT(t){const e=ht(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nQ.bind(null,e),e}function mQ(t,e,n){const r=ht(t);(async function(a,l,f){try{const m=await l.getMetadata();if(await(function(N,j){const M=ht(N),L=Ii(j.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",(z=>M.Pi.getBundleMetadata(z,j.id))).then((z=>!!z&&z.createTime.compareTo(L)>=0))})(a.localStore,m))return await l.close(),f._completeWith((function(N){return{taskState:"Success",documentsLoaded:N.totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}})(m)),Promise.resolve(new Set);f._updateProgress(n7(m));const p=new ST(m,l.serializer);let b=await l.Su();for(;b;){const T=await p.Ga(b);T&&f._updateProgress(T),b=await l.Su()}const _=await p.ja(a.localStore);return await ju(a,_.Ja,void 0),await(function(N,j){const M=ht(N);return M.persistence.runTransaction("Save bundle","readwrite",(L=>M.Pi.saveBundleMetadata(L,j)))})(a.localStore,m),f._completeWith(_.progress),Promise.resolve(_.Ha)}catch(m){return Ls(rf,`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}})(r,e,n).then((i=>{r.sharedClientState.notifyBundleLoaded(i)}))}class nm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ed(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return L9(this.persistence,new j9,e.initialUser,this.serializer)}Cu(e){return new cT(Mx.Vi,this.serializer)}Du(e){return new W9}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nm.provider={build:()=>new nm};class PT extends nm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ot(this.persistence.referenceDelegate instanceof ev,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new N9(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ja.withCacheSize(this.cacheSizeBytes):Ja.DEFAULT;return new cT((r=>ev.Vi(r,n)),this.serializer)}}class RT extends nm{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await NT(this.xu.syncEngine),await Am(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return L9(this.persistence,new j9,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new N9(r,e.asyncQueue,n)}Mu(e,n){const r=new w$(n,this.persistence);return new b$(e.asyncQueue,r)}Cu(e){const n=dT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ja.withCacheSize(this.cacheSizeBytes):Ja.DEFAULT;return new fT(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,$9(),Ay(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new W9}}class c7 extends RT{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof W_&&(this.sharedClientState.syncEngine={So:uQ.bind(null,n),Do:dQ.bind(null,n),Co:hQ.bind(null,n),hs:fQ.bind(null,n),bo:lQ.bind(null,n)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await cQ(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=$9();if(!W_.v(n))throw new We(De.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new W_(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Hc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>YR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aQ.bind(null,this.syncEngine),await fA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qX})()}createDatastore(e){const n=Ed(e.databaseInfo.databaseId),r=AX(e.databaseInfo);return OX(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,l,f){return new PX(r,i,a,l,f)})(this.localStore,this.datastore,e.asyncQueue,(n=>YR(this.syncEngine,n,0)),(function(){return UR.v()?new UR:new bX})())}createSyncEngine(e,n){return(function(i,a,l,f,m,p,b){const _=new $X(i,a,l,f,m,p);return b&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=ht(n);et(sd,"RemoteStore shutting down."),r.Ea.add(5),await Em(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Hc.provider={build:()=>new Hc};function QR(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Bx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Si("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class gQ{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new pa,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.Ua()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.qu(`length string (${n}) is not valid number`);const i=await this.Uu(r);return new t7(JSON.parse(i),e.length+r)}$u(){return this.buffer.findIndex((e=>e===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Wu(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}class pQ{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.Su();if(!r||!r.Ua())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r?.qa)}`);this.metadata=r;do r=this.Su(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Qu(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;const e=this.Ku(),n=this.Uu(e);return new t7(JSON.parse(n),e)}Uu(e){if(this.cursor+e>this.bundleData.length)throw new We(De.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}Ku(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}let yQ=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new We(De.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(i,a){const l=ht(i),f={documents:a.map((_=>Ep(l.serializer,_)))},m=await l.jo("BatchGetDocuments",l.serializer.databaseId,An.emptyPath(),f,a.length),p=new Map;m.forEach((_=>{const T=RY(l.serializer,_);p.set(T.key.toString(),T)}));const b=[];return a.forEach((_=>{const T=p.get(_.toString());Ot(!!T,55234,{key:_}),b.push(T)})),b})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new _m(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const i=dt.fromPath(r);this.mutations.push(new tT(i,this.precondition(i)))})),await(async function(r,i){const a=ht(r),l={writes:i.map((f=>Ap(a.serializer,f)))};await a.Wo("Commit",a.serializer.databaseId,An.emptyPath(),l)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw wt(50498,{Gu:e.constructor.name});n=jt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new We(De.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(jt.min())?ei.exists(!1):ei.updateTime(n):ei.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(jt.min()))throw new We(De.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ei.updateTime(n)}return ei.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};class vQ{constructor(e,n,r,i,a){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.zu=r.maxAttempts,this.M_=new pT(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new yQ(this.datastore),n=this.Ju(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Zu(i)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const n=this.updateFunction(e);return!Xp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!i9(n)}return!1}}const Kc="FirestoreClient";class xQ{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=da.UNAUTHENTICATED,this.clientId=xx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{et(Kc,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(et(Kc,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Tm(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Y_(t,e){t.asyncQueue.verifyOperationInProgress(),et(Kc,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await B9(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function ZR(t,e){t.asyncQueue.verifyOperationInProgress();const n=await DT(t);et(Kc,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>GR(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>GR(e.remoteStore,i))),t._onlineComponents=e}async function DT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){et(Kc,"Using user provided OfflineComponentProvider");try{await Y_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===De.FAILED_PRECONDITION||i.code===De.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Ls("Error using user provided cache. Falling back to memory cache: "+n),await Y_(t,new nm)}}else et(Kc,"Using default OfflineComponentProvider"),await Y_(t,new PT(void 0));return t._offlineComponents}async function Fx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(et(Kc,"Using user provided OnlineComponentProvider"),await ZR(t,t._uninitializedComponentsProvider._online)):(et(Kc,"Using default OnlineComponentProvider"),await ZR(t,new Hc))),t._onlineComponents}function f7(t){return DT(t).then((e=>e.persistence))}function Im(t){return DT(t).then((e=>e.localStore))}function d7(t){return Fx(t).then((e=>e.remoteStore))}function kT(t){return Fx(t).then((e=>e.syncEngine))}function h7(t){return Fx(t).then((e=>e.datastore))}async function rm(t){const e=await Fx(t),n=e.eventManager;return n.onListen=YX.bind(null,e.syncEngine),n.onUnlisten=QX.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=XX.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ZX.bind(null,e.syncEngine),n}function bQ(t){return t.asyncQueue.enqueue((async()=>{const e=await f7(t),n=await d7(t);return e.setNetworkEnabled(!0),(function(i){const a=ht(i);return a.Ea.delete(0),i0(a)})(n)}))}function wQ(t){return t.asyncQueue.enqueue((async()=>{const e=await f7(t),n=await d7(t);return e.setNetworkEnabled(!1),(async function(i){const a=ht(i);a.Ea.add(0),await Em(a),a.Va.set("Offline")})(n)}))}function _Q(t,e,n,r){const i=new Bx(r),a=new AT(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>wT(await rm(t),a))),()=>{i.Nu(),t.asyncQueue.enqueueAndForget((async()=>_T(await rm(t),a)))}}function EQ(t,e){const n=new pa;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,a,l){try{const f=await(function(p,b){const _=ht(p);return _.persistence.runTransaction("read document","readonly",(T=>_.localDocuments.getDocument(T,b)))})(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new We(De.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Tm(f,`Failed to get document '${a} from cache`);l.reject(m)}})(await Im(t),e,n))),n.promise}function m7(t,e,n={}){const r=new pa;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,f,m,p){const b=new Bx({next:T=>{b.Nu(),l.enqueueAndForget((()=>_T(a,_)));const N=T.docs.has(f);!N&&T.fromCache?p.reject(new We(De.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&T.fromCache&&m&&m.source==="server"?p.reject(new We(De.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),_=new AT(bm(f.path),b,{includeMetadataChanges:!0,Ka:!0});return wT(a,_)})(await rm(t),t.asyncQueue,e,n,r))),r.promise}function AQ(t,e){const n=new pa;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,a,l){try{const f=await tv(i,a,!0),m=new a7(a,f.ks),p=m.ru(f.documents),b=m.applyChanges(p,!1);l.resolve(b.snapshot)}catch(f){const m=Tm(f,`Failed to execute query '${a} against cache`);l.reject(m)}})(await Im(t),e,n))),n.promise}function g7(t,e,n={}){const r=new pa;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,f,m,p){const b=new Bx({next:T=>{b.Nu(),l.enqueueAndForget((()=>_T(a,_))),T.fromCache&&m.source==="server"?p.reject(new We(De.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),_=new AT(f,b,{includeMetadataChanges:!0,Ka:!0});return wT(a,_)})(await rm(t),t.asyncQueue,e,n,r))),r.promise}function SQ(t,e,n){const r=new pa;return t.asyncQueue.enqueueAndForget((async()=>{try{const i=await h7(t);r.resolve((async function(l,f,m){const p=ht(l),{request:b,gt:_,parent:T}=g9(p.serializer,zj(f),m);p.connection.Ko||delete b.parent;const N=(await p.jo("RunAggregationQuery",p.serializer.databaseId,T,b,1)).filter((M=>!!M.result));Ot(N.length===1,64727);const j=N[0].result?.aggregateFields;return Object.keys(j).reduce(((M,L)=>(M[_[L]]=j[L],M)),{})})(i,e,n))}catch(i){r.reject(i)}})),r.promise}function TQ(t,e){const n=new pa;return t.asyncQueue.enqueueAndForget((async()=>JX(await kT(t),e,n))),n.promise}function IQ(t,e){const n=new Bx(e);return t.asyncQueue.enqueueAndForget((async()=>(function(i,a){ht(i).Ca.add(a),a.next()})(await rm(t),n))),()=>{n.Nu(),t.asyncQueue.enqueueAndForget((async()=>(function(i,a){ht(i).Ca.delete(a)})(await rm(t),n)))}}function CQ(t,e,n){const r=new pa;return t.asyncQueue.enqueueAndForget((async()=>{const i=await h7(t);new vQ(t.asyncQueue,i,n,e,r).ju()})),r.promise}function OQ(t,e,n,r){const i=(function(l,f){let m;return m=typeof l=="string"?s9().encode(l):l,(function(b,_){return new gQ(b,_)})((function(b,_){if(b instanceof Uint8Array)return QR(b,_);if(b instanceof ArrayBuffer)return QR(new Uint8Array(b),_);if(b instanceof ReadableStream)return b.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(m),f)})(n,Ed(e));t.asyncQueue.enqueueAndForget((async()=>{mQ(await kT(t),i,r)}))}function NQ(t,e){return t.asyncQueue.enqueue((async()=>(function(r,i){const a=ht(r);return a.persistence.runTransaction("Get named query","readonly",(l=>a.Pi.getNamedQuery(l,i)))})(await Im(t),e)))}function p7(t,e){return(function(r,i){return new pQ(r,i)})(t,e)}function PQ(t,e){return t.asyncQueue.enqueue((async()=>(async function(r,i){const a=ht(r),l=a.indexManager,f=[];return a.persistence.runTransaction("Configure indexes","readwrite",(m=>l.getFieldIndexes(m).next((p=>(function(_,T,N,j,M){_=[..._],T=[...T],_.sort(N),T.sort(N);const L=_.length,z=T.length;let $=0,K=0;for(;$<z&&K<L;){const X=N(_[K],T[$]);X<0?M(_[K++]):X>0?j(T[$++]):($++,K++)}for(;$<z;)j(T[$++]);for(;K<L;)M(_[K++])})(p,i,p$,(b=>{f.push(l.addFieldIndex(m,b))}),(b=>{f.push(l.deleteFieldIndex(m,b))})))).next((()=>Ie.waitFor(f)))))})(await Im(t),e)))}function RQ(t,e){return t.asyncQueue.enqueue((async()=>(function(r,i){ht(r).Cs.As=i})(await Im(t),e)))}function DQ(t){return t.asyncQueue.enqueue((async()=>(function(n){const r=ht(n),i=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",(a=>i.deleteAllFieldIndexes(a)))})(await Im(t))))}function y7(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const kQ="ComponentProvider",JR=new Map;function MQ(t,e,n,r,i){return new X$(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,y7(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const v7="firestore.googleapis.com",e4=!0;class t4{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new We(De.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=v7,this.ssl=e4}else this.host=e.host,this.ssl=e.ssl??e4;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=S9;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<O9)throw new We(De.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y7(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new We(De.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new We(De.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new We(De.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class a0{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t4({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new We(De.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new We(De.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t4(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new tj;switch(r.type){case"firstParty":return new u$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new We(De.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=JR.get(n);r&&(et(kQ,"Removing Datastore"),JR.delete(n),r.terminate())})(this),Promise.resolve()}}function x7(t,e,n,r={}){t=Sn(t,a0);const i=wd(e),a=t._getSettings(),l={...a,emulatorOptions:t._getEmulatorOptions()},f=`${e}:${n}`;i&&(BS(`https://${f}`),j5("Firestore",!0)),a.host!==v7&&a.host!==f&&Ls("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...a,host:f,ssl:i,emulatorOptions:r};if(!Wo(m,l)&&(t._setSettings(m),r.mockUserToken)){let p,b;if(typeof r.mockUserToken=="string")p=r.mockUserToken,b=da.MOCK_USER;else{p=RK(r.mockUserToken,t._app?.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new We(De.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new da(_)}t._authCredentials=new s$(new ej(p,b))}}class $i{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $i(this.firestore,e,this._query)}}class fr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fr(this.firestore,e,this._key)}toJSON(){return{type:fr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_d(n,fr._jsonSchema))return new fr(e,r||null,new dt(An.fromString(n.referencePath)))}}fr._jsonSchemaVersion="firestore/documentReference/1.0",fr._jsonSchema={type:Fi("string",fr._jsonSchemaVersion),referencePath:Fi("string")};class Go extends $i{constructor(e,n,r){super(e,n,bm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fr(this.firestore,null,new dt(e))}withConverter(e){return new Go(this.firestore,e,this._path)}}function Wf(t,e,...n){if(t=wr(t),US("collection","path",e),t instanceof a0){const r=An.fromString(e,...n);return qP(r),new Go(t,null,r)}{if(!(t instanceof fr||t instanceof Go))throw new We(De.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(An.fromString(e,...n));return qP(r),new Go(t.firestore,null,r)}}function jQ(t,e){if(t=Sn(t,a0),US("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new We(De.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $i(t,null,(function(r){return new Du(An.emptyPath(),r)})(e))}function to(t,e,...n){if(t=wr(t),arguments.length===1&&(e=xx.newId()),US("doc","path",e),t instanceof a0){const r=An.fromString(e,...n);return UP(r),new fr(t,null,new dt(r))}{if(!(t instanceof fr||t instanceof Go))throw new We(De.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(An.fromString(e,...n));return UP(r),new fr(t.firestore,t instanceof Go?t.converter:null,new dt(r))}}function LQ(t,e){return t=wr(t),e=wr(e),(t instanceof fr||t instanceof Go)&&(e instanceof fr||e instanceof Go)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function MT(t,e){return t=wr(t),e=wr(e),t instanceof $i&&e instanceof $i&&t.firestore===e.firestore&&Jp(t._query,e._query)&&t.converter===e.converter}const n4="AsyncQueue";class r4{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new pT(this,"async_queue_retry"),this._c=()=>{const r=Ay();r&&et(n4,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Ay();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ay();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new pa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ef(e))throw e;et(n4,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Si("INTERNAL UNHANDLED ERROR: ",i4(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=bT.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&wt(47125,{Pc:i4(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function i4(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class b7{constructor(){this._progressObserver={},this._taskCompletionResolver=new pa,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const BQ=-1;class _r extends a0{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new r4,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r4(e),this._firestoreClient=void 0,await e}}}function FQ(t,e,n){n||(n=xp);const r=Yp(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if(Wo(a,e))return i;throw new We(De.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new We(De.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<O9)throw new We(De.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&wd(e.host)&&BS(e.host),r.initialize({options:e,instanceIdentifier:n})}function w7(t,e){const n=typeof t=="object"?t:G5(),r=typeof t=="string"?t:e||xp,i=Yp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=NK("firestore");a&&x7(i,...a)}return i}function ri(t){if(t._terminated)throw new We(De.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_7(t),t._firestoreClient}function _7(t){const e=t._freezeSettings(),n=MQ(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new xQ(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}function VQ(t,e){Ls("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return E7(t,Hc.provider,{build:r=>new RT(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function zQ(t){Ls("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();E7(t,Hc.provider,{build:n=>new c7(n,e.cacheSizeBytes)})}function E7(t,e,n){if((t=Sn(t,_r))._firestoreClient||t._terminated)throw new We(De.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new We(De.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},_7(t)}function UQ(t){if(t._initialized&&!t._terminated)throw new We(De.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new pa;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!El.v())return Promise.resolve();const i=r+M9;await El.delete(i)})(dT(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function qQ(t){return(function(n){const r=new pa;return n.asyncQueue.enqueueAndForget((async()=>rQ(await kT(n),r))),r.promise})(ri(t=Sn(t,_r)))}function GQ(t){return bQ(ri(t=Sn(t,_r)))}function HQ(t){return wQ(ri(t=Sn(t,_r)))}function KQ(t){return GW(t.app,"firestore",t._databaseId.database),t._delete()}function mA(t,e){const n=ri(t=Sn(t,_r)),r=new b7;return OQ(n,t._databaseId,e,r),r}function A7(t,e){return NQ(ri(t=Sn(t,_r)),e).then((n=>n?new $i(t,null,n.query):null))}class Os{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Os(oi.fromBase64String(e))}catch(n){throw new We(De.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Os(oi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Os._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_d(e,Os._jsonSchema))return Os.fromBase64String(e.bytes)}}Os._jsonSchemaVersion="firestore/bytes/1.0",Os._jsonSchema={type:Fi("string",Os._jsonSchemaVersion),bytes:Fi("string")};class Ad{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new We(De.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function WQ(){return new Ad(qE)}class af{constructor(e){this._methodName=e}}class Ho{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new We(De.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new We(De.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ho._jsonSchemaVersion}}static fromJSON(e){if(_d(e,Ho._jsonSchema))return new Ho(e.latitude,e.longitude)}}Ho._jsonSchemaVersion="firestore/geoPoint/1.0",Ho._jsonSchema={type:Fi("string",Ho._jsonSchemaVersion),latitude:Fi("number"),longitude:Fi("number")};class no{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:no._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_d(e,no._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new no(e.vectorValues);throw new We(De.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}no._jsonSchemaVersion="firestore/vectorValue/1.0",no._jsonSchema={type:Fi("string",no._jsonSchemaVersion),vectorValues:Fi("object")};const $Q=/^__.*__$/;class YQ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mu(e,this.data,this.fieldMask,n,this.fieldTransforms):new wm(e,this.data,n,this.fieldTransforms)}}class S7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Mu(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function T7(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt(40011,{dataSource:t})}}class Vx{constructor(e,n,r,i,a,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Vx({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return av(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(T7(this.dataSource)&&$Q.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class XQ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ed(e)}createContext(e,n,r,i=!1){return new Vx({dataSource:e,methodName:n,targetDoc:r,path:qr.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sd(t){const e=t._freezeSettings(),n=Ed(t._databaseId);return new XQ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zx(t,e,n,r,i,a={}){const l=t.createContext(a.merge||a.mergeFields?2:0,e,n,i);UT("Data must be an object, but it was:",l,r);const f=O7(r,l);let m,p;if(a.merge)m=new Ps(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const b=[];for(const _ of a.mergeFields){const T=_u(e,_,n);if(!l.contains(T))throw new We(De.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);P7(b,T)||b.push(T)}m=new Ps(b),p=l.fieldTransforms.filter((_=>m.covers(_.field)))}else m=null,p=l.fieldTransforms;return new YQ(new ha(f),m,p)}class s0 extends af{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof s0}}function I7(t,e,n){return new Vx({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class jT extends af{_toFieldTransform(e){return new t0(e.path,new Yh)}isEqual(e){return e instanceof jT}}class LT extends af{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=I7(this,e,!0),r=this.Ac.map((a=>Td(a,n))),i=new td(r);return new t0(e.path,i)}isEqual(e){return e instanceof LT&&Wo(this.Ac,e.Ac)}}class BT extends af{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=I7(this,e,!0),r=this.Ac.map((a=>Td(a,n))),i=new nd(r);return new t0(e.path,i)}isEqual(e){return e instanceof BT&&Wo(this.Ac,e.Ac)}}class FT extends af{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new Xh(e.serializer,Xj(e.serializer,this.Vc));return new t0(e.path,n)}isEqual(e){return e instanceof FT&&this.Vc===e.Vc}}function VT(t,e,n,r){const i=t.createContext(1,e,n);UT("Data must be an object, but it was:",i,r);const a=[],l=ha.empty();tf(r,((m,p)=>{const b=qT(e,m,n);p=wr(p);const _=i.childContextForFieldPath(b);if(p instanceof s0)a.push(b);else{const T=Td(p,_);T!=null&&(a.push(b),l.set(b,T))}}));const f=new Ps(a);return new S7(l,f,i.fieldTransforms)}function zT(t,e,n,r,i,a){const l=t.createContext(1,e,n),f=[_u(e,r,n)],m=[i];if(a.length%2!=0)throw new We(De.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)f.push(_u(e,a[T])),m.push(a[T+1]);const p=[],b=ha.empty();for(let T=f.length-1;T>=0;--T)if(!P7(p,f[T])){const N=f[T];let j=m[T];j=wr(j);const M=l.childContextForFieldPath(N);if(j instanceof s0)p.push(N);else{const L=Td(j,M);L!=null&&(p.push(N),b.set(N,L))}}const _=new Ps(p);return new S7(b,_,l.fieldTransforms)}function C7(t,e,n,r=!1){return Td(n,t.createContext(r?4:3,e))}function Td(t,e){if(N7(t=wr(t)))return UT("Unsupported field value:",e,t),O7(t,e);if(t instanceof af)return(function(r,i){if(!T7(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const a=[];let l=0;for(const f of r){let m=Td(f,i.childContextForArray(l));m==null&&(m={nullValue:"NULL_VALUE"}),a.push(m),l++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=wr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Xj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=nr.fromDate(r);return{timestampValue:Qh(i.serializer,a)}}if(r instanceof nr){const a=new nr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qh(i.serializer,a)}}if(r instanceof Ho)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Os)return{bytesValue:u9(i.serializer,r._byteString)};if(r instanceof fr){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:sT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof no)return(function(l,f){const m=l instanceof no?l.toArray():l;return{mapValue:{fields:{[YS]:{stringValue:XS},[Kh]:{arrayValue:{values:m.map((b=>{if(typeof b!="number")throw f.createError("VectorValues must only contain numeric values.");return eT(f.serializer,b)}))}}}}}})(r,i);if(b9(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${bx(r)}`)})(t,e)}function O7(t,e){const n={};return Ej(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tf(t,((r,i)=>{const a=Td(i,e.childContextForField(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function N7(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nr||t instanceof Ho||t instanceof Os||t instanceof fr||t instanceof af||t instanceof no||b9(t))}function UT(t,e,n){if(!N7(n)||!ij(n)){const r=bx(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function _u(t,e,n){if((e=wr(e))instanceof Ad)return e._internalPath;if(typeof e=="string")return qT(t,e);throw av("Field path arguments must be of type string or ",t,!1,void 0,n)}const QQ=new RegExp("[~\\*/\\[\\]]");function qT(t,e,n){if(e.search(QQ)>=0)throw av(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ad(...e.split("."))._internalPath}catch{throw av(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function av(t,e,n,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let f=`Function ${e}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new We(De.INVALID_ARGUMENT,f+t+m)}function P7(t,e){return t.some((n=>n.isEqual(e)))}class GT{convertValue(e,n="none"){switch(zc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw wt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return tf(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[Kh].arrayValue?.values?.map((r=>Zr(r.doubleValue)));return new no(n)}convertGeoPoint(e){return new Ho(Zr(e.latitude),Zr(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vp(e));default:return null}}convertTimestamp(e){const n=bu(e);return new nr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=An.fromString(e);Ot(x9(r),9688,{name:e});const i=new Vc(r.get(1),r.get(3)),a=new dt(r.popFirst(5));return i.isEqual(n)||Si(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}class sf extends GT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Os(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,n)}}function ZQ(){return new s0("deleteField")}function JQ(){return new jT("serverTimestamp")}function eZ(...t){return new LT("arrayUnion",t)}function tZ(...t){return new BT("arrayRemove",t)}function nZ(t){return new FT("increment",t)}function rZ(t){return new no(t)}function iZ(t){const e=ri(Sn(t.firestore,_r)),n=e._onlineComponents?.datastore.serializer;return n===void 0?null:Px(n,ns(t._query)).ft}function aZ(t,e){const n=_j(e,((a,l)=>new r9(l,a.aggregateType,a._internalFieldPath))),r=ri(Sn(t.firestore,_r)),i=r._onlineComponents?.datastore.serializer;return i===void 0?null:g9(i,zj(t._query),n,!0).request}const a4="@firebase/firestore",s4="4.11.0";function Oh(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class im{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class R7{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new ha({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}class Sp{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new fr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(_u("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sZ extends Sp{data(){return super.data()}}function D7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new We(De.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class HT{}class Cm extends HT{}function oZ(t,e,...n){let r=[];e instanceof HT&&r.push(e),r=r.concat(n),(function(a){const l=a.filter((m=>m instanceof Id)).length,f=a.filter((m=>m instanceof Om)).length;if(l>1||l>0&&f>0)throw new We(De.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class Om extends Cm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Om(e,n,r)}_apply(e){const n=this._parse(e);return M7(e._query,n),new $i(e.firestore,e.converter,eA(e._query,n))}_parse(e){const n=Sd(e.firestore);return(function(a,l,f,m,p,b,_){let T;if(p.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new We(De.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){l4(_,b);const j=[];for(const M of _)j.push(o4(m,a,M));T={arrayValue:{values:j}}}else T=o4(m,a,_)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||l4(_,b),T=C7(f,l,_,b==="in"||b==="not-in");return kn.create(p,b,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function lZ(t,e,n){const r=e,i=_u("where",t);return Om._create(i,r,n)}class Id extends HT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Id(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:cr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let l=i;const f=a.getFlattenedFilters();for(const m of f)M7(l,m),l=eA(l,m)})(e._query,n),new $i(e.firestore,e.converter,eA(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function uZ(...t){return t.forEach((e=>j7("or",e))),Id._create("or",t)}function cZ(...t){return t.forEach((e=>j7("and",e))),Id._create("and",t)}class Ux extends Cm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ux(e,n)}_apply(e){const n=(function(i,a,l){if(i.startAt!==null)throw new We(De.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new We(De.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _p(a,l)})(e._query,this._field,this._direction);return new $i(e.firestore,e.converter,uY(e._query,n))}}function fZ(t,e="asc"){const n=e,r=_u("orderBy",t);return Ux._create(r,n)}class o0 extends Cm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new o0(e,n,r)}_apply(e){return new $i(e.firestore,e.converter,Xy(e._query,this._limit,this._limitType))}}function dZ(t){return aj("limit",t),o0._create("limit",t,"F")}function hZ(t){return aj("limitToLast",t),o0._create("limitToLast",t,"L")}class l0 extends Cm{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new l0(e,n,r)}_apply(e){const n=k7(e,this.type,this._docOrFields,this._inclusive);return new $i(e.firestore,e.converter,cY(e._query,n))}}function mZ(...t){return l0._create("startAt",t,!0)}function gZ(...t){return l0._create("startAfter",t,!1)}class u0 extends Cm{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new u0(e,n,r)}_apply(e){const n=k7(e,this.type,this._docOrFields,this._inclusive);return new $i(e.firestore,e.converter,fY(e._query,n))}}function pZ(...t){return u0._create("endBefore",t,!1)}function yZ(...t){return u0._create("endAt",t,!0)}function k7(t,e,n,r){if(n[0]=wr(n[0]),n[0]instanceof Sp)return(function(a,l,f,m,p){if(!m)throw new We(De.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const b=[];for(const _ of Ih(a))if(_.field.isKeyField())b.push(Jf(l,m.key));else{const T=m.data.field(_.field);if(Sx(T))throw new We(De.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(T===null){const N=_.field.canonicalString();throw new We(De.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}b.push(T)}return new qc(b,p)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Sd(t.firestore);return(function(l,f,m,p,b,_){const T=l.explicitOrderBy;if(b.length>T.length)throw new We(De.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let j=0;j<b.length;j++){const M=b[j];if(T[j].field.isKeyField()){if(typeof M!="string")throw new We(De.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof M}`);if(!ZS(l)&&M.indexOf("/")!==-1)throw new We(De.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${M}' contains a slash.`);const L=l.path.child(An.fromString(M));if(!dt.isDocumentKey(L))throw new We(De.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${L}' is not because it contains an odd number of segments.`);const z=new dt(L);N.push(Jf(f,z))}else{const L=C7(m,p,M);N.push(L)}}return new qc(N,_)})(t._query,t.firestore._databaseId,i,e,n,r)}}function o4(t,e,n){if(typeof(n=wr(n))=="string"){if(n==="")throw new We(De.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZS(e)&&n.indexOf("/")!==-1)throw new We(De.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(An.fromString(n));if(!dt.isDocumentKey(r))throw new We(De.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jf(t,new dt(r))}if(n instanceof fr)return Jf(t,n._key);throw new We(De.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bx(n)}.`)}function l4(t,e){if(!Array.isArray(t)||t.length===0)throw new We(De.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function M7(t,e){const n=(function(i,a){for(const l of i)for(const f of l.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new We(De.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new We(De.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function j7(t,e){if(!(e instanceof Om||e instanceof Id))throw new We(De.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}function qx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class KT extends GT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Os(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,n)}}function vZ(t){return new im("sum",_u("sum",t))}function xZ(t){return new im("avg",_u("average",t))}function L7(){return new im("count")}function bZ(t,e){return t instanceof im&&e instanceof im&&t.aggregateType===e.aggregateType&&t._internalFieldPath?.canonicalString()===e._internalFieldPath?.canonicalString()}function wZ(t,e){return MT(t.query,e.query)&&Wo(t.data(),e.data())}function _Z(t){return B7(t,{count:L7()})}function B7(t,e){const n=Sn(t.firestore,_r),r=ri(n),i=_j(e,((a,l)=>new r9(l,a.aggregateType,a._internalFieldPath)));return SQ(r,t._query,i).then((a=>(function(f,m,p){const b=new sf(f);return new R7(m,b,p)})(n,t,a)))}class EZ{constructor(e){this.kind="memory",this._onlineComponentProvider=Hc.provider,this._offlineComponentProvider=e?.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new PT(void 0)}}toJSON(){return{kind:this.kind}}}class AZ{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=F7(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class SZ{constructor(){this.kind="memoryEager",this._offlineComponentProvider=nm.provider}toJSON(){return{kind:this.kind}}}class TZ{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new PT(e)}}toJSON(){return{kind:this.kind}}}function IZ(){return new SZ}function CZ(t){return new TZ(t?.cacheSizeBytes)}function OZ(t){return new EZ(t)}function NZ(t){return new AZ(t)}class PZ{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Hc.provider,this._offlineComponentProvider={build:n=>new RT(n,e?.cacheSizeBytes,this.forceOwnership)}}}class RZ{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Hc.provider,this._offlineComponentProvider={build:n=>new c7(n,e?.cacheSizeBytes)}}}function F7(t){return new PZ(t?.forceOwnership)}function DZ(){return new RZ}const V7="NOT SUPPORTED";class uu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ms extends Sp{constructor(e,n,r,i,a,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new op(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(_u("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new We(De.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ms._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function kZ(t,e,n){if(_d(e,Ms._jsonSchema)){if(e.bundle===V7)throw new We(De.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Ed(t._databaseId),i=p7(e.bundle,r),a=i.t(),l=new ST(i.getMetadata(),r);for(const b of a)l.o(b);const f=l.documents;if(f.length!==1)throw new We(De.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${f.length} documents.`);const m=Nx(r,f[0].document),p=new dt(An.fromString(e.bundleName));return new Ms(t,new KT(t),p,m,new uu(!1,!1),n||null)}}Ms._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ms._jsonSchema={type:Fi("string",Ms._jsonSchemaVersion),bundleSource:Fi("string","DocumentSnapshot"),bundleName:Fi("string"),bundle:Fi("string")};class op extends Ms{data(e={}){return super.data(e)}}class js{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new uu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new op(this._firestore,this._userDataWriter,r.key,r,new uu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new We(De.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((f=>{const m=new op(i._firestore,i._userDataWriter,f.doc.key,f.doc,new uu(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const m=new op(i._firestore,i._userDataWriter,f.doc.key,f.doc,new uu(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,b=-1;return f.type!==0&&(p=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),f.type!==1&&(l=l.add(f.doc),b=l.indexOf(f.doc.key)),{type:jZ(f.type),doc:m,oldIndex:p,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new We(De.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=js._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function MZ(t,e,n){if(_d(e,js._jsonSchema)){if(e.bundle===V7)throw new We(De.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Ed(t._databaseId),i=p7(e.bundle,r),a=i.t(),l=new ST(i.getMetadata(),r);for(const T of a)l.o(T);if(l.queries.length!==1)throw new We(De.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${l.queries.length} queries.`);const f=Rx(l.queries[0].bundledQuery),m=l.documents;let p=new Kf;m.map((T=>{const N=Nx(r,T.document);p=p.add(N)}));const b=od.fromInitialDocuments(f,p,ln(),!1,!1),_=new $i(t,n||null,f);return new js(t,new KT(t),_,b)}}function jZ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt(61501,{type:t})}}function LZ(t,e){return t instanceof Ms&&e instanceof Ms?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof js&&e instanceof js&&t._firestore===e._firestore&&MT(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}js._jsonSchemaVersion="firestore/querySnapshot/1.0",js._jsonSchema={type:Fi("string",js._jsonSchemaVersion),bundleSource:Fi("string","QuerySnapshot"),bundleName:Fi("string"),bundle:Fi("string")};const BZ={maxAttempts:5};class z7{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Sd(e)}set(e,n,r){this._verifyNotCommitted();const i=Oc(e,this._firestore),a=qx(i.converter,n,r),l=zx(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,ei.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=Oc(e,this._firestore);let l;return l=typeof(n=wr(n))=="string"||n instanceof Ad?zT(this._dataReader,"WriteBatch.update",a._key,n,r,i):VT(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(l.toMutation(a._key,ei.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Oc(e,this._firestore);return this._mutations=this._mutations.concat(new _m(n._key,ei.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new We(De.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Oc(t,e){if((t=wr(t)).firestore!==e)throw new We(De.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class FZ{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Sd(e)}get(e){const n=Oc(e,this._firestore),r=new KT(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return wt(24041);const a=i[0];if(a.isFoundDocument())return new Sp(this._firestore,r,a.key,a,n.converter);if(a.isNoDocument())return new Sp(this._firestore,r,n._key,null,n.converter);throw wt(18433,{doc:a})}))}set(e,n,r){const i=Oc(e,this._firestore),a=qx(i.converter,n,r),l=zx(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,l),this}update(e,n,r,...i){const a=Oc(e,this._firestore);let l;return l=typeof(n=wr(n))=="string"||n instanceof Ad?zT(this._dataReader,"Transaction.update",a._key,n,r,i):VT(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,l),this}delete(e){const n=Oc(e,this._firestore);return this._transaction.delete(n._key),this}}class U7 extends FZ{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Oc(e,this._firestore),r=new sf(this._firestore);return super.get(e).then((i=>new Ms(this._firestore,r,n._key,i._document,new uu(!1,!1),n.converter)))}}function VZ(t,e,n){t=Sn(t,_r);const r={...BZ,...n};(function(l){if(l.maxAttempts<1)throw new We(De.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const i=ri(t);return CQ(i,(a=>e(new U7(t,a))),r)}function Gx(t){t=Sn(t,fr);const e=Sn(t.firestore,_r),n=ri(e);return m7(n,t._key).then((r=>$T(e,t,r)))}function zZ(t){t=Sn(t,fr);const e=Sn(t.firestore,_r),n=ri(e),r=new sf(e);return EQ(n,t._key).then((i=>new Ms(e,r,t._key,i,new uu(i!==null&&i.hasLocalMutations,!0),t.converter)))}function UZ(t){t=Sn(t,fr);const e=Sn(t.firestore,_r),n=ri(e);return m7(n,t._key,{source:"server"}).then((r=>$T(e,t,r)))}function $f(t){t=Sn(t,$i);const e=Sn(t.firestore,_r),n=ri(e),r=new sf(e);return D7(t._query),g7(n,t._query).then((i=>new js(e,r,t,i)))}function qZ(t){t=Sn(t,$i);const e=Sn(t.firestore,_r),n=ri(e),r=new sf(e);return AQ(n,t._query).then((i=>new js(e,r,t,i)))}function GZ(t){t=Sn(t,$i);const e=Sn(t.firestore,_r),n=ri(e),r=new sf(e);return g7(n,t._query,{source:"server"}).then((i=>new js(e,r,t,i)))}function Nm(t,e,n){t=Sn(t,fr);const r=Sn(t.firestore,_r),i=qx(t.converter,e,n),a=Sd(r);return Pm(r,[zx(a,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ei.none())])}function WT(t,e,n,...r){t=Sn(t,fr);const i=Sn(t.firestore,_r),a=Sd(i);let l;return l=typeof(e=wr(e))=="string"||e instanceof Ad?zT(a,"updateDoc",t._key,e,n,r):VT(a,"updateDoc",t._key,e),Pm(i,[l.toMutation(t._key,ei.exists(!0))])}function HZ(t){return Pm(Sn(t.firestore,_r),[new _m(t._key,ei.none())])}function KZ(t,e){const n=Sn(t.firestore,_r),r=to(t),i=qx(t.converter,e),a=Sd(t.firestore);return Pm(n,[zx(a,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ei.exists(!1))]).then((()=>r))}function gA(t,...e){t=wr(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Oh(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Oh(e[r])){const p=e[r];e[r]=p.next?.bind(p),e[r+1]=p.error?.bind(p),e[r+2]=p.complete?.bind(p)}let a,l,f;if(t instanceof fr)l=Sn(t.firestore,_r),f=bm(t._key.path),a={next:p=>{e[r]&&e[r]($T(l,t,p))},error:e[r+1],complete:e[r+2]};else{const p=Sn(t,$i);l=Sn(p.firestore,_r),f=p._query;const b=new sf(l);a={next:_=>{e[r]&&e[r](new js(l,b,p,_))},error:e[r+1],complete:e[r+2]},D7(t._query)}const m=ri(l);return _Q(m,f,i,a)}function WZ(t,e,...n){const r=wr(t),i=(function(m){const p={bundle:"",bundleName:"",bundleSource:""},b=["bundle","bundleName","bundleSource"];for(const _ of b){if(!(_ in m)){p.error=`snapshotJson missing required field: ${_}`;break}const T=m[_];if(typeof T!="string"){p.error=`snapshotJson field '${_}' must be a string.`;break}if(T.length===0){p.error=`snapshotJson field '${_}' cannot be an empty string.`;break}_==="bundle"?p.bundle=T:_==="bundleName"?p.bundleName=T:_==="bundleSource"&&(p.bundleSource=T)}return p})(e);if(i.error)throw new We(De.INVALID_ARGUMENT,i.error);let a,l=0;if(typeof n[l]!="object"||Oh(n[l])||(a=n[l++]),i.bundleSource==="QuerySnapshot"){let f=null;if(typeof n[l]=="object"&&Oh(n[l])){const m=n[l++];f={next:m.next,error:m.error,complete:m.complete}}else f={next:n[l++],error:n[l++],complete:n[l++]};return(function(p,b,_,T,N){let j,M=!1;return mA(p,b.bundle).then((()=>A7(p,b.bundleName))).then((z=>{z&&!M&&(N&&z.withConverter(N),j=gA(z,_||{},T))})).catch((z=>(T.error&&T.error(z),()=>{}))),()=>{M||(M=!0,j&&j())}})(r,i,a,f,n[l])}if(i.bundleSource==="DocumentSnapshot"){let f=null;if(typeof n[l]=="object"&&Oh(n[l])){const m=n[l++];f={next:m.next,error:m.error,complete:m.complete}}else f={next:n[l++],error:n[l++],complete:n[l++]};return(function(p,b,_,T,N){let j,M=!1;return mA(p,b.bundle).then((()=>{if(!M){const z=new fr(p,N||null,dt.fromPath(b.bundleName));j=gA(z,_||{},T)}})).catch((z=>(T.error&&T.error(z),()=>{}))),()=>{M||(M=!0,j&&j())}})(r,i,a,f,n[l])}throw new We(De.INVALID_ARGUMENT,`unsupported bundle source: ${i.bundleSource}`)}function $Z(t,e){t=Sn(t,_r);const n=ri(t),r=Oh(e)?e:{next:e};return IQ(n,r)}function Pm(t,e){const n=ri(t);return TQ(n,e)}function $T(t,e,n){const r=n.docs.get(e._key),i=new sf(t);return new Ms(t,i,e._key,r,new uu(n.hasPendingWrites,n.fromCache),e.converter)}function YZ(t){return t=Sn(t,_r),ri(t),new z7(t,(e=>Pm(t,e)))}function XZ(t,e){t=Sn(t,_r);const n=ri(t);if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return Ls("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=(function(a){const l=typeof a=="string"?(function(p){try{return JSON.parse(p)}catch(b){throw new We(De.INVALID_ARGUMENT,"Failed to parse JSON: "+b?.message)}})(a):a,f=[];if(Array.isArray(l.indexes))for(const m of l.indexes){const p=u4(m,"collectionGroup"),b=[];if(Array.isArray(m.fields))for(const _ of m.fields){const T=u4(_,"fieldPath"),N=qT("setIndexConfiguration",T);_.arrayConfig==="CONTAINS"?b.push(new Gf(N,2)):_.order==="ASCENDING"?b.push(new Gf(N,0)):_.order==="DESCENDING"&&b.push(new Gf(N,1))}f.push(new Vh(Vh.UNKNOWN_ID,p,b,zh.empty()))}return f})(e);return PQ(n,r)}function u4(t,e){if(typeof t[e]!="string")throw new We(De.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}class q7{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function QZ(t){t=Sn(t,_r);const e=c4.get(t);if(e)return e;if(ri(t)._uninitializedComponentsProvider?._offline.kind!=="persistent")return null;const r=new q7(t);return c4.set(t,r),r}function ZZ(t){G7(t,!0)}function JZ(t){G7(t,!1)}function eJ(t){const e=ri(t._firestore);DQ(e).then((n=>et("deleting all persistent cache indexes succeeded"))).catch((n=>Ls("deleting all persistent cache indexes failed",n)))}function G7(t,e){const n=ri(t._firestore);RQ(n,e).then((r=>et(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((r=>Ls(`setting persistent cache index auto creation isEnabled=${e} failed`,r)))}const c4=new WeakMap;class tJ{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return YT.instance.onExistenceFilterMismatch(e)}}class YT{constructor(){this.i=new Map}static get instance(){return H1||(H1=new YT,AY(H1)),H1}u(e){this.i.forEach((n=>n(e)))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.i;return r.set(n,e),()=>r.delete(n)}}let H1=null;(function(e,n=!0){r$(vm),Lh(new Zf("firestore",((r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),f=new _r(new o$(r.getProvider("auth-internal")),new c$(l,r.getProvider("app-check-internal")),Q$(l,i),l);return a={useFetchStreams:n,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),Dc(a4,s4,e),Dc(a4,s4,"esm2020")})();const nJ=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:GT,AggregateField:im,AggregateQuerySnapshot:R7,Bytes:Os,CACHE_SIZE_UNLIMITED:BQ,CollectionReference:Go,DocumentReference:fr,DocumentSnapshot:Ms,FieldPath:Ad,FieldValue:af,Firestore:_r,FirestoreError:We,GeoPoint:Ho,LoadBundleTask:b7,PersistentCacheIndexManager:q7,Query:$i,QueryCompositeFilterConstraint:Id,QueryConstraint:Cm,QueryDocumentSnapshot:op,QueryEndAtConstraint:u0,QueryFieldFilterConstraint:Om,QueryLimitConstraint:o0,QueryOrderByConstraint:Ux,QuerySnapshot:js,QueryStartAtConstraint:l0,SnapshotMetadata:uu,Timestamp:nr,Transaction:U7,VectorValue:no,WriteBatch:z7,_AutoId:xx,_ByteString:oi,_DatabaseId:Vc,_DocumentKey:dt,_EmptyAppCheckTokenProvider:f$,_EmptyAuthCredentialsProvider:tj,_FieldPath:qr,_TestingHooks:tJ,_cast:Sn,_debugAssert:a$,_internalAggregationQueryToProtoRunAggregationQueryRequest:aZ,_internalQueryToProtoQueryTarget:iZ,_isBase64Available:$$,_logWarn:Ls,_validateIsNotUsedTogether:rj,addDoc:KZ,aggregateFieldEqual:bZ,aggregateQuerySnapshotEqual:wZ,and:cZ,arrayRemove:tZ,arrayUnion:eZ,average:xZ,clearIndexedDbPersistence:UQ,collection:Wf,collectionGroup:jQ,connectFirestoreEmulator:x7,count:L7,deleteAllPersistentCacheIndexes:eJ,deleteDoc:HZ,deleteField:ZQ,disableNetwork:HQ,disablePersistentCacheIndexAutoCreation:JZ,doc:to,documentId:WQ,documentSnapshotFromJSON:kZ,enableIndexedDbPersistence:VQ,enableMultiTabIndexedDbPersistence:zQ,enableNetwork:GQ,enablePersistentCacheIndexAutoCreation:ZZ,endAt:yZ,endBefore:pZ,ensureFirestoreConfigured:ri,executeWrite:Pm,getAggregateFromServer:B7,getCountFromServer:_Z,getDoc:Gx,getDocFromCache:zZ,getDocFromServer:UZ,getDocs:$f,getDocsFromCache:qZ,getDocsFromServer:GZ,getFirestore:w7,getPersistentCacheIndexManager:QZ,increment:nZ,initializeFirestore:FQ,limit:dZ,limitToLast:hZ,loadBundle:mA,memoryEagerGarbageCollector:IZ,memoryLocalCache:OZ,memoryLruGarbageCollector:CZ,namedQuery:A7,onSnapshot:gA,onSnapshotResume:WZ,onSnapshotsInSync:$Z,or:uZ,orderBy:fZ,persistentLocalCache:NZ,persistentMultipleTabManager:DZ,persistentSingleTabManager:F7,query:oZ,queryEqual:MT,querySnapshotFromJSON:MZ,refEqual:LQ,runTransaction:VZ,serverTimestamp:JQ,setDoc:Nm,setIndexConfiguration:XZ,setLogLevel:i$,snapshotEqual:LZ,startAfter:gZ,startAt:mZ,sum:vZ,terminate:KQ,updateDoc:WT,vector:rZ,waitForPendingWrites:qQ,where:lZ,writeBatch:YZ},Symbol.toStringTag,{value:"Module"}));var rJ="firebase",iJ="12.9.0";Dc(rJ,iJ,"app");function H7(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aJ=H7,K7=new Wp("auth","Firebase",H7());const sv=new FS("@firebase/auth");function sJ(t,...e){sv.logLevel<=Dn.WARN&&sv.warn(`Auth (${vm}): ${t}`,...e)}function Sy(t,...e){sv.logLevel<=Dn.ERROR&&sv.error(`Auth (${vm}): ${t}`,...e)}function $o(t,...e){throw XT(t,...e)}function Sl(t,...e){return XT(t,...e)}function W7(t,e,n){const r={...aJ(),[e]:n};return new Wp("auth","Firebase",r).create(e,{appName:t.name})}function gu(t){return W7(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XT(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return K7.create(t,...e)}function Ht(t,e,...n){if(!t)throw XT(e,...n)}function cu(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Sy(e),new Error(e)}function Eu(t,e){t||cu(e)}function pA(){return typeof self<"u"&&self.location?.href||""}function oJ(){return f4()==="http:"||f4()==="https:"}function f4(){return typeof self<"u"&&self.location?.protocol||null}function lJ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oJ()||LK()||"connection"in navigator)?navigator.onLine:!0}function uJ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class c0{constructor(e,n){this.shortDelay=e,this.longDelay=n,Eu(n>e,"Short delay should be less than long delay!"),this.isMobile=MK()||BK()}get(){return lJ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function QT(t,e){Eu(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class $7{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cJ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const fJ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dJ=new c0(3e4,6e4);function of(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function lf(t,e,n,r,i={}){return Y7(t,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const f=$p({key:t.config.apiKey,...l}).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:m,...a};return jK()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&wd(t.emulatorConfig.host)&&(p.credentials="include"),$7.fetch()(await X7(t,t.config.apiHost,n,f),p)})}async function Y7(t,e,n){t._canInitEmulator=!1;const r={...cJ,...e};try{const i=new mJ(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw K1(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const f=a.ok?l.errorMessage:l.error.message,[m,p]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw K1(t,"credential-already-in-use",l);if(m==="EMAIL_EXISTS")throw K1(t,"email-already-in-use",l);if(m==="USER_DISABLED")throw K1(t,"user-disabled",l);const b=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw W7(t,b,p);$o(t,b)}}catch(i){if(i instanceof Ru)throw i;$o(t,"network-request-failed",{message:String(i)})}}async function f0(t,e,n,r,i={}){const a=await lf(t,e,n,r,i);return"mfaPendingCredential"in a&&$o(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function X7(t,e,n,r){const i=`${e}${n}?${r}`,a=t,l=a.config.emulator?QT(t.config,i):`${t.config.apiScheme}://${i}`;return fJ.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function hJ(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mJ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sl(this.auth,"network-request-failed")),dJ.get())})}}function K1(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Sl(t,e,r);return i.customData._tokenResponse=n,i}function d4(t){return t!==void 0&&t.enterprise!==void 0}class gJ{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hJ(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pJ(t,e){return lf(t,"GET","/v2/recaptchaConfig",of(t,e))}async function yJ(t,e){return lf(t,"POST","/v1/accounts:delete",e)}async function ov(t,e){return lf(t,"POST","/v1/accounts:lookup",e)}function lp(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vJ(t,e=!1){const n=wr(t),r=await n.getIdToken(e),i=ZT(r);Ht(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a?.sign_in_provider;return{claims:i,token:r,authTime:lp(X_(i.auth_time)),issuedAtTime:lp(X_(i.iat)),expirationTime:lp(X_(i.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function X_(t){return Number(t)*1e3}function ZT(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Sy("JWT malformed, contained fewer than 3 sections"),null;try{const i=P5(n);return i?JSON.parse(i):(Sy("Failed to decode base64 JWT payload"),null)}catch(i){return Sy("Caught error parsing JWT payload as JSON",i?.toString()),null}}function h4(t){const e=ZT(t);return Ht(e,"internal-error"),Ht(typeof e.exp<"u","internal-error"),Ht(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Tp(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ru&&xJ(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function xJ({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class bJ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class yA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lp(this.lastLoginAt),this.creationTime=lp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function lv(t){const e=t.auth,n=await t.getIdToken(),r=await Tp(t,ov(e,{idToken:n}));Ht(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?Q7(i.providerUserInfo):[],l=_J(t.providerData,a),f=t.isAnonymous,m=!(t.email&&i.passwordHash)&&!l?.length,p=f?m:!1,b={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new yA(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,b)}async function wJ(t){const e=wr(t);await lv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _J(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Q7(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function EJ(t,e){const n=await Y7(t,{},async()=>{const r=$p({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,l=await X7(t,i,"/v1/token",`key=${a}`),f=await t._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:r};return t.emulatorConfig&&wd(t.emulatorConfig.host)&&(m.credentials="include"),$7.fetch()(l,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function AJ(t,e){return lf(t,"POST","/v2/accounts:revokeToken",of(t,e))}class Nh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ht(e.idToken,"internal-error"),Ht(typeof e.idToken<"u","internal-error"),Ht(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ht(e.length!==0,"internal-error");const n=h4(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ht(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await EJ(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,l=new Nh;return r&&(Ht(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Ht(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(Ht(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nh,this.toJSON())}_performRefresh(){return cu("not implemented")}}function pc(t,e){Ht(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qo{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new bJ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new yA(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Tp(this,this.stsTokenManager.getToken(this.auth,e));return Ht(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vJ(this,e)}reload(){return wJ(this)}_assign(e){this!==e&&(Ht(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ht(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await lv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Eo(this.auth.app))return Promise.reject(gu(this.auth));const e=await this.getIdToken();return await Tp(this,yJ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,l=n.photoURL??void 0,f=n.tenantId??void 0,m=n._redirectEventId??void 0,p=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:N,providerData:j,stsTokenManager:M}=n;Ht(_&&M,e,"internal-error");const L=Nh.fromJSON(this.name,M);Ht(typeof _=="string",e,"internal-error"),pc(r,e.name),pc(i,e.name),Ht(typeof T=="boolean",e,"internal-error"),Ht(typeof N=="boolean",e,"internal-error"),pc(a,e.name),pc(l,e.name),pc(f,e.name),pc(m,e.name),pc(p,e.name),pc(b,e.name);const z=new qo({uid:_,auth:e,email:i,emailVerified:T,displayName:r,isAnonymous:N,photoURL:l,phoneNumber:a,tenantId:f,stsTokenManager:L,createdAt:p,lastLoginAt:b});return j&&Array.isArray(j)&&(z.providerData=j.map($=>({...$}))),m&&(z._redirectEventId=m),z}static async _fromIdTokenResponse(e,n,r=!1){const i=new Nh;i.updateFromServerResponse(n);const a=new qo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await lv(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ht(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Q7(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!a?.length,f=new Nh;f.updateFromIdToken(r);const m=new qo({uid:i.localId,auth:e,stsTokenManager:f,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new yA(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(m,p),m}}const m4=new Map;function fu(t){Eu(t instanceof Function,"Expected a class definition");let e=m4.get(t);return e?(Eu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,m4.set(t,e),e)}class Z7{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Z7.type="NONE";const g4=Z7;function Ty(t,e,n){return`firebase:${t}:${e}:${n}`}class Ph{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Ty(this.userKey,i.apiKey,a),this.fullPersistenceKey=Ty("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ov(this.auth,{idToken:e}).catch(()=>{});return n?qo._fromGetAccountInfoResponse(this.auth,n,e):null}return qo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ph(fu(g4),e,r);const i=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=i[0]||fu(g4);const l=Ty(r,e.config.apiKey,e.name);let f=null;for(const p of n)try{const b=await p._get(l);if(b){let _;if(typeof b=="string"){const T=await ov(e,{idToken:b}).catch(()=>{});if(!T)break;_=await qo._fromGetAccountInfoResponse(e,T,b)}else _=qo._fromJSON(e,b);p!==a&&(f=_),a=p;break}}catch{}const m=i.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new Ph(a,e,r):(a=m[0],f&&await a._set(l,f.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Ph(a,e,r))}}function p4(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(J7(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iL(e))return"Blackberry";if(aL(e))return"Webos";if(eL(e))return"Safari";if((e.includes("chrome/")||tL(e))&&!e.includes("edge/"))return"Chrome";if(rL(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function J7(t=Wi()){return/firefox\//i.test(t)}function eL(t=Wi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tL(t=Wi()){return/crios\//i.test(t)}function nL(t=Wi()){return/iemobile/i.test(t)}function rL(t=Wi()){return/android/i.test(t)}function iL(t=Wi()){return/blackberry/i.test(t)}function aL(t=Wi()){return/webos/i.test(t)}function JT(t=Wi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function SJ(t=Wi()){return JT(t)&&!!window.navigator?.standalone}function TJ(){return FK()&&document.documentMode===10}function sL(t=Wi()){return JT(t)||rL(t)||aL(t)||iL(t)||/windows phone/i.test(t)||nL(t)}function oL(t,e=[]){let n;switch(t){case"Browser":n=p4(Wi());break;case"Worker":n=`${p4(Wi())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vm}/${r}`}class IJ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((l,f)=>{try{const m=e(a);l(m)}catch(m){f(m)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function CJ(t,e={}){return lf(t,"GET","/v2/passwordPolicy",of(t,e))}const OJ=6;class NJ{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??OJ,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class PJ{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new y4(this),this.idTokenSubscription=new y4(this),this.beforeStateQueue=new IJ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=K7,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fu(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ph.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ov(this,{idToken:e}),r=await qo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Eo(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=r?._redirectEventId,f=await this.tryRedirectSignIn(e);(!a||a===l)&&f?.user&&(r=f.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ht(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await lv(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uJ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Eo(this.app))return Promise.reject(gu(this));const n=e?wr(e):null;return n&&Ht(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ht(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Eo(this.app)?Promise.reject(gu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Eo(this.app)?Promise.reject(gu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fu(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CJ(this),n=new NJ(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await AJ(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fu(e)||this._popupRedirectResolver;Ht(n,this,"argument-error"),this.redirectPersistenceManager=await Ph.create(this,[fu(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ht(f,this,"internal-error"),f.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,r,i);return()=>{l=!0,m()}}else{const m=e.addObserver(n);return()=>{l=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ht(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Eo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&sJ(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Cd(t){return wr(t)}class y4{constructor(e){this.auth=e,this.observer=null,this.addObserver=HK(n=>this.observer=n)}get next(){return Ht(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Hx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RJ(t){Hx=t}function lL(t){return Hx.loadJS(t)}function DJ(){return Hx.recaptchaEnterpriseScript}function kJ(){return Hx.gapiScript}function MJ(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class jJ{constructor(){this.enterprise=new LJ}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class LJ{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const BJ="recaptcha-enterprise",uL="NO_RECAPTCHA";class FJ{constructor(e){this.type=BJ,this.auth=Cd(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,f)=>{pJ(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const p=new gJ(m);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(m=>{f(m)})})}function i(a,l,f){const m=window.grecaptcha;d4(m)?m.enterprise.ready(()=>{m.enterprise.execute(a,{action:e}).then(p=>{l(p)}).catch(()=>{l(uL)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jJ().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(f=>{if(!n&&d4(window.grecaptcha))i(f,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let m=DJ();m.length!==0&&(m+=f),lL(m).then(()=>{i(f,a,l)}).catch(p=>{l(p)})}}).catch(f=>{l(f)})})}}async function v4(t,e,n,r=!1,i=!1){const a=new FJ(t);let l;if(i)l=uL;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const f={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,p=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:l}):Object.assign(f,{captchaResponse:l}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function vA(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await v4(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await v4(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}function VJ(t,e){const n=Yp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Wo(a,e??{}))return i;$o(i,"already-initialized")}return n.initialize({options:e})}function zJ(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(fu);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function UJ(t,e,n){const r=Cd(t);Ht(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=cL(e),{host:l,port:f}=qJ(e),m=f===null?"":`:${f}`,p={url:`${a}//${l}${m}/`},b=Object.freeze({host:l,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ht(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ht(Wo(p,r.config.emulator)&&Wo(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,wd(l)?(BS(`${a}//${l}${m}`),j5("Auth",!0)):GJ()}function cL(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qJ(t){const e=cL(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:x4(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:x4(l)}}}function x4(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function GJ(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class eI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return cu("not implemented")}_getIdTokenResponse(e){return cu("not implemented")}_linkToIdToken(e,n){return cu("not implemented")}_getReauthenticationResolver(e){return cu("not implemented")}}async function HJ(t,e){return lf(t,"POST","/v1/accounts:signUp",e)}async function KJ(t,e){return f0(t,"POST","/v1/accounts:signInWithPassword",of(t,e))}async function WJ(t,e){return f0(t,"POST","/v1/accounts:signInWithEmailLink",of(t,e))}async function $J(t,e){return f0(t,"POST","/v1/accounts:signInWithEmailLink",of(t,e))}class Ip extends eI{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ip(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ip(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vA(e,n,"signInWithPassword",KJ);case"emailLink":return WJ(e,{email:this._email,oobCode:this._password});default:$o(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vA(e,r,"signUpPassword",HJ);case"emailLink":return $J(e,{idToken:n,email:this._email,oobCode:this._password});default:$o(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Rh(t,e){return f0(t,"POST","/v1/accounts:signInWithIdp",of(t,e))}const YJ="http://localhost";class ld extends eI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ld(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$o("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const l=new ld(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Rh(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Rh(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rh(e,n)}buildRequest(){const e={requestUri:YJ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$p(n)}return e}}function XJ(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QJ(t){const e=Ug(qg(t)).link,n=e?Ug(qg(e)).deep_link_id:null,r=Ug(qg(t)).deep_link_id;return(r?Ug(qg(r)).link:null)||r||n||e||t}class tI{constructor(e){const n=Ug(qg(e)),r=n.apiKey??null,i=n.oobCode??null,a=XJ(n.mode??null);Ht(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=QJ(e);try{return new tI(n)}catch{return null}}}class Rm{constructor(){this.providerId=Rm.PROVIDER_ID}static credential(e,n){return Ip._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=tI.parseLink(n);return Ht(r,"argument-error"),Ip._fromEmailAndCode(e,r.code,r.tenantId)}}Rm.PROVIDER_ID="password";Rm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Rm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class fL{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class d0 extends fL{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _c extends d0{constructor(){super("facebook.com")}static credential(e){return ld._fromParams({providerId:_c.PROVIDER_ID,signInMethod:_c.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _c.credentialFromTaggedObject(e)}static credentialFromError(e){return _c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _c.credential(e.oauthAccessToken)}catch{return null}}}_c.FACEBOOK_SIGN_IN_METHOD="facebook.com";_c.PROVIDER_ID="facebook.com";class Ec extends d0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ld._fromParams({providerId:Ec.PROVIDER_ID,signInMethod:Ec.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ec.credentialFromTaggedObject(e)}static credentialFromError(e){return Ec.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ec.credential(n,r)}catch{return null}}}Ec.GOOGLE_SIGN_IN_METHOD="google.com";Ec.PROVIDER_ID="google.com";class Ac extends d0{constructor(){super("github.com")}static credential(e){return ld._fromParams({providerId:Ac.PROVIDER_ID,signInMethod:Ac.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ac.credentialFromTaggedObject(e)}static credentialFromError(e){return Ac.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ac.credential(e.oauthAccessToken)}catch{return null}}}Ac.GITHUB_SIGN_IN_METHOD="github.com";Ac.PROVIDER_ID="github.com";class Sc extends d0{constructor(){super("twitter.com")}static credential(e,n){return ld._fromParams({providerId:Sc.PROVIDER_ID,signInMethod:Sc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Sc.credentialFromTaggedObject(e)}static credentialFromError(e){return Sc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Sc.credential(n,r)}catch{return null}}}Sc.TWITTER_SIGN_IN_METHOD="twitter.com";Sc.PROVIDER_ID="twitter.com";async function ZJ(t,e){return f0(t,"POST","/v1/accounts:signUp",of(t,e))}class ud{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await qo._fromIdTokenResponse(e,r,i),l=b4(r);return new ud({user:a,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=b4(r);return new ud({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function b4(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class uv extends Ru{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,uv.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new uv(e,n,r,i)}}function dL(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?uv._fromErrorAndOperation(t,a,e,r):a})}async function JJ(t,e,n=!1){const r=await Tp(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ud._forOperation(t,"link",r)}async function eee(t,e,n=!1){const{auth:r}=t;if(Eo(r.app))return Promise.reject(gu(r));const i="reauthenticate";try{const a=await Tp(t,dL(r,i,e,t),n);Ht(a.idToken,r,"internal-error");const l=ZT(a.idToken);Ht(l,r,"internal-error");const{sub:f}=l;return Ht(t.uid===f,r,"user-mismatch"),ud._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&$o(r,"user-mismatch"),a}}async function hL(t,e,n=!1){if(Eo(t.app))return Promise.reject(gu(t));const r="signIn",i=await dL(t,r,e),a=await ud._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function tee(t,e){return hL(Cd(t),e)}async function mL(t){const e=Cd(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nee(t,e,n){if(Eo(t.app))return Promise.reject(gu(t));const r=Cd(t),l=await vA(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZJ).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&mL(t),m}),f=await ud._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(f.user),f}function ree(t,e,n){return Eo(t.app)?Promise.reject(gu(t)):tee(wr(t),Rm.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&mL(t),r})}function iee(t,e,n,r){return wr(t).onIdTokenChanged(e,n,r)}function aee(t,e,n){return wr(t).beforeAuthStateChanged(e,n)}function see(t,e,n,r){return wr(t).onAuthStateChanged(e,n,r)}function oee(t){return wr(t).signOut()}const cv="__sak";class gL{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(cv,"1"),this.storage.removeItem(cv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const lee=1e3,uee=10;class pL extends gL{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sL(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,f,m)=>{this.notifyListeners(l,m)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);TJ()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,uee):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},lee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pL.type="LOCAL";const cee=pL;class yL extends gL{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yL.type="SESSION";const vL=yL;function fee(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Kx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Kx(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,l=this.handlersMap[i];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const f=Array.from(l).map(async p=>p(n.origin,a)),m=await fee(f);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kx.receivers=[];function nI(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class dee{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((f,m)=>{const p=nI("",20);i.port1.start();const b=setTimeout(()=>{m(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(_){const T=_;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(b),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(T.data.response);break;default:clearTimeout(b),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function Tl(){return window}function hee(t){Tl().location.href=t}function xL(){return typeof Tl().WorkerGlobalScope<"u"&&typeof Tl().importScripts=="function"}async function mee(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gee(){return navigator?.serviceWorker?.controller||null}function pee(){return xL()?self:null}const bL="firebaseLocalStorageDb",yee=1,fv="firebaseLocalStorage",wL="fbase_key";class h0{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wx(t,e){return t.transaction([fv],e?"readwrite":"readonly").objectStore(fv)}function vee(){const t=indexedDB.deleteDatabase(bL);return new h0(t).toPromise()}function xA(){const t=indexedDB.open(bL,yee);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(fv,{keyPath:wL})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(fv)?e(r):(r.close(),await vee(),e(await xA()))})})}async function w4(t,e,n){const r=Wx(t,!0).put({[wL]:e,value:n});return new h0(r).toPromise()}async function xee(t,e){const n=Wx(t,!1).get(e),r=await new h0(n).toPromise();return r===void 0?null:r.value}function _4(t,e){const n=Wx(t,!0).delete(e);return new h0(n).toPromise()}const bee=800,wee=3;class _L{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xA(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>wee)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xL()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kx._getInstance(pee()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await mee(),!this.activeServiceWorker)return;this.sender=new dee(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gee()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xA();return await w4(e,cv,"1"),await _4(e,cv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>w4(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>xee(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_4(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Wx(i,!1).getAll();return new h0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_L.type="LOCAL";const _ee=_L;new c0(3e4,6e4);function Eee(t,e){return e?fu(e):(Ht(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class rI extends eI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rh(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Aee(t){return hL(t.auth,new rI(t),t.bypassAuthState)}function See(t){const{auth:e,user:n}=t;return Ht(n,e,"internal-error"),eee(n,new rI(t),t.bypassAuthState)}async function Tee(t){const{auth:e,user:n}=t;return Ht(n,e,"internal-error"),JJ(n,new rI(t),t.bypassAuthState)}class EL{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:l,type:f}=e;if(l){this.reject(l);return}const m={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Aee;case"linkViaPopup":case"linkViaRedirect":return Tee;case"reauthViaPopup":case"reauthViaRedirect":return See;default:$o(this.auth,"internal-error")}}resolve(e){Eu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Eu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Iee=new c0(2e3,1e4);class Eh extends EL{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Eh.currentPopupAction&&Eh.currentPopupAction.cancel(),Eh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ht(e,this.auth,"internal-error"),e}async onExecution(){Eu(this.filter.length===1,"Popup operations only handle one event");const e=nI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Sl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Eh.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Iee.get())};e()}}Eh.currentPopupAction=null;const Cee="pendingRedirect",Iy=new Map;class Oee extends EL{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Iy.get(this.auth._key());if(!e){try{const r=await Nee(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Iy.set(this.auth._key(),e)}return this.bypassAuthState||Iy.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Nee(t,e){const n=Dee(e),r=Ree(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Pee(t,e){Iy.set(t._key(),e)}function Ree(t){return fu(t._redirectPersistence)}function Dee(t){return Ty(Cee,t.config.apiKey,t.name)}async function kee(t,e,n=!1){if(Eo(t.app))return Promise.reject(gu(t));const r=Cd(t),i=Eee(r,e),l=await new Oee(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}const Mee=600*1e3;class jee{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Lee(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!AL(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Sl(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Mee&&this.cachedEventUids.clear(),this.cachedEventUids.has(E4(e))}saveEventToCache(e){this.cachedEventUids.add(E4(e)),this.lastProcessedEventTime=Date.now()}}function E4(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function AL({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Lee(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AL(t);default:return!1}}async function Bee(t,e={}){return lf(t,"GET","/v1/projects",e)}const Fee=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vee=/^https?/;async function zee(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Bee(t);for(const n of e)try{if(Uee(n))return}catch{}$o(t,"unauthorized-domain")}function Uee(t){const e=pA(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!Vee.test(n))return!1;if(Fee.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const qee=new c0(3e4,6e4);function A4(){const t=Tl().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Gee(t){return new Promise((e,n)=>{function r(){A4(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{A4(),n(Sl(t,"network-request-failed"))},timeout:qee.get()})}if(Tl().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Tl().gapi?.load)r();else{const i=MJ("iframefcb");return Tl()[i]=()=>{gapi.load?r():n(Sl(t,"network-request-failed"))},lL(`${kJ()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Cy=null,e})}let Cy=null;function Hee(t){return Cy=Cy||Gee(t),Cy}const Kee=new c0(5e3,15e3),Wee="__/auth/iframe",$ee="emulator/auth/iframe",Yee={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xee=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qee(t){const e=t.config;Ht(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?QT(e,$ee):`https://${t.config.authDomain}/${Wee}`,r={apiKey:e.apiKey,appName:t.name,v:vm},i=Xee.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${$p(r).slice(1)}`}async function Zee(t){const e=await Hee(t),n=Tl().gapi;return Ht(n,t,"internal-error"),e.open({where:document.body,url:Qee(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yee,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=Sl(t,"network-request-failed"),f=Tl().setTimeout(()=>{a(l)},Kee.get());function m(){Tl().clearTimeout(f),i(r)}r.ping(m).then(m,()=>{a(l)})}))}const Jee={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ete=500,tte=600,nte="_blank",rte="http://localhost";class S4{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ite(t,e,n,r=ete,i=tte){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const m={...Jee,width:r.toString(),height:i.toString(),top:a,left:l},p=Wi().toLowerCase();n&&(f=tL(p)?nte:n),J7(p)&&(e=e||rte,m.scrollbars="yes");const b=Object.entries(m).reduce((T,[N,j])=>`${T}${N}=${j},`,"");if(SJ(p)&&f!=="_self")return ate(e||"",f),new S4(null);const _=window.open(e||"",f,b);Ht(_,t,"popup-blocked");try{_.focus()}catch{}return new S4(_)}function ate(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const ste="__/auth/handler",ote="emulator/auth/handler",lte=encodeURIComponent("fac");async function T4(t,e,n,r,i,a){Ht(t.config.authDomain,t,"auth-domain-config-required"),Ht(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:vm,eventId:i};if(e instanceof fL){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",GK(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,_]of Object.entries({}))l[b]=_}if(e instanceof d0){const b=e.getScopes().filter(_=>_!=="");b.length>0&&(l.scopes=b.join(","))}t.tenantId&&(l.tid=t.tenantId);const f=l;for(const b of Object.keys(f))f[b]===void 0&&delete f[b];const m=await t._getAppCheckToken(),p=m?`#${lte}=${encodeURIComponent(m)}`:"";return`${ute(t)}?${$p(f).slice(1)}${p}`}function ute({config:t}){return t.emulator?QT(t,ote):`https://${t.authDomain}/${ste}`}const Q_="webStorageSupport";class cte{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vL,this._completeRedirectFn=kee,this._overrideRedirectResult=Pee}async _openPopup(e,n,r,i){Eu(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await T4(e,n,r,pA(),i);return ite(e,a,nI())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await T4(e,n,r,pA(),i);return hee(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Eu(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Zee(e),r=new jee(e);return n.register("authEvent",i=>(Ht(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Q_,{type:Q_},i=>{const a=i?.[0]?.[Q_];a!==void 0&&n(!!a),$o(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zee(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sL()||eL()||JT()}}const fte=cte;var I4="@firebase/auth",C4="1.12.0";class dte{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ht(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hte(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mte(t){Lh(new Zf("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:f}=r.options;Ht(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:l,authDomain:f,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oL(t)},p=new PJ(r,i,a,m);return zJ(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Lh(new Zf("auth-internal",e=>{const n=Cd(e.getProvider("auth").getImmediate());return(r=>new dte(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dc(I4,C4,hte(t)),Dc(I4,C4,"esm2020")}const gte=300,pte=M5("authIdTokenMaxAge")||gte;let O4=null;const yte=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>pte)return;const i=n?.token;O4!==i&&(O4=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function vte(t=G5()){const e=Yp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=VJ(t,{popupRedirectResolver:fte,persistence:[_ee,cee,vL]}),r=M5("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=yte(a.toString());aee(n,l,()=>l(n.currentUser)),iee(n,f=>l(f))}}const i=D5("auth");return i&&UJ(n,`http://${i}`),n}function xte(){return document.getElementsByTagName("head")?.[0]??document}RJ({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Sl("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",xte().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mte("Browser");const bte={apiKey:"AIzaSyCZZ2ywKsEe2ha3LyA-W_LWmFp1v8uqGv0",authDomain:"bodybalance-39bd5.firebaseapp.com",projectId:"bodybalance-39bd5",storageBucket:"bodybalance-39bd5.firebasestorage.app",messagingSenderId:"494273576542",appId:"1:494273576542:web:341c8966ffad7a9a213ecf"},iI=q5(bte),bl=vte(iI),ma=w7(iI),wte=Object.freeze(Object.defineProperty({__proto__:null,app:iI,auth:bl,firestore:ma},Symbol.toStringTag,{value:"Module"})),N4=t=>{let e;const n=new Set,r=(p,b)=>{const _=typeof p=="function"?p(e):p;if(!Object.is(_,e)){const T=e;e=b??(typeof _!="object"||_===null)?_:Object.assign({},e,_),n.forEach(N=>N(e,T))}},i=()=>e,f={setState:r,getState:i,getInitialState:()=>m,subscribe:p=>(n.add(p),()=>n.delete(p))},m=e=t(r,i,f);return f},_te=(t=>t?N4(t):N4),Ete=t=>t;function Ate(t,e=Ete){const n=zg.useSyncExternalStore(t.subscribe,zg.useCallback(()=>e(t.getState()),[t,e]),zg.useCallback(()=>e(t.getInitialState()),[t,e]));return zg.useDebugValue(n),n}const P4=t=>{const e=_te(t),n=r=>Ate(e,r);return Object.assign(n,e),n},aI=(t=>t?P4(t):P4);var Oy={exports:{}},Ste=Oy.exports,R4;function Tte(){return R4||(R4=1,(function(t,e){((n,r)=>{t.exports=r()})(Ste,function(){var n=function(d,v){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(A,I){A.__proto__=I}:function(A,I){for(var P in I)Object.prototype.hasOwnProperty.call(I,P)&&(A[P]=I[P])}))(d,v)},r=function(){return(r=Object.assign||function(d){for(var v,A=1,I=arguments.length;A<I;A++)for(var P in v=arguments[A])Object.prototype.hasOwnProperty.call(v,P)&&(d[P]=v[P]);return d}).apply(this,arguments)};function i(d,v,A){for(var I,P=0,k=v.length;P<k;P++)!I&&P in v||((I=I||Array.prototype.slice.call(v,0,P))[P]=v[P]);return d.concat(I||Array.prototype.slice.call(v))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Vg,l=Object.keys,f=Array.isArray;function m(d,v){return typeof v=="object"&&l(v).forEach(function(A){d[A]=v[A]}),d}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var p=Object.getPrototypeOf,b={}.hasOwnProperty;function _(d,v){return b.call(d,v)}function T(d,v){typeof v=="function"&&(v=v(p(d))),(typeof Reflect>"u"?l:Reflect.ownKeys)(v).forEach(function(A){j(d,A,v[A])})}var N=Object.defineProperty;function j(d,v,A,I){N(d,v,m(A&&_(A,"get")&&typeof A.get=="function"?{get:A.get,set:A.set,configurable:!0}:{value:A,configurable:!0,writable:!0},I))}function M(d){return{from:function(v){return d.prototype=Object.create(v.prototype),j(d.prototype,"constructor",d),{extend:T.bind(null,d.prototype)}}}}var L=Object.getOwnPropertyDescriptor,z=[].slice;function $(d,v,A){return z.call(d,v,A)}function K(d,v){return v(d)}function X(d){if(!d)throw new Error("Assertion Failed")}function se(d){a.setImmediate?setImmediate(d):setTimeout(d,0)}function J(d,v){if(typeof v=="string"&&_(d,v))return d[v];if(!v)return d;if(typeof v!="string"){for(var A=[],I=0,P=v.length;I<P;++I){var k=J(d,v[I]);A.push(k)}return A}var F,q=v.indexOf(".");return q===-1||(F=d[v.substr(0,q)])==null?void 0:J(F,v.substr(q+1))}function V(d,v,A){if(d&&v!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof v!="string"&&"length"in v){X(typeof A!="string"&&"length"in A);for(var I=0,P=v.length;I<P;++I)V(d,v[I],A[I])}else{var k,F,q=v.indexOf(".");q!==-1?(k=v.substr(0,q),(q=v.substr(q+1))===""?A===void 0?f(d)&&!isNaN(parseInt(k))?d.splice(k,1):delete d[k]:d[k]=A:V(F=(F=d[k])&&_(d,k)?F:d[k]={},q,A)):A===void 0?f(d)&&!isNaN(parseInt(v))?d.splice(v,1):delete d[v]:d[v]=A}}function W(d){var v,A={};for(v in d)_(d,v)&&(A[v]=d[v]);return A}var H=[].concat;function oe(d){return H.apply([],d)}var Se="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(oe([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(v){return v+d+"Array"})}))).filter(function(d){return a[d]}),ae=new Set(Se.map(function(d){return a[d]})),Z=null;function ee(d){return Z=new WeakMap,d=(function v(A){if(!A||typeof A!="object")return A;var I=Z.get(A);if(I)return I;if(f(A)){I=[],Z.set(A,I);for(var P=0,k=A.length;P<k;++P)I.push(v(A[P]))}else if(ae.has(A.constructor))I=A;else{var F,q=p(A);for(F in I=q===Object.prototype?{}:Object.create(q),Z.set(A,I),A)_(A,F)&&(I[F]=v(A[F]))}return I})(d),Z=null,d}var xe={}.toString;function de(d){return xe.call(d).slice(8,-1)}var ye=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_e=typeof ye=="symbol"?function(d){var v;return d!=null&&(v=d[ye])&&v.apply(d)}:function(){return null};function qe(d,v){v=d.indexOf(v),0<=v&&d.splice(v,1)}var Ve={};function tt(d){var v,A,I,P;if(arguments.length===1){if(f(d))return d.slice();if(this===Ve&&typeof d=="string")return[d];if(P=_e(d))for(A=[];!(I=P.next()).done;)A.push(I.value);else{if(d==null)return[d];if(typeof(v=d.length)!="number")return[d];for(A=new Array(v);v--;)A[v]=d[v]}}else for(v=arguments.length,A=new Array(v);v--;)A[v]=arguments[v];return A}var me=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Se=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],$n=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Se),Ye={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ze(d,v){this.name=d,this.message=v}function yt(d,v){return d+". Errors: "+Object.keys(v).map(function(A){return v[A].toString()}).filter(function(A,I,P){return P.indexOf(A)===I}).join(`
`)}function $e(d,v,A,I){this.failures=v,this.failedKeys=I,this.successCount=A,this.message=yt(d,v)}function pt(d,v){this.name="BulkError",this.failures=Object.keys(v).map(function(A){return v[A]}),this.failuresByPos=v,this.message=yt(d,this.failures)}M(ze).from(Error).extend({toString:function(){return this.name+": "+this.message}}),M($e).from(ze),M(pt).from(ze);var lt=$n.reduce(function(d,v){return d[v]=v+"Error",d},{}),Ne=ze,Xe=$n.reduce(function(d,v){var A=v+"Error";function I(P,k){this.name=A,P?typeof P=="string"?(this.message="".concat(P).concat(k?`
 `+k:""),this.inner=k||null):typeof P=="object"&&(this.message="".concat(P.name," ").concat(P.message),this.inner=P):(this.message=Ye[v]||A,this.inner=null)}return M(I).from(Ne),d[v]=I,d},{}),Et=(Xe.Syntax=SyntaxError,Xe.Type=TypeError,Xe.Range=RangeError,Se.reduce(function(d,v){return d[v+"Error"]=Xe[v],d},{}));Se=$n.reduce(function(d,v){return["Syntax","Type","Range"].indexOf(v)===-1&&(d[v+"Error"]=Xe[v]),d},{});function Fe(){}function Rt(d){return d}function Kt(d,v){return d==null||d===Rt?v:function(A){return v(d(A))}}function nt(d,v){return function(){d.apply(this,arguments),v.apply(this,arguments)}}function Zt(d,v){return d===Fe?v:function(){var A=d.apply(this,arguments),I=(A!==void 0&&(arguments[0]=A),this.onsuccess),P=this.onerror,k=(this.onsuccess=null,this.onerror=null,v.apply(this,arguments));return I&&(this.onsuccess=this.onsuccess?nt(I,this.onsuccess):I),P&&(this.onerror=this.onerror?nt(P,this.onerror):P),k!==void 0?k:A}}function Jt(d,v){return d===Fe?v:function(){d.apply(this,arguments);var A=this.onsuccess,I=this.onerror;this.onsuccess=this.onerror=null,v.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?nt(A,this.onsuccess):A),I&&(this.onerror=this.onerror?nt(I,this.onerror):I)}}function Wt(d,v){return d===Fe?v:function(P){var I=d.apply(this,arguments),P=(m(P,I),this.onsuccess),k=this.onerror,F=(this.onsuccess=null,this.onerror=null,v.apply(this,arguments));return P&&(this.onsuccess=this.onsuccess?nt(P,this.onsuccess):P),k&&(this.onerror=this.onerror?nt(k,this.onerror):k),I===void 0?F===void 0?void 0:F:m(I,F)}}function xt(d,v){return d===Fe?v:function(){return v.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function Mn(d,v){return d===Fe?v:function(){var A=d.apply(this,arguments);if(A&&typeof A.then=="function"){for(var I=this,P=arguments.length,k=new Array(P);P--;)k[P]=arguments[P];return A.then(function(){return v.apply(I,k)})}return v.apply(this,arguments)}}Se.ModifyError=$e,Se.DexieError=ze,Se.BulkError=pt;var mt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Po(d){mt=d}var Fs={},hr=100,xa=typeof Promise>"u"?[]:($n=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[xa=crypto.subtle.digest("SHA-512",new Uint8Array([0])),p(xa),$n]:[$n,p($n),$n]),$n=xa[0],on=xa[1],on=on&&on.then,Ba=$n&&$n.constructor,bi=!!xa[2],Lr=function(d,v){Fn.push([d,v]),hs&&(queueMicrotask(ii),hs=!1)},Ro=!0,hs=!0,ms=[],Tn=[],rt=Rt,fn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Fe,pgp:!1,env:{},finalize:Fe},Ze=fn,Fn=[],Ci=0,Vs=[];function ct(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var v=this._PSD=Ze;if(typeof d!="function"){if(d!==Fs)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ba(this,this._value)}else this._state=null,this._value=null,++v.ref,(function A(I,P){try{P(function(k){if(I._state===null){if(k===I)throw new TypeError("A promise cannot be resolved with itself.");var F=I._lib&&Hr();k&&typeof k.then=="function"?A(I,function(q,Q){k instanceof ct?k._then(q,Q):k.then(q,Q)}):(I._state=!0,I._value=k,Fa(I)),F&&Ui()}},ba.bind(null,I))}catch(k){ba(I,k)}})(this,d)}var nn={get:function(){var d=Ze,v=ft;function A(I,P){var k=this,F=!d.global&&(d!==Ze||v!==ft),q=F&&!Nr(),Q=new ct(function(re,ne){Er(k,new Yn(Pi(I,d,F,q),Pi(P,d,F,q),re,ne,d))});return this._consoleTask&&(Q._consoleTask=this._consoleTask),Q}return A.prototype=Fs,A},set:function(d){j(this,"then",d&&d.prototype===Fs?nn:{get:function(){return d},set:nn.set})}};function Yn(d,v,A,I,P){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof v=="function"?v:null,this.resolve=A,this.reject=I,this.psd=P}function ba(d,v){var A,I;Tn.push(v),d._state===null&&(A=d._lib&&Hr(),v=rt(v),d._state=!1,d._value=v,I=d,ms.some(function(P){return P._value===I._value})||ms.push(I),Fa(d),A)&&Ui()}function Fa(d){var v=d._listeners;d._listeners=[];for(var A=0,I=v.length;A<I;++A)Er(d,v[A]);var P=d._PSD;--P.ref||P.finalize(),Ci===0&&(++Ci,Lr(function(){--Ci==0&&ta()},[]))}function Er(d,v){if(d._state===null)d._listeners.push(v);else{var A=d._state?v.onFulfilled:v.onRejected;if(A===null)return(d._state?v.resolve:v.reject)(d._value);++v.psd.ref,++Ci,Lr(Ll,[A,d,v])}}function Ll(d,v,A){try{var I,P=v._value;!v._state&&Tn.length&&(Tn=[]),I=mt&&v._consoleTask?v._consoleTask.run(function(){return d(P)}):d(P),v._state||Tn.indexOf(P)!==-1||(k=>{for(var F=ms.length;F;)if(ms[--F]._value===k._value)return ms.splice(F,1)})(v),A.resolve(I)}catch(k){A.reject(k)}finally{--Ci==0&&ta(),--A.psd.ref||A.psd.finalize()}}function ii(){Ni(fn,function(){Hr()&&Ui()})}function Hr(){var d=Ro;return hs=Ro=!1,d}function Ui(){var d,v,A;do for(;0<Fn.length;)for(d=Fn,Fn=[],A=d.length,v=0;v<A;++v){var I=d[v];I[0].apply(null,I[1])}while(0<Fn.length);hs=Ro=!0}function ta(){for(var d=ms,v=(ms=[],d.forEach(function(I){I._PSD.onunhandled.call(null,I._value,I)}),Vs.slice(0)),A=v.length;A;)v[--A]()}function gs(d){return new ct(Fs,!1,d)}function _n(d,v){var A=Ze;return function(){var I=Hr(),P=Ze;try{return Wr(A,!0),d.apply(this,arguments)}catch(k){v&&v(k)}finally{Wr(P,!1),I&&Ui()}}}T(ct.prototype,{then:nn,_then:function(d,v){Er(this,new Yn(null,null,d,v,Ze))},catch:function(d){var v,A;return arguments.length===1?this.then(null,d):(v=d,A=arguments[1],typeof v=="function"?this.then(null,function(I){return(I instanceof v?A:gs)(I)}):this.then(null,function(I){return(I&&I.name===v?A:gs)(I)}))},finally:function(d){return this.then(function(v){return ct.resolve(d()).then(function(){return v})},function(v){return ct.resolve(d()).then(function(){return gs(v)})})},timeout:function(d,v){var A=this;return d<1/0?new ct(function(I,P){var k=setTimeout(function(){return P(new Xe.Timeout(v))},d);A.then(I,P).finally(clearTimeout.bind(null,k))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&j(ct.prototype,Symbol.toStringTag,"Dexie.Promise"),fn.env=Bl(),T(ct,{all:function(){var d=tt.apply(null,arguments).map(Va);return new ct(function(v,A){d.length===0&&v([]);var I=d.length;d.forEach(function(P,k){return ct.resolve(P).then(function(F){d[k]=F,--I||v(d)},A)})})},resolve:function(d){return d instanceof ct?d:d&&typeof d.then=="function"?new ct(function(v,A){d.then(v,A)}):new ct(Fs,!0,d)},reject:gs,race:function(){var d=tt.apply(null,arguments).map(Va);return new ct(function(v,A){d.map(function(I){return ct.resolve(I).then(v,A)})})},PSD:{get:function(){return Ze},set:function(d){return Ze=d}},totalEchoes:{get:function(){return ft}},newPSD:Vn,usePSD:Ni,scheduler:{get:function(){return Lr},set:function(d){Lr=d}},rejectionMapper:{get:function(){return rt},set:function(d){rt=d}},follow:function(d,v){return new ct(function(A,I){return Vn(function(P,k){var F=Ze;F.unhandleds=[],F.onunhandled=k,F.finalize=nt(function(){var q,Q=this;q=function(){Q.unhandleds.length===0?P():k(Q.unhandleds[0])},Vs.push(function re(){q(),Vs.splice(Vs.indexOf(re),1)}),++Ci,Lr(function(){--Ci==0&&ta()},[])},F.finalize),d()},v,A,I)})}}),Ba&&(Ba.allSettled&&j(ct,"allSettled",function(){var d=tt.apply(null,arguments).map(Va);return new ct(function(v){d.length===0&&v([]);var A=d.length,I=new Array(A);d.forEach(function(P,k){return ct.resolve(P).then(function(F){return I[k]={status:"fulfilled",value:F}},function(F){return I[k]={status:"rejected",reason:F}}).then(function(){return--A||v(I)})})})}),Ba.any&&typeof AggregateError<"u"&&j(ct,"any",function(){var d=tt.apply(null,arguments).map(Va);return new ct(function(v,A){d.length===0&&A(new AggregateError([]));var I=d.length,P=new Array(I);d.forEach(function(k,F){return ct.resolve(k).then(function(q){return v(q)},function(q){P[F]=q,--I||A(new AggregateError(P))})})})}),Ba.withResolvers)&&(ct.withResolvers=Ba.withResolvers);var mr={awaits:0,echoes:0,id:0},Kr=0,ci=[],fi=0,ft=0,Oi=0;function Vn(d,F,A,I){var P=Ze,k=Object.create(P),F=(k.parent=P,k.ref=0,k.global=!1,k.id=++Oi,fn.env,k.env=bi?{Promise:ct,PromiseProp:{value:ct,configurable:!0,writable:!0},all:ct.all,race:ct.race,allSettled:ct.allSettled,any:ct.any,resolve:ct.resolve,reject:ct.reject}:{},F&&m(k,F),++P.ref,k.finalize=function(){--this.parent.ref||this.parent.finalize()},Ni(k,d,A,I));return k.ref===0&&k.finalize(),F}function gn(){return mr.id||(mr.id=++Kr),++mr.awaits,mr.echoes+=hr,mr.id}function Nr(){return!!mr.awaits&&(--mr.awaits==0&&(mr.id=0),mr.echoes=mr.awaits*hr,!0)}function Va(d){return mr.echoes&&d&&d.constructor===Ba?(gn(),d.then(function(v){return Nr(),v},function(v){return Nr(),Mt(v)})):d}function Qo(){var d=ci[ci.length-1];ci.pop(),Wr(d,!1)}function Wr(d,v){var A,I,P=Ze;(v?!mr.echoes||fi++&&d===Ze:!fi||--fi&&d===Ze)||queueMicrotask(v?(function(k){++ft,mr.echoes&&--mr.echoes!=0||(mr.echoes=mr.awaits=mr.id=0),ci.push(Ze),Wr(k,!0)}).bind(null,d):Qo),d!==Ze&&(Ze=d,P===fn&&(fn.env=Bl()),bi)&&(A=fn.env.Promise,I=d.env,P.global||d.global)&&(Object.defineProperty(a,"Promise",I.PromiseProp),A.all=I.all,A.race=I.race,A.resolve=I.resolve,A.reject=I.reject,I.allSettled&&(A.allSettled=I.allSettled),I.any)&&(A.any=I.any)}function Bl(){var d=a.Promise;return bi?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function Ni(d,v,A,I,P){var k=Ze;try{return Wr(d,!0),v(A,I,P)}finally{Wr(k,!1)}}function Pi(d,v,A,I){return typeof d!="function"?d:function(){var P=Ze;A&&gn(),Wr(v,!0);try{return d.apply(this,arguments)}finally{Wr(P,!1),I&&queueMicrotask(Nr)}}}function Qn(d){Promise===Ba&&mr.echoes===0?fi===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+on).indexOf("[native code]")===-1&&(gn=Nr=Fe);var Mt=ct.reject,$r="",rr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ar="String expected.",Ge=[],lo="__dbnames",In="readonly",wi="readwrite";function as(d,v){return d?v?function(){return d.apply(this,arguments)&&v.apply(this,arguments)}:d:v}var yn={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function un(d){return typeof d!="string"||/\./.test(d)?function(v){return v}:function(v){return v[d]===void 0&&d in v&&delete(v=ee(v))[d],v}}function rn(){throw Xe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Qt(d,v){try{var A=Ri(d),I=Ri(v);if(A!==I)return A==="Array"?1:I==="Array"?-1:A==="binary"?1:I==="binary"?-1:A==="string"?1:I==="string"?-1:A==="Date"?1:I!=="Date"?NaN:-1;switch(A){case"number":case"Date":case"string":return v<d?1:d<v?-1:0;case"binary":for(var P=Sr(d),k=Sr(v),F=P.length,q=k.length,Q=F<q?F:q,re=0;re<Q;++re)if(P[re]!==k[re])return P[re]<k[re]?-1:1;return F===q?0:F<q?-1:1;case"Array":for(var ne=d,le=v,fe=ne.length,ue=le.length,ge=fe<ue?fe:ue,he=0;he<ge;++he){var we=Qt(ne[he],le[he]);if(we!==0)return we}return fe===ue?0:fe<ue?-1:1}}catch{}return NaN}function Ri(d){var v=typeof d;return v=="object"&&(ArrayBuffer.isView(d)||(v=de(d))==="ArrayBuffer")?"binary":v}function Sr(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function an(d,v,A){var I=d.schema.yProps;return I?(v&&0<A.numFailures&&(v=v.filter(function(P,k){return!A.failures[k]})),Promise.all(I.map(function(P){return P=P.updatesTable,v?d.db.table(P).where("k").anyOf(v).delete():d.db.table(P).clear()})).then(function(){return A})):A}Zo.prototype.execute=function(d){var v=this["@@propmod"];if(v.add!==void 0){var A=v.add;if(f(A))return i(i([],f(d)?d:[],!0),A).sort();if(typeof A=="number")return(Number(d)||0)+A;if(typeof A=="bigint")try{return BigInt(d)+A}catch{return BigInt(0)+A}throw new TypeError("Invalid term ".concat(A))}if(v.remove!==void 0){var I=v.remove;if(f(I))return f(d)?d.filter(function(P){return!I.includes(P)}).sort():[];if(typeof I=="number")return Number(d)-I;if(typeof I=="bigint")try{return BigInt(d)-I}catch{return BigInt(0)-I}throw new TypeError("Invalid subtrahend ".concat(I))}return A=(A=v.replacePrefix)==null?void 0:A[0],A&&typeof d=="string"&&d.startsWith(A)?v.replacePrefix[1]+d.substring(A.length):d};var ai=Zo;function Zo(d){this["@@propmod"]=d}function Vt(d,v){for(var A=l(v),I=A.length,P=!1,k=0;k<I;++k){var F=A[k],q=v[F],Q=J(d,F);q instanceof ai?(V(d,F,q.execute(Q)),P=!0):Q!==q&&(V(d,F,q),P=!0)}return P}vn.prototype._trans=function(d,v,A){var I=this._tx||Ze.trans,P=this.name,k=mt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function F(re,ne,le){if(le.schema[P])return v(le.idbtrans,le);throw new Xe.NotFound("Table "+P+" not part of transaction")}var q=Hr();try{var Q=I&&I.db._novip===this.db._novip?I===Ze.trans?I._promise(d,F,A):Vn(function(){return I._promise(d,F,A)},{trans:I,transless:Ze.transless||Ze}):(function re(ne,le,fe,ue){if(ne.idbdb&&(ne._state.openComplete||Ze.letThrough||ne._vip)){var ge=ne._createTransaction(le,fe,ne._dbSchema);try{ge.create(),ne._state.PR1398_maxLoop=3}catch(he){return he.name===lt.InvalidState&&ne.isOpen()&&0<--ne._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ne.close({disableAutoOpen:!1}),ne.open().then(function(){return re(ne,le,fe,ue)})):Mt(he)}return ge._promise(le,function(he,we){return Vn(function(){return Ze.trans=ge,ue(he,we,ge)})}).then(function(he){if(le==="readwrite")try{ge.idbtrans.commit()}catch{}return le==="readonly"?he:ge._completion.then(function(){return he})})}if(ne._state.openComplete)return Mt(new Xe.DatabaseClosed(ne._state.dbOpenError));if(!ne._state.isBeingOpened){if(!ne._state.autoOpen)return Mt(new Xe.DatabaseClosed);ne.open().catch(Fe)}return ne._state.dbReadyPromise.then(function(){return re(ne,le,fe,ue)})})(this.db,d,[this.name],F);return k&&(Q._consoleTask=k,Q=Q.catch(function(re){return console.trace(re),Mt(re)})),Q}finally{q&&Ui()}},vn.prototype.get=function(d,v){var A=this;return d&&d.constructor===Object?this.where(d).first(v):d==null?Mt(new Xe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(I){return A.core.get({trans:I,key:d}).then(function(P){return A.hook.reading.fire(P)})}).then(v)},vn.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(f(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var v=l(d);if(v.length===1)return this.where(v[0]).equals(d[v[0]]);var A=this.schema.indexes.concat(this.schema.primKey).filter(function(q){if(q.compound&&v.every(function(re){return 0<=q.keyPath.indexOf(re)})){for(var Q=0;Q<v.length;++Q)if(v.indexOf(q.keyPath[Q])===-1)return!1;return!0}return!1}).sort(function(q,Q){return q.keyPath.length-Q.keyPath.length})[0];if(A&&this.db._maxKey!==$r)return F=A.keyPath.slice(0,v.length),this.where(F).equals(F.map(function(q){return d[q]}));!A&&mt&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(v.join("+"),"]"));var I=this.schema.idxByName;function P(q,Q){return Qt(q,Q)===0}var F=v.reduce(function(ne,Q){var re=ne[0],ne=ne[1],le=I[Q],fe=d[Q];return[re||le,re||!le?as(ne,le&&le.multi?function(ue){return ue=J(ue,Q),f(ue)&&ue.some(function(ge){return P(fe,ge)})}:function(ue){return P(fe,J(ue,Q))}):ne]},[null,null]),k=F[0],F=F[1];return k?this.where(k.name).equals(d[k.keyPath]).filter(F):A?this.filter(F):this.where(v).equals("")},vn.prototype.filter=function(d){return this.toCollection().and(d)},vn.prototype.count=function(d){return this.toCollection().count(d)},vn.prototype.offset=function(d){return this.toCollection().offset(d)},vn.prototype.limit=function(d){return this.toCollection().limit(d)},vn.prototype.each=function(d){return this.toCollection().each(d)},vn.prototype.toArray=function(d){return this.toCollection().toArray(d)},vn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},vn.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,f(d)?"[".concat(d.join("+"),"]"):d))},vn.prototype.reverse=function(){return this.toCollection().reverse()},vn.prototype.mapToClass=function(d){for(var v=this.db,A=this.name,I=((this.schema.mappedClass=d).prototype instanceof rn&&(d=(F=>{var q=ne,Q=F;if(typeof Q!="function"&&Q!==null)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");function re(){this.constructor=q}function ne(){return F!==null&&F.apply(this,arguments)||this}return n(q,Q),q.prototype=Q===null?Object.create(Q):(re.prototype=Q.prototype,new re),Object.defineProperty(ne.prototype,"db",{get:function(){return v},enumerable:!1,configurable:!0}),ne.prototype.table=function(){return A},ne})(d)),new Set),P=d.prototype;P;P=p(P))Object.getOwnPropertyNames(P).forEach(function(F){return I.add(F)});function k(F){if(!F)return F;var q,Q=Object.create(d.prototype);for(q in F)if(!I.has(q))try{Q[q]=F[q]}catch{}return Q}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=k,this.hook("reading",k),d},vn.prototype.defineClass=function(){return this.mapToClass(function(d){m(this,d)})},vn.prototype.add=function(d,v){var A=this,I=this.schema.primKey,P=I.auto,k=I.keyPath,F=d;return k&&P&&(F=un(k)(d)),this._trans("readwrite",function(q){return A.core.mutate({trans:q,type:"add",keys:v!=null?[v]:null,values:[F]})}).then(function(q){return q.numFailures?ct.reject(q.failures[0]):q.lastResult}).then(function(q){if(k)try{V(d,k,q)}catch{}return q})},vn.prototype.upsert=function(d,v){var A=this,I=this.schema.primKey.keyPath;return this._trans("readwrite",function(P){return A.core.get({trans:P,key:d}).then(function(k){var F=k??{};return Vt(F,v),I&&V(F,I,d),A.core.mutate({trans:P,type:"put",values:[F],keys:[d],upsert:!0,updates:{keys:[d],changeSpecs:[v]}}).then(function(q){return q.numFailures?ct.reject(q.failures[0]):!!k})})})},vn.prototype.update=function(d,v){return typeof d!="object"||f(d)?this.where(":id").equals(d).modify(v):(d=J(d,this.schema.primKey.keyPath))===void 0?Mt(new Xe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(v)},vn.prototype.put=function(d,v){var A=this,I=this.schema.primKey,P=I.auto,k=I.keyPath,F=d;return k&&P&&(F=un(k)(d)),this._trans("readwrite",function(q){return A.core.mutate({trans:q,type:"put",values:[F],keys:v!=null?[v]:null})}).then(function(q){return q.numFailures?ct.reject(q.failures[0]):q.lastResult}).then(function(q){if(k)try{V(d,k,q)}catch{}return q})},vn.prototype.delete=function(d){var v=this;return this._trans("readwrite",function(A){return v.core.mutate({trans:A,type:"delete",keys:[d]}).then(function(I){return an(v,[d],I)}).then(function(I){return I.numFailures?ct.reject(I.failures[0]):void 0})})},vn.prototype.clear=function(){var d=this;return this._trans("readwrite",function(v){return d.core.mutate({trans:v,type:"deleteRange",range:yn}).then(function(A){return an(d,null,A)})}).then(function(v){return v.numFailures?ct.reject(v.failures[0]):void 0})},vn.prototype.bulkGet=function(d){var v=this;return this._trans("readonly",function(A){return v.core.getMany({keys:d,trans:A}).then(function(I){return I.map(function(P){return v.hook.reading.fire(P)})})})},vn.prototype.bulkAdd=function(d,v,A){var I=this,P=Array.isArray(v)?v:void 0,k=(A=A||(P?void 0:v))?A.allKeys:void 0;return this._trans("readwrite",function(F){var q=I.schema.primKey,re=q.auto,q=q.keyPath;if(q&&P)throw new Xe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(P&&P.length!==d.length)throw new Xe.InvalidArgument("Arguments objects and keys must have the same length");var Q=d.length,re=q&&re?d.map(un(q)):d;return I.core.mutate({trans:F,type:"add",keys:P,values:re,wantResults:k}).then(function(ne){var le=ne.numFailures,fe=ne.failures;if(le===0)return k?ne.results:ne.lastResult;throw new pt("".concat(I.name,".bulkAdd(): ").concat(le," of ").concat(Q," operations failed"),fe)})})},vn.prototype.bulkPut=function(d,v,A){var I=this,P=Array.isArray(v)?v:void 0,k=(A=A||(P?void 0:v))?A.allKeys:void 0;return this._trans("readwrite",function(F){var q=I.schema.primKey,re=q.auto,q=q.keyPath;if(q&&P)throw new Xe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(P&&P.length!==d.length)throw new Xe.InvalidArgument("Arguments objects and keys must have the same length");var Q=d.length,re=q&&re?d.map(un(q)):d;return I.core.mutate({trans:F,type:"put",keys:P,values:re,wantResults:k}).then(function(ne){var le=ne.numFailures,fe=ne.failures;if(le===0)return k?ne.results:ne.lastResult;throw new pt("".concat(I.name,".bulkPut(): ").concat(le," of ").concat(Q," operations failed"),fe)})})},vn.prototype.bulkUpdate=function(d){var v=this,A=this.core,I=d.map(function(F){return F.key}),P=d.map(function(F){return F.changes}),k=[];return this._trans("readwrite",function(F){return A.getMany({trans:F,keys:I,cache:"clone"}).then(function(q){var Q=[],re=[],ne=(d.forEach(function(le,fe){var ue=le.key,ge=le.changes,he=q[fe];if(he){for(var we=0,Ce=Object.keys(ge);we<Ce.length;we++){var be=Ce[we],Me=ge[be];if(be===v.schema.primKey.keyPath){if(Qt(Me,ue)!==0)throw new Xe.Constraint("Cannot update primary key in bulkUpdate()")}else V(he,be,Me)}k.push(fe),Q.push(ue),re.push(he)}}),Q.length);return A.mutate({trans:F,type:"put",keys:Q,values:re,updates:{keys:I,changeSpecs:P}}).then(function(le){var fe=le.numFailures,ue=le.failures;if(fe===0)return ne;for(var ge=0,he=Object.keys(ue);ge<he.length;ge++){var we,Ce=he[ge],be=k[Number(Ce)];be!=null&&(we=ue[Ce],delete ue[Ce],ue[be]=we)}throw new pt("".concat(v.name,".bulkUpdate(): ").concat(fe," of ").concat(ne," operations failed"),ue)})})})},vn.prototype.bulkDelete=function(d){var v=this,A=d.length;return this._trans("readwrite",function(I){return v.core.mutate({trans:I,type:"delete",keys:d}).then(function(P){return an(v,d,P)})}).then(function(I){var P=I.numFailures,k=I.failures;if(P===0)return I.lastResult;throw new pt("".concat(v.name,".bulkDelete(): ").concat(P," of ").concat(A," operations failed"),k)})};var qi=vn;function vn(){}function Di(d){function v(F,q){if(q){for(var Q=arguments.length,re=new Array(Q-1);--Q;)re[Q-1]=arguments[Q];return A[F].subscribe.apply(null,re),d}if(typeof F=="string")return A[F]}var A={};v.addEventType=k;for(var I=1,P=arguments.length;I<P;++I)k(arguments[I]);return v;function k(F,q,Q){var re,ne;if(typeof F!="object")return q=q||xt,ne={subscribers:[],fire:Q=Q||Fe,subscribe:function(le){ne.subscribers.indexOf(le)===-1&&(ne.subscribers.push(le),ne.fire=q(ne.fire,le))},unsubscribe:function(le){ne.subscribers=ne.subscribers.filter(function(fe){return fe!==le}),ne.fire=ne.subscribers.reduce(q,Q)}},A[F]=v[F]=ne;l(re=F).forEach(function(le){var fe=re[le];if(f(fe))k(le,re[le][0],re[le][1]);else{if(fe!=="asap")throw new Xe.InvalidArgument("Invalid event config");var ue=k(le,Rt,function(){for(var ge=arguments.length,he=new Array(ge);ge--;)he[ge]=arguments[ge];ue.subscribers.forEach(function(we){se(function(){we.apply(null,he)})})})}})}}function $t(d,v){return M(v).from({prototype:d}),v}function Zn(d,v){return!(d.filter||d.algorithm||d.or)&&(v?d.justLimit:!d.replayFilter)}function Te(d,v){d.filter=as(d.filter,v)}function ce(d,v,A){var I=d.replayFilter;d.replayFilter=I?function(){return as(I(),v())}:v,d.justLimit=A&&!I}function _t(d,v){if(d.isPrimKey)return v.primaryKey;var A=v.getIndexByKeyPath(d.index);if(A)return A;throw new Xe.Schema("KeyPath "+d.index+" on object store "+v.name+" is not indexed")}function Pr(d,v,A){var I=_t(d,v.schema);return v.openCursor({trans:A,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:I,range:d.range}})}function Rr(d,v,A,I){var P,k,F=d.replayFilter?as(d.filter,d.replayFilter()):d.filter;return d.or?(P={},k=function(q,Q,re){var ne,le;F&&!F(Q,re,function(fe){return Q.stop(fe)},function(fe){return Q.fail(fe)})||((le=""+(ne=Q.primaryKey))=="[object ArrayBuffer]"&&(le=""+new Uint8Array(ne)),_(P,le))||(P[le]=!0,v(q,Q,re))},Promise.all([d.or._iterate(k,A),Gi(Pr(d,I,A),d.algorithm,k,!d.keysOnly&&d.valueMapper)])):Gi(Pr(d,I,A),as(d.algorithm,F),v,!d.keysOnly&&d.valueMapper)}function Gi(d,v,A,I){var P=_n(I?function(k,F,q){return A(I(k),F,q)}:A);return d.then(function(k){if(k)return k.start(function(){var F=function(){return k.continue()};v&&!v(k,function(q){return F=q},function(q){k.stop(q),F=Fe},function(q){k.fail(q),F=Fe})||P(k.value,k,function(q){return F=q}),F()})})}zt.prototype._read=function(d,v){var A=this._ctx;return A.error?A.table._trans(null,Mt.bind(null,A.error)):A.table._trans("readonly",d).then(v)},zt.prototype._write=function(d){var v=this._ctx;return v.error?v.table._trans(null,Mt.bind(null,v.error)):v.table._trans("readwrite",d,"locked")},zt.prototype._addAlgorithm=function(d){var v=this._ctx;v.algorithm=as(v.algorithm,d)},zt.prototype._iterate=function(d,v){return Rr(this._ctx,d,v,this._ctx.table.core)},zt.prototype.clone=function(d){var v=Object.create(this.constructor.prototype),A=Object.create(this._ctx);return d&&m(A,d),v._ctx=A,v},zt.prototype.raw=function(){return this._ctx.valueMapper=null,this},zt.prototype.each=function(d){var v=this._ctx;return this._read(function(A){return Rr(v,d,A,v.table.core)})},zt.prototype.count=function(d){var v=this;return this._read(function(A){var I,P=v._ctx,k=P.table.core;return Zn(P,!0)?k.count({trans:A,query:{index:_t(P,k.schema),range:P.range}}).then(function(F){return Math.min(F,P.limit)}):(I=0,Rr(P,function(){return++I,!1},A,k).then(function(){return I}))}).then(d)},zt.prototype.sortBy=function(d,v){var A=d.split(".").reverse(),I=A[0],P=A.length-1;function k(Q,re){return re?k(Q[A[re]],re-1):Q[I]}var F=this._ctx.dir==="next"?1:-1;function q(Q,re){return Qt(k(Q,P),k(re,P))*F}return this.toArray(function(Q){return Q.sort(q)}).then(v)},zt.prototype.toArray=function(d){var v=this;return this._read(function(A){var I,P,k,F=v._ctx;return F.dir==="next"&&Zn(F,!0)&&0<F.limit?(I=F.valueMapper,P=_t(F,F.table.core.schema),F.table.core.query({trans:A,limit:F.limit,values:!0,query:{index:P,range:F.range}}).then(function(q){return q=q.result,I?q.map(I):q})):(k=[],Rr(F,function(q){return k.push(q)},A,F.table.core).then(function(){return k}))},d)},zt.prototype.offset=function(d){var v=this._ctx;return d<=0||(v.offset+=d,Zn(v)?ce(v,function(){var A=d;return function(I,P){return A===0||(A===1?--A:P(function(){I.advance(A),A=0}),!1)}}):ce(v,function(){var A=d;return function(){return--A<0}})),this},zt.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),ce(this._ctx,function(){var v=d;return function(A,I,P){return--v<=0&&I(P),0<=v}},!0),this},zt.prototype.until=function(d,v){return Te(this._ctx,function(A,I,P){return!d(A.value)||(I(P),v)}),this},zt.prototype.first=function(d){return this.limit(1).toArray(function(v){return v[0]}).then(d)},zt.prototype.last=function(d){return this.reverse().first(d)},zt.prototype.filter=function(d){var v;return Te(this._ctx,function(A){return d(A.value)}),(v=this._ctx).isMatch=as(v.isMatch,d),this},zt.prototype.and=function(d){return this.filter(d)},zt.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},zt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},zt.prototype.desc=function(){return this.reverse()},zt.prototype.eachKey=function(d){var v=this._ctx;return v.keysOnly=!v.isMatch,this.each(function(A,I){d(I.key,I)})},zt.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},zt.prototype.eachPrimaryKey=function(d){var v=this._ctx;return v.keysOnly=!v.isMatch,this.each(function(A,I){d(I.primaryKey,I)})},zt.prototype.keys=function(d){var v=this._ctx,A=(v.keysOnly=!v.isMatch,[]);return this.each(function(I,P){A.push(P.key)}).then(function(){return A}).then(d)},zt.prototype.primaryKeys=function(d){var v=this._ctx;if(v.dir==="next"&&Zn(v,!0)&&0<v.limit)return this._read(function(I){var P=_t(v,v.table.core.schema);return v.table.core.query({trans:I,values:!1,limit:v.limit,query:{index:P,range:v.range}})}).then(function(I){return I.result}).then(d);v.keysOnly=!v.isMatch;var A=[];return this.each(function(I,P){A.push(P.primaryKey)}).then(function(){return A}).then(d)},zt.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},zt.prototype.firstKey=function(d){return this.limit(1).keys(function(v){return v[0]}).then(d)},zt.prototype.lastKey=function(d){return this.reverse().firstKey(d)},zt.prototype.distinct=function(){var d,v=this._ctx,v=v.index&&v.table.schema.idxByName[v.index];return v&&v.multi&&(d={},Te(this._ctx,function(I){var I=I.primaryKey.toString(),P=_(d,I);return d[I]=!0,!P})),this},zt.prototype.modify=function(d){var v=this,A=this._ctx;return this._write(function(I){function P(he,we){var Ce=we.failures;fe+=he-we.numFailures;for(var be=0,Me=l(Ce);be<Me.length;be++){var He=Me[be];le.push(Ce[He])}}var k=typeof d=="function"?d:function(he){return Vt(he,d)},F=A.table.core,ne=F.schema.primaryKey,q=ne.outbound,Q=ne.extractKey,re=200,ne=v.db._options.modifyChunkSize,le=(ne&&(re=typeof ne=="object"?ne[F.name]||ne["*"]||200:ne),[]),fe=0,ue=[],ge=d===Nt;return v.clone().primaryKeys().then(function(he){function we(be){var Me=Math.min(re,he.length-be),He=he.slice(be,be+Me);return(ge?Promise.resolve([]):F.getMany({trans:I,keys:He,cache:"immutable"})).then(function(st){var ut=[],Je=[],vt=q?[]:null,gt=ge?He:[];if(!ge)for(var it=0;it<Me;++it){var bt=st[it],Xt={value:ee(bt),primKey:he[be+it]};k.call(Xt,Xt.value,Xt)!==!1&&(Xt.value==null?gt.push(he[be+it]):q||Qt(Q(bt),Q(Xt.value))===0?(Je.push(Xt.value),q&&vt.push(he[be+it])):(gt.push(he[be+it]),ut.push(Xt.value)))}return Promise.resolve(0<ut.length&&F.mutate({trans:I,type:"add",values:ut}).then(function(wn){for(var Bt in wn.failures)gt.splice(parseInt(Bt),1);P(ut.length,wn)})).then(function(){return(0<Je.length||Ce&&typeof d=="object")&&F.mutate({trans:I,type:"put",keys:vt,values:Je,criteria:Ce,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<be}).then(function(wn){return P(Je.length,wn)})}).then(function(){return(0<gt.length||Ce&&ge)&&F.mutate({trans:I,type:"delete",keys:gt,criteria:Ce,isAdditionalChunk:0<be}).then(function(wn){return an(A.table,gt,wn)}).then(function(wn){return P(gt.length,wn)})}).then(function(){return he.length>be+Me&&we(be+re)})})}var Ce=Zn(A)&&A.limit===1/0&&(typeof d!="function"||ge)&&{index:A.index,range:A.range};return we(0).then(function(){if(0<le.length)throw new $e("Error modifying one or more objects",le,fe,ue);return he.length})})})},zt.prototype.delete=function(){var d=this._ctx,v=d.range;return!Zn(d)||d.table.schema.yProps||!d.isPrimKey&&v.type!==3?this.modify(Nt):this._write(function(A){var I=d.table.core.schema.primaryKey,P=v;return d.table.core.count({trans:A,query:{index:I,range:P}}).then(function(k){return d.table.core.mutate({trans:A,type:"deleteRange",range:P}).then(function(Q){var q=Q.failures,Q=Q.numFailures;if(Q)throw new $e("Could not delete some values",Object.keys(q).map(function(re){return q[re]}),k-Q);return k-Q})})})};var Jo=zt;function zt(){}var Nt=function(d,v){return v.value=null};function zn(d,v){return d<v?-1:d===v?0:1}function Fl(d,v){return v<d?-1:d===v?0:1}function Yr(d,v,A){return d=d instanceof Jn?new d.Collection(d):d,d._ctx.error=new(A||TypeError)(v),d}function wa(d){return new d.Collection(d,function(){return _a("")}).limit(0)}function _i(ue,v,A,I){var P,k,F,q,Q,re,ne,le=A.length;if(!A.every(function(he){return typeof he=="string"}))return Yr(ue,Ar);function fe(he){P=he==="next"?function(Ce){return Ce.toUpperCase()}:function(Ce){return Ce.toLowerCase()},k=he==="next"?function(Ce){return Ce.toLowerCase()}:function(Ce){return Ce.toUpperCase()},F=he==="next"?zn:Fl;var we=A.map(function(Ce){return{lower:k(Ce),upper:P(Ce)}}).sort(function(Ce,be){return F(Ce.lower,be.lower)});q=we.map(function(Ce){return Ce.upper}),Q=we.map(function(Ce){return Ce.lower}),ne=(re=he)==="next"?"":I}fe("next");var ue=new ue.Collection(ue,function(){return na(q[0],Q[le-1]+I)}),ge=(ue._ondirectionchange=function(he){fe(he)},0);return ue._addAlgorithm(function(he,we,Ce){var be=he.key;if(typeof be=="string"){var Me=k(be);if(v(Me,Q,ge))return!0;for(var He=null,st=ge;st<le;++st){var ut=((Je,vt,gt,it,bt,Xt)=>{for(var wn=Math.min(Je.length,it.length),Bt=-1,en=0;en<wn;++en){var gr=vt[en];if(gr!==it[en])return bt(Je[en],gt[en])<0?Je.substr(0,en)+gt[en]+gt.substr(en+1):bt(Je[en],it[en])<0?Je.substr(0,en)+it[en]+gt.substr(en+1):0<=Bt?Je.substr(0,Bt)+vt[Bt]+gt.substr(Bt+1):null;bt(Je[en],gr)<0&&(Bt=en)}return wn<it.length&&Xt==="next"?Je+gt.substr(Je.length):wn<Je.length&&Xt==="prev"?Je.substr(0,gt.length):Bt<0?null:Je.substr(0,Bt)+it[Bt]+gt.substr(Bt+1)})(be,Me,q[st],Q[st],F,re);ut===null&&He===null?ge=st+1:(He===null||0<F(He,ut))&&(He=ut)}we(He!==null?function(){he.continue(He+ne)}:Ce)}return!1}),ue}function na(d,v,A,I){return{type:2,lower:d,upper:v,lowerOpen:A,upperOpen:I}}function _a(d){return{type:1,lower:d,upper:d}}Object.defineProperty(jn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),jn.prototype.between=function(d,v,A,I){A=A!==!1,I=I===!0;try{return 0<this._cmp(d,v)||this._cmp(d,v)===0&&(A||I)&&(!A||!I)?wa(this):new this.Collection(this,function(){return na(d,v,!A,!I)})}catch{return Yr(this,rr)}},jn.prototype.equals=function(d){return d==null?Yr(this,rr):new this.Collection(this,function(){return _a(d)})},jn.prototype.above=function(d){return d==null?Yr(this,rr):new this.Collection(this,function(){return na(d,void 0,!0)})},jn.prototype.aboveOrEqual=function(d){return d==null?Yr(this,rr):new this.Collection(this,function(){return na(d,void 0,!1)})},jn.prototype.below=function(d){return d==null?Yr(this,rr):new this.Collection(this,function(){return na(void 0,d,!1,!0)})},jn.prototype.belowOrEqual=function(d){return d==null?Yr(this,rr):new this.Collection(this,function(){return na(void 0,d)})},jn.prototype.startsWith=function(d){return typeof d!="string"?Yr(this,Ar):this.between(d,d+$r,!0,!0)},jn.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):_i(this,function(v,A){return v.indexOf(A[0])===0},[d],$r)},jn.prototype.equalsIgnoreCase=function(d){return _i(this,function(v,A){return v===A[0]},[d],"")},jn.prototype.anyOfIgnoreCase=function(){var d=tt.apply(Ve,arguments);return d.length===0?wa(this):_i(this,function(v,A){return A.indexOf(v)!==-1},d,"")},jn.prototype.startsWithAnyOfIgnoreCase=function(){var d=tt.apply(Ve,arguments);return d.length===0?wa(this):_i(this,function(v,A){return A.some(function(I){return v.indexOf(I)===0})},d,$r)},jn.prototype.anyOf=function(){var d,v,A=this,I=tt.apply(Ve,arguments),P=this._cmp;try{I.sort(P)}catch{return Yr(this,rr)}return I.length===0?wa(this):((d=new this.Collection(this,function(){return na(I[0],I[I.length-1])}))._ondirectionchange=function(k){P=k==="next"?A._ascending:A._descending,I.sort(P)},v=0,d._addAlgorithm(function(k,F,q){for(var Q=k.key;0<P(Q,I[v]);)if(++v===I.length)return F(q),!1;return P(Q,I[v])===0||(F(function(){k.continue(I[v])}),!1)}),d)},jn.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},jn.prototype.noneOf=function(){var d=tt.apply(Ve,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return Yr(this,rr)}var v=d.reduce(function(A,I){return A?A.concat([[A[A.length-1][1],I]]):[[-1/0,I]]},null);return v.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(v,{includeLowers:!1,includeUppers:!1})},jn.prototype.inAnyRange=function(d,Ce){var A=this,I=this._cmp,P=this._ascending,k=this._descending,F=this._min,q=this._max;if(d.length===0)return wa(this);if(!d.every(function(be){return be[0]!==void 0&&be[1]!==void 0&&P(be[0],be[1])<=0}))return Yr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Xe.InvalidArgument);var Q=!Ce||Ce.includeLowers!==!1,re=Ce&&Ce.includeUppers===!0,ne,le=P;function fe(be,Me){return le(be[0],Me[0])}try{(ne=d.reduce(function(be,Me){for(var He=0,st=be.length;He<st;++He){var ut=be[He];if(I(Me[0],ut[1])<0&&0<I(Me[1],ut[0])){ut[0]=F(ut[0],Me[0]),ut[1]=q(ut[1],Me[1]);break}}return He===st&&be.push(Me),be},[])).sort(fe)}catch{return Yr(this,rr)}var ue=0,ge=re?function(be){return 0<P(be,ne[ue][1])}:function(be){return 0<=P(be,ne[ue][1])},he=Q?function(be){return 0<k(be,ne[ue][0])}:function(be){return 0<=k(be,ne[ue][0])},we=ge,Ce=new this.Collection(this,function(){return na(ne[0][0],ne[ne.length-1][1],!Q,!re)});return Ce._ondirectionchange=function(be){le=be==="next"?(we=ge,P):(we=he,k),ne.sort(fe)},Ce._addAlgorithm(function(be,Me,He){for(var st,ut=be.key;we(ut);)if(++ue===ne.length)return Me(He),!1;return!ge(st=ut)&&!he(st)||(A._cmp(ut,ne[ue][1])===0||A._cmp(ut,ne[ue][0])===0||Me(function(){le===P?be.continue(ne[ue][0]):be.continue(ne[ue][1])}),!1)}),Ce},jn.prototype.startsWithAnyOf=function(){var d=tt.apply(Ve,arguments);return d.every(function(v){return typeof v=="string"})?d.length===0?wa(this):this.inAnyRange(d.map(function(v){return[v,v+$r]})):Yr(this,"startsWithAnyOf() only works with strings")};var Jn=jn;function jn(){}function Tr(d){return _n(function(v){return Pt(v),d(v.target.error),!1})}function Pt(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var za="storagemutated",Lt="x-storagemutated-1",xn=Di(null,za),Do=(sn.prototype._lock=function(){return X(!Ze.global),++this._reculock,this._reculock!==1||Ze.global||(Ze.lockOwnerFor=this),this},sn.prototype._unlock=function(){if(X(!Ze.global),--this._reculock==0)for(Ze.global||(Ze.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{Ni(d[1],d[0])}catch{}}return this},sn.prototype._locked=function(){return this._reculock&&Ze.lockOwnerFor!==this},sn.prototype.create=function(d){var v=this;if(this.mode){var A=this.db.idbdb,I=this.db._state.dbOpenError;if(X(!this.idbtrans),!d&&!A)switch(I&&I.name){case"DatabaseClosedError":throw new Xe.DatabaseClosed(I);case"MissingAPIError":throw new Xe.MissingAPI(I.message,I);default:throw new Xe.OpenFailed(I)}if(!this.active)throw new Xe.TransactionInactive;X(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||A).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=_n(function(P){Pt(P),v._reject(d.error)}),d.onabort=_n(function(P){Pt(P),v.active&&v._reject(new Xe.Abort(d.error)),v.active=!1,v.on("abort").fire(P)}),d.oncomplete=_n(function(){v.active=!1,v._resolve(),"mutatedParts"in d&&xn.storagemutated.fire(d.mutatedParts)})}return this},sn.prototype._promise=function(d,v,A){var I,P=this;return d==="readwrite"&&this.mode!=="readwrite"?Mt(new Xe.ReadOnly("Transaction is readonly")):this.active?this._locked()?new ct(function(k,F){P._blockedFuncs.push([function(){P._promise(d,v,A).then(k,F)},Ze])}):A?Vn(function(){var k=new ct(function(F,q){P._lock();var Q=v(F,q,P);Q&&Q.then&&Q.then(F,q)});return k.finally(function(){return P._unlock()}),k._lib=!0,k}):((I=new ct(function(k,F){var q=v(k,F,P);q&&q.then&&q.then(k,F)}))._lib=!0,I):Mt(new Xe.TransactionInactive)},sn.prototype._root=function(){return this.parent?this.parent._root():this},sn.prototype.waitFor=function(d){var v,A=this._root(),I=ct.resolve(d),P=(A._waitingFor?A._waitingFor=A._waitingFor.then(function(){return I}):(A._waitingFor=I,A._waitingQueue=[],v=A.idbtrans.objectStore(A.storeNames[0]),(function k(){for(++A._spinCount;A._waitingQueue.length;)A._waitingQueue.shift()();A._waitingFor&&(v.get(-1/0).onsuccess=k)})()),A._waitingFor);return new ct(function(k,F){I.then(function(q){return A._waitingQueue.push(_n(k.bind(null,q)))},function(q){return A._waitingQueue.push(_n(F.bind(null,q)))}).finally(function(){A._waitingFor===P&&(A._waitingFor=null)})})},sn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Xe.Abort))},sn.prototype.table=function(d){var v=this._memoizedTables||(this._memoizedTables={});if(_(v,d))return v[d];var A=this.schema[d];if(A)return(A=new this.db.Table(d,A,this)).core=this.db.core.table(d),v[d]=A;throw new Xe.NotFound("Table "+d+" not part of transaction")},sn);function sn(){}function Ea(d,v,A,I,P,k,F,q){return{name:d,keyPath:v,unique:A,multi:I,auto:P,compound:k,src:(A&&!F?"&":"")+(I?"*":"")+(P?"++":"")+Ua(v),type:q}}function Ua(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function zs(d,v,A){return{name:d,primKey:v,indexes:A,mappedClass:null,idxByName:(I=function(P){return[P.name,P]},A.reduce(function(P,k,F){return k=I(k,F),k&&(P[k[0]]=k[1]),P},{}))};var I}var Aa=function(d){try{return d.only([[]]),Aa=function(){return[[]]},[[]]}catch{return Aa=function(){return $r},$r}};function Sa(d){return d==null?function(){}:typeof d=="string"?(v=d).split(".").length===1?function(A){return A[v]}:function(A){return J(A,v)}:function(A){return J(A,d)};var v}function ra(d){return[].slice.call(d)}var qa=0;function ir(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function Ta(d,v,Q){function I(ge){if(ge.type===3)return null;if(ge.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var le=ge.lower,fe=ge.upper,ue=ge.lowerOpen,ge=ge.upperOpen;return le===void 0?fe===void 0?null:v.upperBound(fe,!!ge):fe===void 0?v.lowerBound(le,!!ue):v.bound(le,fe,!!ue,!!ge)}function P(ne){var le,fe=ne.name;return{name:fe,schema:ne,mutate:function(ue){var ge=ue.trans,he=ue.type,we=ue.keys,Ce=ue.values,be=ue.range;return new Promise(function(Me,He){Me=_n(Me);var st=ge.objectStore(fe),ut=st.keyPath==null,Je=he==="put"||he==="add";if(!Je&&he!=="delete"&&he!=="deleteRange")throw new Error("Invalid operation type: "+he);var vt,gt=(we||Ce||{length:1}).length;if(we&&Ce&&we.length!==Ce.length)throw new Error("Given keys array must have same length as given values array.");if(gt===0)return Me({numFailures:0,failures:{},results:[],lastResult:void 0});function it(tr){++wn,Pt(tr)}var bt=[],Xt=[],wn=0;if(he==="deleteRange"){if(be.type===4)return Me({numFailures:wn,failures:Xt,results:[],lastResult:void 0});be.type===3?bt.push(vt=st.clear()):bt.push(vt=st.delete(I(be)))}else{var ut=Je?ut?[Ce,we]:[Ce,null]:[we,null],Bt=ut[0],en=ut[1];if(Je)for(var gr=0;gr<gt;++gr)bt.push(vt=en&&en[gr]!==void 0?st[he](Bt[gr],en[gr]):st[he](Bt[gr])),vt.onerror=it;else for(gr=0;gr<gt;++gr)bt.push(vt=st[he](Bt[gr])),vt.onerror=it}function Ya(tr){tr=tr.target.result,bt.forEach(function(al,Gu){return al.error!=null&&(Xt[Gu]=al.error)}),Me({numFailures:wn,failures:Xt,results:he==="delete"?we:bt.map(function(al){return al.result}),lastResult:tr})}vt.onerror=function(tr){it(tr),Ya(tr)},vt.onsuccess=Ya})},getMany:function(ue){var ge=ue.trans,he=ue.keys;return new Promise(function(we,Ce){we=_n(we);for(var be,Me=ge.objectStore(fe),He=he.length,st=new Array(He),ut=0,Je=0,vt=function(bt){bt=bt.target,st[bt._pos]=bt.result,++Je===ut&&we(st)},gt=Tr(Ce),it=0;it<He;++it)he[it]!=null&&((be=Me.get(he[it]))._pos=it,be.onsuccess=vt,be.onerror=gt,++ut);ut===0&&we(st)})},get:function(ue){var ge=ue.trans,he=ue.key;return new Promise(function(we,Ce){we=_n(we);var be=ge.objectStore(fe).get(he);be.onsuccess=function(Me){return we(Me.target.result)},be.onerror=Tr(Ce)})},query:(le=q,function(ue){return new Promise(function(ge,he){ge=_n(ge);var we,Ce,be,Je=ue.trans,Me=ue.values,He=ue.limit,ut=ue.query,st=He===1/0?void 0:He,vt=ut.index,ut=ut.range,Je=Je.objectStore(fe),Je=vt.isPrimaryKey?Je:Je.index(vt.name),vt=I(ut);if(He===0)return ge({result:[]});le?((ut=Me?Je.getAll(vt,st):Je.getAllKeys(vt,st)).onsuccess=function(gt){return ge({result:gt.target.result})},ut.onerror=Tr(he)):(we=0,Ce=!Me&&"openKeyCursor"in Je?Je.openKeyCursor(vt):Je.openCursor(vt),be=[],Ce.onsuccess=function(gt){var it=Ce.result;return!it||(be.push(Me?it.value:it.primaryKey),++we===He)?ge({result:be}):void it.continue()},Ce.onerror=Tr(he))})}),openCursor:function(ue){var ge=ue.trans,he=ue.values,we=ue.query,Ce=ue.reverse,be=ue.unique;return new Promise(function(Me,He){Me=_n(Me);var Je=we.index,st=we.range,ut=ge.objectStore(fe),ut=Je.isPrimaryKey?ut:ut.index(Je.name),Je=Ce?be?"prevunique":"prev":be?"nextunique":"next",vt=!he&&"openKeyCursor"in ut?ut.openKeyCursor(I(st),Je):ut.openCursor(I(st),Je);vt.onerror=Tr(He),vt.onsuccess=_n(function(gt){var it,bt,Xt,wn,Bt=vt.result;Bt?(Bt.___id=++qa,Bt.done=!1,it=Bt.continue.bind(Bt),bt=(bt=Bt.continuePrimaryKey)&&bt.bind(Bt),Xt=Bt.advance.bind(Bt),wn=function(){throw new Error("Cursor not stopped")},Bt.trans=ge,Bt.stop=Bt.continue=Bt.continuePrimaryKey=Bt.advance=function(){throw new Error("Cursor not started")},Bt.fail=_n(He),Bt.next=function(){var en=this,gr=1;return this.start(function(){return gr--?en.continue():en.stop()}).then(function(){return en})},Bt.start=function(en){function gr(){if(vt.result)try{en()}catch(tr){Bt.fail(tr)}else Bt.done=!0,Bt.start=function(){throw new Error("Cursor behind last entry")},Bt.stop()}var Ya=new Promise(function(tr,al){tr=_n(tr),vt.onerror=Tr(al),Bt.fail=al,Bt.stop=function(Gu){Bt.stop=Bt.continue=Bt.continuePrimaryKey=Bt.advance=wn,tr(Gu)}});return vt.onsuccess=_n(function(tr){vt.onsuccess=gr,gr()}),Bt.continue=it,Bt.continuePrimaryKey=bt,Bt.advance=Xt,gr(),Ya},Me(Bt)):Me(null)},He)})},count:function(ue){var ge=ue.query,he=ue.trans,we=ge.index,Ce=ge.range;return new Promise(function(be,Me){var He=he.objectStore(fe),He=we.isPrimaryKey?He:He.index(we.name),st=I(Ce),st=st?He.count(st):He.count();st.onsuccess=_n(function(ut){return be(ut.target.result)}),st.onerror=Tr(Me)})}}}k=Q,F=ra((Q=d).objectStoreNames);var k,Q={schema:{name:Q.name,tables:F.map(function(ne){return k.objectStore(ne)}).map(function(ne){var le=ne.keyPath,fe=ne.autoIncrement,ge=f(le),ue={},ge={name:ne.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:le==null,compound:ge,keyPath:le,autoIncrement:fe,unique:!0,extractKey:Sa(le)},indexes:ra(ne.indexNames).map(function(he){return ne.index(he)}).map(function(be){var Me=be.name,we=be.unique,Ce=be.multiEntry,be=be.keyPath,Me={name:Me,compound:f(be),keyPath:be,unique:we,multiEntry:Ce,extractKey:Sa(be)};return ue[ir(be)]=Me}),getIndexByKeyPath:function(he){return ue[ir(he)]}};return ue[":id"]=ge.primaryKey,le!=null&&(ue[ir(le)]=ge.primaryKey),ge})},hasGetAll:0<F.length&&"getAll"in k.objectStore(F[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},F=Q.schema,q=Q.hasGetAll,Q=F.tables.map(P),re={};return Q.forEach(function(ne){return re[ne.name]=ne}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(ne){if(re[ne])return re[ne];throw new Error("Table '".concat(ne,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Aa(v),schema:F}}function Ir(d,v,A,I){return A=A.IDBKeyRange,v=Ta(v,A,I),{dbcore:d.dbcore.reduce(function(P,k){return k=k.create,r(r({},P),k(P))},v)}}function Ga(d,v){var A=v.db,A=Ir(d._middlewares,A,d._deps,v);d.core=A.dbcore,d.tables.forEach(function(I){var P=I.name;d.core.schema.tables.some(function(k){return k.name===P})&&(I.core=d.core.table(P),d[P]instanceof d.Table)&&(d[P].core=I.core)})}function Us(d,v,A,I){A.forEach(function(P){var k=I[P];v.forEach(function(F){var q=(function Q(re,ne){return L(re,ne)||(re=p(re))&&Q(re,ne)})(F,P);(!q||"value"in q&&q.value===void 0)&&(F===d.Transaction.prototype||F instanceof d.Transaction?j(F,P,{get:function(){return this.table(P)},set:function(Q){N(this,P,{value:Q,writable:!0,configurable:!0,enumerable:!0})}}):F[P]=new d.Table(P,k))})})}function ss(d,v){v.forEach(function(A){for(var I in A)A[I]instanceof d.Table&&delete A[I]})}function el(d,v){return d._cfg.version-v._cfg.version}function ps(d,v,A,I){var P=d._dbSchema,k=(A.objectStoreNames.contains("$meta")&&!P.$meta&&(P.$meta=zs("$meta",Yt("")[0],[]),d._storeNames.push("$meta")),d._createTransaction("readwrite",d._storeNames,P)),F=(k.create(A),k._completion.catch(I),k._reject.bind(k)),q=Ze.transless||Ze;Vn(function(){if(Ze.trans=k,Ze.transless=q,v!==0)return Ga(d,A),re=v,((Q=k).storeNames.includes("$meta")?Q.table("$meta").get("version").then(function(ne){return ne??re}):ct.resolve(re)).then(function(we){var le=d,fe=we,ue=k,ge=A,he=[],we=le._versions,Ce=le._dbSchema=vs(0,le.idbdb,ge);return(we=we.filter(function(be){return be._cfg.version>=fe})).length===0?ct.resolve():(we.forEach(function(be){he.push(function(){var Me,He,st,ut=Ce,Je=be._cfg.dbschema,vt=(ke(le,ut,ge),ke(le,Je,ge),Ce=le._dbSchema=Je,En(ut,Je)),gt=(vt.add.forEach(function(it){ys(ge,it[0],it[1].primKey,it[1].indexes)}),vt.change.forEach(function(it){if(it.recreate)throw new Xe.Upgrade("Not yet support for changing primary key");var bt=ge.objectStore(it.name);it.add.forEach(function(Xt){return ia(bt,Xt)}),it.change.forEach(function(Xt){bt.deleteIndex(Xt.name),ia(bt,Xt)}),it.del.forEach(function(Xt){return bt.deleteIndex(Xt)})}),be._cfg.contentUpgrade);if(gt&&be._cfg.version>fe)return Ga(le,ge),ue._memoizedTables={},Me=W(Je),vt.del.forEach(function(it){Me[it]=ut[it]}),ss(le,[le.Transaction.prototype]),Us(le,[le.Transaction.prototype],l(Me),Me),ue.schema=Me,(He=me(gt))&&gn(),Je=ct.follow(function(){var it;(st=gt(ue))&&He&&(it=Nr.bind(null,null),st.then(it,it))}),st&&typeof st.then=="function"?ct.resolve(st):Je.then(function(){return st})}),he.push(function(Me){var He,st,ut=be._cfg.dbschema;He=ut,st=Me,[].slice.call(st.db.objectStoreNames).forEach(function(Je){return He[Je]==null&&st.db.deleteObjectStore(Je)}),ss(le,[le.Transaction.prototype]),Us(le,[le.Transaction.prototype],le._storeNames,le._dbSchema),ue.schema=le._dbSchema}),he.push(function(Me){le.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(le.idbdb.version/10)===be._cfg.version?(le.idbdb.deleteObjectStore("$meta"),delete le._dbSchema.$meta,le._storeNames=le._storeNames.filter(function(He){return He!=="$meta"})):Me.objectStore("$meta").put(be._cfg.version,"version"))})}),(function be(){return he.length?ct.resolve(he.shift()(ue.idbtrans)).then(be):ct.resolve()})().then(function(){uo(Ce,ge)}))}).catch(F);var Q,re;l(P).forEach(function(ne){ys(A,ne,P[ne].primKey,P[ne].indexes)}),Ga(d,A),ct.follow(function(){return d.on.populate.fire(k)}).catch(F)})}function tl(d,v){uo(d._dbSchema,v),v.db.version%10!=0||v.objectStoreNames.contains("$meta")||v.db.createObjectStore("$meta").add(Math.ceil(v.db.version/10-1),"version");var A=vs(0,d.idbdb,v);ke(d,d._dbSchema,v);for(var I=0,P=En(A,d._dbSchema).change;I<P.length;I++){var k=(F=>{if(F.change.length||F.recreate)return console.warn("Unable to patch indexes of table ".concat(F.name," because it has changes on the type of index or primary key.")),{value:void 0};var q=v.objectStore(F.name);F.add.forEach(function(Q){mt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(F.name,".").concat(Q.src)),ia(q,Q)})})(P[I]);if(typeof k=="object")return k.value}}function En(d,v){var A,I={del:[],add:[],change:[]};for(A in d)v[A]||I.del.push(A);for(A in v){var P=d[A],k=v[A];if(P){var F={name:A,def:k,recreate:!1,del:[],add:[],change:[]};if(""+(P.primKey.keyPath||"")!=""+(k.primKey.keyPath||"")||P.primKey.auto!==k.primKey.auto)F.recreate=!0,I.change.push(F);else{var q=P.idxByName,Q=k.idxByName,re=void 0;for(re in q)Q[re]||F.del.push(re);for(re in Q){var ne=q[re],le=Q[re];ne?ne.src!==le.src&&F.change.push(le):F.add.push(le)}(0<F.del.length||0<F.add.length||0<F.change.length)&&I.change.push(F)}}else I.add.push([A,k])}return I}function ys(d,v,A,I){var P=d.db.createObjectStore(v,A.keyPath?{keyPath:A.keyPath,autoIncrement:A.auto}:{autoIncrement:A.auto});I.forEach(function(k){return ia(P,k)})}function uo(d,v){l(d).forEach(function(A){v.db.objectStoreNames.contains(A)||(mt&&console.debug("Dexie: Creating missing table",A),ys(v,A,d[A].primKey,d[A].indexes))})}function ia(d,v){d.createIndex(v.name,v.keyPath,{unique:v.unique,multiEntry:v.multi})}function vs(d,v,A){var I={};return $(v.objectStoreNames,0).forEach(function(P){for(var k=A.objectStore(P),F=Ea(Ua(re=k.keyPath),re||"",!0,!1,!!k.autoIncrement,re&&typeof re!="string",!0),q=[],Q=0;Q<k.indexNames.length;++Q){var ne=k.index(k.indexNames[Q]),re=ne.keyPath,ne=Ea(ne.name,re,!!ne.unique,!!ne.multiEntry,!1,re&&typeof re!="string",!1);q.push(ne)}I[P]=zs(P,F,q)}),I}function ke(d,v,A){for(var I=A.db.objectStoreNames,P=0;P<I.length;++P){var k=I[P],F=A.objectStore(k);d._hasGetAll="getAll"in F;for(var q=0;q<F.indexNames.length;++q){var Q,re=F.indexNames[q],ne=F.index(re).keyPath,ne=typeof ne=="string"?ne:"["+$(ne).join("+")+"]";v[k]&&(Q=v[k].idxByName[ne])&&(Q.name=re,delete v[k].idxByName[ne],v[k].idxByName[re]=Q)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function Yt(d){return d.split(",").map(function(v,A){var P=v.split(":"),I=(I=P[1])==null?void 0:I.trim(),P=(v=P[0].trim()).replace(/([&*]|\+\+)/g,""),k=/^\[/.test(P)?P.match(/^\[(.*)\]$/)[1].split("+"):P;return Ea(P,k||null,/\&/.test(v),/\*/.test(v),/\+\+/.test(v),f(k),A===0,I)})}Ha.prototype._createTableSchema=zs,Ha.prototype._parseIndexSyntax=Yt,Ha.prototype._parseStoresSpec=function(d,v){var A=this;l(d).forEach(function(I){if(d[I]!==null){var P=A._parseIndexSyntax(d[I]),k=P.shift();if(!k)throw new Xe.Schema("Invalid schema for table "+I+": "+d[I]);if(k.unique=!0,k.multi)throw new Xe.Schema("Primary key cannot be multiEntry*");P.forEach(function(F){if(F.auto)throw new Xe.Schema("Only primary key can be marked as autoIncrement (++)");if(!F.keyPath)throw new Xe.Schema("Index must have a name and cannot be an empty string")}),k=A._createTableSchema(I,k,P),v[I]=k}})},Ha.prototype.stores=function(A){var v=this.db,A=(this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,A):A,v._versions),I={},P={};return A.forEach(function(k){m(I,k._cfg.storesSource),P=k._cfg.dbschema={},k._parseStoresSpec(I,P)}),v._dbSchema=P,ss(v,[v._allTables,v,v.Transaction.prototype]),Us(v,[v._allTables,v,v.Transaction.prototype,this._cfg.tables],l(P),P),v._storeNames=l(P),this},Ha.prototype.upgrade=function(d){return this._cfg.contentUpgrade=Mn(this._cfg.contentUpgrade||Fe,d),this};var Dr=Ha;function Ha(){}function ko(d,v){var A=d._dbNamesDB;return A||(A=d._dbNamesDB=new ws(lo,{addons:[],indexedDB:d,IDBKeyRange:v})).version(1).stores({dbnames:"name"}),A.table("dbnames")}function Ka(d){return d&&typeof d.databases=="function"}function nl(d){return Vn(function(){return Ze.letThrough=!0,d()})}function rl(d){return!("from"in d)}var Br=function(d,v){var A;if(!this)return A=new Br,d&&"d"in d&&m(A,d),A;m(this,arguments.length?{d:1,from:d,to:1<arguments.length?v:d}:{d:0})};function er(d,v,A){var I=Qt(v,A);if(!isNaN(I)){if(0<I)throw RangeError();if(rl(d))return m(d,{from:v,to:A,d:1});var I=d.l,P=d.r;if(Qt(A,d.from)<0)return I?er(I,v,A):d.l={from:v,to:A,d:1,l:null,r:null},os(d);if(0<Qt(v,d.to))return P?er(P,v,A):d.r={from:v,to:A,d:1,l:null,r:null},os(d);Qt(v,d.from)<0&&(d.from=v,d.l=null,d.d=P?P.d+1:1),0<Qt(A,d.to)&&(d.to=A,d.r=null,d.d=d.l?d.l.d+1:1),v=!d.r,I&&!d.l&&aa(d,I),P&&v&&aa(d,P)}}function aa(d,v){rl(v)||(function A(I,P){var k=P.from,F=P.l,q=P.r;er(I,k,P.to),F&&A(I,F),q&&A(I,q)})(d,v)}function dn(d,v){var A=xs(v),I=A.next();if(!I.done)for(var P=I.value,k=xs(d),F=k.next(P.from),q=F.value;!I.done&&!F.done;){if(Qt(q.from,P.to)<=0&&0<=Qt(q.to,P.from))return!0;Qt(P.from,q.from)<0?P=(I=A.next(q.from)).value:q=(F=k.next(P.from)).value}return!1}function xs(d){var v=rl(d)?null:{s:0,n:d};return{next:function(A){for(var I=0<arguments.length;v;)switch(v.s){case 0:if(v.s=1,I)for(;v.n.l&&Qt(A,v.n.from)<0;)v={up:v,n:v.n.l,s:1};else for(;v.n.l;)v={up:v,n:v.n.l,s:1};case 1:if(v.s=2,!I||Qt(A,v.n.to)<=0)return{value:v.n,done:!1};case 2:if(v.n.r){v.s=3,v={up:v,n:v.n.r,s:0};continue}case 3:v=v.up}return{done:!0}}}}function os(d){var v,A,I,P=(((P=d.r)==null?void 0:P.d)||0)-(((P=d.l)==null?void 0:P.d)||0),P=1<P?"r":P<-1?"l":"";P&&(v=P=="r"?"l":"r",A=r({},d),I=d[P],d.from=I.from,d.to=I.to,d[P]=I[P],A[P]=I[v],(d[v]=A).d=pn(A)),d.d=pn(d)}function pn(A){var v=A.r,A=A.l;return(v?A?Math.max(v.d,A.d):v.d:A?A.d:0)+1}function S(d,v){return l(v).forEach(function(A){d[A]?aa(d[A],v[A]):d[A]=(function I(P){var k,F,q={};for(k in P)_(P,k)&&(F=P[k],q[k]=!F||typeof F!="object"||ae.has(F.constructor)?F:I(F));return q})(v[A])}),d}function B(d,v){return d.all||v.all||Object.keys(d).some(function(A){return v[A]&&dn(v[A],d[A])})}T(Br.prototype,(($n={add:function(d){return aa(this,d),this},addKey:function(d){return er(this,d,d),this},addKeys:function(d){var v=this;return d.forEach(function(A){return er(v,A,A)}),this},hasKey:function(d){var v=xs(this).next(d).value;return v&&Qt(v.from,d)<=0&&0<=Qt(v.to,d)}})[ye]=function(){return xs(this)},$n));var G={},ie={},Ae=!1;function Le(d){S(ie,d),Ae||(Ae=!0,setTimeout(function(){Ae=!1,at(ie,!(ie={}))},0))}function at(d,v){v===void 0&&(v=!1);var A=new Set;if(d.all)for(var I=0,P=Object.values(G);I<P.length;I++)qt(q=P[I],d,A,v);else for(var k in d){var F,q,k=/^idb\:\/\/(.*)\/(.*)\//.exec(k);k&&(F=k[1],k=k[2],q=G["idb://".concat(F,"/").concat(k)])&&qt(q,d,A,v)}A.forEach(function(Q){return Q()})}function qt(d,v,A,I){for(var P=[],k=0,F=Object.entries(d.queries.query);k<F.length;k++){for(var q=F[k],Q=q[0],re=[],ne=0,le=q[1];ne<le.length;ne++){var fe=le[ne];B(v,fe.obsSet)?fe.subscribers.forEach(function(we){return A.add(we)}):I&&re.push(fe)}I&&P.push([Q,re])}if(I)for(var ue=0,ge=P;ue<ge.length;ue++){var he=ge[ue],Q=he[0],re=he[1];d.queries.query[Q]=re}}function kr(d){var v=d._state,A=d._deps.indexedDB;if(v.isBeingOpened||d.idbdb)return v.dbReadyPromise.then(function(){return v.dbOpenError?Mt(v.dbOpenError):d});v.isBeingOpened=!0,v.dbOpenError=null,v.openComplete=!1;var I=v.openCanceller,P=Math.round(10*d.verno),k=!1;function F(){if(v.openCanceller!==I)throw new Xe.DatabaseClosed("db.open() was cancelled")}function q(){return new ct(function(fe,ue){if(F(),!A)throw new Xe.MissingAPI;var ge=d.name,he=v.autoSchema||!P?A.open(ge):A.open(ge,P);if(!he)throw new Xe.MissingAPI;he.onerror=Tr(ue),he.onblocked=_n(d._fireOnBlocked),he.onupgradeneeded=_n(function(we){var Ce;ne=he.transaction,v.autoSchema&&!d._options.allowEmptyDB?(he.onerror=Pt,ne.abort(),he.result.close(),(Ce=A.deleteDatabase(ge)).onsuccess=Ce.onerror=_n(function(){ue(new Xe.NoSuchDatabase("Database ".concat(ge," doesnt exist")))})):(ne.onerror=Tr(ue),Ce=we.oldVersion>Math.pow(2,62)?0:we.oldVersion,le=Ce<1,d.idbdb=he.result,k&&tl(d,ne),ps(d,Ce/10,ne,ue))},ue),he.onsuccess=_n(function(){ne=null;var we,Ce,be,Me,He,st,ut=d.idbdb=he.result,Je=$(ut.objectStoreNames);if(0<Je.length)try{var vt=ut.transaction((He=Je).length===1?He[0]:He,"readonly");if(v.autoSchema)st=ut,Me=vt,(be=d).verno=st.version/10,Me=be._dbSchema=vs(0,st,Me),be._storeNames=$(st.objectStoreNames,0),Us(be,[be._allTables],l(Me),Me);else if(ke(d,d._dbSchema,vt),Ce=vt,((Ce=En(vs(0,(we=d).idbdb,Ce),we._dbSchema)).add.length||Ce.change.some(function(gt){return gt.add.length||gt.change.length}))&&!k)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ut.close(),P=ut.version+1,k=!0,fe(q());Ga(d,vt)}catch{}Ge.push(d),ut.onversionchange=_n(function(gt){v.vcFired=!0,d.on("versionchange").fire(gt)}),ut.onclose=_n(function(){d.close({disableAutoOpen:!1})}),le&&(Je=d._deps,He=ge,Ka(st=Je.indexedDB)||He===lo||ko(st,Je.IDBKeyRange).put({name:He}).catch(Fe)),fe()},ue)}).catch(function(fe){switch(fe?.name){case"UnknownError":if(0<v.PR1398_maxLoop)return v.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),q();break;case"VersionError":if(0<P)return P=0,q()}return ct.reject(fe)})}var Q,re=v.dbReadyResolve,ne=null,le=!1;return ct.race([I,(typeof navigator>"u"?ct.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(fe){function ue(){return indexedDB.databases().finally(fe)}Q=setInterval(ue,100),ue()}).finally(function(){return clearInterval(Q)}):Promise.resolve()).then(q)]).then(function(){return F(),v.onReadyBeingFired=[],ct.resolve(nl(function(){return d.on.ready.fire(d.vip)})).then(function fe(){var ue;if(0<v.onReadyBeingFired.length)return ue=v.onReadyBeingFired.reduce(Mn,Fe),v.onReadyBeingFired=[],ct.resolve(nl(function(){return ue(d.vip)})).then(fe)})}).finally(function(){v.openCanceller===I&&(v.onReadyBeingFired=null,v.isBeingOpened=!1)}).catch(function(fe){v.dbOpenError=fe;try{ne&&ne.abort()}catch{}return I===v.openCanceller&&d._close(),Mt(fe)}).finally(function(){v.openComplete=!0,re()}).then(function(){var fe;return le&&(fe={},d.tables.forEach(function(ue){ue.schema.indexes.forEach(function(ge){ge.name&&(fe["idb://".concat(d.name,"/").concat(ue.name,"/").concat(ge.name)]=new Br(-1/0,[[[]]]))}),fe["idb://".concat(d.name,"/").concat(ue.name,"/")]=fe["idb://".concat(d.name,"/").concat(ue.name,"/:dels")]=new Br(-1/0,[[[]]])}),xn(za).fire(fe),at(fe,!0)),d})}function bn(d){function v(k){return d.next(k)}var A=P(v),I=P(function(k){return d.throw(k)});function P(k){return function(q){var q=k(q),Q=q.value;return q.done?Q:Q&&typeof Q.then=="function"?Q.then(A,I):f(Q)?Promise.all(Q).then(A,I):A(Q)}}return P(v)()}function Un(d,v,A){for(var I=f(d)?d.slice():[d],P=0;P<A;++P)I.push(v);return I}var Ia={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return r(r({},d),{table:function(I){var A=d.table(I),I=A.schema,P={},k=[];function F(fe,ue,ge){var be=ir(fe),he=P[be]=P[be]||[],we=fe==null?0:typeof fe=="string"?1:fe.length,Ce=0<ue,be=r(r({},ge),{name:Ce?"".concat(be,"(virtual-from:").concat(ge.name,")"):ge.name,lowLevelIndex:ge,isVirtual:Ce,keyTail:ue,keyLength:we,extractKey:Sa(fe),unique:!Ce&&ge.unique});return he.push(be),be.isPrimaryKey||k.push(be),1<we&&F(we===2?fe[0]:fe.slice(0,we-1),ue+1,ge),he.sort(function(Me,He){return Me.keyTail-He.keyTail}),be}var q=F(I.primaryKey.keyPath,0,I.primaryKey);P[":id"]=[q];for(var Q=0,re=I.indexes;Q<re.length;Q++){var ne=re[Q];F(ne.keyPath,0,ne)}function le(fe){var ue,ge=fe.query.index;return ge.isVirtual?r(r({},fe),{query:{index:ge.lowLevelIndex,range:(ue=fe.query.range,ge=ge.keyTail,{type:ue.type===1?2:ue.type,lower:Un(ue.lower,ue.lowerOpen?d.MAX_KEY:d.MIN_KEY,ge),lowerOpen:!0,upper:Un(ue.upper,ue.upperOpen?d.MIN_KEY:d.MAX_KEY,ge),upperOpen:!0})}}):fe}return r(r({},A),{schema:r(r({},I),{primaryKey:q,indexes:k,getIndexByKeyPath:function(fe){return(fe=P[ir(fe)])&&fe[0]}}),count:function(fe){return A.count(le(fe))},query:function(fe){return A.query(le(fe))},openCursor:function(fe){var ue=fe.query.index,ge=ue.keyTail,he=ue.keyLength;return ue.isVirtual?A.openCursor(le(fe)).then(function(Ce){return Ce&&we(Ce)}):A.openCursor(fe);function we(Ce){return Object.create(Ce,{continue:{value:function(be){be!=null?Ce.continue(Un(be,fe.reverse?d.MAX_KEY:d.MIN_KEY,ge)):fe.unique?Ce.continue(Ce.key.slice(0,he).concat(fe.reverse?d.MIN_KEY:d.MAX_KEY,ge)):Ce.continue()}},continuePrimaryKey:{value:function(be,Me){Ce.continuePrimaryKey(Un(be,d.MAX_KEY,ge),Me)}},primaryKey:{get:function(){return Ce.primaryKey}},key:{get:function(){var be=Ce.key;return he===1?be[0]:be.slice(0,he)}},value:{get:function(){return Ce.value}}})}}})}})}};function Wa(d,v,A,I){return A=A||{},I=I||"",l(d).forEach(function(P){var k,F,q;_(v,P)?(k=d[P],F=v[P],typeof k=="object"&&typeof F=="object"&&k&&F?(q=de(k))!==de(F)?A[I+P]=v[P]:q==="Object"?Wa(k,F,A,I+P+"."):k!==F&&(A[I+P]=v[P]):k!==F&&(A[I+P]=v[P])):A[I+P]=void 0}),l(v).forEach(function(P){_(d,P)||(A[I+P]=v[P])}),A}function di(d,v){return v.type==="delete"?v.keys:v.keys||v.values.map(d.extractKey)}var Ca={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return r(r({},d),{table:function(v){var A=d.table(v),I=A.schema.primaryKey;return r(r({},A),{mutate:function(P){var k=Ze.trans,F=k.table(v).hook,q=F.deleting,Q=F.creating,re=F.updating;switch(P.type){case"add":if(Q.fire===Fe)break;return k._promise("readwrite",function(){return ne(P)},!0);case"put":if(Q.fire===Fe&&re.fire===Fe)break;return k._promise("readwrite",function(){return ne(P)},!0);case"delete":if(q.fire===Fe)break;return k._promise("readwrite",function(){return ne(P)},!0);case"deleteRange":if(q.fire===Fe)break;return k._promise("readwrite",function(){return(function le(fe,ue,ge){return A.query({trans:fe,values:!1,query:{index:I,range:ue},limit:ge}).then(function(he){var we=he.result;return ne({type:"delete",keys:we,trans:fe}).then(function(Ce){return 0<Ce.numFailures?Promise.reject(Ce.failures[0]):we.length<ge?{failures:[],numFailures:0,lastResult:void 0}:le(fe,r(r({},ue),{lower:we[we.length-1],lowerOpen:!0}),ge)})})})(P.trans,P.range,1e4)},!0)}return A.mutate(P);function ne(le){var fe,ue,ge,he=Ze.trans,we=le.keys||di(I,le);if(we)return(le=le.type==="add"||le.type==="put"?r(r({},le),{keys:we}):r({},le)).type!=="delete"&&(le.values=i([],le.values)),le.keys&&(le.keys=i([],le.keys)),fe=A,ge=we,((ue=le).type==="add"?Promise.resolve([]):fe.getMany({trans:ue.trans,keys:ge,cache:"immutable"})).then(function(Ce){var be=we.map(function(Me,He){var st,ut,Je,vt=Ce[He],gt={onerror:null,onsuccess:null};return le.type==="delete"?q.fire.call(gt,Me,vt,he):le.type==="add"||vt===void 0?(st=Q.fire.call(gt,Me,le.values[He],he),Me==null&&st!=null&&(le.keys[He]=Me=st,I.outbound||V(le.values[He],I.keyPath,Me))):(st=Wa(vt,le.values[He]),(ut=re.fire.call(gt,st,Me,vt,he))&&(Je=le.values[He],Object.keys(ut).forEach(function(it){_(Je,it)?Je[it]=ut[it]:V(Je,it,ut[it])}))),gt});return A.mutate(le).then(function(Me){for(var He=Me.failures,st=Me.results,ut=Me.numFailures,Me=Me.lastResult,Je=0;Je<we.length;++Je){var vt=(st||we)[Je],gt=be[Je];vt==null?gt.onerror&&gt.onerror(He[Je]):gt.onsuccess&&gt.onsuccess(le.type==="put"&&Ce[Je]?le.values[Je]:vt)}return{failures:He,results:st,numFailures:ut,lastResult:Me}}).catch(function(Me){return be.forEach(function(He){return He.onerror&&He.onerror(Me)}),Promise.reject(Me)})});throw new Error("Keys missing")}}})}})}};function co(d,v,A){try{if(!v||v.keys.length<d.length)return null;for(var I=[],P=0,k=0;P<v.keys.length&&k<d.length;++P)Qt(v.keys[P],d[k])===0&&(I.push(A?ee(v.values[P]):v.values[P]),++k);return I.length===d.length?I:null}catch{return null}}var bs={stack:"dbcore",level:-1,create:function(d){return{table:function(v){var A=d.table(v);return r(r({},A),{getMany:function(I){var P;return I.cache?(P=co(I.keys,I.trans._cache,I.cache==="clone"))?ct.resolve(P):A.getMany(I).then(function(k){return I.trans._cache={keys:I.keys,values:I.cache==="clone"?ee(k):k},k}):A.getMany(I)},mutate:function(I){return I.type!=="add"&&(I.trans._cache=null),A.mutate(I)}})}}}};function Mo(d,v){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!v.schema.primaryKey.outbound}function qs(d,v){switch(d){case"query":return v.values&&!v.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var qu={stack:"dbcore",level:0,name:"Observability",create:function(d){var v=d.schema.name,A=new Br(d.MIN_KEY,d.MAX_KEY);return r(r({},d),{transaction:function(I,P,k){if(Ze.subscr&&P!=="readonly")throw new Xe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ze.querier));return d.transaction(I,P,k)},table:function(I){function P(we){var he,we=we.query;return[he=we.index,new Br((he=(we=we.range).lower)!=null?he:d.MIN_KEY,(he=we.upper)!=null?he:d.MAX_KEY)]}var k=d.table(I),F=k.schema,q=F.primaryKey,Q=F.indexes,re=q.extractKey,ne=q.outbound,le=q.autoIncrement&&Q.filter(function(ge){return ge.compound&&ge.keyPath.includes(q.keyPath)}),fe=r(r({},k),{mutate:function(ge){function he(bt){return bt="idb://".concat(v,"/").concat(I,"/").concat(bt),He[bt]||(He[bt]=new Br)}var we,Ce,be,Me=ge.trans,He=ge.mutatedParts||(ge.mutatedParts={}),st=he(""),ut=he(":dels"),Je=ge.type,gt=ge.type==="deleteRange"?[ge.range]:ge.type==="delete"?[ge.keys]:ge.values.length<50?[di(q,ge).filter(function(bt){return bt}),ge.values]:[],vt=gt[0],gt=gt[1],it=ge.trans._cache;return f(vt)?(st.addKeys(vt),(Je=Je==="delete"||vt.length===gt.length?co(vt,it):null)||ut.addKeys(vt),(Je||gt)&&(we=he,Ce=Je,be=gt,F.indexes.forEach(function(bt){var Xt=we(bt.name||"");function wn(en){return en!=null?bt.extractKey(en):null}function Bt(en){bt.multiEntry&&f(en)?en.forEach(function(gr){return Xt.addKey(gr)}):Xt.addKey(en)}(Ce||be).forEach(function(en,tr){var Ya=Ce&&wn(Ce[tr]),tr=be&&wn(be[tr]);Qt(Ya,tr)!==0&&(Ya!=null&&Bt(Ya),tr!=null)&&Bt(tr)})}))):vt?(gt={from:(it=vt.lower)!=null?it:d.MIN_KEY,to:(Je=vt.upper)!=null?Je:d.MAX_KEY},ut.add(gt),st.add(gt)):(st.add(A),ut.add(A),F.indexes.forEach(function(bt){return he(bt.name).add(A)})),k.mutate(ge).then(function(bt){return!vt||ge.type!=="add"&&ge.type!=="put"||(st.addKeys(bt.results),le&&le.forEach(function(Xt){for(var wn=ge.values.map(function(Ya){return Xt.extractKey(Ya)}),Bt=Xt.keyPath.findIndex(function(Ya){return Ya===q.keyPath}),en=0,gr=bt.results.length;en<gr;++en)wn[en][Bt]=bt.results[en];he(Xt.name).addKeys(wn)})),Me.mutatedParts=S(Me.mutatedParts||{},He),bt})}}),ue={get:function(ge){return[q,new Br(ge.key)]},getMany:function(ge){return[q,new Br().addKeys(ge.keys)]},count:P,query:P,openCursor:P};return l(ue).forEach(function(ge){fe[ge]=function(he){var we=Ze.subscr,Ce=!!we,be=Mo(Ze,k)&&qs(ge,he)?he.obsSet={}:we;if(Ce){var Me,we=function(gt){return gt="idb://".concat(v,"/").concat(I,"/").concat(gt),be[gt]||(be[gt]=new Br)},He=we(""),st=we(":dels"),Ce=ue[ge](he),ut=Ce[0],Ce=Ce[1];if((ge==="query"&&ut.isPrimaryKey&&!he.values?st:we(ut.name||"")).add(Ce),!ut.isPrimaryKey){if(ge!=="count")return Me=ge==="query"&&ne&&he.values&&k.query(r(r({},he),{values:!1})),k[ge].apply(this,arguments).then(function(gt){if(ge==="query"){if(ne&&he.values)return Me.then(function(wn){return wn=wn.result,He.addKeys(wn),gt});var it=he.values?gt.result.map(re):gt.result;(he.values?He:st).addKeys(it)}else{var bt,Xt;if(ge==="openCursor")return Xt=he.values,(bt=gt)&&Object.create(bt,{key:{get:function(){return st.addKey(bt.primaryKey),bt.key}},primaryKey:{get:function(){var wn=bt.primaryKey;return st.addKey(wn),wn}},value:{get:function(){return Xt&&He.addKey(bt.primaryKey),bt.value}}})}return gt});st.add(A)}}return k[ge].apply(this,arguments)}}),fe}})}};function Oa(d,v,A){var I;return A.numFailures===0?v:v.type==="deleteRange"||(I=v.keys?v.keys.length:"values"in v&&v.values?v.values.length:1,A.numFailures===I)?null:(I=r({},v),f(I.keys)&&(I.keys=I.keys.filter(function(P,k){return!(k in A.failures)})),"values"in I&&f(I.values)&&(I.values=I.values.filter(function(P,k){return!(k in A.failures)})),I)}function Vl(d,v){return A=d,((I=v).lower===void 0||(I.lowerOpen?0<Qt(A,I.lower):0<=Qt(A,I.lower)))&&(A=d,(I=v).upper===void 0||(I.upperOpen?Qt(A,I.upper)<0:Qt(A,I.upper)<=0));var A,I}function $a(d,v,A,I,P,k){var F,q,Q,re,ne,le;return!A||A.length===0||(F=v.query.index,q=F.multiEntry,Q=v.query.range,re=I.schema.primaryKey.extractKey,ne=F.extractKey,le=(F.lowLevelIndex||F).extractKey,(I=A.reduce(function(fe,ue){var ge=fe,he=[];if(ue.type==="add"||ue.type==="put")for(var we=new Br,Ce=ue.values.length-1;0<=Ce;--Ce){var be,Me=ue.values[Ce],He=re(Me);!we.hasKey(He)&&(be=ne(Me),q&&f(be)?be.some(function(gt){return Vl(gt,Q)}):Vl(be,Q))&&(we.addKey(He),he.push(Me))}switch(ue.type){case"add":var st=new Br().addKeys(v.values?fe.map(function(it){return re(it)}):fe),ge=fe.concat(v.values?he.filter(function(it){return it=re(it),!st.hasKey(it)&&(st.addKey(it),!0)}):he.map(function(it){return re(it)}).filter(function(it){return!st.hasKey(it)&&(st.addKey(it),!0)}));break;case"put":var ut=new Br().addKeys(ue.values.map(function(it){return re(it)}));ge=fe.filter(function(it){return!ut.hasKey(v.values?re(it):it)}).concat(v.values?he:he.map(function(it){return re(it)}));break;case"delete":var Je=new Br().addKeys(ue.keys);ge=fe.filter(function(it){return!Je.hasKey(v.values?re(it):it)});break;case"deleteRange":var vt=ue.range;ge=fe.filter(function(it){return!Vl(re(it),vt)})}return ge},d))===d)?d:(I.sort(function(fe,ue){return Qt(le(fe),le(ue))||Qt(re(fe),re(ue))}),v.limit&&v.limit<1/0&&(I.length>v.limit?I.length=v.limit:d.length===v.limit&&I.length<v.limit&&(P.dirty=!0)),k?Object.freeze(I):I)}function il(d,v){return Qt(d.lower,v.lower)===0&&Qt(d.upper,v.upper)===0&&!!d.lowerOpen==!!v.lowerOpen&&!!d.upperOpen==!!v.upperOpen}function jo(d,v){return((A,I,P,k)=>{if(A===void 0)return I!==void 0?-1:0;if(I===void 0)return 1;if((A=Qt(A,I))===0){if(P&&k)return 0;if(P)return 1;if(k)return-1}return A})(d.lower,v.lower,d.lowerOpen,v.lowerOpen)<=0&&0<=((A,I,P,k)=>{if(A===void 0)return I!==void 0?1:0;if(I===void 0)return-1;if((A=Qt(A,I))===0){if(P&&k)return 0;if(P)return-1;if(k)return 1}return A})(d.upper,v.upper,d.upperOpen,v.upperOpen)}function qm(d,v,A,I){d.subscribers.add(A),I.addEventListener("abort",function(){var P,k;d.subscribers.delete(A),d.subscribers.size===0&&(P=d,k=v,setTimeout(function(){P.subscribers.size===0&&qe(k,P)},3e3))})}var zl={stack:"dbcore",level:0,name:"Cache",create:function(d){var v=d.schema.name;return r(r({},d),{transaction:function(A,I,P){var k,F,q=d.transaction(A,I,P);return I==="readwrite"&&(P=(k=new AbortController).signal,q.addEventListener("abort",(F=function(Q){return function(){if(k.abort(),I==="readwrite"){for(var re=new Set,ne=0,le=A;ne<le.length;ne++){var fe=le[ne],ue=G["idb://".concat(v,"/").concat(fe)];if(ue){var ge=d.table(fe),he=ue.optimisticOps.filter(function(bt){return bt.trans===q});if(q._explicit&&Q&&q.mutatedParts)for(var we=0,Ce=Object.values(ue.queries.query);we<Ce.length;we++)for(var be=0,Me=(ut=Ce[we]).slice();be<Me.length;be++)B((Je=Me[be]).obsSet,q.mutatedParts)&&(qe(ut,Je),Je.subscribers.forEach(function(bt){return re.add(bt)}));else if(0<he.length){ue.optimisticOps=ue.optimisticOps.filter(function(bt){return bt.trans!==q});for(var He=0,st=Object.values(ue.queries.query);He<st.length;He++)for(var ut,Je,vt,gt=0,it=(ut=st[He]).slice();gt<it.length;gt++)(Je=it[gt]).res!=null&&q.mutatedParts&&(Q&&!Je.dirty?(vt=Object.isFrozen(Je.res),vt=$a(Je.res,Je.req,he,ge,Je,vt),Je.dirty?(qe(ut,Je),Je.subscribers.forEach(function(bt){return re.add(bt)})):vt!==Je.res&&(Je.res=vt,Je.promise=ct.resolve({result:vt}))):(Je.dirty&&qe(ut,Je),Je.subscribers.forEach(function(bt){return re.add(bt)})))}}}re.forEach(function(bt){return bt()})}}})(!1),{signal:P}),q.addEventListener("error",F(!1),{signal:P}),q.addEventListener("complete",F(!0),{signal:P})),q},table:function(A){var I=d.table(A),P=I.schema.primaryKey;return r(r({},I),{mutate:function(k){var F,q=Ze.trans;return!P.outbound&&q.db._options.cache!=="disabled"&&!q.explicit&&q.idbtrans.mode==="readwrite"&&(F=G["idb://".concat(v,"/").concat(A)])?(q=I.mutate(k),k.type!=="add"&&k.type!=="put"||!(50<=k.values.length||di(P,k).some(function(Q){return Q==null}))?(F.optimisticOps.push(k),k.mutatedParts&&Le(k.mutatedParts),q.then(function(Q){0<Q.numFailures&&(qe(F.optimisticOps,k),(Q=Oa(0,k,Q))&&F.optimisticOps.push(Q),k.mutatedParts)&&Le(k.mutatedParts)}),q.catch(function(){qe(F.optimisticOps,k),k.mutatedParts&&Le(k.mutatedParts)})):q.then(function(Q){var re=Oa(0,r(r({},k),{values:k.values.map(function(ne,le){var fe;return Q.failures[le]?ne:(V(fe=(fe=P.keyPath)!=null&&fe.includes(".")?ee(ne):r({},ne),P.keyPath,Q.results[le]),fe)})}),Q);F.optimisticOps.push(re),queueMicrotask(function(){return k.mutatedParts&&Le(k.mutatedParts)})}),q):I.mutate(k)},query:function(k){var F,q,Q,re,ne,le,fe;return Mo(Ze,I)&&qs("query",k)?(F=((Q=Ze.trans)==null?void 0:Q.db._options.cache)==="immutable",q=(Q=Ze).requery,Q=Q.signal,le=((ue,ge,he,we)=>{var Ce=G["idb://".concat(ue,"/").concat(ge)];if(!Ce)return[];if(!(ue=Ce.queries[he]))return[null,!1,Ce,null];var be=ue[(we.query?we.query.index.name:null)||""];if(!be)return[null,!1,Ce,null];switch(he){case"query":var Me=be.find(function(He){return He.req.limit===we.limit&&He.req.values===we.values&&il(He.req.query.range,we.query.range)});return Me?[Me,!0,Ce,be]:[be.find(function(He){return("limit"in He.req?He.req.limit:1/0)>=we.limit&&(!we.values||He.req.values)&&jo(He.req.query.range,we.query.range)}),!1,Ce,be];case"count":return Me=be.find(function(He){return il(He.req.query.range,we.query.range)}),[Me,!!Me,Ce,be]}})(v,A,"query",k),fe=le[0],re=le[2],ne=le[3],fe&&le[1]?fe.obsSet=k.obsSet:(le=I.query(k).then(function(ue){var ge=ue.result;if(fe&&(fe.res=ge),F){for(var he=0,we=ge.length;he<we;++he)Object.freeze(ge[he]);Object.freeze(ge)}else ue.result=ee(ge);return ue}).catch(function(ue){return ne&&fe&&qe(ne,fe),Promise.reject(ue)}),fe={obsSet:k.obsSet,promise:le,subscribers:new Set,type:"query",req:k,dirty:!1},ne?ne.push(fe):(ne=[fe],(re=re||(G["idb://".concat(v,"/").concat(A)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[k.query.index.name||""]=ne)),qm(fe,ne,q,Q),fe.promise.then(function(ue){return{result:$a(ue.result,k,re?.optimisticOps,I,fe,F)}})):I.query(k)}})}})}};function sa(d,v){return new Proxy(d,{get:function(A,I,P){return I==="db"?v:Reflect.get(A,I,P)}})}ar.prototype.version=function(d){if(isNaN(d)||d<.1)throw new Xe.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new Xe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var v=this._versions,A=v.filter(function(I){return I._cfg.version===d})[0];return A||(A=new this.Version(d),v.push(A),v.sort(el),A.stores({}),this._state.autoSchema=!1),A},ar.prototype._whenReady=function(d){var v=this;return this.idbdb&&(this._state.openComplete||Ze.letThrough||this._vip)?d():new ct(function(A,I){if(v._state.openComplete)return I(new Xe.DatabaseClosed(v._state.dbOpenError));if(!v._state.isBeingOpened){if(!v._state.autoOpen)return void I(new Xe.DatabaseClosed);v.open().catch(Fe)}v._state.dbReadyPromise.then(A,I)}).then(d)},ar.prototype.use=function(P){var v=P.stack,A=P.create,I=P.level,P=P.name,k=(P&&this.unuse({stack:v,name:P}),this._middlewares[v]||(this._middlewares[v]=[]));return k.push({stack:v,create:A,level:I??10,name:P}),k.sort(function(F,q){return F.level-q.level}),this},ar.prototype.unuse=function(d){var v=d.stack,A=d.name,I=d.create;return v&&this._middlewares[v]&&(this._middlewares[v]=this._middlewares[v].filter(function(P){return I?P.create!==I:!!A&&P.name!==A})),this},ar.prototype.open=function(){var d=this;return Ni(fn,function(){return kr(d)})},ar.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,v=Ge.indexOf(this);if(0<=v&&Ge.splice(v,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new ct(function(A){d.dbReadyResolve=A}),d.openCanceller=new ct(function(A,I){d.cancelOpen=I}))},ar.prototype.close=function(v){var v=(v===void 0?{disableAutoOpen:!0}:v).disableAutoOpen,A=this._state;v?(A.isBeingOpened&&A.cancelOpen(new Xe.DatabaseClosed),this._close(),A.autoOpen=!1,A.dbOpenError=new Xe.DatabaseClosed):(this._close(),A.autoOpen=this._options.autoOpen||A.isBeingOpened,A.openComplete=!1,A.dbOpenError=null)},ar.prototype.delete=function(d){var v=this,A=(d===void 0&&(d={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),I=this._state;return new ct(function(P,k){function F(){v.close(d);var q=v._deps.indexedDB.deleteDatabase(v.name);q.onsuccess=_n(function(){var Q,re,ne;Q=v._deps,re=v.name,Ka(ne=Q.indexedDB)||re===lo||ko(ne,Q.IDBKeyRange).delete(re).catch(Fe),P()}),q.onerror=Tr(k),q.onblocked=v._fireOnBlocked}if(A)throw new Xe.InvalidArgument("Invalid closeOptions argument to db.delete()");I.isBeingOpened?I.dbReadyPromise.then(F):F()})},ar.prototype.backendDB=function(){return this.idbdb},ar.prototype.isOpen=function(){return this.idbdb!==null},ar.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},ar.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ar.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ar.prototype,"tables",{get:function(){var d=this;return l(this._allTables).map(function(v){return d._allTables[v]})},enumerable:!1,configurable:!0}),ar.prototype.transaction=function(){var d=(function(v,A,I){var P=arguments.length;if(P<2)throw new Xe.InvalidArgument("Too few arguments");for(var k=new Array(P-1);--P;)k[P-1]=arguments[P];return I=k.pop(),[v,oe(k),I]}).apply(this,arguments);return this._transaction.apply(this,d)},ar.prototype._transaction=function(d,v,A){var I,P,k=this,F=Ze.trans,q=(F&&F.db===this&&d.indexOf("!")===-1||(F=null),d.indexOf("?")!==-1);d=d.replace("!","").replace("?","");try{if(P=v.map(function(re){if(re=re instanceof k.Table?re.name:re,typeof re!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return re}),d=="r"||d===In)I=In;else{if(d!="rw"&&d!=wi)throw new Xe.InvalidArgument("Invalid transaction mode: "+d);I=wi}if(F){if(F.mode===In&&I===wi){if(!q)throw new Xe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");F=null}F&&P.forEach(function(re){if(F&&F.storeNames.indexOf(re)===-1){if(!q)throw new Xe.SubTransaction("Table "+re+" not included in parent transaction.");F=null}}),q&&F&&!F.active&&(F=null)}}catch(re){return F?F._promise(null,function(ne,le){le(re)}):Mt(re)}var Q=(function re(ne,le,fe,ue,ge){return ct.resolve().then(function(){var be=Ze.transless||Ze,he=ne._createTransaction(le,fe,ne._dbSchema,ue),be=(he.explicit=!0,{trans:he,transless:be});if(ue)he.idbtrans=ue.idbtrans;else try{he.create(),he.idbtrans._explicit=!0,ne._state.PR1398_maxLoop=3}catch(Me){return Me.name===lt.InvalidState&&ne.isOpen()&&0<--ne._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ne.close({disableAutoOpen:!1}),ne.open().then(function(){return re(ne,le,fe,null,ge)})):Mt(Me)}var we,Ce=me(ge),be=(Ce&&gn(),ct.follow(function(){var Me;(we=ge.call(he,he))&&(Ce?(Me=Nr.bind(null,null),we.then(Me,Me)):typeof we.next=="function"&&typeof we.throw=="function"&&(we=bn(we)))},be));return(we&&typeof we.then=="function"?ct.resolve(we).then(function(Me){return he.active?Me:Mt(new Xe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):be.then(function(){return we})).then(function(Me){return ue&&he._resolve(),he._completion.then(function(){return Me})}).catch(function(Me){return he._reject(Me),Mt(Me)})})}).bind(null,this,I,P,F,A);return F?F._promise(I,Q,"lock"):Ze.trans?Ni(Ze.transless,function(){return k._whenReady(Q)}):this._whenReady(Q)},ar.prototype.table=function(d){if(_(this._allTables,d))return this._allTables[d];throw new Xe.InvalidTable("Table ".concat(d," does not exist"))};var ws=ar;function ar(d,v){var A,I,P,k,F,q=this,Q=(this._middlewares={},this.verno=0,ar.dependencies),Q=(this._options=v=r({addons:ar.addons,autoOpen:!0,indexedDB:Q.indexedDB,IDBKeyRange:Q.IDBKeyRange,cache:"cloned"},v),this._deps={indexedDB:v.indexedDB,IDBKeyRange:v.IDBKeyRange},v.addons),re=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Fe,dbReadyPromise:null,cancelOpen:Fe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:v.autoOpen}),ne=(re.dbReadyPromise=new ct(function(le){re.dbReadyResolve=le}),re.openCanceller=new ct(function(le,fe){re.cancelOpen=fe}),this._state=re,this.name=d,this.on=Di(this,"populate","blocked","versionchange","close",{ready:[Mn,Fe]}),this.once=function(le,fe){var ue=function(){for(var ge=[],he=0;he<arguments.length;he++)ge[he]=arguments[he];q.on(le).unsubscribe(ue),fe.apply(q,ge)};return q.on(le,ue)},this.on.ready.subscribe=K(this.on.ready.subscribe,function(le){return function(fe,ue){ar.vip(function(){var ge,he=q._state;he.openComplete?(he.dbOpenError||ct.resolve().then(fe),ue&&le(fe)):he.onReadyBeingFired?(he.onReadyBeingFired.push(fe),ue&&le(fe)):(le(fe),ge=q,ue||le(function we(){ge.on.ready.unsubscribe(fe),ge.on.ready.unsubscribe(we)}))})}}),this.Collection=(A=this,$t(Jo.prototype,function(we,he){this.db=A;var ue=yn,ge=null;if(he)try{ue=he()}catch(be){ge=be}var he=we._ctx,we=he.table,Ce=we.hook.reading.fire;this._ctx={table:we,index:he.index,isPrimKey:!he.index||we.schema.primKey.keyPath&&he.index===we.schema.primKey.name,range:ue,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ge,or:he.or,valueMapper:Ce!==Rt?Ce:null}})),this.Table=(I=this,$t(qi.prototype,function(le,fe,ue){this.db=I,this._tx=ue,this.name=le,this.schema=fe,this.hook=I._allTables[le]?I._allTables[le].hook:Di(null,{creating:[Zt,Fe],reading:[Kt,Rt],updating:[Wt,Fe],deleting:[Jt,Fe]})})),this.Transaction=(P=this,$t(Do.prototype,function(le,fe,ue,ge,he){var we=this;le!=="readonly"&&fe.forEach(function(Ce){Ce=(Ce=ue[Ce])==null?void 0:Ce.yProps,Ce&&(fe=fe.concat(Ce.map(function(be){return be.updatesTable})))}),this.db=P,this.mode=le,this.storeNames=fe,this.schema=ue,this.chromeTransactionDurability=ge,this.idbtrans=null,this.on=Di(this,"complete","error","abort"),this.parent=he||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ct(function(Ce,be){we._resolve=Ce,we._reject=be}),this._completion.then(function(){we.active=!1,we.on.complete.fire()},function(Ce){var be=we.active;return we.active=!1,we.on.error.fire(Ce),we.parent?we.parent._reject(Ce):be&&we.idbtrans&&we.idbtrans.abort(),Mt(Ce)})})),this.Version=(k=this,$t(Dr.prototype,function(le){this.db=k,this._cfg={version:le,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(F=this,$t(Jn.prototype,function(le,fe,ue){if(this.db=F,this._ctx={table:le,index:fe===":id"?null:fe,or:ue},this._cmp=this._ascending=Qt,this._descending=function(ge,he){return Qt(he,ge)},this._max=function(ge,he){return 0<Qt(ge,he)?ge:he},this._min=function(ge,he){return Qt(ge,he)<0?ge:he},this._IDBKeyRange=F._deps.IDBKeyRange,!this._IDBKeyRange)throw new Xe.MissingAPI})),this.on("versionchange",function(le){0<le.newVersion?console.warn("Another connection wants to upgrade database '".concat(q.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(q.name,"'. Closing db now to resume the delete request.")),q.close({disableAutoOpen:!1})}),this.on("blocked",function(le){!le.newVersion||le.newVersion<le.oldVersion?console.warn("Dexie.delete('".concat(q.name,"') was blocked")):console.warn("Upgrade '".concat(q.name,"' blocked by other connection holding version ").concat(le.oldVersion/10))}),this._maxKey=Aa(v.IDBKeyRange),this._createTransaction=function(le,fe,ue,ge){return new q.Transaction(le,fe,ue,q._options.chromeTransactionDurability,ge)},this._fireOnBlocked=function(le){q.on("blocked").fire(le),Ge.filter(function(fe){return fe.name===q.name&&fe!==q&&!fe._state.vcFired}).map(function(fe){return fe.on("versionchange").fire(le)})},this.use(bs),this.use(zl),this.use(qu),this.use(Ia),this.use(Ca),new Proxy(this,{get:function(le,fe,ue){var ge;return fe==="_vip"||(fe==="table"?function(he){return sa(q.table(he),ne)}:(ge=Reflect.get(le,fe,ue))instanceof qi?sa(ge,ne):fe==="tables"?ge.map(function(he){return sa(he,ne)}):fe==="_createTransaction"?function(){return sa(ge.apply(this,arguments),ne)}:ge)}}));this.vip=ne,Q.forEach(function(le){return le(q)})}var _s,on=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ul=(Y.prototype.subscribe=function(d,v,A){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:v,complete:A})},Y.prototype[on]=function(){return this},Y);function Y(d){this._subscribe=d}try{_s={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{_s={indexedDB:null,IDBKeyRange:null}}function o(d){var v,A=!1,I=new Ul(function(P){var k=me(d),F,q=!1,Q={},re={},ne={get closed(){return q},unsubscribe:function(){q||(q=!0,F&&F.abort(),le&&xn.storagemutated.unsubscribe(ue))}},le=(P.start&&P.start(ne),!1),fe=function(){return Qn(ge)},ue=function(he){S(Q,he),B(re,Q)&&fe()},ge=function(){var he,we,Ce;!q&&_s.indexedDB&&(Q={},he={},F&&F.abort(),F=new AbortController,Ce=(be=>{var Me=Hr();try{k&&gn();var He=Vn(d,be);return He=k?He.finally(Nr):He}finally{Me&&Ui()}})(we={subscr:he,signal:F.signal,requery:fe,querier:d,trans:null}),Promise.resolve(Ce).then(function(be){A=!0,v=be,q||we.signal.aborted||(Q={},(Me=>{for(var He in Me)if(_(Me,He))return;return 1})(re=he)||le||(xn(za,ue),le=!0),Qn(function(){return!q&&P.next&&P.next(be)}))},function(be){A=!1,["DatabaseClosedError","AbortError"].includes(be?.name)||q||Qn(function(){q||P.error&&P.error(be)})}))};return setTimeout(fe,0),ne});return I.hasValue=function(){return A},I.getValue=function(){return v},I}var c=ws;function h(d){var v=x;try{x=!0,xn.storagemutated.fire(d),at(d,!0)}finally{x=v}}T(c,r(r({},Se),{delete:function(d){return new c(d,{addons:[]}).delete()},exists:function(d){return new c(d,{addons:[]}).open().then(function(v){return v.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return v=c.dependencies,A=v.indexedDB,v=v.IDBKeyRange,(Ka(A)?Promise.resolve(A.databases()).then(function(I){return I.map(function(P){return P.name}).filter(function(P){return P!==lo})}):ko(A,v).toCollection().primaryKeys()).then(d)}catch{return Mt(new Xe.MissingAPI)}var v,A},defineClass:function(){return function(d){m(this,d)}},ignoreTransaction:function(d){return Ze.trans?Ni(Ze.transless,d):d()},vip:nl,async:function(d){return function(){try{var v=bn(d.apply(this,arguments));return v&&typeof v.then=="function"?v:ct.resolve(v)}catch(A){return Mt(A)}}},spawn:function(d,v,A){try{var I=bn(d.apply(A,v||[]));return I&&typeof I.then=="function"?I:ct.resolve(I)}catch(P){return Mt(P)}},currentTransaction:{get:function(){return Ze.trans||null}},waitFor:function(d,v){return d=ct.resolve(typeof d=="function"?c.ignoreTransaction(d):d).timeout(v||6e4),Ze.trans?Ze.trans.waitFor(d):d},Promise:ct,debug:{get:function(){return mt},set:function(d){Po(d)}},derive:M,extend:m,props:T,override:K,Events:Di,on:xn,liveQuery:o,extendObservabilitySet:S,getByKeyPath:J,setByKeyPath:V,delByKeyPath:function(d,v){typeof v=="string"?V(d,v,void 0):"length"in v&&[].map.call(v,function(A){V(d,A,void 0)})},shallowClone:W,deepClone:ee,getObjectDiff:Wa,cmp:Qt,asap:se,minKey:-1/0,addons:[],connections:Ge,errnames:lt,dependencies:_s,cache:G,semVer:"4.3.0",version:"4.3.0".split(".").map(function(d){return parseInt(d)}).reduce(function(d,v,A){return d+v/Math.pow(10,2*A)})})),c.maxKey=Aa(c.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(xn(za,function(d){x||(d=new CustomEvent(Lt,{detail:d}),x=!0,dispatchEvent(d),x=!1)}),addEventListener(Lt,function(d){d=d.detail,x||h(d)}));var y,x=!1,E=function(){};return typeof BroadcastChannel<"u"&&((E=function(){(y=new BroadcastChannel(Lt)).onmessage=function(d){return d.data&&h(d.data)}})(),typeof y.unref=="function"&&y.unref(),xn(za,function(d){x||y.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!ws.disableBfCache&&d.persisted){mt&&console.debug("Dexie: handling persisted pagehide"),y?.close();for(var v=0,A=Ge;v<A.length;v++)A[v].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!ws.disableBfCache&&d.persisted&&(mt&&console.debug("Dexie: handling persisted pageshow"),E(),h({all:new Br(-1/0,[[]])}))})),ct.rejectionMapper=function(d,v){return!d||d instanceof ze||d instanceof TypeError||d instanceof SyntaxError||!d.name||!Et[d.name]?d:(v=new Et[d.name](v||d.message,d),"stack"in d&&j(v,"stack",{get:function(){return this.inner.stack}}),v)},Po(mt),r(ws,Object.freeze({__proto__:null,Dexie:ws,Entity:rn,PropModification:ai,RangeSet:Br,add:function(d){return new ai({add:d})},cmp:Qt,default:ws,liveQuery:o,mergeRanges:aa,rangesOverlap:dn,remove:function(d){return new ai({remove:d})},replacePrefix:function(d,v){return new ai({replacePrefix:[d,v]})}}),{default:ws}),ws})})(Oy)),Oy.exports}var Ite=Tte();const bA=Rl(Ite),D4=Symbol.for("Dexie"),dv=globalThis[D4]||(globalThis[D4]=bA);if(bA.semVer!==dv.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${bA.semVer} and ${dv.semVer}`);const{liveQuery:uEe,mergeRanges:cEe,rangesOverlap:fEe,RangeSet:dEe,cmp:hEe,Entity:mEe,PropModification:gEe,replacePrefix:pEe,add:yEe,remove:vEe,DexieYProvider:xEe}=dv;function hv(t){return t?t instanceof Date?t.toISOString():t:null}function W1(t){return t?new Date(t):new Date}async function wA(t,e){try{const n=to(ma,"users",t,"profile","data"),{id:r,anthropicApiKey:i,anthropicApiUrl:a,...l}=e;await Nm(n,{...l,createdAt:hv(e.createdAt),updatedAt:hv(e.updatedAt||new Date)})}catch(n){console.warn("[Sync] Push profile failed:",n)}}async function SL(t,e){try{const n=await ot.dailyLogs.where("date").equals(e).first();if(!n)return;const r=n.id?await ot.mealEntries.where("dailyLogId").equals(n.id).toArray():[],i=to(ma,"users",t,"days",e);await Nm(i,{date:n.date,totalPointsUsed:n.totalPointsUsed,weeklyPointsUsed:n.weeklyPointsUsed,waterMl:n.waterMl??0,meals:r.map(a=>({foodItem:{name:a.foodItem.name,brand:a.foodItem.brand||"",barcode:a.foodItem.barcode||"",nutrition:a.foodItem.nutrition,pointsPer100g:a.foodItem.pointsPer100g,servingSizeG:a.foodItem.servingSizeG,unit:a.foodItem.unit||"g",isZeroPoint:a.foodItem.isZeroPoint,source:a.foodItem.source},mealType:a.mealType,quantityG:a.quantityG,quantity:a.quantity??1,points:a.points,loggedAt:hv(a.loggedAt)})),updatedAt:new Date().toISOString()})}catch(n){console.warn("[Sync] Push day failed:",n)}}async function TL(t,e){try{const n=to(ma,"users",t,"weight",e.date);await Nm(n,{date:e.date,weightKg:e.weightKg,note:e.note||"",updatedAt:new Date().toISOString()})}catch(n){console.warn("[Sync] Push weight failed:",n)}}async function IL(t,e){try{if(e.source!=="user"||!e.id)return;const n=to(ma,"users",t,"foods",String(e.id));await Nm(n,{name:e.name,brand:e.brand||"",barcode:e.barcode||"",nutrition:e.nutrition,pointsPer100g:e.pointsPer100g,servingSizeG:e.servingSizeG,unit:e.unit||"g",isZeroPoint:e.isZeroPoint,isFavorite:e.isFavorite||!1,source:e.source,createdAt:hv(e.createdAt),updatedAt:new Date().toISOString()})}catch(n){console.warn("[Sync] Push food failed:",n)}}async function Cte(t){try{let e=!1;const n=to(ma,"users",t,"profile","data"),r=await Gx(n);if(r.exists()){const f=r.data(),p=(await ot.userProfiles.toArray())[0],b=f.updatedAt?new Date(f.updatedAt).getTime():0,_=p?.updatedAt?new Date(p.updatedAt).getTime():0;if(b>_){const T={name:f.name,gender:f.gender,dateOfBirth:f.dateOfBirth,heightCm:f.heightCm,currentWeightKg:f.currentWeightKg,goalWeightKg:f.goalWeightKg,activityLevel:f.activityLevel,goal:f.goal,dailyPointsBudget:f.dailyPointsBudget,weeklyPointsBudget:f.weeklyPointsBudget,waterGoalMl:f.waterGoalMl,onboardingComplete:f.onboardingComplete,createdAt:W1(f.createdAt),updatedAt:W1(f.updatedAt)};p?.id?await ot.userProfiles.update(p.id,T):await ot.userProfiles.add(T),e=!0}}const i=await $f(Wf(ma,"users",t,"days"));for(const f of i.docs){const m=f.data(),p=f.id,b=await ot.dailyLogs.where("date").equals(p).first(),_=m.updatedAt?new Date(m.updatedAt).getTime():0,T=!b||_>b._syncedAt||0;if(T&&m.meals?.length>0){let N;if(b?.id){await ot.dailyLogs.update(b.id,{totalPointsUsed:m.totalPointsUsed,weeklyPointsUsed:m.weeklyPointsUsed,waterMl:m.waterMl??0}),N=b.id;const j=await ot.mealEntries.where("dailyLogId").equals(N).toArray();for(const M of j)M.id&&await ot.mealEntries.delete(M.id)}else N=await ot.dailyLogs.add({date:p,totalPointsUsed:m.totalPointsUsed,weeklyPointsUsed:m.weeklyPointsUsed,waterMl:m.waterMl??0});for(const j of m.meals)await ot.mealEntries.add({dailyLogId:N,foodItem:{name:j.foodItem.name,brand:j.foodItem.brand,barcode:j.foodItem.barcode,nutrition:j.foodItem.nutrition,pointsPer100g:j.foodItem.pointsPer100g,servingSizeG:j.foodItem.servingSizeG,unit:j.foodItem.unit||"g",isZeroPoint:j.foodItem.isZeroPoint,source:j.foodItem.source,createdAt:new Date},mealType:j.mealType,quantityG:j.quantityG,quantity:j.quantity??1,points:j.points,loggedAt:W1(j.loggedAt)});e=!0}else T&&b&&!m.meals?.length&&await ot.dailyLogs.update(b.id,{waterMl:m.waterMl??b.waterMl??0})}const a=await $f(Wf(ma,"users",t,"weight"));for(const f of a.docs){const m=f.data(),p=f.id;await ot.weightEntries.where("date").equals(p).first()||(await ot.weightEntries.add({date:p,weightKg:m.weightKg,note:m.note||""}),e=!0)}const l=await $f(Wf(ma,"users",t,"foods"));for(const f of l.docs){const m=f.data();await ot.foodItems.where("name").equalsIgnoreCase(m.name).first()||(await ot.foodItems.add({name:m.name,brand:m.brand,barcode:m.barcode,nutrition:m.nutrition,pointsPer100g:m.pointsPer100g,servingSizeG:m.servingSizeG,unit:m.unit||"g",isZeroPoint:m.isZeroPoint,isFavorite:m.isFavorite||!1,source:"user",createdAt:W1(m.createdAt)}),e=!0)}return console.log(`[Sync] Pull complete. Changes: ${e}`),e}catch(e){return console.warn("[Sync] Pull failed:",e),!1}}async function CL(t){try{const e=await ot.userProfiles.toArray();e[0]&&await wA(t,e[0]);const n=await ot.dailyLogs.toArray(),r=await ot.weightEntries.toArray(),i=await ot.foodItems.where("source").equals("user").toArray(),a=async(l,f)=>{for(let m=0;m<l.length;m+=5)await Promise.all(l.slice(m,m+5).map(f))};await Promise.all([a(n,l=>SL(t,l.date)),a(r,l=>TL(t,l)),a(i,l=>IL(t,l))]),console.log("[Sync] Push all complete.")}catch(e){console.warn("[Sync] Push all failed:",e)}}function OL(){return bl.currentUser?.uid??null}function m0(t){const e=OL();e&&SL(e,t).catch(()=>{})}function Ote(t){const e=OL();e&&IL(e,t).catch(()=>{})}class Nte extends dv{userProfiles;foodItems;mealEntries;dailyLogs;weightEntries;constructor(){super("BodyBalanceDB"),this.version(1).stores({userProfiles:"++id, name",foodItems:"++id, name, barcode, source",mealEntries:"++id, dailyLogId, mealType, loggedAt",dailyLogs:"++id, &date",weightEntries:"++id, &date"}),this.version(2).stores({foodItems:"++id, name, barcode, source, isFavorite"})}}const ot=new Nte;async function NL(t){let e=await ot.dailyLogs.where("date").equals(t).first();if(!e){const n=await ot.dailyLogs.add({date:t,totalPointsUsed:0,weeklyPointsUsed:0});e=await ot.dailyLogs.get(n)}return e}async function PL(t){const e=await ot.dailyLogs.where("date").equals(t).first();return e?.id?ot.mealEntries.where("dailyLogId").equals(e.id).toArray():[]}async function RL(t,e){const n=await NL(t);await ot.mealEntries.add({...e,dailyLogId:n.id,loggedAt:new Date});const i=(await ot.mealEntries.where("dailyLogId").equals(n.id).toArray()).reduce((a,l)=>a+l.points,0);await ot.dailyLogs.update(n.id,{totalPointsUsed:i}),m0(t)}async function Pte(t,e){const n=await ot.mealEntries.get(t);if(n&&(await ot.mealEntries.update(t,e),n.dailyLogId)){const i=(await ot.mealEntries.where("dailyLogId").equals(n.dailyLogId).toArray()).reduce((l,f)=>l+(f.id===t?e.points:f.points),0);await ot.dailyLogs.update(n.dailyLogId,{totalPointsUsed:i});const a=await ot.dailyLogs.get(n.dailyLogId);a&&m0(a.date)}}async function Rte(t){const e=await ot.mealEntries.get(t);if(e&&(await ot.mealEntries.delete(t),e.dailyLogId)){const r=(await ot.mealEntries.where("dailyLogId").equals(e.dailyLogId).toArray()).reduce((a,l)=>a+l.points,0);await ot.dailyLogs.update(e.dailyLogId,{totalPointsUsed:r});const i=await ot.dailyLogs.get(e.dailyLogId);i&&m0(i.date)}}async function _A(t=15){const e=await ot.mealEntries.orderBy("loggedAt").reverse().toArray(),n=new Set,r=[];for(const i of e){const a=i.foodItem.name.toLowerCase();if(!n.has(a)){n.add(a);const l=await ot.foodItems.where("name").equalsIgnoreCase(i.foodItem.name).first();if(r.push({...i.foodItem,isFavorite:l?.isFavorite??!1,id:l?.id??i.foodItem.id}),r.length>=t)break}}return r}async function EA(){return ot.foodItems.filter(t=>!!t.isFavorite).toArray()}async function Dte(t){let e;if(t.id&&(e=await ot.foodItems.get(t.id)),e||(e=await ot.foodItems.where("name").equalsIgnoreCase(t.name).first()),e?.id){const n=!e.isFavorite;return await ot.foodItems.update(e.id,{isFavorite:n}),n}else return await ot.foodItems.add({...t,id:void 0,isFavorite:!0,createdAt:new Date}),!0}async function sI(t){const e=await ot.foodItems.add({...t,createdAt:new Date}),n=await ot.foodItems.get(e);return Ote(n),n}async function kte(t,e){const n=new Date(t),r=n.getDay(),i=r===0?-6:1-r,a=new Date(n);a.setDate(n.getDate()+i);let l=0;for(let f=0;f<7;f++){const m=new Date(a);m.setDate(a.getDate()+f);const p=m.toISOString().split("T")[0];if(p>t)break;const b=await ot.dailyLogs.where("date").equals(p).first();b&&b.totalPointsUsed>e&&(l+=b.totalPointsUsed-e)}return l}async function Mte(t){return(await ot.dailyLogs.where("date").equals(t).first())?.waterMl??0}async function jte(t,e){const n=await NL(t),r=(n.waterMl??0)+e;return await ot.dailyLogs.update(n.id,{waterMl:r}),m0(t),r}async function Lte(t){const e=await ot.dailyLogs.where("date").equals(t).first();e?.id&&(await ot.dailyLogs.update(e.id,{waterMl:0}),m0(t))}async function Bte(t,e){const n=await PL(t);if(n.length===0)return 0;for(const r of n)await RL(e,{foodItem:r.foodItem,mealType:r.mealType,quantityG:r.quantityG,quantity:r.quantity,points:r.points});return n.length}async function Fte(t,e,n,r=0){const i=new Date,a=i.getDay(),l=a===0?-6:1-a,f=new Date(i);f.setDate(i.getDate()+l-r*7);const m=new Date(f);m.setDate(f.getDate()+6);const p=i.toISOString().split("T")[0],b=m.toISOString().split("T")[0],_=b<p?b:p;let T=0,N=0,j=0,M=0,L=0,z=null,$=1/0,K=0;const X=["zo","ma","di","wo","do","vr","za"];for(let Z=0;Z<7;Z++){const ee=new Date(f);ee.setDate(f.getDate()+Z);const xe=ee.toISOString().split("T")[0];if(xe>_)break;const de=await ot.dailyLogs.where("date").equals(xe).first();if(de){const ye=de.totalPointsUsed;T+=ye,N++,ye<=t&&j++,ye>t&&(K+=ye-t),ye<$&&($=ye,z=X[ee.getDay()]),(de.waterMl??0)>0&&L++,(de.waterMl??0)>=n&&M++}}if(N===0)return null;const se=f.toISOString().split("T")[0],J=await ot.weightEntries.where("date").aboveOrEqual(se).and(Z=>Z.date<=_).first(),V=await ot.weightEntries.where("date").belowOrEqual(_).and(Z=>Z.date>=se).reverse().first(),W=J&&V&&J.date!==V.date?V.weightKg-J.weightKg:null,H=["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"];return{weekLabel:`Week ${Vte(f)}  ${f.getDate()}-${m.getDate()} ${H[m.getMonth()]}`,avgPoints:Math.round(T/N),dailyBudget:t,daysWithinBudget:j,totalDays:N,waterDaysOnTarget:M,waterTotalDays:L,weightChange:W,bestDay:z,bestDayPoints:$===1/0?0:$,weeklyPointsUsed:K,weeklyPointsBudget:e}}function Vte(t){const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const n=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-n.getTime())/864e5+1)/7)}async function zte(t){let e=0;const n=new Date;for(let r=1;r<=365;r++){const i=new Date(n);i.setDate(n.getDate()-r);const a=i.toISOString().split("T")[0],l=await ot.dailyLogs.where("date").equals(a).first();if(!l||l.totalPointsUsed===0||l.totalPointsUsed>t)break;e++}return e}const cd=aI((t,e)=>({profile:null,isLoading:!0,loadProfile:async()=>{t({isLoading:!0});const r=(await ot.userProfiles.toArray())[0]||null;t({profile:r,isLoading:!1})},saveProfile:async n=>{const r=e().profile,i=new Date;if(r?.id){await ot.userProfiles.update(r.id,{...n,updatedAt:i});const a={...r,...n,updatedAt:i};t({profile:a});const l=bl.currentUser?.uid;l&&wA(l,a).catch(()=>{})}else{const a=await ot.userProfiles.add({...n,createdAt:i,updatedAt:i}),l=await ot.userProfiles.get(a);t({profile:l||null});const f=bl.currentUser?.uid;f&&l&&wA(f,l).catch(()=>{})}},updateWeight:async n=>{const r=e().profile;r?.id&&(await ot.userProfiles.update(r.id,{currentWeightKg:n,updatedAt:new Date}),t({profile:{...r,currentWeightKg:n,updatedAt:new Date}}))}})),am=aI(t=>(see(bl,e=>{t({user:e,isAuthLoading:!1})}),{user:null,isAuthLoading:!0,error:null,login:async(e,n)=>{t({error:null});try{await ree(bl,e,n)}catch(r){t({error:{"auth/invalid-credential":"Onjuist e-mailadres of wachtwoord","auth/invalid-email":"Ongeldig e-mailadres","auth/user-disabled":"Dit account is uitgeschakeld","auth/user-not-found":"Geen account gevonden met dit e-mailadres","auth/wrong-password":"Onjuist wachtwoord","auth/too-many-requests":"Te veel pogingen. Probeer het later opnieuw","auth/network-request-failed":"Geen internetverbinding"}[r.code]||"Er ging iets mis. Probeer het opnieuw."})}},register:async(e,n)=>{t({error:null});try{await nee(bl,e,n)}catch(r){t({error:{"auth/email-already-in-use":"Er bestaat al een account met dit e-mailadres","auth/invalid-email":"Ongeldig e-mailadres","auth/weak-password":"Wachtwoord moet minimaal 6 tekens zijn","auth/network-request-failed":"Geen internetverbinding"}[r.code]||"Er ging iets mis. Probeer het opnieuw."})}},logout:async()=>{await oee(bl)},clearError:()=>t({error:null})}));const DL=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();const Ute=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const qte=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase());const k4=t=>{const e=qte(t);return e.charAt(0).toUpperCase()+e.slice(1)};var Gte={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Hte=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const Kte=D.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...f},m)=>D.createElement("svg",{ref:m,...Gte,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:DL("lucide",i),...!a&&!Hte(f)&&{"aria-hidden":"true"},...f},[...l.map(([p,b])=>D.createElement(p,b)),...Array.isArray(a)?a:[a]]));const kt=(t,e)=>{const n=D.forwardRef(({className:r,...i},a)=>D.createElement(Kte,{ref:a,iconNode:e,className:DL(`lucide-${Ute(k4(t))}`,`lucide-${t}`,r),...i}));return n.displayName=k4(t),n};const Wte=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],$te=kt("arrow-left",Wte);const Yte=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Xte=kt("ban",Yte);const Qte=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],Zte=kt("bell-off",Qte);const Jte=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ene=kt("bell",Jte);const tne=[["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M15 10H9",key:"o6yqo3"}],["path",{d:"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z",key:"oz39mx"}]],nne=kt("bookmark-plus",tne);const rne=[["path",{d:"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z",key:"oz39mx"}]],ine=kt("bookmark",rne);const ane=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Ny=kt("bot",ane);const sne=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],one=kt("camera",sne);const lne=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],une=kt("chart-column",lne);const cne=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],kL=kt("check",cne);const fne=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],dne=kt("chef-hat",fne);const hne=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ML=kt("chevron-down",hne);const mne=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],M4=kt("chevron-left",mne);const gne=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],mv=kt("chevron-right",gne);const pne=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],yne=kt("chevron-up",pne);const vne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],gv=kt("circle-alert",vne);const xne=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],bne=kt("circle-check-big",xne);const wne=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],oI=kt("clock",wne);const _ne=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Ene=kt("coffee",_ne);const Ane=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],jL=kt("copy",Ane);const Sne=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Tne=kt("download",Sne);const Ine=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],up=kt("droplets",Ine);const Cne=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],One=kt("eye-off",Cne);const Nne=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Pne=kt("eye",Nne);const Rne=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Dne=kt("flame",Rne);const kne=[["path",{d:"M5.116 4.104A1 1 0 0 1 6.11 3h11.78a1 1 0 0 1 .994 1.105L17.19 20.21A2 2 0 0 1 15.2 22H8.8a2 2 0 0 1-2-1.79z",key:"p55z4y"}],["path",{d:"M6 12a5 5 0 0 1 6 0 5 5 0 0 0 6 0",key:"mjntcy"}]],Mne=kt("glass-water",kne);const jne=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],$x=kt("heart",jne);const Lne=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Bne=kt("house",Lne);const Fne=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],j4=kt("image-plus",Fne);const Vne=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],zne=kt("key-round",Vne);const Une=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],qne=kt("key",Une);const Gne=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],Hne=kt("leaf",Gne);const Kne=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],jc=kt("loader-circle",Kne);const Wne=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],L4=kt("lock",Wne);const $ne=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LL=kt("log-out",$ne);const Yne=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Xne=kt("mail",Yne);const Qne=[["path",{d:"M5 12h14",key:"1ays0h"}]],BL=kt("minus",Qne);const Zne=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Jne=kt("monitor",Zne);const ere=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],tre=kt("moon",ere);const nre=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ff=kt("plus",nre);const rre=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ire=kt("refresh-cw",rre);const are=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],sre=kt("rotate-ccw",are);const ore=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],lI=kt("scale",ore);const lre=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]],pv=kt("scan-barcode",lre);const ure=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Cp=kt("search",ure);const cre=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],fre=kt("send",cre);const dre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],hre=kt("shield-alert",dre);const mre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],gre=kt("shield",mre);const pre=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],yre=kt("sparkles",pre);const vre=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],xre=kt("sun",vre);const bre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],FL=kt("target",bre);const wre=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],_re=kt("ticket",wre);const Ere=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Are=kt("trash-2",Ere);const Sre=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],VL=kt("trending-down",Sre);const Tre=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ire=kt("trending-up",Tre);const Cre=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Ore=kt("trophy",Cre);const Nre=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Pre=kt("upload",Nre);const Rre=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],zL=kt("user",Rre);const Dre=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],kre=kt("users",Dre);const Mre=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],jre=kt("wifi-off",Mre);const Lre=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],sm=kt("x",Lre),Bre=[{path:"/",icon:Bne,label:"Home"},{path:"/search",icon:Cp,label:"Zoeken"},{path:"/scan",icon:pv,label:"Scan"},{path:"/statistics",icon:une,label:"Stats"},{path:"/profile",icon:zL,label:"Profiel"}];function Fre(){const t=kl(),e=Zc();return O.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-xl border-t border-ios-separator z-50",style:{paddingBottom:"var(--safe-area-bottom)"},children:O.jsx("div",{className:"flex justify-around items-center h-[50px] max-w-lg mx-auto",children:Bre.map(({path:n,icon:r,label:i})=>{const a=t.pathname===n;return O.jsxs("button",{onClick:()=>e(n),className:`flex flex-col items-center justify-center gap-0.5 w-full h-full border-none bg-transparent cursor-pointer transition-colors ${a?"text-primary":"text-ios-secondary"}`,children:[O.jsx(r,{size:24,strokeWidth:a?2.2:1.5}),O.jsx("span",{className:"text-[10px] font-medium",children:i})]},n)})})})}const Vre={primary:"bg-primary text-white active:bg-primary-dark",secondary:"bg-ios-bg text-primary active:bg-gray-200",destructive:"bg-ios-destructive text-white active:bg-red-700",ghost:"bg-transparent text-primary active:bg-gray-100"},zre={sm:"px-4 py-2 text-[14px]",md:"px-5 py-3 text-[17px]",lg:"px-6 py-4 text-[17px]"};function Js({variant:t="primary",size:e="md",children:n,fullWidth:r=!1,className:i="",disabled:a,...l}){return O.jsx("button",{className:`
        rounded-xl font-semibold border-none cursor-pointer
        transition-all duration-150 select-none
        ${Vre[t]}
        ${zre[e]}
        ${r?"w-full":""}
        ${a?"opacity-40 pointer-events-none":""}
        ${i}
      `,disabled:a,...l,children:n})}function Ure(){const{login:t,register:e,error:n,clearError:r,isAuthLoading:i}=am(),[a,l]=D.useState("login"),[f,m]=D.useState(""),[p,b]=D.useState(""),[_,T]=D.useState(""),[N,j]=D.useState(""),[M,L]=D.useState(!1),[z,$]=D.useState(!1),[K,X]=D.useState(""),se=W=>{l(W),r(),X(""),b(""),T(""),j("")},J=async W=>{if(W.preventDefault(),X(""),!f.trim()||!p){X("Vul je e-mailadres en wachtwoord in");return}if(a==="register"){if(p.length<6){X("Wachtwoord moet minimaal 6 tekens zijn");return}if(p!==_){X("Wachtwoorden komen niet overeen");return}if(!N.trim()){X("Vul een invite code in");return}}if($(!0),a==="login")await t(f.trim(),p);else try{const H=to(ma,"inviteCodes",N.trim().toUpperCase()),oe=await Gx(H);if(!oe.exists()){X("Ongeldige invite code"),$(!1);return}if(oe.data().usedBy){X("Deze invite code is al gebruikt"),$(!1);return}await e(f.trim(),p);const{currentUser:ae}=await NS(()=>Promise.resolve().then(()=>wte),[]).then(Z=>Z.auth);ae&&WT(H,{usedBy:ae.uid,usedEmail:f.trim(),usedAt:new Date().toISOString()}).catch(()=>{})}catch{X("Kon invite code niet controleren. Probeer opnieuw."),$(!1);return}$(!1)},V=K||n;return O.jsxs("div",{className:"flex flex-col h-full bg-ios-bg",style:{paddingTop:"var(--safe-area-top)"},children:[O.jsxs("div",{className:"flex flex-col items-center pt-16 pb-8 px-8",children:[O.jsx("div",{className:"w-20 h-20 rounded-[28px] bg-primary flex items-center justify-center mb-6 shadow-lg",children:O.jsx(lI,{size:40,color:"white"})}),O.jsx("h1",{className:"text-[34px] font-bold text-ios-text mb-1",children:"BodyBalance"}),O.jsx("p",{className:"text-[15px] text-ios-secondary text-center",children:a==="login"?"Log in om verder te gaan":"Maak een account aan"})]}),O.jsxs("form",{onSubmit:J,className:"flex-1 px-6 flex flex-col gap-4",children:[O.jsxs("div",{className:"relative",children:[O.jsx(Xne,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:"email",value:f,onChange:W=>m(W.target.value),placeholder:"E-mailadres",autoComplete:"email",className:"w-full bg-white rounded-xl py-3.5 pl-12 pr-4 text-[17px] text-ios-text border border-ios-separator placeholder:text-ios-secondary/50 outline-none focus:border-primary focus:ring-1 focus:ring-primary/20 transition-colors"})]}),O.jsxs("div",{className:"relative",children:[O.jsx(L4,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:M?"text":"password",value:p,onChange:W=>b(W.target.value),placeholder:"Wachtwoord",autoComplete:a==="login"?"current-password":"new-password",className:"w-full bg-white rounded-xl py-3.5 pl-12 pr-12 text-[17px] text-ios-text border border-ios-separator placeholder:text-ios-secondary/50 outline-none focus:border-primary focus:ring-1 focus:ring-primary/20 transition-colors"}),O.jsx("button",{type:"button",onClick:()=>L(!M),className:"absolute right-4 top-1/2 -translate-y-1/2 bg-transparent border-none cursor-pointer p-0",children:M?O.jsx(One,{size:18,className:"text-ios-secondary"}):O.jsx(Pne,{size:18,className:"text-ios-secondary"})})]}),a==="register"&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"relative",children:[O.jsx(L4,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:M?"text":"password",value:_,onChange:W=>T(W.target.value),placeholder:"Wachtwoord bevestigen",autoComplete:"new-password",className:"w-full bg-white rounded-xl py-3.5 pl-12 pr-4 text-[17px] text-ios-text border border-ios-separator placeholder:text-ios-secondary/50 outline-none focus:border-primary focus:ring-1 focus:ring-primary/20 transition-colors"})]}),O.jsxs("div",{className:"relative",children:[O.jsx(_re,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:"text",value:N,onChange:W=>j(W.target.value.toUpperCase()),placeholder:"Invite code",autoComplete:"off",className:"w-full bg-white rounded-xl py-3.5 pl-12 pr-4 text-[17px] text-ios-text border border-ios-separator placeholder:text-ios-secondary/50 outline-none focus:border-primary focus:ring-1 focus:ring-primary/20 transition-colors font-mono tracking-wider"})]})]}),V&&O.jsx("div",{className:"bg-ios-destructive/10 text-ios-destructive text-[14px] rounded-xl px-4 py-3 text-center font-medium",children:V}),O.jsx(Js,{type:"submit",fullWidth:!0,size:"lg",disabled:z||i,children:z?a==="login"?"Inloggen...":"Account aanmaken...":a==="login"?"Inloggen":"Account aanmaken"}),O.jsx("div",{className:"text-center pt-2",children:a==="login"?O.jsxs("p",{className:"text-[15px] text-ios-secondary",children:["Nog geen account?"," ",O.jsx("button",{type:"button",onClick:()=>se("register"),className:"text-primary font-semibold bg-transparent border-none cursor-pointer p-0",children:"Registreren"})]}):O.jsxs("p",{className:"text-[15px] text-ios-secondary",children:["Al een account?"," ",O.jsx("button",{type:"button",onClick:()=>se("login"),className:"text-primary font-semibold bg-transparent border-none cursor-pointer p-0",children:"Inloggen"})]})})]})]})}const qre={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9};function Gre(t,e,n,r){return r==="male"?10*t+6.25*e-5*n+5:10*t+6.25*e-5*n-161}function Hre(t){const e=new Date(t),n=new Date;let r=n.getFullYear()-e.getFullYear();const i=n.getMonth()-e.getMonth();return(i<0||i===0&&n.getDate()<e.getDate())&&r--,r}function Kre(t,e){return t*qre[e]}function UL(t,e,n,r,i,a){const l=Hre(n),f=Gre(t,e,l,r),m=Kre(f,i);let p=m;a==="lose"&&(p=m-500),p=Math.max(p,r==="male"?1500:1200);const _=Math.max(23,Math.round(p/30)),T=Math.round(_*1.4);return{dailyPoints:_,weeklyPoints:T,bmr:Math.round(f),tdee:Math.round(m),targetCalories:Math.round(p)}}function qL({label:t,children:e}){return O.jsxs("div",{className:"flex flex-col gap-1.5",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide px-1",children:t}),e]})}function Tc({label:t,suffix:e,...n}){return O.jsx(qL,{label:t,children:O.jsxs("div",{className:"relative",children:[O.jsx("input",{...n,className:"bg-white rounded-2xl border border-ios-separator px-4 py-3.5 text-[17px] w-full outline-none focus:border-primary focus:ring-2 focus:ring-primary/20"}),e&&O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:e})]})})}function Dh({label:t,options:e,...n}){return O.jsx(qL,{label:t,children:O.jsxs("div",{className:"relative",children:[O.jsx("select",{...n,className:"bg-white rounded-2xl border border-ios-separator px-4 py-3.5 text-[17px] w-full outline-none appearance-none focus:border-primary focus:ring-2 focus:ring-primary/20",children:e.map(r=>O.jsx("option",{value:r.value,children:r.label},r.value))}),O.jsx("svg",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary pointer-events-none",width:"12",height:"12",viewBox:"0 0 12 12",children:O.jsx("path",{fill:"currentColor",d:"M6 8.825L1.175 4 2.238 2.938 6 6.7 9.763 2.937 10.825 4z"})})]})})}const AA={sedentary:"Zittend (weinig/geen beweging)",light:"Licht actief (1-3 dagen/week)",moderate:"Matig actief (3-5 dagen/week)",active:"Actief (6-7 dagen/week)",veryActive:"Zeer actief (zware training)"},SA={lose:"Afvallen",maintain:"Gewicht behouden"};function Wre(){const t=Zc(),e=cd(H=>H.saveProfile),[n,r]=D.useState("welcome"),[i,a]=D.useState(""),[l,f]=D.useState("male"),[m,p]=D.useState("1990-01-01"),[b,_]=D.useState("175"),[T,N]=D.useState("80"),[j,M]=D.useState("75"),[L,z]=D.useState("light"),[$,K]=D.useState("lose"),X=Number(b)||175,se=Number(T)||80,J=Number(j)||75,V=UL(se,X,m,l,L,$),W=async()=>{await e({name:i,gender:l,dateOfBirth:m,heightCm:X,currentWeightKg:se,goalWeightKg:J,activityLevel:L,goal:$,dailyPointsBudget:V.dailyPoints,weeklyPointsBudget:V.weeklyPoints,onboardingComplete:!0}),t("/")};return n==="welcome"?O.jsxs("div",{className:"flex flex-col items-center justify-center h-full px-8 animate-fade-in",children:[O.jsx("div",{className:"w-20 h-20 rounded-[28px] bg-primary flex items-center justify-center mb-6 shadow-lg",children:O.jsx(lI,{size:40,color:"white"})}),O.jsx("h1",{className:"text-[34px] font-bold text-ios-text mb-2",children:"BodyBalance"}),O.jsx("p",{className:"text-[17px] text-ios-secondary text-center mb-2 leading-relaxed",children:"Houd je voeding bij met een simpel puntensysteem"}),O.jsx("p",{className:"text-[15px] text-ios-secondary text-center mb-10 leading-relaxed",children:"Calorien worden omgezet in punten. Blijf binnen je dagbudget en bereik je streefgewicht."}),O.jsxs(Js,{fullWidth:!0,size:"lg",onClick:()=>r("profile"),children:["Aan de slag",O.jsx(mv,{size:20,className:"inline ml-1"})]}),O.jsxs("button",{onClick:()=>am.getState().logout(),className:"mt-4 flex items-center justify-center gap-2 text-[15px] text-ios-secondary bg-transparent border-none cursor-pointer",children:[O.jsx(LL,{size:16}),"Uitloggen"]})]}):n==="profile"?O.jsxs("div",{className:"flex flex-col h-full animate-fade-in",children:[O.jsxs("div",{className:"px-6 pt-12 pb-4",style:{paddingTop:"calc(var(--safe-area-top) + 48px)"},children:[O.jsx("h2",{className:"text-[28px] font-bold text-ios-text mb-1",children:"Jouw profiel"}),O.jsx("p",{className:"text-[15px] text-ios-secondary",children:"We berekenen je dagelijkse puntenbudget"})]}),O.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-32",children:O.jsxs("div",{className:"flex flex-col gap-4",children:[O.jsx(Tc,{label:"Naam",type:"text",placeholder:"Je naam",value:i,onChange:H=>a(H.currentTarget.value)}),O.jsx(Dh,{label:"Geslacht",value:l,onChange:H=>f(H.currentTarget.value),options:[{value:"male",label:"Man"},{value:"female",label:"Vrouw"}]}),O.jsx(Tc,{label:"Geboortedatum",type:"date",value:m,onChange:H=>p(H.currentTarget.value)}),O.jsx(Tc,{label:"Lengte",type:"number",suffix:"cm",value:b,onChange:H=>_(H.currentTarget.value),min:100,max:250}),O.jsx(Tc,{label:"Huidig gewicht",type:"number",suffix:"kg",value:T,onChange:H=>N(H.currentTarget.value),min:30,max:300}),O.jsx(Tc,{label:"Streefgewicht",type:"number",suffix:"kg",value:j,onChange:H=>M(H.currentTarget.value),min:30,max:300}),O.jsx(Dh,{label:"Activiteitsniveau",value:L,onChange:H=>z(H.currentTarget.value),options:Object.entries(AA).map(([H,oe])=>({value:H,label:oe}))}),O.jsx(Dh,{label:"Doel",value:$,onChange:H=>K(H.currentTarget.value),options:Object.entries(SA).map(([H,oe])=>({value:H,label:oe}))})]})}),O.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-xl border-t border-ios-separator px-6 py-4",style:{paddingBottom:"calc(var(--safe-area-bottom) + 16px)"},children:O.jsx(Js,{fullWidth:!0,size:"lg",onClick:()=>r("result"),disabled:!i,children:"Bereken mijn budget"})})]}):O.jsxs("div",{className:"flex flex-col items-center justify-center h-full px-8 animate-fade-in",children:[O.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:O.jsx(yre,{size:32,className:"text-primary"})}),O.jsxs("h2",{className:"text-[28px] font-bold text-ios-text mb-2",children:["Hoi ",i,"!"]}),O.jsx("p",{className:"text-[15px] text-ios-secondary text-center mb-8",children:"Je persoonlijke puntenbudget is berekend"}),O.jsxs("div",{className:"bg-white rounded-3xl shadow-sm p-6 w-full mb-6",children:[O.jsxs("div",{className:"text-center mb-6",children:[O.jsx("div",{className:"text-[64px] font-bold text-primary leading-none",children:V.dailyPoints}),O.jsx("div",{className:"text-[15px] text-ios-secondary mt-1",children:"punten per dag"})]}),O.jsxs("div",{className:"flex justify-around py-4 border-t border-ios-separator",children:[O.jsxs("div",{className:"text-center",children:[O.jsxs("div",{className:"flex items-center gap-1 justify-center mb-1",children:[O.jsx(FL,{size:14,className:"text-ios-blue"}),O.jsx("span",{className:"text-[13px] text-ios-secondary",children:"Weekpunten"})]}),O.jsx("span",{className:"text-[20px] font-bold",children:V.weeklyPoints})]}),O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"text-[13px] text-ios-secondary mb-1",children:"Calorien/dag"}),O.jsxs("span",{className:"text-[20px] font-bold",children:["~",V.targetCalories]})]})]})]}),O.jsxs("p",{className:"text-[13px] text-ios-secondary text-center mb-8 leading-relaxed",children:["Je dagelijks budget van ",O.jsxs("strong",{children:[V.dailyPoints," punten"]})," is gebaseerd op je profiel. Daarnaast heb je ",O.jsxs("strong",{children:[V.weeklyPoints," weekpunten"]})," voor extra flexibiliteit."]}),O.jsx(Js,{fullWidth:!0,size:"lg",onClick:W,children:"Start met tracken"})]})}const GL=6048e5,$re=864e5,B4=Symbol.for("constructDateFrom");function Au(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&B4 in t?t[B4](e):t instanceof Date?new t.constructor(e):new Date(e)}function Oo(t,e){return Au(e||t,t)}function Py(t,e,n){const r=Oo(t,n?.in);return isNaN(e)?Au(t,NaN):(e&&r.setDate(r.getDate()+e),r)}let Yre={};function Yx(){return Yre}function fd(t,e){const n=Yx(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=Oo(t,e?.in),a=i.getDay(),l=(a<r?7:0)+a-r;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function yv(t,e){return fd(t,{...e,weekStartsOn:1})}function HL(t,e){const n=Oo(t,e?.in),r=n.getFullYear(),i=Au(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=yv(i),l=Au(n,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const f=yv(l);return n.getTime()>=a.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function F4(t){const e=Oo(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Xre(t,...e){const n=Au.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function V4(t,e){const n=Oo(t,e?.in);return n.setHours(0,0,0,0),n}function Qre(t,e,n){const[r,i]=Xre(n?.in,t,e),a=V4(r),l=V4(i),f=+a-F4(a),m=+l-F4(l);return Math.round((f-m)/$re)}function Zre(t,e){const n=HL(t,e),r=Au(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),yv(r)}function Jre(t,e,n){return Py(t,e*7,n)}function eie(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function tie(t){return!(!eie(t)&&typeof t!="number"||isNaN(+Oo(t)))}function nie(t,e){const n=Oo(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const rie={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},iie=(t,e,n)=>{let r;const i=rie[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function kh(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const aie={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},sie={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},oie={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},lie={date:kh({formats:aie,defaultWidth:"full"}),time:kh({formats:sie,defaultWidth:"full"}),dateTime:kh({formats:oie,defaultWidth:"full"})},uie={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},cie=(t,e,n,r)=>uie[t];function pl(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,f=n?.width?String(n.width):l;i=t.formattingValues[f]||t.formattingValues[l]}else{const l=t.defaultWidth,f=n?.width?String(n.width):t.defaultWidth;i=t.values[f]||t.values[l]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const fie={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},die={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},hie={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},mie={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},gie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},pie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},yie=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},vie={ordinalNumber:yie,era:pl({values:fie,defaultWidth:"wide"}),quarter:pl({values:die,defaultWidth:"wide",argumentCallback:t=>t-1}),month:pl({values:hie,defaultWidth:"wide"}),day:pl({values:mie,defaultWidth:"wide"}),dayPeriod:pl({values:gie,defaultWidth:"wide",formattingValues:pie,defaultFormattingWidth:"wide"})};function yl(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const l=a[0],f=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],m=Array.isArray(f)?bie(f,_=>_.test(l)):xie(f,_=>_.test(l));let p;p=t.valueCallback?t.valueCallback(m):m,p=n.valueCallback?n.valueCallback(p):p;const b=e.slice(l.length);return{value:p,rest:b}}}function xie(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function bie(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function KL(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let l=t.valueCallback?t.valueCallback(a[0]):a[0];l=n.valueCallback?n.valueCallback(l):l;const f=e.slice(i.length);return{value:l,rest:f}}}const wie=/^(\d+)(th|st|nd|rd)?/i,_ie=/\d+/i,Eie={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Aie={any:[/^b/i,/^(a|c)/i]},Sie={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Tie={any:[/1/i,/2/i,/3/i,/4/i]},Iie={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Cie={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Oie={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Nie={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Pie={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Rie={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Die={ordinalNumber:KL({matchPattern:wie,parsePattern:_ie,valueCallback:t=>parseInt(t,10)}),era:yl({matchPatterns:Eie,defaultMatchWidth:"wide",parsePatterns:Aie,defaultParseWidth:"any"}),quarter:yl({matchPatterns:Sie,defaultMatchWidth:"wide",parsePatterns:Tie,defaultParseWidth:"any",valueCallback:t=>t+1}),month:yl({matchPatterns:Iie,defaultMatchWidth:"wide",parsePatterns:Cie,defaultParseWidth:"any"}),day:yl({matchPatterns:Oie,defaultMatchWidth:"wide",parsePatterns:Nie,defaultParseWidth:"any"}),dayPeriod:yl({matchPatterns:Pie,defaultMatchWidth:"any",parsePatterns:Rie,defaultParseWidth:"any"})},kie={code:"en-US",formatDistance:iie,formatLong:lie,formatRelative:cie,localize:vie,match:Die,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Mie(t,e){const n=Oo(t,e?.in);return Qre(n,nie(n))+1}function jie(t,e){const n=Oo(t,e?.in),r=+yv(n)-+Zre(n);return Math.round(r/GL)+1}function WL(t,e){const n=Oo(t,e?.in),r=n.getFullYear(),i=Yx(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=Au(e?.in||t,0);l.setFullYear(r+1,0,a),l.setHours(0,0,0,0);const f=fd(l,e),m=Au(e?.in||t,0);m.setFullYear(r,0,a),m.setHours(0,0,0,0);const p=fd(m,e);return+n>=+f?r+1:+n>=+p?r:r-1}function Lie(t,e){const n=Yx(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=WL(t,e),a=Au(e?.in||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),fd(a,e)}function Bie(t,e){const n=Oo(t,e?.in),r=+fd(n,e)-+Lie(n,e);return Math.round(r/GL)+1}function lr(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const yc={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return lr(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):lr(n+1,2)},d(t,e){return lr(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return n==="am"?"a.m.":"p.m."}},h(t,e){return lr(t.getHours()%12||12,e.length)},H(t,e){return lr(t.getHours(),e.length)},m(t,e){return lr(t.getMinutes(),e.length)},s(t,e){return lr(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return lr(i,e.length)}},dh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},z4={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return yc.y(t,e)},Y:function(t,e,n,r){const i=WL(t,r),a=i>0?i:1-i;if(e==="YY"){const l=a%100;return lr(l,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):lr(a,e.length)},R:function(t,e){const n=HL(t);return lr(n,e.length)},u:function(t,e){const n=t.getFullYear();return lr(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return lr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return lr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return yc.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return lr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=Bie(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):lr(i,e.length)},I:function(t,e,n){const r=jie(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):lr(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):yc.d(t,e)},D:function(t,e,n){const r=Mie(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):lr(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return lr(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return lr(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return lr(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=dh.noon:r===0?i=dh.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=dh.evening:r>=12?i=dh.afternoon:r>=4?i=dh.morning:i=dh.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return yc.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):yc.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):lr(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):lr(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):yc.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):yc.s(t,e)},S:function(t,e){return yc.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return q4(r);case"XXXX":case"XX":return Nf(r);default:return Nf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return q4(r);case"xxxx":case"xx":return Nf(r);default:return Nf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+U4(r,":");default:return"GMT"+Nf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+U4(r,":");default:return"GMT"+Nf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return lr(r,e.length)},T:function(t,e,n){return lr(+t,e.length)}};function U4(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+lr(a,2)}function q4(t,e){return t%60===0?(t>0?"-":"+")+lr(Math.abs(t)/60,2):Nf(t,e)}function Nf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=lr(Math.trunc(r/60),2),a=lr(r%60,2);return n+i+e+a}const G4=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},$L=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},Fie=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return G4(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",G4(r,e)).replace("{{time}}",$L(i,e))},Vie={p:$L,P:Fie},zie=/^D+$/,Uie=/^Y+$/,qie=["D","DD","YY","YYYY"];function Gie(t){return zie.test(t)}function Hie(t){return Uie.test(t)}function Kie(t,e,n){const r=Wie(t,e,n);if(console.warn(r),qie.includes(t))throw new RangeError(r)}function Wie(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $ie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Yie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Xie=/^'([^]*?)'?$/,Qie=/''/g,Zie=/[a-zA-Z]/;function Cs(t,e,n){const r=Yx(),i=n?.locale??r.locale??kie,a=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,f=Oo(t,n?.in);if(!tie(f))throw new RangeError("Invalid time value");let m=e.match(Yie).map(b=>{const _=b[0];if(_==="p"||_==="P"){const T=Vie[_];return T(b,i.formatLong)}return b}).join("").match($ie).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const _=b[0];if(_==="'")return{isToken:!1,value:Jie(b)};if(z4[_])return{isToken:!0,value:b};if(_.match(Zie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:b}});i.localize.preprocessor&&(m=i.localize.preprocessor(f,m));const p={firstWeekContainsDate:a,weekStartsOn:l,locale:i};return m.map(b=>{if(!b.isToken)return b.value;const _=b.value;(!n?.useAdditionalWeekYearTokens&&Hie(_)||!n?.useAdditionalDayOfYearTokens&&Gie(_))&&Kie(_,e,String(t));const T=z4[_[0]];return T(f,_,i.localize,p)}).join("")}function Jie(t){const e=t.match(Xie);return e?e[1].replace(Qie,"'"):t}function H4(t,e,n){return Jre(t,-e,n)}const Xx=aI((t,e)=>({entries:[],selectedDate:Cs(new Date,"yyyy-MM-dd"),isLoading:!1,setDate:n=>{t({selectedDate:n}),e().loadEntries()},loadEntries:async()=>{t({isLoading:!0});const n=await PL(e().selectedDate);t({entries:n,isLoading:!1})},addEntry:async n=>{await RL(e().selectedDate,n),await e().loadEntries()},updateEntry:async(n,r)=>{await Pte(n,r),await e().loadEntries()},removeEntry:async n=>{await Rte(n),await e().loadEntries()},getEntriesByMealType:n=>e().entries.filter(r=>r.mealType===n),getTotalPoints:()=>e().entries.reduce((n,r)=>n+r.points,0),getPointsByMealType:n=>e().entries.filter(r=>r.mealType===n).reduce((r,i)=>r+i.points,0)}));function Wc({title:t,children:e,rightAction:n,noPadding:r}){return O.jsxs("div",{className:"flex flex-col h-full",children:[O.jsx("header",{className:"bg-white/80 backdrop-blur-xl border-b border-ios-separator flex-shrink-0",style:{paddingTop:"var(--safe-area-top)"},children:O.jsxs("div",{className:"flex items-center justify-between px-4 h-[44px]",children:[O.jsx("h1",{className:"text-[17px] font-semibold text-ios-text",children:t}),n&&O.jsx("div",{children:n})]})}),O.jsx("main",{className:`flex-1 overflow-y-auto overscroll-contain ${r?"":"px-4 py-4"}`,style:{paddingBottom:"calc(60px + var(--safe-area-bottom))"},children:e})]})}function eae({used:t,budget:e,size:n=180}){const r=t>e,i=e-t,a=r?t-e:0,l=Math.min(t/e,1),f=12,m=(n-f)/2,p=2*Math.PI*m,b=p*(1-l),_=n/2;return O.jsxs("div",{className:"flex flex-col items-center gap-2",children:[O.jsxs("div",{className:"relative",style:{width:n,height:n},children:[O.jsxs("svg",{width:n,height:n,className:"-rotate-90",children:[O.jsx("circle",{cx:_,cy:_,r:m,fill:"none",stroke:"#E5E5EA",strokeWidth:f,strokeLinecap:"round"}),O.jsx("circle",{cx:_,cy:_,r:m,fill:"none",stroke:r?"#FF3B30":"#34C759",strokeWidth:f,strokeLinecap:"round",strokeDasharray:p,strokeDashoffset:b,className:"transition-all duration-700 ease-out"})]}),O.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[O.jsx("span",{className:`text-[42px] font-bold leading-none ${r?"text-ios-destructive":"text-ios-text"}`,children:r?a:i}),O.jsx("span",{className:"text-[13px] text-ios-secondary mt-1",children:r?"te veel":"resterend"})]})]}),O.jsxs("div",{className:"flex gap-6 text-[13px] text-ios-secondary",children:[O.jsxs("span",{children:[O.jsx("strong",{className:"text-ios-text",children:t})," gebruikt"]}),O.jsxs("span",{children:[O.jsx("strong",{className:"text-ios-text",children:e})," budget"]})]})]})}const YL={breakfast:"Ontbijt",lunch:"Lunch",dinner:"Diner",snack:"Tussendoor"},tae={breakfast:"",lunch:"",dinner:"",snack:""};function Nn({children:t,className:e="",onClick:n}){return O.jsx("div",{className:`bg-white rounded-2xl shadow-sm ${n?"active:bg-gray-50 cursor-pointer transition-colors":""} ${e}`,onClick:n,children:t})}function _o({title:t,rightContent:e}){return O.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-ios-separator",children:[O.jsx("h3",{className:"text-[15px] font-semibold text-ios-secondary uppercase tracking-wide",children:t}),e]})}function nae({mealType:t,entries:e,totalPoints:n,onRemoveEntry:r,onEditEntry:i,onSaveTemplate:a}){const l=Zc();return O.jsxs(Nn,{className:"animate-fade-in",children:[O.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("span",{className:"text-lg",children:tae[t]}),O.jsx("span",{className:"font-semibold text-[15px]",children:YL[t]})]}),O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsxs("span",{className:"text-[15px] text-ios-secondary font-medium",children:[n," pt"]}),e.length>0&&a&&O.jsx("button",{onClick:()=>a(t),className:"w-7 h-7 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer active:bg-gray-200 transition-colors",children:O.jsx(nne,{size:14,className:"text-ios-secondary"})}),O.jsx("button",{onClick:()=>l(`/search?meal=${t}`),className:"w-7 h-7 rounded-full bg-primary flex items-center justify-center border-none cursor-pointer active:bg-primary-dark transition-colors",children:O.jsx(Ff,{size:16,color:"white",strokeWidth:2.5})})]})]}),e.length>0&&O.jsx("div",{className:"border-t border-ios-separator",children:e.map((f,m)=>O.jsxs("div",{className:`flex items-center justify-between px-4 py-2.5 ${m<e.length-1?"border-b border-ios-separator":""} ${i?"cursor-pointer":""}`,onClick:()=>i?.(f),children:[O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("div",{className:"text-[15px] truncate",children:f.foodItem.name}),O.jsx("div",{className:"text-[13px] text-ios-secondary",children:(()=>{const p=f.foodItem.unit==="ml"?"ml":"g";return f.quantity&&f.quantity>1?`${f.quantity} ${f.quantityG}${p}`:`${f.quantityG}${p}`})()})]}),O.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[O.jsxs("span",{className:`text-[15px] font-medium ${f.points===0?"text-primary":""}`,children:[f.points===0?"0":f.points," pt"]}),f.id!=null&&O.jsx("button",{onClick:p=>{p.stopPropagation(),r(f.id)},className:"text-ios-secondary active:text-ios-destructive border-none bg-transparent cursor-pointer p-2",children:O.jsx(Are,{size:16})})]})]},f.id??m))}),e.length===0&&O.jsx("div",{className:"px-4 py-3 text-[15px] text-ios-secondary border-t border-ios-separator cursor-pointer active:bg-gray-50",onClick:()=>l(`/search?meal=${t}`),children:"Tik om voedsel toe te voegen..."})]})}function g0(t){const e=t.calories*.03+t.saturatedFat*.28+t.sugar*.12-t.protein*.1-t.fiber*.1-t.unsaturatedFat*.05;return Math.max(0,Math.round(e))}function p0(t,e){return Math.max(0,Math.round(t*e/100))}function rae({entry:t,onSave:e,onClose:n}){const[r,i]=D.useState(String(t.quantityG)),[a,l]=D.useState(String(t.quantity||1)),f=Number(r)||0,m=Math.round(Number(a))||0,p=t.foodItem,b=p.unit==="ml"?"ml":"gram",_=p.unit==="ml"?"ml":"g",N=p0(p.pointsPer100g,f)*m,j=()=>{t.id&&e(t.id,{quantityG:f,quantity:m>1?m:void 0,points:N})};return O.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center animate-fade-in",children:[O.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:n}),O.jsxs("div",{className:"relative bg-white rounded-t-3xl w-full max-w-lg animate-slide-up",style:{paddingBottom:"calc(20px + var(--safe-area-bottom))"},children:[O.jsx("div",{className:"flex justify-center pt-3 pb-2",children:O.jsx("div",{className:"w-9 h-1 rounded-full bg-ios-separator"})}),O.jsx("button",{onClick:n,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer",children:O.jsx(sm,{size:18,className:"text-ios-secondary"})}),O.jsxs("div",{className:"px-5 pb-4",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[p.imageUrl?O.jsx("img",{src:p.imageUrl,alt:p.name,className:"w-14 h-14 rounded-xl object-cover"}):O.jsx("div",{className:"w-14 h-14 rounded-xl bg-primary-light flex items-center justify-center",children:O.jsx("span",{className:"text-primary-dark text-2xl font-bold",children:p.name.charAt(0).toUpperCase()})}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-[17px] font-semibold",children:p.name}),p.brand&&O.jsx("p",{className:"text-[13px] text-ios-secondary",children:p.brand})]})]}),O.jsxs("div",{className:"bg-ios-bg rounded-2xl p-4 mb-5 text-center",children:[O.jsx("div",{className:"text-[48px] font-bold text-primary leading-none",children:N}),O.jsx("div",{className:"text-[13px] text-ios-secondary mt-1",children:"punten"})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1.5 px-1",children:"Hoeveelheid"}),O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>i(String(Math.max(10,f-10))),children:"-"}),O.jsxs("div",{className:"relative flex-1",children:[O.jsx("input",{type:"number",value:r,onChange:M=>i(M.target.value),className:"text-center bg-white rounded-xl text-[20px] font-medium",min:1}),O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:b})]}),O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>i(String(f+10)),children:"+"})]})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1.5 px-1",children:"Aantal"}),O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>l(String(Math.max(1,m-1))),children:"-"}),O.jsxs("div",{className:"relative flex-1",children:[O.jsx("input",{type:"number",value:a,onChange:M=>l(M.target.value),className:"text-center bg-white rounded-xl text-[20px] font-medium",min:1}),O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:"stuks"})]}),O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>l(String(m+1)),children:"+"})]})]}),O.jsx("div",{className:"flex gap-2 mb-5",children:[50,100,150,200].map(M=>O.jsxs("button",{onClick:()=>i(String(M)),className:`flex-1 py-2 rounded-xl text-[14px] font-medium border-none cursor-pointer transition-colors ${f===M?"bg-primary text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:[M,_]},M))}),O.jsxs(Js,{fullWidth:!0,size:"lg",onClick:j,children:["Opslaan  ",N," pt",m>1?` (${m})`:""]})]})]})]})}const iae={lessThanXSeconds:{one:"minder dan een seconde",other:"minder dan {{count}} seconden"},xSeconds:{one:"1 seconde",other:"{{count}} seconden"},halfAMinute:"een halve minuut",lessThanXMinutes:{one:"minder dan een minuut",other:"minder dan {{count}} minuten"},xMinutes:{one:"een minuut",other:"{{count}} minuten"},aboutXHours:{one:"ongeveer 1 uur",other:"ongeveer {{count}} uur"},xHours:{one:"1 uur",other:"{{count}} uur"},xDays:{one:"1 dag",other:"{{count}} dagen"},aboutXWeeks:{one:"ongeveer 1 week",other:"ongeveer {{count}} weken"},xWeeks:{one:"1 week",other:"{{count}} weken"},aboutXMonths:{one:"ongeveer 1 maand",other:"ongeveer {{count}} maanden"},xMonths:{one:"1 maand",other:"{{count}} maanden"},aboutXYears:{one:"ongeveer 1 jaar",other:"ongeveer {{count}} jaar"},xYears:{one:"1 jaar",other:"{{count}} jaar"},overXYears:{one:"meer dan 1 jaar",other:"meer dan {{count}} jaar"},almostXYears:{one:"bijna 1 jaar",other:"bijna {{count}} jaar"}},aae=(t,e,n)=>{let r;const i=iae[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",String(e)),n?.addSuffix?n.comparison&&n.comparison>0?"over "+r:r+" geleden":r},sae={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd-MM-y"},oae={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},lae={full:"{{date}} 'om' {{time}}",long:"{{date}} 'om' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},uae={date:kh({formats:sae,defaultWidth:"full"}),time:kh({formats:oae,defaultWidth:"full"}),dateTime:kh({formats:lae,defaultWidth:"full"})},cae={lastWeek:"'afgelopen' eeee 'om' p",yesterday:"'gisteren om' p",today:"'vandaag om' p",tomorrow:"'morgen om' p",nextWeek:"eeee 'om' p",other:"P"},fae=(t,e,n,r)=>cae[t],dae={narrow:["v.C.","n.C."],abbreviated:["v.Chr.","n.Chr."],wide:["voor Christus","na Christus"]},hae={narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["1e kwartaal","2e kwartaal","3e kwartaal","4e kwartaal"]},mae={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["jan.","feb.","mrt.","apr.","mei","jun.","jul.","aug.","sep.","okt.","nov.","dec."],wide:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"]},gae={narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],abbreviated:["zon","maa","din","woe","don","vri","zat"],wide:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},pae={narrow:{am:"AM",pm:"PM",midnight:"middernacht",noon:"het middaguur",morning:"'s ochtends",afternoon:"'s middags",evening:"'s avonds",night:"'s nachts"},abbreviated:{am:"AM",pm:"PM",midnight:"middernacht",noon:"het middaguur",morning:"'s ochtends",afternoon:"'s middags",evening:"'s avonds",night:"'s nachts"},wide:{am:"AM",pm:"PM",midnight:"middernacht",noon:"het middaguur",morning:"'s ochtends",afternoon:"'s middags",evening:"'s avonds",night:"'s nachts"}},yae=(t,e)=>Number(t)+"e",vae={ordinalNumber:yae,era:pl({values:dae,defaultWidth:"wide"}),quarter:pl({values:hae,defaultWidth:"wide",argumentCallback:t=>t-1}),month:pl({values:mae,defaultWidth:"wide"}),day:pl({values:gae,defaultWidth:"wide"}),dayPeriod:pl({values:pae,defaultWidth:"wide"})},xae=/^(\d+)e?/i,bae=/\d+/i,wae={narrow:/^([vn]\.? ?C\.?)/,abbreviated:/^([vn]\. ?Chr\.?)/,wide:/^((voor|na) Christus)/},_ae={any:[/^v/,/^n/]},Eae={narrow:/^[1234]/i,abbreviated:/^K[1234]/i,wide:/^[1234]e kwartaal/i},Aae={any:[/1/i,/2/i,/3/i,/4/i]},Sae={narrow:/^[jfmasond]/i,abbreviated:/^(jan.|feb.|mrt.|apr.|mei|jun.|jul.|aug.|sep.|okt.|nov.|dec.)/i,wide:/^(januari|februari|maart|april|mei|juni|juli|augustus|september|oktober|november|december)/i},Tae={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^jan/i,/^feb/i,/^m(r|a)/i,/^apr/i,/^mei/i,/^jun/i,/^jul/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i]},Iae={narrow:/^[zmdwv]/i,short:/^(zo|ma|di|wo|do|vr|za)/i,abbreviated:/^(zon|maa|din|woe|don|vri|zat)/i,wide:/^(zondag|maandag|dinsdag|woensdag|donderdag|vrijdag|zaterdag)/i},Cae={narrow:[/^z/i,/^m/i,/^d/i,/^w/i,/^d/i,/^v/i,/^z/i],any:[/^zo/i,/^ma/i,/^di/i,/^wo/i,/^do/i,/^vr/i,/^za/i]},Oae={any:/^(am|pm|middernacht|het middaguur|'s (ochtends|middags|avonds|nachts))/i},Nae={any:{am:/^am/i,pm:/^pm/i,midnight:/^middernacht/i,noon:/^het middaguur/i,morning:/ochtend/i,afternoon:/middag/i,evening:/avond/i,night:/nacht/i}},Pae={ordinalNumber:KL({matchPattern:xae,parsePattern:bae,valueCallback:t=>parseInt(t,10)}),era:yl({matchPatterns:wae,defaultMatchWidth:"wide",parsePatterns:_ae,defaultParseWidth:"any"}),quarter:yl({matchPatterns:Eae,defaultMatchWidth:"wide",parsePatterns:Aae,defaultParseWidth:"any",valueCallback:t=>t+1}),month:yl({matchPatterns:Sae,defaultMatchWidth:"wide",parsePatterns:Tae,defaultParseWidth:"any"}),day:yl({matchPatterns:Iae,defaultMatchWidth:"wide",parsePatterns:Cae,defaultParseWidth:"any"}),dayPeriod:yl({matchPatterns:Oae,defaultMatchWidth:"any",parsePatterns:Nae,defaultParseWidth:"any"})},wh={code:"nl",formatDistance:aae,formatLong:uae,formatRelative:fae,localize:vae,match:Pae,options:{weekStartsOn:1,firstWeekContainsDate:4}},Rae=["breakfast","lunch","dinner","snack"];function cp(){try{const t=localStorage.getItem("bb_templates");return t?JSON.parse(t):[]}catch{return[]}}function Dae(t){const e=cp();e.push(t),localStorage.setItem("bb_templates",JSON.stringify(e))}function kae(t){const e=cp();e.splice(t,1),localStorage.setItem("bb_templates",JSON.stringify(e))}function Mae(){const t=cd(lt=>lt.profile),{entries:e,selectedDate:n,setDate:r,loadEntries:i,addEntry:a,updateEntry:l,removeEntry:f,getEntriesByMealType:m,getTotalPoints:p,getPointsByMealType:b}=Xx(),[_,T]=D.useState(0),[N,j]=D.useState(0),M=t?.waterGoalMl||2e3,[L,z]=D.useState(!1),[$,K]=D.useState(cp),[X,se]=D.useState(0),[J,V]=D.useState(null),[W,H]=D.useState(0),[oe,ae]=D.useState(()=>{const lt=new Date;if(lt.getDay()!==1)return!1;const Et=`bb_weekreport_seen_${lt.toISOString().split("T")[0]}`;return localStorage.getItem(Et)?!1:(localStorage.setItem(Et,"1"),!0)}),[Z,ee]=D.useState(null),xe=D.useCallback(async()=>{const lt=await Mte(n);j(lt)},[n]);D.useEffect(()=>{i()},[i]),D.useEffect(()=>{t&&kte(n,t.dailyPointsBudget).then(T)},[n,t,e]),D.useEffect(()=>{xe()},[xe]),D.useEffect(()=>{t&&zte(t.dailyPointsBudget).then(se)},[t,e]),D.useEffect(()=>{t&&Fte(t.dailyPointsBudget,t.weeklyPointsBudget,t.waterGoalMl||2e3,W).then(V)},[t,e,W]);const de=async lt=>{const Ne=await jte(n,lt);j(Ne),navigator.vibrate?.(10)},ye=async()=>{await Lte(n),j(0)},_e=lt=>{const Ne=m(lt);if(Ne.length===0)return;const Xe=prompt("Naam voor deze template:");if(!Xe)return;const Et={name:Xe,mealType:lt,items:Ne.map(Fe=>({foodItem:Fe.foodItem,quantityG:Fe.quantityG,quantity:Fe.quantity,points:Fe.points}))};Dae(Et),K(cp()),navigator.vibrate?.(10)},qe=async lt=>{for(const Ne of lt.items)await a({foodItem:Ne.foodItem,mealType:lt.mealType,quantityG:Ne.quantityG,quantity:Ne.quantity,points:Ne.points});z(!1),navigator.vibrate?.(10)},Ve=lt=>{kae(lt),K(cp())},tt=()=>{ae(lt=>!lt)},me=lt=>{localStorage.setItem(`bb_streak_milestone_${lt}`,"1")},Se=async()=>{const lt=new Date(n);lt.setDate(lt.getDate()-1);const Ne=Cs(lt,"yyyy-MM-dd");await Bte(Ne,n)>0&&(await i(),navigator.vibrate?.(10))};if(!t)return null;const Ye=p(),ze=Math.max(0,t.weeklyPointsBudget-_),yt=n===Cs(new Date,"yyyy-MM-dd"),$e=lt=>{const Ne=new Date(n);Ne.setDate(Ne.getDate()+lt),r(Cs(Ne,"yyyy-MM-dd"))},pt=yt?"Vandaag":Cs(new Date(n),"d MMMM",{locale:wh});return O.jsxs(Wc,{title:"BodyBalance",children:[O.jsxs("div",{className:"flex flex-col gap-4 pb-4",children:[O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("button",{onClick:()=>$e(-1),className:"w-9 h-9 rounded-full bg-white flex items-center justify-center border-none cursor-pointer active:bg-gray-100 shadow-sm",children:O.jsx(M4,{size:20,className:"text-ios-text"})}),O.jsx("span",{className:"text-[17px] font-semibold",children:pt}),O.jsx("button",{onClick:()=>$e(1),disabled:yt,className:`w-9 h-9 rounded-full bg-white flex items-center justify-center border-none cursor-pointer shadow-sm ${yt?"opacity-30":"active:bg-gray-100"}`,children:O.jsx(mv,{size:20,className:"text-ios-text"})})]}),O.jsxs(Nn,{children:[O.jsxs("div",{className:"p-4 flex items-center justify-between",children:[O.jsx("button",{onClick:()=>H(lt=>lt+1),className:"w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer active:bg-gray-200",children:O.jsx(M4,{size:18,className:"text-ios-text"})}),O.jsxs("button",{onClick:tt,className:"flex items-center gap-2 bg-transparent border-none cursor-pointer px-2",children:[O.jsx(Ore,{size:18,className:"text-ios-blue"}),O.jsx("span",{className:"text-[15px] font-semibold",children:J?J.weekLabel:"Weekoverzicht"}),oe?O.jsx(yne,{size:16,className:"text-ios-secondary"}):O.jsx(ML,{size:16,className:"text-ios-secondary"})]}),O.jsx("button",{onClick:()=>H(lt=>Math.max(0,lt-1)),disabled:W===0,className:`w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer ${W===0?"opacity-30":"active:bg-gray-200"}`,children:O.jsx(mv,{size:18,className:"text-ios-text"})})]}),oe&&J&&O.jsxs("div",{className:"px-4 pb-4 flex flex-col gap-2",children:[O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Punten"}),O.jsxs("span",{className:"text-[14px] font-medium",children:["gem. ",J.avgPoints,"/",J.dailyBudget," pt",J.avgPoints<=J.dailyBudget?O.jsx("span",{className:"text-primary ml-1",children:""}):O.jsx("span",{className:"text-ios-destructive ml-1",children:""})]})]}),O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Binnen budget"}),O.jsxs("span",{className:"text-[14px] font-medium",children:[J.daysWithinBudget," van ",J.totalDays," dagen",J.daysWithinBudget>=J.totalDays-1?O.jsx("span",{className:"text-primary ml-1",children:""}):null]})]}),J.waterTotalDays>0&&O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Water"}),O.jsxs("span",{className:"text-[14px] font-medium",children:[J.waterDaysOnTarget," van ",J.waterTotalDays," dagen doel",J.waterDaysOnTarget>=J.waterTotalDays-1?O.jsx("span",{className:"text-blue-500 ml-1",children:""}):null]})]}),J.weightChange!==null&&O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Gewicht"}),O.jsxs("span",{className:`text-[14px] font-medium flex items-center gap-1 ${J.weightChange<0?"text-primary":J.weightChange>0?"text-ios-warning":""}`,children:[J.weightChange<0?O.jsx(VL,{size:14}):J.weightChange>0?O.jsx(Ire,{size:14}):O.jsx(BL,{size:14}),J.weightChange>0?"+":"",J.weightChange.toFixed(1)," kg"]})]}),O.jsxs("div",{className:"border-t border-ios-separator mt-1 pt-2 flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Beste dag"}),O.jsxs("span",{className:"text-[14px] font-medium",children:[J.bestDay," (",J.bestDayPoints," pt)"]})]}),O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Weekpunten"}),O.jsxs("span",{className:"text-[14px] font-medium",children:[J.weeklyPointsUsed," van ",J.weeklyPointsBudget," gebruikt"]})]})]}),oe&&!J&&O.jsx("div",{className:"px-4 pb-4 text-center",children:O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Geen data voor deze week"})})]}),O.jsxs(Nn,{className:"py-6 flex flex-col items-center gap-2",children:[O.jsx(eae,{used:Ye,budget:t.dailyPointsBudget}),X>0&&O.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[O.jsx(Dne,{size:16,className:"text-orange-500"}),O.jsxs("span",{className:"text-[14px] font-medium text-ios-secondary",children:[X," ",X===1?"dag":"dagen"," op rij"]})]})]}),(()=>{const Ne=[7,14,30,60,100].find(Et=>X===Et&&!localStorage.getItem(`bb_streak_milestone_${Et}`));if(!Ne)return null;const Xe={7:"1 week op rij binnen budget!",14:"2 weken op rij binnen budget!",30:"1 maand op rij! Ongelooflijk!",60:"2 maanden op rij! Wat een discipline!",100:"100 dagen! Je bent een kampioen!"};return O.jsx(Nn,{className:"bg-primary/10 border border-primary/20",children:O.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("span",{className:"text-[16px]",children:""}),O.jsx("span",{className:"text-[14px] font-semibold text-primary",children:Xe[Ne]})]}),O.jsx("button",{onClick:()=>me(Ne),className:"w-6 h-6 rounded-full bg-transparent border-none cursor-pointer flex items-center justify-center",children:O.jsx(sm,{size:14,className:"text-primary"})})]})})})(),O.jsxs(Nn,{className:"px-4 py-3 flex items-center justify-between",children:[O.jsx("span",{className:"text-[15px] text-ios-secondary",children:"Weekpunten resterend"}),O.jsxs("span",{className:`text-[17px] font-bold ${ze===0?"text-ios-destructive":"text-ios-blue"}`,children:[ze,O.jsxs("span",{className:"text-[13px] font-normal text-ios-secondary ml-1",children:["/ ",t.weeklyPointsBudget]})]})]}),O.jsxs("div",{className:"flex gap-2",children:[e.length===0&&O.jsxs("button",{onClick:Se,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-white rounded-xl border border-dashed border-ios-separator text-[13px] font-medium text-ios-secondary cursor-pointer active:bg-gray-50 transition-colors",children:[O.jsx(jL,{size:14}),"Kopieer gisteren"]}),$.length>0&&O.jsxs("button",{onClick:()=>z(!L),className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-white rounded-xl border border-dashed border-ios-separator text-[13px] font-medium text-ios-blue cursor-pointer active:bg-gray-50 transition-colors",children:[O.jsx(ine,{size:14}),"Templates (",$.length,")"]})]}),L&&O.jsxs(Nn,{children:[O.jsx("div",{className:"px-4 py-2.5 border-b border-ios-separator",children:O.jsx("span",{className:"text-[13px] font-semibold text-ios-secondary uppercase tracking-wide",children:"Maaltijd templates"})}),$.map((lt,Ne)=>O.jsxs("div",{className:`flex items-center justify-between px-4 py-2.5 ${Ne<$.length-1?"border-b border-ios-separator":""}`,children:[O.jsxs("button",{onClick:()=>qe(lt),className:"flex-1 text-left bg-transparent border-none cursor-pointer p-0",children:[O.jsx("div",{className:"text-[15px] font-medium",children:lt.name}),O.jsxs("div",{className:"text-[12px] text-ios-secondary",children:[lt.items.length," items  ",lt.items.reduce((Xe,Et)=>Xe+Et.points,0)," pt"]})]}),O.jsx("button",{onClick:()=>Ve(Ne),className:"text-[12px] text-ios-destructive bg-transparent border-none cursor-pointer px-2 py-1",children:"Wis"})]},Ne))]}),Rae.map(lt=>O.jsx(nae,{mealType:lt,entries:m(lt),totalPoints:b(lt),onRemoveEntry:f,onEditEntry:ee,onSaveTemplate:_e},lt)),O.jsx(Nn,{children:O.jsxs("div",{className:"p-4",children:[O.jsxs("div",{className:"flex items-center justify-between mb-3",children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(up,{size:20,className:"text-blue-500"}),O.jsx("span",{className:"text-[17px] font-semibold",children:"Water"})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsxs("span",{className:"text-[15px] font-bold text-blue-500",children:[(N/1e3).toFixed(1)," / ",(M/1e3).toFixed(1)," L"]}),N>0&&O.jsx("button",{onClick:ye,className:"w-7 h-7 rounded-full bg-transparent border-none cursor-pointer flex items-center justify-center active:bg-gray-100",children:O.jsx(sre,{size:14,className:"text-ios-secondary"})})]})]}),O.jsx("div",{className:"w-full h-3 bg-blue-100 rounded-full overflow-hidden mb-3",children:O.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-300",style:{width:`${Math.min(100,N/M*100)}%`}})}),O.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[O.jsxs("button",{onClick:()=>de(150),className:"flex flex-col items-center gap-1 py-2.5 bg-blue-50 rounded-xl border-none cursor-pointer active:bg-blue-100 transition-colors",children:[O.jsx(Mne,{size:18,className:"text-blue-500"}),O.jsx("span",{className:"text-[13px] font-medium text-blue-700",children:"+150ml"}),O.jsx("span",{className:"text-[11px] text-blue-400",children:"glas"})]}),O.jsxs("button",{onClick:()=>de(250),className:"flex flex-col items-center gap-1 py-2.5 bg-blue-50 rounded-xl border-none cursor-pointer active:bg-blue-100 transition-colors",children:[O.jsx(Ene,{size:18,className:"text-blue-500"}),O.jsx("span",{className:"text-[13px] font-medium text-blue-700",children:"+250ml"}),O.jsx("span",{className:"text-[11px] text-blue-400",children:"beker"})]}),O.jsxs("button",{onClick:()=>de(500),className:"flex flex-col items-center gap-1 py-2.5 bg-blue-50 rounded-xl border-none cursor-pointer active:bg-blue-100 transition-colors",children:[O.jsx(up,{size:18,className:"text-blue-500"}),O.jsx("span",{className:"text-[13px] font-medium text-blue-700",children:"+500ml"}),O.jsx("span",{className:"text-[11px] text-blue-400",children:"fles"})]})]}),N>=M&&O.jsx("p",{className:"text-[13px] text-center text-green-600 font-medium mt-2",children:"Waterdoel bereikt!"})]})})]}),Z&&O.jsx(rae,{entry:Z,onSave:(lt,Ne)=>{l(lt,Ne),ee(null),navigator.vibrate?.(10)},onClose:()=>ee(null)})]})}function uI({food:t,onSelect:e,onToggleFavorite:n,showFavorite:r=!0}){const i=p0(t.pointsPer100g,t.servingSizeG||100),a=t.unit==="ml"?"ml":"g";return O.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[O.jsxs("button",{onClick:()=>e(t),className:"flex-1 flex items-center gap-3 bg-transparent border-none cursor-pointer active:bg-gray-50 transition-colors text-left min-w-0",children:[t.imageUrl?O.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-11 h-11 rounded-lg object-cover bg-ios-bg flex-shrink-0"}):O.jsx("div",{className:"w-11 h-11 rounded-lg bg-primary-light flex items-center justify-center flex-shrink-0",children:O.jsx("span",{className:"text-primary-dark text-[18px] font-bold",children:t.name.charAt(0).toUpperCase()})}),O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("div",{className:"text-[15px] font-medium text-ios-text truncate",children:t.name}),t.brand&&O.jsx("div",{className:"text-[13px] text-ios-secondary truncate",children:t.brand})]}),O.jsxs("div",{className:"flex-shrink-0 text-right",children:[O.jsx("div",{className:`text-[17px] font-bold ${t.isZeroPoint?"text-primary":"text-ios-text"}`,children:i}),O.jsxs("div",{className:"text-[11px] text-ios-secondary",children:["pt/",t.servingSizeG,a]})]})]}),r&&n&&O.jsx("button",{onClick:l=>{l.stopPropagation(),n(t)},className:"flex-shrink-0 p-2 border-none bg-transparent cursor-pointer active:scale-125 transition-transform",children:O.jsx($x,{size:20,className:t.isFavorite?"text-red-500 fill-red-500":"text-ios-separator"})})]})}function jae(t){try{const e=localStorage.getItem("bb_portions");return e?JSON.parse(e)[t.toLowerCase()]??null:null}catch{return null}}function Lae(t,e){try{const n=localStorage.getItem("bb_portions"),r=n?JSON.parse(n):{};r[t.toLowerCase()]=e,localStorage.setItem("bb_portions",JSON.stringify(r))}catch{}}function XL({food:t,defaultMealType:e,onAdd:n,onClose:r}){const i=jae(t.name),[a,l]=D.useState(String(i??(t.servingSizeG||100))),[f,m]=D.useState("1"),[p,b]=D.useState(e),_=Number(a)||0,T=Math.round(Number(f))||0,N=t.unit==="ml"?"ml":"gram",j=t.unit==="ml"?"ml":"g",L=p0(t.pointsPer100g,_)*T;return O.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center animate-fade-in",children:[O.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:r}),O.jsxs("div",{className:"relative bg-white rounded-t-3xl w-full max-w-lg animate-slide-up",style:{paddingBottom:"calc(20px + var(--safe-area-bottom))"},children:[O.jsx("div",{className:"flex justify-center pt-3 pb-2",children:O.jsx("div",{className:"w-9 h-1 rounded-full bg-ios-separator"})}),O.jsx("button",{onClick:r,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer",children:O.jsx(sm,{size:18,className:"text-ios-secondary"})}),O.jsxs("div",{className:"px-5 pb-4",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[t.imageUrl?O.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-14 h-14 rounded-xl object-cover"}):O.jsx("div",{className:"w-14 h-14 rounded-xl bg-primary-light flex items-center justify-center",children:O.jsx("span",{className:"text-primary-dark text-2xl font-bold",children:t.name.charAt(0).toUpperCase()})}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-[17px] font-semibold",children:t.name}),t.brand&&O.jsx("p",{className:"text-[13px] text-ios-secondary",children:t.brand})]})]}),O.jsxs("div",{className:"bg-ios-bg rounded-2xl p-4 mb-5 text-center",children:[O.jsx("div",{className:"text-[48px] font-bold text-primary leading-none",children:L}),O.jsx("div",{className:"text-[13px] text-ios-secondary mt-1",children:"punten"})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1.5 px-1",children:"Hoeveelheid"}),O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>l(String(Math.max(10,_-10))),children:"-"}),O.jsxs("div",{className:"relative flex-1",children:[O.jsx("input",{type:"number",value:a,onChange:z=>l(z.target.value),className:"text-center bg-white rounded-xl text-[20px] font-medium",min:1}),O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:N})]}),O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>l(String(_+10)),children:"+"})]})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1.5 px-1",children:"Aantal"}),O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>m(String(Math.max(1,T-1))),children:"-"}),O.jsxs("div",{className:"relative flex-1",children:[O.jsx("input",{type:"number",value:f,onChange:z=>m(z.target.value),className:"text-center bg-white rounded-xl text-[20px] font-medium",min:1}),O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:"stuks"})]}),O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>m(String(T+1)),children:"+"})]})]}),O.jsx("div",{className:"flex gap-2 mb-5",children:[50,100,150,200].map(z=>O.jsxs("button",{onClick:()=>l(String(z)),className:`flex-1 py-2 rounded-xl text-[14px] font-medium border-none cursor-pointer transition-colors ${_===z?"bg-primary text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:[z,j]},z))}),O.jsxs("div",{className:"mb-5",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1.5 px-1",children:"Maaltijd"}),O.jsx("div",{className:"flex gap-2",children:Object.entries(YL).map(([z,$])=>O.jsx("button",{onClick:()=>b(z),className:`flex-1 py-2.5 rounded-xl text-[13px] font-medium border-none cursor-pointer transition-colors ${p===z?"bg-primary text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:$},z))})]}),O.jsxs("div",{className:"flex justify-around mb-5 py-3 bg-ios-bg rounded-xl",children:[O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"text-[15px] font-semibold",children:Math.round(t.nutrition.calories*_*T/100)}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"kcal"})]}),O.jsxs("div",{className:"text-center",children:[O.jsxs("div",{className:"text-[15px] font-semibold",children:[(t.nutrition.protein*_*T/100).toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"eiwit"})]}),O.jsxs("div",{className:"text-center",children:[O.jsxs("div",{className:"text-[15px] font-semibold",children:[(t.nutrition.carbs*_*T/100).toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"koolh."})]}),O.jsxs("div",{className:"text-center",children:[O.jsxs("div",{className:"text-[15px] font-semibold",children:[(t.nutrition.fat*_*T/100).toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"vet"})]})]}),O.jsxs(Js,{fullWidth:!0,size:"lg",onClick:()=>{Lae(t.name,_),n(_,p,T>1?T:void 0)},children:["Toevoegen  ",L," pt",T>1?` (${T})`:""]})]})]})]})}function Bae({onCreated:t,onClose:e}){const[n,r]=D.useState(""),[i,a]=D.useState(""),[l,f]=D.useState(""),[m,p]=D.useState("100"),[b,_]=D.useState("g"),[T,N]=D.useState({calories:"",protein:"",fat:"",saturatedFat:"",carbs:"",sugar:"",fiber:""}),j={calories:Number(T.calories)||0,protein:Number(T.protein)||0,fat:Number(T.fat)||0,saturatedFat:Number(T.saturatedFat)||0,unsaturatedFat:Math.max(0,(Number(T.fat)||0)-(Number(T.saturatedFat)||0)),carbs:Number(T.carbs)||0,sugar:Number(T.sugar)||0,addedSugar:0,fiber:Number(T.fiber)||0},M=g0(j),L=n.trim().length>=2&&Number(T.calories)>0,z=async()=>{if(!L)return;const K=await sI({name:n.trim(),brand:i.trim()||void 0,barcode:l.trim()||void 0,nutrition:j,pointsPer100g:M,servingSizeG:Number(m)||100,unit:b,isZeroPoint:M===0,isFavorite:!0,source:"user"});t(K)},$=(K,X)=>{const se=X.replace(",",".").replace(/[^0-9.]/g,"");N(J=>({...J,[K]:se}))};return O.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center animate-fade-in",children:[O.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:e}),O.jsxs("div",{className:"relative bg-white rounded-t-3xl w-full max-w-lg animate-slide-up overflow-y-auto",style:{paddingBottom:"calc(20px + var(--safe-area-bottom))",maxHeight:"92vh"},children:[O.jsx("div",{className:"flex justify-center pt-3 pb-2",children:O.jsx("div",{className:"w-9 h-1 rounded-full bg-ios-separator"})}),O.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer",children:O.jsx(sm,{size:18,className:"text-ios-secondary"})}),O.jsxs("div",{className:"px-5 pb-4",children:[O.jsx("h2",{className:"text-[20px] font-bold mb-4",children:"Eigen product"}),O.jsxs("div",{className:"flex flex-col gap-3 mb-5",children:[O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Naam *"}),O.jsx("input",{type:"text",placeholder:"bijv. Lavazza Cappuccino",value:n,onChange:K=>r(K.target.value),className:"bg-white rounded-xl px-4 py-3 text-[16px] w-full border border-ios-separator"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Merk (optioneel)"}),O.jsx("input",{type:"text",placeholder:"bijv. Lavazza",value:i,onChange:K=>a(K.target.value),className:"bg-white rounded-xl px-4 py-3 text-[16px] w-full border border-ios-separator"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Barcode (optioneel)"}),O.jsxs("div",{className:"relative",children:[O.jsx("input",{type:"text",inputMode:"numeric",placeholder:"Scan of typ de barcode",value:l,onChange:K=>f(K.target.value.replace(/[^0-9]/g,"")),className:"bg-white rounded-xl pl-4 pr-10 py-3 text-[16px] w-full border border-ios-separator"}),O.jsx(pv,{size:18,className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-ios-secondary"})]}),O.jsx("p",{className:"text-[11px] text-ios-secondary mt-0.5 px-1",children:"Vul de barcode in zodat je dit product later kunt scannen"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Eenheid"}),O.jsx("div",{className:"flex gap-2",children:["g","ml"].map(K=>O.jsx("button",{onClick:()=>_(K),className:`flex-1 py-2.5 rounded-xl text-[14px] font-medium border-none cursor-pointer transition-colors ${b===K?"bg-primary text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:K==="g"?"Gram (g)":"Milliliter (ml)"},K))})]}),O.jsxs("div",{children:[O.jsxs("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:["Standaard portie (",b,")"]}),O.jsx("input",{type:"number",value:m,onChange:K=>p(K.target.value),className:"bg-white rounded-xl px-4 py-3 text-[16px] w-full border border-ios-separator",min:1})]})]}),O.jsxs("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-2 px-1",children:["Voedingswaarden per 100",b," *"]}),O.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[O.jsx(Sf,{label:"Calorien (kcal)",value:T.calories,onChange:K=>$("calories",K)}),O.jsx(Sf,{label:"Eiwit (g)",value:T.protein,onChange:K=>$("protein",K)}),O.jsx(Sf,{label:"Koolhydraten (g)",value:T.carbs,onChange:K=>$("carbs",K)}),O.jsx(Sf,{label:"Suikers (g)",value:T.sugar,onChange:K=>$("sugar",K)}),O.jsx(Sf,{label:"Vet (g)",value:T.fat,onChange:K=>$("fat",K)}),O.jsx(Sf,{label:"Verz. vet (g)",value:T.saturatedFat,onChange:K=>$("saturatedFat",K)}),O.jsx(Sf,{label:"Vezels (g)",value:T.fiber,onChange:K=>$("fiber",K)})]}),O.jsxs("div",{className:"bg-ios-bg rounded-2xl p-4 mb-5 text-center",children:[O.jsx("div",{className:"text-[36px] font-bold text-primary leading-none",children:M}),O.jsxs("div",{className:"text-[13px] text-ios-secondary mt-1",children:["punten per 100",b]})]}),O.jsx("p",{className:"text-[13px] text-ios-secondary mb-4 px-1",children:'Tip: de voedingswaarden vind je op de verpakking of zoek online op "product voedingswaarde per 100g".'}),O.jsxs(Js,{fullWidth:!0,size:"lg",onClick:z,disabled:!L,children:["Opslaan  ",M," pt/100",b]})]})]})]})}function Sf({label:t,value:e,onChange:n}){return O.jsxs("div",{children:[O.jsx("label",{className:"text-[12px] text-ios-secondary block mb-0.5 px-1",children:t}),O.jsx("input",{type:"text",inputMode:"decimal",placeholder:"0",value:e,onChange:r=>n(r.target.value),className:"bg-white rounded-xl px-3 py-2.5 text-[16px] w-full border border-ios-separator"})]})}const Fae=[{name:"Boterham wit",nutrition:{calories:264,protein:8.6,fat:3.2,saturatedFat:.7,unsaturatedFat:2.5,carbs:49,sugar:3.2,addedSugar:1,fiber:2.8},servingSizeG:35},{name:"Boterham bruin",nutrition:{calories:254,protein:9.4,fat:3.5,saturatedFat:.7,unsaturatedFat:2.8,carbs:44,sugar:3,addedSugar:1,fiber:5.4},servingSizeG:35},{name:"Boterham volkoren",nutrition:{calories:244,protein:10.2,fat:3.8,saturatedFat:.7,unsaturatedFat:3.1,carbs:40,sugar:2.8,addedSugar:.5,fiber:7.2},servingSizeG:35},{name:"Cruesli naturel",brand:"Quaker",nutrition:{calories:445,protein:10,fat:15,saturatedFat:5.8,unsaturatedFat:9.2,carbs:62,sugar:18,addedSugar:16,fiber:6.5},servingSizeG:45},{name:"Cruesli chocolade",brand:"Quaker",nutrition:{calories:452,protein:9,fat:16,saturatedFat:6.5,unsaturatedFat:9.5,carbs:63,sugar:22,addedSugar:20,fiber:5.5},servingSizeG:45},{name:"Cruesli rood fruit",brand:"Quaker",nutrition:{calories:420,protein:8.5,fat:12,saturatedFat:4.5,unsaturatedFat:7.5,carbs:65,sugar:24,addedSugar:18,fiber:5},servingSizeG:45},{name:"Havermout",nutrition:{calories:370,protein:13,fat:7,saturatedFat:1.2,unsaturatedFat:5.8,carbs:58,sugar:1.3,addedSugar:0,fiber:10},servingSizeG:40},{name:"Beschuit",nutrition:{calories:396,protein:9.8,fat:3.5,saturatedFat:.8,unsaturatedFat:2.7,carbs:78,sugar:8,addedSugar:6,fiber:3.5},servingSizeG:10},{name:"Ontbijtkoek",nutrition:{calories:318,protein:3.5,fat:2,saturatedFat:.5,unsaturatedFat:1.5,carbs:69,sugar:38,addedSugar:35,fiber:1.8},servingSizeG:30},{name:"Crackers volkoren",nutrition:{calories:398,protein:10,fat:9,saturatedFat:1.5,unsaturatedFat:7.5,carbs:64,sugar:3,addedSugar:2,fiber:8},servingSizeG:15},{name:"Hagelslag melk",nutrition:{calories:530,protein:5,fat:27,saturatedFat:16,unsaturatedFat:11,carbs:64,sugar:58,addedSugar:55,fiber:2.5},servingSizeG:10},{name:"Hagelslag puur",nutrition:{calories:505,protein:6,fat:25,saturatedFat:15,unsaturatedFat:10,carbs:60,sugar:52,addedSugar:50,fiber:5},servingSizeG:10},{name:"Pindakaas",nutrition:{calories:615,protein:25,fat:50,saturatedFat:8,unsaturatedFat:42,carbs:12,sugar:6,addedSugar:3,fiber:6},servingSizeG:15},{name:"Jam (aardbei)",nutrition:{calories:250,protein:.5,fat:.1,saturatedFat:0,unsaturatedFat:.1,carbs:61,sugar:47,addedSugar:40,fiber:.8},servingSizeG:15},{name:"Appelstroop",nutrition:{calories:285,protein:.8,fat:.3,saturatedFat:0,unsaturatedFat:.3,carbs:68,sugar:58,addedSugar:0,fiber:1},servingSizeG:15},{name:"Vlokken melk",nutrition:{calories:530,protein:5.5,fat:27,saturatedFat:16,unsaturatedFat:11,carbs:64,sugar:57,addedSugar:55,fiber:2},servingSizeG:10},{name:"Roomboter",nutrition:{calories:740,protein:.6,fat:82,saturatedFat:52,unsaturatedFat:30,carbs:.6,sugar:.6,addedSugar:0,fiber:0},servingSizeG:7},{name:"Margarine",nutrition:{calories:360,protein:.1,fat:40,saturatedFat:10,unsaturatedFat:30,carbs:.3,sugar:.3,addedSugar:0,fiber:0},servingSizeG:7},{name:"Goudse kaas jong",nutrition:{calories:356,protein:25,fat:28,saturatedFat:18,unsaturatedFat:10,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:20},{name:"Goudse kaas oud",nutrition:{calories:403,protein:30,fat:31,saturatedFat:20,unsaturatedFat:11,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:20},{name:"Goudse kaas belegen",nutrition:{calories:375,protein:27,fat:29,saturatedFat:19,unsaturatedFat:10,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:20},{name:"Smeerkaas",nutrition:{calories:230,protein:11,fat:20,saturatedFat:12,unsaturatedFat:8,carbs:2,sugar:2,addedSugar:0,fiber:0},servingSizeG:20},{name:"Melk halfvol",nutrition:{calories:47,protein:3.4,fat:1.5,saturatedFat:1,unsaturatedFat:.5,carbs:4.7,sugar:4.7,addedSugar:0,fiber:0},servingSizeG:200},{name:"Melk vol",nutrition:{calories:65,protein:3.3,fat:3.5,saturatedFat:2.2,unsaturatedFat:1.3,carbs:4.7,sugar:4.7,addedSugar:0,fiber:0},servingSizeG:200},{name:"Melk mager",nutrition:{calories:35,protein:3.5,fat:.1,saturatedFat:.1,unsaturatedFat:0,carbs:4.9,sugar:4.9,addedSugar:0,fiber:0},servingSizeG:200},{name:"Karnemelk",nutrition:{calories:36,protein:3.3,fat:.5,saturatedFat:.3,unsaturatedFat:.2,carbs:4.1,sugar:4.1,addedSugar:0,fiber:0},servingSizeG:200},{name:"Yoghurt vol",nutrition:{calories:72,protein:4,fat:3.5,saturatedFat:2.2,unsaturatedFat:1.3,carbs:5.5,sugar:5.5,addedSugar:0,fiber:0},servingSizeG:150},{name:"Yoghurt mager",nutrition:{calories:40,protein:4.3,fat:.1,saturatedFat:.1,unsaturatedFat:0,carbs:5.5,sugar:5.5,addedSugar:0,fiber:0},servingSizeG:150},{name:"Vla vanille",nutrition:{calories:100,protein:3,fat:2.5,saturatedFat:1.6,unsaturatedFat:.9,carbs:16,sugar:13,addedSugar:10,fiber:0},servingSizeG:150},{name:"Vla chocolade",nutrition:{calories:108,protein:3.2,fat:2.5,saturatedFat:1.6,unsaturatedFat:.9,carbs:18,sugar:15,addedSugar:12,fiber:.5},servingSizeG:150},{name:"Kwark mager",nutrition:{calories:51,protein:9,fat:.2,saturatedFat:.1,unsaturatedFat:.1,carbs:3.5,sugar:3.5,addedSugar:0,fiber:0},servingSizeG:150},{name:"Kwark vol",nutrition:{calories:104,protein:7,fat:5.5,saturatedFat:3.5,unsaturatedFat:2,carbs:6,sugar:6,addedSugar:0,fiber:0},servingSizeG:150},{name:"Cottage cheese",nutrition:{calories:92,protein:12,fat:3.5,saturatedFat:2.2,unsaturatedFat:1.3,carbs:2,sugar:2,addedSugar:0,fiber:0},servingSizeG:100},{name:"Skyr naturel",nutrition:{calories:63,protein:11,fat:.2,saturatedFat:.1,unsaturatedFat:.1,carbs:4,sugar:4,addedSugar:0,fiber:0},servingSizeG:150},{name:"Koffie zwart",nutrition:{calories:2,protein:.3,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:150},{name:"Koffie met melk",nutrition:{calories:12,protein:.8,fat:.4,saturatedFat:.2,unsaturatedFat:.2,carbs:1.2,sugar:1.2,addedSugar:0,fiber:0},servingSizeG:170},{name:"Koffie met melk en suiker",nutrition:{calories:28,protein:.8,fat:.4,saturatedFat:.2,unsaturatedFat:.2,carbs:5.2,sugar:5.2,addedSugar:4,fiber:0},servingSizeG:175},{name:"Cappuccino",nutrition:{calories:40,protein:2,fat:1.5,saturatedFat:1,unsaturatedFat:.5,carbs:4,sugar:4,addedSugar:0,fiber:0},servingSizeG:200},{name:"Latte macchiato",nutrition:{calories:55,protein:3,fat:2.5,saturatedFat:1.5,unsaturatedFat:1,carbs:5,sugar:5,addedSugar:0,fiber:0},servingSizeG:250},{name:"Thee zonder suiker",nutrition:{calories:1,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:.3,sugar:0,addedSugar:0,fiber:0},servingSizeG:200},{name:"Thee met suiker",nutrition:{calories:20,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:5,sugar:5,addedSugar:5,fiber:0},servingSizeG:205},{name:"Jus d'orange (vers)",nutrition:{calories:43,protein:.7,fat:.2,saturatedFat:0,unsaturatedFat:.2,carbs:9.5,sugar:8.5,addedSugar:0,fiber:.2},servingSizeG:200},{name:"Appelsap",nutrition:{calories:46,protein:.1,fat:.1,saturatedFat:0,unsaturatedFat:.1,carbs:11,sugar:10,addedSugar:0,fiber:.1},servingSizeG:200},{name:"Cola",nutrition:{calories:42,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:10.6,sugar:10.6,addedSugar:10.6,fiber:0},servingSizeG:330},{name:"Cola zero",nutrition:{calories:.4,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:330},{name:"Bier (pils)",nutrition:{calories:43,protein:.3,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:3.2,sugar:0,addedSugar:0,fiber:0},servingSizeG:250},{name:"Wijn rood",nutrition:{calories:83,protein:.1,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:2.6,sugar:.6,addedSugar:0,fiber:0},servingSizeG:150},{name:"Wijn wit",nutrition:{calories:82,protein:.1,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:2.6,sugar:.8,addedSugar:0,fiber:0},servingSizeG:150},{name:"Kipfilet",nutrition:{calories:110,protein:24,fat:1.3,saturatedFat:.4,unsaturatedFat:.9,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:150},{name:"Gehakt half om half",nutrition:{calories:215,protein:18,fat:15,saturatedFat:6.5,unsaturatedFat:8.5,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:100},{name:"Gehakt rund mager",nutrition:{calories:156,protein:21,fat:8,saturatedFat:3.5,unsaturatedFat:4.5,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:100},{name:"Rookworst",nutrition:{calories:275,protein:12,fat:24,saturatedFat:9,unsaturatedFat:15,carbs:2,sugar:1,addedSugar:0,fiber:0},servingSizeG:100},{name:"Frikandel",nutrition:{calories:235,protein:10,fat:18,saturatedFat:7,unsaturatedFat:11,carbs:8,sugar:1,addedSugar:0,fiber:.5},servingSizeG:80},{name:"Kroket",nutrition:{calories:210,protein:6,fat:13,saturatedFat:5,unsaturatedFat:8,carbs:17,sugar:1,addedSugar:0,fiber:.5},servingSizeG:65},{name:"Kaassouffl",nutrition:{calories:280,protein:8,fat:19,saturatedFat:8,unsaturatedFat:11,carbs:19,sugar:1,addedSugar:0,fiber:.5},servingSizeG:100},{name:"Zalm (gebakken)",nutrition:{calories:206,protein:20,fat:13,saturatedFat:2.5,unsaturatedFat:10.5,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:125},{name:"Kibbelng",nutrition:{calories:225,protein:14,fat:12,saturatedFat:2,unsaturatedFat:10,carbs:15,sugar:1,addedSugar:0,fiber:.5},servingSizeG:150},{name:"Tonijn in water (blik)",nutrition:{calories:108,protein:24,fat:1,saturatedFat:.3,unsaturatedFat:.7,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:120},{name:"Aardappelen gekookt",nutrition:{calories:80,protein:2,fat:.1,saturatedFat:0,unsaturatedFat:.1,carbs:17,sugar:.8,addedSugar:0,fiber:2},servingSizeG:200},{name:"Patat / Friet",nutrition:{calories:290,protein:3.5,fat:15,saturatedFat:3,unsaturatedFat:12,carbs:35,sugar:.5,addedSugar:0,fiber:3},servingSizeG:200},{name:"Stamppot boerenkool",nutrition:{calories:95,protein:4,fat:3.5,saturatedFat:1.5,unsaturatedFat:2,carbs:11,sugar:2,addedSugar:0,fiber:3},servingSizeG:250},{name:"Stamppot andijvie",nutrition:{calories:85,protein:3.5,fat:3,saturatedFat:1.5,unsaturatedFat:1.5,carbs:10,sugar:1.5,addedSugar:0,fiber:2.5},servingSizeG:250},{name:"Erwtensoep",nutrition:{calories:80,protein:5,fat:2.5,saturatedFat:1,unsaturatedFat:1.5,carbs:9,sugar:1.5,addedSugar:0,fiber:3},servingSizeG:300},{name:"Tosti ham kaas",nutrition:{calories:260,protein:13,fat:12,saturatedFat:6,unsaturatedFat:6,carbs:25,sugar:2,addedSugar:0,fiber:1.5},servingSizeG:120},{name:"Broodje gezond",nutrition:{calories:180,protein:10,fat:6,saturatedFat:2,unsaturatedFat:4,carbs:22,sugar:3,addedSugar:0,fiber:3},servingSizeG:150},{name:"Uitsmijter (2 eieren)",nutrition:{calories:195,protein:14,fat:12,saturatedFat:4,unsaturatedFat:8,carbs:8,sugar:1,addedSugar:0,fiber:1},servingSizeG:200},{name:"Stroopwafel",nutrition:{calories:450,protein:4,fat:19,saturatedFat:9,unsaturatedFat:10,carbs:65,sugar:35,addedSugar:33,fiber:1},servingSizeG:30},{name:"Gevulde koek",nutrition:{calories:430,protein:7,fat:22,saturatedFat:8,unsaturatedFat:14,carbs:50,sugar:28,addedSugar:25,fiber:3},servingSizeG:55},{name:"Appeltaart",nutrition:{calories:260,protein:3,fat:12,saturatedFat:6,unsaturatedFat:6,carbs:35,sugar:20,addedSugar:15,fiber:1.5},servingSizeG:120},{name:"Tompouce",nutrition:{calories:310,protein:3,fat:15,saturatedFat:9,unsaturatedFat:6,carbs:40,sugar:28,addedSugar:25,fiber:.5},servingSizeG:100},{name:"Bitterbal",nutrition:{calories:260,protein:8,fat:16,saturatedFat:6,unsaturatedFat:10,carbs:20,sugar:1,addedSugar:0,fiber:.5},servingSizeG:30},{name:"Chips naturel",nutrition:{calories:536,protein:6,fat:34,saturatedFat:3,unsaturatedFat:31,carbs:50,sugar:1,addedSugar:0,fiber:4},servingSizeG:30},{name:"Nootjes gezouten",nutrition:{calories:607,protein:20,fat:52,saturatedFat:7,unsaturatedFat:45,carbs:14,sugar:5,addedSugar:0,fiber:7},servingSizeG:30},{name:"Ei gekookt",nutrition:{calories:155,protein:13,fat:11,saturatedFat:3.3,unsaturatedFat:7.7,carbs:1.1,sugar:1.1,addedSugar:0,fiber:0},servingSizeG:60},{name:"Spiegelei",nutrition:{calories:196,protein:14,fat:15,saturatedFat:4,unsaturatedFat:11,carbs:.8,sugar:.8,addedSugar:0,fiber:0},servingSizeG:60},{name:"Roerei",nutrition:{calories:160,protein:11,fat:12,saturatedFat:4,unsaturatedFat:8,carbs:1.5,sugar:1.5,addedSugar:0,fiber:0},servingSizeG:100},{name:"Appel",nutrition:{calories:52,protein:.3,fat:.2,saturatedFat:0,unsaturatedFat:.2,carbs:12,sugar:10,addedSugar:0,fiber:2.4},servingSizeG:150},{name:"Banaan",nutrition:{calories:89,protein:1.1,fat:.3,saturatedFat:.1,unsaturatedFat:.2,carbs:20,sugar:12,addedSugar:0,fiber:2.6},servingSizeG:120},{name:"Sinaasappel",nutrition:{calories:47,protein:.9,fat:.1,saturatedFat:0,unsaturatedFat:.1,carbs:10,sugar:9.4,addedSugar:0,fiber:2.4},servingSizeG:150},{name:"Mandarijn",nutrition:{calories:53,protein:.8,fat:.3,saturatedFat:0,unsaturatedFat:.3,carbs:12,sugar:11,addedSugar:0,fiber:1.8},servingSizeG:75},{name:"Druiven",nutrition:{calories:69,protein:.7,fat:.2,saturatedFat:0,unsaturatedFat:.2,carbs:16,sugar:16,addedSugar:0,fiber:.9},servingSizeG:100},{name:"Witte rijst (gekookt)",nutrition:{calories:130,protein:2.7,fat:.3,saturatedFat:.1,unsaturatedFat:.2,carbs:28,sugar:0,addedSugar:0,fiber:.4},servingSizeG:200},{name:"Zilvervliesrijst (gekookt)",nutrition:{calories:123,protein:2.7,fat:1,saturatedFat:.2,unsaturatedFat:.8,carbs:25,sugar:.4,addedSugar:0,fiber:1.8},servingSizeG:200},{name:"Pasta (gekookt)",nutrition:{calories:157,protein:5.8,fat:.9,saturatedFat:.2,unsaturatedFat:.7,carbs:31,sugar:.6,addedSugar:0,fiber:1.8},servingSizeG:200},{name:"Nasi goreng",nutrition:{calories:145,protein:4,fat:5,saturatedFat:1.5,unsaturatedFat:3.5,carbs:21,sugar:2,addedSugar:0,fiber:1},servingSizeG:300},{name:"Bami goreng",nutrition:{calories:140,protein:4,fat:4.5,saturatedFat:1.5,unsaturatedFat:3,carbs:21,sugar:2,addedSugar:0,fiber:1},servingSizeG:300},{name:"Mayonaise",nutrition:{calories:680,protein:1,fat:75,saturatedFat:6,unsaturatedFat:69,carbs:1,sugar:1,addedSugar:0,fiber:0},servingSizeG:15},{name:"Ketchup",nutrition:{calories:112,protein:1.2,fat:.1,saturatedFat:0,unsaturatedFat:.1,carbs:26,sugar:22,addedSugar:18,fiber:.3},servingSizeG:15},{name:"Mosterd",nutrition:{calories:66,protein:4,fat:3.5,saturatedFat:.2,unsaturatedFat:3.3,carbs:4,sugar:2.5,addedSugar:0,fiber:3},servingSizeG:10},{name:"Satsaus",nutrition:{calories:155,protein:6,fat:10,saturatedFat:2,unsaturatedFat:8,carbs:10,sugar:6,addedSugar:3,fiber:1},servingSizeG:30},{name:"Fritessaus",nutrition:{calories:340,protein:.5,fat:33,saturatedFat:3,unsaturatedFat:30,carbs:11,sugar:8,addedSugar:6,fiber:0},servingSizeG:20}],QL=[{name:"Fruit",icon:"",items:["Appel","Banaan","Sinaasappel","Mandarijn","Druiven","Aardbei","Blauwe bes","Framboos","Watermeloen","Mango","Ananas","Kiwi","Peer","Perzik","Pruim","Grapefruit"]},{name:"Groenten",icon:"",items:["Broccoli","Sperziebonen","Spinazie","Tomaat","Komkommer","Wortel","Paprika","Courgette","Bloemkool","Sla","Champignon","Ui","Aubergine","Boerenkool","Andijvie","Spruitjes","Asperge","Selderij","Radijs","Prei"]},{name:"Eiwit",icon:"",items:["Kipfilet","Kalkoenfilet","Ei","Gekookt ei","Tonijn (in water)","Garnalen","Kabeljauw","Zalm","Tilapia","Pangasius"]},{name:"Zuivel",icon:"",items:["Magere yoghurt","Magere kwark","Skyr","Cottage cheese"]},{name:"Peulvruchten",icon:"",items:["Kidneybonen","Kikkererwten","Linzen","Zwarte bonen","Witte bonen","Tuinbonen"]}],Vae=QL.flatMap(t=>t.items);function ZL(t){const e=t.toLowerCase();return Vae.some(n=>{const r=n.toLowerCase().replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`\\b${r}\\b`).test(e)})}const JL="https://nl.openfoodfacts.org";function zae(t){if(!t)return{calories:0,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0};const e=t.fat_100g??0,n=t["saturated-fat_100g"]??0;return{calories:t["energy-kcal_100g"]??0,protein:t.proteins_100g??0,fat:e,saturatedFat:n,unsaturatedFat:Math.max(0,e-n),carbs:t.carbohydrates_100g??0,sugar:t.sugars_100g??0,addedSugar:t.sugars_100g??0,fiber:t.fiber_100g??0}}function Uae(t){const e=[t.serving_size,t.quantity].filter(Boolean).join(" ").toLowerCase();return/\bml\b|\bliter\b|\bcl\b|\bdl\b/.test(e)?"ml":"g"}function TA(t){const e=t.product_name_nl||t.product_name;if(!e)return null;const n=zae(t.nutriments);if(n.calories===0&&n.protein===0&&n.fat===0)return null;const r=ZL(e),i=r?0:g0(n),a=Uae(t);return{name:e,brand:t.brands||void 0,barcode:t.code||void 0,nutrition:n,pointsPer100g:i,servingSizeG:t.serving_quantity||100,unit:a,isZeroPoint:r,source:"openfoodfacts",imageUrl:t.image_front_small_url||void 0,createdAt:new Date}}function cI(t){const e=t.toLowerCase();return Fae.filter(n=>n.name.toLowerCase().includes(e)).map(n=>{const r=ZL(n.name),i=r?0:g0(n.nutrition);return{...n,pointsPer100g:i,isZeroPoint:r,source:"nevo",createdAt:new Date}})}async function eB(t){const e=t.toLowerCase();return(await ot.foodItems.toArray()).filter(r=>r.name.toLowerCase().includes(e))}async function tB(t,e,n){if(!t||t.length<2)return[];const r=n??cI(t);try{const i=new URLSearchParams({search_terms:t,search_simple:"1",action:"process",json:"1",page_size:"15",fields:"product_name,product_name_nl,brands,code,nutriments,serving_quantity,serving_size,quantity,image_front_small_url",lc:"nl",tagtype_0:"countries",tag_contains_0:"contains",tag_0:"Netherlands"}),a=await fetch(`${JL}/cgi/search.pl?${i}`,{signal:e});if(!a.ok)return r;let m=((await a.json()).products||[]).map(TA).filter(_=>_!==null);if(m.length<3)try{const _=new URLSearchParams({search_terms:t,search_simple:"1",action:"process",json:"1",page_size:"10",fields:"product_name,product_name_nl,brands,code,nutriments,serving_quantity,serving_size,quantity,image_front_small_url",lc:"nl"}),T=await fetch(`https://world.openfoodfacts.org/cgi/search.pl?${_}`,{signal:e});if(T.ok){const M=((await T.json()).products||[]).map(TA).filter(z=>z!==null),L=new Set(m.map(z=>z.name.toLowerCase()));for(const z of M)L.has(z.name.toLowerCase())||(m.push(z),L.add(z.name.toLowerCase()))}}catch{}const p=new Set(r.map(_=>_.name.toLowerCase())),b=[...r];for(const _ of m)p.has(_.name.toLowerCase())||(b.push(_),p.add(_.name.toLowerCase()));return b}catch(i){return i instanceof DOMException&&i.name==="AbortError"?[]:(console.error("Zoekfout:",i),r)}}const K4="product_name,product_name_nl,brands,code,nutriments,serving_quantity,serving_size,quantity,image_front_small_url";async function qae(t){try{const e=await ot.foodItems.where("barcode").equals(t).first();if(e)return e}catch{}try{const e=await $4(`${JL}/api/v2/product/${t}?fields=${K4}`);if(e)return await W4(e),e}catch{}try{const e=await $4(`https://world.openfoodfacts.org/api/v2/product/${t}?fields=${K4}`);if(e)return await W4(e),e}catch(e){console.error("Barcode lookup fout:",e)}return null}async function W4(t){if(t.barcode)try{await ot.foodItems.where("barcode").equals(t.barcode).first()||await ot.foodItems.add({...t,source:"openfoodfacts"})}catch{}}async function $4(t){const e=await fetch(t);if(!e.ok)return null;const n=await e.json();return n.status!==1||!n.product?null:TA(n.product)}function Gae({onCreated:t,onClose:e}){const[n,r]=D.useState(""),[i,a]=D.useState([]),[l,f]=D.useState(""),[m,p]=D.useState([]),[b,_]=D.useState(!1),[T,N]=D.useState([]),[j,M]=D.useState([]),L=D.useRef(null),z=D.useRef(null);D.useEffect(()=>{EA().then(N),_A(10).then(M)},[]);const $=D.useCallback(async xe=>{if(xe.length<2){p([]);return}z.current?.abort();const de=new AbortController;z.current=de;const ye=cI(xe),_e=await eB(xe),qe=new Set(ye.map(tt=>tt.name.toLowerCase())),Ve=[...ye];for(const tt of _e)qe.has(tt.name.toLowerCase())||(Ve.push(tt),qe.add(tt.name.toLowerCase()));!de.signal.aborted&&Ve.length>0&&p(Ve),_(!0);try{const tt=await tB(xe,de.signal,Ve);de.signal.aborted||(p(tt),_(!1))}catch{de.signal.aborted||_(!1)}},[]),K=xe=>{f(xe),L.current&&clearTimeout(L.current),L.current=setTimeout(()=>$(xe),400)},X=xe=>{a(de=>[...de,{food:xe,quantityG:xe.servingSizeG||100}]),f(""),p([])},se=(xe,de)=>{a(ye=>ye.map((_e,qe)=>qe===xe?{..._e,quantityG:Math.max(1,de)}:_e))},J=xe=>{a(de=>de.filter((ye,_e)=>_e!==xe))},V=i.reduce((xe,de)=>xe+de.quantityG,0),W=i.reduce((xe,de)=>{const ye=de.quantityG/100;return{calories:xe.calories+de.food.nutrition.calories*ye,protein:xe.protein+de.food.nutrition.protein*ye,fat:xe.fat+de.food.nutrition.fat*ye,saturatedFat:xe.saturatedFat+de.food.nutrition.saturatedFat*ye,unsaturatedFat:xe.unsaturatedFat+de.food.nutrition.unsaturatedFat*ye,carbs:xe.carbs+de.food.nutrition.carbs*ye,sugar:xe.sugar+de.food.nutrition.sugar*ye,addedSugar:xe.addedSugar+de.food.nutrition.addedSugar*ye,fiber:xe.fiber+de.food.nutrition.fiber*ye}},{calories:0,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0}),H=V>0?{calories:Math.round(W.calories/V*100),protein:+(W.protein/V*100).toFixed(1),fat:+(W.fat/V*100).toFixed(1),saturatedFat:+(W.saturatedFat/V*100).toFixed(1),unsaturatedFat:+(W.unsaturatedFat/V*100).toFixed(1),carbs:+(W.carbs/V*100).toFixed(1),sugar:+(W.sugar/V*100).toFixed(1),addedSugar:+(W.addedSugar/V*100).toFixed(1),fiber:+(W.fiber/V*100).toFixed(1)}:{calories:0,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0},oe=g0(H),ae=V>0?Math.max(0,Math.round(oe*V/100)):0,Z=n.trim().length>=2&&i.length>=2,ee=async()=>{if(!Z)return;const xe=await sI({name:n.trim(),nutrition:H,pointsPer100g:oe,servingSizeG:Math.round(V),isZeroPoint:oe===0,isFavorite:!0,source:"user"});t(xe)};return O.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center animate-fade-in",children:[O.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:e}),O.jsxs("div",{className:"relative bg-white rounded-t-3xl w-full max-w-lg animate-slide-up overflow-y-auto",style:{paddingBottom:"calc(20px + var(--safe-area-bottom))",maxHeight:"92vh"},children:[O.jsx("div",{className:"flex justify-center pt-3 pb-2",children:O.jsx("div",{className:"w-9 h-1 rounded-full bg-ios-separator"})}),O.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer",children:O.jsx(sm,{size:18,className:"text-ios-secondary"})}),O.jsxs("div",{className:"px-5 pb-4",children:[O.jsx("h2",{className:"text-[20px] font-bold mb-4",children:"Samengesteld product"}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Naam *"}),O.jsx("input",{type:"text",placeholder:"bijv. Tosti ham-kaas",value:n,onChange:xe=>r(xe.target.value),className:"bg-white rounded-xl px-4 py-3 text-[16px] w-full border border-ios-separator"})]}),O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Ingredinten toevoegen"}),O.jsxs("div",{className:"relative mb-3",children:[O.jsx(Cp,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:"text",placeholder:"Zoek ingredint...",value:l,onChange:xe=>K(xe.target.value),className:"bg-white rounded-xl pl-9 pr-4 py-2.5 text-[15px] w-full border border-ios-separator"}),b&&O.jsx(jc,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-ios-secondary animate-spin"})]}),m.length>0&&O.jsx("div",{className:"bg-white border border-ios-separator rounded-xl mb-3 max-h-40 overflow-y-auto",children:m.slice(0,8).map((xe,de)=>O.jsxs("button",{onClick:()=>X(xe),className:"w-full flex items-center gap-2 px-3 py-2 text-left bg-transparent border-none cursor-pointer active:bg-gray-50 text-[14px]",children:[O.jsx(Ff,{size:14,className:"text-primary flex-shrink-0"}),O.jsx("span",{className:"truncate",children:xe.name}),O.jsxs("span",{className:"text-ios-secondary text-[12px] ml-auto flex-shrink-0",children:[xe.pointsPer100g," pt"]})]},`${xe.name}-${de}`))}),l.length<2&&(T.length>0||j.length>0)&&O.jsxs("div",{className:"bg-white border border-ios-separator rounded-xl mb-3 max-h-48 overflow-y-auto",children:[T.length>0&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-ios-bg",children:[O.jsx($x,{size:12,className:"text-ios-destructive"}),O.jsx("span",{className:"text-[12px] font-semibold text-ios-secondary uppercase tracking-wide",children:"Favorieten"})]}),T.slice(0,5).map((xe,de)=>O.jsxs("button",{onClick:()=>X(xe),className:"w-full flex items-center gap-2 px-3 py-2 text-left bg-transparent border-none cursor-pointer active:bg-gray-50 text-[14px]",children:[O.jsx(Ff,{size:14,className:"text-primary flex-shrink-0"}),O.jsx("span",{className:"truncate",children:xe.name}),O.jsxs("span",{className:"text-ios-secondary text-[12px] ml-auto flex-shrink-0",children:[xe.pointsPer100g," pt"]})]},`fav-${xe.name}-${de}`))]}),j.length>0&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-ios-bg",children:[O.jsx(oI,{size:12,className:"text-ios-blue"}),O.jsx("span",{className:"text-[12px] font-semibold text-ios-secondary uppercase tracking-wide",children:"Recent"})]}),j.slice(0,5).map((xe,de)=>O.jsxs("button",{onClick:()=>X(xe),className:"w-full flex items-center gap-2 px-3 py-2 text-left bg-transparent border-none cursor-pointer active:bg-gray-50 text-[14px]",children:[O.jsx(Ff,{size:14,className:"text-primary flex-shrink-0"}),O.jsx("span",{className:"truncate",children:xe.name}),O.jsxs("span",{className:"text-ios-secondary text-[12px] ml-auto flex-shrink-0",children:[xe.pointsPer100g," pt"]})]},`recent-${xe.name}-${de}`))]})]}),i.length>0&&O.jsx("div",{className:"bg-ios-bg rounded-xl mb-4",children:i.map((xe,de)=>O.jsxs("div",{className:`flex items-center gap-2 px-3 py-2.5 ${de<i.length-1?"border-b border-ios-separator":""}`,children:[O.jsx("div",{className:"flex-1 min-w-0",children:O.jsx("div",{className:"text-[14px] font-medium truncate",children:xe.food.name})}),O.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[O.jsx("button",{onClick:()=>se(de,xe.quantityG-10),className:"w-7 h-7 rounded-full bg-white flex items-center justify-center border-none cursor-pointer text-ios-secondary",children:O.jsx(BL,{size:12})}),O.jsx("input",{type:"number",value:xe.quantityG,onChange:ye=>se(de,Number(ye.target.value)),className:"w-14 text-center bg-white rounded-lg px-1 py-1 text-[14px] border border-ios-separator"}),O.jsx("span",{className:"text-[12px] text-ios-secondary",children:"g"}),O.jsx("button",{onClick:()=>se(de,xe.quantityG+10),className:"w-7 h-7 rounded-full bg-white flex items-center justify-center border-none cursor-pointer text-ios-secondary",children:O.jsx(Ff,{size:12})}),O.jsx("button",{onClick:()=>J(de),className:"w-7 h-7 rounded-full flex items-center justify-center border-none cursor-pointer text-ios-destructive bg-transparent",children:O.jsx(sm,{size:14})})]})]},`${xe.food.name}-${de}`))}),i.length<2&&O.jsx("p",{className:"text-[13px] text-ios-secondary text-center mb-4",children:"Voeg minimaal 2 ingredinten toe"}),i.length>=2&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"bg-ios-bg rounded-2xl p-4 mb-3 text-center",children:[O.jsx("div",{className:"text-[36px] font-bold text-primary leading-none",children:ae}),O.jsxs("div",{className:"text-[13px] text-ios-secondary mt-1",children:["punten totaal (",Math.round(V),"g)  ",oe," pt/100g"]})]}),O.jsxs("div",{className:"flex justify-around mb-4 py-2 bg-ios-bg rounded-xl text-center",children:[O.jsxs("div",{children:[O.jsx("div",{className:"text-[14px] font-semibold",children:Math.round(W.calories)}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"kcal"})]}),O.jsxs("div",{children:[O.jsxs("div",{className:"text-[14px] font-semibold",children:[W.protein.toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"eiwit"})]}),O.jsxs("div",{children:[O.jsxs("div",{className:"text-[14px] font-semibold",children:[W.carbs.toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"koolh."})]}),O.jsxs("div",{children:[O.jsxs("div",{className:"text-[14px] font-semibold",children:[W.fat.toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"vet"})]})]})]}),O.jsxs(Js,{fullWidth:!0,size:"lg",onClick:ee,disabled:!Z,children:["Opslaan  ",ae," pt"]})]})]})]})}function Hae(){const[t]=yK(),e=t.get("meal")||"lunch",[n,r]=D.useState("recent"),[i,a]=D.useState(""),[l,f]=D.useState([]),[m,p]=D.useState([]),[b,_]=D.useState([]),[T,N]=D.useState(!1),[j,M]=D.useState(!0),[L,z]=D.useState(null),[$,K]=D.useState(!1),[X,se]=D.useState(!1),[J,V]=D.useState(!1),W=D.useRef(null),H=D.useRef(null),oe=D.useRef(null),ae=Xx(Ve=>Ve.addEntry);D.useEffect(()=>{Z()},[]);const Z=async()=>{M(!0);const[Ve,tt]=await Promise.all([_A(),EA()]);p(Ve),_(tt),M(!1)},ee=D.useCallback(async Ve=>{if(Ve.length<2){f([]),V(!1);return}H.current&&H.current.abort();const tt=new AbortController;H.current=tt;const me=new Set(b.map(pt=>pt.name.toLowerCase())),Se=pt=>pt.map(lt=>({...lt,isFavorite:me.has(lt.name.toLowerCase())})),Ye=cI(Ve),ze=await eB(Ve),yt=new Set(Ye.map(pt=>pt.name.toLowerCase())),$e=[...Ye];for(const pt of ze)yt.has(pt.name.toLowerCase())||($e.push(pt),yt.add(pt.name.toLowerCase()));!tt.signal.aborted&&$e.length>0&&(f(Se($e)),V(!0)),N(!0);try{const pt=await tB(Ve,tt.signal,$e);tt.signal.aborted||(f(Se(pt)),N(!1),V(!0))}catch{tt.signal.aborted||N(!1)}},[b]),xe=Ve=>{a(Ve),Ve.length>=2&&r("search"),W.current&&clearTimeout(W.current),W.current=setTimeout(()=>ee(Ve),300)},de=async Ve=>{const tt=await Dte(Ve),me=Ye=>Ye.map(ze=>ze.name.toLowerCase()===Ve.name.toLowerCase()?{...ze,isFavorite:tt}:ze);p(me),f(me);const Se=await EA();_(Se)},ye=async(Ve,tt,me)=>{if(!L)return;const Ye=p0(L.pointsPer100g,Ve)*(me||1);await ae({foodItem:L,mealType:tt,quantityG:Ve,quantity:me,points:Ye}),navigator.vibrate?.(10),z(null);const ze=await _A();p(ze)},_e=Ve=>{K(!1),se(!1),z(Ve),Z()},qe=Ve=>{r(Ve),Ve==="search"&&setTimeout(()=>oe.current?.focus(),100)};return O.jsxs(Wc,{title:"Zoek voedsel",children:[O.jsxs("div",{className:"flex flex-col gap-3",children:[O.jsxs("div",{className:"relative",children:[O.jsx(Cp,{size:18,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{ref:oe,type:"text",placeholder:"Zoek een product...",value:i,onChange:Ve=>xe(Ve.target.value),onFocus:()=>i.length>=2&&r("search"),className:"bg-white rounded-xl pl-10 pr-4 py-3 text-[17px] w-full shadow-sm"}),T&&O.jsx(jc,{size:18,className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-ios-secondary animate-spin"})]}),O.jsxs("div",{className:"flex gap-1 bg-ios-bg rounded-xl p-1",children:[O.jsx($1,{active:n==="recent",onClick:()=>qe("recent"),icon:O.jsx(oI,{size:14}),label:"Recent"}),O.jsx($1,{active:n==="favorites",onClick:()=>qe("favorites"),icon:O.jsx($x,{size:14}),label:"Favorieten"}),O.jsx($1,{active:n==="zeropoint",onClick:()=>qe("zeropoint"),icon:O.jsx(Hne,{size:14}),label:"0 Punten"}),O.jsx($1,{active:n==="search",onClick:()=>qe("search"),icon:O.jsx(Cp,{size:14}),label:"Zoeken"})]}),n==="recent"&&O.jsx(Kae,{foods:m,isLoading:j,onSelect:z,onToggleFavorite:de}),n==="favorites"&&O.jsx(Wae,{foods:b,isLoading:j,onSelect:z,onToggleFavorite:de}),n==="zeropoint"&&O.jsx($ae,{onSelect:z}),n==="search"&&O.jsx(Yae,{results:l,isSearching:T,hasSearched:J,query:i,onSelect:z,onToggleFavorite:de}),O.jsxs("div",{className:"flex gap-2",children:[O.jsxs("button",{onClick:()=>K(!0),className:"flex-1 flex items-center justify-center gap-2 py-3.5 bg-white rounded-xl border border-dashed border-ios-separator text-[15px] font-medium text-primary cursor-pointer active:bg-gray-50 transition-colors",children:[O.jsx(Ff,{size:18}),"Eigen product"]}),O.jsxs("button",{onClick:()=>se(!0),className:"flex-1 flex items-center justify-center gap-2 py-3.5 bg-white rounded-xl border border-dashed border-ios-separator text-[15px] font-medium text-ios-blue cursor-pointer active:bg-gray-50 transition-colors",children:[O.jsx(dne,{size:18}),"Samengesteld"]})]})]}),L&&O.jsx(XL,{food:L,defaultMealType:e,onAdd:ye,onClose:()=>z(null)}),$&&O.jsx(Bae,{onCreated:_e,onClose:()=>K(!1)}),X&&O.jsx(Gae,{onCreated:_e,onClose:()=>se(!1)})]})}function $1({active:t,onClick:e,icon:n,label:r}){return O.jsxs("button",{onClick:e,className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[13px] font-medium border-none cursor-pointer transition-colors ${t?"bg-white text-primary shadow-sm":"bg-transparent text-ios-secondary"}`,children:[n,r]})}function Kae({foods:t,isLoading:e,onSelect:n,onToggleFavorite:r}){return e?O.jsx("div",{className:"flex justify-center py-12",children:O.jsx(jc,{size:24,className:"text-ios-secondary animate-spin"})}):t.length===0?O.jsxs("div",{className:"text-center py-12",children:[O.jsx(oI,{size:48,className:"text-ios-separator mx-auto mb-3"}),O.jsx("p",{className:"text-[17px] text-ios-secondary",children:"Nog geen producten gebruikt"}),O.jsx("p",{className:"text-[13px] text-ios-secondary mt-1",children:"Producten die je logt verschijnen hier automatisch"})]}):O.jsx(Nn,{children:t.map((i,a)=>O.jsx("div",{className:a<t.length-1?"border-b border-ios-separator":"",children:O.jsx(uI,{food:i,onSelect:n,onToggleFavorite:r})},`recent-${i.name}-${a}`))})}function Wae({foods:t,isLoading:e,onSelect:n,onToggleFavorite:r}){return e?O.jsx("div",{className:"flex justify-center py-12",children:O.jsx(jc,{size:24,className:"text-ios-secondary animate-spin"})}):t.length===0?O.jsxs("div",{className:"text-center py-12",children:[O.jsx($x,{size:48,className:"text-ios-separator mx-auto mb-3"}),O.jsx("p",{className:"text-[17px] text-ios-secondary",children:"Geen favorieten"}),O.jsx("p",{className:"text-[13px] text-ios-secondary mt-1",children:"Tik op het hartje om een product als favoriet op te slaan"})]}):O.jsx(Nn,{children:t.map((i,a)=>O.jsx("div",{className:a<t.length-1?"border-b border-ios-separator":"",children:O.jsx(uI,{food:{...i,isFavorite:!0},onSelect:n,onToggleFavorite:r})},`fav-${i.id??i.name}-${a}`))})}function $ae({onSelect:t}){const[e,n]=D.useState(null),r=i=>({name:i,nutrition:{calories:0,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0},pointsPer100g:0,servingSizeG:100,isZeroPoint:!0,source:"nevo",createdAt:new Date});return O.jsx("div",{className:"flex flex-col gap-2",children:QL.map(i=>{const a=e===i.name;return O.jsxs(Nn,{children:[O.jsxs("button",{onClick:()=>n(a?null:i.name),className:"w-full flex items-center justify-between px-4 py-3 border-none bg-transparent cursor-pointer",children:[O.jsxs("div",{className:"flex items-center gap-2.5",children:[O.jsx("span",{className:"text-lg",children:i.icon}),O.jsx("span",{className:"text-[15px] font-semibold",children:i.name}),O.jsxs("span",{className:"text-[13px] text-ios-secondary",children:["(",i.items.length,")"]})]}),a?O.jsx(ML,{size:18,className:"text-ios-secondary"}):O.jsx(mv,{size:18,className:"text-ios-secondary"})]}),a&&O.jsx("div",{className:"border-t border-ios-separator",children:i.items.map((l,f)=>O.jsxs("button",{onClick:()=>t(r(l)),className:`w-full flex items-center justify-between px-4 py-2.5 border-none bg-transparent cursor-pointer active:bg-gray-50 text-left ${f<i.items.length-1?"border-b border-ios-separator":""}`,children:[O.jsx("span",{className:"text-[15px]",children:l}),O.jsx("span",{className:"text-[13px] font-medium text-primary",children:"0 pt"})]},l))})]},i.name)})})}function Yae({results:t,isSearching:e,hasSearched:n,query:r,onSelect:i,onToggleFavorite:a}){return t.length>0?O.jsx(Nn,{children:t.map((l,f)=>O.jsx("div",{className:f<t.length-1?"border-b border-ios-separator":"",children:O.jsx(uI,{food:l,onSelect:i,onToggleFavorite:a})},`search-${l.barcode??l.name}-${f}`))}):n&&t.length===0&&!e?O.jsxs("div",{className:"text-center py-12",children:[O.jsxs("p",{className:"text-[17px] text-ios-secondary",children:['Geen resultaten voor "',r,'"']}),O.jsx("p",{className:"text-[13px] text-ios-secondary mt-1",children:"Probeer een andere zoekterm of maak een eigen product aan"})]}):O.jsxs("div",{className:"text-center py-12",children:[O.jsx(Cp,{size:48,className:"text-ios-separator mx-auto mb-3"}),O.jsx("p",{className:"text-[17px] text-ios-secondary",children:"Zoek op productnaam of merk"}),O.jsx("p",{className:"text-[13px] text-ios-secondary mt-1",children:"Of gebruik de scanner voor barcodes"})]})}var At;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(At||(At={}));var Y4=new Map([[At.QR_CODE,"QR_CODE"],[At.AZTEC,"AZTEC"],[At.CODABAR,"CODABAR"],[At.CODE_39,"CODE_39"],[At.CODE_93,"CODE_93"],[At.CODE_128,"CODE_128"],[At.DATA_MATRIX,"DATA_MATRIX"],[At.MAXICODE,"MAXICODE"],[At.ITF,"ITF"],[At.EAN_13,"EAN_13"],[At.EAN_8,"EAN_8"],[At.PDF_417,"PDF_417"],[At.RSS_14,"RSS_14"],[At.RSS_EXPANDED,"RSS_EXPANDED"],[At.UPC_A,"UPC_A"],[At.UPC_E,"UPC_E"],[At.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),X4;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(X4||(X4={}));function Xae(t){return Object.values(At).includes(t)}var vv;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(vv||(vv={}));var Qae=(function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[vv.SCAN_TYPE_CAMERA,vv.SCAN_TYPE_FILE],t})(),nB=(function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Y4.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Y4.get(e))},t})(),Q4=(function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t})(),IA;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(IA||(IA={}));var Zae=(function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:IA.UNKWOWN_ERROR}},t})(),Jae=(function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t})();function au(t){return typeof t>"u"||t===null}var Ah=(function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t})(),rB=(function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(i),l=Object.keys(e),f=0,m=l;f<m.length;f++){var p=m[f];if(a.has(p))return n.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},t})(),$g={exports:{}},ese=$g.exports,Z4;function tse(){return Z4||(Z4=1,(function(t,e){(function(n,r){r(e)})(ese,(function(n){function r(Y){return Y==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,o){Y.__proto__=o}||function(Y,o){for(var c in o)o.hasOwnProperty(c)&&(Y[c]=o[c])};function a(Y,o){i(Y,o);function c(){this.constructor=Y}Y.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}function l(Y,o){var c=Object.setPrototypeOf;c?c(Y,o):Y.__proto__=o}function f(Y,o){o===void 0&&(o=Y.constructor);var c=Error.captureStackTrace;c&&c(Y,o)}var m=(function(Y){a(o,Y);function o(c){var h=this.constructor,y=Y.call(this,c)||this;return Object.defineProperty(y,"name",{value:h.name,enumerable:!1}),l(y,h.prototype),f(y),y}return o})(Error);class p extends m{constructor(o=void 0){super(o),this.message=o}getKind(){return this.constructor.kind}}p.kind="Exception";class b extends p{}b.kind="ArgumentException";class _ extends p{}_.kind="IllegalArgumentException";class T{constructor(o){if(this.binarizer=o,o===null)throw new _("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,c){return this.binarizer.getBlackRow(o,c)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,c,h,y){const x=this.binarizer.getLuminanceSource().crop(o,c,h,y);return new T(this.binarizer.createBinarizer(x))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class N extends p{static getChecksumInstance(){return new N}}N.kind="ChecksumException";class j{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class M{static arraycopy(o,c,h,y,x){for(;x--;)h[y++]=o[c++]}static currentTimeMillis(){return Date.now()}}class L extends p{}L.kind="IndexOutOfBoundsException";class z extends L{constructor(o=void 0,c=void 0){super(c),this.index=o,this.message=c}}z.kind="ArrayIndexOutOfBoundsException";class ${static fill(o,c){for(let h=0,y=o.length;h<y;h++)o[h]=c}static fillWithin(o,c,h,y){$.rangeCheck(o.length,c,h);for(let x=c;x<h;x++)o[x]=y}static rangeCheck(o,c,h){if(c>h)throw new _("fromIndex("+c+") > toIndex("+h+")");if(c<0)throw new z(c);if(h>o)throw new z(h)}static asList(...o){return o}static create(o,c,h){return Array.from({length:o}).map(x=>Array.from({length:c}).fill(h))}static createInt32Array(o,c,h){return Array.from({length:o}).map(x=>Int32Array.from({length:c}).fill(h))}static equals(o,c){if(!o||!c||!o.length||!c.length||o.length!==c.length)return!1;for(let h=0,y=o.length;h<y;h++)if(o[h]!==c[h])return!1;return!0}static hashCode(o){if(o===null)return 0;let c=1;for(const h of o)c=31*c+h;return c}static fillUint8Array(o,c){for(let h=0;h!==o.length;h++)o[h]=c}static copyOf(o,c){return o.slice(0,c)}static copyOfUint8Array(o,c){if(o.length<=c){const h=new Uint8Array(c);return h.set(o),h}return o.slice(0,c)}static copyOfRange(o,c,h){const y=h-c,x=new Int32Array(y);return M.arraycopy(o,c,x,0,y),x}static binarySearch(o,c,h){h===void 0&&(h=$.numberComparator);let y=0,x=o.length-1;for(;y<=x;){const E=x+y>>1,d=h(c,o[E]);if(d>0)y=E+1;else if(d<0)x=E-1;else return E}return-y-1}static numberComparator(o,c){return o-c}}class K{static numberOfTrailingZeros(o){let c;if(o===0)return 32;let h=31;return c=o<<16,c!==0&&(h-=16,o=c),c=o<<8,c!==0&&(h-=8,o=c),c=o<<4,c!==0&&(h-=4,o=c),c=o<<2,c!==0&&(h-=2,o=c),h-(o<<1>>>31)}static numberOfLeadingZeros(o){if(o===0)return 32;let c=1;return o>>>16||(c+=16,o<<=16),o>>>24||(c+=8,o<<=8),o>>>28||(c+=4,o<<=4),o>>>30||(c+=2,o<<=2),c-=o>>>31,c}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),o=o+(o>>>4)&252645135,o=o+(o>>>8),o=o+(o>>>16),o&63}static truncDivision(o,c){return Math.trunc(o/c)}static parseInt(o,c=void 0){return parseInt(o,c)}}K.MIN_VALUE_32_BITS=-2147483648,K.MAX_VALUE=Number.MAX_SAFE_INTEGER;class X{constructor(o,c){o===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,c==null?this.bits=X.makeArray(o):this.bits=c)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>this.bits.length*32){const c=X.makeArray(o);M.arraycopy(this.bits,0,c,0,this.bits.length),this.bits=c}}get(o){return(this.bits[Math.floor(o/32)]&1<<(o&31))!==0}set(o){this.bits[Math.floor(o/32)]|=1<<(o&31)}flip(o){this.bits[Math.floor(o/32)]^=1<<(o&31)}getNextSet(o){const c=this.size;if(o>=c)return c;const h=this.bits;let y=Math.floor(o/32),x=h[y];x&=~((1<<(o&31))-1);const E=h.length;for(;x===0;){if(++y===E)return c;x=h[y]}const d=y*32+K.numberOfTrailingZeros(x);return d>c?c:d}getNextUnset(o){const c=this.size;if(o>=c)return c;const h=this.bits;let y=Math.floor(o/32),x=~h[y];x&=~((1<<(o&31))-1);const E=h.length;for(;x===0;){if(++y===E)return c;x=~h[y]}const d=y*32+K.numberOfTrailingZeros(x);return d>c?c:d}setBulk(o,c){this.bits[Math.floor(o/32)]=c}setRange(o,c){if(c<o||o<0||c>this.size)throw new _;if(c===o)return;c--;const h=Math.floor(o/32),y=Math.floor(c/32),x=this.bits;for(let E=h;E<=y;E++){const d=E>h?0:o&31,A=(2<<(E<y?31:c&31))-(1<<d);x[E]|=A}}clear(){const o=this.bits.length,c=this.bits;for(let h=0;h<o;h++)c[h]=0}isRange(o,c,h){if(c<o||o<0||c>this.size)throw new _;if(c===o)return!0;c--;const y=Math.floor(o/32),x=Math.floor(c/32),E=this.bits;for(let d=y;d<=x;d++){const v=d>y?0:o&31,I=(2<<(d<x?31:c&31))-(1<<v)&4294967295;if((E[d]&I)!==(h?I:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(o,c){if(c<0||c>32)throw new _("Num bits must be between 0 and 32");this.ensureCapacity(this.size+c);for(let h=c;h>0;h--)this.appendBit((o>>h-1&1)===1)}appendBitArray(o){const c=o.size;this.ensureCapacity(this.size+c);for(let h=0;h<c;h++)this.appendBit(o.get(h))}xor(o){if(this.size!==o.size)throw new _("Sizes don't match");const c=this.bits;for(let h=0,y=c.length;h<y;h++)c[h]^=o.bits[h]}toBytes(o,c,h,y){for(let x=0;x<y;x++){let E=0;for(let d=0;d<8;d++)this.get(o)&&(E|=1<<7-d),o++;c[h+x]=E}}getBitArray(){return this.bits}reverse(){const o=new Int32Array(this.bits.length),c=Math.floor((this.size-1)/32),h=c+1,y=this.bits;for(let x=0;x<h;x++){let E=y[x];E=E>>1&1431655765|(E&1431655765)<<1,E=E>>2&858993459|(E&858993459)<<2,E=E>>4&252645135|(E&252645135)<<4,E=E>>8&16711935|(E&16711935)<<8,E=E>>16&65535|(E&65535)<<16,o[c-x]=E}if(this.size!==h*32){const x=h*32-this.size;let E=o[0]>>>x;for(let d=1;d<h;d++){const v=o[d];E|=v<<32-x,o[d-1]=E,E=v>>>x}o[h-1]=E}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){if(!(o instanceof X))return!1;const c=o;return this.size===c.size&&$.equals(this.bits,c.bits)}hashCode(){return 31*this.size+$.hashCode(this.bits)}toString(){let o="";for(let c=0,h=this.size;c<h;c++)(c&7)===0&&(o+=" "),o+=this.get(c)?"X":".";return o}clone(){return new X(this.size,this.bits.slice())}}var se;(function(Y){Y[Y.OTHER=0]="OTHER",Y[Y.PURE_BARCODE=1]="PURE_BARCODE",Y[Y.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",Y[Y.TRY_HARDER=3]="TRY_HARDER",Y[Y.CHARACTER_SET=4]="CHARACTER_SET",Y[Y.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",Y[Y.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",Y[Y.ASSUME_GS1=7]="ASSUME_GS1",Y[Y.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",Y[Y.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",Y[Y.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(se||(se={}));var J=se;class V extends p{static getFormatInstance(){return new V}}V.kind="FormatException";var W;(function(Y){Y[Y.Cp437=0]="Cp437",Y[Y.ISO8859_1=1]="ISO8859_1",Y[Y.ISO8859_2=2]="ISO8859_2",Y[Y.ISO8859_3=3]="ISO8859_3",Y[Y.ISO8859_4=4]="ISO8859_4",Y[Y.ISO8859_5=5]="ISO8859_5",Y[Y.ISO8859_6=6]="ISO8859_6",Y[Y.ISO8859_7=7]="ISO8859_7",Y[Y.ISO8859_8=8]="ISO8859_8",Y[Y.ISO8859_9=9]="ISO8859_9",Y[Y.ISO8859_10=10]="ISO8859_10",Y[Y.ISO8859_11=11]="ISO8859_11",Y[Y.ISO8859_13=12]="ISO8859_13",Y[Y.ISO8859_14=13]="ISO8859_14",Y[Y.ISO8859_15=14]="ISO8859_15",Y[Y.ISO8859_16=15]="ISO8859_16",Y[Y.SJIS=16]="SJIS",Y[Y.Cp1250=17]="Cp1250",Y[Y.Cp1251=18]="Cp1251",Y[Y.Cp1252=19]="Cp1252",Y[Y.Cp1256=20]="Cp1256",Y[Y.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",Y[Y.UTF8=22]="UTF8",Y[Y.ASCII=23]="ASCII",Y[Y.Big5=24]="Big5",Y[Y.GB18030=25]="GB18030",Y[Y.EUC_KR=26]="EUC_KR"})(W||(W={}));class H{constructor(o,c,h,...y){this.valueIdentifier=o,this.name=h,typeof c=="number"?this.values=Int32Array.from([c]):this.values=c,this.otherEncodingNames=y,H.VALUE_IDENTIFIER_TO_ECI.set(o,this),H.NAME_TO_ECI.set(h,this);const x=this.values;for(let E=0,d=x.length;E!==d;E++){const v=x[E];H.VALUES_TO_ECI.set(v,this)}for(const E of y)H.NAME_TO_ECI.set(E,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new V("incorect value");const c=H.VALUES_TO_ECI.get(o);if(c===void 0)throw new V("incorect value");return c}static getCharacterSetECIByName(o){const c=H.NAME_TO_ECI.get(o);if(c===void 0)throw new V("incorect value");return c}equals(o){if(!(o instanceof H))return!1;const c=o;return this.getName()===c.getName()}}H.VALUE_IDENTIFIER_TO_ECI=new Map,H.VALUES_TO_ECI=new Map,H.NAME_TO_ECI=new Map,H.Cp437=new H(W.Cp437,Int32Array.from([0,2]),"Cp437"),H.ISO8859_1=new H(W.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),H.ISO8859_2=new H(W.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),H.ISO8859_3=new H(W.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),H.ISO8859_4=new H(W.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),H.ISO8859_5=new H(W.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),H.ISO8859_6=new H(W.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),H.ISO8859_7=new H(W.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),H.ISO8859_8=new H(W.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),H.ISO8859_9=new H(W.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),H.ISO8859_10=new H(W.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),H.ISO8859_11=new H(W.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),H.ISO8859_13=new H(W.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),H.ISO8859_14=new H(W.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),H.ISO8859_15=new H(W.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),H.ISO8859_16=new H(W.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),H.SJIS=new H(W.SJIS,20,"SJIS","Shift_JIS"),H.Cp1250=new H(W.Cp1250,21,"Cp1250","windows-1250"),H.Cp1251=new H(W.Cp1251,22,"Cp1251","windows-1251"),H.Cp1252=new H(W.Cp1252,23,"Cp1252","windows-1252"),H.Cp1256=new H(W.Cp1256,24,"Cp1256","windows-1256"),H.UnicodeBigUnmarked=new H(W.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),H.UTF8=new H(W.UTF8,26,"UTF8","UTF-8"),H.ASCII=new H(W.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),H.Big5=new H(W.Big5,28,"Big5"),H.GB18030=new H(W.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),H.EUC_KR=new H(W.EUC_KR,30,"EUC_KR","EUC-KR");class oe extends p{}oe.kind="UnsupportedOperationException";class ae{static decode(o,c){const h=this.encodingName(c);return this.customDecoder?this.customDecoder(o,h):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(h)?this.decodeFallback(o,h):new TextDecoder(h).decode(o)}static shouldDecodeOnFallback(o){return!ae.isBrowser()&&o==="ISO-8859-1"}static encode(o,c){const h=this.encodingName(c);return this.customEncoder?this.customEncoder(o,h):typeof TextEncoder>"u"?this.encodeFallback(o):new TextEncoder().encode(o)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(o){return typeof o=="string"?o:o.getName()}static encodingCharacterSet(o){return o instanceof H?o:H.getCharacterSetECIByName(o)}static decodeFallback(o,c){const h=this.encodingCharacterSet(c);if(ae.isDecodeFallbackSupported(h)){let y="";for(let x=0,E=o.length;x<E;x++){let d=o[x].toString(16);d.length<2&&(d="0"+d),y+="%"+d}return decodeURIComponent(y)}if(h.equals(H.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new oe(`Encoding ${this.encodingName(c)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(H.UTF8)||o.equals(H.ISO8859_1)||o.equals(H.ASCII)}static encodeFallback(o){const h=btoa(unescape(encodeURIComponent(o))).split(""),y=[];for(let x=0;x<h.length;x++)y.push(h[x].charCodeAt(0));return new Uint8Array(y)}}class Z{static castAsNonUtf8Char(o,c=null){const h=c?c.getName():this.ISO88591;return ae.decode(new Uint8Array([o]),h)}static guessEncoding(o,c){if(c!=null&&c.get(J.CHARACTER_SET)!==void 0)return c.get(J.CHARACTER_SET).toString();const h=o.length;let y=!0,x=!0,E=!0,d=0,v=0,A=0,I=0,P=0,k=0,F=0,q=0,Q=0,re=0,ne=0;const le=o.length>3&&o[0]===239&&o[1]===187&&o[2]===191;for(let fe=0;fe<h&&(y||x||E);fe++){const ue=o[fe]&255;E&&(d>0?(ue&128)===0?E=!1:d--:(ue&128)!==0&&((ue&64)===0?E=!1:(d++,(ue&32)===0?v++:(d++,(ue&16)===0?A++:(d++,(ue&8)===0?I++:E=!1))))),y&&(ue>127&&ue<160?y=!1:ue>159&&(ue<192||ue===215||ue===247)&&ne++),x&&(P>0?ue<64||ue===127||ue>252?x=!1:P--:ue===128||ue===160||ue>239?x=!1:ue>160&&ue<224?(k++,q=0,F++,F>Q&&(Q=F)):ue>127?(P++,F=0,q++,q>re&&(re=q)):(F=0,q=0))}return E&&d>0&&(E=!1),x&&P>0&&(x=!1),E&&(le||v+A+I>0)?Z.UTF8:x&&(Z.ASSUME_SHIFT_JIS||Q>=3||re>=3)?Z.SHIFT_JIS:y&&x?Q===2&&k===2||ne*10>=h?Z.SHIFT_JIS:Z.ISO88591:y?Z.ISO88591:x?Z.SHIFT_JIS:E?Z.UTF8:Z.PLATFORM_DEFAULT_ENCODING}static format(o,...c){let h=-1;function y(E,d,v,A,I,P){if(E==="%%")return"%";if(c[++h]===void 0)return;E=A?parseInt(A.substr(1)):void 0;let k=I?parseInt(I.substr(1)):void 0,F;switch(P){case"s":F=c[h];break;case"c":F=c[h][0];break;case"f":F=parseFloat(c[h]).toFixed(E);break;case"p":F=parseFloat(c[h]).toPrecision(E);break;case"e":F=parseFloat(c[h]).toExponential(E);break;case"x":F=parseInt(c[h]).toString(k||16);break;case"d":F=parseFloat(parseInt(c[h],k||10).toPrecision(E)).toFixed(0);break}F=typeof F=="object"?JSON.stringify(F):(+F).toString(k);let q=parseInt(v),Q=v&&v[0]+""=="0"?"0":" ";for(;F.length<q;)F=d!==void 0?F+Q:Q+F;return F}let x=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(x,y)}static getBytes(o,c){return ae.encode(o,c)}static getCharCode(o,c=0){return o.charCodeAt(c)}static getCharAt(o){return String.fromCharCode(o)}}Z.SHIFT_JIS=H.SJIS.getName(),Z.GB2312="GB2312",Z.ISO88591=H.ISO8859_1.getName(),Z.EUC_JP="EUC_JP",Z.UTF8=H.UTF8.getName(),Z.PLATFORM_DEFAULT_ENCODING=Z.UTF8,Z.ASSUME_SHIFT_JIS=!1;class ee{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return typeof o=="string"?this.value+=o.toString():this.encoding?this.value+=Z.castAsNonUtf8Char(o,this.encoding):this.value+=String.fromCharCode(o),this}appendChars(o,c,h){for(let y=c;c<c+h;y++)this.append(o[y]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,c){this.value=this.value.substr(0,o)+c+this.value.substr(o+1)}substring(o,c){return this.value.substring(o,c)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,c){this.value=this.value.substr(0,o)+c+this.value.substr(o+c.length)}}class xe{constructor(o,c,h,y){if(this.width=o,this.height=c,this.rowSize=h,this.bits=y,c==null&&(c=o),this.height=c,o<1||c<1)throw new _("Both dimensions must be greater than 0");h==null&&(h=Math.floor((o+31)/32)),this.rowSize=h,y==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){const c=o.length,h=o[0].length,y=new xe(h,c);for(let x=0;x<c;x++){const E=o[x];for(let d=0;d<h;d++)E[d]&&y.set(d,x)}return y}static parseFromString(o,c,h){if(o===null)throw new _("stringRepresentation cannot be null");const y=new Array(o.length);let x=0,E=0,d=-1,v=0,A=0;for(;A<o.length;)if(o.charAt(A)===`
`||o.charAt(A)==="\r"){if(x>E){if(d===-1)d=x-E;else if(x-E!==d)throw new _("row lengths do not match");E=x,v++}A++}else if(o.substring(A,A+c.length)===c)A+=c.length,y[x]=!0,x++;else if(o.substring(A,A+h.length)===h)A+=h.length,y[x]=!1,x++;else throw new _("illegal character encountered: "+o.substring(A));if(x>E){if(d===-1)d=x-E;else if(x-E!==d)throw new _("row lengths do not match");v++}const I=new xe(d,v);for(let P=0;P<x;P++)y[P]&&I.set(Math.floor(P%d),Math.floor(P/d));return I}get(o,c){const h=c*this.rowSize+Math.floor(o/32);return(this.bits[h]>>>(o&31)&1)!==0}set(o,c){const h=c*this.rowSize+Math.floor(o/32);this.bits[h]|=1<<(o&31)&4294967295}unset(o,c){const h=c*this.rowSize+Math.floor(o/32);this.bits[h]&=~(1<<(o&31)&4294967295)}flip(o,c){const h=c*this.rowSize+Math.floor(o/32);this.bits[h]^=1<<(o&31)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new _("input matrix dimensions do not match");const c=new X(Math.floor(this.width/32)+1),h=this.rowSize,y=this.bits;for(let x=0,E=this.height;x<E;x++){const d=x*h,v=o.getRow(x,c).getBitArray();for(let A=0;A<h;A++)y[d+A]^=v[A]}}clear(){const o=this.bits,c=o.length;for(let h=0;h<c;h++)o[h]=0}setRegion(o,c,h,y){if(c<0||o<0)throw new _("Left and top must be nonnegative");if(y<1||h<1)throw new _("Height and width must be at least 1");const x=o+h,E=c+y;if(E>this.height||x>this.width)throw new _("The region must fit inside the matrix");const d=this.rowSize,v=this.bits;for(let A=c;A<E;A++){const I=A*d;for(let P=o;P<x;P++)v[I+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(o,c){c==null||c.getSize()<this.width?c=new X(this.width):c.clear();const h=this.rowSize,y=this.bits,x=o*h;for(let E=0;E<h;E++)c.setBulk(E*32,y[x+E]);return c}setRow(o,c){M.arraycopy(c.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){const o=this.getWidth(),c=this.getHeight();let h=new X(o),y=new X(o);for(let x=0,E=Math.floor((c+1)/2);x<E;x++)h=this.getRow(x,h),y=this.getRow(c-1-x,y),h.reverse(),y.reverse(),this.setRow(x,y),this.setRow(c-1-x,h)}getEnclosingRectangle(){const o=this.width,c=this.height,h=this.rowSize,y=this.bits;let x=o,E=c,d=-1,v=-1;for(let A=0;A<c;A++)for(let I=0;I<h;I++){const P=y[A*h+I];if(P!==0){if(A<E&&(E=A),A>v&&(v=A),I*32<x){let k=0;for(;(P<<31-k&4294967295)===0;)k++;I*32+k<x&&(x=I*32+k)}if(I*32+31>d){let k=31;for(;!(P>>>k);)k--;I*32+k>d&&(d=I*32+k)}}}return d<x||v<E?null:Int32Array.from([x,E,d-x+1,v-E+1])}getTopLeftOnBit(){const o=this.rowSize,c=this.bits;let h=0;for(;h<c.length&&c[h]===0;)h++;if(h===c.length)return null;const y=h/o;let x=h%o*32;const E=c[h];let d=0;for(;(E<<31-d&4294967295)===0;)d++;return x+=d,Int32Array.from([x,y])}getBottomRightOnBit(){const o=this.rowSize,c=this.bits;let h=c.length-1;for(;h>=0&&c[h]===0;)h--;if(h<0)return null;const y=Math.floor(h/o);let x=Math.floor(h%o)*32;const E=c[h];let d=31;for(;!(E>>>d);)d--;return x+=d,Int32Array.from([x,y])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){if(!(o instanceof xe))return!1;const c=o;return this.width===c.width&&this.height===c.height&&this.rowSize===c.rowSize&&$.equals(this.bits,c.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+$.hashCode(this.bits),o}toString(o="X ",c="  ",h=`
`){return this.buildToString(o,c,h)}buildToString(o,c,h){let y=new ee;for(let x=0,E=this.height;x<E;x++){for(let d=0,v=this.width;d<v;d++)y.append(this.get(d,x)?o:c);y.append(h)}return y.toString()}clone(){return new xe(this.width,this.height,this.rowSize,this.bits.slice())}}class de extends p{static getNotFoundInstance(){return new de}}de.kind="NotFoundException";class ye extends j{constructor(o){super(o),this.luminances=ye.EMPTY,this.buckets=new Int32Array(ye.LUMINANCE_BUCKETS)}getBlackRow(o,c){const h=this.getLuminanceSource(),y=h.getWidth();c==null||c.getSize()<y?c=new X(y):c.clear(),this.initArrays(y);const x=h.getRow(o,this.luminances),E=this.buckets;for(let v=0;v<y;v++)E[(x[v]&255)>>ye.LUMINANCE_SHIFT]++;const d=ye.estimateBlackPoint(E);if(y<3)for(let v=0;v<y;v++)(x[v]&255)<d&&c.set(v);else{let v=x[0]&255,A=x[1]&255;for(let I=1;I<y-1;I++){const P=x[I+1]&255;(A*4-v-P)/2<d&&c.set(I),v=A,A=P}}return c}getBlackMatrix(){const o=this.getLuminanceSource(),c=o.getWidth(),h=o.getHeight(),y=new xe(c,h);this.initArrays(c);const x=this.buckets;for(let v=1;v<5;v++){const A=Math.floor(h*v/5),I=o.getRow(A,this.luminances),P=Math.floor(c*4/5);for(let k=Math.floor(c/5);k<P;k++){const F=I[k]&255;x[F>>ye.LUMINANCE_SHIFT]++}}const E=ye.estimateBlackPoint(x),d=o.getMatrix();for(let v=0;v<h;v++){const A=v*c;for(let I=0;I<c;I++)(d[A+I]&255)<E&&y.set(I,v)}return y}createBinarizer(o){return new ye(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));const c=this.buckets;for(let h=0;h<ye.LUMINANCE_BUCKETS;h++)c[h]=0}static estimateBlackPoint(o){const c=o.length;let h=0,y=0,x=0;for(let I=0;I<c;I++)o[I]>x&&(y=I,x=o[I]),o[I]>h&&(h=o[I]);let E=0,d=0;for(let I=0;I<c;I++){const P=I-y,k=o[I]*P*P;k>d&&(E=I,d=k)}if(y>E){const I=y;y=E,E=I}if(E-y<=c/16)throw new de;let v=E-1,A=-1;for(let I=E-1;I>y;I--){const P=I-y,k=P*P*(E-I)*(h-o[I]);k>A&&(v=I,A=k)}return v<<ye.LUMINANCE_SHIFT}}ye.LUMINANCE_BITS=5,ye.LUMINANCE_SHIFT=8-ye.LUMINANCE_BITS,ye.LUMINANCE_BUCKETS=1<<ye.LUMINANCE_BITS,ye.EMPTY=Uint8ClampedArray.from([0]);class _e extends ye{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const o=this.getLuminanceSource(),c=o.getWidth(),h=o.getHeight();if(c>=_e.MINIMUM_DIMENSION&&h>=_e.MINIMUM_DIMENSION){const y=o.getMatrix();let x=c>>_e.BLOCK_SIZE_POWER;(c&_e.BLOCK_SIZE_MASK)!==0&&x++;let E=h>>_e.BLOCK_SIZE_POWER;(h&_e.BLOCK_SIZE_MASK)!==0&&E++;const d=_e.calculateBlackPoints(y,x,E,c,h),v=new xe(c,h);_e.calculateThresholdForBlock(y,x,E,c,h,d,v),this.matrix=v}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new _e(o)}static calculateThresholdForBlock(o,c,h,y,x,E,d){const v=x-_e.BLOCK_SIZE,A=y-_e.BLOCK_SIZE;for(let I=0;I<h;I++){let P=I<<_e.BLOCK_SIZE_POWER;P>v&&(P=v);const k=_e.cap(I,2,h-3);for(let F=0;F<c;F++){let q=F<<_e.BLOCK_SIZE_POWER;q>A&&(q=A);const Q=_e.cap(F,2,c-3);let re=0;for(let le=-2;le<=2;le++){const fe=E[k+le];re+=fe[Q-2]+fe[Q-1]+fe[Q]+fe[Q+1]+fe[Q+2]}const ne=re/25;_e.thresholdBlock(o,q,P,ne,y,d)}}}static cap(o,c,h){return o<c?c:o>h?h:o}static thresholdBlock(o,c,h,y,x,E){for(let d=0,v=h*x+c;d<_e.BLOCK_SIZE;d++,v+=x)for(let A=0;A<_e.BLOCK_SIZE;A++)(o[v+A]&255)<=y&&E.set(c+A,h+d)}static calculateBlackPoints(o,c,h,y,x){const E=x-_e.BLOCK_SIZE,d=y-_e.BLOCK_SIZE,v=new Array(h);for(let A=0;A<h;A++){v[A]=new Int32Array(c);let I=A<<_e.BLOCK_SIZE_POWER;I>E&&(I=E);for(let P=0;P<c;P++){let k=P<<_e.BLOCK_SIZE_POWER;k>d&&(k=d);let F=0,q=255,Q=0;for(let ne=0,le=I*y+k;ne<_e.BLOCK_SIZE;ne++,le+=y){for(let fe=0;fe<_e.BLOCK_SIZE;fe++){const ue=o[le+fe]&255;F+=ue,ue<q&&(q=ue),ue>Q&&(Q=ue)}if(Q-q>_e.MIN_DYNAMIC_RANGE)for(ne++,le+=y;ne<_e.BLOCK_SIZE;ne++,le+=y)for(let fe=0;fe<_e.BLOCK_SIZE;fe++)F+=o[le+fe]&255}let re=F>>_e.BLOCK_SIZE_POWER*2;if(Q-q<=_e.MIN_DYNAMIC_RANGE&&(re=q/2,A>0&&P>0)){const ne=(v[A-1][P]+2*v[A][P-1]+v[A-1][P-1])/4;q<ne&&(re=ne)}v[A][P]=re}}return v}}_e.BLOCK_SIZE_POWER=3,_e.BLOCK_SIZE=1<<_e.BLOCK_SIZE_POWER,_e.BLOCK_SIZE_MASK=_e.BLOCK_SIZE-1,_e.MINIMUM_DIMENSION=_e.BLOCK_SIZE*5,_e.MIN_DYNAMIC_RANGE=24;class qe{constructor(o,c){this.width=o,this.height=c}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,c,h,y){throw new oe("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new oe("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new oe("This luminance source does not support rotation by 45 degrees.")}toString(){const o=new Uint8ClampedArray(this.width);let c=new ee;for(let h=0;h<this.height;h++){const y=this.getRow(h,o);for(let x=0;x<this.width;x++){const E=y[x]&255;let d;E<64?d="#":E<128?d="+":E<192?d=".":d=" ",c.append(d)}c.append(`
`)}return c.toString()}}class Ve extends qe{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,c){const h=this.delegate.getRow(o,c),y=this.getWidth();for(let x=0;x<y;x++)h[x]=255-(h[x]&255);return h}getMatrix(){const o=this.delegate.getMatrix(),c=this.getWidth()*this.getHeight(),h=new Uint8ClampedArray(c);for(let y=0;y<c;y++)h[y]=255-(o[y]&255);return h}isCropSupported(){return this.delegate.isCropSupported()}crop(o,c,h,y){return new Ve(this.delegate.crop(o,c,h,y))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ve(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ve(this.delegate.rotateCounterClockwise45())}}class tt extends qe{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=tt.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){const c=o.getContext("2d").getImageData(0,0,o.width,o.height);return tt.toGrayscaleBuffer(c.data,o.width,o.height)}static toGrayscaleBuffer(o,c,h){const y=new Uint8ClampedArray(c*h);for(let x=0,E=0,d=o.length;x<d;x+=4,E++){let v;if(o[x+3]===0)v=255;else{const I=o[x],P=o[x+1],k=o[x+2];v=306*I+601*P+117*k+512>>10}y[E]=v}return y}getRow(o,c){if(o<0||o>=this.getHeight())throw new _("Requested row is outside the image: "+o);const h=this.getWidth(),y=o*h;return c===null?c=this.buffer.slice(y,y+h):(c.length<h&&(c=new Uint8ClampedArray(h)),c.set(this.buffer.slice(y,y+h))),c}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,c,h,y){return super.crop(o,c,h,y),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){const c=this.getTempCanvasElement(),h=c.getContext("2d"),y=o*tt.DEGREE_TO_RADIANS,x=this.canvas.width,E=this.canvas.height,d=Math.ceil(Math.abs(Math.cos(y))*x+Math.abs(Math.sin(y))*E),v=Math.ceil(Math.abs(Math.sin(y))*x+Math.abs(Math.cos(y))*E);return c.width=d,c.height=v,h.translate(d/2,v/2),h.rotate(y),h.drawImage(this.canvas,x/-2,E/-2),this.buffer=tt.makeBufferFromCanvasImageData(c),this}invert(){return new Ve(this)}}tt.DEGREE_TO_RADIANS=Math.PI/180;class me{constructor(o,c,h){this.deviceId=o,this.label=c,this.kind="videoinput",this.groupId=h||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Se=(globalThis||Vg||self||window||void 0)&&(globalThis||Vg||self||window||void 0).__awaiter||function(Y,o,c,h){function y(x){return x instanceof c?x:new c(function(E){E(x)})}return new(c||(c=Promise))(function(x,E){function d(I){try{A(h.next(I))}catch(P){E(P)}}function v(I){try{A(h.throw(I))}catch(P){E(P)}}function A(I){I.done?x(I.value):y(I.value).then(d,v)}A((h=h.apply(Y,o||[])).next())})};class Ye{constructor(o,c=500,h){this.reader=o,this.timeBetweenScansMillis=c,this._hints=h,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return Se(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const o=yield navigator.mediaDevices.enumerateDevices(),c=[];for(const h of o){const y=h.kind==="video"?"videoinput":h.kind;if(y!=="videoinput")continue;const x=h.deviceId||h.id,E=h.label||`Video device ${c.length+1}`,d=h.groupId,v={deviceId:x,label:E,kind:y,groupId:d};c.push(v)}return c})}getVideoInputDevices(){return Se(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(c=>new me(c.deviceId,c.label))})}findDeviceById(o){return Se(this,void 0,void 0,function*(){const c=yield this.listVideoInputDevices();return c?c.find(h=>h.deviceId===o):null})}decodeFromInputVideoDevice(o,c){return Se(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,c)})}decodeOnceFromVideoDevice(o,c){return Se(this,void 0,void 0,function*(){this.reset();let h;o?h={deviceId:{exact:o}}:h={facingMode:"environment"};const y={video:h};return yield this.decodeOnceFromConstraints(y,c)})}decodeOnceFromConstraints(o,c){return Se(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(h,c)})}decodeOnceFromStream(o,c){return Se(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(o,c);return yield this.decodeOnce(h)})}decodeFromInputVideoDeviceContinuously(o,c,h){return Se(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,c,h)})}decodeFromVideoDevice(o,c,h){return Se(this,void 0,void 0,function*(){let y;o?y={deviceId:{exact:o}}:y={facingMode:"environment"};const x={video:y};return yield this.decodeFromConstraints(x,c,h)})}decodeFromConstraints(o,c,h){return Se(this,void 0,void 0,function*(){const y=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(y,c,h)})}decodeFromStream(o,c,h){return Se(this,void 0,void 0,function*(){this.reset();const y=yield this.attachStreamToVideo(o,c);return yield this.decodeContinuously(y,h)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,c){return Se(this,void 0,void 0,function*(){const h=this.prepareVideoElement(c);return this.addVideoSource(h,o),this.videoElement=h,this.stream=o,yield this.playVideoOnLoadAsync(h),h})}playVideoOnLoadAsync(o){return new Promise((c,h)=>this.playVideoOnLoad(o,()=>c()))}playVideoOnLoad(o,c){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",c),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return Se(this,void 0,void 0,function*(){if(this.isVideoPlaying(o)){console.warn("Trying to play video that is already playing.");return}try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,c){const h=document.getElementById(o);if(!h)throw new b(`element with id '${o}' not found`);if(h.nodeName.toLowerCase()!==c.toLowerCase())throw new b(`element with id '${o}' must be an ${c} element`);return h}decodeFromImage(o,c){if(!o&&!c)throw new b("either imageElement with a src set or an url must be provided");return c&&!o?this.decodeFromImageUrl(c):this.decodeFromImageElement(o)}decodeFromVideo(o,c){if(!o&&!c)throw new b("Either an element with a src set or an URL must be provided");return c&&!o?this.decodeFromVideoUrl(c):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,c,h){if(o===void 0&&c===void 0)throw new b("Either an element with a src set or an URL must be provided");return c&&!o?this.decodeFromVideoUrlContinuously(c,h):this.decodeFromVideoElementContinuously(o,h)}decodeFromImageElement(o){if(!o)throw new b("An image element must be provided.");this.reset();const c=this.prepareImageElement(o);this.imageElement=c;let h;return this.isImageLoaded(c)?h=this.decodeOnce(c,!1,!0):h=this._decodeOnLoadImage(c),h}decodeFromVideoElement(o){const c=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(c)}decodeFromVideoElementContinuously(o,c){const h=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(h,c)}_decodeFromVideoElementSetup(o){if(!o)throw new b("A video element must be provided.");this.reset();const c=this.prepareVideoElement(o);return this.videoElement=c,c}decodeFromImageUrl(o){if(!o)throw new b("An URL must be provided.");this.reset();const c=this.prepareImageElement();this.imageElement=c;const h=this._decodeOnLoadImage(c);return c.src=o,h}decodeFromVideoUrl(o){if(!o)throw new b("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),h=this.decodeFromVideoElement(c);return c.src=o,h}decodeFromVideoUrlContinuously(o,c){if(!o)throw new b("An URL must be provided.");this.reset();const h=this.prepareVideoElement(),y=this.decodeFromVideoElementContinuously(h,c);return h.src=o,y}_decodeOnLoadImage(o){return new Promise((c,h)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(c,h),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return Se(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,c){return Se(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,c)})}isImageLoaded(o){return!(!o.complete||o.naturalWidth===0)}prepareImageElement(o){let c;return typeof o>"u"&&(c=document.createElement("img"),c.width=200,c.height=200),typeof o=="string"&&(c=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(c=o),c}prepareVideoElement(o){let c;return!o&&typeof document<"u"&&(c=document.createElement("video"),c.width=200,c.height=200),typeof o=="string"&&(c=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(c=o),c.setAttribute("autoplay","true"),c.setAttribute("muted","true"),c.setAttribute("playsinline","true"),c}decodeOnce(o,c=!0,h=!0){this._stopAsyncDecode=!1;const y=(x,E)=>{if(this._stopAsyncDecode){E(new de("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const d=this.decode(o);x(d)}catch(d){const v=c&&d instanceof de,I=(d instanceof N||d instanceof V)&&h;if(v||I)return setTimeout(y,this._timeBetweenDecodingAttempts,x,E);E(d)}};return new Promise((x,E)=>y(x,E))}decodeContinuously(o,c){this._stopContinuousDecode=!1;const h=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const y=this.decode(o);c(y,null),setTimeout(h,this.timeBetweenScansMillis)}catch(y){c(null,y);const x=y instanceof N||y instanceof V,E=y instanceof de;(x||E)&&setTimeout(h,this._timeBetweenDecodingAttempts)}};h()}decode(o){const c=this.createBinaryBitmap(o);return this.decodeBitmap(c)}_isHTMLVideoElement(o){return o.videoWidth!==0}drawFrameOnCanvas(o,c,h){c||(c={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),h||(h=this.captureCanvasContext),h.drawImage(o,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}drawImageOnCanvas(o,c,h=this.captureCanvasContext){c||(c={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),h||(h=this.captureCanvasContext),h.drawImage(o,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}createBinaryBitmap(o){this.getCaptureCanvasContext(o),this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);const c=this.getCaptureCanvas(o),h=new tt(c),y=new _e(h);return new T(y)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){const h=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=h}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){const c=this.createCaptureCanvas(o);this.captureCanvas=c}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const c=document.createElement("canvas");let h,y;return typeof o<"u"&&(o instanceof HTMLVideoElement?(h=o.videoWidth,y=o.videoHeight):o instanceof HTMLImageElement&&(h=o.naturalWidth||o.width,y=o.naturalHeight||o.height)),c.style.width=h+"px",c.style.height=y+"px",c.width=h,c.height=y,c}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,c){try{o.srcObject=c}catch{o.src=URL.createObjectURL(c)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class ze{constructor(o,c,h=c==null?0:8*c.length,y,x,E=M.currentTimeMillis()){this.text=o,this.rawBytes=c,this.numBits=h,this.resultPoints=y,this.format=x,this.timestamp=E,this.text=o,this.rawBytes=c,h==null?this.numBits=c==null?0:8*c.length:this.numBits=h,this.resultPoints=y,this.format=x,this.resultMetadata=null,E==null?this.timestamp=M.currentTimeMillis():this.timestamp=E}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,c){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(o,c)}putAllMetadata(o){o!==null&&(this.resultMetadata===null?this.resultMetadata=o:this.resultMetadata=new Map(o))}addResultPoints(o){const c=this.resultPoints;if(c===null)this.resultPoints=o;else if(o!==null&&o.length>0){const h=new Array(c.length+o.length);M.arraycopy(c,0,h,0,c.length),M.arraycopy(o,0,h,c.length,o.length),this.resultPoints=h}}getTimestamp(){return this.timestamp}toString(){return this.text}}var yt;(function(Y){Y[Y.AZTEC=0]="AZTEC",Y[Y.CODABAR=1]="CODABAR",Y[Y.CODE_39=2]="CODE_39",Y[Y.CODE_93=3]="CODE_93",Y[Y.CODE_128=4]="CODE_128",Y[Y.DATA_MATRIX=5]="DATA_MATRIX",Y[Y.EAN_8=6]="EAN_8",Y[Y.EAN_13=7]="EAN_13",Y[Y.ITF=8]="ITF",Y[Y.MAXICODE=9]="MAXICODE",Y[Y.PDF_417=10]="PDF_417",Y[Y.QR_CODE=11]="QR_CODE",Y[Y.RSS_14=12]="RSS_14",Y[Y.RSS_EXPANDED=13]="RSS_EXPANDED",Y[Y.UPC_A=14]="UPC_A",Y[Y.UPC_E=15]="UPC_E",Y[Y.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(yt||(yt={}));var $e=yt,pt;(function(Y){Y[Y.OTHER=0]="OTHER",Y[Y.ORIENTATION=1]="ORIENTATION",Y[Y.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",Y[Y.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",Y[Y.ISSUE_NUMBER=4]="ISSUE_NUMBER",Y[Y.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",Y[Y.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",Y[Y.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",Y[Y.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",Y[Y.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",Y[Y.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(pt||(pt={}));var lt=pt;class Ne{constructor(o,c,h,y,x=-1,E=-1){this.rawBytes=o,this.text=c,this.byteSegments=h,this.ecLevel=y,this.structuredAppendSequenceNumber=x,this.structuredAppendParity=E,this.numBits=o==null?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Xe{exp(o){return this.expTable[o]}log(o){if(o===0)throw new _;return this.logTable[o]}static addOrSubtract(o,c){return o^c}}class Et{constructor(o,c){if(c.length===0)throw new _;this.field=o;const h=c.length;if(h>1&&c[0]===0){let y=1;for(;y<h&&c[y]===0;)y++;y===h?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(h-y),M.arraycopy(c,y,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);const c=this.coefficients;let h;if(o===1){h=0;for(let E=0,d=c.length;E!==d;E++){const v=c[E];h=Xe.addOrSubtract(h,v)}return h}h=c[0];const y=c.length,x=this.field;for(let E=1;E<y;E++)h=Xe.addOrSubtract(x.multiply(o,h),c[E]);return h}addOrSubtract(o){if(!this.field.equals(o.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let c=this.coefficients,h=o.coefficients;if(c.length>h.length){const E=c;c=h,h=E}let y=new Int32Array(h.length);const x=h.length-c.length;M.arraycopy(h,0,y,0,x);for(let E=x;E<h.length;E++)y[E]=Xe.addOrSubtract(c[E-x],h[E]);return new Et(this.field,y)}multiply(o){if(!this.field.equals(o.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();const c=this.coefficients,h=c.length,y=o.coefficients,x=y.length,E=new Int32Array(h+x-1),d=this.field;for(let v=0;v<h;v++){const A=c[v];for(let I=0;I<x;I++)E[v+I]=Xe.addOrSubtract(E[v+I],d.multiply(A,y[I]))}return new Et(d,E)}multiplyScalar(o){if(o===0)return this.field.getZero();if(o===1)return this;const c=this.coefficients.length,h=this.field,y=new Int32Array(c),x=this.coefficients;for(let E=0;E<c;E++)y[E]=h.multiply(x[E],o);return new Et(h,y)}multiplyByMonomial(o,c){if(o<0)throw new _;if(c===0)return this.field.getZero();const h=this.coefficients,y=h.length,x=new Int32Array(y+o),E=this.field;for(let d=0;d<y;d++)x[d]=E.multiply(h[d],c);return new Et(E,x)}divide(o){if(!this.field.equals(o.field))throw new _("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new _("Divide by 0");const c=this.field;let h=c.getZero(),y=this;const x=o.getCoefficient(o.getDegree()),E=c.inverse(x);for(;y.getDegree()>=o.getDegree()&&!y.isZero();){const d=y.getDegree()-o.getDegree(),v=c.multiply(y.getCoefficient(y.getDegree()),E),A=o.multiplyByMonomial(d,v),I=c.buildMonomial(d,v);h=h.addOrSubtract(I),y=y.addOrSubtract(A)}return[h,y]}toString(){let o="";for(let c=this.getDegree();c>=0;c--){let h=this.getCoefficient(c);if(h!==0){if(h<0?(o+=" - ",h=-h):o.length>0&&(o+=" + "),c===0||h!==1){const y=this.field.log(h);y===0?o+="1":y===1?o+="a":(o+="a^",o+=y)}c!==0&&(c===1?o+="x":(o+="x^",o+=c))}}return o}}class Fe extends p{}Fe.kind="ArithmeticException";class Rt extends Xe{constructor(o,c,h){super(),this.primitive=o,this.size=c,this.generatorBase=h;const y=new Int32Array(c);let x=1;for(let d=0;d<c;d++)y[d]=x,x*=2,x>=c&&(x^=o,x&=c-1);this.expTable=y;const E=new Int32Array(c);for(let d=0;d<c-1;d++)E[y[d]]=d;this.logTable=E,this.zero=new Et(this,Int32Array.from([0])),this.one=new Et(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,c){if(o<0)throw new _;if(c===0)return this.zero;const h=new Int32Array(o+1);return h[0]=c,new Et(this,h)}inverse(o){if(o===0)throw new Fe;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,c){return o===0||c===0?0:this.expTable[(this.logTable[o]+this.logTable[c])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+K.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}Rt.AZTEC_DATA_12=new Rt(4201,4096,1),Rt.AZTEC_DATA_10=new Rt(1033,1024,1),Rt.AZTEC_DATA_6=new Rt(67,64,1),Rt.AZTEC_PARAM=new Rt(19,16,1),Rt.QR_CODE_FIELD_256=new Rt(285,256,0),Rt.DATA_MATRIX_FIELD_256=new Rt(301,256,1),Rt.AZTEC_DATA_8=Rt.DATA_MATRIX_FIELD_256,Rt.MAXICODE_FIELD_64=Rt.AZTEC_DATA_6;class Kt extends p{}Kt.kind="ReedSolomonException";class nt extends p{}nt.kind="IllegalStateException";class Zt{constructor(o){this.field=o}decode(o,c){const h=this.field,y=new Et(h,o),x=new Int32Array(c);let E=!0;for(let F=0;F<c;F++){const q=y.evaluateAt(h.exp(F+h.getGeneratorBase()));x[x.length-1-F]=q,q!==0&&(E=!1)}if(E)return;const d=new Et(h,x),v=this.runEuclideanAlgorithm(h.buildMonomial(c,1),d,c),A=v[0],I=v[1],P=this.findErrorLocations(A),k=this.findErrorMagnitudes(I,P);for(let F=0;F<P.length;F++){const q=o.length-1-h.log(P[F]);if(q<0)throw new Kt("Bad error location");o[q]=Rt.addOrSubtract(o[q],k[F])}}runEuclideanAlgorithm(o,c,h){if(o.getDegree()<c.getDegree()){const F=o;o=c,c=F}const y=this.field;let x=o,E=c,d=y.getZero(),v=y.getOne();for(;E.getDegree()>=(h/2|0);){let F=x,q=d;if(x=E,d=v,x.isZero())throw new Kt("r_{i-1} was zero");E=F;let Q=y.getZero();const re=x.getCoefficient(x.getDegree()),ne=y.inverse(re);for(;E.getDegree()>=x.getDegree()&&!E.isZero();){const le=E.getDegree()-x.getDegree(),fe=y.multiply(E.getCoefficient(E.getDegree()),ne);Q=Q.addOrSubtract(y.buildMonomial(le,fe)),E=E.addOrSubtract(x.multiplyByMonomial(le,fe))}if(v=Q.multiply(d).addOrSubtract(q),E.getDegree()>=x.getDegree())throw new nt("Division algorithm failed to reduce polynomial?")}const A=v.getCoefficient(0);if(A===0)throw new Kt("sigmaTilde(0) was zero");const I=y.inverse(A),P=v.multiplyScalar(I),k=E.multiplyScalar(I);return[P,k]}findErrorLocations(o){const c=o.getDegree();if(c===1)return Int32Array.from([o.getCoefficient(1)]);const h=new Int32Array(c);let y=0;const x=this.field;for(let E=1;E<x.getSize()&&y<c;E++)o.evaluateAt(E)===0&&(h[y]=x.inverse(E),y++);if(y!==c)throw new Kt("Error locator degree does not match number of roots");return h}findErrorMagnitudes(o,c){const h=c.length,y=new Int32Array(h),x=this.field;for(let E=0;E<h;E++){const d=x.inverse(c[E]);let v=1;for(let A=0;A<h;A++)if(E!==A){const I=x.multiply(c[A],d),P=(I&1)===0?I|1:I&-2;v=x.multiply(v,P)}y[E]=x.multiply(o.evaluateAt(d),x.inverse(v)),x.getGeneratorBase()!==0&&(y[E]=x.multiply(y[E],d))}return y}}var Jt;(function(Y){Y[Y.UPPER=0]="UPPER",Y[Y.LOWER=1]="LOWER",Y[Y.MIXED=2]="MIXED",Y[Y.DIGIT=3]="DIGIT",Y[Y.PUNCT=4]="PUNCT",Y[Y.BINARY=5]="BINARY"})(Jt||(Jt={}));class Wt{decode(o){this.ddata=o;let c=o.getBits(),h=this.extractBits(c),y=this.correctBits(h),x=Wt.convertBoolArrayToByteArray(y),E=Wt.getEncodedData(y),d=new Ne(x,E,null,null);return d.setNumBits(y.length),d}static highLevelDecode(o){return this.getEncodedData(o)}static getEncodedData(o){let c=o.length,h=Jt.UPPER,y=Jt.UPPER,x="",E=0;for(;E<c;)if(y===Jt.BINARY){if(c-E<5)break;let d=Wt.readCode(o,E,5);if(E+=5,d===0){if(c-E<11)break;d=Wt.readCode(o,E,11)+31,E+=11}for(let v=0;v<d;v++){if(c-E<8){E=c;break}const A=Wt.readCode(o,E,8);x+=Z.castAsNonUtf8Char(A),E+=8}y=h}else{let d=y===Jt.DIGIT?4:5;if(c-E<d)break;let v=Wt.readCode(o,E,d);E+=d;let A=Wt.getCharacter(y,v);A.startsWith("CTRL_")?(h=y,y=Wt.getTable(A.charAt(5)),A.charAt(6)==="L"&&(h=y)):(x+=A,y=h)}return x}static getTable(o){switch(o){case"L":return Jt.LOWER;case"P":return Jt.PUNCT;case"M":return Jt.MIXED;case"D":return Jt.DIGIT;case"B":return Jt.BINARY;default:return Jt.UPPER}}static getCharacter(o,c){switch(o){case Jt.UPPER:return Wt.UPPER_TABLE[c];case Jt.LOWER:return Wt.LOWER_TABLE[c];case Jt.MIXED:return Wt.MIXED_TABLE[c];case Jt.PUNCT:return Wt.PUNCT_TABLE[c];case Jt.DIGIT:return Wt.DIGIT_TABLE[c];default:throw new nt("Bad table")}}correctBits(o){let c,h;this.ddata.getNbLayers()<=2?(h=6,c=Rt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(h=8,c=Rt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(h=10,c=Rt.AZTEC_DATA_10):(h=12,c=Rt.AZTEC_DATA_12);let y=this.ddata.getNbDatablocks(),x=o.length/h;if(x<y)throw new V;let E=o.length%h,d=new Int32Array(x);for(let k=0;k<x;k++,E+=h)d[k]=Wt.readCode(o,E,h);try{new Zt(c).decode(d,x-y)}catch(k){throw new V(k)}let v=(1<<h)-1,A=0;for(let k=0;k<y;k++){let F=d[k];if(F===0||F===v)throw new V;(F===1||F===v-1)&&A++}let I=new Array(y*h-A),P=0;for(let k=0;k<y;k++){let F=d[k];if(F===1||F===v-1)I.fill(F>1,P,P+h-1),P+=h-1;else for(let q=h-1;q>=0;--q)I[P++]=(F&1<<q)!==0}return I}extractBits(o){let c=this.ddata.isCompact(),h=this.ddata.getNbLayers(),y=(c?11:14)+h*4,x=new Int32Array(y),E=new Array(this.totalBitsInLayer(h,c));if(c)for(let d=0;d<x.length;d++)x[d]=d;else{let d=y+1+2*K.truncDivision(K.truncDivision(y,2)-1,15),v=y/2,A=K.truncDivision(d,2);for(let I=0;I<v;I++){let P=I+K.truncDivision(I,15);x[v-I-1]=A-P-1,x[v+I]=A+P+1}}for(let d=0,v=0;d<h;d++){let A=(h-d)*4+(c?9:12),I=d*2,P=y-1-I;for(let k=0;k<A;k++){let F=k*2;for(let q=0;q<2;q++)E[v+F+q]=o.get(x[I+q],x[I+k]),E[v+2*A+F+q]=o.get(x[I+k],x[P-q]),E[v+4*A+F+q]=o.get(x[P-q],x[P-k]),E[v+6*A+F+q]=o.get(x[P-k],x[I+q])}v+=A*8}return E}static readCode(o,c,h){let y=0;for(let x=c;x<c+h;x++)y<<=1,o[x]&&(y|=1);return y}static readByte(o,c){let h=o.length-c;return h>=8?Wt.readCode(o,c,8):Wt.readCode(o,c,h)<<8-h}static convertBoolArrayToByteArray(o){let c=new Uint8Array((o.length+7)/8);for(let h=0;h<c.length;h++)c[h]=Wt.readByte(o,8*h);return c}totalBitsInLayer(o,c){return((c?88:112)+16*o)*o}}Wt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Wt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Wt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Wt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Wt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class xt{constructor(){}static round(o){return o===NaN?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,c,h,y){const x=o-h,E=c-y;return Math.sqrt(x*x+E*E)}static sum(o){let c=0;for(let h=0,y=o.length;h!==y;h++){const x=o[h];c+=x}return c}}class Mn{static floatToIntBits(o){return o}}Mn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class mt{constructor(o,c){this.x=o,this.y=c}getX(){return this.x}getY(){return this.y}equals(o){if(o instanceof mt){const c=o;return this.x===c.x&&this.y===c.y}return!1}hashCode(){return 31*Mn.floatToIntBits(this.x)+Mn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){const c=this.distance(o[0],o[1]),h=this.distance(o[1],o[2]),y=this.distance(o[0],o[2]);let x,E,d;if(h>=c&&h>=y?(E=o[0],x=o[1],d=o[2]):y>=h&&y>=c?(E=o[1],x=o[0],d=o[2]):(E=o[2],x=o[0],d=o[1]),this.crossProductZ(x,E,d)<0){const v=x;x=d,d=v}o[0]=x,o[1]=E,o[2]=d}static distance(o,c){return xt.distance(o.x,o.y,c.x,c.y)}static crossProductZ(o,c,h){const y=c.x,x=c.y;return(h.x-y)*(o.y-x)-(h.y-x)*(o.x-y)}}class Po{constructor(o,c){this.bits=o,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class Fs extends Po{constructor(o,c,h,y,x){super(o,c),this.compact=h,this.nbDatablocks=y,this.nbLayers=x}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class hr{constructor(o,c,h,y){this.image=o,this.height=o.getHeight(),this.width=o.getWidth(),c==null&&(c=hr.INIT_SIZE),h==null&&(h=o.getWidth()/2|0),y==null&&(y=o.getHeight()/2|0);const x=c/2|0;if(this.leftInit=h-x,this.rightInit=h+x,this.upInit=y-x,this.downInit=y+x,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new de}detect(){let o=this.leftInit,c=this.rightInit,h=this.upInit,y=this.downInit,x=!1,E=!0,d=!1,v=!1,A=!1,I=!1,P=!1;const k=this.width,F=this.height;for(;E;){E=!1;let q=!0;for(;(q||!v)&&c<k;)q=this.containsBlackPoint(h,y,c,!1),q?(c++,E=!0,v=!0):v||c++;if(c>=k){x=!0;break}let Q=!0;for(;(Q||!A)&&y<F;)Q=this.containsBlackPoint(o,c,y,!0),Q?(y++,E=!0,A=!0):A||y++;if(y>=F){x=!0;break}let re=!0;for(;(re||!I)&&o>=0;)re=this.containsBlackPoint(h,y,o,!1),re?(o--,E=!0,I=!0):I||o--;if(o<0){x=!0;break}let ne=!0;for(;(ne||!P)&&h>=0;)ne=this.containsBlackPoint(o,c,h,!0),ne?(h--,E=!0,P=!0):P||h--;if(h<0){x=!0;break}E&&(d=!0)}if(!x&&d){const q=c-o;let Q=null;for(let fe=1;Q===null&&fe<q;fe++)Q=this.getBlackPointOnSegment(o,y-fe,o+fe,y);if(Q==null)throw new de;let re=null;for(let fe=1;re===null&&fe<q;fe++)re=this.getBlackPointOnSegment(o,h+fe,o+fe,h);if(re==null)throw new de;let ne=null;for(let fe=1;ne===null&&fe<q;fe++)ne=this.getBlackPointOnSegment(c,h+fe,c-fe,h);if(ne==null)throw new de;let le=null;for(let fe=1;le===null&&fe<q;fe++)le=this.getBlackPointOnSegment(c,y-fe,c-fe,y);if(le==null)throw new de;return this.centerEdges(le,Q,ne,re)}else throw new de}getBlackPointOnSegment(o,c,h,y){const x=xt.round(xt.distance(o,c,h,y)),E=(h-o)/x,d=(y-c)/x,v=this.image;for(let A=0;A<x;A++){const I=xt.round(o+A*E),P=xt.round(c+A*d);if(v.get(I,P))return new mt(I,P)}return null}centerEdges(o,c,h,y){const x=o.getX(),E=o.getY(),d=c.getX(),v=c.getY(),A=h.getX(),I=h.getY(),P=y.getX(),k=y.getY(),F=hr.CORR;return x<this.width/2?[new mt(P-F,k+F),new mt(d+F,v+F),new mt(A-F,I-F),new mt(x+F,E-F)]:[new mt(P+F,k+F),new mt(d+F,v-F),new mt(A-F,I+F),new mt(x-F,E-F)]}containsBlackPoint(o,c,h,y){const x=this.image;if(y){for(let E=o;E<=c;E++)if(x.get(E,h))return!0}else for(let E=o;E<=c;E++)if(x.get(h,E))return!0;return!1}}hr.INIT_SIZE=10,hr.CORR=1;class xa{static checkAndNudgePoints(o,c){const h=o.getWidth(),y=o.getHeight();let x=!0;for(let E=0;E<c.length&&x;E+=2){const d=Math.floor(c[E]),v=Math.floor(c[E+1]);if(d<-1||d>h||v<-1||v>y)throw new de;x=!1,d===-1?(c[E]=0,x=!0):d===h&&(c[E]=h-1,x=!0),v===-1?(c[E+1]=0,x=!0):v===y&&(c[E+1]=y-1,x=!0)}x=!0;for(let E=c.length-2;E>=0&&x;E-=2){const d=Math.floor(c[E]),v=Math.floor(c[E+1]);if(d<-1||d>h||v<-1||v>y)throw new de;x=!1,d===-1?(c[E]=0,x=!0):d===h&&(c[E]=h-1,x=!0),v===-1?(c[E+1]=0,x=!0):v===y&&(c[E+1]=y-1,x=!0)}}}class $n{constructor(o,c,h,y,x,E,d,v,A){this.a11=o,this.a21=c,this.a31=h,this.a12=y,this.a22=x,this.a32=E,this.a13=d,this.a23=v,this.a33=A}static quadrilateralToQuadrilateral(o,c,h,y,x,E,d,v,A,I,P,k,F,q,Q,re){const ne=$n.quadrilateralToSquare(o,c,h,y,x,E,d,v);return $n.squareToQuadrilateral(A,I,P,k,F,q,Q,re).times(ne)}transformPoints(o){const c=o.length,h=this.a11,y=this.a12,x=this.a13,E=this.a21,d=this.a22,v=this.a23,A=this.a31,I=this.a32,P=this.a33;for(let k=0;k<c;k+=2){const F=o[k],q=o[k+1],Q=x*F+v*q+P;o[k]=(h*F+E*q+A)/Q,o[k+1]=(y*F+d*q+I)/Q}}transformPointsWithValues(o,c){const h=this.a11,y=this.a12,x=this.a13,E=this.a21,d=this.a22,v=this.a23,A=this.a31,I=this.a32,P=this.a33,k=o.length;for(let F=0;F<k;F++){const q=o[F],Q=c[F],re=x*q+v*Q+P;o[F]=(h*q+E*Q+A)/re,c[F]=(y*q+d*Q+I)/re}}static squareToQuadrilateral(o,c,h,y,x,E,d,v){const A=o-h+x-d,I=c-y+E-v;if(A===0&&I===0)return new $n(h-o,x-h,o,y-c,E-y,c,0,0,1);{const P=h-x,k=d-x,F=y-E,q=v-E,Q=P*q-k*F,re=(A*q-k*I)/Q,ne=(P*I-A*F)/Q;return new $n(h-o+re*h,d-o+ne*d,o,y-c+re*y,v-c+ne*v,c,re,ne,1)}}static quadrilateralToSquare(o,c,h,y,x,E,d,v){return $n.squareToQuadrilateral(o,c,h,y,x,E,d,v).buildAdjoint()}buildAdjoint(){return new $n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new $n(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class Ba extends xa{sampleGrid(o,c,h,y,x,E,d,v,A,I,P,k,F,q,Q,re,ne,le,fe){const ue=$n.quadrilateralToQuadrilateral(y,x,E,d,v,A,I,P,k,F,q,Q,re,ne,le,fe);return this.sampleGridWithTransform(o,c,h,ue)}sampleGridWithTransform(o,c,h,y){if(c<=0||h<=0)throw new de;const x=new xe(c,h),E=new Float32Array(2*c);for(let d=0;d<h;d++){const v=E.length,A=d+.5;for(let I=0;I<v;I+=2)E[I]=I/2+.5,E[I+1]=A;y.transformPoints(E),xa.checkAndNudgePoints(o,E);try{for(let I=0;I<v;I+=2)o.get(Math.floor(E[I]),Math.floor(E[I+1]))&&x.set(I/2,d)}catch{throw new de}}return x}}class bi{static setGridSampler(o){bi.gridSampler=o}static getInstance(){return bi.gridSampler}}bi.gridSampler=new Ba;class Lr{constructor(o,c){this.x=o,this.y=c}toResultPoint(){return new mt(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ro{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let c=this.getMatrixCenter(),h=this.getBullsEyeCorners(c);if(o){let E=h[0];h[0]=h[2],h[2]=E}this.extractParameters(h);let y=this.sampleGrid(this.image,h[this.shift%4],h[(this.shift+1)%4],h[(this.shift+2)%4],h[(this.shift+3)%4]),x=this.getMatrixCornerPoints(h);return new Fs(y,x,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!this.isValidPoint(o[0])||!this.isValidPoint(o[1])||!this.isValidPoint(o[2])||!this.isValidPoint(o[3]))throw new de;let c=2*this.nbCenterLayers,h=new Int32Array([this.sampleLine(o[0],o[1],c),this.sampleLine(o[1],o[2],c),this.sampleLine(o[2],o[3],c),this.sampleLine(o[3],o[0],c)]);this.shift=this.getRotation(h,c);let y=0;for(let E=0;E<4;E++){let d=h[(this.shift+E)%4];this.compact?(y<<=7,y+=d>>1&127):(y<<=10,y+=(d>>2&992)+(d>>1&31))}let x=this.getCorrectedParameterData(y,this.compact);this.compact?(this.nbLayers=(x>>6)+1,this.nbDataBlocks=(x&63)+1):(this.nbLayers=(x>>11)+1,this.nbDataBlocks=(x&2047)+1)}getRotation(o,c){let h=0;o.forEach((y,x,E)=>{let d=(y>>c-2<<1)+(y&1);h=(h<<3)+d}),h=((h&1)<<11)+(h>>1);for(let y=0;y<4;y++)if(K.bitCount(h^this.EXPECTED_CORNER_BITS[y])<=2)return y;throw new de}getCorrectedParameterData(o,c){let h,y;c?(h=7,y=2):(h=10,y=4);let x=h-y,E=new Int32Array(h);for(let v=h-1;v>=0;--v)E[v]=o&15,o>>=4;try{new Zt(Rt.AZTEC_PARAM).decode(E,x)}catch{throw new de}let d=0;for(let v=0;v<y;v++)d=(d<<4)+E[v];return d}getBullsEyeCorners(o){let c=o,h=o,y=o,x=o,E=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(c,E,1,-1),k=this.getFirstDifferent(h,E,1,1),F=this.getFirstDifferent(y,E,-1,1),q=this.getFirstDifferent(x,E,-1,-1);if(this.nbCenterLayers>2){let Q=this.distancePoint(q,P)*this.nbCenterLayers/(this.distancePoint(x,c)*(this.nbCenterLayers+2));if(Q<.75||Q>1.25||!this.isWhiteOrBlackRectangle(P,k,F,q))break}c=P,h=k,y=F,x=q,E=!E}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new de;this.compact=this.nbCenterLayers===5;let d=new mt(c.getX()+.5,c.getY()-.5),v=new mt(h.getX()+.5,h.getY()+.5),A=new mt(y.getX()-.5,y.getY()+.5),I=new mt(x.getX()-.5,x.getY()-.5);return this.expandSquare([d,v,A,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,c,h,y;try{let d=new hr(this.image).detect();o=d[0],c=d[1],h=d[2],y=d[3]}catch{let v=this.image.getWidth()/2,A=this.image.getHeight()/2;o=this.getFirstDifferent(new Lr(v+7,A-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new Lr(v+7,A+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new Lr(v-7,A+7),!1,-1,1).toResultPoint(),y=this.getFirstDifferent(new Lr(v-7,A-7),!1,-1,-1).toResultPoint()}let x=xt.round((o.getX()+y.getX()+c.getX()+h.getX())/4),E=xt.round((o.getY()+y.getY()+c.getY()+h.getY())/4);try{let d=new hr(this.image,15,x,E).detect();o=d[0],c=d[1],h=d[2],y=d[3]}catch{o=this.getFirstDifferent(new Lr(x+7,E-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new Lr(x+7,E+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new Lr(x-7,E+7),!1,-1,1).toResultPoint(),y=this.getFirstDifferent(new Lr(x-7,E-7),!1,-1,-1).toResultPoint()}return x=xt.round((o.getX()+y.getX()+c.getX()+h.getX())/4),E=xt.round((o.getY()+y.getY()+c.getY()+h.getY())/4),new Lr(x,E)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,c,h,y,x){let E=bi.getInstance(),d=this.getDimension(),v=d/2-this.nbCenterLayers,A=d/2+this.nbCenterLayers;return E.sampleGrid(o,d,d,v,v,A,v,A,A,v,A,c.getX(),c.getY(),h.getX(),h.getY(),y.getX(),y.getY(),x.getX(),x.getY())}sampleLine(o,c,h){let y=0,x=this.distanceResultPoint(o,c),E=x/h,d=o.getX(),v=o.getY(),A=E*(c.getX()-o.getX())/x,I=E*(c.getY()-o.getY())/x;for(let P=0;P<h;P++)this.image.get(xt.round(d+P*A),xt.round(v+P*I))&&(y|=1<<h-P-1);return y}isWhiteOrBlackRectangle(o,c,h,y){let x=3;o=new Lr(o.getX()-x,o.getY()+x),c=new Lr(c.getX()-x,c.getY()-x),h=new Lr(h.getX()+x,h.getY()-x),y=new Lr(y.getX()+x,y.getY()+x);let E=this.getColor(y,o);if(E===0)return!1;let d=this.getColor(o,c);return d!==E||(d=this.getColor(c,h),d!==E)?!1:(d=this.getColor(h,y),d===E)}getColor(o,c){let h=this.distancePoint(o,c),y=(c.getX()-o.getX())/h,x=(c.getY()-o.getY())/h,E=0,d=o.getX(),v=o.getY(),A=this.image.get(o.getX(),o.getY()),I=Math.ceil(h);for(let k=0;k<I;k++)d+=y,v+=x,this.image.get(xt.round(d),xt.round(v))!==A&&E++;let P=E/h;return P>.1&&P<.9?0:P<=.1===A?1:-1}getFirstDifferent(o,c,h,y){let x=o.getX()+h,E=o.getY()+y;for(;this.isValid(x,E)&&this.image.get(x,E)===c;)x+=h,E+=y;for(x-=h,E-=y;this.isValid(x,E)&&this.image.get(x,E)===c;)x+=h;for(x-=h;this.isValid(x,E)&&this.image.get(x,E)===c;)E+=y;return E-=y,new Lr(x,E)}expandSquare(o,c,h){let y=h/(2*c),x=o[0].getX()-o[2].getX(),E=o[0].getY()-o[2].getY(),d=(o[0].getX()+o[2].getX())/2,v=(o[0].getY()+o[2].getY())/2,A=new mt(d+y*x,v+y*E),I=new mt(d-y*x,v-y*E);x=o[1].getX()-o[3].getX(),E=o[1].getY()-o[3].getY(),d=(o[1].getX()+o[3].getX())/2,v=(o[1].getY()+o[3].getY())/2;let P=new mt(d+y*x,v+y*E),k=new mt(d-y*x,v-y*E);return[A,P,I,k]}isValid(o,c){return o>=0&&o<this.image.getWidth()&&c>0&&c<this.image.getHeight()}isValidPoint(o){let c=xt.round(o.getX()),h=xt.round(o.getY());return this.isValid(c,h)}distancePoint(o,c){return xt.distance(o.getX(),o.getY(),c.getX(),c.getY())}distanceResultPoint(o,c){return xt.distance(o.getX(),o.getY(),c.getX(),c.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(K.truncDivision(this.nbLayers-4,8)+1)+15}}class hs{decode(o,c=null){let h=null,y=new Ro(o.getBlackMatrix()),x=null,E=null;try{let I=y.detectMirror(!1);x=I.getPoints(),this.reportFoundResultPoints(c,x),E=new Wt().decode(I)}catch(I){h=I}if(E==null)try{let I=y.detectMirror(!0);x=I.getPoints(),this.reportFoundResultPoints(c,x),E=new Wt().decode(I)}catch(I){throw h??I}let d=new ze(E.getText(),E.getRawBytes(),E.getNumBits(),x,$e.AZTEC,M.currentTimeMillis()),v=E.getByteSegments();v!=null&&d.putMetadata(lt.BYTE_SEGMENTS,v);let A=E.getECLevel();return A!=null&&d.putMetadata(lt.ERROR_CORRECTION_LEVEL,A),d}reportFoundResultPoints(o,c){if(o!=null){let h=o.get(J.NEED_RESULT_POINT_CALLBACK);h!=null&&c.forEach((y,x,E)=>{h.foundPossibleResultPoint(y)})}}reset(){}}class ms extends Ye{constructor(o=500){super(new hs,o)}}class Tn{decode(o,c){try{return this.doDecode(o,c)}catch{if(c&&c.get(J.TRY_HARDER)===!0&&o.isRotateSupported()){const x=o.rotateCounterClockwise(),E=this.doDecode(x,c),d=E.getResultMetadata();let v=270;d!==null&&d.get(lt.ORIENTATION)===!0&&(v=v+d.get(lt.ORIENTATION)%360),E.putMetadata(lt.ORIENTATION,v);const A=E.getResultPoints();if(A!==null){const I=x.getHeight();for(let P=0;P<A.length;P++)A[P]=new mt(I-A[P].getY()-1,A[P].getX())}return E}else throw new de}}reset(){}doDecode(o,c){const h=o.getWidth(),y=o.getHeight();let x=new X(h);const E=c&&c.get(J.TRY_HARDER)===!0,d=Math.max(1,y>>(E?8:5));let v;E?v=y:v=15;const A=Math.trunc(y/2);for(let I=0;I<v;I++){const P=Math.trunc((I+1)/2),k=(I&1)===0,F=A+d*(k?P:-P);if(F<0||F>=y)break;try{x=o.getBlackRow(F,x)}catch{continue}for(let q=0;q<2;q++){if(q===1&&(x.reverse(),c&&c.get(J.NEED_RESULT_POINT_CALLBACK)===!0)){const Q=new Map;c.forEach((re,ne)=>Q.set(ne,re)),Q.delete(J.NEED_RESULT_POINT_CALLBACK),c=Q}try{const Q=this.decodeRow(F,x,c);if(q===1){Q.putMetadata(lt.ORIENTATION,180);const re=Q.getResultPoints();re!==null&&(re[0]=new mt(h-re[0].getX()-1,re[0].getY()),re[1]=new mt(h-re[1].getX()-1,re[1].getY()))}return Q}catch{}}}throw new de}static recordPattern(o,c,h){const y=h.length;for(let A=0;A<y;A++)h[A]=0;const x=o.getSize();if(c>=x)throw new de;let E=!o.get(c),d=0,v=c;for(;v<x;){if(o.get(v)!==E)h[d]++;else{if(++d===y)break;h[d]=1,E=!E}v++}if(!(d===y||d===y-1&&v===x))throw new de}static recordPatternInReverse(o,c,h){let y=h.length,x=o.get(c);for(;c>0&&y>=0;)o.get(--c)!==x&&(y--,x=!x);if(y>=0)throw new de;Tn.recordPattern(o,c+1,h)}static patternMatchVariance(o,c,h){const y=o.length;let x=0,E=0;for(let A=0;A<y;A++)x+=o[A],E+=c[A];if(x<E)return Number.POSITIVE_INFINITY;const d=x/E;h*=d;let v=0;for(let A=0;A<y;A++){const I=o[A],P=c[A]*d,k=I>P?I-P:P-I;if(k>h)return Number.POSITIVE_INFINITY;v+=k}return v/x}}class rt extends Tn{static findStartPattern(o){const c=o.getSize(),h=o.getNextSet(0);let y=0,x=Int32Array.from([0,0,0,0,0,0]),E=h,d=!1;const v=6;for(let A=h;A<c;A++)if(o.get(A)!==d)x[y]++;else{if(y===v-1){let I=rt.MAX_AVG_VARIANCE,P=-1;for(let k=rt.CODE_START_A;k<=rt.CODE_START_C;k++){const F=Tn.patternMatchVariance(x,rt.CODE_PATTERNS[k],rt.MAX_INDIVIDUAL_VARIANCE);F<I&&(I=F,P=k)}if(P>=0&&o.isRange(Math.max(0,E-(A-E)/2),E,!1))return Int32Array.from([E,A,P]);E+=x[0]+x[1],x=x.slice(2,x.length-1),x[y-1]=0,x[y]=0,y--}else y++;x[y]=1,d=!d}throw new de}static decodeCode(o,c,h){Tn.recordPattern(o,h,c);let y=rt.MAX_AVG_VARIANCE,x=-1;for(let E=0;E<rt.CODE_PATTERNS.length;E++){const d=rt.CODE_PATTERNS[E],v=this.patternMatchVariance(c,d,rt.MAX_INDIVIDUAL_VARIANCE);v<y&&(y=v,x=E)}if(x>=0)return x;throw new de}decodeRow(o,c,h){const y=h&&h.get(J.ASSUME_GS1)===!0,x=rt.findStartPattern(c),E=x[2];let d=0;const v=new Uint8Array(20);v[d++]=E;let A;switch(E){case rt.CODE_START_A:A=rt.CODE_CODE_A;break;case rt.CODE_START_B:A=rt.CODE_CODE_B;break;case rt.CODE_START_C:A=rt.CODE_CODE_C;break;default:throw new V}let I=!1,P=!1,k="",F=x[0],q=x[1];const Q=Int32Array.from([0,0,0,0,0,0]);let re=0,ne=0,le=E,fe=0,ue=!0,ge=!1,he=!1;for(;!I;){const Je=P;switch(P=!1,re=ne,ne=rt.decodeCode(c,Q,q),v[d++]=ne,ne!==rt.CODE_STOP&&(ue=!0),ne!==rt.CODE_STOP&&(fe++,le+=fe*ne),F=q,q+=Q.reduce((vt,gt)=>vt+gt,0),ne){case rt.CODE_START_A:case rt.CODE_START_B:case rt.CODE_START_C:throw new V}switch(A){case rt.CODE_CODE_A:if(ne<64)he===ge?k+=String.fromCharCode(32+ne):k+=String.fromCharCode(32+ne+128),he=!1;else if(ne<96)he===ge?k+=String.fromCharCode(ne-64):k+=String.fromCharCode(ne+64),he=!1;else switch(ne!==rt.CODE_STOP&&(ue=!1),ne){case rt.CODE_FNC_1:y&&(k.length===0?k+="]C1":k+="");break;case rt.CODE_FNC_2:case rt.CODE_FNC_3:break;case rt.CODE_FNC_4_A:!ge&&he?(ge=!0,he=!1):ge&&he?(ge=!1,he=!1):he=!0;break;case rt.CODE_SHIFT:P=!0,A=rt.CODE_CODE_B;break;case rt.CODE_CODE_B:A=rt.CODE_CODE_B;break;case rt.CODE_CODE_C:A=rt.CODE_CODE_C;break;case rt.CODE_STOP:I=!0;break}break;case rt.CODE_CODE_B:if(ne<96)he===ge?k+=String.fromCharCode(32+ne):k+=String.fromCharCode(32+ne+128),he=!1;else switch(ne!==rt.CODE_STOP&&(ue=!1),ne){case rt.CODE_FNC_1:y&&(k.length===0?k+="]C1":k+="");break;case rt.CODE_FNC_2:case rt.CODE_FNC_3:break;case rt.CODE_FNC_4_B:!ge&&he?(ge=!0,he=!1):ge&&he?(ge=!1,he=!1):he=!0;break;case rt.CODE_SHIFT:P=!0,A=rt.CODE_CODE_A;break;case rt.CODE_CODE_A:A=rt.CODE_CODE_A;break;case rt.CODE_CODE_C:A=rt.CODE_CODE_C;break;case rt.CODE_STOP:I=!0;break}break;case rt.CODE_CODE_C:if(ne<100)ne<10&&(k+="0"),k+=ne;else switch(ne!==rt.CODE_STOP&&(ue=!1),ne){case rt.CODE_FNC_1:y&&(k.length===0?k+="]C1":k+="");break;case rt.CODE_CODE_A:A=rt.CODE_CODE_A;break;case rt.CODE_CODE_B:A=rt.CODE_CODE_B;break;case rt.CODE_STOP:I=!0;break}break}Je&&(A=A===rt.CODE_CODE_A?rt.CODE_CODE_B:rt.CODE_CODE_A)}const we=q-F;if(q=c.getNextUnset(q),!c.isRange(q,Math.min(c.getSize(),q+(q-F)/2),!1))throw new de;if(le-=fe*re,le%103!==re)throw new N;const Ce=k.length;if(Ce===0)throw new de;Ce>0&&ue&&(A===rt.CODE_CODE_C?k=k.substring(0,Ce-2):k=k.substring(0,Ce-1));const be=(x[1]+x[0])/2,Me=F+we/2,He=v.length,st=new Uint8Array(He);for(let Je=0;Je<He;Je++)st[Je]=v[Je];const ut=[new mt(be,o),new mt(Me,o)];return new ze(k,st,0,ut,$e.CODE_128,new Date().getTime())}}rt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],rt.MAX_AVG_VARIANCE=.25,rt.MAX_INDIVIDUAL_VARIANCE=.7,rt.CODE_SHIFT=98,rt.CODE_CODE_C=99,rt.CODE_CODE_B=100,rt.CODE_CODE_A=101,rt.CODE_FNC_1=102,rt.CODE_FNC_2=97,rt.CODE_FNC_3=96,rt.CODE_FNC_4_A=101,rt.CODE_FNC_4_B=100,rt.CODE_START_A=103,rt.CODE_START_B=104,rt.CODE_START_C=105,rt.CODE_STOP=106;class fn extends Tn{constructor(o=!1,c=!1){super(),this.usingCheckDigit=o,this.extendedMode=c,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(o,c,h){let y=this.counters;y.fill(0),this.decodeRowResult="";let x=fn.findAsteriskPattern(c,y),E=c.getNextSet(x[1]),d=c.getSize(),v,A;do{fn.recordPattern(c,E,y);let Q=fn.toNarrowWidePattern(y);if(Q<0)throw new de;v=fn.patternToChar(Q),this.decodeRowResult+=v,A=E;for(let re of y)E+=re;E=c.getNextSet(E)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let Q of y)I+=Q;let P=E-A-I;if(E!==d&&P*2<I)throw new de;if(this.usingCheckDigit){let Q=this.decodeRowResult.length-1,re=0;for(let ne=0;ne<Q;ne++)re+=fn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ne));if(this.decodeRowResult.charAt(Q)!==fn.ALPHABET_STRING.charAt(re%43))throw new N;this.decodeRowResult=this.decodeRowResult.substring(0,Q)}if(this.decodeRowResult.length===0)throw new de;let k;this.extendedMode?k=fn.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;let F=(x[1]+x[0])/2,q=A+I/2;return new ze(k,null,0,[new mt(F,o),new mt(q,o)],$e.CODE_39,new Date().getTime())}static findAsteriskPattern(o,c){let h=o.getSize(),y=o.getNextSet(0),x=0,E=y,d=!1,v=c.length;for(let A=y;A<h;A++)if(o.get(A)!==d)c[x]++;else{if(x===v-1){if(this.toNarrowWidePattern(c)===fn.ASTERISK_ENCODING&&o.isRange(Math.max(0,E-Math.floor((A-E)/2)),E,!1))return[E,A];E+=c[0]+c[1],c.copyWithin(0,2,2+x-1),c[x-1]=0,c[x]=0,x--}else x++;c[x]=1,d=!d}throw new de}static toNarrowWidePattern(o){let c=o.length,h=0,y;do{let x=2147483647;for(let v of o)v<x&&v>h&&(x=v);h=x,y=0;let E=0,d=0;for(let v=0;v<c;v++){let A=o[v];A>h&&(d|=1<<c-1-v,y++,E+=A)}if(y===3){for(let v=0;v<c&&y>0;v++){let A=o[v];if(A>h&&(y--,A*2>=E))return-1}return d}}while(y>3);return-1}static patternToChar(o){for(let c=0;c<fn.CHARACTER_ENCODINGS.length;c++)if(fn.CHARACTER_ENCODINGS[c]===o)return fn.ALPHABET_STRING.charAt(c);if(o===fn.ASTERISK_ENCODING)return"*";throw new de}static decodeExtended(o){let c=o.length,h="";for(let y=0;y<c;y++){let x=o.charAt(y);if(x==="+"||x==="$"||x==="%"||x==="/"){let E=o.charAt(y+1),d="\0";switch(x){case"+":if(E>="A"&&E<="Z")d=String.fromCharCode(E.charCodeAt(0)+32);else throw new V;break;case"$":if(E>="A"&&E<="Z")d=String.fromCharCode(E.charCodeAt(0)-64);else throw new V;break;case"%":if(E>="A"&&E<="E")d=String.fromCharCode(E.charCodeAt(0)-38);else if(E>="F"&&E<="J")d=String.fromCharCode(E.charCodeAt(0)-11);else if(E>="K"&&E<="O")d=String.fromCharCode(E.charCodeAt(0)+16);else if(E>="P"&&E<="T")d=String.fromCharCode(E.charCodeAt(0)+43);else if(E==="U")d="\0";else if(E==="V")d="@";else if(E==="W")d="`";else if(E==="X"||E==="Y"||E==="Z")d="";else throw new V;break;case"/":if(E>="A"&&E<="O")d=String.fromCharCode(E.charCodeAt(0)-32);else if(E==="Z")d=":";else throw new V;break}h+=d,y++}else h+=x}return h}}fn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",fn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],fn.ASTERISK_ENCODING=148;class Ze extends Tn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,c,h){let y=this.decodeStart(c),x=this.decodeEnd(c),E=new ee;Ze.decodeMiddle(c,y[1],x[0],E);let d=E.toString(),v=null;h!=null&&(v=h.get(J.ALLOWED_LENGTHS)),v==null&&(v=Ze.DEFAULT_ALLOWED_LENGTHS);let A=d.length,I=!1,P=0;for(let q of v){if(A===q){I=!0;break}q>P&&(P=q)}if(!I&&A>P&&(I=!0),!I)throw new V;const k=[new mt(y[1],o),new mt(x[0],o)];return new ze(d,null,0,k,$e.ITF,new Date().getTime())}static decodeMiddle(o,c,h,y){let x=new Int32Array(10),E=new Int32Array(5),d=new Int32Array(5);for(x.fill(0),E.fill(0),d.fill(0);c<h;){Tn.recordPattern(o,c,x);for(let A=0;A<5;A++){let I=2*A;E[A]=x[I],d[A]=x[I+1]}let v=Ze.decodeDigit(E);y.append(v.toString()),v=this.decodeDigit(d),y.append(v.toString()),x.forEach(function(A){c+=A})}}decodeStart(o){let c=Ze.skipWhiteSpace(o),h=Ze.findGuardPattern(o,c,Ze.START_PATTERN);return this.narrowLineWidth=(h[1]-h[0])/4,this.validateQuietZone(o,h[0]),h}validateQuietZone(o,c){let h=this.narrowLineWidth*10;h=h<c?h:c;for(let y=c-1;h>0&&y>=0&&!o.get(y);y--)h--;if(h!==0)throw new de}static skipWhiteSpace(o){const c=o.getSize(),h=o.getNextSet(0);if(h===c)throw new de;return h}decodeEnd(o){o.reverse();try{let c=Ze.skipWhiteSpace(o),h;try{h=Ze.findGuardPattern(o,c,Ze.END_PATTERN_REVERSED[0])}catch(x){x instanceof de&&(h=Ze.findGuardPattern(o,c,Ze.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,h[0]);let y=h[0];return h[0]=o.getSize()-h[1],h[1]=o.getSize()-y,h}finally{o.reverse()}}static findGuardPattern(o,c,h){let y=h.length,x=new Int32Array(y),E=o.getSize(),d=!1,v=0,A=c;x.fill(0);for(let I=c;I<E;I++)if(o.get(I)!==d)x[v]++;else{if(v===y-1){if(Tn.patternMatchVariance(x,h,Ze.MAX_INDIVIDUAL_VARIANCE)<Ze.MAX_AVG_VARIANCE)return[A,I];A+=x[0]+x[1],M.arraycopy(x,2,x,0,v-1),x[v-1]=0,x[v]=0,v--}else v++;x[v]=1,d=!d}throw new de}static decodeDigit(o){let c=Ze.MAX_AVG_VARIANCE,h=-1,y=Ze.PATTERNS.length;for(let x=0;x<y;x++){let E=Ze.PATTERNS[x],d=Tn.patternMatchVariance(o,E,Ze.MAX_INDIVIDUAL_VARIANCE);d<c?(c=d,h=x):d===c&&(h=-1)}if(h>=0)return h%10;throw new de}}Ze.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ze.MAX_AVG_VARIANCE=.38,Ze.MAX_INDIVIDUAL_VARIANCE=.5,Ze.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ze.START_PATTERN=Int32Array.from([1,1,1,1]),Ze.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Fn extends Tn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let c=!1,h,y=0,x=Int32Array.from([0,0,0]);for(;!c;){x=Int32Array.from([0,0,0]),h=Fn.findGuardPattern(o,y,!1,this.START_END_PATTERN,x);let E=h[0];y=h[1];let d=E-(y-E);d>=0&&(c=o.isRange(d,E,!1))}return h}static checkChecksum(o){return Fn.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let c=o.length;if(c===0)return!1;let h=parseInt(o.charAt(c-1),10);return Fn.getStandardUPCEANChecksum(o.substring(0,c-1))===h}static getStandardUPCEANChecksum(o){let c=o.length,h=0;for(let y=c-1;y>=0;y-=2){let x=o.charAt(y).charCodeAt(0)-48;if(x<0||x>9)throw new V;h+=x}h*=3;for(let y=c-2;y>=0;y-=2){let x=o.charAt(y).charCodeAt(0)-48;if(x<0||x>9)throw new V;h+=x}return(1e3-h)%10}static decodeEnd(o,c){return Fn.findGuardPattern(o,c,!1,Fn.START_END_PATTERN,new Int32Array(Fn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,c,h,y){return this.findGuardPattern(o,c,h,y,new Int32Array(y.length))}static findGuardPattern(o,c,h,y,x){let E=o.getSize();c=h?o.getNextUnset(c):o.getNextSet(c);let d=0,v=c,A=y.length,I=h;for(let P=c;P<E;P++)if(o.get(P)!==I)x[d]++;else{if(d===A-1){if(Tn.patternMatchVariance(x,y,Fn.MAX_INDIVIDUAL_VARIANCE)<Fn.MAX_AVG_VARIANCE)return Int32Array.from([v,P]);v+=x[0]+x[1];let k=x.slice(2,x.length-1);for(let F=0;F<d-1;F++)x[F]=k[F];x[d-1]=0,x[d]=0,d--}else d++;x[d]=1,I=!I}throw new de}static decodeDigit(o,c,h,y){this.recordPattern(o,h,c);let x=this.MAX_AVG_VARIANCE,E=-1,d=y.length;for(let v=0;v<d;v++){let A=y[v],I=Tn.patternMatchVariance(c,A,Fn.MAX_INDIVIDUAL_VARIANCE);I<x&&(x=I,E=v)}if(E>=0)return E;throw new de}}Fn.MAX_AVG_VARIANCE=.48,Fn.MAX_INDIVIDUAL_VARIANCE=.7,Fn.START_END_PATTERN=Int32Array.from([1,1,1]),Fn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Fn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Fn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ci{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,c,h){let y=this.decodeRowStringBuffer,x=this.decodeMiddle(c,h,y),E=y.toString(),d=Ci.parseExtensionString(E),v=[new mt((h[0]+h[1])/2,o),new mt(x,o)],A=new ze(E,null,0,v,$e.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&A.putAllMetadata(d),A}decodeMiddle(o,c,h){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let x=o.getSize(),E=c[1],d=0;for(let A=0;A<5&&E<x;A++){let I=Fn.decodeDigit(o,y,E,Fn.L_AND_G_PATTERNS);h+=String.fromCharCode(48+I%10);for(let P of y)E+=P;I>=10&&(d|=1<<4-A),A!==4&&(E=o.getNextSet(E),E=o.getNextUnset(E))}if(h.length!==5)throw new de;let v=this.determineCheckDigit(d);if(Ci.extensionChecksum(h.toString())!==v)throw new de;return E}static extensionChecksum(o){let c=o.length,h=0;for(let y=c-2;y>=0;y-=2)h+=o.charAt(y).charCodeAt(0)-48;h*=3;for(let y=c-1;y>=0;y-=2)h+=o.charAt(y).charCodeAt(0)-48;return h*=3,h%10}determineCheckDigit(o){for(let c=0;c<10;c++)if(o===this.CHECK_DIGIT_ENCODINGS[c])return c;throw new de}static parseExtensionString(o){if(o.length!==5)return null;let c=Ci.parseExtension5String(o);return c==null?null:new Map([[lt.SUGGESTED_PRICE,c]])}static parseExtension5String(o){let c;switch(o.charAt(0)){case"0":c="";break;case"5":c="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}c="";break;default:c="";break}let h=parseInt(o.substring(1)),y=(h/100).toString(),x=h%100,E=x<10?"0"+x:x.toString();return c+y+"."+E}}class Vs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,c,h){let y=this.decodeRowStringBuffer,x=this.decodeMiddle(c,h,y),E=y.toString(),d=Vs.parseExtensionString(E),v=[new mt((h[0]+h[1])/2,o),new mt(x,o)],A=new ze(E,null,0,v,$e.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&A.putAllMetadata(d),A}decodeMiddle(o,c,h){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let x=o.getSize(),E=c[1],d=0;for(let v=0;v<2&&E<x;v++){let A=Fn.decodeDigit(o,y,E,Fn.L_AND_G_PATTERNS);h+=String.fromCharCode(48+A%10);for(let I of y)E+=I;A>=10&&(d|=1<<1-v),v!==1&&(E=o.getNextSet(E),E=o.getNextUnset(E))}if(h.length!==2)throw new de;if(parseInt(h.toString())%4!==d)throw new de;return E}static parseExtensionString(o){return o.length!==2?null:new Map([[lt.ISSUE_NUMBER,parseInt(o)]])}}class ct{static decodeRow(o,c,h){let y=Fn.findGuardPattern(c,h,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ci().decodeRow(o,c,y)}catch{return new Vs().decodeRow(o,c,y)}}}ct.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class nn extends Fn{constructor(){super(),this.decodeRowStringBuffer="",nn.L_AND_G_PATTERNS=nn.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let c=nn.L_PATTERNS[o-10],h=new Int32Array(c.length);for(let y=0;y<c.length;y++)h[y]=c[c.length-y-1];nn.L_AND_G_PATTERNS[o]=h}}decodeRow(o,c,h){let y=nn.findStartGuardPattern(c),x=h==null?null:h.get(J.NEED_RESULT_POINT_CALLBACK);if(x!=null){const ue=new mt((y[0]+y[1])/2,o);x.foundPossibleResultPoint(ue)}let E=this.decodeMiddle(c,y,this.decodeRowStringBuffer),d=E.rowOffset,v=E.resultString;if(x!=null){const ue=new mt(d,o);x.foundPossibleResultPoint(ue)}let A=this.decodeEnd(c,d);if(x!=null){const ue=new mt((A[0]+A[1])/2,o);x.foundPossibleResultPoint(ue)}let I=A[1],P=I+(I-A[0]);if(P>=c.getSize()||!c.isRange(I,P,!1))throw new de;let k=v.toString();if(k.length<8)throw new V;if(!nn.checkChecksum(k))throw new N;let F=(y[1]+y[0])/2,q=(A[1]+A[0])/2,Q=this.getBarcodeFormat(),re=[new mt(F,o),new mt(q,o)],ne=new ze(k,null,0,re,Q,new Date().getTime()),le=0;try{let ue=ct.decodeRow(o,c,A[1]);ne.putMetadata(lt.UPC_EAN_EXTENSION,ue.getText()),ne.putAllMetadata(ue.getResultMetadata()),ne.addResultPoints(ue.getResultPoints()),le=ue.getText().length}catch{}let fe=h==null?null:h.get(J.ALLOWED_EAN_EXTENSIONS);if(fe!=null){let ue=!1;for(let ge in fe)if(le.toString()===ge){ue=!0;break}if(!ue)throw new de}return ne}decodeEnd(o,c){return nn.findGuardPattern(o,c,!1,nn.START_END_PATTERN,new Int32Array(nn.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return nn.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let c=o.length;if(c===0)return!1;let h=parseInt(o.charAt(c-1),10);return nn.getStandardUPCEANChecksum(o.substring(0,c-1))===h}static getStandardUPCEANChecksum(o){let c=o.length,h=0;for(let y=c-1;y>=0;y-=2){let x=o.charAt(y).charCodeAt(0)-48;if(x<0||x>9)throw new V;h+=x}h*=3;for(let y=c-2;y>=0;y-=2){let x=o.charAt(y).charCodeAt(0)-48;if(x<0||x>9)throw new V;h+=x}return(1e3-h)%10}}class Yn extends nn{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,c,h){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let x=o.getSize(),E=c[1],d=0;for(let A=0;A<6&&E<x;A++){let I=nn.decodeDigit(o,y,E,nn.L_AND_G_PATTERNS);h+=String.fromCharCode(48+I%10);for(let P of y)E+=P;I>=10&&(d|=1<<5-A)}h=Yn.determineFirstDigit(h,d),E=nn.findGuardPattern(o,E,!0,nn.MIDDLE_PATTERN,new Int32Array(nn.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<6&&E<x;A++){let I=nn.decodeDigit(o,y,E,nn.L_PATTERNS);h+=String.fromCharCode(48+I);for(let P of y)E+=P}return{rowOffset:E,resultString:h}}getBarcodeFormat(){return $e.EAN_13}static determineFirstDigit(o,c){for(let h=0;h<10;h++)if(c===this.FIRST_DIGIT_ENCODINGS[h])return o=String.fromCharCode(48+h)+o,o;throw new de}}Yn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ba extends nn{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,c,h){const y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let x=o.getSize(),E=c[1];for(let v=0;v<4&&E<x;v++){let A=nn.decodeDigit(o,y,E,nn.L_PATTERNS);h+=String.fromCharCode(48+A);for(let I of y)E+=I}E=nn.findGuardPattern(o,E,!0,nn.MIDDLE_PATTERN,new Int32Array(nn.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<4&&E<x;v++){let A=nn.decodeDigit(o,y,E,nn.L_PATTERNS);h+=String.fromCharCode(48+A);for(let I of y)E+=I}return{rowOffset:E,resultString:h}}getBarcodeFormat(){return $e.EAN_8}}class Fa extends nn{constructor(){super(...arguments),this.ean13Reader=new Yn}getBarcodeFormat(){return $e.UPC_A}decode(o,c){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,c,h){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,c,h))}decodeMiddle(o,c,h){return this.ean13Reader.decodeMiddle(o,c,h)}maybeReturnResult(o){let c=o.getText();if(c.charAt(0)==="0"){let h=new ze(c.substring(1),null,null,o.getResultPoints(),$e.UPC_A);return o.getResultMetadata()!=null&&h.putAllMetadata(o.getResultMetadata()),h}else throw new de}reset(){this.ean13Reader.reset()}}class Er extends nn{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,c,h){const y=this.decodeMiddleCounters.map(A=>A);y[0]=0,y[1]=0,y[2]=0,y[3]=0;const x=o.getSize();let E=c[1],d=0;for(let A=0;A<6&&E<x;A++){const I=Er.decodeDigit(o,y,E,Er.L_AND_G_PATTERNS);h+=String.fromCharCode(48+I%10);for(let P of y)E+=P;I>=10&&(d|=1<<5-A)}let v=Er.determineNumSysAndCheckDigit(h,d);return{rowOffset:E,resultString:v}}decodeEnd(o,c){return Er.findGuardPatternWithoutCounters(o,c,!0,Er.MIDDLE_END_PATTERN)}checkChecksum(o){return nn.checkChecksum(Er.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,c){for(let h=0;h<=1;h++)for(let y=0;y<10;y++)if(c===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[h][y]){let x=String.fromCharCode(48+h),E=String.fromCharCode(48+y);return x+o+E}throw de.getNotFoundInstance()}getBarcodeFormat(){return $e.UPC_E}static convertUPCEtoUPCA(o){const c=o.slice(1,7).split("").map(x=>x.charCodeAt(0)),h=new ee;h.append(o.charAt(0));let y=c[5];switch(y){case 0:case 1:case 2:h.appendChars(c,0,2),h.append(y),h.append("0000"),h.appendChars(c,2,3);break;case 3:h.appendChars(c,0,3),h.append("00000"),h.appendChars(c,3,2);break;case 4:h.appendChars(c,0,4),h.append("00000"),h.append(c[4]);break;default:h.appendChars(c,0,5),h.append("0000"),h.append(y);break}return o.length>=8&&h.append(o.charAt(7)),h.toString()}}Er.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Er.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ll extends Tn{constructor(o){super();let c=o==null?null:o.get(J.POSSIBLE_FORMATS),h=[];r(c)?(h.push(new Yn),h.push(new Fa),h.push(new ba),h.push(new Er)):(c.indexOf($e.EAN_13)>-1&&h.push(new Yn),c.indexOf($e.UPC_A)>-1&&h.push(new Fa),c.indexOf($e.EAN_8)>-1&&h.push(new ba),c.indexOf($e.UPC_E)>-1&&h.push(new Er)),this.readers=h}decodeRow(o,c,h){for(let y of this.readers)try{const x=y.decodeRow(o,c,h),E=x.getBarcodeFormat()===$e.EAN_13&&x.getText().charAt(0)==="0",d=h==null?null:h.get(J.POSSIBLE_FORMATS),v=d==null||d.includes($e.UPC_A);if(E&&v){const A=x.getRawBytes(),I=new ze(x.getText().substring(1),A,A?A.length:null,x.getResultPoints(),$e.UPC_A);return I.putAllMetadata(x.getResultMetadata()),I}return x}catch{}throw new de}reset(){for(let o of this.readers)o.reset()}}class ii extends Tn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(o,c){for(let h=0;h<c.length;h++)if(Tn.patternMatchVariance(o,c[h],ii.MAX_INDIVIDUAL_VARIANCE)<ii.MAX_AVG_VARIANCE)return h;throw new de}static count(o){return xt.sum(new Int32Array(o))}static increment(o,c){let h=0,y=c[0];for(let x=1;x<o.length;x++)c[x]>y&&(y=c[x],h=x);o[h]++}static decrement(o,c){let h=0,y=c[0];for(let x=1;x<o.length;x++)c[x]<y&&(y=c[x],h=x);o[h]--}static isFinderPattern(o){let c=o[0]+o[1],h=c+o[2]+o[3],y=c/h;if(y>=ii.MIN_FINDER_PATTERN_RATIO&&y<=ii.MAX_FINDER_PATTERN_RATIO){let x=Number.MAX_SAFE_INTEGER,E=Number.MIN_SAFE_INTEGER;for(let d of o)d>E&&(E=d),d<x&&(x=d);return E<10*x}return!1}}ii.MAX_AVG_VARIANCE=.2,ii.MAX_INDIVIDUAL_VARIANCE=.45,ii.MIN_FINDER_PATTERN_RATIO=9.5/12,ii.MAX_FINDER_PATTERN_RATIO=12.5/14;class Hr{constructor(o,c){this.value=o,this.checksumPortion=c}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){if(!(o instanceof Hr))return!1;const c=o;return this.value===c.value&&this.checksumPortion===c.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ui{constructor(o,c,h,y,x){this.value=o,this.startEnd=c,this.value=o,this.startEnd=c,this.resultPoints=new Array,this.resultPoints.push(new mt(h,x)),this.resultPoints.push(new mt(y,x))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){if(!(o instanceof Ui))return!1;const c=o;return this.value===c.value}hashCode(){return this.value}}class ta{constructor(){}static getRSSvalue(o,c,h){let y=0;for(let v of o)y+=v;let x=0,E=0,d=o.length;for(let v=0;v<d-1;v++){let A;for(A=1,E|=1<<v;A<o[v];A++,E&=~(1<<v)){let I=ta.combins(y-A-1,d-v-2);if(h&&E===0&&y-A-(d-v-1)>=d-v-1&&(I-=ta.combins(y-A-(d-v),d-v-2)),d-v-1>1){let P=0;for(let k=y-A-(d-v-2);k>c;k--)P+=ta.combins(y-A-k-1,d-v-3);I-=P*(d-1-v)}else y-A>c&&I--;x+=I}y-=A}return x}static combins(o,c){let h,y;o-c>c?(y=c,h=o-c):(y=o-c,h=c);let x=1,E=1;for(let d=o;d>h;d--)x*=d,E<=y&&(x/=E,E++);for(;E<=y;)x/=E,E++;return x}}class gs{static buildBitArray(o){let c=o.length*2-1;o[o.length-1].getRightChar()==null&&(c-=1);let h=12*c,y=new X(h),x=0,d=o[0].getRightChar().getValue();for(let v=11;v>=0;--v)(d&1<<v)!=0&&y.set(x),x++;for(let v=1;v<o.length;++v){let A=o[v],I=A.getLeftChar().getValue();for(let P=11;P>=0;--P)(I&1<<P)!=0&&y.set(x),x++;if(A.getRightChar()!=null){let P=A.getRightChar().getValue();for(let k=11;k>=0;--k)(P&1<<k)!=0&&y.set(x),x++}}return y}}class _n{constructor(o,c){c?this.decodedInformation=null:(this.finished=o,this.decodedInformation=c)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class mr{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}class Kr extends mr{constructor(o,c){super(o),this.value=c}getValue(){return this.value}isFNC1(){return this.value===Kr.FNC1}}Kr.FNC1="$";class ci extends mr{constructor(o,c,h){super(o),h?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=c}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class fi extends mr{constructor(o,c,h){if(super(o),c<0||c>10||h<0||h>10)throw new V;this.firstDigit=c,this.secondDigit=h}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===fi.FNC1}isSecondDigitFNC1(){return this.secondDigit===fi.FNC1}isAnyFNC1(){return this.firstDigit===fi.FNC1||this.secondDigit===fi.FNC1}}fi.FNC1=10;class ft{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new de;let c=o.substring(0,2);for(let x of ft.TWO_DIGIT_DATA_LENGTH)if(x[0]===c)return x[1]===ft.VARIABLE_LENGTH?ft.processVariableAI(2,x[2],o):ft.processFixedAI(2,x[1],o);if(o.length<3)throw new de;let h=o.substring(0,3);for(let x of ft.THREE_DIGIT_DATA_LENGTH)if(x[0]===h)return x[1]===ft.VARIABLE_LENGTH?ft.processVariableAI(3,x[2],o):ft.processFixedAI(3,x[1],o);for(let x of ft.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(x[0]===h)return x[1]===ft.VARIABLE_LENGTH?ft.processVariableAI(4,x[2],o):ft.processFixedAI(4,x[1],o);if(o.length<4)throw new de;let y=o.substring(0,4);for(let x of ft.FOUR_DIGIT_DATA_LENGTH)if(x[0]===y)return x[1]===ft.VARIABLE_LENGTH?ft.processVariableAI(4,x[2],o):ft.processFixedAI(4,x[1],o);throw new de}static processFixedAI(o,c,h){if(h.length<o)throw new de;let y=h.substring(0,o);if(h.length<o+c)throw new de;let x=h.substring(o,o+c),E=h.substring(o+c),d="("+y+")"+x,v=ft.parseFieldsInGeneralPurpose(E);return v==null?d:d+v}static processVariableAI(o,c,h){let y=h.substring(0,o),x;h.length<o+c?x=h.length:x=o+c;let E=h.substring(o,x),d=h.substring(x),v="("+y+")"+E,A=ft.parseFieldsInGeneralPurpose(d);return A==null?v:v+A}}ft.VARIABLE_LENGTH=[],ft.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ft.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ft.VARIABLE_LENGTH,20],["22",ft.VARIABLE_LENGTH,29],["30",ft.VARIABLE_LENGTH,8],["37",ft.VARIABLE_LENGTH,8],["90",ft.VARIABLE_LENGTH,30],["91",ft.VARIABLE_LENGTH,30],["92",ft.VARIABLE_LENGTH,30],["93",ft.VARIABLE_LENGTH,30],["94",ft.VARIABLE_LENGTH,30],["95",ft.VARIABLE_LENGTH,30],["96",ft.VARIABLE_LENGTH,30],["97",ft.VARIABLE_LENGTH,3],["98",ft.VARIABLE_LENGTH,30],["99",ft.VARIABLE_LENGTH,30]],ft.THREE_DIGIT_DATA_LENGTH=[["240",ft.VARIABLE_LENGTH,30],["241",ft.VARIABLE_LENGTH,30],["242",ft.VARIABLE_LENGTH,6],["250",ft.VARIABLE_LENGTH,30],["251",ft.VARIABLE_LENGTH,30],["253",ft.VARIABLE_LENGTH,17],["254",ft.VARIABLE_LENGTH,20],["400",ft.VARIABLE_LENGTH,30],["401",ft.VARIABLE_LENGTH,30],["402",17],["403",ft.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ft.VARIABLE_LENGTH,20],["421",ft.VARIABLE_LENGTH,15],["422",3],["423",ft.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ft.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ft.VARIABLE_LENGTH,15],["391",ft.VARIABLE_LENGTH,18],["392",ft.VARIABLE_LENGTH,15],["393",ft.VARIABLE_LENGTH,18],["703",ft.VARIABLE_LENGTH,30]],ft.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ft.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ft.VARIABLE_LENGTH,20],["8003",ft.VARIABLE_LENGTH,30],["8004",ft.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ft.VARIABLE_LENGTH,30],["8008",ft.VARIABLE_LENGTH,12],["8018",18],["8020",ft.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ft.VARIABLE_LENGTH,70],["8200",ft.VARIABLE_LENGTH,70]];class Oi{constructor(o){this.buffer=new ee,this.information=o}decodeAllCodes(o,c){let h=c,y=null;do{let x=this.decodeGeneralPurposeField(h,y),E=ft.parseFieldsInGeneralPurpose(x.getNewString());if(E!=null&&o.append(E),x.isRemaining()?y=""+x.getRemainingValue():y=null,h===x.getNewPosition())break;h=x.getNewPosition()}while(!0);return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let c=o;c<o+3;++c)if(this.information.get(c))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let x=this.extractNumericValueFromBitArray(o,4);return x===0?new fi(this.information.getSize(),fi.FNC1,fi.FNC1):new fi(this.information.getSize(),x-1,fi.FNC1)}let c=this.extractNumericValueFromBitArray(o,7),h=(c-8)/11,y=(c-8)%11;return new fi(o+7,h,y)}extractNumericValueFromBitArray(o,c){return Oi.extractNumericValueFromBitArray(this.information,o,c)}static extractNumericValueFromBitArray(o,c,h){let y=0;for(let x=0;x<h;++x)o.get(c+x)&&(y|=1<<h-x-1);return y}decodeGeneralPurposeField(o,c){this.buffer.setLengthToZero(),c!=null&&this.buffer.append(c),this.current.setPosition(o);let h=this.parseBlocks();return h!=null&&h.isRemaining()?new ci(this.current.getPosition(),this.buffer.toString(),h.getRemainingValue()):new ci(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,c;do{let h=this.current.getPosition();if(this.current.isAlpha()?(c=this.parseAlphaBlock(),o=c.isFinished()):this.current.isIsoIec646()?(c=this.parseIsoIec646Block(),o=c.isFinished()):(c=this.parseNumericBlock(),o=c.isFinished()),!(h!==this.current.getPosition())&&!o)break}while(!o);return c.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let c;return o.isSecondDigitFNC1()?c=new ci(this.current.getPosition(),this.buffer.toString()):c=new ci(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new _n(!0,c)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let c=new ci(this.current.getPosition(),this.buffer.toString());return new _n(!0,c)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new _n(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let c=new ci(this.current.getPosition(),this.buffer.toString());return new _n(!0,c)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new _n(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let c=new ci(this.current.getPosition(),this.buffer.toString());return new _n(!0,c)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new _n(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,5);if(c>=5&&c<16)return!0;if(o+7>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(o,7);if(h>=64&&h<116)return!0;if(o+8>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(o,8);return y>=232&&y<253}decodeIsoIec646(o){let c=this.extractNumericValueFromBitArray(o,5);if(c===15)return new Kr(o+5,Kr.FNC1);if(c>=5&&c<15)return new Kr(o+5,"0"+(c-5));let h=this.extractNumericValueFromBitArray(o,7);if(h>=64&&h<90)return new Kr(o+7,""+(h+1));if(h>=90&&h<116)return new Kr(o+7,""+(h+7));let y=this.extractNumericValueFromBitArray(o,8),x;switch(y){case 232:x="!";break;case 233:x='"';break;case 234:x="%";break;case 235:x="&";break;case 236:x="'";break;case 237:x="(";break;case 238:x=")";break;case 239:x="*";break;case 240:x="+";break;case 241:x=",";break;case 242:x="-";break;case 243:x=".";break;case 244:x="/";break;case 245:x=":";break;case 246:x=";";break;case 247:x="<";break;case 248:x="=";break;case 249:x=">";break;case 250:x="?";break;case 251:x="_";break;case 252:x=" ";break;default:throw new V}return new Kr(o+8,x)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,5);if(c>=5&&c<16)return!0;if(o+6>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(o,6);return h>=16&&h<63}decodeAlphanumeric(o){let c=this.extractNumericValueFromBitArray(o,5);if(c===15)return new Kr(o+5,Kr.FNC1);if(c>=5&&c<15)return new Kr(o+5,"0"+(c-5));let h=this.extractNumericValueFromBitArray(o,6);if(h>=32&&h<58)return new Kr(o+6,""+(h+33));let y;switch(h){case 58:y="*";break;case 59:y=",";break;case 60:y="-";break;case 61:y=".";break;case 62:y="/";break;default:throw new nt("Decoding invalid alphanumeric value: "+h)}return new Kr(o+6,y)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let c=0;c<5&&c+o<this.information.getSize();++c)if(c===2){if(!this.information.get(o+2))return!1}else if(this.information.get(o+c))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let c=o;c<o+3;++c)if(this.information.get(c))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let c=0;c<4&&c+o<this.information.getSize();++c)if(this.information.get(o+c))return!1;return!0}}class Vn{constructor(o){this.information=o,this.generalDecoder=new Oi(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class gn extends Vn{constructor(o){super(o)}encodeCompressedGtin(o,c){o.append("(01)");let h=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,c,h)}encodeCompressedGtinWithoutAI(o,c,h){for(let y=0;y<4;++y){let x=this.getGeneralDecoder().extractNumericValueFromBitArray(c+10*y,10);x/100===0&&o.append("0"),x/10===0&&o.append("0"),o.append(x)}gn.appendCheckDigit(o,h)}static appendCheckDigit(o,c){let h=0;for(let y=0;y<13;y++){let x=o.charAt(y+c).charCodeAt(0)-48;h+=(y&1)===0?3*x:x}h=10-h%10,h===10&&(h=0),o.append(h)}}gn.GTIN_SIZE=40;class Nr extends gn{constructor(o){super(o)}parseInformation(){let o=new ee;o.append("(01)");let c=o.length(),h=this.getGeneralDecoder().extractNumericValueFromBitArray(Nr.HEADER_SIZE,4);return o.append(h),this.encodeCompressedGtinWithoutAI(o,Nr.HEADER_SIZE+4,c),this.getGeneralDecoder().decodeAllCodes(o,Nr.HEADER_SIZE+44)}}Nr.HEADER_SIZE=4;class Va extends Vn{constructor(o){super(o)}parseInformation(){let o=new ee;return this.getGeneralDecoder().decodeAllCodes(o,Va.HEADER_SIZE)}}Va.HEADER_SIZE=5;class Qo extends gn{constructor(o){super(o)}encodeCompressedWeight(o,c,h){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(c,h);this.addWeightCode(o,y);let x=this.checkWeight(y),E=1e5;for(let d=0;d<5;++d)x/E===0&&o.append("0"),E/=10;o.append(x)}}class Wr extends Qo{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()!=Wr.HEADER_SIZE+Qo.GTIN_SIZE+Wr.WEIGHT_SIZE)throw new de;let o=new ee;return this.encodeCompressedGtin(o,Wr.HEADER_SIZE),this.encodeCompressedWeight(o,Wr.HEADER_SIZE+Qo.GTIN_SIZE,Wr.WEIGHT_SIZE),o.toString()}}Wr.HEADER_SIZE=5,Wr.WEIGHT_SIZE=15;class Bl extends Wr{constructor(o){super(o)}addWeightCode(o,c){o.append("(3103)")}checkWeight(o){return o}}class Ni extends Wr{constructor(o){super(o)}addWeightCode(o,c){c<1e4?o.append("(3202)"):o.append("(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}class Pi extends gn{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<Pi.HEADER_SIZE+gn.GTIN_SIZE)throw new de;let o=new ee;this.encodeCompressedGtin(o,Pi.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(Pi.HEADER_SIZE+gn.GTIN_SIZE,Pi.LAST_DIGIT_SIZE);o.append("(392"),o.append(c),o.append(")");let h=this.getGeneralDecoder().decodeGeneralPurposeField(Pi.HEADER_SIZE+gn.GTIN_SIZE+Pi.LAST_DIGIT_SIZE,null);return o.append(h.getNewString()),o.toString()}}Pi.HEADER_SIZE=8,Pi.LAST_DIGIT_SIZE=2;class Qn extends gn{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<Qn.HEADER_SIZE+gn.GTIN_SIZE)throw new de;let o=new ee;this.encodeCompressedGtin(o,Qn.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(Qn.HEADER_SIZE+gn.GTIN_SIZE,Qn.LAST_DIGIT_SIZE);o.append("(393"),o.append(c),o.append(")");let h=this.getGeneralDecoder().extractNumericValueFromBitArray(Qn.HEADER_SIZE+gn.GTIN_SIZE+Qn.LAST_DIGIT_SIZE,Qn.FIRST_THREE_DIGITS_SIZE);h/100==0&&o.append("0"),h/10==0&&o.append("0"),o.append(h);let y=this.getGeneralDecoder().decodeGeneralPurposeField(Qn.HEADER_SIZE+gn.GTIN_SIZE+Qn.LAST_DIGIT_SIZE+Qn.FIRST_THREE_DIGITS_SIZE,null);return o.append(y.getNewString()),o.toString()}}Qn.HEADER_SIZE=8,Qn.LAST_DIGIT_SIZE=2,Qn.FIRST_THREE_DIGITS_SIZE=10;class Mt extends Qo{constructor(o,c,h){super(o),this.dateCode=h,this.firstAIdigits=c}parseInformation(){if(this.getInformation().getSize()!=Mt.HEADER_SIZE+Mt.GTIN_SIZE+Mt.WEIGHT_SIZE+Mt.DATE_SIZE)throw new de;let o=new ee;return this.encodeCompressedGtin(o,Mt.HEADER_SIZE),this.encodeCompressedWeight(o,Mt.HEADER_SIZE+Mt.GTIN_SIZE,Mt.WEIGHT_SIZE),this.encodeCompressedDate(o,Mt.HEADER_SIZE+Mt.GTIN_SIZE+Mt.WEIGHT_SIZE),o.toString()}encodeCompressedDate(o,c){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(c,Mt.DATE_SIZE);if(h==38400)return;o.append("("),o.append(this.dateCode),o.append(")");let y=h%32;h/=32;let x=h%12+1;h/=12;let E=h;E/10==0&&o.append("0"),o.append(E),x/10==0&&o.append("0"),o.append(x),y/10==0&&o.append("0"),o.append(y)}addWeightCode(o,c){o.append("("),o.append(this.firstAIdigits),o.append(c/1e5),o.append(")")}checkWeight(o){return o%1e5}}Mt.HEADER_SIZE=8,Mt.WEIGHT_SIZE=20,Mt.DATE_SIZE=16;function $r(Y){try{if(Y.get(1))return new Nr(Y);if(!Y.get(2))return new Va(Y);switch(Oi.extractNumericValueFromBitArray(Y,1,4)){case 4:return new Bl(Y);case 5:return new Ni(Y)}switch(Oi.extractNumericValueFromBitArray(Y,1,5)){case 12:return new Pi(Y);case 13:return new Qn(Y)}switch(Oi.extractNumericValueFromBitArray(Y,1,7)){case 56:return new Mt(Y,"310","11");case 57:return new Mt(Y,"320","11");case 58:return new Mt(Y,"310","13");case 59:return new Mt(Y,"320","13");case 60:return new Mt(Y,"310","15");case 61:return new Mt(Y,"320","15");case 62:return new Mt(Y,"310","17");case 63:return new Mt(Y,"320","17")}}catch(o){throw console.log(o),new nt("unknown decoder: "+Y)}}class rr{constructor(o,c,h,y){this.leftchar=o,this.rightchar=c,this.finderpattern=h,this.maybeLast=y}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(o,c){return o instanceof rr?rr.equalsOrNull(o.leftchar,c.leftchar)&&rr.equalsOrNull(o.rightchar,c.rightchar)&&rr.equalsOrNull(o.finderpattern,c.finderpattern):!1}static equalsOrNull(o,c){return o===null?c===null:rr.equals(o,c)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ar{constructor(o,c,h){this.pairs=o,this.rowNumber=c,this.wasReversed=h}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,c){return o instanceof Ar?this.checkEqualitity(o,c)&&o.wasReversed===c.wasReversed:!1}checkEqualitity(o,c){if(!o||!c)return;let h;return o.forEach((y,x)=>{c.forEach(E=>{y.getLeftChar().getValue()===E.getLeftChar().getValue()&&y.getRightChar().getValue()===E.getRightChar().getValue()&&y.getFinderPatter().getValue()===E.getFinderPatter().getValue()&&(h=!0)})}),h}}class Ge extends ii{constructor(o){super(...arguments),this.pairs=new Array(Ge.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=o===!0}decodeRow(o,c,h){this.pairs.length=0,this.startFromEven=!1;try{return Ge.constructResult(this.decodeRow2pairs(o,c))}catch(y){this.verbose&&console.log(y)}return this.pairs.length=0,this.startFromEven=!0,Ge.constructResult(this.decodeRow2pairs(o,c))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,c){let h=!1;for(;!h;)try{this.pairs.push(this.retrieveNextPair(c,this.pairs,o))}catch(x){if(x instanceof de){if(!this.pairs.length)throw new de;h=!0}}if(this.checkChecksum())return this.pairs;let y;if(this.rows.length?y=!0:y=!1,this.storeRow(o,!1),y){let x=this.checkRowsBoolean(!1);if(x!=null||(x=this.checkRowsBoolean(!0),x!=null))return x}throw new de}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let c=null;try{c=this.checkRows(new Array,0)}catch(h){this.verbose&&console.log(h)}return o&&(this.rows=this.rows.reverse()),c}checkRows(o,c){for(let h=c;h<this.rows.length;h++){let y=this.rows[h];this.pairs.length=0;for(let E of o)this.pairs.push(E.getPairs());if(this.pairs.push(y.getPairs()),!Ge.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let x=new Array(o);x.push(y);try{return this.checkRows(x,h+1)}catch(E){this.verbose&&console.log(E)}}throw new de}static isValidSequence(o){for(let c of Ge.FINDER_PATTERN_SEQUENCES){if(o.length>c.length)continue;let h=!0;for(let y=0;y<o.length;y++)if(o[y].getFinderPattern().getValue()!=c[y]){h=!1;break}if(h)return!0}return!1}storeRow(o,c){let h=0,y=!1,x=!1;for(;h<this.rows.length;){let E=this.rows[h];if(E.getRowNumber()>o){x=E.isEquivalent(this.pairs);break}y=E.isEquivalent(this.pairs),h++}x||y||Ge.isPartialRow(this.pairs,this.rows)||(this.rows.push(h,new Ar(this.pairs,o,c)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,c){for(let h of c)if(h.getPairs().length!==o.length){for(let y of h.getPairs())for(let x of o)if(rr.equals(y,x))break}}static isPartialRow(o,c){for(let h of c){let y=!0;for(let x of o){let E=!1;for(let d of h.getPairs())if(x.equals(d)){E=!0;break}if(!E){y=!1;break}}if(y)return!0}return!1}getRows(){return this.rows}static constructResult(o){let c=gs.buildBitArray(o),y=$r(c).parseInformation(),x=o[0].getFinderPattern().getResultPoints(),E=o[o.length-1].getFinderPattern().getResultPoints(),d=[x[0],x[1],E[0],E[1]];return new ze(y,null,null,d,$e.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),c=o.getLeftChar(),h=o.getRightChar();if(h==null)return!1;let y=h.getChecksumPortion(),x=2;for(let d=1;d<this.pairs.size();++d){let v=this.pairs.get(d);y+=v.getLeftChar().getChecksumPortion(),x++;let A=v.getRightChar();A!=null&&(y+=A.getChecksumPortion(),x++)}return y%=211,211*(x-4)+y==c.getValue()}static getNextSecondBar(o,c){let h;return o.get(c)?(h=o.getNextUnset(c),h=o.getNextSet(h)):(h=o.getNextSet(c),h=o.getNextUnset(h)),h}retrieveNextPair(o,c,h){let y=c.length%2==0;this.startFromEven&&(y=!y);let x,E=!0,d=-1;do this.findNextPair(o,c,d),x=this.parseFoundFinderPattern(o,h,y),x==null?d=Ge.getNextSecondBar(o,this.startEnd[0]):E=!1;while(E);let v=this.decodeDataCharacter(o,x,y,!0);if(!this.isEmptyPair(c)&&c[c.length-1].mustBeLast())throw new de;let A;try{A=this.decodeDataCharacter(o,x,y,!1)}catch(I){A=null,this.verbose&&console.log(I)}return new rr(v,A,x,!0)}isEmptyPair(o){return o.length===0}findNextPair(o,c,h){let y=this.getDecodeFinderCounters();y[0]=0,y[1]=0,y[2]=0,y[3]=0;let x=o.getSize(),E;h>=0?E=h:this.isEmptyPair(c)?E=0:E=c[c.length-1].getFinderPattern().getStartEnd()[1];let d=c.length%2!=0;this.startFromEven&&(d=!d);let v=!1;for(;E<x&&(v=!o.get(E),!!v);)E++;let A=0,I=E;for(let P=E;P<x;P++)if(o.get(P)!=v)y[A]++;else{if(A==3){if(d&&Ge.reverseCounters(y),Ge.isFinderPattern(y)){this.startEnd[0]=I,this.startEnd[1]=P;return}d&&Ge.reverseCounters(y),I+=y[0]+y[1],y[0]=y[2],y[1]=y[3],y[2]=0,y[3]=0,A--}else A++;y[A]=1,v=!v}throw new de}static reverseCounters(o){let c=o.length;for(let h=0;h<c/2;++h){let y=o[h];o[h]=o[c-h-1],o[c-h-1]=y}}parseFoundFinderPattern(o,c,h){let y,x,E;if(h){let A=this.startEnd[0]-1;for(;A>=0&&!o.get(A);)A--;A++,y=this.startEnd[0]-A,x=A,E=this.startEnd[1]}else x=this.startEnd[0],E=o.getNextUnset(this.startEnd[1]+1),y=E-this.startEnd[1];let d=this.getDecodeFinderCounters();M.arraycopy(d,0,d,1,d.length-1),d[0]=y;let v;try{v=this.parseFinderValue(d,Ge.FINDER_PATTERNS)}catch{return null}return new Ui(v,[x,E],x,E,c)}decodeDataCharacter(o,c,h,y){let x=this.getDataCharacterCounters();for(let Me=0;Me<x.length;Me++)x[Me]=0;if(y)Ge.recordPatternInReverse(o,c.getStartEnd()[0],x);else{Ge.recordPattern(o,c.getStartEnd()[1],x);for(let Me=0,He=x.length-1;Me<He;Me++,He--){let st=x[Me];x[Me]=x[He],x[He]=st}}let E=17,d=xt.sum(new Int32Array(x))/E,v=(c.getStartEnd()[1]-c.getStartEnd()[0])/15;if(Math.abs(d-v)/v>.3)throw new de;let A=this.getOddCounts(),I=this.getEvenCounts(),P=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let Me=0;Me<x.length;Me++){let He=1*x[Me]/d,st=He+.5;if(st<1){if(He<.3)throw new de;st=1}else if(st>8){if(He>8.7)throw new de;st=8}let ut=Me/2;(Me&1)==0?(A[ut]=st,P[ut]=He-st):(I[ut]=st,k[ut]=He-st)}this.adjustOddEvenCounts(E);let F=4*c.getValue()+(h?0:2)+(y?0:1)-1,q=0,Q=0;for(let Me=A.length-1;Me>=0;Me--){if(Ge.isNotA1left(c,h,y)){let He=Ge.WEIGHTS[F][2*Me];Q+=A[Me]*He}q+=A[Me]}let re=0;for(let Me=I.length-1;Me>=0;Me--)if(Ge.isNotA1left(c,h,y)){let He=Ge.WEIGHTS[F][2*Me+1];re+=I[Me]*He}let ne=Q+re;if((q&1)!=0||q>13||q<4)throw new de;let le=(13-q)/2,fe=Ge.SYMBOL_WIDEST[le],ue=9-fe,ge=ta.getRSSvalue(A,fe,!0),he=ta.getRSSvalue(I,ue,!1),we=Ge.EVEN_TOTAL_SUBSET[le],Ce=Ge.GSUM[le],be=ge*we+he+Ce;return new Hr(be,ne)}static isNotA1left(o,c,h){return!(o.getValue()==0&&c&&h)}adjustOddEvenCounts(o){let c=xt.sum(new Int32Array(this.getOddCounts())),h=xt.sum(new Int32Array(this.getEvenCounts())),y=!1,x=!1;c>13?x=!0:c<4&&(y=!0);let E=!1,d=!1;h>13?d=!0:h<4&&(E=!0);let v=c+h-o,A=(c&1)==1,I=(h&1)==0;if(v==1)if(A){if(I)throw new de;x=!0}else{if(!I)throw new de;d=!0}else if(v==-1)if(A){if(I)throw new de;y=!0}else{if(!I)throw new de;E=!0}else if(v==0){if(A){if(!I)throw new de;c<h?(y=!0,d=!0):(x=!0,E=!0)}else if(I)throw new de}else throw new de;if(y){if(x)throw new de;Ge.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(x&&Ge.decrement(this.getOddCounts(),this.getOddRoundingErrors()),E){if(d)throw new de;Ge.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&Ge.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ge.SYMBOL_WIDEST=[7,5,4,3,1],Ge.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ge.GSUM=[0,348,1388,2948,3988],Ge.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ge.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ge.FINDER_PAT_A=0,Ge.FINDER_PAT_B=1,Ge.FINDER_PAT_C=2,Ge.FINDER_PAT_D=3,Ge.FINDER_PAT_E=4,Ge.FINDER_PAT_F=5,Ge.FINDER_PATTERN_SEQUENCES=[[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_C,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_E,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D,Ge.FINDER_PAT_C],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_E,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D,Ge.FINDER_PAT_D,Ge.FINDER_PAT_F],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_E,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_F,Ge.FINDER_PAT_F],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_D],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_E],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_F,Ge.FINDER_PAT_F],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_E,Ge.FINDER_PAT_F,Ge.FINDER_PAT_F]],Ge.MAX_PAIRS=11;class lo extends Hr{constructor(o,c,h){super(o,c),this.count=0,this.finderPattern=h}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class In extends ii{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,c,h){const y=this.decodePair(c,!1,o,h);In.addOrTally(this.possibleLeftPairs,y),c.reverse();let x=this.decodePair(c,!0,o,h);In.addOrTally(this.possibleRightPairs,x),c.reverse();for(let E of this.possibleLeftPairs)if(E.getCount()>1){for(let d of this.possibleRightPairs)if(d.getCount()>1&&In.checkChecksum(E,d))return In.constructResult(E,d)}throw new de}static addOrTally(o,c){if(c==null)return;let h=!1;for(let y of o)if(y.getValue()===c.getValue()){y.incrementCount(),h=!0;break}h||o.push(c)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,c){let h=4537077*o.getValue()+c.getValue(),y=new String(h).toString(),x=new ee;for(let A=13-y.length;A>0;A--)x.append("0");x.append(y);let E=0;for(let A=0;A<13;A++){let I=x.charAt(A).charCodeAt(0)-48;E+=(A&1)===0?3*I:I}E=10-E%10,E===10&&(E=0),x.append(E.toString());let d=o.getFinderPattern().getResultPoints(),v=c.getFinderPattern().getResultPoints();return new ze(x.toString(),null,0,[d[0],d[1],v[0],v[1]],$e.RSS_14,new Date().getTime())}static checkChecksum(o,c){let h=(o.getChecksumPortion()+16*c.getChecksumPortion())%79,y=9*o.getFinderPattern().getValue()+c.getFinderPattern().getValue();return y>72&&y--,y>8&&y--,h===y}decodePair(o,c,h,y){try{let x=this.findFinderPattern(o,c),E=this.parseFoundFinderPattern(o,h,c,x),d=y==null?null:y.get(J.NEED_RESULT_POINT_CALLBACK);if(d!=null){let I=(x[0]+x[1])/2;c&&(I=o.getSize()-1-I),d.foundPossibleResultPoint(new mt(I,h))}let v=this.decodeDataCharacter(o,E,!0),A=this.decodeDataCharacter(o,E,!1);return new lo(1597*v.getValue()+A.getValue(),v.getChecksumPortion()+4*A.getChecksumPortion(),E)}catch{return null}}decodeDataCharacter(o,c,h){let y=this.getDataCharacterCounters();for(let re=0;re<y.length;re++)y[re]=0;if(h)Tn.recordPatternInReverse(o,c.getStartEnd()[0],y);else{Tn.recordPattern(o,c.getStartEnd()[1]+1,y);for(let re=0,ne=y.length-1;re<ne;re++,ne--){let le=y[re];y[re]=y[ne],y[ne]=le}}let x=h?16:15,E=xt.sum(new Int32Array(y))/x,d=this.getOddCounts(),v=this.getEvenCounts(),A=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let re=0;re<y.length;re++){let ne=y[re]/E,le=Math.floor(ne+.5);le<1?le=1:le>8&&(le=8);let fe=Math.floor(re/2);(re&1)===0?(d[fe]=le,A[fe]=ne-le):(v[fe]=le,I[fe]=ne-le)}this.adjustOddEvenCounts(h,x);let P=0,k=0;for(let re=d.length-1;re>=0;re--)k*=9,k+=d[re],P+=d[re];let F=0,q=0;for(let re=v.length-1;re>=0;re--)F*=9,F+=v[re],q+=v[re];let Q=k+3*F;if(h){if((P&1)!==0||P>12||P<4)throw new de;let re=(12-P)/2,ne=In.OUTSIDE_ODD_WIDEST[re],le=9-ne,fe=ta.getRSSvalue(d,ne,!1),ue=ta.getRSSvalue(v,le,!0),ge=In.OUTSIDE_EVEN_TOTAL_SUBSET[re],he=In.OUTSIDE_GSUM[re];return new Hr(fe*ge+ue+he,Q)}else{if((q&1)!==0||q>10||q<4)throw new de;let re=(10-q)/2,ne=In.INSIDE_ODD_WIDEST[re],le=9-ne,fe=ta.getRSSvalue(d,ne,!0),ue=ta.getRSSvalue(v,le,!1),ge=In.INSIDE_ODD_TOTAL_SUBSET[re],he=In.INSIDE_GSUM[re];return new Hr(ue*ge+fe+he,Q)}}findFinderPattern(o,c){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let y=o.getSize(),x=!1,E=0;for(;E<y&&(x=!o.get(E),c!==x);)E++;let d=0,v=E;for(let A=E;A<y;A++)if(o.get(A)!==x)h[d]++;else{if(d===3){if(ii.isFinderPattern(h))return[v,A];v+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,d--}else d++;h[d]=1,x=!x}throw new de}parseFoundFinderPattern(o,c,h,y){let x=o.get(y[0]),E=y[0]-1;for(;E>=0&&x!==o.get(E);)E--;E++;const d=y[0]-E,v=this.getDecodeFinderCounters(),A=new Int32Array(v.length);M.arraycopy(v,0,A,1,v.length-1),A[0]=d;const I=this.parseFinderValue(A,In.FINDER_PATTERNS);let P=E,k=y[1];return h&&(P=o.getSize()-1-P,k=o.getSize()-1-k),new Ui(I,[E,y[1]],P,k,c)}adjustOddEvenCounts(o,c){let h=xt.sum(new Int32Array(this.getOddCounts())),y=xt.sum(new Int32Array(this.getEvenCounts())),x=!1,E=!1,d=!1,v=!1;o?(h>12?E=!0:h<4&&(x=!0),y>12?v=!0:y<4&&(d=!0)):(h>11?E=!0:h<5&&(x=!0),y>10?v=!0:y<4&&(d=!0));let A=h+y-c,I=(h&1)===(o?1:0),P=(y&1)===1;if(A===1)if(I){if(P)throw new de;E=!0}else{if(!P)throw new de;v=!0}else if(A===-1)if(I){if(P)throw new de;x=!0}else{if(!P)throw new de;d=!0}else if(A===0){if(I){if(!P)throw new de;h<y?(x=!0,v=!0):(E=!0,d=!0)}else if(P)throw new de}else throw new de;if(x){if(E)throw new de;ii.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(E&&ii.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(v)throw new de;ii.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&ii.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}In.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],In.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],In.OUTSIDE_GSUM=[0,161,961,2015,2715],In.INSIDE_GSUM=[0,336,1036,1516],In.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],In.INSIDE_ODD_WIDEST=[2,4,6,8],In.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class wi extends Tn{constructor(o,c){super(),this.readers=[],this.verbose=c===!0;const h=o?o.get(J.POSSIBLE_FORMATS):null,y=o&&o.get(J.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;h?((h.includes($e.EAN_13)||h.includes($e.UPC_A)||h.includes($e.EAN_8)||h.includes($e.UPC_E))&&this.readers.push(new Ll(o)),h.includes($e.CODE_39)&&this.readers.push(new fn(y)),h.includes($e.CODE_128)&&this.readers.push(new rt),h.includes($e.ITF)&&this.readers.push(new Ze),h.includes($e.RSS_14)&&this.readers.push(new In),h.includes($e.RSS_EXPANDED)&&this.readers.push(new Ge(this.verbose))):(this.readers.push(new Ll(o)),this.readers.push(new fn),this.readers.push(new Ll(o)),this.readers.push(new rt),this.readers.push(new Ze),this.readers.push(new In),this.readers.push(new Ge(this.verbose)))}decodeRow(o,c,h){for(let y=0;y<this.readers.length;y++)try{return this.readers[y].decodeRow(o,c,h)}catch{}throw new de}reset(){this.readers.forEach(o=>o.reset())}}class as extends Ye{constructor(o=500,c){super(new wi(c),o,c)}}class yn{constructor(o,c,h){this.ecCodewords=o,this.ecBlocks=[c],h&&this.ecBlocks.push(h)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class un{constructor(o,c){this.count=o,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class rn{constructor(o,c,h,y,x,E){this.versionNumber=o,this.symbolSizeRows=c,this.symbolSizeColumns=h,this.dataRegionSizeRows=y,this.dataRegionSizeColumns=x,this.ecBlocks=E;let d=0;const v=E.getECCodewords(),A=E.getECBlocks();for(let I of A)d+=I.getCount()*(I.getDataCodewords()+v);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,c){if((o&1)!==0||(c&1)!==0)throw new V;for(let h of rn.VERSIONS)if(h.symbolSizeRows===o&&h.symbolSizeColumns===c)return h;throw new V}toString(){return""+this.versionNumber}static buildVersions(){return[new rn(1,10,10,8,8,new yn(5,new un(1,3))),new rn(2,12,12,10,10,new yn(7,new un(1,5))),new rn(3,14,14,12,12,new yn(10,new un(1,8))),new rn(4,16,16,14,14,new yn(12,new un(1,12))),new rn(5,18,18,16,16,new yn(14,new un(1,18))),new rn(6,20,20,18,18,new yn(18,new un(1,22))),new rn(7,22,22,20,20,new yn(20,new un(1,30))),new rn(8,24,24,22,22,new yn(24,new un(1,36))),new rn(9,26,26,24,24,new yn(28,new un(1,44))),new rn(10,32,32,14,14,new yn(36,new un(1,62))),new rn(11,36,36,16,16,new yn(42,new un(1,86))),new rn(12,40,40,18,18,new yn(48,new un(1,114))),new rn(13,44,44,20,20,new yn(56,new un(1,144))),new rn(14,48,48,22,22,new yn(68,new un(1,174))),new rn(15,52,52,24,24,new yn(42,new un(2,102))),new rn(16,64,64,14,14,new yn(56,new un(2,140))),new rn(17,72,72,16,16,new yn(36,new un(4,92))),new rn(18,80,80,18,18,new yn(48,new un(4,114))),new rn(19,88,88,20,20,new yn(56,new un(4,144))),new rn(20,96,96,22,22,new yn(68,new un(4,174))),new rn(21,104,104,24,24,new yn(56,new un(6,136))),new rn(22,120,120,18,18,new yn(68,new un(6,175))),new rn(23,132,132,20,20,new yn(62,new un(8,163))),new rn(24,144,144,22,22,new yn(62,new un(8,156),new un(2,155))),new rn(25,8,18,6,16,new yn(7,new un(1,5))),new rn(26,8,32,6,14,new yn(11,new un(1,10))),new rn(27,12,26,10,24,new yn(14,new un(1,16))),new rn(28,12,36,10,16,new yn(18,new un(1,22))),new rn(29,16,36,14,16,new yn(24,new un(1,32))),new rn(30,16,48,14,22,new yn(28,new un(1,49)))]}}rn.VERSIONS=rn.buildVersions();class Qt{constructor(o){const c=o.getHeight();if(c<8||c>144||(c&1)!==0)throw new V;this.version=Qt.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new xe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){const c=o.getHeight(),h=o.getWidth();return rn.getVersionForDimensions(c,h)}readCodewords(){const o=new Int8Array(this.version.getTotalCodewords());let c=0,h=4,y=0;const x=this.mappingBitMatrix.getHeight(),E=this.mappingBitMatrix.getWidth();let d=!1,v=!1,A=!1,I=!1;do if(h===x&&y===0&&!d)o[c++]=this.readCorner1(x,E)&255,h-=2,y+=2,d=!0;else if(h===x-2&&y===0&&(E&3)!==0&&!v)o[c++]=this.readCorner2(x,E)&255,h-=2,y+=2,v=!0;else if(h===x+4&&y===2&&(E&7)===0&&!A)o[c++]=this.readCorner3(x,E)&255,h-=2,y+=2,A=!0;else if(h===x-2&&y===0&&(E&7)===4&&!I)o[c++]=this.readCorner4(x,E)&255,h-=2,y+=2,I=!0;else{do h<x&&y>=0&&!this.readMappingMatrix.get(y,h)&&(o[c++]=this.readUtah(h,y,x,E)&255),h-=2,y+=2;while(h>=0&&y<E);h+=1,y+=3;do h>=0&&y<E&&!this.readMappingMatrix.get(y,h)&&(o[c++]=this.readUtah(h,y,x,E)&255),h+=2,y-=2;while(h<x&&y>=0);h+=3,y+=1}while(h<x||y<E);if(c!==this.version.getTotalCodewords())throw new V;return o}readModule(o,c,h,y){return o<0&&(o+=h,c+=4-(h+4&7)),c<0&&(c+=y,o+=4-(y+4&7)),this.readMappingMatrix.set(c,o),this.mappingBitMatrix.get(c,o)}readUtah(o,c,h,y){let x=0;return this.readModule(o-2,c-2,h,y)&&(x|=1),x<<=1,this.readModule(o-2,c-1,h,y)&&(x|=1),x<<=1,this.readModule(o-1,c-2,h,y)&&(x|=1),x<<=1,this.readModule(o-1,c-1,h,y)&&(x|=1),x<<=1,this.readModule(o-1,c,h,y)&&(x|=1),x<<=1,this.readModule(o,c-2,h,y)&&(x|=1),x<<=1,this.readModule(o,c-1,h,y)&&(x|=1),x<<=1,this.readModule(o,c,h,y)&&(x|=1),x}readCorner1(o,c){let h=0;return this.readModule(o-1,0,o,c)&&(h|=1),h<<=1,this.readModule(o-1,1,o,c)&&(h|=1),h<<=1,this.readModule(o-1,2,o,c)&&(h|=1),h<<=1,this.readModule(0,c-2,o,c)&&(h|=1),h<<=1,this.readModule(0,c-1,o,c)&&(h|=1),h<<=1,this.readModule(1,c-1,o,c)&&(h|=1),h<<=1,this.readModule(2,c-1,o,c)&&(h|=1),h<<=1,this.readModule(3,c-1,o,c)&&(h|=1),h}readCorner2(o,c){let h=0;return this.readModule(o-3,0,o,c)&&(h|=1),h<<=1,this.readModule(o-2,0,o,c)&&(h|=1),h<<=1,this.readModule(o-1,0,o,c)&&(h|=1),h<<=1,this.readModule(0,c-4,o,c)&&(h|=1),h<<=1,this.readModule(0,c-3,o,c)&&(h|=1),h<<=1,this.readModule(0,c-2,o,c)&&(h|=1),h<<=1,this.readModule(0,c-1,o,c)&&(h|=1),h<<=1,this.readModule(1,c-1,o,c)&&(h|=1),h}readCorner3(o,c){let h=0;return this.readModule(o-1,0,o,c)&&(h|=1),h<<=1,this.readModule(o-1,c-1,o,c)&&(h|=1),h<<=1,this.readModule(0,c-3,o,c)&&(h|=1),h<<=1,this.readModule(0,c-2,o,c)&&(h|=1),h<<=1,this.readModule(0,c-1,o,c)&&(h|=1),h<<=1,this.readModule(1,c-3,o,c)&&(h|=1),h<<=1,this.readModule(1,c-2,o,c)&&(h|=1),h<<=1,this.readModule(1,c-1,o,c)&&(h|=1),h}readCorner4(o,c){let h=0;return this.readModule(o-3,0,o,c)&&(h|=1),h<<=1,this.readModule(o-2,0,o,c)&&(h|=1),h<<=1,this.readModule(o-1,0,o,c)&&(h|=1),h<<=1,this.readModule(0,c-2,o,c)&&(h|=1),h<<=1,this.readModule(0,c-1,o,c)&&(h|=1),h<<=1,this.readModule(1,c-1,o,c)&&(h|=1),h<<=1,this.readModule(2,c-1,o,c)&&(h|=1),h<<=1,this.readModule(3,c-1,o,c)&&(h|=1),h}extractDataRegion(o){const c=this.version.getSymbolSizeRows(),h=this.version.getSymbolSizeColumns();if(o.getHeight()!==c)throw new _("Dimension of bitMatrix must match the version size");const y=this.version.getDataRegionSizeRows(),x=this.version.getDataRegionSizeColumns(),E=c/y|0,d=h/x|0,v=E*y,A=d*x,I=new xe(A,v);for(let P=0;P<E;++P){const k=P*y;for(let F=0;F<d;++F){const q=F*x;for(let Q=0;Q<y;++Q){const re=P*(y+2)+1+Q,ne=k+Q;for(let le=0;le<x;++le){const fe=F*(x+2)+1+le;if(o.get(fe,re)){const ue=q+le;I.set(ue,ne)}}}}}return I}}class Ri{constructor(o,c){this.numDataCodewords=o,this.codewords=c}static getDataBlocks(o,c){const h=c.getECBlocks();let y=0;const x=h.getECBlocks();for(let Q of x)y+=Q.getCount();const E=new Array(y);let d=0;for(let Q of x)for(let re=0;re<Q.getCount();re++){const ne=Q.getDataCodewords(),le=h.getECCodewords()+ne;E[d++]=new Ri(ne,new Uint8Array(le))}const A=E[0].codewords.length-h.getECCodewords(),I=A-1;let P=0;for(let Q=0;Q<I;Q++)for(let re=0;re<d;re++)E[re].codewords[Q]=o[P++];const k=c.getVersionNumber()===24,F=k?8:d;for(let Q=0;Q<F;Q++)E[Q].codewords[A-1]=o[P++];const q=E[0].codewords.length;for(let Q=A;Q<q;Q++)for(let re=0;re<d;re++){const ne=k?(re+8)%d:re,le=k&&ne>7?Q-1:Q;E[ne].codewords[le]=o[P++]}if(P!==o.length)throw new _;return E}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Sr{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new _(""+o);let c=0,h=this.bitOffset,y=this.byteOffset;const x=this.bytes;if(h>0){const E=8-h,d=o<E?o:E,v=E-d,A=255>>8-d<<v;c=(x[y]&A)>>v,o-=d,h+=d,h===8&&(h=0,y++)}if(o>0){for(;o>=8;)c=c<<8|x[y]&255,y++,o-=8;if(o>0){const E=8-o,d=255>>E<<E;c=c<<o|(x[y]&d)>>E,h+=o}}return this.bitOffset=h,this.byteOffset=y,c}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var an;(function(Y){Y[Y.PAD_ENCODE=0]="PAD_ENCODE",Y[Y.ASCII_ENCODE=1]="ASCII_ENCODE",Y[Y.C40_ENCODE=2]="C40_ENCODE",Y[Y.TEXT_ENCODE=3]="TEXT_ENCODE",Y[Y.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",Y[Y.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",Y[Y.BASE256_ENCODE=6]="BASE256_ENCODE"})(an||(an={}));class ai{static decode(o){const c=new Sr(o),h=new ee,y=new ee,x=new Array;let E=an.ASCII_ENCODE;do if(E===an.ASCII_ENCODE)E=this.decodeAsciiSegment(c,h,y);else{switch(E){case an.C40_ENCODE:this.decodeC40Segment(c,h);break;case an.TEXT_ENCODE:this.decodeTextSegment(c,h);break;case an.ANSIX12_ENCODE:this.decodeAnsiX12Segment(c,h);break;case an.EDIFACT_ENCODE:this.decodeEdifactSegment(c,h);break;case an.BASE256_ENCODE:this.decodeBase256Segment(c,h,x);break;default:throw new V}E=an.ASCII_ENCODE}while(E!==an.PAD_ENCODE&&c.available()>0);return y.length()>0&&h.append(y.toString()),new Ne(o,h.toString(),x.length===0?null:x,null)}static decodeAsciiSegment(o,c,h){let y=!1;do{let x=o.readBits(8);if(x===0)throw new V;if(x<=128)return y&&(x+=128),c.append(String.fromCharCode(x-1)),an.ASCII_ENCODE;if(x===129)return an.PAD_ENCODE;if(x<=229){const E=x-130;E<10&&c.append("0"),c.append(""+E)}else switch(x){case 230:return an.C40_ENCODE;case 231:return an.BASE256_ENCODE;case 232:c.append("");break;case 233:case 234:break;case 235:y=!0;break;case 236:c.append("[)>05"),h.insert(0,"");break;case 237:c.append("[)>06"),h.insert(0,"");break;case 238:return an.ANSIX12_ENCODE;case 239:return an.TEXT_ENCODE;case 240:return an.EDIFACT_ENCODE;case 241:break;default:if(x!==254||o.available()!==0)throw new V;break}}while(o.available()>0);return an.ASCII_ENCODE}static decodeC40Segment(o,c){let h=!1;const y=[];let x=0;do{if(o.available()===8)return;const E=o.readBits(8);if(E===254)return;this.parseTwoBytes(E,o.readBits(8),y);for(let d=0;d<3;d++){const v=y[d];switch(x){case 0:if(v<3)x=v+1;else if(v<this.C40_BASIC_SET_CHARS.length){const A=this.C40_BASIC_SET_CHARS[v];h?(c.append(String.fromCharCode(A.charCodeAt(0)+128)),h=!1):c.append(A)}else throw new V;break;case 1:h?(c.append(String.fromCharCode(v+128)),h=!1):c.append(String.fromCharCode(v)),x=0;break;case 2:if(v<this.C40_SHIFT2_SET_CHARS.length){const A=this.C40_SHIFT2_SET_CHARS[v];h?(c.append(String.fromCharCode(A.charCodeAt(0)+128)),h=!1):c.append(A)}else switch(v){case 27:c.append("");break;case 30:h=!0;break;default:throw new V}x=0;break;case 3:h?(c.append(String.fromCharCode(v+224)),h=!1):c.append(String.fromCharCode(v+96)),x=0;break;default:throw new V}}}while(o.available()>0)}static decodeTextSegment(o,c){let h=!1,y=[],x=0;do{if(o.available()===8)return;const E=o.readBits(8);if(E===254)return;this.parseTwoBytes(E,o.readBits(8),y);for(let d=0;d<3;d++){const v=y[d];switch(x){case 0:if(v<3)x=v+1;else if(v<this.TEXT_BASIC_SET_CHARS.length){const A=this.TEXT_BASIC_SET_CHARS[v];h?(c.append(String.fromCharCode(A.charCodeAt(0)+128)),h=!1):c.append(A)}else throw new V;break;case 1:h?(c.append(String.fromCharCode(v+128)),h=!1):c.append(String.fromCharCode(v)),x=0;break;case 2:if(v<this.TEXT_SHIFT2_SET_CHARS.length){const A=this.TEXT_SHIFT2_SET_CHARS[v];h?(c.append(String.fromCharCode(A.charCodeAt(0)+128)),h=!1):c.append(A)}else switch(v){case 27:c.append("");break;case 30:h=!0;break;default:throw new V}x=0;break;case 3:if(v<this.TEXT_SHIFT3_SET_CHARS.length){const A=this.TEXT_SHIFT3_SET_CHARS[v];h?(c.append(String.fromCharCode(A.charCodeAt(0)+128)),h=!1):c.append(A),x=0}else throw new V;break;default:throw new V}}}while(o.available()>0)}static decodeAnsiX12Segment(o,c){const h=[];do{if(o.available()===8)return;const y=o.readBits(8);if(y===254)return;this.parseTwoBytes(y,o.readBits(8),h);for(let x=0;x<3;x++){const E=h[x];switch(E){case 0:c.append("\r");break;case 1:c.append("*");break;case 2:c.append(">");break;case 3:c.append(" ");break;default:if(E<14)c.append(String.fromCharCode(E+44));else if(E<40)c.append(String.fromCharCode(E+51));else throw new V;break}}}while(o.available()>0)}static parseTwoBytes(o,c,h){let y=(o<<8)+c-1,x=Math.floor(y/1600);h[0]=x,y-=x*1600,x=Math.floor(y/40),h[1]=x,h[2]=y-x*40}static decodeEdifactSegment(o,c){do{if(o.available()<=16)return;for(let h=0;h<4;h++){let y=o.readBits(6);if(y===31){const x=8-o.getBitOffset();x!==8&&o.readBits(x);return}(y&32)===0&&(y|=64),c.append(String.fromCharCode(y))}}while(o.available()>0)}static decodeBase256Segment(o,c,h){let y=1+o.getByteOffset();const x=this.unrandomize255State(o.readBits(8),y++);let E;if(x===0?E=o.available()/8|0:x<250?E=x:E=250*(x-249)+this.unrandomize255State(o.readBits(8),y++),E<0)throw new V;const d=new Uint8Array(E);for(let v=0;v<E;v++){if(o.available()<8)throw new V;d[v]=this.unrandomize255State(o.readBits(8),y++)}h.push(d);try{c.append(ae.decode(d,Z.ISO88591))}catch(v){throw new nt("Platform does not support required encoding: "+v.message)}}static unrandomize255State(o,c){const h=149*c%255+1,y=o-h;return y>=0?y:y+256}}ai.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ai.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ai.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ai.TEXT_SHIFT2_SET_CHARS=ai.C40_SHIFT2_SET_CHARS,ai.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Zo{constructor(){this.rsDecoder=new Zt(Rt.DATA_MATRIX_FIELD_256)}decode(o){const c=new Qt(o),h=c.getVersion(),y=c.readCodewords(),x=Ri.getDataBlocks(y,h);let E=0;for(let A of x)E+=A.getNumDataCodewords();const d=new Uint8Array(E),v=x.length;for(let A=0;A<v;A++){const I=x[A],P=I.getCodewords(),k=I.getNumDataCodewords();this.correctErrors(P,k);for(let F=0;F<k;F++)d[F*v+A]=P[F]}return ai.decode(d)}correctErrors(o,c){const h=new Int32Array(o);try{this.rsDecoder.decode(h,o.length-c)}catch{throw new N}for(let y=0;y<c;y++)o[y]=h[y]}}class Vt{constructor(o){this.image=o,this.rectangleDetector=new hr(this.image)}detect(){const o=this.rectangleDetector.detect();let c=this.detectSolid1(o);if(c=this.detectSolid2(c),c[3]=this.correctTopRight(c),!c[3])throw new de;c=this.shiftToModuleCenter(c);const h=c[0],y=c[1],x=c[2],E=c[3];let d=this.transitionsBetween(h,E)+1,v=this.transitionsBetween(x,E)+1;(d&1)===1&&(d+=1),(v&1)===1&&(v+=1),4*d<7*v&&4*v<7*d&&(d=v=Math.max(d,v));let A=Vt.sampleGrid(this.image,h,y,x,E,d,v);return new Po(A,[h,y,x,E])}static shiftPoint(o,c,h){let y=(c.getX()-o.getX())/(h+1),x=(c.getY()-o.getY())/(h+1);return new mt(o.getX()+y,o.getY()+x)}static moveAway(o,c,h){let y=o.getX(),x=o.getY();return y<c?y-=1:y+=1,x<h?x-=1:x+=1,new mt(y,x)}detectSolid1(o){let c=o[0],h=o[1],y=o[3],x=o[2],E=this.transitionsBetween(c,h),d=this.transitionsBetween(h,y),v=this.transitionsBetween(y,x),A=this.transitionsBetween(x,c),I=E,P=[x,c,h,y];return I>d&&(I=d,P[0]=c,P[1]=h,P[2]=y,P[3]=x),I>v&&(I=v,P[0]=h,P[1]=y,P[2]=x,P[3]=c),I>A&&(P[0]=y,P[1]=x,P[2]=c,P[3]=h),P}detectSolid2(o){let c=o[0],h=o[1],y=o[2],x=o[3],E=this.transitionsBetween(c,x),d=Vt.shiftPoint(h,y,(E+1)*4),v=Vt.shiftPoint(y,h,(E+1)*4),A=this.transitionsBetween(d,c),I=this.transitionsBetween(v,x);return A<I?(o[0]=c,o[1]=h,o[2]=y,o[3]=x):(o[0]=h,o[1]=y,o[2]=x,o[3]=c),o}correctTopRight(o){let c=o[0],h=o[1],y=o[2],x=o[3],E=this.transitionsBetween(c,x),d=this.transitionsBetween(h,x),v=Vt.shiftPoint(c,h,(d+1)*4),A=Vt.shiftPoint(y,h,(E+1)*4);E=this.transitionsBetween(v,x),d=this.transitionsBetween(A,x);let I=new mt(x.getX()+(y.getX()-h.getX())/(E+1),x.getY()+(y.getY()-h.getY())/(E+1)),P=new mt(x.getX()+(c.getX()-h.getX())/(d+1),x.getY()+(c.getY()-h.getY())/(d+1));if(!this.isValid(I))return this.isValid(P)?P:null;if(!this.isValid(P))return I;let k=this.transitionsBetween(v,I)+this.transitionsBetween(A,I),F=this.transitionsBetween(v,P)+this.transitionsBetween(A,P);return k>F?I:P}shiftToModuleCenter(o){let c=o[0],h=o[1],y=o[2],x=o[3],E=this.transitionsBetween(c,x)+1,d=this.transitionsBetween(y,x)+1,v=Vt.shiftPoint(c,h,d*4),A=Vt.shiftPoint(y,h,E*4);E=this.transitionsBetween(v,x)+1,d=this.transitionsBetween(A,x)+1,(E&1)===1&&(E+=1),(d&1)===1&&(d+=1);let I=(c.getX()+h.getX()+y.getX()+x.getX())/4,P=(c.getY()+h.getY()+y.getY()+x.getY())/4;c=Vt.moveAway(c,I,P),h=Vt.moveAway(h,I,P),y=Vt.moveAway(y,I,P),x=Vt.moveAway(x,I,P);let k,F;return v=Vt.shiftPoint(c,h,d*4),v=Vt.shiftPoint(v,x,E*4),k=Vt.shiftPoint(h,c,d*4),k=Vt.shiftPoint(k,y,E*4),A=Vt.shiftPoint(y,x,d*4),A=Vt.shiftPoint(A,h,E*4),F=Vt.shiftPoint(x,y,d*4),F=Vt.shiftPoint(F,c,E*4),[v,k,A,F]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,c,h,y,x,E,d){return bi.getInstance().sampleGrid(o,E,d,.5,.5,E-.5,.5,E-.5,d-.5,.5,d-.5,c.getX(),c.getY(),x.getX(),x.getY(),y.getX(),y.getY(),h.getX(),h.getY())}transitionsBetween(o,c){let h=Math.trunc(o.getX()),y=Math.trunc(o.getY()),x=Math.trunc(c.getX()),E=Math.trunc(c.getY()),d=Math.abs(E-y)>Math.abs(x-h);if(d){let Q=h;h=y,y=Q,Q=x,x=E,E=Q}let v=Math.abs(x-h),A=Math.abs(E-y),I=-v/2,P=y<E?1:-1,k=h<x?1:-1,F=0,q=this.image.get(d?y:h,d?h:y);for(let Q=h,re=y;Q!==x;Q+=k){let ne=this.image.get(d?re:Q,d?Q:re);if(ne!==q&&(F++,q=ne),I+=A,I>0){if(re===E)break;re+=P,I-=v}}return F}}class qi{constructor(){this.decoder=new Zo}decode(o,c=null){let h,y;if(c!=null&&c.has(J.PURE_BARCODE)){const A=qi.extractPureBits(o.getBlackMatrix());h=this.decoder.decode(A),y=qi.NO_POINTS}else{const A=new Vt(o.getBlackMatrix()).detect();h=this.decoder.decode(A.getBits()),y=A.getPoints()}const x=h.getRawBytes(),E=new ze(h.getText(),x,8*x.length,y,$e.DATA_MATRIX,M.currentTimeMillis()),d=h.getByteSegments();d!=null&&E.putMetadata(lt.BYTE_SEGMENTS,d);const v=h.getECLevel();return v!=null&&E.putMetadata(lt.ERROR_CORRECTION_LEVEL,v),E}reset(){}static extractPureBits(o){const c=o.getTopLeftOnBit(),h=o.getBottomRightOnBit();if(c==null||h==null)throw new de;const y=this.moduleSize(c,o);let x=c[1];const E=h[1];let d=c[0];const A=(h[0]-d+1)/y,I=(E-x+1)/y;if(A<=0||I<=0)throw new de;const P=y/2;x+=P,d+=P;const k=new xe(A,I);for(let F=0;F<I;F++){const q=x+F*y;for(let Q=0;Q<A;Q++)o.get(d+Q*y,q)&&k.set(Q,F)}return k}static moduleSize(o,c){const h=c.getWidth();let y=o[0];const x=o[1];for(;y<h&&c.get(y,x);)y++;if(y===h)throw new de;const E=y-o[0];if(E===0)throw new de;return E}}qi.NO_POINTS=[];class vn extends Ye{constructor(o=500){super(new qi,o)}}var Di;(function(Y){Y[Y.L=0]="L",Y[Y.M=1]="M",Y[Y.Q=2]="Q",Y[Y.H=3]="H"})(Di||(Di={}));class $t{constructor(o,c,h){this.value=o,this.stringValue=c,this.bits=h,$t.FOR_BITS.set(h,this),$t.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return $t.L;case"M":return $t.M;case"Q":return $t.Q;case"H":return $t.H;default:throw new b(o+"not available")}}toString(){return this.stringValue}equals(o){if(!(o instanceof $t))return!1;const c=o;return this.value===c.value}static forBits(o){if(o<0||o>=$t.FOR_BITS.size)throw new _;return $t.FOR_BITS.get(o)}}$t.FOR_BITS=new Map,$t.FOR_VALUE=new Map,$t.L=new $t(Di.L,"L",1),$t.M=new $t(Di.M,"M",0),$t.Q=new $t(Di.Q,"Q",3),$t.H=new $t(Di.H,"H",2);class Zn{constructor(o){this.errorCorrectionLevel=$t.forBits(o>>3&3),this.dataMask=o&7}static numBitsDiffering(o,c){return K.bitCount(o^c)}static decodeFormatInformation(o,c){const h=Zn.doDecodeFormatInformation(o,c);return h!==null?h:Zn.doDecodeFormatInformation(o^Zn.FORMAT_INFO_MASK_QR,c^Zn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,c){let h=Number.MAX_SAFE_INTEGER,y=0;for(const x of Zn.FORMAT_INFO_DECODE_LOOKUP){const E=x[0];if(E===o||E===c)return new Zn(x[1]);let d=Zn.numBitsDiffering(o,E);d<h&&(y=x[1],h=d),o!==c&&(d=Zn.numBitsDiffering(c,E),d<h&&(y=x[1],h=d))}return h<=3?new Zn(y):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){if(!(o instanceof Zn))return!1;const c=o;return this.errorCorrectionLevel===c.errorCorrectionLevel&&this.dataMask===c.dataMask}}Zn.FORMAT_INFO_MASK_QR=21522,Zn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Te{constructor(o,...c){this.ecCodewordsPerBlock=o,this.ecBlocks=c}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0;const c=this.ecBlocks;for(const h of c)o+=h.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ce{constructor(o,c){this.count=o,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _t{constructor(o,c,...h){this.versionNumber=o,this.alignmentPatternCenters=c,this.ecBlocks=h;let y=0;const x=h[0].getECCodewordsPerBlock(),E=h[0].getECBlocks();for(const d of E)y+=d.getCount()*(d.getDataCodewords()+x);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!==1)throw new V;try{return this.getVersionForNumber((o-17)/4)}catch{throw new V}}static getVersionForNumber(o){if(o<1||o>40)throw new _;return _t.VERSIONS[o-1]}static decodeVersionInformation(o){let c=Number.MAX_SAFE_INTEGER,h=0;for(let y=0;y<_t.VERSION_DECODE_INFO.length;y++){const x=_t.VERSION_DECODE_INFO[y];if(x===o)return _t.getVersionForNumber(y+7);const E=Zn.numBitsDiffering(o,x);E<c&&(h=y+7,c=E)}return c<=3?_t.getVersionForNumber(h):null}buildFunctionPattern(){const o=this.getDimensionForVersion(),c=new xe(o);c.setRegion(0,0,9,9),c.setRegion(o-8,0,8,9),c.setRegion(0,o-8,9,8);const h=this.alignmentPatternCenters.length;for(let y=0;y<h;y++){const x=this.alignmentPatternCenters[y]-2;for(let E=0;E<h;E++)y===0&&(E===0||E===h-1)||y===h-1&&E===0||c.setRegion(this.alignmentPatternCenters[E]-2,x,5,5)}return c.setRegion(6,9,1,o-17),c.setRegion(9,6,o-17,1),this.versionNumber>6&&(c.setRegion(o-11,0,3,6),c.setRegion(0,o-11,6,3)),c}toString(){return""+this.versionNumber}}_t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),_t.VERSIONS=[new _t(1,new Int32Array(0),new Te(7,new ce(1,19)),new Te(10,new ce(1,16)),new Te(13,new ce(1,13)),new Te(17,new ce(1,9))),new _t(2,Int32Array.from([6,18]),new Te(10,new ce(1,34)),new Te(16,new ce(1,28)),new Te(22,new ce(1,22)),new Te(28,new ce(1,16))),new _t(3,Int32Array.from([6,22]),new Te(15,new ce(1,55)),new Te(26,new ce(1,44)),new Te(18,new ce(2,17)),new Te(22,new ce(2,13))),new _t(4,Int32Array.from([6,26]),new Te(20,new ce(1,80)),new Te(18,new ce(2,32)),new Te(26,new ce(2,24)),new Te(16,new ce(4,9))),new _t(5,Int32Array.from([6,30]),new Te(26,new ce(1,108)),new Te(24,new ce(2,43)),new Te(18,new ce(2,15),new ce(2,16)),new Te(22,new ce(2,11),new ce(2,12))),new _t(6,Int32Array.from([6,34]),new Te(18,new ce(2,68)),new Te(16,new ce(4,27)),new Te(24,new ce(4,19)),new Te(28,new ce(4,15))),new _t(7,Int32Array.from([6,22,38]),new Te(20,new ce(2,78)),new Te(18,new ce(4,31)),new Te(18,new ce(2,14),new ce(4,15)),new Te(26,new ce(4,13),new ce(1,14))),new _t(8,Int32Array.from([6,24,42]),new Te(24,new ce(2,97)),new Te(22,new ce(2,38),new ce(2,39)),new Te(22,new ce(4,18),new ce(2,19)),new Te(26,new ce(4,14),new ce(2,15))),new _t(9,Int32Array.from([6,26,46]),new Te(30,new ce(2,116)),new Te(22,new ce(3,36),new ce(2,37)),new Te(20,new ce(4,16),new ce(4,17)),new Te(24,new ce(4,12),new ce(4,13))),new _t(10,Int32Array.from([6,28,50]),new Te(18,new ce(2,68),new ce(2,69)),new Te(26,new ce(4,43),new ce(1,44)),new Te(24,new ce(6,19),new ce(2,20)),new Te(28,new ce(6,15),new ce(2,16))),new _t(11,Int32Array.from([6,30,54]),new Te(20,new ce(4,81)),new Te(30,new ce(1,50),new ce(4,51)),new Te(28,new ce(4,22),new ce(4,23)),new Te(24,new ce(3,12),new ce(8,13))),new _t(12,Int32Array.from([6,32,58]),new Te(24,new ce(2,92),new ce(2,93)),new Te(22,new ce(6,36),new ce(2,37)),new Te(26,new ce(4,20),new ce(6,21)),new Te(28,new ce(7,14),new ce(4,15))),new _t(13,Int32Array.from([6,34,62]),new Te(26,new ce(4,107)),new Te(22,new ce(8,37),new ce(1,38)),new Te(24,new ce(8,20),new ce(4,21)),new Te(22,new ce(12,11),new ce(4,12))),new _t(14,Int32Array.from([6,26,46,66]),new Te(30,new ce(3,115),new ce(1,116)),new Te(24,new ce(4,40),new ce(5,41)),new Te(20,new ce(11,16),new ce(5,17)),new Te(24,new ce(11,12),new ce(5,13))),new _t(15,Int32Array.from([6,26,48,70]),new Te(22,new ce(5,87),new ce(1,88)),new Te(24,new ce(5,41),new ce(5,42)),new Te(30,new ce(5,24),new ce(7,25)),new Te(24,new ce(11,12),new ce(7,13))),new _t(16,Int32Array.from([6,26,50,74]),new Te(24,new ce(5,98),new ce(1,99)),new Te(28,new ce(7,45),new ce(3,46)),new Te(24,new ce(15,19),new ce(2,20)),new Te(30,new ce(3,15),new ce(13,16))),new _t(17,Int32Array.from([6,30,54,78]),new Te(28,new ce(1,107),new ce(5,108)),new Te(28,new ce(10,46),new ce(1,47)),new Te(28,new ce(1,22),new ce(15,23)),new Te(28,new ce(2,14),new ce(17,15))),new _t(18,Int32Array.from([6,30,56,82]),new Te(30,new ce(5,120),new ce(1,121)),new Te(26,new ce(9,43),new ce(4,44)),new Te(28,new ce(17,22),new ce(1,23)),new Te(28,new ce(2,14),new ce(19,15))),new _t(19,Int32Array.from([6,30,58,86]),new Te(28,new ce(3,113),new ce(4,114)),new Te(26,new ce(3,44),new ce(11,45)),new Te(26,new ce(17,21),new ce(4,22)),new Te(26,new ce(9,13),new ce(16,14))),new _t(20,Int32Array.from([6,34,62,90]),new Te(28,new ce(3,107),new ce(5,108)),new Te(26,new ce(3,41),new ce(13,42)),new Te(30,new ce(15,24),new ce(5,25)),new Te(28,new ce(15,15),new ce(10,16))),new _t(21,Int32Array.from([6,28,50,72,94]),new Te(28,new ce(4,116),new ce(4,117)),new Te(26,new ce(17,42)),new Te(28,new ce(17,22),new ce(6,23)),new Te(30,new ce(19,16),new ce(6,17))),new _t(22,Int32Array.from([6,26,50,74,98]),new Te(28,new ce(2,111),new ce(7,112)),new Te(28,new ce(17,46)),new Te(30,new ce(7,24),new ce(16,25)),new Te(24,new ce(34,13))),new _t(23,Int32Array.from([6,30,54,78,102]),new Te(30,new ce(4,121),new ce(5,122)),new Te(28,new ce(4,47),new ce(14,48)),new Te(30,new ce(11,24),new ce(14,25)),new Te(30,new ce(16,15),new ce(14,16))),new _t(24,Int32Array.from([6,28,54,80,106]),new Te(30,new ce(6,117),new ce(4,118)),new Te(28,new ce(6,45),new ce(14,46)),new Te(30,new ce(11,24),new ce(16,25)),new Te(30,new ce(30,16),new ce(2,17))),new _t(25,Int32Array.from([6,32,58,84,110]),new Te(26,new ce(8,106),new ce(4,107)),new Te(28,new ce(8,47),new ce(13,48)),new Te(30,new ce(7,24),new ce(22,25)),new Te(30,new ce(22,15),new ce(13,16))),new _t(26,Int32Array.from([6,30,58,86,114]),new Te(28,new ce(10,114),new ce(2,115)),new Te(28,new ce(19,46),new ce(4,47)),new Te(28,new ce(28,22),new ce(6,23)),new Te(30,new ce(33,16),new ce(4,17))),new _t(27,Int32Array.from([6,34,62,90,118]),new Te(30,new ce(8,122),new ce(4,123)),new Te(28,new ce(22,45),new ce(3,46)),new Te(30,new ce(8,23),new ce(26,24)),new Te(30,new ce(12,15),new ce(28,16))),new _t(28,Int32Array.from([6,26,50,74,98,122]),new Te(30,new ce(3,117),new ce(10,118)),new Te(28,new ce(3,45),new ce(23,46)),new Te(30,new ce(4,24),new ce(31,25)),new Te(30,new ce(11,15),new ce(31,16))),new _t(29,Int32Array.from([6,30,54,78,102,126]),new Te(30,new ce(7,116),new ce(7,117)),new Te(28,new ce(21,45),new ce(7,46)),new Te(30,new ce(1,23),new ce(37,24)),new Te(30,new ce(19,15),new ce(26,16))),new _t(30,Int32Array.from([6,26,52,78,104,130]),new Te(30,new ce(5,115),new ce(10,116)),new Te(28,new ce(19,47),new ce(10,48)),new Te(30,new ce(15,24),new ce(25,25)),new Te(30,new ce(23,15),new ce(25,16))),new _t(31,Int32Array.from([6,30,56,82,108,134]),new Te(30,new ce(13,115),new ce(3,116)),new Te(28,new ce(2,46),new ce(29,47)),new Te(30,new ce(42,24),new ce(1,25)),new Te(30,new ce(23,15),new ce(28,16))),new _t(32,Int32Array.from([6,34,60,86,112,138]),new Te(30,new ce(17,115)),new Te(28,new ce(10,46),new ce(23,47)),new Te(30,new ce(10,24),new ce(35,25)),new Te(30,new ce(19,15),new ce(35,16))),new _t(33,Int32Array.from([6,30,58,86,114,142]),new Te(30,new ce(17,115),new ce(1,116)),new Te(28,new ce(14,46),new ce(21,47)),new Te(30,new ce(29,24),new ce(19,25)),new Te(30,new ce(11,15),new ce(46,16))),new _t(34,Int32Array.from([6,34,62,90,118,146]),new Te(30,new ce(13,115),new ce(6,116)),new Te(28,new ce(14,46),new ce(23,47)),new Te(30,new ce(44,24),new ce(7,25)),new Te(30,new ce(59,16),new ce(1,17))),new _t(35,Int32Array.from([6,30,54,78,102,126,150]),new Te(30,new ce(12,121),new ce(7,122)),new Te(28,new ce(12,47),new ce(26,48)),new Te(30,new ce(39,24),new ce(14,25)),new Te(30,new ce(22,15),new ce(41,16))),new _t(36,Int32Array.from([6,24,50,76,102,128,154]),new Te(30,new ce(6,121),new ce(14,122)),new Te(28,new ce(6,47),new ce(34,48)),new Te(30,new ce(46,24),new ce(10,25)),new Te(30,new ce(2,15),new ce(64,16))),new _t(37,Int32Array.from([6,28,54,80,106,132,158]),new Te(30,new ce(17,122),new ce(4,123)),new Te(28,new ce(29,46),new ce(14,47)),new Te(30,new ce(49,24),new ce(10,25)),new Te(30,new ce(24,15),new ce(46,16))),new _t(38,Int32Array.from([6,32,58,84,110,136,162]),new Te(30,new ce(4,122),new ce(18,123)),new Te(28,new ce(13,46),new ce(32,47)),new Te(30,new ce(48,24),new ce(14,25)),new Te(30,new ce(42,15),new ce(32,16))),new _t(39,Int32Array.from([6,26,54,82,110,138,166]),new Te(30,new ce(20,117),new ce(4,118)),new Te(28,new ce(40,47),new ce(7,48)),new Te(30,new ce(43,24),new ce(22,25)),new Te(30,new ce(10,15),new ce(67,16))),new _t(40,Int32Array.from([6,30,58,86,114,142,170]),new Te(30,new ce(19,118),new ce(6,119)),new Te(28,new ce(18,47),new ce(31,48)),new Te(30,new ce(34,24),new ce(34,25)),new Te(30,new ce(20,15),new ce(61,16)))];var Pr;(function(Y){Y[Y.DATA_MASK_000=0]="DATA_MASK_000",Y[Y.DATA_MASK_001=1]="DATA_MASK_001",Y[Y.DATA_MASK_010=2]="DATA_MASK_010",Y[Y.DATA_MASK_011=3]="DATA_MASK_011",Y[Y.DATA_MASK_100=4]="DATA_MASK_100",Y[Y.DATA_MASK_101=5]="DATA_MASK_101",Y[Y.DATA_MASK_110=6]="DATA_MASK_110",Y[Y.DATA_MASK_111=7]="DATA_MASK_111"})(Pr||(Pr={}));class Rr{constructor(o,c){this.value=o,this.isMasked=c}unmaskBitMatrix(o,c){for(let h=0;h<c;h++)for(let y=0;y<c;y++)this.isMasked(h,y)&&o.flip(y,h)}}Rr.values=new Map([[Pr.DATA_MASK_000,new Rr(Pr.DATA_MASK_000,(Y,o)=>(Y+o&1)===0)],[Pr.DATA_MASK_001,new Rr(Pr.DATA_MASK_001,(Y,o)=>(Y&1)===0)],[Pr.DATA_MASK_010,new Rr(Pr.DATA_MASK_010,(Y,o)=>o%3===0)],[Pr.DATA_MASK_011,new Rr(Pr.DATA_MASK_011,(Y,o)=>(Y+o)%3===0)],[Pr.DATA_MASK_100,new Rr(Pr.DATA_MASK_100,(Y,o)=>(Math.floor(Y/2)+Math.floor(o/3)&1)===0)],[Pr.DATA_MASK_101,new Rr(Pr.DATA_MASK_101,(Y,o)=>Y*o%6===0)],[Pr.DATA_MASK_110,new Rr(Pr.DATA_MASK_110,(Y,o)=>Y*o%6<3)],[Pr.DATA_MASK_111,new Rr(Pr.DATA_MASK_111,(Y,o)=>(Y+o+Y*o%3&1)===0)]]);class Gi{constructor(o){const c=o.getHeight();if(c<21||(c&3)!==1)throw new V;this.bitMatrix=o}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let o=0;for(let x=0;x<6;x++)o=this.copyBit(x,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let x=5;x>=0;x--)o=this.copyBit(8,x,o);const c=this.bitMatrix.getHeight();let h=0;const y=c-7;for(let x=c-1;x>=y;x--)h=this.copyBit(8,x,h);for(let x=c-8;x<c;x++)h=this.copyBit(x,8,h);if(this.parsedFormatInfo=Zn.decodeFormatInformation(o,h),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new V}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const o=this.bitMatrix.getHeight(),c=Math.floor((o-17)/4);if(c<=6)return _t.getVersionForNumber(c);let h=0;const y=o-11;for(let E=5;E>=0;E--)for(let d=o-9;d>=y;d--)h=this.copyBit(d,E,h);let x=_t.decodeVersionInformation(h);if(x!==null&&x.getDimensionForVersion()===o)return this.parsedVersion=x,x;h=0;for(let E=5;E>=0;E--)for(let d=o-9;d>=y;d--)h=this.copyBit(E,d,h);if(x=_t.decodeVersionInformation(h),x!==null&&x.getDimensionForVersion()===o)return this.parsedVersion=x,x;throw new V}copyBit(o,c,h){return(this.isMirror?this.bitMatrix.get(c,o):this.bitMatrix.get(o,c))?h<<1|1:h<<1}readCodewords(){const o=this.readFormatInformation(),c=this.readVersion(),h=Rr.values.get(o.getDataMask()),y=this.bitMatrix.getHeight();h.unmaskBitMatrix(this.bitMatrix,y);const x=c.buildFunctionPattern();let E=!0;const d=new Uint8Array(c.getTotalCodewords());let v=0,A=0,I=0;for(let P=y-1;P>0;P-=2){P===6&&P--;for(let k=0;k<y;k++){const F=E?y-1-k:k;for(let q=0;q<2;q++)x.get(P-q,F)||(I++,A<<=1,this.bitMatrix.get(P-q,F)&&(A|=1),I===8&&(d[v++]=A,I=0,A=0))}E=!E}if(v!==c.getTotalCodewords())throw new V;return d}remask(){if(this.parsedFormatInfo===null)return;const o=Rr.values[this.parsedFormatInfo.getDataMask()],c=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,c)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){const o=this.bitMatrix;for(let c=0,h=o.getWidth();c<h;c++)for(let y=c+1,x=o.getHeight();y<x;y++)o.get(c,y)!==o.get(y,c)&&(o.flip(y,c),o.flip(c,y))}}class Jo{constructor(o,c){this.numDataCodewords=o,this.codewords=c}static getDataBlocks(o,c,h){if(o.length!==c.getTotalCodewords())throw new _;const y=c.getECBlocksForLevel(h);let x=0;const E=y.getECBlocks();for(const q of E)x+=q.getCount();const d=new Array(x);let v=0;for(const q of E)for(let Q=0;Q<q.getCount();Q++){const re=q.getDataCodewords(),ne=y.getECCodewordsPerBlock()+re;d[v++]=new Jo(re,new Uint8Array(ne))}const A=d[0].codewords.length;let I=d.length-1;for(;I>=0&&d[I].codewords.length!==A;)I--;I++;const P=A-y.getECCodewordsPerBlock();let k=0;for(let q=0;q<P;q++)for(let Q=0;Q<v;Q++)d[Q].codewords[q]=o[k++];for(let q=I;q<v;q++)d[q].codewords[P]=o[k++];const F=d[0].codewords.length;for(let q=P;q<F;q++)for(let Q=0;Q<v;Q++){const re=Q<I?q:q+1;d[Q].codewords[re]=o[k++]}return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var zt;(function(Y){Y[Y.TERMINATOR=0]="TERMINATOR",Y[Y.NUMERIC=1]="NUMERIC",Y[Y.ALPHANUMERIC=2]="ALPHANUMERIC",Y[Y.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",Y[Y.BYTE=4]="BYTE",Y[Y.ECI=5]="ECI",Y[Y.KANJI=6]="KANJI",Y[Y.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",Y[Y.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",Y[Y.HANZI=9]="HANZI"})(zt||(zt={}));class Nt{constructor(o,c,h,y){this.value=o,this.stringValue=c,this.characterCountBitsForVersions=h,this.bits=y,Nt.FOR_BITS.set(y,this),Nt.FOR_VALUE.set(o,this)}static forBits(o){const c=Nt.FOR_BITS.get(o);if(c===void 0)throw new _;return c}getCharacterCountBits(o){const c=o.getVersionNumber();let h;return c<=9?h=0:c<=26?h=1:h=2,this.characterCountBitsForVersions[h]}getValue(){return this.value}getBits(){return this.bits}equals(o){if(!(o instanceof Nt))return!1;const c=o;return this.value===c.value}toString(){return this.stringValue}}Nt.FOR_BITS=new Map,Nt.FOR_VALUE=new Map,Nt.TERMINATOR=new Nt(zt.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Nt.NUMERIC=new Nt(zt.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Nt.ALPHANUMERIC=new Nt(zt.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Nt.STRUCTURED_APPEND=new Nt(zt.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Nt.BYTE=new Nt(zt.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Nt.ECI=new Nt(zt.ECI,"ECI",Int32Array.from([0,0,0]),7),Nt.KANJI=new Nt(zt.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Nt.FNC1_FIRST_POSITION=new Nt(zt.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Nt.FNC1_SECOND_POSITION=new Nt(zt.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Nt.HANZI=new Nt(zt.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class zn{static decode(o,c,h,y){const x=new Sr(o);let E=new ee;const d=new Array;let v=-1,A=-1;try{let I=null,P=!1,k;do{if(x.available()<4)k=Nt.TERMINATOR;else{const F=x.readBits(4);k=Nt.forBits(F)}switch(k){case Nt.TERMINATOR:break;case Nt.FNC1_FIRST_POSITION:case Nt.FNC1_SECOND_POSITION:P=!0;break;case Nt.STRUCTURED_APPEND:if(x.available()<16)throw new V;v=x.readBits(8),A=x.readBits(8);break;case Nt.ECI:const F=zn.parseECIValue(x);if(I=H.getCharacterSetECIByValue(F),I===null)throw new V;break;case Nt.HANZI:const q=x.readBits(4),Q=x.readBits(k.getCharacterCountBits(c));q===zn.GB2312_SUBSET&&zn.decodeHanziSegment(x,E,Q);break;default:const re=x.readBits(k.getCharacterCountBits(c));switch(k){case Nt.NUMERIC:zn.decodeNumericSegment(x,E,re);break;case Nt.ALPHANUMERIC:zn.decodeAlphanumericSegment(x,E,re,P);break;case Nt.BYTE:zn.decodeByteSegment(x,E,re,I,d,y);break;case Nt.KANJI:zn.decodeKanjiSegment(x,E,re);break;default:throw new V}break}}while(k!==Nt.TERMINATOR)}catch{throw new V}return new Ne(o,E.toString(),d.length===0?null:d,h===null?null:h.toString(),v,A)}static decodeHanziSegment(o,c,h){if(h*13>o.available())throw new V;const y=new Uint8Array(2*h);let x=0;for(;h>0;){const E=o.readBits(13);let d=E/96<<8&4294967295|E%96;d<959?d+=41377:d+=42657,y[x]=d>>8&255,y[x+1]=d&255,x+=2,h--}try{c.append(ae.decode(y,Z.GB2312))}catch(E){throw new V(E)}}static decodeKanjiSegment(o,c,h){if(h*13>o.available())throw new V;const y=new Uint8Array(2*h);let x=0;for(;h>0;){const E=o.readBits(13);let d=E/192<<8&4294967295|E%192;d<7936?d+=33088:d+=49472,y[x]=d>>8,y[x+1]=d,x+=2,h--}try{c.append(ae.decode(y,Z.SHIFT_JIS))}catch(E){throw new V(E)}}static decodeByteSegment(o,c,h,y,x,E){if(8*h>o.available())throw new V;const d=new Uint8Array(h);for(let A=0;A<h;A++)d[A]=o.readBits(8);let v;y===null?v=Z.guessEncoding(d,E):v=y.getName();try{c.append(ae.decode(d,v))}catch(A){throw new V(A)}x.push(d)}static toAlphaNumericChar(o){if(o>=zn.ALPHANUMERIC_CHARS.length)throw new V;return zn.ALPHANUMERIC_CHARS[o]}static decodeAlphanumericSegment(o,c,h,y){const x=c.length();for(;h>1;){if(o.available()<11)throw new V;const E=o.readBits(11);c.append(zn.toAlphaNumericChar(Math.floor(E/45))),c.append(zn.toAlphaNumericChar(E%45)),h-=2}if(h===1){if(o.available()<6)throw new V;c.append(zn.toAlphaNumericChar(o.readBits(6)))}if(y)for(let E=x;E<c.length();E++)c.charAt(E)==="%"&&(E<c.length()-1&&c.charAt(E+1)==="%"?c.deleteCharAt(E+1):c.setCharAt(E,""))}static decodeNumericSegment(o,c,h){for(;h>=3;){if(o.available()<10)throw new V;const y=o.readBits(10);if(y>=1e3)throw new V;c.append(zn.toAlphaNumericChar(Math.floor(y/100))),c.append(zn.toAlphaNumericChar(Math.floor(y/10)%10)),c.append(zn.toAlphaNumericChar(y%10)),h-=3}if(h===2){if(o.available()<7)throw new V;const y=o.readBits(7);if(y>=100)throw new V;c.append(zn.toAlphaNumericChar(Math.floor(y/10))),c.append(zn.toAlphaNumericChar(y%10))}else if(h===1){if(o.available()<4)throw new V;const y=o.readBits(4);if(y>=10)throw new V;c.append(zn.toAlphaNumericChar(y))}}static parseECIValue(o){const c=o.readBits(8);if((c&128)===0)return c&127;if((c&192)===128){const h=o.readBits(8);return(c&63)<<8&4294967295|h}if((c&224)===192){const h=o.readBits(16);return(c&31)<<16&4294967295|h}throw new V}}zn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",zn.GB2312_SUBSET=1;class Fl{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||o===null||o.length<3)return;const c=o[0];o[0]=o[2],o[2]=c}}class Yr{constructor(){this.rsDecoder=new Zt(Rt.QR_CODE_FIELD_256)}decodeBooleanArray(o,c){return this.decodeBitMatrix(xe.parseFromBooleanArray(o),c)}decodeBitMatrix(o,c){const h=new Gi(o);let y=null;try{return this.decodeBitMatrixParser(h,c)}catch(x){y=x}try{h.remask(),h.setMirror(!0),h.readVersion(),h.readFormatInformation(),h.mirror();const x=this.decodeBitMatrixParser(h,c);return x.setOther(new Fl(!0)),x}catch(x){throw y!==null?y:x}}decodeBitMatrixParser(o,c){const h=o.readVersion(),y=o.readFormatInformation().getErrorCorrectionLevel(),x=o.readCodewords(),E=Jo.getDataBlocks(x,h,y);let d=0;for(const I of E)d+=I.getNumDataCodewords();const v=new Uint8Array(d);let A=0;for(const I of E){const P=I.getCodewords(),k=I.getNumDataCodewords();this.correctErrors(P,k);for(let F=0;F<k;F++)v[A++]=P[F]}return zn.decode(v,h,y,c)}correctErrors(o,c){const h=new Int32Array(o);try{this.rsDecoder.decode(h,o.length-c)}catch{throw new N}for(let y=0;y<c;y++)o[y]=h[y]}}class wa extends mt{constructor(o,c,h){super(o,c),this.estimatedModuleSize=h}aboutEquals(o,c,h){if(Math.abs(c-this.getY())<=o&&Math.abs(h-this.getX())<=o){const y=Math.abs(o-this.estimatedModuleSize);return y<=1||y<=this.estimatedModuleSize}return!1}combineEstimate(o,c,h){const y=(this.getX()+c)/2,x=(this.getY()+o)/2,E=(this.estimatedModuleSize+h)/2;return new wa(y,x,E)}}class _i{constructor(o,c,h,y,x,E,d){this.image=o,this.startX=c,this.startY=h,this.width=y,this.height=x,this.moduleSize=E,this.resultPointCallback=d,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const o=this.startX,c=this.height,h=this.width,y=o+h,x=this.startY+c/2,E=new Int32Array(3),d=this.image;for(let v=0;v<c;v++){const A=x+((v&1)===0?Math.floor((v+1)/2):-Math.floor((v+1)/2));E[0]=0,E[1]=0,E[2]=0;let I=o;for(;I<y&&!d.get(I,A);)I++;let P=0;for(;I<y;){if(d.get(I,A))if(P===1)E[1]++;else if(P===2){if(this.foundPatternCross(E)){const k=this.handlePossibleCenter(E,A,I);if(k!==null)return k}E[0]=E[2],E[1]=1,E[2]=0,P=1}else E[++P]++;else P===1&&P++,E[P]++;I++}if(this.foundPatternCross(E)){const k=this.handlePossibleCenter(E,A,y);if(k!==null)return k}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new de}static centerFromEnd(o,c){return c-o[2]-o[1]/2}foundPatternCross(o){const c=this.moduleSize,h=c/2;for(let y=0;y<3;y++)if(Math.abs(c-o[y])>=h)return!1;return!0}crossCheckVertical(o,c,h,y){const x=this.image,E=x.getHeight(),d=this.crossCheckStateCount;d[0]=0,d[1]=0,d[2]=0;let v=o;for(;v>=0&&x.get(c,v)&&d[1]<=h;)d[1]++,v--;if(v<0||d[1]>h)return NaN;for(;v>=0&&!x.get(c,v)&&d[0]<=h;)d[0]++,v--;if(d[0]>h)return NaN;for(v=o+1;v<E&&x.get(c,v)&&d[1]<=h;)d[1]++,v++;if(v===E||d[1]>h)return NaN;for(;v<E&&!x.get(c,v)&&d[2]<=h;)d[2]++,v++;if(d[2]>h)return NaN;const A=d[0]+d[1]+d[2];return 5*Math.abs(A-y)>=2*y?NaN:this.foundPatternCross(d)?_i.centerFromEnd(d,v):NaN}handlePossibleCenter(o,c,h){const y=o[0]+o[1]+o[2],x=_i.centerFromEnd(o,h),E=this.crossCheckVertical(c,x,2*o[1],y);if(!isNaN(E)){const d=(o[0]+o[1]+o[2])/3;for(const A of this.possibleCenters)if(A.aboutEquals(d,E,x))return A.combineEstimate(E,x,d);const v=new wa(x,E,d);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null}}class na extends mt{constructor(o,c,h,y){super(o,c),this.estimatedModuleSize=h,this.count=y,y===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,c,h){if(Math.abs(c-this.getY())<=o&&Math.abs(h-this.getX())<=o){const y=Math.abs(o-this.estimatedModuleSize);return y<=1||y<=this.estimatedModuleSize}return!1}combineEstimate(o,c,h){const y=this.count+1,x=(this.count*this.getX()+c)/y,E=(this.count*this.getY()+o)/y,d=(this.count*this.estimatedModuleSize+h)/y;return new na(x,E,d,y)}}class _a{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Jn{constructor(o,c){this.image=o,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=c}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(o){const c=o!=null&&o.get(J.TRY_HARDER)!==void 0,h=o!=null&&o.get(J.PURE_BARCODE)!==void 0,y=this.image,x=y.getHeight(),E=y.getWidth();let d=Math.floor(3*x/(4*Jn.MAX_MODULES));(d<Jn.MIN_SKIP||c)&&(d=Jn.MIN_SKIP);let v=!1;const A=new Int32Array(5);for(let P=d-1;P<x&&!v;P+=d){A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0;let k=0;for(let F=0;F<E;F++)if(y.get(F,P))(k&1)===1&&k++,A[k]++;else if((k&1)===0)if(k===4)if(Jn.foundPatternCross(A)){if(this.handlePossibleCenter(A,P,F,h)===!0)if(d=2,this.hasSkipped===!0)v=this.haveMultiplyConfirmedCenters();else{const Q=this.findRowSkip();Q>A[2]&&(P+=Q-A[2]-d,F=E-1)}else{A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,k=3;continue}k=0,A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0}else A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,k=3;else A[++k]++;else A[k]++;Jn.foundPatternCross(A)&&this.handlePossibleCenter(A,P,E,h)===!0&&(d=A[0],this.hasSkipped&&(v=this.haveMultiplyConfirmedCenters()))}const I=this.selectBestPatterns();return mt.orderBestPatterns(I),new _a(I)}static centerFromEnd(o,c){return c-o[4]-o[3]-o[2]/2}static foundPatternCross(o){let c=0;for(let x=0;x<5;x++){const E=o[x];if(E===0)return!1;c+=E}if(c<7)return!1;const h=c/7,y=h/2;return Math.abs(h-o[0])<y&&Math.abs(h-o[1])<y&&Math.abs(3*h-o[2])<3*y&&Math.abs(h-o[3])<y&&Math.abs(h-o[4])<y}getCrossCheckStateCount(){const o=this.crossCheckStateCount;return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o}crossCheckDiagonal(o,c,h,y){const x=this.getCrossCheckStateCount();let E=0;const d=this.image;for(;o>=E&&c>=E&&d.get(c-E,o-E);)x[2]++,E++;if(o<E||c<E)return!1;for(;o>=E&&c>=E&&!d.get(c-E,o-E)&&x[1]<=h;)x[1]++,E++;if(o<E||c<E||x[1]>h)return!1;for(;o>=E&&c>=E&&d.get(c-E,o-E)&&x[0]<=h;)x[0]++,E++;if(x[0]>h)return!1;const v=d.getHeight(),A=d.getWidth();for(E=1;o+E<v&&c+E<A&&d.get(c+E,o+E);)x[2]++,E++;if(o+E>=v||c+E>=A)return!1;for(;o+E<v&&c+E<A&&!d.get(c+E,o+E)&&x[3]<h;)x[3]++,E++;if(o+E>=v||c+E>=A||x[3]>=h)return!1;for(;o+E<v&&c+E<A&&d.get(c+E,o+E)&&x[4]<h;)x[4]++,E++;if(x[4]>=h)return!1;const I=x[0]+x[1]+x[2]+x[3]+x[4];return Math.abs(I-y)<2*y&&Jn.foundPatternCross(x)}crossCheckVertical(o,c,h,y){const x=this.image,E=x.getHeight(),d=this.getCrossCheckStateCount();let v=o;for(;v>=0&&x.get(c,v);)d[2]++,v--;if(v<0)return NaN;for(;v>=0&&!x.get(c,v)&&d[1]<=h;)d[1]++,v--;if(v<0||d[1]>h)return NaN;for(;v>=0&&x.get(c,v)&&d[0]<=h;)d[0]++,v--;if(d[0]>h)return NaN;for(v=o+1;v<E&&x.get(c,v);)d[2]++,v++;if(v===E)return NaN;for(;v<E&&!x.get(c,v)&&d[3]<h;)d[3]++,v++;if(v===E||d[3]>=h)return NaN;for(;v<E&&x.get(c,v)&&d[4]<h;)d[4]++,v++;if(d[4]>=h)return NaN;const A=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(A-y)>=2*y?NaN:Jn.foundPatternCross(d)?Jn.centerFromEnd(d,v):NaN}crossCheckHorizontal(o,c,h,y){const x=this.image,E=x.getWidth(),d=this.getCrossCheckStateCount();let v=o;for(;v>=0&&x.get(v,c);)d[2]++,v--;if(v<0)return NaN;for(;v>=0&&!x.get(v,c)&&d[1]<=h;)d[1]++,v--;if(v<0||d[1]>h)return NaN;for(;v>=0&&x.get(v,c)&&d[0]<=h;)d[0]++,v--;if(d[0]>h)return NaN;for(v=o+1;v<E&&x.get(v,c);)d[2]++,v++;if(v===E)return NaN;for(;v<E&&!x.get(v,c)&&d[3]<h;)d[3]++,v++;if(v===E||d[3]>=h)return NaN;for(;v<E&&x.get(v,c)&&d[4]<h;)d[4]++,v++;if(d[4]>=h)return NaN;const A=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(A-y)>=y?NaN:Jn.foundPatternCross(d)?Jn.centerFromEnd(d,v):NaN}handlePossibleCenter(o,c,h,y){const x=o[0]+o[1]+o[2]+o[3]+o[4];let E=Jn.centerFromEnd(o,h),d=this.crossCheckVertical(c,Math.floor(E),o[2],x);if(!isNaN(d)&&(E=this.crossCheckHorizontal(Math.floor(E),Math.floor(d),o[2],x),!isNaN(E)&&(!y||this.crossCheckDiagonal(Math.floor(d),Math.floor(E),o[2],x)))){const v=x/7;let A=!1;const I=this.possibleCenters;for(let P=0,k=I.length;P<k;P++){const F=I[P];if(F.aboutEquals(v,d,E)){I[P]=F.combineEstimate(d,E,v),A=!0;break}}if(!A){const P=new na(E,d,v);I.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let c=null;for(const h of this.possibleCenters)if(h.getCount()>=Jn.CENTER_QUORUM)if(c==null)c=h;else return this.hasSkipped=!0,Math.floor((Math.abs(c.getX()-h.getX())-Math.abs(c.getY()-h.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let o=0,c=0;const h=this.possibleCenters.length;for(const E of this.possibleCenters)E.getCount()>=Jn.CENTER_QUORUM&&(o++,c+=E.getEstimatedModuleSize());if(o<3)return!1;const y=c/h;let x=0;for(const E of this.possibleCenters)x+=Math.abs(E.getEstimatedModuleSize()-y);return x<=.05*c}selectBestPatterns(){const o=this.possibleCenters.length;if(o<3)throw new de;const c=this.possibleCenters;let h;if(o>3){let y=0,x=0;for(const v of this.possibleCenters){const A=v.getEstimatedModuleSize();y+=A,x+=A*A}h=y/o;let E=Math.sqrt(x/o-h*h);c.sort((v,A)=>{const I=Math.abs(A.getEstimatedModuleSize()-h),P=Math.abs(v.getEstimatedModuleSize()-h);return I<P?-1:I>P?1:0});const d=Math.max(.2*h,E);for(let v=0;v<c.length&&c.length>3;v++){const A=c[v];Math.abs(A.getEstimatedModuleSize()-h)>d&&(c.splice(v,1),v--)}}if(c.length>3){let y=0;for(const x of c)y+=x.getEstimatedModuleSize();h=y/c.length,c.sort((x,E)=>{if(E.getCount()===x.getCount()){const d=Math.abs(E.getEstimatedModuleSize()-h),v=Math.abs(x.getEstimatedModuleSize()-h);return d<v?1:d>v?-1:0}else return E.getCount()-x.getCount()}),c.splice(3)}return[c[0],c[1],c[2]]}}Jn.CENTER_QUORUM=2,Jn.MIN_SKIP=3,Jn.MAX_MODULES=57;class jn{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=o==null?null:o.get(J.NEED_RESULT_POINT_CALLBACK);const h=new Jn(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(h)}processFinderPatternInfo(o){const c=o.getTopLeft(),h=o.getTopRight(),y=o.getBottomLeft(),x=this.calculateModuleSize(c,h,y);if(x<1)throw new de("No pattern found in proccess finder.");const E=jn.computeDimension(c,h,y,x),d=_t.getProvisionalVersionForDimension(E),v=d.getDimensionForVersion()-7;let A=null;if(d.getAlignmentPatternCenters().length>0){const F=h.getX()-c.getX()+y.getX(),q=h.getY()-c.getY()+y.getY(),Q=1-3/v,re=Math.floor(c.getX()+Q*(F-c.getX())),ne=Math.floor(c.getY()+Q*(q-c.getY()));for(let le=4;le<=16;le<<=1)try{A=this.findAlignmentInRegion(x,re,ne,le);break}catch(fe){if(!(fe instanceof de))throw fe}}const I=jn.createTransform(c,h,y,A,E),P=jn.sampleGrid(this.image,I,E);let k;return A===null?k=[y,c,h]:k=[y,c,h,A],new Po(P,k)}static createTransform(o,c,h,y,x){const E=x-3.5;let d,v,A,I;return y!==null?(d=y.getX(),v=y.getY(),A=E-3,I=A):(d=c.getX()-o.getX()+h.getX(),v=c.getY()-o.getY()+h.getY(),A=E,I=E),$n.quadrilateralToQuadrilateral(3.5,3.5,E,3.5,A,I,3.5,E,o.getX(),o.getY(),c.getX(),c.getY(),d,v,h.getX(),h.getY())}static sampleGrid(o,c,h){return bi.getInstance().sampleGridWithTransform(o,h,h,c)}static computeDimension(o,c,h,y){const x=xt.round(mt.distance(o,c)/y),E=xt.round(mt.distance(o,h)/y);let d=Math.floor((x+E)/2)+7;switch(d&3){case 0:d++;break;case 2:d--;break;case 3:throw new de("Dimensions could be not found.")}return d}calculateModuleSize(o,c,h){return(this.calculateModuleSizeOneWay(o,c)+this.calculateModuleSizeOneWay(o,h))/2}calculateModuleSizeOneWay(o,c){const h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(c.getX()),Math.floor(c.getY())),y=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(c.getX()),Math.floor(c.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(h)?y/7:isNaN(y)?h/7:(h+y)/14}sizeOfBlackWhiteBlackRunBothWays(o,c,h,y){let x=this.sizeOfBlackWhiteBlackRun(o,c,h,y),E=1,d=o-(h-o);d<0?(E=o/(o-d),d=0):d>=this.image.getWidth()&&(E=(this.image.getWidth()-1-o)/(d-o),d=this.image.getWidth()-1);let v=Math.floor(c-(y-c)*E);return E=1,v<0?(E=c/(c-v),v=0):v>=this.image.getHeight()&&(E=(this.image.getHeight()-1-c)/(v-c),v=this.image.getHeight()-1),d=Math.floor(o+(d-o)*E),x+=this.sizeOfBlackWhiteBlackRun(o,c,d,v),x-1}sizeOfBlackWhiteBlackRun(o,c,h,y){const x=Math.abs(y-c)>Math.abs(h-o);if(x){let F=o;o=c,c=F,F=h,h=y,y=F}const E=Math.abs(h-o),d=Math.abs(y-c);let v=-E/2;const A=o<h?1:-1,I=c<y?1:-1;let P=0;const k=h+A;for(let F=o,q=c;F!==k;F+=A){const Q=x?q:F,re=x?F:q;if(P===1===this.image.get(Q,re)){if(P===2)return xt.distance(F,q,o,c);P++}if(v+=d,v>0){if(q===y)break;q+=I,v-=E}}return P===2?xt.distance(h+A,y,o,c):NaN}findAlignmentInRegion(o,c,h,y){const x=Math.floor(y*o),E=Math.max(0,c-x),d=Math.min(this.image.getWidth()-1,c+x);if(d-E<o*3)throw new de("Alignment top exceeds estimated module size.");const v=Math.max(0,h-x),A=Math.min(this.image.getHeight()-1,h+x);if(A-v<o*3)throw new de("Alignment bottom exceeds estimated module size.");return new _i(this.image,E,v,d-E,A-v,o,this.resultPointCallback).find()}}class Tr{constructor(){this.decoder=new Yr}getDecoder(){return this.decoder}decode(o,c){let h,y;if(c!=null&&c.get(J.PURE_BARCODE)!==void 0){const v=Tr.extractPureBits(o.getBlackMatrix());h=this.decoder.decodeBitMatrix(v,c),y=Tr.NO_POINTS}else{const v=new jn(o.getBlackMatrix()).detect(c);h=this.decoder.decodeBitMatrix(v.getBits(),c),y=v.getPoints()}h.getOther()instanceof Fl&&h.getOther().applyMirroredCorrection(y);const x=new ze(h.getText(),h.getRawBytes(),void 0,y,$e.QR_CODE,void 0),E=h.getByteSegments();E!==null&&x.putMetadata(lt.BYTE_SEGMENTS,E);const d=h.getECLevel();return d!==null&&x.putMetadata(lt.ERROR_CORRECTION_LEVEL,d),h.hasStructuredAppend()&&(x.putMetadata(lt.STRUCTURED_APPEND_SEQUENCE,h.getStructuredAppendSequenceNumber()),x.putMetadata(lt.STRUCTURED_APPEND_PARITY,h.getStructuredAppendParity())),x}reset(){}static extractPureBits(o){const c=o.getTopLeftOnBit(),h=o.getBottomRightOnBit();if(c===null||h===null)throw new de;const y=this.moduleSize(c,o);let x=c[1],E=h[1],d=c[0],v=h[0];if(d>=v||x>=E)throw new de;if(E-x!==v-d&&(v=d+(E-x),v>=o.getWidth()))throw new de;const A=Math.round((v-d+1)/y),I=Math.round((E-x+1)/y);if(A<=0||I<=0)throw new de;if(I!==A)throw new de;const P=Math.floor(y/2);x+=P,d+=P;const k=d+Math.floor((A-1)*y)-v;if(k>0){if(k>P)throw new de;d-=k}const F=x+Math.floor((I-1)*y)-E;if(F>0){if(F>P)throw new de;x-=F}const q=new xe(A,I);for(let Q=0;Q<I;Q++){const re=x+Math.floor(Q*y);for(let ne=0;ne<A;ne++)o.get(d+Math.floor(ne*y),re)&&q.set(ne,Q)}return q}static moduleSize(o,c){const h=c.getHeight(),y=c.getWidth();let x=o[0],E=o[1],d=!0,v=0;for(;x<y&&E<h;){if(d!==c.get(x,E)){if(++v===5)break;d=!d}x++,E++}if(x===y||E===h)throw new de;return(x-o[0])/7}}Tr.NO_POINTS=new Array;class Pt{PDF417Common(){}static getBitCountSum(o){return xt.sum(o)}static toIntArray(o){if(o==null||!o.length)return Pt.EMPTY_INT_ARRAY;const c=new Int32Array(o.length);let h=0;for(const y of o)c[h++]=y;return c}static getCodeword(o){const c=$.binarySearch(Pt.SYMBOL_TABLE,o&262143);return c<0?-1:(Pt.CODEWORD_TABLE[c]-1)%Pt.NUMBER_OF_CODEWORDS}}Pt.NUMBER_OF_CODEWORDS=929,Pt.MAX_CODEWORDS_IN_BARCODE=Pt.NUMBER_OF_CODEWORDS-1,Pt.MIN_ROWS_IN_BARCODE=3,Pt.MAX_ROWS_IN_BARCODE=90,Pt.MODULES_IN_CODEWORD=17,Pt.MODULES_IN_STOP_PATTERN=18,Pt.BARS_IN_MODULE=8,Pt.EMPTY_INT_ARRAY=new Int32Array([]),Pt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Pt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class za{constructor(o,c){this.bits=o,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class Lt{static detectMultiple(o,c,h){let y=o.getBlackMatrix(),x=Lt.detect(h,y);return x.length||(y=y.clone(),y.rotate180(),x=Lt.detect(h,y)),new za(y,x)}static detect(o,c){const h=new Array;let y=0,x=0,E=!1;for(;y<c.getHeight();){const d=Lt.findVertices(c,y,x);if(d[0]==null&&d[3]==null){if(!E)break;E=!1,x=0;for(const v of h)v[1]!=null&&(y=Math.trunc(Math.max(y,v[1].getY()))),v[3]!=null&&(y=Math.max(y,Math.trunc(v[3].getY())));y+=Lt.ROW_STEP;continue}if(E=!0,h.push(d),!o)break;d[2]!=null?(x=Math.trunc(d[2].getX()),y=Math.trunc(d[2].getY())):(x=Math.trunc(d[4].getX()),y=Math.trunc(d[4].getY()))}return h}static findVertices(o,c,h){const y=o.getHeight(),x=o.getWidth(),E=new Array(8);return Lt.copyToResult(E,Lt.findRowsWithPattern(o,y,x,c,h,Lt.START_PATTERN),Lt.INDEXES_START_PATTERN),E[4]!=null&&(h=Math.trunc(E[4].getX()),c=Math.trunc(E[4].getY())),Lt.copyToResult(E,Lt.findRowsWithPattern(o,y,x,c,h,Lt.STOP_PATTERN),Lt.INDEXES_STOP_PATTERN),E}static copyToResult(o,c,h){for(let y=0;y<h.length;y++)o[h[y]]=c[y]}static findRowsWithPattern(o,c,h,y,x,E){const d=new Array(4);let v=!1;const A=new Int32Array(E.length);for(;y<c;y+=Lt.ROW_STEP){let P=Lt.findGuardPattern(o,x,y,h,!1,E,A);if(P!=null){for(;y>0;){const k=Lt.findGuardPattern(o,x,--y,h,!1,E,A);if(k!=null)P=k;else{y++;break}}d[0]=new mt(P[0],y),d[1]=new mt(P[1],y),v=!0;break}}let I=y+1;if(v){let P=0,k=Int32Array.from([Math.trunc(d[0].getX()),Math.trunc(d[1].getX())]);for(;I<c;I++){const F=Lt.findGuardPattern(o,k[0],I,h,!1,E,A);if(F!=null&&Math.abs(k[0]-F[0])<Lt.MAX_PATTERN_DRIFT&&Math.abs(k[1]-F[1])<Lt.MAX_PATTERN_DRIFT)k=F,P=0;else{if(P>Lt.SKIPPED_ROW_COUNT_MAX)break;P++}}I-=P+1,d[2]=new mt(k[0],I),d[3]=new mt(k[1],I)}return I-y<Lt.BARCODE_MIN_HEIGHT&&$.fill(d,null),d}static findGuardPattern(o,c,h,y,x,E,d){$.fillWithin(d,0,d.length,0);let v=c,A=0;for(;o.get(v,h)&&v>0&&A++<Lt.MAX_PIXEL_DRIFT;)v--;let I=v,P=0,k=E.length;for(let F=x;I<y;I++)if(o.get(I,h)!==F)d[P]++;else{if(P===k-1){if(Lt.patternMatchVariance(d,E,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE)return new Int32Array([v,I]);v+=d[0]+d[1],M.arraycopy(d,2,d,0,P-1),d[P-1]=0,d[P]=0,P--}else P++;d[P]=1,F=!F}return P===k-1&&Lt.patternMatchVariance(d,E,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE?new Int32Array([v,I-1]):null}static patternMatchVariance(o,c,h){let y=o.length,x=0,E=0;for(let A=0;A<y;A++)x+=o[A],E+=c[A];if(x<E)return 1/0;let d=x/E;h*=d;let v=0;for(let A=0;A<y;A++){let I=o[A],P=c[A]*d,k=I>P?I-P:P-I;if(k>h)return 1/0;v+=k}return v/x}}Lt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Lt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Lt.MAX_AVG_VARIANCE=.42,Lt.MAX_INDIVIDUAL_VARIANCE=.8,Lt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Lt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Lt.MAX_PIXEL_DRIFT=3,Lt.MAX_PATTERN_DRIFT=5,Lt.SKIPPED_ROW_COUNT_MAX=25,Lt.ROW_STEP=5,Lt.BARCODE_MIN_HEIGHT=10;class xn{constructor(o,c){if(c.length===0)throw new _;this.field=o;let h=c.length;if(h>1&&c[0]===0){let y=1;for(;y<h&&c[y]===0;)y++;y===h?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(h-y),M.arraycopy(c,y,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);if(o===1){let y=0;for(let x of this.coefficients)y=this.field.add(y,x);return y}let c=this.coefficients[0],h=this.coefficients.length;for(let y=1;y<h;y++)c=this.field.add(this.field.multiply(o,c),this.coefficients[y]);return c}add(o){if(!this.field.equals(o.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let c=this.coefficients,h=o.coefficients;if(c.length>h.length){let E=c;c=h,h=E}let y=new Int32Array(h.length),x=h.length-c.length;M.arraycopy(h,0,y,0,x);for(let E=x;E<h.length;E++)y[E]=this.field.add(c[E-x],h[E]);return new xn(this.field,y)}subtract(o){if(!this.field.equals(o.field))throw new _("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof xn?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new xn(this.field,new Int32Array([0]));let c=this.coefficients,h=c.length,y=o.coefficients,x=y.length,E=new Int32Array(h+x-1);for(let d=0;d<h;d++){let v=c[d];for(let A=0;A<x;A++)E[d+A]=this.field.add(E[d+A],this.field.multiply(v,y[A]))}return new xn(this.field,E)}negative(){let o=this.coefficients.length,c=new Int32Array(o);for(let h=0;h<o;h++)c[h]=this.field.subtract(0,this.coefficients[h]);return new xn(this.field,c)}multiplyScalar(o){if(o===0)return new xn(this.field,new Int32Array([0]));if(o===1)return this;let c=this.coefficients.length,h=new Int32Array(c);for(let y=0;y<c;y++)h[y]=this.field.multiply(this.coefficients[y],o);return new xn(this.field,h)}multiplyByMonomial(o,c){if(o<0)throw new _;if(c===0)return new xn(this.field,new Int32Array([0]));let h=this.coefficients.length,y=new Int32Array(h+o);for(let x=0;x<h;x++)y[x]=this.field.multiply(this.coefficients[x],c);return new xn(this.field,y)}toString(){let o=new ee;for(let c=this.getDegree();c>=0;c--){let h=this.getCoefficient(c);h!==0&&(h<0?(o.append(" - "),h=-h):o.length()>0&&o.append(" + "),(c===0||h!==1)&&o.append(h),c!==0&&(c===1?o.append("x"):(o.append("x^"),o.append(c))))}return o.toString()}}class Do{add(o,c){return(o+c)%this.modulus}subtract(o,c){return(this.modulus+o-c)%this.modulus}exp(o){return this.expTable[o]}log(o){if(o===0)throw new _;return this.logTable[o]}inverse(o){if(o===0)throw new Fe;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,c){return o===0||c===0?0:this.expTable[(this.logTable[o]+this.logTable[c])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class sn extends Do{constructor(o,c){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let h=1;for(let y=0;y<o;y++)this.expTable[y]=h,h=h*c%o;for(let y=0;y<o-1;y++)this.logTable[this.expTable[y]]=y;this.zero=new xn(this,new Int32Array([0])),this.one=new xn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,c){if(o<0)throw new _;if(c===0)return this.zero;let h=new Int32Array(o+1);return h[0]=c,new xn(this,h)}}sn.PDF417_GF=new sn(Pt.NUMBER_OF_CODEWORDS,3);class Ea{constructor(){this.field=sn.PDF417_GF}decode(o,c,h){let y=new xn(this.field,o),x=new Int32Array(c),E=!1;for(let q=c;q>0;q--){let Q=y.evaluateAt(this.field.exp(q));x[c-q]=Q,Q!==0&&(E=!0)}if(!E)return 0;let d=this.field.getOne();if(h!=null)for(const q of h){let Q=this.field.exp(o.length-1-q),re=new xn(this.field,new Int32Array([this.field.subtract(0,Q),1]));d=d.multiply(re)}let v=new xn(this.field,x),A=this.runEuclideanAlgorithm(this.field.buildMonomial(c,1),v,c),I=A[0],P=A[1],k=this.findErrorLocations(I),F=this.findErrorMagnitudes(P,I,k);for(let q=0;q<k.length;q++){let Q=o.length-1-this.field.log(k[q]);if(Q<0)throw N.getChecksumInstance();o[Q]=this.field.subtract(o[Q],F[q])}return k.length}runEuclideanAlgorithm(o,c,h){if(o.getDegree()<c.getDegree()){let k=o;o=c,c=k}let y=o,x=c,E=this.field.getZero(),d=this.field.getOne();for(;x.getDegree()>=Math.round(h/2);){let k=y,F=E;if(y=x,E=d,y.isZero())throw N.getChecksumInstance();x=k;let q=this.field.getZero(),Q=y.getCoefficient(y.getDegree()),re=this.field.inverse(Q);for(;x.getDegree()>=y.getDegree()&&!x.isZero();){let ne=x.getDegree()-y.getDegree(),le=this.field.multiply(x.getCoefficient(x.getDegree()),re);q=q.add(this.field.buildMonomial(ne,le)),x=x.subtract(y.multiplyByMonomial(ne,le))}d=q.multiply(E).subtract(F).negative()}let v=d.getCoefficient(0);if(v===0)throw N.getChecksumInstance();let A=this.field.inverse(v),I=d.multiply(A),P=x.multiply(A);return[I,P]}findErrorLocations(o){let c=o.getDegree(),h=new Int32Array(c),y=0;for(let x=1;x<this.field.getSize()&&y<c;x++)o.evaluateAt(x)===0&&(h[y]=this.field.inverse(x),y++);if(y!==c)throw N.getChecksumInstance();return h}findErrorMagnitudes(o,c,h){let y=c.getDegree(),x=new Int32Array(y);for(let A=1;A<=y;A++)x[y-A]=this.field.multiply(A,c.getCoefficient(A));let E=new xn(this.field,x),d=h.length,v=new Int32Array(d);for(let A=0;A<d;A++){let I=this.field.inverse(h[A]),P=this.field.subtract(0,o.evaluateAt(I)),k=this.field.inverse(E.evaluateAt(I));v[A]=this.field.multiply(P,k)}return v}}class Ua{constructor(o,c,h,y,x){o instanceof Ua?this.constructor_2(o):this.constructor_1(o,c,h,y,x)}constructor_1(o,c,h,y,x){const E=c==null||h==null,d=y==null||x==null;if(E&&d)throw new de;E?(c=new mt(0,y.getY()),h=new mt(0,x.getY())):d&&(y=new mt(o.getWidth()-1,c.getY()),x=new mt(o.getWidth()-1,h.getY())),this.image=o,this.topLeft=c,this.bottomLeft=h,this.topRight=y,this.bottomRight=x,this.minX=Math.trunc(Math.min(c.getX(),h.getX())),this.maxX=Math.trunc(Math.max(y.getX(),x.getX())),this.minY=Math.trunc(Math.min(c.getY(),y.getY())),this.maxY=Math.trunc(Math.max(h.getY(),x.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,c){return o==null?c:c==null?o:new Ua(o.image,o.topLeft,o.bottomLeft,c.topRight,c.bottomRight)}addMissingRows(o,c,h){let y=this.topLeft,x=this.bottomLeft,E=this.topRight,d=this.bottomRight;if(o>0){let v=h?this.topLeft:this.topRight,A=Math.trunc(v.getY()-o);A<0&&(A=0);let I=new mt(v.getX(),A);h?y=I:E=I}if(c>0){let v=h?this.bottomLeft:this.bottomRight,A=Math.trunc(v.getY()+c);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);let I=new mt(v.getX(),A);h?x=I:d=I}return new Ua(this.image,y,x,E,d)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class zs{constructor(o,c,h,y){this.columnCount=o,this.errorCorrectionLevel=y,this.rowCountUpperPart=c,this.rowCountLowerPart=h,this.rowCount=c+h}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Aa{constructor(){this.buffer=""}static form(o,c){let h=-1;function y(E,d,v,A,I,P){if(E==="%%")return"%";if(c[++h]===void 0)return;E=A?parseInt(A.substr(1)):void 0;let k=I?parseInt(I.substr(1)):void 0,F;switch(P){case"s":F=c[h];break;case"c":F=c[h][0];break;case"f":F=parseFloat(c[h]).toFixed(E);break;case"p":F=parseFloat(c[h]).toPrecision(E);break;case"e":F=parseFloat(c[h]).toExponential(E);break;case"x":F=parseInt(c[h]).toString(k||16);break;case"d":F=parseFloat(parseInt(c[h],k||10).toPrecision(E)).toFixed(0);break}F=typeof F=="object"?JSON.stringify(F):(+F).toString(k);let q=parseInt(v),Q=v&&v[0]+""=="0"?"0":" ";for(;F.length<q;)F=d!==void 0?F+Q:Q+F;return F}let x=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(x,y)}format(o,...c){this.buffer+=Aa.form(o,c)}toString(){return this.buffer}}class Sa{constructor(o){this.boundingBox=new Ua(o),this.codewords=new Array(o.getMaxY()-o.getMinY()+1)}getCodewordNearby(o){let c=this.getCodeword(o);if(c!=null)return c;for(let h=1;h<Sa.MAX_NEARBY_DISTANCE;h++){let y=this.imageRowToCodewordIndex(o)-h;if(y>=0&&(c=this.codewords[y],c!=null)||(y=this.imageRowToCodewordIndex(o)+h,y<this.codewords.length&&(c=this.codewords[y],c!=null)))return c}return null}imageRowToCodewordIndex(o){return o-this.boundingBox.getMinY()}setCodeword(o,c){this.codewords[this.imageRowToCodewordIndex(o)]=c}getCodeword(o){return this.codewords[this.imageRowToCodewordIndex(o)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const o=new Aa;let c=0;for(const h of this.codewords){if(h==null){o.format("%3d:    |   %n",c++);continue}o.format("%3d: %3d|%3d%n",c++,h.getRowNumber(),h.getValue())}return o.toString()}}Sa.MAX_NEARBY_DISTANCE=5;class ra{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let c=this.values.get(o);c==null&&(c=0),c++,this.values.set(o,c)}getValue(){let o=-1,c=new Array;for(const[h,y]of this.values.entries()){const x={getKey:()=>h,getValue:()=>y};x.getValue()>o?(o=x.getValue(),c=[],c.push(x.getKey())):x.getValue()===o&&c.push(x.getKey())}return Pt.toIntArray(c)}getConfidence(o){return this.values.get(o)}}class qa extends Sa{constructor(o,c){super(o),this._isLeft=c}setRowNumbers(){for(let o of this.getCodewords())o?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let c=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(c,o);let h=this.getBoundingBox(),y=this._isLeft?h.getTopLeft():h.getTopRight(),x=this._isLeft?h.getBottomLeft():h.getBottomRight(),E=this.imageRowToCodewordIndex(Math.trunc(y.getY())),d=this.imageRowToCodewordIndex(Math.trunc(x.getY())),v=-1,A=1,I=0;for(let P=E;P<d;P++){if(c[P]==null)continue;let k=c[P],F=k.getRowNumber()-v;if(F===0)I++;else if(F===1)A=Math.max(A,I),I=1,v=k.getRowNumber();else if(F<0||k.getRowNumber()>=o.getRowCount()||F>P)c[P]=null;else{let q;A>2?q=(A-2)*F:q=F;let Q=q>=P;for(let re=1;re<=q&&!Q;re++)Q=c[P-re]!=null;Q?c[P]=null:(v=k.getRowNumber(),I=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let c=new Int32Array(o.getRowCount());for(let h of this.getCodewords())if(h!=null){let y=h.getRowNumber();if(y>=c.length)continue;c[y]++}return c}adjustIncompleteIndicatorColumnRowNumbers(o){let c=this.getBoundingBox(),h=this._isLeft?c.getTopLeft():c.getTopRight(),y=this._isLeft?c.getBottomLeft():c.getBottomRight(),x=this.imageRowToCodewordIndex(Math.trunc(h.getY())),E=this.imageRowToCodewordIndex(Math.trunc(y.getY())),d=this.getCodewords(),v=-1;for(let A=x;A<E;A++){if(d[A]==null)continue;let I=d[A];I.setRowNumberAsRowIndicatorColumn();let P=I.getRowNumber()-v;P===0||(P===1?v=I.getRowNumber():I.getRowNumber()>=o.getRowCount()?d[A]=null:v=I.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),c=new ra,h=new ra,y=new ra,x=new ra;for(let d of o){if(d==null)continue;d.setRowNumberAsRowIndicatorColumn();let v=d.getValue()%30,A=d.getRowNumber();switch(this._isLeft||(A+=2),A%3){case 0:h.setValue(v*3+1);break;case 1:x.setValue(v/3),y.setValue(v%3);break;case 2:c.setValue(v+1);break}}if(c.getValue().length===0||h.getValue().length===0||y.getValue().length===0||x.getValue().length===0||c.getValue()[0]<1||h.getValue()[0]+y.getValue()[0]<Pt.MIN_ROWS_IN_BARCODE||h.getValue()[0]+y.getValue()[0]>Pt.MAX_ROWS_IN_BARCODE)return null;let E=new zs(c.getValue()[0],h.getValue()[0],y.getValue()[0],x.getValue()[0]);return this.removeIncorrectCodewords(o,E),E}removeIncorrectCodewords(o,c){for(let h=0;h<o.length;h++){let y=o[h];if(o[h]==null)continue;let x=y.getValue()%30,E=y.getRowNumber();if(E>c.getRowCount()){o[h]=null;continue}switch(this._isLeft||(E+=2),E%3){case 0:x*3+1!==c.getRowCountUpperPart()&&(o[h]=null);break;case 1:(Math.trunc(x/3)!==c.getErrorCorrectionLevel()||x%3!==c.getRowCountLowerPart())&&(o[h]=null);break;case 2:x+1!==c.getColumnCount()&&(o[h]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ir{constructor(o,c){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=c,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o=Pt.MAX_CODEWORDS_IN_BARCODE,c;do c=o,o=this.adjustRowNumbersAndGetCount();while(o>0&&o<c);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(o===0)return 0;for(let c=1;c<this.barcodeColumnCount+1;c++){let h=this.detectionResultColumns[c].getCodewords();for(let y=0;y<h.length;y++)h[y]!=null&&(h[y].hasValidRowNumber()||this.adjustRowNumbers(c,y,h))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let o=this.detectionResultColumns[0].getCodewords(),c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<o.length;h++)if(o[h]!=null&&c[h]!=null&&o[h].getRowNumber()===c[h].getRowNumber())for(let y=1;y<=this.barcodeColumnCount;y++){let x=this.detectionResultColumns[y].getCodewords()[h];x!=null&&(x.setRowNumber(o[h].getRowNumber()),x.hasValidRowNumber()||(this.detectionResultColumns[y].getCodewords()[h]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let o=0,c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<c.length;h++){if(c[h]==null)continue;let y=c[h].getRowNumber(),x=0;for(let E=this.barcodeColumnCount+1;E>0&&x<this.ADJUST_ROW_NUMBER_SKIP;E--){let d=this.detectionResultColumns[E].getCodewords()[h];d!=null&&(x=ir.adjustRowNumberIfValid(y,x,d),d.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let o=0,c=this.detectionResultColumns[0].getCodewords();for(let h=0;h<c.length;h++){if(c[h]==null)continue;let y=c[h].getRowNumber(),x=0;for(let E=1;E<this.barcodeColumnCount+1&&x<this.ADJUST_ROW_NUMBER_SKIP;E++){let d=this.detectionResultColumns[E].getCodewords()[h];d!=null&&(x=ir.adjustRowNumberIfValid(y,x,d),d.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,c,h){return h==null||h.hasValidRowNumber()||(h.isValidRowNumber(o)?(h.setRowNumber(o),c=0):++c),c}adjustRowNumbers(o,c,h){if(!this.detectionResultColumns[o-1])return;let y=h[c],x=this.detectionResultColumns[o-1].getCodewords(),E=x;this.detectionResultColumns[o+1]!=null&&(E=this.detectionResultColumns[o+1].getCodewords());let d=new Array(14);d[2]=x[c],d[3]=E[c],c>0&&(d[0]=h[c-1],d[4]=x[c-1],d[5]=E[c-1]),c>1&&(d[8]=h[c-2],d[10]=x[c-2],d[11]=E[c-2]),c<h.length-1&&(d[1]=h[c+1],d[6]=x[c+1],d[7]=E[c+1]),c<h.length-2&&(d[9]=h[c+2],d[12]=x[c+2],d[13]=E[c+2]);for(let v of d)if(ir.adjustRowNumber(y,v))return}static adjustRowNumber(o,c){return c==null?!1:c.hasValidRowNumber()&&c.getBucket()===o.getBucket()?(o.setRowNumber(c.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,c){this.detectionResultColumns[o]=c}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];o==null&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let c=new Aa;for(let h=0;h<o.getCodewords().length;h++){c.format("CW %3d:",h);for(let y=0;y<this.barcodeColumnCount+2;y++){if(this.detectionResultColumns[y]==null){c.format("    |   ");continue}let x=this.detectionResultColumns[y].getCodewords()[h];if(x==null){c.format("    |   ");continue}c.format(" %3d|%3d",x.getRowNumber(),x.getValue())}c.format("%n")}return c.toString()}}class Ta{constructor(o,c,h,y){this.rowNumber=Ta.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(o),this.endX=Math.trunc(c),this.bucket=Math.trunc(h),this.value=Math.trunc(y)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(o){return o!==Ta.BARCODE_ROW_UNKNOWN&&this.bucket===o%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(o){this.rowNumber=o}toString(){return this.rowNumber+"|"+this.value}}Ta.BARCODE_ROW_UNKNOWN=-1;class Ir{static initialize(){for(let o=0;o<Pt.SYMBOL_TABLE.length;o++){let c=Pt.SYMBOL_TABLE[o],h=c&1;for(let y=0;y<Pt.BARS_IN_MODULE;y++){let x=0;for(;(c&1)===h;)x+=1,c>>=1;h=c&1,Ir.RATIOS_TABLE[o]||(Ir.RATIOS_TABLE[o]=new Array(Pt.BARS_IN_MODULE)),Ir.RATIOS_TABLE[o][Pt.BARS_IN_MODULE-y-1]=Math.fround(x/Pt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let c=Ir.getDecodedCodewordValue(Ir.sampleBitCounts(o));return c!==-1?c:Ir.getClosestDecodedValue(o)}static sampleBitCounts(o){let c=xt.sum(o),h=new Int32Array(Pt.BARS_IN_MODULE),y=0,x=0;for(let E=0;E<Pt.MODULES_IN_CODEWORD;E++){let d=c/(2*Pt.MODULES_IN_CODEWORD)+E*c/Pt.MODULES_IN_CODEWORD;x+o[y]<=d&&(x+=o[y],y++),h[y]++}return h}static getDecodedCodewordValue(o){let c=Ir.getBitValue(o);return Pt.getCodeword(c)===-1?-1:c}static getBitValue(o){let c=0;for(let h=0;h<o.length;h++)for(let y=0;y<o[h];y++)c=c<<1|(h%2===0?1:0);return Math.trunc(c)}static getClosestDecodedValue(o){let c=xt.sum(o),h=new Array(Pt.BARS_IN_MODULE);if(c>1)for(let E=0;E<h.length;E++)h[E]=Math.fround(o[E]/c);let y=Mn.MAX_VALUE,x=-1;this.bSymbolTableReady||Ir.initialize();for(let E=0;E<Ir.RATIOS_TABLE.length;E++){let d=0,v=Ir.RATIOS_TABLE[E];for(let A=0;A<Pt.BARS_IN_MODULE;A++){let I=Math.fround(v[A]-h[A]);if(d+=Math.fround(I*I),d>=y)break}d<y&&(y=d,x=Pt.SYMBOL_TABLE[E])}return x}}Ir.bSymbolTableReady=!1,Ir.RATIOS_TABLE=new Array(Pt.SYMBOL_TABLE.length).map(Y=>new Array(Pt.BARS_IN_MODULE));class Ga{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class Us{static parseLong(o,c=void 0){return parseInt(o,c)}}class ss extends p{}ss.kind="NullPointerException";class el{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,c,h){if(o==null)throw new ss;if(c<0||c>o.length||h<0||c+h>o.length||c+h<0)throw new L;if(h===0)return;for(let y=0;y<h;y++)this.write(o[c+y])}flush(){}close(){}}class ps extends p{}class tl extends el{constructor(o=32){if(super(),this.count=0,o<0)throw new _("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let h=this.buf.length<<1;if(h-o<0&&(h=o),h<0){if(o<0)throw new ps;h=K.MAX_VALUE}this.buf=$.copyOfUint8Array(this.buf,h)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,c,h){if(c<0||c>o.length||h<0||c+h-o.length>0)throw new L;this.ensureCapacity(this.count+h),M.arraycopy(o,c,this.buf,this.count,h),this.count+=h}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return $.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var En;(function(Y){Y[Y.ALPHA=0]="ALPHA",Y[Y.LOWER=1]="LOWER",Y[Y.MIXED=2]="MIXED",Y[Y.PUNCT=3]="PUNCT",Y[Y.ALPHA_SHIFT=4]="ALPHA_SHIFT",Y[Y.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(En||(En={}));function ys(){if(typeof window<"u")return window.BigInt||null;if(typeof Vg<"u")return Vg.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let uo;function ia(Y){if(typeof uo>"u"&&(uo=ys()),uo===null)throw new Error("BigInt is not supported!");return uo(Y)}function vs(){let Y=[];Y[0]=ia(1);let o=ia(900);Y[1]=o;for(let c=2;c<16;c++)Y[c]=Y[c-1]*o;return Y}class ke{static decode(o,c){let h=new ee(""),y=H.ISO8859_1;h.enableDecoding(y);let x=1,E=o[x++],d=new Ga;for(;x<o[0];){switch(E){case ke.TEXT_COMPACTION_MODE_LATCH:x=ke.textCompaction(o,x,h);break;case ke.BYTE_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH_6:x=ke.byteCompaction(E,o,y,x,h);break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[x++]);break;case ke.NUMERIC_COMPACTION_MODE_LATCH:x=ke.numericCompaction(o,x,h);break;case ke.ECI_CHARSET:H.getCharacterSetECIByValue(o[x++]);break;case ke.ECI_GENERAL_PURPOSE:x+=2;break;case ke.ECI_USER_DEFINED:x++;break;case ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK:x=ke.decodeMacroBlock(o,x,d);break;case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ke.MACRO_PDF417_TERMINATOR:throw new V;default:x--,x=ke.textCompaction(o,x,h);break}if(x<o.length)E=o[x++];else throw V.getFormatInstance()}if(h.length()===0)throw V.getFormatInstance();let v=new Ne(null,h.toString(),null,c);return v.setOther(d),v}static decodeMacroBlock(o,c,h){if(c+ke.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw V.getFormatInstance();let y=new Int32Array(ke.NUMBER_OF_SEQUENCE_CODEWORDS);for(let d=0;d<ke.NUMBER_OF_SEQUENCE_CODEWORDS;d++,c++)y[d]=o[c];h.setSegmentIndex(K.parseInt(ke.decodeBase900toBase10(y,ke.NUMBER_OF_SEQUENCE_CODEWORDS)));let x=new ee;c=ke.textCompaction(o,c,x),h.setFileId(x.toString());let E=-1;for(o[c]===ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(E=c+1);c<o[0];)switch(o[c]){case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(c++,o[c]){case ke.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let d=new ee;c=ke.textCompaction(o,c+1,d),h.setFileName(d.toString());break;case ke.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let v=new ee;c=ke.textCompaction(o,c+1,v),h.setSender(v.toString());break;case ke.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let A=new ee;c=ke.textCompaction(o,c+1,A),h.setAddressee(A.toString());break;case ke.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let I=new ee;c=ke.numericCompaction(o,c+1,I),h.setSegmentCount(K.parseInt(I.toString()));break;case ke.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new ee;c=ke.numericCompaction(o,c+1,P),h.setTimestamp(Us.parseLong(P.toString()));break;case ke.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let k=new ee;c=ke.numericCompaction(o,c+1,k),h.setChecksum(K.parseInt(k.toString()));break;case ke.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let F=new ee;c=ke.numericCompaction(o,c+1,F),h.setFileSize(Us.parseLong(F.toString()));break;default:throw V.getFormatInstance()}break;case ke.MACRO_PDF417_TERMINATOR:c++,h.setLastSegment(!0);break;default:throw V.getFormatInstance()}if(E!==-1){let d=c-E;h.isLastSegment()&&d--,h.setOptionalData($.copyOfRange(o,E,E+d))}return c}static textCompaction(o,c,h){let y=new Int32Array((o[0]-c)*2),x=new Int32Array((o[0]-c)*2),E=0,d=!1;for(;c<o[0]&&!d;){let v=o[c++];if(v<ke.TEXT_COMPACTION_MODE_LATCH)y[E]=v/30,y[E+1]=v%30,E+=2;else switch(v){case ke.TEXT_COMPACTION_MODE_LATCH:y[E++]=ke.TEXT_COMPACTION_MODE_LATCH;break;case ke.BYTE_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH_6:case ke.NUMERIC_COMPACTION_MODE_LATCH:case ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ke.MACRO_PDF417_TERMINATOR:c--,d=!0;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y[E]=ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,v=o[c++],x[E]=v,E++;break}}return ke.decodeTextCompaction(y,x,E,h),c}static decodeTextCompaction(o,c,h,y){let x=En.ALPHA,E=En.ALPHA,d=0;for(;d<h;){let v=o[d],A="";switch(x){case En.ALPHA:if(v<26)A=String.fromCharCode(65+v);else switch(v){case 26:A=" ";break;case ke.LL:x=En.LOWER;break;case ke.ML:x=En.MIXED;break;case ke.PS:E=x,x=En.PUNCT_SHIFT;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(c[d]);break;case ke.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break;case En.LOWER:if(v<26)A=String.fromCharCode(97+v);else switch(v){case 26:A=" ";break;case ke.AS:E=x,x=En.ALPHA_SHIFT;break;case ke.ML:x=En.MIXED;break;case ke.PS:E=x,x=En.PUNCT_SHIFT;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(c[d]);break;case ke.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break;case En.MIXED:if(v<ke.PL)A=ke.MIXED_CHARS[v];else switch(v){case ke.PL:x=En.PUNCT;break;case 26:A=" ";break;case ke.LL:x=En.LOWER;break;case ke.AL:x=En.ALPHA;break;case ke.PS:E=x,x=En.PUNCT_SHIFT;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(c[d]);break;case ke.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break;case En.PUNCT:if(v<ke.PAL)A=ke.PUNCT_CHARS[v];else switch(v){case ke.PAL:x=En.ALPHA;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(c[d]);break;case ke.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break;case En.ALPHA_SHIFT:if(x=E,v<26)A=String.fromCharCode(65+v);else switch(v){case 26:A=" ";break;case ke.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break;case En.PUNCT_SHIFT:if(x=E,v<ke.PAL)A=ke.PUNCT_CHARS[v];else switch(v){case ke.PAL:x=En.ALPHA;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(c[d]);break;case ke.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break}A!==""&&y.append(A),d++}}static byteCompaction(o,c,h,y,x){let E=new tl,d=0,v=0,A=!1;switch(o){case ke.BYTE_COMPACTION_MODE_LATCH:let I=new Int32Array(6),P=c[y++];for(;y<c[0]&&!A;)switch(I[d++]=P,v=900*v+P,P=c[y++],P){case ke.TEXT_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH:case ke.NUMERIC_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH_6:case ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ke.MACRO_PDF417_TERMINATOR:y--,A=!0;break;default:if(d%5===0&&d>0){for(let k=0;k<6;++k)E.write(Number(ia(v)>>ia(8*(5-k))));v=0,d=0}break}y===c[0]&&P<ke.TEXT_COMPACTION_MODE_LATCH&&(I[d++]=P);for(let k=0;k<d;k++)E.write(I[k]);break;case ke.BYTE_COMPACTION_MODE_LATCH_6:for(;y<c[0]&&!A;){let k=c[y++];if(k<ke.TEXT_COMPACTION_MODE_LATCH)d++,v=900*v+k;else switch(k){case ke.TEXT_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH:case ke.NUMERIC_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH_6:case ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ke.MACRO_PDF417_TERMINATOR:y--,A=!0;break}if(d%5===0&&d>0){for(let F=0;F<6;++F)E.write(Number(ia(v)>>ia(8*(5-F))));v=0,d=0}}break}return x.append(ae.decode(E.toByteArray(),h)),y}static numericCompaction(o,c,h){let y=0,x=!1,E=new Int32Array(ke.MAX_NUMERIC_CODEWORDS);for(;c<o[0]&&!x;){let d=o[c++];if(c===o[0]&&(x=!0),d<ke.TEXT_COMPACTION_MODE_LATCH)E[y]=d,y++;else switch(d){case ke.TEXT_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH_6:case ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ke.MACRO_PDF417_TERMINATOR:c--,x=!0;break}(y%ke.MAX_NUMERIC_CODEWORDS===0||d===ke.NUMERIC_COMPACTION_MODE_LATCH||x)&&y>0&&(h.append(ke.decodeBase900toBase10(E,y)),y=0)}return c}static decodeBase900toBase10(o,c){let h=ia(0);for(let x=0;x<c;x++)h+=ke.EXP900[c-x-1]*ia(o[x]);let y=h.toString();if(y.charAt(0)!=="1")throw new V;return y.substring(1)}}ke.TEXT_COMPACTION_MODE_LATCH=900,ke.BYTE_COMPACTION_MODE_LATCH=901,ke.NUMERIC_COMPACTION_MODE_LATCH=902,ke.BYTE_COMPACTION_MODE_LATCH_6=924,ke.ECI_USER_DEFINED=925,ke.ECI_GENERAL_PURPOSE=926,ke.ECI_CHARSET=927,ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ke.MACRO_PDF417_TERMINATOR=922,ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ke.MAX_NUMERIC_CODEWORDS=15,ke.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ke.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ke.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ke.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ke.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ke.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ke.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ke.PL=25,ke.LL=27,ke.AS=27,ke.ML=28,ke.AL=28,ke.PS=29,ke.PAL=29,ke.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ke.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ke.EXP900=ys()?vs():[],ke.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Yt{constructor(){}static decode(o,c,h,y,x,E,d){let v=new Ua(o,c,h,y,x),A=null,I=null,P;for(let q=!0;;q=!1){if(c!=null&&(A=Yt.getRowIndicatorColumn(o,v,c,!0,E,d)),y!=null&&(I=Yt.getRowIndicatorColumn(o,v,y,!1,E,d)),P=Yt.merge(A,I),P==null)throw de.getNotFoundInstance();let Q=P.getBoundingBox();if(q&&Q!=null&&(Q.getMinY()<v.getMinY()||Q.getMaxY()>v.getMaxY()))v=Q;else break}P.setBoundingBox(v);let k=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,A),P.setDetectionResultColumn(k,I);let F=A!=null;for(let q=1;q<=k;q++){let Q=F?q:k-q;if(P.getDetectionResultColumn(Q)!==void 0)continue;let re;Q===0||Q===k?re=new qa(v,Q===0):re=new Sa(v),P.setDetectionResultColumn(Q,re);let ne=-1,le=ne;for(let fe=v.getMinY();fe<=v.getMaxY();fe++){if(ne=Yt.getStartColumn(P,Q,fe,F),ne<0||ne>v.getMaxX()){if(le===-1)continue;ne=le}let ue=Yt.detectCodeword(o,v.getMinX(),v.getMaxX(),F,ne,fe,E,d);ue!=null&&(re.setCodeword(fe,ue),le=ne,E=Math.min(E,ue.getWidth()),d=Math.max(d,ue.getWidth()))}}return Yt.createDecoderResult(P)}static merge(o,c){if(o==null&&c==null)return null;let h=Yt.getBarcodeMetadata(o,c);if(h==null)return null;let y=Ua.merge(Yt.adjustBoundingBox(o),Yt.adjustBoundingBox(c));return new ir(h,y)}static adjustBoundingBox(o){if(o==null)return null;let c=o.getRowHeights();if(c==null)return null;let h=Yt.getMax(c),y=0;for(let d of c)if(y+=h-d,d>0)break;let x=o.getCodewords();for(let d=0;y>0&&x[d]==null;d++)y--;let E=0;for(let d=c.length-1;d>=0&&(E+=h-c[d],!(c[d]>0));d--);for(let d=x.length-1;E>0&&x[d]==null;d--)E--;return o.getBoundingBox().addMissingRows(y,E,o.isLeft())}static getMax(o){let c=-1;for(let h of o)c=Math.max(c,h);return c}static getBarcodeMetadata(o,c){let h;if(o==null||(h=o.getBarcodeMetadata())==null)return c==null?null:c.getBarcodeMetadata();let y;return c==null||(y=c.getBarcodeMetadata())==null?h:h.getColumnCount()!==y.getColumnCount()&&h.getErrorCorrectionLevel()!==y.getErrorCorrectionLevel()&&h.getRowCount()!==y.getRowCount()?null:h}static getRowIndicatorColumn(o,c,h,y,x,E){let d=new qa(c,y);for(let v=0;v<2;v++){let A=v===0?1:-1,I=Math.trunc(Math.trunc(h.getX()));for(let P=Math.trunc(Math.trunc(h.getY()));P<=c.getMaxY()&&P>=c.getMinY();P+=A){let k=Yt.detectCodeword(o,0,o.getWidth(),y,I,P,x,E);k!=null&&(d.setCodeword(P,k),y?I=k.getStartX():I=k.getEndX())}}return d}static adjustCodewordCount(o,c){let h=c[0][1],y=h.getValue(),x=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-Yt.getNumberOfECCodeWords(o.getBarcodeECLevel());if(y.length===0){if(x<1||x>Pt.MAX_CODEWORDS_IN_BARCODE)throw de.getNotFoundInstance();h.setValue(x)}else y[0]!==x&&h.setValue(x)}static createDecoderResult(o){let c=Yt.createBarcodeMatrix(o);Yt.adjustCodewordCount(o,c);let h=new Array,y=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),x=[],E=new Array;for(let v=0;v<o.getBarcodeRowCount();v++)for(let A=0;A<o.getBarcodeColumnCount();A++){let I=c[v][A+1].getValue(),P=v*o.getBarcodeColumnCount()+A;I.length===0?h.push(P):I.length===1?y[P]=I[0]:(E.push(P),x.push(I))}let d=new Array(x.length);for(let v=0;v<d.length;v++)d[v]=x[v];return Yt.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),y,Pt.toIntArray(h),Pt.toIntArray(E),d)}static createDecoderResultFromAmbiguousValues(o,c,h,y,x){let E=new Int32Array(y.length),d=100;for(;d-- >0;){for(let v=0;v<E.length;v++)c[y[v]]=x[v][E[v]];try{return Yt.decodeCodewords(c,o,h)}catch(v){if(!(v instanceof N))throw v}if(E.length===0)throw N.getChecksumInstance();for(let v=0;v<E.length;v++)if(E[v]<x[v].length-1){E[v]++;break}else if(E[v]=0,v===E.length-1)throw N.getChecksumInstance()}throw N.getChecksumInstance()}static createBarcodeMatrix(o){let c=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let y=0;y<c.length;y++)for(let x=0;x<c[y].length;x++)c[y][x]=new ra;let h=0;for(let y of o.getDetectionResultColumns()){if(y!=null){for(let x of y.getCodewords())if(x!=null){let E=x.getRowNumber();if(E>=0){if(E>=c.length)continue;c[E][h].setValue(x.getValue())}}}h++}return c}static isValidBarcodeColumn(o,c){return c>=0&&c<=o.getBarcodeColumnCount()+1}static getStartColumn(o,c,h,y){let x=y?1:-1,E=null;if(Yt.isValidBarcodeColumn(o,c-x)&&(E=o.getDetectionResultColumn(c-x).getCodeword(h)),E!=null)return y?E.getEndX():E.getStartX();if(E=o.getDetectionResultColumn(c).getCodewordNearby(h),E!=null)return y?E.getStartX():E.getEndX();if(Yt.isValidBarcodeColumn(o,c-x)&&(E=o.getDetectionResultColumn(c-x).getCodewordNearby(h)),E!=null)return y?E.getEndX():E.getStartX();let d=0;for(;Yt.isValidBarcodeColumn(o,c-x);){c-=x;for(let v of o.getDetectionResultColumn(c).getCodewords())if(v!=null)return(y?v.getEndX():v.getStartX())+x*d*(v.getEndX()-v.getStartX());d++}return y?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,c,h,y,x,E,d,v){x=Yt.adjustCodewordStartColumn(o,c,h,y,x,E);let A=Yt.getModuleBitCount(o,c,h,y,x,E);if(A==null)return null;let I,P=xt.sum(A);if(y)I=x+P;else{for(let q=0;q<A.length/2;q++){let Q=A[q];A[q]=A[A.length-1-q],A[A.length-1-q]=Q}I=x,x=I-P}if(!Yt.checkCodewordSkew(P,d,v))return null;let k=Ir.getDecodedValue(A),F=Pt.getCodeword(k);return F===-1?null:new Ta(x,I,Yt.getCodewordBucketNumber(k),F)}static getModuleBitCount(o,c,h,y,x,E){let d=x,v=new Int32Array(8),A=0,I=y?1:-1,P=y;for(;(y?d<h:d>=c)&&A<v.length;)o.get(d,E)===P?(v[A]++,d+=I):(A++,P=!P);return A===v.length||d===(y?h:c)&&A===v.length-1?v:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,c,h,y,x,E){let d=x,v=y?-1:1;for(let A=0;A<2;A++){for(;(y?d>=c:d<h)&&y===o.get(d,E);){if(Math.abs(x-d)>Yt.CODEWORD_SKEW_SIZE)return x;d+=v}v=-v,y=!y}return d}static checkCodewordSkew(o,c,h){return c-Yt.CODEWORD_SKEW_SIZE<=o&&o<=h+Yt.CODEWORD_SKEW_SIZE}static decodeCodewords(o,c,h){if(o.length===0)throw V.getFormatInstance();let y=1<<c+1,x=Yt.correctErrors(o,h,y);Yt.verifyCodewordCount(o,y);let E=ke.decode(o,""+c);return E.setErrorsCorrected(x),E.setErasures(h.length),E}static correctErrors(o,c,h){if(c!=null&&c.length>h/2+Yt.MAX_ERRORS||h<0||h>Yt.MAX_EC_CODEWORDS)throw N.getChecksumInstance();return Yt.errorCorrection.decode(o,h,c)}static verifyCodewordCount(o,c){if(o.length<4)throw V.getFormatInstance();let h=o[0];if(h>o.length)throw V.getFormatInstance();if(h===0)if(c<o.length)o[0]=o.length-c;else throw V.getFormatInstance()}static getBitCountForCodeword(o){let c=new Int32Array(8),h=0,y=c.length-1;for(;!((o&1)!==h&&(h=o&1,y--,y<0));)c[y]++,o>>=1;return c}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return Yt.getCodewordBucketNumber(Yt.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let c=new Aa;for(let h=0;h<o.length;h++){c.format("Row %2d: ",h);for(let y=0;y<o[h].length;y++){let x=o[h][y];x.getValue().length===0?c.format("        ",null):c.format("%4d(%2d)",x.getValue()[0],x.getConfidence(x.getValue()[0]))}c.format("%n")}return c.toString()}}Yt.CODEWORD_SKEW_SIZE=2,Yt.MAX_ERRORS=3,Yt.MAX_EC_CODEWORDS=512,Yt.errorCorrection=new Ea;class Dr{decode(o,c=null){let h=Dr.decode(o,c,!1);if(h==null||h.length===0||h[0]==null)throw de.getNotFoundInstance();return h[0]}decodeMultiple(o,c=null){try{return Dr.decode(o,c,!0)}catch(h){throw h instanceof V||h instanceof N?de.getNotFoundInstance():h}}static decode(o,c,h){const y=new Array,x=Lt.detectMultiple(o,c,h);for(const E of x.getPoints()){const d=Yt.decode(x.getBits(),E[4],E[5],E[6],E[7],Dr.getMinCodewordWidth(E),Dr.getMaxCodewordWidth(E)),v=new ze(d.getText(),d.getRawBytes(),void 0,E,$e.PDF_417);v.putMetadata(lt.ERROR_CORRECTION_LEVEL,d.getECLevel());const A=d.getOther();A!=null&&v.putMetadata(lt.PDF417_EXTRA_METADATA,A),y.push(v)}return y.map(E=>E)}static getMaxWidth(o,c){return o==null||c==null?0:Math.trunc(Math.abs(o.getX()-c.getX()))}static getMinWidth(o,c){return o==null||c==null?K.MAX_VALUE:Math.trunc(Math.abs(o.getX()-c.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(Dr.getMaxWidth(o[0],o[4]),Dr.getMaxWidth(o[6],o[2])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN),Math.max(Dr.getMaxWidth(o[1],o[5]),Dr.getMaxWidth(o[7],o[3])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(Dr.getMinWidth(o[0],o[4]),Dr.getMinWidth(o[6],o[2])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN),Math.min(Dr.getMinWidth(o[1],o[5]),Dr.getMinWidth(o[7],o[3])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ha extends p{}Ha.kind="ReaderException";class ko{constructor(o,c){this.verbose=o===!0,c&&this.setHints(c)}decode(o,c){return c&&this.setHints(c),this.decodeInternal(o)}decodeWithState(o){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;const c=!r(o)&&o.get(J.TRY_HARDER)===!0,h=r(o)?null:o.get(J.POSSIBLE_FORMATS),y=new Array;if(!r(h)){const x=h.some(E=>E===$e.UPC_A||E===$e.UPC_E||E===$e.EAN_13||E===$e.EAN_8||E===$e.CODABAR||E===$e.CODE_39||E===$e.CODE_93||E===$e.CODE_128||E===$e.ITF||E===$e.RSS_14||E===$e.RSS_EXPANDED);x&&!c&&y.push(new wi(o,this.verbose)),h.includes($e.QR_CODE)&&y.push(new Tr),h.includes($e.DATA_MATRIX)&&y.push(new qi),h.includes($e.AZTEC)&&y.push(new hs),h.includes($e.PDF_417)&&y.push(new Dr),x&&c&&y.push(new wi(o,this.verbose))}y.length===0&&(c||y.push(new wi(o,this.verbose)),y.push(new Tr),y.push(new qi),y.push(new hs),y.push(new Dr),c&&y.push(new wi(o,this.verbose))),this.readers=y}reset(){if(this.readers!==null)for(const o of this.readers)o.reset()}decodeInternal(o){if(this.readers===null)throw new Ha("No readers where selected, nothing can be read.");for(const c of this.readers)try{return c.decode(o,this.hints)}catch(h){if(h instanceof Ha)continue}throw new de("No MultiFormat Readers were able to detect the code.")}}class Ka extends Ye{constructor(o=null,c=500){const h=new ko;h.setHints(o),super(h,c)}decodeBitmap(o){return this.reader.decodeWithState(o)}}class nl extends Ye{constructor(o=500){super(new Dr,o)}}class rl extends Ye{constructor(o=500){super(new Tr,o)}}var Br;(function(Y){Y[Y.ERROR_CORRECTION=0]="ERROR_CORRECTION",Y[Y.CHARACTER_SET=1]="CHARACTER_SET",Y[Y.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",Y[Y.MIN_SIZE=3]="MIN_SIZE",Y[Y.MAX_SIZE=4]="MAX_SIZE",Y[Y.MARGIN=5]="MARGIN",Y[Y.PDF417_COMPACT=6]="PDF417_COMPACT",Y[Y.PDF417_COMPACTION=7]="PDF417_COMPACTION",Y[Y.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",Y[Y.AZTEC_LAYERS=9]="AZTEC_LAYERS",Y[Y.QR_VERSION=10]="QR_VERSION"})(Br||(Br={}));var er=Br;class aa{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new Et(o,Int32Array.from([1])))}buildGenerator(o){const c=this.cachedGenerators;if(o>=c.length){let h=c[c.length-1];const y=this.field;for(let x=c.length;x<=o;x++){const E=h.multiply(new Et(y,Int32Array.from([1,y.exp(x-1+y.getGeneratorBase())])));c.push(E),h=E}}return c[o]}encode(o,c){if(c===0)throw new _("No error correction bytes");const h=o.length-c;if(h<=0)throw new _("No data bytes provided");const y=this.buildGenerator(c),x=new Int32Array(h);M.arraycopy(o,0,x,0,h);let E=new Et(this.field,x);E=E.multiplyByMonomial(c,1);const v=E.divide(y)[1].getCoefficients(),A=c-v.length;for(let I=0;I<A;I++)o[h+I]=0;M.arraycopy(v,0,o,h+A,v.length)}}class dn{constructor(){}static applyMaskPenaltyRule1(o){return dn.applyMaskPenaltyRule1Internal(o,!0)+dn.applyMaskPenaltyRule1Internal(o,!1)}static applyMaskPenaltyRule2(o){let c=0;const h=o.getArray(),y=o.getWidth(),x=o.getHeight();for(let E=0;E<x-1;E++){const d=h[E];for(let v=0;v<y-1;v++){const A=d[v];A===d[v+1]&&A===h[E+1][v]&&A===h[E+1][v+1]&&c++}}return dn.N2*c}static applyMaskPenaltyRule3(o){let c=0;const h=o.getArray(),y=o.getWidth(),x=o.getHeight();for(let E=0;E<x;E++)for(let d=0;d<y;d++){const v=h[E];d+6<y&&v[d]===1&&v[d+1]===0&&v[d+2]===1&&v[d+3]===1&&v[d+4]===1&&v[d+5]===0&&v[d+6]===1&&(dn.isWhiteHorizontal(v,d-4,d)||dn.isWhiteHorizontal(v,d+7,d+11))&&c++,E+6<x&&h[E][d]===1&&h[E+1][d]===0&&h[E+2][d]===1&&h[E+3][d]===1&&h[E+4][d]===1&&h[E+5][d]===0&&h[E+6][d]===1&&(dn.isWhiteVertical(h,d,E-4,E)||dn.isWhiteVertical(h,d,E+7,E+11))&&c++}return c*dn.N3}static isWhiteHorizontal(o,c,h){c=Math.max(c,0),h=Math.min(h,o.length);for(let y=c;y<h;y++)if(o[y]===1)return!1;return!0}static isWhiteVertical(o,c,h,y){h=Math.max(h,0),y=Math.min(y,o.length);for(let x=h;x<y;x++)if(o[x][c]===1)return!1;return!0}static applyMaskPenaltyRule4(o){let c=0;const h=o.getArray(),y=o.getWidth(),x=o.getHeight();for(let v=0;v<x;v++){const A=h[v];for(let I=0;I<y;I++)A[I]===1&&c++}const E=o.getHeight()*o.getWidth();return Math.floor(Math.abs(c*2-E)*10/E)*dn.N4}static getDataMaskBit(o,c,h){let y,x;switch(o){case 0:y=h+c&1;break;case 1:y=h&1;break;case 2:y=c%3;break;case 3:y=(h+c)%3;break;case 4:y=Math.floor(h/2)+Math.floor(c/3)&1;break;case 5:x=h*c,y=(x&1)+x%3;break;case 6:x=h*c,y=(x&1)+x%3&1;break;case 7:x=h*c,y=x%3+(h+c&1)&1;break;default:throw new _("Invalid mask pattern: "+o)}return y===0}static applyMaskPenaltyRule1Internal(o,c){let h=0;const y=c?o.getHeight():o.getWidth(),x=c?o.getWidth():o.getHeight(),E=o.getArray();for(let d=0;d<y;d++){let v=0,A=-1;for(let I=0;I<x;I++){const P=c?E[d][I]:E[I][d];P===A?v++:(v>=5&&(h+=dn.N1+(v-5)),v=1,A=P)}v>=5&&(h+=dn.N1+(v-5))}return h}}dn.N1=3,dn.N2=3,dn.N3=40,dn.N4=10;class xs{constructor(o,c){this.width=o,this.height=c;const h=new Array(c);for(let y=0;y!==c;y++)h[y]=new Uint8Array(o);this.bytes=h}getHeight(){return this.height}getWidth(){return this.width}get(o,c){return this.bytes[c][o]}getArray(){return this.bytes}setNumber(o,c,h){this.bytes[c][o]=h}setBoolean(o,c,h){this.bytes[c][o]=h?1:0}clear(o){for(const c of this.bytes)$.fill(c,o)}equals(o){if(!(o instanceof xs))return!1;const c=o;if(this.width!==c.width||this.height!==c.height)return!1;for(let h=0,y=this.height;h<y;++h){const x=this.bytes[h],E=c.bytes[h];for(let d=0,v=this.width;d<v;++d)if(x[d]!==E[d])return!1}return!0}toString(){const o=new ee;for(let c=0,h=this.height;c<h;++c){const y=this.bytes[c];for(let x=0,E=this.width;x<E;++x)switch(y[x]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ");break}o.append(`
`)}return o.toString()}}class os{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const o=new ee;return o.append(`<<
`),o.append(" mode: "),o.append(this.mode?this.mode.toString():"null"),o.append(`
 ecLevel: `),o.append(this.ecLevel?this.ecLevel.toString():"null"),o.append(`
 version: `),o.append(this.version?this.version.toString():"null"),o.append(`
 maskPattern: `),o.append(this.maskPattern.toString()),this.matrix?(o.append(`
 matrix:
`),o.append(this.matrix.toString())):o.append(`
 matrix: null
`),o.append(`>>
`),o.toString()}setMode(o){this.mode=o}setECLevel(o){this.ecLevel=o}setVersion(o){this.version=o}setMaskPattern(o){this.maskPattern=o}setMatrix(o){this.matrix=o}static isValidMaskPattern(o){return o>=0&&o<os.NUM_MASK_PATTERNS}}os.NUM_MASK_PATTERNS=8;class pn extends p{}pn.kind="WriterException";class S{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,c,h,y,x){S.clearMatrix(x),S.embedBasicPatterns(h,x),S.embedTypeInfo(c,y,x),S.maybeEmbedVersionInfo(h,x),S.embedDataBits(o,y,x)}static embedBasicPatterns(o,c){S.embedPositionDetectionPatternsAndSeparators(c),S.embedDarkDotAtLeftBottomCorner(c),S.maybeEmbedPositionAdjustmentPatterns(o,c),S.embedTimingPatterns(c)}static embedTypeInfo(o,c,h){const y=new X;S.makeTypeInfoBits(o,c,y);for(let x=0,E=y.getSize();x<E;++x){const d=y.get(y.getSize()-1-x),v=S.TYPE_INFO_COORDINATES[x],A=v[0],I=v[1];if(h.setBoolean(A,I,d),x<8){const P=h.getWidth()-x-1;h.setBoolean(P,8,d)}else{const k=h.getHeight()-7+(x-8);h.setBoolean(8,k,d)}}}static maybeEmbedVersionInfo(o,c){if(o.getVersionNumber()<7)return;const h=new X;S.makeVersionInfoBits(o,h);let y=17;for(let x=0;x<6;++x)for(let E=0;E<3;++E){const d=h.get(y);y--,c.setBoolean(x,c.getHeight()-11+E,d),c.setBoolean(c.getHeight()-11+E,x,d)}}static embedDataBits(o,c,h){let y=0,x=-1,E=h.getWidth()-1,d=h.getHeight()-1;for(;E>0;){for(E===6&&(E-=1);d>=0&&d<h.getHeight();){for(let v=0;v<2;++v){const A=E-v;if(!S.isEmpty(h.get(A,d)))continue;let I;y<o.getSize()?(I=o.get(y),++y):I=!1,c!==255&&dn.getDataMaskBit(c,A,d)&&(I=!I),h.setBoolean(A,d,I)}d+=x}x=-x,d+=x,E-=2}if(y!==o.getSize())throw new pn("Not all bits consumed: "+y+"/"+o.getSize())}static findMSBSet(o){return 32-K.numberOfLeadingZeros(o)}static calculateBCHCode(o,c){if(c===0)throw new _("0 polynomial");const h=S.findMSBSet(c);for(o<<=h-1;S.findMSBSet(o)>=h;)o^=c<<S.findMSBSet(o)-h;return o}static makeTypeInfoBits(o,c,h){if(!os.isValidMaskPattern(c))throw new pn("Invalid mask pattern");const y=o.getBits()<<3|c;h.appendBits(y,5);const x=S.calculateBCHCode(y,S.TYPE_INFO_POLY);h.appendBits(x,10);const E=new X;if(E.appendBits(S.TYPE_INFO_MASK_PATTERN,15),h.xor(E),h.getSize()!==15)throw new pn("should not happen but we got: "+h.getSize())}static makeVersionInfoBits(o,c){c.appendBits(o.getVersionNumber(),6);const h=S.calculateBCHCode(o.getVersionNumber(),S.VERSION_INFO_POLY);if(c.appendBits(h,12),c.getSize()!==18)throw new pn("should not happen but we got: "+c.getSize())}static isEmpty(o){return o===255}static embedTimingPatterns(o){for(let c=8;c<o.getWidth()-8;++c){const h=(c+1)%2;S.isEmpty(o.get(c,6))&&o.setNumber(c,6,h),S.isEmpty(o.get(6,c))&&o.setNumber(6,c,h)}}static embedDarkDotAtLeftBottomCorner(o){if(o.get(8,o.getHeight()-8)===0)throw new pn;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,c,h){for(let y=0;y<8;++y){if(!S.isEmpty(h.get(o+y,c)))throw new pn;h.setNumber(o+y,c,0)}}static embedVerticalSeparationPattern(o,c,h){for(let y=0;y<7;++y){if(!S.isEmpty(h.get(o,c+y)))throw new pn;h.setNumber(o,c+y,0)}}static embedPositionAdjustmentPattern(o,c,h){for(let y=0;y<5;++y){const x=S.POSITION_ADJUSTMENT_PATTERN[y];for(let E=0;E<5;++E)h.setNumber(o+E,c+y,x[E])}}static embedPositionDetectionPattern(o,c,h){for(let y=0;y<7;++y){const x=S.POSITION_DETECTION_PATTERN[y];for(let E=0;E<7;++E)h.setNumber(o+E,c+y,x[E])}}static embedPositionDetectionPatternsAndSeparators(o){const c=S.POSITION_DETECTION_PATTERN[0].length;S.embedPositionDetectionPattern(0,0,o),S.embedPositionDetectionPattern(o.getWidth()-c,0,o),S.embedPositionDetectionPattern(0,o.getWidth()-c,o);const h=8;S.embedHorizontalSeparationPattern(0,h-1,o),S.embedHorizontalSeparationPattern(o.getWidth()-h,h-1,o),S.embedHorizontalSeparationPattern(0,o.getWidth()-h,o);const y=7;S.embedVerticalSeparationPattern(y,0,o),S.embedVerticalSeparationPattern(o.getHeight()-y-1,0,o),S.embedVerticalSeparationPattern(y,o.getHeight()-y,o)}static maybeEmbedPositionAdjustmentPatterns(o,c){if(o.getVersionNumber()<2)return;const h=o.getVersionNumber()-1,y=S.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[h];for(let x=0,E=y.length;x!==E;x++){const d=y[x];if(d>=0)for(let v=0;v!==E;v++){const A=y[v];A>=0&&S.isEmpty(c.get(A,d))&&S.embedPositionAdjustmentPattern(A-2,d-2,c)}}}}S.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),S.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),S.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),S.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),S.VERSION_INFO_POLY=7973,S.TYPE_INFO_POLY=1335,S.TYPE_INFO_MASK_PATTERN=21522;class B{constructor(o,c){this.dataBytes=o,this.errorCorrectionBytes=c}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class G{constructor(){}static calculateMaskPenalty(o){return dn.applyMaskPenaltyRule1(o)+dn.applyMaskPenaltyRule2(o)+dn.applyMaskPenaltyRule3(o)+dn.applyMaskPenaltyRule4(o)}static encode(o,c,h=null){let y=G.DEFAULT_BYTE_MODE_ENCODING;const x=h!==null&&h.get(er.CHARACTER_SET)!==void 0;x&&(y=h.get(er.CHARACTER_SET).toString());const E=this.chooseMode(o,y),d=new X;if(E===Nt.BYTE&&(x||G.DEFAULT_BYTE_MODE_ENCODING!==y)){const fe=H.getCharacterSetECIByName(y);fe!==void 0&&this.appendECI(fe,d)}this.appendModeInfo(E,d);const v=new X;this.appendBytes(o,E,v,y);let A;if(h!==null&&h.get(er.QR_VERSION)!==void 0){const fe=Number.parseInt(h.get(er.QR_VERSION).toString(),10);A=_t.getVersionForNumber(fe);const ue=this.calculateBitsNeeded(E,d,v,A);if(!this.willFit(ue,A,c))throw new pn("Data too big for requested version")}else A=this.recommendVersion(c,E,d,v);const I=new X;I.appendBitArray(d);const P=E===Nt.BYTE?v.getSizeInBytes():o.length;this.appendLengthInfo(P,A,E,I),I.appendBitArray(v);const k=A.getECBlocksForLevel(c),F=A.getTotalCodewords()-k.getTotalECCodewords();this.terminateBits(F,I);const q=this.interleaveWithECBytes(I,A.getTotalCodewords(),F,k.getNumBlocks()),Q=new os;Q.setECLevel(c),Q.setMode(E),Q.setVersion(A);const re=A.getDimensionForVersion(),ne=new xs(re,re),le=this.chooseMaskPattern(q,c,A,ne);return Q.setMaskPattern(le),S.buildMatrix(q,c,A,le,ne),Q.setMatrix(ne),Q}static recommendVersion(o,c,h,y){const x=this.calculateBitsNeeded(c,h,y,_t.getVersionForNumber(1)),E=this.chooseVersion(x,o),d=this.calculateBitsNeeded(c,h,y,E);return this.chooseVersion(d,o)}static calculateBitsNeeded(o,c,h,y){return c.getSize()+o.getCharacterCountBits(y)+h.getSize()}static getAlphanumericCode(o){return o<G.ALPHANUMERIC_TABLE.length?G.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,c=null){if(H.SJIS.getName()===c&&this.isOnlyDoubleByteKanji(o))return Nt.KANJI;let h=!1,y=!1;for(let x=0,E=o.length;x<E;++x){const d=o.charAt(x);if(G.isDigit(d))h=!0;else if(this.getAlphanumericCode(d.charCodeAt(0))!==-1)y=!0;else return Nt.BYTE}return y?Nt.ALPHANUMERIC:h?Nt.NUMERIC:Nt.BYTE}static isOnlyDoubleByteKanji(o){let c;try{c=ae.encode(o,H.SJIS)}catch{return!1}const h=c.length;if(h%2!==0)return!1;for(let y=0;y<h;y+=2){const x=c[y]&255;if((x<129||x>159)&&(x<224||x>235))return!1}return!0}static chooseMaskPattern(o,c,h,y){let x=Number.MAX_SAFE_INTEGER,E=-1;for(let d=0;d<os.NUM_MASK_PATTERNS;d++){S.buildMatrix(o,c,h,d,y);let v=this.calculateMaskPenalty(y);v<x&&(x=v,E=d)}return E}static chooseVersion(o,c){for(let h=1;h<=40;h++){const y=_t.getVersionForNumber(h);if(G.willFit(o,y,c))return y}throw new pn("Data too big")}static willFit(o,c,h){const y=c.getTotalCodewords(),E=c.getECBlocksForLevel(h).getTotalECCodewords(),d=y-E,v=(o+7)/8;return d>=v}static terminateBits(o,c){const h=o*8;if(c.getSize()>h)throw new pn("data bits cannot fit in the QR Code"+c.getSize()+" > "+h);for(let E=0;E<4&&c.getSize()<h;++E)c.appendBit(!1);const y=c.getSize()&7;if(y>0)for(let E=y;E<8;E++)c.appendBit(!1);const x=o-c.getSizeInBytes();for(let E=0;E<x;++E)c.appendBits((E&1)===0?236:17,8);if(c.getSize()!==h)throw new pn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,c,h,y,x,E){if(y>=h)throw new pn("Block ID too large");const d=o%h,v=h-d,A=Math.floor(o/h),I=A+1,P=Math.floor(c/h),k=P+1,F=A-P,q=I-k;if(F!==q)throw new pn("EC bytes mismatch");if(h!==v+d)throw new pn("RS blocks mismatch");if(o!==(P+F)*v+(k+q)*d)throw new pn("Total bytes mismatch");y<v?(x[0]=P,E[0]=F):(x[0]=k,E[0]=q)}static interleaveWithECBytes(o,c,h,y){if(o.getSizeInBytes()!==h)throw new pn("Number of bits and data bytes does not match");let x=0,E=0,d=0;const v=new Array;for(let I=0;I<y;++I){const P=new Int32Array(1),k=new Int32Array(1);G.getNumDataBytesAndNumECBytesForBlockID(c,h,y,I,P,k);const F=P[0],q=new Uint8Array(F);o.toBytes(8*x,q,0,F);const Q=G.generateECBytes(q,k[0]);v.push(new B(q,Q)),E=Math.max(E,F),d=Math.max(d,Q.length),x+=P[0]}if(h!==x)throw new pn("Data bytes does not match offset");const A=new X;for(let I=0;I<E;++I)for(const P of v){const k=P.getDataBytes();I<k.length&&A.appendBits(k[I],8)}for(let I=0;I<d;++I)for(const P of v){const k=P.getErrorCorrectionBytes();I<k.length&&A.appendBits(k[I],8)}if(c!==A.getSizeInBytes())throw new pn("Interleaving error: "+c+" and "+A.getSizeInBytes()+" differ.");return A}static generateECBytes(o,c){const h=o.length,y=new Int32Array(h+c);for(let E=0;E<h;E++)y[E]=o[E]&255;new aa(Rt.QR_CODE_FIELD_256).encode(y,c);const x=new Uint8Array(c);for(let E=0;E<c;E++)x[E]=y[h+E];return x}static appendModeInfo(o,c){c.appendBits(o.getBits(),4)}static appendLengthInfo(o,c,h,y){const x=h.getCharacterCountBits(c);if(o>=1<<x)throw new pn(o+" is bigger than "+((1<<x)-1));y.appendBits(o,x)}static appendBytes(o,c,h,y){switch(c){case Nt.NUMERIC:G.appendNumericBytes(o,h);break;case Nt.ALPHANUMERIC:G.appendAlphanumericBytes(o,h);break;case Nt.BYTE:G.append8BitBytes(o,h,y);break;case Nt.KANJI:G.appendKanjiBytes(o,h);break;default:throw new pn("Invalid mode: "+c)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){const c=G.getDigit(o);return c>=0&&c<=9}static appendNumericBytes(o,c){const h=o.length;let y=0;for(;y<h;){const x=G.getDigit(o.charAt(y));if(y+2<h){const E=G.getDigit(o.charAt(y+1)),d=G.getDigit(o.charAt(y+2));c.appendBits(x*100+E*10+d,10),y+=3}else if(y+1<h){const E=G.getDigit(o.charAt(y+1));c.appendBits(x*10+E,7),y+=2}else c.appendBits(x,4),y++}}static appendAlphanumericBytes(o,c){const h=o.length;let y=0;for(;y<h;){const x=G.getAlphanumericCode(o.charCodeAt(y));if(x===-1)throw new pn;if(y+1<h){const E=G.getAlphanumericCode(o.charCodeAt(y+1));if(E===-1)throw new pn;c.appendBits(x*45+E,11),y+=2}else c.appendBits(x,6),y++}}static append8BitBytes(o,c,h){let y;try{y=ae.encode(o,h)}catch(x){throw new pn(x)}for(let x=0,E=y.length;x!==E;x++){const d=y[x];c.appendBits(d,8)}}static appendKanjiBytes(o,c){let h;try{h=ae.encode(o,H.SJIS)}catch(x){throw new pn(x)}const y=h.length;for(let x=0;x<y;x+=2){const E=h[x]&255,d=h[x+1]&255,v=E<<8&4294967295|d;let A=-1;if(v>=33088&&v<=40956?A=v-33088:v>=57408&&v<=60351&&(A=v-49472),A===-1)throw new pn("Invalid byte sequence");const I=(A>>8)*192+(A&255);c.appendBits(I,13)}}static appendECI(o,c){c.appendBits(Nt.ECI.getBits(),4),c.appendBits(o.getValue(),8)}}G.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),G.DEFAULT_BYTE_MODE_ENCODING=H.UTF8.getName();class ie{write(o,c,h,y=null){if(o.length===0)throw new _("Found empty contents");if(c<0||h<0)throw new _("Requested dimensions are too small: "+c+"x"+h);let x=$t.L,E=ie.QUIET_ZONE_SIZE;y!==null&&(y.get(er.ERROR_CORRECTION)!==void 0&&(x=$t.fromString(y.get(er.ERROR_CORRECTION).toString())),y.get(er.MARGIN)!==void 0&&(E=Number.parseInt(y.get(er.MARGIN).toString(),10)));const d=G.encode(o,x,y);return this.renderResult(d,c,h,E)}writeToDom(o,c,h,y,x=null){typeof o=="string"&&(o=document.querySelector(o));const E=this.write(c,h,y,x);o&&o.appendChild(E)}renderResult(o,c,h,y){const x=o.getMatrix();if(x===null)throw new nt;const E=x.getWidth(),d=x.getHeight(),v=E+y*2,A=d+y*2,I=Math.max(c,v),P=Math.max(h,A),k=Math.min(Math.floor(I/v),Math.floor(P/A)),F=Math.floor((I-E*k)/2),q=Math.floor((P-d*k)/2),Q=this.createSVGElement(I,P);for(let re=0,ne=q;re<d;re++,ne+=k)for(let le=0,fe=F;le<E;le++,fe+=k)if(x.get(le,re)===1){const ue=this.createSvgRectElement(fe,ne,k,k);Q.appendChild(ue)}return Q}createSVGElement(o,c){const h=document.createElementNS(ie.SVG_NS,"svg");return h.setAttributeNS(null,"height",o.toString()),h.setAttributeNS(null,"width",c.toString()),h}createSvgRectElement(o,c,h,y){const x=document.createElementNS(ie.SVG_NS,"rect");return x.setAttributeNS(null,"x",o.toString()),x.setAttributeNS(null,"y",c.toString()),x.setAttributeNS(null,"height",h.toString()),x.setAttributeNS(null,"width",y.toString()),x.setAttributeNS(null,"fill","#000000"),x}}ie.QUIET_ZONE_SIZE=4,ie.SVG_NS="http://www.w3.org/2000/svg";class Ae{encode(o,c,h,y,x){if(o.length===0)throw new _("Found empty contents");if(c!==$e.QR_CODE)throw new _("Can only encode QR_CODE, but got "+c);if(h<0||y<0)throw new _(`Requested dimensions are too small: ${h}x${y}`);let E=$t.L,d=Ae.QUIET_ZONE_SIZE;x!==null&&(x.get(er.ERROR_CORRECTION)!==void 0&&(E=$t.fromString(x.get(er.ERROR_CORRECTION).toString())),x.get(er.MARGIN)!==void 0&&(d=Number.parseInt(x.get(er.MARGIN).toString(),10)));const v=G.encode(o,E,x);return Ae.renderResult(v,h,y,d)}static renderResult(o,c,h,y){const x=o.getMatrix();if(x===null)throw new nt;const E=x.getWidth(),d=x.getHeight(),v=E+y*2,A=d+y*2,I=Math.max(c,v),P=Math.max(h,A),k=Math.min(Math.floor(I/v),Math.floor(P/A)),F=Math.floor((I-E*k)/2),q=Math.floor((P-d*k)/2),Q=new xe(I,P);for(let re=0,ne=q;re<d;re++,ne+=k)for(let le=0,fe=F;le<E;le++,fe+=k)x.get(le,re)===1&&Q.setRegion(fe,ne,k,k);return Q}}Ae.QUIET_ZONE_SIZE=4;class Le{encode(o,c,h,y,x){let E;if(c===$e.QR_CODE)E=new Ae;else throw new _("No encoder available for format "+c);return E.encode(o,c,h,y,x)}}class at extends qe{constructor(o,c,h,y,x,E,d,v){if(super(E,d),this.yuvData=o,this.dataWidth=c,this.dataHeight=h,this.left=y,this.top=x,y+E>c||x+d>h)throw new _("Crop rectangle does not fit within image data.");v&&this.reverseHorizontal(E,d)}getRow(o,c){if(o<0||o>=this.getHeight())throw new _("Requested row is outside the image: "+o);const h=this.getWidth();(c==null||c.length<h)&&(c=new Uint8ClampedArray(h));const y=(o+this.top)*this.dataWidth+this.left;return M.arraycopy(this.yuvData,y,c,0,h),c}getMatrix(){const o=this.getWidth(),c=this.getHeight();if(o===this.dataWidth&&c===this.dataHeight)return this.yuvData;const h=o*c,y=new Uint8ClampedArray(h);let x=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return M.arraycopy(this.yuvData,x,y,0,h),y;for(let E=0;E<c;E++){const d=E*o;M.arraycopy(this.yuvData,x,y,d,o),x+=this.dataWidth}return y}isCropSupported(){return!0}crop(o,c,h,y){return new at(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+c,h,y,!1)}renderThumbnail(){const o=this.getWidth()/at.THUMBNAIL_SCALE_FACTOR,c=this.getHeight()/at.THUMBNAIL_SCALE_FACTOR,h=new Int32Array(o*c),y=this.yuvData;let x=this.top*this.dataWidth+this.left;for(let E=0;E<c;E++){const d=E*o;for(let v=0;v<o;v++){const A=y[x+v*at.THUMBNAIL_SCALE_FACTOR]&255;h[d+v]=4278190080|A*65793}x+=this.dataWidth*at.THUMBNAIL_SCALE_FACTOR}return h}getThumbnailWidth(){return this.getWidth()/at.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/at.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(o,c){const h=this.yuvData;for(let y=0,x=this.top*this.dataWidth+this.left;y<c;y++,x+=this.dataWidth){const E=x+o/2;for(let d=x,v=x+o-1;d<E;d++,v--){const A=h[d];h[d]=h[v],h[v]=A}}}invert(){return new Ve(this)}}at.THUMBNAIL_SCALE_FACTOR=2;class qt extends qe{constructor(o,c,h,y,x,E,d){if(super(c,h),this.dataWidth=y,this.dataHeight=x,this.left=E,this.top=d,o.BYTES_PER_ELEMENT===4){const v=c*h,A=new Uint8ClampedArray(v);for(let I=0;I<v;I++){const P=o[I],k=P>>16&255,F=P>>7&510,q=P&255;A[I]=(k+F+q)/4&255}this.luminances=A}else this.luminances=o;if(y===void 0&&(this.dataWidth=c),x===void 0&&(this.dataHeight=h),E===void 0&&(this.left=0),d===void 0&&(this.top=0),this.left+c>this.dataWidth||this.top+h>this.dataHeight)throw new _("Crop rectangle does not fit within image data.")}getRow(o,c){if(o<0||o>=this.getHeight())throw new _("Requested row is outside the image: "+o);const h=this.getWidth();(c==null||c.length<h)&&(c=new Uint8ClampedArray(h));const y=(o+this.top)*this.dataWidth+this.left;return M.arraycopy(this.luminances,y,c,0,h),c}getMatrix(){const o=this.getWidth(),c=this.getHeight();if(o===this.dataWidth&&c===this.dataHeight)return this.luminances;const h=o*c,y=new Uint8ClampedArray(h);let x=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return M.arraycopy(this.luminances,x,y,0,h),y;for(let E=0;E<c;E++){const d=E*o;M.arraycopy(this.luminances,x,y,d,o),x+=this.dataWidth}return y}isCropSupported(){return!0}crop(o,c,h,y){return new qt(this.luminances,h,y,this.dataWidth,this.dataHeight,this.left+o,this.top+c)}invert(){return new Ve(this)}}class kr extends H{static forName(o){return this.getCharacterSetECIByName(o)}}class bn{}bn.ISO_8859_1=H.ISO8859_1;class Un{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class Ia{static singletonList(o){return[o]}static min(o,c){return o.sort(c)[0]}}class Wa{constructor(o){this.previous=o}getPrevious(){return this.previous}}class di extends Wa{constructor(o,c,h){super(o),this.value=c,this.bitCount=h}appendTo(o,c){o.appendBits(this.value,this.bitCount)}add(o,c){return new di(this,o,c)}addBinaryShift(o,c){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new di(this,o,c)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+K.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class Ca extends di{constructor(o,c,h){super(o,0,0),this.binaryShiftStart=c,this.binaryShiftByteCount=h}appendTo(o,c){for(let h=0;h<this.binaryShiftByteCount;h++)(h===0||h===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):h===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(c[this.binaryShiftStart+h],8)}addBinaryShift(o,c){return new Ca(this,o,c)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function co(Y,o,c){return new Ca(Y,o,c)}function bs(Y,o,c){return new di(Y,o,c)}const Mo=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],qs=0,qu=1,Oa=2,Vl=3,$a=4,il=new di(null,0,0),jo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function qm(Y){for(let o of Y)$.fill(o,-1);return Y[qs][$a]=0,Y[qu][$a]=0,Y[qu][qs]=28,Y[Vl][$a]=0,Y[Oa][$a]=0,Y[Oa][qs]=15,Y}const zl=qm($.createInt32Array(6,6));class sa{constructor(o,c,h,y){this.token=o,this.mode=c,this.binaryShiftByteCount=h,this.bitCount=y}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,c){let h=this.bitCount,y=this.token;if(o!==this.mode){let E=jo[this.mode][o];y=bs(y,E&65535,E>>16),h+=E>>16}let x=o===Oa?4:5;return y=bs(y,c,x),new sa(y,o,0,h+x)}shiftAndAppend(o,c){let h=this.token,y=this.mode===Oa?4:5;return h=bs(h,zl[this.mode][o],y),h=bs(h,c,5),new sa(h,this.mode,0,this.bitCount+y+5)}addBinaryShiftChar(o){let c=this.token,h=this.mode,y=this.bitCount;if(this.mode===$a||this.mode===Oa){let d=jo[h][qs];c=bs(c,d&65535,d>>16),y+=d>>16,h=qs}let x=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,E=new sa(c,h,this.binaryShiftByteCount+1,y+x);return E.binaryShiftByteCount===2078&&(E=E.endBinaryShift(o+1)),E}endBinaryShift(o){if(this.binaryShiftByteCount===0)return this;let c=this.token;return c=co(c,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new sa(c,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let c=this.bitCount+(jo[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?c+=sa.calculateBinaryShiftCost(o)-sa.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(c+=10),c<=o.bitCount}toBitArray(o){let c=[];for(let y=this.endBinaryShift(o.length).token;y!==null;y=y.getPrevious())c.unshift(y);let h=new X;for(const y of c)y.appendTo(h,o);return h}toString(){return Z.format("%s bits=%d bytes=%d",Mo[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}sa.INITIAL_STATE=new sa(il,qs,0,0);function ws(Y){const o=Z.getCharCode(" "),c=Z.getCharCode("."),h=Z.getCharCode(",");Y[qs][o]=1;const y=Z.getCharCode("Z"),x=Z.getCharCode("A");for(let k=x;k<=y;k++)Y[qs][k]=k-x+2;Y[qu][o]=1;const E=Z.getCharCode("z"),d=Z.getCharCode("a");for(let k=d;k<=E;k++)Y[qu][k]=k-d+2;Y[Oa][o]=1;const v=Z.getCharCode("9"),A=Z.getCharCode("0");for(let k=A;k<=v;k++)Y[Oa][k]=k-A+2;Y[Oa][h]=12,Y[Oa][c]=13;const I=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let k=0;k<I.length;k++)Y[Vl][Z.getCharCode(I[k])]=k;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let k=0;k<P.length;k++)Z.getCharCode(P[k])>0&&(Y[$a][Z.getCharCode(P[k])]=k);return Y}const ar=ws($.createInt32Array(5,256));class _s{constructor(o){this.text=o}encode(){const o=Z.getCharCode(" "),c=Z.getCharCode(`
`);let h=Ia.singletonList(sa.INITIAL_STATE);for(let x=0;x<this.text.length;x++){let E,d=x+1<this.text.length?this.text[x+1]:0;switch(this.text[x]){case Z.getCharCode("\r"):E=d===c?2:0;break;case Z.getCharCode("."):E=d===o?3:0;break;case Z.getCharCode(","):E=d===o?4:0;break;case Z.getCharCode(":"):E=d===o?5:0;break;default:E=0}E>0?(h=_s.updateStateListForPair(h,x,E),x++):h=this.updateStateListForChar(h,x)}return Ia.min(h,(x,E)=>x.getBitCount()-E.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,c){const h=[];for(let y of o)this.updateStateForChar(y,c,h);return _s.simplifyStates(h)}updateStateForChar(o,c,h){let y=this.text[c]&255,x=ar[o.getMode()][y]>0,E=null;for(let d=0;d<=$a;d++){let v=ar[d][y];if(v>0){if(E==null&&(E=o.endBinaryShift(c)),!x||d===o.getMode()||d===Oa){const A=E.latchAndAppend(d,v);h.push(A)}if(!x&&zl[o.getMode()][d]>=0){const A=E.shiftAndAppend(d,v);h.push(A)}}}if(o.getBinaryShiftByteCount()>0||ar[o.getMode()][y]===0){let d=o.addBinaryShiftChar(c);h.push(d)}}static updateStateListForPair(o,c,h){const y=[];for(let x of o)this.updateStateForPair(x,c,h,y);return this.simplifyStates(y)}static updateStateForPair(o,c,h,y){let x=o.endBinaryShift(c);if(y.push(x.latchAndAppend($a,h)),o.getMode()!==$a&&y.push(x.shiftAndAppend($a,h)),h===3||h===4){let E=x.latchAndAppend(Oa,16-h).latchAndAppend(Oa,1);y.push(E)}if(o.getBinaryShiftByteCount()>0){let E=o.addBinaryShiftChar(c).addBinaryShiftChar(c+1);y.push(E)}}static simplifyStates(o){let c=[];for(const h of o){let y=!0;for(const x of c){if(x.isBetterThanOrEqualTo(h)){y=!1;break}h.isBetterThanOrEqualTo(x)&&(c=c.filter(E=>E!==x))}y&&c.push(h)}return c}}class on{constructor(){}static encodeBytes(o){return on.encode(o,on.DEFAULT_EC_PERCENT,on.DEFAULT_AZTEC_LAYERS)}static encode(o,c,h){let y=new _s(o).encode(),x=K.truncDivision(y.getSize()*c,100)+11,E=y.getSize()+x,d,v,A,I,P;if(h!==on.DEFAULT_AZTEC_LAYERS){if(d=h<0,v=Math.abs(h),v>(d?on.MAX_NB_BITS_COMPACT:on.MAX_NB_BITS))throw new _(Z.format("Illegal value %s for layers",h));A=on.totalBitsInLayer(v,d),I=on.WORD_SIZE[v];let ue=A-A%I;if(P=on.stuffBits(y,I),P.getSize()+x>ue)throw new _("Data to large for user specified layer");if(d&&P.getSize()>I*64)throw new _("Data to large for user specified layer")}else{I=0,P=null;for(let ue=0;;ue++){if(ue>on.MAX_NB_BITS)throw new _("Data too large for an Aztec code");if(d=ue<=3,v=d?ue+1:ue,A=on.totalBitsInLayer(v,d),E>A)continue;(P==null||I!==on.WORD_SIZE[v])&&(I=on.WORD_SIZE[v],P=on.stuffBits(y,I));let ge=A-A%I;if(!(d&&P.getSize()>I*64)&&P.getSize()+x<=ge)break}}let k=on.generateCheckWords(P,A,I),F=P.getSize()/I,q=on.generateModeMessage(d,v,F),Q=(d?11:14)+v*4,re=new Int32Array(Q),ne;if(d){ne=Q;for(let ue=0;ue<re.length;ue++)re[ue]=ue}else{ne=Q+1+2*K.truncDivision(K.truncDivision(Q,2)-1,15);let ue=K.truncDivision(Q,2),ge=K.truncDivision(ne,2);for(let he=0;he<ue;he++){let we=he+K.truncDivision(he,15);re[ue-he-1]=ge-we-1,re[ue+he]=ge+we+1}}let le=new xe(ne);for(let ue=0,ge=0;ue<v;ue++){let he=(v-ue)*4+(d?9:12);for(let we=0;we<he;we++){let Ce=we*2;for(let be=0;be<2;be++)k.get(ge+Ce+be)&&le.set(re[ue*2+be],re[ue*2+we]),k.get(ge+he*2+Ce+be)&&le.set(re[ue*2+we],re[Q-1-ue*2-be]),k.get(ge+he*4+Ce+be)&&le.set(re[Q-1-ue*2-be],re[Q-1-ue*2-we]),k.get(ge+he*6+Ce+be)&&le.set(re[Q-1-ue*2-we],re[ue*2+be])}ge+=he*8}if(on.drawModeMessage(le,d,ne,q),d)on.drawBullsEye(le,K.truncDivision(ne,2),5);else{on.drawBullsEye(le,K.truncDivision(ne,2),7);for(let ue=0,ge=0;ue<K.truncDivision(Q,2)-1;ue+=15,ge+=16)for(let he=K.truncDivision(ne,2)&1;he<ne;he+=2)le.set(K.truncDivision(ne,2)-ge,he),le.set(K.truncDivision(ne,2)+ge,he),le.set(he,K.truncDivision(ne,2)-ge),le.set(he,K.truncDivision(ne,2)+ge)}let fe=new Un;return fe.setCompact(d),fe.setSize(ne),fe.setLayers(v),fe.setCodeWords(F),fe.setMatrix(le),fe}static drawBullsEye(o,c,h){for(let y=0;y<h;y+=2)for(let x=c-y;x<=c+y;x++)o.set(x,c-y),o.set(x,c+y),o.set(c-y,x),o.set(c+y,x);o.set(c-h,c-h),o.set(c-h+1,c-h),o.set(c-h,c-h+1),o.set(c+h,c-h),o.set(c+h,c-h+1),o.set(c+h,c+h-1)}static generateModeMessage(o,c,h){let y=new X;return o?(y.appendBits(c-1,2),y.appendBits(h-1,6),y=on.generateCheckWords(y,28,4)):(y.appendBits(c-1,5),y.appendBits(h-1,11),y=on.generateCheckWords(y,40,4)),y}static drawModeMessage(o,c,h,y){let x=K.truncDivision(h,2);if(c)for(let E=0;E<7;E++){let d=x-3+E;y.get(E)&&o.set(d,x-5),y.get(E+7)&&o.set(x+5,d),y.get(20-E)&&o.set(d,x+5),y.get(27-E)&&o.set(x-5,d)}else for(let E=0;E<10;E++){let d=x-5+E+K.truncDivision(E,5);y.get(E)&&o.set(d,x-7),y.get(E+10)&&o.set(x+7,d),y.get(29-E)&&o.set(d,x+7),y.get(39-E)&&o.set(x-7,d)}}static generateCheckWords(o,c,h){let y=o.getSize()/h,x=new aa(on.getGF(h)),E=K.truncDivision(c,h),d=on.bitsToWords(o,h,E);x.encode(d,E-y);let v=c%h,A=new X;A.appendBits(0,v);for(const I of Array.from(d))A.appendBits(I,h);return A}static bitsToWords(o,c,h){let y=new Int32Array(h),x,E;for(x=0,E=o.getSize()/c;x<E;x++){let d=0;for(let v=0;v<c;v++)d|=o.get(x*c+v)?1<<c-v-1:0;y[x]=d}return y}static getGF(o){switch(o){case 4:return Rt.AZTEC_PARAM;case 6:return Rt.AZTEC_DATA_6;case 8:return Rt.AZTEC_DATA_8;case 10:return Rt.AZTEC_DATA_10;case 12:return Rt.AZTEC_DATA_12;default:throw new _("Unsupported word size "+o)}}static stuffBits(o,c){let h=new X,y=o.getSize(),x=(1<<c)-2;for(let E=0;E<y;E+=c){let d=0;for(let v=0;v<c;v++)(E+v>=y||o.get(E+v))&&(d|=1<<c-1-v);(d&x)===x?(h.appendBits(d&x,c),E--):(d&x)===0?(h.appendBits(d|1,c),E--):h.appendBits(d,c)}return h}static totalBitsInLayer(o,c){return((c?88:112)+16*o)*o}}on.DEFAULT_EC_PERCENT=33,on.DEFAULT_AZTEC_LAYERS=0,on.MAX_NB_BITS=32,on.MAX_NB_BITS_COMPACT=4,on.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ul{encode(o,c,h,y){return this.encodeWithHints(o,c,h,y,null)}encodeWithHints(o,c,h,y,x){let E=bn.ISO_8859_1,d=on.DEFAULT_EC_PERCENT,v=on.DEFAULT_AZTEC_LAYERS;return x!=null&&(x.has(er.CHARACTER_SET)&&(E=kr.forName(x.get(er.CHARACTER_SET).toString())),x.has(er.ERROR_CORRECTION)&&(d=K.parseInt(x.get(er.ERROR_CORRECTION).toString())),x.has(er.AZTEC_LAYERS)&&(v=K.parseInt(x.get(er.AZTEC_LAYERS).toString()))),Ul.encodeLayers(o,c,h,y,E,d,v)}static encodeLayers(o,c,h,y,x,E,d){if(c!==$e.AZTEC)throw new _("Can only encode AZTEC, but got "+c);let v=on.encode(Z.getBytes(o,x),E,d);return Ul.renderResult(v,h,y)}static renderResult(o,c,h){let y=o.getMatrix();if(y==null)throw new nt;let x=y.getWidth(),E=y.getHeight(),d=Math.max(c,x),v=Math.max(h,E),A=Math.min(d/x,v/E),I=(d-x*A)/2,P=(v-E*A)/2,k=new xe(d,v);for(let F=0,q=P;F<E;F++,q+=A)for(let Q=0,re=I;Q<x;Q++,re+=A)y.get(Q,F)&&k.setRegion(re,q,A,A);return k}}n.AbstractExpandedDecoder=Vn,n.ArgumentException=b,n.ArithmeticException=Fe,n.AztecCode=Un,n.AztecCodeReader=hs,n.AztecCodeWriter=Ul,n.AztecDecoder=Wt,n.AztecDetector=Ro,n.AztecDetectorResult=Fs,n.AztecEncoder=on,n.AztecHighLevelEncoder=_s,n.AztecPoint=Lr,n.BarcodeFormat=$e,n.Binarizer=j,n.BinaryBitmap=T,n.BitArray=X,n.BitMatrix=xe,n.BitSource=Sr,n.BrowserAztecCodeReader=ms,n.BrowserBarcodeReader=as,n.BrowserCodeReader=Ye,n.BrowserDatamatrixCodeReader=vn,n.BrowserMultiFormatReader=Ka,n.BrowserPDF417Reader=nl,n.BrowserQRCodeReader=rl,n.BrowserQRCodeSvgWriter=ie,n.CharacterSetECI=H,n.ChecksumException=N,n.Code128Reader=rt,n.Code39Reader=fn,n.DataMatrixDecodedBitStreamParser=ai,n.DataMatrixReader=qi,n.DecodeHintType=J,n.DecoderResult=Ne,n.DefaultGridSampler=Ba,n.DetectorResult=Po,n.EAN13Reader=Yn,n.EncodeHintType=er,n.Exception=p,n.FormatException=V,n.GenericGF=Rt,n.GenericGFPoly=Et,n.GlobalHistogramBinarizer=ye,n.GridSampler=xa,n.GridSamplerInstance=bi,n.HTMLCanvasElementLuminanceSource=tt,n.HybridBinarizer=_e,n.ITFReader=Ze,n.IllegalArgumentException=_,n.IllegalStateException=nt,n.InvertedLuminanceSource=Ve,n.LuminanceSource=qe,n.MathUtils=xt,n.MultiFormatOneDReader=wi,n.MultiFormatReader=ko,n.MultiFormatWriter=Le,n.NotFoundException=de,n.OneDReader=Tn,n.PDF417DecodedBitStreamParser=ke,n.PDF417DecoderErrorCorrection=Ea,n.PDF417Reader=Dr,n.PDF417ResultMetadata=Ga,n.PerspectiveTransform=$n,n.PlanarYUVLuminanceSource=at,n.QRCodeByteMatrix=xs,n.QRCodeDataMask=Rr,n.QRCodeDecodedBitStreamParser=zn,n.QRCodeDecoderErrorCorrectionLevel=$t,n.QRCodeDecoderFormatInformation=Zn,n.QRCodeEncoder=G,n.QRCodeEncoderQRCode=os,n.QRCodeMaskUtil=dn,n.QRCodeMatrixUtil=S,n.QRCodeMode=Nt,n.QRCodeReader=Tr,n.QRCodeVersion=_t,n.QRCodeWriter=Ae,n.RGBLuminanceSource=qt,n.RSS14Reader=In,n.RSSExpandedReader=Ge,n.ReaderException=Ha,n.ReedSolomonDecoder=Zt,n.ReedSolomonEncoder=aa,n.ReedSolomonException=Kt,n.Result=ze,n.ResultMetadataType=lt,n.ResultPoint=mt,n.StringUtils=Z,n.UnsupportedOperationException=oe,n.VideoInputDevice=me,n.WhiteRectangleDetector=hr,n.WriterException=pn,n.ZXingArrays=$,n.ZXingCharset=kr,n.ZXingInteger=K,n.ZXingStandardCharsets=bn,n.ZXingStringBuilder=ee,n.ZXingStringEncoding=ae,n.ZXingSystem=M,n.createAbstractExpandedDecoder=$r,Object.defineProperty(n,"__esModule",{value:!0})}))})($g,$g.exports)),$g.exports}var si=tse();const nse=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var J4=(function(){function t(e,n,r){if(this.formatMap=new Map([[At.QR_CODE,si.BarcodeFormat.QR_CODE],[At.AZTEC,si.BarcodeFormat.AZTEC],[At.CODABAR,si.BarcodeFormat.CODABAR],[At.CODE_39,si.BarcodeFormat.CODE_39],[At.CODE_93,si.BarcodeFormat.CODE_93],[At.CODE_128,si.BarcodeFormat.CODE_128],[At.DATA_MATRIX,si.BarcodeFormat.DATA_MATRIX],[At.MAXICODE,si.BarcodeFormat.MAXICODE],[At.ITF,si.BarcodeFormat.ITF],[At.EAN_13,si.BarcodeFormat.EAN_13],[At.EAN_8,si.BarcodeFormat.EAN_8],[At.PDF_417,si.BarcodeFormat.PDF_417],[At.RSS_14,si.BarcodeFormat.RSS_14],[At.RSS_EXPANDED,si.BarcodeFormat.RSS_EXPANDED],[At.UPC_A,si.BarcodeFormat.UPC_A],[At.UPC_E,si.BarcodeFormat.UPC_E],[At.UPC_EAN_EXTENSION,si.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!nse)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(e),a=new Map;a.set(si.DecodeHintType.POSSIBLE_FORMATS,i),a.set(si.DecodeHintType.TRY_HARDER,!1),this.hints=a}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,i){try{r(n.decode(e))}catch(a){i(a)}})},t.prototype.decode=function(e){var n=new si.MultiFormatReader(this.verbose,this.hints),r=new si.HTMLCanvasElementLuminanceSource(e),i=new si.BinaryBitmap(new si.HybridBinarizer(r)),a=n.decode(i);return{text:a.text,format:nB.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t})(),rse=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(b){try{p(r.next(b))}catch(_){l(_)}}function m(b){try{p(r.throw(b))}catch(_){l(_)}}function p(b){b.done?a(b.value):i(b.value).then(f,m)}p((r=r.apply(t,e||[])).next())})},ise=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(b){return m([p,b])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(b){p=[6,b],i=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},eD=(function(){function t(e,n,r){if(this.formatMap=new Map([[At.QR_CODE,"qr_code"],[At.AZTEC,"aztec"],[At.CODABAR,"codabar"],[At.CODE_39,"code_39"],[At.CODE_93,"code_93"],[At.CODE_128,"code_128"],[At.DATA_MATRIX,"data_matrix"],[At.ITF,"itf"],[At.EAN_13,"ean_13"],[At.EAN_8,"ean_8"],[At.PDF_417,"pdf417"],[At.UPC_A,"upc_a"],[At.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return rse(this,void 0,void 0,function(){var n,r;return ise(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:nB.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,i=0,a=e;i<a.length;i++){var l=a[i],f=l.boundingBox.width*l.boundingBox.height;f>r&&(r=f,n=l)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t})(),tD=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(b){try{p(r.next(b))}catch(_){l(_)}}function m(b){try{p(r.throw(b))}catch(_){l(_)}}function p(b){b.done?a(b.value):i(b.value).then(f,m)}p((r=r.apply(t,e||[])).next())})},nD=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(b){return m([p,b])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(b){p=[6,b],i=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},ase=(function(){function t(e,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&eD.isSupported()?(this.primaryDecoder=new eD(e,r,i),this.secondaryDecoder=new J4(e,r,i)):this.primaryDecoder=new J4(e,r,i)}return t.prototype.decodeAsync=function(e){return tD(this,void 0,void 0,function(){var n;return nD(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return tD(this,void 0,void 0,function(){var n,r;return nD(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];e+=i}var a=e/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t})(),fI=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),xv=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(b){try{p(r.next(b))}catch(_){l(_)}}function m(b){try{p(r.throw(b))}catch(_){l(_)}}function p(b){b.done?a(b.value):i(b.value).then(f,m)}p((r=r.apply(t,e||[])).next())})},bv=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(b){return m([p,b])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(b){p=[6,b],i=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},iB=(function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t})(),sse=(function(t){fI(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(iB),ose=(function(t){fI(e,t);function e(n){return t.call(this,"zoom",n)||this}return e})(sse),lse=(function(t){fI(e,t);function e(n){return t.call(this,"torch",n)||this}return e})(iB),use=(function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new ose(this.track)},t.prototype.torchFeature=function(){return new lse(this.track)},t})(),cse=(function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,i),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,i){return xv(this,void 0,void 0,function(){var a,l;return bv(this,function(f){switch(f.label){case 0:return a=new t(e,n,i),r.aspectRatio?(l={aspectRatio:r.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(l)]):[3,2];case 1:f.sent(),f.label=2;case 2:return a.setupSurface(),[2,a]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return xv(this,void 0,void 0,function(){return bv(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var i=e.mediaStream.getVideoTracks(),a=i.length,l=0;e.mediaStream.getVideoTracks().forEach(function(f){e.mediaStream.removeTrack(f),f.stop(),++l,l>=a&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new use(this.getFirstTrackOrFail())},t})(),fse=(function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return xv(this,void 0,void 0,function(){return bv(this,function(i){return[2,cse.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return xv(this,void 0,void 0,function(){var n,r;return bv(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new t(r)]}})})},t})(),rD=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(b){try{p(r.next(b))}catch(_){l(_)}}function m(b){try{p(r.throw(b))}catch(_){l(_)}}function p(b){b.done?a(b.value):i(b.value).then(f,m)}p((r=r.apply(t,e||[])).next())})},iD=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(b){return m([p,b])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(b){p=[6,b],i=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},dse=(function(){function t(){}return t.failIfNotSupported=function(){return rD(this,void 0,void 0,function(){return iD(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return rD(this,void 0,void 0,function(){return iD(this,function(n){return[2,fse.create(e)]})})},t})(),hse=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(b){try{p(r.next(b))}catch(_){l(_)}}function m(b){try{p(r.throw(b))}catch(_){l(_)}}function p(b){b.done?a(b.value):i(b.value).then(f,m)}p((r=r.apply(t,e||[])).next())})},mse=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(b){return m([p,b])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(b){p=[6,b],i=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},gse=(function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Ah.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Ah.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return hse(this,void 0,void 0,function(){var e,n,r,i,a,l,f;return mse(this,function(m){switch(m.label){case 0:return e=function(p){for(var b=p.getVideoTracks(),_=0,T=b;_<T.length;_++){var N=T[_];N.enabled=!1,N.stop(),p.removeTrack(N)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=m.sent(),i=[],a=0,l=r;a<l.length;a++)f=l[a],f.kind==="videoinput"&&i.push({id:f.deviceId,label:f.label});return e(n),[2,i]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(a){for(var l=[],f=0,m=a;f<m.length;f++){var p=m[f];p.kind==="video"&&l.push({id:p.id,label:p.label})}e(l)},i=MediaStreamTrack;i.getSources(r)})},t})(),gi;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(gi||(gi={}));var pse=(function(){function t(){this.state=gi.NOT_STARTED,this.onGoingTransactionNewState=gi.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===gi.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=gi.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===gi.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=gi.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==gi.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case gi.UNKNOWN:throw"Transition from unknown is not allowed";case gi.NOT_STARTED:this.failIfNewStateIs(e,[gi.PAUSED]);break;case gi.SCANNING:break;case gi.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,i=n;r<i.length;r++){var a=i[r];if(e===a)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t})(),yse=(function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===gi.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==gi.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===gi.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===gi.PAUSED},t})(),vse=(function(){function t(){}return t.create=function(){return new yse(new pse)},t})(),xse=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Xs=(function(t){xse(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(Qae),bse=(function(){function t(e,n){this.logger=n,this.fps=Xs.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Xs.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?rB.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!au(this.qrbox)},t.create=function(e,n){return new t(e,n)},t})(),wse=(function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new Jae(this.verbose),this.qrcode=new ase(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=vse.create()}return t.prototype.start=function(e,n,r,i){var a=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var l;i?l=i:l=this.verbose?this.logger.log:function(){};var f=bse.create(n,this.logger);this.clearElement();var m=!1;f.videoConstraints&&(f.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=m,b=document.getElementById(this.elementId);b.clientWidth?b.clientWidth:Xs.DEFAULT_WIDTH,b.style.position="relative",this.shouldScan=!0,this.element=b;var _=this,T=this.stateManagerProxy.startTransition(gi.SCANNING);return new Promise(function(N,j){var M=p?f.videoConstraints:_.createVideoConstraints(e);if(!M){T.cancel(),j("videoConstraints should be defined");return}var L={};(!p||f.aspectRatio)&&(L.aspectRatio=f.aspectRatio);var z={onRenderSurfaceReady:function($,K){_.setupUi($,K,f),_.isScanning=!0,_.foreverScan(f,r,l)}};dse.failIfNotSupported().then(function($){$.create(M).then(function(K){return K.render(a.element,L,z).then(function(X){_.renderedCamera=X,T.execute(),N(null)}).catch(function(X){T.cancel(),j(X)})}).catch(function(K){T.cancel(),j(Ah.errorGettingUserMedia(K))})}).catch(function($){T.cancel(),j(Ah.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(gi.PAUSED),this.showPausedState(),(au(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(gi.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(gi.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var a=document.getElementById(Xs.SHADED_REGION_ELEMENT_ID);a&&e.element.removeChild(a)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(au(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,a){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var l=new Image;l.onload=function(){var f=l.width,m=l.height,p=document.getElementById(r.elementId),b=p.clientWidth?p.clientWidth:Xs.DEFAULT_WIDTH,_=Math.max(p.clientHeight?p.clientHeight:m,Xs.FILE_SCAN_MIN_HEIGHT),T=r.computeCanvasDrawConfig(f,m,b,_);if(n){var N=r.createCanvasElement(b,_,"qr-canvas-visible");N.style.display="inline-block",p.appendChild(N);var j=N.getContext("2d");if(!j)throw"Unable to get 2d context from canvas";j.canvas.width=b,j.canvas.height=_,j.drawImage(l,0,0,f,m,T.x,T.y,T.width,T.height)}var M=Xs.FILE_SCAN_HIDDEN_CANVAS_PADDING,L=Math.max(l.width,T.width),z=Math.max(l.height,T.height),$=L+2*M,K=z+2*M,X=r.createCanvasElement($,K);p.appendChild(X);var se=X.getContext("2d");if(!se)throw"Unable to get 2d context from canvas";se.canvas.width=$,se.canvas.height=K,se.drawImage(l,0,0,f,m,M,M,L,z);try{r.qrcode.decodeRobustlyAsync(X).then(function(J){i(Q4.createFromQrcodeResult(J))}).catch(a)}catch(J){a("QR code parse error, error = ".concat(J))}},l.onerror=a,l.onabort=a,l.onstalled=a,l.onsuspend=a,l.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return gse.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!rB.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[At.QR_CODE,At.AZTEC,At.CODABAR,At.CODE_39,At.CODE_93,At.CODE_128,At.DATA_MATRIX,At.MAXICODE,At.ITF,At.EAN_13,At.EAN_8,At.PDF_417,At.RSS_14,At.RSS_EXPANDED,At.UPC_A,At.UPC_E,At.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,a=e.formatsToSupport;i<a.length;i++){var l=a[i];Xae(l)?r.push(l):this.logger.warn("Invalid format: ".concat(l," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(au(e))return!0;if(!au(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(au(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return au(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var i=this,a=r.qrbox;this.validateQrboxConfig(a);var l=this.toQrdimensions(e,n,a),f=function(p){if(p<Xs.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Xs.MIN_QR_BOX_SIZE,"px.")},m=function(p){return p>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=e),p};f(l.width),f(l.height),l.width=m(l.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var i=au(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(i);var a=this.toQrdimensions(e,n,i);a.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var l=r.isShadedBoxEnabled()&&a.height<=n,f={x:0,y:0,width:e,height:n},m=l?this.getShadedRegionBounds(e,n,a):f,p=this.createCanvasElement(m.width,m.height),b={willReadFrequently:!0},_=p.getContext("2d",b);_.canvas.width=m.width,_.canvas.height=m.height,this.element.append(p),l&&this.possiblyInsertShadingElement(this.element,e,n,a),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=_,this.canvasElement=p},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Ah.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,Q4.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var a=Ah.codeParseError(i);return n(a,Zae.createFrom(a)),!1})},t.prototype.foreverScan=function(e,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),l=a.videoWidth/a.clientWidth,f=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*l,p=this.qrRegion.height*f,b=this.qrRegion.x*l,_=this.qrRegion.y*f;this.context.drawImage(a,b,_,m,p,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,n,r)},i.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(N){!N&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){T()})):T()}).catch(function(N){i.logger.logError("Error happend while scanning context",N),T()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},a="exact",l=function(j){if(j in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(j,"'")},f=Object.keys(e);if(f.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(f.length," keys");var m=Object.keys(e)[0];if(m!==n&&m!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(m===n){var p=e.facingMode;if(typeof p=="string"){if(l(p))return{facingMode:p}}else if(typeof p=="object")if(a in p){if(l(p["".concat(a)]))return{facingMode:{exact:p["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var b=typeof p;throw"Invalid type of 'facingMode' = ".concat(b)}}else{var _=e.deviceId;if(typeof _=="string")return{deviceId:_};if(typeof _=="object"){if(a in _)return{deviceId:{exact:_["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var T=typeof _;throw"Invalid type of 'deviceId' = ".concat(T)}}}var N=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(N)},t.prototype.computeCanvasDrawConfig=function(e,n,r,i){if(e<=r&&n<=i){var a=(r-e)/2,l=(i-n)/2;return{x:a,y:l,width:e,height:n}}else{var f=e,m=n;return e>r&&(n=r/e*n,e=r),n>i&&(e=i/n*e,n=i),this.logger.log("Image downsampled from "+"".concat(f,"X").concat(m)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,i)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Xs.BORDER_SHADER_MATCH_COLOR:Xs.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var i=e,a=n,l=document.createElement("canvas");return l.style.width="".concat(i,"px"),l.style.height="".concat(a,"px"),l.style.display="none",l.id=au(r)?"qr-canvas":r,l},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,i){if(!(n-i.width<1||r-i.height<1)){var a=document.createElement("div");a.style.position="absolute";var l=(n-i.width)/2,f=(r-i.height)/2;if(a.style.borderLeft="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(Xs.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var m=5,p=40;this.insertShaderBorders(a,p,m,-m,null,0,!0),this.insertShaderBorders(a,p,m,-m,null,0,!1),this.insertShaderBorders(a,p,m,null,-m,0,!0),this.insertShaderBorders(a,p,m,null,-m,0,!1),this.insertShaderBorders(a,m,p+m,-m,null,-m,!0),this.insertShaderBorders(a,m,p+m,null,-m,-m,!0),this.insertShaderBorders(a,m,p+m,-m,null,-m,!1),this.insertShaderBorders(a,m,p+m,null,-m,-m,!1),this.hasBorderShaders=!0}e.append(a)}},t.prototype.insertShaderBorders=function(e,n,r,i,a,l,f){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=Xs.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(n,"px"),m.style.height="".concat(r,"px"),i!==null&&(m.style.top="".concat(i,"px")),a!==null&&(m.style.bottom="".concat(a,"px")),f?m.style.left="".concat(l,"px"):m.style.right="".concat(l,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),e.appendChild(m)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t})(),aD;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(aD||(aD={}));const dI="https://api.anthropic.com/v1/messages";async function Qx(){const t=await ot.userProfiles.toCollection().first();if(!t)return null;const e=t,n=e.anthropicApiKey;if(!n)return null;const r=e.anthropicApiUrl;return{apiKey:n,apiUrl:r||dI}}async function _se(t,e){const n=await ot.userProfiles.toCollection().first();n?.id&&await ot.userProfiles.update(n.id,{anthropicApiKey:t,anthropicApiUrl:e||dI})}async function aB(t,e){const n=await Qx();if(!n?.apiKey)throw new Error("Geen API-sleutel ingesteld. Ga naar Profiel  AI Instellingen.");const r=await fetch(n.apiUrl||dI,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":n.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-sonnet-4-5-20250929",max_tokens:1024,system:e,messages:t})});if(!r.ok){const l=(await r.json().catch(()=>({})))?.error?.message||r.statusText;throw new Error(`AI fout: ${l}`)}return(await r.json()).content?.[0]?.text||"Geen antwoord ontvangen."}async function Ese(t,e){return aB([{role:"user",content:[{type:"image",source:{type:"base64",media_type:e,data:t}},{type:"text",text:"Welk voedsel zie je op deze foto? Geef de voedingswaarden."}]}],`Je bent een Nederlandse voedingsassistent. Analyseer de foto van voedsel.
Geef voor elk herkend product:
- Naam (in het Nederlands)
- Geschatte hoeveelheid in gram
- Geschatte voedingswaarden per 100g: calorien, eiwit, vet, verzadigd vet, koolhydraten, suikers, vezels

Antwoord in JSON-formaat:
[{"naam": "...", "hoeveelheid_g": 100, "per_100g": {"calories": 0, "protein": 0, "fat": 0, "saturatedFat": 0, "carbs": 0, "sugar": 0, "fiber": 0}}]

Als je geen voedsel herkent, antwoord dan met een lege array [].`)}function Ase(){const[t,e]=D.useState("barcode"),[n,r]=D.useState("idle"),[i,a]=D.useState(null),[l,f]=D.useState(null),[m,p]=D.useState(null),b=D.useRef(null),_=Xx(Z=>Z.addEntry),[T,N]=D.useState(null),[j,M]=D.useState(!1),[L,z]=D.useState([]),[$,K]=D.useState(null),X=D.useRef(null);D.useEffect(()=>((!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)&&r("unavailable"),()=>{se()}),[]);const se=D.useCallback(async()=>{if(b.current){try{b.current.getState()===2&&await b.current.stop()}catch{}b.current=null}r("idle")},[]),J=D.useCallback(async Z=>{if(Z===m)return;if(p(Z),b.current){try{b.current.getState()===2&&await b.current.stop()}catch{}b.current=null}r("looking-up"),f(null);const ee=await qae(Z);ee?(a(ee),r("idle")):(f(`Product niet gevonden voor barcode: ${Z}`),r("idle"))},[m]),V=async()=>{f(null),p(null),a(null),r("requesting");let Z;try{Z=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),Z.getTracks().forEach(ee=>ee.stop())}catch(ee){const xe=ee instanceof Error?ee.message:String(ee);xe.includes("NotAllowed")||xe.includes("Permission")||xe.includes("denied")?r("denied"):xe.includes("NotFound")||xe.includes("DevicesNotFound")||xe.includes("NotReadableError")?r("unavailable"):r("denied");return}try{const ee=new wse("scanner-region");b.current=ee,r("scanning"),await new Promise(xe=>requestAnimationFrame(xe)),await ee.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150},aspectRatio:1},xe=>{J(xe)},()=>{})}catch(ee){const xe=ee instanceof Error?ee.message:String(ee);xe.includes("Permission")||xe.includes("NotAllowed")?r("denied"):(f("Kan scanner niet starten. Probeer het opnieuw."),r("idle"))}},W=async(Z,ee)=>{if(!i)return;const xe=p0(i.pointsPer100g,Z);await _({foodItem:i,mealType:ee,quantityG:Z,points:xe}),a(null),p(null)},H=async Z=>{const ee=Z.target.files?.[0];if(!ee)return;K(null),z([]);const xe=new FileReader;xe.onload=async de=>{const ye=de.target?.result;if(N(ye),!(await Qx())?.apiKey){K("Geen API-sleutel ingesteld. Ga naar Profiel  AI Instellingen.");return}M(!0);try{const qe=ye.split(",")[1],Ve=ee.type||"image/jpeg",me=(await Ese(qe,Ve)).match(/\[[\s\S]*\]/);if(me){const Ye=JSON.parse(me[0]).map(ze=>{const yt={calories:ze.per_100g.calories||0,protein:ze.per_100g.protein||0,fat:ze.per_100g.fat||0,saturatedFat:ze.per_100g.saturatedFat||0,unsaturatedFat:Math.max(0,(ze.per_100g.fat||0)-(ze.per_100g.saturatedFat||0)),carbs:ze.per_100g.carbs||0,sugar:ze.per_100g.sugar||0,addedSugar:0,fiber:ze.per_100g.fiber||0},$e=g0(yt);return{name:ze.naam,nutrition:yt,pointsPer100g:$e,servingSizeG:ze.hoeveelheid_g||100,isZeroPoint:$e===0,source:"user",createdAt:new Date}});z(Ye)}else K("Kon geen voedsel herkennen op de foto. Probeer een andere foto.")}catch(qe){K(qe instanceof Error?qe.message:"Fout bij analyseren")}finally{M(!1)}},xe.readAsDataURL(ee)},oe=async Z=>{const ee=await sI({name:Z.name,nutrition:Z.nutrition,pointsPer100g:Z.pointsPer100g,servingSizeG:Z.servingSizeG,isZeroPoint:Z.isZeroPoint,isFavorite:!1,source:"user"});a(ee)},ae=Z=>{Z==="barcode"&&t==="photo"?(N(null),z([]),K(null)):Z==="photo"&&t==="barcode"&&se(),e(Z)};return O.jsxs(Wc,{title:"Scanner",children:[O.jsxs("div",{className:"flex flex-col items-center gap-4",children:[O.jsxs("div",{className:"flex gap-1 bg-ios-bg rounded-xl p-1 w-full",children:[O.jsxs("button",{onClick:()=>ae("barcode"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[13px] font-medium border-none cursor-pointer transition-colors ${t==="barcode"?"bg-white text-primary shadow-sm":"bg-transparent text-ios-secondary"}`,children:[O.jsx(pv,{size:14}),"Barcode"]}),O.jsxs("button",{onClick:()=>ae("photo"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[13px] font-medium border-none cursor-pointer transition-colors ${t==="photo"?"bg-white text-primary shadow-sm":"bg-transparent text-ios-secondary"}`,children:[O.jsx(j4,{size:14}),"AI Foto"]})]}),t==="barcode"&&O.jsxs(O.Fragment,{children:[O.jsxs(Nn,{className:"w-full overflow-hidden",children:[O.jsx("div",{id:"scanner-region",className:"w-full bg-black overflow-hidden",style:{minHeight:n==="scanning"?300:0,transition:"min-height 0.2s ease"}}),n==="idle"&&!i&&O.jsxs("div",{className:"flex flex-col items-center py-12 px-4",children:[O.jsx("div",{className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:O.jsx(pv,{size:40,className:"text-primary"})}),O.jsx("h3",{className:"text-[17px] font-semibold mb-1",children:"Scan een barcode"}),O.jsx("p",{className:"text-[13px] text-ios-secondary text-center mb-6 leading-relaxed",children:"Richt je camera op de barcode van een product"}),O.jsx("button",{onClick:V,className:"px-8 py-3 bg-primary text-white rounded-xl text-[17px] font-semibold border-none cursor-pointer active:bg-primary-dark transition-colors",children:"Open camera"})]}),n==="requesting"&&O.jsxs("div",{className:"flex flex-col items-center py-12 px-4",children:[O.jsx(jc,{size:40,className:"text-primary animate-spin mb-3"}),O.jsx("p",{className:"text-[15px] text-ios-secondary",children:"Camera-toegang aanvragen..."}),O.jsx("p",{className:"text-[12px] text-ios-secondary mt-2 text-center",children:'Tik op "Sta toe" als je browser om toestemming vraagt'})]}),n==="looking-up"&&O.jsxs("div",{className:"flex flex-col items-center py-12",children:[O.jsx(jc,{size:40,className:"text-primary animate-spin mb-3"}),O.jsx("p",{className:"text-[15px] text-ios-secondary",children:"Product opzoeken..."})]}),n==="denied"&&O.jsxs("div",{className:"flex flex-col items-center py-12 px-6",children:[O.jsx("div",{className:"w-20 h-20 rounded-full bg-ios-warning/10 flex items-center justify-center mb-4",children:O.jsx(one,{size:40,className:"text-ios-warning"})}),O.jsx("h3",{className:"text-[17px] font-semibold mb-2 text-center",children:"Camera-toegang geweigerd"}),O.jsx("p",{className:"text-[13px] text-ios-secondary text-center leading-relaxed mb-4",children:"Geef toestemming via je instellingen:"}),O.jsxs("div",{className:"bg-ios-bg rounded-xl p-4 w-full mb-6",children:[O.jsx("p",{className:"text-[14px] font-medium mb-2",children:"Op iPhone / iPad:"}),O.jsxs("ol",{className:"text-[13px] text-ios-secondary leading-relaxed list-decimal list-inside space-y-1",children:[O.jsxs("li",{children:["Open ",O.jsx("strong",{children:"Instellingen"})]}),O.jsxs("li",{children:["Scroll naar ",O.jsx("strong",{children:"Safari"})]}),O.jsxs("li",{children:["Tik op ",O.jsx("strong",{children:"Camera"})]}),O.jsxs("li",{children:["Kies ",O.jsx("strong",{children:"Sta toe"})]})]})]}),O.jsx("button",{onClick:V,className:"px-8 py-3 bg-primary text-white rounded-xl text-[17px] font-semibold border-none cursor-pointer active:bg-primary-dark transition-colors",children:"Opnieuw proberen"})]}),n==="unavailable"&&O.jsxs("div",{className:"flex flex-col items-center py-12 px-6",children:[O.jsx("div",{className:"w-20 h-20 rounded-full bg-ios-destructive/10 flex items-center justify-center mb-4",children:O.jsx(hre,{size:40,className:"text-ios-destructive"})}),O.jsx("h3",{className:"text-[17px] font-semibold mb-2",children:"Camera niet beschikbaar"}),O.jsxs("p",{className:"text-[13px] text-ios-secondary text-center leading-relaxed",children:["Open de app via ",O.jsx("strong",{children:"Safari"})," op je iPhone."]})]})]}),l&&n==="idle"&&O.jsxs(Nn,{className:"w-full px-4 py-3 flex items-center gap-3",children:[O.jsx(gv,{size:20,className:"text-ios-destructive flex-shrink-0"}),O.jsx("div",{className:"flex-1",children:O.jsx("p",{className:"text-[15px] text-ios-text",children:l})}),O.jsx("button",{onClick:V,className:"text-[15px] text-primary font-medium border-none bg-transparent cursor-pointer flex-shrink-0",children:"Opnieuw"})]}),n==="scanning"&&O.jsx("button",{onClick:se,className:"px-6 py-3 bg-ios-destructive text-white rounded-xl text-[15px] font-semibold border-none cursor-pointer",children:"Stop scanner"})]}),t==="photo"&&O.jsxs(O.Fragment,{children:[O.jsx(Nn,{className:"w-full",children:T?O.jsxs("div",{children:[O.jsx("img",{src:T,alt:"Foto",className:"w-full h-48 object-cover"}),j&&O.jsxs("div",{className:"flex flex-col items-center py-6",children:[O.jsx(jc,{size:32,className:"text-primary animate-spin mb-2"}),O.jsx("p",{className:"text-[15px] text-ios-secondary",children:"AI analyseert je foto..."})]})]}):O.jsxs("div",{className:"flex flex-col items-center py-12 px-4",children:[O.jsx("div",{className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:O.jsx(j4,{size:40,className:"text-primary"})}),O.jsx("h3",{className:"text-[17px] font-semibold mb-1",children:"Herken voedsel via foto"}),O.jsx("p",{className:"text-[13px] text-ios-secondary text-center mb-6 leading-relaxed",children:"Maak een foto van je maaltijd en AI herkent de producten met voedingswaarden"}),O.jsx("button",{onClick:()=>X.current?.click(),className:"px-8 py-3 bg-primary text-white rounded-xl text-[17px] font-semibold border-none cursor-pointer active:bg-primary-dark transition-colors",children:"Maak foto"}),O.jsx("input",{ref:X,type:"file",accept:"image/*",capture:"environment",onChange:H,className:"hidden"})]})}),$&&O.jsxs(Nn,{className:"w-full px-4 py-3 flex items-center gap-3",children:[O.jsx(gv,{size:20,className:"text-ios-destructive flex-shrink-0"}),O.jsx("p",{className:"text-[14px] text-ios-text flex-1",children:$})]}),L.length>0&&O.jsxs(Nn,{className:"w-full",children:[O.jsx("div",{className:"px-4 py-3 border-b border-ios-separator",children:O.jsx("p",{className:"text-[15px] font-semibold",children:"Herkende producten"})}),L.map((Z,ee)=>O.jsxs("div",{className:`flex items-center justify-between px-4 py-3 ${ee<L.length-1?"border-b border-ios-separator":""}`,children:[O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("div",{className:"text-[15px] font-medium",children:Z.name}),O.jsxs("div",{className:"text-[13px] text-ios-secondary",children:[Z.servingSizeG,"g  ",Z.pointsPer100g," pt/100g"]})]}),O.jsx("button",{onClick:()=>oe(Z),className:"px-3 py-1.5 bg-primary text-white rounded-lg text-[13px] font-medium border-none cursor-pointer",children:"Toevoegen"})]},`${Z.name}-${ee}`))]}),T&&!j&&O.jsx("button",{onClick:()=>{N(null),z([]),K(null),X.current?.click()},className:"px-6 py-3 bg-white text-primary rounded-xl text-[15px] font-semibold border border-ios-separator cursor-pointer",children:"Nieuwe foto"})]})]}),i&&O.jsx(XL,{food:i,defaultMealType:"snack",onAdd:W,onClose:()=>{a(null),p(null)}})]})}function sB(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=sB(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Hn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=sB(t))&&(r&&(r+=" "),r+=e);return r}var Sse=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function hI(t){if(typeof t!="string")return!1;var e=Sse;return e.includes(t)}var Tse=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Ise=new Set(Tse);function oB(t){return typeof t!="string"?!1:Ise.has(t)}function lB(t){return typeof t=="string"&&t.startsWith("data-")}function ao(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(oB(n)||lB(n))&&(e[n]=t[n]);return e}function dd(t){if(t==null)return null;if(D.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return ao(e)}return typeof t=="object"&&!Array.isArray(t)?ao(t):null}function is(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(oB(n)||lB(n)||hI(n))&&(e[n]=t[n]);return e}function Cse(t){return t==null?null:D.isValidElement(t)?is(t.props):typeof t=="object"&&!Array.isArray(t)?is(t):null}var Ose=["children","width","height","viewBox","className","style","title","desc"];function CA(){return CA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CA.apply(null,arguments)}function Nse(t,e){if(t==null)return{};var n,r,i=Pse(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Pse(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var uB=D.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:l,style:f,title:m,desc:p}=t,b=Nse(t,Ose),_=a||{width:r,height:i,x:0,y:0},T=Hn("recharts-surface",l);return D.createElement("svg",CA({},is(b),{className:T,width:r,height:i,style:f,viewBox:"".concat(_.x," ").concat(_.y," ").concat(_.width," ").concat(_.height),ref:e}),D.createElement("title",null,m),D.createElement("desc",null,p),n)}),Rse=["children","className"];function OA(){return OA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OA.apply(null,arguments)}function Dse(t,e){if(t==null)return{};var n,r,i=kse(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kse(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Yi=D.forwardRef((t,e)=>{var{children:n,className:r}=t,i=Dse(t,Rse),a=Hn("recharts-layer",r);return D.createElement("g",OA({className:a},is(i),{ref:e}),n)}),Mse=D.createContext(null);function Mr(t){return function(){return t}}const cB=Math.cos,wv=Math.sin,Xo=Math.sqrt,_v=Math.PI,Zx=2*_v,NA=Math.PI,PA=2*NA,Pf=1e-6,jse=PA-Pf;function fB(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Lse(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return fB;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Bse{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?fB:Lse(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,l){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+l}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let l=this._x1,f=this._y1,m=r-e,p=i-n,b=l-e,_=f-n,T=b*b+_*_;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(T>Pf)if(!(Math.abs(_*m-p*b)>Pf)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let N=r-l,j=i-f,M=m*m+p*p,L=N*N+j*j,z=Math.sqrt(M),$=Math.sqrt(T),K=a*Math.tan((NA-Math.acos((M+T-L)/(2*z*$)))/2),X=K/$,se=K/z;Math.abs(X-1)>Pf&&this._append`L${e+X*b},${n+X*_}`,this._append`A${a},${a},0,0,${+(_*N>b*j)},${this._x1=e+se*m},${this._y1=n+se*p}`}}arc(e,n,r,i,a,l){if(e=+e,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let f=r*Math.cos(i),m=r*Math.sin(i),p=e+f,b=n+m,_=1^l,T=l?i-a:a-i;this._x1===null?this._append`M${p},${b}`:(Math.abs(this._x1-p)>Pf||Math.abs(this._y1-b)>Pf)&&this._append`L${p},${b}`,r&&(T<0&&(T=T%PA+PA),T>jse?this._append`A${r},${r},0,1,${_},${e-f},${n-m}A${r},${r},0,1,${_},${this._x1=p},${this._y1=b}`:T>Pf&&this._append`A${r},${r},0,${+(T>=NA)},${_},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function mI(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Bse(e)}function gI(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function dB(t){this._context=t}dB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Jx(t){return new dB(t)}function hB(t){return t[0]}function mB(t){return t[1]}function gB(t,e){var n=Mr(!0),r=null,i=Jx,a=null,l=mI(f);t=typeof t=="function"?t:t===void 0?hB:Mr(t),e=typeof e=="function"?e:e===void 0?mB:Mr(e);function f(m){var p,b=(m=gI(m)).length,_,T=!1,N;for(r==null&&(a=i(N=l())),p=0;p<=b;++p)!(p<b&&n(_=m[p],p,m))===T&&((T=!T)?a.lineStart():a.lineEnd()),T&&a.point(+t(_,p,m),+e(_,p,m));if(N)return a=null,N+""||null}return f.x=function(m){return arguments.length?(t=typeof m=="function"?m:Mr(+m),f):t},f.y=function(m){return arguments.length?(e=typeof m=="function"?m:Mr(+m),f):e},f.defined=function(m){return arguments.length?(n=typeof m=="function"?m:Mr(!!m),f):n},f.curve=function(m){return arguments.length?(i=m,r!=null&&(a=i(r)),f):i},f.context=function(m){return arguments.length?(m==null?r=a=null:a=i(r=m),f):r},f}function Y1(t,e,n){var r=null,i=Mr(!0),a=null,l=Jx,f=null,m=mI(p);t=typeof t=="function"?t:t===void 0?hB:Mr(+t),e=typeof e=="function"?e:Mr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?mB:Mr(+n);function p(_){var T,N,j,M=(_=gI(_)).length,L,z=!1,$,K=new Array(M),X=new Array(M);for(a==null&&(f=l($=m())),T=0;T<=M;++T){if(!(T<M&&i(L=_[T],T,_))===z)if(z=!z)N=T,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),j=T-1;j>=N;--j)f.point(K[j],X[j]);f.lineEnd(),f.areaEnd()}z&&(K[T]=+t(L,T,_),X[T]=+e(L,T,_),f.point(r?+r(L,T,_):K[T],n?+n(L,T,_):X[T]))}if($)return f=null,$+""||null}function b(){return gB().defined(i).curve(l).context(a)}return p.x=function(_){return arguments.length?(t=typeof _=="function"?_:Mr(+_),r=null,p):t},p.x0=function(_){return arguments.length?(t=typeof _=="function"?_:Mr(+_),p):t},p.x1=function(_){return arguments.length?(r=_==null?null:typeof _=="function"?_:Mr(+_),p):r},p.y=function(_){return arguments.length?(e=typeof _=="function"?_:Mr(+_),n=null,p):e},p.y0=function(_){return arguments.length?(e=typeof _=="function"?_:Mr(+_),p):e},p.y1=function(_){return arguments.length?(n=_==null?null:typeof _=="function"?_:Mr(+_),p):n},p.lineX0=p.lineY0=function(){return b().x(t).y(e)},p.lineY1=function(){return b().x(t).y(n)},p.lineX1=function(){return b().x(r).y(e)},p.defined=function(_){return arguments.length?(i=typeof _=="function"?_:Mr(!!_),p):i},p.curve=function(_){return arguments.length?(l=_,a!=null&&(f=l(a)),p):l},p.context=function(_){return arguments.length?(_==null?a=f=null:f=l(a=_),p):a},p}class pB{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Fse(t){return new pB(t,!0)}function Vse(t){return new pB(t,!1)}const pI={draw(t,e){const n=Xo(e/_v);t.moveTo(n,0),t.arc(0,0,n,0,Zx)}},zse={draw(t,e){const n=Xo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},yB=Xo(1/3),Use=yB*2,qse={draw(t,e){const n=Xo(e/Use),r=n*yB;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Gse={draw(t,e){const n=Xo(e),r=-n/2;t.rect(r,r,n,n)}},Hse=.8908130915292852,vB=wv(_v/10)/wv(7*_v/10),Kse=wv(Zx/10)*vB,Wse=-cB(Zx/10)*vB,$se={draw(t,e){const n=Xo(e*Hse),r=Kse*n,i=Wse*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const l=Zx*a/5,f=cB(l),m=wv(l);t.lineTo(m*n,-f*n),t.lineTo(f*r-m*i,m*r+f*i)}t.closePath()}},Z_=Xo(3),Yse={draw(t,e){const n=-Xo(e/(Z_*3));t.moveTo(0,n*2),t.lineTo(-Z_*n,-n),t.lineTo(Z_*n,-n),t.closePath()}},xo=-.5,bo=Xo(3)/2,RA=1/Xo(12),Xse=(RA/2+1)*3,Qse={draw(t,e){const n=Xo(e/Xse),r=n/2,i=n*RA,a=r,l=n*RA+n,f=-a,m=l;t.moveTo(r,i),t.lineTo(a,l),t.lineTo(f,m),t.lineTo(xo*r-bo*i,bo*r+xo*i),t.lineTo(xo*a-bo*l,bo*a+xo*l),t.lineTo(xo*f-bo*m,bo*f+xo*m),t.lineTo(xo*r+bo*i,xo*i-bo*r),t.lineTo(xo*a+bo*l,xo*l-bo*a),t.lineTo(xo*f+bo*m,xo*m-bo*f),t.closePath()}};function Zse(t,e){let n=null,r=mI(i);t=typeof t=="function"?t:Mr(t||pI),e=typeof e=="function"?e:Mr(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Mr(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Mr(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Ev(){}function Av(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function xB(t){this._context=t}xB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Av(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Av(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Jse(t){return new xB(t)}function bB(t){this._context=t}bB.prototype={areaStart:Ev,areaEnd:Ev,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Av(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function eoe(t){return new bB(t)}function wB(t){this._context=t}wB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Av(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function toe(t){return new wB(t)}function _B(t){this._context=t}_B.prototype={areaStart:Ev,areaEnd:Ev,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function noe(t){return new _B(t)}function sD(t){return t<0?-1:1}function oD(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),l=(n-t._y1)/(i||r<0&&-0),f=(a*i+l*r)/(r+i);return(sD(a)+sD(l))*Math.min(Math.abs(a),Math.abs(l),.5*Math.abs(f))||0}function lD(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function J_(t,e,n){var r=t._x0,i=t._y0,a=t._x1,l=t._y1,f=(a-r)/3;t._context.bezierCurveTo(r+f,i+f*e,a-f,l-f*n,a,l)}function Sv(t){this._context=t}Sv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:J_(this,this._t0,lD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,J_(this,lD(this,n=oD(this,t,e)),n);break;default:J_(this,this._t0,n=oD(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function EB(t){this._context=new AB(t)}(EB.prototype=Object.create(Sv.prototype)).point=function(t,e){Sv.prototype.point.call(this,e,t)};function AB(t){this._context=t}AB.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function roe(t){return new Sv(t)}function ioe(t){return new EB(t)}function SB(t){this._context=t}SB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=uD(t),i=uD(e),a=0,l=1;l<n;++a,++l)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[l],e[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function uD(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),l=new Array(n);for(i[0]=0,a[0]=2,l[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,l[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,l[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,l[e]-=r*l[e-1];for(i[n-1]=l[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(l[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function aoe(t){return new SB(t)}function eb(t,e){this._context=t,this._t=e}eb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function soe(t){return new eb(t,.5)}function ooe(t){return new eb(t,0)}function loe(t){return new eb(t,1)}function hd(t,e){if((l=t.length)>1)for(var n=1,r,i,a=t[e[0]],l,f=a.length;n<l;++n)for(i=a,a=t[e[n]],r=0;r<f;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function DA(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function uoe(t,e){return t[e]}function coe(t){const e=[];return e.key=t,e}function foe(){var t=Mr([]),e=DA,n=hd,r=uoe;function i(a){var l=Array.from(t.apply(this,arguments),coe),f,m=l.length,p=-1,b;for(const _ of a)for(f=0,++p;f<m;++f)(l[f][p]=[0,+r(_,l[f].key,p,a)]).data=_;for(f=0,b=gI(e(l));f<m;++f)l[b[f]].index=f;return n(l,b),l}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Mr(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Mr(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?DA:typeof a=="function"?a:Mr(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??hd,i):n},i}function doe(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,l;i<a;++i){for(l=n=0;n<r;++n)l+=t[n][i][1]||0;if(l)for(n=0;n<r;++n)t[n][i][1]/=l}hd(t,e)}}function hoe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var l=0,f=0;l<i;++l)f+=t[l][n][1]||0;r[n][1]+=r[n][0]=-f/2}hd(t,e)}}function moe(t,e){if(!(!((l=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,l;r<a;++r){for(var f=0,m=0,p=0;f<l;++f){for(var b=t[e[f]],_=b[r][1]||0,T=b[r-1][1]||0,N=(_-T)/2,j=0;j<f;++j){var M=t[e[j]],L=M[r][1]||0,z=M[r-1][1]||0;N+=L-z}m+=_,p+=N*_}i[r-1][1]+=i[r-1][0]=n,m&&(n-=p/m)}i[r-1][1]+=i[r-1][0]=n,hd(t,e)}}var e2={},t2={},cD;function goe(){return cD||(cD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(t2)),t2}var n2={},fD;function TB(){return fD||(fD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(n2)),n2}var r2={},dD;function yI(){return dD||(dD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(r2)),r2}var i2={},a2={},hD;function poe(){return hD||(hD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(a2)),a2}var mD;function vI(){return mD||(mD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=poe(),n=yI();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],l=i.length;if(l===0)return a;let f=0,m="",p="",b=!1;for(i.charCodeAt(0)===46&&(a.push(""),f++);f<l;){const _=i[f];p?_==="\\"&&f+1<l?(f++,m+=i[f]):_===p?p="":m+=_:b?_==='"'||_==="'"?p=_:_==="]"?(b=!1,a.push(m),m=""):m+=_:_==="["?(b=!0,m&&(a.push(m),m="")):_==="."?m&&(a.push(m),m=""):m+=_,f++}return m&&a.push(m),a}t.toPath=r})(i2)),i2}var gD;function xI(){return gD||(gD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=goe(),n=TB(),r=yI(),i=vI();function a(f,m,p){if(f==null)return p;switch(typeof m){case"string":{if(e.isUnsafeProperty(m))return p;const b=f[m];return b===void 0?n.isDeepKey(m)?a(f,i.toPath(m),p):p:b}case"number":case"symbol":{typeof m=="number"&&(m=r.toKey(m));const b=f[m];return b===void 0?p:b}default:{if(Array.isArray(m))return l(f,m,p);if(Object.is(m?.valueOf(),-0)?m="-0":m=String(m),e.isUnsafeProperty(m))return p;const b=f[m];return b===void 0?p:b}}}function l(f,m,p){if(m.length===0)return p;let b=f;for(let _=0;_<m.length;_++){if(b==null||e.isUnsafeProperty(m[_]))return p;b=b[m[_]]}return b===void 0?p:b}t.get=a})(e2)),e2}var s2,pD;function yoe(){return pD||(pD=1,s2=xI().get),s2}var voe=yoe();const md=Rl(voe);var xoe=4;function Nc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xoe,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function yi(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,a,l)=>{var f=n[l-1];return typeof f=="string"?i+f+a:f!==void 0?i+Nc(f)+a:i+a},"")}var ga=t=>t===0?0:t>0?1:-1,Ol=t=>typeof t=="number"&&t!=+t,gd=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,St=t=>(typeof t=="number"||t instanceof Number)&&!Ol(t),To=t=>St(t)||typeof t=="string",boe=0,Op=t=>{var e=++boe;return"".concat(t||"").concat(e)},rs=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!St(e)&&typeof e!="string")return r;var a;if(gd(e)){if(n==null)return r;var l=e.indexOf("%");a=n*parseFloat(e.slice(0,l))/100}else a=+e;return Ol(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},IB=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function Jr(t,e,n){return St(t)&&St(e)?Nc(t+n*(e-t)):e}function CB(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):md(r,e))===n)}var li=t=>t===null||typeof t>"u",y0=t=>li(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Ds(t){return t!=null}function Od(){}var woe=["type","size","sizeType"];function kA(){return kA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kA.apply(null,arguments)}function yD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yD(Object(n),!0).forEach(function(r){_oe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _oe(t,e,n){return(e=Eoe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eoe(t){var e=Aoe(t,"string");return typeof e=="symbol"?e:e+""}function Aoe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Soe(t,e){if(t==null)return{};var n,r,i=Toe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Toe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var OB={symbolCircle:pI,symbolCross:zse,symbolDiamond:qse,symbolSquare:Gse,symbolStar:$se,symbolTriangle:Yse,symbolWye:Qse},Ioe=Math.PI/180,Coe=t=>{var e="symbol".concat(y0(t));return OB[e]||pI},Ooe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*Ioe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Noe=(t,e)=>{OB["symbol".concat(y0(t))]=e},NB=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=Soe(t,woe),a=vD(vD({},i),{},{type:e,size:n,sizeType:r}),l="circle";typeof e=="string"&&(l=e);var f=()=>{var T=Coe(l),N=Zse().type(T).size(Ooe(n,r,l)),j=N();if(j!==null)return j},{className:m,cx:p,cy:b}=a,_=is(a);return St(p)&&St(b)&&St(n)?D.createElement("path",kA({},_,{className:Hn("recharts-symbols",m),transform:"translate(".concat(p,", ").concat(b,")"),d:f()})):null};NB.registerSymbol=Noe;var PB=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,bI=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(D.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{hI(i)&&(r[i]=(a=>n[i](n,a)))}),r},Poe=(t,e,n)=>r=>(t(e,n,r),null),tb=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];hI(i)&&typeof a=="function"&&(r||(r={}),r[i]=Poe(a,e,n))}),r};function xD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Roe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xD(Object(n),!0).forEach(function(r){Doe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Doe(t,e,n){return(e=koe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function koe(t){var e=Moe(t,"string");return typeof e=="symbol"?e:e+""}function Moe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qi(t,e){var n=Roe({},t),r=e,i=Object.keys(e),a=i.reduce((l,f)=>(l[f]===void 0&&r[f]!==void 0&&(l[f]=r[f]),l),n);return a}var o2={},l2={},bD;function joe(){return bD||(bD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const l=n[a],f=r(l,a,n);i.has(f)||i.set(f,l)}return Array.from(i.values())}t.uniqBy=e})(l2)),l2}var u2={},wD;function Loe(){return wD||(wD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return function(...i){return n.apply(this,i.slice(0,r))}}t.ary=e})(u2)),u2}var c2={},_D;function RB(){return _D||(_D=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(c2)),c2}var f2={},d2={},h2={},ED;function Boe(){return ED||(ED=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(h2)),h2}var AD;function wI(){return AD||(AD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Boe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(d2)),d2}var m2={},SD;function Foe(){return SD||(SD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(m2)),m2}var TD;function Voe(){return TD||(TD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wI(),n=Foe();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(f2)),f2}var g2={},p2={},ID;function zoe(){return ID||(ID=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xI();function n(r){return function(i){return e.get(i,r)}}t.property=n})(p2)),p2}var y2={},v2={},x2={},b2={},CD;function DB(){return CD||(CD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(b2)),b2}var w2={},OD;function kB(){return OD||(OD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(w2)),w2}var _2={},ND;function MB(){return ND||(ND=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.isEqualsSameValueZero=e})(_2)),_2}var PD;function Uoe(){return PD||(PD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DB(),n=kB(),r=MB();function i(b,_,T){return typeof T!="function"?i(b,_,()=>{}):a(b,_,function N(j,M,L,z,$,K){const X=T(j,M,L,z,$,K);return X!==void 0?!!X:a(j,M,N,K)},new Map)}function a(b,_,T,N){if(_===b)return!0;switch(typeof _){case"object":return l(b,_,T,N);case"function":return Object.keys(_).length>0?a(b,{..._},T,N):r.isEqualsSameValueZero(b,_);default:return e.isObject(b)?typeof _=="string"?_==="":!0:r.isEqualsSameValueZero(b,_)}}function l(b,_,T,N){if(_==null)return!0;if(Array.isArray(_))return m(b,_,T,N);if(_ instanceof Map)return f(b,_,T,N);if(_ instanceof Set)return p(b,_,T,N);const j=Object.keys(_);if(b==null||n.isPrimitive(b))return j.length===0;if(j.length===0)return!0;if(N?.has(_))return N.get(_)===b;N?.set(_,b);try{for(let M=0;M<j.length;M++){const L=j[M];if(!n.isPrimitive(b)&&!(L in b)||_[L]===void 0&&b[L]!==void 0||_[L]===null&&b[L]!==null||!T(b[L],_[L],L,b,_,N))return!1}return!0}finally{N?.delete(_)}}function f(b,_,T,N){if(_.size===0)return!0;if(!(b instanceof Map))return!1;for(const[j,M]of _.entries()){const L=b.get(j);if(T(L,M,j,b,_,N)===!1)return!1}return!0}function m(b,_,T,N){if(_.length===0)return!0;if(!Array.isArray(b))return!1;const j=new Set;for(let M=0;M<_.length;M++){const L=_[M];let z=!1;for(let $=0;$<b.length;$++){if(j.has($))continue;const K=b[$];let X=!1;if(T(K,L,M,b,_,N)&&(X=!0),X){j.add($),z=!0;break}}if(!z)return!1}return!0}function p(b,_,T,N){return _.size===0?!0:b instanceof Set?m([...b],[..._],T,N):!1}t.isMatchWith=i,t.isSetMatch=p})(x2)),x2}var RD;function jB(){return RD||(RD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Uoe();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(v2)),v2}var E2={},A2={},S2={},DD;function qoe(){return DD||(DD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(S2)),S2}var T2={},kD;function _I(){return kD||(kD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(T2)),T2}var I2={},MD;function LB(){return MD||(MD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",l="[object Symbol]",f="[object Date]",m="[object Map]",p="[object Set]",b="[object Array]",_="[object Function]",T="[object ArrayBuffer]",N="[object Object]",j="[object Error]",M="[object DataView]",L="[object Uint8Array]",z="[object Uint8ClampedArray]",$="[object Uint16Array]",K="[object Uint32Array]",X="[object BigUint64Array]",se="[object Int8Array]",J="[object Int16Array]",V="[object Int32Array]",W="[object BigInt64Array]",H="[object Float32Array]",oe="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=T,t.arrayTag=b,t.bigInt64ArrayTag=W,t.bigUint64ArrayTag=X,t.booleanTag=i,t.dataViewTag=M,t.dateTag=f,t.errorTag=j,t.float32ArrayTag=H,t.float64ArrayTag=oe,t.functionTag=_,t.int16ArrayTag=J,t.int32ArrayTag=V,t.int8ArrayTag=se,t.mapTag=m,t.numberTag=r,t.objectTag=N,t.regexpTag=e,t.setTag=p,t.stringTag=n,t.symbolTag=l,t.uint16ArrayTag=$,t.uint32ArrayTag=K,t.uint8ArrayTag=L,t.uint8ClampedArrayTag=z})(I2)),I2}var C2={},jD;function Goe(){return jD||(jD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(C2)),C2}var LD;function BB(){return LD||(LD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qoe(),n=_I(),r=LB(),i=kB(),a=Goe();function l(b,_){return f(b,void 0,b,new Map,_)}function f(b,_,T,N=new Map,j=void 0){const M=j?.(b,_,T,N);if(M!==void 0)return M;if(i.isPrimitive(b))return b;if(N.has(b))return N.get(b);if(Array.isArray(b)){const L=new Array(b.length);N.set(b,L);for(let z=0;z<b.length;z++)L[z]=f(b[z],z,T,N,j);return Object.hasOwn(b,"index")&&(L.index=b.index),Object.hasOwn(b,"input")&&(L.input=b.input),L}if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp){const L=new RegExp(b.source,b.flags);return L.lastIndex=b.lastIndex,L}if(b instanceof Map){const L=new Map;N.set(b,L);for(const[z,$]of b)L.set(z,f($,z,T,N,j));return L}if(b instanceof Set){const L=new Set;N.set(b,L);for(const z of b)L.add(f(z,void 0,T,N,j));return L}if(typeof Buffer<"u"&&Buffer.isBuffer(b))return b.subarray();if(a.isTypedArray(b)){const L=new(Object.getPrototypeOf(b)).constructor(b.length);N.set(b,L);for(let z=0;z<b.length;z++)L[z]=f(b[z],z,T,N,j);return L}if(b instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&b instanceof SharedArrayBuffer)return b.slice(0);if(b instanceof DataView){const L=new DataView(b.buffer.slice(0),b.byteOffset,b.byteLength);return N.set(b,L),m(L,b,T,N,j),L}if(typeof File<"u"&&b instanceof File){const L=new File([b],b.name,{type:b.type});return N.set(b,L),m(L,b,T,N,j),L}if(typeof Blob<"u"&&b instanceof Blob){const L=new Blob([b],{type:b.type});return N.set(b,L),m(L,b,T,N,j),L}if(b instanceof Error){const L=new b.constructor;return N.set(b,L),L.message=b.message,L.name=b.name,L.stack=b.stack,L.cause=b.cause,m(L,b,T,N,j),L}if(b instanceof Boolean){const L=new Boolean(b.valueOf());return N.set(b,L),m(L,b,T,N,j),L}if(b instanceof Number){const L=new Number(b.valueOf());return N.set(b,L),m(L,b,T,N,j),L}if(b instanceof String){const L=new String(b.valueOf());return N.set(b,L),m(L,b,T,N,j),L}if(typeof b=="object"&&p(b)){const L=Object.create(Object.getPrototypeOf(b));return N.set(b,L),m(L,b,T,N,j),L}return b}function m(b,_,T=b,N,j){const M=[...Object.keys(_),...e.getSymbols(_)];for(let L=0;L<M.length;L++){const z=M[L],$=Object.getOwnPropertyDescriptor(b,z);($==null||$.writable)&&(b[z]=f(_[z],z,T,N,j))}}function p(b){switch(n.getTag(b)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=l,t.cloneDeepWithImpl=f,t.copyProperties=m})(A2)),A2}var BD;function Hoe(){return BD||(BD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BB();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(E2)),E2}var FD;function Koe(){return FD||(FD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jB(),n=Hoe();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(y2)),y2}var O2={},N2={},P2={},VD;function Woe(){return VD||(VD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BB(),n=_I(),r=LB();function i(a,l){return e.cloneDeepWith(a,(f,m,p,b)=>{const _=l?.(f,m,p,b);if(_!==void 0)return _;if(typeof a=="object"){if(n.getTag(a)===r.objectTag&&typeof a.constructor!="function"){const T={};return b.set(a,T),e.copyProperties(T,a,p,b),T}switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const T=new a.constructor(a?.valueOf());return e.copyProperties(T,a),T}case r.argumentsTag:{const T={};return e.copyProperties(T,a),T.length=a.length,T[Symbol.iterator]=a[Symbol.iterator],T}default:return}}})}t.cloneDeepWith=i})(P2)),P2}var zD;function $oe(){return zD||(zD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Woe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(N2)),N2}var R2={},D2={},UD;function FB(){return UD||(UD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(D2)),D2}var k2={},qD;function Yoe(){return qD||(qD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_I();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(k2)),k2}var GD;function Xoe(){return GD||(GD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=TB(),n=FB(),r=Yoe(),i=vI();function a(l,f){let m;if(Array.isArray(f)?m=f:typeof f=="string"&&e.isDeepKey(f)&&l?.[f]==null?m=i.toPath(f):m=[f],m.length===0)return!1;let p=l;for(let b=0;b<m.length;b++){const _=m[b];if((p==null||!Object.hasOwn(p,_))&&!((Array.isArray(p)||r.isArguments(p))&&n.isIndex(_)&&_<p.length))return!1;p=p[_]}return!0}t.has=a})(R2)),R2}var HD;function Qoe(){return HD||(HD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jB(),n=yI(),r=$oe(),i=xI(),a=Xoe();function l(f,m){switch(typeof f){case"object":{Object.is(f?.valueOf(),-0)&&(f="-0");break}case"number":{f=n.toKey(f);break}}return m=r.cloneDeep(m),function(p){const b=i.get(p,f);return b===void 0?a.has(p,f):m===void 0?b===void 0:e.isMatch(b,m)}}t.matchesProperty=l})(O2)),O2}var KD;function Zoe(){return KD||(KD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RB(),n=zoe(),r=Koe(),i=Qoe();function a(l){if(l==null)return e.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}t.iteratee=a})(g2)),g2}var WD;function Joe(){return WD||(WD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=joe(),n=Loe(),r=RB(),i=Voe(),a=Zoe();function l(f,m=r.identity){return i.isArrayLikeObject(f)?e.uniqBy(Array.from(f),n.ary(a.iteratee(m),1)):[]}t.uniqBy=l})(o2)),o2}var M2,$D;function ele(){return $D||($D=1,M2=Joe().uniqBy),M2}var tle=ele();const YD=Rl(tle);function nle(t,e,n){return e===!0?YD(t,n):typeof e=="function"?YD(t,e):t}var j2={exports:{}},L2={},B2={exports:{}},F2={};var XD;function rle(){if(XD)return F2;XD=1;var t=mm();function e(_,T){return _===T&&(_!==0||1/_===1/T)||_!==_&&T!==T}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,l=t.useDebugValue;function f(_,T){var N=T(),j=r({inst:{value:N,getSnapshot:T}}),M=j[0].inst,L=j[1];return a(function(){M.value=N,M.getSnapshot=T,m(M)&&L({inst:M})},[_,N,T]),i(function(){return m(M)&&L({inst:M}),_(function(){m(M)&&L({inst:M})})},[_]),l(N),N}function m(_){var T=_.getSnapshot;_=_.value;try{var N=T();return!n(_,N)}catch{return!0}}function p(_,T){return T()}var b=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:f;return F2.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:b,F2}var QD;function ile(){return QD||(QD=1,B2.exports=rle()),B2.exports}var ZD;function ale(){if(ZD)return L2;ZD=1;var t=mm(),e=ile();function n(p,b){return p===b&&(p!==0||1/p===1/b)||p!==p&&b!==b}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,l=t.useEffect,f=t.useMemo,m=t.useDebugValue;return L2.useSyncExternalStoreWithSelector=function(p,b,_,T,N){var j=a(null);if(j.current===null){var M={hasValue:!1,value:null};j.current=M}else M=j.current;j=f(function(){function z(J){if(!$){if($=!0,K=J,J=T(J),N!==void 0&&M.hasValue){var V=M.value;if(N(V,J))return X=V}return X=J}if(V=X,r(K,J))return V;var W=T(J);return N!==void 0&&N(V,W)?(K=J,V):(K=J,X=W)}var $=!1,K,X,se=_===void 0?null:_;return[function(){return z(b())},se===null?void 0:function(){return z(se())}]},[b,_,T,N]);var L=i(p,j[0],j[1]);return l(function(){M.hasValue=!0,M.value=L},[L]),m(L),L},L2}var JD;function sle(){return JD||(JD=1,j2.exports=ale()),j2.exports}var ole=sle(),EI=D.createContext(null),lle=t=>t,Gr=()=>{var t=D.useContext(EI);return t?t.store.dispatch:lle},Ry=()=>{},ule=()=>Ry,cle=(t,e)=>t===e;function Tt(t){var e=D.useContext(EI),n=D.useMemo(()=>e?r=>{if(r!=null)return t(r)}:Ry,[e,t]);return ole.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:ule,e?e.store.getState:Ry,e?e.store.getState:Ry,n,cle)}function fle(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function dle(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function hle(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var ek=t=>Array.isArray(t)?t:[t];function mle(t){const e=Array.isArray(t[0])?t[0]:t;return hle(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function gle(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var ple=class{constructor(t){this.value=t}deref(){return this.value}},yle=typeof WeakRef<"u"?WeakRef:ple,vle=0,tk=1;function X1(){return{s:vle,v:void 0,o:null,p:null}}function VB(t,e={}){let n=X1();const{resultEqualityCheck:r}=e;let i,a=0;function l(){let f=n;const{length:m}=arguments;for(let _=0,T=m;_<T;_++){const N=arguments[_];if(typeof N=="function"||typeof N=="object"&&N!==null){let j=f.o;j===null&&(f.o=j=new WeakMap);const M=j.get(N);M===void 0?(f=X1(),j.set(N,f)):f=M}else{let j=f.p;j===null&&(f.p=j=new Map);const M=j.get(N);M===void 0?(f=X1(),j.set(N,f)):f=M}}const p=f;let b;if(f.s===tk)b=f.v;else if(b=t.apply(null,arguments),a++,r){const _=i?.deref?.()??i;_!=null&&r(_,b)&&(b=_,a!==0&&a--),i=typeof b=="object"&&b!==null||typeof b=="function"?new yle(b):b}return p.s=tk,p.v=b,b}return l.clearCache=()=>{n=X1(),l.resetResultsCount()},l.resultsCount=()=>a,l.resetResultsCount=()=>{a=0},l}function xle(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,l=0,f,m={},p=i.pop();typeof p=="object"&&(m=p,p=i.pop()),fle(p,`createSelector expects an output function after the inputs, but received: [${typeof p}]`);const b={...n,...m},{memoize:_,memoizeOptions:T=[],argsMemoize:N=VB,argsMemoizeOptions:j=[]}=b,M=ek(T),L=ek(j),z=mle(i),$=_(function(){return a++,p.apply(null,arguments)},...M),K=N(function(){l++;const se=gle(z,arguments);return f=$.apply(null,se),f},...L);return Object.assign(K,{resultFunc:p,memoizedResultFunc:$,dependencies:z,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>f,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:_,argsMemoize:N})};return Object.assign(r,{withTypes:()=>r}),r}var Oe=xle(VB),ble=Object.assign((t,e=Oe)=>{dle(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((l,f,m)=>(l[n[m]]=f,l),{}))},{withTypes:()=>ble}),V2={},z2={},U2={},nk;function wle(){return nk||(nk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const l=e(r),f=e(i);if(l===f&&l===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?f-l:l-f}return 0};t.compareValues=n})(U2)),U2}var q2={},G2={},rk;function zB(){return rk||(rk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(G2)),G2}var ik;function _le(){return ik||(ik=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zB(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,l){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||l!=null&&Object.hasOwn(l,a)}t.isKey=i})(q2)),q2}var ak;function Ele(){return ak||(ak=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wle(),n=_le(),r=vI();function i(a,l,f,m){if(a==null)return[];f=m?void 0:f,Array.isArray(a)||(a=Object.values(a)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(f)||(f=f==null?[]:[f]),f=f.map(N=>String(N));const p=(N,j)=>{let M=N;for(let L=0;L<j.length&&M!=null;++L)M=M[j[L]];return M},b=(N,j)=>j==null||N==null?j:typeof N=="object"&&"key"in N?Object.hasOwn(j,N.key)?j[N.key]:p(j,N.path):typeof N=="function"?N(j):Array.isArray(N)?p(j,N):typeof j=="object"?j[N]:j,_=l.map(N=>(Array.isArray(N)&&N.length===1&&(N=N[0]),N==null||typeof N=="function"||Array.isArray(N)||n.isKey(N)?N:{key:N,path:r.toPath(N)}));return a.map(N=>({original:N,criteria:_.map(j=>b(j,N))})).slice().sort((N,j)=>{for(let M=0;M<_.length;M++){const L=e.compareValues(N.criteria[M],j.criteria[M],f[M]);if(L!==0)return L}return 0}).map(N=>N.original)}t.orderBy=i})(z2)),z2}var H2={},sk;function Ale(){return sk||(sk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),l=(f,m)=>{for(let p=0;p<f.length;p++){const b=f[p];Array.isArray(b)&&m<a?l(b,m+1):i.push(b)}};return l(n,0),i}t.flatten=e})(H2)),H2}var K2={},ok;function UB(){return ok||(ok=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FB(),n=wI(),r=DB(),i=MB();function a(l,f,m){return r.isObject(m)&&(typeof f=="number"&&n.isArrayLike(m)&&e.isIndex(f)&&f<m.length||typeof f=="string"&&f in m)?i.isEqualsSameValueZero(m[f],l):!1}t.isIterateeCall=a})(K2)),K2}var lk;function Sle(){return lk||(lk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ele(),n=Ale(),r=UB();function i(a,...l){const f=l.length;return f>1&&r.isIterateeCall(a,l[0],l[1])?l=[]:f>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),e.orderBy(a,n.flatten(l),["asc"])}t.sortBy=i})(V2)),V2}var W2,uk;function Tle(){return uk||(uk=1,W2=Sle().sortBy),W2}var Ile=Tle();const nb=Rl(Ile);var qB=t=>t.legend.settings,Cle=t=>t.legend.size,Ole=t=>t.legend.payload;Oe([Ole,qB],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?nb(r,n):r});var Q1=1;function Nle(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=D.useState({height:0,left:0,top:0,width:0}),r=D.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),l={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(l.height-e.height)>Q1||Math.abs(l.left-e.left)>Q1||Math.abs(l.top-e.top)>Q1||Math.abs(l.width-e.width)>Q1)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function ka(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Ple=typeof Symbol=="function"&&Symbol.observable||"@@observable",ck=Ple,$2=()=>Math.random().toString(36).substring(7).split("").join("."),Rle={INIT:`@@redux/INIT${$2()}`,REPLACE:`@@redux/REPLACE${$2()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${$2()}`},Tv=Rle;function AI(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function GB(t,e,n){if(typeof t!="function")throw new Error(ka(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ka(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ka(1));return n(GB)(t,e)}let r=t,i=e,a=new Map,l=a,f=0,m=!1;function p(){l===a&&(l=new Map,a.forEach((L,z)=>{l.set(z,L)}))}function b(){if(m)throw new Error(ka(3));return i}function _(L){if(typeof L!="function")throw new Error(ka(4));if(m)throw new Error(ka(5));let z=!0;p();const $=f++;return l.set($,L),function(){if(z){if(m)throw new Error(ka(6));z=!1,p(),l.delete($),a=null}}}function T(L){if(!AI(L))throw new Error(ka(7));if(typeof L.type>"u")throw new Error(ka(8));if(typeof L.type!="string")throw new Error(ka(17));if(m)throw new Error(ka(9));try{m=!0,i=r(i,L)}finally{m=!1}return(a=l).forEach($=>{$()}),L}function N(L){if(typeof L!="function")throw new Error(ka(10));r=L,T({type:Tv.REPLACE})}function j(){const L=_;return{subscribe(z){if(typeof z!="object"||z===null)throw new Error(ka(11));function $(){const X=z;X.next&&X.next(b())}return $(),{unsubscribe:L($)}},[ck](){return this}}}return T({type:Tv.INIT}),{dispatch:T,subscribe:_,getState:b,replaceReducer:N,[ck]:j}}function Dle(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Tv.INIT})>"u")throw new Error(ka(12));if(typeof n(void 0,{type:Tv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ka(13))})}function HB(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const l=e[a];typeof t[l]=="function"&&(n[l]=t[l])}const r=Object.keys(n);let i;try{Dle(n)}catch(a){i=a}return function(l={},f){if(i)throw i;let m=!1;const p={};for(let b=0;b<r.length;b++){const _=r[b],T=n[_],N=l[_],j=T(N,f);if(typeof j>"u")throw f&&f.type,new Error(ka(14));p[_]=j,m=m||j!==N}return m=m||r.length!==Object.keys(l).length,m?p:l}}function Iv(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function kle(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(ka(15))};const l={getState:i.getState,dispatch:(m,...p)=>a(m,...p)},f=t.map(m=>m(l));return a=Iv(...f)(i.dispatch),{...i,dispatch:a}}}function KB(t){return AI(t)&&"type"in t&&typeof t.type=="string"}var WB=Symbol.for("immer-nothing"),fk=Symbol.for("immer-draftable"),fs=Symbol.for("immer-state");function Vo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var eo=Object,om=eo.getPrototypeOf,Cv="constructor",rb="prototype",MA="configurable",Ov="enumerable",Dy="writable",Np="value",Su=t=>!!t&&!!t[fs];function Yo(t){return t?$B(t)||ab(t)||!!t[fk]||!!t[Cv]?.[fk]||sb(t)||ob(t):!1}var Mle=eo[rb][Cv].toString(),dk=new WeakMap;function $B(t){if(!t||!SI(t))return!1;const e=om(t);if(e===null||e===eo[rb])return!0;const n=eo.hasOwnProperty.call(e,Cv)&&e[Cv];if(n===Object)return!0;if(!_h(n))return!1;let r=dk.get(n);return r===void 0&&(r=Function.toString.call(n),dk.set(n,r)),r===Mle}function ib(t,e,n=!0){v0(t)===0?(n?Reflect.ownKeys(t):eo.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function v0(t){const e=t[fs];return e?e.type_:ab(t)?1:sb(t)?2:ob(t)?3:0}var hk=(t,e,n=v0(t))=>n===2?t.has(e):eo[rb].hasOwnProperty.call(t,e),jA=(t,e,n=v0(t))=>n===2?t.get(e):t[e],Nv=(t,e,n,r=v0(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function jle(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var ab=Array.isArray,sb=t=>t instanceof Map,ob=t=>t instanceof Set,SI=t=>typeof t=="object",_h=t=>typeof t=="function",Y2=t=>typeof t=="boolean";function Lle(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var su=t=>t.copy_||t.base_,TI=t=>t.modified_?t.copy_:t.base_;function LA(t,e){if(sb(t))return new Map(t);if(ob(t))return new Set(t);if(ab(t))return Array[rb].slice.call(t);const n=$B(t);if(e===!0||e==="class_only"&&!n){const r=eo.getOwnPropertyDescriptors(t);delete r[fs];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const l=i[a],f=r[l];f[Dy]===!1&&(f[Dy]=!0,f[MA]=!0),(f.get||f.set)&&(r[l]={[MA]:!0,[Dy]:!0,[Ov]:f[Ov],[Np]:t[l]})}return eo.create(om(t),r)}else{const r=om(t);if(r!==null&&n)return{...t};const i=eo.create(r);return eo.assign(i,t)}}function II(t,e=!1){return lb(t)||Su(t)||!Yo(t)||(v0(t)>1&&eo.defineProperties(t,{set:Z1,add:Z1,clear:Z1,delete:Z1}),eo.freeze(t),e&&ib(t,(n,r)=>{II(r,!0)},!1)),t}function Ble(){Vo(2)}var Z1={[Np]:Ble};function lb(t){return t===null||!SI(t)?!0:eo.isFrozen(t)}var Pv="MapSet",BA="Patches",mk="ArrayMethods",YB={};function pd(t){const e=YB[t];return e||Vo(0,t),e}var gk=t=>!!YB[t],Pp,XB=()=>Pp,Fle=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:gk(Pv)?pd(Pv):void 0,arrayMethodsPlugin_:gk(mk)?pd(mk):void 0});function pk(t,e){e&&(t.patchPlugin_=pd(BA),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function FA(t){VA(t),t.drafts_.forEach(Vle),t.drafts_=null}function VA(t){t===Pp&&(Pp=t.parent_)}var yk=t=>Pp=Fle(Pp,t);function Vle(t){const e=t[fs];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function vk(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[fs].modified_&&(FA(e),Vo(4)),Yo(t)&&(t=xk(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[fs].base_,t,e)}else t=xk(e,n);return zle(e,t,!0),FA(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==WB?t:void 0}function xk(t,e){if(lb(e))return e;const n=e[fs];if(!n)return Rv(e,t.handledSet_,t);if(!ub(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);JB(n,t)}return n.copy_}function zle(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&II(e,n)}function QB(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var ub=(t,e)=>t.scope_===e,Ule=[];function ZB(t,e,n,r){const i=su(t),a=t.type_;if(r!==void 0&&jA(i,r,a)===e){Nv(i,r,n,a);return}if(!t.draftLocations_){const f=t.draftLocations_=new Map;ib(i,(m,p)=>{if(Su(p)){const b=f.get(p)||[];b.push(m),f.set(p,b)}})}const l=t.draftLocations_.get(e)??Ule;for(const f of l)Nv(i,f,n,a)}function qle(t,e,n){t.callbacks_.push(function(i){const a=e;if(!a||!ub(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const l=TI(a);ZB(t,a.draft_??a,l,n),JB(a,i)})}function JB(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}QB(t)}}function Gle(t,e,n){const{scope_:r}=t;if(Su(n)){const i=n[fs];ub(i,r)&&i.callbacks_.push(function(){ky(t);const l=TI(i);ZB(t,n,l,e)})}else Yo(n)&&t.callbacks_.push(function(){const a=su(t);t.type_===3?a.has(n)&&Rv(n,r.handledSet_,r):jA(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&Rv(jA(t.copy_,e,t.type_),r.handledSet_,r)})}function Rv(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Su(t)||e.has(t)||!Yo(t)||lb(t)||(e.add(t),ib(t,(r,i)=>{if(Su(i)){const a=i[fs];if(ub(a,n)){const l=TI(a);Nv(t,r,l,t.type_),QB(a)}}else Yo(i)&&Rv(i,e,n)})),t}function Hle(t,e){const n=ab(t),r={type_:n?1:0,scope_:e?e.scope_:XB(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=Dv;n&&(i=[r],a=Rp);const{revoke:l,proxy:f}=Proxy.revocable(i,a);return r.draft_=f,r.revoke_=l,[f,r]}var Dv={get(t,e){if(e===fs)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=su(t);if(!hk(i,e,t.type_))return Kle(t,i,e);const a=i[e];if(t.finalized_||!Yo(a)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&Lle(e))return a;if(a===X2(t.base_,e)){ky(t);const l=t.type_===1?+e:e,f=UA(t.scope_,a,t,l);return t.copy_[l]=f}return a},has(t,e){return e in su(t)},ownKeys(t){return Reflect.ownKeys(su(t))},set(t,e,n){const r=eF(su(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=X2(su(t),e),a=i?.[fs];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(jle(n,i)&&(n!==void 0||hk(t.base_,e,t.type_)))return!0;ky(t),zA(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),Gle(t,e,n)),!0},deleteProperty(t,e){return ky(t),X2(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),zA(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=su(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[Dy]:!0,[MA]:t.type_!==1||e!=="length",[Ov]:r[Ov],[Np]:n[e]}},defineProperty(){Vo(11)},getPrototypeOf(t){return om(t.base_)},setPrototypeOf(){Vo(12)}},Rp={};for(let t in Dv){let e=Dv[t];Rp[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}Rp.deleteProperty=function(t,e){return Rp.set.call(this,t,e,void 0)};Rp.set=function(t,e,n){return Dv.set.call(this,t[0],e,n,t[0])};function X2(t,e){const n=t[fs];return(n?su(n):t)[e]}function Kle(t,e,n){const r=eF(e,n);return r?Np in r?r[Np]:r.get?.call(t.draft_):void 0}function eF(t,e){if(!(e in t))return;let n=om(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=om(n)}}function zA(t){t.modified_||(t.modified_=!0,t.parent_&&zA(t.parent_))}function ky(t){t.copy_||(t.assigned_=new Map,t.copy_=LA(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Wle=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(_h(n)&&!_h(r)){const l=r;r=n;const f=this;return function(p=l,...b){return f.produce(p,_=>r.call(this,_,...b))}}_h(r)||Vo(6),i!==void 0&&!_h(i)&&Vo(7);let a;if(Yo(n)){const l=yk(this),f=UA(l,n,void 0);let m=!0;try{a=r(f),m=!1}finally{m?FA(l):VA(l)}return pk(l,i),vk(a,l)}else if(!n||!SI(n)){if(a=r(n),a===void 0&&(a=n),a===WB&&(a=void 0),this.autoFreeze_&&II(a,!0),i){const l=[],f=[];pd(BA).generateReplacementPatches_(n,a,{patches_:l,inversePatches_:f}),i(l,f)}return a}else Vo(1,n)},this.produceWithPatches=(n,r)=>{if(_h(n))return(f,...m)=>this.produceWithPatches(f,p=>n(p,...m));let i,a;return[this.produce(n,r,(f,m)=>{i=f,a=m}),i,a]},Y2(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),Y2(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),Y2(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Yo(e)||Vo(8),Su(e)&&(e=Ko(e));const n=yk(this),r=UA(n,e,void 0);return r[fs].isManual_=!0,VA(n),r}finishDraft(e,n){const r=e&&e[fs];(!r||!r.isManual_)&&Vo(9);const{scope_:i}=r;return pk(i,n),vk(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=pd(BA).applyPatches_;return Su(e)?i(e,n):this.produce(e,a=>i(a,n))}};function UA(t,e,n,r){const[i,a]=sb(e)?pd(Pv).proxyMap_(e,n):ob(e)?pd(Pv).proxySet_(e,n):Hle(e,n);return(n?.scope_??XB()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?qle(n,a,r):a.callbacks_.push(function(m){m.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:p}=m;a.modified_&&p&&p.generatePatches_(a,[],m)}),i}function Ko(t){return Su(t)||Vo(10,t),tF(t)}function tF(t){if(!Yo(t)||lb(t))return t;const e=t[fs];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=LA(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=LA(t,!0);return ib(n,(i,a)=>{Nv(n,i,tF(a))},r),e&&(e.finalized_=!1),n}var $le=new Wle,nF=$le.produce;function rF(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var Yle=rF(),Xle=rF,Qle=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Iv:Iv.apply(null,arguments)};function Io(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(ro(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>KB(r)&&r.type===t,n}var iF=class Yg extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Yg.prototype)}static get[Symbol.species](){return Yg}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Yg(...e[0].concat(this)):new Yg(...e.concat(this))}};function bk(t){return Yo(t)?nF(t,()=>{}):t}function J1(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function Zle(t){return typeof t=="boolean"}var Jle=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let l=new iF;return n&&(Zle(n)?l.push(Yle):l.push(Xle(n.extraArgument))),l},aF="RTK_autoBatch",Qr=()=>t=>({payload:t,meta:{[aF]:!0}}),wk=t=>e=>{setTimeout(e,t)},sF=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,l=!1;const f=new Set,m=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:wk(10):t.type==="callback"?t.queueNotification:wk(t.timeout),p=()=>{l=!1,a&&(a=!1,f.forEach(b=>b()))};return Object.assign({},r,{subscribe(b){const _=()=>i&&b(),T=r.subscribe(_);return f.add(b),()=>{T(),f.delete(b)}},dispatch(b){try{return i=!b?.meta?.[aF],a=!i,a&&(l||(l=!0,m(p))),r.dispatch(b)}finally{i=!0}}})},eue=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new iF(t);return r&&i.push(sF(typeof r=="object"?r:void 0)),i};function tue(t){const e=Jle(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:l=void 0}=t||{};let f;if(typeof n=="function")f=n;else if(AI(n))f=HB(n);else throw new Error(ro(1));let m;typeof r=="function"?m=r(e):m=e();let p=Iv;i&&(p=Qle({trace:!1,...typeof i=="object"&&i}));const b=kle(...m),_=eue(b);let T=typeof l=="function"?l(_):_();const N=p(...T);return GB(f,a,N)}function oF(t){const e={},n=[];let r;const i={addCase(a,l){const f=typeof a=="string"?a:a.type;if(!f)throw new Error(ro(28));if(f in e)throw new Error(ro(29));return e[f]=l,i},addAsyncThunk(a,l){return l.pending&&(e[a.pending.type]=l.pending),l.rejected&&(e[a.rejected.type]=l.rejected),l.fulfilled&&(e[a.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:a.settled,reducer:l.settled}),i},addMatcher(a,l){return n.push({matcher:a,reducer:l}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function nue(t){return typeof t=="function"}function rue(t,e){let[n,r,i]=oF(e),a;if(nue(t))a=()=>bk(t());else{const f=bk(t);a=()=>f}function l(f=a(),m){let p=[n[m.type],...r.filter(({matcher:b})=>b(m)).map(({reducer:b})=>b)];return p.filter(b=>!!b).length===0&&(p=[i]),p.reduce((b,_)=>{if(_)if(Su(b)){const N=_(b,m);return N===void 0?b:N}else{if(Yo(b))return nF(b,T=>_(T,m));{const T=_(b,m);if(T===void 0){if(b===null)return b;throw Error("A case reducer on a non-draftable value must not return undefined")}return T}}return b},f)}return l.getInitialState=a,l}var iue="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",aue=(t=21)=>{let e="",n=t;for(;n--;)e+=iue[Math.random()*64|0];return e},sue=Symbol.for("rtk-slice-createasyncthunk");function oue(t,e){return`${t}/${e}`}function lue({creators:t}={}){const e=t?.asyncThunk?.[sue];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(ro(11));const l=(typeof r.reducers=="function"?r.reducers(cue()):r.reducers)||{},f=Object.keys(l),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(K,X){const se=typeof K=="string"?K:K.type;if(!se)throw new Error(ro(12));if(se in m.sliceCaseReducersByType)throw new Error(ro(13));return m.sliceCaseReducersByType[se]=X,p},addMatcher(K,X){return m.sliceMatchers.push({matcher:K,reducer:X}),p},exposeAction(K,X){return m.actionCreators[K]=X,p},exposeCaseReducer(K,X){return m.sliceCaseReducersByName[K]=X,p}};f.forEach(K=>{const X=l[K],se={reducerName:K,type:oue(i,K),createNotation:typeof r.reducers=="function"};due(X)?mue(se,X,p,e):fue(se,X,p)});function b(){const[K={},X=[],se=void 0]=typeof r.extraReducers=="function"?oF(r.extraReducers):[r.extraReducers],J={...K,...m.sliceCaseReducersByType};return rue(r.initialState,V=>{for(let W in J)V.addCase(W,J[W]);for(let W of m.sliceMatchers)V.addMatcher(W.matcher,W.reducer);for(let W of X)V.addMatcher(W.matcher,W.reducer);se&&V.addDefaultCase(se)})}const _=K=>K,T=new Map,N=new WeakMap;let j;function M(K,X){return j||(j=b()),j(K,X)}function L(){return j||(j=b()),j.getInitialState()}function z(K,X=!1){function se(V){let W=V[K];return typeof W>"u"&&X&&(W=J1(N,se,L)),W}function J(V=_){const W=J1(T,X,()=>new WeakMap);return J1(W,V,()=>{const H={};for(const[oe,ae]of Object.entries(r.selectors??{}))H[oe]=uue(ae,V,()=>J1(N,V,L),X);return H})}return{reducerPath:K,getSelectors:J,get selectors(){return J(se)},selectSlice:se}}const $={name:i,reducer:M,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:L,...z(a),injectInto(K,{reducerPath:X,...se}={}){const J=X??a;return K.inject({reducerPath:J,reducer:M},se),{...$,...z(J,!0)}}};return $}}function uue(t,e,n,r){function i(a,...l){let f=e(a);return typeof f>"u"&&r&&(f=n()),t(f,...l)}return i.unwrapped=t,i}var Bs=lue();function cue(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function fue({type:t,reducerName:e,createNotation:n},r,i){let a,l;if("reducer"in r){if(n&&!hue(r))throw new Error(ro(17));a=r.reducer,l=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,l?Io(t,l):Io(t))}function due(t){return t._reducerDefinitionType==="asyncThunk"}function hue(t){return t._reducerDefinitionType==="reducerWithPrepare"}function mue({type:t,reducerName:e},n,r,i){if(!i)throw new Error(ro(18));const{payloadCreator:a,fulfilled:l,pending:f,rejected:m,settled:p,options:b}=n,_=i(t,a,b);r.exposeAction(e,_),l&&r.addCase(_.fulfilled,l),f&&r.addCase(_.pending,f),m&&r.addCase(_.rejected,m),p&&r.addMatcher(_.settled,p),r.exposeCaseReducer(e,{fulfilled:l||ey,pending:f||ey,rejected:m||ey,settled:p||ey})}function ey(){}var gue="task",lF="listener",uF="completed",CI="cancelled",pue=`task-${CI}`,yue=`task-${uF}`,qA=`${lF}-${CI}`,vue=`${lF}-${uF}`,cb=class{constructor(t){this.code=t,this.message=`${gue} ${CI} (reason: ${t})`}name="TaskAbortError";message},OI=(t,e)=>{if(typeof t!="function")throw new TypeError(ro(32))},kv=()=>{},cF=(t,e=kv)=>(t.catch(e),t),fF=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Yf=t=>{if(t.aborted)throw new cb(t.reason)};function dF(t,e){let n=kv;return new Promise((r,i)=>{const a=()=>i(new cb(t.reason));if(t.aborted){a();return}n=fF(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=kv})}var xue=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof cb?"cancelled":"rejected",error:n}}finally{e?.()}},Mv=t=>e=>cF(dF(t,e).then(n=>(Yf(t),n))),hF=t=>{const e=Mv(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Mh}=Object,_k={},fb="listenerMiddleware",bue=(t,e)=>{const n=r=>fF(t,()=>r.abort(t.reason));return(r,i)=>{OI(r);const a=new AbortController;n(a);const l=xue(async()=>{Yf(t),Yf(a.signal);const f=await r({pause:Mv(a.signal),delay:hF(a.signal),signal:a.signal});return Yf(a.signal),f},()=>a.abort(yue));return i?.autoJoin&&e.push(l.catch(kv)),{result:Mv(t)(l),cancel(){a.abort(pue)}}}},wue=(t,e)=>{const n=async(r,i)=>{Yf(e);let a=()=>{};const f=[new Promise((m,p)=>{let b=t({predicate:r,effect:(_,T)=>{T.unsubscribe(),m([_,T.getState(),T.getOriginalState()])}});a=()=>{b(),p()}})];i!=null&&f.push(new Promise(m=>setTimeout(m,i,null)));try{const m=await dF(e,Promise.race(f));return Yf(e),m}finally{a()}};return(r,i)=>cF(n(r,i))},mF=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=Io(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(ro(21));return OI(a),{predicate:i,type:e,effect:a}},gF=Mh(t=>{const{type:e,predicate:n,effect:r}=mF(t);return{id:aue(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ro(22))}}},{withTypes:()=>gF}),Ek=(t,e)=>{const{type:n,effect:r,predicate:i}=mF(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},GA=t=>{t.pending.forEach(e=>{e.abort(qA)})},_ue=(t,e)=>()=>{for(const n of e.keys())GA(n);t.clear()},Ak=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},pF=Mh(Io(`${fb}/add`),{withTypes:()=>pF}),Eue=Io(`${fb}/removeAll`),yF=Mh(Io(`${fb}/remove`),{withTypes:()=>yF}),Aue=(...t)=>{console.error(`${fb}/error`,...t)},x0=(t={})=>{const e=new Map,n=new Map,r=N=>{const j=n.get(N)??0;n.set(N,j+1)},i=N=>{const j=n.get(N)??1;j===1?n.delete(N):n.set(N,j-1)},{extra:a,onError:l=Aue}=t;OI(l);const f=N=>(N.unsubscribe=()=>e.delete(N.id),e.set(N.id,N),j=>{N.unsubscribe(),j?.cancelActive&&GA(N)}),m=N=>{const j=Ek(e,N)??gF(N);return f(j)};Mh(m,{withTypes:()=>m});const p=N=>{const j=Ek(e,N);return j&&(j.unsubscribe(),N.cancelActive&&GA(j)),!!j};Mh(p,{withTypes:()=>p});const b=async(N,j,M,L)=>{const z=new AbortController,$=wue(m,z.signal),K=[];try{N.pending.add(z),r(N),await Promise.resolve(N.effect(j,Mh({},M,{getOriginalState:L,condition:(X,se)=>$(X,se).then(Boolean),take:$,delay:hF(z.signal),pause:Mv(z.signal),extra:a,signal:z.signal,fork:bue(z.signal,K),unsubscribe:N.unsubscribe,subscribe:()=>{e.set(N.id,N)},cancelActiveListeners:()=>{N.pending.forEach((X,se,J)=>{X!==z&&(X.abort(qA),J.delete(X))})},cancel:()=>{z.abort(qA),N.pending.delete(z)},throwIfCancelled:()=>{Yf(z.signal)}})))}catch(X){X instanceof cb||Ak(l,X,{raisedBy:"effect"})}finally{await Promise.all(K),z.abort(vue),i(N),N.pending.delete(z)}},_=_ue(e,n);return{middleware:N=>j=>M=>{if(!KB(M))return j(M);if(pF.match(M))return m(M.payload);if(Eue.match(M)){_();return}if(yF.match(M))return p(M.payload);let L=N.getState();const z=()=>{if(L===_k)throw new Error(ro(23));return L};let $;try{if($=j(M),e.size>0){const K=N.getState(),X=Array.from(e.values());for(const se of X){let J=!1;try{J=se.predicate(M,K,L)}catch(V){J=!1,Ak(l,V,{raisedBy:"predicate"})}J&&b(se,M,N,z)}}}finally{L=_k}return $},startListening:m,stopListening:p,clearListeners:_}};function ro(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Sue={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},vF=Bs({name:"chartLayout",initialState:Sue,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:Tue,setLayout:Iue,setChartSize:Cue,setScale:Oue}=vF.actions,Nue=vF.reducer;function xF(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function mn(t){return Number.isFinite(t)}function Nl(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function Sk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sk(Object(n),!0).forEach(function(r){Pue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pue(t,e,n){return(e=Rue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rue(t){var e=Due(t,"string");return typeof e=="symbol"?e:e+""}function Due(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function br(t,e,n){return li(t)||li(e)?n:To(e)?md(t,e,n):typeof e=="function"?e(t):n}var kue=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:l,layout:f}=e;if((f==="vertical"||f==="horizontal"&&l==="middle")&&a!=="center"&&St(t[a]))return Sh(Sh({},t),{},{[a]:t[a]+(r||0)});if((f==="horizontal"||f==="vertical"&&a==="center")&&l!=="middle"&&St(t[l]))return Sh(Sh({},t),{},{[l]:t[l]+(i||0)})}return t},Lu=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",bF=(t,e,n,r)=>{if(r)return t.map(f=>f.coordinate);var i,a,l=t.map(f=>(f.coordinate===e&&(i=!0),f.coordinate===n&&(a=!0),f.coordinate));return i||l.push(e),a||l.push(n),l},wF=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:l,realScaleType:f,isCategorical:m,categoricalDomain:p,tickCount:b,ticks:_,niceTicks:T,axisType:N}=t;if(!l)return null;var j=f==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,M=i==="category"&&l.bandwidth?l.bandwidth()/j:0;if(M=N==="angleAxis"&&a&&a.length>=2?ga(a[0]-a[1])*2*M:M,_||T){var L=(_||T||[]).map((z,$)=>{var K=r?r.indexOf(z):z,X=l.map(K);return mn(X)?{coordinate:X+M,value:z,offset:M,index:$}:null}).filter(Ds);return L}return m&&p?p.map((z,$)=>{var K=l.map(z);return mn(K)?{coordinate:K+M,value:z,index:$,offset:M}:null}).filter(Ds):l.ticks&&b!=null?l.ticks(b).map((z,$)=>{var K=l.map(z);return mn(K)?{coordinate:K+M,value:z,index:$,offset:M}:null}).filter(Ds):l.domain().map((z,$)=>{var K=l.map(z);return mn(K)?{coordinate:K+M,value:r?r[z]:z,index:$,offset:M}:null}).filter(Ds)},Mue=(t,e)=>{if(!e||e.length!==2||!St(e[0])||!St(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!St(t[0])||t[0]<n)&&(i[0]=n),(!St(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},jue=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,l=0,f=0;f<n;++f){var m=t[f],p=m?.[i];if(p!=null){var b=p[1],_=p[0],T=Ol(b)?_:b;T>=0?(p[0]=a,a+=T,p[1]=a):(p[0]=l,l+=T,p[1]=l)}}}},Lue=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,l=0;l<n;++l){var f=t[l],m=f?.[i];if(m!=null){var p=Ol(m[1])?m[0]:m[1];p>=0?(m[0]=a,a+=p,m[1]=a):(m[0]=0,m[1]=0)}}}},Bue={sign:jue,expand:doe,none:hd,silhouette:hoe,wiggle:moe,positive:Lue},Fue=(t,e,n)=>{var r,i=(r=Bue[n])!==null&&r!==void 0?r:hd,a=foe().keys(e).value((f,m)=>Number(br(f,m,0))).order(DA).offset(i),l=a(t);return l.forEach((f,m)=>{f.forEach((p,b)=>{var _=br(t[b],e[m],0);Array.isArray(_)&&_.length===2&&St(_[0])&&St(_[1])&&(p[0]=_[0],p[1]=_[1])})}),l};function Vue(t){return t==null?void 0:String(t)}function Tk(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:a,dataKey:l}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!li(i[e.dataKey])){var f=CB(n,"value",i[e.dataKey]);if(f)return f.coordinate+r/2}return n!=null&&n[a]?n[a].coordinate+r/2:null}var m=br(i,li(l)?e.dataKey:l),p=e.scale.map(m);return St(p)?p:null}var Ik=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:l}=t;if(e.type==="category")return n[l]?n[l].coordinate+r:null;var f=br(a,e.dataKey,e.scale.domain()[l]);if(li(f))return null;var m=e.scale.map(f);return St(m)?m-i/2+r:null},zue=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},Uue=t=>{var e=t.flat(2).filter(St);return[Math.min(...e),Math.max(...e)]},que=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Gue=(t,e,n)=>{if(t!=null)return que(Object.keys(t).reduce((r,i)=>{var a=t[i];if(!a)return r;var{stackedData:l}=a,f=l.reduce((m,p)=>{var b=xF(p,e,n),_=Uue(b);return!mn(_[0])||!mn(_[1])?m:[Math.min(m[0],_[0]),Math.max(m[1],_[1])]},[1/0,-1/0]);return[Math.min(f[0],r[0]),Math.max(f[1],r[1])]},[1/0,-1/0]))},Ck=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ok=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lm=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=nb(e,b=>b.coordinate),a=1/0,l=1,f=i.length;l<f;l++){var m=i[l],p=i[l-1];a=Math.min((m?.coordinate||0)-(p?.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function Nk(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return Sh(Sh({},e),{},{dataKey:n,payload:r,value:i,name:a})}function Dm(t,e){if(t)return String(t);if(typeof e=="string")return e}var Hue=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},Kue=(t,e)=>e==="centric"?t.angle:t.radius,Bu=t=>t.layout.width,Fu=t=>t.layout.height,Wue=t=>t.layout.scale,_F=t=>t.layout.margin,db=Oe(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),hb=Oe(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),EF="data-recharts-item-index",AF="data-recharts-item-id",b0=60;function Pk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ty(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pk(Object(n),!0).forEach(function(r){$ue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ue(t,e,n){return(e=Yue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yue(t){var e=Xue(t,"string");return typeof e=="symbol"?e:e+""}function Xue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Que=t=>t.brush.height;function Zue(t){var e=hb(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:b0;return n+i}return n},0)}function Jue(t){var e=hb(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:b0;return n+i}return n},0)}function ece(t){var e=db(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function tce(t){var e=db(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Zi=Oe([Bu,Fu,_F,Que,Zue,Jue,ece,tce,qB,Cle],(t,e,n,r,i,a,l,f,m,p)=>{var b={left:(n.left||0)+i,right:(n.right||0)+a},_={top:(n.top||0)+l,bottom:(n.bottom||0)+f},T=ty(ty({},_),b),N=T.bottom;T.bottom+=r,T=kue(T,m,p);var j=t-T.left-T.right,M=e-T.top-T.bottom;return ty(ty({brushBottom:N},T),{},{width:Math.max(j,0),height:Math.max(M,0)})}),nce=Oe(Zi,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),NI=Oe(Bu,Fu,(t,e)=>({x:0,y:0,width:t,height:e})),rce=D.createContext(null),La=()=>D.useContext(rce)!=null,mb=t=>t.brush,gb=Oe([mb,Zi,_F],(t,e,n)=>({height:t.height,x:St(t.x)?t.x:e.left,y:St(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:St(t.width)?t.width:e.width})),Q2={},Z2={},J2={},Rk;function ice(){return Rk||(Rk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let l,f=null;const m=a!=null&&a.includes("leading"),p=a==null||a.includes("trailing"),b=()=>{f!==null&&(n.apply(l,f),l=void 0,f=null)},_=()=>{p&&b(),M()};let T=null;const N=()=>{T!=null&&clearTimeout(T),T=setTimeout(()=>{T=null,_()},r)},j=()=>{T!==null&&(clearTimeout(T),T=null)},M=()=>{j(),l=void 0,f=null},L=()=>{b()},z=function(...$){if(i?.aborted)return;l=this,f=$;const K=T==null;N(),m&&K&&b()};return z.schedule=N,z.cancel=M,z.flush=L,i?.addEventListener("abort",M,{once:!0}),z}t.debounce=e})(J2)),J2}var Dk;function ace(){return Dk||(Dk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ice();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:l=!1,trailing:f=!0,maxWait:m}=a,p=Array(2);l&&(p[0]="leading"),f&&(p[1]="trailing");let b,_=null;const T=e.debounce(function(...M){b=r.apply(this,M),_=null},i,{edges:p}),N=function(...M){return m!=null&&(_===null&&(_=Date.now()),Date.now()-_>=m)?(b=r.apply(this,M),_=Date.now(),T.cancel(),T.schedule(),b):(T.apply(this,M),b)},j=()=>(T.flush(),b);return N.cancel=T.cancel,N.flush=j,N}t.debounce=n})(Z2)),Z2}var kk;function sce(){return kk||(kk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ace();function n(r,i=0,a={}){const{leading:l=!0,trailing:f=!0}=a;return e.debounce(r,i,{leading:l,maxWait:i,trailing:f})}t.throttle=n})(Q2)),Q2}var eE,Mk;function oce(){return Mk||(Mk=1,eE=sce().throttle),eE}var lce=oce();const uce=Rl(lce);var jv=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=0;console.warn(n.replace(/%s/g,()=>i[l++]))}},wl={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},SF=(t,e,n)=>{var{width:r=wl.width,height:i=wl.height,aspect:a,maxHeight:l}=n,f=gd(r)?t:Number(r),m=gd(i)?e:Number(i);return a&&a>0&&(f?m=f/a:m&&(f=m*a),l&&m!=null&&m>l&&(m=l)),{calculatedWidth:f,calculatedHeight:m}},cce={width:0,height:0,overflow:"visible"},fce={width:0,overflowX:"visible"},dce={height:0,overflowY:"visible"},hce={},mce=t=>{var{width:e,height:n}=t,r=gd(e),i=gd(n);return r&&i?cce:r?fce:i?dce:hce};function gce(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i=wl.width,a=wl.height):i===void 0?i=r&&r>0?void 0:wl.width:a===void 0&&(a=r&&r>0?void 0:wl.height),{width:i,height:a}}function HA(){return HA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HA.apply(null,arguments)}function jk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jk(Object(n),!0).forEach(function(r){pce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pce(t,e,n){return(e=yce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yce(t){var e=vce(t,"string");return typeof e=="symbol"?e:e+""}function vce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var TF=D.createContext(wl.initialDimension);function xce(t){return Nl(t.width)&&Nl(t.height)}function IF(t){var{children:e,width:n,height:r}=t,i=D.useMemo(()=>({width:n,height:r}),[n,r]);return xce(i)?D.createElement(TF.Provider,{value:i},e):null}var PI=()=>D.useContext(TF),bce=D.forwardRef((t,e)=>{var{aspect:n,initialDimension:r=wl.initialDimension,width:i,height:a,minWidth:l=wl.minWidth,minHeight:f,maxHeight:m,children:p,debounce:b=wl.debounce,id:_,className:T,onResize:N,style:j={}}=t,M=D.useRef(null),L=D.useRef();L.current=N,D.useImperativeHandle(e,()=>M.current);var[z,$]=D.useState({containerWidth:r.width,containerHeight:r.height}),K=D.useCallback((W,H)=>{$(oe=>{var ae=Math.round(W),Z=Math.round(H);return oe.containerWidth===ae&&oe.containerHeight===Z?oe:{containerWidth:ae,containerHeight:Z}})},[]);D.useEffect(()=>{if(M.current==null||typeof ResizeObserver>"u")return Od;var W=Z=>{var ee,xe=Z[0];if(xe!=null){var{width:de,height:ye}=xe.contentRect;K(de,ye),(ee=L.current)===null||ee===void 0||ee.call(L,de,ye)}};b>0&&(W=uce(W,b,{trailing:!0,leading:!1}));var H=new ResizeObserver(W),{width:oe,height:ae}=M.current.getBoundingClientRect();return K(oe,ae),H.observe(M.current),()=>{H.disconnect()}},[K,b]);var{containerWidth:X,containerHeight:se}=z;jv(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:J,calculatedHeight:V}=SF(X,se,{width:i,height:a,aspect:n,maxHeight:m});return jv(J!=null&&J>0||V!=null&&V>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,J,V,i,a,l,f,n),D.createElement("div",{id:_?"".concat(_):void 0,className:Hn("recharts-responsive-container",T),style:Lk(Lk({},j),{},{width:i,height:a,minWidth:l,minHeight:f,maxHeight:m}),ref:M},D.createElement("div",{style:mce({width:i,height:a})},D.createElement(IF,{width:J,height:V},p)))}),ny=D.forwardRef((t,e)=>{var n=PI();if(Nl(n.width)&&Nl(n.height))return t.children;var{width:r,height:i}=gce({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:l}=SF(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return St(a)&&St(l)?D.createElement(IF,{width:a,height:l},t.children):D.createElement(bce,HA({},t,{width:r,height:i,ref:e}))});function RI(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var w0=()=>{var t,e=La(),n=Tt(nce),r=Tt(gb),i=(t=Tt(mb))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},wce={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},CF=()=>{var t;return(t=Tt(Zi))!==null&&t!==void 0?t:wce},OF=()=>Tt(Bu),NF=()=>Tt(Fu),Wn=t=>t.layout.layoutType,Nd=()=>Tt(Wn),PF=()=>{var t=Nd();if(t==="horizontal"||t==="vertical")return t},RF=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},_ce=()=>{var t=Nd();return t!==void 0},_0=t=>{var e=Gr(),n=La(),{width:r,height:i}=t,a=PI(),l=r,f=i;return a&&(l=a.width>0?a.width:r,f=a.height>0?a.height:i),D.useEffect(()=>{!n&&Nl(l)&&Nl(f)&&e(Cue({width:l,height:f}))},[e,n,l,f]),null},DF=Symbol.for("immer-nothing"),Bk=Symbol.for("immer-draftable"),so=Symbol.for("immer-state");function zo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Dp=Object.getPrototypeOf;function um(t){return!!t&&!!t[so]}function yd(t){return t?kF(t)||Array.isArray(t)||!!t[Bk]||!!t.constructor?.[Bk]||E0(t)||yb(t):!1}var Ece=Object.prototype.constructor.toString(),Fk=new WeakMap;function kF(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=Fk.get(n);return r===void 0&&(r=Function.toString.call(n),Fk.set(n,r)),r===Ece}function Lv(t,e,n=!0){pb(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function pb(t){const e=t[so];return e?e.type_:Array.isArray(t)?1:E0(t)?2:yb(t)?3:0}function KA(t,e){return pb(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function MF(t,e,n){const r=pb(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Ace(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function E0(t){return t instanceof Map}function yb(t){return t instanceof Set}function Rf(t){return t.copy_||t.base_}function WA(t,e){if(E0(t))return new Map(t);if(yb(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=kF(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[so];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const l=i[a],f=r[l];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(r[l]={configurable:!0,writable:!0,enumerable:f.enumerable,value:t[l]})}return Object.create(Dp(t),r)}else{const r=Dp(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function DI(t,e=!1){return vb(t)||um(t)||!yd(t)||(pb(t)>1&&Object.defineProperties(t,{set:ry,add:ry,clear:ry,delete:ry}),Object.freeze(t),e&&Object.values(t).forEach(n=>DI(n,!0))),t}function Sce(){zo(2)}var ry={value:Sce};function vb(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var Tce={};function vd(t){const e=Tce[t];return e||zo(0,t),e}var kp;function jF(){return kp}function Ice(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Vk(t,e){e&&(vd("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function $A(t){YA(t),t.drafts_.forEach(Cce),t.drafts_=null}function YA(t){t===kp&&(kp=t.parent_)}function zk(t){return kp=Ice(kp,t)}function Cce(t){const e=t[so];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Uk(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[so].modified_&&($A(e),zo(4)),yd(t)&&(t=Bv(e,t),e.parent_||Fv(e,t)),e.patches_&&vd("Patches").generateReplacementPatches_(n[so].base_,t,e.patches_,e.inversePatches_)):t=Bv(e,n,[]),$A(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==DF?t:void 0}function Bv(t,e,n){if(vb(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[so];if(!i)return Lv(e,(a,l)=>qk(t,i,e,a,l,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return Fv(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let l=a,f=!1;i.type_===3&&(l=new Set(a),a.clear(),f=!0),Lv(l,(m,p)=>qk(t,i,a,m,p,n,f),r),Fv(t,a,!1),n&&t.patches_&&vd("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function qk(t,e,n,r,i,a,l){if(i==null||typeof i!="object"&&!l)return;const f=vb(i);if(!(f&&!l)){if(um(i)){const m=a&&e&&e.type_!==3&&!KA(e.assigned_,r)?a.concat(r):void 0,p=Bv(t,i,m);if(MF(n,r,p),um(p))t.canAutoFreeze_=!1;else return}else l&&n.add(i);if(yd(i)&&!f){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&f)return;Bv(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(E0(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Fv(t,i)}}}function Fv(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&DI(e,n)}function Oce(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:jF(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=kI;n&&(i=[r],a=Mp);const{revoke:l,proxy:f}=Proxy.revocable(i,a);return r.draft_=f,r.revoke_=l,f}var kI={get(t,e){if(e===so)return t;const n=Rf(t);if(!KA(n,e))return Nce(t,n,e);const r=n[e];return t.finalized_||!yd(r)?r:r===tE(t.base_,e)?(nE(t),t.copy_[e]=QA(r,t)):r},has(t,e){return e in Rf(t)},ownKeys(t){return Reflect.ownKeys(Rf(t))},set(t,e,n){const r=LF(Rf(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=tE(Rf(t),e),a=i?.[so];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Ace(n,i)&&(n!==void 0||KA(t.base_,e)))return!0;nE(t),XA(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return tE(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,nE(t),XA(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Rf(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){zo(11)},getPrototypeOf(t){return Dp(t.base_)},setPrototypeOf(){zo(12)}},Mp={};Lv(kI,(t,e)=>{Mp[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Mp.deleteProperty=function(t,e){return Mp.set.call(this,t,e,void 0)};Mp.set=function(t,e,n){return kI.set.call(this,t[0],e,n,t[0])};function tE(t,e){const n=t[so];return(n?Rf(n):t)[e]}function Nce(t,e,n){const r=LF(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function LF(t,e){if(!(e in t))return;let n=Dp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Dp(n)}}function XA(t){t.modified_||(t.modified_=!0,t.parent_&&XA(t.parent_))}function nE(t){t.copy_||(t.copy_=WA(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Pce=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const l=this;return function(m=a,...p){return l.produce(m,b=>n.call(this,b,...p))}}typeof n!="function"&&zo(6),r!==void 0&&typeof r!="function"&&zo(7);let i;if(yd(e)){const a=zk(this),l=QA(e,void 0);let f=!0;try{i=n(l),f=!1}finally{f?$A(a):YA(a)}return Vk(a,r),Uk(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===DF&&(i=void 0),this.autoFreeze_&&DI(i,!0),r){const a=[],l=[];vd("Patches").generateReplacementPatches_(e,i,a,l),r(a,l)}return i}else zo(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(l,...f)=>this.produceWithPatches(l,m=>e(m,...f));let r,i;return[this.produce(e,n,(l,f)=>{r=l,i=f}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){yd(t)||zo(8),um(t)&&(t=Rce(t));const e=zk(this),n=QA(t,void 0);return n[so].isManual_=!0,YA(e),n}finishDraft(t,e){const n=t&&t[so];(!n||!n.isManual_)&&zo(9);const{scope_:r}=n;return Vk(r,e),Uk(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=vd("Patches").applyPatches_;return um(t)?r(t,e):this.produce(t,i=>r(i,e))}};function QA(t,e){const n=E0(t)?vd("MapSet").proxyMap_(t,e):yb(t)?vd("MapSet").proxySet_(t,e):Oce(t,e);return(e?e.scope_:jF()).drafts_.push(n),n}function Rce(t){return um(t)||zo(10,t),BF(t)}function BF(t){if(!yd(t)||vb(t))return t;const e=t[so];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=WA(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=WA(t,!0);return Lv(n,(i,a)=>{MF(n,i,BF(a))},r),e&&(e.finalized_=!1),n}var Dce=new Pce;Dce.produce;var kce={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},FF=Bs({name:"legend",initialState:kce,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Qr()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ko(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Qr()},removeLegendPayload:{reducer(t,e){var n=Ko(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Qr()}}}),{setLegendSize:wEe,setLegendSettings:_Ee,addLegendPayload:VF,replaceLegendPayload:zF,removeLegendPayload:UF}=FF.actions,Mce=FF.reducer;function ZA(){return ZA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZA.apply(null,arguments)}function Gk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gk(Object(n),!0).forEach(function(r){jce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jce(t,e,n){return(e=Lce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lce(t){var e=Bce(t,"string");return typeof e=="symbol"?e:e+""}function Bce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fce(t){return Array.isArray(t)&&To(t[0])&&To(t[1])?t.join(" ~ "):t}var hh={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},Vce=t=>{var{separator:e=hh.separator,contentStyle:n,itemStyle:r,labelStyle:i=hh.labelStyle,payload:a,formatter:l,itemSorter:f,wrapperClassName:m,labelClassName:p,label:b,labelFormatter:_,accessibilityLayer:T=hh.accessibilityLayer}=t,N=()=>{if(a&&a.length){var se={padding:0,margin:0},J=(f?nb(a,f):a).map((V,W)=>{if(V.type==="none")return null;var H=V.formatter||l||Fce,{value:oe,name:ae}=V,Z=oe,ee=ae;if(H){var xe=H(oe,ae,V,W,a);if(Array.isArray(xe))[Z,ee]=xe;else if(xe!=null)Z=xe;else return null}var de=Pg(Pg({},hh.itemStyle),{},{color:V.color||hh.itemStyle.color},r);return D.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:de},To(ee)?D.createElement("span",{className:"recharts-tooltip-item-name"},ee):null,To(ee)?D.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,D.createElement("span",{className:"recharts-tooltip-item-value"},Z),D.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return D.createElement("ul",{className:"recharts-tooltip-item-list",style:se},J)}return null},j=Pg(Pg({},hh.contentStyle),n),M=Pg({margin:0},i),L=!li(b),z=L?b:"",$=Hn("recharts-default-tooltip",m),K=Hn("recharts-tooltip-label",p);L&&_&&a!==void 0&&a!==null&&(z=_(b,a));var X=T?{role:"status","aria-live":"assertive"}:{};return D.createElement("div",ZA({className:$,style:j},X),D.createElement("p",{className:K,style:M},D.isValidElement(z)?z:"".concat(z)),N())},Rg="recharts-tooltip-wrapper",zce={visibility:"hidden"};function Uce(t){var{coordinate:e,translateX:n,translateY:r}=t;return Hn(Rg,{["".concat(Rg,"-right")]:St(n)&&e&&St(e.x)&&n>=e.x,["".concat(Rg,"-left")]:St(n)&&e&&St(e.x)&&n<e.x,["".concat(Rg,"-bottom")]:St(r)&&e&&St(e.y)&&r>=e.y,["".concat(Rg,"-top")]:St(r)&&e&&St(e.y)&&r<e.y})}function Hk(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offset:i,position:a,reverseDirection:l,tooltipDimension:f,viewBox:m,viewBoxDimension:p}=t;if(a&&St(a[r]))return a[r];var b=n[r]-f-(i>0?i:0),_=n[r]+i;if(e[r])return l[r]?b:_;var T=m[r];if(T==null)return 0;if(l[r]){var N=b,j=T;return N<j?Math.max(_,T):Math.max(b,T)}if(p==null)return 0;var M=_+f,L=T+p;return M>L?Math.max(b,T):Math.max(_,T)}function qce(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Gce(t){var{allowEscapeViewBox:e,coordinate:n,offsetTop:r,offsetLeft:i,position:a,reverseDirection:l,tooltipBox:f,useTranslate3d:m,viewBox:p}=t,b,_,T;return f.height>0&&f.width>0&&n?(_=Hk({allowEscapeViewBox:e,coordinate:n,key:"x",offset:i,position:a,reverseDirection:l,tooltipDimension:f.width,viewBox:p,viewBoxDimension:p.width}),T=Hk({allowEscapeViewBox:e,coordinate:n,key:"y",offset:r,position:a,reverseDirection:l,tooltipDimension:f.height,viewBox:p,viewBoxDimension:p.height}),b=qce({translateX:_,translateY:T,useTranslate3d:m})):b=zce,{cssProperties:b,cssClasses:Uce({translateX:_,translateY:T,coordinate:n})}}function Kk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kk(Object(n),!0).forEach(function(r){JA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JA(t,e,n){return(e=Hce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hce(t){var e=Kce(t,"string");return typeof e=="symbol"?e:e+""}function Kce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Wce extends D.PureComponent{constructor(){super(...arguments),JA(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),JA(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:l,hasPayload:f,isAnimationActive:m,offset:p,position:b,reverseDirection:_,useTranslate3d:T,viewBox:N,wrapperStyle:j,lastBoundingBox:M,innerRef:L,hasPortalFromProps:z}=this.props,$=typeof p=="number"?p:p.x,K=typeof p=="number"?p:p.y,{cssClasses:X,cssProperties:se}=Gce({allowEscapeViewBox:n,coordinate:l,offsetLeft:$,offsetTop:K,position:b,reverseDirection:_,tooltipBox:{height:M.height,width:M.width},useTranslate3d:T,viewBox:N}),J=z?{}:iy(iy({transition:m&&e?"transform ".concat(r,"ms ").concat(i):void 0},se),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&f?"visible":"hidden",position:"absolute",top:0,left:0}),V=iy(iy({},J),{},{visibility:!this.state.dismissed&&e&&f?"visible":"hidden"},j);return D.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:X,style:V,ref:L},a)}}var qF=()=>{var t;return(t=Tt(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function eS(){return eS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eS.apply(null,arguments)}function Wk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $k(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wk(Object(n),!0).forEach(function(r){$ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ce(t,e,n){return(e=Yce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yce(t){var e=Xce(t,"string");return typeof e=="symbol"?e:e+""}function Xce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yk={curveBasisClosed:eoe,curveBasisOpen:toe,curveBasis:Jse,curveBumpX:Fse,curveBumpY:Vse,curveLinearClosed:noe,curveLinear:Jx,curveMonotoneX:roe,curveMonotoneY:ioe,curveNatural:aoe,curveStep:soe,curveStepAfter:loe,curveStepBefore:ooe},Vv=t=>mn(t.x)&&mn(t.y),Xk=t=>t.base!=null&&Vv(t.base)&&Vv(t),Dg=t=>t.x,kg=t=>t.y,Qce=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(y0(t));if((n==="curveMonotone"||n==="curveBump")&&e){var r=Yk["".concat(n).concat(e==="vertical"?"Y":"X")];if(r)return r}return Yk[n]||Jx},Qk={connectNulls:!1,type:"linear"},Zce=t=>{var{type:e=Qk.type,points:n=[],baseLine:r,layout:i,connectNulls:a=Qk.connectNulls}=t,l=Qce(e,i),f=a?n.filter(Vv):n;if(Array.isArray(r)){var m,p=n.map((j,M)=>$k($k({},j),{},{base:r[M]}));i==="vertical"?m=Y1().y(kg).x1(Dg).x0(j=>j.base.x):m=Y1().x(Dg).y1(kg).y0(j=>j.base.y);var b=m.defined(Xk).curve(l),_=a?p.filter(Xk):p;return b(_)}var T;i==="vertical"&&St(r)?T=Y1().y(kg).x1(Dg).x0(r):St(r)?T=Y1().x(Dg).y1(kg).y0(r):T=gB().x(Dg).y(kg);var N=T.defined(Vv).curve(l);return N(f)},MI=t=>{var{className:e,points:n,path:r,pathRef:i}=t,a=Nd();if((!n||!n.length)&&!r)return null;var l={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},f=n&&n.length?Zce(l):r;return D.createElement("path",eS({},ao(t),bI(t),{className:Hn("recharts-curve",e),d:f===null?void 0:f,ref:i}))},Jce=["x","y","top","left","width","height","className"];function tS(){return tS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tS.apply(null,arguments)}function Zk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function efe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zk(Object(n),!0).forEach(function(r){tfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tfe(t,e,n){return(e=nfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nfe(t){var e=rfe(t,"string");return typeof e=="symbol"?e:e+""}function rfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ife(t,e){if(t==null)return{};var n,r,i=afe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function afe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var sfe=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),ofe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:l=0,className:f}=t,m=ife(t,Jce),p=efe({x:e,y:n,top:r,left:i,width:a,height:l},m);return!St(e)||!St(n)||!St(a)||!St(l)||!St(r)||!St(i)?null:D.createElement("path",tS({},is(p),{className:Hn("recharts-cross",f),d:sfe(e,n,a,l,r,i)}))};function lfe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function Jk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jk(Object(n),!0).forEach(function(r){ufe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ufe(t,e,n){return(e=cfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cfe(t){var e=ffe(t,"string");return typeof e=="symbol"?e:e+""}function ffe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dfe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),GF=(t,e,n)=>t.map(r=>"".concat(dfe(r)," ").concat(e,"ms ").concat(n)).join(","),hfe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),jp=(t,e)=>Object.keys(e).reduce((n,r)=>eM(eM({},n),{},{[r]:t(r,e[r])}),{});function tM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ki(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tM(Object(n),!0).forEach(function(r){mfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mfe(t,e,n){return(e=gfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gfe(t){var e=pfe(t,"string");return typeof e=="symbol"?e:e+""}function pfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zv=(t,e,n)=>t+(e-t)*n,nS=t=>{var{from:e,to:n}=t;return e!==n},HF=(t,e,n)=>{var r=jp((i,a)=>{if(nS(a)){var[l,f]=t(a.from,a.to,a.velocity);return Ki(Ki({},a),{},{from:l,velocity:f})}return a},e);return n<1?jp((i,a)=>nS(a)&&r[i]!=null?Ki(Ki({},a),{},{velocity:zv(a.velocity,r[i].velocity,n),from:zv(a.from,r[i].from,n)}):a,e):HF(t,r,n-1)};function yfe(t,e,n,r,i,a){var l,f=r.reduce((T,N)=>Ki(Ki({},T),{},{[N]:{from:t[N],velocity:0,to:e[N]}}),{}),m=()=>jp((T,N)=>N.from,f),p=()=>!Object.values(f).filter(nS).length,b=null,_=T=>{l||(l=T);var N=T-l,j=N/n.dt;f=HF(n,f,j),i(Ki(Ki(Ki({},t),e),m())),l=T,p()||(b=a.setTimeout(_))};return()=>(b=a.setTimeout(_),()=>{var T;(T=b)===null||T===void 0||T()})}function vfe(t,e,n,r,i,a,l){var f=null,m=i.reduce((_,T)=>{var N=t[T],j=e[T];return N==null||j==null?_:Ki(Ki({},_),{},{[T]:[N,j]})},{}),p,b=_=>{p||(p=_);var T=(_-p)/r,N=jp((M,L)=>zv(...L,n(T)),m);if(a(Ki(Ki(Ki({},t),e),N)),T<1)f=l.setTimeout(b);else{var j=jp((M,L)=>zv(...L,n(1)),m);a(Ki(Ki(Ki({},t),e),j))}};return()=>(f=l.setTimeout(b),()=>{var _;(_=f)===null||_===void 0||_()})}const xfe=(t,e,n,r,i,a)=>{var l=hfe(t,e);return n==null?()=>(i(Ki(Ki({},t),e)),()=>{}):n.isStepper===!0?yfe(t,e,n,l,i,a):vfe(t,e,n,r,l,i,a)};var Uv=1e-4,KF=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],WF=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),nM=(t,e)=>n=>{var r=KF(t,e);return WF(r,n)},bfe=(t,e)=>n=>{var r=KF(t,e),i=[...r.map((a,l)=>a*l).slice(1),0];return WF(i,n)},wfe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},_fe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=wfe(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},Efe=(t,e,n,r)=>{var i=nM(t,n),a=nM(e,r),l=bfe(t,n),f=p=>p>1?1:p<0?0:p,m=p=>{for(var b=p>1?1:p,_=b,T=0;T<8;++T){var N=i(_)-b,j=l(_);if(Math.abs(N-b)<Uv||j<Uv)return a(_);_=f(_-N/j)}return a(_)};return m.isStepper=!1,m},rM=function(){return Efe(..._fe(...arguments))},Afe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(l,f,m)=>{var p=-(l-f)*n,b=m*r,_=m+(p-b)*i/1e3,T=m*i/1e3+l;return Math.abs(T-f)<Uv&&Math.abs(_)<Uv?[f,0]:[T,_]};return a.isStepper=!0,a.dt=i,a},Sfe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return rM(t);case"spring":return Afe();default:if(t.split("(")[0]==="cubic-bezier")return rM(t)}return typeof t=="function"?t:null};function Tfe(t){var e,n=()=>null,r=!1,i=null,a=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var f=l,[m,...p]=f;if(typeof m=="number"){i=t.setTimeout(a.bind(null,p),m);return}a(m),i=t.setTimeout(a.bind(null,p));return}typeof l=="string"&&(e=l,n(e)),typeof l=="object"&&(e=l,n(e)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),a(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>t}}class Ife{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=l=>{l-r>=n?e(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function Cfe(){return Tfe(new Ife)}var Ofe=D.createContext(Cfe);function Nfe(t,e){var n=D.useContext(Ofe);return D.useMemo(()=>e??n(t),[t,e,n])}var Pfe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),xb={isSsr:Pfe()},Rfe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},iM={t:0},rE={t:1};function A0(t){var e=Qi(t,Rfe),{isActive:n,canBegin:r,duration:i,easing:a,begin:l,onAnimationEnd:f,onAnimationStart:m,children:p}=e,b=n==="auto"?!xb.isSsr:n,_=Nfe(e.animationId,e.animationManager),[T,N]=D.useState(b?iM:rE),j=D.useRef(null);return D.useEffect(()=>{b||N(rE)},[b]),D.useEffect(()=>{if(!b||!r)return Od;var M=xfe(iM,rE,Sfe(a),i,N,_.getTimeoutController()),L=()=>{j.current=M()};return _.start([m,l,L,i,f]),()=>{_.stop(),j.current&&j.current(),f()}},[b,r,i,a,l,m,f,_]),p(T.t)}function S0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=D.useRef(Op(e)),r=D.useRef(t);return r.current!==t&&(n.current=Op(e),r.current=t),n.current}var Dfe=["radius"],kfe=["radius"],aM,sM,oM,lM,uM,cM,fM,dM,hM,mM;function gM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gM(Object(n),!0).forEach(function(r){Mfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mfe(t,e,n){return(e=jfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jfe(t){var e=Lfe(t,"string");return typeof e=="symbol"?e:e+""}function Lfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qv(){return qv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qv.apply(null,arguments)}function yM(t,e){if(t==null)return{};var n,r,i=Bfe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Bfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function cl(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var vM=(t,e,n,r,i)=>{var a=Nc(n),l=Nc(r),f=Math.min(Math.abs(a)/2,Math.abs(l)/2),m=l>=0?1:-1,p=a>=0?1:-1,b=l>=0&&a>=0||l<0&&a<0?1:0,_;if(f>0&&Array.isArray(i)){for(var T=[0,0,0,0],N=0,j=4;N<j;N++){var M,L=(M=i[N])!==null&&M!==void 0?M:0;T[N]=L>f?f:L}_=yi(aM||(aM=cl(["M",",",""])),t,e+m*T[0]),T[0]>0&&(_+=yi(sM||(sM=cl(["A ",",",",0,0,",",",",",""])),T[0],T[0],b,t+p*T[0],e)),_+=yi(oM||(oM=cl(["L ",",",""])),t+n-p*T[1],e),T[1]>0&&(_+=yi(lM||(lM=cl(["A ",",",",0,0,",`,
        `,",",""])),T[1],T[1],b,t+n,e+m*T[1])),_+=yi(uM||(uM=cl(["L ",",",""])),t+n,e+r-m*T[2]),T[2]>0&&(_+=yi(cM||(cM=cl(["A ",",",",0,0,",`,
        `,",",""])),T[2],T[2],b,t+n-p*T[2],e+r)),_+=yi(fM||(fM=cl(["L ",",",""])),t+p*T[3],e+r),T[3]>0&&(_+=yi(dM||(dM=cl(["A ",",",",0,0,",`,
        `,",",""])),T[3],T[3],b,t,e+r-m*T[3])),_+="Z"}else if(f>0&&i===+i&&i>0){var z=Math.min(f,i);_=yi(hM||(hM=cl(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+m*z,z,z,b,t+p*z,e,t+n-p*z,e,z,z,b,t+n,e+m*z,t+n,e+r-m*z,z,z,b,t+n-p*z,e+r,t+p*z,e+r,z,z,b,t,e+r-m*z)}else _=yi(mM||(mM=cl(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return _},xM={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$F=t=>{var e=Qi(t,xM),n=D.useRef(null),[r,i]=D.useState(-1);D.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var _e=n.current.getTotalLength();_e&&i(_e)}catch{}},[]);var{x:a,y:l,width:f,height:m,radius:p,className:b}=e,{animationEasing:_,animationDuration:T,animationBegin:N,isAnimationActive:j,isUpdateAnimationActive:M}=e,L=D.useRef(f),z=D.useRef(m),$=D.useRef(a),K=D.useRef(l),X=D.useMemo(()=>({x:a,y:l,width:f,height:m,radius:p}),[a,l,f,m,p]),se=S0(X,"rectangle-");if(a!==+a||l!==+l||f!==+f||m!==+m||f===0||m===0)return null;var J=Hn("recharts-rectangle",b);if(!M){var V=is(e),{radius:W}=V,H=yM(V,Dfe);return D.createElement("path",qv({},H,{x:Nc(a),y:Nc(l),width:Nc(f),height:Nc(m),radius:typeof p=="number"?p:void 0,className:J,d:vM(a,l,f,m,p)}))}var oe=L.current,ae=z.current,Z=$.current,ee=K.current,xe="0px ".concat(r===-1?1:r,"px"),de="".concat(r,"px 0px"),ye=GF(["strokeDasharray"],T,typeof _=="string"?_:xM.animationEasing);return D.createElement(A0,{animationId:se,key:se,canBegin:r>0,duration:T,easing:_,isActive:M,begin:N},_e=>{var qe=Jr(oe,f,_e),Ve=Jr(ae,m,_e),tt=Jr(Z,a,_e),me=Jr(ee,l,_e);n.current&&(L.current=qe,z.current=Ve,$.current=tt,K.current=me);var Se;j?_e>0?Se={transition:ye,strokeDasharray:de}:Se={strokeDasharray:xe}:Se={strokeDasharray:de};var Ye=is(e),{radius:ze}=Ye,yt=yM(Ye,kfe);return D.createElement("path",qv({},yt,{radius:typeof p=="number"?p:void 0,className:J,d:vM(tt,me,qe,Ve,p),ref:n,style:pM(pM({},Se),e.style)}))})};function bM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bM(Object(n),!0).forEach(function(r){Ffe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ffe(t,e,n){return(e=Vfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vfe(t){var e=zfe(t,"string");return typeof e=="symbol"?e:e+""}function zfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gv=Math.PI/180,Ufe=t=>t*180/Math.PI,Vi=(t,e,n,r)=>({x:t+Math.cos(-Gv*r)*n,y:e+Math.sin(-Gv*r)*n}),YF=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},qfe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},Gfe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,l=qfe({x:n,y:r},{x:i,y:a});if(l<=0)return{radius:l,angle:0};var f=(n-i)/l,m=Math.acos(f);return r>a&&(m=2*Math.PI-m),{radius:l,angle:Ufe(m),angleInRadian:m}},Hfe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},Kfe=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),l=Math.min(i,a);return t+l*360},Wfe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=Gfe({x:n,y:r},e),{innerRadius:l,outerRadius:f}=e;if(i<l||i>f||i===0)return null;var{startAngle:m,endAngle:p}=Hfe(e),b=a,_;if(m<=p){for(;b>p;)b-=360;for(;b<m;)b+=360;_=b>=m&&b<=p}else{for(;b>m;)b-=360;for(;b<p;)b+=360;_=b>=p&&b<=m}return _?wM(wM({},e),{},{radius:i,angle:Kfe(b,e)}):null};function XF(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,l=Vi(e,n,r,i),f=Vi(e,n,r,a);return{points:[l,f],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}var _M,EM,AM,SM,TM,IM,CM;function rS(){return rS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rS.apply(null,arguments)}function Vf(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var $fe=(t,e)=>{var n=ga(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},ay=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:l,cornerRadius:f,cornerIsExternal:m}=t,p=f*(l?1:-1)+r,b=Math.asin(f/p)/Gv,_=m?i:i+a*b,T=Vi(e,n,p,_),N=Vi(e,n,r,_),j=m?i-a*b:i,M=Vi(e,n,p*Math.cos(b*Gv),j);return{center:T,circleTangency:N,lineTangency:M,theta:b}},QF=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:l}=t,f=$fe(a,l),m=a+f,p=Vi(e,n,i,a),b=Vi(e,n,i,m),_=yi(_M||(_M=Vf(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),p.x,p.y,i,i,+(Math.abs(f)>180),+(a>m),b.x,b.y);if(r>0){var T=Vi(e,n,r,a),N=Vi(e,n,r,m);_+=yi(EM||(EM=Vf(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),N.x,N.y,r,r,+(Math.abs(f)>180),+(a<=m),T.x,T.y)}else _+=yi(AM||(AM=Vf(["L ",","," Z"])),e,n);return _},Yfe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:f,startAngle:m,endAngle:p}=t,b=ga(p-m),{circleTangency:_,lineTangency:T,theta:N}=ay({cx:e,cy:n,radius:i,angle:m,sign:b,cornerRadius:a,cornerIsExternal:f}),{circleTangency:j,lineTangency:M,theta:L}=ay({cx:e,cy:n,radius:i,angle:p,sign:-b,cornerRadius:a,cornerIsExternal:f}),z=f?Math.abs(m-p):Math.abs(m-p)-N-L;if(z<0)return l?yi(SM||(SM=Vf(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),T.x,T.y,a,a,a*2,a,a,-a*2):QF({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:m,endAngle:p});var $=yi(TM||(TM=Vf(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),T.x,T.y,a,a,+(b<0),_.x,_.y,i,i,+(z>180),+(b<0),j.x,j.y,a,a,+(b<0),M.x,M.y);if(r>0){var{circleTangency:K,lineTangency:X,theta:se}=ay({cx:e,cy:n,radius:r,angle:m,sign:b,isExternal:!0,cornerRadius:a,cornerIsExternal:f}),{circleTangency:J,lineTangency:V,theta:W}=ay({cx:e,cy:n,radius:r,angle:p,sign:-b,isExternal:!0,cornerRadius:a,cornerIsExternal:f}),H=f?Math.abs(m-p):Math.abs(m-p)-se-W;if(H<0&&a===0)return"".concat($,"L").concat(e,",").concat(n,"Z");$+=yi(IM||(IM=Vf(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),V.x,V.y,a,a,+(b<0),J.x,J.y,r,r,+(H>180),+(b>0),K.x,K.y,a,a,+(b<0),X.x,X.y)}else $+=yi(CM||(CM=Vf(["L",",","Z"])),e,n);return $},Xfe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ZF=t=>{var e=Qi(t,Xfe),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:l,forceCornerRadius:f,cornerIsExternal:m,startAngle:p,endAngle:b,className:_}=e;if(a<i||p===b)return null;var T=Hn("recharts-sector",_),N=a-i,j=rs(l,N,0,!0),M;return j>0&&Math.abs(p-b)<360?M=Yfe({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(j,N/2),forceCornerRadius:f,cornerIsExternal:m,startAngle:p,endAngle:b}):M=QF({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:p,endAngle:b}),D.createElement("path",rS({},is(e),{className:T,d:M}))};function Qfe(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(PB(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:l,angle:f}=e,m=Vi(r,i,a,f),p=Vi(r,i,l,f);return[{x:m.x,y:m.y},{x:p.x,y:p.y}]}return XF(e)}}var iE={},aE={},sE={},OM;function Zfe(){return OM||(OM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zB();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(sE)),sE}var NM;function Jfe(){return NM||(NM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Zfe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(aE)),aE}var PM;function ede(){return PM||(PM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UB(),n=Jfe();function r(i,a,l){l&&typeof l!="number"&&e.isIterateeCall(i,a,l)&&(a=l=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),l=l===void 0?i<a?1:-1:n.toFinite(l);const f=Math.max(Math.ceil((a-i)/(l||1)),0),m=new Array(f);for(let p=0;p<f;p++)m[p]=i,i+=l;return m}t.range=r})(iE)),iE}var oE,RM;function tde(){return RM||(RM=1,oE=ede().range),oE}var nde=tde();const JF=Rl(nde);function Lc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function rde(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function jI(t){let e,n,r;t.length!==2?(e=Lc,n=(f,m)=>Lc(t(f),m),r=(f,m)=>t(f)-m):(e=t===Lc||t===rde?t:ide,n=t,r=t);function i(f,m,p=0,b=f.length){if(p<b){if(e(m,m)!==0)return b;do{const _=p+b>>>1;n(f[_],m)<0?p=_+1:b=_}while(p<b)}return p}function a(f,m,p=0,b=f.length){if(p<b){if(e(m,m)!==0)return b;do{const _=p+b>>>1;n(f[_],m)<=0?p=_+1:b=_}while(p<b)}return p}function l(f,m,p=0,b=f.length){const _=i(f,m,p,b-1);return _>p&&r(f[_-1],m)>-r(f[_],m)?_-1:_}return{left:i,center:l,right:a}}function ide(){return 0}function eV(t){return t===null?NaN:+t}function*ade(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const sde=jI(Lc),T0=sde.right;jI(eV).center;class DM extends Map{constructor(e,n=ude){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(kM(this,e))}has(e){return super.has(kM(this,e))}set(e,n){return super.set(ode(this,e),n)}delete(e){return super.delete(lde(this,e))}}function kM({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function ode({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function lde({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function ude(t){return t!==null&&typeof t=="object"?t.valueOf():t}function cde(t=Lc){if(t===Lc)return tV;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function tV(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const fde=Math.sqrt(50),dde=Math.sqrt(10),hde=Math.sqrt(2);function Hv(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),l=a>=fde?10:a>=dde?5:a>=hde?2:1;let f,m,p;return i<0?(p=Math.pow(10,-i)/l,f=Math.round(t*p),m=Math.round(e*p),f/p<t&&++f,m/p>e&&--m,p=-p):(p=Math.pow(10,i)*l,f=Math.round(t/p),m=Math.round(e/p),f*p<t&&++f,m*p>e&&--m),m<f&&.5<=n&&n<2?Hv(t,e,n*2):[f,m,p]}function iS(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,l]=r?Hv(e,t,n):Hv(t,e,n);if(!(a>=i))return[];const f=a-i+1,m=new Array(f);if(r)if(l<0)for(let p=0;p<f;++p)m[p]=(a-p)/-l;else for(let p=0;p<f;++p)m[p]=(a-p)*l;else if(l<0)for(let p=0;p<f;++p)m[p]=(i+p)/-l;else for(let p=0;p<f;++p)m[p]=(i+p)*l;return m}function aS(t,e,n){return e=+e,t=+t,n=+n,Hv(t,e,n)[2]}function sS(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?aS(e,t,n):aS(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function MM(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function jM(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function nV(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?tV:cde(i);r>n;){if(r-n>600){const m=r-n+1,p=e-n+1,b=Math.log(m),_=.5*Math.exp(2*b/3),T=.5*Math.sqrt(b*_*(m-_)/m)*(p-m/2<0?-1:1),N=Math.max(n,Math.floor(e-p*_/m+T)),j=Math.min(r,Math.floor(e+(m-p)*_/m+T));nV(t,e,N,j,i)}const a=t[e];let l=n,f=r;for(Mg(t,n,e),i(t[r],a)>0&&Mg(t,n,r);l<f;){for(Mg(t,l,f),++l,--f;i(t[l],a)<0;)++l;for(;i(t[f],a)>0;)--f}i(t[n],a)===0?Mg(t,n,f):(++f,Mg(t,f,r)),f<=e&&(n=f+1),e<=f&&(r=f-1)}return t}function Mg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function mde(t,e,n){if(t=Float64Array.from(ade(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return jM(t);if(e>=1)return MM(t);var r,i=(r-1)*e,a=Math.floor(i),l=MM(nV(t,a).subarray(0,a+1)),f=jM(t.subarray(a+1));return l+(f-l)*(i-a)}}function gde(t,e,n=eV){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),l=+n(t[a],a,t),f=+n(t[a+1],a+1,t);return l+(f-l)*(i-a)}}function pde(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function No(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Vu(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const oS=Symbol("implicit");function LI(){var t=new DM,e=[],n=[],r=oS;function i(a){let l=t.get(a);if(l===void 0){if(r!==oS)return r;t.set(a,l=e.push(a)-1)}return n[l%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new DM;for(const l of a)t.has(l)||t.set(l,e.push(l)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return LI(e,n).unknown(r)},No.apply(i,arguments),i}function BI(){var t=LI().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,l,f=!1,m=0,p=0,b=.5;delete t.unknown;function _(){var T=e().length,N=i<r,j=N?i:r,M=N?r:i;a=(M-j)/Math.max(1,T-m+p*2),f&&(a=Math.floor(a)),j+=(M-j-a*(T-m))*b,l=a*(1-m),f&&(j=Math.round(j),l=Math.round(l));var L=pde(T).map(function(z){return j+a*z});return n(N?L.reverse():L)}return t.domain=function(T){return arguments.length?(e(T),_()):e()},t.range=function(T){return arguments.length?([r,i]=T,r=+r,i=+i,_()):[r,i]},t.rangeRound=function(T){return[r,i]=T,r=+r,i=+i,f=!0,_()},t.bandwidth=function(){return l},t.step=function(){return a},t.round=function(T){return arguments.length?(f=!!T,_()):f},t.padding=function(T){return arguments.length?(m=Math.min(1,p=+T),_()):m},t.paddingInner=function(T){return arguments.length?(m=Math.min(1,T),_()):m},t.paddingOuter=function(T){return arguments.length?(p=+T,_()):p},t.align=function(T){return arguments.length?(b=Math.max(0,Math.min(1,T)),_()):b},t.copy=function(){return BI(e(),[r,i]).round(f).paddingInner(m).paddingOuter(p).align(b)},No.apply(_(),arguments)}function rV(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return rV(e())},t}function yde(){return rV(BI.apply(null,arguments).paddingInner(1))}function FI(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function iV(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function I0(){}var Lp=.7,Kv=1/Lp,jh="\\s*([+-]?\\d+)\\s*",Bp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Il="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vde=/^#([0-9a-f]{3,8})$/,xde=new RegExp(`^rgb\\(${jh},${jh},${jh}\\)$`),bde=new RegExp(`^rgb\\(${Il},${Il},${Il}\\)$`),wde=new RegExp(`^rgba\\(${jh},${jh},${jh},${Bp}\\)$`),_de=new RegExp(`^rgba\\(${Il},${Il},${Il},${Bp}\\)$`),Ede=new RegExp(`^hsl\\(${Bp},${Il},${Il}\\)$`),Ade=new RegExp(`^hsla\\(${Bp},${Il},${Il},${Bp}\\)$`),LM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};FI(I0,Fp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:BM,formatHex:BM,formatHex8:Sde,formatHsl:Tde,formatRgb:FM,toString:FM});function BM(){return this.rgb().formatHex()}function Sde(){return this.rgb().formatHex8()}function Tde(){return aV(this).formatHsl()}function FM(){return this.rgb().formatRgb()}function Fp(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=vde.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?VM(e):n===3?new ks(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?sy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?sy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=xde.exec(t))?new ks(e[1],e[2],e[3],1):(e=bde.exec(t))?new ks(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=wde.exec(t))?sy(e[1],e[2],e[3],e[4]):(e=_de.exec(t))?sy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ede.exec(t))?qM(e[1],e[2]/100,e[3]/100,1):(e=Ade.exec(t))?qM(e[1],e[2]/100,e[3]/100,e[4]):LM.hasOwnProperty(t)?VM(LM[t]):t==="transparent"?new ks(NaN,NaN,NaN,0):null}function VM(t){return new ks(t>>16&255,t>>8&255,t&255,1)}function sy(t,e,n,r){return r<=0&&(t=e=n=NaN),new ks(t,e,n,r)}function Ide(t){return t instanceof I0||(t=Fp(t)),t?(t=t.rgb(),new ks(t.r,t.g,t.b,t.opacity)):new ks}function lS(t,e,n,r){return arguments.length===1?Ide(t):new ks(t,e,n,r??1)}function ks(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}FI(ks,lS,iV(I0,{brighter(t){return t=t==null?Kv:Math.pow(Kv,t),new ks(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Lp:Math.pow(Lp,t),new ks(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ks(Xf(this.r),Xf(this.g),Xf(this.b),Wv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zM,formatHex:zM,formatHex8:Cde,formatRgb:UM,toString:UM}));function zM(){return`#${zf(this.r)}${zf(this.g)}${zf(this.b)}`}function Cde(){return`#${zf(this.r)}${zf(this.g)}${zf(this.b)}${zf((isNaN(this.opacity)?1:this.opacity)*255)}`}function UM(){const t=Wv(this.opacity);return`${t===1?"rgb(":"rgba("}${Xf(this.r)}, ${Xf(this.g)}, ${Xf(this.b)}${t===1?")":`, ${t})`}`}function Wv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Xf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function zf(t){return t=Xf(t),(t<16?"0":"")+t.toString(16)}function qM(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Uo(t,e,n,r)}function aV(t){if(t instanceof Uo)return new Uo(t.h,t.s,t.l,t.opacity);if(t instanceof I0||(t=Fp(t)),!t)return new Uo;if(t instanceof Uo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),l=NaN,f=a-i,m=(a+i)/2;return f?(e===a?l=(n-r)/f+(n<r)*6:n===a?l=(r-e)/f+2:l=(e-n)/f+4,f/=m<.5?a+i:2-a-i,l*=60):f=m>0&&m<1?0:l,new Uo(l,f,m,t.opacity)}function Ode(t,e,n,r){return arguments.length===1?aV(t):new Uo(t,e,n,r??1)}function Uo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}FI(Uo,Ode,iV(I0,{brighter(t){return t=t==null?Kv:Math.pow(Kv,t),new Uo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Lp:Math.pow(Lp,t),new Uo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ks(lE(t>=240?t-240:t+120,i,r),lE(t,i,r),lE(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Uo(GM(this.h),oy(this.s),oy(this.l),Wv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Wv(this.opacity);return`${t===1?"hsl(":"hsla("}${GM(this.h)}, ${oy(this.s)*100}%, ${oy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function GM(t){return t=(t||0)%360,t<0?t+360:t}function oy(t){return Math.max(0,Math.min(1,t||0))}function lE(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const VI=t=>()=>t;function Nde(t,e){return function(n){return t+n*e}}function Pde(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Rde(t){return(t=+t)==1?sV:function(e,n){return n-e?Pde(e,n,t):VI(isNaN(e)?n:e)}}function sV(t,e){var n=e-t;return n?Nde(t,n):VI(isNaN(t)?e:t)}const HM=(function t(e){var n=Rde(e);function r(i,a){var l=n((i=lS(i)).r,(a=lS(a)).r),f=n(i.g,a.g),m=n(i.b,a.b),p=sV(i.opacity,a.opacity);return function(b){return i.r=l(b),i.g=f(b),i.b=m(b),i.opacity=p(b),i+""}}return r.gamma=t,r})(1);function Dde(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function kde(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Mde(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),l;for(l=0;l<r;++l)i[l]=km(t[l],e[l]);for(;l<n;++l)a[l]=e[l];return function(f){for(l=0;l<r;++l)a[l]=i[l](f);return a}}function jde(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function $v(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Lde(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=km(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var uS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uE=new RegExp(uS.source,"g");function Bde(t){return function(){return t}}function Fde(t){return function(e){return t(e)+""}}function Vde(t,e){var n=uS.lastIndex=uE.lastIndex=0,r,i,a,l=-1,f=[],m=[];for(t=t+"",e=e+"";(r=uS.exec(t))&&(i=uE.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),f[l]?f[l]+=a:f[++l]=a),(r=r[0])===(i=i[0])?f[l]?f[l]+=i:f[++l]=i:(f[++l]=null,m.push({i:l,x:$v(r,i)})),n=uE.lastIndex;return n<e.length&&(a=e.slice(n),f[l]?f[l]+=a:f[++l]=a),f.length<2?m[0]?Fde(m[0].x):Bde(e):(e=m.length,function(p){for(var b=0,_;b<e;++b)f[(_=m[b]).i]=_.x(p);return f.join("")})}function km(t,e){var n=typeof e,r;return e==null||n==="boolean"?VI(e):(n==="number"?$v:n==="string"?(r=Fp(e))?(e=r,HM):Vde:e instanceof Fp?HM:e instanceof Date?jde:kde(e)?Dde:Array.isArray(e)?Mde:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Lde:$v)(t,e)}function zI(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function zde(t,e){e===void 0&&(e=t,t=km);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(l){var f=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return a[f](l-f)}}function Ude(t){return function(){return t}}function Yv(t){return+t}var KM=[0,1];function cs(t){return t}function cS(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Ude(isNaN(e)?NaN:.5)}function qde(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Gde(t,e,n){var r=t[0],i=t[1],a=e[0],l=e[1];return i<r?(r=cS(i,r),a=n(l,a)):(r=cS(r,i),a=n(a,l)),function(f){return a(r(f))}}function Hde(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),l=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<r;)i[l]=cS(t[l],t[l+1]),a[l]=n(e[l],e[l+1]);return function(f){var m=T0(t,f,1,r)-1;return a[m](i[m](f))}}function C0(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function bb(){var t=KM,e=KM,n=km,r,i,a,l=cs,f,m,p;function b(){var T=Math.min(t.length,e.length);return l!==cs&&(l=qde(t[0],t[T-1])),f=T>2?Hde:Gde,m=p=null,_}function _(T){return T==null||isNaN(T=+T)?a:(m||(m=f(t.map(r),e,n)))(r(l(T)))}return _.invert=function(T){return l(i((p||(p=f(e,t.map(r),$v)))(T)))},_.domain=function(T){return arguments.length?(t=Array.from(T,Yv),b()):t.slice()},_.range=function(T){return arguments.length?(e=Array.from(T),b()):e.slice()},_.rangeRound=function(T){return e=Array.from(T),n=zI,b()},_.clamp=function(T){return arguments.length?(l=T?!0:cs,b()):l!==cs},_.interpolate=function(T){return arguments.length?(n=T,b()):n},_.unknown=function(T){return arguments.length?(a=T,_):a},function(T,N){return r=T,i=N,b()}}function UI(){return bb()(cs,cs)}function Kde(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Xv(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function cm(t){return t=Xv(Math.abs(t)),t?t[1]:NaN}function Wde(t,e){return function(n,r){for(var i=n.length,a=[],l=0,f=t[0],m=0;i>0&&f>0&&(m+f+1>r&&(f=Math.max(1,r-m)),a.push(n.substring(i-=f,i+f)),!((m+=f+1)>r));)f=t[l=(l+1)%t.length];return a.reverse().join(e)}}function $de(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Yde=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vp(t){if(!(e=Yde.exec(t)))throw new Error("invalid format: "+t);var e;return new qI({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Vp.prototype=qI.prototype;function qI(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}qI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Xde(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Qv;function Qde(t,e){var n=Xv(t,e);if(!n)return Qv=void 0,t.toPrecision(e);var r=n[0],i=n[1],a=i-(Qv=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return a===l?r:a>l?r+new Array(a-l+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Xv(t,Math.max(0,e+a-1))[0]}function WM(t,e){var n=Xv(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const $M={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Kde,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>WM(t*100,e),r:WM,s:Qde,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function YM(t){return t}var XM=Array.prototype.map,QM=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Zde(t){var e=t.grouping===void 0||t.thousands===void 0?YM:Wde(XM.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?YM:$de(XM.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",f=t.minus===void 0?"":t.minus+"",m=t.nan===void 0?"NaN":t.nan+"";function p(_,T){_=Vp(_);var N=_.fill,j=_.align,M=_.sign,L=_.symbol,z=_.zero,$=_.width,K=_.comma,X=_.precision,se=_.trim,J=_.type;J==="n"?(K=!0,J="g"):$M[J]||(X===void 0&&(X=12),se=!0,J="g"),(z||N==="0"&&j==="=")&&(z=!0,N="0",j="=");var V=(T&&T.prefix!==void 0?T.prefix:"")+(L==="$"?n:L==="#"&&/[boxX]/.test(J)?"0"+J.toLowerCase():""),W=(L==="$"?r:/[%p]/.test(J)?l:"")+(T&&T.suffix!==void 0?T.suffix:""),H=$M[J],oe=/[defgprs%]/.test(J);X=X===void 0?6:/[gprs]/.test(J)?Math.max(1,Math.min(21,X)):Math.max(0,Math.min(20,X));function ae(Z){var ee=V,xe=W,de,ye,_e;if(J==="c")xe=H(Z)+xe,Z="";else{Z=+Z;var qe=Z<0||1/Z<0;if(Z=isNaN(Z)?m:H(Math.abs(Z),X),se&&(Z=Xde(Z)),qe&&+Z==0&&M!=="+"&&(qe=!1),ee=(qe?M==="("?M:f:M==="-"||M==="("?"":M)+ee,xe=(J==="s"&&!isNaN(Z)&&Qv!==void 0?QM[8+Qv/3]:"")+xe+(qe&&M==="("?")":""),oe){for(de=-1,ye=Z.length;++de<ye;)if(_e=Z.charCodeAt(de),48>_e||_e>57){xe=(_e===46?i+Z.slice(de+1):Z.slice(de))+xe,Z=Z.slice(0,de);break}}}K&&!z&&(Z=e(Z,1/0));var Ve=ee.length+Z.length+xe.length,tt=Ve<$?new Array($-Ve+1).join(N):"";switch(K&&z&&(Z=e(tt+Z,tt.length?$-xe.length:1/0),tt=""),j){case"<":Z=ee+Z+xe+tt;break;case"=":Z=ee+tt+Z+xe;break;case"^":Z=tt.slice(0,Ve=tt.length>>1)+ee+Z+xe+tt.slice(Ve);break;default:Z=tt+ee+Z+xe;break}return a(Z)}return ae.toString=function(){return _+""},ae}function b(_,T){var N=Math.max(-8,Math.min(8,Math.floor(cm(T)/3)))*3,j=Math.pow(10,-N),M=p((_=Vp(_),_.type="f",_),{suffix:QM[8+N/3]});return function(L){return M(j*L)}}return{format:p,formatPrefix:b}}var ly,GI,oV;Jde({thousands:",",grouping:[3],currency:["$",""]});function Jde(t){return ly=Zde(t),GI=ly.format,oV=ly.formatPrefix,ly}function ehe(t){return Math.max(0,-cm(Math.abs(t)))}function the(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cm(e)/3)))*3-cm(Math.abs(t)))}function nhe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,cm(e)-cm(t))+1}function lV(t,e,n,r){var i=sS(t,e,n),a;switch(r=Vp(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=the(i,l))&&(r.precision=a),oV(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=nhe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=ehe(i))&&(r.precision=a-(r.type==="%")*2);break}}return GI(r)}function uf(t){var e=t.domain;return t.ticks=function(n){var r=e();return iS(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return lV(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,l=r[i],f=r[a],m,p,b=10;for(f<l&&(p=l,l=f,f=p,p=i,i=a,a=p);b-- >0;){if(p=aS(l,f,n),p===m)return r[i]=l,r[a]=f,e(r);if(p>0)l=Math.floor(l/p)*p,f=Math.ceil(f/p)*p;else if(p<0)l=Math.ceil(l*p)/p,f=Math.floor(f*p)/p;else break;m=p}return t},t}function uV(){var t=UI();return t.copy=function(){return C0(t,uV())},No.apply(t,arguments),uf(t)}function cV(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Yv),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return cV(t).unknown(e)},t=arguments.length?Array.from(t,Yv):[0,1],uf(n)}function fV(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],l;return a<i&&(l=n,n=r,r=l,l=i,i=a,a=l),t[n]=e.floor(i),t[r]=e.ceil(a),t}function ZM(t){return Math.log(t)}function JM(t){return Math.exp(t)}function rhe(t){return-Math.log(-t)}function ihe(t){return-Math.exp(-t)}function ahe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function she(t){return t===10?ahe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function ohe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function e8(t){return(e,n)=>-t(-e,n)}function HI(t){const e=t(ZM,JM),n=e.domain;let r=10,i,a;function l(){return i=ohe(r),a=she(r),n()[0]<0?(i=e8(i),a=e8(a),t(rhe,ihe)):t(ZM,JM),e}return e.base=function(f){return arguments.length?(r=+f,l()):r},e.domain=function(f){return arguments.length?(n(f),l()):n()},e.ticks=f=>{const m=n();let p=m[0],b=m[m.length-1];const _=b<p;_&&([p,b]=[b,p]);let T=i(p),N=i(b),j,M;const L=f==null?10:+f;let z=[];if(!(r%1)&&N-T<L){if(T=Math.floor(T),N=Math.ceil(N),p>0){for(;T<=N;++T)for(j=1;j<r;++j)if(M=T<0?j/a(-T):j*a(T),!(M<p)){if(M>b)break;z.push(M)}}else for(;T<=N;++T)for(j=r-1;j>=1;--j)if(M=T>0?j/a(-T):j*a(T),!(M<p)){if(M>b)break;z.push(M)}z.length*2<L&&(z=iS(p,b,L))}else z=iS(T,N,Math.min(N-T,L)).map(a);return _?z.reverse():z},e.tickFormat=(f,m)=>{if(f==null&&(f=10),m==null&&(m=r===10?"s":","),typeof m!="function"&&(!(r%1)&&(m=Vp(m)).precision==null&&(m.trim=!0),m=GI(m)),f===1/0)return m;const p=Math.max(1,r*f/e.ticks().length);return b=>{let _=b/a(Math.round(i(b)));return _*r<r-.5&&(_*=r),_<=p?m(b):""}},e.nice=()=>n(fV(n(),{floor:f=>a(Math.floor(i(f))),ceil:f=>a(Math.ceil(i(f)))})),e}function dV(){const t=HI(bb()).domain([1,10]);return t.copy=()=>C0(t,dV()).base(t.base()),No.apply(t,arguments),t}function t8(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function n8(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function KI(t){var e=1,n=t(t8(e),n8(e));return n.constant=function(r){return arguments.length?t(t8(e=+r),n8(e)):e},uf(n)}function hV(){var t=KI(bb());return t.copy=function(){return C0(t,hV()).constant(t.constant())},No.apply(t,arguments)}function r8(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function lhe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function uhe(t){return t<0?-t*t:t*t}function WI(t){var e=t(cs,cs),n=1;function r(){return n===1?t(cs,cs):n===.5?t(lhe,uhe):t(r8(n),r8(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},uf(e)}function $I(){var t=WI(bb());return t.copy=function(){return C0(t,$I()).exponent(t.exponent())},No.apply(t,arguments),t}function che(){return $I.apply(null,arguments).exponent(.5)}function i8(t){return Math.sign(t)*t*t}function fhe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function mV(){var t=UI(),e=[0,1],n=!1,r;function i(a){var l=fhe(t(a));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(a){return t.invert(i8(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Yv)).map(i8)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return mV(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},No.apply(i,arguments),uf(i)}function gV(){var t=[],e=[],n=[],r;function i(){var l=0,f=Math.max(1,e.length);for(n=new Array(f-1);++l<f;)n[l-1]=gde(t,l/f);return a}function a(l){return l==null||isNaN(l=+l)?r:e[T0(n,l)]}return a.invertExtent=function(l){var f=e.indexOf(l);return f<0?[NaN,NaN]:[f>0?n[f-1]:t[0],f<n.length?n[f]:t[t.length-1]]},a.domain=function(l){if(!arguments.length)return t.slice();t=[];for(let f of l)f!=null&&!isNaN(f=+f)&&t.push(f);return t.sort(Lc),i()},a.range=function(l){return arguments.length?(e=Array.from(l),i()):e.slice()},a.unknown=function(l){return arguments.length?(r=l,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return gV().domain(t).range(e).unknown(r)},No.apply(a,arguments)}function pV(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function l(m){return m!=null&&m<=m?i[T0(r,m,0,n)]:a}function f(){var m=-1;for(r=new Array(n);++m<n;)r[m]=((m+1)*e-(m-n)*t)/(n+1);return l}return l.domain=function(m){return arguments.length?([t,e]=m,t=+t,e=+e,f()):[t,e]},l.range=function(m){return arguments.length?(n=(i=Array.from(m)).length-1,f()):i.slice()},l.invertExtent=function(m){var p=i.indexOf(m);return p<0?[NaN,NaN]:p<1?[t,r[0]]:p>=n?[r[n-1],e]:[r[p-1],r[p]]},l.unknown=function(m){return arguments.length&&(a=m),l},l.thresholds=function(){return r.slice()},l.copy=function(){return pV().domain([t,e]).range(i).unknown(a)},No.apply(uf(l),arguments)}function yV(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[T0(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var l=e.indexOf(a);return[t[l-1],t[l]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return yV().domain(t).range(e).unknown(n)},No.apply(i,arguments)}const cE=new Date,fE=new Date;function Ji(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const l=i(a),f=i.ceil(a);return a-l<f-a?l:f},i.offset=(a,l)=>(e(a=new Date(+a),l==null?1:Math.floor(l)),a),i.range=(a,l,f)=>{const m=[];if(a=i.ceil(a),f=f==null?1:Math.floor(f),!(a<l)||!(f>0))return m;let p;do m.push(p=new Date(+a)),e(a,f),t(a);while(p<a&&a<l);return m},i.filter=a=>Ji(l=>{if(l>=l)for(;t(l),!a(l);)l.setTime(l-1)},(l,f)=>{if(l>=l)if(f<0)for(;++f<=0;)for(;e(l,-1),!a(l););else for(;--f>=0;)for(;e(l,1),!a(l););}),n&&(i.count=(a,l)=>(cE.setTime(+a),fE.setTime(+l),t(cE),t(fE),Math.floor(n(cE,fE))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?l=>r(l)%a===0:l=>i.count(0,l)%a===0):i)),i}const Zv=Ji(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Zv.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ji(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Zv);Zv.range;const du=1e3,Ao=du*60,hu=Ao*60,Tu=hu*24,YI=Tu*7,a8=Tu*30,dE=Tu*365,Uf=Ji(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*du)},(t,e)=>(e-t)/du,t=>t.getUTCSeconds());Uf.range;const XI=Ji(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*du)},(t,e)=>{t.setTime(+t+e*Ao)},(t,e)=>(e-t)/Ao,t=>t.getMinutes());XI.range;const QI=Ji(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ao)},(t,e)=>(e-t)/Ao,t=>t.getUTCMinutes());QI.range;const ZI=Ji(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*du-t.getMinutes()*Ao)},(t,e)=>{t.setTime(+t+e*hu)},(t,e)=>(e-t)/hu,t=>t.getHours());ZI.range;const JI=Ji(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*hu)},(t,e)=>(e-t)/hu,t=>t.getUTCHours());JI.range;const O0=Ji(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ao)/Tu,t=>t.getDate()-1);O0.range;const wb=Ji(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Tu,t=>t.getUTCDate()-1);wb.range;const vV=Ji(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Tu,t=>Math.floor(t/Tu));vV.range;function Pd(t){return Ji(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ao)/YI)}const _b=Pd(0),Jv=Pd(1),dhe=Pd(2),hhe=Pd(3),fm=Pd(4),mhe=Pd(5),ghe=Pd(6);_b.range;Jv.range;dhe.range;hhe.range;fm.range;mhe.range;ghe.range;function Rd(t){return Ji(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/YI)}const Eb=Rd(0),ex=Rd(1),phe=Rd(2),yhe=Rd(3),dm=Rd(4),vhe=Rd(5),xhe=Rd(6);Eb.range;ex.range;phe.range;yhe.range;dm.range;vhe.range;xhe.range;const eC=Ji(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());eC.range;const tC=Ji(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());tC.range;const Iu=Ji(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Iu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ji(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Iu.range;const Cu=Ji(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Cu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ji(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Cu.range;function xV(t,e,n,r,i,a){const l=[[Uf,1,du],[Uf,5,5*du],[Uf,15,15*du],[Uf,30,30*du],[a,1,Ao],[a,5,5*Ao],[a,15,15*Ao],[a,30,30*Ao],[i,1,hu],[i,3,3*hu],[i,6,6*hu],[i,12,12*hu],[r,1,Tu],[r,2,2*Tu],[n,1,YI],[e,1,a8],[e,3,3*a8],[t,1,dE]];function f(p,b,_){const T=b<p;T&&([p,b]=[b,p]);const N=_&&typeof _.range=="function"?_:m(p,b,_),j=N?N.range(p,+b+1):[];return T?j.reverse():j}function m(p,b,_){const T=Math.abs(b-p)/_,N=jI(([,,L])=>L).right(l,T);if(N===l.length)return t.every(sS(p/dE,b/dE,_));if(N===0)return Zv.every(Math.max(sS(p,b,_),1));const[j,M]=l[T/l[N-1][2]<l[N][2]/T?N-1:N];return j.every(M)}return[f,m]}const[bhe,whe]=xV(Cu,tC,Eb,vV,JI,QI),[_he,Ehe]=xV(Iu,eC,_b,O0,ZI,XI);function hE(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function mE(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function jg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Ahe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,l=t.shortDays,f=t.months,m=t.shortMonths,p=Lg(i),b=Bg(i),_=Lg(a),T=Bg(a),N=Lg(l),j=Bg(l),M=Lg(f),L=Bg(f),z=Lg(m),$=Bg(m),K={a:_e,A:qe,b:Ve,B:tt,c:null,d:f8,e:f8,f:Whe,g:rme,G:ame,H:Ghe,I:Hhe,j:Khe,L:bV,m:$he,M:Yhe,p:me,q:Se,Q:m8,s:g8,S:Xhe,u:Qhe,U:Zhe,V:Jhe,w:eme,W:tme,x:null,X:null,y:nme,Y:ime,Z:sme,"%":h8},X={a:Ye,A:ze,b:yt,B:$e,c:null,d:d8,e:d8,f:cme,g:bme,G:_me,H:ome,I:lme,j:ume,L:_V,m:fme,M:dme,p:pt,q:lt,Q:m8,s:g8,S:hme,u:mme,U:gme,V:pme,w:yme,W:vme,x:null,X:null,y:xme,Y:wme,Z:Eme,"%":h8},se={a:oe,A:ae,b:Z,B:ee,c:xe,d:u8,e:u8,f:Vhe,g:l8,G:o8,H:c8,I:c8,j:jhe,L:Fhe,m:Mhe,M:Lhe,p:H,q:khe,Q:Uhe,s:qhe,S:Bhe,u:Ohe,U:Nhe,V:Phe,w:Che,W:Rhe,x:de,X:ye,y:l8,Y:o8,Z:Dhe,"%":zhe};K.x=J(n,K),K.X=J(r,K),K.c=J(e,K),X.x=J(n,X),X.X=J(r,X),X.c=J(e,X);function J(Ne,Xe){return function(Et){var Fe=[],Rt=-1,Kt=0,nt=Ne.length,Zt,Jt,Wt;for(Et instanceof Date||(Et=new Date(+Et));++Rt<nt;)Ne.charCodeAt(Rt)===37&&(Fe.push(Ne.slice(Kt,Rt)),(Jt=s8[Zt=Ne.charAt(++Rt)])!=null?Zt=Ne.charAt(++Rt):Jt=Zt==="e"?" ":"0",(Wt=Xe[Zt])&&(Zt=Wt(Et,Jt)),Fe.push(Zt),Kt=Rt+1);return Fe.push(Ne.slice(Kt,Rt)),Fe.join("")}}function V(Ne,Xe){return function(Et){var Fe=jg(1900,void 0,1),Rt=W(Fe,Ne,Et+="",0),Kt,nt;if(Rt!=Et.length)return null;if("Q"in Fe)return new Date(Fe.Q);if("s"in Fe)return new Date(Fe.s*1e3+("L"in Fe?Fe.L:0));if(Xe&&!("Z"in Fe)&&(Fe.Z=0),"p"in Fe&&(Fe.H=Fe.H%12+Fe.p*12),Fe.m===void 0&&(Fe.m="q"in Fe?Fe.q:0),"V"in Fe){if(Fe.V<1||Fe.V>53)return null;"w"in Fe||(Fe.w=1),"Z"in Fe?(Kt=mE(jg(Fe.y,0,1)),nt=Kt.getUTCDay(),Kt=nt>4||nt===0?ex.ceil(Kt):ex(Kt),Kt=wb.offset(Kt,(Fe.V-1)*7),Fe.y=Kt.getUTCFullYear(),Fe.m=Kt.getUTCMonth(),Fe.d=Kt.getUTCDate()+(Fe.w+6)%7):(Kt=hE(jg(Fe.y,0,1)),nt=Kt.getDay(),Kt=nt>4||nt===0?Jv.ceil(Kt):Jv(Kt),Kt=O0.offset(Kt,(Fe.V-1)*7),Fe.y=Kt.getFullYear(),Fe.m=Kt.getMonth(),Fe.d=Kt.getDate()+(Fe.w+6)%7)}else("W"in Fe||"U"in Fe)&&("w"in Fe||(Fe.w="u"in Fe?Fe.u%7:"W"in Fe?1:0),nt="Z"in Fe?mE(jg(Fe.y,0,1)).getUTCDay():hE(jg(Fe.y,0,1)).getDay(),Fe.m=0,Fe.d="W"in Fe?(Fe.w+6)%7+Fe.W*7-(nt+5)%7:Fe.w+Fe.U*7-(nt+6)%7);return"Z"in Fe?(Fe.H+=Fe.Z/100|0,Fe.M+=Fe.Z%100,mE(Fe)):hE(Fe)}}function W(Ne,Xe,Et,Fe){for(var Rt=0,Kt=Xe.length,nt=Et.length,Zt,Jt;Rt<Kt;){if(Fe>=nt)return-1;if(Zt=Xe.charCodeAt(Rt++),Zt===37){if(Zt=Xe.charAt(Rt++),Jt=se[Zt in s8?Xe.charAt(Rt++):Zt],!Jt||(Fe=Jt(Ne,Et,Fe))<0)return-1}else if(Zt!=Et.charCodeAt(Fe++))return-1}return Fe}function H(Ne,Xe,Et){var Fe=p.exec(Xe.slice(Et));return Fe?(Ne.p=b.get(Fe[0].toLowerCase()),Et+Fe[0].length):-1}function oe(Ne,Xe,Et){var Fe=N.exec(Xe.slice(Et));return Fe?(Ne.w=j.get(Fe[0].toLowerCase()),Et+Fe[0].length):-1}function ae(Ne,Xe,Et){var Fe=_.exec(Xe.slice(Et));return Fe?(Ne.w=T.get(Fe[0].toLowerCase()),Et+Fe[0].length):-1}function Z(Ne,Xe,Et){var Fe=z.exec(Xe.slice(Et));return Fe?(Ne.m=$.get(Fe[0].toLowerCase()),Et+Fe[0].length):-1}function ee(Ne,Xe,Et){var Fe=M.exec(Xe.slice(Et));return Fe?(Ne.m=L.get(Fe[0].toLowerCase()),Et+Fe[0].length):-1}function xe(Ne,Xe,Et){return W(Ne,e,Xe,Et)}function de(Ne,Xe,Et){return W(Ne,n,Xe,Et)}function ye(Ne,Xe,Et){return W(Ne,r,Xe,Et)}function _e(Ne){return l[Ne.getDay()]}function qe(Ne){return a[Ne.getDay()]}function Ve(Ne){return m[Ne.getMonth()]}function tt(Ne){return f[Ne.getMonth()]}function me(Ne){return i[+(Ne.getHours()>=12)]}function Se(Ne){return 1+~~(Ne.getMonth()/3)}function Ye(Ne){return l[Ne.getUTCDay()]}function ze(Ne){return a[Ne.getUTCDay()]}function yt(Ne){return m[Ne.getUTCMonth()]}function $e(Ne){return f[Ne.getUTCMonth()]}function pt(Ne){return i[+(Ne.getUTCHours()>=12)]}function lt(Ne){return 1+~~(Ne.getUTCMonth()/3)}return{format:function(Ne){var Xe=J(Ne+="",K);return Xe.toString=function(){return Ne},Xe},parse:function(Ne){var Xe=V(Ne+="",!1);return Xe.toString=function(){return Ne},Xe},utcFormat:function(Ne){var Xe=J(Ne+="",X);return Xe.toString=function(){return Ne},Xe},utcParse:function(Ne){var Xe=V(Ne+="",!0);return Xe.toString=function(){return Ne},Xe}}}var s8={"-":"",_:" ",0:"0"},ya=/^\s*\d+/,She=/^%/,The=/[\\^$*+?|[\]().{}]/g;function Kn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Ihe(t){return t.replace(The,"\\$&")}function Lg(t){return new RegExp("^(?:"+t.map(Ihe).join("|")+")","i")}function Bg(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Che(t,e,n){var r=ya.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ohe(t,e,n){var r=ya.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Nhe(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Phe(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Rhe(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function o8(t,e,n){var r=ya.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function l8(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Dhe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function khe(t,e,n){var r=ya.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Mhe(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function u8(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function jhe(t,e,n){var r=ya.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function c8(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Lhe(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Bhe(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Fhe(t,e,n){var r=ya.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Vhe(t,e,n){var r=ya.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function zhe(t,e,n){var r=She.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Uhe(t,e,n){var r=ya.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function qhe(t,e,n){var r=ya.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function f8(t,e){return Kn(t.getDate(),e,2)}function Ghe(t,e){return Kn(t.getHours(),e,2)}function Hhe(t,e){return Kn(t.getHours()%12||12,e,2)}function Khe(t,e){return Kn(1+O0.count(Iu(t),t),e,3)}function bV(t,e){return Kn(t.getMilliseconds(),e,3)}function Whe(t,e){return bV(t,e)+"000"}function $he(t,e){return Kn(t.getMonth()+1,e,2)}function Yhe(t,e){return Kn(t.getMinutes(),e,2)}function Xhe(t,e){return Kn(t.getSeconds(),e,2)}function Qhe(t){var e=t.getDay();return e===0?7:e}function Zhe(t,e){return Kn(_b.count(Iu(t)-1,t),e,2)}function wV(t){var e=t.getDay();return e>=4||e===0?fm(t):fm.ceil(t)}function Jhe(t,e){return t=wV(t),Kn(fm.count(Iu(t),t)+(Iu(t).getDay()===4),e,2)}function eme(t){return t.getDay()}function tme(t,e){return Kn(Jv.count(Iu(t)-1,t),e,2)}function nme(t,e){return Kn(t.getFullYear()%100,e,2)}function rme(t,e){return t=wV(t),Kn(t.getFullYear()%100,e,2)}function ime(t,e){return Kn(t.getFullYear()%1e4,e,4)}function ame(t,e){var n=t.getDay();return t=n>=4||n===0?fm(t):fm.ceil(t),Kn(t.getFullYear()%1e4,e,4)}function sme(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Kn(e/60|0,"0",2)+Kn(e%60,"0",2)}function d8(t,e){return Kn(t.getUTCDate(),e,2)}function ome(t,e){return Kn(t.getUTCHours(),e,2)}function lme(t,e){return Kn(t.getUTCHours()%12||12,e,2)}function ume(t,e){return Kn(1+wb.count(Cu(t),t),e,3)}function _V(t,e){return Kn(t.getUTCMilliseconds(),e,3)}function cme(t,e){return _V(t,e)+"000"}function fme(t,e){return Kn(t.getUTCMonth()+1,e,2)}function dme(t,e){return Kn(t.getUTCMinutes(),e,2)}function hme(t,e){return Kn(t.getUTCSeconds(),e,2)}function mme(t){var e=t.getUTCDay();return e===0?7:e}function gme(t,e){return Kn(Eb.count(Cu(t)-1,t),e,2)}function EV(t){var e=t.getUTCDay();return e>=4||e===0?dm(t):dm.ceil(t)}function pme(t,e){return t=EV(t),Kn(dm.count(Cu(t),t)+(Cu(t).getUTCDay()===4),e,2)}function yme(t){return t.getUTCDay()}function vme(t,e){return Kn(ex.count(Cu(t)-1,t),e,2)}function xme(t,e){return Kn(t.getUTCFullYear()%100,e,2)}function bme(t,e){return t=EV(t),Kn(t.getUTCFullYear()%100,e,2)}function wme(t,e){return Kn(t.getUTCFullYear()%1e4,e,4)}function _me(t,e){var n=t.getUTCDay();return t=n>=4||n===0?dm(t):dm.ceil(t),Kn(t.getUTCFullYear()%1e4,e,4)}function Eme(){return"+0000"}function h8(){return"%"}function m8(t){return+t}function g8(t){return Math.floor(+t/1e3)}var mh,AV,SV;Ame({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ame(t){return mh=Ahe(t),AV=mh.format,mh.parse,SV=mh.utcFormat,mh.utcParse,mh}function Sme(t){return new Date(t)}function Tme(t){return t instanceof Date?+t:+new Date(+t)}function nC(t,e,n,r,i,a,l,f,m,p){var b=UI(),_=b.invert,T=b.domain,N=p(".%L"),j=p(":%S"),M=p("%I:%M"),L=p("%I %p"),z=p("%a %d"),$=p("%b %d"),K=p("%B"),X=p("%Y");function se(J){return(m(J)<J?N:f(J)<J?j:l(J)<J?M:a(J)<J?L:r(J)<J?i(J)<J?z:$:n(J)<J?K:X)(J)}return b.invert=function(J){return new Date(_(J))},b.domain=function(J){return arguments.length?T(Array.from(J,Tme)):T().map(Sme)},b.ticks=function(J){var V=T();return t(V[0],V[V.length-1],J??10)},b.tickFormat=function(J,V){return V==null?se:p(V)},b.nice=function(J){var V=T();return(!J||typeof J.range!="function")&&(J=e(V[0],V[V.length-1],J??10)),J?T(fV(V,J)):b},b.copy=function(){return C0(b,nC(t,e,n,r,i,a,l,f,m,p))},b}function Ime(){return No.apply(nC(_he,Ehe,Iu,eC,_b,O0,ZI,XI,Uf,AV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Cme(){return No.apply(nC(bhe,whe,Cu,tC,Eb,wb,JI,QI,Uf,SV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ab(){var t=0,e=1,n,r,i,a,l=cs,f=!1,m;function p(_){return _==null||isNaN(_=+_)?m:l(i===0?.5:(_=(a(_)-n)*i,f?Math.max(0,Math.min(1,_)):_))}p.domain=function(_){return arguments.length?([t,e]=_,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),p):[t,e]},p.clamp=function(_){return arguments.length?(f=!!_,p):f},p.interpolator=function(_){return arguments.length?(l=_,p):l};function b(_){return function(T){var N,j;return arguments.length?([N,j]=T,l=_(N,j),p):[l(0),l(1)]}}return p.range=b(km),p.rangeRound=b(zI),p.unknown=function(_){return arguments.length?(m=_,p):m},function(_){return a=_,n=_(t),r=_(e),i=n===r?0:1/(r-n),p}}function cf(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function TV(){var t=uf(Ab()(cs));return t.copy=function(){return cf(t,TV())},Vu.apply(t,arguments)}function IV(){var t=HI(Ab()).domain([1,10]);return t.copy=function(){return cf(t,IV()).base(t.base())},Vu.apply(t,arguments)}function CV(){var t=KI(Ab());return t.copy=function(){return cf(t,CV()).constant(t.constant())},Vu.apply(t,arguments)}function rC(){var t=WI(Ab());return t.copy=function(){return cf(t,rC()).exponent(t.exponent())},Vu.apply(t,arguments)}function Ome(){return rC.apply(null,arguments).exponent(.5)}function OV(){var t=[],e=cs;function n(r){if(r!=null&&!isNaN(r=+r))return e((T0(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Lc),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>mde(t,a/r))},n.copy=function(){return OV(e).domain(t)},Vu.apply(n,arguments)}function Sb(){var t=0,e=.5,n=1,r=1,i,a,l,f,m,p=cs,b,_=!1,T;function N(M){return isNaN(M=+M)?T:(M=.5+((M=+b(M))-a)*(r*M<r*a?f:m),p(_?Math.max(0,Math.min(1,M)):M))}N.domain=function(M){return arguments.length?([t,e,n]=M,i=b(t=+t),a=b(e=+e),l=b(n=+n),f=i===a?0:.5/(a-i),m=a===l?0:.5/(l-a),r=a<i?-1:1,N):[t,e,n]},N.clamp=function(M){return arguments.length?(_=!!M,N):_},N.interpolator=function(M){return arguments.length?(p=M,N):p};function j(M){return function(L){var z,$,K;return arguments.length?([z,$,K]=L,p=zde(M,[z,$,K]),N):[p(0),p(.5),p(1)]}}return N.range=j(km),N.rangeRound=j(zI),N.unknown=function(M){return arguments.length?(T=M,N):T},function(M){return b=M,i=M(t),a=M(e),l=M(n),f=i===a?0:.5/(a-i),m=a===l?0:.5/(l-a),r=a<i?-1:1,N}}function NV(){var t=uf(Sb()(cs));return t.copy=function(){return cf(t,NV())},Vu.apply(t,arguments)}function PV(){var t=HI(Sb()).domain([.1,1,10]);return t.copy=function(){return cf(t,PV()).base(t.base())},Vu.apply(t,arguments)}function RV(){var t=KI(Sb());return t.copy=function(){return cf(t,RV()).constant(t.constant())},Vu.apply(t,arguments)}function iC(){var t=WI(Sb());return t.copy=function(){return cf(t,iC()).exponent(t.exponent())},Vu.apply(t,arguments)}function Nme(){return iC.apply(null,arguments).exponent(.5)}const Xg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:BI,scaleDiverging:NV,scaleDivergingLog:PV,scaleDivergingPow:iC,scaleDivergingSqrt:Nme,scaleDivergingSymlog:RV,scaleIdentity:cV,scaleImplicit:oS,scaleLinear:uV,scaleLog:dV,scaleOrdinal:LI,scalePoint:yde,scalePow:$I,scaleQuantile:gV,scaleQuantize:pV,scaleRadial:mV,scaleSequential:TV,scaleSequentialLog:IV,scaleSequentialPow:rC,scaleSequentialQuantile:OV,scaleSequentialSqrt:Ome,scaleSequentialSymlog:CV,scaleSqrt:che,scaleSymlog:hV,scaleThreshold:yV,scaleTime:Ime,scaleUtc:Cme,tickFormat:lV},Symbol.toStringTag,{value:"Module"}));var zu=t=>t.chartData,Tb=Oe([zu],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),aC=(t,e,n,r)=>r?Tb(t):zu(t),Pme=(t,e,n)=>n?Tb(t):zu(t);function Ou(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(mn(e)&&mn(n))return!0}return!1}function p8(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function DV(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(mn(n))i=n;else if(typeof n=="function")return;if(mn(r))a=r;else if(typeof r=="function")return;var l=[i,a];if(Ou(l))return l}}function Rme(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Ou(r))return p8(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,l,f;if(i==="auto")e!=null&&(l=Math.min(...e));else if(St(i))l=i;else if(typeof i=="function")try{e!=null&&(l=i(e?.[0]))}catch{}else if(typeof i=="string"&&Ck.test(i)){var m=Ck.exec(i);if(m==null||m[1]==null||e==null)l=void 0;else{var p=+m[1];l=e[0]-p}}else l=e?.[0];if(a==="auto")e!=null&&(f=Math.max(...e));else if(St(a))f=a;else if(typeof a=="function")try{e!=null&&(f=a(e?.[1]))}catch{}else if(typeof a=="string"&&Ok.test(a)){var b=Ok.exec(a);if(b==null||b[1]==null||e==null)f=void 0;else{var _=+b[1];f=e[1]+_}}else f=e?.[1];var T=[l,f];if(Ou(T))return e==null?T:p8(T,e,n)}}}var Mm=1e9,Dme={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},oC,ti=!0,Co="[DecimalError] ",Qf=Co+"Invalid argument: ",sC=Co+"Exponent out of range: ",jm=Math.floor,Df=Math.pow,kme=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Zs,fa=1e7,zr=7,kV=9007199254740991,tx=jm(kV/zr),It={};It.absoluteValue=It.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};It.comparedTo=It.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};It.decimalPlaces=It.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*zr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};It.dividedBy=It.div=function(t){return pu(this,new this.constructor(t))};It.dividedToIntegerBy=It.idiv=function(t){var e=this,n=e.constructor;return Or(pu(e,new n(t),0,1),n.precision)};It.equals=It.eq=function(t){return!this.cmp(t)};It.exponent=function(){return zi(this)};It.greaterThan=It.gt=function(t){return this.cmp(t)>0};It.greaterThanOrEqualTo=It.gte=function(t){return this.cmp(t)>=0};It.isInteger=It.isint=function(){return this.e>this.d.length-2};It.isNegative=It.isneg=function(){return this.s<0};It.isPositive=It.ispos=function(){return this.s>0};It.isZero=function(){return this.s===0};It.lessThan=It.lt=function(t){return this.cmp(t)<0};It.lessThanOrEqualTo=It.lte=function(t){return this.cmp(t)<1};It.logarithm=It.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Zs))throw Error(Co+"NaN");if(n.s<1)throw Error(Co+(n.s?"NaN":"-Infinity"));return n.eq(Zs)?new r(0):(ti=!1,e=pu(zp(n,a),zp(t,a),a),ti=!0,Or(e,i))};It.minus=It.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?LV(e,t):MV(e,(t.s=-t.s,t))};It.modulo=It.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Co+"NaN");return n.s?(ti=!1,e=pu(n,t,0,1).times(t),ti=!0,n.minus(e)):Or(new r(n),i)};It.naturalExponential=It.exp=function(){return jV(this)};It.naturalLogarithm=It.ln=function(){return zp(this)};It.negated=It.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};It.plus=It.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?MV(e,t):LV(e,(t.s=-t.s,t))};It.precision=It.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Qf+t);if(e=zi(i)+1,r=i.d.length-1,n=r*zr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};It.squareRoot=It.sqrt=function(){var t,e,n,r,i,a,l,f=this,m=f.constructor;if(f.s<1){if(!f.s)return new m(0);throw Error(Co+"NaN")}for(t=zi(f),ti=!1,i=Math.sqrt(+f),i==0||i==1/0?(e=_l(f.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=jm((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new m(e)):r=new m(i.toString()),n=m.precision,i=l=n+3;;)if(a=r,r=a.plus(pu(f,a,l+2)).times(.5),_l(a.d).slice(0,l)===(e=_l(r.d)).slice(0,l)){if(e=e.slice(l-3,l+1),i==l&&e=="4999"){if(Or(a,n+1,0),a.times(a).eq(f)){r=a;break}}else if(e!="9999")break;l+=4}return ti=!0,Or(r,n)};It.times=It.mul=function(t){var e,n,r,i,a,l,f,m,p,b=this,_=b.constructor,T=b.d,N=(t=new _(t)).d;if(!b.s||!t.s)return new _(0);for(t.s*=b.s,n=b.e+t.e,m=T.length,p=N.length,m<p&&(a=T,T=N,N=a,l=m,m=p,p=l),a=[],l=m+p,r=l;r--;)a.push(0);for(r=p;--r>=0;){for(e=0,i=m+r;i>r;)f=a[i]+N[r]*T[i-r-1]+e,a[i--]=f%fa|0,e=f/fa|0;a[i]=(a[i]+e)%fa|0}for(;!a[--l];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,ti?Or(t,_.precision):t};It.toDecimalPlaces=It.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Pl(t,0,Mm),e===void 0?e=r.rounding:Pl(e,0,8),Or(n,t+zi(n)+1,e))};It.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=xd(r,!0):(Pl(t,0,Mm),e===void 0?e=i.rounding:Pl(e,0,8),r=Or(new i(r),t+1,e),n=xd(r,!0,t+1)),n};It.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?xd(i):(Pl(t,0,Mm),e===void 0?e=a.rounding:Pl(e,0,8),r=Or(new a(i),t+zi(i)+1,e),n=xd(r.abs(),!1,t+zi(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};It.toInteger=It.toint=function(){var t=this,e=t.constructor;return Or(new e(t),zi(t)+1,e.rounding)};It.toNumber=function(){return+this};It.toPower=It.pow=function(t){var e,n,r,i,a,l,f=this,m=f.constructor,p=12,b=+(t=new m(t));if(!t.s)return new m(Zs);if(f=new m(f),!f.s){if(t.s<1)throw Error(Co+"Infinity");return f}if(f.eq(Zs))return f;if(r=m.precision,t.eq(Zs))return Or(f,r);if(e=t.e,n=t.d.length-1,l=e>=n,a=f.s,l){if((n=b<0?-b:b)<=kV){for(i=new m(Zs),e=Math.ceil(r/zr+4),ti=!1;n%2&&(i=i.times(f),v8(i.d,e)),n=jm(n/2),n!==0;)f=f.times(f),v8(f.d,e);return ti=!0,t.s<0?new m(Zs).div(i):Or(i,r)}}else if(a<0)throw Error(Co+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,f.s=1,ti=!1,i=t.times(zp(f,r+p)),ti=!0,i=jV(i),i.s=a,i};It.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=zi(i),r=xd(i,n<=a.toExpNeg||n>=a.toExpPos)):(Pl(t,1,Mm),e===void 0?e=a.rounding:Pl(e,0,8),i=Or(new a(i),t,e),n=zi(i),r=xd(i,t<=n||n<=a.toExpNeg,t)),r};It.toSignificantDigits=It.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Pl(t,1,Mm),e===void 0?e=r.rounding:Pl(e,0,8)),Or(new r(n),t,e)};It.toString=It.valueOf=It.val=It.toJSON=It[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=zi(t),n=t.constructor;return xd(t,e<=n.toExpNeg||e>=n.toExpPos)};function MV(t,e){var n,r,i,a,l,f,m,p,b=t.constructor,_=b.precision;if(!t.s||!e.s)return e.s||(e=new b(t)),ti?Or(e,_):e;if(m=t.d,p=e.d,l=t.e,i=e.e,m=m.slice(),a=l-i,a){for(a<0?(r=m,a=-a,f=p.length):(r=p,i=l,f=m.length),l=Math.ceil(_/zr),f=l>f?l+1:f+1,a>f&&(a=f,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(f=m.length,a=p.length,f-a<0&&(a=f,r=p,p=m,m=r),n=0;a;)n=(m[--a]=m[a]+p[a]+n)/fa|0,m[a]%=fa;for(n&&(m.unshift(n),++i),f=m.length;m[--f]==0;)m.pop();return e.d=m,e.e=i,ti?Or(e,_):e}function Pl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Qf+t)}function _l(t){var e,n,r,i=t.length-1,a="",l=t[0];if(i>0){for(a+=l,e=1;e<i;e++)r=t[e]+"",n=zr-r.length,n&&(a+=vc(n)),a+=r;l=t[e],r=l+"",n=zr-r.length,n&&(a+=vc(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}var pu=(function(){function t(r,i){var a,l=0,f=r.length;for(r=r.slice();f--;)a=r[f]*i+l,r[f]=a%fa|0,l=a/fa|0;return l&&r.unshift(l),r}function e(r,i,a,l){var f,m;if(a!=l)m=a>l?1:-1;else for(f=m=0;f<a;f++)if(r[f]!=i[f]){m=r[f]>i[f]?1:-1;break}return m}function n(r,i,a){for(var l=0;a--;)r[a]-=l,l=r[a]<i[a]?1:0,r[a]=l*fa+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,l){var f,m,p,b,_,T,N,j,M,L,z,$,K,X,se,J,V,W,H=r.constructor,oe=r.s==i.s?1:-1,ae=r.d,Z=i.d;if(!r.s)return new H(r);if(!i.s)throw Error(Co+"Division by zero");for(m=r.e-i.e,V=Z.length,se=ae.length,N=new H(oe),j=N.d=[],p=0;Z[p]==(ae[p]||0);)++p;if(Z[p]>(ae[p]||0)&&--m,a==null?$=a=H.precision:l?$=a+(zi(r)-zi(i))+1:$=a,$<0)return new H(0);if($=$/zr+2|0,p=0,V==1)for(b=0,Z=Z[0],$++;(p<se||b)&&$--;p++)K=b*fa+(ae[p]||0),j[p]=K/Z|0,b=K%Z|0;else{for(b=fa/(Z[0]+1)|0,b>1&&(Z=t(Z,b),ae=t(ae,b),V=Z.length,se=ae.length),X=V,M=ae.slice(0,V),L=M.length;L<V;)M[L++]=0;W=Z.slice(),W.unshift(0),J=Z[0],Z[1]>=fa/2&&++J;do b=0,f=e(Z,M,V,L),f<0?(z=M[0],V!=L&&(z=z*fa+(M[1]||0)),b=z/J|0,b>1?(b>=fa&&(b=fa-1),_=t(Z,b),T=_.length,L=M.length,f=e(_,M,T,L),f==1&&(b--,n(_,V<T?W:Z,T))):(b==0&&(f=b=1),_=Z.slice()),T=_.length,T<L&&_.unshift(0),n(M,_,L),f==-1&&(L=M.length,f=e(Z,M,V,L),f<1&&(b++,n(M,V<L?W:Z,L))),L=M.length):f===0&&(b++,M=[0]),j[p++]=b,f&&M[0]?M[L++]=ae[X]||0:(M=[ae[X]],L=1);while((X++<se||M[0]!==void 0)&&$--)}return j[0]||j.shift(),N.e=m,Or(N,l?a+zi(N)+1:a)}})();function jV(t,e){var n,r,i,a,l,f,m=0,p=0,b=t.constructor,_=b.precision;if(zi(t)>16)throw Error(sC+zi(t));if(!t.s)return new b(Zs);for(ti=!1,f=_,l=new b(.03125);t.abs().gte(.1);)t=t.times(l),p+=5;for(r=Math.log(Df(2,p))/Math.LN10*2+5|0,f+=r,n=i=a=new b(Zs),b.precision=f;;){if(i=Or(i.times(t),f),n=n.times(++m),l=a.plus(pu(i,n,f)),_l(l.d).slice(0,f)===_l(a.d).slice(0,f)){for(;p--;)a=Or(a.times(a),f);return b.precision=_,e==null?(ti=!0,Or(a,_)):a}a=l}}function zi(t){for(var e=t.e*zr,n=t.d[0];n>=10;n/=10)e++;return e}function gE(t,e,n){if(e>t.LN10.sd())throw ti=!0,n&&(t.precision=n),Error(Co+"LN10 precision limit exceeded");return Or(new t(t.LN10),e)}function vc(t){for(var e="";t--;)e+="0";return e}function zp(t,e){var n,r,i,a,l,f,m,p,b,_=1,T=10,N=t,j=N.d,M=N.constructor,L=M.precision;if(N.s<1)throw Error(Co+(N.s?"NaN":"-Infinity"));if(N.eq(Zs))return new M(0);if(e==null?(ti=!1,p=L):p=e,N.eq(10))return e==null&&(ti=!0),gE(M,p);if(p+=T,M.precision=p,n=_l(j),r=n.charAt(0),a=zi(N),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)N=N.times(t),n=_l(N.d),r=n.charAt(0),_++;a=zi(N),r>1?(N=new M("0."+n),a++):N=new M(r+"."+n.slice(1))}else return m=gE(M,p+2,L).times(a+""),N=zp(new M(r+"."+n.slice(1)),p-T).plus(m),M.precision=L,e==null?(ti=!0,Or(N,L)):N;for(f=l=N=pu(N.minus(Zs),N.plus(Zs),p),b=Or(N.times(N),p),i=3;;){if(l=Or(l.times(b),p),m=f.plus(pu(l,new M(i),p)),_l(m.d).slice(0,p)===_l(f.d).slice(0,p))return f=f.times(2),a!==0&&(f=f.plus(gE(M,p+2,L).times(a+""))),f=pu(f,new M(_),p),M.precision=L,e==null?(ti=!0,Or(f,L)):f;f=m,i+=2}}function y8(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=jm(n/zr),t.d=[],r=(n+1)%zr,n<0&&(r+=zr),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=zr;r<i;)t.d.push(+e.slice(r,r+=zr));e=e.slice(r),r=zr-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),ti&&(t.e>tx||t.e<-tx))throw Error(sC+n)}else t.s=0,t.e=0,t.d=[0];return t}function Or(t,e,n){var r,i,a,l,f,m,p,b,_=t.d;for(l=1,a=_[0];a>=10;a/=10)l++;if(r=e-l,r<0)r+=zr,i=e,p=_[b=0];else{if(b=Math.ceil((r+1)/zr),a=_.length,b>=a)return t;for(p=a=_[b],l=1;a>=10;a/=10)l++;r%=zr,i=r-zr+l}if(n!==void 0&&(a=Df(10,l-i-1),f=p/a%10|0,m=e<0||_[b+1]!==void 0||p%a,m=n<4?(f||m)&&(n==0||n==(t.s<0?3:2)):f>5||f==5&&(n==4||m||n==6&&(r>0?i>0?p/Df(10,l-i):0:_[b-1])%10&1||n==(t.s<0?8:7))),e<1||!_[0])return m?(a=zi(t),_.length=1,e=e-a-1,_[0]=Df(10,(zr-e%zr)%zr),t.e=jm(-e/zr)||0):(_.length=1,_[0]=t.e=t.s=0),t;if(r==0?(_.length=b,a=1,b--):(_.length=b+1,a=Df(10,zr-r),_[b]=i>0?(p/Df(10,l-i)%Df(10,i)|0)*a:0),m)for(;;)if(b==0){(_[0]+=a)==fa&&(_[0]=1,++t.e);break}else{if(_[b]+=a,_[b]!=fa)break;_[b--]=0,a=1}for(r=_.length;_[--r]===0;)_.pop();if(ti&&(t.e>tx||t.e<-tx))throw Error(sC+zi(t));return t}function LV(t,e){var n,r,i,a,l,f,m,p,b,_,T=t.constructor,N=T.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new T(t),ti?Or(e,N):e;if(m=t.d,_=e.d,r=e.e,p=t.e,m=m.slice(),l=p-r,l){for(b=l<0,b?(n=m,l=-l,f=_.length):(n=_,r=p,f=m.length),i=Math.max(Math.ceil(N/zr),f)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=m.length,f=_.length,b=i<f,b&&(f=i),i=0;i<f;i++)if(m[i]!=_[i]){b=m[i]<_[i];break}l=0}for(b&&(n=m,m=_,_=n,e.s=-e.s),f=m.length,i=_.length-f;i>0;--i)m[f++]=0;for(i=_.length;i>l;){if(m[--i]<_[i]){for(a=i;a&&m[--a]===0;)m[a]=fa-1;--m[a],m[i]+=fa}m[i]-=_[i]}for(;m[--f]===0;)m.pop();for(;m[0]===0;m.shift())--r;return m[0]?(e.d=m,e.e=r,ti?Or(e,N):e):new T(0)}function xd(t,e,n){var r,i=zi(t),a=_l(t.d),l=a.length;return e?(n&&(r=n-l)>0?a=a.charAt(0)+"."+a.slice(1)+vc(r):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+vc(-i-1)+a,n&&(r=n-l)>0&&(a+=vc(r))):i>=l?(a+=vc(i+1-l),n&&(r=n-i-1)>0&&(a=a+"."+vc(r))):((r=i+1)<l&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(a+="."),a+=vc(r))),t.s<0?"-"+a:a}function v8(t,e){if(t.length>e)return t.length=e,!0}function BV(t){var e,n,r;function i(a){var l=this;if(!(l instanceof i))return new i(a);if(l.constructor=i,a instanceof i){l.s=a.s,l.e=a.e,l.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Qf+a);if(a>0)l.s=1;else if(a<0)a=-a,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(a===~~a&&a<1e7){l.e=0,l.d=[a];return}return y8(l,a.toString())}else if(typeof a!="string")throw Error(Qf+a);if(a.charCodeAt(0)===45?(a=a.slice(1),l.s=-1):l.s=1,kme.test(a))y8(l,a);else throw Error(Qf+a)}if(i.prototype=It,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=BV,i.config=i.set=Mme,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Mme(t){if(!t||typeof t!="object")throw Error(Co+"Object expected");var e,n,r,i=["precision",1,Mm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(jm(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Qf+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Qf+n+": "+r);return this}var oC=BV(Dme);Zs=new oC(1);const ur=oC;function FV(t){var e;return t===0?e=1:e=Math.floor(new ur(t).abs().log(10).toNumber())+1,e}function VV(t,e,n){for(var r=new ur(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var zV=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},UV=(t,e,n)=>{if(t.lte(0))return new ur(0);var r=FV(t.toNumber()),i=new ur(10).pow(r),a=t.div(i),l=r!==1?.05:.1,f=new ur(Math.ceil(a.div(l).toNumber())).add(n).mul(l),m=f.mul(i);return e?new ur(m.toNumber()):new ur(Math.ceil(m.toNumber()))},jme=(t,e,n)=>{var r=new ur(1),i=new ur(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new ur(10).pow(FV(t)-1),i=new ur(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new ur(Math.floor(t)))}else t===0?i=new ur(Math.floor((e-1)/2)):n||(i=new ur(Math.floor(t)));for(var l=Math.floor((e-1)/2),f=[],m=0;m<e;m++)f.push(i.add(new ur(m-l).mul(r)).toNumber());return f},qV=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new ur(0),tickMin:new ur(0),tickMax:new ur(0)};var l=UV(new ur(n).sub(e).div(r-1),i,a),f;e<=0&&n>=0?f=new ur(0):(f=new ur(e).add(n).div(2),f=f.sub(new ur(f).mod(l)));var m=Math.ceil(f.sub(e).div(l).toNumber()),p=Math.ceil(new ur(n).sub(f).div(l).toNumber()),b=m+p+1;return b>r?qV(e,n,r,i,a+1):(b<r&&(p=n>0?p+(r-b):p,m=n>0?m:m+(r-b)),{step:l,tickMin:f.sub(new ur(m).mul(l)),tickMax:f.add(new ur(p).mul(l))})},Lme=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(i,2),[f,m]=zV([n,r]);if(f===-1/0||m===1/0){var p=m===1/0?[f,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),m];return n>r?p.reverse():p}if(f===m)return jme(f,i,a);var{step:b,tickMin:_,tickMax:T}=qV(f,m,l,a,0),N=VV(_,T.add(new ur(.1).mul(b)),b);return n>r?N.reverse():N},Bme=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,f]=zV([r,i]);if(l===-1/0||f===1/0)return[r,i];if(l===f)return[l];var m=Math.max(n,2),p=UV(new ur(f).sub(l).div(m-1),a,0),b=[...VV(new ur(l),new ur(f),p),f];return a===!1&&(b=b.map(_=>Math.round(_))),r>i?b.reverse():b},GV=t=>t.rootProps.maxBarSize,Fme=t=>t.rootProps.barGap,HV=t=>t.rootProps.barCategoryGap,Vme=t=>t.rootProps.barSize,N0=t=>t.rootProps.stackOffset,KV=t=>t.rootProps.reverseStackOrder,lC=t=>t.options.chartName,uC=t=>t.rootProps.syncId,WV=t=>t.rootProps.syncMethod,cC=t=>t.options.eventEmitter,Ti={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Tf={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},fl={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},Ib=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function Cb(t,e,n){if(n!=="auto")return n;if(t!=null)return Lu(t,e)?"category":"number"}function x8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x8(Object(n),!0).forEach(function(r){zme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zme(t,e,n){return(e=Ume(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ume(t){var e=qme(t,"string");return typeof e=="symbol"?e:e+""}function qme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var b8={allowDataOverflow:Tf.allowDataOverflow,allowDecimals:Tf.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Tf.angleAxisId,includeHidden:!1,name:void 0,reversed:Tf.reversed,scale:Tf.scale,tick:Tf.tick,tickCount:void 0,ticks:void 0,type:Tf.type,unit:void 0},w8={allowDataOverflow:fl.allowDataOverflow,allowDecimals:fl.allowDecimals,allowDuplicatedCategory:fl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fl.radiusAxisId,includeHidden:fl.includeHidden,name:void 0,reversed:fl.reversed,scale:fl.scale,tick:fl.tick,tickCount:fl.tickCount,ticks:void 0,type:fl.type,unit:void 0},Gme=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},fC=Oe([Gme,RF],(t,e)=>{var n;if(t!=null)return t;var r=(n=Cb(e,"angleAxis",b8.type))!==null&&n!==void 0?n:"category";return nx(nx({},b8),{},{type:r})}),Hme=(t,e)=>t.polarAxis.radiusAxis[e],dC=Oe([Hme,RF],(t,e)=>{var n;if(t!=null)return t;var r=(n=Cb(e,"radiusAxis",w8.type))!==null&&n!==void 0?n:"category";return nx(nx({},w8),{},{type:r})}),Ob=t=>t.polarOptions,hC=Oe([Bu,Fu,Zi],YF),$V=Oe([Ob,hC],(t,e)=>{if(t!=null)return rs(t.innerRadius,e,0)}),YV=Oe([Ob,hC],(t,e)=>{if(t!=null)return rs(t.outerRadius,e,e*.8)}),Kme=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},XV=Oe([Ob],Kme);Oe([fC,XV],Ib);var QV=Oe([hC,$V,YV],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Oe([dC,QV],Ib);var ZV=Oe([Wn,Ob,$V,YV,Bu,Fu],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:l,cy:f,startAngle:m,endAngle:p}=e;return{cx:rs(l,i,i/2),cy:rs(f,a,a/2),innerRadius:n,outerRadius:r,startAngle:m,endAngle:p,clockWise:!1}}}),ui=(t,e)=>e,P0=(t,e,n)=>n;function mC(t){return t?.id}function JV(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,l=new Map;return t.forEach(f=>{var m,p=(m=f.data)!==null&&m!==void 0?m:r;if(!(p==null||p.length===0)){var b=mC(f);p.forEach((_,T)=>{var N=a==null||i?T:String(br(_,a,null)),j=br(_,f.dataKey,0),M;l.has(N)?M=l.get(N):M={},Object.assign(M,{[b]:j}),l.set(N,M)})}}),Array.from(l.values())}function Nb(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var Pb=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function Rb(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function Wme(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var va=t=>{var e=Wn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Lm=t=>t.tooltip.settings.axisId;function $me(t){if(t in Xg)return Xg[t]();var e="scale".concat(y0(t));if(e in Xg)return Xg[e]()}function _8(t){var e=t.ticks,n=t.bandwidth,r=t.range(),i=[Math.min(...r),Math.max(...r)];return{domain:()=>t.domain(),range:(function(a){function l(){return a.apply(this,arguments)}return l.toString=function(){return a.toString()},l})(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(a){var l=i[0],f=i[1];return l<=f?a>=l&&a<=f:a>=f&&a<=l},bandwidth:n?()=>n.call(t):void 0,ticks:e?a=>e.call(t,a):void 0,map:(a,l)=>{var f=t(a);if(f!=null){if(t.bandwidth&&l!==null&&l!==void 0&&l.position){var m=t.bandwidth();switch(l.position){case"middle":f+=m/2;break;case"end":f+=m;break}}return f}}}}function E8(t,e,n){if(typeof t=="function")return _8(t.copy().domain(e).range(n));if(t!=null){var r=$me(t);if(r!=null)return r.domain(e).range(n),_8(r)}}var ez=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!Ou(e)){for(var n,r,i=0;i<e.length;i++){var a=e[i];mn(a)&&((n===void 0||a<n)&&(n=a),(r===void 0||a>r)&&(r=a))}return n!==void 0&&r!==void 0?[n,r]:void 0}return e}default:return e}};function A8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A8(Object(n),!0).forEach(function(r){Yme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yme(t,e,n){return(e=Xme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xme(t){var e=Qme(t,"string");return typeof e=="symbol"?e:e+""}function Qme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fS=[0,"auto"],la={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},tz=(t,e)=>t.cartesianAxis.xAxis[e],Ml=(t,e)=>{var n=tz(t,e);return n??la},ua={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:fS,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:b0},nz=(t,e)=>t.cartesianAxis.yAxis[e],jl=(t,e)=>{var n=nz(t,e);return n??ua},Zme={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},gC=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??Zme},xi=(t,e,n)=>{switch(e){case"xAxis":return Ml(t,n);case"yAxis":return jl(t,n);case"zAxis":return gC(t,n);case"angleAxis":return fC(t,n);case"radiusAxis":return dC(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Jme=(t,e,n)=>{switch(e){case"xAxis":return Ml(t,n);case"yAxis":return jl(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Bm=(t,e,n)=>{switch(e){case"xAxis":return Ml(t,n);case"yAxis":return jl(t,n);case"angleAxis":return fC(t,n);case"radiusAxis":return dC(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},rz=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function pC(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var Db=t=>t.graphicalItems.cartesianItems,ege=Oe([ui,P0],pC),yC=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),R0=Oe([Db,xi,ege],yC,{memoizeOptions:{resultEqualityCheck:Rb}}),iz=Oe([R0],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(Nb)),az=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),tge=Oe([R0],az),vC=t=>t.map(e=>e.data).filter(Boolean).flat(1),nge=Oe([R0],vC,{memoizeOptions:{resultEqualityCheck:Rb}}),xC=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},bC=Oe([nge,aC],xC),wC=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:br(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:br(i,r)}))):t.map(r=>({value:r})),kb=Oe([bC,xi,R0],wC);function sz(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function My(t){if(To(t)||t instanceof Date){var e=Number(t);if(mn(e))return e}}function S8(t){if(Array.isArray(t)){var e=[My(t[0]),My(t[1])];return Ou(e)?e:void 0}var n=My(t);if(n!=null)return[n,n]}function Nu(t){return t.map(My).filter(Ds)}function rge(t,e,n){return!n||typeof e!="number"||Ol(e)?[]:n.length?Nu(n.flatMap(r=>{var i=br(t,r.dataKey),a,l;if(Array.isArray(i)?[a,l]=i:a=l=i,!(!mn(a)||!mn(l)))return[e-a,e+l]})):[]}var ea=t=>{var e=va(t),n=Lm(t);return Bm(t,e,n)},D0=Oe([ea],t=>t?.dataKey),ige=Oe([iz,aC,ea],JV),oz=(t,e,n,r)=>{var i={},a=e.reduce((l,f)=>{if(f.stackId==null)return l;var m=l[f.stackId];return m==null&&(m=[]),m.push(f),l[f.stackId]=m,l},i);return Object.fromEntries(Object.entries(a).map(l=>{var[f,m]=l,p=r?[...m].reverse():m,b=p.map(mC);return[f,{stackedData:Fue(t,b,n),graphicalItems:p}]}))},dS=Oe([ige,iz,N0,KV],oz),lz=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var l=Gue(t,i,a);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},age=Oe([xi],t=>t.allowDataOverflow),_C=t=>{var e;if(t==null||!("domain"in t))return fS;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Nu(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:fS},EC=Oe([xi],_C),AC=Oe([EC,age],DV),sge=Oe([dS,zu,ui,AC],lz,{memoizeOptions:{resultEqualityCheck:Pb}}),Mb=t=>t.errorBars,oge=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>sz(n,r)),ix=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),l=Math.min(...a),f=Math.max(...a);return[l,f]}},SC=(t,e,n,r,i)=>{var a,l;if(n.length>0&&t.forEach(f=>{n.forEach(m=>{var p,b,_=(p=r[m.id])===null||p===void 0?void 0:p.filter(z=>sz(i,z)),T=br(f,(b=e.dataKey)!==null&&b!==void 0?b:m.dataKey),N=rge(f,T,_);if(N.length>=2){var j=Math.min(...N),M=Math.max(...N);(a==null||j<a)&&(a=j),(l==null||M>l)&&(l=M)}var L=S8(T);L!=null&&(a=a==null?L[0]:Math.min(a,L[0]),l=l==null?L[1]:Math.max(l,L[1]))})}),e?.dataKey!=null&&t.forEach(f=>{var m=S8(br(f,e.dataKey));m!=null&&(a=a==null?m[0]:Math.min(a,m[0]),l=l==null?m[1]:Math.max(l,m[1]))}),mn(a)&&mn(l))return[a,l]},lge=Oe([bC,xi,tge,Mb,ui],SC,{memoizeOptions:{resultEqualityCheck:Pb}});function uge(t){var{value:e}=t;if(To(e)||e instanceof Date)return e}var cge=(t,e,n)=>{var r=t.map(uge).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&IB(r))?JF(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},uz=t=>t.referenceElements.dots,Fm=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),fge=Oe([uz,ui,P0],Fm),cz=t=>t.referenceElements.areas,dge=Oe([cz,ui,P0],Fm),fz=t=>t.referenceElements.lines,hge=Oe([fz,ui,P0],Fm),dz=(t,e)=>{if(t!=null){var n=Nu(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},mge=Oe(fge,ui,dz),hz=(t,e)=>{if(t!=null){var n=Nu(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},gge=Oe([dge,ui],hz);function pge(t){var e;if(t.x!=null)return Nu([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Nu(n)}function yge(t){var e;if(t.y!=null)return Nu([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Nu(n)}var mz=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?pge(r):yge(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},vge=Oe([hge,ui],mz),xge=Oe(mge,vge,gge,(t,e,n)=>ix(t,n,e)),TC=(t,e,n,r,i,a,l,f)=>{if(n!=null)return n;var m=l==="vertical"&&f==="xAxis"||l==="horizontal"&&f==="yAxis",p=m?ix(r,a,i):ix(a,i);return Rme(e,p,t.allowDataOverflow)},bge=Oe([xi,EC,AC,sge,lge,xge,Wn,ui],TC,{memoizeOptions:{resultEqualityCheck:Pb}}),wge=[0,1],IC=(t,e,n,r,i,a,l)=>{if(!((t==null||n==null||n.length===0)&&l===void 0)){var{dataKey:f,type:m}=t,p=Lu(e,a);if(p&&f==null){var b;return JF(0,(b=n?.length)!==null&&b!==void 0?b:0)}return m==="category"?cge(r,t,p):i==="expand"?wge:l}},CC=Oe([xi,Wn,bC,kb,N0,ui,bge],IC);function _ge(t){return t in Xg}var gz=(t,e,n)=>{if(t!=null){var{scale:r,type:i}=t;if(r==="auto")return i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!e)?"point":i==="category"?"band":"linear";if(typeof r=="string"){var a="scale".concat(y0(r));return _ge(a)?a:"point"}}},ff=Oe([xi,rz,lC],gz);function OC(t,e,n,r){if(!(n==null||r==null))return typeof t.scale=="function"?E8(t.scale,n,r):E8(e,n,r)}var NC=(t,e,n)=>{var r=_C(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Ou(t))return Lme(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Ou(t))return Bme(t,e.tickCount,e.allowDecimals)}},PC=Oe([CC,Bm,ff],NC),RC=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&Ou(e)&&Array.isArray(n)&&n.length>0){var i,a,l=e[0],f=(i=n[0])!==null&&i!==void 0?i:0,m=e[1],p=(a=n[n.length-1])!==null&&a!==void 0?a:0;return[Math.min(l,f),Math.max(m,p)]}return e},Ege=Oe([xi,CC,PC,ui],RC),Age=Oe(kb,xi,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Nu(t.map(_=>_.value))).sort((_,T)=>_-T),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var l=a-i;if(l===0)return 1/0;for(var f=0;f<r.length-1;f++){var m=r[f],p=r[f+1];if(!(m==null||p==null)){var b=p-m;n=Math.min(n,b)}}return n/l}}),pz=Oe(Age,Wn,HV,Zi,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!mn(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var l=rs(n,t*a),f=t*a/2;return f-l-(f-l)/a*l}return 0}),Sge=(t,e,n)=>{var r=Ml(t,e);return r==null||typeof r.padding!="string"?0:pz(t,"xAxis",e,n,r.padding)},Tge=(t,e,n)=>{var r=jl(t,e);return r==null||typeof r.padding!="string"?0:pz(t,"yAxis",e,n,r.padding)},Ige=Oe(Ml,Sge,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),Cge=Oe(jl,Tge,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),Oge=Oe([Zi,Ige,gb,mb,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),Nge=Oe([Zi,Wn,Cge,gb,mb,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:l}=i;return a?[r.height-l.bottom,l.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),k0=(t,e,n,r)=>{var i;switch(e){case"xAxis":return Oge(t,n,r);case"yAxis":return Nge(t,n,r);case"zAxis":return(i=gC(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return XV(t);case"radiusAxis":return QV(t,n);default:return}},yz=Oe([xi,k0],Ib),Pge=Oe([ff,Ege],ez),hm=Oe([xi,ff,Pge,yz],OC);Oe([R0,Mb,ui],oge);function vz(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var jb=(t,e)=>e,Lb=(t,e,n)=>n,Rge=Oe(db,jb,Lb,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(vz)),Dge=Oe(hb,jb,Lb,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(vz)),xz=(t,e)=>({width:t.width,height:e.height}),kge=(t,e)=>{var n=typeof e.width=="number"?e.width:b0;return{width:n,height:t.height}},bz=Oe(Zi,Ml,xz),Mge=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},jge=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},Lge=Oe(Fu,Zi,Rge,jb,Lb,(t,e,n,r,i)=>{var a={},l;return n.forEach(f=>{var m=xz(e,f);l==null&&(l=Mge(e,r,t));var p=r==="top"&&!i||r==="bottom"&&i;a[f.id]=l-Number(p)*m.height,l+=(p?-1:1)*m.height}),a}),Bge=Oe(Bu,Zi,Dge,jb,Lb,(t,e,n,r,i)=>{var a={},l;return n.forEach(f=>{var m=kge(e,f);l==null&&(l=jge(e,r,t));var p=r==="left"&&!i||r==="right"&&i;a[f.id]=l-Number(p)*m.width,l+=(p?-1:1)*m.width}),a}),Fge=(t,e)=>{var n=Ml(t,e);if(n!=null)return Lge(t,n.orientation,n.mirror)},Vge=Oe([Zi,Ml,Fge,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),zge=(t,e)=>{var n=jl(t,e);if(n!=null)return Bge(t,n.orientation,n.mirror)},Uge=Oe([Zi,jl,zge,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),wz=Oe(Zi,jl,(t,e)=>{var n=typeof e.width=="number"?e.width:b0;return{width:n,height:t.height}}),T8=(t,e,n)=>{switch(e){case"xAxis":return bz(t,n).width;case"yAxis":return wz(t,n).height;default:return}},_z=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:l}=n,f=Lu(t,r),m=e.map(p=>p.value);if(l&&f&&a==="category"&&i&&IB(m))return m}},DC=Oe([Wn,kb,xi,ui],_z),Ez=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,l=Lu(t,r);if(l&&(i==="number"||a!=="auto"))return e.map(f=>f.value)}},kC=Oe([Wn,kb,Bm,ui],Ez),I8=Oe([Wn,Jme,ff,hm,DC,kC,k0,PC,ui],(t,e,n,r,i,a,l,f,m)=>{if(e!=null){var p=Lu(t,m);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:m,categoricalDomain:a,duplicateDomain:i,isCategorical:p,niceTicks:f,range:l,realScaleType:n,scale:r}}}),qge=(t,e,n,r,i,a,l,f,m)=>{if(!(e==null||r==null)){var p=Lu(t,m),{type:b,ticks:_,tickCount:T}=e,N=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,j=b==="category"&&r.bandwidth?r.bandwidth()/N:0;j=m==="angleAxis"&&a!=null&&a.length>=2?ga(a[0]-a[1])*2*j:j;var M=_||i;return M?M.map((L,z)=>{var $=l?l.indexOf(L):L,K=r.map($);return mn(K)?{index:z,coordinate:K+j,value:L,offset:j}:null}).filter(Ds):p&&f?f.map((L,z)=>{var $=r.map(L);return mn($)?{coordinate:$+j,value:L,index:z,offset:j}:null}).filter(Ds):r.ticks?r.ticks(T).map((L,z)=>{var $=r.map(L);return mn($)?{coordinate:$+j,value:L,index:z,offset:j}:null}).filter(Ds):r.domain().map((L,z)=>{var $=r.map(L);return mn($)?{coordinate:$+j,value:l?l[L]:L,index:z,offset:j}:null}).filter(Ds)}},Az=Oe([Wn,Bm,ff,hm,PC,k0,DC,kC,ui],qge),Gge=(t,e,n,r,i,a,l)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var f=Lu(t,l),{tickCount:m}=e,p=0;return p=l==="angleAxis"&&r?.length>=2?ga(r[0]-r[1])*2*p:p,f&&a?a.map((b,_)=>{var T=n.map(b);return mn(T)?{coordinate:T+p,value:b,index:_,offset:p}:null}).filter(Ds):n.ticks?n.ticks(m).map((b,_)=>{var T=n.map(b);return mn(T)?{coordinate:T+p,value:b,index:_,offset:p}:null}).filter(Ds):n.domain().map((b,_)=>{var T=n.map(b);return mn(T)?{coordinate:T+p,value:i?i[b]:b,index:_,offset:p}:null}).filter(Ds)}},$c=Oe([Wn,Bm,hm,k0,DC,kC,ui],Gge),Yc=Oe(xi,hm,(t,e)=>{if(!(t==null||e==null))return rx(rx({},t),{},{scale:e})}),Hge=Oe([xi,ff,CC,yz],OC);Oe((t,e,n)=>gC(t,n),Hge,(t,e)=>{if(!(t==null||e==null))return rx(rx({},t),{},{scale:e})});var Kge=Oe([Wn,db,hb],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Sz=t=>t.options.defaultTooltipEventType,Tz=t=>t.options.validateTooltipEventTypes;function Iz(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function MC(t,e){var n=Sz(t),r=Tz(t);return Iz(e,n,r)}function Wge(t){return Tt(e=>MC(e,t))}var Cz=(t,e)=>{var n,r=Number(e);if(!(Ol(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},$ge=t=>t.tooltip.settings,Ic={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Yge={itemInteraction:{click:Ic,hover:Ic},axisInteraction:{click:Ic,hover:Ic},keyboardInteraction:Ic,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Oz=Bs({name:"tooltip",initialState:Yge,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Qr()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ko(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Qr()},removeTooltipEntrySettings:{reducer(t,e){var n=Ko(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Qr()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:Xge,replaceTooltipEntrySettings:Qge,removeTooltipEntrySettings:Zge,setTooltipSettingsState:Jge,setActiveMouseOverItemIndex:Nz,mouseLeaveItem:epe,mouseLeaveChart:Pz,setActiveClickItemIndex:tpe,setMouseOverAxisIndex:Rz,setMouseClickAxisIndex:npe,setSyncInteraction:hS,setKeyboardInteraction:mS}=Oz.actions,rpe=Oz.reducer;function C8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C8(Object(n),!0).forEach(function(r){ipe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ipe(t,e,n){return(e=ape(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ape(t){var e=spe(t,"string");return typeof e=="symbol"?e:e+""}function spe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ope(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function lpe(t){return t.index!=null}var Dz=(t,e,n,r)=>{if(e==null)return Ic;var i=ope(t,e,n);if(i==null)return Ic;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(lpe(i)){if(a)return uy(uy({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return uy(uy({},Ic),{},{coordinate:i.coordinate})};function upe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function cpe(t,e){var n=upe(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),l=Math.max(r,i);return n>=a&&n<=l}function fpe(t,e,n){if(n==null||e==null)return!0;var r=br(t,e);return r==null||!Ou(n)?!0:cpe(r,n)}var jC=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var a=Number(i);if(!mn(a))return i;var l=0,f=1/0;e.length>0&&(f=e.length-1);var m=Math.max(l,Math.min(a,f)),p=e[m];return p==null||fpe(p,n,r)?String(m):null},kz=(t,e,n,r,i,a,l)=>{if(a!=null){var f=l[0],m=f?.getPosition(a);if(m!=null)return m;var p=i?.[Number(a)];if(p)return n==="horizontal"?{x:p.coordinate,y:(r.top+e)/2}:{x:(r.left+t)/2,y:p.coordinate}}},Mz=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(l=>{var f;return((f=l.settings)===null||f===void 0?void 0:f.graphicalItemId)===i})},jz=t=>t.options.tooltipPayloadSearcher,Vm=t=>t.tooltip;function O8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function N8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O8(Object(n),!0).forEach(function(r){dpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dpe(t,e,n){return(e=hpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hpe(t){var e=mpe(t,"string");return typeof e=="symbol"?e:e+""}function mpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gpe(t,e){return t??e}var Lz=(t,e,n,r,i,a,l)=>{if(!(e==null||a==null)){var{chartData:f,computedData:m,dataStartIndex:p,dataEndIndex:b}=n,_=[];return t.reduce((T,N)=>{var j,{dataDefinedOnItem:M,settings:L}=N,z=gpe(M,f),$=Array.isArray(z)?xF(z,p,b):z,K=(j=L?.dataKey)!==null&&j!==void 0?j:r,X=L?.nameKey,se;if(r&&Array.isArray($)&&!Array.isArray($[0])&&l==="axis"?se=CB($,r,i):se=a($,e,m,X),Array.isArray(se))se.forEach(V=>{var W=N8(N8({},L),{},{name:V.name,unit:V.unit,color:void 0,fill:void 0});T.push(Nk({tooltipEntrySettings:W,dataKey:V.dataKey,payload:V.payload,value:br(V.payload,V.dataKey),name:V.name}))});else{var J;T.push(Nk({tooltipEntrySettings:L,dataKey:K,payload:se,value:br(se,K),name:(J=br(se,X))!==null&&J!==void 0?J:L?.name}))}return T},_)}},LC=Oe([ea,rz,lC],gz),ppe=Oe([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),ype=Oe([va,Lm],pC),zm=Oe([ppe,ea,ype],yC,{memoizeOptions:{resultEqualityCheck:Rb}}),vpe=Oe([zm],t=>t.filter(Nb)),xpe=Oe([zm],vC,{memoizeOptions:{resultEqualityCheck:Rb}}),Um=Oe([xpe,zu],xC),bpe=Oe([vpe,zu,ea],JV),BC=Oe([Um,ea,zm],wC),Bz=Oe([ea],_C),wpe=Oe([ea],t=>t.allowDataOverflow),Fz=Oe([Bz,wpe],DV),_pe=Oe([zm],t=>t.filter(Nb)),Epe=Oe([bpe,_pe,N0,KV],oz),Ape=Oe([Epe,zu,va,Fz],lz),Spe=Oe([zm],az),Tpe=Oe([Um,ea,Spe,Mb,va],SC,{memoizeOptions:{resultEqualityCheck:Pb}}),Ipe=Oe([uz,va,Lm],Fm),Cpe=Oe([Ipe,va],dz),Ope=Oe([cz,va,Lm],Fm),Npe=Oe([Ope,va],hz),Ppe=Oe([fz,va,Lm],Fm),Rpe=Oe([Ppe,va],mz),Dpe=Oe([Cpe,Rpe,Npe],ix),kpe=Oe([ea,Bz,Fz,Ape,Tpe,Dpe,Wn,va],TC),M0=Oe([ea,Wn,Um,BC,N0,va,kpe],IC),Mpe=Oe([M0,ea,LC],NC),jpe=Oe([ea,M0,Mpe,va],RC),Vz=t=>{var e=va(t),n=Lm(t),r=!1;return k0(t,e,n,r)},zz=Oe([ea,Vz],Ib),Uz=Oe([ea,LC,jpe,zz],OC),Lpe=Oe([Wn,BC,ea,va],_z),Bpe=Oe([Wn,BC,ea,va],Ez),Fpe=(t,e,n,r,i,a,l,f)=>{if(e){var{type:m}=e,p=Lu(t,f);if(r){var b=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,_=m==="category"&&r.bandwidth?r.bandwidth()/b:0;return _=f==="angleAxis"&&i!=null&&i?.length>=2?ga(i[0]-i[1])*2*_:_,p&&l?l.map((T,N)=>{var j=r.map(T);return mn(j)?{coordinate:j+_,value:T,index:N,offset:_}:null}).filter(Ds):r.domain().map((T,N)=>{var j=r.map(T);return mn(j)?{coordinate:j+_,value:a?a[T]:T,index:N,offset:_}:null}).filter(Ds)}}},Uu=Oe([Wn,ea,LC,Uz,Vz,Lpe,Bpe,va],Fpe),FC=Oe([Sz,Tz,$ge],(t,e,n)=>Iz(n.shared,t,e)),qz=t=>t.tooltip.settings.trigger,VC=t=>t.tooltip.settings.defaultIndex,j0=Oe([Vm,FC,qz,VC],Dz),Xc=Oe([j0,Um,D0,M0],jC),Gz=Oe([Uu,Xc],Cz),zC=Oe([j0],t=>{if(t)return t.dataKey}),Vpe=Oe([j0],t=>{if(t)return t.graphicalItemId}),Hz=Oe([Vm,FC,qz,VC],Mz),zpe=Oe([Bu,Fu,Wn,Zi,Uu,VC,Hz],kz),Upe=Oe([j0,zpe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),qpe=Oe([j0],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),Gpe=Oe([Hz,Xc,zu,D0,Gz,jz,FC],Lz),Hpe=Oe([Gpe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function P8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function R8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P8(Object(n),!0).forEach(function(r){Kpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kpe(t,e,n){return(e=Wpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wpe(t){var e=$pe(t,"string");return typeof e=="symbol"?e:e+""}function $pe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ype=()=>Tt(ea),Xpe=()=>{var t=Ype(),e=Tt(Uu),n=Tt(Uz);return lm(!t||!n?void 0:R8(R8({},t),{},{scale:n}),e)};function D8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D8(Object(n),!0).forEach(function(r){Qpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qpe(t,e,n){return(e=Zpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zpe(t){var e=Jpe(t,"string");return typeof e=="symbol"?e:e+""}function Jpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var e0e=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},t0e=(t,e,n,r)=>{var i=e.find(p=>p&&p.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:l}=r;return gh(gh(gh({},r),Vi(r.cx,r.cy,l,a)),{},{angle:a,radius:l})}var f=i.coordinate,{angle:m}=r;return gh(gh(gh({},r),Vi(r.cx,r.cy,f,m)),{},{angle:m,radius:f})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function n0e(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var Kz=(t,e,n,r,i)=>{var a,l=(a=e?.length)!==null&&a!==void 0?a:0;if(l<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var f=0;f<l;f++){var m,p,b,_,T,N=f>0?(m=n[f-1])===null||m===void 0?void 0:m.coordinate:(p=n[l-1])===null||p===void 0?void 0:p.coordinate,j=(b=n[f])===null||b===void 0?void 0:b.coordinate,M=f>=l-1?(_=n[0])===null||_===void 0?void 0:_.coordinate:(T=n[f+1])===null||T===void 0?void 0:T.coordinate,L=void 0;if(!(N==null||j==null||M==null))if(ga(j-N)!==ga(M-j)){var z=[];if(ga(M-j)===ga(i[1]-i[0])){L=M;var $=j+i[1]-i[0];z[0]=Math.min($,($+N)/2),z[1]=Math.max($,($+N)/2)}else{L=N;var K=M+i[1]-i[0];z[0]=Math.min(j,(K+j)/2),z[1]=Math.max(j,(K+j)/2)}var X=[Math.min(j,(L+j)/2),Math.max(j,(L+j)/2)];if(t>X[0]&&t<=X[1]||t>=z[0]&&t<=z[1]){var se;return(se=n[f])===null||se===void 0?void 0:se.index}}else{var J=Math.min(N,M),V=Math.max(N,M);if(t>(J+j)/2&&t<=(V+j)/2){var W;return(W=n[f])===null||W===void 0?void 0:W.index}}}else if(e)for(var H=0;H<l;H++){var oe=e[H];if(oe!=null){var ae=e[H+1],Z=e[H-1];if(H===0&&ae!=null&&t<=(oe.coordinate+ae.coordinate)/2||H===l-1&&Z!=null&&t>(oe.coordinate+Z.coordinate)/2||H>0&&H<l-1&&Z!=null&&ae!=null&&t>(oe.coordinate+Z.coordinate)/2&&t<=(oe.coordinate+ae.coordinate)/2)return oe.index}}return-1},r0e=()=>Tt(lC),UC=(t,e)=>e,Wz=(t,e,n)=>n,qC=(t,e,n,r)=>r,i0e=Oe(Uu,t=>nb(t,e=>e.coordinate)),GC=Oe([Vm,UC,Wz,qC],Dz),HC=Oe([GC,Um,D0,M0],jC),a0e=(t,e,n)=>{if(e!=null){var r=Vm(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},$z=Oe([Vm,UC,Wz,qC],Mz),ax=Oe([Bu,Fu,Wn,Zi,Uu,qC,$z],kz),s0e=Oe([GC,ax],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),Yz=Oe([Uu,HC],Cz),o0e=Oe([$z,HC,zu,D0,Yz,jz,UC],Lz),l0e=Oe([GC,HC],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),u0e=(t,e,n,r,i,a,l)=>{if(!(!t||!n||!r||!i)&&n0e(t,l)){var f=Hue(t,e),m=Kz(f,a,i,n,r),p=e0e(e,i,m,t);return{activeIndex:String(m),activeCoordinate:p}}},c0e=(t,e,n,r,i,a,l)=>{if(!(!t||!r||!i||!a||!n)){var f=Wfe(t,n);if(f){var m=Kue(f,e),p=Kz(m,l,a,r,i),b=t0e(e,a,p,f);return{activeIndex:String(p),activeCoordinate:b}}}},f0e=(t,e,n,r,i,a,l,f)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?u0e(t,e,r,i,a,l,f):c0e(t,e,n,r,i,a,l)},d0e=Oe(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),h0e=Oe(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Ti)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:Wme}});function k8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function M8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k8(Object(n),!0).forEach(function(r){m0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m0e(t,e,n){return(e=g0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g0e(t){var e=p0e(t,"string");return typeof e=="symbol"?e:e+""}function p0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var y0e={},v0e={zIndexMap:Object.values(Ti).reduce((t,e)=>M8(M8({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),y0e)},x0e=new Set(Object.values(Ti));function b0e(t){return x0e.has(t)}var Xz=Bs({name:"zIndex",initialState:v0e,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Qr()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!b0e(n)&&delete t.zIndexMap[n])},prepare:Qr()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:Qr()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Qr()}}}),{registerZIndexPortal:w0e,unregisterZIndexPortal:_0e,registerZIndexPortalElement:E0e,unregisterZIndexPortalElement:A0e}=Xz.actions,S0e=Xz.reducer;function ds(t){var{zIndex:e,children:n}=t,r=_ce(),i=r&&e!==void 0&&e!==0,a=La(),l=Gr();D.useLayoutEffect(()=>i?(l(w0e({zIndex:e})),()=>{l(_0e({zIndex:e}))}):Od,[l,e,i]);var f=Tt(m=>d0e(m,e,a));return i?f?C5.createPortal(n,f):null:n}function gS(){return gS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gS.apply(null,arguments)}function j8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j8(Object(n),!0).forEach(function(r){T0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function T0e(t,e,n){return(e=I0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I0e(t){var e=C0e(t,"string");return typeof e=="symbol"?e:e+""}function C0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O0e(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return D.isValidElement(e)?D.cloneElement(e,r):D.createElement(n,r)}function N0e(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:l,layout:f,cursor:m,tooltipEventType:p,chartName:b}=t,_=n,T=r,N=i;if(!m||!_||b!=="ScatterChart"&&p!=="axis")return null;var j,M,L;if(b==="ScatterChart")j=_,M=ofe,L=Ti.cursorLine;else if(b==="BarChart")j=lfe(f,_,a,l),M=$F,L=Ti.cursorRectangle;else if(f==="radial"&&PB(_)){var{cx:z,cy:$,radius:K,startAngle:X,endAngle:se}=XF(_);j={cx:z,cy:$,startAngle:X,endAngle:se,innerRadius:K,outerRadius:K},M=ZF,L=Ti.cursorLine}else j={points:Qfe(f,_,a)},M=MI,L=Ti.cursorLine;var J=typeof m=="object"&&"className"in m?m.className:void 0,V=cy(cy(cy(cy({stroke:"#ccc",pointerEvents:"none"},a),j),dd(m)),{},{payload:T,payloadIndex:N,className:Hn("recharts-tooltip-cursor",J)});return D.createElement(ds,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:L},D.createElement(O0e,{cursor:m,cursorComp:M,cursorProps:V}))}function P0e(t){var e=Xpe(),n=CF(),r=Nd(),i=r0e();return e==null||n==null||r==null||i==null?null:D.createElement(N0e,gS({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var Qz=D.createContext(null),R0e=()=>D.useContext(Qz),pE={exports:{}},L8;function D0e(){return L8||(L8=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(m,p,b){this.fn=m,this.context=p,this.once=b||!1}function a(m,p,b,_,T){if(typeof b!="function")throw new TypeError("The listener must be a function");var N=new i(b,_||m,T),j=n?n+p:p;return m._events[j]?m._events[j].fn?m._events[j]=[m._events[j],N]:m._events[j].push(N):(m._events[j]=N,m._eventsCount++),m}function l(m,p){--m._eventsCount===0?m._events=new r:delete m._events[p]}function f(){this._events=new r,this._eventsCount=0}f.prototype.eventNames=function(){var p=[],b,_;if(this._eventsCount===0)return p;for(_ in b=this._events)e.call(b,_)&&p.push(n?_.slice(1):_);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(b)):p},f.prototype.listeners=function(p){var b=n?n+p:p,_=this._events[b];if(!_)return[];if(_.fn)return[_.fn];for(var T=0,N=_.length,j=new Array(N);T<N;T++)j[T]=_[T].fn;return j},f.prototype.listenerCount=function(p){var b=n?n+p:p,_=this._events[b];return _?_.fn?1:_.length:0},f.prototype.emit=function(p,b,_,T,N,j){var M=n?n+p:p;if(!this._events[M])return!1;var L=this._events[M],z=arguments.length,$,K;if(L.fn){switch(L.once&&this.removeListener(p,L.fn,void 0,!0),z){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,b),!0;case 3:return L.fn.call(L.context,b,_),!0;case 4:return L.fn.call(L.context,b,_,T),!0;case 5:return L.fn.call(L.context,b,_,T,N),!0;case 6:return L.fn.call(L.context,b,_,T,N,j),!0}for(K=1,$=new Array(z-1);K<z;K++)$[K-1]=arguments[K];L.fn.apply(L.context,$)}else{var X=L.length,se;for(K=0;K<X;K++)switch(L[K].once&&this.removeListener(p,L[K].fn,void 0,!0),z){case 1:L[K].fn.call(L[K].context);break;case 2:L[K].fn.call(L[K].context,b);break;case 3:L[K].fn.call(L[K].context,b,_);break;case 4:L[K].fn.call(L[K].context,b,_,T);break;default:if(!$)for(se=1,$=new Array(z-1);se<z;se++)$[se-1]=arguments[se];L[K].fn.apply(L[K].context,$)}}return!0},f.prototype.on=function(p,b,_){return a(this,p,b,_,!1)},f.prototype.once=function(p,b,_){return a(this,p,b,_,!0)},f.prototype.removeListener=function(p,b,_,T){var N=n?n+p:p;if(!this._events[N])return this;if(!b)return l(this,N),this;var j=this._events[N];if(j.fn)j.fn===b&&(!T||j.once)&&(!_||j.context===_)&&l(this,N);else{for(var M=0,L=[],z=j.length;M<z;M++)(j[M].fn!==b||T&&!j[M].once||_&&j[M].context!==_)&&L.push(j[M]);L.length?this._events[N]=L.length===1?L[0]:L:l(this,N)}return this},f.prototype.removeAllListeners=function(p){var b;return p?(b=n?n+p:p,this._events[b]&&l(this,b)):(this._events=new r,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=n,f.EventEmitter=f,t.exports=f})(pE)),pE.exports}var k0e=D0e();const M0e=Rl(k0e);var Up=new M0e,pS="recharts.syncEvent.tooltip",B8="recharts.syncEvent.brush",KC=(t,e)=>{if(e&&Array.isArray(t)){var n=Number.parseInt(e,10);if(!Ol(n))return t[n]}},j0e={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},Zz=Bs({name:"options",initialState:j0e,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),L0e=Zz.reducer,{createEventEmitter:B0e}=Zz.actions;function F0e(t){return t.tooltip.syncInteraction}var V0e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Jz=Bs({name:"chartData",initialState:V0e,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:F8,setDataStartEndIndexes:z0e,setComputedData:EEe}=Jz.actions,U0e=Jz.reducer,q0e=["x","y"];function V8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ph(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V8(Object(n),!0).forEach(function(r){G0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G0e(t,e,n){return(e=H0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H0e(t){var e=K0e(t,"string");return typeof e=="symbol"?e:e+""}function K0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function W0e(t,e){if(t==null)return{};var n,r,i=$0e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function $0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Y0e(){var t=Tt(uC),e=Tt(cC),n=Gr(),r=Tt(WV),i=Tt(Uu),a=Nd(),l=w0(),f=Tt(m=>m.rootProps.className);D.useEffect(()=>{if(t==null)return Od;var m=(p,b,_)=>{if(e!==_&&t===p){if(r==="index"){var T;if(l&&b!==null&&b!==void 0&&(T=b.payload)!==null&&T!==void 0&&T.coordinate&&b.payload.sourceViewBox){var N=b.payload.coordinate,{x:j,y:M}=N,L=W0e(N,q0e),{x:z,y:$,width:K,height:X}=b.payload.sourceViewBox,se=ph(ph({},L),{},{x:l.x+(K?(j-z)/K:0)*l.width,y:l.y+(X?(M-$)/X:0)*l.height});n(ph(ph({},b),{},{payload:ph(ph({},b.payload),{},{coordinate:se})}))}else n(b);return}if(i!=null){var J;if(typeof r=="function"){var V={activeTooltipIndex:b.payload.index==null?void 0:Number(b.payload.index),isTooltipActive:b.payload.active,activeIndex:b.payload.index==null?void 0:Number(b.payload.index),activeLabel:b.payload.label,activeDataKey:b.payload.dataKey,activeCoordinate:b.payload.coordinate},W=r(i,V);J=i[W]}else r==="value"&&(J=i.find(ye=>String(ye.value)===b.payload.label));var{coordinate:H}=b.payload;if(J==null||b.payload.active===!1||H==null||l==null){n(hS({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:oe,y:ae}=H,Z=Math.min(oe,l.x+l.width),ee=Math.min(ae,l.y+l.height),xe={x:a==="horizontal"?J.coordinate:Z,y:a==="horizontal"?ee:J.coordinate},de=hS({active:b.payload.active,coordinate:xe,dataKey:b.payload.dataKey,index:String(J.index),label:b.payload.label,sourceViewBox:b.payload.sourceViewBox,graphicalItemId:b.payload.graphicalItemId});n(de)}}};return Up.on(pS,m),()=>{Up.off(pS,m)}},[f,n,e,t,r,i,a,l])}function X0e(){var t=Tt(uC),e=Tt(cC),n=Gr();D.useEffect(()=>{if(t==null)return Od;var r=(i,a,l)=>{e!==l&&t===i&&n(z0e(a))};return Up.on(B8,r),()=>{Up.off(B8,r)}},[n,e,t])}function Q0e(){var t=Gr();D.useEffect(()=>{t(B0e())},[t]),Y0e(),X0e()}function Z0e(t,e,n,r,i,a){var l=Tt(N=>a0e(N,t,e)),f=Tt(cC),m=Tt(uC),p=Tt(WV),b=Tt(F0e),_=b?.active,T=w0();D.useEffect(()=>{if(!_&&m!=null&&f!=null){var N=hS({active:a,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:T,graphicalItemId:void 0});Up.emit(pS,m,N,f)}},[_,n,l,i,r,f,m,p,a,T])}function z8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z8(Object(n),!0).forEach(function(r){J0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function J0e(t,e,n){return(e=e1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e1e(t){var e=t1e(t,"string");return typeof e=="symbol"?e:e+""}function t1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function n1e(t){return t.dataKey}function r1e(t,e){return D.isValidElement(t)?D.cloneElement(t,e):typeof t=="function"?D.createElement(t,e):D.createElement(Vce,e)}var q8=[],i1e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function yE(t){var e,n,r=Qi(t,i1e),{active:i,allowEscapeViewBox:a,animationDuration:l,animationEasing:f,content:m,filterNull:p,isAnimationActive:b,offset:_,payloadUniqBy:T,position:N,reverseDirection:j,useTranslate3d:M,wrapperStyle:L,cursor:z,shared:$,trigger:K,defaultIndex:X,portal:se,axisId:J}=r,V=Gr(),W=typeof X=="number"?String(X):X;D.useEffect(()=>{V(Jge({shared:$,trigger:K,axisId:J,active:i,defaultIndex:W}))},[V,$,K,J,i,W]);var H=w0(),oe=qF(),ae=Wge($),{activeIndex:Z,isActive:ee}=(e=Tt(pt=>l0e(pt,ae,K,W)))!==null&&e!==void 0?e:{},xe=Tt(pt=>o0e(pt,ae,K,W)),de=Tt(pt=>Yz(pt,ae,K,W)),ye=Tt(pt=>s0e(pt,ae,K,W)),_e=xe,qe=R0e(),Ve=(n=i??ee)!==null&&n!==void 0?n:!1,[tt,me]=Nle([_e,Ve]),Se=ae==="axis"?de:void 0;Z0e(ae,K,ye,Se,Z,Ve);var Ye=se??qe;if(Ye==null||H==null||ae==null)return null;var ze=_e??q8;Ve||(ze=q8),p&&ze.length&&(ze=nle(ze.filter(pt=>pt.value!=null&&(pt.hide!==!0||r.includeHidden)),T,n1e));var yt=ze.length>0,$e=D.createElement(Wce,{allowEscapeViewBox:a,animationDuration:l,animationEasing:f,isAnimationActive:b,active:Ve,coordinate:ye,hasPayload:yt,offset:_,position:N,reverseDirection:j,useTranslate3d:M,viewBox:H,wrapperStyle:L,lastBoundingBox:tt,innerRef:me,hasPortalFromProps:!!se},r1e(m,U8(U8({},r),{},{payload:ze,label:Se,active:Ve,activeIndex:Z,coordinate:ye,accessibilityLayer:oe})));return D.createElement(D.Fragment,null,C5.createPortal($e,Ye),Ve&&D.createElement(P0e,{cursor:z,tooltipEventType:ae,coordinate:ye,payload:ze,index:Z}))}var L0=t=>null;L0.displayName="Cell";function a1e(t,e,n){return(e=s1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s1e(t){var e=o1e(t,"string");return typeof e=="symbol"?e:e+""}function o1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class l1e{constructor(e){a1e(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function G8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function u1e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G8(Object(n),!0).forEach(function(r){c1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function c1e(t,e,n){return(e=f1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f1e(t){var e=d1e(t,"string");return typeof e=="symbol"?e:e+""}function d1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h1e={cacheSize:2e3,enableCache:!0},eU=u1e({},h1e),H8=new l1e(eU.cacheSize),m1e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},K8="recharts_measurement_span";function g1e(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",l=e.letterSpacing||"",f=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(l,"|").concat(f)}var W8=(t,e)=>{try{var n=document.getElementById(K8);n||(n=document.createElement("span"),n.setAttribute("id",K8),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,m1e,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},fp=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||xb.isSsr)return{width:0,height:0};if(!eU.enableCache)return W8(e,n);var r=g1e(e,n),i=H8.get(r);if(i)return i;var a=W8(e,n);return H8.set(r,a),a},tU;function p1e(t,e,n){return(e=y1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y1e(t){var e=v1e(t,"string");return typeof e=="symbol"?e:e+""}function v1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Y8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,x1e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,b1e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,w1e={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},_1e=["cm","mm","pt","pc","in","Q","px"];function E1e(t){return _1e.includes(t)}var Th="NaN";function A1e(t,e){return t*w1e[e]}class Ma{static parse(e){var n,[,r,i]=(n=b1e.exec(e))!==null&&n!==void 0?n:[];return r==null?Ma.NaN:new Ma(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Ol(e)&&(this.unit=""),n!==""&&!x1e.test(n)&&(this.num=NaN,this.unit=""),E1e(n)&&(this.num=A1e(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Ma(NaN,""):new Ma(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Ma(NaN,""):new Ma(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ma(NaN,""):new Ma(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ma(NaN,""):new Ma(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ol(this.num)}}tU=Ma;p1e(Ma,"NaN",new tU(NaN,""));function nU(t){if(t==null||t.includes(Th))return Th;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=$8.exec(e))!==null&&n!==void 0?n:[],l=Ma.parse(r??""),f=Ma.parse(a??""),m=i==="*"?l.multiply(f):l.divide(f);if(m.isNaN())return Th;e=e.replace($8,m.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,[,b,_,T]=(p=Y8.exec(e))!==null&&p!==void 0?p:[],N=Ma.parse(b??""),j=Ma.parse(T??""),M=_==="+"?N.add(j):N.subtract(j);if(M.isNaN())return Th;e=e.replace(Y8,M.toString())}return e}var X8=/\(([^()]*)\)/;function S1e(t){for(var e=t,n;(n=X8.exec(e))!=null;){var[,r]=n;e=e.replace(X8,nU(r))}return e}function T1e(t){var e=t.replace(/\s+/g,"");return e=S1e(e),e=nU(e),e}function I1e(t){try{return T1e(t)}catch{return Th}}function vE(t){var e=I1e(t.slice(5,-1));return e===Th?"":e}var C1e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],O1e=["dx","dy","angle","className","breakAll"];function yS(){return yS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yS.apply(null,arguments)}function Q8(t,e){if(t==null)return{};var n,r,i=N1e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function N1e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var rU=/[ \f\n\r\t\v\u2028\u2029]+/,iU=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];li(e)||(n?i=e.toString().split(""):i=e.toString().split(rU));var a=i.map(f=>({word:f,width:fp(f,r).width})),l=n?0:fp("",r).width;return{wordsWithComputedWidth:a,spaceWidth:l}}catch{return null}};function P1e(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var aU=(t,e,n,r)=>t.reduce((i,a)=>{var{word:l,width:f}=a,m=i[i.length-1];if(m&&f!=null&&(e==null||r||m.width+f+n<Number(e)))m.words.push(l),m.width+=f+n;else{var p={words:[l],width:f};i.push(p)}return i},[]),sU=t=>t.reduce((e,n)=>e.width>n.width?e:n),R1e="",Z8=(t,e,n,r,i,a,l,f)=>{var m=t.slice(0,e),p=iU({breakAll:n,style:r,children:m+R1e});if(!p)return[!1,[]];var b=aU(p.wordsWithComputedWidth,a,l,f),_=b.length>i||sU(b).width>Number(a);return[_,b]},D1e=(t,e,n,r,i)=>{var{maxLines:a,children:l,style:f,breakAll:m}=t,p=St(a),b=String(l),_=aU(e,r,n,i);if(!p||i)return _;var T=_.length>a||sU(_).width>Number(r);if(!T)return _;for(var N=0,j=b.length-1,M=0,L;N<=j&&M<=b.length-1;){var z=Math.floor((N+j)/2),$=z-1,[K,X]=Z8(b,$,m,f,a,r,n,i),[se]=Z8(b,z,m,f,a,r,n,i);if(!K&&!se&&(N=z+1),K&&se&&(j=z-1),!K&&se){L=X;break}M++}return L||_},J8=t=>{var e=li(t)?[]:t.toString().split(rU);return[{words:e,width:void 0}]},k1e=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:l}=t;if((e||n)&&!xb.isSsr){var f,m,p=iU({breakAll:a,children:r,style:i});if(p){var{wordsWithComputedWidth:b,spaceWidth:_}=p;f=b,m=_}else return J8(r);return D1e({breakAll:a,children:r,maxLines:l,style:i},f,m,e,!!n)}return J8(r)},oU="#808080",M1e={angle:0,breakAll:!1,capHeight:"0.71em",fill:oU,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Bb=D.forwardRef((t,e)=>{var n=Qi(t,M1e),{x:r,y:i,lineHeight:a,capHeight:l,fill:f,scaleToFit:m,textAnchor:p,verticalAnchor:b}=n,_=Q8(n,C1e),T=D.useMemo(()=>k1e({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:m,style:_.style,width:_.width}),[_.breakAll,_.children,_.maxLines,m,_.style,_.width]),{dx:N,dy:j,angle:M,className:L,breakAll:z}=_,$=Q8(_,O1e);if(!To(r)||!To(i)||T.length===0)return null;var K=Number(r)+(St(N)?N:0),X=Number(i)+(St(j)?j:0);if(!mn(K)||!mn(X))return null;var se;switch(b){case"start":se=vE("calc(".concat(l,")"));break;case"middle":se=vE("calc(".concat((T.length-1)/2," * -").concat(a," + (").concat(l," / 2))"));break;default:se=vE("calc(".concat(T.length-1," * -").concat(a,")"));break}var J=[],V=T[0];if(m&&V!=null){var W=V.width,{width:H}=_;J.push("scale(".concat(St(H)&&St(W)?H/W:1,")"))}return M&&J.push("rotate(".concat(M,", ").concat(K,", ").concat(X,")")),J.length&&($.transform=J.join(" ")),D.createElement("text",yS({},is($),{ref:e,x:K,y:X,className:Hn("recharts-text",L),textAnchor:p,fill:f.includes("url")?oU:f}),T.map((oe,ae)=>{var Z=oe.words.join(z?"":" ");return D.createElement("tspan",{x:K,dy:ae===0?se:a,key:"".concat(Z,"-").concat(ae)},Z)}))});Bb.displayName="Text";function e6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e6(Object(n),!0).forEach(function(r){j1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j1e(t,e,n){return(e=L1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L1e(t){var e=B1e(t,"string");return typeof e=="symbol"?e:e+""}function B1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var F1e=t=>{var{viewBox:e,position:n,offset:r=0,parentViewBox:i}=t,{x:a,y:l,height:f,upperWidth:m,lowerWidth:p}=RI(e),b=a,_=a+(m-p)/2,T=(b+_)/2,N=(m+p)/2,j=b+m/2,M=f>=0?1:-1,L=M*r,z=M>0?"end":"start",$=M>0?"start":"end",K=m>=0?1:-1,X=K*r,se=K>0?"end":"start",J=K>0?"start":"end",V=i;if(n==="top"){var W={x:b+m/2,y:l-L,horizontalAnchor:"middle",verticalAnchor:z};return V&&(W.height=Math.max(l-V.y,0),W.width=m),W}if(n==="bottom"){var H={x:_+p/2,y:l+f+L,horizontalAnchor:"middle",verticalAnchor:$};return V&&(H.height=Math.max(V.y+V.height-(l+f),0),H.width=p),H}if(n==="left"){var oe={x:T-X,y:l+f/2,horizontalAnchor:se,verticalAnchor:"middle"};return V&&(oe.width=Math.max(oe.x-V.x,0),oe.height=f),oe}if(n==="right"){var ae={x:T+N+X,y:l+f/2,horizontalAnchor:J,verticalAnchor:"middle"};return V&&(ae.width=Math.max(V.x+V.width-ae.x,0),ae.height=f),ae}var Z=V?{width:N,height:f}:{};return n==="insideLeft"?dl({x:T+X,y:l+f/2,horizontalAnchor:J,verticalAnchor:"middle"},Z):n==="insideRight"?dl({x:T+N-X,y:l+f/2,horizontalAnchor:se,verticalAnchor:"middle"},Z):n==="insideTop"?dl({x:b+m/2,y:l+L,horizontalAnchor:"middle",verticalAnchor:$},Z):n==="insideBottom"?dl({x:_+p/2,y:l+f-L,horizontalAnchor:"middle",verticalAnchor:z},Z):n==="insideTopLeft"?dl({x:b+X,y:l+L,horizontalAnchor:J,verticalAnchor:$},Z):n==="insideTopRight"?dl({x:b+m-X,y:l+L,horizontalAnchor:se,verticalAnchor:$},Z):n==="insideBottomLeft"?dl({x:_+X,y:l+f-L,horizontalAnchor:J,verticalAnchor:z},Z):n==="insideBottomRight"?dl({x:_+p-X,y:l+f-L,horizontalAnchor:se,verticalAnchor:z},Z):n&&typeof n=="object"&&(St(n.x)||gd(n.x))&&(St(n.y)||gd(n.y))?dl({x:a+rs(n.x,N),y:l+rs(n.y,f),horizontalAnchor:"end",verticalAnchor:"end"},Z):dl({x:j,y:l+f/2,horizontalAnchor:"middle",verticalAnchor:"middle"},Z)},V1e=["labelRef"],z1e=["content"];function t6(t,e){if(t==null)return{};var n,r,i=U1e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function U1e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function n6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n6(Object(n),!0).forEach(function(r){q1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function q1e(t,e,n){return(e=G1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G1e(t){var e=H1e(t,"string");return typeof e=="symbol"?e:e+""}function H1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ou(){return ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ou.apply(null,arguments)}var lU=D.createContext(null),uU=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:l,children:f}=t,m=D.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:l}),[e,n,r,i,a,l]);return D.createElement(lU.Provider,{value:m},f)},cU=()=>{var t=D.useContext(lU),e=w0();return t||(e?RI(e):void 0)},K1e=D.createContext(null),W1e=()=>{var t=D.useContext(K1e),e=Tt(ZV);return t||e},$1e=t=>{var{value:e,formatter:n}=t,r=li(t.children)?e:t.children;return typeof n=="function"?n(r):r},WC=t=>t!=null&&typeof t=="function",Y1e=(t,e)=>{var n=ga(e-t),r=Math.min(Math.abs(e-t),360);return n*r},X1e=(t,e,n,r,i)=>{var{offset:a,className:l}=t,{cx:f,cy:m,innerRadius:p,outerRadius:b,startAngle:_,endAngle:T,clockWise:N}=i,j=(p+b)/2,M=Y1e(_,T),L=M>=0?1:-1,z,$;switch(e){case"insideStart":z=_+L*a,$=N;break;case"insideEnd":z=T-L*a,$=!N;break;case"end":z=T+L*a,$=N;break;default:throw new Error("Unsupported position ".concat(e))}$=M<=0?$:!$;var K=Vi(f,m,j,z),X=Vi(f,m,j,z+($?1:-1)*359),se="M".concat(K.x,",").concat(K.y,`
    A`).concat(j,",").concat(j,",0,1,").concat($?0:1,`,
    `).concat(X.x,",").concat(X.y),J=li(t.id)?Op("recharts-radial-line-"):t.id;return D.createElement("text",ou({},r,{dominantBaseline:"central",className:Hn("recharts-radial-bar-label",l)}),D.createElement("defs",null,D.createElement("path",{id:J,d:se})),D.createElement("textPath",{xlinkHref:"#".concat(J)},n))},Q1e=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:l,startAngle:f,endAngle:m}=t,p=(f+m)/2;if(n==="outside"){var{x:b,y:_}=Vi(r,i,l+e,p);return{x:b,y:_,textAnchor:b>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var T=(a+l)/2,{x:N,y:j}=Vi(r,i,T,p);return{x:N,y:j,textAnchor:"middle",verticalAnchor:"middle"}},jy=t=>t!=null&&"cx"in t&&St(t.cx),Z1e={angle:0,offset:5,zIndex:Ti.label,position:"middle",textBreakAll:!1};function J1e(t){if(!jy(t))return t;var{cx:e,cy:n,outerRadius:r}=t,i=r*2;return{x:e-r,y:n-r,width:i,upperWidth:i,lowerWidth:i,height:i}}function xc(t){var e=Qi(t,Z1e),{viewBox:n,parentViewBox:r,position:i,value:a,children:l,content:f,className:m="",textBreakAll:p,labelRef:b}=e,_=W1e(),T=cU(),N=i==="center"?T:_??T,j,M,L;n==null?j=N:jy(n)?j=n:j=RI(n);var z=J1e(j);if(!j||li(a)&&li(l)&&!D.isValidElement(f)&&typeof f!="function")return null;var $=Qg(Qg({},e),{},{viewBox:j});if(D.isValidElement(f)){var{labelRef:K}=$,X=t6($,V1e);return D.cloneElement(f,X)}if(typeof f=="function"){var{content:se}=$,J=t6($,z1e);if(M=D.createElement(f,J),D.isValidElement(M))return M}else M=$1e(e);var V=is(e);if(jy(j)){if(i==="insideStart"||i==="insideEnd"||i==="end")return X1e(e,i,M,V,j);L=Q1e(j,e.offset,e.position)}else{if(!z)return null;var W=F1e({viewBox:z,position:i,offset:e.offset,parentViewBox:jy(r)?void 0:r});L=Qg(Qg({x:W.x,y:W.y,textAnchor:W.horizontalAnchor,verticalAnchor:W.verticalAnchor},W.width!==void 0?{width:W.width}:{}),W.height!==void 0?{height:W.height}:{})}return D.createElement(ds,{zIndex:e.zIndex},D.createElement(Bb,ou({ref:b,className:Hn("recharts-label",m)},V,L,{textAnchor:P1e(V.textAnchor)?V.textAnchor:L.textAnchor,breakAll:p}),M))}xc.displayName="Label";var eye=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?D.createElement(xc,ou({key:"label-implicit"},r)):To(t)?D.createElement(xc,ou({key:"label-implicit",value:t},r)):D.isValidElement(t)?t.type===xc?D.cloneElement(t,Qg({key:"label-implicit"},r)):D.createElement(xc,ou({key:"label-implicit",content:t},r)):WC(t)?D.createElement(xc,ou({key:"label-implicit",content:t},r)):t&&typeof t=="object"?D.createElement(xc,ou({},t,{key:"label-implicit"},r)):null};function fU(t){var{label:e,labelRef:n}=t,r=cU();return eye(e,r,n)||null}var xE={},bE={},r6;function tye(){return r6||(r6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(bE)),bE}var wE={},i6;function nye(){return i6||(i6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(wE)),wE}var a6;function rye(){return a6||(a6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tye(),n=nye(),r=wI();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(xE)),xE}var _E,s6;function iye(){return s6||(s6=1,_E=rye().last),_E}var aye=iye();const sye=Rl(aye);var oye=["valueAccessor"],lye=["dataKey","clockWise","id","textBreakAll","zIndex"];function sx(){return sx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sx.apply(null,arguments)}function o6(t,e){if(t==null)return{};var n,r,i=uye(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function uye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var cye=t=>Array.isArray(t.value)?sye(t.value):t.value,dU=D.createContext(void 0),hU=dU.Provider,mU=D.createContext(void 0),fye=mU.Provider;function dye(){return D.useContext(dU)}function hye(){return D.useContext(mU)}function Ly(t){var{valueAccessor:e=cye}=t,n=o6(t,oye),{dataKey:r,clockWise:i,id:a,textBreakAll:l,zIndex:f}=n,m=o6(n,lye),p=dye(),b=hye(),_=p||b;return!_||!_.length?null:D.createElement(ds,{zIndex:f??Ti.label},D.createElement(Yi,{className:"recharts-label-list"},_.map((T,N)=>{var j,M=li(r)?e(T,N):br(T.payload,r),L=li(a)?{}:{id:"".concat(a,"-").concat(N)};return D.createElement(xc,sx({key:"label-".concat(N)},is(T),m,L,{fill:(j=n.fill)!==null&&j!==void 0?j:T.fill,parentViewBox:T.parentViewBox,value:M,textBreakAll:l,viewBox:T.viewBox,index:N,zIndex:0}))})))}Ly.displayName="LabelList";function $C(t){var{label:e}=t;return e?e===!0?D.createElement(Ly,{key:"labelList-implicit"}):D.isValidElement(e)||WC(e)?D.createElement(Ly,{key:"labelList-implicit",content:e}):typeof e=="object"?D.createElement(Ly,sx({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function vS(){return vS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vS.apply(null,arguments)}var gU=t=>{var{cx:e,cy:n,r,className:i}=t,a=Hn("recharts-dot",i);return St(e)&&St(n)&&St(r)?D.createElement("circle",vS({},ao(t),bI(t),{className:a,cx:e,cy:n,r})):null},pU=t=>t.graphicalItems.polarItems,mye=Oe([ui,P0],pC),Fb=Oe([pU,xi,mye],yC),gye=Oe([Fb],vC),Vb=Oe([gye,Tb],xC),pye=Oe([Vb,xi,Fb],wC);Oe([Vb,xi,Fb],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var a,l=br(r,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:br(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var l6=()=>{},yye=Oe([Vb,xi,Fb,Mb,ui],SC),vye=Oe([xi,EC,AC,l6,yye,l6,Wn,ui],TC),yU=Oe([xi,Wn,Vb,pye,N0,ui,vye],IC),xye=Oe([yU,Bm,ff],NC),bye=Oe([xi,yU,xye,ui],RC);Oe([ff,bye],ez);var wye={radiusAxis:{},angleAxis:{}},vU=Bs({name:"polarAxis",initialState:wye,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:AEe,removeRadiusAxis:SEe,addAngleAxis:TEe,removeAngleAxis:IEe}=vU.actions,_ye=vU.reducer;function xU(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}function u6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function c6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u6(Object(n),!0).forEach(function(r){Eye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eye(t,e,n){return(e=Aye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aye(t){var e=Sye(t,"string");return typeof e=="symbol"?e:e+""}function Sye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tye=(t,e)=>e,YC=Oe([pU,Tye],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),Iye=[],XC=(t,e,n)=>n?.length===0?Iye:n,bU=Oe([Tb,YC,XC],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>c6(c6({},e.presentationProps),a.props))),i!=null)return i}}),Cye=Oe([bU,YC,XC],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var a,l=br(r,e.nameKey,e.name),f;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?f=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?f=r.fill:f=e.fill,{value:Dm(l,e.dataKey),color:f,payload:r,type:e.legendType}})}),Oye=Oe([bU,YC,XC,Zi],(t,e,n,r)=>{if(!(e==null||t==null))return Nve({offset:r,pieSettings:e,displayedData:t,cells:n})}),EE={exports:{}},xr={};var f6;function Nye(){if(f6)return xr;f6=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.view_transition"),N=Symbol.for("react.client.reference");function j(M){if(typeof M=="object"&&M!==null){var L=M.$$typeof;switch(L){case t:switch(M=M.type,M){case n:case i:case r:case m:case p:case T:return M;default:switch(M=M&&M.$$typeof,M){case l:case f:case _:case b:return M;case a:return M;default:return L}}case e:return L}}}return xr.ContextConsumer=a,xr.ContextProvider=l,xr.Element=t,xr.ForwardRef=f,xr.Fragment=n,xr.Lazy=_,xr.Memo=b,xr.Portal=e,xr.Profiler=i,xr.StrictMode=r,xr.Suspense=m,xr.SuspenseList=p,xr.isContextConsumer=function(M){return j(M)===a},xr.isContextProvider=function(M){return j(M)===l},xr.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===t},xr.isForwardRef=function(M){return j(M)===f},xr.isFragment=function(M){return j(M)===n},xr.isLazy=function(M){return j(M)===_},xr.isMemo=function(M){return j(M)===b},xr.isPortal=function(M){return j(M)===e},xr.isProfiler=function(M){return j(M)===i},xr.isStrictMode=function(M){return j(M)===r},xr.isSuspense=function(M){return j(M)===m},xr.isSuspenseList=function(M){return j(M)===p},xr.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===n||M===i||M===r||M===m||M===p||typeof M=="object"&&M!==null&&(M.$$typeof===_||M.$$typeof===b||M.$$typeof===l||M.$$typeof===a||M.$$typeof===f||M.$$typeof===N||M.getModuleId!==void 0)},xr.typeOf=j,xr}var d6;function Pye(){return d6||(d6=1,EE.exports=Nye()),EE.exports}var Rye=Pye(),h6=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",m6=null,AE=null,wU=t=>{if(t===m6&&Array.isArray(AE))return AE;var e=[];return D.Children.forEach(t,n=>{li(n)||(Rye.isFragment(n)?e=e.concat(wU(n.props.children)):e.push(n))}),AE=e,m6=t,e};function QC(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>h6(i)):r=[h6(e)],wU(t).forEach(i=>{var a=md(i,"type.displayName")||md(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var _U=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,SE={},g6;function Dye(){return g6||(g6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(SE)),SE}var TE,p6;function kye(){return p6||(p6=1,TE=Dye().isPlainObject),TE}var Mye=kye();const jye=Rl(Mye);var y6,v6,x6,b6,w6;function _6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function E6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_6(Object(n),!0).forEach(function(r){Lye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lye(t,e,n){return(e=Bye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bye(t){var e=Fye(t,"string");return typeof e=="symbol"?e:e+""}function Fye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ox(){return ox=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ox.apply(null,arguments)}function Fg(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var A6=(t,e,n,r,i)=>{var a=n-r,l;return l=yi(y6||(y6=Fg(["M ",",",""])),t,e),l+=yi(v6||(v6=Fg(["L ",",",""])),t+n,e),l+=yi(x6||(x6=Fg(["L ",",",""])),t+n-a/2,e+i),l+=yi(b6||(b6=Fg(["L ",",",""])),t+n-a/2-r,e+i),l+=yi(w6||(w6=Fg(["L ",","," Z"])),t,e),l},Vye={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zye=t=>{var e=Qi(t,Vye),{x:n,y:r,upperWidth:i,lowerWidth:a,height:l,className:f}=e,{animationEasing:m,animationDuration:p,animationBegin:b,isUpdateAnimationActive:_}=e,T=D.useRef(null),[N,j]=D.useState(-1),M=D.useRef(i),L=D.useRef(a),z=D.useRef(l),$=D.useRef(n),K=D.useRef(r),X=S0(t,"trapezoid-");if(D.useEffect(()=>{if(T.current&&T.current.getTotalLength)try{var xe=T.current.getTotalLength();xe&&j(xe)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||l!==+l||i===0&&a===0||l===0)return null;var se=Hn("recharts-trapezoid",f);if(!_)return D.createElement("g",null,D.createElement("path",ox({},is(e),{className:se,d:A6(n,r,i,a,l)})));var J=M.current,V=L.current,W=z.current,H=$.current,oe=K.current,ae="0px ".concat(N===-1?1:N,"px"),Z="".concat(N,"px 0px"),ee=GF(["strokeDasharray"],p,m);return D.createElement(A0,{animationId:X,key:X,canBegin:N>0,duration:p,easing:m,isActive:_,begin:b},xe=>{var de=Jr(J,i,xe),ye=Jr(V,a,xe),_e=Jr(W,l,xe),qe=Jr(H,n,xe),Ve=Jr(oe,r,xe);T.current&&(M.current=de,L.current=ye,z.current=_e,$.current=qe,K.current=Ve);var tt=xe>0?{transition:ee,strokeDasharray:Z}:{strokeDasharray:ae};return D.createElement("path",ox({},is(e),{className:se,d:A6(qe,Ve,de,ye,_e),ref:T,style:E6(E6({},tt),e.style)}))})},Uye=["option","shapeType","activeClassName"];function qye(t,e){if(t==null)return{};var n,r,i=Gye(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Gye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function S6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S6(Object(n),!0).forEach(function(r){Hye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hye(t,e,n){return(e=Kye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kye(t){var e=Wye(t,"string");return typeof e=="symbol"?e:e+""}function Wye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $ye(t,e){return lx(lx({},e),t)}function Yye(t,e){return t==="symbols"}function T6(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return D.createElement($F,n);case"trapezoid":return D.createElement(zye,n);case"sector":return D.createElement(ZF,n);case"symbols":if(Yye(e))return D.createElement(NB,n);break;case"curve":return D.createElement(MI,n);default:return null}}function Xye(t){return D.isValidElement(t)?t.props:t}function ZC(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=qye(t,Uye),a;if(D.isValidElement(e))a=D.cloneElement(e,lx(lx({},i),Xye(e)));else if(typeof e=="function")a=e(i,i.index);else if(jye(e)&&typeof e!="boolean"){var l=$ye(e,i);a=D.createElement(T6,{shapeType:n,elementProps:l})}else{var f=i;a=D.createElement(T6,{shapeType:n,elementProps:f})}return i.isActive?D.createElement(Yi,{className:r},a):a}var JC=(t,e,n)=>{var r=Gr();return(i,a)=>l=>{t?.(i,a,l),r(Nz({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},eO=t=>{var e=Gr();return(n,r)=>i=>{t?.(n,r,i),e(epe())}},tO=(t,e,n)=>{var r=Gr();return(i,a)=>l=>{t?.(i,a,l),r(tpe({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function nO(t){var{tooltipEntrySettings:e}=t,n=Gr(),r=La(),i=D.useRef(null);return D.useLayoutEffect(()=>{r||(i.current===null?n(Xge(e)):i.current!==e&&n(Qge({prev:i.current,next:e})),i.current=e)},[e,n,r]),D.useLayoutEffect(()=>()=>{i.current&&(n(Zge(i.current)),i.current=null)},[n]),null}function EU(t){var{legendPayload:e}=t,n=Gr(),r=La(),i=D.useRef(null);return D.useLayoutEffect(()=>{r||(i.current===null?n(VF(e)):i.current!==e&&n(zF({prev:i.current,next:e})),i.current=e)},[n,r,e]),D.useLayoutEffect(()=>()=>{i.current&&(n(UF(i.current)),i.current=null)},[n]),null}function Qye(t){var{legendPayload:e}=t,n=Gr(),r=Tt(Wn),i=D.useRef(null);return D.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(VF(e)):i.current!==e&&n(zF({prev:i.current,next:e})),i.current=e)},[n,r,e]),D.useLayoutEffect(()=>()=>{i.current&&(n(UF(i.current)),i.current=null)},[n]),null}var IE,Zye=()=>{var[t]=D.useState(()=>Op("uid-"));return t},Jye=(IE=MG.useId)!==null&&IE!==void 0?IE:Zye;function eve(t,e){var n=Jye();return e||(t?"".concat(t,"-").concat(n):n)}var tve=D.createContext(void 0),rO=t=>{var{id:e,type:n,children:r}=t,i=eve("recharts-".concat(n),e);return D.createElement(tve.Provider,{value:i},r(i))},nve={cartesianItems:[],polarItems:[]},AU=Bs({name:"graphicalItems",initialState:nve,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Qr()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ko(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Qr()},removeCartesianGraphicalItem:{reducer(t,e){var n=Ko(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Qr()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Qr()},removePolarGraphicalItem:{reducer(t,e){var n=Ko(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Qr()}}}),{addCartesianGraphicalItem:rve,replaceCartesianGraphicalItem:ive,removeCartesianGraphicalItem:ave,addPolarGraphicalItem:sve,removePolarGraphicalItem:ove}=AU.actions,lve=AU.reducer,uve=t=>{var e=Gr(),n=D.useRef(null);return D.useLayoutEffect(()=>{n.current===null?e(rve(t)):n.current!==t&&e(ive({prev:n.current,next:t})),n.current=t},[e,t]),D.useLayoutEffect(()=>()=>{n.current&&(e(ave(n.current)),n.current=null)},[e]),null},SU=D.memo(uve);function cve(t){var e=Gr();return D.useLayoutEffect(()=>(e(sve(t)),()=>{e(ove(t))}),[e,t]),null}var fve=["key"],dve=["onMouseEnter","onClick","onMouseLeave"],hve=["id"],mve=["id"];function I6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I6(Object(n),!0).forEach(function(r){gve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gve(t,e,n){return(e=pve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pve(t){var e=yve(t,"string");return typeof e=="symbol"?e:e+""}function yve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qc(){return Qc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qc.apply(null,arguments)}function zb(t,e){if(t==null)return{};var n,r,i=vve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function vve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function xve(t){var e=D.useMemo(()=>QC(t.children,L0),[t.children]),n=Tt(r=>Cye(r,t.id,e));return n==null?null:D.createElement(Qye,{legendPayload:n})}var bve=D.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:l,name:f,hide:m,tooltipType:p,id:b}=t,_={dataDefinedOnItem:r.map(T=>T.tooltipPayload),getPosition:T=>{var N;return(N=r[Number(T)])===null||N===void 0?void 0:N.tooltipPosition},settings:{stroke:i,strokeWidth:a,fill:l,dataKey:e,nameKey:n,name:Dm(f,e),hide:m,type:p,color:l,unit:"",graphicalItemId:b}};return D.createElement(nO,{tooltipEntrySettings:_})}),wve=(t,e)=>t>e?"start":t<e?"end":"middle",_ve=(t,e,n)=>rs(typeof e=="function"?e(t):e,n,n*.8),Eve=(t,e,n)=>{var{top:r,left:i,width:a,height:l}=e,f=YF(a,l),m=i+rs(t.cx,a,a/2),p=r+rs(t.cy,l,l/2),b=rs(t.innerRadius,f,0),_=_ve(n,t.outerRadius,f),T=t.maxRadius||Math.sqrt(a*a+l*l)/2;return{cx:m,cy:p,innerRadius:b,outerRadius:_,maxRadius:T}},Ave=(t,e)=>{var n=ga(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Sve=(t,e)=>{if(D.isValidElement(t))return D.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Hn("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=zb(e,fve);return D.createElement(MI,Qc({},i,{type:"linear",className:n}))},Tve=(t,e,n)=>{if(D.isValidElement(t))return D.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),D.isValidElement(r)))return r;var i=Hn("recharts-pie-label-text",xU(t));return D.createElement(Bb,Qc({},e,{alignmentBaseline:"middle",className:i}),r)};function Ive(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:a,dataKey:l}=n;if(!r||!i||!e)return null;var f=ao(n),m=dd(i),p=dd(a),b=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,_=e.map((T,N)=>{var j=(T.startAngle+T.endAngle)/2,M=Vi(T.cx,T.cy,T.outerRadius+b,j),L=vi(vi(vi(vi({},f),T),{},{stroke:"none"},m),{},{index:N,textAnchor:wve(M.x,T.cx)},M),z=vi(vi(vi(vi({},f),T),{},{fill:"none",stroke:T.fill},p),{},{index:N,points:[Vi(T.cx,T.cy,T.outerRadius,j),M],key:"line"});return D.createElement(ds,{zIndex:Ti.label,key:"label-".concat(T.startAngle,"-").concat(T.endAngle,"-").concat(T.midAngle,"-").concat(N)},D.createElement(Yi,null,a&&Sve(a,z),Tve(i,L,br(T,l))))});return D.createElement(Yi,{className:"recharts-pie-labels"},_)}function Cve(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?D.createElement($C,{label:i}):D.createElement(Ive,{sectors:e,props:n,showLabels:r})}function Ove(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:a,id:l}=t,f=Tt(Xc),m=Tt(zC),p=Tt(Vpe),{onMouseEnter:b,onClick:_,onMouseLeave:T}=i,N=zb(i,dve),j=JC(b,i.dataKey,l),M=eO(T),L=tO(_,i.dataKey,l);return e==null||e.length===0?null:D.createElement(D.Fragment,null,e.map((z,$)=>{if(z?.startAngle===0&&z?.endAngle===0&&e.length!==1)return null;var K=p==null||p===l,X=String($)===f&&(m==null||i.dataKey===m)&&K,se=f?r:null,J=n&&X?n:se,V=vi(vi({},z),{},{stroke:z.stroke,tabIndex:-1,[EF]:$,[AF]:l});return D.createElement(Yi,Qc({key:"sector-".concat(z?.startAngle,"-").concat(z?.endAngle,"-").concat(z.midAngle,"-").concat($),tabIndex:-1,className:"recharts-pie-sector"},tb(N,z,$),{onMouseEnter:j(z,$),onMouseLeave:M(z,$),onClick:L(z,$)}),D.createElement(ZC,Qc({option:a??J,index:$,shapeType:"sector",isActive:X},V)))}))}function Nve(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:a}=t,{cornerRadius:l,startAngle:f,endAngle:m,dataKey:p,nameKey:b,tooltipType:_}=n,T=Math.abs(n.minAngle),N=Ave(f,m),j=Math.abs(N),M=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,L=r.filter(J=>br(J,p,0)!==0).length,z=(j>=360?L:L-1)*M,$=j-L*T-z,K=r.reduce((J,V)=>{var W=br(V,p,0);return J+(St(W)?W:0)},0),X;if(K>0){var se;X=r.map((J,V)=>{var W=br(J,p,0),H=br(J,b,V),oe=Eve(n,a,J),ae=(St(W)?W:0)/K,Z,ee=vi(vi({},J),i&&i[V]&&i[V].props);V?Z=se.endAngle+ga(N)*M*(W!==0?1:0):Z=f;var xe=Z+ga(N)*((W!==0?T:0)+ae*$),de=(Z+xe)/2,ye=(oe.innerRadius+oe.outerRadius)/2,_e=[{name:H,value:W,payload:ee,dataKey:p,type:_,graphicalItemId:n.id}],qe=Vi(oe.cx,oe.cy,ye,de);return se=vi(vi(vi(vi({},n.presentationProps),{},{percent:ae,cornerRadius:typeof l=="string"?parseFloat(l):l,name:H,tooltipPayload:_e,midAngle:de,middleRadius:ye,tooltipPosition:qe},ee),oe),{},{value:W,dataKey:p,startAngle:Z,endAngle:xe,payload:ee,paddingAngle:ga(N)*M}),se})}return X}function Pve(t){var{showLabels:e,sectors:n,children:r}=t,i=D.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return D.createElement(fye,{value:e?i:void 0},r)}function Rve(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:a,animationBegin:l,animationDuration:f,animationEasing:m,activeShape:p,inactiveShape:b,onAnimationStart:_,onAnimationEnd:T}=e,N=S0(e,"recharts-pie-"),j=n.current,[M,L]=D.useState(!1),z=D.useCallback(()=>{typeof T=="function"&&T(),L(!1)},[T]),$=D.useCallback(()=>{typeof _=="function"&&_(),L(!0)},[_]);return D.createElement(Pve,{showLabels:!M,sectors:i},D.createElement(A0,{animationId:N,begin:l,duration:f,isActive:a,easing:m,onAnimationStart:$,onAnimationEnd:z,key:N},K=>{var X,se=[],J=i&&i[0],V=(X=J?.startAngle)!==null&&X!==void 0?X:0;return i?.forEach((W,H)=>{var oe=j&&j[H],ae=H>0?md(W,"paddingAngle",0):0;if(oe){var Z=Jr(oe.endAngle-oe.startAngle,W.endAngle-W.startAngle,K),ee=vi(vi({},W),{},{startAngle:V+ae,endAngle:V+Z+ae});se.push(ee),V=ee.endAngle}else{var{endAngle:xe,startAngle:de}=W,ye=Jr(0,xe-de,K),_e=vi(vi({},W),{},{startAngle:V+ae,endAngle:V+ye+ae});se.push(_e),V=_e.endAngle}}),n.current=se,D.createElement(Yi,null,D.createElement(Ove,{sectors:se,activeShape:p,inactiveShape:b,allOtherPieProps:e,shape:e.shape,id:r}))}),D.createElement(Cve,{showLabels:!M,sectors:i,props:e}),e.children)}var Dve={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ti.area};function kve(t){var{id:e}=t,n=zb(t,hve),{hide:r,className:i,rootTabIndex:a}=t,l=D.useMemo(()=>QC(t.children,L0),[t.children]),f=Tt(b=>Oye(b,e,l)),m=D.useRef(null),p=Hn("recharts-pie",i);return r||f==null?(m.current=null,D.createElement(Yi,{tabIndex:a,className:p})):D.createElement(ds,{zIndex:t.zIndex},D.createElement(bve,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:f,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),D.createElement(Yi,{tabIndex:a,className:p},D.createElement(Rve,{props:vi(vi({},n),{},{sectors:f}),previousSectorsRef:m,id:e})))}function TU(t){var e=Qi(t,Dve),{id:n}=e,r=zb(e,mve),i=ao(r);return D.createElement(rO,{id:n,type:"pie"},a=>D.createElement(D.Fragment,null,D.createElement(cve,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),D.createElement(xve,Qc({},r,{id:a})),D.createElement(kve,Qc({},r,{id:a}))))}TU.displayName="Pie";var Mve=["points"];function C6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C6(Object(n),!0).forEach(function(r){jve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jve(t,e,n){return(e=Lve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lve(t){var e=Bve(t,"string");return typeof e=="symbol"?e:e+""}function Bve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ux(){return ux=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ux.apply(null,arguments)}function Fve(t,e){if(t==null)return{};var n,r,i=Vve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Vve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function zve(t){var{option:e,dotProps:n,className:r}=t;if(D.isValidElement(e))return D.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Hn(r,typeof e!="boolean"?e.className:""),a=n??{},{points:l}=a,f=Fve(a,Mve);return D.createElement(gU,ux({},f,{className:i}))}function Uve(t,e){return t==null?!1:e?!0:t.length===1}function qve(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:a,baseProps:l,needClip:f,clipPathId:m,zIndex:p=Ti.scatter}=t;if(!Uve(e,n))return null;var b=_U(n),_=Cse(n),T=e.map((j,M)=>{var L,z,$=CE(CE(CE({r:3},l),_),{},{index:M,cx:(L=j.x)!==null&&L!==void 0?L:void 0,cy:(z=j.y)!==null&&z!==void 0?z:void 0,dataKey:a,value:j.value,payload:j.payload,points:e});return D.createElement(zve,{key:"dot-".concat(M),option:n,dotProps:$,className:i})}),N={};return f&&m!=null&&(N.clipPath="url(#clipPath-".concat(b?"":"dots-").concat(m,")")),D.createElement(ds,{zIndex:p},D.createElement(Yi,ux({className:r},N),T))}function O6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function N6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O6(Object(n),!0).forEach(function(r){Gve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gve(t,e,n){return(e=Hve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hve(t){var e=Kve(t,"string");return typeof e=="symbol"?e:e+""}function Kve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IU=0,Wve={xAxis:{},yAxis:{},zAxis:{}},CU=Bs({name:"cartesianAxis",initialState:Wve,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Qr()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Qr()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Qr()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Qr()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Qr()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Qr()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Qr()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Qr()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Qr()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a,l=i.widthHistory||[];if(l.length===3&&l[0]===l[2]&&r===l[1]&&r!==i.width&&Math.abs(r-((a=l[0])!==null&&a!==void 0?a:0))<=1)return;var f=[...l,r].slice(-3);t.yAxis[n]=N6(N6({},i),{},{width:r,widthHistory:f})}}}}),{addXAxis:$ve,replaceXAxis:Yve,removeXAxis:Xve,addYAxis:Qve,replaceYAxis:Zve,removeYAxis:Jve,addZAxis:CEe,replaceZAxis:OEe,removeZAxis:NEe,updateYAxisWidth:exe}=CU.actions,txe=CU.reducer,nxe=Oe([Zi],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),rxe=Oe([nxe,Bu,Fu],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),iO=()=>Tt(rxe),ixe=()=>Tt(Hpe);function P6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P6(Object(n),!0).forEach(function(r){axe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function axe(t,e,n){return(e=sxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sxe(t){var e=oxe(t,"string");return typeof e=="symbol"?e:e+""}function oxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lxe=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:a,clipPath:l}=t;if(i===!1||e.x==null||e.y==null)return null;var f={index:n,dataKey:a,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},m=OE(OE(OE({},f),dd(i)),bI(i)),p;return D.isValidElement(i)?p=D.cloneElement(i,m):typeof i=="function"?p=i(m):p=D.createElement(gU,m),D.createElement(Yi,{className:"recharts-active-dot",clipPath:l},p)};function uxe(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:a,zIndex:l=Ti.activeDot}=t,f=Tt(Xc),m=ixe();if(e==null||m==null)return null;var p=e.find(b=>m.includes(b.payload));return li(p)?null:D.createElement(ds,{zIndex:l},D.createElement(lxe,{point:p,childIndex:Number(f),mainColor:n,dataKey:i,activeDot:r,clipPath:a}))}var R6=(t,e,n)=>{var r=n??t;if(!li(r))return rs(r,e,0)},cxe=(t,e,n)=>{var r={},i=t.filter(Nb),a=t.filter(p=>p.stackId==null),l=i.reduce((p,b)=>{var _=p[b.stackId];return _==null&&(_=[]),_.push(b),p[b.stackId]=_,p},r),f=Object.entries(l).map(p=>{var b,[_,T]=p,N=T.map(M=>M.dataKey),j=R6(e,n,(b=T[0])===null||b===void 0?void 0:b.barSize);return{stackId:_,dataKeys:N,barSize:j}}),m=a.map(p=>{var b=[p.dataKey].filter(T=>T!=null),_=R6(e,n,p.barSize);return{stackId:void 0,dataKeys:b,barSize:_}});return[...f,...m]};function D6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D6(Object(n),!0).forEach(function(r){fxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fxe(t,e,n){return(e=dxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dxe(t){var e=hxe(t,"string");return typeof e=="symbol"?e:e+""}function hxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mxe(t,e,n,r,i){var a,l=r.length;if(!(l<1)){var f=rs(t,n,0,!0),m,p=[];if(mn((a=r[0])===null||a===void 0?void 0:a.barSize)){var b=!1,_=n/l,T=r.reduce(($,K)=>$+(K.barSize||0),0);T+=(l-1)*f,T>=n&&(T-=(l-1)*f,f=0),T>=n&&_>0&&(b=!0,_*=.9,T=l*_);var N=(n-T)/2>>0,j={offset:N-f,size:0};m=r.reduce(($,K)=>{var X,se={stackId:K.stackId,dataKeys:K.dataKeys,position:{offset:j.offset+j.size+f,size:b?_:(X=K.barSize)!==null&&X!==void 0?X:0}},J=[...$,se];return j=se.position,J},p)}else{var M=rs(e,n,0,!0);n-2*M-(l-1)*f<=0&&(f=0);var L=(n-2*M-(l-1)*f)/l;L>1&&(L>>=0);var z=mn(i)?Math.min(L,i):L;m=r.reduce(($,K,X)=>[...$,{stackId:K.stackId,dataKeys:K.dataKeys,position:{offset:M+(L+f)*X+(L-z)/2,size:z}}],p)}return m}}var gxe=(t,e,n,r,i,a,l)=>{var f=li(l)?e:l,m=mxe(n,r,i!==a?i:a,t,f);return i!==a&&m!=null&&(m=m.map(p=>fy(fy({},p),{},{position:fy(fy({},p.position),{},{offset:p.position.offset-i/2})}))),m},pxe=(t,e)=>{var n=mC(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(l=>l.key===n)}}}},yxe=(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}};function vxe(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&mn(t.zIndex)?t.zIndex:e}var OU=t=>{var{chartData:e}=t,n=Gr(),r=La();return D.useEffect(()=>r?()=>{}:(n(F8(e)),()=>{n(F8(void 0))}),[e,n,r]),null},k6={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},NU=Bs({name:"brush",initialState:k6,reducers:{setBrushSettings(t,e){return e.payload==null?k6:e.payload}}}),{setBrushSettings:PEe}=NU.actions,xxe=NU.reducer,bxe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},wxe=t=>{var{x1:e,y1:n,x2:r,y2:i}=t;return bxe({x:e,y:n},{x:r,y:i})};function _xe(t){return(t%180+180)%180}var Exe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=_xe(i),l=a*Math.PI/180,f=Math.atan(r/n),m=l>f&&l<Math.PI-f?r/Math.sin(l):n/Math.cos(l);return Math.abs(m)},Axe={dots:[],areas:[],lines:[]},PU=Bs({name:"referenceElements",initialState:Axe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Ko(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Ko(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Ko(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:REe,removeDot:DEe,addArea:kEe,removeArea:MEe,addLine:Sxe,removeLine:Txe}=PU.actions,Ixe=PU.reducer,RU=D.createContext(void 0),Cxe=t=>{var{children:e}=t,[n]=D.useState("".concat(Op("recharts"),"-clip")),r=iO();if(r==null)return null;var{x:i,y:a,width:l,height:f}=r;return D.createElement(RU.Provider,{value:n},D.createElement("defs",null,D.createElement("clipPath",{id:n},D.createElement("rect",{x:i,y:a,height:f,width:l}))),e)},Oxe=()=>D.useContext(RU);class Nxe{constructor(e){var{x:n,y:r}=e;this.xAxisScale=n,this.yAxisScale=r}map(e,n){var r,i,{position:a}=n;return{x:(r=this.xAxisScale.map(e.x,{position:a}))!==null&&r!==void 0?r:0,y:(i=this.yAxisScale.map(e.y,{position:a}))!==null&&i!==void 0?i:0}}mapWithFallback(e,n){var r,i,{position:a,fallback:l}=n,f,m;return l==="rangeMin"?f=this.yAxisScale.rangeMin():l==="rangeMax"?f=this.yAxisScale.rangeMax():f=0,l==="rangeMin"?m=this.xAxisScale.rangeMin():l==="rangeMax"?m=this.xAxisScale.rangeMax():m=0,{x:(r=this.xAxisScale.map(e.x,{position:a}))!==null&&r!==void 0?r:m,y:(i=this.yAxisScale.map(e.y,{position:a}))!==null&&i!==void 0?i:f}}isInRange(e){var{x:n,y:r}=e,i=n==null||this.xAxisScale.isInRange(n),a=r==null||this.yAxisScale.isInRange(r);return i&&a}}function M6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function j6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M6(Object(n),!0).forEach(function(r){Pxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pxe(t,e,n){return(e=Rxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rxe(t){var e=Dxe(t,"string");return typeof e=="symbol"?e:e+""}function Dxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cx(){return cx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cx.apply(null,arguments)}var kxe=(t,e)=>{var n;if(D.isValidElement(t))n=D.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!mn(e.x1)||!mn(e.y1)||!mn(e.x2)||!mn(e.y2))return null;n=D.createElement("line",cx({},e,{className:"recharts-reference-line-line"}))}return n},Mxe=(t,e,n,r,i,a)=>{var{x:l,width:f}=a,m=i.map(t,{position:n});if(!mn(m)||e==="discard"&&!i.isInRange(m))return null;var p=[{x:l+f,y:m},{x:l,y:m}];return r==="left"?p.reverse():p},jxe=(t,e,n,r,i,a)=>{var{y:l,height:f}=a,m=i.map(t,{position:n});if(!mn(m)||e==="discard"&&!i.isInRange(m))return null;var p=[{x:m,y:l+f},{x:m,y:l}];return r==="top"?p.reverse():p},Lxe=(t,e,n,r)=>{var i=[r.mapWithFallback(t[0],{position:n,fallback:"rangeMin"}),r.mapWithFallback(t[1],{position:n,fallback:"rangeMax"})];return e==="discard"&&i.some(a=>!r.isInRange(a))?null:i},Bxe=(t,e,n,r,i,a,l)=>{var{x:f,y:m,segment:p,ifOverflow:b}=l,_=To(f),T=To(m);return T?Mxe(m,b,r,a,e,n):_?jxe(f,b,r,i,t,n):p!=null&&p.length===2?Lxe(p,b,r,new Nxe({x:t,y:e})):null};function Fxe(t){var e=Gr();return D.useEffect(()=>(e(Sxe(t)),()=>{e(Txe(t))})),null}function Vxe(t){var{xAxisId:e,yAxisId:n,shape:r,className:i,ifOverflow:a}=t,l=La(),f=Oxe(),m=Tt(V=>Ml(V,e)),p=Tt(V=>jl(V,n)),b=Tt(V=>hm(V,"xAxis",e,l)),_=Tt(V=>hm(V,"yAxis",n,l)),T=w0();if(!f||!T||m==null||p==null||b==null||_==null)return null;var N=Bxe(b,_,T,t.position,m.orientation,p.orientation,t);if(!N)return null;var j=N[0],M=N[1];if(j==null||M==null)return null;var{x:L,y:z}=j,{x:$,y:K}=M,X=a==="hidden"?"url(#".concat(f,")"):void 0,se=j6(j6({clipPath:X},is(t)),{},{x1:L,y1:z,x2:$,y2:K}),J=wxe({x1:L,y1:z,x2:$,y2:K});return D.createElement(ds,{zIndex:t.zIndex},D.createElement(Yi,{className:Hn("recharts-reference-line",i)},kxe(r,se),D.createElement(uU,cx({},J,{lowerWidth:J.width,upperWidth:J.width}),D.createElement(fU,{label:t.label}),t.children)))}var zxe={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",label:!1,stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Ti.line};function xS(t){var e=Qi(t,zxe);return D.createElement(D.Fragment,null,D.createElement(Fxe,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),D.createElement(Vxe,e))}xS.displayName="ReferenceLine";function DU(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function Uxe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Exe(r,n)}function qxe(t,e,n){var r=n==="width",{x:i,y:a,width:l,height:f}=t;return e===1?{start:r?i:a,end:r?i+l:a+f}:{start:r?i+l:a+f,end:r?i:a}}function qp(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function Gxe(t,e){return DU(t,e+1)}function Hxe(t,e,n,r,i){for(var a=(r||[]).slice(),{start:l,end:f}=e,m=0,p=1,b=l,_=function(){var j=r?.[m];if(j===void 0)return{v:DU(r,p)};var M=m,L,z=()=>(L===void 0&&(L=n(j,M)),L),$=j.coordinate,K=m===0||qp(t,$,z,b,f);K||(m=0,b=l,p+=1),K&&(b=$+t*(z()/2+i),m+=p)},T;p<=a.length;)if(T=_(),T)return T.v;return[]}function Kxe(t,e,n,r,i){var a=(r||[]).slice(),l=a.length;if(l===0)return[];for(var{start:f,end:m}=e,p=1;p<=l;p++){for(var b=(l-1)%p,_=f,T=!0,N=function(){var X=r[M];if(X==null)return 0;var se=M,J,V=()=>(J===void 0&&(J=n(X,se)),J),W=X.coordinate,H=M===b||qp(t,W,V,_,m);if(!H)return T=!1,1;H&&(_=W+t*(V()/2+i))},j,M=b;M<l&&(j=N(),!(j!==0&&j===1));M+=p);if(T){for(var L=[],z=b;z<l;z+=p){var $=r[z];$!=null&&L.push($)}return L}}return[]}function L6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Za(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L6(Object(n),!0).forEach(function(r){Wxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wxe(t,e,n){return(e=$xe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $xe(t){var e=Yxe(t,"string");return typeof e=="symbol"?e:e+""}function Yxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xxe(t,e,n,r,i){for(var a=(r||[]).slice(),l=a.length,{start:f}=e,{end:m}=e,p=function(T){var N=a[T];if(N==null)return 1;var j=N,M,L=()=>(M===void 0&&(M=n(N,T)),M);if(T===l-1){var z=t*(j.coordinate+t*L()/2-m);a[T]=j=Za(Za({},j),{},{tickCoord:z>0?j.coordinate-z*t:j.coordinate})}else a[T]=j=Za(Za({},j),{},{tickCoord:j.coordinate});if(j.tickCoord!=null){var $=qp(t,j.tickCoord,L,f,m);$&&(m=j.tickCoord-t*(L()/2+i),a[T]=Za(Za({},j),{},{isShow:!0}))}},b=l-1;b>=0;b--)p(b);return a}function Qxe(t,e,n,r,i,a){var l=(r||[]).slice(),f=l.length,{start:m,end:p}=e;if(a){var b=r[f-1];if(b!=null){var _=n(b,f-1),T=t*(b.coordinate+t*_/2-p);if(l[f-1]=b=Za(Za({},b),{},{tickCoord:T>0?b.coordinate-T*t:b.coordinate}),b.tickCoord!=null){var N=qp(t,b.tickCoord,()=>_,m,p);N&&(p=b.tickCoord-t*(_/2+i),l[f-1]=Za(Za({},b),{},{isShow:!0}))}}}for(var j=a?f-1:f,M=function($){var K=l[$];if(K==null)return 1;var X=K,se,J=()=>(se===void 0&&(se=n(K,$)),se);if($===0){var V=t*(X.coordinate-t*J()/2-m);l[$]=X=Za(Za({},X),{},{tickCoord:V<0?X.coordinate-V*t:X.coordinate})}else l[$]=X=Za(Za({},X),{},{tickCoord:X.coordinate});if(X.tickCoord!=null){var W=qp(t,X.tickCoord,J,m,p);W&&(m=X.tickCoord+t*(J()/2+i),l[$]=Za(Za({},X),{},{isShow:!0}))}},L=0;L<j;L++)M(L);return l}function aO(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:l,orientation:f,interval:m,tickFormatter:p,unit:b,angle:_}=t;if(!i||!i.length||!r)return[];if(St(m)||xb.isSsr){var T;return(T=Gxe(i,St(m)?m:0))!==null&&T!==void 0?T:[]}var N=[],j=f==="top"||f==="bottom"?"width":"height",M=b&&j==="width"?fp(b,{fontSize:e,letterSpacing:n}):{width:0,height:0},L=(se,J)=>{var V=typeof p=="function"?p(se.value,J):se.value;return j==="width"?Uxe(fp(V,{fontSize:e,letterSpacing:n}),M,_):fp(V,{fontSize:e,letterSpacing:n})[j]},z=i[0],$=i[1],K=i.length>=2&&z!=null&&$!=null?ga($.coordinate-z.coordinate):1,X=qxe(a,K,j);return m==="equidistantPreserveStart"?Hxe(K,X,L,i,l):m==="equidistantPreserveEnd"?Kxe(K,X,L,i,l):(m==="preserveStart"||m==="preserveStartEnd"?N=Qxe(K,X,L,i,l,m==="preserveStartEnd"):N=Xxe(K,X,L,i,l),N.filter(se=>se.isShow))}var Zxe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,l=0;if(e){Array.from(e).forEach(b=>{if(b){var _=b.getBoundingClientRect();_.width>l&&(l=_.width)}});var f=n?n.getBoundingClientRect().width:0,m=i+a,p=l+m+f+(n?r:0);return Math.round(p)}return 0},Jxe=["axisLine","width","height","className","hide","ticks","axisType"];function ebe(t,e){if(t==null)return{};var n,r,i=tbe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tbe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function bd(){return bd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bd.apply(null,arguments)}function B6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B6(Object(n),!0).forEach(function(r){nbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nbe(t,e,n){return(e=rbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rbe(t){var e=ibe(t,"string");return typeof e=="symbol"?e:e+""}function ibe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yu={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ti.axis};function abe(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:l,axisLine:f,otherSvgProps:m}=t;if(!f)return null;var p=pi(pi(pi({},m),ao(f)),{},{fill:"none"});if(a==="top"||a==="bottom"){var b=+(a==="top"&&!l||a==="bottom"&&l);p=pi(pi({},p),{},{x1:e,y1:n+b*i,x2:e+r,y2:n+b*i})}else{var _=+(a==="left"&&!l||a==="right"&&l);p=pi(pi({},p),{},{x1:e+_*r,y1:n,x2:e+_*r,y2:n+i})}return D.createElement("line",bd({},p,{className:Hn("recharts-cartesian-axis-line",md(f,"className"))}))}function sbe(t,e,n,r,i,a,l,f,m){var p,b,_,T,N,j,M=f?-1:1,L=t.tickSize||l,z=St(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":p=b=t.coordinate,T=n+ +!f*i,_=T-M*L,j=_-M*m,N=z;break;case"left":_=T=t.coordinate,b=e+ +!f*r,p=b-M*L,N=p-M*m,j=z;break;case"right":_=T=t.coordinate,b=e+ +f*r,p=b+M*L,N=p+M*m,j=z;break;default:p=b=t.coordinate,T=n+ +f*i,_=T+M*L,j=_+M*m,N=z;break}return{line:{x1:p,y1:_,x2:b,y2:T},tick:{x:N,y:j}}}function obe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function lbe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function ube(t){var{option:e,tickProps:n,value:r}=t,i,a=Hn(n.className,"recharts-cartesian-axis-tick-value");if(D.isValidElement(e))i=D.cloneElement(e,pi(pi({},n),{},{className:a}));else if(typeof e=="function")i=e(pi(pi({},n),{},{className:a}));else{var l="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(l=Hn(l,xU(e))),i=D.createElement(Bb,bd({},n,{className:l}),r)}return i}var cbe=D.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:l,unit:f,padding:m,tickTextProps:p,orientation:b,mirror:_,x:T,y:N,width:j,height:M,tickSize:L,tickMargin:z,fontSize:$,letterSpacing:K,getTicksConfig:X,events:se,axisType:J}=t,V=aO(pi(pi({},X),{},{ticks:n}),$,K),W=obe(b,_),H=lbe(b,_),oe=ao(X),ae=dd(r),Z={};typeof i=="object"&&(Z=i);var ee=pi(pi({},oe),{},{fill:"none"},Z),xe=V.map(_e=>pi({entry:_e},sbe(_e,T,N,j,M,b,L,_,z))),de=xe.map(_e=>{var{entry:qe,line:Ve}=_e;return D.createElement(Yi,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(qe.value,"-").concat(qe.coordinate,"-").concat(qe.tickCoord)},i&&D.createElement("line",bd({},ee,Ve,{className:Hn("recharts-cartesian-axis-tick-line",md(i,"className"))})))}),ye=xe.map((_e,qe)=>{var Ve,tt,{entry:me,tick:Se}=_e,Ye=pi(pi(pi(pi({verticalAnchor:H},oe),{},{textAnchor:W,stroke:"none",fill:a},Se),{},{index:qe,payload:me,visibleTicksCount:V.length,tickFormatter:l,padding:m},p),{},{angle:(Ve=(tt=p?.angle)!==null&&tt!==void 0?tt:oe.angle)!==null&&Ve!==void 0?Ve:0}),ze=pi(pi({},Ye),ae);return D.createElement(Yi,bd({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(me.value,"-").concat(me.coordinate,"-").concat(me.tickCoord)},tb(se,me,qe)),r&&D.createElement(ube,{option:r,tickProps:ze,value:"".concat(typeof l=="function"?l(me.value,qe):me.value).concat(f||"")}))});return D.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(J,"-ticks")},ye.length>0&&D.createElement(ds,{zIndex:Ti.label},D.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(J,"-tick-labels"),ref:e},ye)),de.length>0&&D.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(J,"-tick-lines")},de))}),fbe=D.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:l,ticks:f,axisType:m}=t,p=ebe(t,Jxe),[b,_]=D.useState(""),[T,N]=D.useState(""),j=D.useRef(null);D.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var L;return Zxe({ticks:j.current,label:(L=t.labelRef)===null||L===void 0?void 0:L.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var M=D.useCallback(L=>{if(L){var z=L.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=z;var $=z[0];if($){var K=window.getComputedStyle($),X=K.fontSize,se=K.letterSpacing;(X!==b||se!==T)&&(_(X),N(se))}}},[b,T]);return l||r!=null&&r<=0||i!=null&&i<=0?null:D.createElement(ds,{zIndex:t.zIndex},D.createElement(Yi,{className:Hn("recharts-cartesian-axis",a)},D.createElement(abe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:ao(t)}),D.createElement(cbe,{ref:M,axisType:m,events:p,fontSize:b,getTicksConfig:t,height:t.height,letterSpacing:T,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:f,unit:t.unit,width:t.width,x:t.x,y:t.y}),D.createElement(uU,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},D.createElement(fU,{label:t.label,labelRef:t.labelRef}),t.children)))}),sO=D.forwardRef((t,e)=>{var n=Qi(t,yu);return D.createElement(fbe,bd({},n,{ref:e}))});sO.displayName="CartesianAxis";var dbe=["x1","y1","x2","y2","key"],hbe=["offset"],mbe=["xAxisId","yAxisId"],gbe=["xAxisId","yAxisId"];function F6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function es(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F6(Object(n),!0).forEach(function(r){pbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pbe(t,e,n){return(e=ybe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ybe(t){var e=vbe(t,"string");return typeof e=="symbol"?e:e+""}function vbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qf(){return qf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qf.apply(null,arguments)}function fx(t,e){if(t==null)return{};var n,r,i=xbe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xbe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var bbe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:l,ry:f}=t;return D.createElement("rect",{x:r,y:i,ry:f,width:a,height:l,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function kU(t){var{option:e,lineItemProps:n}=t,r;if(D.isValidElement(e))r=D.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:l,x2:f,y2:m,key:p}=n,b=fx(n,dbe),_=(i=ao(b))!==null&&i!==void 0?i:{},{offset:T}=_,N=fx(_,hbe);r=D.createElement("line",qf({},N,{x1:a,y1:l,x2:f,y2:m,fill:"none",key:p}))}return r}function wbe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:l}=t,f=fx(t,mbe),m=i.map((p,b)=>{var _=es(es({},f),{},{x1:e,y1:p,x2:e+n,y2:p,key:"line-".concat(b),index:b});return D.createElement(kU,{key:"line-".concat(b),option:r,lineItemProps:_})});return D.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function _be(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:l}=t,f=fx(t,gbe),m=i.map((p,b)=>{var _=es(es({},f),{},{x1:p,y1:e,x2:p,y2:e+n,key:"line-".concat(b),index:b});return D.createElement(kU,{option:r,lineItemProps:_,key:"line-".concat(b)})});return D.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function Ebe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:l,horizontalPoints:f,horizontal:m=!0}=t;if(!m||!e||!e.length||f==null)return null;var p=f.map(_=>Math.round(_+i-i)).sort((_,T)=>_-T);i!==p[0]&&p.unshift(0);var b=p.map((_,T)=>{var N=p[T+1],j=N==null,M=j?i+l-_:N-_;if(M<=0)return null;var L=T%e.length;return D.createElement("rect",{key:"react-".concat(T),y:_,x:r,height:M,width:a,stroke:"none",fill:e[L],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},b)}function Abe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:l,height:f,verticalPoints:m}=t;if(!e||!n||!n.length)return null;var p=m.map(_=>Math.round(_+i-i)).sort((_,T)=>_-T);i!==p[0]&&p.unshift(0);var b=p.map((_,T)=>{var N=p[T+1],j=N==null,M=j?i+l-_:N-_;if(M<=0)return null;var L=T%n.length;return D.createElement("rect",{key:"react-".concat(T),x:_,y:a,width:M,height:f,stroke:"none",fill:n[L],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},b)}var Sbe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return bF(aO(es(es(es({},yu),n),{},{ticks:wF(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},Tbe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return bF(aO(es(es(es({},yu),n),{},{ticks:wF(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},Ibe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ti.grid};function By(t){var e=OF(),n=NF(),r=CF(),i=es(es({},Qi(t,Ibe)),{},{x:St(t.x)?t.x:r.left,y:St(t.y)?t.y:r.top,width:St(t.width)?t.width:r.width,height:St(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:l,x:f,y:m,width:p,height:b,syncWithTicks:_,horizontalValues:T,verticalValues:N}=i,j=La(),M=Tt(H=>I8(H,"xAxis",a,j)),L=Tt(H=>I8(H,"yAxis",l,j));if(!Nl(p)||!Nl(b)||!St(f)||!St(m))return null;var z=i.verticalCoordinatesGenerator||Sbe,$=i.horizontalCoordinatesGenerator||Tbe,{horizontalPoints:K,verticalPoints:X}=i;if((!K||!K.length)&&typeof $=="function"){var se=T&&T.length,J=$({yAxis:L?es(es({},L),{},{ticks:se?T:L.ticks}):void 0,width:e??p,height:n??b,offset:r},se?!0:_);jv(Array.isArray(J),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof J,"]")),Array.isArray(J)&&(K=J)}if((!X||!X.length)&&typeof z=="function"){var V=N&&N.length,W=z({xAxis:M?es(es({},M),{},{ticks:V?N:M.ticks}):void 0,width:e??p,height:n??b,offset:r},V?!0:_);jv(Array.isArray(W),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof W,"]")),Array.isArray(W)&&(X=W)}return D.createElement(ds,{zIndex:i.zIndex},D.createElement("g",{className:"recharts-cartesian-grid"},D.createElement(bbe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),D.createElement(Ebe,qf({},i,{horizontalPoints:K})),D.createElement(Abe,qf({},i,{verticalPoints:X})),D.createElement(wbe,qf({},i,{offset:r,horizontalPoints:K,xAxis:M,yAxis:L})),D.createElement(_be,qf({},i,{offset:r,verticalPoints:X,xAxis:M,yAxis:L}))))}By.displayName="CartesianGrid";var Cbe={},MU=Bs({name:"errorBars",initialState:Cbe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:jEe,replaceErrorBar:LEe,removeErrorBar:BEe}=MU.actions,Obe=MU.reducer,Nbe=["children"];function Pbe(t,e){if(t==null)return{};var n,r,i=Rbe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Rbe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Dbe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},kbe=D.createContext(Dbe);function jU(t){var{children:e}=t,n=Pbe(t,Nbe);return D.createElement(kbe.Provider,{value:n},e)}function oO(t,e){var n,r,i=Tt(p=>Ml(p,t)),a=Tt(p=>jl(p,e)),l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:la.allowDataOverflow,f=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:ua.allowDataOverflow,m=l||f;return{needClip:m,needClipX:l,needClipY:f}}function LU(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=iO(),{needClipX:a,needClipY:l,needClip:f}=oO(e,n);if(!f||!i)return null;var{x:m,y:p,width:b,height:_}=i;return D.createElement("clipPath",{id:"clipPath-".concat(r)},D.createElement("rect",{x:a?m:m-b/2,y:l?p:p-_/2,width:a?b:b*2,height:l?_:_*2}))}var BU=(t,e,n,r)=>Yc(t,"xAxis",e,r),FU=(t,e,n,r)=>$c(t,"xAxis",e,r),VU=(t,e,n,r)=>Yc(t,"yAxis",n,r),zU=(t,e,n,r)=>$c(t,"yAxis",n,r),Mbe=Oe([Wn,BU,VU,FU,zU],(t,e,n,r,i)=>Lu(t,"xAxis")?lm(e,r,!1):lm(n,i,!1)),jbe=(t,e,n,r,i)=>i;function Lbe(t){return t.type==="line"}var Bbe=Oe([Db,jbe],(t,e)=>t.filter(Lbe).find(n=>n.id===e)),Fbe=Oe([Wn,BU,VU,FU,zU,Bbe,Mbe,aC],(t,e,n,r,i,a,l,f)=>{var{chartData:m,dataStartIndex:p,dataEndIndex:b}=f;if(!(a==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||l==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:_,data:T}=a,N;if(T!=null&&T.length>0?N=T:N=m?.slice(p,b+1),N!=null)return Twe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:_,bandSize:l,displayedData:N})}});function Vbe(t){var e=dd(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:a}=e,l=Number(i),f=Number(a);return(Number.isNaN(l)||l<0)&&(l=n),(Number.isNaN(f)||f<0)&&(f=r),{r:l,strokeWidth:f}}return{r:n,strokeWidth:r}}var NE={exports:{}},PE={};var V6;function zbe(){if(V6)return PE;V6=1;var t=mm();function e(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,l=t.useMemo,f=t.useDebugValue;return PE.useSyncExternalStoreWithSelector=function(m,p,b,_,T){var N=i(null);if(N.current===null){var j={hasValue:!1,value:null};N.current=j}else j=N.current;N=l(function(){function L(se){if(!z){if(z=!0,$=se,se=_(se),T!==void 0&&j.hasValue){var J=j.value;if(T(J,se))return K=J}return K=se}if(J=K,n($,se))return J;var V=_(se);return T!==void 0&&T(J,V)?($=se,J):($=se,K=V)}var z=!1,$,K,X=b===void 0?null:b;return[function(){return L(p())},X===null?void 0:function(){return L(X())}]},[p,b,_,T]);var M=r(m,N[0],N[1]);return a(function(){j.hasValue=!0,j.value=M},[M]),f(M),M},PE}var z6;function Ube(){return z6||(z6=1,NE.exports=zbe()),NE.exports}Ube();function qbe(t){t()}function Gbe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){qbe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var U6={notify(){},get:()=>[]};function Hbe(t,e){let n,r=U6,i=0,a=!1;function l(M){b();const L=r.subscribe(M);let z=!1;return()=>{z||(z=!0,L(),_())}}function f(){r.notify()}function m(){j.onStateChange&&j.onStateChange()}function p(){return a}function b(){i++,n||(n=t.subscribe(m),r=Gbe())}function _(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=U6)}function T(){a||(a=!0,b())}function N(){a&&(a=!1,_())}const j={addNestedSub:l,notifyNestedSubs:f,handleChangeWrapper:m,isSubscribed:p,trySubscribe:T,tryUnsubscribe:N,getListeners:()=>r};return j}var Kbe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Wbe=Kbe(),$be=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Ybe=$be(),Xbe=()=>Wbe||Ybe?D.useLayoutEffect:D.useEffect,Qbe=Xbe();function q6(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Zbe(t,e){if(q6(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!q6(t[n[i]],e[n[i]]))return!1;return!0}var Jbe=Symbol.for("react-redux-context"),ewe=typeof globalThis<"u"?globalThis:{};function twe(){if(!D.createContext)return{};const t=ewe[Jbe]??=new Map;let e=t.get(D.createContext);return e||(e=D.createContext(null),t.set(D.createContext,e)),e}var nwe=twe();function rwe(t){const{children:e,context:n,serverState:r,store:i}=t,a=D.useMemo(()=>{const m=Hbe(i);return{store:i,subscription:m,getServerState:r?()=>r:void 0}},[i,r]),l=D.useMemo(()=>i.getState(),[i]);Qbe(()=>{const{subscription:m}=a;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),l!==i.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[a,l]);const f=n||nwe;return D.createElement(f.Provider,{value:a},e)}var iwe=rwe,awe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function swe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function Ub(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(awe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!Zbe(t[r],e[r]))return!1}else if(!swe(t[r],e[r]))return!1;return!0}var owe=["id"],lwe=["type","layout","connectNulls","needClip","shape"],uwe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Gp(){return Gp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gp.apply(null,arguments)}function G6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G6(Object(n),!0).forEach(function(r){cwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cwe(t,e,n){return(e=fwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fwe(t){var e=dwe(t,"string");return typeof e=="symbol"?e:e+""}function dwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lO(t,e){if(t==null)return{};var n,r,i=hwe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function hwe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var mwe=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:Dm(n,e),payload:t}]},gwe=D.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:a,name:l,hide:f,unit:m,tooltipType:p,id:b}=t,_={dataDefinedOnItem:n,getPosition:Od,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:Dm(l,e),hide:f,type:p,color:r,unit:m,graphicalItemId:b}};return D.createElement(nO,{tooltipEntrySettings:_})}),UU=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function pwe(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var ywe=(t,e,n)=>{var r=n.reduce((N,j)=>N+j);if(!r)return UU(e,t);for(var i=Math.floor(t/r),a=t%r,l=e-t,f=[],m=0,p=0;m<n.length;p+=(b=n[m])!==null&&b!==void 0?b:0,++m){var b,_=n[m];if(_!=null&&p+_>a){f=[...n.slice(0,m),a-p];break}}var T=f.length%2===0?[0,l]:[l];return[...pwe(n,i),...f,...T].map(N=>"".concat(N,"px")).join(", ")};function vwe(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:a,needClip:l}=r,{id:f}=r,m=lO(r,owe),p=ao(m);return D.createElement(qve,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:p,needClip:l,clipPathId:e})}function xwe(t){var{showLabels:e,children:n,points:r}=t,i=D.useMemo(()=>r?.map(a=>{var l,f,m={x:(l=a.x)!==null&&l!==void 0?l:0,y:(f=a.y)!==null&&f!==void 0?f:0,width:0,lowerWidth:0,upperWidth:0,height:0};return gl(gl({},m),{},{value:a.value,payload:a.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[r]);return D.createElement(hU,{value:e?i:void 0},n)}function H6(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:a}=t,{type:l,layout:f,connectNulls:m,needClip:p,shape:b}=a,_=lO(a,lwe),T=gl(gl({},is(_)),{},{fill:"none",className:"recharts-line-curve",clipPath:p?"url(#clipPath-".concat(e,")"):void 0,points:r,type:l,layout:f,connectNulls:m,strokeDasharray:i??a.strokeDasharray});return D.createElement(D.Fragment,null,r?.length>1&&D.createElement(ZC,Gp({shapeType:"curve",option:b},T,{pathRef:n})),D.createElement(vwe,{points:r,clipPathId:e,props:a}))}function bwe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function wwe(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:a}=t,{points:l,strokeDasharray:f,isAnimationActive:m,animationBegin:p,animationDuration:b,animationEasing:_,animateNewValues:T,width:N,height:j,onAnimationEnd:M,onAnimationStart:L}=n,z=i.current,$=S0(l,"recharts-line-"),K=D.useRef($),[X,se]=D.useState(!1),J=!X,V=D.useCallback(()=>{typeof M=="function"&&M(),se(!1)},[M]),W=D.useCallback(()=>{typeof L=="function"&&L(),se(!0)},[L]),H=bwe(r.current),oe=D.useRef(0);K.current!==$&&(oe.current=a.current,K.current=$);var ae=oe.current;return D.createElement(xwe,{points:l,showLabels:J},n.children,D.createElement(A0,{animationId:$,begin:p,duration:b,isActive:m,easing:_,onAnimationEnd:V,onAnimationStart:W,key:$},Z=>{var ee=Jr(ae,H+ae,Z),xe=Math.min(ee,H),de;if(m)if(f){var ye="".concat(f).split(/[,\s]+/gim).map(Ve=>parseFloat(Ve));de=ywe(xe,H,ye)}else de=UU(H,xe);else de=f==null?void 0:String(f);if(Z>0&&H>0&&(i.current=l,a.current=Math.max(a.current,xe)),z){var _e=z.length/l.length,qe=Z===1?l:l.map((Ve,tt)=>{var me=Math.floor(tt*_e);if(z[me]){var Se=z[me];return gl(gl({},Ve),{},{x:Jr(Se.x,Ve.x,Z),y:Jr(Se.y,Ve.y,Z)})}return T?gl(gl({},Ve),{},{x:Jr(N*2,Ve.x,Z),y:Jr(j/2,Ve.y,Z)}):gl(gl({},Ve),{},{x:Ve.x,y:Ve.y})});return i.current=qe,D.createElement(H6,{props:n,points:qe,clipPathId:e,pathRef:r,strokeDasharray:de})}return D.createElement(H6,{props:n,points:l,clipPathId:e,pathRef:r,strokeDasharray:de})}),D.createElement($C,{label:n.label}))}function _we(t){var{clipPathId:e,props:n}=t,r=D.useRef(null),i=D.useRef(0),a=D.useRef(null);return D.createElement(wwe,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:a})}var Ewe=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:br(t.payload,e)}};class Awe extends D.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:a,yAxisId:l,top:f,left:m,width:p,height:b,id:_,needClip:T,zIndex:N}=this.props;if(e)return null;var j=Hn("recharts-line",i),M=_,{r:L,strokeWidth:z}=Vbe(n),$=_U(n),K=L*2+z,X=T?"url(#clipPath-".concat($?"":"dots-").concat(M,")"):void 0;return D.createElement(ds,{zIndex:N},D.createElement(Yi,{className:j},T&&D.createElement("defs",null,D.createElement(LU,{clipPathId:M,xAxisId:a,yAxisId:l}),!$&&D.createElement("clipPath",{id:"clipPath-dots-".concat(M)},D.createElement("rect",{x:m-K/2,y:f-K/2,width:p+K,height:b+K}))),D.createElement(jU,{xAxisId:a,yAxisId:l,data:r,dataPointFormatter:Ewe,errorBarOffset:0},D.createElement(_we,{props:this.props,clipPathId:M}))),D.createElement(uxe,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:X}))}}var qU={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Ti.line,type:"linear"};function Swe(t){var e=Qi(t,qU),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:l,connectNulls:f,dot:m,hide:p,isAnimationActive:b,label:_,legendType:T,xAxisId:N,yAxisId:j,id:M}=e,L=lO(e,uwe),{needClip:z}=oO(N,j),$=iO(),K=Nd(),X=La(),se=Tt(oe=>Fbe(oe,N,j,X,M));if(K!=="horizontal"&&K!=="vertical"||se==null||$==null)return null;var{height:J,width:V,x:W,y:H}=$;return D.createElement(Awe,Gp({},L,{id:M,connectNulls:f,dot:m,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:l,isAnimationActive:b,hide:p,label:_,legendType:T,xAxisId:N,yAxisId:j,points:se,layout:K,height:J,width:V,left:W,top:H,needClip:z}))}function Twe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,dataKey:l,bandSize:f,displayedData:m}=t;return m.map((p,b)=>{var _=br(p,l);if(e==="horizontal"){var T=Tk({axis:n,ticks:i,bandSize:f,entry:p,index:b}),N=li(_)?null:r.scale.map(_);return{x:T,y:N??null,value:_,payload:p}}var j=li(_)?null:n.scale.map(_),M=Tk({axis:r,ticks:a,bandSize:f,entry:p,index:b});return j==null||M==null?null:{x:j,y:M,value:_,payload:p}}).filter(Boolean)}function Iwe(t){var e=Qi(t,qU),n=La();return D.createElement(rO,{id:e.id,type:"line"},r=>D.createElement(D.Fragment,null,D.createElement(EU,{legendPayload:mwe(e)}),D.createElement(gwe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),D.createElement(SU,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),D.createElement(Swe,Gp({},e,{id:r}))))}var GU=D.memo(Iwe,Ub);GU.displayName="Line";function Dd(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:IU}function kd(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:IU}var Cwe="Invariant failed";function Owe(t,e){throw new Error(Cwe)}function bS(){return bS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bS.apply(null,arguments)}function dx(t){return D.createElement(ZC,bS({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var Nwe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(St(e))return e;var a=St(r)||li(r);return a?e(r,i):(a||Owe(),n)}},Pwe=(t,e,n)=>n,Rwe=(t,e)=>e,B0=Oe([Db,Rwe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),Dwe=Oe([B0],t=>t?.maxBarSize),kwe=(t,e,n,r)=>r,Mwe=Oe([Wn,Db,Dd,kd,Pwe],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),jwe=(t,e,n)=>{var r=Wn(t),i=Dd(t,e),a=kd(t,e);if(!(i==null||a==null))return r==="horizontal"?dS(t,"yAxis",a,n):dS(t,"xAxis",i,n)},Lwe=(t,e)=>{var n=Wn(t),r=Dd(t,e),i=kd(t,e);if(!(r==null||i==null))return n==="horizontal"?T8(t,"xAxis",r):T8(t,"yAxis",i)},Bwe=Oe([Mwe,Vme,Lwe],cxe),Fwe=(t,e,n)=>{var r,i,a=B0(t,e);if(a==null)return 0;var l=Dd(t,e),f=kd(t,e);if(l==null||f==null)return 0;var m=Wn(t),p=GV(t),{maxBarSize:b}=a,_=li(b)?p:b,T,N;return m==="horizontal"?(T=Yc(t,"xAxis",l,n),N=$c(t,"xAxis",l,n)):(T=Yc(t,"yAxis",f,n),N=$c(t,"yAxis",f,n)),(r=(i=lm(T,N,!0))!==null&&i!==void 0?i:_)!==null&&r!==void 0?r:0},HU=(t,e,n)=>{var r=Wn(t),i=Dd(t,e),a=kd(t,e);if(!(i==null||a==null)){var l,f;return r==="horizontal"?(l=Yc(t,"xAxis",i,n),f=$c(t,"xAxis",i,n)):(l=Yc(t,"yAxis",a,n),f=$c(t,"yAxis",a,n)),lm(l,f)}},Vwe=Oe([Bwe,GV,Fme,HV,Fwe,HU,Dwe],gxe),zwe=(t,e,n)=>{var r=Dd(t,e);if(r!=null)return Yc(t,"xAxis",r,n)},Uwe=(t,e,n)=>{var r=kd(t,e);if(r!=null)return Yc(t,"yAxis",r,n)},qwe=(t,e,n)=>{var r=Dd(t,e);if(r!=null)return $c(t,"xAxis",r,n)},Gwe=(t,e,n)=>{var r=kd(t,e);if(r!=null)return $c(t,"yAxis",r,n)},Hwe=Oe([Vwe,B0],yxe),Kwe=Oe([jwe,B0],pxe),Wwe=Oe([Zi,NI,zwe,Uwe,qwe,Gwe,Hwe,Wn,Pme,HU,Kwe,B0,kwe],(t,e,n,r,i,a,l,f,m,p,b,_,T)=>{var{chartData:N,dataStartIndex:j,dataEndIndex:M}=m;if(!(_==null||l==null||e==null||f!=="horizontal"&&f!=="vertical"||n==null||r==null||i==null||a==null||p==null)){var{data:L}=_,z;if(L!=null&&L.length>0?z=L:z=N?.slice(j,M+1),z!=null)return w_e({layout:f,barSettings:_,pos:l,parentViewBox:e,bandSize:p,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:b,displayedData:z,offset:t,cells:T,dataStartIndex:j})}}),$we=["index"];function wS(){return wS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wS.apply(null,arguments)}function Ywe(t,e){if(t==null)return{};var n,r,i=Xwe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Xwe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var KU=D.createContext(void 0),Qwe=t=>{var e=D.useContext(KU);if(e!=null)return e.stackId;if(t!=null)return Vue(t)},Zwe=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),Jwe=t=>{var e=D.useContext(KU);if(e!=null){var{stackId:n}=e;return"url(#".concat(Zwe(n,t),")")}},WU=t=>{var{index:e}=t,n=Ywe(t,$we),r=Jwe(e);return D.createElement(Yi,wS({className:"recharts-bar-stack-layer",clipPath:r},n))},e_e=["onMouseEnter","onMouseLeave","onClick"],t_e=["value","background","tooltipPosition"],n_e=["id"],r_e=["onMouseEnter","onClick","onMouseLeave"];function Pu(){return Pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pu.apply(null,arguments)}function K6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function us(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K6(Object(n),!0).forEach(function(r){i_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function i_e(t,e,n){return(e=a_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a_e(t){var e=s_e(t,"string");return typeof e=="symbol"?e:e+""}function s_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hx(t,e){if(t==null)return{};var n,r,i=o_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function o_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var l_e=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:Dm(n,e),payload:t}]},u_e=D.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:l,unit:f,tooltipType:m,id:p}=t,b={dataDefinedOnItem:void 0,getPosition:Od,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:Dm(a,e),hide:l,type:m,color:i,unit:f,graphicalItemId:p}};return D.createElement(nO,{tooltipEntrySettings:b})});function c_e(t){var e=Tt(Xc),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:l,onMouseLeave:f,onClick:m}=a,p=hx(a,e_e),b=JC(l,r,a.id),_=eO(f),T=tO(m,r,a.id);if(!i||n==null)return null;var N=dd(i);return D.createElement(ds,{zIndex:vxe(i,Ti.barBackground)},n.map((j,M)=>{var{value:L,background:z,tooltipPosition:$}=j,K=hx(j,t_e);if(!z)return null;var X=b(j,M),se=_(j,M),J=T(j,M),V=us(us(us(us(us({option:i,isActive:String(M)===e},K),{},{fill:"#eee"},z),N),tb(p,j,M)),{},{onMouseEnter:X,onMouseLeave:se,onClick:J,dataKey:r,index:M,className:"recharts-bar-background-rectangle"});return D.createElement(dx,Pu({key:"background-bar-".concat(M)},V))}))}function f_e(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(a=>{var l={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return us(us({},l),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:l,fill:a.fill})});return D.createElement(hU,{value:e?i:void 0},n)}function d_e(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:a,dataKey:l}=t,f=Tt(Xc),m=Tt(zC),p=n&&String(a)===f&&(m==null||l===m),b=p?n:e;return p?D.createElement(ds,{zIndex:Ti.activeBar},D.createElement(WU,{index:a},D.createElement(dx,Pu({},r,{name:String(r.name)},i,{isActive:p,option:b,index:a,dataKey:l})))):D.createElement(dx,Pu({},r,{name:String(r.name)},i,{isActive:p,option:b,index:a,dataKey:l}))}function h_e(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:a}=t;return D.createElement(dx,Pu({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:a}))}function m_e(t){var e,{data:n,props:r}=t,i=(e=ao(r))!==null&&e!==void 0?e:{},{id:a}=i,l=hx(i,n_e),{shape:f,dataKey:m,activeBar:p}=r,{onMouseEnter:b,onClick:_,onMouseLeave:T}=r,N=hx(r,r_e),j=JC(b,m,a),M=eO(T),L=tO(_,m,a);return n?D.createElement(D.Fragment,null,n.map((z,$)=>D.createElement(WU,Pu({index:$,key:"rectangle-".concat(z?.x,"-").concat(z?.y,"-").concat(z?.value,"-").concat($),className:"recharts-bar-rectangle"},tb(N,z,$),{onMouseEnter:j(z,$),onMouseLeave:M(z,$),onClick:L(z,$)}),p?D.createElement(d_e,{shape:f,activeBar:p,baseProps:l,entry:z,index:$,dataKey:m}):D.createElement(h_e,{shape:f,baseProps:l,entry:z,index:$,dataKey:m})))):null}function g_e(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:l,animationDuration:f,animationEasing:m,onAnimationEnd:p,onAnimationStart:b}=e,_=n.current,T=S0(e,"recharts-bar-"),[N,j]=D.useState(!1),M=!N,L=D.useCallback(()=>{typeof p=="function"&&p(),j(!1)},[p]),z=D.useCallback(()=>{typeof b=="function"&&b(),j(!0)},[b]);return D.createElement(f_e,{showLabels:M,rects:r},D.createElement(A0,{animationId:T,begin:l,duration:f,isActive:a,easing:m,onAnimationEnd:L,onAnimationStart:z,key:T},$=>{var K=$===1?r:r?.map((X,se)=>{var J=_&&_[se];if(J)return us(us({},X),{},{x:Jr(J.x,X.x,$),y:Jr(J.y,X.y,$),width:Jr(J.width,X.width,$),height:Jr(J.height,X.height,$)});if(i==="horizontal"){var V=Jr(0,X.height,$),W=Jr(X.stackedBarStart,X.y,$);return us(us({},X),{},{y:W,height:V})}var H=Jr(0,X.width,$),oe=Jr(X.stackedBarStart,X.x,$);return us(us({},X),{},{width:H,x:oe})});return $>0&&(n.current=K??null),K==null?null:D.createElement(Yi,null,D.createElement(m_e,{props:e,data:K}))}),D.createElement($C,{label:e.label}),e.children)}function p_e(t){var e=D.useRef(null);return D.createElement(g_e,{previousRectanglesRef:e,props:t})}var $U=0,y_e=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:br(t,e)}};class v_e extends D.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:l,needClip:f,background:m,id:p}=this.props;if(e||n==null)return null;var b=Hn("recharts-bar",i),_=p;return D.createElement(Yi,{className:b,id:p},f&&D.createElement("defs",null,D.createElement(LU,{clipPathId:_,xAxisId:a,yAxisId:l})),D.createElement(Yi,{className:"recharts-bar-rectangles",clipPath:f?"url(#clipPath-".concat(_,")"):void 0},D.createElement(c_e,{data:n,dataKey:r,background:m,allOtherBarProps:this.props}),D.createElement(p_e,this.props)))}}var x_e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:$U,xAxisId:0,yAxisId:0,zIndex:Ti.bar};function b_e(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:l,animationBegin:f,animationDuration:m,animationEasing:p,isAnimationActive:b}=t,{needClip:_}=oO(e,n),T=Nd(),N=La(),j=QC(t.children,L0),M=Tt($=>Wwe($,t.id,N,j));if(T!=="vertical"&&T!=="horizontal")return null;var L,z=M?.[0];return z==null||z.height==null||z.width==null?L=0:L=T==="vertical"?z.height/2:z.width/2,D.createElement(jU,{xAxisId:e,yAxisId:n,data:M,dataPointFormatter:y_e,errorBarOffset:L},D.createElement(v_e,Pu({},t,{layout:T,needClip:_,data:M,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:l,animationBegin:f,animationDuration:m,animationEasing:p,isAnimationActive:b})))}function w_e(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:l,yAxis:f,xAxisTicks:m,yAxisTicks:p,stackedData:b,displayedData:_,offset:T,cells:N,parentViewBox:j,dataStartIndex:M}=t,L=e==="horizontal"?f:l,z=b?L.scale.domain():null,$=zue({numericAxis:L}),K=L.scale.map($);return _.map((X,se)=>{var J,V,W,H,oe,ae;if(b){var Z=b[se+M];if(Z==null)return null;J=Mue(Z,z)}else J=br(X,n),Array.isArray(J)||(J=[$,J]);var ee=Nwe(r,$U)(J[1],se);if(e==="horizontal"){var xe,de=f.scale.map(J[0]),ye=f.scale.map(J[1]);if(de==null||ye==null)return null;V=Ik({axis:l,ticks:m,bandSize:a,offset:i.offset,entry:X,index:se}),W=(xe=ye??de)!==null&&xe!==void 0?xe:void 0,H=i.size;var _e=de-ye;if(oe=Ol(_e)?0:_e,ae={x:V,y:T.top,width:H,height:T.height},Math.abs(ee)>0&&Math.abs(oe)<Math.abs(ee)){var qe=ga(oe||ee)*(Math.abs(ee)-Math.abs(oe));W-=qe,oe+=qe}}else{var Ve=l.scale.map(J[0]),tt=l.scale.map(J[1]);if(Ve==null||tt==null)return null;if(V=Ve,W=Ik({axis:f,ticks:p,bandSize:a,offset:i.offset,entry:X,index:se}),H=tt-Ve,oe=i.size,ae={x:T.left,y:W,width:T.width,height:oe},Math.abs(ee)>0&&Math.abs(H)<Math.abs(ee)){var me=ga(H||ee)*(Math.abs(ee)-Math.abs(H));H+=me}}if(V==null||W==null||H==null||oe==null)return null;var Se=us(us({},X),{},{stackedBarStart:K,x:V,y:W,width:H,height:oe,value:b?J:J[1],payload:X,background:ae,tooltipPosition:{x:V+H/2,y:W+oe/2},parentViewBox:j},N&&N[se]&&N[se].props);return Se}).filter(Boolean)}function __e(t){var e=Qi(t,x_e),n=Qwe(e.stackId),r=La();return D.createElement(rO,{id:e.id,type:"bar"},i=>D.createElement(D.Fragment,null,D.createElement(EU,{legendPayload:l_e(e)}),D.createElement(u_e,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),D.createElement(SU,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),D.createElement(ds,{zIndex:e.zIndex},D.createElement(b_e,Pu({},e,{id:i})))))}var _S=D.memo(__e,Ub);_S.displayName="Bar";var E_e=["domain","range"],A_e=["domain","range"];function W6(t,e){if(t==null)return{};var n,r,i=S_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function S_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function $6(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function YU(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=W6(t,E_e),{domain:a,range:l}=e,f=W6(e,A_e);return!$6(n,a)||!$6(r,l)?!1:Ub(i,f)}var T_e=["type"],I_e=["dangerouslySetInnerHTML","ticks","scale"],C_e=["id","scale"];function ES(){return ES=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ES.apply(null,arguments)}function Y6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y6(Object(n),!0).forEach(function(r){O_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function O_e(t,e,n){return(e=N_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N_e(t){var e=P_e(t,"string");return typeof e=="symbol"?e:e+""}function P_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AS(t,e){if(t==null)return{};var n,r,i=R_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function R_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function D_e(t){var e=Gr(),n=D.useRef(null),r=PF(),{type:i}=t,a=AS(t,T_e),l=Cb(r,"xAxis",i),f=D.useMemo(()=>{if(l!=null)return X6(X6({},a),{},{type:l})},[a,l]);return D.useLayoutEffect(()=>{f!=null&&(n.current===null?e($ve(f)):n.current!==f&&e(Yve({prev:n.current,next:f})),n.current=f)},[f,e]),D.useLayoutEffect(()=>()=>{n.current&&(e(Xve(n.current)),n.current=null)},[e]),null}var k_e=t=>{var{xAxisId:e,className:n}=t,r=Tt(NI),i=La(),a="xAxis",l=Tt(z=>Az(z,a,e,i)),f=Tt(z=>bz(z,e)),m=Tt(z=>Vge(z,e)),p=Tt(z=>tz(z,e));if(f==null||m==null||p==null)return null;var{dangerouslySetInnerHTML:b,ticks:_,scale:T}=t,N=AS(t,I_e),{id:j,scale:M}=p,L=AS(p,C_e);return D.createElement(sO,ES({},N,L,{x:m.x,y:m.y,width:f.width,height:f.height,className:Hn("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:l,axisType:a}))},M_e={allowDataOverflow:la.allowDataOverflow,allowDecimals:la.allowDecimals,allowDuplicatedCategory:la.allowDuplicatedCategory,angle:la.angle,axisLine:yu.axisLine,height:la.height,hide:!1,includeHidden:la.includeHidden,interval:la.interval,label:!1,minTickGap:la.minTickGap,mirror:la.mirror,orientation:la.orientation,padding:la.padding,reversed:la.reversed,scale:la.scale,tick:la.tick,tickCount:la.tickCount,tickLine:yu.tickLine,tickSize:yu.tickSize,type:la.type,xAxisId:0},j_e=t=>{var e=Qi(t,M_e);return D.createElement(D.Fragment,null,D.createElement(D_e,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),D.createElement(k_e,e))},Fy=D.memo(j_e,YU);Fy.displayName="XAxis";var L_e=["type"],B_e=["dangerouslySetInnerHTML","ticks","scale"],F_e=["id","scale"];function SS(){return SS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SS.apply(null,arguments)}function Q6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Z6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q6(Object(n),!0).forEach(function(r){V_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function V_e(t,e,n){return(e=z_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z_e(t){var e=U_e(t,"string");return typeof e=="symbol"?e:e+""}function U_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TS(t,e){if(t==null)return{};var n,r,i=q_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function q_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function G_e(t){var e=Gr(),n=D.useRef(null),r=PF(),{type:i}=t,a=TS(t,L_e),l=Cb(r,"yAxis",i),f=D.useMemo(()=>{if(l!=null)return Z6(Z6({},a),{},{type:l})},[l,a]);return D.useLayoutEffect(()=>{f!=null&&(n.current===null?e(Qve(f)):n.current!==f&&e(Zve({prev:n.current,next:f})),n.current=f)},[f,e]),D.useLayoutEffect(()=>()=>{n.current&&(e(Jve(n.current)),n.current=null)},[e]),null}function H_e(t){var{yAxisId:e,className:n,width:r,label:i}=t,a=D.useRef(null),l=D.useRef(null),f=Tt(NI),m=La(),p=Gr(),b="yAxis",_=Tt(J=>wz(J,e)),T=Tt(J=>Uge(J,e)),N=Tt(J=>Az(J,b,e,m)),j=Tt(J=>nz(J,e));if(D.useLayoutEffect(()=>{if(!(r!=="auto"||!_||WC(i)||D.isValidElement(i)||j==null)){var J=a.current;if(J){var V=J.getCalculatedWidth();Math.round(_.width)!==Math.round(V)&&p(exe({id:e,width:V}))}}},[N,_,p,i,e,r,j]),_==null||T==null||j==null)return null;var{dangerouslySetInnerHTML:M,ticks:L,scale:z}=t,$=TS(t,B_e),{id:K,scale:X}=j,se=TS(j,F_e);return D.createElement(sO,SS({},$,se,{ref:a,labelRef:l,x:T.x,y:T.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:_.width,height:_.height,className:Hn("recharts-".concat(b," ").concat(b),n),viewBox:f,ticks:N,axisType:b}))}var K_e={allowDataOverflow:ua.allowDataOverflow,allowDecimals:ua.allowDecimals,allowDuplicatedCategory:ua.allowDuplicatedCategory,angle:ua.angle,axisLine:yu.axisLine,hide:!1,includeHidden:ua.includeHidden,interval:ua.interval,label:!1,minTickGap:ua.minTickGap,mirror:ua.mirror,orientation:ua.orientation,padding:ua.padding,reversed:ua.reversed,scale:ua.scale,tick:ua.tick,tickCount:ua.tickCount,tickLine:yu.tickLine,tickSize:yu.tickSize,type:ua.type,width:ua.width,yAxisId:0},W_e=t=>{var e=Qi(t,K_e);return D.createElement(D.Fragment,null,D.createElement(G_e,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),D.createElement(H_e,e))},Vy=D.memo(W_e,YU);Vy.displayName="YAxis";var $_e=(t,e)=>e,uO=Oe([$_e,Wn,ZV,va,zz,Uu,i0e,Zi],f0e),cO=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},XU=Io("mouseClick"),QU=x0();QU.startListening({actionCreator:XU,effect:(t,e)=>{var n=t.payload,r=uO(e.getState(),cO(n));r?.activeIndex!=null&&e.dispatch(npe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var IS=Io("mouseMove"),ZU=x0(),dy=null;ZU.startListening({actionCreator:IS,effect:(t,e)=>{var n=t.payload;dy!==null&&cancelAnimationFrame(dy);var r=cO(n);dy=requestAnimationFrame(()=>{var i=e.getState(),a=MC(i,i.tooltip.settings.shared);if(a==="axis"){var l=uO(i,r);l?.activeIndex!=null?e.dispatch(Rz({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):e.dispatch(Pz())}dy=null})}});function Y_e(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var J6={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},JU=Bs({name:"rootProps",initialState:J6,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:J6.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),X_e=JU.reducer,{updateOptions:Q_e}=JU.actions,Z_e=null,J_e={updatePolarOptions:(t,e)=>e.payload},eq=Bs({name:"polarOptions",initialState:Z_e,reducers:J_e}),{updatePolarOptions:e2e}=eq.actions,t2e=eq.reducer,tq=Io("keyDown"),nq=Io("focus"),fO=x0();fO.startListening({actionCreator:tq,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var l=jC(i,Um(n),D0(n),M0(n)),f=l==null?-1:Number(l);if(!(!Number.isFinite(f)||f<0)){var m=Uu(n);if(a==="Enter"){var p=ax(n,"axis","hover",String(i.index));e.dispatch(mS({active:!i.active,activeIndex:i.index,activeCoordinate:p}));return}var b=Kge(n),_=b==="left-to-right"?1:-1,T=a==="ArrowRight"?1:-1,N=f+T*_;if(!(m==null||N>=m.length||N<0)){var j=ax(n,"axis","hover",String(N));e.dispatch(mS({active:!0,activeIndex:N.toString(),activeCoordinate:j}))}}}}}});fO.startListening({actionCreator:nq,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",l=ax(n,"axis","hover",String(a));e.dispatch(mS({active:!0,activeIndex:a,activeCoordinate:l}))}}}});var wo=Io("externalEvent"),rq=x0(),RE=new Map;rq.startListening({actionCreator:wo,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=RE.get(i);a!==void 0&&cancelAnimationFrame(a);var l=requestAnimationFrame(()=>{try{var f=e.getState(),m={activeCoordinate:Upe(f),activeDataKey:zC(f),activeIndex:Xc(f),activeLabel:Gz(f),activeTooltipIndex:Xc(f),isTooltipActive:qpe(f)};n(m,r)}finally{RE.delete(i)}});RE.set(i,l)}}});var n2e=Oe([Vm],t=>t.tooltipItemPayloads),r2e=Oe([n2e,(t,e)=>e,(t,e,n)=>n],(t,e,n)=>{if(e!=null){var r=t.find(a=>a.settings.graphicalItemId===n);if(r!=null){var{getPosition:i}=r;if(i!=null)return i(e)}}}),iq=Io("touchMove"),aq=x0();aq.startListening({actionCreator:iq,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=MC(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var l=uO(r,cO({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));l?.activeIndex!=null&&e.dispatch(Rz({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(i==="item"){var f,m=n.touches[0];if(document.elementFromPoint==null||m==null)return;var p=document.elementFromPoint(m.clientX,m.clientY);if(!p||!p.getAttribute)return;var b=p.getAttribute(EF),_=(f=p.getAttribute(AF))!==null&&f!==void 0?f:void 0,T=zm(r).find(M=>M.id===_);if(b==null||T==null||_==null)return;var{dataKey:N}=T,j=r2e(r,b,_);e.dispatch(Nz({activeDataKey:N,activeIndex:b,activeCoordinate:j,activeGraphicalItemId:_}))}}}});var i2e=HB({brush:xxe,cartesianAxis:txe,chartData:U0e,errorBars:Obe,graphicalItems:lve,layout:Nue,legend:Mce,options:L0e,polarAxis:_ye,polarOptions:t2e,referenceElements:Ixe,rootProps:X_e,tooltip:rpe,zIndex:S0e}),a2e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return tue({reducer:i2e,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([QU.middleware,ZU.middleware,fO.middleware,rq.middleware,aq.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(sF({type:"raf"}))},devTools:{serialize:{replacer:Y_e},name:"recharts-".concat(n)}})};function sq(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=La(),a=D.useRef(null);if(i)return n;a.current==null&&(a.current=a2e(e,r));var l=EI;return D.createElement(iwe,{context:l,store:a.current},n)}function s2e(t){var{layout:e,margin:n}=t,r=Gr(),i=La();return D.useEffect(()=>{i||(r(Iue(e)),r(Tue(n)))},[r,i,e,n]),null}var oq=D.memo(s2e,Ub);function lq(t){var e=Gr();return D.useEffect(()=>{e(Q_e(t))},[e,t]),null}function e5(t){var{zIndex:e,isPanorama:n}=t,r=D.useRef(null),i=Gr();return D.useLayoutEffect(()=>(r.current&&i(E0e({zIndex:e,element:r.current,isPanorama:n})),()=>{i(A0e({zIndex:e,isPanorama:n}))}),[i,e,n]),D.createElement("g",{tabIndex:-1,ref:r})}function t5(t){var{children:e,isPanorama:n}=t,r=Tt(h0e);if(!r||r.length===0)return e;var i=r.filter(l=>l<0),a=r.filter(l=>l>0);return D.createElement(D.Fragment,null,i.map(l=>D.createElement(e5,{key:l,zIndex:l,isPanorama:n})),e,a.map(l=>D.createElement(e5,{key:l,zIndex:l,isPanorama:n})))}var o2e=["children"];function l2e(t,e){if(t==null)return{};var n,r,i=u2e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function u2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function mx(){return mx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mx.apply(null,arguments)}var c2e={width:"100%",height:"100%",display:"block"},f2e=D.forwardRef((t,e)=>{var n=OF(),r=NF(),i=qF();if(!Nl(n)||!Nl(r))return null;var{children:a,otherAttributes:l,title:f,desc:m}=t,p,b;return l!=null&&(typeof l.tabIndex=="number"?p=l.tabIndex:p=i?0:void 0,typeof l.role=="string"?b=l.role:b=i?"application":void 0),D.createElement(uB,mx({},l,{title:f,desc:m,role:b,tabIndex:p,width:n,height:r,style:c2e,ref:e}),a)}),d2e=t=>{var{children:e}=t,n=Tt(gb);if(!n)return null;var{width:r,height:i,y:a,x:l}=n;return D.createElement(uB,{width:r,height:i,x:l,y:a},e)},n5=D.forwardRef((t,e)=>{var{children:n}=t,r=l2e(t,o2e),i=La();return i?D.createElement(d2e,null,D.createElement(t5,{isPanorama:!0},n)):D.createElement(f2e,mx({ref:e},r),D.createElement(t5,{isPanorama:!1},n))});function h2e(){var t=Gr(),[e,n]=D.useState(null),r=Tt(Wue);return D.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;mn(a)&&a!==r&&t(Oue(a))}},[e,t,r]),n}function r5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function m2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r5(Object(n),!0).forEach(function(r){g2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g2e(t,e,n){return(e=p2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p2e(t){var e=y2e(t,"string");return typeof e=="symbol"?e:e+""}function y2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bc(){return Bc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bc.apply(null,arguments)}var v2e=()=>(Q0e(),null);function gx(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var x2e=D.forwardRef((t,e)=>{var n,r,i=D.useRef(null),[a,l]=D.useState({containerWidth:gx((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:gx((r=t.style)===null||r===void 0?void 0:r.height)}),f=D.useCallback((p,b)=>{l(_=>{var T=Math.round(p),N=Math.round(b);return _.containerWidth===T&&_.containerHeight===N?_:{containerWidth:T,containerHeight:N}})},[]),m=D.useCallback(p=>{if(typeof e=="function"&&e(p),p!=null&&typeof ResizeObserver<"u"){var{width:b,height:_}=p.getBoundingClientRect();f(b,_);var T=j=>{var M=j[0];if(M!=null){var{width:L,height:z}=M.contentRect;f(L,z)}},N=new ResizeObserver(T);N.observe(p),i.current=N}},[e,f]);return D.useEffect(()=>()=>{var p=i.current;p?.disconnect()},[f]),D.createElement(D.Fragment,null,D.createElement(_0,{width:a.containerWidth,height:a.containerHeight}),D.createElement("div",Bc({ref:m},t)))}),b2e=D.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=D.useState({containerWidth:gx(n),containerHeight:gx(r)}),l=D.useCallback((m,p)=>{a(b=>{var _=Math.round(m),T=Math.round(p);return b.containerWidth===_&&b.containerHeight===T?b:{containerWidth:_,containerHeight:T}})},[]),f=D.useCallback(m=>{if(typeof e=="function"&&e(m),m!=null){var{width:p,height:b}=m.getBoundingClientRect();l(p,b)}},[e,l]);return D.createElement(D.Fragment,null,D.createElement(_0,{width:i.containerWidth,height:i.containerHeight}),D.createElement("div",Bc({ref:f},t)))}),w2e=D.forwardRef((t,e)=>{var{width:n,height:r}=t;return D.createElement(D.Fragment,null,D.createElement(_0,{width:n,height:r}),D.createElement("div",Bc({ref:e},t)))}),_2e=D.forwardRef((t,e)=>{var{width:n,height:r}=t;return typeof n=="string"||typeof r=="string"?D.createElement(b2e,Bc({},t,{ref:e})):typeof n=="number"&&typeof r=="number"?D.createElement(w2e,Bc({},t,{width:n,height:r,ref:e})):D.createElement(D.Fragment,null,D.createElement(_0,{width:n,height:r}),D.createElement("div",Bc({ref:e},t)))});function E2e(t){return t?x2e:_2e}var A2e=D.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:l,onDoubleClick:f,onMouseDown:m,onMouseEnter:p,onMouseLeave:b,onMouseMove:_,onMouseUp:T,onTouchEnd:N,onTouchMove:j,onTouchStart:M,style:L,width:z,responsive:$,dispatchTouchEvents:K=!0}=t,X=D.useRef(null),se=Gr(),[J,V]=D.useState(null),[W,H]=D.useState(null),oe=h2e(),ae=PI(),Z=ae?.width>0?ae.width:z,ee=ae?.height>0?ae.height:i,xe=D.useCallback(Ne=>{oe(Ne),typeof e=="function"&&e(Ne),V(Ne),H(Ne),Ne!=null&&(X.current=Ne)},[oe,e,V,H]),de=D.useCallback(Ne=>{se(XU(Ne)),se(wo({handler:a,reactEvent:Ne}))},[se,a]),ye=D.useCallback(Ne=>{se(IS(Ne)),se(wo({handler:p,reactEvent:Ne}))},[se,p]),_e=D.useCallback(Ne=>{se(Pz()),se(wo({handler:b,reactEvent:Ne}))},[se,b]),qe=D.useCallback(Ne=>{se(IS(Ne)),se(wo({handler:_,reactEvent:Ne}))},[se,_]),Ve=D.useCallback(()=>{se(nq())},[se]),tt=D.useCallback(Ne=>{se(tq(Ne.key))},[se]),me=D.useCallback(Ne=>{se(wo({handler:l,reactEvent:Ne}))},[se,l]),Se=D.useCallback(Ne=>{se(wo({handler:f,reactEvent:Ne}))},[se,f]),Ye=D.useCallback(Ne=>{se(wo({handler:m,reactEvent:Ne}))},[se,m]),ze=D.useCallback(Ne=>{se(wo({handler:T,reactEvent:Ne}))},[se,T]),yt=D.useCallback(Ne=>{se(wo({handler:M,reactEvent:Ne}))},[se,M]),$e=D.useCallback(Ne=>{K&&se(iq(Ne)),se(wo({handler:j,reactEvent:Ne}))},[se,K,j]),pt=D.useCallback(Ne=>{se(wo({handler:N,reactEvent:Ne}))},[se,N]),lt=E2e($);return D.createElement(Qz.Provider,{value:J},D.createElement(Mse.Provider,{value:W},D.createElement(lt,{width:Z??L?.width,height:ee??L?.height,className:Hn("recharts-wrapper",r),style:m2e({position:"relative",cursor:"default",width:Z,height:ee},L),onClick:de,onContextMenu:me,onDoubleClick:Se,onFocus:Ve,onKeyDown:tt,onMouseDown:Ye,onMouseEnter:ye,onMouseLeave:_e,onMouseMove:qe,onMouseUp:ze,onTouchEnd:pt,onTouchMove:$e,onTouchStart:yt,ref:xe},D.createElement(v2e,null),n)))}),S2e=["width","height","responsive","children","className","style","compact","title","desc"];function T2e(t,e){if(t==null)return{};var n,r,i=I2e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function I2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var uq=D.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:l,style:f,compact:m,title:p,desc:b}=t,_=T2e(t,S2e),T=ao(_);return m?D.createElement(D.Fragment,null,D.createElement(_0,{width:n,height:r}),D.createElement(n5,{otherAttributes:T,title:p,desc:b},a)):D.createElement(A2e,{className:l,style:f,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},D.createElement(n5,{otherAttributes:T,title:p,desc:b,ref:e},D.createElement(Cxe,null,a)))});function CS(){return CS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CS.apply(null,arguments)}var C2e={top:5,right:5,bottom:5,left:5},O2e={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:C2e,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},cq=D.forwardRef(function(e,n){var r,i=Qi(e.categoricalChartProps,O2e),{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:f,tooltipPayloadSearcher:m,categoricalChartProps:p}=e,b={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:f,tooltipPayloadSearcher:m,eventEmitter:void 0};return D.createElement(sq,{preloadedState:{options:b},reduxStoreName:(r=p.id)!==null&&r!==void 0?r:a},D.createElement(OU,{chartData:p.data}),D.createElement(oq,{layout:i.layout,margin:i.margin}),D.createElement(lq,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),D.createElement(uq,CS({},i,{ref:n})))}),N2e=["axis"],P2e=D.forwardRef((t,e)=>D.createElement(cq,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:N2e,tooltipPayloadSearcher:KC,categoricalChartProps:t,ref:e})),R2e=["axis","item"],i5=D.forwardRef((t,e)=>D.createElement(cq,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:R2e,tooltipPayloadSearcher:KC,categoricalChartProps:t,ref:e}));function D2e(t){var e=Gr();return D.useEffect(()=>{e(e2e(t))},[e,t]),null}var k2e=["layout"];function OS(){return OS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OS.apply(null,arguments)}function M2e(t,e){if(t==null)return{};var n,r,i=j2e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function j2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var L2e={top:5,right:5,bottom:5,left:5},fq={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:L2e,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},B2e=D.forwardRef(function(e,n){var r,i=Qi(e.categoricalChartProps,fq),{layout:a}=i,l=M2e(i,k2e),{chartName:f,defaultTooltipEventType:m,validateTooltipEventTypes:p,tooltipPayloadSearcher:b}=e,_={chartName:f,defaultTooltipEventType:m,validateTooltipEventTypes:p,tooltipPayloadSearcher:b,eventEmitter:void 0};return D.createElement(sq,{preloadedState:{options:_},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:f},D.createElement(OU,{chartData:i.data}),D.createElement(oq,{layout:a,margin:i.margin}),D.createElement(lq,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),D.createElement(D2e,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),D.createElement(uq,OS({},l,{ref:n})))});function a5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function s5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a5(Object(n),!0).forEach(function(r){F2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function F2e(t,e,n){return(e=V2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V2e(t){var e=z2e(t,"string");return typeof e=="symbol"?e:e+""}function z2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var U2e=["item"],q2e=s5(s5({},fq),{},{layout:"centric",startAngle:0,endAngle:360}),G2e=D.forwardRef((t,e)=>{var n=Qi(t,q2e);return D.createElement(B2e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:U2e,tooltipPayloadSearcher:KC,categoricalChartProps:n,ref:e})});function H2e(){const t=cd(L=>L.profile),[e,n]=D.useState([]),[r,i]=D.useState([]),[a,l]=D.useState([]),[f,m]=D.useState([]),[p,b]=D.useState(0);D.useEffect(()=>{t&&_()},[t,p]);const _=async()=>{if(!t)return;const z=H4(new Date,p),$=fd(z,{weekStartsOn:1}),K=[],X=[],se=t.waterGoalMl||2e3;for(let H=0;H<7;H++){const oe=Py($,H),ae=Cs(oe,"yyyy-MM-dd"),Z=await ot.dailyLogs.where("date").equals(ae).first();K.push({dag:Cs(oe,"EEE",{locale:wh}),punten:Z?.totalPointsUsed??0,budget:t.dailyPointsBudget}),X.push({dag:Cs(oe,"EEE",{locale:wh}),water:Z?.waterMl??0,doel:se})}n(K),i(X);const J={Ontbijt:0,Lunch:0,Diner:0,Tussendoor:0},V={breakfast:"Ontbijt",lunch:"Lunch",dinner:"Diner",snack:"Tussendoor"};for(let H=0;H<7;H++){const oe=Py($,H),ae=Cs(oe,"yyyy-MM-dd"),Z=await ot.dailyLogs.where("date").equals(ae).first();if(Z?.id){const ee=await ot.mealEntries.where("dailyLogId").equals(Z.id).toArray();for(const xe of ee){const de=V[xe.mealType]||"Tussendoor";J[de]+=xe.points}}}l(Object.entries(J).filter(([,H])=>H>0).map(([H,oe])=>({name:H,value:oe})));const W=await ot.weightEntries.orderBy("date").reverse().limit(30).toArray();m(W.reverse().map(H=>({date:Cs(new Date(H.date),"d MMM",{locale:wh}),gewicht:H.weightKg})))};if(!t)return null;const T=(()=>{const L=H4(new Date,p),z=fd(L,{weekStartsOn:1}),$=Py(z,6);return`${Cs(z,"d MMM",{locale:wh})} - ${Cs($,"d MMM",{locale:wh})}`})(),N=e.reduce((L,z)=>L+z.punten,0),j=e.filter(L=>L.punten>0).length>0?Math.round(N/e.filter(L=>L.punten>0).length):0,M=["#FF9500","#34C759","#007AFF","#FF3B30"];return O.jsx(Wc,{title:"Statistieken",children:O.jsxs("div",{className:"flex flex-col gap-4 pb-4",children:[t&&O.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[O.jsxs(Nn,{className:"p-3 text-center",children:[O.jsx(lI,{size:20,className:"text-primary mx-auto mb-1"}),O.jsx("div",{className:"text-[20px] font-bold",children:t.currentWeightKg}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"kg nu"})]}),O.jsxs(Nn,{className:"p-3 text-center",children:[O.jsx(FL,{size:20,className:"text-ios-blue mx-auto mb-1"}),O.jsx("div",{className:"text-[20px] font-bold",children:t.goalWeightKg}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"kg doel"})]}),O.jsxs(Nn,{className:"p-3 text-center",children:[O.jsx(VL,{size:20,className:"text-ios-warning mx-auto mb-1"}),O.jsx("div",{className:"text-[20px] font-bold",children:t.currentWeightKg-t.goalWeightKg>0?(t.currentWeightKg-t.goalWeightKg).toFixed(1):"0"}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"kg te gaan"})]})]}),O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("button",{onClick:()=>b(L=>L+1),className:"px-3 py-1.5 rounded-lg bg-white text-[13px] font-medium border-none cursor-pointer shadow-sm active:bg-gray-100",children:" Vorige"}),O.jsx("span",{className:"text-[15px] font-semibold",children:T}),O.jsx("button",{onClick:()=>b(L=>Math.max(0,L-1)),disabled:p===0,className:`px-3 py-1.5 rounded-lg bg-white text-[13px] font-medium border-none cursor-pointer shadow-sm ${p===0?"opacity-30":"active:bg-gray-100"}`,children:"Volgende "})]}),O.jsxs(Nn,{children:[O.jsx(_o,{title:"Punten per dag"}),O.jsx("div",{className:"px-2 pb-4",children:O.jsx(ny,{width:"100%",height:200,children:O.jsxs(i5,{data:e,children:[O.jsx(By,{strokeDasharray:"3 3",stroke:"#E5E5EA"}),O.jsx(Fy,{dataKey:"dag",tick:{fontSize:12,fill:"#8E8E93"},tickLine:!1}),O.jsx(Vy,{tick:{fontSize:11,fill:"#8E8E93"},tickLine:!1}),O.jsx(yE,{}),O.jsx(xS,{y:t.dailyPointsBudget,stroke:"#FF3B30",strokeDasharray:"5 5",label:{value:"Budget",fontSize:11,fill:"#FF3B30"}}),O.jsx(_S,{dataKey:"punten",fill:"#34C759",radius:[4,4,0,0]})]})})})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[O.jsxs(Nn,{className:"p-3 text-center",children:[O.jsx("div",{className:"text-[22px] font-bold text-primary",children:N}),O.jsx("div",{className:"text-[12px] text-ios-secondary",children:"Totaal deze week"})]}),O.jsxs(Nn,{className:"p-3 text-center",children:[O.jsx("div",{className:"text-[22px] font-bold text-ios-blue",children:j}),O.jsx("div",{className:"text-[12px] text-ios-secondary",children:"Gemiddeld per dag"})]})]}),O.jsxs(Nn,{children:[O.jsx(_o,{title:"Water per dag"}),O.jsx("div",{className:"px-2 pb-4",children:O.jsx(ny,{width:"100%",height:200,children:O.jsxs(i5,{data:r,children:[O.jsx(By,{strokeDasharray:"3 3",stroke:"#E5E5EA"}),O.jsx(Fy,{dataKey:"dag",tick:{fontSize:12,fill:"#8E8E93"},tickLine:!1}),O.jsx(Vy,{tick:{fontSize:11,fill:"#8E8E93"},tickLine:!1,tickFormatter:L=>`${L/1e3}L`}),O.jsx(yE,{formatter:L=>[`${L} ml`,"Water"]}),O.jsx(xS,{y:t.waterGoalMl||2e3,stroke:"#3B82F6",strokeDasharray:"5 5",label:{value:"Doel",fontSize:11,fill:"#3B82F6"}}),O.jsx(_S,{dataKey:"water",fill:"#3B82F6",radius:[4,4,0,0]})]})})})]}),a.length>0&&O.jsxs(Nn,{children:[O.jsx(_o,{title:"Verdeling per maaltijd"}),O.jsxs("div",{className:"flex items-center px-4 pb-4",children:[O.jsx("div",{className:"w-32 h-32",children:O.jsx(ny,{width:"100%",height:"100%",children:O.jsx(G2e,{children:O.jsx(TU,{data:a,dataKey:"value",cx:"50%",cy:"50%",outerRadius:55,innerRadius:30,children:a.map((L,z)=>O.jsx(L0,{fill:M[z%M.length]},z))})})})}),O.jsx("div",{className:"flex-1 flex flex-col gap-2 ml-4",children:a.map((L,z)=>O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:M[z%M.length]}}),O.jsx("span",{className:"text-[13px] flex-1",children:L.name}),O.jsxs("span",{className:"text-[13px] font-medium",children:[L.value," pt"]})]},L.name))})]})]}),f.length>1&&O.jsxs(Nn,{children:[O.jsx(_o,{title:"Gewichtstrend"}),O.jsx("div",{className:"p-4",children:O.jsx(ny,{width:"100%",height:180,children:O.jsxs(P2e,{data:f,children:[O.jsx(By,{strokeDasharray:"3 3",stroke:"#E5E5EA"}),O.jsx(Fy,{dataKey:"date",tick:{fontSize:11,fill:"#8E8E93"},tickLine:!1}),O.jsx(Vy,{tick:{fontSize:11,fill:"#8E8E93"},tickLine:!1,domain:["dataMin - 1","dataMax + 1"]}),O.jsx(yE,{}),O.jsx(GU,{type:"monotone",dataKey:"gewicht",stroke:"#007AFF",strokeWidth:2.5,dot:{fill:"#007AFF",r:3}})]})})})]})]})})}function K2e(){const t=cd(N=>N.profile),{getTotalPoints:e}=Xx(),[n,r]=D.useState([]),[i,a]=D.useState(""),[l,f]=D.useState(!1),[m,p]=D.useState(null),b=D.useRef(null);D.useEffect(()=>{Qx().then(N=>p(!!N?.apiKey))},[]),D.useEffect(()=>{b.current?.scrollIntoView({behavior:"smooth"})},[n]);const _=()=>{const N=e(),j=t?.dailyPointsBudget??30,M=j-N;return`Je bent een vriendelijke Nederlandse voedingsassistent voor de app BodyBalance.
De gebruiker volgt een puntensysteem vergelijkbaar met Weight Watchers.

Huidige status:
- Dagbudget: ${j} punten
- Vandaag gebruikt: ${N} punten
- Resterend: ${M} punten

Puntenformule: (cal  0.03) + (verz.vet  0.28) + (suiker  0.12) - (eiwit  0.10) - (vezels  0.10) - (onverz.vet  0.05), minimum 0.

Regels:
- Antwoord altijd in het Nederlands
- Geef korte, praktische antwoorden
- Bij vragen over punten: bereken met de formule hierboven
- Bij suggesties: houd rekening met resterende punten
- Gebruik geen emojis tenzij de gebruiker ze gebruikt`},T=async()=>{if(!i.trim()||l)return;const N={role:"user",content:i.trim()},j=[...n,N];r(j),a(""),f(!0);try{const M=await aB(j.map(L=>({role:L.role,content:L.content})),_());r([...j,{role:"assistant",content:M}])}catch(M){const L=M instanceof Error?M.message:"Onbekende fout";r([...j,{role:"assistant",content:`Fout: ${L}`}])}finally{f(!1)}};return m===!1?O.jsx(Wc,{title:"AI Assistent",children:O.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-6",children:[O.jsx("div",{className:"w-20 h-20 rounded-full bg-ios-warning/10 flex items-center justify-center mb-4",children:O.jsx(gv,{size:40,className:"text-ios-warning"})}),O.jsx("h3",{className:"text-[17px] font-semibold mb-2 text-center",children:"API-sleutel vereist"}),O.jsxs("p",{className:"text-[14px] text-ios-secondary text-center leading-relaxed",children:["Om de AI assistent te gebruiken heb je een Anthropic API-sleutel nodig. Ga naar ",O.jsx("strong",{children:"Profiel  AI Instellingen"})," om je sleutel in te voeren."]})]})}):O.jsx(Wc,{title:"AI Assistent",children:O.jsxs("div",{className:"flex flex-col",style:{minHeight:"calc(100vh - 180px)"},children:[O.jsxs("div",{className:"flex-1 flex flex-col gap-3 pb-4",children:[n.length===0&&O.jsxs("div",{className:"text-center py-8",children:[O.jsx(Ny,{size:48,className:"text-ios-separator mx-auto mb-3"}),O.jsx("p",{className:"text-[17px] text-ios-secondary font-medium",children:"Hoi! Ik ben je voedingsassistent"}),O.jsx("p",{className:"text-[13px] text-ios-secondary mt-2 max-w-xs mx-auto leading-relaxed",children:"Stel me vragen over punten, voedingswaarden of vraag om maaltijdsuggesties."}),O.jsx("div",{className:"flex flex-col gap-2 mt-5 max-w-xs mx-auto",children:["Hoeveel punten heeft een broodje kaas?","Wat kan ik eten met 5 punten?","Geef me een gezond lunch-idee"].map(N=>O.jsx("button",{onClick:()=>{a(N)},className:"text-left px-4 py-2.5 bg-white rounded-xl text-[14px] text-primary border border-ios-separator cursor-pointer active:bg-gray-50",children:N},N))})]}),n.map((N,j)=>O.jsxs("div",{className:`flex gap-2.5 ${N.role==="user"?"justify-end":"justify-start"}`,children:[N.role==="assistant"&&O.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0 mt-0.5",children:O.jsx(Ny,{size:16,className:"text-primary"})}),O.jsx(Nn,{className:`max-w-[80%] px-4 py-3 ${N.role==="user"?"bg-primary text-white":""}`,children:O.jsx("p",{className:`text-[15px] leading-relaxed whitespace-pre-wrap ${N.role==="user"?"text-white":""}`,children:N.content})}),N.role==="user"&&O.jsx("div",{className:"w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center flex-shrink-0 mt-0.5",children:O.jsx(zL,{size:16,className:"text-ios-secondary"})})]},j)),l&&O.jsxs("div",{className:"flex gap-2.5",children:[O.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:O.jsx(Ny,{size:16,className:"text-primary"})}),O.jsx(Nn,{className:"px-4 py-3",children:O.jsx(jc,{size:18,className:"text-ios-secondary animate-spin"})})]}),O.jsx("div",{ref:b})]}),O.jsx("div",{className:"sticky bottom-[70px] bg-ios-bg pt-2 pb-2",children:O.jsxs("div",{className:"flex gap-2",children:[O.jsx("input",{type:"text",placeholder:"Stel een vraag...",value:i,onChange:N=>a(N.target.value),onKeyDown:N=>N.key==="Enter"&&T(),className:"flex-1 bg-white rounded-xl px-4 py-3 text-[16px] border border-ios-separator"}),O.jsx("button",{onClick:T,disabled:!i.trim()||l,className:`w-11 h-11 rounded-full flex items-center justify-center border-none cursor-pointer transition-colors ${i.trim()&&!l?"bg-primary text-white":"bg-ios-bg text-ios-separator"}`,children:O.jsx(fre,{size:18})})]})})]})})}const dq=["bodybalanceapp@gmail.com","marcelvandernet@gmail.com"];function hq(){const t=bl.currentUser?.email;return t?dq.includes(t):!1}function W2e(){const t=Zc(),[e,n]=D.useState([]),[r,i]=D.useState([]),[a,l]=D.useState(""),[f,m]=D.useState(!0),[p,b]=D.useState(null);D.useEffect(()=>{if(!hq()){t("/");return}_()},[t]);const _=async()=>{m(!0),await Promise.all([T(),N()]),m(!1)},T=async()=>{try{const X=await $f(Wf(ma,"inviteCodes")),se=[];X.forEach(J=>{const V=J.data();se.push({code:J.id,label:V.label||"",createdAt:V.createdAt||"",usedBy:V.usedBy||null,usedAt:V.usedAt||null,usedEmail:V.usedEmail||""})}),se.sort((J,V)=>(V.createdAt||"").localeCompare(J.createdAt||"")),n(se)}catch(X){console.warn("[Admin] Load codes failed:",X)}},N=async()=>{try{const X=await $f(Wf(ma,"users")),se=[];for(const J of X.docs){const V=J.id;try{const W=await $f(Wf(ma,"users",V,"profile"));for(const H of W.docs){const oe=H.data();se.push({userId:V,email:oe.email||"",name:oe.name||"Onbekend",disabled:oe.disabled===!0,lastLogin:oe.updatedAt||""})}}catch{}}i(se)}catch(X){console.warn("[Admin] Load users failed:",X)}},j=()=>{const X="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let se="";for(let J=0;J<8;J++)se+=X[Math.floor(Math.random()*X.length)];return se},M=async()=>{const X=j();try{await Nm(to(ma,"inviteCodes",X),{label:a.trim()||"",createdAt:new Date().toISOString(),usedBy:null,usedAt:null,usedEmail:null}),l(""),await T()}catch(se){console.warn("[Admin] Create code failed:",se)}},L=async X=>{try{await navigator.clipboard.writeText(X),b(X),setTimeout(()=>b(null),2e3)}catch{b(X),setTimeout(()=>b(null),2e3)}},z=async X=>{try{const se=to(ma,"users",X.userId,"profile","data");await WT(se,{disabled:!X.disabled}),i(r.map(J=>J.userId===X.userId?{...J,disabled:!J.disabled}:J))}catch(se){console.warn("[Admin] Toggle user failed:",se)}},$=e.filter(X=>!X.usedBy),K=e.filter(X=>X.usedBy);return O.jsx(Wc,{title:"Admin",children:O.jsxs("div",{className:"flex flex-col gap-4",children:[O.jsxs("button",{onClick:()=>t("/profile"),className:"flex items-center gap-2 text-primary text-[15px] font-medium bg-transparent border-none cursor-pointer p-0",children:[O.jsx($te,{size:18}),"Terug naar profiel"]}),f?O.jsx("div",{className:"flex justify-center py-12",children:O.jsx("div",{className:"w-8 h-8 rounded-full border-3 border-primary border-t-transparent animate-spin"})}):O.jsxs(O.Fragment,{children:[O.jsxs(Nn,{children:[O.jsxs("div",{className:"px-4 py-3 border-b border-ios-separator flex items-center gap-2",children:[O.jsx(zne,{size:18,className:"text-primary"}),O.jsx("span",{className:"text-[15px] font-semibold",children:"Invite Codes"})]}),O.jsxs("div",{className:"p-4",children:[O.jsxs("div",{className:"flex gap-2 mb-4",children:[O.jsx("input",{type:"text",value:a,onChange:X=>l(X.target.value),placeholder:"Label (bijv. naam)",className:"flex-1 bg-ios-bg rounded-xl px-4 py-2.5 text-[15px] border border-ios-separator"}),O.jsxs(Js,{onClick:M,className:"flex items-center gap-1.5",children:[O.jsx(Ff,{size:16}),"Maak code"]})]}),$.length>0&&O.jsxs("div",{className:"mb-3",children:[O.jsxs("p",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide mb-2",children:["Beschikbaar (",$.length,")"]}),$.map(X=>O.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-ios-separator last:border-b-0",children:[O.jsxs("div",{children:[O.jsx("span",{className:"text-[17px] font-mono font-bold tracking-wider",children:X.code}),X.label&&O.jsx("span",{className:"text-[13px] text-ios-secondary ml-2",children:X.label})]}),O.jsxs("button",{onClick:()=>L(X.code),className:"flex items-center gap-1 text-primary text-[13px] font-medium bg-transparent border-none cursor-pointer p-1",children:[p===X.code?O.jsx(kL,{size:14}):O.jsx(jL,{size:14}),p===X.code?"Gekopieerd":"Kopieer"]})]},X.code))]}),K.length>0&&O.jsxs("div",{children:[O.jsxs("p",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide mb-2",children:["Gebruikt (",K.length,")"]}),K.map(X=>O.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-ios-separator last:border-b-0 opacity-50",children:[O.jsxs("div",{children:[O.jsx("span",{className:"text-[15px] font-mono line-through",children:X.code}),X.usedEmail&&O.jsx("span",{className:"text-[13px] text-ios-secondary ml-2",children:X.usedEmail}),!X.usedEmail&&X.label&&O.jsx("span",{className:"text-[13px] text-ios-secondary ml-2",children:X.label})]}),O.jsx("span",{className:"text-[12px] text-ios-secondary",children:X.usedAt?new Date(X.usedAt).toLocaleDateString("nl-NL"):""})]},X.code))]}),e.length===0&&O.jsx("p",{className:"text-[15px] text-ios-secondary text-center py-4",children:"Nog geen codes aangemaakt"})]})]}),O.jsxs(Nn,{children:[O.jsxs("div",{className:"px-4 py-3 border-b border-ios-separator flex items-center gap-2",children:[O.jsx(kre,{size:18,className:"text-primary"}),O.jsxs("span",{className:"text-[15px] font-semibold",children:["Gebruikers (",r.length,")"]})]}),r.length>0?O.jsx("div",{children:r.map((X,se)=>O.jsxs("div",{className:`flex items-center justify-between px-4 py-3 ${se<r.length-1?"border-b border-ios-separator":""}`,children:[O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsxs("div",{className:"text-[15px] font-medium truncate",children:[X.name,X.disabled&&O.jsx("span",{className:"text-ios-destructive ml-1",children:"(geblokkeerd)"})]}),O.jsx("div",{className:"text-[13px] text-ios-secondary truncate",children:X.email})]}),!dq.includes(X.email)&&O.jsx("button",{onClick:()=>z(X),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-[13px] font-medium border-none cursor-pointer ${X.disabled?"bg-primary/10 text-primary":"bg-ios-destructive/10 text-ios-destructive"}`,children:X.disabled?O.jsxs(O.Fragment,{children:[O.jsx(bne,{size:14})," Activeer"]}):O.jsxs(O.Fragment,{children:[O.jsx(Xte,{size:14})," Blokkeer"]})})]},X.userId))}):O.jsx("p",{className:"text-[15px] text-ios-secondary text-center py-8",children:"Nog geen gebruikers"})]})]})]})})}function $2e(){const t=Zc(),{profile:e,saveProfile:n,updateWeight:r}=cd(),[i,a]=D.useState(""),[l,f]=D.useState(!1),[m,p]=D.useState(""),[b,_]=D.useState("male"),[T,N]=D.useState(""),[j,M]=D.useState(0),[L,z]=D.useState(0),[$,K]=D.useState("light"),[X,se]=D.useState("lose"),[J,V]=D.useState(""),[W,H]=D.useState(""),[oe,ae]=D.useState(!1),[Z,ee]=D.useState(()=>localStorage.getItem("bb_meal_reminder")==="true"),[xe,de]=D.useState(()=>localStorage.getItem("bb_water_reminder")==="true"),[ye,_e]=D.useState("default"),[qe,Ve]=D.useState(()=>localStorage.getItem("bb_theme")||"auto"),[tt,me]=D.useState(null),[Se,Ye]=D.useState(null);D.useEffect(()=>{yt(),pt()},[]),D.useEffect(()=>{e&&(p(e.name),_(e.gender),N(e.dateOfBirth),M(e.heightCm),z(e.goalWeightKg),K(e.activityLevel),se(e.goal))},[e]);const ze=async()=>{const nt=parseFloat(i);if(isNaN(nt)||nt<30||nt>300)return;const Zt=Cs(new Date,"yyyy-MM-dd"),Jt=await ot.weightEntries.where("date").equals(Zt).first();Jt?.id?await ot.weightEntries.update(Jt.id,{weightKg:nt}):await ot.weightEntries.add({date:Zt,weightKg:nt}),await r(nt),a("");const Wt=am.getState().user?.uid;Wt&&TL(Wt,{date:Zt,weightKg:nt}).catch(()=>{})},yt=async()=>{const nt=await Qx();nt&&(V(nt.apiKey),H(nt.apiUrl||""))},$e=async()=>{await _se(J,W||void 0),ae(!0),setTimeout(()=>ae(!1),2e3)},pt=()=>{"Notification"in window&&_e(Notification.permission)},lt=async()=>{if(!("Notification"in window))return!1;if(Notification.permission==="granted")return!0;if(Notification.permission==="default"){const nt=await Notification.requestPermission();if(_e(nt),nt==="granted")return new Notification("BodyBalance",{body:"Notificaties zijn ingeschakeld!",icon:"/icons/icon-192.png"}),!0}return!1},Ne=async()=>{if(Z){ee(!1),localStorage.setItem("bb_meal_reminder","false");return}await lt()&&(ee(!0),localStorage.setItem("bb_meal_reminder","true"))},Xe=async()=>{if(xe){de(!1),localStorage.setItem("bb_water_reminder","false");return}await lt()&&(de(!0),localStorage.setItem("bb_water_reminder","true"))},Et=nt=>{Ve(nt),localStorage.setItem("bb_theme",nt),window.dispatchEvent(new Event("themechange"))},Fe=async()=>{try{me("Exporteren...");const nt={version:2,exportDate:new Date().toISOString(),userProfiles:(await ot.userProfiles.toArray()).map(xt=>{const{...Mn}=xt;return delete Mn.anthropicApiKey,delete Mn.anthropicApiUrl,Mn}),foodItems:await ot.foodItems.toArray(),mealEntries:await ot.mealEntries.toArray(),dailyLogs:await ot.dailyLogs.toArray(),weightEntries:await ot.weightEntries.toArray()},Zt=new Blob([JSON.stringify(nt,null,2)],{type:"application/json"}),Jt=URL.createObjectURL(Zt),Wt=document.createElement("a");Wt.href=Jt,Wt.download=`bodybalance-backup-${Cs(new Date,"yyyy-MM-dd")}.json`,Wt.click(),URL.revokeObjectURL(Jt),me("Export gelukt!"),setTimeout(()=>me(null),3e3)}catch{me("Export mislukt"),setTimeout(()=>me(null),3e3)}},Rt=()=>{const nt=document.createElement("input");nt.type="file",nt.accept=".json",nt.onchange=async Zt=>{const Jt=Zt.target.files?.[0];if(Jt)try{Ye("Importeren...");const Wt=await Jt.text(),xt=JSON.parse(Wt);if(!xt.version||!xt.userProfiles){Ye("Ongeldig bestand"),setTimeout(()=>Ye(null),3e3);return}await ot.transaction("rw",[ot.userProfiles,ot.foodItems,ot.mealEntries,ot.dailyLogs,ot.weightEntries],async()=>{await ot.foodItems.clear(),await ot.mealEntries.clear(),await ot.dailyLogs.clear(),await ot.weightEntries.clear(),await ot.userProfiles.clear(),xt.userProfiles?.length&&await ot.userProfiles.bulkAdd(xt.userProfiles),xt.foodItems?.length&&await ot.foodItems.bulkAdd(xt.foodItems),xt.mealEntries?.length&&await ot.mealEntries.bulkAdd(xt.mealEntries),xt.dailyLogs?.length&&await ot.dailyLogs.bulkAdd(xt.dailyLogs),xt.weightEntries?.length&&await ot.weightEntries.bulkAdd(xt.weightEntries)});const Mn=bl.currentUser?.uid;Mn&&CL(Mn).catch(()=>{}),Ye("Import gelukt! Pagina herlaadt..."),setTimeout(()=>window.location.reload(),500)}catch{Ye("Import mislukt - ongeldig bestand"),setTimeout(()=>Ye(null),3e3)}},nt.click()},Kt=async()=>{if(!e)return;const nt=UL(e.currentWeightKg,j,T,b,$,X);await n({name:m,gender:b,dateOfBirth:T,heightCm:j,currentWeightKg:e.currentWeightKg,goalWeightKg:L,activityLevel:$,goal:X,dailyPointsBudget:nt.dailyPoints,weeklyPointsBudget:nt.weeklyPoints,onboardingComplete:!0}),f(!1)};return e?O.jsx(Wc,{title:"Profiel",children:O.jsxs("div",{className:"flex flex-col gap-4 pb-4",children:[O.jsxs(Nn,{children:[O.jsx(_o,{title:"Gewicht loggen"}),O.jsxs("div",{className:"p-4 flex gap-3",children:[O.jsxs("div",{className:"relative flex-1",children:[O.jsx("input",{type:"number",placeholder:String(e.currentWeightKg),value:i,onChange:nt=>a(nt.target.value),step:"0.1",min:"30",max:"300",className:"bg-ios-bg rounded-xl px-4 py-3 text-[17px] w-full"}),O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:"kg"})]}),O.jsx(Js,{onClick:ze,disabled:!i,children:"Log"})]})]}),O.jsxs(Nn,{children:[O.jsx(_o,{title:"Puntenbudget"}),O.jsxs("div",{className:"px-4 py-3 flex justify-between items-center border-b border-ios-separator",children:[O.jsx("span",{className:"text-[15px]",children:"Dagelijks budget"}),O.jsxs("span",{className:"text-[17px] font-bold text-primary",children:[e.dailyPointsBudget," pt"]})]}),O.jsxs("div",{className:"px-4 py-3 flex justify-between items-center",children:[O.jsx("span",{className:"text-[15px]",children:"Weekpunten"}),O.jsxs("span",{className:"text-[17px] font-bold text-ios-blue",children:[e.weeklyPointsBudget," pt"]})]})]}),O.jsxs(Nn,{children:[O.jsx(_o,{title:"Gegevens",rightContent:O.jsx("button",{onClick:()=>f(!l),className:"text-[15px] text-primary font-medium border-none bg-transparent cursor-pointer",children:l?"Annuleer":"Wijzig"})}),l?O.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[O.jsx(Tc,{label:"Naam",value:m,onChange:nt=>p(nt.currentTarget.value)}),O.jsx(Dh,{label:"Geslacht",value:b,onChange:nt=>_(nt.currentTarget.value),options:[{value:"male",label:"Man"},{value:"female",label:"Vrouw"}]}),O.jsx(Tc,{label:"Lengte",type:"number",suffix:"cm",value:j,onChange:nt=>M(Number(nt.currentTarget.value))}),O.jsx(Tc,{label:"Streefgewicht",type:"number",suffix:"kg",value:L,onChange:nt=>z(Number(nt.currentTarget.value))}),O.jsx(Dh,{label:"Activiteitsniveau",value:$,onChange:nt=>K(nt.currentTarget.value),options:Object.entries(AA).map(([nt,Zt])=>({value:nt,label:Zt}))}),O.jsx(Dh,{label:"Doel",value:X,onChange:nt=>se(nt.currentTarget.value),options:Object.entries(SA).map(([nt,Zt])=>({value:nt,label:Zt}))}),O.jsx(Js,{fullWidth:!0,onClick:Kt,className:"mt-2",children:"Opslaan"})]}):O.jsx("div",{children:[["Naam",e.name],["Geslacht",e.gender==="male"?"Man":"Vrouw"],["Lengte",`${e.heightCm} cm`],["Activiteit",AA[e.activityLevel]],["Doel",SA[e.goal]]].map(([nt,Zt],Jt,Wt)=>O.jsxs("div",{className:`px-4 py-3 flex justify-between ${Jt<Wt.length-1?"border-b border-ios-separator":""}`,children:[O.jsx("span",{className:"text-[15px] text-ios-secondary",children:nt}),O.jsx("span",{className:"text-[15px]",children:Zt})]},nt))})]}),O.jsxs("button",{onClick:()=>t("/ai-chat"),className:"flex items-center gap-3 w-full p-4 bg-white rounded-2xl shadow-sm border-none cursor-pointer active:bg-gray-50 text-left",children:[O.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:O.jsx(Ny,{size:20,className:"text-primary"})}),O.jsxs("div",{className:"flex-1",children:[O.jsx("div",{className:"text-[15px] font-semibold",children:"AI Voedingsassistent"}),O.jsx("div",{className:"text-[13px] text-ios-secondary",children:"Stel vragen over punten en voeding"})]})]}),O.jsxs(Nn,{children:[O.jsx(_o,{title:"AI Instellingen"}),O.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Anthropic API-sleutel"}),O.jsxs("div",{className:"relative",children:[O.jsx(qne,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:"password",placeholder:"sk-ant-...",value:J,onChange:nt=>V(nt.target.value),className:"bg-ios-bg rounded-xl pl-9 pr-4 py-3 text-[15px] w-full"})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"API URL (optioneel)"}),O.jsx("input",{type:"url",placeholder:"https://api.anthropic.com/v1/messages",value:W,onChange:nt=>H(nt.target.value),className:"bg-ios-bg rounded-xl px-4 py-3 text-[15px] w-full"})]}),O.jsx(Js,{fullWidth:!0,onClick:$e,disabled:!J.trim(),children:oe?O.jsxs("span",{className:"flex items-center justify-center gap-2",children:[O.jsx(kL,{size:16})," Opgeslagen"]}):"Opslaan"}),O.jsx("p",{className:"text-[12px] text-ios-secondary text-center",children:"Nodig voor AI foto-herkenning en de voedingsassistent"})]})]}),O.jsxs(Nn,{children:[O.jsx(_o,{title:"Waterdoel"}),O.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx(up,{size:20,className:"text-blue-500"}),O.jsx("span",{className:"text-[15px]",children:"Dagelijks doel"})]}),O.jsx("div",{className:"flex items-center gap-2",children:[1500,2e3,2500,3e3].map(nt=>O.jsxs("button",{onClick:async()=>{e?.id&&(await ot.userProfiles.update(e.id,{waterGoalMl:nt,updatedAt:new Date}),cd.setState({profile:{...e,waterGoalMl:nt}}))},className:`px-2.5 py-1 rounded-lg text-[13px] font-medium border-none cursor-pointer transition-colors ${(e?.waterGoalMl||2e3)===nt?"bg-blue-500 text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:[nt/1e3,"L"]},nt))})]})]}),O.jsxs(Nn,{children:[O.jsx(_o,{title:"Weergave"}),O.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[qe==="dark"?O.jsx(tre,{size:20,className:"text-ios-blue"}):qe==="light"?O.jsx(xre,{size:20,className:"text-ios-warning"}):O.jsx(Jne,{size:20,className:"text-ios-secondary"}),O.jsx("span",{className:"text-[15px]",children:"Thema"})]}),O.jsx("div",{className:"flex items-center gap-1",children:[{key:"auto",label:"Auto"},{key:"light",label:"Licht"},{key:"dark",label:"Donker"}].map(({key:nt,label:Zt})=>O.jsx("button",{onClick:()=>Et(nt),className:`px-3 py-1 rounded-lg text-[13px] font-medium border-none cursor-pointer transition-colors ${qe===nt?"bg-ios-blue text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:Zt},nt))})]})]}),O.jsxs(Nn,{children:[O.jsx(_o,{title:"Notificaties"}),O.jsxs("div",{className:"px-4 py-3 flex items-center justify-between border-b border-ios-separator",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[Z?O.jsx(ene,{size:20,className:"text-primary"}):O.jsx(Zte,{size:20,className:"text-ios-secondary"}),O.jsx("span",{className:"text-[15px]",children:"Maaltijd herinnering"})]}),O.jsx("button",{onClick:Ne,className:`relative w-[51px] h-[31px] rounded-full border-none cursor-pointer transition-colors ${Z?"bg-primary":"bg-ios-separator"}`,children:O.jsx("div",{className:`absolute top-0.5 w-[27px] h-[27px] rounded-full bg-white shadow-sm transition-transform ${Z?"translate-x-[22px]":"translate-x-0.5"}`})})]}),O.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[xe?O.jsx(up,{size:20,className:"text-blue-500"}):O.jsx(up,{size:20,className:"text-ios-secondary"}),O.jsx("span",{className:"text-[15px]",children:"Water herinnering"})]}),O.jsx("button",{onClick:Xe,className:`relative w-[51px] h-[31px] rounded-full border-none cursor-pointer transition-colors ${xe?"bg-blue-500":"bg-ios-separator"}`,children:O.jsx("div",{className:`absolute top-0.5 w-[27px] h-[27px] rounded-full bg-white shadow-sm transition-transform ${xe?"translate-x-[22px]":"translate-x-0.5"}`})})]}),ye==="denied"&&O.jsxs("div",{className:"px-4 pb-3 flex items-start gap-2",children:[O.jsx(gv,{size:14,className:"text-ios-destructive flex-shrink-0 mt-0.5"}),O.jsx("p",{className:"text-[12px] text-ios-destructive",children:"Notificaties zijn geblokkeerd. Ga naar je browserinstellingen om dit te wijzigen."})]})]}),O.jsxs(Nn,{children:[O.jsx(_o,{title:"Data beheer"}),O.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[O.jsxs("button",{onClick:Fe,className:"flex items-center justify-center gap-2 py-3 bg-ios-bg rounded-xl text-[15px] font-medium text-ios-text border-none cursor-pointer active:bg-gray-200 transition-colors",children:[O.jsx(Tne,{size:18}),"Data exporteren (JSON)"]}),O.jsxs("button",{onClick:Rt,className:"flex items-center justify-center gap-2 py-3 bg-ios-bg rounded-xl text-[15px] font-medium text-ios-text border-none cursor-pointer active:bg-gray-200 transition-colors",children:[O.jsx(Pre,{size:18}),"Data importeren"]}),(tt||Se)&&O.jsx("p",{className:"text-[13px] text-center text-ios-secondary",children:tt||Se}),O.jsx("p",{className:"text-[12px] text-ios-secondary text-center",children:"Maak een backup van al je data of herstel van een eerdere backup"})]})]}),hq()&&O.jsxs("button",{onClick:()=>t("/admin"),className:"flex items-center gap-3 w-full p-4 bg-white dark:bg-ios-card rounded-2xl shadow-sm border-none cursor-pointer active:bg-gray-50 text-left",children:[O.jsx("div",{className:"w-10 h-10 rounded-full bg-ios-blue/10 flex items-center justify-center",children:O.jsx(gre,{size:20,className:"text-ios-blue"})}),O.jsxs("div",{className:"flex-1",children:[O.jsx("div",{className:"text-[15px] font-semibold",children:"Admin Panel"}),O.jsx("div",{className:"text-[13px] text-ios-secondary",children:"Invite codes en gebruikersbeheer"})]})]}),O.jsxs(Js,{variant:"ghost",fullWidth:!0,onClick:()=>am.getState().logout(),className:"flex items-center justify-center gap-2 text-ios-destructive",children:[O.jsx(LL,{size:18}),"Uitloggen"]})]})}):null}function Y2e(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:l}=t;let f,m,p;const b=async(T=!0)=>{await m,p?.()};async function _(){if("serviceWorker"in navigator){if(f=await NS(async()=>{const{Workbox:T}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:T}},[]).then(({Workbox:T})=>new T("/sw.js",{scope:"/",type:"classic"})).catch(T=>{l?.(T)}),!f)return;p=()=>{f?.messageSkipWaiting()};{let T=!1;const N=()=>{T=!0,f?.addEventListener("controlling",j=>{j.isUpdate&&window.location.reload()}),n?.()};f.addEventListener("installed",j=>{typeof j.isUpdate>"u"?typeof j.isExternal<"u"&&j.isExternal?N():!T&&r?.():j.isUpdate||r?.()}),f.addEventListener("waiting",N)}f.register({immediate:e}).then(T=>{a?a("/sw.js",T):i?.(T)}).catch(T=>{l?.(T)})}}return m=_(),b}function X2e(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:l}=t,[f,m]=D.useState(!1),[p,b]=D.useState(!1),[_]=D.useState(()=>Y2e({immediate:e,onOfflineReady(){b(!0),r?.()},onNeedRefresh(){m(!0),n?.()},onRegistered:i,onRegisteredSW:a,onRegisterError:l}));return{needRefresh:[f,m],offlineReady:[p,b],updateServiceWorker:_}}function Q2e(){const{user:t,isAuthLoading:e}=am(),{profile:n,isLoading:r,loadProfile:i}=cd(),a=D.useRef(!1);return D.useEffect(()=>{if(!t){a.current=!1;return}(async()=>{try{const f=to(ma,"users",t.uid,"profile","data"),m=await Gx(f);if(m.exists()&&m.data().disabled===!0){am.getState().logout();return}}catch{}if(t.email)try{const{setDoc:f}=await NS(async()=>{const{setDoc:b}=await Promise.resolve().then(()=>nJ);return{setDoc:b}},void 0),m=to(ma,"users",t.uid);await f(m,{email:t.email,lastLogin:new Date().toISOString()},{merge:!0});const p=to(ma,"users",t.uid,"profile","data");await f(p,{email:t.email},{merge:!0})}catch{}if(await i(),!a.current){a.current=!0;try{await Cte(t.uid)?await i():CL(t.uid).catch(m=>console.warn("[Sync] Push all failed:",m))}catch(f){console.warn("[Sync] Initial sync failed:",f)}}})()},[t,i]),e?O.jsx("div",{className:"flex items-center justify-center h-full",children:O.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-primary border-t-transparent animate-spin"})}):t?r?O.jsx("div",{className:"flex items-center justify-center h-full",children:O.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-primary border-t-transparent animate-spin"})}):n?.onboardingComplete?O.jsxs(O.Fragment,{children:[O.jsxs(zH,{children:[O.jsx(iu,{path:"/",element:O.jsx(Mae,{})}),O.jsx(iu,{path:"/search",element:O.jsx(Hae,{})}),O.jsx(iu,{path:"/scan",element:O.jsx(Ase,{})}),O.jsx(iu,{path:"/statistics",element:O.jsx(H2e,{})}),O.jsx(iu,{path:"/ai-chat",element:O.jsx(K2e,{})}),O.jsx(iu,{path:"/profile",element:O.jsx($2e,{})}),O.jsx(iu,{path:"/admin",element:O.jsx(W2e,{})}),O.jsx(iu,{path:"*",element:O.jsx(FH,{to:"/",replace:!0})})]}),O.jsx(Fre,{})]}):O.jsx(Wre,{}):O.jsx(Ure,{})}function Z2e(){const[t,e]=D.useState(!navigator.onLine);return D.useEffect(()=>{const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("offline",n),window.addEventListener("online",r),()=>{window.removeEventListener("offline",n),window.removeEventListener("online",r)}},[]),t?O.jsxs("div",{className:"fixed top-0 left-0 right-0 z-[100] bg-ios-warning text-white text-center py-1.5 text-[13px] font-medium flex items-center justify-center gap-1.5",style:{paddingTop:"calc(6px + var(--safe-area-top))"},children:[O.jsx(jre,{size:14}),"Geen internetverbinding  zoeken werkt offline niet"]}):null}function J2e(){const{needRefresh:[t],updateServiceWorker:e}=X2e();return t?O.jsxs("div",{className:"fixed bottom-[70px] left-4 right-4 z-[100] bg-ios-blue text-white rounded-2xl px-4 py-3 flex items-center justify-between shadow-lg animate-slide-up",style:{marginBottom:"var(--safe-area-bottom)"},children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(ire,{size:16}),O.jsx("span",{className:"text-[14px] font-medium",children:"Update beschikbaar"})]}),O.jsx("button",{onClick:()=>e(!0),className:"bg-white text-ios-blue px-3 py-1.5 rounded-lg text-[13px] font-semibold border-none cursor-pointer",children:"Bijwerken"})]}):null}const eEe=[{hour:8,minute:0,label:"Tijd om je ontbijt te loggen!"},{hour:12,minute:30,label:"Tijd om je lunch te loggen!"},{hour:18,minute:0,label:"Tijd om je avondeten te loggen!"}],tEe=[8,10,12,14,16,18,20,22];function o5(t,e){"Notification"in window&&Notification.permission==="granted"&&new Notification(t,{body:e,icon:"/icons/icon-192x192.png"})}function nEe(){D.useEffect(()=>{const t=()=>{const n=new Date,r=n.getHours(),i=n.getMinutes(),a=`${n.getFullYear()}-${n.getMonth()}-${n.getDate()}`;if(localStorage.getItem("bb_meal_reminder")==="true"){for(const l of eEe)if(r===l.hour&&i>=l.minute){const f=`bb_notif_meal_${l.hour}_${a}`;localStorage.getItem(f)||(o5("BodyBalance",l.label),localStorage.setItem(f,"1"))}}if(localStorage.getItem("bb_water_reminder")==="true"&&tEe.includes(r)){const l=`bb_notif_water_${r}_${a}`;localStorage.getItem(l)||(o5("BodyBalance","Vergeet niet water te drinken!"),localStorage.setItem(l,"1"))}for(let l=localStorage.length-1;l>=0;l--){const f=localStorage.key(l);f?.startsWith("bb_notif_")&&!f.endsWith(a)&&localStorage.removeItem(f)}};t();const e=setInterval(t,6e4);return()=>clearInterval(e)},[])}function l5(){const t=localStorage.getItem("bb_theme")||"auto",e=window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="dark"||t==="auto"&&e;document.documentElement.classList.toggle("dark",n)}function rEe(){D.useEffect(()=>{l5();const t=window.matchMedia("(prefers-color-scheme: dark)"),e=()=>l5();return t.addEventListener("change",e),window.addEventListener("storage",e),window.addEventListener("themechange",e),()=>{t.removeEventListener("change",e),window.removeEventListener("storage",e),window.removeEventListener("themechange",e)}},[])}function iEe(){return rEe(),nEe(),O.jsxs(dK,{children:[O.jsx(Z2e,{}),O.jsx(J2e,{}),O.jsx(Q2e,{})]})}zG.createRoot(document.getElementById("root")).render(O.jsx(D.StrictMode,{children:O.jsx(iEe,{})}));
