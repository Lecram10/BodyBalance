function kG(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Vg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var C_={exports:{}},_g={};var gP;function MG(){if(gP)return _g;gP=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var l=null;if(a!==void 0&&(l=""+a),i.key!==void 0&&(l=""+i.key),"key"in i){a={};for(var f in i)f!=="key"&&(a[f]=i[f])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:l,ref:i!==void 0?i:null,props:a}}return _g.Fragment=e,_g.jsx=n,_g.jsxs=n,_g}var pP;function jG(){return pP||(pP=1,C_.exports=MG()),C_.exports}var O=jG(),O_={exports:{}},en={};var yP;function LG(){if(yP)return en;yP=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function N(me){return me===null||typeof me!="object"?null:(me=T&&me[T]||me["@@iterator"],typeof me=="function"?me:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,L={};function z(me,Se,Xe){this.props=me,this.context=Se,this.refs=L,this.updater=Xe||j}z.prototype.isReactComponent={},z.prototype.setState=function(me,Se){if(typeof me!="object"&&typeof me!="function"&&me!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,me,Se,"setState")},z.prototype.forceUpdate=function(me){this.updater.enqueueForceUpdate(this,me,"forceUpdate")};function $(){}$.prototype=z.prototype;function K(me,Se,Xe){this.props=me,this.context=Se,this.refs=L,this.updater=Xe||j}var ee=K.prototype=new $;ee.constructor=K,M(ee,z.prototype),ee.isPureReactComponent=!0;var ue=Array.isArray;function Z(){}var V={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function U(me,Se,Xe){var Ve=Xe.ref;return{$$typeof:t,type:me,key:Se,ref:Ve!==void 0?Ve:null,props:Xe}}function ae(me,Se){return U(me.type,Se,me.props)}function ie(me){return typeof me=="object"&&me!==null&&me.$$typeof===t}function X(me){var Se={"=":"=0",":":"=2"};return"$"+me.replace(/[=:]/g,function(Xe){return Se[Xe]})}var J=/\/+/g;function xe(me,Se){return typeof me=="object"&&me!==null&&me.key!=null?X(""+me.key):Se.toString(36)}function de(me){switch(me.status){case"fulfilled":return me.value;case"rejected":throw me.reason;default:switch(typeof me.status=="string"?me.then(Z,Z):(me.status="pending",me.then(function(Se){me.status==="pending"&&(me.status="fulfilled",me.value=Se)},function(Se){me.status==="pending"&&(me.status="rejected",me.reason=Se)})),me.status){case"fulfilled":return me.value;case"rejected":throw me.reason}}throw me}function ye(me,Se,Xe,Ve,pt){var $e=typeof me;($e==="undefined"||$e==="boolean")&&(me=null);var yt=!1;if(me===null)yt=!0;else switch($e){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(me.$$typeof){case t:case e:yt=!0;break;case b:return yt=me._init,ye(yt(me._payload),Se,Xe,Ve,pt)}}if(yt)return pt=pt(me),yt=Ve===""?"."+xe(me,0):Ve,ue(pt)?(Xe="",yt!=null&&(Xe=yt.replace(J,"$&/")+"/"),ye(pt,Se,Xe,"",function(Ye){return Ye})):pt!=null&&(ie(pt)&&(pt=ae(pt,Xe+(pt.key==null||me&&me.key===pt.key?"":(""+pt.key).replace(J,"$&/")+"/")+yt)),Se.push(pt)),1;yt=0;var ut=Ve===""?".":Ve+":";if(ue(me))for(var Ne=0;Ne<me.length;Ne++)Ve=me[Ne],$e=ut+xe(Ve,Ne),yt+=ye(Ve,Se,Xe,$e,pt);else if(Ne=N(me),typeof Ne=="function")for(me=Ne.call(me),Ne=0;!(Ve=me.next()).done;)Ve=Ve.value,$e=ut+xe(Ve,Ne++),yt+=ye(Ve,Se,Xe,$e,pt);else if($e==="object"){if(typeof me.then=="function")return ye(de(me),Se,Xe,Ve,pt);throw Se=String(me),Error("Objects are not valid as a React child (found: "+(Se==="[object Object]"?"object with keys {"+Object.keys(me).join(", ")+"}":Se)+"). If you meant to render a collection of children, use an array instead.")}return yt}function _e(me,Se,Xe){if(me==null)return me;var Ve=[],pt=0;return ye(me,Ve,"","",function($e){return Se.call(Xe,$e,pt++)}),Ve}function qe(me){if(me._status===-1){var Se=me._result;Se=Se(),Se.then(function(Xe){(me._status===0||me._status===-1)&&(me._status=1,me._result=Xe)},function(Xe){(me._status===0||me._status===-1)&&(me._status=2,me._result=Xe)}),me._status===-1&&(me._status=0,me._result=Se)}if(me._status===1)return me._result.default;throw me._result}var ze=typeof reportError=="function"?reportError:function(me){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof me=="object"&&me!==null&&typeof me.message=="string"?String(me.message):String(me),error:me});if(!window.dispatchEvent(Se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",me);return}console.error(me)},et={map:_e,forEach:function(me,Se,Xe){_e(me,function(){Se.apply(this,arguments)},Xe)},count:function(me){var Se=0;return _e(me,function(){Se++}),Se},toArray:function(me){return _e(me,function(Se){return Se})||[]},only:function(me){if(!ie(me))throw Error("React.Children.only expected to receive a single React element child.");return me}};return en.Activity=_,en.Children=et,en.Component=z,en.Fragment=n,en.Profiler=i,en.PureComponent=K,en.StrictMode=r,en.Suspense=m,en.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,en.__COMPILER_RUNTIME={__proto__:null,c:function(me){return V.H.useMemoCache(me)}},en.cache=function(me){return function(){return me.apply(null,arguments)}},en.cacheSignal=function(){return null},en.cloneElement=function(me,Se,Xe){if(me==null)throw Error("The argument must be a React element, but you passed "+me+".");var Ve=M({},me.props),pt=me.key;if(Se!=null)for($e in Se.key!==void 0&&(pt=""+Se.key),Se)!W.call(Se,$e)||$e==="key"||$e==="__self"||$e==="__source"||$e==="ref"&&Se.ref===void 0||(Ve[$e]=Se[$e]);var $e=arguments.length-2;if($e===1)Ve.children=Xe;else if(1<$e){for(var yt=Array($e),ut=0;ut<$e;ut++)yt[ut]=arguments[ut+2];Ve.children=yt}return U(me.type,pt,Ve)},en.createContext=function(me){return me={$$typeof:l,_currentValue:me,_currentValue2:me,_threadCount:0,Provider:null,Consumer:null},me.Provider=me,me.Consumer={$$typeof:a,_context:me},me},en.createElement=function(me,Se,Xe){var Ve,pt={},$e=null;if(Se!=null)for(Ve in Se.key!==void 0&&($e=""+Se.key),Se)W.call(Se,Ve)&&Ve!=="key"&&Ve!=="__self"&&Ve!=="__source"&&(pt[Ve]=Se[Ve]);var yt=arguments.length-2;if(yt===1)pt.children=Xe;else if(1<yt){for(var ut=Array(yt),Ne=0;Ne<yt;Ne++)ut[Ne]=arguments[Ne+2];pt.children=ut}if(me&&me.defaultProps)for(Ve in yt=me.defaultProps,yt)pt[Ve]===void 0&&(pt[Ve]=yt[Ve]);return U(me,$e,pt)},en.createRef=function(){return{current:null}},en.forwardRef=function(me){return{$$typeof:f,render:me}},en.isValidElement=ie,en.lazy=function(me){return{$$typeof:b,_payload:{_status:-1,_result:me},_init:qe}},en.memo=function(me,Se){return{$$typeof:p,type:me,compare:Se===void 0?null:Se}},en.startTransition=function(me){var Se=V.T,Xe={};V.T=Xe;try{var Ve=me(),pt=V.S;pt!==null&&pt(Xe,Ve),typeof Ve=="object"&&Ve!==null&&typeof Ve.then=="function"&&Ve.then(Z,ze)}catch($e){ze($e)}finally{Se!==null&&Xe.types!==null&&(Se.types=Xe.types),V.T=Se}},en.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},en.use=function(me){return V.H.use(me)},en.useActionState=function(me,Se,Xe){return V.H.useActionState(me,Se,Xe)},en.useCallback=function(me,Se){return V.H.useCallback(me,Se)},en.useContext=function(me){return V.H.useContext(me)},en.useDebugValue=function(){},en.useDeferredValue=function(me,Se){return V.H.useDeferredValue(me,Se)},en.useEffect=function(me,Se){return V.H.useEffect(me,Se)},en.useEffectEvent=function(me){return V.H.useEffectEvent(me)},en.useId=function(){return V.H.useId()},en.useImperativeHandle=function(me,Se,Xe){return V.H.useImperativeHandle(me,Se,Xe)},en.useInsertionEffect=function(me,Se){return V.H.useInsertionEffect(me,Se)},en.useLayoutEffect=function(me,Se){return V.H.useLayoutEffect(me,Se)},en.useMemo=function(me,Se){return V.H.useMemo(me,Se)},en.useOptimistic=function(me,Se){return V.H.useOptimistic(me,Se)},en.useReducer=function(me,Se,Xe){return V.H.useReducer(me,Se,Xe)},en.useRef=function(me){return V.H.useRef(me)},en.useState=function(me){return V.H.useState(me)},en.useSyncExternalStore=function(me,Se,Xe){return V.H.useSyncExternalStore(me,Se,Xe)},en.useTransition=function(){return V.H.useTransition()},en.version="19.2.4",en}var vP;function gm(){return vP||(vP=1,O_.exports=LG()),O_.exports}var D=gm();const zg=Rl(D),BG=kG({__proto__:null,default:zg},[D]);var N_={exports:{}},Eg={},P_={exports:{}},R_={};var xP;function FG(){return xP||(xP=1,(function(t){function e(ye,_e){var qe=ye.length;ye.push(_e);e:for(;0<qe;){var ze=qe-1>>>1,et=ye[ze];if(0<i(et,_e))ye[ze]=_e,ye[qe]=et,qe=ze;else break e}}function n(ye){return ye.length===0?null:ye[0]}function r(ye){if(ye.length===0)return null;var _e=ye[0],qe=ye.pop();if(qe!==_e){ye[0]=qe;e:for(var ze=0,et=ye.length,me=et>>>1;ze<me;){var Se=2*(ze+1)-1,Xe=ye[Se],Ve=Se+1,pt=ye[Ve];if(0>i(Xe,qe))Ve<et&&0>i(pt,Xe)?(ye[ze]=pt,ye[Ve]=qe,ze=Ve):(ye[ze]=Xe,ye[Se]=qe,ze=Se);else if(Ve<et&&0>i(pt,qe))ye[ze]=pt,ye[Ve]=qe,ze=Ve;else break e}}return _e}function i(ye,_e){var qe=ye.sortIndex-_e.sortIndex;return qe!==0?qe:ye.id-_e.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,f=l.now();t.unstable_now=function(){return l.now()-f}}var m=[],p=[],b=1,_=null,T=3,N=!1,j=!1,M=!1,L=!1,z=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function ee(ye){for(var _e=n(p);_e!==null;){if(_e.callback===null)r(p);else if(_e.startTime<=ye)r(p),_e.sortIndex=_e.expirationTime,e(m,_e);else break;_e=n(p)}}function ue(ye){if(M=!1,ee(ye),!j)if(n(m)!==null)j=!0,Z||(Z=!0,X());else{var _e=n(p);_e!==null&&de(ue,_e.startTime-ye)}}var Z=!1,V=-1,W=5,U=-1;function ae(){return L?!0:!(t.unstable_now()-U<W)}function ie(){if(L=!1,Z){var ye=t.unstable_now();U=ye;var _e=!0;try{e:{j=!1,M&&(M=!1,$(V),V=-1),N=!0;var qe=T;try{t:{for(ee(ye),_=n(m);_!==null&&!(_.expirationTime>ye&&ae());){var ze=_.callback;if(typeof ze=="function"){_.callback=null,T=_.priorityLevel;var et=ze(_.expirationTime<=ye);if(ye=t.unstable_now(),typeof et=="function"){_.callback=et,ee(ye),_e=!0;break t}_===n(m)&&r(m),ee(ye)}else r(m);_=n(m)}if(_!==null)_e=!0;else{var me=n(p);me!==null&&de(ue,me.startTime-ye),_e=!1}}break e}finally{_=null,T=qe,N=!1}_e=void 0}}finally{_e?X():Z=!1}}}var X;if(typeof K=="function")X=function(){K(ie)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,xe=J.port2;J.port1.onmessage=ie,X=function(){xe.postMessage(null)}}else X=function(){z(ie,0)};function de(ye,_e){V=z(function(){ye(t.unstable_now())},_e)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ye){ye.callback=null},t.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<ye?Math.floor(1e3/ye):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(ye){switch(T){case 1:case 2:case 3:var _e=3;break;default:_e=T}var qe=T;T=_e;try{return ye()}finally{T=qe}},t.unstable_requestPaint=function(){L=!0},t.unstable_runWithPriority=function(ye,_e){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var qe=T;T=ye;try{return _e()}finally{T=qe}},t.unstable_scheduleCallback=function(ye,_e,qe){var ze=t.unstable_now();switch(typeof qe=="object"&&qe!==null?(qe=qe.delay,qe=typeof qe=="number"&&0<qe?ze+qe:ze):qe=ze,ye){case 1:var et=-1;break;case 2:et=250;break;case 5:et=1073741823;break;case 4:et=1e4;break;default:et=5e3}return et=qe+et,ye={id:b++,callback:_e,priorityLevel:ye,startTime:qe,expirationTime:et,sortIndex:-1},qe>ze?(ye.sortIndex=qe,e(p,ye),n(m)===null&&ye===n(p)&&(M?($(V),V=-1):M=!0,de(ue,qe-ze))):(ye.sortIndex=et,e(m,ye),j||N||(j=!0,Z||(Z=!0,X()))),ye},t.unstable_shouldYield=ae,t.unstable_wrapCallback=function(ye){var _e=T;return function(){var qe=T;T=_e;try{return ye.apply(this,arguments)}finally{T=qe}}}})(R_)),R_}var bP;function VG(){return bP||(bP=1,P_.exports=FG()),P_.exports}var D_={exports:{}},Qa={};var wP;function zG(){if(wP)return Qa;wP=1;var t=gm();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(m,p,b){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:_==null?null:""+_,children:m,containerInfo:p,implementation:b}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Qa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Qa.createPortal=function(m,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(m,p,null,b)},Qa.flushSync=function(m){var p=l.T,b=r.p;try{if(l.T=null,r.p=2,m)return m()}finally{l.T=p,r.p=b,r.d.f()}},Qa.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},Qa.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},Qa.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var b=p.as,_=f(b,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,N=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:N}):b==="script"&&r.d.X(m,{crossOrigin:_,integrity:T,fetchPriority:N,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Qa.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=f(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},Qa.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,_=f(b,p.crossOrigin);r.d.L(m,b,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Qa.preloadModule=function(m,p){if(typeof m=="string")if(p){var b=f(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},Qa.requestFormReset=function(m){r.d.r(m)},Qa.unstable_batchedUpdates=function(m,p){return m(p)},Qa.useFormState=function(m,p,b){return l.H.useFormState(m,p,b)},Qa.useFormStatus=function(){return l.H.useHostTransitionStatus()},Qa.version="19.2.4",Qa}var _P;function f5(){if(_P)return D_.exports;_P=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),D_.exports=zG(),D_.exports}var EP;function UG(){if(EP)return Eg;EP=1;var t=VG(),e=gm(),n=f5();function r(s){var u="https://react.dev/errors/"+s;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+s+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var u=s,g=s;if(s.alternate)for(;u.return;)u=u.return;else{s=u;do u=s,(u.flags&4098)!==0&&(g=u.return),s=u.return;while(s)}return u.tag===3?g:null}function l(s){if(s.tag===13){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function f(s){if(s.tag===31){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function m(s){if(a(s)!==s)throw Error(r(188))}function p(s){var u=s.alternate;if(!u){if(u=a(s),u===null)throw Error(r(188));return u!==s?null:s}for(var g=s,w=u;;){var C=g.return;if(C===null)break;var R=C.alternate;if(R===null){if(w=C.return,w!==null){g=w;continue}break}if(C.child===R.child){for(R=C.child;R;){if(R===g)return m(C),s;if(R===w)return m(C),u;R=R.sibling}throw Error(r(188))}if(g.return!==w.return)g=C,w=R;else{for(var q=!1,te=C.child;te;){if(te===g){q=!0,g=C,w=R;break}if(te===w){q=!0,w=C,g=R;break}te=te.sibling}if(!q){for(te=R.child;te;){if(te===g){q=!0,g=R,w=C;break}if(te===w){q=!0,w=R,g=C;break}te=te.sibling}if(!q)throw Error(r(189))}}if(g.alternate!==w)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?s:u}function b(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s;for(s=s.child;s!==null;){if(u=b(s),u!==null)return u;s=s.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),K=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function X(s){return s===null||typeof s!="object"?null:(s=ie&&s[ie]||s["@@iterator"],typeof s=="function"?s:null)}var J=Symbol.for("react.client.reference");function xe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===J?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case M:return"Fragment";case z:return"Profiler";case L:return"StrictMode";case ue:return"Suspense";case Z:return"SuspenseList";case U:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case j:return"Portal";case K:return s.displayName||"Context";case $:return(s._context.displayName||"Context")+".Consumer";case ee:var u=s.render;return s=s.displayName,s||(s=u.displayName||u.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case V:return u=s.displayName||null,u!==null?u:xe(s.type)||"Memo";case W:u=s._payload,s=s._init;try{return xe(s(u))}catch{}}return null}var de=Array.isArray,ye=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qe={pending:!1,data:null,method:null,action:null},ze=[],et=-1;function me(s){return{current:s}}function Se(s){0>et||(s.current=ze[et],ze[et]=null,et--)}function Xe(s,u){et++,ze[et]=s.current,s.current=u}var Ve=me(null),pt=me(null),$e=me(null),yt=me(null);function ut(s,u){switch(Xe($e,u),Xe(pt,s),Xe(Ve,null),u.nodeType){case 9:case 11:s=(s=u.documentElement)&&(s=s.namespaceURI)?BN(s):0;break;default:if(s=u.tagName,u=u.namespaceURI)u=BN(u),s=FN(u,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Se(Ve),Xe(Ve,s)}function Ne(){Se(Ve),Se(pt),Se($e)}function Ye(s){s.memoizedState!==null&&Xe(yt,s);var u=Ve.current,g=FN(u,s.type);u!==g&&(Xe(pt,s),Xe(Ve,g))}function _t(s){pt.current===s&&(Se(Ve),Se(pt)),yt.current===s&&(Se(yt),vg._currentValue=qe)}var Fe,Rt;function Wt(s){if(Fe===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);Fe=u&&u[1]||"",Rt=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fe+s+Rt}var mn=!1;function Wn(s,u){if(!s||mn)return"";mn=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(u){var Qe=function(){throw Error()};if(Object.defineProperty(Qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Qe,[])}catch(Be){var je=Be}Reflect.construct(s,[],Qe)}else{try{Qe.call()}catch(Be){je=Be}s.call(Qe.prototype)}}else{try{throw Error()}catch(Be){je=Be}(Qe=s())&&typeof Qe.catch=="function"&&Qe.catch(function(){})}}catch(Be){if(Be&&je&&typeof Be.stack=="string")return[Be.stack,je.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=w.DetermineComponentFrameRoot(),q=R[0],te=R[1];if(q&&te){var pe=q.split(`
`),Re=te.split(`
`);for(C=w=0;w<pe.length&&!pe[w].includes("DetermineComponentFrameRoot");)w++;for(;C<Re.length&&!Re[C].includes("DetermineComponentFrameRoot");)C++;if(w===pe.length||C===Re.length)for(w=pe.length-1,C=Re.length-1;1<=w&&0<=C&&pe[w]!==Re[C];)C--;for(;1<=w&&0<=C;w--,C--)if(pe[w]!==Re[C]){if(w!==1||C!==1)do if(w--,C--,0>C||pe[w]!==Re[C]){var Ue=`
`+pe[w].replace(" at new "," at ");return s.displayName&&Ue.includes("<anonymous>")&&(Ue=Ue.replace("<anonymous>",s.displayName)),Ue}while(1<=w&&0<=C);break}}}finally{mn=!1,Error.prepareStackTrace=g}return(g=s?s.displayName||s.name:"")?Wt(g):""}function st(s,u){switch(s.tag){case 26:case 27:case 5:return Wt(s.type);case 16:return Wt("Lazy");case 13:return s.child!==u&&u!==null?Wt("Suspense Fallback"):Wt("Suspense");case 19:return Wt("SuspenseList");case 0:case 15:return Wn(s.type,!1);case 11:return Wn(s.type.render,!1);case 1:return Wn(s.type,!0);case 31:return Wt("Activity");default:return""}}function zt(s){try{var u="",g=null;do u+=st(s,g),g=s,s=s.return;while(s);return u}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}var Et=Object.prototype.hasOwnProperty,Zt=t.unstable_scheduleCallback,at=t.unstable_cancelCallback,na=t.unstable_shouldYield,zs=t.unstable_requestPaint,hr=t.unstable_now,ba=t.unstable_getCurrentPriorityLevel,$n=t.unstable_ImmediatePriority,Fa=t.unstable_UserBlockingPriority,bi=t.unstable_NormalPriority,Lr=t.unstable_LowPriority,Ro=t.unstable_IdlePriority,gs=t.log,ps=t.unstable_setDisableYieldValue,In=null,rt=null;function cn(s){if(typeof gs=="function"&&ps(s),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(In,s)}catch{}}var Ze=Math.clz32?Math.clz32:Us,Bn=Math.log,Oi=Math.LN2;function Us(s){return s>>>=0,s===0?32:31-(Bn(s)/Oi|0)|0}var ft=256,tn=262144,Yn=4194304;function wa(s){var u=s&42;if(u!==0)return u;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Va(s,u,g){var w=s.pendingLanes;if(w===0)return 0;var C=0,R=s.suspendedLanes,q=s.pingedLanes;s=s.warmLanes;var te=w&134217727;return te!==0?(w=te&~R,w!==0?C=wa(w):(q&=te,q!==0?C=wa(q):g||(g=te&~s,g!==0&&(C=wa(g))))):(te=w&~R,te!==0?C=wa(te):q!==0?C=wa(q):g||(g=w&~s,g!==0&&(C=wa(g)))),C===0?0:u!==0&&u!==C&&(u&R)===0&&(R=C&-C,g=u&-u,R>=g||R===32&&(g&4194048)!==0)?u:C}function Er(s,u){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&u)===0}function Ll(s,u){switch(s){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ii(){var s=Yn;return Yn<<=1,(Yn&62914560)===0&&(Yn=4194304),s}function Hr(s){for(var u=[],g=0;31>g;g++)u.push(s);return u}function qi(s,u){s.pendingLanes|=u,u!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ra(s,u,g,w,C,R){var q=s.pendingLanes;s.pendingLanes=g,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=g,s.entangledLanes&=g,s.errorRecoveryDisabledLanes&=g,s.shellSuspendCounter=0;var te=s.entanglements,pe=s.expirationTimes,Re=s.hiddenUpdates;for(g=q&~g;0<g;){var Ue=31-Ze(g),Qe=1<<Ue;te[Ue]=0,pe[Ue]=-1;var je=Re[Ue];if(je!==null)for(Re[Ue]=null,Ue=0;Ue<je.length;Ue++){var Be=je[Ue];Be!==null&&(Be.lane&=-536870913)}g&=~Qe}w!==0&&ys(s,w,0),R!==0&&C===0&&s.tag!==0&&(s.suspendedLanes|=R&~(q&~u))}function ys(s,u,g){s.pendingLanes|=u,s.suspendedLanes&=~u;var w=31-Ze(u);s.entangledLanes|=u,s.entanglements[w]=s.entanglements[w]|1073741824|g&261930}function _n(s,u){var g=s.entangledLanes|=u;for(s=s.entanglements;g;){var w=31-Ze(g),C=1<<w;C&u|s[w]&u&&(s[w]|=u),g&=~C}}function mr(s,u){var g=u&-u;return g=(g&42)!==0?1:Kr(g),(g&(s.suspendedLanes|u))!==0?0:g}function Kr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ci(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function fi(){var s=_e.p;return s!==0?s:(s=window.event,s===void 0?32:lP(s.type))}function dt(s,u){var g=_e.p;try{return _e.p=s,u()}finally{_e.p=g}}var Ni=Math.random().toString(36).slice(2),Fn="__reactFiber$"+Ni,gn="__reactProps$"+Ni,Nr="__reactContainer$"+Ni,za="__reactEvents$"+Ni,Zo="__reactListeners$"+Ni,Wr="__reactHandles$"+Ni,Bl="__reactResources$"+Ni,Pi="__reactMarker$"+Ni;function Ri(s){delete s[Fn],delete s[gn],delete s[za],delete s[Zo],delete s[Wr]}function Qn(s){var u=s[Fn];if(u)return u;for(var g=s.parentNode;g;){if(u=g[Nr]||g[Fn]){if(g=u.alternate,u.child!==null||g!==null&&g.child!==null)for(s=KN(s);s!==null;){if(g=s[Fn])return g;s=KN(s)}return u}s=g,g=s.parentNode}return null}function Mt(s){if(s=s[Fn]||s[Nr]){var u=s.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return s}return null}function $r(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s.stateNode;throw Error(r(33))}function rr(s){var u=s[Bl];return u||(u=s[Bl]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Ar(s){s[Pi]=!0}var Ge=new Set,uo={};function Cn(s,u){wi(s,u),wi(s+"Capture",u)}function wi(s,u){for(uo[s]=u,s=0;s<u.length;s++)Ge.add(u[s])}var ss=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yn={},ln={};function nn(s){return Et.call(ln,s)?!0:Et.call(yn,s)?!1:ss.test(s)?ln[s]=!0:(yn[s]=!0,!1)}function Qt(s,u,g){if(nn(u))if(g===null)s.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":s.removeAttribute(u);return;case"boolean":var w=u.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){s.removeAttribute(u);return}}s.setAttribute(u,""+g)}}function Di(s,u,g){if(g===null)s.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttribute(u,""+g)}}function Sr(s,u,g,w){if(w===null)s.removeAttribute(g);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(g);return}s.setAttributeNS(u,g,""+w)}}function rn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ai(s){var u=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Jo(s,u,g){var w=Object.getOwnPropertyDescriptor(s.constructor.prototype,u);if(!s.hasOwnProperty(u)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var C=w.get,R=w.set;return Object.defineProperty(s,u,{configurable:!0,get:function(){return C.call(this)},set:function(q){g=""+q,R.call(this,q)}}),Object.defineProperty(s,u,{enumerable:w.enumerable}),{getValue:function(){return g},setValue:function(q){g=""+q},stopTracking:function(){s._valueTracker=null,delete s[u]}}}}function Vt(s){if(!s._valueTracker){var u=ai(s)?"checked":"value";s._valueTracker=Jo(s,u,""+s[u])}}function Gi(s){if(!s)return!1;var u=s._valueTracker;if(!u)return!0;var g=u.getValue(),w="";return s&&(w=ai(s)?s.checked?"true":"false":s.value),s=w,s!==g?(u.setValue(s),!0):!1}function vn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ki=/[\n"\\]/g;function $t(s){return s.replace(ki,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Zn(s,u,g,w,C,R,q,te){s.name="",q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?s.type=q:s.removeAttribute("type"),u!=null?q==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+rn(u)):s.value!==""+rn(u)&&(s.value=""+rn(u)):q!=="submit"&&q!=="reset"||s.removeAttribute("value"),u!=null?ce(s,q,rn(u)):g!=null?ce(s,q,rn(g)):w!=null&&s.removeAttribute("value"),C==null&&R!=null&&(s.defaultChecked=!!R),C!=null&&(s.checked=C&&typeof C!="function"&&typeof C!="symbol"),te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?s.name=""+rn(te):s.removeAttribute("name")}function Te(s,u,g,w,C,R,q,te){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(s.type=R),u!=null||g!=null){if(!(R!=="submit"&&R!=="reset"||u!=null)){Vt(s);return}g=g!=null?""+rn(g):"",u=u!=null?""+rn(u):g,te||u===s.value||(s.value=u),s.defaultValue=u}w=w??C,w=typeof w!="function"&&typeof w!="symbol"&&!!w,s.checked=te?s.checked:!!w,s.defaultChecked=!!w,q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(s.name=q),Vt(s)}function ce(s,u,g){u==="number"&&vn(s.ownerDocument)===s||s.defaultValue===""+g||(s.defaultValue=""+g)}function wt(s,u,g,w){if(s=s.options,u){u={};for(var C=0;C<g.length;C++)u["$"+g[C]]=!0;for(g=0;g<s.length;g++)C=u.hasOwnProperty("$"+s[g].value),s[g].selected!==C&&(s[g].selected=C),C&&w&&(s[g].defaultSelected=!0)}else{for(g=""+rn(g),u=null,C=0;C<s.length;C++){if(s[C].value===g){s[C].selected=!0,w&&(s[C].defaultSelected=!0);return}u!==null||s[C].disabled||(u=s[C])}u!==null&&(u.selected=!0)}}function Pr(s,u,g){if(u!=null&&(u=""+rn(u),u!==s.value&&(s.value=u),g==null)){s.defaultValue!==u&&(s.defaultValue=u);return}s.defaultValue=g!=null?""+rn(g):""}function Rr(s,u,g,w){if(u==null){if(w!=null){if(g!=null)throw Error(r(92));if(de(w)){if(1<w.length)throw Error(r(93));w=w[0]}g=w}g==null&&(g=""),u=g}g=rn(u),s.defaultValue=g,w=s.textContent,w===g&&w!==""&&w!==null&&(s.value=w),Vt(s)}function Hi(s,u){if(u){var g=s.firstChild;if(g&&g===s.lastChild&&g.nodeType===3){g.nodeValue=u;return}}s.textContent=u}var el=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ut(s,u,g){var w=u.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?w?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="":w?s.setProperty(u,g):typeof g!="number"||g===0||el.has(u)?u==="float"?s.cssFloat=g:s[u]=(""+g).trim():s[u]=g+"px"}function Nt(s,u,g){if(u!=null&&typeof u!="object")throw Error(r(62));if(s=s.style,g!=null){for(var w in g)!g.hasOwnProperty(w)||u!=null&&u.hasOwnProperty(w)||(w.indexOf("--")===0?s.setProperty(w,""):w==="float"?s.cssFloat="":s[w]="");for(var C in u)w=u[C],u.hasOwnProperty(C)&&g[C]!==w&&Ut(s,C,w)}else for(var R in u)u.hasOwnProperty(R)&&Ut(s,R,u[R])}function Vn(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _a(s){return Yr.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function _i(){}var ia=null;function Ea(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Jn=null,Mn=null;function Tr(s){var u=Mt(s);if(u&&(s=u.stateNode)){var g=s[gn]||null;e:switch(s=u.stateNode,u.type){case"input":if(Zn(s,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),u=g.name,g.type==="radio"&&u!=null){for(g=s;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+$t(""+u)+'"][type="radio"]'),u=0;u<g.length;u++){var w=g[u];if(w!==s&&w.form===s.form){var C=w[gn]||null;if(!C)throw Error(r(90));Zn(w,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(u=0;u<g.length;u++)w=g[u],w.form===s.form&&Gi(w)}break e;case"textarea":Pr(s,g.value,g.defaultValue);break e;case"select":u=g.value,u!=null&&wt(s,!!g.multiple,u,!1)}}}var Pt=!1;function Ua(s,u,g){if(Pt)return s(u,g);Pt=!0;try{var w=s(u);return w}finally{if(Pt=!1,(Jn!==null||Mn!==null)&&(p1(),Jn&&(u=Jn,s=Mn,Mn=Jn=null,Tr(u),s)))for(u=0;u<s.length;u++)Tr(s[u])}}function Lt(s,u){var g=s.stateNode;if(g===null)return null;var w=g[gn]||null;if(w===null)return null;g=w[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(s=s.type,w=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!w;break e;default:s=!1}if(s)return null;if(g&&typeof g!="function")throw Error(r(231,u,typeof g));return g}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Do=!1;if(xn)try{var an={};Object.defineProperty(an,"passive",{get:function(){Do=!0}}),window.addEventListener("test",an,an),window.removeEventListener("test",an,an)}catch{Do=!1}var Aa=null,qa=null,qs=null;function Sa(){if(qs)return qs;var s,u=qa,g=u.length,w,C="value"in Aa?Aa.value:Aa.textContent,R=C.length;for(s=0;s<g&&u[s]===C[s];s++);var q=g-s;for(w=1;w<=q&&u[g-w]===C[R-w];w++);return qs=C.slice(s,1<w?1-w:void 0)}function Ta(s){var u=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&u===13&&(s=13)):s=u,s===10&&(s=13),32<=s||s===13?s:0}function aa(){return!0}function Ga(){return!1}function ir(s){function u(g,w,C,R,q){this._reactName=g,this._targetInst=C,this.type=w,this.nativeEvent=R,this.target=q,this.currentTarget=null;for(var te in s)s.hasOwnProperty(te)&&(g=s[te],this[te]=g?g(R):R[te]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?aa:Ga,this.isPropagationStopped=Ga,this}return _(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=aa)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=aa)},persist:function(){},isPersistent:aa}),u}var Ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ir=ir(Ia),Ha=_({},Ia,{view:0,detail:0}),Gs=ir(Ha),os,tl,vs,nl=_({},Ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oa,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==vs&&(vs&&s.type==="mousemove"?(os=s.screenX-vs.screenX,tl=s.screenY-vs.screenY):tl=os=0,vs=s),os)},movementY:function(s){return"movementY"in s?s.movementY:tl}}),En=ir(nl),xs=_({},nl,{dataTransfer:0}),co=ir(xs),sa=_({},Ha,{relatedTarget:0}),bs=ir(sa),ke=_({},Ia,{animationName:0,elapsedTime:0,pseudoElement:0}),Yt=ir(ke),Dr=_({},Ia,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ka=ir(Dr),ko=_({},Ia,{data:0}),Wa=ir(ko),rl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},il={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Br={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function er(s){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(s):(s=Br[s])?!!u[s]:!1}function oa(){return er}var fn=_({},Ha,{key:function(s){if(s.key){var u=rl[s.key]||s.key;if(u!=="Unidentified")return u}return s.type==="keypress"?(s=Ta(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?il[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oa,charCode:function(s){return s.type==="keypress"?Ta(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ta(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ws=ir(fn),ls=_({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pn=ir(ls),S=_({},Ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oa}),B=ir(S),H=_({},Ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),se=ir(H),Ae=_({},nl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=ir(Ae),ot=_({},Ia,{newState:0,oldState:0}),Gt=ir(ot),kr=[9,13,27,32],bn=xn&&"CompositionEvent"in window,zn=null;xn&&"documentMode"in document&&(zn=document.documentMode);var Ca=xn&&"TextEvent"in window&&!zn,$a=xn&&(!bn||zn&&8<zn&&11>=zn),di=" ",Oa=!1;function fo(s,u){switch(s){case"keyup":return kr.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _s(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Mo=!1;function Hs(s,u){switch(s){case"compositionend":return _s(u);case"keypress":return u.which!==32?null:(Oa=!0,di);case"textInput":return s=u.data,s===di&&Oa?null:s;default:return null}}function qu(s,u){if(Mo)return s==="compositionend"||!bn&&fo(s,u)?(s=Sa(),qs=qa=Aa=null,Mo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return $a&&u.locale!=="ko"?null:u.data;default:return null}}var Na={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vl(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u==="input"?!!Na[s.type]:u==="textarea"}function Ya(s,u,g,w){Jn?Mn?Mn.push(w):Mn=[w]:Jn=w,u=E1(u,"onChange"),0<u.length&&(g=new Ir("onChange","change",null,g,w),s.push({event:g,listeners:u}))}var al=null,jo=null;function qm(s){RN(s,0)}function zl(s){var u=$r(s);if(Gi(u))return s}function la(s,u){if(s==="change")return u}var Es=!1;if(xn){var ar;if(xn){var As="oninput"in document;if(!As){var sn=document.createElement("div");sn.setAttribute("oninput","return;"),As=typeof sn.oninput=="function"}ar=As}else ar=!1;Es=ar&&(!document.documentMode||9<document.documentMode)}function Ul(){al&&(al.detachEvent("onpropertychange",Y),jo=al=null)}function Y(s){if(s.propertyName==="value"&&zl(jo)){var u=[];Ya(u,jo,s,Ea(s)),Ua(qm,u)}}function o(s,u,g){s==="focusin"?(Ul(),al=u,jo=g,al.attachEvent("onpropertychange",Y)):s==="focusout"&&Ul()}function c(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return zl(jo)}function h(s,u){if(s==="click")return zl(u)}function y(s,u){if(s==="input"||s==="change")return zl(u)}function x(s,u){return s===u&&(s!==0||1/s===1/u)||s!==s&&u!==u}var E=typeof Object.is=="function"?Object.is:x;function d(s,u){if(E(s,u))return!0;if(typeof s!="object"||s===null||typeof u!="object"||u===null)return!1;var g=Object.keys(s),w=Object.keys(u);if(g.length!==w.length)return!1;for(w=0;w<g.length;w++){var C=g[w];if(!Et.call(u,C)||!E(s[C],u[C]))return!1}return!0}function v(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function A(s,u){var g=v(s);s=0;for(var w;g;){if(g.nodeType===3){if(w=s+g.textContent.length,s<=u&&w>=u)return{node:g,offset:u-s};s=w}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=v(g)}}function I(s,u){return s&&u?s===u?!0:s&&s.nodeType===3?!1:u&&u.nodeType===3?I(s,u.parentNode):"contains"in s?s.contains(u):s.compareDocumentPosition?!!(s.compareDocumentPosition(u)&16):!1:!1}function P(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var u=vn(s.document);u instanceof s.HTMLIFrameElement;){try{var g=typeof u.contentWindow.location.href=="string"}catch{g=!1}if(g)s=u.contentWindow;else break;u=vn(s.document)}return u}function k(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u&&(u==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||u==="textarea"||s.contentEditable==="true")}var F=xn&&"documentMode"in document&&11>=document.documentMode,G=null,Q=null,re=null,ne=!1;function oe(s,u,g){var w=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;ne||G==null||G!==vn(w)||(w=G,"selectionStart"in w&&k(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),re&&d(re,w)||(re=w,w=E1(Q,"onSelect"),0<w.length&&(u=new Ir("onSelect","select",null,u,g),s.push({event:u,listeners:w}),u.target=G)))}function fe(s,u){var g={};return g[s.toLowerCase()]=u.toLowerCase(),g["Webkit"+s]="webkit"+u,g["Moz"+s]="moz"+u,g}var le={animationend:fe("Animation","AnimationEnd"),animationiteration:fe("Animation","AnimationIteration"),animationstart:fe("Animation","AnimationStart"),transitionrun:fe("Transition","TransitionRun"),transitionstart:fe("Transition","TransitionStart"),transitioncancel:fe("Transition","TransitionCancel"),transitionend:fe("Transition","TransitionEnd")},ge={},he={};xn&&(he=document.createElement("div").style,"AnimationEvent"in window||(delete le.animationend.animation,delete le.animationiteration.animation,delete le.animationstart.animation),"TransitionEvent"in window||delete le.transitionend.transition);function we(s){if(ge[s])return ge[s];if(!le[s])return s;var u=le[s],g;for(g in u)if(u.hasOwnProperty(g)&&g in he)return ge[s]=u[g];return s}var Ce=we("animationend"),be=we("animationiteration"),Me=we("animationstart"),He=we("transitionrun"),lt=we("transitionstart"),ct=we("transitioncancel"),tt=we("transitionend"),vt=new Map,gt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gt.push("scrollEnd");function it(s,u){vt.set(s,u),Cn(u,[s])}var xt=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Xt=[],wn=0,Bt=0;function Jt(){for(var s=wn,u=Bt=wn=0;u<s;){var g=Xt[u];Xt[u++]=null;var w=Xt[u];Xt[u++]=null;var C=Xt[u];Xt[u++]=null;var R=Xt[u];if(Xt[u++]=null,w!==null&&C!==null){var q=w.pending;q===null?C.next=C:(C.next=q.next,q.next=C),w.pending=C}R!==0&&sl(g,C,R)}}function gr(s,u,g,w){Xt[wn++]=s,Xt[wn++]=u,Xt[wn++]=g,Xt[wn++]=w,Bt|=w,s.lanes|=w,s=s.alternate,s!==null&&(s.lanes|=w)}function Xa(s,u,g,w){return gr(s,u,g,w),Gu(s)}function tr(s,u){return gr(s,null,null,u),Gu(s)}function sl(s,u,g){s.lanes|=g;var w=s.alternate;w!==null&&(w.lanes|=g);for(var C=!1,R=s.return;R!==null;)R.childLanes|=g,w=R.alternate,w!==null&&(w.childLanes|=g),R.tag===22&&(s=R.stateNode,s===null||s._visibility&1||(C=!0)),s=R,R=R.return;return s.tag===3?(R=s.stateNode,C&&u!==null&&(C=31-Ze(g),s=R.hiddenUpdates,w=s[C],w===null?s[C]=[u]:w.push(u),u.lane=g|536870912),R):null}function Gu(s){if(50<fg)throw fg=0,Zw=null,Error(r(185));for(var u=s.return;u!==null;)s=u,u=s.return;return s.tag===3?s.stateNode:null}var jd={};function yq(s,u,g,w){this.tag=s,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(s,u,g,w){return new yq(s,u,g,w)}function Gb(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ql(s,u){var g=s.alternate;return g===null?(g=Ks(s.tag,u,s.key,s.mode),g.elementType=s.elementType,g.type=s.type,g.stateNode=s.stateNode,g.alternate=s,s.alternate=g):(g.pendingProps=u,g.type=s.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=s.flags&65011712,g.childLanes=s.childLanes,g.lanes=s.lanes,g.child=s.child,g.memoizedProps=s.memoizedProps,g.memoizedState=s.memoizedState,g.updateQueue=s.updateQueue,u=s.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=s.sibling,g.index=s.index,g.ref=s.ref,g.refCleanup=s.refCleanup,g}function mO(s,u){s.flags&=65011714;var g=s.alternate;return g===null?(s.childLanes=0,s.lanes=u,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=g.childLanes,s.lanes=g.lanes,s.child=g.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=g.memoizedProps,s.memoizedState=g.memoizedState,s.updateQueue=g.updateQueue,s.type=g.type,u=g.dependencies,s.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),s}function V0(s,u,g,w,C,R){var q=0;if(w=s,typeof s=="function")Gb(s)&&(q=1);else if(typeof s=="string")q=_G(s,g,Ve.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case U:return s=Ks(31,g,u,C),s.elementType=U,s.lanes=R,s;case M:return mf(g.children,C,R,u);case L:q=8,C|=24;break;case z:return s=Ks(12,g,u,C|2),s.elementType=z,s.lanes=R,s;case ue:return s=Ks(13,g,u,C),s.elementType=ue,s.lanes=R,s;case Z:return s=Ks(19,g,u,C),s.elementType=Z,s.lanes=R,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case K:q=10;break e;case $:q=9;break e;case ee:q=11;break e;case V:q=14;break e;case W:q=16,w=null;break e}q=29,g=Error(r(130,s===null?"null":typeof s,"")),w=null}return u=Ks(q,g,u,C),u.elementType=s,u.type=w,u.lanes=R,u}function mf(s,u,g,w){return s=Ks(7,s,w,u),s.lanes=g,s}function Hb(s,u,g){return s=Ks(6,s,null,u),s.lanes=g,s}function gO(s){var u=Ks(18,null,null,0);return u.stateNode=s,u}function Kb(s,u,g){return u=Ks(4,s.children!==null?s.children:[],s.key,u),u.lanes=g,u.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},u}var pO=new WeakMap;function ho(s,u){if(typeof s=="object"&&s!==null){var g=pO.get(s);return g!==void 0?g:(u={value:s,source:u,stack:zt(u)},pO.set(s,u),u)}return{value:s,source:u,stack:zt(u)}}var Ld=[],Bd=0,z0=null,Gm=0,mo=[],go=0,Hu=null,ol=1,ll="";function Gl(s,u){Ld[Bd++]=Gm,Ld[Bd++]=z0,z0=s,Gm=u}function yO(s,u,g){mo[go++]=ol,mo[go++]=ll,mo[go++]=Hu,Hu=s;var w=ol;s=ll;var C=32-Ze(w)-1;w&=~(1<<C),g+=1;var R=32-Ze(u)+C;if(30<R){var q=C-C%5;R=(w&(1<<q)-1).toString(32),w>>=q,C-=q,ol=1<<32-Ze(u)+C|g<<C|w,ll=R+s}else ol=1<<R|g<<C|w,ll=s}function Wb(s){s.return!==null&&(Gl(s,1),yO(s,1,0))}function $b(s){for(;s===z0;)z0=Ld[--Bd],Ld[Bd]=null,Gm=Ld[--Bd],Ld[Bd]=null;for(;s===Hu;)Hu=mo[--go],mo[go]=null,ll=mo[--go],mo[go]=null,ol=mo[--go],mo[go]=null}function vO(s,u){mo[go++]=ol,mo[go++]=ll,mo[go++]=Hu,ol=u.id,ll=u.overflow,Hu=s}var Pa=null,Fr=null,jn=!1,Ku=null,po=!1,Yb=Error(r(519));function Wu(s){var u=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hm(ho(u,s)),Yb}function xO(s){var u=s.stateNode,g=s.type,w=s.memoizedProps;switch(u[Fn]=s,u[gn]=w,g){case"dialog":Nn("cancel",u),Nn("close",u);break;case"iframe":case"object":case"embed":Nn("load",u);break;case"video":case"audio":for(g=0;g<hg.length;g++)Nn(hg[g],u);break;case"source":Nn("error",u);break;case"img":case"image":case"link":Nn("error",u),Nn("load",u);break;case"details":Nn("toggle",u);break;case"input":Nn("invalid",u),Te(u,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0);break;case"select":Nn("invalid",u);break;case"textarea":Nn("invalid",u),Rr(u,w.value,w.defaultValue,w.children)}g=w.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||u.textContent===""+g||w.suppressHydrationWarning===!0||jN(u.textContent,g)?(w.popover!=null&&(Nn("beforetoggle",u),Nn("toggle",u)),w.onScroll!=null&&Nn("scroll",u),w.onScrollEnd!=null&&Nn("scrollend",u),w.onClick!=null&&(u.onclick=_i),u=!0):u=!1,u||Wu(s,!0)}function bO(s){for(Pa=s.return;Pa;)switch(Pa.tag){case 5:case 31:case 13:po=!1;return;case 27:case 3:po=!0;return;default:Pa=Pa.return}}function Fd(s){if(s!==Pa)return!1;if(!jn)return bO(s),jn=!0,!1;var u=s.tag,g;if((g=u!==3&&u!==27)&&((g=u===5)&&(g=s.type,g=!(g!=="form"&&g!=="button")||h_(s.type,s.memoizedProps)),g=!g),g&&Fr&&Wu(s),bO(s),u===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Fr=HN(s)}else if(u===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Fr=HN(s)}else u===27?(u=Fr,oc(s.type)?(s=v_,v_=null,Fr=s):Fr=u):Fr=Pa?vo(s.stateNode.nextSibling):null;return!0}function gf(){Fr=Pa=null,jn=!1}function Xb(){var s=Ku;return s!==null&&(Cs===null?Cs=s:Cs.push.apply(Cs,s),Ku=null),s}function Hm(s){Ku===null?Ku=[s]:Ku.push(s)}var Qb=me(null),pf=null,Hl=null;function $u(s,u,g){Xe(Qb,u._currentValue),u._currentValue=g}function Kl(s){s._currentValue=Qb.current,Se(Qb)}function Zb(s,u,g){for(;s!==null;){var w=s.alternate;if((s.childLanes&u)!==u?(s.childLanes|=u,w!==null&&(w.childLanes|=u)):w!==null&&(w.childLanes&u)!==u&&(w.childLanes|=u),s===g)break;s=s.return}}function Jb(s,u,g,w){var C=s.child;for(C!==null&&(C.return=s);C!==null;){var R=C.dependencies;if(R!==null){var q=C.child;R=R.firstContext;e:for(;R!==null;){var te=R;R=C;for(var pe=0;pe<u.length;pe++)if(te.context===u[pe]){R.lanes|=g,te=R.alternate,te!==null&&(te.lanes|=g),Zb(R.return,g,s),w||(q=null);break e}R=te.next}}else if(C.tag===18){if(q=C.return,q===null)throw Error(r(341));q.lanes|=g,R=q.alternate,R!==null&&(R.lanes|=g),Zb(q,g,s),q=null}else q=C.child;if(q!==null)q.return=C;else for(q=C;q!==null;){if(q===s){q=null;break}if(C=q.sibling,C!==null){C.return=q.return,q=C;break}q=q.return}C=q}}function Vd(s,u,g,w){s=null;for(var C=u,R=!1;C!==null;){if(!R){if((C.flags&524288)!==0)R=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var q=C.alternate;if(q===null)throw Error(r(387));if(q=q.memoizedProps,q!==null){var te=C.type;E(C.pendingProps.value,q.value)||(s!==null?s.push(te):s=[te])}}else if(C===yt.current){if(q=C.alternate,q===null)throw Error(r(387));q.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(s!==null?s.push(vg):s=[vg])}C=C.return}s!==null&&Jb(u,s,g,w),u.flags|=262144}function U0(s){for(s=s.firstContext;s!==null;){if(!E(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function yf(s){pf=s,Hl=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ra(s){return wO(pf,s)}function q0(s,u){return pf===null&&yf(s),wO(s,u)}function wO(s,u){var g=u._currentValue;if(u={context:u,memoizedValue:g,next:null},Hl===null){if(s===null)throw Error(r(308));Hl=u,s.dependencies={lanes:0,firstContext:u},s.flags|=524288}else Hl=Hl.next=u;return g}var vq=typeof AbortController<"u"?AbortController:function(){var s=[],u=this.signal={aborted:!1,addEventListener:function(g,w){s.push(w)}};this.abort=function(){u.aborted=!0,s.forEach(function(g){return g()})}},xq=t.unstable_scheduleCallback,bq=t.unstable_NormalPriority,Mi={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ew(){return{controller:new vq,data:new Map,refCount:0}}function Km(s){s.refCount--,s.refCount===0&&xq(bq,function(){s.controller.abort()})}var Wm=null,tw=0,zd=0,Ud=null;function wq(s,u){if(Wm===null){var g=Wm=[];tw=0,zd=i_(),Ud={status:"pending",value:void 0,then:function(w){g.push(w)}}}return tw++,u.then(_O,_O),u}function _O(){if(--tw===0&&Wm!==null){Ud!==null&&(Ud.status="fulfilled");var s=Wm;Wm=null,zd=0,Ud=null;for(var u=0;u<s.length;u++)(0,s[u])()}}function _q(s,u){var g=[],w={status:"pending",value:null,reason:null,then:function(C){g.push(C)}};return s.then(function(){w.status="fulfilled",w.value=u;for(var C=0;C<g.length;C++)(0,g[C])(u)},function(C){for(w.status="rejected",w.reason=C,C=0;C<g.length;C++)(0,g[C])(void 0)}),w}var EO=ye.S;ye.S=function(s,u){sN=hr(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&wq(s,u),EO!==null&&EO(s,u)};var vf=me(null);function nw(){var s=vf.current;return s!==null?s:Cr.pooledCache}function G0(s,u){u===null?Xe(vf,vf.current):Xe(vf,u.pool)}function AO(){var s=nw();return s===null?null:{parent:Mi._currentValue,pool:s}}var qd=Error(r(460)),rw=Error(r(474)),H0=Error(r(542)),K0={then:function(){}};function SO(s){return s=s.status,s==="fulfilled"||s==="rejected"}function TO(s,u,g){switch(g=s[g],g===void 0?s.push(u):g!==u&&(u.then(_i,_i),u=g),u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,CO(s),s;default:if(typeof u.status=="string")u.then(_i,_i);else{if(s=Cr,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=u,s.status="pending",s.then(function(w){if(u.status==="pending"){var C=u;C.status="fulfilled",C.value=w}},function(w){if(u.status==="pending"){var C=u;C.status="rejected",C.reason=w}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,CO(s),s}throw bf=u,qd}}function xf(s){try{var u=s._init;return u(s._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(bf=g,qd):g}}var bf=null;function IO(){if(bf===null)throw Error(r(459));var s=bf;return bf=null,s}function CO(s){if(s===qd||s===H0)throw Error(r(483))}var Gd=null,$m=0;function W0(s){var u=$m;return $m+=1,Gd===null&&(Gd=[]),TO(Gd,s,u)}function Ym(s,u){u=u.props.ref,s.ref=u!==void 0?u:null}function $0(s,u){throw u.$$typeof===T?Error(r(525)):(s=Object.prototype.toString.call(u),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":s)))}function OO(s){function u(Ee,ve){if(s){var Pe=Ee.deletions;Pe===null?(Ee.deletions=[ve],Ee.flags|=16):Pe.push(ve)}}function g(Ee,ve){if(!s)return null;for(;ve!==null;)u(Ee,ve),ve=ve.sibling;return null}function w(Ee){for(var ve=new Map;Ee!==null;)Ee.key!==null?ve.set(Ee.key,Ee):ve.set(Ee.index,Ee),Ee=Ee.sibling;return ve}function C(Ee,ve){return Ee=ql(Ee,ve),Ee.index=0,Ee.sibling=null,Ee}function R(Ee,ve,Pe){return Ee.index=Pe,s?(Pe=Ee.alternate,Pe!==null?(Pe=Pe.index,Pe<ve?(Ee.flags|=67108866,ve):Pe):(Ee.flags|=67108866,ve)):(Ee.flags|=1048576,ve)}function q(Ee){return s&&Ee.alternate===null&&(Ee.flags|=67108866),Ee}function te(Ee,ve,Pe,Ke){return ve===null||ve.tag!==6?(ve=Hb(Pe,Ee.mode,Ke),ve.return=Ee,ve):(ve=C(ve,Pe),ve.return=Ee,ve)}function pe(Ee,ve,Pe,Ke){var Ft=Pe.type;return Ft===M?Ue(Ee,ve,Pe.props.children,Ke,Pe.key):ve!==null&&(ve.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===W&&xf(Ft)===ve.type)?(ve=C(ve,Pe.props),Ym(ve,Pe),ve.return=Ee,ve):(ve=V0(Pe.type,Pe.key,Pe.props,null,Ee.mode,Ke),Ym(ve,Pe),ve.return=Ee,ve)}function Re(Ee,ve,Pe,Ke){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Pe.containerInfo||ve.stateNode.implementation!==Pe.implementation?(ve=Kb(Pe,Ee.mode,Ke),ve.return=Ee,ve):(ve=C(ve,Pe.children||[]),ve.return=Ee,ve)}function Ue(Ee,ve,Pe,Ke,Ft){return ve===null||ve.tag!==7?(ve=mf(Pe,Ee.mode,Ke,Ft),ve.return=Ee,ve):(ve=C(ve,Pe),ve.return=Ee,ve)}function Qe(Ee,ve,Pe){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ve=Hb(""+ve,Ee.mode,Pe),ve.return=Ee,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case N:return Pe=V0(ve.type,ve.key,ve.props,null,Ee.mode,Pe),Ym(Pe,ve),Pe.return=Ee,Pe;case j:return ve=Kb(ve,Ee.mode,Pe),ve.return=Ee,ve;case W:return ve=xf(ve),Qe(Ee,ve,Pe)}if(de(ve)||X(ve))return ve=mf(ve,Ee.mode,Pe,null),ve.return=Ee,ve;if(typeof ve.then=="function")return Qe(Ee,W0(ve),Pe);if(ve.$$typeof===K)return Qe(Ee,q0(Ee,ve),Pe);$0(Ee,ve)}return null}function je(Ee,ve,Pe,Ke){var Ft=ve!==null?ve.key:null;if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Ft!==null?null:te(Ee,ve,""+Pe,Ke);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case N:return Pe.key===Ft?pe(Ee,ve,Pe,Ke):null;case j:return Pe.key===Ft?Re(Ee,ve,Pe,Ke):null;case W:return Pe=xf(Pe),je(Ee,ve,Pe,Ke)}if(de(Pe)||X(Pe))return Ft!==null?null:Ue(Ee,ve,Pe,Ke,null);if(typeof Pe.then=="function")return je(Ee,ve,W0(Pe),Ke);if(Pe.$$typeof===K)return je(Ee,ve,q0(Ee,Pe),Ke);$0(Ee,Pe)}return null}function Be(Ee,ve,Pe,Ke,Ft){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return Ee=Ee.get(Pe)||null,te(ve,Ee,""+Ke,Ft);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case N:return Ee=Ee.get(Ke.key===null?Pe:Ke.key)||null,pe(ve,Ee,Ke,Ft);case j:return Ee=Ee.get(Ke.key===null?Pe:Ke.key)||null,Re(ve,Ee,Ke,Ft);case W:return Ke=xf(Ke),Be(Ee,ve,Pe,Ke,Ft)}if(de(Ke)||X(Ke))return Ee=Ee.get(Pe)||null,Ue(ve,Ee,Ke,Ft,null);if(typeof Ke.then=="function")return Be(Ee,ve,Pe,W0(Ke),Ft);if(Ke.$$typeof===K)return Be(Ee,ve,Pe,q0(ve,Ke),Ft);$0(ve,Ke)}return null}function Ct(Ee,ve,Pe,Ke){for(var Ft=null,Un=null,Dt=ve,dn=ve=0,Rn=null;Dt!==null&&dn<Pe.length;dn++){Dt.index>dn?(Rn=Dt,Dt=null):Rn=Dt.sibling;var qn=je(Ee,Dt,Pe[dn],Ke);if(qn===null){Dt===null&&(Dt=Rn);break}s&&Dt&&qn.alternate===null&&u(Ee,Dt),ve=R(qn,ve,dn),Un===null?Ft=qn:Un.sibling=qn,Un=qn,Dt=Rn}if(dn===Pe.length)return g(Ee,Dt),jn&&Gl(Ee,dn),Ft;if(Dt===null){for(;dn<Pe.length;dn++)Dt=Qe(Ee,Pe[dn],Ke),Dt!==null&&(ve=R(Dt,ve,dn),Un===null?Ft=Dt:Un.sibling=Dt,Un=Dt);return jn&&Gl(Ee,dn),Ft}for(Dt=w(Dt);dn<Pe.length;dn++)Rn=Be(Dt,Ee,dn,Pe[dn],Ke),Rn!==null&&(s&&Rn.alternate!==null&&Dt.delete(Rn.key===null?dn:Rn.key),ve=R(Rn,ve,dn),Un===null?Ft=Rn:Un.sibling=Rn,Un=Rn);return s&&Dt.forEach(function(dc){return u(Ee,dc)}),jn&&Gl(Ee,dn),Ft}function qt(Ee,ve,Pe,Ke){if(Pe==null)throw Error(r(151));for(var Ft=null,Un=null,Dt=ve,dn=ve=0,Rn=null,qn=Pe.next();Dt!==null&&!qn.done;dn++,qn=Pe.next()){Dt.index>dn?(Rn=Dt,Dt=null):Rn=Dt.sibling;var dc=je(Ee,Dt,qn.value,Ke);if(dc===null){Dt===null&&(Dt=Rn);break}s&&Dt&&dc.alternate===null&&u(Ee,Dt),ve=R(dc,ve,dn),Un===null?Ft=dc:Un.sibling=dc,Un=dc,Dt=Rn}if(qn.done)return g(Ee,Dt),jn&&Gl(Ee,dn),Ft;if(Dt===null){for(;!qn.done;dn++,qn=Pe.next())qn=Qe(Ee,qn.value,Ke),qn!==null&&(ve=R(qn,ve,dn),Un===null?Ft=qn:Un.sibling=qn,Un=qn);return jn&&Gl(Ee,dn),Ft}for(Dt=w(Dt);!qn.done;dn++,qn=Pe.next())qn=Be(Dt,Ee,dn,qn.value,Ke),qn!==null&&(s&&qn.alternate!==null&&Dt.delete(qn.key===null?dn:qn.key),ve=R(qn,ve,dn),Un===null?Ft=qn:Un.sibling=qn,Un=qn);return s&&Dt.forEach(function(DG){return u(Ee,DG)}),jn&&Gl(Ee,dn),Ft}function vr(Ee,ve,Pe,Ke){if(typeof Pe=="object"&&Pe!==null&&Pe.type===M&&Pe.key===null&&(Pe=Pe.props.children),typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case N:e:{for(var Ft=Pe.key;ve!==null;){if(ve.key===Ft){if(Ft=Pe.type,Ft===M){if(ve.tag===7){g(Ee,ve.sibling),Ke=C(ve,Pe.props.children),Ke.return=Ee,Ee=Ke;break e}}else if(ve.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===W&&xf(Ft)===ve.type){g(Ee,ve.sibling),Ke=C(ve,Pe.props),Ym(Ke,Pe),Ke.return=Ee,Ee=Ke;break e}g(Ee,ve);break}else u(Ee,ve);ve=ve.sibling}Pe.type===M?(Ke=mf(Pe.props.children,Ee.mode,Ke,Pe.key),Ke.return=Ee,Ee=Ke):(Ke=V0(Pe.type,Pe.key,Pe.props,null,Ee.mode,Ke),Ym(Ke,Pe),Ke.return=Ee,Ee=Ke)}return q(Ee);case j:e:{for(Ft=Pe.key;ve!==null;){if(ve.key===Ft)if(ve.tag===4&&ve.stateNode.containerInfo===Pe.containerInfo&&ve.stateNode.implementation===Pe.implementation){g(Ee,ve.sibling),Ke=C(ve,Pe.children||[]),Ke.return=Ee,Ee=Ke;break e}else{g(Ee,ve);break}else u(Ee,ve);ve=ve.sibling}Ke=Kb(Pe,Ee.mode,Ke),Ke.return=Ee,Ee=Ke}return q(Ee);case W:return Pe=xf(Pe),vr(Ee,ve,Pe,Ke)}if(de(Pe))return Ct(Ee,ve,Pe,Ke);if(X(Pe)){if(Ft=X(Pe),typeof Ft!="function")throw Error(r(150));return Pe=Ft.call(Pe),qt(Ee,ve,Pe,Ke)}if(typeof Pe.then=="function")return vr(Ee,ve,W0(Pe),Ke);if(Pe.$$typeof===K)return vr(Ee,ve,q0(Ee,Pe),Ke);$0(Ee,Pe)}return typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint"?(Pe=""+Pe,ve!==null&&ve.tag===6?(g(Ee,ve.sibling),Ke=C(ve,Pe),Ke.return=Ee,Ee=Ke):(g(Ee,ve),Ke=Hb(Pe,Ee.mode,Ke),Ke.return=Ee,Ee=Ke),q(Ee)):g(Ee,ve)}return function(Ee,ve,Pe,Ke){try{$m=0;var Ft=vr(Ee,ve,Pe,Ke);return Gd=null,Ft}catch(Dt){if(Dt===qd||Dt===H0)throw Dt;var Un=Ks(29,Dt,null,Ee.mode);return Un.lanes=Ke,Un.return=Ee,Un}}}var wf=OO(!0),NO=OO(!1),Yu=!1;function iw(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function aw(s,u){s=s.updateQueue,u.updateQueue===s&&(u.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Xu(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Qu(s,u,g){var w=s.updateQueue;if(w===null)return null;if(w=w.shared,(Xn&2)!==0){var C=w.pending;return C===null?u.next=u:(u.next=C.next,C.next=u),w.pending=u,u=Gu(s),sl(s,null,g),u}return gr(s,w,u,g),Gu(s)}function Xm(s,u,g){if(u=u.updateQueue,u!==null&&(u=u.shared,(g&4194048)!==0)){var w=u.lanes;w&=s.pendingLanes,g|=w,u.lanes=g,_n(s,g)}}function sw(s,u){var g=s.updateQueue,w=s.alternate;if(w!==null&&(w=w.updateQueue,g===w)){var C=null,R=null;if(g=g.firstBaseUpdate,g!==null){do{var q={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};R===null?C=R=q:R=R.next=q,g=g.next}while(g!==null);R===null?C=R=u:R=R.next=u}else C=R=u;g={baseState:w.baseState,firstBaseUpdate:C,lastBaseUpdate:R,shared:w.shared,callbacks:w.callbacks},s.updateQueue=g;return}s=g.lastBaseUpdate,s===null?g.firstBaseUpdate=u:s.next=u,g.lastBaseUpdate=u}var ow=!1;function Qm(){if(ow){var s=Ud;if(s!==null)throw s}}function Zm(s,u,g,w){ow=!1;var C=s.updateQueue;Yu=!1;var R=C.firstBaseUpdate,q=C.lastBaseUpdate,te=C.shared.pending;if(te!==null){C.shared.pending=null;var pe=te,Re=pe.next;pe.next=null,q===null?R=Re:q.next=Re,q=pe;var Ue=s.alternate;Ue!==null&&(Ue=Ue.updateQueue,te=Ue.lastBaseUpdate,te!==q&&(te===null?Ue.firstBaseUpdate=Re:te.next=Re,Ue.lastBaseUpdate=pe))}if(R!==null){var Qe=C.baseState;q=0,Ue=Re=pe=null,te=R;do{var je=te.lane&-536870913,Be=je!==te.lane;if(Be?(Pn&je)===je:(w&je)===je){je!==0&&je===zd&&(ow=!0),Ue!==null&&(Ue=Ue.next={lane:0,tag:te.tag,payload:te.payload,callback:null,next:null});e:{var Ct=s,qt=te;je=u;var vr=g;switch(qt.tag){case 1:if(Ct=qt.payload,typeof Ct=="function"){Qe=Ct.call(vr,Qe,je);break e}Qe=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=qt.payload,je=typeof Ct=="function"?Ct.call(vr,Qe,je):Ct,je==null)break e;Qe=_({},Qe,je);break e;case 2:Yu=!0}}je=te.callback,je!==null&&(s.flags|=64,Be&&(s.flags|=8192),Be=C.callbacks,Be===null?C.callbacks=[je]:Be.push(je))}else Be={lane:je,tag:te.tag,payload:te.payload,callback:te.callback,next:null},Ue===null?(Re=Ue=Be,pe=Qe):Ue=Ue.next=Be,q|=je;if(te=te.next,te===null){if(te=C.shared.pending,te===null)break;Be=te,te=Be.next,Be.next=null,C.lastBaseUpdate=Be,C.shared.pending=null}}while(!0);Ue===null&&(pe=Qe),C.baseState=pe,C.firstBaseUpdate=Re,C.lastBaseUpdate=Ue,R===null&&(C.shared.lanes=0),nc|=q,s.lanes=q,s.memoizedState=Qe}}function PO(s,u){if(typeof s!="function")throw Error(r(191,s));s.call(u)}function RO(s,u){var g=s.callbacks;if(g!==null)for(s.callbacks=null,s=0;s<g.length;s++)PO(g[s],u)}var Hd=me(null),Y0=me(0);function DO(s,u){s=tu,Xe(Y0,s),Xe(Hd,u),tu=s|u.baseLanes}function lw(){Xe(Y0,tu),Xe(Hd,Hd.current)}function uw(){tu=Y0.current,Se(Hd),Se(Y0)}var Ws=me(null),yo=null;function Zu(s){var u=s.alternate;Xe(Ei,Ei.current&1),Xe(Ws,s),yo===null&&(u===null||Hd.current!==null||u.memoizedState!==null)&&(yo=s)}function cw(s){Xe(Ei,Ei.current),Xe(Ws,s),yo===null&&(yo=s)}function kO(s){s.tag===22?(Xe(Ei,Ei.current),Xe(Ws,s),yo===null&&(yo=s)):Ju()}function Ju(){Xe(Ei,Ei.current),Xe(Ws,Ws.current)}function $s(s){Se(Ws),yo===s&&(yo=null),Se(Ei)}var Ei=me(0);function X0(s){for(var u=s;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||p_(g)||y_(g)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Wl=0,un=null,pr=null,ji=null,Q0=!1,Kd=!1,_f=!1,Z0=0,Jm=0,Wd=null,Eq=0;function hi(){throw Error(r(321))}function fw(s,u){if(u===null)return!1;for(var g=0;g<u.length&&g<s.length;g++)if(!E(s[g],u[g]))return!1;return!0}function dw(s,u,g,w,C,R){return Wl=R,un=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ye.H=s===null||s.memoizedState===null?y3:Iw,_f=!1,R=g(w,C),_f=!1,Kd&&(R=jO(u,g,w,C)),MO(s),R}function MO(s){ye.H=ng;var u=pr!==null&&pr.next!==null;if(Wl=0,ji=pr=un=null,Q0=!1,Jm=0,Wd=null,u)throw Error(r(300));s===null||Li||(s=s.dependencies,s!==null&&U0(s)&&(Li=!0))}function jO(s,u,g,w){un=s;var C=0;do{if(Kd&&(Wd=null),Jm=0,Kd=!1,25<=C)throw Error(r(301));if(C+=1,ji=pr=null,s.updateQueue!=null){var R=s.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}ye.H=v3,R=u(g,w)}while(Kd);return R}function Aq(){var s=ye.H,u=s.useState()[0];return u=typeof u.then=="function"?eg(u):u,s=s.useState()[0],(pr!==null?pr.memoizedState:null)!==s&&(un.flags|=1024),u}function hw(){var s=Z0!==0;return Z0=0,s}function mw(s,u,g){u.updateQueue=s.updateQueue,u.flags&=-2053,s.lanes&=~g}function gw(s){if(Q0){for(s=s.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}Q0=!1}Wl=0,ji=pr=un=null,Kd=!1,Jm=Z0=0,Wd=null}function us(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ji===null?un.memoizedState=ji=s:ji=ji.next=s,ji}function Ai(){if(pr===null){var s=un.alternate;s=s!==null?s.memoizedState:null}else s=pr.next;var u=ji===null?un.memoizedState:ji.next;if(u!==null)ji=u,pr=s;else{if(s===null)throw un.alternate===null?Error(r(467)):Error(r(310));pr=s,s={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},ji===null?un.memoizedState=ji=s:ji=ji.next=s}return ji}function J0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eg(s){var u=Jm;return Jm+=1,Wd===null&&(Wd=[]),s=TO(Wd,s,u),u=un,(ji===null?u.memoizedState:ji.next)===null&&(u=u.alternate,ye.H=u===null||u.memoizedState===null?y3:Iw),s}function e1(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return eg(s);if(s.$$typeof===K)return Ra(s)}throw Error(r(438,String(s)))}function pw(s){var u=null,g=un.updateQueue;if(g!==null&&(u=g.memoCache),u==null){var w=un.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(u={data:w.data.map(function(C){return C.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),g===null&&(g=J0(),un.updateQueue=g),g.memoCache=u,g=u.data[u.index],g===void 0)for(g=u.data[u.index]=Array(s),w=0;w<s;w++)g[w]=ae;return u.index++,g}function $l(s,u){return typeof u=="function"?u(s):u}function t1(s){var u=Ai();return yw(u,pr,s)}function yw(s,u,g){var w=s.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=g;var C=s.baseQueue,R=w.pending;if(R!==null){if(C!==null){var q=C.next;C.next=R.next,R.next=q}u.baseQueue=C=R,w.pending=null}if(R=s.baseState,C===null)s.memoizedState=R;else{u=C.next;var te=q=null,pe=null,Re=u,Ue=!1;do{var Qe=Re.lane&-536870913;if(Qe!==Re.lane?(Pn&Qe)===Qe:(Wl&Qe)===Qe){var je=Re.revertLane;if(je===0)pe!==null&&(pe=pe.next={lane:0,revertLane:0,gesture:null,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),Qe===zd&&(Ue=!0);else if((Wl&je)===je){Re=Re.next,je===zd&&(Ue=!0);continue}else Qe={lane:0,revertLane:Re.revertLane,gesture:null,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},pe===null?(te=pe=Qe,q=R):pe=pe.next=Qe,un.lanes|=je,nc|=je;Qe=Re.action,_f&&g(R,Qe),R=Re.hasEagerState?Re.eagerState:g(R,Qe)}else je={lane:Qe,revertLane:Re.revertLane,gesture:Re.gesture,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},pe===null?(te=pe=je,q=R):pe=pe.next=je,un.lanes|=Qe,nc|=Qe;Re=Re.next}while(Re!==null&&Re!==u);if(pe===null?q=R:pe.next=te,!E(R,s.memoizedState)&&(Li=!0,Ue&&(g=Ud,g!==null)))throw g;s.memoizedState=R,s.baseState=q,s.baseQueue=pe,w.lastRenderedState=R}return C===null&&(w.lanes=0),[s.memoizedState,w.dispatch]}function vw(s){var u=Ai(),g=u.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=s;var w=g.dispatch,C=g.pending,R=u.memoizedState;if(C!==null){g.pending=null;var q=C=C.next;do R=s(R,q.action),q=q.next;while(q!==C);E(R,u.memoizedState)||(Li=!0),u.memoizedState=R,u.baseQueue===null&&(u.baseState=R),g.lastRenderedState=R}return[R,w]}function LO(s,u,g){var w=un,C=Ai(),R=jn;if(R){if(g===void 0)throw Error(r(407));g=g()}else g=u();var q=!E((pr||C).memoizedState,g);if(q&&(C.memoizedState=g,Li=!0),C=C.queue,ww(VO.bind(null,w,C,s),[s]),C.getSnapshot!==u||q||ji!==null&&ji.memoizedState.tag&1){if(w.flags|=2048,$d(9,{destroy:void 0},FO.bind(null,w,C,g,u),null),Cr===null)throw Error(r(349));R||(Wl&127)!==0||BO(w,u,g)}return g}function BO(s,u,g){s.flags|=16384,s={getSnapshot:u,value:g},u=un.updateQueue,u===null?(u=J0(),un.updateQueue=u,u.stores=[s]):(g=u.stores,g===null?u.stores=[s]:g.push(s))}function FO(s,u,g,w){u.value=g,u.getSnapshot=w,zO(u)&&UO(s)}function VO(s,u,g){return g(function(){zO(u)&&UO(s)})}function zO(s){var u=s.getSnapshot;s=s.value;try{var g=u();return!E(s,g)}catch{return!0}}function UO(s){var u=tr(s,2);u!==null&&Os(u,s,2)}function xw(s){var u=us();if(typeof s=="function"){var g=s;if(s=g(),_f){cn(!0);try{g()}finally{cn(!1)}}}return u.memoizedState=u.baseState=s,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:s},u}function qO(s,u,g,w){return s.baseState=g,yw(s,pr,typeof w=="function"?w:$l)}function Sq(s,u,g,w,C){if(i1(s))throw Error(r(485));if(s=u.action,s!==null){var R={payload:C,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){R.listeners.push(q)}};ye.T!==null?g(!0):R.isTransition=!1,w(R),g=u.pending,g===null?(R.next=u.pending=R,GO(u,R)):(R.next=g.next,u.pending=g.next=R)}}function GO(s,u){var g=u.action,w=u.payload,C=s.state;if(u.isTransition){var R=ye.T,q={};ye.T=q;try{var te=g(C,w),pe=ye.S;pe!==null&&pe(q,te),HO(s,u,te)}catch(Re){bw(s,u,Re)}finally{R!==null&&q.types!==null&&(R.types=q.types),ye.T=R}}else try{R=g(C,w),HO(s,u,R)}catch(Re){bw(s,u,Re)}}function HO(s,u,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(w){KO(s,u,w)},function(w){return bw(s,u,w)}):KO(s,u,g)}function KO(s,u,g){u.status="fulfilled",u.value=g,WO(u),s.state=g,u=s.pending,u!==null&&(g=u.next,g===u?s.pending=null:(g=g.next,u.next=g,GO(s,g)))}function bw(s,u,g){var w=s.pending;if(s.pending=null,w!==null){w=w.next;do u.status="rejected",u.reason=g,WO(u),u=u.next;while(u!==w)}s.action=null}function WO(s){s=s.listeners;for(var u=0;u<s.length;u++)(0,s[u])()}function $O(s,u){return u}function YO(s,u){if(jn){var g=Cr.formState;if(g!==null){e:{var w=un;if(jn){if(Fr){t:{for(var C=Fr,R=po;C.nodeType!==8;){if(!R){C=null;break t}if(C=vo(C.nextSibling),C===null){C=null;break t}}R=C.data,C=R==="F!"||R==="F"?C:null}if(C){Fr=vo(C.nextSibling),w=C.data==="F!";break e}}Wu(w)}w=!1}w&&(u=g[0])}}return g=us(),g.memoizedState=g.baseState=u,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$O,lastRenderedState:u},g.queue=w,g=m3.bind(null,un,w),w.dispatch=g,w=xw(!1),R=Tw.bind(null,un,!1,w.queue),w=us(),C={state:u,dispatch:null,action:s,pending:null},w.queue=C,g=Sq.bind(null,un,C,R,g),C.dispatch=g,w.memoizedState=s,[u,g,!1]}function XO(s){var u=Ai();return QO(u,pr,s)}function QO(s,u,g){if(u=yw(s,u,$O)[0],s=t1($l)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var w=eg(u)}catch(q){throw q===qd?H0:q}else w=u;u=Ai();var C=u.queue,R=C.dispatch;return g!==u.memoizedState&&(un.flags|=2048,$d(9,{destroy:void 0},Tq.bind(null,C,g),null)),[w,R,s]}function Tq(s,u){s.action=u}function ZO(s){var u=Ai(),g=pr;if(g!==null)return QO(u,g,s);Ai(),u=u.memoizedState,g=Ai();var w=g.queue.dispatch;return g.memoizedState=s,[u,w,!1]}function $d(s,u,g,w){return s={tag:s,create:g,deps:w,inst:u,next:null},u=un.updateQueue,u===null&&(u=J0(),un.updateQueue=u),g=u.lastEffect,g===null?u.lastEffect=s.next=s:(w=g.next,g.next=s,s.next=w,u.lastEffect=s),s}function JO(){return Ai().memoizedState}function n1(s,u,g,w){var C=us();un.flags|=s,C.memoizedState=$d(1|u,{destroy:void 0},g,w===void 0?null:w)}function r1(s,u,g,w){var C=Ai();w=w===void 0?null:w;var R=C.memoizedState.inst;pr!==null&&w!==null&&fw(w,pr.memoizedState.deps)?C.memoizedState=$d(u,R,g,w):(un.flags|=s,C.memoizedState=$d(1|u,R,g,w))}function e3(s,u){n1(8390656,8,s,u)}function ww(s,u){r1(2048,8,s,u)}function Iq(s){un.flags|=4;var u=un.updateQueue;if(u===null)u=J0(),un.updateQueue=u,u.events=[s];else{var g=u.events;g===null?u.events=[s]:g.push(s)}}function t3(s){var u=Ai().memoizedState;return Iq({ref:u,nextImpl:s}),function(){if((Xn&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}function n3(s,u){return r1(4,2,s,u)}function r3(s,u){return r1(4,4,s,u)}function i3(s,u){if(typeof u=="function"){s=s();var g=u(s);return function(){typeof g=="function"?g():u(null)}}if(u!=null)return s=s(),u.current=s,function(){u.current=null}}function a3(s,u,g){g=g!=null?g.concat([s]):null,r1(4,4,i3.bind(null,u,s),g)}function _w(){}function s3(s,u){var g=Ai();u=u===void 0?null:u;var w=g.memoizedState;return u!==null&&fw(u,w[1])?w[0]:(g.memoizedState=[s,u],s)}function o3(s,u){var g=Ai();u=u===void 0?null:u;var w=g.memoizedState;if(u!==null&&fw(u,w[1]))return w[0];if(w=s(),_f){cn(!0);try{s()}finally{cn(!1)}}return g.memoizedState=[w,u],w}function Ew(s,u,g){return g===void 0||(Wl&1073741824)!==0&&(Pn&261930)===0?s.memoizedState=u:(s.memoizedState=g,s=lN(),un.lanes|=s,nc|=s,g)}function l3(s,u,g,w){return E(g,u)?g:Hd.current!==null?(s=Ew(s,g,w),E(s,u)||(Li=!0),s):(Wl&42)===0||(Wl&1073741824)!==0&&(Pn&261930)===0?(Li=!0,s.memoizedState=g):(s=lN(),un.lanes|=s,nc|=s,u)}function u3(s,u,g,w,C){var R=_e.p;_e.p=R!==0&&8>R?R:8;var q=ye.T,te={};ye.T=te,Tw(s,!1,u,g);try{var pe=C(),Re=ye.S;if(Re!==null&&Re(te,pe),pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var Ue=_q(pe,w);tg(s,u,Ue,Qs(s))}else tg(s,u,w,Qs(s))}catch(Qe){tg(s,u,{then:function(){},status:"rejected",reason:Qe},Qs())}finally{_e.p=R,q!==null&&te.types!==null&&(q.types=te.types),ye.T=q}}function Cq(){}function Aw(s,u,g,w){if(s.tag!==5)throw Error(r(476));var C=c3(s).queue;u3(s,C,u,qe,g===null?Cq:function(){return f3(s),g(w)})}function c3(s){var u=s.memoizedState;if(u!==null)return u;u={memoizedState:qe,baseState:qe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:qe},next:null};var g={};return u.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:g},next:null},s.memoizedState=u,s=s.alternate,s!==null&&(s.memoizedState=u),u}function f3(s){var u=c3(s);u.next===null&&(u=s.alternate.memoizedState),tg(s,u.next.queue,{},Qs())}function Sw(){return Ra(vg)}function d3(){return Ai().memoizedState}function h3(){return Ai().memoizedState}function Oq(s){for(var u=s.return;u!==null;){switch(u.tag){case 24:case 3:var g=Qs();s=Xu(g);var w=Qu(u,s,g);w!==null&&(Os(w,u,g),Xm(w,u,g)),u={cache:ew()},s.payload=u;return}u=u.return}}function Nq(s,u,g){var w=Qs();g={lane:w,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},i1(s)?g3(u,g):(g=Xa(s,u,g,w),g!==null&&(Os(g,s,w),p3(g,u,w)))}function m3(s,u,g){var w=Qs();tg(s,u,g,w)}function tg(s,u,g,w){var C={lane:w,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(i1(s))g3(u,C);else{var R=s.alternate;if(s.lanes===0&&(R===null||R.lanes===0)&&(R=u.lastRenderedReducer,R!==null))try{var q=u.lastRenderedState,te=R(q,g);if(C.hasEagerState=!0,C.eagerState=te,E(te,q))return gr(s,u,C,0),Cr===null&&Jt(),!1}catch{}if(g=Xa(s,u,C,w),g!==null)return Os(g,s,w),p3(g,u,w),!0}return!1}function Tw(s,u,g,w){if(w={lane:2,revertLane:i_(),gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},i1(s)){if(u)throw Error(r(479))}else u=Xa(s,g,w,2),u!==null&&Os(u,s,2)}function i1(s){var u=s.alternate;return s===un||u!==null&&u===un}function g3(s,u){Kd=Q0=!0;var g=s.pending;g===null?u.next=u:(u.next=g.next,g.next=u),s.pending=u}function p3(s,u,g){if((g&4194048)!==0){var w=u.lanes;w&=s.pendingLanes,g|=w,u.lanes=g,_n(s,g)}}var ng={readContext:Ra,use:e1,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useLayoutEffect:hi,useInsertionEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useSyncExternalStore:hi,useId:hi,useHostTransitionStatus:hi,useFormState:hi,useActionState:hi,useOptimistic:hi,useMemoCache:hi,useCacheRefresh:hi};ng.useEffectEvent=hi;var y3={readContext:Ra,use:e1,useCallback:function(s,u){return us().memoizedState=[s,u===void 0?null:u],s},useContext:Ra,useEffect:e3,useImperativeHandle:function(s,u,g){g=g!=null?g.concat([s]):null,n1(4194308,4,i3.bind(null,u,s),g)},useLayoutEffect:function(s,u){return n1(4194308,4,s,u)},useInsertionEffect:function(s,u){n1(4,2,s,u)},useMemo:function(s,u){var g=us();u=u===void 0?null:u;var w=s();if(_f){cn(!0);try{s()}finally{cn(!1)}}return g.memoizedState=[w,u],w},useReducer:function(s,u,g){var w=us();if(g!==void 0){var C=g(u);if(_f){cn(!0);try{g(u)}finally{cn(!1)}}}else C=u;return w.memoizedState=w.baseState=C,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:C},w.queue=s,s=s.dispatch=Nq.bind(null,un,s),[w.memoizedState,s]},useRef:function(s){var u=us();return s={current:s},u.memoizedState=s},useState:function(s){s=xw(s);var u=s.queue,g=m3.bind(null,un,u);return u.dispatch=g,[s.memoizedState,g]},useDebugValue:_w,useDeferredValue:function(s,u){var g=us();return Ew(g,s,u)},useTransition:function(){var s=xw(!1);return s=u3.bind(null,un,s.queue,!0,!1),us().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,u,g){var w=un,C=us();if(jn){if(g===void 0)throw Error(r(407));g=g()}else{if(g=u(),Cr===null)throw Error(r(349));(Pn&127)!==0||BO(w,u,g)}C.memoizedState=g;var R={value:g,getSnapshot:u};return C.queue=R,e3(VO.bind(null,w,R,s),[s]),w.flags|=2048,$d(9,{destroy:void 0},FO.bind(null,w,R,g,u),null),g},useId:function(){var s=us(),u=Cr.identifierPrefix;if(jn){var g=ll,w=ol;g=(w&~(1<<32-Ze(w)-1)).toString(32)+g,u="_"+u+"R_"+g,g=Z0++,0<g&&(u+="H"+g.toString(32)),u+="_"}else g=Eq++,u="_"+u+"r_"+g.toString(32)+"_";return s.memoizedState=u},useHostTransitionStatus:Sw,useFormState:YO,useActionState:YO,useOptimistic:function(s){var u=us();u.memoizedState=u.baseState=s;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=g,u=Tw.bind(null,un,!0,g),g.dispatch=u,[s,u]},useMemoCache:pw,useCacheRefresh:function(){return us().memoizedState=Oq.bind(null,un)},useEffectEvent:function(s){var u=us(),g={impl:s};return u.memoizedState=g,function(){if((Xn&2)!==0)throw Error(r(440));return g.impl.apply(void 0,arguments)}}},Iw={readContext:Ra,use:e1,useCallback:s3,useContext:Ra,useEffect:ww,useImperativeHandle:a3,useInsertionEffect:n3,useLayoutEffect:r3,useMemo:o3,useReducer:t1,useRef:JO,useState:function(){return t1($l)},useDebugValue:_w,useDeferredValue:function(s,u){var g=Ai();return l3(g,pr.memoizedState,s,u)},useTransition:function(){var s=t1($l)[0],u=Ai().memoizedState;return[typeof s=="boolean"?s:eg(s),u]},useSyncExternalStore:LO,useId:d3,useHostTransitionStatus:Sw,useFormState:XO,useActionState:XO,useOptimistic:function(s,u){var g=Ai();return qO(g,pr,s,u)},useMemoCache:pw,useCacheRefresh:h3};Iw.useEffectEvent=t3;var v3={readContext:Ra,use:e1,useCallback:s3,useContext:Ra,useEffect:ww,useImperativeHandle:a3,useInsertionEffect:n3,useLayoutEffect:r3,useMemo:o3,useReducer:vw,useRef:JO,useState:function(){return vw($l)},useDebugValue:_w,useDeferredValue:function(s,u){var g=Ai();return pr===null?Ew(g,s,u):l3(g,pr.memoizedState,s,u)},useTransition:function(){var s=vw($l)[0],u=Ai().memoizedState;return[typeof s=="boolean"?s:eg(s),u]},useSyncExternalStore:LO,useId:d3,useHostTransitionStatus:Sw,useFormState:ZO,useActionState:ZO,useOptimistic:function(s,u){var g=Ai();return pr!==null?qO(g,pr,s,u):(g.baseState=s,[s,g.queue.dispatch])},useMemoCache:pw,useCacheRefresh:h3};v3.useEffectEvent=t3;function Cw(s,u,g,w){u=s.memoizedState,g=g(w,u),g=g==null?u:_({},u,g),s.memoizedState=g,s.lanes===0&&(s.updateQueue.baseState=g)}var Ow={enqueueSetState:function(s,u,g){s=s._reactInternals;var w=Qs(),C=Xu(w);C.payload=u,g!=null&&(C.callback=g),u=Qu(s,C,w),u!==null&&(Os(u,s,w),Xm(u,s,w))},enqueueReplaceState:function(s,u,g){s=s._reactInternals;var w=Qs(),C=Xu(w);C.tag=1,C.payload=u,g!=null&&(C.callback=g),u=Qu(s,C,w),u!==null&&(Os(u,s,w),Xm(u,s,w))},enqueueForceUpdate:function(s,u){s=s._reactInternals;var g=Qs(),w=Xu(g);w.tag=2,u!=null&&(w.callback=u),u=Qu(s,w,g),u!==null&&(Os(u,s,g),Xm(u,s,g))}};function x3(s,u,g,w,C,R,q){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(w,R,q):u.prototype&&u.prototype.isPureReactComponent?!d(g,w)||!d(C,R):!0}function b3(s,u,g,w){s=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,w),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,w),u.state!==s&&Ow.enqueueReplaceState(u,u.state,null)}function Ef(s,u){var g=u;if("ref"in u){g={};for(var w in u)w!=="ref"&&(g[w]=u[w])}if(s=s.defaultProps){g===u&&(g=_({},g));for(var C in s)g[C]===void 0&&(g[C]=s[C])}return g}function w3(s){xt(s)}function _3(s){console.error(s)}function E3(s){xt(s)}function a1(s,u){try{var g=s.onUncaughtError;g(u.value,{componentStack:u.stack})}catch(w){setTimeout(function(){throw w})}}function A3(s,u,g){try{var w=s.onCaughtError;w(g.value,{componentStack:g.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function Nw(s,u,g){return g=Xu(g),g.tag=3,g.payload={element:null},g.callback=function(){a1(s,u)},g}function S3(s){return s=Xu(s),s.tag=3,s}function T3(s,u,g,w){var C=g.type.getDerivedStateFromError;if(typeof C=="function"){var R=w.value;s.payload=function(){return C(R)},s.callback=function(){A3(u,g,w)}}var q=g.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(s.callback=function(){A3(u,g,w),typeof C!="function"&&(rc===null?rc=new Set([this]):rc.add(this));var te=w.stack;this.componentDidCatch(w.value,{componentStack:te!==null?te:""})})}function Pq(s,u,g,w,C){if(g.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(u=g.alternate,u!==null&&Vd(u,g,C,!0),g=Ws.current,g!==null){switch(g.tag){case 31:case 13:return yo===null?y1():g.alternate===null&&mi===0&&(mi=3),g.flags&=-257,g.flags|=65536,g.lanes=C,w===K0?g.flags|=16384:(u=g.updateQueue,u===null?g.updateQueue=new Set([w]):u.add(w),t_(s,w,C)),!1;case 22:return g.flags|=65536,w===K0?g.flags|=16384:(u=g.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([w])},g.updateQueue=u):(g=u.retryQueue,g===null?u.retryQueue=new Set([w]):g.add(w)),t_(s,w,C)),!1}throw Error(r(435,g.tag))}return t_(s,w,C),y1(),!1}if(jn)return u=Ws.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=C,w!==Yb&&(s=Error(r(422),{cause:w}),Hm(ho(s,g)))):(w!==Yb&&(u=Error(r(423),{cause:w}),Hm(ho(u,g))),s=s.current.alternate,s.flags|=65536,C&=-C,s.lanes|=C,w=ho(w,g),C=Nw(s.stateNode,w,C),sw(s,C),mi!==4&&(mi=2)),!1;var R=Error(r(520),{cause:w});if(R=ho(R,g),cg===null?cg=[R]:cg.push(R),mi!==4&&(mi=2),u===null)return!0;w=ho(w,g),g=u;do{switch(g.tag){case 3:return g.flags|=65536,s=C&-C,g.lanes|=s,s=Nw(g.stateNode,w,s),sw(g,s),!1;case 1:if(u=g.type,R=g.stateNode,(g.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(rc===null||!rc.has(R))))return g.flags|=65536,C&=-C,g.lanes|=C,C=S3(C),T3(C,s,g,w),sw(g,C),!1}g=g.return}while(g!==null);return!1}var Pw=Error(r(461)),Li=!1;function Da(s,u,g,w){u.child=s===null?NO(u,null,g,w):wf(u,s.child,g,w)}function I3(s,u,g,w,C){g=g.render;var R=u.ref;if("ref"in w){var q={};for(var te in w)te!=="ref"&&(q[te]=w[te])}else q=w;return yf(u),w=dw(s,u,g,q,R,C),te=hw(),s!==null&&!Li?(mw(s,u,C),Yl(s,u,C)):(jn&&te&&Wb(u),u.flags|=1,Da(s,u,w,C),u.child)}function C3(s,u,g,w,C){if(s===null){var R=g.type;return typeof R=="function"&&!Gb(R)&&R.defaultProps===void 0&&g.compare===null?(u.tag=15,u.type=R,O3(s,u,R,w,C)):(s=V0(g.type,null,w,u,u.mode,C),s.ref=u.ref,s.return=u,u.child=s)}if(R=s.child,!Fw(s,C)){var q=R.memoizedProps;if(g=g.compare,g=g!==null?g:d,g(q,w)&&s.ref===u.ref)return Yl(s,u,C)}return u.flags|=1,s=ql(R,w),s.ref=u.ref,s.return=u,u.child=s}function O3(s,u,g,w,C){if(s!==null){var R=s.memoizedProps;if(d(R,w)&&s.ref===u.ref)if(Li=!1,u.pendingProps=w=R,Fw(s,C))(s.flags&131072)!==0&&(Li=!0);else return u.lanes=s.lanes,Yl(s,u,C)}return Rw(s,u,g,w,C)}function N3(s,u,g,w){var C=w.children,R=s!==null?s.memoizedState:null;if(s===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),w.mode==="hidden"){if((u.flags&128)!==0){if(R=R!==null?R.baseLanes|g:g,s!==null){for(w=u.child=s.child,C=0;w!==null;)C=C|w.lanes|w.childLanes,w=w.sibling;w=C&~R}else w=0,u.child=null;return P3(s,u,R,g,w)}if((g&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},s!==null&&G0(u,R!==null?R.cachePool:null),R!==null?DO(u,R):lw(),kO(u);else return w=u.lanes=536870912,P3(s,u,R!==null?R.baseLanes|g:g,g,w)}else R!==null?(G0(u,R.cachePool),DO(u,R),Ju(),u.memoizedState=null):(s!==null&&G0(u,null),lw(),Ju());return Da(s,u,C,g),u.child}function rg(s,u){return s!==null&&s.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function P3(s,u,g,w,C){var R=nw();return R=R===null?null:{parent:Mi._currentValue,pool:R},u.memoizedState={baseLanes:g,cachePool:R},s!==null&&G0(u,null),lw(),kO(u),s!==null&&Vd(s,u,w,!0),u.childLanes=C,null}function s1(s,u){return u=l1({mode:u.mode,children:u.children},s.mode),u.ref=s.ref,s.child=u,u.return=s,u}function R3(s,u,g){return wf(u,s.child,null,g),s=s1(u,u.pendingProps),s.flags|=2,$s(u),u.memoizedState=null,s}function Rq(s,u,g){var w=u.pendingProps,C=(u.flags&128)!==0;if(u.flags&=-129,s===null){if(jn){if(w.mode==="hidden")return s=s1(u,w),u.lanes=536870912,rg(null,s);if(cw(u),(s=Fr)?(s=GN(s,po),s=s!==null&&s.data==="&"?s:null,s!==null&&(u.memoizedState={dehydrated:s,treeContext:Hu!==null?{id:ol,overflow:ll}:null,retryLane:536870912,hydrationErrors:null},g=gO(s),g.return=u,u.child=g,Pa=u,Fr=null)):s=null,s===null)throw Wu(u);return u.lanes=536870912,null}return s1(u,w)}var R=s.memoizedState;if(R!==null){var q=R.dehydrated;if(cw(u),C)if(u.flags&256)u.flags&=-257,u=R3(s,u,g);else if(u.memoizedState!==null)u.child=s.child,u.flags|=128,u=null;else throw Error(r(558));else if(Li||Vd(s,u,g,!1),C=(g&s.childLanes)!==0,Li||C){if(w=Cr,w!==null&&(q=mr(w,g),q!==0&&q!==R.retryLane))throw R.retryLane=q,tr(s,q),Os(w,s,q),Pw;y1(),u=R3(s,u,g)}else s=R.treeContext,Fr=vo(q.nextSibling),Pa=u,jn=!0,Ku=null,po=!1,s!==null&&vO(u,s),u=s1(u,w),u.flags|=4096;return u}return s=ql(s.child,{mode:w.mode,children:w.children}),s.ref=u.ref,u.child=s,s.return=u,s}function o1(s,u){var g=u.ref;if(g===null)s!==null&&s.ref!==null&&(u.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(r(284));(s===null||s.ref!==g)&&(u.flags|=4194816)}}function Rw(s,u,g,w,C){return yf(u),g=dw(s,u,g,w,void 0,C),w=hw(),s!==null&&!Li?(mw(s,u,C),Yl(s,u,C)):(jn&&w&&Wb(u),u.flags|=1,Da(s,u,g,C),u.child)}function D3(s,u,g,w,C,R){return yf(u),u.updateQueue=null,g=jO(u,w,g,C),MO(s),w=hw(),s!==null&&!Li?(mw(s,u,R),Yl(s,u,R)):(jn&&w&&Wb(u),u.flags|=1,Da(s,u,g,R),u.child)}function k3(s,u,g,w,C){if(yf(u),u.stateNode===null){var R=jd,q=g.contextType;typeof q=="object"&&q!==null&&(R=Ra(q)),R=new g(w,R),u.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=Ow,u.stateNode=R,R._reactInternals=u,R=u.stateNode,R.props=w,R.state=u.memoizedState,R.refs={},iw(u),q=g.contextType,R.context=typeof q=="object"&&q!==null?Ra(q):jd,R.state=u.memoizedState,q=g.getDerivedStateFromProps,typeof q=="function"&&(Cw(u,g,q,w),R.state=u.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(q=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),q!==R.state&&Ow.enqueueReplaceState(R,R.state,null),Zm(u,w,R,C),Qm(),R.state=u.memoizedState),typeof R.componentDidMount=="function"&&(u.flags|=4194308),w=!0}else if(s===null){R=u.stateNode;var te=u.memoizedProps,pe=Ef(g,te);R.props=pe;var Re=R.context,Ue=g.contextType;q=jd,typeof Ue=="object"&&Ue!==null&&(q=Ra(Ue));var Qe=g.getDerivedStateFromProps;Ue=typeof Qe=="function"||typeof R.getSnapshotBeforeUpdate=="function",te=u.pendingProps!==te,Ue||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(te||Re!==q)&&b3(u,R,w,q),Yu=!1;var je=u.memoizedState;R.state=je,Zm(u,w,R,C),Qm(),Re=u.memoizedState,te||je!==Re||Yu?(typeof Qe=="function"&&(Cw(u,g,Qe,w),Re=u.memoizedState),(pe=Yu||x3(u,g,pe,w,je,Re,q))?(Ue||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(u.flags|=4194308)):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=w,u.memoizedState=Re),R.props=w,R.state=Re,R.context=q,w=pe):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),w=!1)}else{R=u.stateNode,aw(s,u),q=u.memoizedProps,Ue=Ef(g,q),R.props=Ue,Qe=u.pendingProps,je=R.context,Re=g.contextType,pe=jd,typeof Re=="object"&&Re!==null&&(pe=Ra(Re)),te=g.getDerivedStateFromProps,(Re=typeof te=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(q!==Qe||je!==pe)&&b3(u,R,w,pe),Yu=!1,je=u.memoizedState,R.state=je,Zm(u,w,R,C),Qm();var Be=u.memoizedState;q!==Qe||je!==Be||Yu||s!==null&&s.dependencies!==null&&U0(s.dependencies)?(typeof te=="function"&&(Cw(u,g,te,w),Be=u.memoizedState),(Ue=Yu||x3(u,g,Ue,w,je,Be,pe)||s!==null&&s.dependencies!==null&&U0(s.dependencies))?(Re||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(w,Be,pe),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(w,Be,pe)),typeof R.componentDidUpdate=="function"&&(u.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof R.componentDidUpdate!="function"||q===s.memoizedProps&&je===s.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||q===s.memoizedProps&&je===s.memoizedState||(u.flags|=1024),u.memoizedProps=w,u.memoizedState=Be),R.props=w,R.state=Be,R.context=pe,w=Ue):(typeof R.componentDidUpdate!="function"||q===s.memoizedProps&&je===s.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||q===s.memoizedProps&&je===s.memoizedState||(u.flags|=1024),w=!1)}return R=w,o1(s,u),w=(u.flags&128)!==0,R||w?(R=u.stateNode,g=w&&typeof g.getDerivedStateFromError!="function"?null:R.render(),u.flags|=1,s!==null&&w?(u.child=wf(u,s.child,null,C),u.child=wf(u,null,g,C)):Da(s,u,g,C),u.memoizedState=R.state,s=u.child):s=Yl(s,u,C),s}function M3(s,u,g,w){return gf(),u.flags|=256,Da(s,u,g,w),u.child}var Dw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kw(s){return{baseLanes:s,cachePool:AO()}}function Mw(s,u,g){return s=s!==null?s.childLanes&~g:0,u&&(s|=Xs),s}function j3(s,u,g){var w=u.pendingProps,C=!1,R=(u.flags&128)!==0,q;if((q=R)||(q=s!==null&&s.memoizedState===null?!1:(Ei.current&2)!==0),q&&(C=!0,u.flags&=-129),q=(u.flags&32)!==0,u.flags&=-33,s===null){if(jn){if(C?Zu(u):Ju(),(s=Fr)?(s=GN(s,po),s=s!==null&&s.data!=="&"?s:null,s!==null&&(u.memoizedState={dehydrated:s,treeContext:Hu!==null?{id:ol,overflow:ll}:null,retryLane:536870912,hydrationErrors:null},g=gO(s),g.return=u,u.child=g,Pa=u,Fr=null)):s=null,s===null)throw Wu(u);return y_(s)?u.lanes=32:u.lanes=536870912,null}var te=w.children;return w=w.fallback,C?(Ju(),C=u.mode,te=l1({mode:"hidden",children:te},C),w=mf(w,C,g,null),te.return=u,w.return=u,te.sibling=w,u.child=te,w=u.child,w.memoizedState=kw(g),w.childLanes=Mw(s,q,g),u.memoizedState=Dw,rg(null,w)):(Zu(u),jw(u,te))}var pe=s.memoizedState;if(pe!==null&&(te=pe.dehydrated,te!==null)){if(R)u.flags&256?(Zu(u),u.flags&=-257,u=Lw(s,u,g)):u.memoizedState!==null?(Ju(),u.child=s.child,u.flags|=128,u=null):(Ju(),te=w.fallback,C=u.mode,w=l1({mode:"visible",children:w.children},C),te=mf(te,C,g,null),te.flags|=2,w.return=u,te.return=u,w.sibling=te,u.child=w,wf(u,s.child,null,g),w=u.child,w.memoizedState=kw(g),w.childLanes=Mw(s,q,g),u.memoizedState=Dw,u=rg(null,w));else if(Zu(u),y_(te)){if(q=te.nextSibling&&te.nextSibling.dataset,q)var Re=q.dgst;q=Re,w=Error(r(419)),w.stack="",w.digest=q,Hm({value:w,source:null,stack:null}),u=Lw(s,u,g)}else if(Li||Vd(s,u,g,!1),q=(g&s.childLanes)!==0,Li||q){if(q=Cr,q!==null&&(w=mr(q,g),w!==0&&w!==pe.retryLane))throw pe.retryLane=w,tr(s,w),Os(q,s,w),Pw;p_(te)||y1(),u=Lw(s,u,g)}else p_(te)?(u.flags|=192,u.child=s.child,u=null):(s=pe.treeContext,Fr=vo(te.nextSibling),Pa=u,jn=!0,Ku=null,po=!1,s!==null&&vO(u,s),u=jw(u,w.children),u.flags|=4096);return u}return C?(Ju(),te=w.fallback,C=u.mode,pe=s.child,Re=pe.sibling,w=ql(pe,{mode:"hidden",children:w.children}),w.subtreeFlags=pe.subtreeFlags&65011712,Re!==null?te=ql(Re,te):(te=mf(te,C,g,null),te.flags|=2),te.return=u,w.return=u,w.sibling=te,u.child=w,rg(null,w),w=u.child,te=s.child.memoizedState,te===null?te=kw(g):(C=te.cachePool,C!==null?(pe=Mi._currentValue,C=C.parent!==pe?{parent:pe,pool:pe}:C):C=AO(),te={baseLanes:te.baseLanes|g,cachePool:C}),w.memoizedState=te,w.childLanes=Mw(s,q,g),u.memoizedState=Dw,rg(s.child,w)):(Zu(u),g=s.child,s=g.sibling,g=ql(g,{mode:"visible",children:w.children}),g.return=u,g.sibling=null,s!==null&&(q=u.deletions,q===null?(u.deletions=[s],u.flags|=16):q.push(s)),u.child=g,u.memoizedState=null,g)}function jw(s,u){return u=l1({mode:"visible",children:u},s.mode),u.return=s,s.child=u}function l1(s,u){return s=Ks(22,s,null,u),s.lanes=0,s}function Lw(s,u,g){return wf(u,s.child,null,g),s=jw(u,u.pendingProps.children),s.flags|=2,u.memoizedState=null,s}function L3(s,u,g){s.lanes|=u;var w=s.alternate;w!==null&&(w.lanes|=u),Zb(s.return,u,g)}function Bw(s,u,g,w,C,R){var q=s.memoizedState;q===null?s.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:w,tail:g,tailMode:C,treeForkCount:R}:(q.isBackwards=u,q.rendering=null,q.renderingStartTime=0,q.last=w,q.tail=g,q.tailMode=C,q.treeForkCount=R)}function B3(s,u,g){var w=u.pendingProps,C=w.revealOrder,R=w.tail;w=w.children;var q=Ei.current,te=(q&2)!==0;if(te?(q=q&1|2,u.flags|=128):q&=1,Xe(Ei,q),Da(s,u,w,g),w=jn?Gm:0,!te&&s!==null&&(s.flags&128)!==0)e:for(s=u.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&L3(s,g,u);else if(s.tag===19)L3(s,g,u);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===u)break e;for(;s.sibling===null;){if(s.return===null||s.return===u)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(C){case"forwards":for(g=u.child,C=null;g!==null;)s=g.alternate,s!==null&&X0(s)===null&&(C=g),g=g.sibling;g=C,g===null?(C=u.child,u.child=null):(C=g.sibling,g.sibling=null),Bw(u,!1,C,g,R,w);break;case"backwards":case"unstable_legacy-backwards":for(g=null,C=u.child,u.child=null;C!==null;){if(s=C.alternate,s!==null&&X0(s)===null){u.child=C;break}s=C.sibling,C.sibling=g,g=C,C=s}Bw(u,!0,g,null,R,w);break;case"together":Bw(u,!1,null,null,void 0,w);break;default:u.memoizedState=null}return u.child}function Yl(s,u,g){if(s!==null&&(u.dependencies=s.dependencies),nc|=u.lanes,(g&u.childLanes)===0)if(s!==null){if(Vd(s,u,g,!1),(g&u.childLanes)===0)return null}else return null;if(s!==null&&u.child!==s.child)throw Error(r(153));if(u.child!==null){for(s=u.child,g=ql(s,s.pendingProps),u.child=g,g.return=u;s.sibling!==null;)s=s.sibling,g=g.sibling=ql(s,s.pendingProps),g.return=u;g.sibling=null}return u.child}function Fw(s,u){return(s.lanes&u)!==0?!0:(s=s.dependencies,!!(s!==null&&U0(s)))}function Dq(s,u,g){switch(u.tag){case 3:ut(u,u.stateNode.containerInfo),$u(u,Mi,s.memoizedState.cache),gf();break;case 27:case 5:Ye(u);break;case 4:ut(u,u.stateNode.containerInfo);break;case 10:$u(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,cw(u),null;break;case 13:var w=u.memoizedState;if(w!==null)return w.dehydrated!==null?(Zu(u),u.flags|=128,null):(g&u.child.childLanes)!==0?j3(s,u,g):(Zu(u),s=Yl(s,u,g),s!==null?s.sibling:null);Zu(u);break;case 19:var C=(s.flags&128)!==0;if(w=(g&u.childLanes)!==0,w||(Vd(s,u,g,!1),w=(g&u.childLanes)!==0),C){if(w)return B3(s,u,g);u.flags|=128}if(C=u.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Xe(Ei,Ei.current),w)break;return null;case 22:return u.lanes=0,N3(s,u,g,u.pendingProps);case 24:$u(u,Mi,s.memoizedState.cache)}return Yl(s,u,g)}function F3(s,u,g){if(s!==null)if(s.memoizedProps!==u.pendingProps)Li=!0;else{if(!Fw(s,g)&&(u.flags&128)===0)return Li=!1,Dq(s,u,g);Li=(s.flags&131072)!==0}else Li=!1,jn&&(u.flags&1048576)!==0&&yO(u,Gm,u.index);switch(u.lanes=0,u.tag){case 16:e:{var w=u.pendingProps;if(s=xf(u.elementType),u.type=s,typeof s=="function")Gb(s)?(w=Ef(s,w),u.tag=1,u=k3(null,u,s,w,g)):(u.tag=0,u=Rw(null,u,s,w,g));else{if(s!=null){var C=s.$$typeof;if(C===ee){u.tag=11,u=I3(null,u,s,w,g);break e}else if(C===V){u.tag=14,u=C3(null,u,s,w,g);break e}}throw u=xe(s)||s,Error(r(306,u,""))}}return u;case 0:return Rw(s,u,u.type,u.pendingProps,g);case 1:return w=u.type,C=Ef(w,u.pendingProps),k3(s,u,w,C,g);case 3:e:{if(ut(u,u.stateNode.containerInfo),s===null)throw Error(r(387));w=u.pendingProps;var R=u.memoizedState;C=R.element,aw(s,u),Zm(u,w,null,g);var q=u.memoizedState;if(w=q.cache,$u(u,Mi,w),w!==R.cache&&Jb(u,[Mi],g,!0),Qm(),w=q.element,R.isDehydrated)if(R={element:w,isDehydrated:!1,cache:q.cache},u.updateQueue.baseState=R,u.memoizedState=R,u.flags&256){u=M3(s,u,w,g);break e}else if(w!==C){C=ho(Error(r(424)),u),Hm(C),u=M3(s,u,w,g);break e}else for(s=u.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Fr=vo(s.firstChild),Pa=u,jn=!0,Ku=null,po=!0,g=NO(u,null,w,g),u.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(gf(),w===C){u=Yl(s,u,g);break e}Da(s,u,w,g)}u=u.child}return u;case 26:return o1(s,u),s===null?(g=XN(u.type,null,u.pendingProps,null))?u.memoizedState=g:jn||(g=u.type,s=u.pendingProps,w=A1($e.current).createElement(g),w[Fn]=u,w[gn]=s,ka(w,g,s),Ar(w),u.stateNode=w):u.memoizedState=XN(u.type,s.memoizedProps,u.pendingProps,s.memoizedState),null;case 27:return Ye(u),s===null&&jn&&(w=u.stateNode=WN(u.type,u.pendingProps,$e.current),Pa=u,po=!0,C=Fr,oc(u.type)?(v_=C,Fr=vo(w.firstChild)):Fr=C),Da(s,u,u.pendingProps.children,g),o1(s,u),s===null&&(u.flags|=4194304),u.child;case 5:return s===null&&jn&&((C=w=Fr)&&(w=uG(w,u.type,u.pendingProps,po),w!==null?(u.stateNode=w,Pa=u,Fr=vo(w.firstChild),po=!1,C=!0):C=!1),C||Wu(u)),Ye(u),C=u.type,R=u.pendingProps,q=s!==null?s.memoizedProps:null,w=R.children,h_(C,R)?w=null:q!==null&&h_(C,q)&&(u.flags|=32),u.memoizedState!==null&&(C=dw(s,u,Aq,null,null,g),vg._currentValue=C),o1(s,u),Da(s,u,w,g),u.child;case 6:return s===null&&jn&&((s=g=Fr)&&(g=cG(g,u.pendingProps,po),g!==null?(u.stateNode=g,Pa=u,Fr=null,s=!0):s=!1),s||Wu(u)),null;case 13:return j3(s,u,g);case 4:return ut(u,u.stateNode.containerInfo),w=u.pendingProps,s===null?u.child=wf(u,null,w,g):Da(s,u,w,g),u.child;case 11:return I3(s,u,u.type,u.pendingProps,g);case 7:return Da(s,u,u.pendingProps,g),u.child;case 8:return Da(s,u,u.pendingProps.children,g),u.child;case 12:return Da(s,u,u.pendingProps.children,g),u.child;case 10:return w=u.pendingProps,$u(u,u.type,w.value),Da(s,u,w.children,g),u.child;case 9:return C=u.type._context,w=u.pendingProps.children,yf(u),C=Ra(C),w=w(C),u.flags|=1,Da(s,u,w,g),u.child;case 14:return C3(s,u,u.type,u.pendingProps,g);case 15:return O3(s,u,u.type,u.pendingProps,g);case 19:return B3(s,u,g);case 31:return Rq(s,u,g);case 22:return N3(s,u,g,u.pendingProps);case 24:return yf(u),w=Ra(Mi),s===null?(C=nw(),C===null&&(C=Cr,R=ew(),C.pooledCache=R,R.refCount++,R!==null&&(C.pooledCacheLanes|=g),C=R),u.memoizedState={parent:w,cache:C},iw(u),$u(u,Mi,C)):((s.lanes&g)!==0&&(aw(s,u),Zm(u,null,null,g),Qm()),C=s.memoizedState,R=u.memoizedState,C.parent!==w?(C={parent:w,cache:w},u.memoizedState=C,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=C),$u(u,Mi,w)):(w=R.cache,$u(u,Mi,w),w!==C.cache&&Jb(u,[Mi],g,!0))),Da(s,u,u.pendingProps.children,g),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Xl(s){s.flags|=4}function Vw(s,u,g,w,C){if((u=(s.mode&32)!==0)&&(u=!1),u){if(s.flags|=16777216,(C&335544128)===C)if(s.stateNode.complete)s.flags|=8192;else if(dN())s.flags|=8192;else throw bf=K0,rw}else s.flags&=-16777217}function V3(s,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!tP(u))if(dN())s.flags|=8192;else throw bf=K0,rw}function u1(s,u){u!==null&&(s.flags|=4),s.flags&16384&&(u=s.tag!==22?ii():536870912,s.lanes|=u,Zd|=u)}function ig(s,u){if(!jn)switch(s.tailMode){case"hidden":u=s.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?s.tail=null:g.sibling=null;break;case"collapsed":g=s.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?u||s.tail===null?s.tail=null:s.tail.sibling=null:w.sibling=null}}function Vr(s){var u=s.alternate!==null&&s.alternate.child===s.child,g=0,w=0;if(u)for(var C=s.child;C!==null;)g|=C.lanes|C.childLanes,w|=C.subtreeFlags&65011712,w|=C.flags&65011712,C.return=s,C=C.sibling;else for(C=s.child;C!==null;)g|=C.lanes|C.childLanes,w|=C.subtreeFlags,w|=C.flags,C.return=s,C=C.sibling;return s.subtreeFlags|=w,s.childLanes=g,u}function kq(s,u,g){var w=u.pendingProps;switch($b(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(u),null;case 1:return Vr(u),null;case 3:return g=u.stateNode,w=null,s!==null&&(w=s.memoizedState.cache),u.memoizedState.cache!==w&&(u.flags|=2048),Kl(Mi),Ne(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(Fd(u)?Xl(u):s===null||s.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Xb())),Vr(u),null;case 26:var C=u.type,R=u.memoizedState;return s===null?(Xl(u),R!==null?(Vr(u),V3(u,R)):(Vr(u),Vw(u,C,null,w,g))):R?R!==s.memoizedState?(Xl(u),Vr(u),V3(u,R)):(Vr(u),u.flags&=-16777217):(s=s.memoizedProps,s!==w&&Xl(u),Vr(u),Vw(u,C,s,w,g)),null;case 27:if(_t(u),g=$e.current,C=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==w&&Xl(u);else{if(!w){if(u.stateNode===null)throw Error(r(166));return Vr(u),null}s=Ve.current,Fd(u)?xO(u):(s=WN(C,w,g),u.stateNode=s,Xl(u))}return Vr(u),null;case 5:if(_t(u),C=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==w&&Xl(u);else{if(!w){if(u.stateNode===null)throw Error(r(166));return Vr(u),null}if(R=Ve.current,Fd(u))xO(u);else{var q=A1($e.current);switch(R){case 1:R=q.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:R=q.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":R=q.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":R=q.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":R=q.createElement("div"),R.innerHTML="<script><\/script>",R=R.removeChild(R.firstChild);break;case"select":R=typeof w.is=="string"?q.createElement("select",{is:w.is}):q.createElement("select"),w.multiple?R.multiple=!0:w.size&&(R.size=w.size);break;default:R=typeof w.is=="string"?q.createElement(C,{is:w.is}):q.createElement(C)}}R[Fn]=u,R[gn]=w;e:for(q=u.child;q!==null;){if(q.tag===5||q.tag===6)R.appendChild(q.stateNode);else if(q.tag!==4&&q.tag!==27&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===u)break e;for(;q.sibling===null;){if(q.return===null||q.return===u)break e;q=q.return}q.sibling.return=q.return,q=q.sibling}u.stateNode=R;e:switch(ka(R,C,w),C){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&Xl(u)}}return Vr(u),Vw(u,u.type,s===null?null:s.memoizedProps,u.pendingProps,g),null;case 6:if(s&&u.stateNode!=null)s.memoizedProps!==w&&Xl(u);else{if(typeof w!="string"&&u.stateNode===null)throw Error(r(166));if(s=$e.current,Fd(u)){if(s=u.stateNode,g=u.memoizedProps,w=null,C=Pa,C!==null)switch(C.tag){case 27:case 5:w=C.memoizedProps}s[Fn]=u,s=!!(s.nodeValue===g||w!==null&&w.suppressHydrationWarning===!0||jN(s.nodeValue,g)),s||Wu(u,!0)}else s=A1(s).createTextNode(w),s[Fn]=u,u.stateNode=s}return Vr(u),null;case 31:if(g=u.memoizedState,s===null||s.memoizedState!==null){if(w=Fd(u),g!==null){if(s===null){if(!w)throw Error(r(318));if(s=u.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Fn]=u}else gf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Vr(u),s=!1}else g=Xb(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),s=!0;if(!s)return u.flags&256?($s(u),u):($s(u),null);if((u.flags&128)!==0)throw Error(r(558))}return Vr(u),null;case 13:if(w=u.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(C=Fd(u),w!==null&&w.dehydrated!==null){if(s===null){if(!C)throw Error(r(318));if(C=u.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[Fn]=u}else gf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Vr(u),C=!1}else C=Xb(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=C),C=!0;if(!C)return u.flags&256?($s(u),u):($s(u),null)}return $s(u),(u.flags&128)!==0?(u.lanes=g,u):(g=w!==null,s=s!==null&&s.memoizedState!==null,g&&(w=u.child,C=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(C=w.alternate.memoizedState.cachePool.pool),R=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(R=w.memoizedState.cachePool.pool),R!==C&&(w.flags|=2048)),g!==s&&g&&(u.child.flags|=8192),u1(u,u.updateQueue),Vr(u),null);case 4:return Ne(),s===null&&l_(u.stateNode.containerInfo),Vr(u),null;case 10:return Kl(u.type),Vr(u),null;case 19:if(Se(Ei),w=u.memoizedState,w===null)return Vr(u),null;if(C=(u.flags&128)!==0,R=w.rendering,R===null)if(C)ig(w,!1);else{if(mi!==0||s!==null&&(s.flags&128)!==0)for(s=u.child;s!==null;){if(R=X0(s),R!==null){for(u.flags|=128,ig(w,!1),s=R.updateQueue,u.updateQueue=s,u1(u,s),u.subtreeFlags=0,s=g,g=u.child;g!==null;)mO(g,s),g=g.sibling;return Xe(Ei,Ei.current&1|2),jn&&Gl(u,w.treeForkCount),u.child}s=s.sibling}w.tail!==null&&hr()>m1&&(u.flags|=128,C=!0,ig(w,!1),u.lanes=4194304)}else{if(!C)if(s=X0(R),s!==null){if(u.flags|=128,C=!0,s=s.updateQueue,u.updateQueue=s,u1(u,s),ig(w,!0),w.tail===null&&w.tailMode==="hidden"&&!R.alternate&&!jn)return Vr(u),null}else 2*hr()-w.renderingStartTime>m1&&g!==536870912&&(u.flags|=128,C=!0,ig(w,!1),u.lanes=4194304);w.isBackwards?(R.sibling=u.child,u.child=R):(s=w.last,s!==null?s.sibling=R:u.child=R,w.last=R)}return w.tail!==null?(s=w.tail,w.rendering=s,w.tail=s.sibling,w.renderingStartTime=hr(),s.sibling=null,g=Ei.current,Xe(Ei,C?g&1|2:g&1),jn&&Gl(u,w.treeForkCount),s):(Vr(u),null);case 22:case 23:return $s(u),uw(),w=u.memoizedState!==null,s!==null?s.memoizedState!==null!==w&&(u.flags|=8192):w&&(u.flags|=8192),w?(g&536870912)!==0&&(u.flags&128)===0&&(Vr(u),u.subtreeFlags&6&&(u.flags|=8192)):Vr(u),g=u.updateQueue,g!==null&&u1(u,g.retryQueue),g=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),w=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(w=u.memoizedState.cachePool.pool),w!==g&&(u.flags|=2048),s!==null&&Se(vf),null;case 24:return g=null,s!==null&&(g=s.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),Kl(Mi),Vr(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function Mq(s,u){switch($b(u),u.tag){case 1:return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 3:return Kl(Mi),Ne(),s=u.flags,(s&65536)!==0&&(s&128)===0?(u.flags=s&-65537|128,u):null;case 26:case 27:case 5:return _t(u),null;case 31:if(u.memoizedState!==null){if($s(u),u.alternate===null)throw Error(r(340));gf()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 13:if($s(u),s=u.memoizedState,s!==null&&s.dehydrated!==null){if(u.alternate===null)throw Error(r(340));gf()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 19:return Se(Ei),null;case 4:return Ne(),null;case 10:return Kl(u.type),null;case 22:case 23:return $s(u),uw(),s!==null&&Se(vf),s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 24:return Kl(Mi),null;case 25:return null;default:return null}}function z3(s,u){switch($b(u),u.tag){case 3:Kl(Mi),Ne();break;case 26:case 27:case 5:_t(u);break;case 4:Ne();break;case 31:u.memoizedState!==null&&$s(u);break;case 13:$s(u);break;case 19:Se(Ei);break;case 10:Kl(u.type);break;case 22:case 23:$s(u),uw(),s!==null&&Se(vf);break;case 24:Kl(Mi)}}function ag(s,u){try{var g=u.updateQueue,w=g!==null?g.lastEffect:null;if(w!==null){var C=w.next;g=C;do{if((g.tag&s)===s){w=void 0;var R=g.create,q=g.inst;w=R(),q.destroy=w}g=g.next}while(g!==C)}}catch(te){or(u,u.return,te)}}function ec(s,u,g){try{var w=u.updateQueue,C=w!==null?w.lastEffect:null;if(C!==null){var R=C.next;w=R;do{if((w.tag&s)===s){var q=w.inst,te=q.destroy;if(te!==void 0){q.destroy=void 0,C=u;var pe=g,Re=te;try{Re()}catch(Ue){or(C,pe,Ue)}}}w=w.next}while(w!==R)}}catch(Ue){or(u,u.return,Ue)}}function U3(s){var u=s.updateQueue;if(u!==null){var g=s.stateNode;try{RO(u,g)}catch(w){or(s,s.return,w)}}}function q3(s,u,g){g.props=Ef(s.type,s.memoizedProps),g.state=s.memoizedState;try{g.componentWillUnmount()}catch(w){or(s,u,w)}}function sg(s,u){try{var g=s.ref;if(g!==null){switch(s.tag){case 26:case 27:case 5:var w=s.stateNode;break;case 30:w=s.stateNode;break;default:w=s.stateNode}typeof g=="function"?s.refCleanup=g(w):g.current=w}}catch(C){or(s,u,C)}}function ul(s,u){var g=s.ref,w=s.refCleanup;if(g!==null)if(typeof w=="function")try{w()}catch(C){or(s,u,C)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(C){or(s,u,C)}else g.current=null}function G3(s){var u=s.type,g=s.memoizedProps,w=s.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":g.autoFocus&&w.focus();break e;case"img":g.src?w.src=g.src:g.srcSet&&(w.srcset=g.srcSet)}}catch(C){or(s,s.return,C)}}function zw(s,u,g){try{var w=s.stateNode;rG(w,s.type,g,u),w[gn]=u}catch(C){or(s,s.return,C)}}function H3(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&oc(s.type)||s.tag===4}function Uw(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||H3(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&oc(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function qw(s,u,g){var w=s.tag;if(w===5||w===6)s=s.stateNode,u?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(s,u):(u=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,u.appendChild(s),g=g._reactRootContainer,g!=null||u.onclick!==null||(u.onclick=_i));else if(w!==4&&(w===27&&oc(s.type)&&(g=s.stateNode,u=null),s=s.child,s!==null))for(qw(s,u,g),s=s.sibling;s!==null;)qw(s,u,g),s=s.sibling}function c1(s,u,g){var w=s.tag;if(w===5||w===6)s=s.stateNode,u?g.insertBefore(s,u):g.appendChild(s);else if(w!==4&&(w===27&&oc(s.type)&&(g=s.stateNode),s=s.child,s!==null))for(c1(s,u,g),s=s.sibling;s!==null;)c1(s,u,g),s=s.sibling}function K3(s){var u=s.stateNode,g=s.memoizedProps;try{for(var w=s.type,C=u.attributes;C.length;)u.removeAttributeNode(C[0]);ka(u,w,g),u[Fn]=s,u[gn]=g}catch(R){or(s,s.return,R)}}var Ql=!1,Bi=!1,Gw=!1,W3=typeof WeakSet=="function"?WeakSet:Set,ua=null;function jq(s,u){if(s=s.containerInfo,f_=P1,s=P(s),k(s)){if("selectionStart"in s)var g={start:s.selectionStart,end:s.selectionEnd};else e:{g=(g=s.ownerDocument)&&g.defaultView||window;var w=g.getSelection&&g.getSelection();if(w&&w.rangeCount!==0){g=w.anchorNode;var C=w.anchorOffset,R=w.focusNode;w=w.focusOffset;try{g.nodeType,R.nodeType}catch{g=null;break e}var q=0,te=-1,pe=-1,Re=0,Ue=0,Qe=s,je=null;t:for(;;){for(var Be;Qe!==g||C!==0&&Qe.nodeType!==3||(te=q+C),Qe!==R||w!==0&&Qe.nodeType!==3||(pe=q+w),Qe.nodeType===3&&(q+=Qe.nodeValue.length),(Be=Qe.firstChild)!==null;)je=Qe,Qe=Be;for(;;){if(Qe===s)break t;if(je===g&&++Re===C&&(te=q),je===R&&++Ue===w&&(pe=q),(Be=Qe.nextSibling)!==null)break;Qe=je,je=Qe.parentNode}Qe=Be}g=te===-1||pe===-1?null:{start:te,end:pe}}else g=null}g=g||{start:0,end:0}}else g=null;for(d_={focusedElem:s,selectionRange:g},P1=!1,ua=u;ua!==null;)if(u=ua,s=u.child,(u.subtreeFlags&1028)!==0&&s!==null)s.return=u,ua=s;else for(;ua!==null;){switch(u=ua,R=u.alternate,s=u.flags,u.tag){case 0:if((s&4)!==0&&(s=u.updateQueue,s=s!==null?s.events:null,s!==null))for(g=0;g<s.length;g++)C=s[g],C.ref.impl=C.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&R!==null){s=void 0,g=u,C=R.memoizedProps,R=R.memoizedState,w=g.stateNode;try{var Ct=Ef(g.type,C);s=w.getSnapshotBeforeUpdate(Ct,R),w.__reactInternalSnapshotBeforeUpdate=s}catch(qt){or(g,g.return,qt)}}break;case 3:if((s&1024)!==0){if(s=u.stateNode.containerInfo,g=s.nodeType,g===9)g_(s);else if(g===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":g_(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=u.sibling,s!==null){s.return=u.return,ua=s;break}ua=u.return}}function $3(s,u,g){var w=g.flags;switch(g.tag){case 0:case 11:case 15:Jl(s,g),w&4&&ag(5,g);break;case 1:if(Jl(s,g),w&4)if(s=g.stateNode,u===null)try{s.componentDidMount()}catch(q){or(g,g.return,q)}else{var C=Ef(g.type,u.memoizedProps);u=u.memoizedState;try{s.componentDidUpdate(C,u,s.__reactInternalSnapshotBeforeUpdate)}catch(q){or(g,g.return,q)}}w&64&&U3(g),w&512&&sg(g,g.return);break;case 3:if(Jl(s,g),w&64&&(s=g.updateQueue,s!==null)){if(u=null,g.child!==null)switch(g.child.tag){case 27:case 5:u=g.child.stateNode;break;case 1:u=g.child.stateNode}try{RO(s,u)}catch(q){or(g,g.return,q)}}break;case 27:u===null&&w&4&&K3(g);case 26:case 5:Jl(s,g),u===null&&w&4&&G3(g),w&512&&sg(g,g.return);break;case 12:Jl(s,g);break;case 31:Jl(s,g),w&4&&Q3(s,g);break;case 13:Jl(s,g),w&4&&Z3(s,g),w&64&&(s=g.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(g=Hq.bind(null,g),fG(s,g))));break;case 22:if(w=g.memoizedState!==null||Ql,!w){u=u!==null&&u.memoizedState!==null||Bi,C=Ql;var R=Bi;Ql=w,(Bi=u)&&!R?eu(s,g,(g.subtreeFlags&8772)!==0):Jl(s,g),Ql=C,Bi=R}break;case 30:break;default:Jl(s,g)}}function Y3(s){var u=s.alternate;u!==null&&(s.alternate=null,Y3(u)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(u=s.stateNode,u!==null&&Ri(u)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Xr=null,Ss=!1;function Zl(s,u,g){for(g=g.child;g!==null;)X3(s,u,g),g=g.sibling}function X3(s,u,g){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(In,g)}catch{}switch(g.tag){case 26:Bi||ul(g,u),Zl(s,u,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Bi||ul(g,u);var w=Xr,C=Ss;oc(g.type)&&(Xr=g.stateNode,Ss=!1),Zl(s,u,g),gg(g.stateNode),Xr=w,Ss=C;break;case 5:Bi||ul(g,u);case 6:if(w=Xr,C=Ss,Xr=null,Zl(s,u,g),Xr=w,Ss=C,Xr!==null)if(Ss)try{(Xr.nodeType===9?Xr.body:Xr.nodeName==="HTML"?Xr.ownerDocument.body:Xr).removeChild(g.stateNode)}catch(R){or(g,u,R)}else try{Xr.removeChild(g.stateNode)}catch(R){or(g,u,R)}break;case 18:Xr!==null&&(Ss?(s=Xr,UN(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,g.stateNode),sh(s)):UN(Xr,g.stateNode));break;case 4:w=Xr,C=Ss,Xr=g.stateNode.containerInfo,Ss=!0,Zl(s,u,g),Xr=w,Ss=C;break;case 0:case 11:case 14:case 15:ec(2,g,u),Bi||ec(4,g,u),Zl(s,u,g);break;case 1:Bi||(ul(g,u),w=g.stateNode,typeof w.componentWillUnmount=="function"&&q3(g,u,w)),Zl(s,u,g);break;case 21:Zl(s,u,g);break;case 22:Bi=(w=Bi)||g.memoizedState!==null,Zl(s,u,g),Bi=w;break;default:Zl(s,u,g)}}function Q3(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{sh(s)}catch(g){or(u,u.return,g)}}}function Z3(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{sh(s)}catch(g){or(u,u.return,g)}}function Lq(s){switch(s.tag){case 31:case 13:case 19:var u=s.stateNode;return u===null&&(u=s.stateNode=new W3),u;case 22:return s=s.stateNode,u=s._retryCache,u===null&&(u=s._retryCache=new W3),u;default:throw Error(r(435,s.tag))}}function f1(s,u){var g=Lq(s);u.forEach(function(w){if(!g.has(w)){g.add(w);var C=Kq.bind(null,s,w);w.then(C,C)}})}function Ts(s,u){var g=u.deletions;if(g!==null)for(var w=0;w<g.length;w++){var C=g[w],R=s,q=u,te=q;e:for(;te!==null;){switch(te.tag){case 27:if(oc(te.type)){Xr=te.stateNode,Ss=!1;break e}break;case 5:Xr=te.stateNode,Ss=!1;break e;case 3:case 4:Xr=te.stateNode.containerInfo,Ss=!0;break e}te=te.return}if(Xr===null)throw Error(r(160));X3(R,q,C),Xr=null,Ss=!1,R=C.alternate,R!==null&&(R.return=null),C.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)J3(u,s),u=u.sibling}var Lo=null;function J3(s,u){var g=s.alternate,w=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ts(u,s),Is(s),w&4&&(ec(3,s,s.return),ag(3,s),ec(5,s,s.return));break;case 1:Ts(u,s),Is(s),w&512&&(Bi||g===null||ul(g,g.return)),w&64&&Ql&&(s=s.updateQueue,s!==null&&(w=s.callbacks,w!==null&&(g=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=g===null?w:g.concat(w))));break;case 26:var C=Lo;if(Ts(u,s),Is(s),w&512&&(Bi||g===null||ul(g,g.return)),w&4){var R=g!==null?g.memoizedState:null;if(w=s.memoizedState,g===null)if(w===null)if(s.stateNode===null){e:{w=s.type,g=s.memoizedProps,C=C.ownerDocument||C;t:switch(w){case"title":R=C.getElementsByTagName("title")[0],(!R||R[Pi]||R[Fn]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=C.createElement(w),C.head.insertBefore(R,C.querySelector("head > title"))),ka(R,w,g),R[Fn]=s,Ar(R),w=R;break e;case"link":var q=JN("link","href",C).get(w+(g.href||""));if(q){for(var te=0;te<q.length;te++)if(R=q[te],R.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&R.getAttribute("rel")===(g.rel==null?null:g.rel)&&R.getAttribute("title")===(g.title==null?null:g.title)&&R.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){q.splice(te,1);break t}}R=C.createElement(w),ka(R,w,g),C.head.appendChild(R);break;case"meta":if(q=JN("meta","content",C).get(w+(g.content||""))){for(te=0;te<q.length;te++)if(R=q[te],R.getAttribute("content")===(g.content==null?null:""+g.content)&&R.getAttribute("name")===(g.name==null?null:g.name)&&R.getAttribute("property")===(g.property==null?null:g.property)&&R.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&R.getAttribute("charset")===(g.charSet==null?null:g.charSet)){q.splice(te,1);break t}}R=C.createElement(w),ka(R,w,g),C.head.appendChild(R);break;default:throw Error(r(468,w))}R[Fn]=s,Ar(R),w=R}s.stateNode=w}else eP(C,s.type,s.stateNode);else s.stateNode=ZN(C,w,s.memoizedProps);else R!==w?(R===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):R.count--,w===null?eP(C,s.type,s.stateNode):ZN(C,w,s.memoizedProps)):w===null&&s.stateNode!==null&&zw(s,s.memoizedProps,g.memoizedProps)}break;case 27:Ts(u,s),Is(s),w&512&&(Bi||g===null||ul(g,g.return)),g!==null&&w&4&&zw(s,s.memoizedProps,g.memoizedProps);break;case 5:if(Ts(u,s),Is(s),w&512&&(Bi||g===null||ul(g,g.return)),s.flags&32){C=s.stateNode;try{Hi(C,"")}catch(Ct){or(s,s.return,Ct)}}w&4&&s.stateNode!=null&&(C=s.memoizedProps,zw(s,C,g!==null?g.memoizedProps:C)),w&1024&&(Gw=!0);break;case 6:if(Ts(u,s),Is(s),w&4){if(s.stateNode===null)throw Error(r(162));w=s.memoizedProps,g=s.stateNode;try{g.nodeValue=w}catch(Ct){or(s,s.return,Ct)}}break;case 3:if(I1=null,C=Lo,Lo=S1(u.containerInfo),Ts(u,s),Lo=C,Is(s),w&4&&g!==null&&g.memoizedState.isDehydrated)try{sh(u.containerInfo)}catch(Ct){or(s,s.return,Ct)}Gw&&(Gw=!1,eN(s));break;case 4:w=Lo,Lo=S1(s.stateNode.containerInfo),Ts(u,s),Is(s),Lo=w;break;case 12:Ts(u,s),Is(s);break;case 31:Ts(u,s),Is(s),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,f1(s,w)));break;case 13:Ts(u,s),Is(s),s.child.flags&8192&&s.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(h1=hr()),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,f1(s,w)));break;case 22:C=s.memoizedState!==null;var pe=g!==null&&g.memoizedState!==null,Re=Ql,Ue=Bi;if(Ql=Re||C,Bi=Ue||pe,Ts(u,s),Bi=Ue,Ql=Re,Is(s),w&8192)e:for(u=s.stateNode,u._visibility=C?u._visibility&-2:u._visibility|1,C&&(g===null||pe||Ql||Bi||Af(s)),g=null,u=s;;){if(u.tag===5||u.tag===26){if(g===null){pe=g=u;try{if(R=pe.stateNode,C)q=R.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none";else{te=pe.stateNode;var Qe=pe.memoizedProps.style,je=Qe!=null&&Qe.hasOwnProperty("display")?Qe.display:null;te.style.display=je==null||typeof je=="boolean"?"":(""+je).trim()}}catch(Ct){or(pe,pe.return,Ct)}}}else if(u.tag===6){if(g===null){pe=u;try{pe.stateNode.nodeValue=C?"":pe.memoizedProps}catch(Ct){or(pe,pe.return,Ct)}}}else if(u.tag===18){if(g===null){pe=u;try{var Be=pe.stateNode;C?qN(Be,!0):qN(pe.stateNode,!1)}catch(Ct){or(pe,pe.return,Ct)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===s)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break e;for(;u.sibling===null;){if(u.return===null||u.return===s)break e;g===u&&(g=null),u=u.return}g===u&&(g=null),u.sibling.return=u.return,u=u.sibling}w&4&&(w=s.updateQueue,w!==null&&(g=w.retryQueue,g!==null&&(w.retryQueue=null,f1(s,g))));break;case 19:Ts(u,s),Is(s),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,f1(s,w)));break;case 30:break;case 21:break;default:Ts(u,s),Is(s)}}function Is(s){var u=s.flags;if(u&2){try{for(var g,w=s.return;w!==null;){if(H3(w)){g=w;break}w=w.return}if(g==null)throw Error(r(160));switch(g.tag){case 27:var C=g.stateNode,R=Uw(s);c1(s,R,C);break;case 5:var q=g.stateNode;g.flags&32&&(Hi(q,""),g.flags&=-33);var te=Uw(s);c1(s,te,q);break;case 3:case 4:var pe=g.stateNode.containerInfo,Re=Uw(s);qw(s,Re,pe);break;default:throw Error(r(161))}}catch(Ue){or(s,s.return,Ue)}s.flags&=-3}u&4096&&(s.flags&=-4097)}function eN(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var u=s;eN(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),s=s.sibling}}function Jl(s,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)$3(s,u.alternate,u),u=u.sibling}function Af(s){for(s=s.child;s!==null;){var u=s;switch(u.tag){case 0:case 11:case 14:case 15:ec(4,u,u.return),Af(u);break;case 1:ul(u,u.return);var g=u.stateNode;typeof g.componentWillUnmount=="function"&&q3(u,u.return,g),Af(u);break;case 27:gg(u.stateNode);case 26:case 5:ul(u,u.return),Af(u);break;case 22:u.memoizedState===null&&Af(u);break;case 30:Af(u);break;default:Af(u)}s=s.sibling}}function eu(s,u,g){for(g=g&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var w=u.alternate,C=s,R=u,q=R.flags;switch(R.tag){case 0:case 11:case 15:eu(C,R,g),ag(4,R);break;case 1:if(eu(C,R,g),w=R,C=w.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(Re){or(w,w.return,Re)}if(w=R,C=w.updateQueue,C!==null){var te=w.stateNode;try{var pe=C.shared.hiddenCallbacks;if(pe!==null)for(C.shared.hiddenCallbacks=null,C=0;C<pe.length;C++)PO(pe[C],te)}catch(Re){or(w,w.return,Re)}}g&&q&64&&U3(R),sg(R,R.return);break;case 27:K3(R);case 26:case 5:eu(C,R,g),g&&w===null&&q&4&&G3(R),sg(R,R.return);break;case 12:eu(C,R,g);break;case 31:eu(C,R,g),g&&q&4&&Q3(C,R);break;case 13:eu(C,R,g),g&&q&4&&Z3(C,R);break;case 22:R.memoizedState===null&&eu(C,R,g),sg(R,R.return);break;case 30:break;default:eu(C,R,g)}u=u.sibling}}function Hw(s,u){var g=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),s=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(s=u.memoizedState.cachePool.pool),s!==g&&(s!=null&&s.refCount++,g!=null&&Km(g))}function Kw(s,u){s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&Km(s))}function Bo(s,u,g,w){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)tN(s,u,g,w),u=u.sibling}function tN(s,u,g,w){var C=u.flags;switch(u.tag){case 0:case 11:case 15:Bo(s,u,g,w),C&2048&&ag(9,u);break;case 1:Bo(s,u,g,w);break;case 3:Bo(s,u,g,w),C&2048&&(s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&Km(s)));break;case 12:if(C&2048){Bo(s,u,g,w),s=u.stateNode;try{var R=u.memoizedProps,q=R.id,te=R.onPostCommit;typeof te=="function"&&te(q,u.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(pe){or(u,u.return,pe)}}else Bo(s,u,g,w);break;case 31:Bo(s,u,g,w);break;case 13:Bo(s,u,g,w);break;case 23:break;case 22:R=u.stateNode,q=u.alternate,u.memoizedState!==null?R._visibility&2?Bo(s,u,g,w):og(s,u):R._visibility&2?Bo(s,u,g,w):(R._visibility|=2,Yd(s,u,g,w,(u.subtreeFlags&10256)!==0||!1)),C&2048&&Hw(q,u);break;case 24:Bo(s,u,g,w),C&2048&&Kw(u.alternate,u);break;default:Bo(s,u,g,w)}}function Yd(s,u,g,w,C){for(C=C&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var R=s,q=u,te=g,pe=w,Re=q.flags;switch(q.tag){case 0:case 11:case 15:Yd(R,q,te,pe,C),ag(8,q);break;case 23:break;case 22:var Ue=q.stateNode;q.memoizedState!==null?Ue._visibility&2?Yd(R,q,te,pe,C):og(R,q):(Ue._visibility|=2,Yd(R,q,te,pe,C)),C&&Re&2048&&Hw(q.alternate,q);break;case 24:Yd(R,q,te,pe,C),C&&Re&2048&&Kw(q.alternate,q);break;default:Yd(R,q,te,pe,C)}u=u.sibling}}function og(s,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var g=s,w=u,C=w.flags;switch(w.tag){case 22:og(g,w),C&2048&&Hw(w.alternate,w);break;case 24:og(g,w),C&2048&&Kw(w.alternate,w);break;default:og(g,w)}u=u.sibling}}var lg=8192;function Xd(s,u,g){if(s.subtreeFlags&lg)for(s=s.child;s!==null;)nN(s,u,g),s=s.sibling}function nN(s,u,g){switch(s.tag){case 26:Xd(s,u,g),s.flags&lg&&s.memoizedState!==null&&EG(g,Lo,s.memoizedState,s.memoizedProps);break;case 5:Xd(s,u,g);break;case 3:case 4:var w=Lo;Lo=S1(s.stateNode.containerInfo),Xd(s,u,g),Lo=w;break;case 22:s.memoizedState===null&&(w=s.alternate,w!==null&&w.memoizedState!==null?(w=lg,lg=16777216,Xd(s,u,g),lg=w):Xd(s,u,g));break;default:Xd(s,u,g)}}function rN(s){var u=s.alternate;if(u!==null&&(s=u.child,s!==null)){u.child=null;do u=s.sibling,s.sibling=null,s=u;while(s!==null)}}function ug(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var w=u[g];ua=w,aN(w,s)}rN(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)iN(s),s=s.sibling}function iN(s){switch(s.tag){case 0:case 11:case 15:ug(s),s.flags&2048&&ec(9,s,s.return);break;case 3:ug(s);break;case 12:ug(s);break;case 22:var u=s.stateNode;s.memoizedState!==null&&u._visibility&2&&(s.return===null||s.return.tag!==13)?(u._visibility&=-3,d1(s)):ug(s);break;default:ug(s)}}function d1(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var w=u[g];ua=w,aN(w,s)}rN(s)}for(s=s.child;s!==null;){switch(u=s,u.tag){case 0:case 11:case 15:ec(8,u,u.return),d1(u);break;case 22:g=u.stateNode,g._visibility&2&&(g._visibility&=-3,d1(u));break;default:d1(u)}s=s.sibling}}function aN(s,u){for(;ua!==null;){var g=ua;switch(g.tag){case 0:case 11:case 15:ec(8,g,u);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var w=g.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Km(g.memoizedState.cache)}if(w=g.child,w!==null)w.return=g,ua=w;else e:for(g=s;ua!==null;){w=ua;var C=w.sibling,R=w.return;if(Y3(w),w===g){ua=null;break e}if(C!==null){C.return=R,ua=C;break e}ua=R}}}var Bq={getCacheForType:function(s){var u=Ra(Mi),g=u.data.get(s);return g===void 0&&(g=s(),u.data.set(s,g)),g},cacheSignal:function(){return Ra(Mi).controller.signal}},Fq=typeof WeakMap=="function"?WeakMap:Map,Xn=0,Cr=null,On=null,Pn=0,sr=0,Ys=null,tc=!1,Qd=!1,Ww=!1,tu=0,mi=0,nc=0,Sf=0,$w=0,Xs=0,Zd=0,cg=null,Cs=null,Yw=!1,h1=0,sN=0,m1=1/0,g1=null,rc=null,Ki=0,ic=null,Jd=null,nu=0,Xw=0,Qw=null,oN=null,fg=0,Zw=null;function Qs(){return(Xn&2)!==0&&Pn!==0?Pn&-Pn:ye.T!==null?i_():fi()}function lN(){if(Xs===0)if((Pn&536870912)===0||jn){var s=tn;tn<<=1,(tn&3932160)===0&&(tn=262144),Xs=s}else Xs=536870912;return s=Ws.current,s!==null&&(s.flags|=32),Xs}function Os(s,u,g){(s===Cr&&(sr===2||sr===9)||s.cancelPendingCommit!==null)&&(eh(s,0),ac(s,Pn,Xs,!1)),qi(s,g),((Xn&2)===0||s!==Cr)&&(s===Cr&&((Xn&2)===0&&(Sf|=g),mi===4&&ac(s,Pn,Xs,!1)),cl(s))}function uN(s,u,g){if((Xn&6)!==0)throw Error(r(327));var w=!g&&(u&127)===0&&(u&s.expiredLanes)===0||Er(s,u),C=w?Uq(s,u):e_(s,u,!0),R=w;do{if(C===0){Qd&&!w&&ac(s,u,0,!1);break}else{if(g=s.current.alternate,R&&!Vq(g)){C=e_(s,u,!1),R=!1;continue}if(C===2){if(R=u,s.errorRecoveryDisabledLanes&R)var q=0;else q=s.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){u=q;e:{var te=s;C=cg;var pe=te.current.memoizedState.isDehydrated;if(pe&&(eh(te,q).flags|=256),q=e_(te,q,!1),q!==2){if(Ww&&!pe){te.errorRecoveryDisabledLanes|=R,Sf|=R,C=4;break e}R=Cs,Cs=C,R!==null&&(Cs===null?Cs=R:Cs.push.apply(Cs,R))}C=q}if(R=!1,C!==2)continue}}if(C===1){eh(s,0),ac(s,u,0,!0);break}e:{switch(w=s,R=C,R){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:ac(w,u,Xs,!tc);break e;case 2:Cs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(C=h1+300-hr(),10<C)){if(ac(w,u,Xs,!tc),Va(w,0,!0)!==0)break e;nu=u,w.timeoutHandle=VN(cN.bind(null,w,g,Cs,g1,Yw,u,Xs,Sf,Zd,tc,R,"Throttled",-0,0),C);break e}cN(w,g,Cs,g1,Yw,u,Xs,Sf,Zd,tc,R,null,-0,0)}}break}while(!0);cl(s)}function cN(s,u,g,w,C,R,q,te,pe,Re,Ue,Qe,je,Be){if(s.timeoutHandle=-1,Qe=u.subtreeFlags,Qe&8192||(Qe&16785408)===16785408){Qe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_i},nN(u,R,Qe);var Ct=(R&62914560)===R?h1-hr():(R&4194048)===R?sN-hr():0;if(Ct=AG(Qe,Ct),Ct!==null){nu=R,s.cancelPendingCommit=Ct(vN.bind(null,s,u,R,g,w,C,q,te,pe,Ue,Qe,null,je,Be)),ac(s,R,q,!Re);return}}vN(s,u,R,g,w,C,q,te,pe)}function Vq(s){for(var u=s;;){var g=u.tag;if((g===0||g===11||g===15)&&u.flags&16384&&(g=u.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var w=0;w<g.length;w++){var C=g[w],R=C.getSnapshot;C=C.value;try{if(!E(R(),C))return!1}catch{return!1}}if(g=u.child,u.subtreeFlags&16384&&g!==null)g.return=u,u=g;else{if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ac(s,u,g,w){u&=~$w,u&=~Sf,s.suspendedLanes|=u,s.pingedLanes&=~u,w&&(s.warmLanes|=u),w=s.expirationTimes;for(var C=u;0<C;){var R=31-Ze(C),q=1<<R;w[R]=-1,C&=~q}g!==0&&ys(s,g,u)}function p1(){return(Xn&6)===0?(dg(0),!1):!0}function Jw(){if(On!==null){if(sr===0)var s=On.return;else s=On,Hl=pf=null,gw(s),Gd=null,$m=0,s=On;for(;s!==null;)z3(s.alternate,s),s=s.return;On=null}}function eh(s,u){var g=s.timeoutHandle;g!==-1&&(s.timeoutHandle=-1,sG(g)),g=s.cancelPendingCommit,g!==null&&(s.cancelPendingCommit=null,g()),nu=0,Jw(),Cr=s,On=g=ql(s.current,null),Pn=u,sr=0,Ys=null,tc=!1,Qd=Er(s,u),Ww=!1,Zd=Xs=$w=Sf=nc=mi=0,Cs=cg=null,Yw=!1,(u&8)!==0&&(u|=u&32);var w=s.entangledLanes;if(w!==0)for(s=s.entanglements,w&=u;0<w;){var C=31-Ze(w),R=1<<C;u|=s[C],w&=~R}return tu=u,Jt(),g}function fN(s,u){un=null,ye.H=ng,u===qd||u===H0?(u=IO(),sr=3):u===rw?(u=IO(),sr=4):sr=u===Pw?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ys=u,On===null&&(mi=1,a1(s,ho(u,s.current)))}function dN(){var s=Ws.current;return s===null?!0:(Pn&4194048)===Pn?yo===null:(Pn&62914560)===Pn||(Pn&536870912)!==0?s===yo:!1}function hN(){var s=ye.H;return ye.H=ng,s===null?ng:s}function mN(){var s=ye.A;return ye.A=Bq,s}function y1(){mi=4,tc||(Pn&4194048)!==Pn&&Ws.current!==null||(Qd=!0),(nc&134217727)===0&&(Sf&134217727)===0||Cr===null||ac(Cr,Pn,Xs,!1)}function e_(s,u,g){var w=Xn;Xn|=2;var C=hN(),R=mN();(Cr!==s||Pn!==u)&&(g1=null,eh(s,u)),u=!1;var q=mi;e:do try{if(sr!==0&&On!==null){var te=On,pe=Ys;switch(sr){case 8:Jw(),q=6;break e;case 3:case 2:case 9:case 6:Ws.current===null&&(u=!0);var Re=sr;if(sr=0,Ys=null,th(s,te,pe,Re),g&&Qd){q=0;break e}break;default:Re=sr,sr=0,Ys=null,th(s,te,pe,Re)}}zq(),q=mi;break}catch(Ue){fN(s,Ue)}while(!0);return u&&s.shellSuspendCounter++,Hl=pf=null,Xn=w,ye.H=C,ye.A=R,On===null&&(Cr=null,Pn=0,Jt()),q}function zq(){for(;On!==null;)gN(On)}function Uq(s,u){var g=Xn;Xn|=2;var w=hN(),C=mN();Cr!==s||Pn!==u?(g1=null,m1=hr()+500,eh(s,u)):Qd=Er(s,u);e:do try{if(sr!==0&&On!==null){u=On;var R=Ys;t:switch(sr){case 1:sr=0,Ys=null,th(s,u,R,1);break;case 2:case 9:if(SO(R)){sr=0,Ys=null,pN(u);break}u=function(){sr!==2&&sr!==9||Cr!==s||(sr=7),cl(s)},R.then(u,u);break e;case 3:sr=7;break e;case 4:sr=5;break e;case 7:SO(R)?(sr=0,Ys=null,pN(u)):(sr=0,Ys=null,th(s,u,R,7));break;case 5:var q=null;switch(On.tag){case 26:q=On.memoizedState;case 5:case 27:var te=On;if(q?tP(q):te.stateNode.complete){sr=0,Ys=null;var pe=te.sibling;if(pe!==null)On=pe;else{var Re=te.return;Re!==null?(On=Re,v1(Re)):On=null}break t}}sr=0,Ys=null,th(s,u,R,5);break;case 6:sr=0,Ys=null,th(s,u,R,6);break;case 8:Jw(),mi=6;break e;default:throw Error(r(462))}}qq();break}catch(Ue){fN(s,Ue)}while(!0);return Hl=pf=null,ye.H=w,ye.A=C,Xn=g,On!==null?0:(Cr=null,Pn=0,Jt(),mi)}function qq(){for(;On!==null&&!na();)gN(On)}function gN(s){var u=F3(s.alternate,s,tu);s.memoizedProps=s.pendingProps,u===null?v1(s):On=u}function pN(s){var u=s,g=u.alternate;switch(u.tag){case 15:case 0:u=D3(g,u,u.pendingProps,u.type,void 0,Pn);break;case 11:u=D3(g,u,u.pendingProps,u.type.render,u.ref,Pn);break;case 5:gw(u);default:z3(g,u),u=On=mO(u,tu),u=F3(g,u,tu)}s.memoizedProps=s.pendingProps,u===null?v1(s):On=u}function th(s,u,g,w){Hl=pf=null,gw(u),Gd=null,$m=0;var C=u.return;try{if(Pq(s,C,u,g,Pn)){mi=1,a1(s,ho(g,s.current)),On=null;return}}catch(R){if(C!==null)throw On=C,R;mi=1,a1(s,ho(g,s.current)),On=null;return}u.flags&32768?(jn||w===1?s=!0:Qd||(Pn&536870912)!==0?s=!1:(tc=s=!0,(w===2||w===9||w===3||w===6)&&(w=Ws.current,w!==null&&w.tag===13&&(w.flags|=16384))),yN(u,s)):v1(u)}function v1(s){var u=s;do{if((u.flags&32768)!==0){yN(u,tc);return}s=u.return;var g=kq(u.alternate,u,tu);if(g!==null){On=g;return}if(u=u.sibling,u!==null){On=u;return}On=u=s}while(u!==null);mi===0&&(mi=5)}function yN(s,u){do{var g=Mq(s.alternate,s);if(g!==null){g.flags&=32767,On=g;return}if(g=s.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!u&&(s=s.sibling,s!==null)){On=s;return}On=s=g}while(s!==null);mi=6,On=null}function vN(s,u,g,w,C,R,q,te,pe){s.cancelPendingCommit=null;do x1();while(Ki!==0);if((Xn&6)!==0)throw Error(r(327));if(u!==null){if(u===s.current)throw Error(r(177));if(R=u.lanes|u.childLanes,R|=Bt,ra(s,g,R,q,te,pe),s===Cr&&(On=Cr=null,Pn=0),Jd=u,ic=s,nu=g,Xw=R,Qw=C,oN=w,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Wq(bi,function(){return EN(),null})):(s.callbackNode=null,s.callbackPriority=0),w=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||w){w=ye.T,ye.T=null,C=_e.p,_e.p=2,q=Xn,Xn|=4;try{jq(s,u,g)}finally{Xn=q,_e.p=C,ye.T=w}}Ki=1,xN(),bN(),wN()}}function xN(){if(Ki===1){Ki=0;var s=ic,u=Jd,g=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||g){g=ye.T,ye.T=null;var w=_e.p;_e.p=2;var C=Xn;Xn|=4;try{J3(u,s);var R=d_,q=P(s.containerInfo),te=R.focusedElem,pe=R.selectionRange;if(q!==te&&te&&te.ownerDocument&&I(te.ownerDocument.documentElement,te)){if(pe!==null&&k(te)){var Re=pe.start,Ue=pe.end;if(Ue===void 0&&(Ue=Re),"selectionStart"in te)te.selectionStart=Re,te.selectionEnd=Math.min(Ue,te.value.length);else{var Qe=te.ownerDocument||document,je=Qe&&Qe.defaultView||window;if(je.getSelection){var Be=je.getSelection(),Ct=te.textContent.length,qt=Math.min(pe.start,Ct),vr=pe.end===void 0?qt:Math.min(pe.end,Ct);!Be.extend&&qt>vr&&(q=vr,vr=qt,qt=q);var Ee=A(te,qt),ve=A(te,vr);if(Ee&&ve&&(Be.rangeCount!==1||Be.anchorNode!==Ee.node||Be.anchorOffset!==Ee.offset||Be.focusNode!==ve.node||Be.focusOffset!==ve.offset)){var Pe=Qe.createRange();Pe.setStart(Ee.node,Ee.offset),Be.removeAllRanges(),qt>vr?(Be.addRange(Pe),Be.extend(ve.node,ve.offset)):(Pe.setEnd(ve.node,ve.offset),Be.addRange(Pe))}}}}for(Qe=[],Be=te;Be=Be.parentNode;)Be.nodeType===1&&Qe.push({element:Be,left:Be.scrollLeft,top:Be.scrollTop});for(typeof te.focus=="function"&&te.focus(),te=0;te<Qe.length;te++){var Ke=Qe[te];Ke.element.scrollLeft=Ke.left,Ke.element.scrollTop=Ke.top}}P1=!!f_,d_=f_=null}finally{Xn=C,_e.p=w,ye.T=g}}s.current=u,Ki=2}}function bN(){if(Ki===2){Ki=0;var s=ic,u=Jd,g=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||g){g=ye.T,ye.T=null;var w=_e.p;_e.p=2;var C=Xn;Xn|=4;try{$3(s,u.alternate,u)}finally{Xn=C,_e.p=w,ye.T=g}}Ki=3}}function wN(){if(Ki===4||Ki===3){Ki=0,zs();var s=ic,u=Jd,g=nu,w=oN;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Ki=5:(Ki=0,Jd=ic=null,_N(s,s.pendingLanes));var C=s.pendingLanes;if(C===0&&(rc=null),ci(g),u=u.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(In,u,void 0,(u.current.flags&128)===128)}catch{}if(w!==null){u=ye.T,C=_e.p,_e.p=2,ye.T=null;try{for(var R=s.onRecoverableError,q=0;q<w.length;q++){var te=w[q];R(te.value,{componentStack:te.stack})}}finally{ye.T=u,_e.p=C}}(nu&3)!==0&&x1(),cl(s),C=s.pendingLanes,(g&261930)!==0&&(C&42)!==0?s===Zw?fg++:(fg=0,Zw=s):fg=0,dg(0)}}function _N(s,u){(s.pooledCacheLanes&=u)===0&&(u=s.pooledCache,u!=null&&(s.pooledCache=null,Km(u)))}function x1(){return xN(),bN(),wN(),EN()}function EN(){if(Ki!==5)return!1;var s=ic,u=Xw;Xw=0;var g=ci(nu),w=ye.T,C=_e.p;try{_e.p=32>g?32:g,ye.T=null,g=Qw,Qw=null;var R=ic,q=nu;if(Ki=0,Jd=ic=null,nu=0,(Xn&6)!==0)throw Error(r(331));var te=Xn;if(Xn|=4,iN(R.current),tN(R,R.current,q,g),Xn=te,dg(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(In,R)}catch{}return!0}finally{_e.p=C,ye.T=w,_N(s,u)}}function AN(s,u,g){u=ho(g,u),u=Nw(s.stateNode,u,2),s=Qu(s,u,2),s!==null&&(qi(s,2),cl(s))}function or(s,u,g){if(s.tag===3)AN(s,s,g);else for(;u!==null;){if(u.tag===3){AN(u,s,g);break}else if(u.tag===1){var w=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(rc===null||!rc.has(w))){s=ho(g,s),g=S3(2),w=Qu(u,g,2),w!==null&&(T3(g,w,u,s),qi(w,2),cl(w));break}}u=u.return}}function t_(s,u,g){var w=s.pingCache;if(w===null){w=s.pingCache=new Fq;var C=new Set;w.set(u,C)}else C=w.get(u),C===void 0&&(C=new Set,w.set(u,C));C.has(g)||(Ww=!0,C.add(g),s=Gq.bind(null,s,u,g),u.then(s,s))}function Gq(s,u,g){var w=s.pingCache;w!==null&&w.delete(u),s.pingedLanes|=s.suspendedLanes&g,s.warmLanes&=~g,Cr===s&&(Pn&g)===g&&(mi===4||mi===3&&(Pn&62914560)===Pn&&300>hr()-h1?(Xn&2)===0&&eh(s,0):$w|=g,Zd===Pn&&(Zd=0)),cl(s)}function SN(s,u){u===0&&(u=ii()),s=tr(s,u),s!==null&&(qi(s,u),cl(s))}function Hq(s){var u=s.memoizedState,g=0;u!==null&&(g=u.retryLane),SN(s,g)}function Kq(s,u){var g=0;switch(s.tag){case 31:case 13:var w=s.stateNode,C=s.memoizedState;C!==null&&(g=C.retryLane);break;case 19:w=s.stateNode;break;case 22:w=s.stateNode._retryCache;break;default:throw Error(r(314))}w!==null&&w.delete(u),SN(s,g)}function Wq(s,u){return Zt(s,u)}var b1=null,nh=null,n_=!1,w1=!1,r_=!1,sc=0;function cl(s){s!==nh&&s.next===null&&(nh===null?b1=nh=s:nh=nh.next=s),w1=!0,n_||(n_=!0,Yq())}function dg(s,u){if(!r_&&w1){r_=!0;do for(var g=!1,w=b1;w!==null;){if(s!==0){var C=w.pendingLanes;if(C===0)var R=0;else{var q=w.suspendedLanes,te=w.pingedLanes;R=(1<<31-Ze(42|s)+1)-1,R&=C&~(q&~te),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(g=!0,ON(w,R))}else R=Pn,R=Va(w,w===Cr?R:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(R&3)===0||Er(w,R)||(g=!0,ON(w,R));w=w.next}while(g);r_=!1}}function $q(){TN()}function TN(){w1=n_=!1;var s=0;sc!==0&&aG()&&(s=sc);for(var u=hr(),g=null,w=b1;w!==null;){var C=w.next,R=IN(w,u);R===0?(w.next=null,g===null?b1=C:g.next=C,C===null&&(nh=g)):(g=w,(s!==0||(R&3)!==0)&&(w1=!0)),w=C}Ki!==0&&Ki!==5||dg(s),sc!==0&&(sc=0)}function IN(s,u){for(var g=s.suspendedLanes,w=s.pingedLanes,C=s.expirationTimes,R=s.pendingLanes&-62914561;0<R;){var q=31-Ze(R),te=1<<q,pe=C[q];pe===-1?((te&g)===0||(te&w)!==0)&&(C[q]=Ll(te,u)):pe<=u&&(s.expiredLanes|=te),R&=~te}if(u=Cr,g=Pn,g=Va(s,s===u?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),w=s.callbackNode,g===0||s===u&&(sr===2||sr===9)||s.cancelPendingCommit!==null)return w!==null&&w!==null&&at(w),s.callbackNode=null,s.callbackPriority=0;if((g&3)===0||Er(s,g)){if(u=g&-g,u===s.callbackPriority)return u;switch(w!==null&&at(w),ci(g)){case 2:case 8:g=Fa;break;case 32:g=bi;break;case 268435456:g=Ro;break;default:g=bi}return w=CN.bind(null,s),g=Zt(g,w),s.callbackPriority=u,s.callbackNode=g,u}return w!==null&&w!==null&&at(w),s.callbackPriority=2,s.callbackNode=null,2}function CN(s,u){if(Ki!==0&&Ki!==5)return s.callbackNode=null,s.callbackPriority=0,null;var g=s.callbackNode;if(x1()&&s.callbackNode!==g)return null;var w=Pn;return w=Va(s,s===Cr?w:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),w===0?null:(uN(s,w,u),IN(s,hr()),s.callbackNode!=null&&s.callbackNode===g?CN.bind(null,s):null)}function ON(s,u){if(x1())return null;uN(s,u,!0)}function Yq(){oG(function(){(Xn&6)!==0?Zt($n,$q):TN()})}function i_(){if(sc===0){var s=zd;s===0&&(s=ft,ft<<=1,(ft&261888)===0&&(ft=256)),sc=s}return sc}function NN(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:_a(""+s)}function PN(s,u){var g=u.ownerDocument.createElement("input");return g.name=u.name,g.value=u.value,s.id&&g.setAttribute("form",s.id),u.parentNode.insertBefore(g,u),s=new FormData(s),g.parentNode.removeChild(g),s}function Xq(s,u,g,w,C){if(u==="submit"&&g&&g.stateNode===C){var R=NN((C[gn]||null).action),q=w.submitter;q&&(u=(u=q[gn]||null)?NN(u.formAction):q.getAttribute("formAction"),u!==null&&(R=u,q=null));var te=new Ir("action","action",null,w,C);s.push({event:te,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(sc!==0){var pe=q?PN(C,q):new FormData(C);Aw(g,{pending:!0,data:pe,method:C.method,action:R},null,pe)}}else typeof R=="function"&&(te.preventDefault(),pe=q?PN(C,q):new FormData(C),Aw(g,{pending:!0,data:pe,method:C.method,action:R},R,pe))},currentTarget:C}]})}}for(var a_=0;a_<gt.length;a_++){var s_=gt[a_],Qq=s_.toLowerCase(),Zq=s_[0].toUpperCase()+s_.slice(1);it(Qq,"on"+Zq)}it(Ce,"onAnimationEnd"),it(be,"onAnimationIteration"),it(Me,"onAnimationStart"),it("dblclick","onDoubleClick"),it("focusin","onFocus"),it("focusout","onBlur"),it(He,"onTransitionRun"),it(lt,"onTransitionStart"),it(ct,"onTransitionCancel"),it(tt,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),Cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hg));function RN(s,u){u=(u&4)!==0;for(var g=0;g<s.length;g++){var w=s[g],C=w.event;w=w.listeners;e:{var R=void 0;if(u)for(var q=w.length-1;0<=q;q--){var te=w[q],pe=te.instance,Re=te.currentTarget;if(te=te.listener,pe!==R&&C.isPropagationStopped())break e;R=te,C.currentTarget=Re;try{R(C)}catch(Ue){xt(Ue)}C.currentTarget=null,R=pe}else for(q=0;q<w.length;q++){if(te=w[q],pe=te.instance,Re=te.currentTarget,te=te.listener,pe!==R&&C.isPropagationStopped())break e;R=te,C.currentTarget=Re;try{R(C)}catch(Ue){xt(Ue)}C.currentTarget=null,R=pe}}}}function Nn(s,u){var g=u[za];g===void 0&&(g=u[za]=new Set);var w=s+"__bubble";g.has(w)||(DN(u,s,2,!1),g.add(w))}function o_(s,u,g){var w=0;u&&(w|=4),DN(g,s,w,u)}var _1="_reactListening"+Math.random().toString(36).slice(2);function l_(s){if(!s[_1]){s[_1]=!0,Ge.forEach(function(g){g!=="selectionchange"&&(Jq.has(g)||o_(g,!1,s),o_(g,!0,s))});var u=s.nodeType===9?s:s.ownerDocument;u===null||u[_1]||(u[_1]=!0,o_("selectionchange",!1,u))}}function DN(s,u,g,w){switch(lP(u)){case 2:var C=IG;break;case 8:C=CG;break;default:C=E_}g=C.bind(null,u,g,s),C=void 0,!Do||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(C=!0),w?C!==void 0?s.addEventListener(u,g,{capture:!0,passive:C}):s.addEventListener(u,g,!0):C!==void 0?s.addEventListener(u,g,{passive:C}):s.addEventListener(u,g,!1)}function u_(s,u,g,w,C){var R=w;if((u&1)===0&&(u&2)===0&&w!==null)e:for(;;){if(w===null)return;var q=w.tag;if(q===3||q===4){var te=w.stateNode.containerInfo;if(te===C)break;if(q===4)for(q=w.return;q!==null;){var pe=q.tag;if((pe===3||pe===4)&&q.stateNode.containerInfo===C)return;q=q.return}for(;te!==null;){if(q=Qn(te),q===null)return;if(pe=q.tag,pe===5||pe===6||pe===26||pe===27){w=R=q;continue e}te=te.parentNode}}w=w.return}Ua(function(){var Re=R,Ue=Ea(g),Qe=[];e:{var je=vt.get(s);if(je!==void 0){var Be=Ir,Ct=s;switch(s){case"keypress":if(Ta(g)===0)break e;case"keydown":case"keyup":Be=ws;break;case"focusin":Ct="focus",Be=bs;break;case"focusout":Ct="blur",Be=bs;break;case"beforeblur":case"afterblur":Be=bs;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=En;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=co;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=B;break;case Ce:case be:case Me:Be=Yt;break;case tt:Be=se;break;case"scroll":case"scrollend":Be=Gs;break;case"wheel":Be=Le;break;case"copy":case"cut":case"paste":Be=Ka;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=pn;break;case"toggle":case"beforetoggle":Be=Gt}var qt=(u&4)!==0,vr=!qt&&(s==="scroll"||s==="scrollend"),Ee=qt?je!==null?je+"Capture":null:je;qt=[];for(var ve=Re,Pe;ve!==null;){var Ke=ve;if(Pe=Ke.stateNode,Ke=Ke.tag,Ke!==5&&Ke!==26&&Ke!==27||Pe===null||Ee===null||(Ke=Lt(ve,Ee),Ke!=null&&qt.push(mg(ve,Ke,Pe))),vr)break;ve=ve.return}0<qt.length&&(je=new Be(je,Ct,null,g,Ue),Qe.push({event:je,listeners:qt}))}}if((u&7)===0){e:{if(je=s==="mouseover"||s==="pointerover",Be=s==="mouseout"||s==="pointerout",je&&g!==ia&&(Ct=g.relatedTarget||g.fromElement)&&(Qn(Ct)||Ct[Nr]))break e;if((Be||je)&&(je=Ue.window===Ue?Ue:(je=Ue.ownerDocument)?je.defaultView||je.parentWindow:window,Be?(Ct=g.relatedTarget||g.toElement,Be=Re,Ct=Ct?Qn(Ct):null,Ct!==null&&(vr=a(Ct),qt=Ct.tag,Ct!==vr||qt!==5&&qt!==27&&qt!==6)&&(Ct=null)):(Be=null,Ct=Re),Be!==Ct)){if(qt=En,Ke="onMouseLeave",Ee="onMouseEnter",ve="mouse",(s==="pointerout"||s==="pointerover")&&(qt=pn,Ke="onPointerLeave",Ee="onPointerEnter",ve="pointer"),vr=Be==null?je:$r(Be),Pe=Ct==null?je:$r(Ct),je=new qt(Ke,ve+"leave",Be,g,Ue),je.target=vr,je.relatedTarget=Pe,Ke=null,Qn(Ue)===Re&&(qt=new qt(Ee,ve+"enter",Ct,g,Ue),qt.target=Pe,qt.relatedTarget=vr,Ke=qt),vr=Ke,Be&&Ct)t:{for(qt=eG,Ee=Be,ve=Ct,Pe=0,Ke=Ee;Ke;Ke=qt(Ke))Pe++;Ke=0;for(var Ft=ve;Ft;Ft=qt(Ft))Ke++;for(;0<Pe-Ke;)Ee=qt(Ee),Pe--;for(;0<Ke-Pe;)ve=qt(ve),Ke--;for(;Pe--;){if(Ee===ve||ve!==null&&Ee===ve.alternate){qt=Ee;break t}Ee=qt(Ee),ve=qt(ve)}qt=null}else qt=null;Be!==null&&kN(Qe,je,Be,qt,!1),Ct!==null&&vr!==null&&kN(Qe,vr,Ct,qt,!0)}}e:{if(je=Re?$r(Re):window,Be=je.nodeName&&je.nodeName.toLowerCase(),Be==="select"||Be==="input"&&je.type==="file")var Un=la;else if(Vl(je))if(Es)Un=y;else{Un=c;var Dt=o}else Be=je.nodeName,!Be||Be.toLowerCase()!=="input"||je.type!=="checkbox"&&je.type!=="radio"?Re&&Vn(Re.elementType)&&(Un=la):Un=h;if(Un&&(Un=Un(s,Re))){Ya(Qe,Un,g,Ue);break e}Dt&&Dt(s,je,Re),s==="focusout"&&Re&&je.type==="number"&&Re.memoizedProps.value!=null&&ce(je,"number",je.value)}switch(Dt=Re?$r(Re):window,s){case"focusin":(Vl(Dt)||Dt.contentEditable==="true")&&(G=Dt,Q=Re,re=null);break;case"focusout":re=Q=G=null;break;case"mousedown":ne=!0;break;case"contextmenu":case"mouseup":case"dragend":ne=!1,oe(Qe,g,Ue);break;case"selectionchange":if(F)break;case"keydown":case"keyup":oe(Qe,g,Ue)}var dn;if(bn)e:{switch(s){case"compositionstart":var Rn="onCompositionStart";break e;case"compositionend":Rn="onCompositionEnd";break e;case"compositionupdate":Rn="onCompositionUpdate";break e}Rn=void 0}else Mo?fo(s,g)&&(Rn="onCompositionEnd"):s==="keydown"&&g.keyCode===229&&(Rn="onCompositionStart");Rn&&($a&&g.locale!=="ko"&&(Mo||Rn!=="onCompositionStart"?Rn==="onCompositionEnd"&&Mo&&(dn=Sa()):(Aa=Ue,qa="value"in Aa?Aa.value:Aa.textContent,Mo=!0)),Dt=E1(Re,Rn),0<Dt.length&&(Rn=new Wa(Rn,s,null,g,Ue),Qe.push({event:Rn,listeners:Dt}),dn?Rn.data=dn:(dn=_s(g),dn!==null&&(Rn.data=dn)))),(dn=Ca?Hs(s,g):qu(s,g))&&(Rn=E1(Re,"onBeforeInput"),0<Rn.length&&(Dt=new Wa("onBeforeInput","beforeinput",null,g,Ue),Qe.push({event:Dt,listeners:Rn}),Dt.data=dn)),Xq(Qe,s,Re,g,Ue)}RN(Qe,u)})}function mg(s,u,g){return{instance:s,listener:u,currentTarget:g}}function E1(s,u){for(var g=u+"Capture",w=[];s!==null;){var C=s,R=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||R===null||(C=Lt(s,g),C!=null&&w.unshift(mg(s,C,R)),C=Lt(s,u),C!=null&&w.push(mg(s,C,R))),s.tag===3)return w;s=s.return}return[]}function eG(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function kN(s,u,g,w,C){for(var R=u._reactName,q=[];g!==null&&g!==w;){var te=g,pe=te.alternate,Re=te.stateNode;if(te=te.tag,pe!==null&&pe===w)break;te!==5&&te!==26&&te!==27||Re===null||(pe=Re,C?(Re=Lt(g,R),Re!=null&&q.unshift(mg(g,Re,pe))):C||(Re=Lt(g,R),Re!=null&&q.push(mg(g,Re,pe)))),g=g.return}q.length!==0&&s.push({event:u,listeners:q})}var tG=/\r\n?/g,nG=/\u0000|\uFFFD/g;function MN(s){return(typeof s=="string"?s:""+s).replace(tG,`
`).replace(nG,"")}function jN(s,u){return u=MN(u),MN(s)===u}function yr(s,u,g,w,C,R){switch(g){case"children":typeof w=="string"?u==="body"||u==="textarea"&&w===""||Hi(s,w):(typeof w=="number"||typeof w=="bigint")&&u!=="body"&&Hi(s,""+w);break;case"className":Di(s,"class",w);break;case"tabIndex":Di(s,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Di(s,g,w);break;case"style":Nt(s,w,R);break;case"data":if(u!=="object"){Di(s,"data",w);break}case"src":case"href":if(w===""&&(u!=="a"||g!=="href")){s.removeAttribute(g);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){s.removeAttribute(g);break}w=_a(""+w),s.setAttribute(g,w);break;case"action":case"formAction":if(typeof w=="function"){s.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(g==="formAction"?(u!=="input"&&yr(s,u,"name",C.name,C,null),yr(s,u,"formEncType",C.formEncType,C,null),yr(s,u,"formMethod",C.formMethod,C,null),yr(s,u,"formTarget",C.formTarget,C,null)):(yr(s,u,"encType",C.encType,C,null),yr(s,u,"method",C.method,C,null),yr(s,u,"target",C.target,C,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){s.removeAttribute(g);break}w=_a(""+w),s.setAttribute(g,w);break;case"onClick":w!=null&&(s.onclick=_i);break;case"onScroll":w!=null&&Nn("scroll",s);break;case"onScrollEnd":w!=null&&Nn("scrollend",s);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(g=w.__html,g!=null){if(C.children!=null)throw Error(r(60));s.innerHTML=g}}break;case"multiple":s.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":s.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){s.removeAttribute("xlink:href");break}g=_a(""+w),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(g,""+w):s.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(g,""):s.removeAttribute(g);break;case"capture":case"download":w===!0?s.setAttribute(g,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(g,w):s.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?s.setAttribute(g,w):s.removeAttribute(g);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?s.removeAttribute(g):s.setAttribute(g,w);break;case"popover":Nn("beforetoggle",s),Nn("toggle",s),Qt(s,"popover",w);break;case"xlinkActuate":Sr(s,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":Sr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":Sr(s,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":Sr(s,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":Sr(s,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":Sr(s,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":Sr(s,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":Sr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":Sr(s,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":Qt(s,"is",w);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=Fl.get(g)||g,Qt(s,g,w))}}function c_(s,u,g,w,C,R){switch(g){case"style":Nt(s,w,R);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(g=w.__html,g!=null){if(C.children!=null)throw Error(r(60));s.innerHTML=g}}break;case"children":typeof w=="string"?Hi(s,w):(typeof w=="number"||typeof w=="bigint")&&Hi(s,""+w);break;case"onScroll":w!=null&&Nn("scroll",s);break;case"onScrollEnd":w!=null&&Nn("scrollend",s);break;case"onClick":w!=null&&(s.onclick=_i);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uo.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(C=g.endsWith("Capture"),u=g.slice(2,C?g.length-7:void 0),R=s[gn]||null,R=R!=null?R[g]:null,typeof R=="function"&&s.removeEventListener(u,R,C),typeof w=="function")){typeof R!="function"&&R!==null&&(g in s?s[g]=null:s.hasAttribute(g)&&s.removeAttribute(g)),s.addEventListener(u,w,C);break e}g in s?s[g]=w:w===!0?s.setAttribute(g,""):Qt(s,g,w)}}}function ka(s,u,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nn("error",s),Nn("load",s);var w=!1,C=!1,R;for(R in g)if(g.hasOwnProperty(R)){var q=g[R];if(q!=null)switch(R){case"src":w=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:yr(s,u,R,q,g,null)}}C&&yr(s,u,"srcSet",g.srcSet,g,null),w&&yr(s,u,"src",g.src,g,null);return;case"input":Nn("invalid",s);var te=R=q=C=null,pe=null,Re=null;for(w in g)if(g.hasOwnProperty(w)){var Ue=g[w];if(Ue!=null)switch(w){case"name":C=Ue;break;case"type":q=Ue;break;case"checked":pe=Ue;break;case"defaultChecked":Re=Ue;break;case"value":R=Ue;break;case"defaultValue":te=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(r(137,u));break;default:yr(s,u,w,Ue,g,null)}}Te(s,R,te,pe,Re,q,C,!1);return;case"select":Nn("invalid",s),w=q=R=null;for(C in g)if(g.hasOwnProperty(C)&&(te=g[C],te!=null))switch(C){case"value":R=te;break;case"defaultValue":q=te;break;case"multiple":w=te;default:yr(s,u,C,te,g,null)}u=R,g=q,s.multiple=!!w,u!=null?wt(s,!!w,u,!1):g!=null&&wt(s,!!w,g,!0);return;case"textarea":Nn("invalid",s),R=C=w=null;for(q in g)if(g.hasOwnProperty(q)&&(te=g[q],te!=null))switch(q){case"value":w=te;break;case"defaultValue":C=te;break;case"children":R=te;break;case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(91));break;default:yr(s,u,q,te,g,null)}Rr(s,w,C,R);return;case"option":for(pe in g)g.hasOwnProperty(pe)&&(w=g[pe],w!=null)&&(pe==="selected"?s.selected=w&&typeof w!="function"&&typeof w!="symbol":yr(s,u,pe,w,g,null));return;case"dialog":Nn("beforetoggle",s),Nn("toggle",s),Nn("cancel",s),Nn("close",s);break;case"iframe":case"object":Nn("load",s);break;case"video":case"audio":for(w=0;w<hg.length;w++)Nn(hg[w],s);break;case"image":Nn("error",s),Nn("load",s);break;case"details":Nn("toggle",s);break;case"embed":case"source":case"link":Nn("error",s),Nn("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Re in g)if(g.hasOwnProperty(Re)&&(w=g[Re],w!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:yr(s,u,Re,w,g,null)}return;default:if(Vn(u)){for(Ue in g)g.hasOwnProperty(Ue)&&(w=g[Ue],w!==void 0&&c_(s,u,Ue,w,g,void 0));return}}for(te in g)g.hasOwnProperty(te)&&(w=g[te],w!=null&&yr(s,u,te,w,g,null))}function rG(s,u,g,w){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,R=null,q=null,te=null,pe=null,Re=null,Ue=null;for(Be in g){var Qe=g[Be];if(g.hasOwnProperty(Be)&&Qe!=null)switch(Be){case"checked":break;case"value":break;case"defaultValue":pe=Qe;default:w.hasOwnProperty(Be)||yr(s,u,Be,null,w,Qe)}}for(var je in w){var Be=w[je];if(Qe=g[je],w.hasOwnProperty(je)&&(Be!=null||Qe!=null))switch(je){case"type":R=Be;break;case"name":C=Be;break;case"checked":Re=Be;break;case"defaultChecked":Ue=Be;break;case"value":q=Be;break;case"defaultValue":te=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(r(137,u));break;default:Be!==Qe&&yr(s,u,je,Be,w,Qe)}}Zn(s,q,te,pe,Re,Ue,R,C);return;case"select":Be=q=te=je=null;for(R in g)if(pe=g[R],g.hasOwnProperty(R)&&pe!=null)switch(R){case"value":break;case"multiple":Be=pe;default:w.hasOwnProperty(R)||yr(s,u,R,null,w,pe)}for(C in w)if(R=w[C],pe=g[C],w.hasOwnProperty(C)&&(R!=null||pe!=null))switch(C){case"value":je=R;break;case"defaultValue":te=R;break;case"multiple":q=R;default:R!==pe&&yr(s,u,C,R,w,pe)}u=te,g=q,w=Be,je!=null?wt(s,!!g,je,!1):!!w!=!!g&&(u!=null?wt(s,!!g,u,!0):wt(s,!!g,g?[]:"",!1));return;case"textarea":Be=je=null;for(te in g)if(C=g[te],g.hasOwnProperty(te)&&C!=null&&!w.hasOwnProperty(te))switch(te){case"value":break;case"children":break;default:yr(s,u,te,null,w,C)}for(q in w)if(C=w[q],R=g[q],w.hasOwnProperty(q)&&(C!=null||R!=null))switch(q){case"value":je=C;break;case"defaultValue":Be=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==R&&yr(s,u,q,C,w,R)}Pr(s,je,Be);return;case"option":for(var Ct in g)je=g[Ct],g.hasOwnProperty(Ct)&&je!=null&&!w.hasOwnProperty(Ct)&&(Ct==="selected"?s.selected=!1:yr(s,u,Ct,null,w,je));for(pe in w)je=w[pe],Be=g[pe],w.hasOwnProperty(pe)&&je!==Be&&(je!=null||Be!=null)&&(pe==="selected"?s.selected=je&&typeof je!="function"&&typeof je!="symbol":yr(s,u,pe,je,w,Be));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qt in g)je=g[qt],g.hasOwnProperty(qt)&&je!=null&&!w.hasOwnProperty(qt)&&yr(s,u,qt,null,w,je);for(Re in w)if(je=w[Re],Be=g[Re],w.hasOwnProperty(Re)&&je!==Be&&(je!=null||Be!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(r(137,u));break;default:yr(s,u,Re,je,w,Be)}return;default:if(Vn(u)){for(var vr in g)je=g[vr],g.hasOwnProperty(vr)&&je!==void 0&&!w.hasOwnProperty(vr)&&c_(s,u,vr,void 0,w,je);for(Ue in w)je=w[Ue],Be=g[Ue],!w.hasOwnProperty(Ue)||je===Be||je===void 0&&Be===void 0||c_(s,u,Ue,je,w,Be);return}}for(var Ee in g)je=g[Ee],g.hasOwnProperty(Ee)&&je!=null&&!w.hasOwnProperty(Ee)&&yr(s,u,Ee,null,w,je);for(Qe in w)je=w[Qe],Be=g[Qe],!w.hasOwnProperty(Qe)||je===Be||je==null&&Be==null||yr(s,u,Qe,je,w,Be)}function LN(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function iG(){if(typeof performance.getEntriesByType=="function"){for(var s=0,u=0,g=performance.getEntriesByType("resource"),w=0;w<g.length;w++){var C=g[w],R=C.transferSize,q=C.initiatorType,te=C.duration;if(R&&te&&LN(q)){for(q=0,te=C.responseEnd,w+=1;w<g.length;w++){var pe=g[w],Re=pe.startTime;if(Re>te)break;var Ue=pe.transferSize,Qe=pe.initiatorType;Ue&&LN(Qe)&&(pe=pe.responseEnd,q+=Ue*(pe<te?1:(te-Re)/(pe-Re)))}if(--w,u+=8*(R+q)/(C.duration/1e3),s++,10<s)break}}if(0<s)return u/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var f_=null,d_=null;function A1(s){return s.nodeType===9?s:s.ownerDocument}function BN(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function FN(s,u){if(s===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&u==="foreignObject"?0:s}function h_(s,u){return s==="textarea"||s==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var m_=null;function aG(){var s=window.event;return s&&s.type==="popstate"?s===m_?!1:(m_=s,!0):(m_=null,!1)}var VN=typeof setTimeout=="function"?setTimeout:void 0,sG=typeof clearTimeout=="function"?clearTimeout:void 0,zN=typeof Promise=="function"?Promise:void 0,oG=typeof queueMicrotask=="function"?queueMicrotask:typeof zN<"u"?function(s){return zN.resolve(null).then(s).catch(lG)}:VN;function lG(s){setTimeout(function(){throw s})}function oc(s){return s==="head"}function UN(s,u){var g=u,w=0;do{var C=g.nextSibling;if(s.removeChild(g),C&&C.nodeType===8)if(g=C.data,g==="/$"||g==="/&"){if(w===0){s.removeChild(C),sh(u);return}w--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")w++;else if(g==="html")gg(s.ownerDocument.documentElement);else if(g==="head"){g=s.ownerDocument.head,gg(g);for(var R=g.firstChild;R;){var q=R.nextSibling,te=R.nodeName;R[Pi]||te==="SCRIPT"||te==="STYLE"||te==="LINK"&&R.rel.toLowerCase()==="stylesheet"||g.removeChild(R),R=q}}else g==="body"&&gg(s.ownerDocument.body);g=C}while(g);sh(u)}function qN(s,u){var g=s;s=0;do{var w=g.nextSibling;if(g.nodeType===1?u?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(u?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),w&&w.nodeType===8)if(g=w.data,g==="/$"){if(s===0)break;s--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||s++;g=w}while(g)}function g_(s){var u=s.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var g=u;switch(u=u.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":g_(g),Ri(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}s.removeChild(g)}}function uG(s,u,g,w){for(;s.nodeType===1;){var C=g;if(s.nodeName.toLowerCase()!==u.toLowerCase()){if(!w&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(w){if(!s[Pi])switch(u){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(R=s.getAttribute("rel"),R==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(R!==C.rel||s.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||s.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||s.getAttribute("title")!==(C.title==null?null:C.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(R=s.getAttribute("src"),(R!==(C.src==null?null:C.src)||s.getAttribute("type")!==(C.type==null?null:C.type)||s.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&R&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(u==="input"&&s.type==="hidden"){var R=C.name==null?null:""+C.name;if(C.type==="hidden"&&s.getAttribute("name")===R)return s}else return s;if(s=vo(s.nextSibling),s===null)break}return null}function cG(s,u,g){if(u==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!g||(s=vo(s.nextSibling),s===null))return null;return s}function GN(s,u){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=vo(s.nextSibling),s===null))return null;return s}function p_(s){return s.data==="$?"||s.data==="$~"}function y_(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function fG(s,u){var g=s.ownerDocument;if(s.data==="$~")s._reactRetry=u;else if(s.data!=="$?"||g.readyState!=="loading")u();else{var w=function(){u(),g.removeEventListener("DOMContentLoaded",w)};g.addEventListener("DOMContentLoaded",w),s._reactRetry=w}}function vo(s){for(;s!=null;s=s.nextSibling){var u=s.nodeType;if(u===1||u===3)break;if(u===8){if(u=s.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return s}var v_=null;function HN(s){s=s.nextSibling;for(var u=0;s;){if(s.nodeType===8){var g=s.data;if(g==="/$"||g==="/&"){if(u===0)return vo(s.nextSibling);u--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||u++}s=s.nextSibling}return null}function KN(s){s=s.previousSibling;for(var u=0;s;){if(s.nodeType===8){var g=s.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(u===0)return s;u--}else g!=="/$"&&g!=="/&"||u++}s=s.previousSibling}return null}function WN(s,u,g){switch(u=A1(g),s){case"html":if(s=u.documentElement,!s)throw Error(r(452));return s;case"head":if(s=u.head,!s)throw Error(r(453));return s;case"body":if(s=u.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function gg(s){for(var u=s.attributes;u.length;)s.removeAttributeNode(u[0]);Ri(s)}var xo=new Map,$N=new Set;function S1(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ru=_e.d;_e.d={f:dG,r:hG,D:mG,C:gG,L:pG,m:yG,X:xG,S:vG,M:bG};function dG(){var s=ru.f(),u=p1();return s||u}function hG(s){var u=Mt(s);u!==null&&u.tag===5&&u.type==="form"?f3(u):ru.r(s)}var rh=typeof document>"u"?null:document;function YN(s,u,g){var w=rh;if(w&&typeof u=="string"&&u){var C=$t(u);C='link[rel="'+s+'"][href="'+C+'"]',typeof g=="string"&&(C+='[crossorigin="'+g+'"]'),$N.has(C)||($N.add(C),s={rel:s,crossOrigin:g,href:u},w.querySelector(C)===null&&(u=w.createElement("link"),ka(u,"link",s),Ar(u),w.head.appendChild(u)))}}function mG(s){ru.D(s),YN("dns-prefetch",s,null)}function gG(s,u){ru.C(s,u),YN("preconnect",s,u)}function pG(s,u,g){ru.L(s,u,g);var w=rh;if(w&&s&&u){var C='link[rel="preload"][as="'+$t(u)+'"]';u==="image"&&g&&g.imageSrcSet?(C+='[imagesrcset="'+$t(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(C+='[imagesizes="'+$t(g.imageSizes)+'"]')):C+='[href="'+$t(s)+'"]';var R=C;switch(u){case"style":R=ih(s);break;case"script":R=ah(s)}xo.has(R)||(s=_({rel:"preload",href:u==="image"&&g&&g.imageSrcSet?void 0:s,as:u},g),xo.set(R,s),w.querySelector(C)!==null||u==="style"&&w.querySelector(pg(R))||u==="script"&&w.querySelector(yg(R))||(u=w.createElement("link"),ka(u,"link",s),Ar(u),w.head.appendChild(u)))}}function yG(s,u){ru.m(s,u);var g=rh;if(g&&s){var w=u&&typeof u.as=="string"?u.as:"script",C='link[rel="modulepreload"][as="'+$t(w)+'"][href="'+$t(s)+'"]',R=C;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=ah(s)}if(!xo.has(R)&&(s=_({rel:"modulepreload",href:s},u),xo.set(R,s),g.querySelector(C)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(yg(R)))return}w=g.createElement("link"),ka(w,"link",s),Ar(w),g.head.appendChild(w)}}}function vG(s,u,g){ru.S(s,u,g);var w=rh;if(w&&s){var C=rr(w).hoistableStyles,R=ih(s);u=u||"default";var q=C.get(R);if(!q){var te={loading:0,preload:null};if(q=w.querySelector(pg(R)))te.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":u},g),(g=xo.get(R))&&x_(s,g);var pe=q=w.createElement("link");Ar(pe),ka(pe,"link",s),pe._p=new Promise(function(Re,Ue){pe.onload=Re,pe.onerror=Ue}),pe.addEventListener("load",function(){te.loading|=1}),pe.addEventListener("error",function(){te.loading|=2}),te.loading|=4,T1(q,u,w)}q={type:"stylesheet",instance:q,count:1,state:te},C.set(R,q)}}}function xG(s,u){ru.X(s,u);var g=rh;if(g&&s){var w=rr(g).hoistableScripts,C=ah(s),R=w.get(C);R||(R=g.querySelector(yg(C)),R||(s=_({src:s,async:!0},u),(u=xo.get(C))&&b_(s,u),R=g.createElement("script"),Ar(R),ka(R,"link",s),g.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},w.set(C,R))}}function bG(s,u){ru.M(s,u);var g=rh;if(g&&s){var w=rr(g).hoistableScripts,C=ah(s),R=w.get(C);R||(R=g.querySelector(yg(C)),R||(s=_({src:s,async:!0,type:"module"},u),(u=xo.get(C))&&b_(s,u),R=g.createElement("script"),Ar(R),ka(R,"link",s),g.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},w.set(C,R))}}function XN(s,u,g,w){var C=(C=$e.current)?S1(C):null;if(!C)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(u=ih(g.href),g=rr(C).hoistableStyles,w=g.get(u),w||(w={type:"style",instance:null,count:0,state:null},g.set(u,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){s=ih(g.href);var R=rr(C).hoistableStyles,q=R.get(s);if(q||(C=C.ownerDocument||C,q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(s,q),(R=C.querySelector(pg(s)))&&!R._p&&(q.instance=R,q.state.loading=5),xo.has(s)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},xo.set(s,g),R||wG(C,s,g,q.state))),u&&w===null)throw Error(r(528,""));return q}if(u&&w!==null)throw Error(r(529,""));return null;case"script":return u=g.async,g=g.src,typeof g=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=ah(g),g=rr(C).hoistableScripts,w=g.get(u),w||(w={type:"script",instance:null,count:0,state:null},g.set(u,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function ih(s){return'href="'+$t(s)+'"'}function pg(s){return'link[rel="stylesheet"]['+s+"]"}function QN(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function wG(s,u,g,w){s.querySelector('link[rel="preload"][as="style"]['+u+"]")?w.loading=1:(u=s.createElement("link"),w.preload=u,u.addEventListener("load",function(){return w.loading|=1}),u.addEventListener("error",function(){return w.loading|=2}),ka(u,"link",g),Ar(u),s.head.appendChild(u))}function ah(s){return'[src="'+$t(s)+'"]'}function yg(s){return"script[async]"+s}function ZN(s,u,g){if(u.count++,u.instance===null)switch(u.type){case"style":var w=s.querySelector('style[data-href~="'+$t(g.href)+'"]');if(w)return u.instance=w,Ar(w),w;var C=_({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return w=(s.ownerDocument||s).createElement("style"),Ar(w),ka(w,"style",C),T1(w,g.precedence,s),u.instance=w;case"stylesheet":C=ih(g.href);var R=s.querySelector(pg(C));if(R)return u.state.loading|=4,u.instance=R,Ar(R),R;w=QN(g),(C=xo.get(C))&&x_(w,C),R=(s.ownerDocument||s).createElement("link"),Ar(R);var q=R;return q._p=new Promise(function(te,pe){q.onload=te,q.onerror=pe}),ka(R,"link",w),u.state.loading|=4,T1(R,g.precedence,s),u.instance=R;case"script":return R=ah(g.src),(C=s.querySelector(yg(R)))?(u.instance=C,Ar(C),C):(w=g,(C=xo.get(R))&&(w=_({},g),b_(w,C)),s=s.ownerDocument||s,C=s.createElement("script"),Ar(C),ka(C,"link",w),s.head.appendChild(C),u.instance=C);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(w=u.instance,u.state.loading|=4,T1(w,g.precedence,s));return u.instance}function T1(s,u,g){for(var w=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=w.length?w[w.length-1]:null,R=C,q=0;q<w.length;q++){var te=w[q];if(te.dataset.precedence===u)R=te;else if(R!==C)break}R?R.parentNode.insertBefore(s,R.nextSibling):(u=g.nodeType===9?g.head:g,u.insertBefore(s,u.firstChild))}function x_(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.title==null&&(s.title=u.title)}function b_(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.integrity==null&&(s.integrity=u.integrity)}var I1=null;function JN(s,u,g){if(I1===null){var w=new Map,C=I1=new Map;C.set(g,w)}else C=I1,w=C.get(g),w||(w=new Map,C.set(g,w));if(w.has(s))return w;for(w.set(s,null),g=g.getElementsByTagName(s),C=0;C<g.length;C++){var R=g[C];if(!(R[Pi]||R[Fn]||s==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var q=R.getAttribute(u)||"";q=s+q;var te=w.get(q);te?te.push(R):w.set(q,[R])}}return w}function eP(s,u,g){s=s.ownerDocument||s,s.head.insertBefore(g,u==="title"?s.querySelector("head > title"):null)}function _G(s,u,g){if(g===1||u.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;return u.rel==="stylesheet"?(s=u.disabled,typeof u.precedence=="string"&&s==null):!0;case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function tP(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function EG(s,u,g,w){if(g.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var C=ih(w.href),R=u.querySelector(pg(C));if(R){u=R._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(s.count++,s=C1.bind(s),u.then(s,s)),g.state.loading|=4,g.instance=R,Ar(R);return}R=u.ownerDocument||u,w=QN(w),(C=xo.get(C))&&x_(w,C),R=R.createElement("link"),Ar(R);var q=R;q._p=new Promise(function(te,pe){q.onload=te,q.onerror=pe}),ka(R,"link",w),g.instance=R}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(g,u),(u=g.state.preload)&&(g.state.loading&3)===0&&(s.count++,g=C1.bind(s),u.addEventListener("load",g),u.addEventListener("error",g))}}var w_=0;function AG(s,u){return s.stylesheets&&s.count===0&&N1(s,s.stylesheets),0<s.count||0<s.imgCount?function(g){var w=setTimeout(function(){if(s.stylesheets&&N1(s,s.stylesheets),s.unsuspend){var R=s.unsuspend;s.unsuspend=null,R()}},6e4+u);0<s.imgBytes&&w_===0&&(w_=62500*iG());var C=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&N1(s,s.stylesheets),s.unsuspend)){var R=s.unsuspend;s.unsuspend=null,R()}},(s.imgBytes>w_?50:800)+u);return s.unsuspend=g,function(){s.unsuspend=null,clearTimeout(w),clearTimeout(C)}}:null}function C1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)N1(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var O1=null;function N1(s,u){s.stylesheets=null,s.unsuspend!==null&&(s.count++,O1=new Map,u.forEach(SG,s),O1=null,C1.call(s))}function SG(s,u){if(!(u.state.loading&4)){var g=O1.get(s);if(g)var w=g.get(null);else{g=new Map,O1.set(s,g);for(var C=s.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<C.length;R++){var q=C[R];(q.nodeName==="LINK"||q.getAttribute("media")!=="not all")&&(g.set(q.dataset.precedence,q),w=q)}w&&g.set(null,w)}C=u.instance,q=C.getAttribute("data-precedence"),R=g.get(q)||w,R===w&&g.set(null,C),g.set(q,C),this.count++,w=C1.bind(this),C.addEventListener("load",w),C.addEventListener("error",w),R?R.parentNode.insertBefore(C,R.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(C,s.firstChild)),u.state.loading|=4}}var vg={$$typeof:K,Provider:null,Consumer:null,_currentValue:qe,_currentValue2:qe,_threadCount:0};function TG(s,u,g,w,C,R,q,te,pe){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hr(0),this.hiddenUpdates=Hr(null),this.identifierPrefix=w,this.onUncaughtError=C,this.onCaughtError=R,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function nP(s,u,g,w,C,R,q,te,pe,Re,Ue,Qe){return s=new TG(s,u,g,q,pe,Re,Ue,Qe,te),u=1,R===!0&&(u|=24),R=Ks(3,null,null,u),s.current=R,R.stateNode=s,u=ew(),u.refCount++,s.pooledCache=u,u.refCount++,R.memoizedState={element:w,isDehydrated:g,cache:u},iw(R),s}function rP(s){return s?(s=jd,s):jd}function iP(s,u,g,w,C,R){C=rP(C),w.context===null?w.context=C:w.pendingContext=C,w=Xu(u),w.payload={element:g},R=R===void 0?null:R,R!==null&&(w.callback=R),g=Qu(s,w,u),g!==null&&(Os(g,s,u),Xm(g,s,u))}function aP(s,u){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var g=s.retryLane;s.retryLane=g!==0&&g<u?g:u}}function __(s,u){aP(s,u),(s=s.alternate)&&aP(s,u)}function sP(s){if(s.tag===13||s.tag===31){var u=tr(s,67108864);u!==null&&Os(u,s,67108864),__(s,67108864)}}function oP(s){if(s.tag===13||s.tag===31){var u=Qs();u=Kr(u);var g=tr(s,u);g!==null&&Os(g,s,u),__(s,u)}}var P1=!0;function IG(s,u,g,w){var C=ye.T;ye.T=null;var R=_e.p;try{_e.p=2,E_(s,u,g,w)}finally{_e.p=R,ye.T=C}}function CG(s,u,g,w){var C=ye.T;ye.T=null;var R=_e.p;try{_e.p=8,E_(s,u,g,w)}finally{_e.p=R,ye.T=C}}function E_(s,u,g,w){if(P1){var C=A_(w);if(C===null)u_(s,u,w,R1,g),uP(s,w);else if(NG(C,s,u,g,w))w.stopPropagation();else if(uP(s,w),u&4&&-1<OG.indexOf(s)){for(;C!==null;){var R=Mt(C);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var q=wa(R.pendingLanes);if(q!==0){var te=R;for(te.pendingLanes|=2,te.entangledLanes|=2;q;){var pe=1<<31-Ze(q);te.entanglements[1]|=pe,q&=~pe}cl(R),(Xn&6)===0&&(m1=hr()+500,dg(0))}}break;case 31:case 13:te=tr(R,2),te!==null&&Os(te,R,2),p1(),__(R,2)}if(R=A_(w),R===null&&u_(s,u,w,R1,g),R===C)break;C=R}C!==null&&w.stopPropagation()}else u_(s,u,w,null,g)}}function A_(s){return s=Ea(s),S_(s)}var R1=null;function S_(s){if(R1=null,s=Qn(s),s!==null){var u=a(s);if(u===null)s=null;else{var g=u.tag;if(g===13){if(s=l(u),s!==null)return s;s=null}else if(g===31){if(s=f(u),s!==null)return s;s=null}else if(g===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;s=null}else u!==s&&(s=null)}}return R1=s,null}function lP(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ba()){case $n:return 2;case Fa:return 8;case bi:case Lr:return 32;case Ro:return 268435456;default:return 32}default:return 32}}var T_=!1,lc=null,uc=null,cc=null,xg=new Map,bg=new Map,fc=[],OG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uP(s,u){switch(s){case"focusin":case"focusout":lc=null;break;case"dragenter":case"dragleave":uc=null;break;case"mouseover":case"mouseout":cc=null;break;case"pointerover":case"pointerout":xg.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":bg.delete(u.pointerId)}}function wg(s,u,g,w,C,R){return s===null||s.nativeEvent!==R?(s={blockedOn:u,domEventName:g,eventSystemFlags:w,nativeEvent:R,targetContainers:[C]},u!==null&&(u=Mt(u),u!==null&&sP(u)),s):(s.eventSystemFlags|=w,u=s.targetContainers,C!==null&&u.indexOf(C)===-1&&u.push(C),s)}function NG(s,u,g,w,C){switch(u){case"focusin":return lc=wg(lc,s,u,g,w,C),!0;case"dragenter":return uc=wg(uc,s,u,g,w,C),!0;case"mouseover":return cc=wg(cc,s,u,g,w,C),!0;case"pointerover":var R=C.pointerId;return xg.set(R,wg(xg.get(R)||null,s,u,g,w,C)),!0;case"gotpointercapture":return R=C.pointerId,bg.set(R,wg(bg.get(R)||null,s,u,g,w,C)),!0}return!1}function cP(s){var u=Qn(s.target);if(u!==null){var g=a(u);if(g!==null){if(u=g.tag,u===13){if(u=l(g),u!==null){s.blockedOn=u,dt(s.priority,function(){oP(g)});return}}else if(u===31){if(u=f(g),u!==null){s.blockedOn=u,dt(s.priority,function(){oP(g)});return}}else if(u===3&&g.stateNode.current.memoizedState.isDehydrated){s.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}s.blockedOn=null}function D1(s){if(s.blockedOn!==null)return!1;for(var u=s.targetContainers;0<u.length;){var g=A_(s.nativeEvent);if(g===null){g=s.nativeEvent;var w=new g.constructor(g.type,g);ia=w,g.target.dispatchEvent(w),ia=null}else return u=Mt(g),u!==null&&sP(u),s.blockedOn=g,!1;u.shift()}return!0}function fP(s,u,g){D1(s)&&g.delete(u)}function PG(){T_=!1,lc!==null&&D1(lc)&&(lc=null),uc!==null&&D1(uc)&&(uc=null),cc!==null&&D1(cc)&&(cc=null),xg.forEach(fP),bg.forEach(fP)}function k1(s,u){s.blockedOn===u&&(s.blockedOn=null,T_||(T_=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,PG)))}var M1=null;function dP(s){M1!==s&&(M1=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){M1===s&&(M1=null);for(var u=0;u<s.length;u+=3){var g=s[u],w=s[u+1],C=s[u+2];if(typeof w!="function"){if(S_(w||g)===null)continue;break}var R=Mt(g);R!==null&&(s.splice(u,3),u-=3,Aw(R,{pending:!0,data:C,method:g.method,action:w},w,C))}}))}function sh(s){function u(pe){return k1(pe,s)}lc!==null&&k1(lc,s),uc!==null&&k1(uc,s),cc!==null&&k1(cc,s),xg.forEach(u),bg.forEach(u);for(var g=0;g<fc.length;g++){var w=fc[g];w.blockedOn===s&&(w.blockedOn=null)}for(;0<fc.length&&(g=fc[0],g.blockedOn===null);)cP(g),g.blockedOn===null&&fc.shift();if(g=(s.ownerDocument||s).$$reactFormReplay,g!=null)for(w=0;w<g.length;w+=3){var C=g[w],R=g[w+1],q=C[gn]||null;if(typeof R=="function")q||dP(g);else if(q){var te=null;if(R&&R.hasAttribute("formAction")){if(C=R,q=R[gn]||null)te=q.formAction;else if(S_(C)!==null)continue}else te=q.action;typeof te=="function"?g[w+1]=te:(g.splice(w,3),w-=3),dP(g)}}}function hP(){function s(R){R.canIntercept&&R.info==="react-transition"&&R.intercept({handler:function(){return new Promise(function(q){return C=q})},focusReset:"manual",scroll:"manual"})}function u(){C!==null&&(C(),C=null),w||setTimeout(g,20)}function g(){if(!w&&!navigation.transition){var R=navigation.currentEntry;R&&R.url!=null&&navigation.navigate(R.url,{state:R.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var w=!1,C=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(g,100),function(){w=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),C!==null&&(C(),C=null)}}}function I_(s){this._internalRoot=s}j1.prototype.render=I_.prototype.render=function(s){var u=this._internalRoot;if(u===null)throw Error(r(409));var g=u.current,w=Qs();iP(g,w,s,u,null,null)},j1.prototype.unmount=I_.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var u=s.containerInfo;iP(s.current,2,null,s,null,null),p1(),u[Nr]=null}};function j1(s){this._internalRoot=s}j1.prototype.unstable_scheduleHydration=function(s){if(s){var u=fi();s={blockedOn:null,target:s,priority:u};for(var g=0;g<fc.length&&u!==0&&u<fc[g].priority;g++);fc.splice(g,0,s),g===0&&cP(s)}};var mP=e.version;if(mP!=="19.2.4")throw Error(r(527,mP,"19.2.4"));_e.findDOMNode=function(s){var u=s._reactInternals;if(u===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=p(u),s=s!==null?b(s):null,s=s===null?null:s.stateNode,s};var RG={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ye,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var L1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!L1.isDisabled&&L1.supportsFiber)try{In=L1.inject(RG),rt=L1}catch{}}return Eg.createRoot=function(s,u){if(!i(s))throw Error(r(299));var g=!1,w="",C=w3,R=_3,q=E3;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(R=u.onCaughtError),u.onRecoverableError!==void 0&&(q=u.onRecoverableError)),u=nP(s,1,!1,null,null,g,w,null,C,R,q,hP),s[Nr]=u.current,l_(s),new I_(u)},Eg.hydrateRoot=function(s,u,g){if(!i(s))throw Error(r(299));var w=!1,C="",R=w3,q=_3,te=E3,pe=null;return g!=null&&(g.unstable_strictMode===!0&&(w=!0),g.identifierPrefix!==void 0&&(C=g.identifierPrefix),g.onUncaughtError!==void 0&&(R=g.onUncaughtError),g.onCaughtError!==void 0&&(q=g.onCaughtError),g.onRecoverableError!==void 0&&(te=g.onRecoverableError),g.formState!==void 0&&(pe=g.formState)),u=nP(s,1,!0,u,g??null,w,C,pe,R,q,te,hP),u.context=rP(null),g=u.current,w=Qs(),w=Kr(w),C=Xu(w),C.callback=null,Qu(g,C,w),g=w,u.current.lanes=g,qi(u,g),cl(u),s[Nr]=u.current,l_(s),new j1(u)},Eg.version="19.2.4",Eg}var AP;function qG(){if(AP)return N_.exports;AP=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),N_.exports=UG(),N_.exports}var GG=qG();const HG="modulepreload",KG=function(t){return"/"+t},SP={},NS=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let p=function(b){return Promise.all(b.map(_=>Promise.resolve(_).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};var l=p;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=f?.nonce||f?.getAttribute("nonce");i=p(n.map(b=>{if(b=KG(b),b in SP)return;SP[b]=!0;const _=b.endsWith(".css"),T=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${T}`))return;const N=document.createElement("link");if(N.rel=_?"stylesheet":HG,_||(N.as="script"),N.crossOrigin="",N.href=b,m&&N.setAttribute("nonce",m),document.head.appendChild(N),_)return new Promise((j,M)=>{N.addEventListener("load",j),N.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${b}`)))})}))}function a(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return i.then(f=>{for(const m of f||[])m.status==="rejected"&&a(m.reason);return e().catch(a)})};var TP="popstate";function WG(t={}){function e(r,i){let{pathname:a,search:l,hash:f}=r.location;return kE("",{pathname:a,search:l,hash:f},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:dp(i)}return YG(e,n,null,t)}function ni(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function To(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $G(){return Math.random().toString(36).substring(2,10)}function IP(t,e){return{usr:t.state,key:t.key,idx:e}}function kE(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?pm(e):e,state:n,key:e&&e.key||r||$G()}}function dp({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function pm(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function YG(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,f="POP",m=null,p=b();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function b(){return(l.state||{idx:null}).idx}function _(){f="POP";let L=b(),z=L==null?null:L-p;p=L,m&&m({action:f,location:M.location,delta:z})}function T(L,z){f="PUSH";let $=kE(M.location,L,z);p=b()+1;let K=IP($,p),ee=M.createHref($);try{l.pushState(K,"",ee)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;i.location.assign(ee)}a&&m&&m({action:f,location:M.location,delta:1})}function N(L,z){f="REPLACE";let $=kE(M.location,L,z);p=b();let K=IP($,p),ee=M.createHref($);l.replaceState(K,"",ee),a&&m&&m({action:f,location:M.location,delta:0})}function j(L){return XG(L)}let M={get action(){return f},get location(){return t(i,l)},listen(L){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(TP,_),m=L,()=>{i.removeEventListener(TP,_),m=null}},createHref(L){return e(i,L)},createURL:j,encodeLocation(L){let z=j(L);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:T,replace:N,go(L){return l.go(L)}};return M}function XG(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ni(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:dp(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function d5(t,e,n="/"){return QG(t,e,n,!1)}function QG(t,e,n,r){let i=typeof e=="string"?pm(e):e,a=vu(i.pathname||"/",n);if(a==null)return null;let l=h5(t);ZG(l);let f=null;for(let m=0;f==null&&m<l.length;++m){let p=uH(a);f=oH(l[m],p,r)}return f}function h5(t,e=[],n=[],r="",i=!1){let a=(l,f,m=i,p)=>{let b={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:f,route:l};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(r)&&m)return;ni(b.relativePath.startsWith(r),`Absolute route path "${b.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(r.length)}let _=mu([r,b.relativePath]),T=n.concat(b);l.children&&l.children.length>0&&(ni(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),h5(l.children,e,T,_,m)),!(l.path==null&&!l.index)&&e.push({path:_,score:aH(_,l.index),routesMeta:T})};return t.forEach((l,f)=>{if(l.path===""||!l.path?.includes("?"))a(l,f);else for(let m of m5(l.path))a(l,f,!0,m)}),e}function m5(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=m5(r.join("/")),f=[];return f.push(...l.map(m=>m===""?a:[a,m].join("/"))),i&&f.push(...l),f.map(m=>t.startsWith("/")&&m===""?"/":m)}function ZG(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:sH(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var JG=/^:[\w-]+$/,eH=3,tH=2,nH=1,rH=10,iH=-2,CP=t=>t==="*";function aH(t,e){let n=t.split("/"),r=n.length;return n.some(CP)&&(r+=iH),e&&(r+=tH),n.filter(i=>!CP(i)).reduce((i,a)=>i+(JG.test(a)?eH:a===""?nH:rH),r)}function sH(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function oH(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",l=[];for(let f=0;f<r.length;++f){let m=r[f],p=f===r.length-1,b=a==="/"?e:e.slice(a.length)||"/",_=qy({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},b),T=m.route;if(!_&&p&&n&&!r[r.length-1].route.index&&(_=qy({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},b)),!_)return null;Object.assign(i,_.params),l.push({params:i,pathname:mu([a,_.pathname]),pathnameBase:hH(mu([a,_.pathnameBase])),route:T}),_.pathnameBase!=="/"&&(a=mu([a,_.pathnameBase]))}return l}function qy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=lH(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),f=i.slice(1);return{params:r.reduce((p,{paramName:b,isOptional:_},T)=>{if(b==="*"){let j=f[T]||"";l=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const N=f[T];return _&&!N?p[b]=void 0:p[b]=(N||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:l,pattern:t}}function lH(t,e=!1,n=!0){To(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,f,m)=>(r.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function uH(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return To(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function vu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var cH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function fH(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?pm(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=OP(n.substring(1),"/"):a=OP(n,e)):a=e,{pathname:a,search:mH(r),hash:gH(i)}}function OP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function k_(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function dH(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function PS(t){let e=dH(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function RS(t,e,n,r=!1){let i;typeof t=="string"?i=pm(t):(i={...t},ni(!i.pathname||!i.pathname.includes("?"),k_("?","pathname","search",i)),ni(!i.pathname||!i.pathname.includes("#"),k_("#","pathname","hash",i)),ni(!i.search||!i.search.includes("#"),k_("#","search","hash",i)));let a=t===""||i.pathname==="",l=a?"/":i.pathname,f;if(l==null)f=n;else{let _=e.length-1;if(!r&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),_-=1;i.pathname=T.join("/")}f=_>=0?e[_]:"/"}let m=fH(i,f),p=l&&l!=="/"&&l.endsWith("/"),b=(a||l===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(p||b)&&(m.pathname+="/"),m}var mu=t=>t.join("/").replace(/\/\/+/g,"/"),hH=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mH=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gH=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,pH=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function yH(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function vH(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var g5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function p5(t,e){let n=t;if(typeof n!="string"||!cH.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(g5)try{let a=new URL(window.location.href),l=n.startsWith("//")?new URL(a.protocol+n):new URL(n),f=vu(l.pathname,e);l.origin===a.origin&&f!=null?n=f+l.search+l.hash:i=!0}catch{To(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var y5=["POST","PUT","PATCH","DELETE"];new Set(y5);var xH=["GET",...y5];new Set(xH);var ym=D.createContext(null);ym.displayName="DataRouter";var vx=D.createContext(null);vx.displayName="DataRouterState";var bH=D.createContext(!1),v5=D.createContext({isTransitioning:!1});v5.displayName="ViewTransition";var wH=D.createContext(new Map);wH.displayName="Fetchers";var _H=D.createContext(null);_H.displayName="Await";var lo=D.createContext(null);lo.displayName="Navigation";var Hp=D.createContext(null);Hp.displayName="Location";var Dl=D.createContext({outlet:null,matches:[],isDataRoute:!1});Dl.displayName="Route";var DS=D.createContext(null);DS.displayName="RouteError";var x5="REACT_ROUTER_ERROR",EH="REDIRECT",AH="ROUTE_ERROR_RESPONSE";function SH(t){if(t.startsWith(`${x5}:${EH}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function TH(t){if(t.startsWith(`${x5}:${AH}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new pH(e.status,e.statusText,e.data)}catch{}}function IH(t,{relative:e}={}){ni(vm(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=D.useContext(lo),{hash:i,pathname:a,search:l}=Kp(t,{relative:e}),f=a;return n!=="/"&&(f=a==="/"?n:mu([n,a])),r.createHref({pathname:f,search:l,hash:i})}function vm(){return D.useContext(Hp)!=null}function kl(){return ni(vm(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(Hp).location}var b5="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function w5(t){D.useContext(lo).static||D.useLayoutEffect(t)}function ef(){let{isDataRoute:t}=D.useContext(Dl);return t?VH():CH()}function CH(){ni(vm(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(ym),{basename:e,navigator:n}=D.useContext(lo),{matches:r}=D.useContext(Dl),{pathname:i}=kl(),a=JSON.stringify(PS(r)),l=D.useRef(!1);return w5(()=>{l.current=!0}),D.useCallback((m,p={})=>{if(To(l.current,b5),!l.current)return;if(typeof m=="number"){n.go(m);return}let b=RS(m,JSON.parse(a),i,p.relative==="path");t==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:mu([e,b.pathname])),(p.replace?n.replace:n.push)(b,p.state,p)},[e,n,a,i,t])}D.createContext(null);function Kp(t,{relative:e}={}){let{matches:n}=D.useContext(Dl),{pathname:r}=kl(),i=JSON.stringify(PS(n));return D.useMemo(()=>RS(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function OH(t,e){return _5(t,e)}function _5(t,e,n,r,i){ni(vm(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=D.useContext(lo),{matches:l}=D.useContext(Dl),f=l[l.length-1],m=f?f.params:{},p=f?f.pathname:"/",b=f?f.pathnameBase:"/",_=f&&f.route;{let $=_&&_.path||"";A5(p,!_||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let T=kl(),N;if(e){let $=typeof e=="string"?pm(e):e;ni(b==="/"||$.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${$.pathname}" was given in the \`location\` prop.`),N=$}else N=T;let j=N.pathname||"/",M=j;if(b!=="/"){let $=b.replace(/^\//,"").split("/");M="/"+j.replace(/^\//,"").split("/").slice($.length).join("/")}let L=d5(t,{pathname:M});To(_||L!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),To(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=kH(L&&L.map($=>Object.assign({},$,{params:Object.assign({},m,$.params),pathname:mu([b,a.encodeLocation?a.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?b:mu([b,a.encodeLocation?a.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),l,n,r,i);return e&&z?D.createElement(Hp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},z):z}function NH(){let t=FH(),e=yH(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:a},"ErrorBoundary")," or"," ",D.createElement("code",{style:a},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,l)}var PH=D.createElement(NH,null),E5=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=TH(t.digest);n&&(t=n)}let e=t!==void 0?D.createElement(Dl.Provider,{value:this.props.routeContext},D.createElement(DS.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?D.createElement(RH,{error:t},e):e}};E5.contextType=bH;var M_=new WeakMap;function RH({children:t,error:e}){let{basename:n}=D.useContext(lo);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=SH(e.digest);if(r){let i=M_.get(e);if(i)throw i;let a=p5(r.location,n);if(g5&&!M_.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw M_.set(e,l),l}return D.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function DH({routeContext:t,match:e,children:n}){let r=D.useContext(ym);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(Dl.Provider,{value:t},n)}function kH(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=n?.errors;if(l!=null){let b=a.findIndex(_=>_.route.id&&l?.[_.route.id]!==void 0);ni(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,b+1))}let f=!1,m=-1;if(n)for(let b=0;b<a.length;b++){let _=a[b];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=b),_.route.id){let{loaderData:T,errors:N}=n,j=_.route.loader&&!T.hasOwnProperty(_.route.id)&&(!N||N[_.route.id]===void 0);if(_.route.lazy||j){f=!0,m>=0?a=a.slice(0,m+1):a=[a[0]];break}}}let p=n&&r?(b,_)=>{r(b,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:vH(n.matches),errorInfo:_})}:void 0;return a.reduceRight((b,_,T)=>{let N,j=!1,M=null,L=null;n&&(N=l&&_.route.id?l[_.route.id]:void 0,M=_.route.errorElement||PH,f&&(m<0&&T===0?(A5("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,L=null):m===T&&(j=!0,L=_.route.hydrateFallbackElement||null)));let z=e.concat(a.slice(0,T+1)),$=()=>{let K;return N?K=M:j?K=L:_.route.Component?K=D.createElement(_.route.Component,null):_.route.element?K=_.route.element:K=b,D.createElement(DH,{match:_,routeContext:{outlet:b,matches:z,isDataRoute:n!=null},children:K})};return n&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?D.createElement(E5,{location:n.location,revalidation:n.revalidation,component:M,error:N,children:$(),routeContext:{outlet:null,matches:z,isDataRoute:!0},onError:p}):$()},null)}function kS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MH(t){let e=D.useContext(ym);return ni(e,kS(t)),e}function jH(t){let e=D.useContext(vx);return ni(e,kS(t)),e}function LH(t){let e=D.useContext(Dl);return ni(e,kS(t)),e}function MS(t){let e=LH(t),n=e.matches[e.matches.length-1];return ni(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function BH(){return MS("useRouteId")}function FH(){let t=D.useContext(DS),e=jH("useRouteError"),n=MS("useRouteError");return t!==void 0?t:e.errors?.[n]}function VH(){let{router:t}=MH("useNavigate"),e=MS("useNavigate"),n=D.useRef(!1);return w5(()=>{n.current=!0}),D.useCallback(async(i,a={})=>{To(n.current,b5),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var NP={};function A5(t,e,n){!e&&!NP[t]&&(NP[t]=!0,To(!1,n))}D.memo(zH);function zH({routes:t,future:e,state:n,onError:r}){return _5(t,void 0,n,r,e)}function UH({to:t,replace:e,state:n,relative:r}){ni(vm(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=D.useContext(lo);To(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=D.useContext(Dl),{pathname:l}=kl(),f=ef(),m=RS(t,PS(a),l,r==="path"),p=JSON.stringify(m);return D.useEffect(()=>{f(JSON.parse(p),{replace:e,state:n,relative:r})},[f,p,r,e,n]),null}function iu(t){ni(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qH({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:l}){ni(!vm(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=t.replace(/^\/*/,"/"),m=D.useMemo(()=>({basename:f,navigator:i,static:a,unstable_useTransitions:l,future:{}}),[f,i,a,l]);typeof n=="string"&&(n=pm(n));let{pathname:p="/",search:b="",hash:_="",state:T=null,key:N="default"}=n,j=D.useMemo(()=>{let M=vu(p,f);return M==null?null:{location:{pathname:M,search:b,hash:_,state:T,key:N},navigationType:r}},[f,p,b,_,T,N,r]);return To(j!=null,`<Router basename="${f}"> is not able to match the URL "${p}${b}${_}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:D.createElement(lo.Provider,{value:m},D.createElement(Hp.Provider,{children:e,value:j}))}function GH({children:t,location:e}){return OH(ME(t),e)}function ME(t,e=[]){let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let a=[...e,i];if(r.type===D.Fragment){n.push.apply(n,ME(r.props.children,a));return}ni(r.type===iu,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ni(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=ME(r.props.children,a)),n.push(l)}),n}var my="get",gy="application/x-www-form-urlencoded";function xx(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function HH(t){return xx(t)&&t.tagName.toLowerCase()==="button"}function KH(t){return xx(t)&&t.tagName.toLowerCase()==="form"}function WH(t){return xx(t)&&t.tagName.toLowerCase()==="input"}function $H(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function YH(t,e){return t.button===0&&(!e||e==="_self")&&!$H(t)}function jE(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function XH(t,e){let n=jE(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var B1=null;function QH(){if(B1===null)try{new FormData(document.createElement("form"),0),B1=!1}catch{B1=!0}return B1}var ZH=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function j_(t){return t!=null&&!ZH.has(t)?(To(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gy}"`),null):t}function JH(t,e){let n,r,i,a,l;if(KH(t)){let f=t.getAttribute("action");r=f?vu(f,e):null,n=t.getAttribute("method")||my,i=j_(t.getAttribute("enctype"))||gy,a=new FormData(t)}else if(HH(t)||WH(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=t.getAttribute("formaction")||f.getAttribute("action");if(r=m?vu(m,e):null,n=t.getAttribute("formmethod")||f.getAttribute("method")||my,i=j_(t.getAttribute("formenctype"))||j_(f.getAttribute("enctype"))||gy,a=new FormData(f,t),!QH()){let{name:p,type:b,value:_}=t;if(b==="image"){let T=p?`${p}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else p&&a.append(p,_)}}else{if(xx(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=my,r=null,i=gy,l=t}return a&&i==="text/plain"&&(l=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function jS(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function eK(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&vu(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function tK(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nK(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function rK(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await tK(a,n);return l.links?l.links():[]}return[]}));return oK(r.flat(1).filter(nK).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function PP(t,e,n,r,i,a){let l=(m,p)=>n[p]?m.route.id!==n[p].route.id:!0,f=(m,p)=>n[p].pathname!==m.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==m.params["*"];return a==="assets"?e.filter((m,p)=>l(m,p)||f(m,p)):a==="data"?e.filter((m,p)=>{let b=r.routes[m.route.id];if(!b||!b.hasLoader)return!1;if(l(m,p)||f(m,p))return!0;if(m.route.shouldRevalidate){let _=m.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function iK(t,e,{includeHydrateFallback:n}={}){return aK(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function aK(t){return[...new Set(t)]}function sK(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function oK(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(sK(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function S5(){let t=D.useContext(ym);return jS(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function lK(){let t=D.useContext(vx);return jS(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var LS=D.createContext(void 0);LS.displayName="FrameworkContext";function T5(){let t=D.useContext(LS);return jS(t,"You must render this element inside a <HydratedRouter> element"),t}function uK(t,e){let n=D.useContext(LS),[r,i]=D.useState(!1),[a,l]=D.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:p,onMouseLeave:b,onTouchStart:_}=e,T=D.useRef(null);D.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let M=z=>{z.forEach($=>{l($.isIntersecting)})},L=new IntersectionObserver(M,{threshold:.5});return T.current&&L.observe(T.current),()=>{L.disconnect()}}},[t]),D.useEffect(()=>{if(r){let M=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(M)}}},[r]);let N=()=>{i(!0)},j=()=>{i(!1),l(!1)};return n?t!=="intent"?[a,T,{}]:[a,T,{onFocus:Ag(f,N),onBlur:Ag(m,j),onMouseEnter:Ag(p,N),onMouseLeave:Ag(b,j),onTouchStart:Ag(_,N)}]:[!1,T,{}]}function Ag(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function cK({page:t,...e}){let{router:n}=S5(),r=D.useMemo(()=>d5(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?D.createElement(dK,{page:t,matches:r,...e}):null}function fK(t){let{manifest:e,routeModules:n}=T5(),[r,i]=D.useState([]);return D.useEffect(()=>{let a=!1;return rK(t,e,n).then(l=>{a||i(l)}),()=>{a=!0}},[t,e,n]),r}function dK({page:t,matches:e,...n}){let r=kl(),{future:i,manifest:a,routeModules:l}=T5(),{basename:f}=S5(),{loaderData:m,matches:p}=lK(),b=D.useMemo(()=>PP(t,e,p,a,r,"data"),[t,e,p,a,r]),_=D.useMemo(()=>PP(t,e,p,a,r,"assets"),[t,e,p,a,r]),T=D.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let M=new Set,L=!1;if(e.forEach($=>{let K=a.routes[$.route.id];!K||!K.hasLoader||(!b.some(ee=>ee.route.id===$.route.id)&&$.route.id in m&&l[$.route.id]?.shouldRevalidate||K.hasClientLoader?L=!0:M.add($.route.id))}),M.size===0)return[];let z=eK(t,f,i.unstable_trailingSlashAwareDataRequests,"data");return L&&M.size>0&&z.searchParams.set("_routes",e.filter($=>M.has($.route.id)).map($=>$.route.id).join(",")),[z.pathname+z.search]},[f,i.unstable_trailingSlashAwareDataRequests,m,r,a,b,e,t,l]),N=D.useMemo(()=>iK(_,a),[_,a]),j=fK(_);return D.createElement(D.Fragment,null,T.map(M=>D.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),N.map(M=>D.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),j.map(({key:M,link:L})=>D.createElement("link",{key:M,nonce:n.nonce,...L,crossOrigin:L.crossOrigin??n.crossOrigin})))}function hK(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var mK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mK&&(window.__reactRouterVersion="7.13.0")}catch{}function gK({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=D.useRef();i.current==null&&(i.current=WG({window:r,v5Compat:!0}));let a=i.current,[l,f]=D.useState({action:a.action,location:a.location}),m=D.useCallback(p=>{n===!1?f(p):D.startTransition(()=>f(p))},[n]);return D.useLayoutEffect(()=>a.listen(m),[a,m]),D.createElement(qH,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:n})}var I5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,C5=D.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:l,state:f,target:m,to:p,preventScrollReset:b,viewTransition:_,unstable_defaultShouldRevalidate:T,...N},j){let{basename:M,unstable_useTransitions:L}=D.useContext(lo),z=typeof p=="string"&&I5.test(p),$=p5(p,M);p=$.to;let K=IH(p,{relative:i}),[ee,ue,Z]=uK(r,N),V=xK(p,{replace:l,state:f,target:m,preventScrollReset:b,relative:i,viewTransition:_,unstable_defaultShouldRevalidate:T,unstable_useTransitions:L});function W(ae){e&&e(ae),ae.defaultPrevented||V(ae)}let U=D.createElement("a",{...N,...Z,href:$.absoluteURL||K,onClick:$.isExternal||a?e:W,ref:hK(j,ue),target:m,"data-discover":!z&&n==="render"?"true":void 0});return ee&&!z?D.createElement(D.Fragment,null,U,D.createElement(cK,{page:K})):U});C5.displayName="Link";var pK=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:l,viewTransition:f,children:m,...p},b){let _=Kp(l,{relative:p.relative}),T=kl(),N=D.useContext(vx),{navigator:j,basename:M}=D.useContext(lo),L=N!=null&&SK(_)&&f===!0,z=j.encodeLocation?j.encodeLocation(_).pathname:_.pathname,$=T.pathname,K=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;n||($=$.toLowerCase(),K=K?K.toLowerCase():null,z=z.toLowerCase()),K&&M&&(K=vu(K,M)||K);const ee=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let ue=$===z||!i&&$.startsWith(z)&&$.charAt(ee)==="/",Z=K!=null&&(K===z||!i&&K.startsWith(z)&&K.charAt(z.length)==="/"),V={isActive:ue,isPending:Z,isTransitioning:L},W=ue?e:void 0,U;typeof r=="function"?U=r(V):U=[r,ue?"active":null,Z?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let ae=typeof a=="function"?a(V):a;return D.createElement(C5,{...p,"aria-current":W,className:U,ref:b,style:ae,to:l,viewTransition:f},typeof m=="function"?m(V):m)});pK.displayName="NavLink";var yK=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:l=my,action:f,onSubmit:m,relative:p,preventScrollReset:b,viewTransition:_,unstable_defaultShouldRevalidate:T,...N},j)=>{let{unstable_useTransitions:M}=D.useContext(lo),L=EK(),z=AK(f,{relative:p}),$=l.toLowerCase()==="get"?"get":"post",K=typeof f=="string"&&I5.test(f),ee=ue=>{if(m&&m(ue),ue.defaultPrevented)return;ue.preventDefault();let Z=ue.nativeEvent.submitter,V=Z?.getAttribute("formmethod")||l,W=()=>L(Z||ue.currentTarget,{fetcherKey:e,method:V,navigate:n,replace:i,state:a,relative:p,preventScrollReset:b,viewTransition:_,unstable_defaultShouldRevalidate:T});M&&n!==!1?D.startTransition(()=>W()):W()};return D.createElement("form",{ref:j,method:$,action:z,onSubmit:r?m:ee,...N,"data-discover":!K&&t==="render"?"true":void 0})});yK.displayName="Form";function vK(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function O5(t){let e=D.useContext(ym);return ni(e,vK(t)),e}function xK(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let p=ef(),b=kl(),_=Kp(t,{relative:a});return D.useCallback(T=>{if(YH(T,e)){T.preventDefault();let N=n!==void 0?n:dp(b)===dp(_),j=()=>p(t,{replace:N,state:r,preventScrollReset:i,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:f});m?D.startTransition(()=>j()):j()}},[b,p,_,n,r,e,t,i,a,l,f,m])}function bK(t){To(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=D.useRef(jE(t)),n=D.useRef(!1),r=kl(),i=D.useMemo(()=>XH(r.search,n.current?null:e.current),[r.search]),a=ef(),l=D.useCallback((f,m)=>{const p=jE(typeof f=="function"?f(new URLSearchParams(i)):f);n.current=!0,a("?"+p,m)},[a,i]);return[i,l]}var wK=0,_K=()=>`__${String(++wK)}__`;function EK(){let{router:t}=O5("useSubmit"),{basename:e}=D.useContext(lo),n=BH(),r=t.fetch,i=t.navigate;return D.useCallback(async(a,l={})=>{let{action:f,method:m,encType:p,formData:b,body:_}=JH(a,e);if(l.navigate===!1){let T=l.fetcherKey||_K();await r(T,n,l.action||f,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:b,body:_,formMethod:l.method||m,formEncType:l.encType||p,flushSync:l.flushSync})}else await i(l.action||f,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:b,body:_,formMethod:l.method||m,formEncType:l.encType||p,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,i,e,n])}function AK(t,{relative:e}={}){let{basename:n}=D.useContext(lo),r=D.useContext(Dl);ni(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Kp(t||".",{relative:e})},l=kl();if(t==null){a.search=l.search;let f=new URLSearchParams(a.search),m=f.getAll("index");if(m.some(b=>b==="")){f.delete("index"),m.filter(_=>_).forEach(_=>f.append("index",_));let b=f.toString();a.search=b?`?${b}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:mu([n,a.pathname])),dp(a)}function SK(t,{relative:e}={}){let n=D.useContext(v5);ni(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=O5("useViewTransitionState"),i=Kp(t,{relative:e});if(!n.isTransitioning)return!1;let a=vu(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=vu(n.nextLocation.pathname,r)||n.nextLocation.pathname;return qy(i.pathname,l)!=null||qy(i.pathname,a)!=null}var N5=f5();const TK=()=>{};var RP={};const P5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},IK=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],l=t[n++],f=t[n++],m=((i&7)<<18|(a&63)<<12|(l&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const a=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},R5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],l=i+1<t.length,f=l?t[i+1]:0,m=i+2<t.length,p=m?t[i+2]:0,b=a>>2,_=(a&3)<<4|f>>4;let T=(f&15)<<2|p>>6,N=p&63;m||(N=64,l||(T=64)),r.push(n[b],n[_],n[T],n[N])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(P5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IK(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],f=i<t.length?n[t.charAt(i)]:0;++i;const p=i<t.length?n[t.charAt(i)]:64;++i;const _=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||f==null||p==null||_==null)throw new CK;const T=a<<2|f>>4;if(r.push(T),p!==64){const N=f<<4&240|p>>2;if(r.push(N),_!==64){const j=p<<6&192|_;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class CK extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OK=function(t){const e=P5(t);return R5.encodeByteArray(e,!0)},Gy=function(t){return OK(t).replace(/\./g,"")},D5=function(t){try{return R5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function k5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const NK=()=>k5().__FIREBASE_DEFAULTS__,PK=()=>{if(typeof process>"u"||typeof RP>"u")return;const t=RP.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},RK=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&D5(t[1]);return e&&JSON.parse(e)},bx=()=>{try{return TK()||NK()||PK()||RK()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},M5=t=>bx()?.emulatorHosts?.[t],DK=t=>{const e=M5(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},j5=()=>bx()?.config,L5=t=>bx()?.[`_${t}`];class kK{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function wd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function BS(t){return(await fetch(t,{credentials:"include"})).ok}function MK(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Gy(JSON.stringify(n)),Gy(JSON.stringify(l)),""].join(".")}const Zg={};function jK(){const t={prod:[],emulator:[]};for(const e of Object.keys(Zg))Zg[e]?t.emulator.push(e):t.prod.push(e);return t}function LK(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let DP=!1;function B5(t,e){if(typeof window>"u"||typeof document>"u"||!wd(window.location.host)||Zg[t]===e||Zg[t]||DP)return;Zg[t]=e;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",a=jK().prod.length>0;function l(){const T=document.getElementById(r);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,N){T.setAttribute("width","24"),T.setAttribute("id",N),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{DP=!0,l()},T}function b(T,N){T.setAttribute("id",N),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=LK(r),N=n("text"),j=document.getElementById(N)||document.createElement("span"),M=n("learnmore"),L=document.getElementById(M)||document.createElement("a"),z=n("preprendIcon"),$=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const K=T.element;f(K),b(L,M);const ee=p();m($,z),K.append($,j,L,ee),document.body.appendChild(K)}a?(j.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function $i(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BK(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($i())}function F5(){const t=bx()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FK(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VK(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zK(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UK(){const t=$i();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function V5(){return!F5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z5(){return!F5()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function U5(){try{return typeof indexedDB=="object"}catch{return!1}}function qK(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const GK="FirebaseError";class Ru extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=GK,Object.setPrototypeOf(this,Ru.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wp.prototype.create)}}class Wp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?HK(a,r):"Error",f=`${this.serviceName}: ${l} (${i}).`;return new Ru(i,f,r)}}function HK(t,e){return t.replace(KK,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const KK=/\{\$([^}]+)}/g;function WK(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $o(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],l=e[i];if(kP(a)&&kP(l)){if(!$o(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function kP(t){return t!==null&&typeof t=="object"}function $p(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ug(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function qg(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $K(t,e){const n=new YK(t,e);return n.subscribe.bind(n)}class YK{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XK(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=L_),i.error===void 0&&(i.error=L_),i.complete===void 0&&(i.complete=L_);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XK(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function L_(){}function wr(t){return t&&t._delegate?t._delegate:t}class Zf{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Of="[DEFAULT]";let QK=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kK;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JK(e))try{this.getOrInitializeService({instanceIdentifier:Of})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Of){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Of){return this.instances.has(e)}getOptions(e=Of){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,l]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);r===f&&l.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZK(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Of){return this.component?this.component.multipleInstances?e:Of:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ZK(t){return t===Of?void 0:t}function JK(t){return t.instantiationMode==="EAGER"}class eW{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QK(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Dn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Dn||(Dn={}));const tW={debug:Dn.DEBUG,verbose:Dn.VERBOSE,info:Dn.INFO,warn:Dn.WARN,error:Dn.ERROR,silent:Dn.SILENT},nW=Dn.INFO,rW={[Dn.DEBUG]:"log",[Dn.VERBOSE]:"log",[Dn.INFO]:"info",[Dn.WARN]:"warn",[Dn.ERROR]:"error"},iW=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=rW[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class FS{constructor(e){this.name=e,this._logLevel=nW,this._logHandler=iW,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Dn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tW[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Dn.DEBUG,...e),this._logHandler(this,Dn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Dn.VERBOSE,...e),this._logHandler(this,Dn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Dn.INFO,...e),this._logHandler(this,Dn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Dn.WARN,...e),this._logHandler(this,Dn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Dn.ERROR,...e),this._logHandler(this,Dn.ERROR,...e)}}const aW=(t,e)=>e.some(n=>t instanceof n);let MP,jP;function sW(){return MP||(MP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oW(){return jP||(jP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const q5=new WeakMap,LE=new WeakMap,G5=new WeakMap,B_=new WeakMap,VS=new WeakMap;function lW(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(Pc(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&q5.set(n,t)}).catch(()=>{}),VS.set(e,t),e}function uW(t){if(LE.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});LE.set(t,e)}let BE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return LE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||G5.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pc(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cW(t){BE=t(BE)}function fW(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(F_(this),e,...n);return G5.set(r,e.sort?e.sort():[e]),Pc(r)}:oW().includes(t)?function(...e){return t.apply(F_(this),e),Pc(q5.get(this))}:function(...e){return Pc(t.apply(F_(this),e))}}function dW(t){return typeof t=="function"?fW(t):(t instanceof IDBTransaction&&uW(t),aW(t,sW())?new Proxy(t,BE):t)}function Pc(t){if(t instanceof IDBRequest)return lW(t);if(B_.has(t))return B_.get(t);const e=dW(t);return e!==t&&(B_.set(t,e),VS.set(e,t)),e}const F_=t=>VS.get(t);function hW(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(t,e),f=Pc(l);return r&&l.addEventListener("upgradeneeded",m=>{r(Pc(l.result),m.oldVersion,m.newVersion,Pc(l.transaction),m)}),n&&l.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),f.then(m=>{a&&m.addEventListener("close",()=>a()),i&&m.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const mW=["get","getKey","getAll","getAllKeys","count"],gW=["put","add","delete","clear"],V_=new Map;function LP(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(V_.get(e))return V_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=gW.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mW.includes(n)))return;const a=async function(l,...f){const m=this.transaction(l,i?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(f.shift())),(await Promise.all([p[n](...f),i&&m.done]))[0]};return V_.set(e,a),a}cW(t=>({...t,get:(e,n,r)=>LP(e,n)||t.get(e,n,r),has:(e,n)=>!!LP(e,n)||t.has(e,n)}));class pW{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yW(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function yW(t){return t.getComponent()?.type==="VERSION"}const FE="@firebase/app",BP="0.14.8";const xu=new FS("@firebase/app"),vW="@firebase/app-compat",xW="@firebase/analytics-compat",bW="@firebase/analytics",wW="@firebase/app-check-compat",_W="@firebase/app-check",EW="@firebase/auth",AW="@firebase/auth-compat",SW="@firebase/database",TW="@firebase/data-connect",IW="@firebase/database-compat",CW="@firebase/functions",OW="@firebase/functions-compat",NW="@firebase/installations",PW="@firebase/installations-compat",RW="@firebase/messaging",DW="@firebase/messaging-compat",kW="@firebase/performance",MW="@firebase/performance-compat",jW="@firebase/remote-config",LW="@firebase/remote-config-compat",BW="@firebase/storage",FW="@firebase/storage-compat",VW="@firebase/firestore",zW="@firebase/ai",UW="@firebase/firestore-compat",qW="firebase",GW="12.9.0";const Hy="[DEFAULT]",HW={[FE]:"fire-core",[vW]:"fire-core-compat",[bW]:"fire-analytics",[xW]:"fire-analytics-compat",[_W]:"fire-app-check",[wW]:"fire-app-check-compat",[EW]:"fire-auth",[AW]:"fire-auth-compat",[SW]:"fire-rtdb",[TW]:"fire-data-connect",[IW]:"fire-rtdb-compat",[CW]:"fire-fn",[OW]:"fire-fn-compat",[NW]:"fire-iid",[PW]:"fire-iid-compat",[RW]:"fire-fcm",[DW]:"fire-fcm-compat",[kW]:"fire-perf",[MW]:"fire-perf-compat",[jW]:"fire-rc",[LW]:"fire-rc-compat",[BW]:"fire-gcs",[FW]:"fire-gcs-compat",[VW]:"fire-fst",[UW]:"fire-fst-compat",[zW]:"fire-vertex","fire-js":"fire-js",[qW]:"fire-js-all"};const Ky=new Map,KW=new Map,VE=new Map;function FP(t,e){try{t.container.addComponent(e)}catch(n){xu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bh(t){const e=t.name;if(VE.has(e))return xu.debug(`There were multiple attempts to register component ${e}.`),!1;VE.set(e,t);for(const n of Ky.values())FP(n,t);for(const n of KW.values())FP(n,t);return!0}function Yp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function WW(t,e,n=Hy){Yp(t,e).clearInstance(n)}function Ao(t){return t==null?!1:t.settings!==void 0}const $W={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rc=new Wp("app","Firebase",$W);class YW{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rc.create("app-deleted",{appName:this._name})}}const xm=GW;function H5(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Hy,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Rc.create("bad-app-name",{appName:String(i)});if(n||(n=j5()),!n)throw Rc.create("no-options");const a=Ky.get(i);if(a){if($o(n,a.options)&&$o(r,a.config))return a;throw Rc.create("duplicate-app",{appName:i})}const l=new eW(i);for(const m of VE.values())l.addComponent(m);const f=new YW(n,r,l);return Ky.set(i,f),f}function K5(t=Hy){const e=Ky.get(t);if(!e&&t===Hy&&j5())return H5();if(!e)throw Rc.create("no-app",{appName:t});return e}function Dc(t,e,n){let r=HW[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xu.warn(l.join(" "));return}Bh(new Zf(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const XW="firebase-heartbeat-database",QW=1,hp="firebase-heartbeat-store";let z_=null;function W5(){return z_||(z_=hW(XW,QW,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(hp)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rc.create("idb-open",{originalErrorMessage:t.message})})),z_}async function ZW(t){try{const n=(await W5()).transaction(hp),r=await n.objectStore(hp).get($5(t));return await n.done,r}catch(e){if(e instanceof Ru)xu.warn(e.message);else{const n=Rc.create("idb-get",{originalErrorMessage:e?.message});xu.warn(n.message)}}}async function VP(t,e){try{const r=(await W5()).transaction(hp,"readwrite");await r.objectStore(hp).put(e,$5(t)),await r.done}catch(n){if(n instanceof Ru)xu.warn(n.message);else{const r=Rc.create("idb-set",{originalErrorMessage:n?.message});xu.warn(r.message)}}}function $5(t){return`${t.name}!${t.options.appId}`}const JW=1024,e$=30;class t${constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new r$(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=zP();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>e$){const i=i$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){xu.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=zP(),{heartbeatsToSend:n,unsentEntries:r}=n$(this._heartbeatsCache.heartbeats),i=Gy(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return xu.warn(e),""}}}function zP(){return new Date().toISOString().substring(0,10)}function n$(t,e=JW){const n=[];let r=t.slice();for(const i of t){const a=n.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),UP(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),UP(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class r${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return U5()?qK().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZW(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return VP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return VP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function UP(t){return Gy(JSON.stringify({version:2,heartbeats:t})).length}function i$(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function a$(t){Bh(new Zf("platform-logger",e=>new pW(e),"PRIVATE")),Bh(new Zf("heartbeat",e=>new t$(e),"PRIVATE")),Dc(FE,BP,t),Dc(FE,BP,"esm2020"),Dc("fire-js","")}a$("");var qP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var kc,Y5;(function(){var t;function e(V,W){function U(){}U.prototype=W.prototype,V.F=W.prototype,V.prototype=new U,V.prototype.constructor=V,V.D=function(ae,ie,X){for(var J=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)J[xe-2]=arguments[xe];return W.prototype[ie].apply(ae,J)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(V,W,U){U||(U=0);const ae=Array(16);if(typeof W=="string")for(var ie=0;ie<16;++ie)ae[ie]=W.charCodeAt(U++)|W.charCodeAt(U++)<<8|W.charCodeAt(U++)<<16|W.charCodeAt(U++)<<24;else for(ie=0;ie<16;++ie)ae[ie]=W[U++]|W[U++]<<8|W[U++]<<16|W[U++]<<24;W=V.g[0],U=V.g[1],ie=V.g[2];let X=V.g[3],J;J=W+(X^U&(ie^X))+ae[0]+3614090360&4294967295,W=U+(J<<7&4294967295|J>>>25),J=X+(ie^W&(U^ie))+ae[1]+3905402710&4294967295,X=W+(J<<12&4294967295|J>>>20),J=ie+(U^X&(W^U))+ae[2]+606105819&4294967295,ie=X+(J<<17&4294967295|J>>>15),J=U+(W^ie&(X^W))+ae[3]+3250441966&4294967295,U=ie+(J<<22&4294967295|J>>>10),J=W+(X^U&(ie^X))+ae[4]+4118548399&4294967295,W=U+(J<<7&4294967295|J>>>25),J=X+(ie^W&(U^ie))+ae[5]+1200080426&4294967295,X=W+(J<<12&4294967295|J>>>20),J=ie+(U^X&(W^U))+ae[6]+2821735955&4294967295,ie=X+(J<<17&4294967295|J>>>15),J=U+(W^ie&(X^W))+ae[7]+4249261313&4294967295,U=ie+(J<<22&4294967295|J>>>10),J=W+(X^U&(ie^X))+ae[8]+1770035416&4294967295,W=U+(J<<7&4294967295|J>>>25),J=X+(ie^W&(U^ie))+ae[9]+2336552879&4294967295,X=W+(J<<12&4294967295|J>>>20),J=ie+(U^X&(W^U))+ae[10]+4294925233&4294967295,ie=X+(J<<17&4294967295|J>>>15),J=U+(W^ie&(X^W))+ae[11]+2304563134&4294967295,U=ie+(J<<22&4294967295|J>>>10),J=W+(X^U&(ie^X))+ae[12]+1804603682&4294967295,W=U+(J<<7&4294967295|J>>>25),J=X+(ie^W&(U^ie))+ae[13]+4254626195&4294967295,X=W+(J<<12&4294967295|J>>>20),J=ie+(U^X&(W^U))+ae[14]+2792965006&4294967295,ie=X+(J<<17&4294967295|J>>>15),J=U+(W^ie&(X^W))+ae[15]+1236535329&4294967295,U=ie+(J<<22&4294967295|J>>>10),J=W+(ie^X&(U^ie))+ae[1]+4129170786&4294967295,W=U+(J<<5&4294967295|J>>>27),J=X+(U^ie&(W^U))+ae[6]+3225465664&4294967295,X=W+(J<<9&4294967295|J>>>23),J=ie+(W^U&(X^W))+ae[11]+643717713&4294967295,ie=X+(J<<14&4294967295|J>>>18),J=U+(X^W&(ie^X))+ae[0]+3921069994&4294967295,U=ie+(J<<20&4294967295|J>>>12),J=W+(ie^X&(U^ie))+ae[5]+3593408605&4294967295,W=U+(J<<5&4294967295|J>>>27),J=X+(U^ie&(W^U))+ae[10]+38016083&4294967295,X=W+(J<<9&4294967295|J>>>23),J=ie+(W^U&(X^W))+ae[15]+3634488961&4294967295,ie=X+(J<<14&4294967295|J>>>18),J=U+(X^W&(ie^X))+ae[4]+3889429448&4294967295,U=ie+(J<<20&4294967295|J>>>12),J=W+(ie^X&(U^ie))+ae[9]+568446438&4294967295,W=U+(J<<5&4294967295|J>>>27),J=X+(U^ie&(W^U))+ae[14]+3275163606&4294967295,X=W+(J<<9&4294967295|J>>>23),J=ie+(W^U&(X^W))+ae[3]+4107603335&4294967295,ie=X+(J<<14&4294967295|J>>>18),J=U+(X^W&(ie^X))+ae[8]+1163531501&4294967295,U=ie+(J<<20&4294967295|J>>>12),J=W+(ie^X&(U^ie))+ae[13]+2850285829&4294967295,W=U+(J<<5&4294967295|J>>>27),J=X+(U^ie&(W^U))+ae[2]+4243563512&4294967295,X=W+(J<<9&4294967295|J>>>23),J=ie+(W^U&(X^W))+ae[7]+1735328473&4294967295,ie=X+(J<<14&4294967295|J>>>18),J=U+(X^W&(ie^X))+ae[12]+2368359562&4294967295,U=ie+(J<<20&4294967295|J>>>12),J=W+(U^ie^X)+ae[5]+4294588738&4294967295,W=U+(J<<4&4294967295|J>>>28),J=X+(W^U^ie)+ae[8]+2272392833&4294967295,X=W+(J<<11&4294967295|J>>>21),J=ie+(X^W^U)+ae[11]+1839030562&4294967295,ie=X+(J<<16&4294967295|J>>>16),J=U+(ie^X^W)+ae[14]+4259657740&4294967295,U=ie+(J<<23&4294967295|J>>>9),J=W+(U^ie^X)+ae[1]+2763975236&4294967295,W=U+(J<<4&4294967295|J>>>28),J=X+(W^U^ie)+ae[4]+1272893353&4294967295,X=W+(J<<11&4294967295|J>>>21),J=ie+(X^W^U)+ae[7]+4139469664&4294967295,ie=X+(J<<16&4294967295|J>>>16),J=U+(ie^X^W)+ae[10]+3200236656&4294967295,U=ie+(J<<23&4294967295|J>>>9),J=W+(U^ie^X)+ae[13]+681279174&4294967295,W=U+(J<<4&4294967295|J>>>28),J=X+(W^U^ie)+ae[0]+3936430074&4294967295,X=W+(J<<11&4294967295|J>>>21),J=ie+(X^W^U)+ae[3]+3572445317&4294967295,ie=X+(J<<16&4294967295|J>>>16),J=U+(ie^X^W)+ae[6]+76029189&4294967295,U=ie+(J<<23&4294967295|J>>>9),J=W+(U^ie^X)+ae[9]+3654602809&4294967295,W=U+(J<<4&4294967295|J>>>28),J=X+(W^U^ie)+ae[12]+3873151461&4294967295,X=W+(J<<11&4294967295|J>>>21),J=ie+(X^W^U)+ae[15]+530742520&4294967295,ie=X+(J<<16&4294967295|J>>>16),J=U+(ie^X^W)+ae[2]+3299628645&4294967295,U=ie+(J<<23&4294967295|J>>>9),J=W+(ie^(U|~X))+ae[0]+4096336452&4294967295,W=U+(J<<6&4294967295|J>>>26),J=X+(U^(W|~ie))+ae[7]+1126891415&4294967295,X=W+(J<<10&4294967295|J>>>22),J=ie+(W^(X|~U))+ae[14]+2878612391&4294967295,ie=X+(J<<15&4294967295|J>>>17),J=U+(X^(ie|~W))+ae[5]+4237533241&4294967295,U=ie+(J<<21&4294967295|J>>>11),J=W+(ie^(U|~X))+ae[12]+1700485571&4294967295,W=U+(J<<6&4294967295|J>>>26),J=X+(U^(W|~ie))+ae[3]+2399980690&4294967295,X=W+(J<<10&4294967295|J>>>22),J=ie+(W^(X|~U))+ae[10]+4293915773&4294967295,ie=X+(J<<15&4294967295|J>>>17),J=U+(X^(ie|~W))+ae[1]+2240044497&4294967295,U=ie+(J<<21&4294967295|J>>>11),J=W+(ie^(U|~X))+ae[8]+1873313359&4294967295,W=U+(J<<6&4294967295|J>>>26),J=X+(U^(W|~ie))+ae[15]+4264355552&4294967295,X=W+(J<<10&4294967295|J>>>22),J=ie+(W^(X|~U))+ae[6]+2734768916&4294967295,ie=X+(J<<15&4294967295|J>>>17),J=U+(X^(ie|~W))+ae[13]+1309151649&4294967295,U=ie+(J<<21&4294967295|J>>>11),J=W+(ie^(U|~X))+ae[4]+4149444226&4294967295,W=U+(J<<6&4294967295|J>>>26),J=X+(U^(W|~ie))+ae[11]+3174756917&4294967295,X=W+(J<<10&4294967295|J>>>22),J=ie+(W^(X|~U))+ae[2]+718787259&4294967295,ie=X+(J<<15&4294967295|J>>>17),J=U+(X^(ie|~W))+ae[9]+3951481745&4294967295,V.g[0]=V.g[0]+W&4294967295,V.g[1]=V.g[1]+(ie+(J<<21&4294967295|J>>>11))&4294967295,V.g[2]=V.g[2]+ie&4294967295,V.g[3]=V.g[3]+X&4294967295}r.prototype.v=function(V,W){W===void 0&&(W=V.length);const U=W-this.blockSize,ae=this.C;let ie=this.h,X=0;for(;X<W;){if(ie==0)for(;X<=U;)i(this,V,X),X+=this.blockSize;if(typeof V=="string"){for(;X<W;)if(ae[ie++]=V.charCodeAt(X++),ie==this.blockSize){i(this,ae),ie=0;break}}else for(;X<W;)if(ae[ie++]=V[X++],ie==this.blockSize){i(this,ae),ie=0;break}}this.h=ie,this.o+=W},r.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var W=1;W<V.length-8;++W)V[W]=0;W=this.o*8;for(var U=V.length-8;U<V.length;++U)V[U]=W&255,W/=256;for(this.v(V),V=Array(16),W=0,U=0;U<4;++U)for(let ae=0;ae<32;ae+=8)V[W++]=this.g[U]>>>ae&255;return V};function a(V,W){var U=f;return Object.prototype.hasOwnProperty.call(U,V)?U[V]:U[V]=W(V)}function l(V,W){this.h=W;const U=[];let ae=!0;for(let ie=V.length-1;ie>=0;ie--){const X=V[ie]|0;ae&&X==W||(U[ie]=X,ae=!1)}this.g=U}var f={};function m(V){return-128<=V&&V<128?a(V,function(W){return new l([W|0],W<0?-1:0)}):new l([V|0],V<0?-1:0)}function p(V){if(isNaN(V)||!isFinite(V))return _;if(V<0)return L(p(-V));const W=[];let U=1;for(let ae=0;V>=U;ae++)W[ae]=V/U|0,U*=4294967296;return new l(W,0)}function b(V,W){if(V.length==0)throw Error("number format error: empty string");if(W=W||10,W<2||36<W)throw Error("radix out of range: "+W);if(V.charAt(0)=="-")return L(b(V.substring(1),W));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const U=p(Math.pow(W,8));let ae=_;for(let X=0;X<V.length;X+=8){var ie=Math.min(8,V.length-X);const J=parseInt(V.substring(X,X+ie),W);ie<8?(ie=p(Math.pow(W,ie)),ae=ae.j(ie).add(p(J))):(ae=ae.j(U),ae=ae.add(p(J)))}return ae}var _=m(0),T=m(1),N=m(16777216);t=l.prototype,t.m=function(){if(M(this))return-L(this).m();let V=0,W=1;for(let U=0;U<this.g.length;U++){const ae=this.i(U);V+=(ae>=0?ae:4294967296+ae)*W,W*=4294967296}return V},t.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(j(this))return"0";if(M(this))return"-"+L(this).toString(V);const W=p(Math.pow(V,6));var U=this;let ae="";for(;;){const ie=ee(U,W).g;U=z(U,ie.j(W));let X=((U.g.length>0?U.g[0]:U.h)>>>0).toString(V);if(U=ie,j(U))return X+ae;for(;X.length<6;)X="0"+X;ae=X+ae}},t.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function j(V){if(V.h!=0)return!1;for(let W=0;W<V.g.length;W++)if(V.g[W]!=0)return!1;return!0}function M(V){return V.h==-1}t.l=function(V){return V=z(this,V),M(V)?-1:j(V)?0:1};function L(V){const W=V.g.length,U=[];for(let ae=0;ae<W;ae++)U[ae]=~V.g[ae];return new l(U,~V.h).add(T)}t.abs=function(){return M(this)?L(this):this},t.add=function(V){const W=Math.max(this.g.length,V.g.length),U=[];let ae=0;for(let ie=0;ie<=W;ie++){let X=ae+(this.i(ie)&65535)+(V.i(ie)&65535),J=(X>>>16)+(this.i(ie)>>>16)+(V.i(ie)>>>16);ae=J>>>16,X&=65535,J&=65535,U[ie]=J<<16|X}return new l(U,U[U.length-1]&-2147483648?-1:0)};function z(V,W){return V.add(L(W))}t.j=function(V){if(j(this)||j(V))return _;if(M(this))return M(V)?L(this).j(L(V)):L(L(this).j(V));if(M(V))return L(this.j(L(V)));if(this.l(N)<0&&V.l(N)<0)return p(this.m()*V.m());const W=this.g.length+V.g.length,U=[];for(var ae=0;ae<2*W;ae++)U[ae]=0;for(ae=0;ae<this.g.length;ae++)for(let ie=0;ie<V.g.length;ie++){const X=this.i(ae)>>>16,J=this.i(ae)&65535,xe=V.i(ie)>>>16,de=V.i(ie)&65535;U[2*ae+2*ie]+=J*de,$(U,2*ae+2*ie),U[2*ae+2*ie+1]+=X*de,$(U,2*ae+2*ie+1),U[2*ae+2*ie+1]+=J*xe,$(U,2*ae+2*ie+1),U[2*ae+2*ie+2]+=X*xe,$(U,2*ae+2*ie+2)}for(V=0;V<W;V++)U[V]=U[2*V+1]<<16|U[2*V];for(V=W;V<2*W;V++)U[V]=0;return new l(U,0)};function $(V,W){for(;(V[W]&65535)!=V[W];)V[W+1]+=V[W]>>>16,V[W]&=65535,W++}function K(V,W){this.g=V,this.h=W}function ee(V,W){if(j(W))throw Error("division by zero");if(j(V))return new K(_,_);if(M(V))return W=ee(L(V),W),new K(L(W.g),L(W.h));if(M(W))return W=ee(V,L(W)),new K(L(W.g),W.h);if(V.g.length>30){if(M(V)||M(W))throw Error("slowDivide_ only works with positive integers.");for(var U=T,ae=W;ae.l(V)<=0;)U=ue(U),ae=ue(ae);var ie=Z(U,1),X=Z(ae,1);for(ae=Z(ae,2),U=Z(U,2);!j(ae);){var J=X.add(ae);J.l(V)<=0&&(ie=ie.add(U),X=J),ae=Z(ae,1),U=Z(U,1)}return W=z(V,ie.j(W)),new K(ie,W)}for(ie=_;V.l(W)>=0;){for(U=Math.max(1,Math.floor(V.m()/W.m())),ae=Math.ceil(Math.log(U)/Math.LN2),ae=ae<=48?1:Math.pow(2,ae-48),X=p(U),J=X.j(W);M(J)||J.l(V)>0;)U-=ae,X=p(U),J=X.j(W);j(X)&&(X=T),ie=ie.add(X),V=z(V,J)}return new K(ie,V)}t.B=function(V){return ee(this,V).h},t.and=function(V){const W=Math.max(this.g.length,V.g.length),U=[];for(let ae=0;ae<W;ae++)U[ae]=this.i(ae)&V.i(ae);return new l(U,this.h&V.h)},t.or=function(V){const W=Math.max(this.g.length,V.g.length),U=[];for(let ae=0;ae<W;ae++)U[ae]=this.i(ae)|V.i(ae);return new l(U,this.h|V.h)},t.xor=function(V){const W=Math.max(this.g.length,V.g.length),U=[];for(let ae=0;ae<W;ae++)U[ae]=this.i(ae)^V.i(ae);return new l(U,this.h^V.h)};function ue(V){const W=V.g.length+1,U=[];for(let ae=0;ae<W;ae++)U[ae]=V.i(ae)<<1|V.i(ae-1)>>>31;return new l(U,V.h)}function Z(V,W){const U=W>>5;W%=32;const ae=V.g.length-U,ie=[];for(let X=0;X<ae;X++)ie[X]=W>0?V.i(X+U)>>>W|V.i(X+U+1)<<32-W:V.i(X+U);return new l(ie,V.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Y5=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=b,kc=l}).apply(typeof qP<"u"?qP:typeof self<"u"?self:typeof window<"u"?window:{});var F1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var X5,Gg,Q5,py,zE,Z5,J5,ej;(function(){var t,e=Object.defineProperty;function n(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof F1=="object"&&F1];for(var B=0;B<S.length;++B){var H=S[B];if(H&&H.Math==Math)return H}throw Error("Cannot find global object")}var r=n(this);function i(S,B){if(B)e:{var H=r;S=S.split(".");for(var se=0;se<S.length-1;se++){var Ae=S[se];if(!(Ae in H))break e;H=H[Ae]}S=S[S.length-1],se=H[S],B=B(se),B!=se&&B!=null&&e(H,S,{configurable:!0,writable:!0,value:B})}}i("Symbol.dispose",function(S){return S||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(S){return S||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(S){return S||function(B){var H=[],se;for(se in B)Object.prototype.hasOwnProperty.call(B,se)&&H.push([se,B[se]]);return H}});var a=a||{},l=this||self;function f(S){var B=typeof S;return B=="object"&&S!=null||B=="function"}function m(S,B,H){return S.call.apply(S.bind,arguments)}function p(S,B,H){return p=m,p.apply(null,arguments)}function b(S,B){var H=Array.prototype.slice.call(arguments,1);return function(){var se=H.slice();return se.push.apply(se,arguments),S.apply(this,se)}}function _(S,B){function H(){}H.prototype=B.prototype,S.Z=B.prototype,S.prototype=new H,S.prototype.constructor=S,S.Ob=function(se,Ae,Le){for(var ot=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)ot[Gt-2]=arguments[Gt];return B.prototype[Ae].apply(se,ot)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?S=>S&&AsyncContext.Snapshot.wrap(S):S=>S;function N(S){const B=S.length;if(B>0){const H=Array(B);for(let se=0;se<B;se++)H[se]=S[se];return H}return[]}function j(S,B){for(let se=1;se<arguments.length;se++){const Ae=arguments[se];var H=typeof Ae;if(H=H!="object"?H:Ae?Array.isArray(Ae)?"array":H:"null",H=="array"||H=="object"&&typeof Ae.length=="number"){H=S.length||0;const Le=Ae.length||0;S.length=H+Le;for(let ot=0;ot<Le;ot++)S[H+ot]=Ae[ot]}else S.push(Ae)}}class M{constructor(B,H){this.i=B,this.j=H,this.h=0,this.g=null}get(){let B;return this.h>0?(this.h--,B=this.g,this.g=B.next,B.next=null):B=this.i(),B}}function L(S){l.setTimeout(()=>{throw S},0)}function z(){var S=V;let B=null;return S.g&&(B=S.g,S.g=S.g.next,S.g||(S.h=null),B.next=null),B}class ${constructor(){this.h=this.g=null}add(B,H){const se=K.get();se.set(B,H),this.h?this.h.next=se:this.g=se,this.h=se}}var K=new M(()=>new ee,S=>S.reset());class ee{constructor(){this.next=this.g=this.h=null}set(B,H){this.h=B,this.g=H,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,Z=!1,V=new $,W=()=>{const S=Promise.resolve(void 0);ue=()=>{S.then(U)}};function U(){for(var S;S=z();){try{S.h.call(S.g)}catch(H){L(H)}var B=K;B.j(S),B.h<100&&(B.h++,S.next=B.g,B.g=S)}Z=!1}function ae(){this.u=this.u,this.C=this.C}ae.prototype.u=!1,ae.prototype.dispose=function(){this.u||(this.u=!0,this.N())},ae.prototype[Symbol.dispose]=function(){this.dispose()},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(S,B){this.type=S,this.g=this.target=B,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var X=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var S=!1,B=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const H=()=>{};l.addEventListener("test",H,B),l.removeEventListener("test",H,B)}catch{}return S})();function J(S){return/^[\s\xa0]*$/.test(S)}function xe(S,B){ie.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S&&this.init(S,B)}_(xe,ie),xe.prototype.init=function(S,B){const H=this.type=S.type,se=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;this.target=S.target||S.srcElement,this.g=B,B=S.relatedTarget,B||(H=="mouseover"?B=S.fromElement:H=="mouseout"&&(B=S.toElement)),this.relatedTarget=B,se?(this.clientX=se.clientX!==void 0?se.clientX:se.pageX,this.clientY=se.clientY!==void 0?se.clientY:se.pageY,this.screenX=se.screenX||0,this.screenY=se.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=S.pointerType,this.state=S.state,this.i=S,S.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),ye=0;function _e(S,B,H,se,Ae){this.listener=S,this.proxy=null,this.src=B,this.type=H,this.capture=!!se,this.ha=Ae,this.key=++ye,this.da=this.fa=!1}function qe(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function ze(S,B,H){for(const se in S)B.call(H,S[se],se,S)}function et(S,B){for(const H in S)B.call(void 0,S[H],H,S)}function me(S){const B={};for(const H in S)B[H]=S[H];return B}const Se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xe(S,B){let H,se;for(let Ae=1;Ae<arguments.length;Ae++){se=arguments[Ae];for(H in se)S[H]=se[H];for(let Le=0;Le<Se.length;Le++)H=Se[Le],Object.prototype.hasOwnProperty.call(se,H)&&(S[H]=se[H])}}function Ve(S){this.src=S,this.g={},this.h=0}Ve.prototype.add=function(S,B,H,se,Ae){const Le=S.toString();S=this.g[Le],S||(S=this.g[Le]=[],this.h++);const ot=$e(S,B,se,Ae);return ot>-1?(B=S[ot],H||(B.fa=!1)):(B=new _e(B,this.src,Le,!!se,Ae),B.fa=H,S.push(B)),B};function pt(S,B){const H=B.type;if(H in S.g){var se=S.g[H],Ae=Array.prototype.indexOf.call(se,B,void 0),Le;(Le=Ae>=0)&&Array.prototype.splice.call(se,Ae,1),Le&&(qe(B),S.g[H].length==0&&(delete S.g[H],S.h--))}}function $e(S,B,H,se){for(let Ae=0;Ae<S.length;++Ae){const Le=S[Ae];if(!Le.da&&Le.listener==B&&Le.capture==!!H&&Le.ha==se)return Ae}return-1}var yt="closure_lm_"+(Math.random()*1e6|0),ut={};function Ne(S,B,H,se,Ae){if(Array.isArray(B)){for(let Le=0;Le<B.length;Le++)Ne(S,B[Le],H,se,Ae);return null}return H=zt(H),S&&S[de]?S.J(B,H,f(se)?!!se.capture:!1,Ae):Ye(S,B,H,!1,se,Ae)}function Ye(S,B,H,se,Ae,Le){if(!B)throw Error("Invalid event type");const ot=f(Ae)?!!Ae.capture:!!Ae;let Gt=Wn(S);if(Gt||(S[yt]=Gt=new Ve(S)),H=Gt.add(B,H,se,ot,Le),H.proxy)return H;if(se=_t(),H.proxy=se,se.src=S,se.listener=H,S.addEventListener)X||(Ae=ot),Ae===void 0&&(Ae=!1),S.addEventListener(B.toString(),se,Ae);else if(S.attachEvent)S.attachEvent(Wt(B.toString()),se);else if(S.addListener&&S.removeListener)S.addListener(se);else throw Error("addEventListener and attachEvent are unavailable.");return H}function _t(){function S(H){return B.call(S.src,S.listener,H)}const B=mn;return S}function Fe(S,B,H,se,Ae){if(Array.isArray(B))for(var Le=0;Le<B.length;Le++)Fe(S,B[Le],H,se,Ae);else se=f(se)?!!se.capture:!!se,H=zt(H),S&&S[de]?(S=S.i,Le=String(B).toString(),Le in S.g&&(B=S.g[Le],H=$e(B,H,se,Ae),H>-1&&(qe(B[H]),Array.prototype.splice.call(B,H,1),B.length==0&&(delete S.g[Le],S.h--)))):S&&(S=Wn(S))&&(B=S.g[B.toString()],S=-1,B&&(S=$e(B,H,se,Ae)),(H=S>-1?B[S]:null)&&Rt(H))}function Rt(S){if(typeof S!="number"&&S&&!S.da){var B=S.src;if(B&&B[de])pt(B.i,S);else{var H=S.type,se=S.proxy;B.removeEventListener?B.removeEventListener(H,se,S.capture):B.detachEvent?B.detachEvent(Wt(H),se):B.addListener&&B.removeListener&&B.removeListener(se),(H=Wn(B))?(pt(H,S),H.h==0&&(H.src=null,B[yt]=null)):qe(S)}}}function Wt(S){return S in ut?ut[S]:ut[S]="on"+S}function mn(S,B){if(S.da)S=!0;else{B=new xe(B,this);const H=S.listener,se=S.ha||S.src;S.fa&&Rt(S),S=H.call(se,B)}return S}function Wn(S){return S=S[yt],S instanceof Ve?S:null}var st="__closure_events_fn_"+(Math.random()*1e9>>>0);function zt(S){return typeof S=="function"?S:(S[st]||(S[st]=function(B){return S.handleEvent(B)}),S[st])}function Et(){ae.call(this),this.i=new Ve(this),this.M=this,this.G=null}_(Et,ae),Et.prototype[de]=!0,Et.prototype.removeEventListener=function(S,B,H,se){Fe(this,S,B,H,se)};function Zt(S,B){var H,se=S.G;if(se)for(H=[];se;se=se.G)H.push(se);if(S=S.M,se=B.type||B,typeof B=="string")B=new ie(B,S);else if(B instanceof ie)B.target=B.target||S;else{var Ae=B;B=new ie(se,S),Xe(B,Ae)}Ae=!0;let Le,ot;if(H)for(ot=H.length-1;ot>=0;ot--)Le=B.g=H[ot],Ae=at(Le,se,!0,B)&&Ae;if(Le=B.g=S,Ae=at(Le,se,!0,B)&&Ae,Ae=at(Le,se,!1,B)&&Ae,H)for(ot=0;ot<H.length;ot++)Le=B.g=H[ot],Ae=at(Le,se,!1,B)&&Ae}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var S=this.i;for(const B in S.g){const H=S.g[B];for(let se=0;se<H.length;se++)qe(H[se]);delete S.g[B],S.h--}}this.G=null},Et.prototype.J=function(S,B,H,se){return this.i.add(String(S),B,!1,H,se)},Et.prototype.K=function(S,B,H,se){return this.i.add(String(S),B,!0,H,se)};function at(S,B,H,se){if(B=S.i.g[String(B)],!B)return!0;B=B.concat();let Ae=!0;for(let Le=0;Le<B.length;++Le){const ot=B[Le];if(ot&&!ot.da&&ot.capture==H){const Gt=ot.listener,kr=ot.ha||ot.src;ot.fa&&pt(S.i,ot),Ae=Gt.call(kr,se)!==!1&&Ae}}return Ae&&!se.defaultPrevented}function na(S,B){if(typeof S!="function")if(S&&typeof S.handleEvent=="function")S=p(S.handleEvent,S);else throw Error("Invalid listener argument");return Number(B)>2147483647?-1:l.setTimeout(S,B||0)}function zs(S){S.g=na(()=>{S.g=null,S.i&&(S.i=!1,zs(S))},S.l);const B=S.h;S.h=null,S.m.apply(null,B)}class hr extends ae{constructor(B,H){super(),this.m=B,this.l=H,this.h=null,this.i=!1,this.g=null}j(B){this.h=arguments,this.g?this.i=!0:zs(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ba(S){ae.call(this),this.h=S,this.g={}}_(ba,ae);var $n=[];function Fa(S){ze(S.g,function(B,H){this.g.hasOwnProperty(H)&&Rt(B)},S),S.g={}}ba.prototype.N=function(){ba.Z.N.call(this),Fa(this)},ba.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bi=l.JSON.stringify,Lr=l.JSON.parse,Ro=class{stringify(S){return l.JSON.stringify(S,void 0)}parse(S){return l.JSON.parse(S,void 0)}};function gs(){}function ps(){}var In={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rt(){ie.call(this,"d")}_(rt,ie);function cn(){ie.call(this,"c")}_(cn,ie);var Ze={},Bn=null;function Oi(){return Bn=Bn||new Et}Ze.Ia="serverreachability";function Us(S){ie.call(this,Ze.Ia,S)}_(Us,ie);function ft(S){const B=Oi();Zt(B,new Us(B))}Ze.STAT_EVENT="statevent";function tn(S,B){ie.call(this,Ze.STAT_EVENT,S),this.stat=B}_(tn,ie);function Yn(S){const B=Oi();Zt(B,new tn(B,S))}Ze.Ja="timingevent";function wa(S,B){ie.call(this,Ze.Ja,S),this.size=B}_(wa,ie);function Va(S,B){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){S()},B)}function Er(){this.g=!0}Er.prototype.ua=function(){this.g=!1};function Ll(S,B,H,se,Ae,Le){S.info(function(){if(S.g)if(Le){var ot="",Gt=Le.split("&");for(let bn=0;bn<Gt.length;bn++){var kr=Gt[bn].split("=");if(kr.length>1){const zn=kr[0];kr=kr[1];const Ca=zn.split("_");ot=Ca.length>=2&&Ca[1]=="type"?ot+(zn+"="+kr+"&"):ot+(zn+"=redacted&")}}}else ot=null;else ot=Le;return"XMLHTTP REQ ("+se+") [attempt "+Ae+"]: "+B+`
`+H+`
`+ot})}function ii(S,B,H,se,Ae,Le,ot){S.info(function(){return"XMLHTTP RESP ("+se+") [ attempt "+Ae+"]: "+B+`
`+H+`
`+Le+" "+ot})}function Hr(S,B,H,se){S.info(function(){return"XMLHTTP TEXT ("+B+"): "+ra(S,H)+(se?" "+se:"")})}function qi(S,B){S.info(function(){return"TIMEOUT: "+B})}Er.prototype.info=function(){};function ra(S,B){if(!S.g)return B;if(!B)return null;try{const Le=JSON.parse(B);if(Le){for(S=0;S<Le.length;S++)if(Array.isArray(Le[S])){var H=Le[S];if(!(H.length<2)){var se=H[1];if(Array.isArray(se)&&!(se.length<1)){var Ae=se[0];if(Ae!="noop"&&Ae!="stop"&&Ae!="close")for(let ot=1;ot<se.length;ot++)se[ot]=""}}}}return bi(Le)}catch{return B}}var ys={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_n={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mr;function Kr(){}_(Kr,gs),Kr.prototype.g=function(){return new XMLHttpRequest},mr=new Kr;function ci(S){return encodeURIComponent(String(S))}function fi(S){var B=1;S=S.split(":");const H=[];for(;B>0&&S.length;)H.push(S.shift()),B--;return S.length&&H.push(S.join(":")),H}function dt(S,B,H,se){this.j=S,this.i=B,this.l=H,this.S=se||1,this.V=new ba(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ni}function Ni(){this.i=null,this.g="",this.h=!1}var Fn={},gn={};function Nr(S,B,H){S.M=1,S.A=Gi(Sr(B)),S.u=H,S.R=!0,za(S,null)}function za(S,B){S.F=Date.now(),Pi(S),S.B=Sr(S.A);var H=S.B,se=S.S;Array.isArray(se)||(se=[String(se)]),Vn(H.i,"t",se),S.C=0,H=S.j.L,S.h=new Ni,S.g=Br(S.j,H?B:null,!S.u),S.P>0&&(S.O=new hr(p(S.Y,S,S.g),S.P)),B=S.V,H=S.g,se=S.ba;var Ae="readystatechange";Array.isArray(Ae)||(Ae&&($n[0]=Ae.toString()),Ae=$n);for(let Le=0;Le<Ae.length;Le++){const ot=Ne(H,Ae[Le],se||B.handleEvent,!1,B.h||B);if(!ot)break;B.g[ot.key]=ot}B=S.J?me(S.J):{},S.u?(S.v||(S.v="POST"),B["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.B,S.v,S.u,B)):(S.v="GET",S.g.ea(S.B,S.v,null,B)),ft(),Ll(S.i,S.v,S.B,S.l,S.S,S.u)}dt.prototype.ba=function(S){S=S.target;const B=this.O;B&&Ga(S)==3?B.j():this.Y(S)},dt.prototype.Y=function(S){try{if(S==this.g)e:{const Gt=Ga(this.g),kr=this.g.ya(),bn=this.g.ca();if(!(Gt<3)&&(Gt!=3||this.g&&(this.h.h||this.g.la()||ir(this.g)))){this.K||Gt!=4||kr==7||(kr==8||bn<=0?ft(3):ft(2)),Qn(this);var B=this.g.ca();this.X=B;var H=Zo(this);if(this.o=B==200,ii(this.i,this.v,this.B,this.l,this.S,Gt,B),this.o){if(this.U&&!this.L){t:{if(this.g){var se,Ae=this.g;if((se=Ae.g?Ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(se)){var Le=se;break t}}Le=null}if(S=Le)Hr(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rr(this,S);else{this.o=!1,this.m=3,Yn(12),$r(this),Mt(this);break e}}if(this.R){S=!0;let zn;for(;!this.K&&this.C<H.length;)if(zn=Bl(this,H),zn==gn){Gt==4&&(this.m=4,Yn(14),S=!1),Hr(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==Fn){this.m=4,Yn(15),Hr(this.i,this.l,H,"[Invalid Chunk]"),S=!1;break}else Hr(this.i,this.l,zn,null),rr(this,zn);if(Wr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||H.length!=0||this.h.h||(this.m=1,Yn(16),S=!1),this.o=this.o&&S,!S)Hr(this.i,this.l,H,"[Invalid Chunked Response]"),$r(this),Mt(this);else if(H.length>0&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.aa&&!ot.P&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),ke(ot),ot.P=!0,Yn(11))}}else Hr(this.i,this.l,H,null),rr(this,H);Gt==4&&$r(this),this.o&&!this.K&&(Gt==4?Ka(this.j,this):(this.o=!1,Pi(this)))}else Ia(this.g),B==400&&H.indexOf("Unknown SID")>0?(this.m=3,Yn(12)):(this.m=0,Yn(13)),$r(this),Mt(this)}}}catch{}};function Zo(S){if(!Wr(S))return S.g.la();const B=ir(S.g);if(B==="")return"";let H="";const se=B.length,Ae=Ga(S.g)==4;if(!S.h.i){if(typeof TextDecoder>"u")return $r(S),Mt(S),"";S.h.i=new l.TextDecoder}for(let Le=0;Le<se;Le++)S.h.h=!0,H+=S.h.i.decode(B[Le],{stream:!(Ae&&Le==se-1)});return B.length=0,S.h.g+=H,S.C=0,S.h.g}function Wr(S){return S.g?S.v=="GET"&&S.M!=2&&S.j.Aa:!1}function Bl(S,B){var H=S.C,se=B.indexOf(`
`,H);return se==-1?gn:(H=Number(B.substring(H,se)),isNaN(H)?Fn:(se+=1,se+H>B.length?gn:(B=B.slice(se,se+H),S.C=se+H,B)))}dt.prototype.cancel=function(){this.K=!0,$r(this)};function Pi(S){S.T=Date.now()+S.H,Ri(S,S.H)}function Ri(S,B){if(S.D!=null)throw Error("WatchDog timer not null");S.D=Va(p(S.aa,S),B)}function Qn(S){S.D&&(l.clearTimeout(S.D),S.D=null)}dt.prototype.aa=function(){this.D=null;const S=Date.now();S-this.T>=0?(qi(this.i,this.B),this.M!=2&&(ft(),Yn(17)),$r(this),this.m=2,Mt(this)):Ri(this,this.T-S)};function Mt(S){S.j.I==0||S.K||Ka(S.j,S)}function $r(S){Qn(S);var B=S.O;B&&typeof B.dispose=="function"&&B.dispose(),S.O=null,Fa(S.V),S.g&&(B=S.g,S.g=null,B.abort(),B.dispose())}function rr(S,B){try{var H=S.j;if(H.I!=0&&(H.g==S||wi(H.h,S))){if(!S.L&&wi(H.h,S)&&H.I==3){try{var se=H.Ba.g.parse(B)}catch{se=null}if(Array.isArray(se)&&se.length==3){var Ae=se;if(Ae[0]==0){e:if(!H.v){if(H.g)if(H.g.F+3e3<S.F)Dr(H),os(H);else break e;bs(H),Yn(18)}}else H.xa=Ae[1],0<H.xa-H.K&&Ae[2]<37500&&H.F&&H.A==0&&!H.C&&(H.C=Va(p(H.Va,H),6e3));Cn(H.h)<=1&&H.ta&&(H.ta=void 0)}else Wa(H,11)}else if((S.L||H.g==S)&&Dr(H),!J(B))for(Ae=H.Ba.g.parse(B),B=0;B<Ae.length;B++){let bn=Ae[B];const zn=bn[0];if(!(zn<=H.K))if(H.K=zn,bn=bn[1],H.I==2)if(bn[0]=="c"){H.M=bn[1],H.ba=bn[2];const Ca=bn[3];Ca!=null&&(H.ka=Ca,H.j.info("VER="+H.ka));const $a=bn[4];$a!=null&&(H.za=$a,H.j.info("SVER="+H.za));const di=bn[5];di!=null&&typeof di=="number"&&di>0&&(se=1.5*di,H.O=se,H.j.info("backChannelRequestTimeoutMs_="+se)),se=H;const Oa=S.g;if(Oa){const fo=Oa.g?Oa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fo){var Le=se.h;Le.g||fo.indexOf("spdy")==-1&&fo.indexOf("quic")==-1&&fo.indexOf("h2")==-1||(Le.j=Le.l,Le.g=new Set,Le.h&&(ss(Le,Le.h),Le.h=null))}if(se.G){const _s=Oa.g?Oa.g.getResponseHeader("X-HTTP-Session-Id"):null;_s&&(se.wa=_s,Vt(se.J,se.G,_s))}}H.I=3,H.l&&H.l.ra(),H.aa&&(H.T=Date.now()-S.F,H.j.info("Handshake RTT: "+H.T+"ms")),se=H;var ot=S;if(se.na=il(se,se.L?se.ba:null,se.W),ot.L){yn(se.h,ot);var Gt=ot,kr=se.O;kr&&(Gt.H=kr),Gt.D&&(Qn(Gt),Pi(Gt)),se.g=ot}else sa(se);H.i.length>0&&vs(H)}else bn[0]!="stop"&&bn[0]!="close"||Wa(H,7);else H.I==3&&(bn[0]=="stop"||bn[0]=="close"?bn[0]=="stop"?Wa(H,7):Gs(H):bn[0]!="noop"&&H.l&&H.l.qa(bn),H.A=0)}}ft(4)}catch{}}var Ar=class{constructor(S,B){this.g=S,this.map=B}};function Ge(S){this.l=S||10,l.PerformanceNavigationTiming?(S=l.performance.getEntriesByType("navigation"),S=S.length>0&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function uo(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function Cn(S){return S.h?1:S.g?S.g.size:0}function wi(S,B){return S.h?S.h==B:S.g?S.g.has(B):!1}function ss(S,B){S.g?S.g.add(B):S.h=B}function yn(S,B){S.h&&S.h==B?S.h=null:S.g&&S.g.has(B)&&S.g.delete(B)}Ge.prototype.cancel=function(){if(this.i=ln(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function ln(S){if(S.h!=null)return S.i.concat(S.h.G);if(S.g!=null&&S.g.size!==0){let B=S.i;for(const H of S.g.values())B=B.concat(H.G);return B}return N(S.i)}var nn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qt(S,B){if(S){S=S.split("&");for(let H=0;H<S.length;H++){const se=S[H].indexOf("=");let Ae,Le=null;se>=0?(Ae=S[H].substring(0,se),Le=S[H].substring(se+1)):Ae=S[H],B(Ae,Le?decodeURIComponent(Le.replace(/\+/g," ")):"")}}}function Di(S){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let B;S instanceof Di?(this.l=S.l,rn(this,S.j),this.o=S.o,this.g=S.g,ai(this,S.u),this.h=S.h,Jo(this,Fl(S.i)),this.m=S.m):S&&(B=String(S).match(nn))?(this.l=!1,rn(this,B[1]||"",!0),this.o=vn(B[2]||""),this.g=vn(B[3]||"",!0),ai(this,B[4]),this.h=vn(B[5]||"",!0),Jo(this,B[6]||"",!0),this.m=vn(B[7]||"")):(this.l=!1,this.i=new Rr(null,this.l))}Di.prototype.toString=function(){const S=[];var B=this.j;B&&S.push(ki(B,Zn,!0),":");var H=this.g;return(H||B=="file")&&(S.push("//"),(B=this.o)&&S.push(ki(B,Zn,!0),"@"),S.push(ci(H).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),H=this.u,H!=null&&S.push(":",String(H))),(H=this.h)&&(this.g&&H.charAt(0)!="/"&&S.push("/"),S.push(ki(H,H.charAt(0)=="/"?ce:Te,!0))),(H=this.i.toString())&&S.push("?",H),(H=this.m)&&S.push("#",ki(H,Pr)),S.join("")},Di.prototype.resolve=function(S){const B=Sr(this);let H=!!S.j;H?rn(B,S.j):H=!!S.o,H?B.o=S.o:H=!!S.g,H?B.g=S.g:H=S.u!=null;var se=S.h;if(H)ai(B,S.u);else if(H=!!S.h){if(se.charAt(0)!="/")if(this.g&&!this.h)se="/"+se;else{var Ae=B.h.lastIndexOf("/");Ae!=-1&&(se=B.h.slice(0,Ae+1)+se)}if(Ae=se,Ae==".."||Ae==".")se="";else if(Ae.indexOf("./")!=-1||Ae.indexOf("/.")!=-1){se=Ae.lastIndexOf("/",0)==0,Ae=Ae.split("/");const Le=[];for(let ot=0;ot<Ae.length;){const Gt=Ae[ot++];Gt=="."?se&&ot==Ae.length&&Le.push(""):Gt==".."?((Le.length>1||Le.length==1&&Le[0]!="")&&Le.pop(),se&&ot==Ae.length&&Le.push("")):(Le.push(Gt),se=!0)}se=Le.join("/")}else se=Ae}return H?B.h=se:H=S.i.toString()!=="",H?Jo(B,Fl(S.i)):H=!!S.m,H&&(B.m=S.m),B};function Sr(S){return new Di(S)}function rn(S,B,H){S.j=H?vn(B,!0):B,S.j&&(S.j=S.j.replace(/:$/,""))}function ai(S,B){if(B){if(B=Number(B),isNaN(B)||B<0)throw Error("Bad port number "+B);S.u=B}else S.u=null}function Jo(S,B,H){B instanceof Rr?(S.i=B,_a(S.i,S.l)):(H||(B=ki(B,wt)),S.i=new Rr(B,S.l))}function Vt(S,B,H){S.i.set(B,H)}function Gi(S){return Vt(S,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),S}function vn(S,B){return S?B?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function ki(S,B,H){return typeof S=="string"?(S=encodeURI(S).replace(B,$t),H&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function $t(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var Zn=/[#\/\?@]/g,Te=/[#\?:]/g,ce=/[#\?]/g,wt=/[#\?@]/g,Pr=/#/g;function Rr(S,B){this.h=this.g=null,this.i=S||null,this.j=!!B}function Hi(S){S.g||(S.g=new Map,S.h=0,S.i&&Qt(S.i,function(B,H){S.add(decodeURIComponent(B.replace(/\+/g," ")),H)}))}t=Rr.prototype,t.add=function(S,B){Hi(this),this.i=null,S=Yr(this,S);let H=this.g.get(S);return H||this.g.set(S,H=[]),H.push(B),this.h+=1,this};function el(S,B){Hi(S),B=Yr(S,B),S.g.has(B)&&(S.i=null,S.h-=S.g.get(B).length,S.g.delete(B))}function Ut(S,B){return Hi(S),B=Yr(S,B),S.g.has(B)}t.forEach=function(S,B){Hi(this),this.g.forEach(function(H,se){H.forEach(function(Ae){S.call(B,Ae,se,this)},this)},this)};function Nt(S,B){Hi(S);let H=[];if(typeof B=="string")Ut(S,B)&&(H=H.concat(S.g.get(Yr(S,B))));else for(S=Array.from(S.g.values()),B=0;B<S.length;B++)H=H.concat(S[B]);return H}t.set=function(S,B){return Hi(this),this.i=null,S=Yr(this,S),Ut(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[B]),this.h+=1,this},t.get=function(S,B){return S?(S=Nt(this,S),S.length>0?String(S[0]):B):B};function Vn(S,B,H){el(S,B),H.length>0&&(S.i=null,S.g.set(Yr(S,B),N(H)),S.h+=H.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],B=Array.from(this.g.keys());for(let se=0;se<B.length;se++){var H=B[se];const Ae=ci(H);H=Nt(this,H);for(let Le=0;Le<H.length;Le++){let ot=Ae;H[Le]!==""&&(ot+="="+ci(H[Le])),S.push(ot)}}return this.i=S.join("&")};function Fl(S){const B=new Rr;return B.i=S.i,S.g&&(B.g=new Map(S.g),B.h=S.h),B}function Yr(S,B){return B=String(B),S.j&&(B=B.toLowerCase()),B}function _a(S,B){B&&!S.j&&(Hi(S),S.i=null,S.g.forEach(function(H,se){const Ae=se.toLowerCase();se!=Ae&&(el(this,se),Vn(this,Ae,H))},S)),S.j=B}function _i(S,B){const H=new Er;if(l.Image){const se=new Image;se.onload=b(Ea,H,"TestLoadImage: loaded",!0,B,se),se.onerror=b(Ea,H,"TestLoadImage: error",!1,B,se),se.onabort=b(Ea,H,"TestLoadImage: abort",!1,B,se),se.ontimeout=b(Ea,H,"TestLoadImage: timeout",!1,B,se),l.setTimeout(function(){se.ontimeout&&se.ontimeout()},1e4),se.src=S}else B(!1)}function ia(S,B){const H=new Er,se=new AbortController,Ae=setTimeout(()=>{se.abort(),Ea(H,"TestPingServer: timeout",!1,B)},1e4);fetch(S,{signal:se.signal}).then(Le=>{clearTimeout(Ae),Le.ok?Ea(H,"TestPingServer: ok",!0,B):Ea(H,"TestPingServer: server error",!1,B)}).catch(()=>{clearTimeout(Ae),Ea(H,"TestPingServer: error",!1,B)})}function Ea(S,B,H,se,Ae){try{Ae&&(Ae.onload=null,Ae.onerror=null,Ae.onabort=null,Ae.ontimeout=null),se(H)}catch{}}function Jn(){this.g=new Ro}function Mn(S){this.i=S.Sb||null,this.h=S.ab||!1}_(Mn,gs),Mn.prototype.g=function(){return new Tr(this.i,this.h)};function Tr(S,B){Et.call(this),this.H=S,this.o=B,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Tr,Et),t=Tr.prototype,t.open=function(S,B){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=S,this.D=B,this.readyState=1,Lt(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const B={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};S&&(B.body=S),(this.H||l).fetch(new Request(this.D,B)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ua(this)),this.readyState=0},t.Pa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Lt(this)),this.g&&(this.readyState=3,Lt(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pt(this)}else S.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pt(S){S.j.read().then(S.Ma.bind(S)).catch(S.ga.bind(S))}t.Ma=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var B=S.value?S.value:new Uint8Array(0);(B=this.B.decode(B,{stream:!S.done}))&&(this.response=this.responseText+=B)}S.done?Ua(this):Lt(this),this.readyState==3&&Pt(this)}},t.Oa=function(S){this.g&&(this.response=this.responseText=S,Ua(this))},t.Na=function(S){this.g&&(this.response=S,Ua(this))},t.ga=function(){this.g&&Ua(this)};function Ua(S){S.readyState=4,S.l=null,S.j=null,S.B=null,Lt(S)}t.setRequestHeader=function(S,B){this.A.append(S,B)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],B=this.h.entries();for(var H=B.next();!H.done;)H=H.value,S.push(H[0]+": "+H[1]),H=B.next();return S.join(`\r
`)};function Lt(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(Tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function xn(S){let B="";return ze(S,function(H,se){B+=se,B+=":",B+=H,B+=`\r
`}),B}function Do(S,B,H){e:{for(se in H){var se=!1;break e}se=!0}se||(H=xn(H),typeof S=="string"?H!=null&&ci(H):Vt(S,B,H))}function an(S){Et.call(this),this.headers=new Map,this.L=S||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(an,Et);var Aa=/^https?$/i,qa=["POST","PUT"];t=an.prototype,t.Fa=function(S){this.H=S},t.ea=function(S,B,H,se){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);B=B?B.toUpperCase():"GET",this.D=S,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mr.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(B,String(S),!0),this.B=!1}catch(Le){qs(this,Le);return}if(S=H||"",H=new Map(this.headers),se)if(Object.getPrototypeOf(se)===Object.prototype)for(var Ae in se)H.set(Ae,se[Ae]);else if(typeof se.keys=="function"&&typeof se.get=="function")for(const Le of se.keys())H.set(Le,se.get(Le));else throw Error("Unknown input type for opt_headers: "+String(se));se=Array.from(H.keys()).find(Le=>Le.toLowerCase()=="content-type"),Ae=l.FormData&&S instanceof l.FormData,!(Array.prototype.indexOf.call(qa,B,void 0)>=0)||se||Ae||H.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Le,ot]of H)this.g.setRequestHeader(Le,ot);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(S),this.v=!1}catch(Le){qs(this,Le)}};function qs(S,B){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=B,S.o=5,Sa(S),aa(S)}function Sa(S){S.A||(S.A=!0,Zt(S,"complete"),Zt(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=S||7,Zt(this,"complete"),Zt(this,"abort"),aa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),aa(this,!0)),an.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ta(this):this.Xa())},t.Xa=function(){Ta(this)};function Ta(S){if(S.h&&typeof a<"u"){if(S.v&&Ga(S)==4)setTimeout(S.Ca.bind(S),0);else if(Zt(S,"readystatechange"),Ga(S)==4){S.h=!1;try{const Le=S.ca();e:switch(Le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var B=!0;break e;default:B=!1}var H;if(!(H=B)){var se;if(se=Le===0){let ot=String(S.D).match(nn)[1]||null;!ot&&l.self&&l.self.location&&(ot=l.self.location.protocol.slice(0,-1)),se=!Aa.test(ot?ot.toLowerCase():"")}H=se}if(H)Zt(S,"complete"),Zt(S,"success");else{S.o=6;try{var Ae=Ga(S)>2?S.g.statusText:""}catch{Ae=""}S.l=Ae+" ["+S.ca()+"]",Sa(S)}}finally{aa(S)}}}}function aa(S,B){if(S.g){S.m&&(clearTimeout(S.m),S.m=null);const H=S.g;S.g=null,B||Zt(S,"ready");try{H.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ga(S){return S.g?S.g.readyState:0}t.ca=function(){try{return Ga(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(S){if(this.g){var B=this.g.responseText;return S&&B.indexOf(S)==0&&(B=B.substring(S.length)),Lr(B)}};function ir(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.F){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function Ia(S){const B={};S=(S.g&&Ga(S)>=2&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let se=0;se<S.length;se++){if(J(S[se]))continue;var H=fi(S[se]);const Ae=H[0];if(H=H[1],typeof H!="string")continue;H=H.trim();const Le=B[Ae]||[];B[Ae]=Le,Le.push(H)}et(B,function(se){return se.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ir(S,B,H){return H&&H.internalChannelParams&&H.internalChannelParams[S]||B}function Ha(S){this.za=0,this.i=[],this.j=new Er,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ir("failFast",!1,S),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ir("baseRetryDelayMs",5e3,S),this.Za=Ir("retryDelaySeedMs",1e4,S),this.Ta=Ir("forwardChannelMaxRetries",2,S),this.va=Ir("forwardChannelRequestTimeoutMs",2e4,S),this.ma=S&&S.xmlHttpFactory||void 0,this.Ua=S&&S.Rb||void 0,this.Aa=S&&S.useFetchStreams||!1,this.O=void 0,this.L=S&&S.supportsCrossDomainXhr||!1,this.M="",this.h=new Ge(S&&S.concurrentRequestLimit),this.Ba=new Jn,this.S=S&&S.fastHandshake||!1,this.R=S&&S.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=S&&S.Pb||!1,S&&S.ua&&this.j.ua(),S&&S.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&S&&S.detectBufferingProxy||!1,this.ia=void 0,S&&S.longPollingTimeout&&S.longPollingTimeout>0&&(this.ia=S.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ha.prototype,t.ka=8,t.I=1,t.connect=function(S,B,H,se){Yn(0),this.W=S,this.H=B||{},H&&se!==void 0&&(this.H.OSID=H,this.H.OAID=se),this.F=this.X,this.J=il(this,null,this.W),vs(this)};function Gs(S){if(tl(S),S.I==3){var B=S.V++,H=Sr(S.J);if(Vt(H,"SID",S.M),Vt(H,"RID",B),Vt(H,"TYPE","terminate"),xs(S,H),B=new dt(S,S.j,B),B.M=2,B.A=Gi(Sr(H)),H=!1,l.navigator&&l.navigator.sendBeacon)try{H=l.navigator.sendBeacon(B.A.toString(),"")}catch{}!H&&l.Image&&(new Image().src=B.A,H=!0),H||(B.g=Br(B.j,null),B.g.ea(B.A)),B.F=Date.now(),Pi(B)}rl(S)}function os(S){S.g&&(ke(S),S.g.cancel(),S.g=null)}function tl(S){os(S),S.v&&(l.clearTimeout(S.v),S.v=null),Dr(S),S.h.cancel(),S.m&&(typeof S.m=="number"&&l.clearTimeout(S.m),S.m=null)}function vs(S){if(!uo(S.h)&&!S.m){S.m=!0;var B=S.Ea;ue||W(),Z||(ue(),Z=!0),V.add(B,S),S.D=0}}function nl(S,B){return Cn(S.h)>=S.h.j-(S.m?1:0)?!1:S.m?(S.i=B.G.concat(S.i),!0):S.I==1||S.I==2||S.D>=(S.Sa?0:S.Ta)?!1:(S.m=Va(p(S.Ea,S,B),ko(S,S.D)),S.D++,!0)}t.Ea=function(S){if(this.m)if(this.m=null,this.I==1){if(!S){this.V=Math.floor(Math.random()*1e5),S=this.V++;const Ae=new dt(this,this.j,S);let Le=this.o;if(this.U&&(Le?(Le=me(Le),Xe(Le,this.U)):Le=this.U),this.u!==null||this.R||(Ae.J=Le,Le=null),this.S)e:{for(var B=0,H=0;H<this.i.length;H++){t:{var se=this.i[H];if("__data__"in se.map&&(se=se.map.__data__,typeof se=="string")){se=se.length;break t}se=void 0}if(se===void 0)break;if(B+=se,B>4096){B=H;break e}if(B===4096||H===this.i.length-1){B=H+1;break e}}B=1e3}else B=1e3;B=co(this,Ae,B),H=Sr(this.J),Vt(H,"RID",S),Vt(H,"CVER",22),this.G&&Vt(H,"X-HTTP-Session-Id",this.G),xs(this,H),Le&&(this.R?B="headers="+ci(xn(Le))+"&"+B:this.u&&Do(H,this.u,Le)),ss(this.h,Ae),this.Ra&&Vt(H,"TYPE","init"),this.S?(Vt(H,"$req",B),Vt(H,"SID","null"),Ae.U=!0,Nr(Ae,H,null)):Nr(Ae,H,B),this.I=2}}else this.I==3&&(S?En(this,S):this.i.length==0||uo(this.h)||En(this))};function En(S,B){var H;B?H=B.l:H=S.V++;const se=Sr(S.J);Vt(se,"SID",S.M),Vt(se,"RID",H),Vt(se,"AID",S.K),xs(S,se),S.u&&S.o&&Do(se,S.u,S.o),H=new dt(S,S.j,H,S.D+1),S.u===null&&(H.J=S.o),B&&(S.i=B.G.concat(S.i)),B=co(S,H,1e3),H.H=Math.round(S.va*.5)+Math.round(S.va*.5*Math.random()),ss(S.h,H),Nr(H,se,B)}function xs(S,B){S.H&&ze(S.H,function(H,se){Vt(B,se,H)}),S.l&&ze({},function(H,se){Vt(B,se,H)})}function co(S,B,H){H=Math.min(S.i.length,H);const se=S.l?p(S.l.Ka,S.l,S):null;e:{var Ae=S.i;let Gt=-1;for(;;){const kr=["count="+H];Gt==-1?H>0?(Gt=Ae[0].g,kr.push("ofs="+Gt)):Gt=0:kr.push("ofs="+Gt);let bn=!0;for(let zn=0;zn<H;zn++){var Le=Ae[zn].g;const Ca=Ae[zn].map;if(Le-=Gt,Le<0)Gt=Math.max(0,Ae[zn].g-100),bn=!1;else try{Le="req"+Le+"_"||"";try{var ot=Ca instanceof Map?Ca:Object.entries(Ca);for(const[$a,di]of ot){let Oa=di;f(di)&&(Oa=bi(di)),kr.push(Le+$a+"="+encodeURIComponent(Oa))}}catch($a){throw kr.push(Le+"type="+encodeURIComponent("_badmap")),$a}}catch{se&&se(Ca)}}if(bn){ot=kr.join("&");break e}}ot=void 0}return S=S.i.splice(0,H),B.G=S,ot}function sa(S){if(!S.g&&!S.v){S.Y=1;var B=S.Da;ue||W(),Z||(ue(),Z=!0),V.add(B,S),S.A=0}}function bs(S){return S.g||S.v||S.A>=3?!1:(S.Y++,S.v=Va(p(S.Da,S),ko(S,S.A)),S.A++,!0)}t.Da=function(){if(this.v=null,Yt(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var S=4*this.T;this.j.info("BP detection timer enabled: "+S),this.B=Va(p(this.Wa,this),S)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Yn(10),os(this),Yt(this))};function ke(S){S.B!=null&&(l.clearTimeout(S.B),S.B=null)}function Yt(S){S.g=new dt(S,S.j,"rpc",S.Y),S.u===null&&(S.g.J=S.o),S.g.P=0;var B=Sr(S.na);Vt(B,"RID","rpc"),Vt(B,"SID",S.M),Vt(B,"AID",S.K),Vt(B,"CI",S.F?"0":"1"),!S.F&&S.ia&&Vt(B,"TO",S.ia),Vt(B,"TYPE","xmlhttp"),xs(S,B),S.u&&S.o&&Do(B,S.u,S.o),S.O&&(S.g.H=S.O);var H=S.g;S=S.ba,H.M=1,H.A=Gi(Sr(B)),H.u=null,H.R=!0,za(H,S)}t.Va=function(){this.C!=null&&(this.C=null,os(this),bs(this),Yn(19))};function Dr(S){S.C!=null&&(l.clearTimeout(S.C),S.C=null)}function Ka(S,B){var H=null;if(S.g==B){Dr(S),ke(S),S.g=null;var se=2}else if(wi(S.h,B))H=B.G,yn(S.h,B),se=1;else return;if(S.I!=0){if(B.o)if(se==1){H=B.u?B.u.length:0,B=Date.now()-B.F;var Ae=S.D;se=Oi(),Zt(se,new wa(se,H)),vs(S)}else sa(S);else if(Ae=B.m,Ae==3||Ae==0&&B.X>0||!(se==1&&nl(S,B)||se==2&&bs(S)))switch(H&&H.length>0&&(B=S.h,B.i=B.i.concat(H)),Ae){case 1:Wa(S,5);break;case 4:Wa(S,10);break;case 3:Wa(S,6);break;default:Wa(S,2)}}}function ko(S,B){let H=S.Qa+Math.floor(Math.random()*S.Za);return S.isActive()||(H*=2),H*B}function Wa(S,B){if(S.j.info("Error code "+B),B==2){var H=p(S.bb,S),se=S.Ua;const Ae=!se;se=new Di(se||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||rn(se,"https"),Gi(se),Ae?_i(se.toString(),H):ia(se.toString(),H)}else Yn(2);S.I=0,S.l&&S.l.pa(B),rl(S),tl(S)}t.bb=function(S){S?(this.j.info("Successfully pinged google.com"),Yn(2)):(this.j.info("Failed to ping google.com"),Yn(1))};function rl(S){if(S.I=0,S.ja=[],S.l){const B=ln(S.h);(B.length!=0||S.i.length!=0)&&(j(S.ja,B),j(S.ja,S.i),S.h.i.length=0,N(S.i),S.i.length=0),S.l.oa()}}function il(S,B,H){var se=H instanceof Di?Sr(H):new Di(H);if(se.g!="")B&&(se.g=B+"."+se.g),ai(se,se.u);else{var Ae=l.location;se=Ae.protocol,B=B?B+"."+Ae.hostname:Ae.hostname,Ae=+Ae.port;const Le=new Di(null);se&&rn(Le,se),B&&(Le.g=B),Ae&&ai(Le,Ae),H&&(Le.h=H),se=Le}return H=S.G,B=S.wa,H&&B&&Vt(se,H,B),Vt(se,"VER",S.ka),xs(S,se),se}function Br(S,B,H){if(B&&!S.L)throw Error("Can't create secondary domain capable XhrIo object.");return B=S.Aa&&!S.ma?new an(new Mn({ab:H})):new an(S.ma),B.Fa(S.L),B}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function er(){}t=er.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function oa(){}oa.prototype.g=function(S,B){return new fn(S,B)};function fn(S,B){Et.call(this),this.g=new Ha(B),this.l=S,this.h=B&&B.messageUrlParams||null,S=B&&B.messageHeaders||null,B&&B.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=B&&B.initMessageHeaders||null,B&&B.messageContentType&&(S?S["X-WebChannel-Content-Type"]=B.messageContentType:S={"X-WebChannel-Content-Type":B.messageContentType}),B&&B.sa&&(S?S["X-WebChannel-Client-Profile"]=B.sa:S={"X-WebChannel-Client-Profile":B.sa}),this.g.U=S,(S=B&&B.Qb)&&!J(S)&&(this.g.u=S),this.A=B&&B.supportsCrossDomainXhr||!1,this.v=B&&B.sendRawJson||!1,(B=B&&B.httpSessionIdParam)&&!J(B)&&(this.g.G=B,S=this.h,S!==null&&B in S&&(S=this.h,B in S&&delete S[B])),this.j=new pn(this)}_(fn,Et),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Gs(this.g)},fn.prototype.o=function(S){var B=this.g;if(typeof S=="string"){var H={};H.__data__=S,S=H}else this.v&&(H={},H.__data__=bi(S),S=H);B.i.push(new Ar(B.Ya++,S)),B.I==3&&vs(B)},fn.prototype.N=function(){this.g.l=null,delete this.j,Gs(this.g),delete this.g,fn.Z.N.call(this)};function ws(S){rt.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var B=S.__sm__;if(B){e:{for(const H in B){S=H;break e}S=void 0}(this.i=S)&&(S=this.i,B=B!==null&&S in B?B[S]:void 0),this.data=B}else this.data=S}_(ws,rt);function ls(){cn.call(this),this.status=1}_(ls,cn);function pn(S){this.g=S}_(pn,er),pn.prototype.ra=function(){Zt(this.g,"a")},pn.prototype.qa=function(S){Zt(this.g,new ws(S))},pn.prototype.pa=function(S){Zt(this.g,new ls)},pn.prototype.oa=function(){Zt(this.g,"b")},oa.prototype.createWebChannel=oa.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,ej=function(){return new oa},J5=function(){return Oi()},Z5=Ze,zE={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ys.NO_ERROR=0,ys.TIMEOUT=8,ys.HTTP_ERROR=6,py=ys,_n.COMPLETE="complete",Q5=_n,ps.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",Et.prototype.listen=Et.prototype.J,Gg=ps,an.prototype.listenOnce=an.prototype.K,an.prototype.getLastError=an.prototype.Ha,an.prototype.getLastErrorCode=an.prototype.ya,an.prototype.getStatus=an.prototype.ca,an.prototype.getResponseJson=an.prototype.La,an.prototype.getResponseText=an.prototype.la,an.prototype.send=an.prototype.ea,an.prototype.setWithCredentials=an.prototype.Fa,X5=an}).apply(typeof F1<"u"?F1:typeof self<"u"?self:typeof window<"u"?window:{});let ma=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ma.UNAUTHENTICATED=new ma(null),ma.GOOGLE_CREDENTIALS=new ma("google-credentials-uid"),ma.FIRST_PARTY=new ma("first-party-uid"),ma.MOCK_USER=new ma("mock-user");let bm="12.9.0";function s$(t){bm=t}const zc=new FS("@firebase/firestore");function vh(){return zc.logLevel}function o$(t){zc.setLogLevel(t)}function nt(t,...e){if(zc.logLevel<=Dn.DEBUG){const n=e.map(zS);zc.debug(`Firestore (${bm}): ${t}`,...n)}}function Si(t,...e){if(zc.logLevel<=Dn.ERROR){const n=e.map(zS);zc.error(`Firestore (${bm}): ${t}`,...n)}}function Fs(t,...e){if(zc.logLevel<=Dn.WARN){const n=e.map(zS);zc.warn(`Firestore (${bm}): ${t}`,...n)}}function zS(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function bt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,tj(t,r,n)}function tj(t,e,n){let r=`FIRESTORE (${bm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Si(r),new Error(r)}function Ot(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||tj(e,i,r)}function l$(t,e){t||bt(57014,e)}function mt(t,e){return t}const De={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class We extends Ru{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ya{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class nj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ma.UNAUTHENTICATED)))}shutdown(){}}class u${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class c${constructor(e){this.t=e,this.currentUser=ma.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ot(this.o===void 0,42304);let r=this.i;const i=m=>this.i!==r?(r=this.i,n(m)):Promise.resolve();let a=new ya;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ya,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const m=a;e.enqueueRetryable((async()=>{await m.promise,await i(this.currentUser)}))},f=m=>{nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ya)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ot(typeof r.accessToken=="string",31837,{l:r}),new nj(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ot(e===null||typeof e=="string",2055,{h:e}),new ma(e)}}class f${constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ma.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class d${constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new f$(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ma.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class UE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h${constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ao(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ot(this.o===void 0,3512);const r=a=>{a.error!=null&&nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,nt("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new UE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ot(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new UE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class m${getToken(){return Promise.resolve(new UE(""))}invalidateToken(){}start(e,n){}shutdown(){}}function g$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class wx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=g$(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function Ht(t,e){return t<e?-1:t>e?1:0}function qE(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return U_(i)===U_(a)?Ht(i,a):U_(i)?1:-1}return Ht(t.length,e.length)}const p$=55296,y$=57343;function U_(t){const e=t.charCodeAt(0);return e>=p$&&e<=y$}function Fh(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function ij(t){return t+"\0"}const GE="__name__";class ml{constructor(e,n,r){n===void 0?n=0:n>e.length&&bt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&bt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ml.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ml?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=ml.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return Ht(e.length,n.length)}static compareSegments(e,n){const r=ml.isNumericId(e),i=ml.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ml.extractNumericId(e).compare(ml.extractNumericId(n)):qE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return kc.fromString(e.substring(4,e.length-2))}}class Sn extends ml{construct(e,n,r){return new Sn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new We(De.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Sn(n)}static emptyPath(){return new Sn([])}}const v$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qr extends ml{construct(e,n,r){return new qr(e,n,r)}static isValidIdentifier(e){return v$.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===GE}static keyField(){return new qr([GE])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new We(De.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if(f==="\\"){if(i+1===e.length)throw new We(De.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new We(De.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else f==="`"?(l=!l,i++):f!=="."||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new We(De.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qr(n)}static emptyPath(){return new qr([])}}class ht{constructor(e){this.path=e}static fromPath(e){return new ht(Sn.fromString(e))}static fromName(e){return new ht(Sn.fromString(e).popFirst(5))}static empty(){return new ht(Sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Sn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Sn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ht(new Sn(e.slice()))}}function US(t,e,n){if(!n)throw new We(De.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aj(t,e,n,r){if(e===!0&&r===!0)throw new We(De.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function GP(t){if(!ht.isDocumentKey(t))throw new We(De.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function HP(t){if(ht.isDocumentKey(t))throw new We(De.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sj(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function _x(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":bt(12329,{type:typeof t})}function Tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new We(De.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_x(t);throw new We(De.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function oj(t,e){if(e<=0)throw new We(De.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Vi(t,e){const n={typeString:t};return e&&(n.value=e),n}function _d(t,e){if(!sj(t))throw new We(De.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(i&&typeof l!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new We(De.INVALID_ARGUMENT,n);return!0}const KP=-62135596800,WP=1e6;class nr{static now(){return nr.fromMillis(Date.now())}static fromDate(e){return nr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*WP);return new nr(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new We(De.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new We(De.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<KP)throw new We(De.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new We(De.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/WP}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_d(e,nr._jsonSchema))return new nr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-KP;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nr._jsonSchemaVersion="firestore/timestamp/1.0",nr._jsonSchema={type:Vi("string",nr._jsonSchemaVersion),seconds:Vi("number"),nanoseconds:Vi("number")};class jt{static fromTimestamp(e){return new jt(e)}static min(){return new jt(new nr(0,0))}static max(){return new jt(new nr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Vh=-1;class zh{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function HE(t){return t.fields.find((e=>e.kind===2))}function Nf(t){return t.fields.filter((e=>e.kind!==2))}function x$(t,e){let n=Ht(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=b$(t.fields[r],e.fields[r]),n!==0)return n;return Ht(t.fields.length,e.fields.length)}zh.UNKNOWN_ID=-1;class Kf{constructor(e,n){this.fieldPath=e,this.kind=n}}function b$(t,e){const n=qr.comparator(t.fieldPath,e.fieldPath);return n!==0?n:Ht(t.kind,e.kind)}class Uh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Uh(0,ao.min())}}function lj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=jt.fromTimestamp(r===1e9?new nr(n+1,0):new nr(n,r));return new ao(i,ht.empty(),e)}function uj(t){return new ao(t.readTime,t.key,Vh)}class ao{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ao(jt.min(),ht.empty(),Vh)}static max(){return new ao(jt.max(),ht.empty(),Vh)}}function qS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ht.comparator(t.documentKey,e.documentKey),n!==0?n:Ht(t.largestBatchId,e.largestBatchId))}const cj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function tf(t){if(t.code!==De.FAILED_PRECONDITION||t.message!==cj)throw t;nt("LocalStore","Unexpectedly lost primary lease")}class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&bt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ie(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ie?n:Ie.resolve(n)}catch(n){return Ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ie.reject(n)}static resolve(e){return new Ie(((n,r)=>{n(e)}))}static reject(e){return new Ie(((n,r)=>{r(e)}))}static waitFor(e){return new Ie(((n,r)=>{let i=0,a=0,l=!1;e.forEach((f=>{++i,f.next((()=>{++a,l&&a===i&&n()}),(m=>r(m)))})),l=!0,a===i&&n()}))}static or(e){let n=Ie.resolve(!1);for(const r of e)n=n.next((i=>i?Ie.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new Ie(((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let m=0;m<a;m++){const p=m;n(e[p]).next((b=>{l[p]=b,++f,f===a&&r(l)}),(b=>i(b)))}}))}static doWhile(e,n){return new Ie(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}const Js="SimpleDb";class Ex{static open(e,n,r,i){try{return new Ex(n,e.transaction(i,r))}catch(a){throw new Jg(n,a)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new ya,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Jg(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=GS(r.target.error);this.S.reject(new Jg(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(nt(Js,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new _$(n)}}class El{static delete(e){return nt(Js,"Removing database:",e),jf(k5().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!U5())return!1;if(El.F())return!0;const e=$i(),n=El.M(e),r=0<n&&n<10,i=dj(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,El.M($i())===12.2&&Si("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(nt(Js,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const l=a.target.result;n(l)},i.onblocked=()=>{r(new Jg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const l=a.target.error;l.name==="VersionError"?r(new We(De.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new We(De.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new Jg(e,l))},i.onupgradeneeded=a=>{nt(Js,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.N.k(l,i.transaction,a.oldVersion,this.version).next((()=>{nt(Js,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=n=>this.K(n)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const f=Ex.open(this.db,e,a?"readonly":"readwrite",r),m=i(f).next((p=>(f.C(),p))).catch((p=>(f.abort(p),Ie.reject(p)))).toPromise();return m.catch((()=>{})),await f.D,m}catch(f){const m=f,p=m.name!=="FirebaseError"&&l<3;if(nt(Js,"Transaction failed with error:",m.message,"Retrying:",p),this.close(),!p)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function dj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class w${constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return jf(this.U.delete())}}class Jg extends We{constructor(e,n){super(De.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function nf(t){return t.name==="IndexedDbTransactionError"}class _${constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(nt(Js,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(nt(Js,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),jf(r)}add(e){return nt(Js,"ADD",this.store.name,e,e),jf(this.store.add(e))}get(e){return jf(this.store.get(e)).next((n=>(n===void 0&&(n=null),nt(Js,"GET",this.store.name,e,n),n)))}delete(e){return nt(Js,"DELETE",this.store.name,e),jf(this.store.delete(e))}count(){return nt(Js,"COUNT",this.store.name),jf(this.store.count())}H(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new Ie(((l,f)=>{a.onerror=m=>{f(m.target.error)},a.onsuccess=m=>{l(m.target.result)}}))}{const a=this.cursor(r),l=[];return this.J(a,((f,m)=>{l.push(m)})).next((()=>l))}}Z(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new Ie(((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}}))}X(e,n){nt(Js,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const i=this.cursor(r);return this.J(i,((a,l,f)=>f.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.J(i,n)}te(e){const n=this.cursor({});return new Ie(((r,i)=>{n.onerror=a=>{const l=GS(a.target.error);i(l)},n.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next((f=>{f?l.continue():r()})):r()}}))}J(e,n){const r=[];return new Ie(((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const m=new w$(f),p=n(f.primaryKey,f.value,m);if(p instanceof Ie){const b=p.catch((_=>(m.done(),Ie.reject(_))));r.push(b)}m.isDone?i():m.G===null?f.continue():f.continue(m.G)}})).next((()=>Ie.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function jf(t){return new Ie(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=GS(r.target.error);n(i)}}))}let $P=!1;function GS(t){const e=El.M($i());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new We("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $P||($P=!0,setTimeout((()=>{throw r}),0)),r}}return t}const ep="IndexBackfiller";class E${constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){nt(ep,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();nt(ep,`Documents written: ${n}`)}catch(n){nf(n)?nt(ep,"Ignoring IndexedDB error during index backfill: ",n):await tf(n)}await this.re(6e4)}))}}class A${constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,a=!0;return Ie.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!r.has(l))return nt(ep,`Processing collection: ${l}`),this.oe(e,l,i).next((f=>{i-=f,r.add(l)}));a=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(i,a))).next((f=>(nt(ep,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,n,f)))).next((()=>l.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,a)=>{const l=uj(a);qS(l,r)>0&&(r=l)})),new ao(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class Rs{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rs.ce=-1;const Mc=-1;function Xp(t){return t==null}function mp(t){return t===0&&1/t==-1/0}function hj(t){return typeof t=="number"&&Number.isInteger(t)&&!mp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Wy="";function ns(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=YP(e)),e=S$(t.get(n),e);return YP(e)}function S$(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case Wy:n+="";break;default:n+=a}}return n}function YP(t){return t+Wy+""}function xl(t){const e=t.length;if(Ot(e>=2,64408,{path:t}),e===2)return Ot(t.charAt(0)===Wy&&t.charAt(1)==="",56145,{path:t}),Sn.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const l=t.indexOf(Wy,a);switch((l<0||l>n)&&bt(50515,{path:t}),t.charAt(l+1)){case"":const f=t.substring(a,l);let m;i.length===0?m=f:(i+=f,m=i,i=""),r.push(m);break;case"":i+=t.substring(a,l),i+="\0";break;case"":i+=t.substring(a,l+1);break;default:bt(61167,{path:t})}a=l+2}return new Sn(r)}const Pf="remoteDocuments",Qp="owner",oh="owner",gp="mutationQueues",T$="userId",Fo="mutations",XP="batchId",Vf="userMutationsIndex",QP=["userId","batchId"];function yy(t,e){return[t,ns(e)]}function mj(t,e,n){return[t,ns(e),n]}const I$={},qh="documentMutations",$y="remoteDocumentsV14",C$=["prefixPath","collectionGroup","readTime","documentId"],vy="documentKeyIndex",O$=["prefixPath","collectionGroup","documentId"],gj="collectionGroupIndex",N$=["collectionGroup","readTime","prefixPath","documentId"],pp="remoteDocumentGlobal",KE="remoteDocumentGlobalKey",Gh="targets",pj="queryTargetsIndex",P$=["canonicalId","targetId"],Hh="targetDocuments",R$=["targetId","path"],HS="documentTargetsIndex",D$=["path","targetId"],Yy="targetGlobalKey",Wf="targetGlobal",yp="collectionParents",k$=["collectionId","parent"],Kh="clientMetadata",M$="clientId",Ax="bundles",j$="bundleId",Sx="namedQueries",L$="name",KS="indexConfiguration",B$="indexId",WE="collectionGroupIndex",F$="collectionGroup",tp="indexState",V$=["indexId","uid"],yj="sequenceNumberIndex",z$=["uid","sequenceNumber"],np="indexEntries",U$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vj="documentKeyIndex",q$=["indexId","uid","orderedDocumentKey"],Tx="documentOverlays",G$=["userId","collectionPath","documentId"],$E="collectionPathOverlayIndex",H$=["userId","collectionPath","largestBatchId"],xj="collectionGroupOverlayIndex",K$=["userId","collectionGroup","largestBatchId"],WS="globals",W$="name",bj=[gp,Fo,qh,Pf,Gh,Qp,Wf,Hh,Kh,pp,yp,Ax,Sx],$$=[...bj,Tx],wj=[gp,Fo,qh,$y,Gh,Qp,Wf,Hh,Kh,pp,yp,Ax,Sx,Tx],_j=wj,$S=[..._j,KS,tp,np],Y$=$S,Ej=[...$S,WS],X$=Ej;class YE extends fj{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Qi(t,e){const n=mt(t);return El.O(n.le,e)}function ZP(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function rf(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Aj(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function Sj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class jr{constructor(e,n){this.comparator=e,this.root=n||La.EMPTY}insert(e,n){return new jr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,La.BLACK,null,null))}remove(e){return new jr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,La.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new V1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new V1(this.root,e,this.comparator,!1)}getReverseIterator(){return new V1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new V1(this.root,e,this.comparator,!0)}}class V1{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class La{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??La.RED,this.left=i??La.EMPTY,this.right=a??La.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new La(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return La.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return La.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,La.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,La.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw bt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw bt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw bt(27949);return e+(this.isRed()?0:1)}}La.EMPTY=null,La.RED=!0,La.BLACK=!1;La.EMPTY=new class{constructor(){this.size=0}get key(){throw bt(57766)}get value(){throw bt(16141)}get color(){throw bt(16727)}get left(){throw bt(29726)}get right(){throw bt(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new La(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dr{constructor(e){this.comparator=e,this.data=new jr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new JP(this.data.getIterator())}getIteratorFrom(e){return new JP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof dr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new dr(this.comparator);return n.data=e,n}}class JP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function lh(t){return t.hasNext()?t.getNext():void 0}class Ds{constructor(e){this.fields=e,e.sort(qr.comparator)}static empty(){return new Ds([])}unionWith(e){let n=new dr(qr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ds(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fh(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class Tj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function Q$(){return typeof atob<"u"}class oi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Tj("Invalid base64 string: "+a):a}})(e);return new oi(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a})(e);return new oi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oi.EMPTY_BYTE_STRING=new oi("");const Z$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bu(t){if(Ot(!!t,39018),typeof t=="string"){let e=0;const n=Z$.exec(t);if(Ot(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Zr(t.seconds),nanos:Zr(t.nanos)}}function Zr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wu(t){return typeof t=="string"?oi.fromBase64String(t):oi.fromUint8Array(t)}const Ij="server_timestamp",Cj="__type__",Oj="__previous_value__",Nj="__local_write_time__";function Ix(t){return(t?.mapValue?.fields||{})[Cj]?.stringValue===Ij}function Cx(t){const e=t.mapValue.fields[Oj];return Ix(e)?Cx(e):e}function vp(t){const e=bu(t.mapValue.fields[Nj].timestampValue);return new nr(e.seconds,e.nanos)}class J${constructor(e,n,r,i,a,l,f,m,p,b,_){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=b,this.apiKey=_}}const xp="(default)";class Uc{constructor(e,n){this.projectId=e,this.database=n||xp}static empty(){return new Uc("","")}get isDefaultDatabase(){return this.database===xp}isEqual(e){return e instanceof Uc&&e.projectId===this.projectId&&e.database===this.database}}function eY(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new We(De.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uc(t.options.projectId,e)}const YS="__type__",Pj="__max__",Cc={mapValue:{fields:{__type__:{stringValue:Pj}}}},XS="__vector__",Wh="value",xy={nullValue:"NULL_VALUE"};function qc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ix(t)?4:Rj(t)?9007199254740991:Ox(t)?10:11:bt(28295,{value:t})}function Cl(t,e){if(t===e)return!0;const n=qc(t);if(n!==qc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vp(t).isEqual(vp(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=bu(i.timestampValue),f=bu(a.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return wu(i.bytesValue).isEqual(wu(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return Zr(i.geoPointValue.latitude)===Zr(a.geoPointValue.latitude)&&Zr(i.geoPointValue.longitude)===Zr(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Zr(i.integerValue)===Zr(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=Zr(i.doubleValue),f=Zr(a.doubleValue);return l===f?mp(l)===mp(f):isNaN(l)&&isNaN(f)}return!1})(t,e);case 9:return Fh(t.arrayValue.values||[],e.arrayValue.values||[],Cl);case 10:case 11:return(function(i,a){const l=i.mapValue.fields||{},f=a.mapValue.fields||{};if(ZP(l)!==ZP(f))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(f[m]===void 0||!Cl(l[m],f[m])))return!1;return!0})(t,e);default:return bt(52216,{left:t})}}function bp(t,e){return(t.values||[]).find((n=>Cl(n,e)))!==void 0}function Gc(t,e){if(t===e)return 0;const n=qc(t),r=qc(e);if(n!==r)return Ht(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ht(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const f=Zr(a.integerValue||a.doubleValue),m=Zr(l.integerValue||l.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(t,e);case 3:return eR(t.timestampValue,e.timestampValue);case 4:return eR(vp(t),vp(e));case 5:return qE(t.stringValue,e.stringValue);case 6:return(function(a,l){const f=wu(a),m=wu(l);return f.compareTo(m)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const f=a.split("/"),m=l.split("/");for(let p=0;p<f.length&&p<m.length;p++){const b=Ht(f[p],m[p]);if(b!==0)return b}return Ht(f.length,m.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const f=Ht(Zr(a.latitude),Zr(l.latitude));return f!==0?f:Ht(Zr(a.longitude),Zr(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return tR(t.arrayValue,e.arrayValue);case 10:return(function(a,l){const f=a.fields||{},m=l.fields||{},p=f[Wh]?.arrayValue,b=m[Wh]?.arrayValue,_=Ht(p?.values?.length||0,b?.values?.length||0);return _!==0?_:tR(p,b)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Cc.mapValue&&l===Cc.mapValue)return 0;if(a===Cc.mapValue)return 1;if(l===Cc.mapValue)return-1;const f=a.fields||{},m=Object.keys(f),p=l.fields||{},b=Object.keys(p);m.sort(),b.sort();for(let _=0;_<m.length&&_<b.length;++_){const T=qE(m[_],b[_]);if(T!==0)return T;const N=Gc(f[m[_]],p[b[_]]);if(N!==0)return N}return Ht(m.length,b.length)})(t.mapValue,e.mapValue);default:throw bt(23264,{he:n})}}function eR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ht(t,e);const n=bu(t),r=bu(e),i=Ht(n.seconds,r.seconds);return i!==0?i:Ht(n.nanos,r.nanos)}function tR(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Gc(n[i],r[i]);if(a)return a}return Ht(n.length,r.length)}function $h(t){return XE(t)}function XE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=bu(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return wu(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ht.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=XE(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${XE(n.fields[l])}`;return i+"}"})(t.mapValue):bt(61005,{value:t})}function by(t){switch(qc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cx(t);return e?16+by(e):16;case 5:return 2*t.stringValue.length;case 6:return wu(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+by(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return rf(r.fields,((a,l)=>{i+=a.length+by(l)})),i})(t.mapValue);default:throw bt(13486,{value:t})}}function Jf(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function QE(t){return!!t&&"integerValue"in t}function wp(t){return!!t&&"arrayValue"in t}function nR(t){return!!t&&"nullValue"in t}function rR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wy(t){return!!t&&"mapValue"in t}function Ox(t){return(t?.mapValue?.fields||{})[YS]?.stringValue===XS}function rp(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return rf(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=rp(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rp(t.arrayValue.values[n]);return e}return{...t}}function Rj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Pj}const Dj={mapValue:{fields:{[YS]:{stringValue:XS},[Wh]:{arrayValue:{}}}}};function tY(t){return"nullValue"in t?xy:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Jf(Uc.empty(),ht.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Ox(t)?Dj:{mapValue:{}}:bt(35942,{value:t})}function nY(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Jf(Uc.empty(),ht.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Dj:"mapValue"in t?Ox(t)?{mapValue:{}}:Cc:bt(61959,{value:t})}function iR(t,e){const n=Gc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function aR(t,e){const n=Gc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class ga{constructor(e){this.value=e}static empty(){return new ga({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=rp(n)}setAll(e){let n=qr.emptyPath(),r={},i=[];e.forEach(((l,f)=>{if(!n.isImmediateParentOf(f)){const m=this.getFieldsMap(n);this.applyChanges(m,r,i),r={},i=[],n=f.popLast()}l?r[f.lastSegment()]=rp(l):i.push(f.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());wy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cl(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];wy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){rf(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new ga(rp(this.value))}}function kj(t){const e=[];return rf(t.fields,((n,r)=>{const i=new qr([n]);if(wy(r)){const a=kj(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)})),new Ds(e)}class Ur{constructor(e,n,r,i,a,l,f){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new Ur(e,0,jt.min(),jt.min(),jt.min(),ga.empty(),0)}static newFoundDocument(e,n,r,i){return new Ur(e,1,n,jt.min(),r,i,0)}static newNoDocument(e,n){return new Ur(e,2,n,jt.min(),jt.min(),ga.empty(),0)}static newUnknownDocument(e,n){return new Ur(e,3,n,jt.min(),jt.min(),ga.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(jt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ga.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ga.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ur&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ur(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hc{constructor(e,n){this.position=e,this.inclusive=n}}function sR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],l=t.position[i];if(a.field.isKeyField()?r=ht.comparator(ht.fromName(l.referenceValue),n.key):r=Gc(l,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function oR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cl(t.position[n],e.position[n]))return!1;return!0}class _p{constructor(e,n="asc"){this.field=e,this.dir=n}}function rY(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Mj{}class kn extends Mj{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new iY(e,n,r):n==="array-contains"?new oY(e,r):n==="in"?new zj(e,r):n==="not-in"?new lY(e,r):n==="array-contains-any"?new uY(e,r):new kn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new aY(e,r):new sY(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Gc(n,this.value)):n!==null&&qc(this.value)===qc(n)&&this.matchesComparison(Gc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return bt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cr extends Mj{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new cr(e,n)}matches(e){return Yh(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Yh(t){return t.op==="and"}function ZE(t){return t.op==="or"}function QS(t){return jj(t)&&Yh(t)}function jj(t){for(const e of t.filters)if(e instanceof cr)return!1;return!0}function JE(t){if(t instanceof kn)return t.field.canonicalString()+t.op.toString()+$h(t.value);if(QS(t))return t.filters.map((e=>JE(e))).join(",");{const e=t.filters.map((n=>JE(n))).join(",");return`${t.op}(${e})`}}function Lj(t,e){return t instanceof kn?(function(r,i){return i instanceof kn&&r.op===i.op&&r.field.isEqual(i.field)&&Cl(r.value,i.value)})(t,e):t instanceof cr?(function(r,i){return i instanceof cr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,l,f)=>a&&Lj(l,i.filters[f])),!0):!1})(t,e):void bt(19439)}function Bj(t,e){const n=t.filters.concat(e);return cr.create(n,t.op)}function Fj(t){return t instanceof kn?(function(n){return`${n.field.canonicalString()} ${n.op} ${$h(n.value)}`})(t):t instanceof cr?(function(n){return n.op.toString()+" {"+n.getFilters().map(Fj).join(" ,")+"}"})(t):"Filter"}class iY extends kn{constructor(e,n,r){super(e,n,r),this.key=ht.fromName(r.referenceValue)}matches(e){const n=ht.comparator(e.key,this.key);return this.matchesComparison(n)}}class aY extends kn{constructor(e,n){super(e,"in",n),this.keys=Vj("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class sY extends kn{constructor(e,n){super(e,"not-in",n),this.keys=Vj("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Vj(t,e){return(e.arrayValue?.values||[]).map((n=>ht.fromName(n.referenceValue)))}class oY extends kn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wp(n)&&bp(n.arrayValue,this.value)}}class zj extends kn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&bp(this.value.arrayValue,n)}}class lY extends kn{constructor(e,n){super(e,"not-in",n)}matches(e){if(bp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!bp(this.value.arrayValue,n)}}class uY extends kn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>bp(this.value.arrayValue,r)))}}class cY{constructor(e,n=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.Te=null}}function eA(t,e=null,n=[],r=[],i=null,a=null,l=null){return new cY(t,e,n,r,i,a,l)}function ed(t){const e=mt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>JE(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Xp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>$h(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>$h(r))).join(",")),e.Te=n}return e.Te}function Zp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!rY(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Lj(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!oR(t.startAt,e.startAt)&&oR(t.endAt,e.endAt)}function Xy(t){return ht.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Qy(t,e){return t.filters.filter((n=>n instanceof kn&&n.field.isEqual(e)))}function lR(t,e,n){let r=xy,i=!0;for(const a of Qy(t,e)){let l=xy,f=!0;switch(a.op){case"<":case"<=":l=tY(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=xy}iR({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const l=n.position[a];iR({value:r,inclusive:i},{value:l,inclusive:n.inclusive})<0&&(r=l,i=n.inclusive);break}}return{value:r,inclusive:i}}function uR(t,e,n){let r=Cc,i=!0;for(const a of Qy(t,e)){let l=Cc,f=!0;switch(a.op){case">=":case">":l=nY(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=Cc}aR({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const l=n.position[a];aR({value:r,inclusive:i},{value:l,inclusive:n.inclusive})>0&&(r=l,i=n.inclusive);break}}return{value:r,inclusive:i}}class Du{constructor(e,n=null,r=[],i=[],a=null,l="F",f=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Uj(t,e,n,r,i,a,l,f){return new Du(t,e,n,r,i,a,l,f)}function wm(t){return new Du(t)}function cR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fY(t){return ht.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ZS(t){return t.collectionGroup!==null}function Ch(t){const e=mt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let f=new dr(qr.comparator);return l.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new _p(a,r))})),n.has(qr.keyField().canonicalString())||e.Ie.push(new _p(qr.keyField(),r))}return e.Ie}function rs(t){const e=mt(t);return e.Ee||(e.Ee=Gj(e,Ch(t))),e.Ee}function qj(t){const e=mt(t);return e.Re||(e.Re=Gj(e,t.explicitOrderBy)),e.Re}function Gj(t,e){if(t.limitType==="F")return eA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new _p(i.field,a)}));const n=t.endAt?new Hc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hc(t.startAt.position,t.startAt.inclusive):null;return eA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function tA(t,e){const n=t.filters.concat([e]);return new Du(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dY(t,e){const n=t.explicitOrderBy.concat([e]);return new Du(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Zy(t,e,n){return new Du(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hY(t,e){return new Du(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}function mY(t,e){return new Du(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}function Jp(t,e){return Zp(rs(t),rs(e))&&t.limitType===e.limitType}function Hj(t){return`${ed(rs(t))}|lt:${t.limitType}`}function xh(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>Fj(i))).join(", ")}]`),Xp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>$h(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>$h(i))).join(",")),`Target(${r})`})(rs(t))}; limitType=${t.limitType})`}function e0(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ht.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of Ch(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(l,f,m){const p=sR(l,f,m);return l.inclusive?p<=0:p<0})(r.startAt,Ch(r),i)||r.endAt&&!(function(l,f,m){const p=sR(l,f,m);return l.inclusive?p>=0:p>0})(r.endAt,Ch(r),i))})(t,e)}function Kj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Wj(t){return(e,n)=>{let r=!1;for(const i of Ch(t)){const a=gY(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function gY(t,e,n){const r=t.field.isKeyField()?ht.comparator(e.key,n.key):(function(a,l,f){const m=l.data.field(a),p=f.data.field(a);return m!==null&&p!==null?Gc(m,p):bt(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return bt(19790,{direction:t.dir})}}class ku{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){rf(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return Sj(this.inner)}size(){return this.innerSize}}const pY=new jr(ht.comparator);function ks(){return pY}const $j=new jr(ht.comparator);function Hg(...t){let e=$j;for(const n of t)e=e.insert(n.key,n);return e}function Yj(t){let e=$j;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function bl(){return ip()}function Xj(){return ip()}function ip(){return new ku((t=>t.toString()),((t,e)=>t.isEqual(e)))}const yY=new jr(ht.comparator),vY=new dr(ht.comparator);function on(...t){let e=vY;for(const n of t)e=e.add(n);return e}const xY=new dr(Ht);function JS(){return xY}function eT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mp(e)?"-0":e}}function Qj(t){return{integerValue:""+t}}function Zj(t,e){return hj(e)?Qj(e):eT(t,e)}class Nx{constructor(){this._=void 0}}function bY(t,e,n){return t instanceof Xh?(function(i,a){const l={fields:{[Cj]:{stringValue:Ij},[Nj]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Ix(a)&&(a=Cx(a)),a&&(l.fields[Oj]=a),{mapValue:l}})(n,e):t instanceof td?e9(t,e):t instanceof nd?t9(t,e):(function(i,a){const l=Jj(i,a),f=fR(l)+fR(i.Ae);return QE(l)&&QE(i.Ae)?Qj(f):eT(i.serializer,f)})(t,e)}function wY(t,e,n){return t instanceof td?e9(t,e):t instanceof nd?t9(t,e):n}function Jj(t,e){return t instanceof Qh?(function(r){return QE(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Xh extends Nx{}class td extends Nx{constructor(e){super(),this.elements=e}}function e9(t,e){const n=n9(e);for(const r of t.elements)n.some((i=>Cl(i,r)))||n.push(r);return{arrayValue:{values:n}}}class nd extends Nx{constructor(e){super(),this.elements=e}}function t9(t,e){let n=n9(e);for(const r of t.elements)n=n.filter((i=>!Cl(i,r)));return{arrayValue:{values:n}}}class Qh extends Nx{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function fR(t){return Zr(t.integerValue||t.doubleValue)}function n9(t){return wp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class t0{constructor(e,n){this.field=e,this.transform=n}}function _Y(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof td&&i instanceof td||r instanceof nd&&i instanceof nd?Fh(r.elements,i.elements,Cl):r instanceof Qh&&i instanceof Qh?Cl(r.Ae,i.Ae):r instanceof Xh&&i instanceof Xh})(t.transform,e.transform)}class EY{constructor(e,n){this.version=e,this.transformResults=n}}class ei{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ei}static exists(e){return new ei(void 0,e)}static updateTime(e){return new ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _y(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Px{}function r9(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Em(t.key,ei.none()):new _m(t.key,t.data,ei.none());{const n=t.data,r=ga.empty();let i=new dr(qr.comparator);for(let a of e.fields)if(!i.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new Mu(t.key,r,new Ds(i.toArray()),ei.none())}}function AY(t,e,n){t instanceof _m?(function(i,a,l){const f=i.value.clone(),m=hR(i.fieldTransforms,a,l.transformResults);f.setAll(m),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(t,e,n):t instanceof Mu?(function(i,a,l){if(!_y(i.precondition,a))return void a.convertToUnknownDocument(l.version);const f=hR(i.fieldTransforms,a,l.transformResults),m=a.data;m.setAll(i9(i)),m.setAll(f),a.convertToFoundDocument(l.version,m).setHasCommittedMutations()})(t,e,n):(function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function ap(t,e,n,r){return t instanceof _m?(function(a,l,f,m){if(!_y(a.precondition,l))return f;const p=a.value.clone(),b=mR(a.fieldTransforms,m,l);return p.setAll(b),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(t,e,n,r):t instanceof Mu?(function(a,l,f,m){if(!_y(a.precondition,l))return f;const p=mR(a.fieldTransforms,m,l),b=l.data;return b.setAll(i9(a)),b.setAll(p),l.convertToFoundDocument(l.version,b).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((_=>_.field)))})(t,e,n,r):(function(a,l,f){return _y(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):f})(t,e,n)}function SY(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=Jj(r.transform,i||null);a!=null&&(n===null&&(n=ga.empty()),n.set(r.field,a))}return n||null}function dR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Fh(r,i,((a,l)=>_Y(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _m extends Px{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Mu extends Px{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function i9(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function hR(t,e,n){const r=new Map;Ot(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const a=t[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,wY(l,f,n[i]))}return r}function mR(t,e,n){const r=new Map;for(const i of t){const a=i.transform,l=n.data.field(i.field);r.set(i.field,bY(a,l,e))}return r}class Em extends Px{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tT extends Px{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nT{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&AY(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ap(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ap(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Xj();return this.mutations.forEach((i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=n.has(i.key)?null:f;const m=r9(l,f);m!==null&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(jt.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),on())}isEqual(e){return this.batchId===e.batchId&&Fh(this.mutations,e.mutations,((n,r)=>dR(n,r)))&&Fh(this.baseMutations,e.baseMutations,((n,r)=>dR(n,r)))}}class rT{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ot(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return yY})();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new rT(e,n,r,i)}}class iT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class a9{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}class TY{constructor(e,n){this.count=e,this.unchangedNames=n}}var Fi,Ln;function s9(t){switch(t){case De.OK:return bt(64938);case De.CANCELLED:case De.UNKNOWN:case De.DEADLINE_EXCEEDED:case De.RESOURCE_EXHAUSTED:case De.INTERNAL:case De.UNAVAILABLE:case De.UNAUTHENTICATED:return!1;case De.INVALID_ARGUMENT:case De.NOT_FOUND:case De.ALREADY_EXISTS:case De.PERMISSION_DENIED:case De.FAILED_PRECONDITION:case De.ABORTED:case De.OUT_OF_RANGE:case De.UNIMPLEMENTED:case De.DATA_LOSS:return!0;default:return bt(15467,{code:t})}}function o9(t){if(t===void 0)return Si("GRPC error has no .code"),De.UNKNOWN;switch(t){case Fi.OK:return De.OK;case Fi.CANCELLED:return De.CANCELLED;case Fi.UNKNOWN:return De.UNKNOWN;case Fi.DEADLINE_EXCEEDED:return De.DEADLINE_EXCEEDED;case Fi.RESOURCE_EXHAUSTED:return De.RESOURCE_EXHAUSTED;case Fi.INTERNAL:return De.INTERNAL;case Fi.UNAVAILABLE:return De.UNAVAILABLE;case Fi.UNAUTHENTICATED:return De.UNAUTHENTICATED;case Fi.INVALID_ARGUMENT:return De.INVALID_ARGUMENT;case Fi.NOT_FOUND:return De.NOT_FOUND;case Fi.ALREADY_EXISTS:return De.ALREADY_EXISTS;case Fi.PERMISSION_DENIED:return De.PERMISSION_DENIED;case Fi.FAILED_PRECONDITION:return De.FAILED_PRECONDITION;case Fi.ABORTED:return De.ABORTED;case Fi.OUT_OF_RANGE:return De.OUT_OF_RANGE;case Fi.UNIMPLEMENTED:return De.UNIMPLEMENTED;case Fi.DATA_LOSS:return De.DATA_LOSS;default:return bt(39323,{code:t})}}(Ln=Fi||(Fi={}))[Ln.OK=0]="OK",Ln[Ln.CANCELLED=1]="CANCELLED",Ln[Ln.UNKNOWN=2]="UNKNOWN",Ln[Ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ln[Ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ln[Ln.NOT_FOUND=5]="NOT_FOUND",Ln[Ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ln[Ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ln[Ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ln[Ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ln[Ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ln[Ln.ABORTED=10]="ABORTED",Ln[Ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ln[Ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ln[Ln.INTERNAL=13]="INTERNAL",Ln[Ln.UNAVAILABLE=14]="UNAVAILABLE",Ln[Ln.DATA_LOSS=15]="DATA_LOSS";let nA=null;function IY(t){if(nA)throw new Error("a TestingHooksSpi instance is already set");nA=t}function l9(){return new TextEncoder}const CY=new kc([4294967295,4294967295],0);function gR(t){const e=l9().encode(t),n=new Y5;return n.update(e),new Uint8Array(n.digest())}function pR(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new kc([n,r],0),new kc([i,a],0)]}class aT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Kg(`Invalid padding: ${n}`);if(r<0)throw new Kg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Kg(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Kg(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=kc.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(kc.fromNumber(r)));return i.compare(CY)===1&&(i=new kc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=gR(e),[r,i]=pR(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);if(!this.we(l))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new aT(a,i,n);return r.forEach((f=>l.insert(f))),l}insert(e){if(this.ge===0)return;const n=gR(e),[r,i]=pR(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);this.be(l)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Kg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class n0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,r0.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new n0(jt.min(),i,new jr(Ht),ks(),on())}}class r0{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new r0(r,n,on(),on(),on())}}class Ey{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class u9{constructor(e,n){this.targetId=e,this.Ce=n}}class c9{constructor(e,n,r=oi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class yR{constructor(){this.ve=0,this.Fe=vR(),this.Me=oi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=on(),n=on(),r=on();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:bt(38017,{changeType:a})}})),new r0(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=vR()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ot(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class OY{constructor(e){this.Ge=e,this.ze=new Map,this.je=ks(),this.He=z1(),this.Je=z1(),this.Ze=new jr(Ht)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:bt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(Xy(a))if(r===0){const l=new ht(a.path);this.et(n,l,Ur.newNoDocument(l,jt.min()))}else Ot(r===1,20013,{expectedCount:r});else{const l=this._t(n);if(l!==r){const f=this.ut(e),m=f?this.ct(f,e,l):1;if(m!==0){this.it(n);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,p)}nA?.lt((function(b,_,T,N,j){const M={localCacheCount:b,existenceFilterCount:_.count,databaseId:T.database,projectId:T.projectId},L=_.unchangedNames;return L&&(M.bloomFilter={applied:j===0,hashCount:L?.hashCount??0,bitmapLength:L?.bits?.bitmap?.length??0,padding:L?.bits?.padding??0,mightContain:z=>N?.mightContain(z)??!1}),M})(l,e.Ce,this.Ge.ht(),f,m))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let l,f;try{l=wu(r).toUint8Array()}catch(m){if(m instanceof Tj)return Fs("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new aT(l,i,a)}catch(m){return Fs(m instanceof Kg?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const l=this.Ge.ht(),f=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,l)=>{const f=this.ot(l);if(f){if(a.current&&Xy(f.target)){const m=new ht(f.target.path);this.It(m).has(l)||this.Et(l,m)||this.et(l,m,Ur.newNoDocument(m,e))}a.Be&&(n.set(l,a.ke()),a.Ke())}}));let r=on();this.Je.forEach(((a,l)=>{let f=!0;l.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const i=new n0(e,n,this.Ze,this.je,r);return this.je=ks(),this.He=z1(),this.Je=z1(),this.Ze=new jr(Ht),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new yR,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new dr(Ht),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new dr(Ht),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||nt("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new yR),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function z1(){return new jr(ht.comparator)}function vR(){return new jr(ht.comparator)}const NY={asc:"ASCENDING",desc:"DESCENDING"},PY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RY={and:"AND",or:"OR"};class DY{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rA(t,e){return t.useProto3Json||Xp(e)?e:{value:e}}function Zh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function f9(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function kY(t,e){return Zh(t,e.toTimestamp())}function Ci(t){return Ot(!!t,49232),jt.fromTimestamp((function(n){const r=bu(n);return new nr(r.seconds,r.nanos)})(t))}function sT(t,e){return iA(t,e).canonicalString()}function iA(t,e){const n=(function(i){return new Sn(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function d9(t){const e=Sn.fromString(t);return Ot(w9(e),10190,{key:e.toString()}),e}function Ep(t,e){return sT(t.databaseId,e.path)}function Al(t,e){const n=d9(e);if(n.get(1)!==t.databaseId.projectId)throw new We(De.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new We(De.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ht(g9(n))}function h9(t,e){return sT(t.databaseId,e)}function m9(t){const e=d9(t);return e.length===4?Sn.emptyPath():g9(e)}function aA(t){return new Sn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function g9(t){return Ot(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function xR(t,e,n){return{name:Ep(t,e),fields:n.value.mapValue.fields}}function Rx(t,e,n){const r=Al(t,e.name),i=Ci(e.updateTime),a=e.createTime?Ci(e.createTime):jt.min(),l=new ga({mapValue:{fields:e.fields}}),f=Ur.newFoundDocument(r,i,a,l);return n&&f.setHasCommittedMutations(),n?f.setHasCommittedMutations():f}function MY(t,e){return"found"in e?(function(r,i){Ot(!!i.found,43571),i.found.name,i.found.updateTime;const a=Al(r,i.found.name),l=Ci(i.found.updateTime),f=i.found.createTime?Ci(i.found.createTime):jt.min(),m=new ga({mapValue:{fields:i.found.fields}});return Ur.newFoundDocument(a,l,f,m)})(t,e):"missing"in e?(function(r,i){Ot(!!i.missing,3894),Ot(!!i.readTime,22933);const a=Al(r,i.missing),l=Ci(i.readTime);return Ur.newNoDocument(a,l)})(t,e):bt(7234,{result:e})}function jY(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:bt(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(p,b){return p.useProto3Json?(Ot(b===void 0||typeof b=="string",58123),oi.fromBase64String(b||"")):(Ot(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),oi.fromUint8Array(b||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&(function(p){const b=p.code===void 0?De.UNKNOWN:o9(p.code);return new We(b,p.message||"")})(l);n=new c9(r,i,a,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Al(t,r.document.name),a=Ci(r.document.updateTime),l=r.document.createTime?Ci(r.document.createTime):jt.min(),f=new ga({mapValue:{fields:r.document.fields}}),m=Ur.newFoundDocument(i,a,l,f),p=r.targetIds||[],b=r.removedTargetIds||[];n=new Ey(p,b,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Al(t,r.document),a=r.readTime?Ci(r.readTime):jt.min(),l=Ur.newNoDocument(i,a),f=r.removedTargetIds||[];n=new Ey([],f,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Al(t,r.document),a=r.removedTargetIds||[];n=new Ey([],a,i,null)}else{if(!("filter"in e))return bt(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new TY(i,a),f=r.targetId;n=new u9(f,l)}}return n}function Ap(t,e){let n;if(e instanceof _m)n={update:xR(t,e.key,e.value)};else if(e instanceof Em)n={delete:Ep(t,e.key)};else if(e instanceof Mu)n={update:xR(t,e.key,e.data),updateMask:UY(e.fieldMask)};else{if(!(e instanceof tT))return bt(16599,{dt:e.type});n={verify:Ep(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const f=l.transform;if(f instanceof Xh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof td)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof nd)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Qh)return{fieldPath:l.field.canonicalString(),increment:f.Ae};throw bt(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:kY(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:bt(27497)})(t,e.precondition)),n}function sA(t,e){const n=e.currentDocument?(function(a){return a.updateTime!==void 0?ei.updateTime(Ci(a.updateTime)):a.exists!==void 0?ei.exists(a.exists):ei.none()})(e.currentDocument):ei.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(l,f){let m=null;if("setToServerValue"in f)Ot(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),m=new Xh;else if("appendMissingElements"in f){const b=f.appendMissingElements.values||[];m=new td(b)}else if("removeAllFromArray"in f){const b=f.removeAllFromArray.values||[];m=new nd(b)}else"increment"in f?m=new Qh(l,f.increment):bt(16584,{proto:f});const p=qr.fromServerFormat(f.fieldPath);return new t0(p,m)})(t,i))):[];if(e.update){e.update.name;const i=Al(t,e.update.name),a=new ga({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(m){const p=m.fieldPaths||[];return new Ds(p.map((b=>qr.fromServerFormat(b))))})(e.updateMask);return new Mu(i,a,l,n,r)}return new _m(i,a,n,r)}if(e.delete){const i=Al(t,e.delete);return new Em(i,n)}if(e.verify){const i=Al(t,e.verify);return new tT(i,n)}return bt(1463,{proto:e})}function LY(t,e){return t&&t.length>0?(Ot(e!==void 0,14353),t.map((n=>(function(i,a){let l=i.updateTime?Ci(i.updateTime):Ci(a);return l.isEqual(jt.min())&&(l=Ci(a)),new EY(l,i.transformResults||[])})(n,e)))):[]}function p9(t,e){return{documents:[h9(t,e.path)]}}function Dx(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=h9(t,i);const a=(function(p){if(p.length!==0)return b9(cr.create(p,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const l=(function(p){if(p.length!==0)return p.map((b=>(function(T){return{field:bc(T.field),direction:FY(T.dir)}})(b)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const f=rA(t,e.limit);return f!==null&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:i}}function y9(t,e,n,r){const{ft:i,parent:a}=Dx(t,e),l={},f=[];let m=0;return n.forEach((p=>{const b=r?p.alias:"aggregate_"+m++;l[b]=p.alias,p.aggregateType==="count"?f.push({alias:b,count:{}}):p.aggregateType==="avg"?f.push({alias:b,avg:{field:bc(p.fieldPath)}}):p.aggregateType==="sum"&&f.push({alias:b,sum:{field:bc(p.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:f,structuredQuery:i.structuredQuery},parent:i.parent},gt:l,parent:a}}function v9(t){let e=m9(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ot(r===1,65062);const b=n.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];n.where&&(a=(function(_){const T=x9(_);return T instanceof cr&&QS(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(_){return _.map((T=>(function(j){return new _p(bh(j.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(T)))})(n.orderBy));let f=null;n.limit&&(f=(function(_){let T;return T=typeof _=="object"?_.value:_,Xp(T)?null:T})(n.limit));let m=null;n.startAt&&(m=(function(_){const T=!!_.before,N=_.values||[];return new Hc(N,T)})(n.startAt));let p=null;return n.endAt&&(p=(function(_){const T=!_.before,N=_.values||[];return new Hc(N,T)})(n.endAt)),Uj(e,i,l,a,f,"F",m,p)}function BY(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bt(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function x9(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bh(n.unaryFilter.field);return kn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=bh(n.unaryFilter.field);return kn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=bh(n.unaryFilter.field);return kn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=bh(n.unaryFilter.field);return kn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return bt(61313);default:return bt(60726)}})(t):t.fieldFilter!==void 0?(function(n){return kn.create(bh(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return bt(58110);default:return bt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return cr.create(n.compositeFilter.filters.map((r=>x9(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return bt(1026)}})(n.compositeFilter.op))})(t):bt(30097,{filter:t})}function FY(t){return NY[t]}function VY(t){return PY[t]}function zY(t){return RY[t]}function bc(t){return{fieldPath:t.canonicalString()}}function bh(t){return qr.fromServerFormat(t.fieldPath)}function b9(t){return t instanceof kn?(function(n){if(n.op==="=="){if(rR(n.value))return{unaryFilter:{field:bc(n.field),op:"IS_NAN"}};if(nR(n.value))return{unaryFilter:{field:bc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rR(n.value))return{unaryFilter:{field:bc(n.field),op:"IS_NOT_NAN"}};if(nR(n.value))return{unaryFilter:{field:bc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bc(n.field),op:VY(n.op),value:n.value}}})(t):t instanceof cr?(function(n){const r=n.getFilters().map((i=>b9(i)));return r.length===1?r[0]:{compositeFilter:{op:zY(n.op),filters:r}}})(t):bt(54877,{filter:t})}function UY(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function w9(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function _9(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class lu{constructor(e,n,r,i,a=jt.min(),l=jt.min(),f=oi.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new lu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class E9{constructor(e){this.yt=e}}function qY(t,e){let n;if(e.document)n=Rx(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ht.fromSegments(e.noDocument.path),i=id(e.noDocument.readTime);n=Ur.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return bt(56709);{const r=ht.fromSegments(e.unknownDocument.path),i=id(e.unknownDocument.version);n=Ur.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const a=new nr(i[0],i[1]);return jt.fromTimestamp(a)})(e.readTime)),n}function bR(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Jy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,l){return{name:Ep(a,l.key),fields:l.data.value.mapValue.fields,updateTime:Zh(a,l.version.toTimestamp()),createTime:Zh(a,l.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:rd(e.version)};else{if(!e.isUnknownDocument())return bt(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:rd(e.version)}}return r}function Jy(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function rd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function id(t){const e=new nr(t.seconds,t.nanoseconds);return jt.fromTimestamp(e)}function Lf(t,e){const n=(e.baseMutations||[]).map((a=>sA(t.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const f=e.mutations[a+1];l.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>sA(t.yt,a))),i=nr.fromMillis(e.localWriteTimeMs);return new nT(e.batchId,i,n,r)}function Wg(t){const e=id(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?id(t.lastLimboFreeSnapshotVersion):jt.min();let r;return r=(function(a){return a.documents!==void 0})(t.query)?(function(a){const l=a.documents.length;return Ot(l===1,1966,{count:l}),rs(wm(m9(a.documents[0])))})(t.query):(function(a){return rs(v9(a))})(t.query),new lu(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,oi.fromBase64String(t.resumeToken))}function A9(t,e){const n=rd(e.snapshotVersion),r=rd(e.lastLimboFreeSnapshotVersion);let i;i=Xy(e.target)?p9(t.yt,e.target):Dx(t.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ed(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function kx(t){const e=v9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zy(e,e.limit,"L"):e}function q_(t,e){return new iT(e.largestBatchId,sA(t.yt,e.overlayMutation))}function wR(t,e){const n=e.path.lastSegment();return[t,ns(e.path.popLast()),n]}function _R(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:rd(r.readTime),documentKey:ns(r.documentKey.path),largestBatchId:r.largestBatchId}}class GY{getBundleMetadata(e,n){return ER(e).get(n).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:id(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,n){return ER(e).put((function(i){return{bundleId:i.id,createTime:rd(Ci(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return AR(e).get(n).next((r=>{if(r)return(function(a){return{name:a.name,query:kx(a.bundledQuery),readTime:id(a.readTime)}})(r)}))}saveNamedQuery(e,n){return AR(e).put((function(i){return{name:i.name,readTime:rd(Ci(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function ER(t){return Qi(t,Ax)}function AR(t){return Qi(t,Sx)}class Mx{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Mx(e,r)}getOverlay(e,n){return Sg(e).get(wR(this.userId,n)).next((r=>r?q_(this.serializer,r):null))}getOverlays(e,n){const r=bl();return Ie.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((a,l)=>{const f=new iT(n,l);i.push(this.bt(e,f))})),Ie.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((l=>i.add(ns(l.getCollectionPath()))));const a=[];return i.forEach((l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Sg(e).X($E,f))})),Ie.waitFor(a)}getOverlaysForCollection(e,n,r){const i=bl(),a=ns(n),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Sg(e).H($E,l).next((f=>{for(const m of f){const p=q_(this.serializer,m);i.set(p.getKey(),p)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const a=bl();let l;const f=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Sg(e).ee({index:xj,range:f},((m,p,b)=>{const _=q_(this.serializer,p);a.size()<i||_.largestBatchId===l?(a.set(_.getKey(),_),l=_.largestBatchId):b.done()})).next((()=>a))}bt(e,n){return Sg(e).put((function(i,a,l){const[f,m,p]=wR(a,l.mutation.key);return{userId:a,collectionPath:m,documentId:p,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Ap(i.yt,l.mutation)}})(this.serializer,this.userId,n))}}function Sg(t){return Qi(t,Tx)}class HY{St(e){return Qi(e,WS)}getSessionToken(e){return this.St(e).get("sessionToken").next((n=>{const r=n?.value;return r?oi.fromUint8Array(r):oi.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.St(e).put({name:"sessionToken",value:n.toUint8Array()})}}class Bf{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Zr(e.integerValue));else if("doubleValue"in e){const r=Zr(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),mp(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=bu(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(wu(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?Rj(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Ox(e)?this.kt(e.mapValue,n):(this.Kt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Nt(n)):bt(19022,{Ut:e})}Ot(e,n){this.Ft(n,25),this.$t(e,n)}$t(e,n){n.xt(e)}Kt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=Wh,a=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Zr(a)),this.Ot(i,n),this.Ct(r[i],n)}qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),ht.fromName(e).path.forEach((r=>{this.Ft(n,60),this.$t(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Bf.Wt=new Bf;const uh=255;function KY(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function SR(t){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const l=KY(255&r[a]);if(i+=l,l!==8)break}return i})(t);return Math.ceil(e/8)}class WY{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ht(r.value),r=n.next();this.Jt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const i=n.codePointAt(0);this.Ht(240|i>>>18),this.Ht(128|63&i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i)}}this.Jt()}Yt(e){const n=this.en(e),r=SR(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=SR(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(uh),this.sn(255)}_n(){this.an(uh),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===uh?(this.sn(uh),this.sn(0)):this.sn(n)}Ht(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===uh?(this.an(uh),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class $Y{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class YY{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Tg{constructor(){this.cn=new WY,this.ascending=new $Y(this.cn),this.descending=new YY(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class Ff{constructor(e,n,r,i){this.hn=e,this.Pn=n,this.Tn=r,this.In=i}En(){const e=this.In.length,n=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.In,0),n!==e?r.set([0],this.In.length):++r[r.length-1],new Ff(this.hn,this.Pn,this.Tn,r)}Rn(e,n,r){return{indexId:this.hn,uid:e,arrayValue:Ay(this.Tn),directionalValue:Ay(this.In),orderedDocumentKey:Ay(n),documentKey:r.path.toArray()}}An(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function hc(t,e){let n=t.hn-e.hn;return n!==0?n:(n=TR(t.Tn,e.Tn),n!==0?n:(n=TR(t.In,e.In),n!==0?n:ht.comparator(t.Pn,e.Pn)))}function TR(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Ay(t){return z5()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function IR(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class CR{constructor(e){this.Vn=new dr(((n,r)=>qr.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Ot(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const n=HE(e);if(n!==void 0&&!this.pn(n))return!1;const r=Nf(e);let i=new Set,a=0,l=0;for(;a<r.length&&this.pn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.Vn.size>0){const f=this.Vn.getIterator().getNext();if(!i.has(f.field.canonicalString())){const m=r[a];if(!this.yn(f,m)||!this.wn(this.dn[l++],m))return!1}++a}for(;a<r.length;++a){const f=r[a];if(l>=this.dn.length||!this.wn(this.dn[l++],f))return!1}return!0}bn(){if(this.fn)return null;let e=new dr(qr.comparator);const n=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Kf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Kf(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Kf(r.field,r.dir==="asc"?0:1)));return new zh(zh.UNKNOWN_ID,this.collectionId,n,Uh.empty())}pn(e){for(const n of this.mn)if(this.yn(n,e))return!0;return!1}yn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}wn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function S9(t){if(Ot(t instanceof kn||t instanceof cr,20012),t instanceof kn){if(t instanceof zj){const n=t.value.arrayValue?.values?.map((r=>kn.create(t.field,"==",r)))||[];return cr.create(n,"or")}return t}const e=t.filters.map((n=>S9(n)));return cr.create(e,t.op)}function XY(t){if(t.getFilters().length===0)return[];const e=uA(S9(t));return Ot(T9(e),7391),oA(e)||lA(e)?[e]:e.getFilters()}function oA(t){return t instanceof kn}function lA(t){return t instanceof cr&&QS(t)}function T9(t){return oA(t)||lA(t)||(function(n){if(n instanceof cr&&ZE(n)){for(const r of n.getFilters())if(!oA(r)&&!lA(r))return!1;return!0}return!1})(t)}function uA(t){if(Ot(t instanceof kn||t instanceof cr,34018),t instanceof kn)return t;if(t.filters.length===1)return uA(t.filters[0]);const e=t.filters.map((r=>uA(r)));let n=cr.create(e,t.op);return n=ev(n),T9(n)?n:(Ot(n instanceof cr,64498),Ot(Yh(n),40251),Ot(n.filters.length>1,57927),n.filters.reduce(((r,i)=>oT(r,i))))}function oT(t,e){let n;return Ot(t instanceof kn||t instanceof cr,38388),Ot(e instanceof kn||e instanceof cr,25473),n=t instanceof kn?e instanceof kn?(function(i,a){return cr.create([i,a],"and")})(t,e):OR(t,e):e instanceof kn?OR(e,t):(function(i,a){if(Ot(i.filters.length>0&&a.filters.length>0,48005),Yh(i)&&Yh(a))return Bj(i,a.getFilters());const l=ZE(i)?i:a,f=ZE(i)?a:i,m=l.filters.map((p=>oT(p,f)));return cr.create(m,"or")})(t,e),ev(n)}function OR(t,e){if(Yh(e))return Bj(e,t.getFilters());{const n=e.filters.map((r=>oT(t,r)));return cr.create(n,"or")}}function ev(t){if(Ot(t instanceof kn||t instanceof cr,11850),t instanceof kn)return t;const e=t.getFilters();if(e.length===1)return ev(e[0]);if(jj(t))return t;const n=e.map((i=>ev(i))),r=[];return n.forEach((i=>{i instanceof kn?r.push(i):i instanceof cr&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:cr.create(r,t.op)}class QY{constructor(){this.Sn=new lT}addToCollectionParentIndex(e,n){return this.Sn.add(n),Ie.resolve()}getCollectionParents(e,n){return Ie.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Ie.resolve()}deleteFieldIndex(e,n){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,n){return Ie.resolve()}getDocumentsMatchingTarget(e,n){return Ie.resolve(null)}getIndexType(e,n){return Ie.resolve(0)}getFieldIndexes(e,n){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,n){return Ie.resolve(ao.min())}getMinOffsetFromCollectionGroup(e,n){return Ie.resolve(ao.min())}updateCollectionGroup(e,n,r){return Ie.resolve()}updateIndexEntries(e,n){return Ie.resolve()}}class lT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new dr(Sn.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dr(Sn.comparator)).toArray()}}const NR="IndexedDbIndexManager",U1=new Uint8Array(0);class ZY{constructor(e,n){this.databaseId=n,this.Dn=new lT,this.Cn=new ku((r=>ed(r)),((r,i)=>Zp(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Dn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.Dn.add(n)}));const a={collectionId:r,parent:ns(i)};return PR(e).put(a)}return Ie.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[ij(n),""],!1,!0);return PR(e).H(i).next((a=>{for(const l of a){if(l.collectionId!==n)break;r.push(xl(l.parent))}return r}))}addFieldIndex(e,n){const r=Ig(e),i=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(n);delete i.indexId;const a=r.add(i);if(n.indexState){const l=fh(e);return a.next((f=>{l.put(_R(f,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return a.next()}deleteFieldIndex(e,n){const r=Ig(e),i=fh(e),a=ch(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=Ig(e),r=ch(e),i=fh(e);return n.X().next((()=>r.X())).next((()=>i.X()))}createTargetIndexes(e,n){return Ie.forEach(this.vn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new CR(r).bn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,n){const r=ch(e);let i=!0;const a=new Map;return Ie.forEach(this.vn(n),(l=>this.Fn(e,l).next((f=>{i&&(i=!!f),a.set(l,f)})))).next((()=>{if(i){let l=on();const f=[];return Ie.forEach(a,((m,p)=>{nt(NR,`Using index ${(function(K){return`id=${K.indexId}|cg=${K.collectionGroup}|f=${K.fields.map((ee=>`${ee.fieldPath}:${ee.kind}`)).join(",")}`})(m)} to execute ${ed(n)}`);const b=(function(K,ee){const ue=HE(ee);if(ue===void 0)return null;for(const Z of Qy(K,ue.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null})(p,m),_=(function(K,ee){const ue=new Map;for(const Z of Nf(ee))for(const V of Qy(K,Z.fieldPath))switch(V.op){case"==":case"in":ue.set(Z.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return ue.set(Z.fieldPath.canonicalString(),V.value),Array.from(ue.values())}return null})(p,m),T=(function(K,ee){const ue=[];let Z=!0;for(const V of Nf(ee)){const W=V.kind===0?lR(K,V.fieldPath,K.startAt):uR(K,V.fieldPath,K.startAt);ue.push(W.value),Z&&(Z=W.inclusive)}return new Hc(ue,Z)})(p,m),N=(function(K,ee){const ue=[];let Z=!0;for(const V of Nf(ee)){const W=V.kind===0?uR(K,V.fieldPath,K.endAt):lR(K,V.fieldPath,K.endAt);ue.push(W.value),Z&&(Z=W.inclusive)}return new Hc(ue,Z)})(p,m),j=this.Mn(m,p,T),M=this.Mn(m,p,N),L=this.xn(m,p,_),z=this.On(m.indexId,b,j,T.inclusive,M,N.inclusive,L);return Ie.forEach(z,($=>r.Z($,n.limit).next((K=>{K.forEach((ee=>{const ue=ht.fromSegments(ee.documentKey);l.has(ue)||(l=l.add(ue),f.push(ue))}))}))))})).next((()=>f))}return Ie.resolve(null)}))}vn(e){let n=this.Cn.get(e);return n||(e.filters.length===0?n=[e]:n=XY(cr.create(e.filters,"and")).map((r=>eA(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,n),n)}On(e,n,r,i,a,l,f){const m=(n!=null?n.length:1)*Math.max(r.length,a.length),p=m/(n!=null?n.length:1),b=[];for(let _=0;_<m;++_){const T=n?this.Nn(n[_/p]):U1,N=this.Bn(e,T,r[_%p],i),j=this.Ln(e,T,a[_%p],l),M=f.map((L=>this.Bn(e,T,L,!0)));b.push(...this.createRange(N,j,M))}return b}Bn(e,n,r,i){const a=new Ff(e,ht.empty(),n,r);return i?a:a.En()}Ln(e,n,r,i){const a=new Ff(e,ht.empty(),n,r);return i?a.En():a}Fn(e,n){const r=new CR(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let l=null;for(const f of a)r.gn(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l}))}getIndexType(e,n){let r=2;const i=this.vn(n);return Ie.forEach(i,(a=>this.Fn(e,a).next((l=>{l?r!==0&&l.fields.length<(function(m){let p=new dr(qr.comparator),b=!1;for(const _ of m.filters)for(const T of _.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?b=!0:p=p.add(T.field));for(const _ of m.orderBy)_.field.isKeyField()||(p=p.add(_.field));return p.size+(b?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(l){return l.limit!==null})(n)&&i.length>1&&r===2?1:r))}kn(e,n){const r=new Tg;for(const i of Nf(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const l=r.ln(i.kind);Bf.Wt.Dt(a,l)}return r.un()}Nn(e){const n=new Tg;return Bf.Wt.Dt(e,n.ln(0)),n.un()}Kn(e,n){const r=new Tg;return Bf.Wt.Dt(Jf(this.databaseId,n),r.ln((function(a){const l=Nf(a);return l.length===0?0:l[l.length-1].kind})(e))),r.un()}xn(e,n,r){if(r===null)return[];let i=[];i.push(new Tg);let a=0;for(const l of Nf(e)){const f=r[a++];for(const m of i)if(this.qn(n,l.fieldPath)&&wp(f))i=this.Un(i,l,f);else{const p=m.ln(l.kind);Bf.Wt.Dt(f,p)}}return this.$n(i)}Mn(e,n,r){return this.xn(e,n,r.position)}$n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Un(e,n,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const m=new Tg;m.seed(f.un()),Bf.Wt.Dt(l,m.ln(n.kind)),a.push(m)}return a}qn(e,n){return!!e.filters.find((r=>r instanceof kn&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=Ig(e),i=fh(e);return(n?r.H(WE,IDBKeyRange.bound(n,n)):r.H()).next((a=>{const l=[];return Ie.forEach(a,(f=>i.get([f.indexId,this.uid]).next((m=>{l.push((function(b,_){const T=_?new Uh(_.sequenceNumber,new ao(id(_.readTime),new ht(xl(_.documentKey)),_.largestBatchId)):Uh.empty(),N=b.fields.map((([j,M])=>new Kf(qr.fromServerFormat(j),M)));return new zh(b.indexId,b.collectionGroup,N,T)})(f,m))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:Ht(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=Ig(e),a=fh(e);return this.Wn(e).next((l=>i.H(WE,IDBKeyRange.bound(n,n)).next((f=>Ie.forEach(f,(m=>a.put(_R(m.indexId,this.uid,l,r))))))))}updateIndexEntries(e,n){const r=new Map;return Ie.forEach(n,((i,a)=>{const l=r.get(i.collectionGroup);return(l?Ie.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next((f=>(r.set(i.collectionGroup,f),Ie.forEach(f,(m=>this.Qn(e,i,m).next((p=>{const b=this.Gn(a,m);return p.isEqual(b)?Ie.resolve():this.zn(e,a,m,p,b)})))))))}))}jn(e,n,r,i){return ch(e).put(i.Rn(this.uid,this.Kn(r,n.key),n.key))}Hn(e,n,r,i){return ch(e).delete(i.An(this.uid,this.Kn(r,n.key),n.key))}Qn(e,n,r){const i=ch(e);let a=new dr(hc);return i.ee({index:vj,range:IDBKeyRange.only([r.indexId,this.uid,Ay(this.Kn(r,n))])},((l,f)=>{a=a.add(new Ff(r.indexId,n,IR(f.arrayValue),IR(f.directionalValue)))})).next((()=>a))}Gn(e,n){let r=new dr(hc);const i=this.kn(n,e);if(i==null)return r;const a=HE(n);if(a!=null){const l=e.data.field(a.fieldPath);if(wp(l))for(const f of l.arrayValue.values||[])r=r.add(new Ff(n.indexId,e.key,this.Nn(f),i))}else r=r.add(new Ff(n.indexId,e.key,U1,i));return r}zn(e,n,r,i,a){nt(NR,"Updating index entries for document '%s'",n.key);const l=[];return(function(m,p,b,_,T){const N=m.getIterator(),j=p.getIterator();let M=lh(N),L=lh(j);for(;M||L;){let z=!1,$=!1;if(M&&L){const K=b(M,L);K<0?$=!0:K>0&&(z=!0)}else M!=null?$=!0:z=!0;z?(_(L),L=lh(j)):$?(T(M),M=lh(N)):(M=lh(N),L=lh(j))}})(i,a,hc,(f=>{l.push(this.jn(e,n,r,f))}),(f=>{l.push(this.Hn(e,n,r,f))})),Ie.waitFor(l)}Wn(e){let n=1;return fh(e).ee({index:yj,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((l,f)=>hc(l,f))).filter(((l,f,m)=>!f||hc(l,m[f-1])!==0));const i=[];i.push(e);for(const l of r){const f=hc(l,e),m=hc(l,n);if(f===0)i[0]=e.En();else if(f>0&&m<0)i.push(l),i.push(l.En());else if(m>0)break}i.push(n);const a=[];for(let l=0;l<i.length;l+=2){if(this.Jn(i[l],i[l+1]))return[];const f=i[l].An(this.uid,U1,ht.empty()),m=i[l+1].An(this.uid,U1,ht.empty());a.push(IDBKeyRange.bound(f,m))}return a}Jn(e,n){return hc(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(RR)}getMinOffset(e,n){return Ie.mapArray(this.vn(n),(r=>this.Fn(e,r).next((i=>i||bt(44426))))).next(RR)}}function PR(t){return Qi(t,yp)}function ch(t){return Qi(t,np)}function Ig(t){return Qi(t,KS)}function fh(t){return Qi(t,tp)}function RR(t){Ot(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;qS(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ao(e.readTime,e.documentKey,n)}const DR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},I9=41943040;class es{static withCacheSize(e){return new es(e,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function C9(t,e,n){const r=t.store(Fo),i=t.store(qh),a=[],l=IDBKeyRange.only(n.batchId);let f=0;const m=r.ee({range:l},((b,_,T)=>(f++,T.delete())));a.push(m.next((()=>{Ot(f===1,47070,{batchId:n.batchId})})));const p=[];for(const b of n.mutations){const _=mj(e,b.key.path,n.batchId);a.push(i.delete(_)),p.push(b.key)}return Ie.waitFor(a).next((()=>p))}function tv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw bt(14731);e=t.noDocument}return JSON.stringify(e).length}es.DEFAULT_COLLECTION_PERCENTILE=10,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,es.DEFAULT=new es(I9,es.DEFAULT_COLLECTION_PERCENTILE,es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),es.DISABLED=new es(-1,0,0);class jx{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static wt(e,n,r,i){Ot(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new jx(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mc(e).ee({index:Vf,range:r},((i,a,l)=>{n=!1,l.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const a=wh(e),l=mc(e);return l.add({}).next((f=>{Ot(typeof f=="number",49019);const m=new nT(f,n,r,i),p=(function(N,j,M){const L=M.baseMutations.map(($=>Ap(N.yt,$))),z=M.mutations.map(($=>Ap(N.yt,$)));return{userId:j,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:L,mutations:z}})(this.serializer,this.userId,m),b=[];let _=new dr(((T,N)=>Ht(T.canonicalString(),N.canonicalString())));for(const T of i){const N=mj(this.userId,T.key.path,f);_=_.add(T.key.path.popLast()),b.push(l.put(p)),b.push(a.put(N,I$))}return _.forEach((T=>{b.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Zn[f]=m.keys()})),Ie.waitFor(b).next((()=>m))}))}lookupMutationBatch(e,n){return mc(e).get(n).next((r=>r?(Ot(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Lf(this.serializer,r)):null))}Xn(e,n){return this.Zn[n]?Ie.resolve(this.Zn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Zn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return mc(e).ee({index:Vf,range:i},((l,f,m)=>{f.userId===this.userId&&(Ot(f.batchId>=r,47524,{Yn:r}),a=Lf(this.serializer,f)),m.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Mc;return mc(e).ee({index:Vf,range:n,reverse:!0},((i,a,l)=>{r=a.batchId,l.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Mc],[this.userId,Number.POSITIVE_INFINITY]);return mc(e).H(Vf,n).next((r=>r.map((i=>Lf(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=yy(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return wh(e).ee({range:i},((l,f,m)=>{const[p,b,_]=l,T=xl(b);if(p===this.userId&&n.path.isEqual(T))return mc(e).get(_).next((N=>{if(!N)throw bt(61480,{er:l,batchId:_});Ot(N.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:N.userId,batchId:_}),a.push(Lf(this.serializer,N))}));m.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dr(Ht);const i=[];return n.forEach((a=>{const l=yy(this.userId,a.path),f=IDBKeyRange.lowerBound(l),m=wh(e).ee({range:f},((p,b,_)=>{const[T,N,j]=p,M=xl(N);T===this.userId&&a.path.isEqual(M)?r=r.add(j):_.done()}));i.push(m)})),Ie.waitFor(i).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=yy(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new dr(Ht);return wh(e).ee({range:l},((m,p,b)=>{const[_,T,N]=m,j=xl(T);_===this.userId&&r.isPrefixOf(j)?j.length===i&&(f=f.add(N)):b.done()})).next((()=>this.tr(e,f)))}tr(e,n){const r=[],i=[];return n.forEach((a=>{i.push(mc(e).get(a).next((l=>{if(l===null)throw bt(35274,{batchId:a});Ot(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:a}),r.push(Lf(this.serializer,l))})))})),Ie.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return C9(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.nr(n.batchId)})),Ie.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return Ie.resolve();const r=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),i=[];return wh(e).ee({range:r},((a,l,f)=>{if(a[0]===this.userId){const m=xl(a[1]);i.push(m)}else f.done()})).next((()=>{Ot(i.length===0,56720,{rr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,n){return O9(e,this.userId,n)}ir(e){return N9(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:Mc,lastStreamToken:""}))}}function O9(t,e,n){const r=yy(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return wh(t).ee({range:a,Y:!0},((f,m,p)=>{const[b,_,T]=f;b===e&&_===i&&(l=!0),p.done()})).next((()=>l))}function mc(t){return Qi(t,Fo)}function wh(t){return Qi(t,qh)}function N9(t){return Qi(t,gp)}class ad{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ad(0)}static ar(){return new ad(-1)}}class JY{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.ur(e).next((n=>{const r=new ad(n.highestTargetId);return n.highestTargetId=r.next(),this.cr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((n=>jt.fromTimestamp(new nr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.ur(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.cr(e,i))))}addTargetData(e,n){return this.lr(e,n).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(n,r),this.cr(e,r))))))}updateTargetData(e,n){return this.lr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>dh(e).delete(n.targetId))).next((()=>this.ur(e))).next((r=>(Ot(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,n,r){let i=0;const a=[];return dh(e).ee(((l,f)=>{const m=Wg(f);m.sequenceNumber<=n&&r.get(m.targetId)===null&&(i++,a.push(this.removeTargetData(e,m)))})).next((()=>Ie.waitFor(a))).next((()=>i))}forEachTarget(e,n){return dh(e).ee(((r,i)=>{const a=Wg(i);n(a)}))}ur(e){return kR(e).get(Yy).next((n=>(Ot(n!==null,2888),n)))}cr(e,n){return kR(e).put(Yy,n)}lr(e,n){return dh(e).put(A9(this.serializer,n))}hr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((n=>n.targetCount))}getTargetData(e,n){const r=ed(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return dh(e).ee({range:i,index:pj},((l,f,m)=>{const p=Wg(f);Zp(n,p.target)&&(a=p,m.done())})).next((()=>a))}addMatchingKeys(e,n,r){const i=[],a=wc(e);return n.forEach((l=>{const f=ns(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))})),Ie.waitFor(i)}removeMatchingKeys(e,n,r){const i=wc(e);return Ie.forEach(n,(a=>{const l=ns(a.path);return Ie.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,n){const r=wc(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=wc(e);let a=on();return i.ee({range:r,Y:!0},((l,f,m)=>{const p=xl(l[1]),b=new ht(p);a=a.add(b)})).next((()=>a))}containsKey(e,n){const r=ns(n.path),i=IDBKeyRange.bound([r],[ij(r)],!1,!0);let a=0;return wc(e).ee({index:HS,Y:!0,range:i},(([l,f],m,p)=>{l!==0&&(a++,p.done())})).next((()=>a>0))}At(e,n){return dh(e).get(n).next((r=>r?Wg(r):null))}}function dh(t){return Qi(t,Gh)}function kR(t){return Qi(t,Wf)}function wc(t){return Qi(t,Hh)}const MR="LruGarbageCollector",P9=1048576;function jR([t,e],[n,r]){const i=Ht(t,n);return i===0?Ht(e,r):i}class eX{constructor(e){this.Pr=e,this.buffer=new dr(jR),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();jR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class R9{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){nt(MR,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){nf(n)?nt(MR,"Ignoring IndexedDB error during garbage collection: ",n):await tf(n)}await this.Ar(3e5)}))}}class tX{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Ie.resolve(Rs.ce);const r=new eX(n);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(nt("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(DR)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(nt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DR):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,a,l,f,m,p;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(nt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,l=Date.now(),this.nthSequenceNumber(e,i)))).next((_=>(r=_,f=Date.now(),this.removeTargets(e,r,n)))).next((_=>(a=_,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(p=Date.now(),vh()<=Dn.DEBUG&&nt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-b}ms
	Determined least recently used ${i} in `+(f-l)+`ms
	Removed ${a} targets in `+(m-f)+`ms
	Removed ${_} documents in `+(p-m)+`ms
Total Duration: ${p-b}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:_}))))}}function D9(t,e){return new tX(t,e)}class nX{constructor(e,n){this.db=e,this.garbageCollector=D9(this,n)}dr(e){const n=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}mr(e,n){return this.yr(e,((r,i)=>n(i)))}addReference(e,n,r){return q1(e,r)}removeReference(e,n,r){return q1(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return q1(e,n)}wr(e,n){return(function(i,a){let l=!1;return N9(i).te((f=>O9(i,f,a).next((m=>(m&&(l=!0),Ie.resolve(!m)))))).next((()=>l))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.yr(e,((l,f)=>{if(f<=n){const m=this.wr(e,l).next((p=>{if(!p)return a++,r.getEntry(e,l).next((()=>(r.removeEntry(l,jt.min()),wc(e).delete((function(_){return[0,ns(_.path)]})(l)))))}));i.push(m)}})).next((()=>Ie.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return q1(e,n)}yr(e,n){const r=wc(e);let i,a=Rs.ce;return r.ee({index:HS},(([l,f],{path:m,sequenceNumber:p})=>{l===0?(a!==Rs.ce&&n(new ht(xl(i)),a),a=p,i=m):a=Rs.ce})).next((()=>{a!==Rs.ce&&n(new ht(xl(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function q1(t,e){return wc(t).put((function(r,i){return{targetId:0,path:ns(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class k9{constructor(){this.changes=new ku((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ur.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ie.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class rX{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Tf(e).put(r)}removeEntry(e,n,r){return Tf(e).delete((function(a,l){const f=a.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Jy(l),f[f.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.br(e,r))))}getEntry(e,n){let r=Ur.newInvalidDocument(n);return Tf(e).ee({index:vy,range:IDBKeyRange.only(Cg(n))},((i,a)=>{r=this.Sr(n,a)})).next((()=>r))}Dr(e,n){let r={size:0,document:Ur.newInvalidDocument(n)};return Tf(e).ee({index:vy,range:IDBKeyRange.only(Cg(n))},((i,a)=>{r={document:this.Sr(n,a),size:tv(a)}})).next((()=>r))}getEntries(e,n){let r=ks();return this.Cr(e,n,((i,a)=>{const l=this.Sr(i,a);r=r.insert(i,l)})).next((()=>r))}vr(e,n){let r=ks(),i=new jr(ht.comparator);return this.Cr(e,n,((a,l)=>{const f=this.Sr(a,l);r=r.insert(a,f),i=i.insert(a,tv(l))})).next((()=>({documents:r,Fr:i})))}Cr(e,n,r){if(n.isEmpty())return Ie.resolve();let i=new dr(FR);n.forEach((m=>i=i.add(m)));const a=IDBKeyRange.bound(Cg(i.first()),Cg(i.last())),l=i.getIterator();let f=l.getNext();return Tf(e).ee({index:vy,range:a},((m,p,b)=>{const _=ht.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;f&&FR(f,_)<0;)r(f,null),f=l.getNext();f&&f.isEqual(_)&&(r(f,p),f=l.hasNext()?l.getNext():null),f?b.j(Cg(f)):b.done()})).next((()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,a){const l=n.path,f=[l.popLast().toArray(),l.lastSegment(),Jy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tf(e).H(IDBKeyRange.bound(f,m,!0)).next((p=>{a?.incrementDocumentReadCount(p.length);let b=ks();for(const _ of p){const T=this.Sr(ht.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);T.isFoundDocument()&&(e0(n,T)||i.has(T.key))&&(b=b.insert(T.key,T))}return b}))}getAllFromCollectionGroup(e,n,r,i){let a=ks();const l=BR(n,r),f=BR(n,ao.max());return Tf(e).ee({index:gj,range:IDBKeyRange.bound(l,f,!0)},((m,p,b)=>{const _=this.Sr(ht.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);a=a.insert(_.key,_),a.size===i&&b.done()})).next((()=>a))}newChangeBuffer(e){return new iX(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return LR(e).get(KE).next((n=>(Ot(!!n,20021),n)))}br(e,n){return LR(e).put(KE,n)}Sr(e,n){if(n){const r=qY(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(jt.min())))return r}return Ur.newInvalidDocument(e)}}function M9(t){return new rX(t)}class iX extends k9{constructor(e,n){super(),this.Mr=e,this.trackRemovals=n,this.Or=new ku((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new dr(((a,l)=>Ht(a.canonicalString(),l.canonicalString())));return this.changes.forEach(((a,l)=>{const f=this.Or.get(a);if(n.push(this.Mr.removeEntry(e,a,f.readTime)),l.isValidDocument()){const m=bR(this.Mr.serializer,l);i=i.add(a.path.popLast());const p=tv(m);r+=p-f.size,n.push(this.Mr.addEntry(e,a,m))}else if(r-=f.size,this.trackRemovals){const m=bR(this.Mr.serializer,l.convertToNoDocument(jt.min()));n.push(this.Mr.addEntry(e,a,m))}})),i.forEach((a=>{n.push(this.Mr.indexManager.addToCollectionParentIndex(e,a))})),n.push(this.Mr.updateMetadata(e,r)),Ie.waitFor(n)}getFromCache(e,n){return this.Mr.Dr(e,n).next((r=>(this.Or.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Mr.vr(e,n).next((({documents:r,Fr:i})=>(i.forEach(((a,l)=>{this.Or.set(a,{size:l,readTime:r.get(a).readTime})})),r)))}}function LR(t){return Qi(t,pp)}function Tf(t){return Qi(t,$y)}function Cg(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function BR(t,e){const n=e.documentKey.path.toArray();return[t,Jy(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function FR(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=Ht(n[a],r[a]),i)return i;return i=Ht(n.length,r.length),i||(i=Ht(n[n.length-2],r[r.length-2]),i||Ht(n[n.length-1],r[r.length-1]))}class aX{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class j9{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&ap(r.mutation,i,Ds.empty(),nr.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,on()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=on()){const i=bl();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let l=Hg();return a.forEach(((f,m)=>{l=l.insert(f,m.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const r=bl();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,on())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((l,f)=>{n.set(l,f)}))}))}computeViews(e,n,r,i){let a=ks();const l=ip(),f=(function(){return ip()})();return n.forEach(((m,p)=>{const b=r.get(p.key);i.has(p.key)&&(b===void 0||b.mutation instanceof Mu)?a=a.insert(p.key,p):b!==void 0?(l.set(p.key,b.mutation.getFieldMask()),ap(b.mutation,p,b.mutation.getFieldMask(),nr.now())):l.set(p.key,Ds.empty())})),this.recalculateAndSaveOverlays(e,a).next((m=>(m.forEach(((p,b)=>l.set(p,b))),n.forEach(((p,b)=>f.set(p,new aX(b,l.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,n){const r=ip();let i=new jr(((l,f)=>l-f)),a=on();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const f of l)f.keys().forEach((m=>{const p=n.get(m);if(p===null)return;let b=r.get(m)||Ds.empty();b=f.applyToLocalView(p,b),r.set(m,b);const _=(i.get(f.batchId)||on()).add(m);i=i.insert(f.batchId,_)}))})).next((()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),p=m.key,b=m.value,_=Xj();b.forEach((T=>{if(!a.has(T)){const N=r9(n.get(T),r.get(T));N!==null&&_.set(T,N),a=a.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,_))}return Ie.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return fY(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):Ie.resolve(bl());let f=Vh,m=a;return l.next((p=>Ie.forEach(p,((b,_)=>(f<_.largestBatchId&&(f=_.largestBatchId),a.get(b)?Ie.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{m=m.insert(b,T)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,m,p,on()))).next((b=>({batchId:f,changes:Yj(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ht(n)).next((r=>{let i=Hg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let l=Hg();return this.indexManager.getCollectionParents(e,a).next((f=>Ie.forEach(f,(m=>{const p=(function(_,T){return new Du(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(n,m.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next((b=>{b.forEach(((_,T)=>{l=l.insert(_,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((l=>{a.forEach(((m,p)=>{const b=p.getKey();l.get(b)===null&&(l=l.insert(b,Ur.newInvalidDocument(b)))}));let f=Hg();return l.forEach(((m,p)=>{const b=a.get(m);b!==void 0&&ap(b.mutation,p,Ds.empty(),nr.now()),e0(n,p)&&(f=f.insert(m,p))})),f}))}}class sX{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Ie.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ci(i.createTime)}})(n)),Ie.resolve()}getNamedQuery(e,n){return Ie.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:kx(i.bundledQuery),readTime:Ci(i.readTime)}})(n)),Ie.resolve()}}class oX{constructor(){this.overlays=new jr(ht.comparator),this.Lr=new Map}getOverlay(e,n){return Ie.resolve(this.overlays.get(n))}getOverlays(e,n){const r=bl();return Ie.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.bt(e,n,a)})),Ie.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),Ie.resolve()}getOverlaysForCollection(e,n,r){const i=bl(),a=n.length+1,l=new ht(n.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const m=f.getNext().value,p=m.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return Ie.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new jr(((p,b)=>p-b));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let b=a.get(p.largestBatchId);b===null&&(b=bl(),a=a.insert(p.largestBatchId,b)),b.set(p.getKey(),p)}}const f=bl(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,b)=>f.set(p,b))),!(f.size()>=i)););return Ie.resolve(f)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new iT(n,r));let a=this.Lr.get(n);a===void 0&&(a=on(),this.Lr.set(n,a)),this.Lr.set(n,a.add(r.key))}}class lX{constructor(){this.sessionToken=oi.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ie.resolve()}}class uT{constructor(){this.kr=new dr(da.Kr),this.qr=new dr(da.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new da(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new da(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new ht(new Sn([])),r=new da(n,e),i=new da(n,e+1),a=[];return this.qr.forEachInRange([r,i],(l=>{this.Wr(l),a.push(l.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new ht(new Sn([])),r=new da(n,e),i=new da(n,e+1);let a=on();return this.qr.forEachInRange([r,i],(l=>{a=a.add(l.key)})),a}containsKey(e){const n=new da(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class da{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ht.comparator(e.key,n.key)||Ht(e.Hr,n.Hr)}static Ur(e,n){return Ht(e.Hr,n.Hr)||ht.comparator(e.key,n.key)}}class uX{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new dr(da.Kr)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new nT(a,n,r,i);this.mutationQueue.push(l);for(const f of i)this.Jr=this.Jr.add(new da(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Ie.resolve(l)}lookupMutationBatch(e,n){return Ie.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return Ie.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?Mc:this.Yn-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new da(n,0),i=new da(n,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,i],(l=>{const f=this.Zr(l.Hr);a.push(f)})),Ie.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dr(Ht);return n.forEach((i=>{const a=new da(i,0),l=new da(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,l],(f=>{r=r.add(f.Hr)}))})),Ie.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;ht.isDocumentKey(a)||(a=a.child(""));const l=new da(new ht(a),0);let f=new dr(Ht);return this.Jr.forEachWhile((m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(f=f.add(m.Hr)),!0)}),l),Ie.resolve(this.Yr(f))}Yr(e){const n=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Ot(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return Ie.forEach(n.mutations,(i=>{const a=new da(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new da(n,0),i=this.Jr.firstAfterOrEqual(r);return Ie.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class cX{constructor(e){this.ti=e,this.docs=(function(){return new jr(ht.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,l=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ie.resolve(r?r.document.mutableCopy():Ur.newInvalidDocument(n))}getEntries(e,n){let r=ks();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Ur.newInvalidDocument(i))})),Ie.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=ks();const l=n.path,f=new ht(l.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:p,value:{document:b}}=m.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||qS(uj(b),r)<=0||(i.has(b.key)||e0(n,b))&&(a=a.insert(b.key,b.mutableCopy()))}return Ie.resolve(a)}getAllFromCollectionGroup(e,n,r,i){bt(9500)}ni(e,n){return Ie.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new fX(this)}getSize(e){return Ie.resolve(this.size)}}class fX extends k9{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),Ie.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class dX{constructor(e){this.persistence=e,this.ri=new ku((n=>ed(n)),Zp),this.lastRemoteSnapshotVersion=jt.min(),this.highestTargetId=0,this.ii=0,this.si=new uT,this.targetCount=0,this.oi=ad._r()}forEachTarget(e,n){return this.ri.forEach(((r,i)=>n(i))),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),Ie.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new ad(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Ie.resolve()}updateTargetData(e,n){return this.lr(n),Ie.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ri.forEach(((l,f)=>{f.sequenceNumber<=n&&r.get(f.targetId)===null&&(this.ri.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)})),Ie.waitFor(a).next((()=>i))}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return Ie.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),Ie.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((l=>{a.push(i.markPotentiallyOrphaned(e,l))})),Ie.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Ie.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return Ie.resolve(r)}containsKey(e,n){return Ie.resolve(this.si.containsKey(n))}}class cT{constructor(e,n){this._i={},this.overlays={},this.ai=new Rs(0),this.ui=!1,this.ui=!0,this.ci=new lX,this.referenceDelegate=e(this),this.li=new dX(this),this.indexManager=new QY,this.remoteDocumentCache=(function(i){return new cX(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new E9(n),this.Pi=new sX(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oX,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new uX(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){nt("MemoryPersistence","Starting transaction:",e);const i=new hX(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((a=>this.referenceDelegate.Ii(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ei(e,n){return Ie.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class hX extends fj{constructor(e){super(),this.currentSequenceNumber=e}}class Lx{constructor(e){this.persistence=e,this.Ri=new uT,this.Ai=null}static Vi(e){return new Lx(e)}get di(){if(this.Ai)return this.Ai;throw bt(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),Ie.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),Ie.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Ie.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.di,(r=>{const i=ht.fromPath(r);return this.mi(e,i).next((a=>{a||n.removeEntry(i,jt.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return Ie.or([()=>Ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class nv{constructor(e,n){this.persistence=e,this.fi=new ku((r=>ns(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=D9(this,n)}static Vi(e,n){return new nv(e,n)}Ti(){}Ii(e){return Ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return Ie.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((a=>a?Ie.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ni(e,(l=>this.wr(e,l,n).next((f=>{f||(r++,a.removeEntry(l,jt.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Ie.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Ie.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Ie.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Ie.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=by(e.data.value)),n}wr(e,n,r){return Ie.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return Ie.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class mX{constructor(e){this.serializer=e}k(e,n,r,i){const a=new Ex("createOrUpgrade",n);r<1&&i>=1&&((function(m){m.createObjectStore(Qp)})(e),(function(m){m.createObjectStore(gp,{keyPath:T$}),m.createObjectStore(Fo,{keyPath:XP,autoIncrement:!0}).createIndex(Vf,QP,{unique:!0}),m.createObjectStore(qh)})(e),VR(e),(function(m){m.createObjectStore(Pf)})(e));let l=Ie.resolve();return r<3&&i>=3&&(r!==0&&((function(m){m.deleteObjectStore(Hh),m.deleteObjectStore(Gh),m.deleteObjectStore(Wf)})(e),VR(e)),l=l.next((()=>(function(m){const p=m.store(Wf),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:jt.min().toTimestamp(),targetCount:0};return p.put(Yy,b)})(a)))),r<4&&i>=4&&(r!==0&&(l=l.next((()=>(function(m,p){return p.store(Fo).H().next((_=>{m.deleteObjectStore(Fo),m.createObjectStore(Fo,{keyPath:XP,autoIncrement:!0}).createIndex(Vf,QP,{unique:!0});const T=p.store(Fo),N=_.map((j=>T.put(j)));return Ie.waitFor(N)}))})(e,a)))),l=l.next((()=>{(function(m){m.createObjectStore(Kh,{keyPath:M$})})(e)}))),r<5&&i>=5&&(l=l.next((()=>this.gi(a)))),r<6&&i>=6&&(l=l.next((()=>((function(m){m.createObjectStore(pp)})(e),this.pi(a))))),r<7&&i>=7&&(l=l.next((()=>this.yi(a)))),r<8&&i>=8&&(l=l.next((()=>this.wi(e,a)))),r<9&&i>=9&&(l=l.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(l=l.next((()=>this.bi(a)))),r<11&&i>=11&&(l=l.next((()=>{(function(m){m.createObjectStore(Ax,{keyPath:j$})})(e),(function(m){m.createObjectStore(Sx,{keyPath:L$})})(e)}))),r<12&&i>=12&&(l=l.next((()=>{(function(m){const p=m.createObjectStore(Tx,{keyPath:G$});p.createIndex($E,H$,{unique:!1}),p.createIndex(xj,K$,{unique:!1})})(e)}))),r<13&&i>=13&&(l=l.next((()=>(function(m){const p=m.createObjectStore($y,{keyPath:C$});p.createIndex(vy,O$),p.createIndex(gj,N$)})(e))).next((()=>this.Si(e,a))).next((()=>e.deleteObjectStore(Pf)))),r<14&&i>=14&&(l=l.next((()=>this.Di(e,a)))),r<15&&i>=15&&(l=l.next((()=>(function(m){m.createObjectStore(KS,{keyPath:B$,autoIncrement:!0}).createIndex(WE,F$,{unique:!1}),m.createObjectStore(tp,{keyPath:V$}).createIndex(yj,z$,{unique:!1}),m.createObjectStore(np,{keyPath:U$}).createIndex(vj,q$,{unique:!1})})(e)))),r<16&&i>=16&&(l=l.next((()=>{n.objectStore(tp).clear()})).next((()=>{n.objectStore(np).clear()}))),r<17&&i>=17&&(l=l.next((()=>{(function(m){m.createObjectStore(WS,{keyPath:W$})})(e)}))),r<18&&i>=18&&z5()&&(l=l.next((()=>{n.objectStore(tp).clear()})).next((()=>{n.objectStore(np).clear()}))),l}pi(e){let n=0;return e.store(Pf).ee(((r,i)=>{n+=tv(i)})).next((()=>{const r={byteSize:n};return e.store(pp).put(KE,r)}))}gi(e){const n=e.store(gp),r=e.store(Fo);return n.H().next((i=>Ie.forEach(i,(a=>{const l=IDBKeyRange.bound([a.userId,Mc],[a.userId,a.lastAcknowledgedBatchId]);return r.H(Vf,l).next((f=>Ie.forEach(f,(m=>{Ot(m.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const p=Lf(this.serializer,m);return C9(e,a.userId,p).next((()=>{}))}))))}))))}yi(e){const n=e.store(Hh),r=e.store(Pf);return e.store(Wf).get(Yy).next((i=>{const a=[];return r.ee(((l,f)=>{const m=new Sn(l),p=(function(_){return[0,ns(_)]})(m);a.push(n.get(p).next((b=>b?Ie.resolve():(_=>n.put({targetId:0,path:ns(_),sequenceNumber:i.highestListenSequenceNumber}))(m))))})).next((()=>Ie.waitFor(a)))}))}wi(e,n){e.createObjectStore(yp,{keyPath:k$});const r=n.store(yp),i=new lT,a=l=>{if(i.add(l)){const f=l.lastSegment(),m=l.popLast();return r.put({collectionId:f,parent:ns(m)})}};return n.store(Pf).ee({Y:!0},((l,f)=>{const m=new Sn(l);return a(m.popLast())})).next((()=>n.store(qh).ee({Y:!0},(([l,f,m],p)=>{const b=xl(f);return a(b.popLast())}))))}bi(e){const n=e.store(Gh);return n.ee(((r,i)=>{const a=Wg(i),l=A9(this.serializer,a);return n.put(l)}))}Si(e,n){const r=n.store(Pf),i=[];return r.ee(((a,l)=>{const f=n.store($y),m=(function(_){return _.document?new ht(Sn.fromString(_.document.name).popFirst(5)):_.noDocument?ht.fromSegments(_.noDocument.path):_.unknownDocument?ht.fromSegments(_.unknownDocument.path):bt(36783)})(l).path.toArray(),p={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(p))})).next((()=>Ie.waitFor(i)))}Di(e,n){const r=n.store(Fo),i=M9(this.serializer),a=new cT(Lx.Vi,this.serializer.yt);return r.H().next((l=>{const f=new Map;return l.forEach((m=>{let p=f.get(m.userId)??on();Lf(this.serializer,m).keys().forEach((b=>p=p.add(b))),f.set(m.userId,p)})),Ie.forEach(f,((m,p)=>{const b=new ma(p),_=Mx.wt(this.serializer,b),T=a.getIndexManager(b),N=jx.wt(b,this.serializer,T,a.referenceDelegate);return new j9(i,N,_,T).recalculateAndSaveOverlaysForDocumentKeys(new YE(n,Rs.ce),m).next()}))}))}}function VR(t){t.createObjectStore(Hh,{keyPath:R$}).createIndex(HS,D$,{unique:!0}),t.createObjectStore(Gh,{keyPath:"targetId"}).createIndex(pj,P$,{unique:!0}),t.createObjectStore(Wf)}const gc="IndexedDbPersistence",G_=18e5,H_=5e3,K_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",L9="main";class fT{constructor(e,n,r,i,a,l,f,m,p,b,_=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ci=a,this.window=l,this.document=f,this.Fi=p,this.Mi=b,this.xi=_,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=T=>Promise.resolve(),!fT.v())throw new We(De.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nX(this,i),this.Ki=n+L9,this.serializer=new E9(m),this.qi=new El(this.Ki,this.xi,new mX(this.serializer)),this.ci=new HY,this.li=new JY(this.referenceDelegate,this.serializer),this.remoteDocumentCache=M9(this.serializer),this.Pi=new GY,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,b===!1&&Si(gc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new We(De.FAILED_PRECONDITION,K_);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new Rs(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>G1(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((n=>{n||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((n=>this.isPrimary&&!n?this.Ji(e).next((()=>!1)):!!n&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(nf(e))return nt(gc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return nt(gc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Og(e).get(oh).next((n=>Ie.resolve(this.Xi(n))))}Yi(e){return G1(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,G_)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Qi(n,Kh);return r.H().next((i=>{const a=this.ns(i,G_),l=i.filter((f=>a.indexOf(f)===-1));return Ie.forEach(l,(f=>r.delete(f.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ui)for(const n of e)this.Ui.removeItem(this.rs(n.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?Ie.resolve(!0):Og(e).get(oh).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,H_)&&!this.ss(n.ownerId)){if(this.Xi(n)&&this.networkEnabled)return!0;if(!this.Xi(n)){if(!n.allowTabSynchronization)throw new We(De.FAILED_PRECONDITION,K_);return!1}}return!(!this.networkEnabled||!this.inForeground)||G1(e).H().next((r=>this.ns(r,H_).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(a||l&&f)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&nt(gc,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Qp,Kh],(e=>{const n=new YE(e,Rs.ce);return this.Ji(n).next((()=>this.Yi(n)))})),this.qi.close(),this.ls()}ns(e,n){return e.filter((r=>this.ts(r.updateTimeMs,n)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>G1(e).H().next((n=>this.ns(n,G_).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,n){return jx.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ZY(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Mx.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,n,r){nt(gc,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(function(m){return m===18?X$:m===17?Ej:m===16?Y$:m===15?$S:m===14?_j:m===13?wj:m===12?$$:m===11?bj:void bt(60245)})(this.xi);let l;return this.qi.runTransaction(e,i,a,(f=>(l=new YE(f,this.ai?this.ai.next():Rs.ce),n==="readwrite-primary"?this.ji(l).next((m=>!!m||this.Hi(l))).next((m=>{if(!m)throw Si(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new We(De.FAILED_PRECONDITION,cj);return r(l)})).next((m=>this.Zi(l).next((()=>m)))):this.Ps(l).next((()=>r(l)))))).then((f=>(l.raiseOnCommittedEvent(),f)))}Ps(e){return Og(e).get(oh).next((n=>{if(n!==null&&this.ts(n.leaseTimestampMs,H_)&&!this.ss(n.ownerId)&&!this.Xi(n)&&!(this.Mi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new We(De.FAILED_PRECONDITION,K_)}))}Zi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Og(e).put(oh,n)}static v(){return El.v()}Ji(e){const n=Og(e);return n.get(oh).next((r=>this.Xi(r)?(nt(gc,"Releasing primary lease."),n.delete(oh)):Ie.resolve()))}ts(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Si(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;V5()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const n=this.Ui?.getItem(this.rs(e))!==null;return nt(gc,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Si(gc,"Failed to get zombied client id.",n),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Si("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Og(t){return Qi(t,Qp)}function G1(t){return Qi(t,Kh)}function dT(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class hT{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=on(),i=on();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new hT(e,n.fromCache,r,i)}}class gX{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class B9{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return V5()?8:dj($i())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.gs(e,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ps(e,n,i,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new gX;return this.ys(e,n,l).next((f=>{if(a.result=f,this.As)return this.ws(e,n,l,f.size)}))})).next((()=>a.result))}ws(e,n,r,i){return r.documentReadCount<this.Vs?(vh()<=Dn.DEBUG&&nt("QueryEngine","SDK will not create cache indexes for query:",xh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ie.resolve()):(vh()<=Dn.DEBUG&&nt("QueryEngine","Query:",xh(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(vh()<=Dn.DEBUG&&nt("QueryEngine","The SDK decides to create cache indexes for query:",xh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rs(n))):Ie.resolve())}gs(e,n){if(cR(n))return Ie.resolve(null);let r=rs(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Zy(n,null,"F"),r=rs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=on(...a);return this.fs.getDocuments(e,l).next((f=>this.indexManager.getMinOffset(e,r).next((m=>{const p=this.bs(n,f);return this.Ss(n,p,l,m.readTime)?this.gs(e,Zy(n,null,"F")):this.Ds(e,p,n,m)}))))})))))}ps(e,n,r,i){return cR(n)||i.isEqual(jt.min())?Ie.resolve(null):this.fs.getDocuments(e,r).next((a=>{const l=this.bs(n,a);return this.Ss(n,l,r,i)?Ie.resolve(null):(vh()<=Dn.DEBUG&&nt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xh(n)),this.Ds(e,l,n,lj(i,Vh)).next((f=>f)))}))}bs(e,n){let r=new dr(Wj(e));return n.forEach(((i,a)=>{e0(e,a)&&(r=r.add(a))})),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ys(e,n,r){return vh()<=Dn.DEBUG&&nt("QueryEngine","Using full collection scan to execute query:",xh(n)),this.fs.getDocumentsMatchingQuery(e,n,ao.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}const mT="LocalStore",pX=3e8;class yX{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new jr(Ht),this.Fs=new ku((a=>ed(a)),Zp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j9(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function F9(t,e,n,r){return new yX(t,e,n,r)}async function V9(t,e){const n=mt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],f=[];let m=on();for(const p of i){l.push(p.batchId);for(const b of p.mutations)m=m.add(b.key)}for(const p of a){f.push(p.batchId);for(const b of p.mutations)m=m.add(b.key)}return n.localDocuments.getDocuments(r,m).next((p=>({Ns:p,removedBatchIds:l,addedBatchIds:f})))}))}))}function vX(t,e){const n=mt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,p,b){const _=p.batch,T=_.keys();let N=Ie.resolve();return T.forEach((j=>{N=N.next((()=>b.getEntry(m,j))).next((M=>{const L=p.docVersions.get(j);Ot(L!==null,48541),M.version.compareTo(L)<0&&(_.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),b.addEntry(M)))}))})),N.next((()=>f.mutationQueue.removeMutationBatch(m,_)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let m=on();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(m=m.add(f.batch.mutations[p].key));return m})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function z9(t){const e=mt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function xX(t,e){const n=mt(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const f=[];e.targetChanges.forEach(((b,_)=>{const T=i.get(_);if(!T)return;f.push(n.li.removeMatchingKeys(a,b.removedDocuments,_).next((()=>n.li.addMatchingKeys(a,b.addedDocuments,_))));let N=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(_)!==null?N=N.withResumeToken(oi.EMPTY_BYTE_STRING,jt.min()).withLastLimboFreeSnapshotVersion(jt.min()):b.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(b.resumeToken,r)),i=i.insert(_,N),(function(M,L,z){return M.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=pX?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(T,N,b)&&f.push(n.li.updateTargetData(a,N))}));let m=ks(),p=on();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(a,b))})),f.push(U9(a,l,e.documentUpdates).next((b=>{m=b.Bs,p=b.Ls}))),!r.isEqual(jt.min())){const b=n.li.getLastRemoteSnapshotVersion(a).next((_=>n.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));f.push(b)}return Ie.waitFor(f).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,m,p))).next((()=>m))})).then((a=>(n.vs=i,a)))}function U9(t,e,n){let r=on(),i=on();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let l=ks();return n.forEach(((f,m)=>{const p=a.get(f);m.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(jt.min())?(e.removeEntry(f,m.readTime),l=l.insert(f,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),l=l.insert(f,m)):nt(mT,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",m.version)})),{Bs:l,Ls:i}}))}function bX(t,e){const n=mt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Mc),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Jh(t,e){const n=mt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.li.getTargetData(r,e).next((a=>a?(i=a,Ie.resolve(i)):n.li.allocateTargetId(r).next((l=>(i=new lu(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function em(t,e,n){const r=mt(t),i=r.vs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!nf(l))throw l;nt(mT,`Failed to update sequence numbers for target ${e}: ${l}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function rv(t,e,n){const r=mt(t);let i=jt.min(),a=on();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(m,p,b){const _=mt(m),T=_.Fs.get(b);return T!==void 0?Ie.resolve(_.vs.get(T)):_.li.getTargetData(p,b)})(r,l,rs(e)).next((f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(l,f.targetId).next((m=>{a=m}))})).next((()=>r.Cs.getDocumentsMatchingQuery(l,e,n?i:jt.min(),n?a:on()))).next((f=>(H9(r,Kj(e),f),{documents:f,ks:a})))))}function q9(t,e){const n=mt(t),r=mt(n.li),i=n.vs.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,e).next((l=>l?l.target:null))))}function G9(t,e){const n=mt(t),r=n.Ms.get(e)||jt.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.xs.getAllFromCollectionGroup(i,e,lj(r,Vh),Number.MAX_SAFE_INTEGER))).then((i=>(H9(n,e,i),i)))}function H9(t,e,n){let r=t.Ms.get(e)||jt.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Ms.set(e,r)}async function wX(t,e,n,r){const i=mt(t);let a=on(),l=ks();for(const p of n){const b=e.Ks(p.metadata.name);p.document&&(a=a.add(b));const _=e.qs(p);_.setReadTime(e.Us(p.metadata.readTime)),l=l.insert(b,_)}const f=i.xs.newChangeBuffer({trackRemovals:!0}),m=await Jh(i,(function(b){return rs(wm(Sn.fromString(`__bundle__/docs/${b}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(p=>U9(p,f,l).next((b=>(f.apply(p),b))).next((b=>i.li.removeMatchingKeysForTargetId(p,m.targetId).next((()=>i.li.addMatchingKeys(p,a,m.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(p,b.Bs,b.Ls))).next((()=>b.Bs))))))}async function _X(t,e,n=on()){const r=await Jh(t,rs(kx(e.bundledQuery))),i=mt(t);return i.persistence.runTransaction("Save named query","readwrite",(a=>{const l=Ci(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Pi.saveNamedQuery(a,e);const f=r.withResumeToken(oi.EMPTY_BYTE_STRING,l);return i.vs=i.vs.insert(f.targetId,f),i.li.updateTargetData(a,f).next((()=>i.li.removeMatchingKeysForTargetId(a,r.targetId))).next((()=>i.li.addMatchingKeys(a,n,r.targetId))).next((()=>i.Pi.saveNamedQuery(a,e)))}))}const K9="firestore_clients";function zR(t,e){return`${K9}_${t}_${e}`}const W9="firestore_mutations";function UR(t,e,n){let r=`${W9}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const $9="firestore_targets";function W_(t,e){return`${$9}_${t}_${e}`}const gl="SharedClientState";class iv{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static $s(e,n,r){const i=JSON.parse(r);let a,l=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new We(i.error.code,i.error.message))),l?new iv(e,n,i.state,a):(Si(gl,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sp{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static $s(e,n){const r=JSON.parse(n);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new We(r.error.code,r.error.message))),a?new sp(e,r.state,i):(Si(gl,`Failed to parse target state for ID '${e}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class av{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static $s(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=JS();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=hj(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new av(e,a):(Si(gl,`Failed to parse client data for instance '${e}': ${n}`),null)}}class gT{constructor(e,n){this.clientId=e,this.onlineState=n}static $s(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new gT(n.clientId,n.onlineState):(Si(gl,`Failed to parse online state: ${e}`),null)}}class cA{constructor(){this.activeTargetIds=JS()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $_{constructor(e,n,r,i,a){this.window=e,this.Ci=n,this.persistenceKey=r,this.zs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new jr(Ht),this.started=!1,this.Zs=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Xs=zR(this.persistenceKey,this.zs),this.Ys=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new cA),this.eo=new RegExp(`^${K9}_${l}_([^_]*)$`),this.no=new RegExp(`^${W9}_${l}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${$9}_${l}_(\\d+)$`),this.io=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this.so=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const i=this.getItem(zR(this.persistenceKey,r));if(i){const a=av.$s(r,i);a&&(this.Js=this.Js.insert(a.clientId,a))}}this.oo();const n=this.storage.getItem(this.io);if(n){const r=this._o(n);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let n=!1;return this.Js.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,n,r){this.co(e,n,r),this.lo(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(W_(this.persistenceKey,e));if(i){const a=sp.$s(e,i);a&&(r=a.state)}}return n&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(W_(this.persistenceKey,e))}updateQueryState(e,n,r){this.Po(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.lo(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return nt(gl,"READ",e,n),n}setItem(e,n){nt(gl,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){nt(gl,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const n=e;if(n.storageArea===this.storage){if(nt(gl,"EVENT",n.key,n.newValue),n.key===this.Xs)return void Si("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.eo.test(n.key)){if(n.newValue==null){const r=this.Eo(n.key);return this.Ro(r,null)}{const r=this.Ao(n.key,n.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(n.key)){if(n.newValue!==null){const r=this.Vo(n.key,n.newValue);if(r)return this.mo(r)}}else if(this.ro.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(n.key===this.io){if(n.newValue!==null){const r=this._o(n.newValue);if(r)return this.ao(r)}}else if(n.key===this.Ys){const r=(function(a){let l=Rs.ce;if(a!=null)try{const f=JSON.parse(a);Ot(typeof f=="number",30636,{yo:a}),l=f}catch(f){Si(gl,"Failed to read sequence number from WebStorage",f)}return l})(n.newValue);r!==Rs.ce&&this.sequenceNumberHandler(r)}else if(n.key===this.so){const r=this.wo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.bo(i))))}}}else this.Zs.push(n)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,n,r){const i=new iv(this.currentUser,e,n,r),a=UR(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Ws())}lo(e){const n=UR(this.persistenceKey,this.currentUser,e);this.removeItem(n)}To(e){const n={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(n))}Po(e,n,r){const i=W_(this.persistenceKey,e),a=new sp(e,n,r);this.setItem(i,a.Ws())}Io(e){const n=JSON.stringify(Array.from(e));this.setItem(this.so,n)}Eo(e){const n=this.eo.exec(e);return n?n[1]:null}Ao(e,n){const r=this.Eo(e);return av.$s(r,n)}Vo(e,n){const r=this.no.exec(e),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return iv.$s(new ma(a),i,n)}fo(e,n){const r=this.ro.exec(e),i=Number(r[1]);return sp.$s(i,n)}_o(e){return gT.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);nt(gl,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,n){const r=n?this.Js.insert(e,n):this.Js.remove(e),i=this.uo(this.Js),a=this.uo(r),l=[],f=[];return a.forEach((m=>{i.has(m)||l.push(m)})),i.forEach((m=>{a.has(m)||f.push(m)})),this.syncEngine.Co(l,f).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let n=JS();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class Y9{constructor(){this.vo=new cA,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new cA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class EX{Mo(e){}shutdown(){}}const qR="ConnectivityMonitor";class GR{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){nt(qR,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){nt(qR,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let H1=null;function fA(){return H1===null?H1=(function(){return 268435456+Math.round(2147483648*Math.random())})():H1++,"0x"+H1.toString(16)}const Y_="RestConnection",AX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class SX{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===xp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const l=fA(),f=this.Qo(e,n.toUriEncodedString());nt(Y_,`Sending RPC '${e}' ${l}:`,f,r);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,i,a);const{host:p}=new URL(f),b=wd(p);return this.zo(e,f,m,r,b).then((_=>(nt(Y_,`Received RPC '${e}' ${l}: `,_),_)),(_=>{throw Fs(Y_,`RPC '${e}' ${l} failed with error: `,_,"url: ",f,"request:",r),_}))}jo(e,n,r,i,a,l){return this.Wo(e,n,r,i,a)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bm})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}Qo(e,n){const r=AX[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class TX{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Za="WebChannelConnection",Ng=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Oh extends SX{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Oh.c_){const e=J5();Ng(e,Z5.STAT_EVENT,(n=>{n.stat===zE.PROXY?nt(Za,"STAT_EVENT: detected buffering proxy"):n.stat===zE.NOPROXY&&nt(Za,"STAT_EVENT: detected no buffering proxy")})),Oh.c_=!0}}zo(e,n,r,i,a){const l=fA();return new Promise(((f,m)=>{const p=new X5;p.setWithCredentials(!0),p.listenOnce(Q5.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case py.NO_ERROR:const _=p.getResponseJson();nt(Za,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),f(_);break;case py.TIMEOUT:nt(Za,`RPC '${e}' ${l} timed out`),m(new We(De.DEADLINE_EXCEEDED,"Request time out"));break;case py.HTTP_ERROR:const T=p.getStatus();if(nt(Za,`RPC '${e}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let N=p.getResponseJson();Array.isArray(N)&&(N=N[0]);const j=N?.error;if(j&&j.status&&j.message){const M=(function(z){const $=z.toLowerCase().replace(/_/g,"-");return Object.values(De).indexOf($)>=0?$:De.UNKNOWN})(j.status);m(new We(M,j.message))}else m(new We(De.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new We(De.UNAVAILABLE,"Connection failed."));break;default:bt(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{nt(Za,`RPC '${e}' ${l} completed.`)}}));const b=JSON.stringify(i);nt(Za,`RPC '${e}' ${l} sending request:`,i),p.send(n,"POST",b,r,15)}))}T_(e,n,r){const i=fA(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const p=a.join("");nt(Za,`Creating RPC '${e}' stream ${i}: ${p}`,f);const b=l.createWebChannel(p,f);this.I_(b);let _=!1,T=!1;const N=new TX({Ho:j=>{T?nt(Za,`Not sending because RPC '${e}' stream ${i} is closed:`,j):(_||(nt(Za,`Opening RPC '${e}' stream ${i} transport.`),b.open(),_=!0),nt(Za,`RPC '${e}' stream ${i} sending:`,j),b.send(j))},Jo:()=>b.close()});return Ng(b,Gg.EventType.OPEN,(()=>{T||(nt(Za,`RPC '${e}' stream ${i} transport opened.`),N.i_())})),Ng(b,Gg.EventType.CLOSE,(()=>{T||(T=!0,nt(Za,`RPC '${e}' stream ${i} transport closed`),N.o_(),this.E_(b))})),Ng(b,Gg.EventType.ERROR,(j=>{T||(T=!0,Fs(Za,`RPC '${e}' stream ${i} transport errored. Name:`,j.name,"Message:",j.message),N.o_(new We(De.UNAVAILABLE,"The operation could not be completed")))})),Ng(b,Gg.EventType.MESSAGE,(j=>{if(!T){const M=j.data[0];Ot(!!M,16349);const L=M,z=L?.error||L[0]?.error;if(z){nt(Za,`RPC '${e}' stream ${i} received error:`,z);const $=z.status;let K=(function(Z){const V=Fi[Z];if(V!==void 0)return o9(V)})($),ee=z.message;$==="NOT_FOUND"&&ee.includes("database")&&ee.includes("does not exist")&&ee.includes(this.databaseId.database)&&Fs(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),K===void 0&&(K=De.INTERNAL,ee="Unknown error status: "+$+" with message "+z.message),T=!0,N.o_(new We(K,ee)),b.close()}else nt(Za,`RPC '${e}' stream ${i} received:`,M),N.__(M)}})),Oh.u_(),setTimeout((()=>{N.s_()}),0),N}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return ej()}}function IX(t){return new Oh(t)}function X9(){return typeof window<"u"?window:null}function Sy(){return typeof document<"u"?document:null}function Ed(t){return new DY(t,!0)}Oh.c_=!1;class pT{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&nt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const HR="PersistentStream";class Q9{constructor(e,n,r,i,a,l,f,m){this.Ci=e,this.b_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new pT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===De.RESOURCE_EXHAUSTED?(Si(n.toString()),Si("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===De.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new We(De.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return nt(HR,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(nt(HR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class CX extends Q9{constructor(e,n,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=jY(this.serializer,e),r=(function(a){if(!("targetChange"in a))return jt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?jt.min():l.readTime?Ci(l.readTime):jt.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=aA(this.serializer),n.addTarget=(function(a,l){let f;const m=l.target;if(f=Xy(m)?{documents:p9(a,m)}:{query:Dx(a,m).ft},f.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){f.resumeToken=f9(a,l.resumeToken);const p=rA(a,l.expectedCount);p!==null&&(f.expectedCount=p)}else if(l.snapshotVersion.compareTo(jt.min())>0){f.readTime=Zh(a,l.snapshotVersion.toTimestamp());const p=rA(a,l.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const r=BY(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=aA(this.serializer),n.removeTarget=e,this.K_(n)}}class OX extends Q9{constructor(e,n,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=LY(e.writeResults,e.commitTime),r=Ci(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=aA(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Ap(this.serializer,r)))};this.K_(n)}}class NX{}class PX extends NX{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new We(De.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,iA(n,r),i,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===De.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new We(De.UNKNOWN,a.toString())}))}jo(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,f])=>this.connection.jo(e,iA(n,r),i,l,f,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===De.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new We(De.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function RX(t,e,n,r){return new PX(t,e,n,r)}class DX{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Si(n),this.aa=!1):nt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const sd="RemoteStore";class kX{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((l=>{r.enqueueAndForget((async()=>{af(this)&&(nt(sd,"Restarting streams for network reachability change."),await(async function(m){const p=mt(m);p.Ea.add(4),await Am(p),p.Va.set("Unknown"),p.Ea.delete(4),await i0(p)})(this))}))})),this.Va=new DX(r,i)}}async function i0(t){if(af(t))for(const e of t.Ra)await e(!0)}async function Am(t){for(const e of t.Ra)await e(!1)}function Bx(t,e){const n=mt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),xT(n)?vT(n):Tm(n).O_()&&yT(n,e))}function tm(t,e){const n=mt(t),r=Tm(n);n.Ia.delete(e),r.O_()&&Z9(n,e),n.Ia.size===0&&(r.O_()?r.L_():af(n)&&n.Va.set("Unknown"))}function yT(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(jt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Tm(t).Z_(e)}function Z9(t,e){t.da.$e(e),Tm(t).X_(e)}function vT(t){t.da=new OY({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Tm(t).start(),t.Va.ua()}function xT(t){return af(t)&&!Tm(t).x_()&&t.Ia.size>0}function af(t){return mt(t).Ea.size===0}function J9(t){t.da=void 0}async function MX(t){t.Va.set("Online")}async function jX(t){t.Ia.forEach(((e,n)=>{yT(t,e)}))}async function LX(t,e){J9(t),xT(t)?(t.Va.ha(e),vT(t)):t.Va.set("Unknown")}async function BX(t,e,n){if(t.Va.set("Online"),e instanceof c9&&e.state===2&&e.cause)try{await(async function(i,a){const l=a.cause;for(const f of a.targetIds)i.Ia.has(f)&&(await i.remoteSyncer.rejectListen(f,l),i.Ia.delete(f),i.da.removeTarget(f))})(t,e)}catch(r){nt(sd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await sv(t,r)}else if(e instanceof Ey?t.da.Xe(e):e instanceof u9?t.da.st(e):t.da.tt(e),!n.isEqual(jt.min()))try{const r=await z9(t.localStore);n.compareTo(r)>=0&&await(function(a,l){const f=a.da.Tt(l);return f.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const b=a.Ia.get(p);b&&a.Ia.set(p,b.withResumeToken(m.resumeToken,l))}})),f.targetMismatches.forEach(((m,p)=>{const b=a.Ia.get(m);if(!b)return;a.Ia.set(m,b.withResumeToken(oi.EMPTY_BYTE_STRING,b.snapshotVersion)),Z9(a,m);const _=new lu(b.target,m,p,b.sequenceNumber);yT(a,_)})),a.remoteSyncer.applyRemoteEvent(f)})(t,n)}catch(r){nt(sd,"Failed to raise snapshot:",r),await sv(t,r)}}async function sv(t,e,n){if(!nf(e))throw e;t.Ea.add(1),await Am(t),t.Va.set("Offline"),n||(n=()=>z9(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{nt(sd,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await i0(t)}))}function e7(t,e){return e().catch((n=>sv(t,n,e)))}async function Sm(t){const e=mt(t),n=Kc(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Mc;for(;FX(e);)try{const i=await bX(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,VX(e,i)}catch(i){await sv(e,i)}t7(e)&&n7(e)}function FX(t){return af(t)&&t.Ta.length<10}function VX(t,e){t.Ta.push(e);const n=Kc(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function t7(t){return af(t)&&!Kc(t).x_()&&t.Ta.length>0}function n7(t){Kc(t).start()}async function zX(t){Kc(t).ra()}async function UX(t){const e=Kc(t);for(const n of t.Ta)e.ea(n.mutations)}async function qX(t,e,n){const r=t.Ta.shift(),i=rT.from(r,e,n);await e7(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Sm(t)}async function GX(t,e){e&&Kc(t).Y_&&await(async function(r,i){if((function(l){return s9(l)&&l!==De.ABORTED})(i.code)){const a=r.Ta.shift();Kc(r).B_(),await e7(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Sm(r)}})(t,e),t7(t)&&n7(t)}async function KR(t,e){const n=mt(t);n.asyncQueue.verifyOperationInProgress(),nt(sd,"RemoteStore received new credentials");const r=af(n);n.Ea.add(3),await Am(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await i0(n)}async function dA(t,e){const n=mt(t);e?(n.Ea.delete(2),await i0(n)):e||(n.Ea.add(2),await Am(n),n.Va.set("Unknown"))}function Tm(t){return t.ma||(t.ma=(function(n,r,i){const a=mt(n);return a.sa(),new CX(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:MX.bind(null,t),Yo:jX.bind(null,t),t_:LX.bind(null,t),J_:BX.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),xT(t)?vT(t):t.Va.set("Unknown")):(await t.ma.stop(),J9(t))}))),t.ma}function Kc(t){return t.fa||(t.fa=(function(n,r,i){const a=mt(n);return a.sa(),new OX(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:zX.bind(null,t),t_:GX.bind(null,t),ta:UX.bind(null,t),na:qX.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Sm(t)):(await t.fa.stop(),t.Ta.length>0&&(nt(sd,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class bT{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ya,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const l=Date.now()+r,f=new bT(e,n,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new We(De.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Im(t,e){if(Si("AsyncQueue",`${e}: ${t}`),nf(t))return new We(De.UNAVAILABLE,`${e}: ${t}`);throw t}class $f{static emptySet(e){return new $f(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ht.comparator(n.key,r.key):(n,r)=>ht.comparator(n.key,r.key),this.keyedMap=Hg(),this.sortedSet=new jr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $f)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $f;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class WR{constructor(){this.ga=new jr(ht.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):bt(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class od{constructor(e,n,r,i,a,l,f,m,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,i,a){const l=[];return n.forEach((f=>{l.push({type:0,doc:f})})),new od(e,n,$f.emptySet(n),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class HX{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class KX{constructor(){this.queries=$R(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=mt(n),a=i.queries;i.queries=$R(),a.forEach(((l,f)=>{for(const m of f.ba)m.onError(r)}))})(this,new We(De.ABORTED,"Firestore shutting down"))}}function $R(){return new ku((t=>Hj(t)),Jp)}async function wT(t,e){const n=mt(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.Da()&&(r=2):(a=new HX,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(l){const f=Im(l,`Initialization of query '${xh(e.query)}' failed`);return void e.onError(f)}n.queries.set(i,a),a.ba.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&ET(n)}async function _T(t,e){const n=mt(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const l=a.ba.indexOf(e);l>=0&&(a.ba.splice(l,1),a.ba.length===0?i=e.Da()?0:1:!a.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function WX(t,e){const n=mt(t);let r=!1;for(const i of e){const a=i.query,l=n.queries.get(a);if(l){for(const f of l.ba)f.Fa(i)&&(r=!0);l.wa=i}}r&&ET(n)}function $X(t,e,n){const r=mt(t),i=r.queries.get(e);if(i)for(const a of i.ba)a.onError(n);r.queries.delete(e)}function ET(t){t.Ca.forEach((e=>{e.next()}))}var hA,YR;(YR=hA||(hA={})).Ma="default",YR.Cache="cache";class AT{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new od(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=od.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==hA.Cache}}class r7{constructor(e,n){this.qa=e,this.byteLength=n}Ua(){return"metadata"in this.qa}}class XR{constructor(e){this.serializer=e}Ks(e){return Al(this.serializer,e)}qs(e){return e.metadata.exists?Rx(this.serializer,e.document,!1):Ur.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Ci(e)}}class ST{constructor(e,n){this.$a=e,this.serializer=n,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=i7(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++n;const r=Sn.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new XR(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.Ks(i.metadata.name);for(const l of i.metadata.queries){const f=(n.get(l)||on()).add(a);n.set(l,f)}}return n}async ja(e){const n=await wX(e,new XR(this.serializer),this.Qa,this.$a.id),r=this.za(this.documents);for(const i of this.Wa)await _X(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:n}}}function i7(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class a7{constructor(e){this.key=e}}class s7{constructor(e){this.key=e}}class o7{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=on(),this.mutatedKeys=on(),this.eu=Wj(e),this.tu=new $f(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new WR,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,l=i,f=!1;const m=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((b,_)=>{const T=i.get(b),N=e0(this.query,_)?_:null,j=!!T&&this.mutatedKeys.has(T.key),M=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let L=!1;T&&N?T.data.isEqual(N.data)?j!==M&&(r.track({type:3,doc:N}),L=!0):this.su(T,N)||(r.track({type:2,doc:N}),L=!0,(m&&this.eu(N,m)>0||p&&this.eu(N,p)<0)&&(f=!0)):!T&&N?(r.track({type:0,doc:N}),L=!0):T&&!N&&(r.track({type:1,doc:T}),L=!0,(m||p)&&(f=!0)),L&&(N?(l=l.add(N),a=M?a.add(b):a.delete(b)):(l=l.delete(b),a=a.delete(b)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const b=this.query.limitType==="F"?l.last():l.first();l=l.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{tu:l,iu:r,Ss:f,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((b,_)=>(function(N,j){const M=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt(20277,{Vt:L})}};return M(N)-M(j)})(b.type,_.type)||this.eu(b.doc,_.doc))),this.ou(r),i=i??!1;const f=n&&!i?this._u():[],m=this.Ya.size===0&&this.current&&!i?1:0,p=m!==this.Xa;return this.Xa=m,l.length!==0||p?{snapshot:new od(this.query,e.tu,a,l,e.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new WR,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=on(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new s7(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new a7(r))})),n}cu(e){this.Za=e.ks,this.Ya=on();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return od.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const sf="SyncEngine";class YX{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class XX{constructor(e){this.key=e,this.hu=!1}}class QX{constructor(e,n,r,i,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new ku((f=>Hj(f)),Jp),this.Iu=new Map,this.Eu=new Set,this.Ru=new jr(ht.comparator),this.Au=new Map,this.Vu=new uT,this.du={},this.mu=new Map,this.fu=ad.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ZX(t,e,n=!0){const r=Fx(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await l7(r,e,n,!0),i}async function JX(t,e){const n=Fx(t);await l7(n,e,!0,!1)}async function l7(t,e,n,r){const i=await Jh(t.localStore,rs(e)),a=i.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let f;return r&&(f=await TT(t,e,a,l==="current",i.resumeToken)),t.isPrimaryClient&&n&&Bx(t.remoteStore,i),f}async function TT(t,e,n,r,i){t.pu=(_,T,N)=>(async function(M,L,z,$){let K=L.view.ru(z);K.Ss&&(K=await rv(M.localStore,L.query,!1).then((({documents:V})=>L.view.ru(V,K))));const ee=$&&$.targetChanges.get(L.targetId),ue=$&&$.targetMismatches.get(L.targetId)!=null,Z=L.view.applyChanges(K,M.isPrimaryClient,ee,ue);return mA(M,L.targetId,Z.au),Z.snapshot})(t,_,T,N);const a=await rv(t.localStore,e,!0),l=new o7(e,a.ks),f=l.ru(a.documents),m=r0.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),p=l.applyChanges(f,t.isPrimaryClient,m);mA(t,n,p.au);const b=new YX(e,n,l);return t.Tu.set(e,b),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function eQ(t,e,n){const r=mt(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((l=>!Jp(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await em(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&tm(r.remoteStore,i.targetId),nm(r,i.targetId)})).catch(tf)):(nm(r,i.targetId),await em(r.localStore,i.targetId,!0))}async function tQ(t,e){const n=mt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tm(n.remoteStore,r.targetId))}async function nQ(t,e,n){const r=NT(t);try{const i=await(function(l,f){const m=mt(l),p=nr.now(),b=f.reduce(((N,j)=>N.add(j.key)),on());let _,T;return m.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let j=ks(),M=on();return m.xs.getEntries(N,b).next((L=>{j=L,j.forEach(((z,$)=>{$.isValidDocument()||(M=M.add(z))}))})).next((()=>m.localDocuments.getOverlayedDocuments(N,j))).next((L=>{_=L;const z=[];for(const $ of f){const K=SY($,_.get($.key).overlayedDocument);K!=null&&z.push(new Mu($.key,K,kj(K.value.mapValue),ei.exists(!0)))}return m.mutationQueue.addMutationBatch(N,p,z,f)})).next((L=>{T=L;const z=L.applyToLocalDocumentSet(_,M);return m.documentOverlayCache.saveOverlays(N,L.batchId,z)}))})).then((()=>({batchId:T.batchId,changes:Yj(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,f,m){let p=l.du[l.currentUser.toKey()];p||(p=new jr(Ht)),p=p.insert(f,m),l.du[l.currentUser.toKey()]=p})(r,i.batchId,n),await ju(r,i.changes),await Sm(r.remoteStore)}catch(i){const a=Im(i,"Failed to persist write");n.reject(a)}}async function u7(t,e){const n=mt(t);try{const r=await xX(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const l=n.Au.get(a);l&&(Ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?Ot(l.hu,14607):i.removedDocuments.size>0&&(Ot(l.hu,42227),l.hu=!1))})),await ju(n,r,e)}catch(r){await tf(r)}}function QR(t,e,n){const r=mt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,l)=>{const f=l.view.va(e);f.snapshot&&i.push(f.snapshot)})),(function(l,f){const m=mt(l);m.onlineState=f;let p=!1;m.queries.forEach(((b,_)=>{for(const T of _.ba)T.va(f)&&(p=!0)})),p&&ET(m)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function rQ(t,e,n){const r=mt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let l=new jr(ht.comparator);l=l.insert(a,Ur.newNoDocument(a,jt.min()));const f=on().add(a),m=new n0(jt.min(),new Map,new jr(Ht),l,f);await u7(r,m),r.Ru=r.Ru.remove(a),r.Au.delete(e),OT(r)}else await em(r.localStore,e,!1).then((()=>nm(r,e,n))).catch(tf)}async function iQ(t,e){const n=mt(t),r=e.batch.batchId;try{const i=await vX(n.localStore,e);CT(n,r,null),IT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ju(n,i)}catch(i){await tf(i)}}async function aQ(t,e,n){const r=mt(t);try{const i=await(function(l,f){const m=mt(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let b;return m.mutationQueue.lookupMutationBatch(p,f).next((_=>(Ot(_!==null,37113),b=_.keys(),m.mutationQueue.removeMutationBatch(p,_)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,b,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,b))).next((()=>m.localDocuments.getDocuments(p,b)))}))})(r.localStore,e);CT(r,e,n),IT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ju(r,i)}catch(i){await tf(i)}}async function sQ(t,e){const n=mt(t);af(n.remoteStore)||nt(sf,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(l){const f=mt(l);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(m=>f.mutationQueue.getHighestUnacknowledgedBatchId(m)))})(n.localStore);if(r===Mc)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=Im(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function IT(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function CT(t,e,n){const r=mt(t);let i=r.du[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function nm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||c7(t,r)}))}function c7(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(tm(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),OT(t))}function mA(t,e,n){for(const r of n)r instanceof a7?(t.Vu.addReference(r.key,e),oQ(t,r)):r instanceof s7?(nt(sf,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||c7(t,r.key)):bt(19791,{wu:r})}function oQ(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(nt(sf,"New document in limbo: "+n),t.Eu.add(r),OT(t))}function OT(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ht(Sn.fromString(e)),r=t.fu.next();t.Au.set(r,new XX(n)),t.Ru=t.Ru.insert(n,r),Bx(t.remoteStore,new lu(rs(wm(n.path)),r,"TargetPurposeLimboResolution",Rs.ce))}}async function ju(t,e,n){const r=mt(t),i=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((f,m)=>{l.push(r.pu(m,e,n).then((p=>{if((p||n)&&r.isPrimaryClient){const b=p?!p.fromCache:n?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,b?"current":"not-current")}if(p){i.push(p);const b=hT.Es(m.targetId,p);a.push(b)}})))})),await Promise.all(l),r.Pu.J_(i),await(async function(m,p){const b=mt(m);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>Ie.forEach(p,(T=>Ie.forEach(T.Ts,(N=>b.persistence.referenceDelegate.addReference(_,T.targetId,N))).next((()=>Ie.forEach(T.Is,(N=>b.persistence.referenceDelegate.removeReference(_,T.targetId,N)))))))))}catch(_){if(!nf(_))throw _;nt(mT,"Failed to update sequence numbers: "+_)}for(const _ of p){const T=_.targetId;if(!_.fromCache){const N=b.vs.get(T),j=N.snapshotVersion,M=N.withLastLimboFreeSnapshotVersion(j);b.vs=b.vs.insert(T,M)}}})(r.localStore,a))}async function lQ(t,e){const n=mt(t);if(!n.currentUser.isEqual(e)){nt(sf,"User change. New user:",e.toKey());const r=await V9(n.localStore,e);n.currentUser=e,(function(a,l){a.mu.forEach((f=>{f.forEach((m=>{m.reject(new We(De.CANCELLED,l))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ju(n,r.Ns)}}function uQ(t,e){const n=mt(t),r=n.Au.get(e);if(r&&r.hu)return on().add(r.key);{let i=on();const a=n.Iu.get(e);if(!a)return i;for(const l of a){const f=n.Tu.get(l);i=i.unionWith(f.view.nu)}return i}}async function cQ(t,e){const n=mt(t),r=await rv(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&mA(n,e.targetId,i.au),i}async function fQ(t,e){const n=mt(t);return G9(n.localStore,e).then((r=>ju(n,r)))}async function dQ(t,e,n,r){const i=mt(t),a=await(function(f,m){const p=mt(f),b=mt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(_=>b.Xn(_,m).next((T=>T?p.localDocuments.getDocuments(_,T):Ie.resolve(null)))))})(i.localStore,e);a!==null?(n==="pending"?await Sm(i.remoteStore):n==="acknowledged"||n==="rejected"?(CT(i,e,r||null),IT(i,e),(function(f,m){mt(mt(f).mutationQueue).nr(m)})(i.localStore,e)):bt(6720,"Unknown batchState",{bu:n}),await ju(i,a)):nt(sf,"Cannot apply mutation batch with id: "+e)}async function hQ(t,e){const n=mt(t);if(Fx(n),NT(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await ZR(n,r.toArray());n.gu=!0,await dA(n.remoteStore,!0);for(const a of i)Bx(n.remoteStore,a)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((a,l)=>{n.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then((()=>(nm(n,l),em(n.localStore,l,!0)))),tm(n.remoteStore,l)})),await i,await ZR(n,r),(function(l){const f=mt(l);f.Au.forEach(((m,p)=>{tm(f.remoteStore,p)})),f.Vu.zr(),f.Au=new Map,f.Ru=new jr(ht.comparator)})(n),n.gu=!1,await dA(n.remoteStore,!1)}}async function ZR(t,e,n){const r=mt(t),i=[],a=[];for(const l of e){let f;const m=r.Iu.get(l);if(m&&m.length!==0){f=await Jh(r.localStore,rs(m[0]));for(const p of m){const b=r.Tu.get(p),_=await cQ(r,b);_.snapshot&&a.push(_.snapshot)}}else{const p=await q9(r.localStore,l);f=await Jh(r.localStore,p),await TT(r,f7(p),l,!1,f.resumeToken)}i.push(f)}return r.Pu.J_(a),i}function f7(t){return Uj(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function mQ(t){return(function(n){return mt(mt(n).persistence).hs()})(mt(t).localStore)}async function gQ(t,e,n,r){const i=mt(t);if(i.gu)return void nt(sf,"Ignoring unexpected query state notification.");const a=i.Iu.get(e);if(a&&a.length>0)switch(n){case"current":case"not-current":{const l=await G9(i.localStore,Kj(a[0])),f=n0.createSynthesizedRemoteEventForCurrentChange(e,n==="current",oi.EMPTY_BYTE_STRING);await ju(i,l,f);break}case"rejected":await em(i.localStore,e,!0),nm(i,e,r);break;default:bt(64155,n)}}async function pQ(t,e,n){const r=Fx(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){nt(sf,"Adding an already active target "+i);continue}const a=await q9(r.localStore,i),l=await Jh(r.localStore,a);await TT(r,f7(a),l.targetId,!1,l.resumeToken),Bx(r.remoteStore,l)}for(const i of n)r.Iu.has(i)&&await em(r.localStore,i,!1).then((()=>{tm(r.remoteStore,i),nm(r,i)})).catch(tf)}}function Fx(t){const e=mt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=u7.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rQ.bind(null,e),e.Pu.J_=WX.bind(null,e.eventManager),e.Pu.yu=$X.bind(null,e.eventManager),e}function NT(t){const e=mt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aQ.bind(null,e),e}function yQ(t,e,n){const r=mt(t);(async function(a,l,f){try{const m=await l.getMetadata();if(await(function(N,j){const M=mt(N),L=Ci(j.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",(z=>M.Pi.getBundleMetadata(z,j.id))).then((z=>!!z&&z.createTime.compareTo(L)>=0))})(a.localStore,m))return await l.close(),f._completeWith((function(N){return{taskState:"Success",documentsLoaded:N.totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}})(m)),Promise.resolve(new Set);f._updateProgress(i7(m));const p=new ST(m,l.serializer);let b=await l.Su();for(;b;){const T=await p.Ga(b);T&&f._updateProgress(T),b=await l.Su()}const _=await p.ja(a.localStore);return await ju(a,_.Ja,void 0),await(function(N,j){const M=mt(N);return M.persistence.runTransaction("Save bundle","readwrite",(L=>M.Pi.saveBundleMetadata(L,j)))})(a.localStore,m),f._completeWith(_.progress),Promise.resolve(_.Ha)}catch(m){return Fs(sf,`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}})(r,e,n).then((i=>{r.sharedClientState.notifyBundleLoaded(i)}))}class rm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ed(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return F9(this.persistence,new B9,e.initialUser,this.serializer)}Cu(e){return new cT(Lx.Vi,this.serializer)}Du(e){return new Y9}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rm.provider={build:()=>new rm};class PT extends rm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ot(this.persistence.referenceDelegate instanceof nv,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new R9(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?es.withCacheSize(this.cacheSizeBytes):es.DEFAULT;return new cT((r=>nv.Vi(r,n)),this.serializer)}}class RT extends rm{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await NT(this.xu.syncEngine),await Sm(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return F9(this.persistence,new B9,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new R9(r,e.asyncQueue,n)}Mu(e,n){const r=new A$(n,this.persistence);return new E$(e.asyncQueue,r)}Cu(e){const n=dT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?es.withCacheSize(this.cacheSizeBytes):es.DEFAULT;return new fT(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,X9(),Sy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Y9}}class d7 extends RT{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof $_&&(this.sharedClientState.syncEngine={So:dQ.bind(null,n),Do:gQ.bind(null,n),Co:pQ.bind(null,n),hs:mQ.bind(null,n),bo:fQ.bind(null,n)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await hQ(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=X9();if(!$_.v(n))throw new We(De.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $_(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Wc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>QR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lQ.bind(null,this.syncEngine),await dA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new KX})()}createDatastore(e){const n=Ed(e.databaseInfo.databaseId),r=IX(e.databaseInfo);return RX(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,l,f){return new kX(r,i,a,l,f)})(this.localStore,this.datastore,e.asyncQueue,(n=>QR(this.syncEngine,n,0)),(function(){return GR.v()?new GR:new EX})())}createSyncEngine(e,n){return(function(i,a,l,f,m,p,b){const _=new QX(i,a,l,f,m,p);return b&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=mt(n);nt(sd,"RemoteStore shutting down."),r.Ea.add(5),await Am(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Wc.provider={build:()=>new Wc};function JR(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Vx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Si("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}class vQ{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new ya,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.Ua()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.qu(`length string (${n}) is not valid number`);const i=await this.Uu(r);return new r7(JSON.parse(i),e.length+r)}$u(){return this.buffer.findIndex((e=>e===123))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Wu(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}class xQ{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.Su();if(!r||!r.Ua())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r?.qa)}`);this.metadata=r;do r=this.Su(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Qu(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;const e=this.Ku(),n=this.Uu(e);return new r7(JSON.parse(n),e)}Uu(e){if(this.cursor+e>this.bundleData.length)throw new We(De.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}Ku(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}let bQ=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new We(De.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(i,a){const l=mt(i),f={documents:a.map((_=>Ep(l.serializer,_)))},m=await l.jo("BatchGetDocuments",l.serializer.databaseId,Sn.emptyPath(),f,a.length),p=new Map;m.forEach((_=>{const T=MY(l.serializer,_);p.set(T.key.toString(),T)}));const b=[];return a.forEach((_=>{const T=p.get(_.toString());Ot(!!T,55234,{key:_}),b.push(T)})),b})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Em(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const i=ht.fromPath(r);this.mutations.push(new tT(i,this.precondition(i)))})),await(async function(r,i){const a=mt(r),l={writes:i.map((f=>Ap(a.serializer,f)))};await a.Wo("Commit",a.serializer.databaseId,Sn.emptyPath(),l)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw bt(50498,{Gu:e.constructor.name});n=jt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new We(De.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(jt.min())?ei.exists(!1):ei.updateTime(n):ei.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(jt.min()))throw new We(De.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ei.updateTime(n)}return ei.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};class wQ{constructor(e,n,r,i,a){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.zu=r.maxAttempts,this.M_=new pT(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new bQ(this.datastore),n=this.Ju(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Zu(i)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const n=this.updateFunction(e);return!Xp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if(e?.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!s9(n)}return!1}}const $c="FirestoreClient";class _Q{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=ma.UNAUTHENTICATED,this.clientId=wx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{nt($c,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(nt($c,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ya;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Im(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function X_(t,e){t.asyncQueue.verifyOperationInProgress(),nt($c,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await V9(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function e4(t,e){t.asyncQueue.verifyOperationInProgress();const n=await DT(t);nt($c,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>KR(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>KR(e.remoteStore,i))),t._onlineComponents=e}async function DT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){nt($c,"Using user provided OfflineComponentProvider");try{await X_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===De.FAILED_PRECONDITION||i.code===De.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Fs("Error using user provided cache. Falling back to memory cache: "+n),await X_(t,new rm)}}else nt($c,"Using default OfflineComponentProvider"),await X_(t,new PT(void 0));return t._offlineComponents}async function zx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(nt($c,"Using user provided OnlineComponentProvider"),await e4(t,t._uninitializedComponentsProvider._online)):(nt($c,"Using default OnlineComponentProvider"),await e4(t,new Wc))),t._onlineComponents}function h7(t){return DT(t).then((e=>e.persistence))}function Cm(t){return DT(t).then((e=>e.localStore))}function m7(t){return zx(t).then((e=>e.remoteStore))}function kT(t){return zx(t).then((e=>e.syncEngine))}function g7(t){return zx(t).then((e=>e.datastore))}async function im(t){const e=await zx(t),n=e.eventManager;return n.onListen=ZX.bind(null,e.syncEngine),n.onUnlisten=eQ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=JX.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tQ.bind(null,e.syncEngine),n}function EQ(t){return t.asyncQueue.enqueue((async()=>{const e=await h7(t),n=await m7(t);return e.setNetworkEnabled(!0),(function(i){const a=mt(i);return a.Ea.delete(0),i0(a)})(n)}))}function AQ(t){return t.asyncQueue.enqueue((async()=>{const e=await h7(t),n=await m7(t);return e.setNetworkEnabled(!1),(async function(i){const a=mt(i);a.Ea.add(0),await Am(a),a.Va.set("Offline")})(n)}))}function SQ(t,e,n,r){const i=new Vx(r),a=new AT(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>wT(await im(t),a))),()=>{i.Nu(),t.asyncQueue.enqueueAndForget((async()=>_T(await im(t),a)))}}function TQ(t,e){const n=new ya;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,a,l){try{const f=await(function(p,b){const _=mt(p);return _.persistence.runTransaction("read document","readonly",(T=>_.localDocuments.getDocument(T,b)))})(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new We(De.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Im(f,`Failed to get document '${a} from cache`);l.reject(m)}})(await Cm(t),e,n))),n.promise}function p7(t,e,n={}){const r=new ya;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,f,m,p){const b=new Vx({next:T=>{b.Nu(),l.enqueueAndForget((()=>_T(a,_)));const N=T.docs.has(f);!N&&T.fromCache?p.reject(new We(De.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&T.fromCache&&m&&m.source==="server"?p.reject(new We(De.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),_=new AT(wm(f.path),b,{includeMetadataChanges:!0,Ka:!0});return wT(a,_)})(await im(t),t.asyncQueue,e,n,r))),r.promise}function IQ(t,e){const n=new ya;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,a,l){try{const f=await rv(i,a,!0),m=new o7(a,f.ks),p=m.ru(f.documents),b=m.applyChanges(p,!1);l.resolve(b.snapshot)}catch(f){const m=Im(f,`Failed to execute query '${a} against cache`);l.reject(m)}})(await Cm(t),e,n))),n.promise}function y7(t,e,n={}){const r=new ya;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,f,m,p){const b=new Vx({next:T=>{b.Nu(),l.enqueueAndForget((()=>_T(a,_))),T.fromCache&&m.source==="server"?p.reject(new We(De.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),_=new AT(f,b,{includeMetadataChanges:!0,Ka:!0});return wT(a,_)})(await im(t),t.asyncQueue,e,n,r))),r.promise}function CQ(t,e,n){const r=new ya;return t.asyncQueue.enqueueAndForget((async()=>{try{const i=await g7(t);r.resolve((async function(l,f,m){const p=mt(l),{request:b,gt:_,parent:T}=y9(p.serializer,qj(f),m);p.connection.Ko||delete b.parent;const N=(await p.jo("RunAggregationQuery",p.serializer.databaseId,T,b,1)).filter((M=>!!M.result));Ot(N.length===1,64727);const j=N[0].result?.aggregateFields;return Object.keys(j).reduce(((M,L)=>(M[_[L]]=j[L],M)),{})})(i,e,n))}catch(i){r.reject(i)}})),r.promise}function OQ(t,e){const n=new ya;return t.asyncQueue.enqueueAndForget((async()=>nQ(await kT(t),e,n))),n.promise}function NQ(t,e){const n=new Vx(e);return t.asyncQueue.enqueueAndForget((async()=>(function(i,a){mt(i).Ca.add(a),a.next()})(await im(t),n))),()=>{n.Nu(),t.asyncQueue.enqueueAndForget((async()=>(function(i,a){mt(i).Ca.delete(a)})(await im(t),n)))}}function PQ(t,e,n){const r=new ya;return t.asyncQueue.enqueueAndForget((async()=>{const i=await g7(t);new wQ(t.asyncQueue,i,n,e,r).ju()})),r.promise}function RQ(t,e,n,r){const i=(function(l,f){let m;return m=typeof l=="string"?l9().encode(l):l,(function(b,_){return new vQ(b,_)})((function(b,_){if(b instanceof Uint8Array)return JR(b,_);if(b instanceof ArrayBuffer)return JR(new Uint8Array(b),_);if(b instanceof ReadableStream)return b.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(m),f)})(n,Ed(e));t.asyncQueue.enqueueAndForget((async()=>{yQ(await kT(t),i,r)}))}function DQ(t,e){return t.asyncQueue.enqueue((async()=>(function(r,i){const a=mt(r);return a.persistence.runTransaction("Get named query","readonly",(l=>a.Pi.getNamedQuery(l,i)))})(await Cm(t),e)))}function v7(t,e){return(function(r,i){return new xQ(r,i)})(t,e)}function kQ(t,e){return t.asyncQueue.enqueue((async()=>(async function(r,i){const a=mt(r),l=a.indexManager,f=[];return a.persistence.runTransaction("Configure indexes","readwrite",(m=>l.getFieldIndexes(m).next((p=>(function(_,T,N,j,M){_=[..._],T=[...T],_.sort(N),T.sort(N);const L=_.length,z=T.length;let $=0,K=0;for(;$<z&&K<L;){const ee=N(_[K],T[$]);ee<0?M(_[K++]):ee>0?j(T[$++]):($++,K++)}for(;$<z;)j(T[$++]);for(;K<L;)M(_[K++])})(p,i,x$,(b=>{f.push(l.addFieldIndex(m,b))}),(b=>{f.push(l.deleteFieldIndex(m,b))})))).next((()=>Ie.waitFor(f)))))})(await Cm(t),e)))}function MQ(t,e){return t.asyncQueue.enqueue((async()=>(function(r,i){mt(r).Cs.As=i})(await Cm(t),e)))}function jQ(t){return t.asyncQueue.enqueue((async()=>(function(n){const r=mt(n),i=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",(a=>i.deleteAllFieldIndexes(a)))})(await Cm(t))))}function x7(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const LQ="ComponentProvider",t4=new Map;function BQ(t,e,n,r,i){return new J$(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,x7(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const b7="firestore.googleapis.com",n4=!0;class r4{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new We(De.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=b7,this.ssl=n4}else this.host=e.host,this.ssl=e.ssl??n4;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=I9;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<P9)throw new We(De.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x7(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new We(De.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new We(De.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new We(De.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class a0{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r4({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new We(De.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new We(De.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r4(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new rj;switch(r.type){case"firstParty":return new d$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new We(De.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=t4.get(n);r&&(nt(LQ,"Removing Datastore"),t4.delete(n),r.terminate())})(this),Promise.resolve()}}function w7(t,e,n,r={}){t=Tn(t,a0);const i=wd(e),a=t._getSettings(),l={...a,emulatorOptions:t._getEmulatorOptions()},f=`${e}:${n}`;i&&(BS(`https://${f}`),B5("Firestore",!0)),a.host!==b7&&a.host!==f&&Fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...a,host:f,ssl:i,emulatorOptions:r};if(!$o(m,l)&&(t._setSettings(m),r.mockUserToken)){let p,b;if(typeof r.mockUserToken=="string")p=r.mockUserToken,b=ma.MOCK_USER;else{p=MK(r.mockUserToken,t._app?.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new We(De.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new ma(_)}t._authCredentials=new u$(new nj(p,b))}}class Yi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yi(this.firestore,e,this._query)}}class fr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fr(this.firestore,e,this._key)}toJSON(){return{type:fr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_d(n,fr._jsonSchema))return new fr(e,r||null,new ht(Sn.fromString(n.referencePath)))}}fr._jsonSchemaVersion="firestore/documentReference/1.0",fr._jsonSchema={type:Vi("string",fr._jsonSchemaVersion),referencePath:Vi("string")};class Ho extends Yi{constructor(e,n,r){super(e,n,wm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fr(this.firestore,null,new ht(e))}withConverter(e){return new Ho(this.firestore,e,this._path)}}function jc(t,e,...n){if(t=wr(t),US("collection","path",e),t instanceof a0){const r=Sn.fromString(e,...n);return HP(r),new Ho(t,null,r)}{if(!(t instanceof fr||t instanceof Ho))throw new We(De.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Sn.fromString(e,...n));return HP(r),new Ho(t.firestore,null,r)}}function FQ(t,e){if(t=Tn(t,a0),US("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new We(De.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yi(t,null,(function(r){return new Du(Sn.emptyPath(),r)})(e))}function ds(t,e,...n){if(t=wr(t),arguments.length===1&&(e=wx.newId()),US("doc","path",e),t instanceof a0){const r=Sn.fromString(e,...n);return GP(r),new fr(t,null,new ht(r))}{if(!(t instanceof fr||t instanceof Ho))throw new We(De.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Sn.fromString(e,...n));return GP(r),new fr(t.firestore,t instanceof Ho?t.converter:null,new ht(r))}}function VQ(t,e){return t=wr(t),e=wr(e),(t instanceof fr||t instanceof Ho)&&(e instanceof fr||e instanceof Ho)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function MT(t,e){return t=wr(t),e=wr(e),t instanceof Yi&&e instanceof Yi&&t.firestore===e.firestore&&Jp(t._query,e._query)&&t.converter===e.converter}const i4="AsyncQueue";class a4{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new pT(this,"async_queue_retry"),this._c=()=>{const r=Sy();r&&nt(i4,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Sy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Sy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ya;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!nf(e))throw e;nt(i4,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Si("INTERNAL UNHANDLED ERROR: ",s4(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=bT.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&bt(47125,{Pc:s4(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function s4(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class _7{constructor(){this._progressObserver={},this._taskCompletionResolver=new ya,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const zQ=-1;class _r extends a0{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new a4,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new a4(e),this._firestoreClient=void 0,await e}}}function UQ(t,e,n){n||(n=xp);const r=Yp(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if($o(a,e))return i;throw new We(De.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new We(De.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<P9)throw new We(De.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&wd(e.host)&&BS(e.host),r.initialize({options:e,instanceIdentifier:n})}function E7(t,e){const n=typeof t=="object"?t:K5(),r=typeof t=="string"?t:e||xp,i=Yp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=DK("firestore");a&&w7(i,...a)}return i}function ri(t){if(t._terminated)throw new We(De.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||A7(t),t._firestoreClient}function A7(t){const e=t._freezeSettings(),n=BQ(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new _Q(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}function qQ(t,e){Fs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return S7(t,Wc.provider,{build:r=>new RT(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function GQ(t){Fs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();S7(t,Wc.provider,{build:n=>new d7(n,e.cacheSizeBytes)})}function S7(t,e,n){if((t=Tn(t,_r))._firestoreClient||t._terminated)throw new We(De.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new We(De.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},A7(t)}function HQ(t){if(t._initialized&&!t._terminated)throw new We(De.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ya;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!El.v())return Promise.resolve();const i=r+L9;await El.delete(i)})(dT(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function KQ(t){return(function(n){const r=new ya;return n.asyncQueue.enqueueAndForget((async()=>sQ(await kT(n),r))),r.promise})(ri(t=Tn(t,_r)))}function WQ(t){return EQ(ri(t=Tn(t,_r)))}function $Q(t){return AQ(ri(t=Tn(t,_r)))}function YQ(t){return WW(t.app,"firestore",t._databaseId.database),t._delete()}function gA(t,e){const n=ri(t=Tn(t,_r)),r=new _7;return RQ(n,t._databaseId,e,r),r}function T7(t,e){return DQ(ri(t=Tn(t,_r)),e).then((n=>n?new Yi(t,null,n.query):null))}class Ps{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ps(oi.fromBase64String(e))}catch(n){throw new We(De.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ps(oi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ps._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_d(e,Ps._jsonSchema))return Ps.fromBase64String(e.bytes)}}Ps._jsonSchemaVersion="firestore/bytes/1.0",Ps._jsonSchema={type:Vi("string",Ps._jsonSchemaVersion),bytes:Vi("string")};class Ad{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new We(De.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function XQ(){return new Ad(GE)}class of{constructor(e){this._methodName=e}}class Ko{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new We(De.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new We(De.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ko._jsonSchemaVersion}}static fromJSON(e){if(_d(e,Ko._jsonSchema))return new Ko(e.latitude,e.longitude)}}Ko._jsonSchemaVersion="firestore/geoPoint/1.0",Ko._jsonSchema={type:Vi("string",Ko._jsonSchemaVersion),latitude:Vi("number"),longitude:Vi("number")};class ro{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ro._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_d(e,ro._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ro(e.vectorValues);throw new We(De.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ro._jsonSchemaVersion="firestore/vectorValue/1.0",ro._jsonSchema={type:Vi("string",ro._jsonSchemaVersion),vectorValues:Vi("object")};const QQ=/^__.*__$/;class ZQ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mu(e,this.data,this.fieldMask,n,this.fieldTransforms):new _m(e,this.data,n,this.fieldTransforms)}}class I7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Mu(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function C7(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt(40011,{dataSource:t})}}class Ux{constructor(e,n,r,i,a,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Ux({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ov(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(C7(this.dataSource)&&QQ.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class JQ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ed(e)}createContext(e,n,r,i=!1){return new Ux({dataSource:e,methodName:n,targetDoc:r,path:qr.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sd(t){const e=t._freezeSettings(),n=Ed(t._databaseId);return new JQ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qx(t,e,n,r,i,a={}){const l=t.createContext(a.merge||a.mergeFields?2:0,e,n,i);UT("Data must be an object, but it was:",l,r);const f=P7(r,l);let m,p;if(a.merge)m=new Ds(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const b=[];for(const _ of a.mergeFields){const T=_u(e,_,n);if(!l.contains(T))throw new We(De.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);D7(b,T)||b.push(T)}m=new Ds(b),p=l.fieldTransforms.filter((_=>m.covers(_.field)))}else m=null,p=l.fieldTransforms;return new ZQ(new ga(f),m,p)}class s0 extends of{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof s0}}function O7(t,e,n){return new Ux({dataSource:3,targetDoc:e.settings.targetDoc,methodName:t._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class jT extends of{_toFieldTransform(e){return new t0(e.path,new Xh)}isEqual(e){return e instanceof jT}}class LT extends of{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=O7(this,e,!0),r=this.Ac.map((a=>Td(a,n))),i=new td(r);return new t0(e.path,i)}isEqual(e){return e instanceof LT&&$o(this.Ac,e.Ac)}}class BT extends of{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=O7(this,e,!0),r=this.Ac.map((a=>Td(a,n))),i=new nd(r);return new t0(e.path,i)}isEqual(e){return e instanceof BT&&$o(this.Ac,e.Ac)}}class FT extends of{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new Qh(e.serializer,Zj(e.serializer,this.Vc));return new t0(e.path,n)}isEqual(e){return e instanceof FT&&this.Vc===e.Vc}}function VT(t,e,n,r){const i=t.createContext(1,e,n);UT("Data must be an object, but it was:",i,r);const a=[],l=ga.empty();rf(r,((m,p)=>{const b=qT(e,m,n);p=wr(p);const _=i.childContextForFieldPath(b);if(p instanceof s0)a.push(b);else{const T=Td(p,_);T!=null&&(a.push(b),l.set(b,T))}}));const f=new Ds(a);return new I7(l,f,i.fieldTransforms)}function zT(t,e,n,r,i,a){const l=t.createContext(1,e,n),f=[_u(e,r,n)],m=[i];if(a.length%2!=0)throw new We(De.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)f.push(_u(e,a[T])),m.push(a[T+1]);const p=[],b=ga.empty();for(let T=f.length-1;T>=0;--T)if(!D7(p,f[T])){const N=f[T];let j=m[T];j=wr(j);const M=l.childContextForFieldPath(N);if(j instanceof s0)p.push(N);else{const L=Td(j,M);L!=null&&(p.push(N),b.set(N,L))}}const _=new Ds(p);return new I7(b,_,l.fieldTransforms)}function N7(t,e,n,r=!1){return Td(n,t.createContext(r?4:3,e))}function Td(t,e){if(R7(t=wr(t)))return UT("Unsupported field value:",e,t),P7(t,e);if(t instanceof of)return(function(r,i){if(!C7(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const a=[];let l=0;for(const f of r){let m=Td(f,i.childContextForArray(l));m==null&&(m={nullValue:"NULL_VALUE"}),a.push(m),l++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=wr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Zj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=nr.fromDate(r);return{timestampValue:Zh(i.serializer,a)}}if(r instanceof nr){const a=new nr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zh(i.serializer,a)}}if(r instanceof Ko)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ps)return{bytesValue:f9(i.serializer,r._byteString)};if(r instanceof fr){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:sT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ro)return(function(l,f){const m=l instanceof ro?l.toArray():l;return{mapValue:{fields:{[YS]:{stringValue:XS},[Wh]:{arrayValue:{values:m.map((b=>{if(typeof b!="number")throw f.createError("VectorValues must only contain numeric values.");return eT(f.serializer,b)}))}}}}}})(r,i);if(_9(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${_x(r)}`)})(t,e)}function P7(t,e){const n={};return Sj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rf(t,((r,i)=>{const a=Td(i,e.childContextForField(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function R7(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nr||t instanceof Ko||t instanceof Ps||t instanceof fr||t instanceof of||t instanceof ro||_9(t))}function UT(t,e,n){if(!R7(n)||!sj(n)){const r=_x(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function _u(t,e,n){if((e=wr(e))instanceof Ad)return e._internalPath;if(typeof e=="string")return qT(t,e);throw ov("Field path arguments must be of type string or ",t,!1,void 0,n)}const eZ=new RegExp("[~\\*/\\[\\]]");function qT(t,e,n){if(e.search(eZ)>=0)throw ov(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ad(...e.split("."))._internalPath}catch{throw ov(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ov(t,e,n,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let f=`Function ${e}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new We(De.INVALID_ARGUMENT,f+t+m)}function D7(t,e){return t.some((n=>n.isEqual(e)))}class GT{convertValue(e,n="none"){switch(qc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw bt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return rf(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[Wh].arrayValue?.values?.map((r=>Zr(r.doubleValue)));return new ro(n)}convertGeoPoint(e){return new Ko(Zr(e.latitude),Zr(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Cx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vp(e));default:return null}}convertTimestamp(e){const n=bu(e);return new nr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Sn.fromString(e);Ot(w9(r),9688,{name:e});const i=new Uc(r.get(1),r.get(3)),a=new ht(r.popFirst(5));return i.isEqual(n)||Si(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}class lf extends GT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ps(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,n)}}function tZ(){return new s0("deleteField")}function nZ(){return new jT("serverTimestamp")}function rZ(...t){return new LT("arrayUnion",t)}function iZ(...t){return new BT("arrayRemove",t)}function aZ(t){return new FT("increment",t)}function sZ(t){return new ro(t)}function oZ(t){const e=ri(Tn(t.firestore,_r)),n=e._onlineComponents?.datastore.serializer;return n===void 0?null:Dx(n,rs(t._query)).ft}function lZ(t,e){const n=Aj(e,((a,l)=>new a9(l,a.aggregateType,a._internalFieldPath))),r=ri(Tn(t.firestore,_r)),i=r._onlineComponents?.datastore.serializer;return i===void 0?null:y9(i,qj(t._query),n,!0).request}const o4="@firebase/firestore",l4="4.11.0";function Nh(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class am{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class k7{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new ga({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}class Sp{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new fr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(_u("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uZ extends Sp{data(){return super.data()}}function M7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new We(De.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class HT{}class Om extends HT{}function cZ(t,e,...n){let r=[];e instanceof HT&&r.push(e),r=r.concat(n),(function(a){const l=a.filter((m=>m instanceof Id)).length,f=a.filter((m=>m instanceof Nm)).length;if(l>1||l>0&&f>0)throw new We(De.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class Nm extends Om{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Nm(e,n,r)}_apply(e){const n=this._parse(e);return L7(e._query,n),new Yi(e.firestore,e.converter,tA(e._query,n))}_parse(e){const n=Sd(e.firestore);return(function(a,l,f,m,p,b,_){let T;if(p.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new We(De.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){c4(_,b);const j=[];for(const M of _)j.push(u4(m,a,M));T={arrayValue:{values:j}}}else T=u4(m,a,_)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||c4(_,b),T=N7(f,l,_,b==="in"||b==="not-in");return kn.create(p,b,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function fZ(t,e,n){const r=e,i=_u("where",t);return Nm._create(i,r,n)}class Id extends HT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Id(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:cr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let l=i;const f=a.getFlattenedFilters();for(const m of f)L7(l,m),l=tA(l,m)})(e._query,n),new Yi(e.firestore,e.converter,tA(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function dZ(...t){return t.forEach((e=>B7("or",e))),Id._create("or",t)}function hZ(...t){return t.forEach((e=>B7("and",e))),Id._create("and",t)}class Gx extends Om{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gx(e,n)}_apply(e){const n=(function(i,a,l){if(i.startAt!==null)throw new We(De.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new We(De.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _p(a,l)})(e._query,this._field,this._direction);return new Yi(e.firestore,e.converter,dY(e._query,n))}}function mZ(t,e="asc"){const n=e,r=_u("orderBy",t);return Gx._create(r,n)}class o0 extends Om{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new o0(e,n,r)}_apply(e){return new Yi(e.firestore,e.converter,Zy(e._query,this._limit,this._limitType))}}function gZ(t){return oj("limit",t),o0._create("limit",t,"F")}function pZ(t){return oj("limitToLast",t),o0._create("limitToLast",t,"L")}class l0 extends Om{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new l0(e,n,r)}_apply(e){const n=j7(e,this.type,this._docOrFields,this._inclusive);return new Yi(e.firestore,e.converter,hY(e._query,n))}}function yZ(...t){return l0._create("startAt",t,!0)}function vZ(...t){return l0._create("startAfter",t,!1)}class u0 extends Om{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new u0(e,n,r)}_apply(e){const n=j7(e,this.type,this._docOrFields,this._inclusive);return new Yi(e.firestore,e.converter,mY(e._query,n))}}function xZ(...t){return u0._create("endBefore",t,!1)}function bZ(...t){return u0._create("endAt",t,!0)}function j7(t,e,n,r){if(n[0]=wr(n[0]),n[0]instanceof Sp)return(function(a,l,f,m,p){if(!m)throw new We(De.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const b=[];for(const _ of Ch(a))if(_.field.isKeyField())b.push(Jf(l,m.key));else{const T=m.data.field(_.field);if(Ix(T))throw new We(De.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(T===null){const N=_.field.canonicalString();throw new We(De.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}b.push(T)}return new Hc(b,p)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Sd(t.firestore);return(function(l,f,m,p,b,_){const T=l.explicitOrderBy;if(b.length>T.length)throw new We(De.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let j=0;j<b.length;j++){const M=b[j];if(T[j].field.isKeyField()){if(typeof M!="string")throw new We(De.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof M}`);if(!ZS(l)&&M.indexOf("/")!==-1)throw new We(De.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${M}' contains a slash.`);const L=l.path.child(Sn.fromString(M));if(!ht.isDocumentKey(L))throw new We(De.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${L}' is not because it contains an odd number of segments.`);const z=new ht(L);N.push(Jf(f,z))}else{const L=N7(m,p,M);N.push(L)}}return new Hc(N,_)})(t._query,t.firestore._databaseId,i,e,n,r)}}function u4(t,e,n){if(typeof(n=wr(n))=="string"){if(n==="")throw new We(De.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZS(e)&&n.indexOf("/")!==-1)throw new We(De.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Sn.fromString(n));if(!ht.isDocumentKey(r))throw new We(De.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jf(t,new ht(r))}if(n instanceof fr)return Jf(t,n._key);throw new We(De.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_x(n)}.`)}function c4(t,e){if(!Array.isArray(t)||t.length===0)throw new We(De.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function L7(t,e){const n=(function(i,a){for(const l of i)for(const f of l.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new We(De.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new We(De.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function B7(t,e){if(!(e instanceof Nm||e instanceof Id))throw new We(De.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}function Hx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class KT extends GT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ps(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,n)}}function wZ(t){return new am("sum",_u("sum",t))}function _Z(t){return new am("avg",_u("average",t))}function F7(){return new am("count")}function EZ(t,e){return t instanceof am&&e instanceof am&&t.aggregateType===e.aggregateType&&t._internalFieldPath?.canonicalString()===e._internalFieldPath?.canonicalString()}function AZ(t,e){return MT(t.query,e.query)&&$o(t.data(),e.data())}function SZ(t){return V7(t,{count:F7()})}function V7(t,e){const n=Tn(t.firestore,_r),r=ri(n),i=Aj(e,((a,l)=>new a9(l,a.aggregateType,a._internalFieldPath)));return CQ(r,t._query,i).then((a=>(function(f,m,p){const b=new lf(f);return new k7(m,b,p)})(n,t,a)))}class TZ{constructor(e){this.kind="memory",this._onlineComponentProvider=Wc.provider,this._offlineComponentProvider=e?.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new PT(void 0)}}toJSON(){return{kind:this.kind}}}class IZ{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=z7(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class CZ{constructor(){this.kind="memoryEager",this._offlineComponentProvider=rm.provider}toJSON(){return{kind:this.kind}}}class OZ{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new PT(e)}}toJSON(){return{kind:this.kind}}}function NZ(){return new CZ}function PZ(t){return new OZ(t?.cacheSizeBytes)}function RZ(t){return new TZ(t)}function DZ(t){return new IZ(t)}class kZ{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Wc.provider,this._offlineComponentProvider={build:n=>new RT(n,e?.cacheSizeBytes,this.forceOwnership)}}}class MZ{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Wc.provider,this._offlineComponentProvider={build:n=>new d7(n,e?.cacheSizeBytes)}}}function z7(t){return new kZ(t?.forceOwnership)}function jZ(){return new MZ}const U7="NOT SUPPORTED";class uu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ls extends Sp{constructor(e,n,r,i,a,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new op(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(_u("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new We(De.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ls._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function LZ(t,e,n){if(_d(e,Ls._jsonSchema)){if(e.bundle===U7)throw new We(De.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Ed(t._databaseId),i=v7(e.bundle,r),a=i.t(),l=new ST(i.getMetadata(),r);for(const b of a)l.o(b);const f=l.documents;if(f.length!==1)throw new We(De.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${f.length} documents.`);const m=Rx(r,f[0].document),p=new ht(Sn.fromString(e.bundleName));return new Ls(t,new KT(t),p,m,new uu(!1,!1),n||null)}}Ls._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ls._jsonSchema={type:Vi("string",Ls._jsonSchemaVersion),bundleSource:Vi("string","DocumentSnapshot"),bundleName:Vi("string"),bundle:Vi("string")};class op extends Ls{data(e={}){return super.data(e)}}class Bs{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new uu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new op(this._firestore,this._userDataWriter,r.key,r,new uu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new We(De.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((f=>{const m=new op(i._firestore,i._userDataWriter,f.doc.key,f.doc,new uu(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const m=new op(i._firestore,i._userDataWriter,f.doc.key,f.doc,new uu(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,b=-1;return f.type!==0&&(p=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),f.type!==1&&(l=l.add(f.doc),b=l.indexOf(f.doc.key)),{type:FZ(f.type),doc:m,oldIndex:p,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new We(De.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Bs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function BZ(t,e,n){if(_d(e,Bs._jsonSchema)){if(e.bundle===U7)throw new We(De.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Ed(t._databaseId),i=v7(e.bundle,r),a=i.t(),l=new ST(i.getMetadata(),r);for(const T of a)l.o(T);if(l.queries.length!==1)throw new We(De.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${l.queries.length} queries.`);const f=kx(l.queries[0].bundledQuery),m=l.documents;let p=new $f;m.map((T=>{const N=Rx(r,T.document);p=p.add(N)}));const b=od.fromInitialDocuments(f,p,on(),!1,!1),_=new Yi(t,n||null,f);return new Bs(t,new KT(t),_,b)}}function FZ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt(61501,{type:t})}}function VZ(t,e){return t instanceof Ls&&e instanceof Ls?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Bs&&e instanceof Bs&&t._firestore===e._firestore&&MT(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}Bs._jsonSchemaVersion="firestore/querySnapshot/1.0",Bs._jsonSchema={type:Vi("string",Bs._jsonSchemaVersion),bundleSource:Vi("string","QuerySnapshot"),bundleName:Vi("string"),bundle:Vi("string")};const zZ={maxAttempts:5};class q7{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Sd(e)}set(e,n,r){this._verifyNotCommitted();const i=Oc(e,this._firestore),a=Hx(i.converter,n,r),l=qx(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,ei.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=Oc(e,this._firestore);let l;return l=typeof(n=wr(n))=="string"||n instanceof Ad?zT(this._dataReader,"WriteBatch.update",a._key,n,r,i):VT(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(l.toMutation(a._key,ei.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Oc(e,this._firestore);return this._mutations=this._mutations.concat(new Em(n._key,ei.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new We(De.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Oc(t,e){if((t=wr(t)).firestore!==e)throw new We(De.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class UZ{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Sd(e)}get(e){const n=Oc(e,this._firestore),r=new KT(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return bt(24041);const a=i[0];if(a.isFoundDocument())return new Sp(this._firestore,r,a.key,a,n.converter);if(a.isNoDocument())return new Sp(this._firestore,r,n._key,null,n.converter);throw bt(18433,{doc:a})}))}set(e,n,r){const i=Oc(e,this._firestore),a=Hx(i.converter,n,r),l=qx(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,l),this}update(e,n,r,...i){const a=Oc(e,this._firestore);let l;return l=typeof(n=wr(n))=="string"||n instanceof Ad?zT(this._dataReader,"Transaction.update",a._key,n,r,i):VT(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,l),this}delete(e){const n=Oc(e,this._firestore);return this._transaction.delete(n._key),this}}class G7 extends UZ{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Oc(e,this._firestore),r=new lf(this._firestore);return super.get(e).then((i=>new Ls(this._firestore,r,n._key,i._document,new uu(!1,!1),n.converter)))}}function qZ(t,e,n){t=Tn(t,_r);const r={...zZ,...n};(function(l){if(l.maxAttempts<1)throw new We(De.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const i=ri(t);return PQ(i,(a=>e(new G7(t,a))),r)}function c0(t){t=Tn(t,fr);const e=Tn(t.firestore,_r),n=ri(e);return p7(n,t._key).then((r=>$T(e,t,r)))}function GZ(t){t=Tn(t,fr);const e=Tn(t.firestore,_r),n=ri(e),r=new lf(e);return TQ(n,t._key).then((i=>new Ls(e,r,t._key,i,new uu(i!==null&&i.hasLocalMutations,!0),t.converter)))}function HZ(t){t=Tn(t,fr);const e=Tn(t.firestore,_r),n=ri(e);return p7(n,t._key,{source:"server"}).then((r=>$T(e,t,r)))}function Lc(t){t=Tn(t,Yi);const e=Tn(t.firestore,_r),n=ri(e),r=new lf(e);return M7(t._query),y7(n,t._query).then((i=>new Bs(e,r,t,i)))}function KZ(t){t=Tn(t,Yi);const e=Tn(t.firestore,_r),n=ri(e),r=new lf(e);return IQ(n,t._query).then((i=>new Bs(e,r,t,i)))}function WZ(t){t=Tn(t,Yi);const e=Tn(t.firestore,_r),n=ri(e),r=new lf(e);return y7(n,t._query,{source:"server"}).then((i=>new Bs(e,r,t,i)))}function Cd(t,e,n){t=Tn(t,fr);const r=Tn(t.firestore,_r),i=Hx(t.converter,e,n),a=Sd(r);return Pm(r,[qx(a,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ei.none())])}function WT(t,e,n,...r){t=Tn(t,fr);const i=Tn(t.firestore,_r),a=Sd(i);let l;return l=typeof(e=wr(e))=="string"||e instanceof Ad?zT(a,"updateDoc",t._key,e,n,r):VT(a,"updateDoc",t._key,e),Pm(i,[l.toMutation(t._key,ei.exists(!0))])}function H7(t){return Pm(Tn(t.firestore,_r),[new Em(t._key,ei.none())])}function $Z(t,e){const n=Tn(t.firestore,_r),r=ds(t),i=Hx(t.converter,e),a=Sd(t.firestore);return Pm(n,[qx(a,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ei.exists(!1))]).then((()=>r))}function pA(t,...e){t=wr(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Nh(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Nh(e[r])){const p=e[r];e[r]=p.next?.bind(p),e[r+1]=p.error?.bind(p),e[r+2]=p.complete?.bind(p)}let a,l,f;if(t instanceof fr)l=Tn(t.firestore,_r),f=wm(t._key.path),a={next:p=>{e[r]&&e[r]($T(l,t,p))},error:e[r+1],complete:e[r+2]};else{const p=Tn(t,Yi);l=Tn(p.firestore,_r),f=p._query;const b=new lf(l);a={next:_=>{e[r]&&e[r](new Bs(l,b,p,_))},error:e[r+1],complete:e[r+2]},M7(t._query)}const m=ri(l);return SQ(m,f,i,a)}function YZ(t,e,...n){const r=wr(t),i=(function(m){const p={bundle:"",bundleName:"",bundleSource:""},b=["bundle","bundleName","bundleSource"];for(const _ of b){if(!(_ in m)){p.error=`snapshotJson missing required field: ${_}`;break}const T=m[_];if(typeof T!="string"){p.error=`snapshotJson field '${_}' must be a string.`;break}if(T.length===0){p.error=`snapshotJson field '${_}' cannot be an empty string.`;break}_==="bundle"?p.bundle=T:_==="bundleName"?p.bundleName=T:_==="bundleSource"&&(p.bundleSource=T)}return p})(e);if(i.error)throw new We(De.INVALID_ARGUMENT,i.error);let a,l=0;if(typeof n[l]!="object"||Nh(n[l])||(a=n[l++]),i.bundleSource==="QuerySnapshot"){let f=null;if(typeof n[l]=="object"&&Nh(n[l])){const m=n[l++];f={next:m.next,error:m.error,complete:m.complete}}else f={next:n[l++],error:n[l++],complete:n[l++]};return(function(p,b,_,T,N){let j,M=!1;return gA(p,b.bundle).then((()=>T7(p,b.bundleName))).then((z=>{z&&!M&&(N&&z.withConverter(N),j=pA(z,_||{},T))})).catch((z=>(T.error&&T.error(z),()=>{}))),()=>{M||(M=!0,j&&j())}})(r,i,a,f,n[l])}if(i.bundleSource==="DocumentSnapshot"){let f=null;if(typeof n[l]=="object"&&Nh(n[l])){const m=n[l++];f={next:m.next,error:m.error,complete:m.complete}}else f={next:n[l++],error:n[l++],complete:n[l++]};return(function(p,b,_,T,N){let j,M=!1;return gA(p,b.bundle).then((()=>{if(!M){const z=new fr(p,N||null,ht.fromPath(b.bundleName));j=pA(z,_||{},T)}})).catch((z=>(T.error&&T.error(z),()=>{}))),()=>{M||(M=!0,j&&j())}})(r,i,a,f,n[l])}throw new We(De.INVALID_ARGUMENT,`unsupported bundle source: ${i.bundleSource}`)}function XZ(t,e){t=Tn(t,_r);const n=ri(t),r=Nh(e)?e:{next:e};return NQ(n,r)}function Pm(t,e){const n=ri(t);return OQ(n,e)}function $T(t,e,n){const r=n.docs.get(e._key),i=new lf(t);return new Ls(t,i,e._key,r,new uu(n.hasPendingWrites,n.fromCache),e.converter)}function QZ(t){return t=Tn(t,_r),ri(t),new q7(t,(e=>Pm(t,e)))}function ZZ(t,e){t=Tn(t,_r);const n=ri(t);if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return Fs("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=(function(a){const l=typeof a=="string"?(function(p){try{return JSON.parse(p)}catch(b){throw new We(De.INVALID_ARGUMENT,"Failed to parse JSON: "+b?.message)}})(a):a,f=[];if(Array.isArray(l.indexes))for(const m of l.indexes){const p=f4(m,"collectionGroup"),b=[];if(Array.isArray(m.fields))for(const _ of m.fields){const T=f4(_,"fieldPath"),N=qT("setIndexConfiguration",T);_.arrayConfig==="CONTAINS"?b.push(new Kf(N,2)):_.order==="ASCENDING"?b.push(new Kf(N,0)):_.order==="DESCENDING"&&b.push(new Kf(N,1))}f.push(new zh(zh.UNKNOWN_ID,p,b,Uh.empty()))}return f})(e);return kQ(n,r)}function f4(t,e){if(typeof t[e]!="string")throw new We(De.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}class K7{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function JZ(t){t=Tn(t,_r);const e=d4.get(t);if(e)return e;if(ri(t)._uninitializedComponentsProvider?._offline.kind!=="persistent")return null;const r=new K7(t);return d4.set(t,r),r}function eJ(t){W7(t,!0)}function tJ(t){W7(t,!1)}function nJ(t){const e=ri(t._firestore);jQ(e).then((n=>nt("deleting all persistent cache indexes succeeded"))).catch((n=>Fs("deleting all persistent cache indexes failed",n)))}function W7(t,e){const n=ri(t._firestore);MQ(n,e).then((r=>nt(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((r=>Fs(`setting persistent cache index auto creation isEnabled=${e} failed`,r)))}const d4=new WeakMap;class rJ{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return YT.instance.onExistenceFilterMismatch(e)}}class YT{constructor(){this.i=new Map}static get instance(){return K1||(K1=new YT,IY(K1)),K1}u(e){this.i.forEach((n=>n(e)))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.i;return r.set(n,e),()=>r.delete(n)}}let K1=null;(function(e,n=!0){s$(xm),Bh(new Zf("firestore",((r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),f=new _r(new c$(r.getProvider("auth-internal")),new h$(l,r.getProvider("app-check-internal")),eY(l,i),l);return a={useFetchStreams:n,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),Dc(o4,l4,e),Dc(o4,l4,"esm2020")})();const iJ=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:GT,AggregateField:am,AggregateQuerySnapshot:k7,Bytes:Ps,CACHE_SIZE_UNLIMITED:zQ,CollectionReference:Ho,DocumentReference:fr,DocumentSnapshot:Ls,FieldPath:Ad,FieldValue:of,Firestore:_r,FirestoreError:We,GeoPoint:Ko,LoadBundleTask:_7,PersistentCacheIndexManager:K7,Query:Yi,QueryCompositeFilterConstraint:Id,QueryConstraint:Om,QueryDocumentSnapshot:op,QueryEndAtConstraint:u0,QueryFieldFilterConstraint:Nm,QueryLimitConstraint:o0,QueryOrderByConstraint:Gx,QuerySnapshot:Bs,QueryStartAtConstraint:l0,SnapshotMetadata:uu,Timestamp:nr,Transaction:G7,VectorValue:ro,WriteBatch:q7,_AutoId:wx,_ByteString:oi,_DatabaseId:Uc,_DocumentKey:ht,_EmptyAppCheckTokenProvider:m$,_EmptyAuthCredentialsProvider:rj,_FieldPath:qr,_TestingHooks:rJ,_cast:Tn,_debugAssert:l$,_internalAggregationQueryToProtoRunAggregationQueryRequest:lZ,_internalQueryToProtoQueryTarget:oZ,_isBase64Available:Q$,_logWarn:Fs,_validateIsNotUsedTogether:aj,addDoc:$Z,aggregateFieldEqual:EZ,aggregateQuerySnapshotEqual:AZ,and:hZ,arrayRemove:iZ,arrayUnion:rZ,average:_Z,clearIndexedDbPersistence:HQ,collection:jc,collectionGroup:FQ,connectFirestoreEmulator:w7,count:F7,deleteAllPersistentCacheIndexes:nJ,deleteDoc:H7,deleteField:tZ,disableNetwork:$Q,disablePersistentCacheIndexAutoCreation:tJ,doc:ds,documentId:XQ,documentSnapshotFromJSON:LZ,enableIndexedDbPersistence:qQ,enableMultiTabIndexedDbPersistence:GQ,enableNetwork:WQ,enablePersistentCacheIndexAutoCreation:eJ,endAt:bZ,endBefore:xZ,ensureFirestoreConfigured:ri,executeWrite:Pm,getAggregateFromServer:V7,getCountFromServer:SZ,getDoc:c0,getDocFromCache:GZ,getDocFromServer:HZ,getDocs:Lc,getDocsFromCache:KZ,getDocsFromServer:WZ,getFirestore:E7,getPersistentCacheIndexManager:JZ,increment:aZ,initializeFirestore:UQ,limit:gZ,limitToLast:pZ,loadBundle:gA,memoryEagerGarbageCollector:NZ,memoryLocalCache:RZ,memoryLruGarbageCollector:PZ,namedQuery:T7,onSnapshot:pA,onSnapshotResume:YZ,onSnapshotsInSync:XZ,or:dZ,orderBy:mZ,persistentLocalCache:DZ,persistentMultipleTabManager:jZ,persistentSingleTabManager:z7,query:cZ,queryEqual:MT,querySnapshotFromJSON:BZ,refEqual:VQ,runTransaction:qZ,serverTimestamp:nZ,setDoc:Cd,setIndexConfiguration:ZZ,setLogLevel:o$,snapshotEqual:VZ,startAfter:vZ,startAt:yZ,sum:wZ,terminate:YQ,updateDoc:WT,vector:sZ,waitForPendingWrites:KQ,where:fZ,writeBatch:QZ},Symbol.toStringTag,{value:"Module"}));var aJ="firebase",sJ="12.9.0";Dc(aJ,sJ,"app");function $7(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oJ=$7,Y7=new Wp("auth","Firebase",$7());const lv=new FS("@firebase/auth");function lJ(t,...e){lv.logLevel<=Dn.WARN&&lv.warn(`Auth (${xm}): ${t}`,...e)}function Ty(t,...e){lv.logLevel<=Dn.ERROR&&lv.error(`Auth (${xm}): ${t}`,...e)}function Yo(t,...e){throw XT(t,...e)}function Sl(t,...e){return XT(t,...e)}function X7(t,e,n){const r={...oJ(),[e]:n};return new Wp("auth","Firebase",r).create(e,{appName:t.name})}function gu(t){return X7(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XT(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Y7.create(t,...e)}function Kt(t,e,...n){if(!t)throw XT(e,...n)}function cu(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ty(e),new Error(e)}function Eu(t,e){t||cu(e)}function yA(){return typeof self<"u"&&self.location?.href||""}function uJ(){return h4()==="http:"||h4()==="https:"}function h4(){return typeof self<"u"&&self.location?.protocol||null}function cJ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uJ()||VK()||"connection"in navigator)?navigator.onLine:!0}function fJ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class f0{constructor(e,n){this.shortDelay=e,this.longDelay=n,Eu(n>e,"Short delay should be less than long delay!"),this.isMobile=BK()||zK()}get(){return cJ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function QT(t,e){Eu(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Q7{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const dJ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const hJ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mJ=new f0(3e4,6e4);function uf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function cf(t,e,n,r,i={}){return Z7(t,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const f=$p({key:t.config.apiKey,...l}).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:m,...a};return FK()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&wd(t.emulatorConfig.host)&&(p.credentials="include"),Q7.fetch()(await J7(t,t.config.apiHost,n,f),p)})}async function Z7(t,e,n){t._canInitEmulator=!1;const r={...dJ,...e};try{const i=new pJ(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw W1(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const f=a.ok?l.errorMessage:l.error.message,[m,p]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw W1(t,"credential-already-in-use",l);if(m==="EMAIL_EXISTS")throw W1(t,"email-already-in-use",l);if(m==="USER_DISABLED")throw W1(t,"user-disabled",l);const b=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw X7(t,b,p);Yo(t,b)}}catch(i){if(i instanceof Ru)throw i;Yo(t,"network-request-failed",{message:String(i)})}}async function d0(t,e,n,r,i={}){const a=await cf(t,e,n,r,i);return"mfaPendingCredential"in a&&Yo(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function J7(t,e,n,r){const i=`${e}${n}?${r}`,a=t,l=a.config.emulator?QT(t.config,i):`${t.config.apiScheme}://${i}`;return hJ.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function gJ(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pJ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sl(this.auth,"network-request-failed")),mJ.get())})}}function W1(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Sl(t,e,r);return i.customData._tokenResponse=n,i}function m4(t){return t!==void 0&&t.enterprise!==void 0}class yJ{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return gJ(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vJ(t,e){return cf(t,"GET","/v2/recaptchaConfig",uf(t,e))}async function xJ(t,e){return cf(t,"POST","/v1/accounts:delete",e)}async function uv(t,e){return cf(t,"POST","/v1/accounts:lookup",e)}function lp(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bJ(t,e=!1){const n=wr(t),r=await n.getIdToken(e),i=ZT(r);Kt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a?.sign_in_provider;return{claims:i,token:r,authTime:lp(Q_(i.auth_time)),issuedAtTime:lp(Q_(i.iat)),expirationTime:lp(Q_(i.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Q_(t){return Number(t)*1e3}function ZT(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ty("JWT malformed, contained fewer than 3 sections"),null;try{const i=D5(n);return i?JSON.parse(i):(Ty("Failed to decode base64 JWT payload"),null)}catch(i){return Ty("Caught error parsing JWT payload as JSON",i?.toString()),null}}function g4(t){const e=ZT(t);return Kt(e,"internal-error"),Kt(typeof e.exp<"u","internal-error"),Kt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Tp(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ru&&wJ(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wJ({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class _J{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class vA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lp(this.lastLoginAt),this.creationTime=lp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function cv(t){const e=t.auth,n=await t.getIdToken(),r=await Tp(t,uv(e,{idToken:n}));Kt(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?eL(i.providerUserInfo):[],l=AJ(t.providerData,a),f=t.isAnonymous,m=!(t.email&&i.passwordHash)&&!l?.length,p=f?m:!1,b={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new vA(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,b)}async function EJ(t){const e=wr(t);await cv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AJ(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function eL(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function SJ(t,e){const n=await Z7(t,{},async()=>{const r=$p({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,l=await J7(t,i,"/v1/token",`key=${a}`),f=await t._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:r};return t.emulatorConfig&&wd(t.emulatorConfig.host)&&(m.credentials="include"),Q7.fetch()(l,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TJ(t,e){return cf(t,"POST","/v2/accounts:revokeToken",uf(t,e))}class Ph{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Kt(e.idToken,"internal-error"),Kt(typeof e.idToken<"u","internal-error"),Kt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):g4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Kt(e.length!==0,"internal-error");const n=g4(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Kt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await SJ(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,l=new Ph;return r&&(Kt(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Kt(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(Kt(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ph,this.toJSON())}_performRefresh(){return cu("not implemented")}}function pc(t,e){Kt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qo{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new _J(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new vA(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Tp(this,this.stsTokenManager.getToken(this.auth,e));return Kt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return bJ(this,e)}reload(){return EJ(this)}_assign(e){this!==e&&(Kt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Kt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await cv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ao(this.auth.app))return Promise.reject(gu(this.auth));const e=await this.getIdToken();return await Tp(this,xJ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,l=n.photoURL??void 0,f=n.tenantId??void 0,m=n._redirectEventId??void 0,p=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:N,providerData:j,stsTokenManager:M}=n;Kt(_&&M,e,"internal-error");const L=Ph.fromJSON(this.name,M);Kt(typeof _=="string",e,"internal-error"),pc(r,e.name),pc(i,e.name),Kt(typeof T=="boolean",e,"internal-error"),Kt(typeof N=="boolean",e,"internal-error"),pc(a,e.name),pc(l,e.name),pc(f,e.name),pc(m,e.name),pc(p,e.name),pc(b,e.name);const z=new qo({uid:_,auth:e,email:i,emailVerified:T,displayName:r,isAnonymous:N,photoURL:l,phoneNumber:a,tenantId:f,stsTokenManager:L,createdAt:p,lastLoginAt:b});return j&&Array.isArray(j)&&(z.providerData=j.map($=>({...$}))),m&&(z._redirectEventId=m),z}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ph;i.updateFromServerResponse(n);const a=new qo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await cv(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Kt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?eL(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!a?.length,f=new Ph;f.updateFromIdToken(r);const m=new qo({uid:i.localId,auth:e,stsTokenManager:f,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new vA(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(m,p),m}}const p4=new Map;function fu(t){Eu(t instanceof Function,"Expected a class definition");let e=p4.get(t);return e?(Eu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,p4.set(t,e),e)}class tL{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tL.type="NONE";const y4=tL;function Iy(t,e,n){return`firebase:${t}:${e}:${n}`}class Rh{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Iy(this.userKey,i.apiKey,a),this.fullPersistenceKey=Iy("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await uv(this.auth,{idToken:e}).catch(()=>{});return n?qo._fromGetAccountInfoResponse(this.auth,n,e):null}return qo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Rh(fu(y4),e,r);const i=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=i[0]||fu(y4);const l=Iy(r,e.config.apiKey,e.name);let f=null;for(const p of n)try{const b=await p._get(l);if(b){let _;if(typeof b=="string"){const T=await uv(e,{idToken:b}).catch(()=>{});if(!T)break;_=await qo._fromGetAccountInfoResponse(e,T,b)}else _=qo._fromJSON(e,b);p!==a&&(f=_),a=p;break}}catch{}const m=i.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new Rh(a,e,r):(a=m[0],f&&await a._set(l,f.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Rh(a,e,r))}}function v4(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oL(e))return"Blackberry";if(lL(e))return"Webos";if(rL(e))return"Safari";if((e.includes("chrome/")||iL(e))&&!e.includes("edge/"))return"Chrome";if(sL(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function nL(t=$i()){return/firefox\//i.test(t)}function rL(t=$i()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iL(t=$i()){return/crios\//i.test(t)}function aL(t=$i()){return/iemobile/i.test(t)}function sL(t=$i()){return/android/i.test(t)}function oL(t=$i()){return/blackberry/i.test(t)}function lL(t=$i()){return/webos/i.test(t)}function JT(t=$i()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function IJ(t=$i()){return JT(t)&&!!window.navigator?.standalone}function CJ(){return UK()&&document.documentMode===10}function uL(t=$i()){return JT(t)||sL(t)||lL(t)||oL(t)||/windows phone/i.test(t)||aL(t)}function cL(t,e=[]){let n;switch(t){case"Browser":n=v4($i());break;case"Worker":n=`${v4($i())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xm}/${r}`}class OJ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((l,f)=>{try{const m=e(a);l(m)}catch(m){f(m)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function NJ(t,e={}){return cf(t,"GET","/v2/passwordPolicy",uf(t,e))}const PJ=6;class RJ{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??PJ,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class DJ{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new x4(this),this.idTokenSubscription=new x4(this),this.beforeStateQueue=new OJ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Y7,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fu(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Rh.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await uv(this,{idToken:e}),r=await qo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ao(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=r?._redirectEventId,f=await this.tryRedirectSignIn(e);(!a||a===l)&&f?.user&&(r=f.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Kt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cv(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fJ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ao(this.app))return Promise.reject(gu(this));const n=e?wr(e):null;return n&&Kt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Kt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ao(this.app)?Promise.reject(gu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ao(this.app)?Promise.reject(gu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fu(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NJ(this),n=new RJ(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await TJ(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fu(e)||this._popupRedirectResolver;Kt(n,this,"argument-error"),this.redirectPersistenceManager=await Rh.create(this,[fu(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Kt(f,this,"internal-error"),f.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,r,i);return()=>{l=!0,m()}}else{const m=e.addObserver(n);return()=>{l=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Kt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Ao(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&lJ(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Od(t){return wr(t)}class x4{constructor(e){this.auth=e,this.observer=null,this.addObserver=$K(n=>this.observer=n)}get next(){return Kt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Kx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kJ(t){Kx=t}function fL(t){return Kx.loadJS(t)}function MJ(){return Kx.recaptchaEnterpriseScript}function jJ(){return Kx.gapiScript}function LJ(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class BJ{constructor(){this.enterprise=new FJ}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class FJ{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const VJ="recaptcha-enterprise",dL="NO_RECAPTCHA";class zJ{constructor(e){this.type=VJ,this.auth=Od(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,f)=>{vJ(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const p=new yJ(m);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(m=>{f(m)})})}function i(a,l,f){const m=window.grecaptcha;m4(m)?m.enterprise.ready(()=>{m.enterprise.execute(a,{action:e}).then(p=>{l(p)}).catch(()=>{l(dL)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new BJ().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(f=>{if(!n&&m4(window.grecaptcha))i(f,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let m=MJ();m.length!==0&&(m+=f),fL(m).then(()=>{i(f,a,l)}).catch(p=>{l(p)})}}).catch(f=>{l(f)})})}}async function b4(t,e,n,r=!1,i=!1){const a=new zJ(t);let l;if(i)l=dL;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const f={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,p=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:l}):Object.assign(f,{captchaResponse:l}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function xA(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await b4(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await b4(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}function UJ(t,e){const n=Yp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if($o(a,e??{}))return i;Yo(i,"already-initialized")}return n.initialize({options:e})}function qJ(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(fu);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function GJ(t,e,n){const r=Od(t);Kt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=hL(e),{host:l,port:f}=HJ(e),m=f===null?"":`:${f}`,p={url:`${a}//${l}${m}/`},b=Object.freeze({host:l,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Kt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Kt($o(p,r.config.emulator)&&$o(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,wd(l)?(BS(`${a}//${l}${m}`),B5("Auth",!0)):KJ()}function hL(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function HJ(t){const e=hL(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:w4(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:w4(l)}}}function w4(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function KJ(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class eI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return cu("not implemented")}_getIdTokenResponse(e){return cu("not implemented")}_linkToIdToken(e,n){return cu("not implemented")}_getReauthenticationResolver(e){return cu("not implemented")}}async function WJ(t,e){return cf(t,"POST","/v1/accounts:signUp",e)}async function $J(t,e){return d0(t,"POST","/v1/accounts:signInWithPassword",uf(t,e))}async function YJ(t,e){return d0(t,"POST","/v1/accounts:signInWithEmailLink",uf(t,e))}async function XJ(t,e){return d0(t,"POST","/v1/accounts:signInWithEmailLink",uf(t,e))}class Ip extends eI{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ip(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ip(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xA(e,n,"signInWithPassword",$J);case"emailLink":return YJ(e,{email:this._email,oobCode:this._password});default:Yo(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xA(e,r,"signUpPassword",WJ);case"emailLink":return XJ(e,{idToken:n,email:this._email,oobCode:this._password});default:Yo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Dh(t,e){return d0(t,"POST","/v1/accounts:signInWithIdp",uf(t,e))}const QJ="http://localhost";class ld extends eI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ld(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Yo("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const l=new ld(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Dh(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Dh(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Dh(e,n)}buildRequest(){const e={requestUri:QJ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$p(n)}return e}}function ZJ(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JJ(t){const e=Ug(qg(t)).link,n=e?Ug(qg(e)).deep_link_id:null,r=Ug(qg(t)).deep_link_id;return(r?Ug(qg(r)).link:null)||r||n||e||t}class tI{constructor(e){const n=Ug(qg(e)),r=n.apiKey??null,i=n.oobCode??null,a=ZJ(n.mode??null);Kt(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=JJ(e);try{return new tI(n)}catch{return null}}}class Rm{constructor(){this.providerId=Rm.PROVIDER_ID}static credential(e,n){return Ip._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=tI.parseLink(n);return Kt(r,"argument-error"),Ip._fromEmailAndCode(e,r.code,r.tenantId)}}Rm.PROVIDER_ID="password";Rm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Rm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class mL{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class h0 extends mL{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _c extends h0{constructor(){super("facebook.com")}static credential(e){return ld._fromParams({providerId:_c.PROVIDER_ID,signInMethod:_c.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _c.credentialFromTaggedObject(e)}static credentialFromError(e){return _c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _c.credential(e.oauthAccessToken)}catch{return null}}}_c.FACEBOOK_SIGN_IN_METHOD="facebook.com";_c.PROVIDER_ID="facebook.com";class Ec extends h0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ld._fromParams({providerId:Ec.PROVIDER_ID,signInMethod:Ec.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ec.credentialFromTaggedObject(e)}static credentialFromError(e){return Ec.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ec.credential(n,r)}catch{return null}}}Ec.GOOGLE_SIGN_IN_METHOD="google.com";Ec.PROVIDER_ID="google.com";class Ac extends h0{constructor(){super("github.com")}static credential(e){return ld._fromParams({providerId:Ac.PROVIDER_ID,signInMethod:Ac.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ac.credentialFromTaggedObject(e)}static credentialFromError(e){return Ac.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ac.credential(e.oauthAccessToken)}catch{return null}}}Ac.GITHUB_SIGN_IN_METHOD="github.com";Ac.PROVIDER_ID="github.com";class Sc extends h0{constructor(){super("twitter.com")}static credential(e,n){return ld._fromParams({providerId:Sc.PROVIDER_ID,signInMethod:Sc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Sc.credentialFromTaggedObject(e)}static credentialFromError(e){return Sc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Sc.credential(n,r)}catch{return null}}}Sc.TWITTER_SIGN_IN_METHOD="twitter.com";Sc.PROVIDER_ID="twitter.com";async function eee(t,e){return d0(t,"POST","/v1/accounts:signUp",uf(t,e))}class ud{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await qo._fromIdTokenResponse(e,r,i),l=_4(r);return new ud({user:a,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=_4(r);return new ud({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function _4(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class fv extends Ru{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,fv.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new fv(e,n,r,i)}}function gL(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?fv._fromErrorAndOperation(t,a,e,r):a})}async function tee(t,e,n=!1){const r=await Tp(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ud._forOperation(t,"link",r)}async function nee(t,e,n=!1){const{auth:r}=t;if(Ao(r.app))return Promise.reject(gu(r));const i="reauthenticate";try{const a=await Tp(t,gL(r,i,e,t),n);Kt(a.idToken,r,"internal-error");const l=ZT(a.idToken);Kt(l,r,"internal-error");const{sub:f}=l;return Kt(t.uid===f,r,"user-mismatch"),ud._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Yo(r,"user-mismatch"),a}}async function pL(t,e,n=!1){if(Ao(t.app))return Promise.reject(gu(t));const r="signIn",i=await gL(t,r,e),a=await ud._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function ree(t,e){return pL(Od(t),e)}async function yL(t){const e=Od(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function iee(t,e,n){if(Ao(t.app))return Promise.reject(gu(t));const r=Od(t),l=await xA(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eee).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&yL(t),m}),f=await ud._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(f.user),f}function aee(t,e,n){return Ao(t.app)?Promise.reject(gu(t)):ree(wr(t),Rm.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&yL(t),r})}function see(t,e,n,r){return wr(t).onIdTokenChanged(e,n,r)}function oee(t,e,n){return wr(t).beforeAuthStateChanged(e,n)}function lee(t,e,n,r){return wr(t).onAuthStateChanged(e,n,r)}function uee(t){return wr(t).signOut()}const dv="__sak";class vL{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dv,"1"),this.storage.removeItem(dv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const cee=1e3,fee=10;class xL extends vL{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uL(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,f,m)=>{this.notifyListeners(l,m)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);CJ()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,fee):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},cee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xL.type="LOCAL";const dee=xL;class bL extends vL{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bL.type="SESSION";const wL=bL;function hee(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Wx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Wx(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,l=this.handlersMap[i];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const f=Array.from(l).map(async p=>p(n.origin,a)),m=await hee(f);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wx.receivers=[];function nI(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class mee{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((f,m)=>{const p=nI("",20);i.port1.start();const b=setTimeout(()=>{m(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(_){const T=_;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(b),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(T.data.response);break;default:clearTimeout(b),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function Tl(){return window}function gee(t){Tl().location.href=t}function _L(){return typeof Tl().WorkerGlobalScope<"u"&&typeof Tl().importScripts=="function"}async function pee(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yee(){return navigator?.serviceWorker?.controller||null}function vee(){return _L()?self:null}const EL="firebaseLocalStorageDb",xee=1,hv="firebaseLocalStorage",AL="fbase_key";class m0{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $x(t,e){return t.transaction([hv],e?"readwrite":"readonly").objectStore(hv)}function bee(){const t=indexedDB.deleteDatabase(EL);return new m0(t).toPromise()}function bA(){const t=indexedDB.open(EL,xee);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(hv,{keyPath:AL})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(hv)?e(r):(r.close(),await bee(),e(await bA()))})})}async function E4(t,e,n){const r=$x(t,!0).put({[AL]:e,value:n});return new m0(r).toPromise()}async function wee(t,e){const n=$x(t,!1).get(e),r=await new m0(n).toPromise();return r===void 0?null:r.value}function A4(t,e){const n=$x(t,!0).delete(e);return new m0(n).toPromise()}const _ee=800,Eee=3;class SL{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bA(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Eee)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _L()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wx._getInstance(vee()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await pee(),!this.activeServiceWorker)return;this.sender=new mee(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yee()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bA();return await E4(e,dv,"1"),await A4(e,dv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>E4(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>wee(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>A4(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=$x(i,!1).getAll();return new m0(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_ee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SL.type="LOCAL";const Aee=SL;new f0(3e4,6e4);function See(t,e){return e?fu(e):(Kt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class rI extends eI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Dh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Dh(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Tee(t){return pL(t.auth,new rI(t),t.bypassAuthState)}function Iee(t){const{auth:e,user:n}=t;return Kt(n,e,"internal-error"),nee(n,new rI(t),t.bypassAuthState)}async function Cee(t){const{auth:e,user:n}=t;return Kt(n,e,"internal-error"),tee(n,new rI(t),t.bypassAuthState)}class TL{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:l,type:f}=e;if(l){this.reject(l);return}const m={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Tee;case"linkViaPopup":case"linkViaRedirect":return Cee;case"reauthViaPopup":case"reauthViaRedirect":return Iee;default:Yo(this.auth,"internal-error")}}resolve(e){Eu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Eu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Oee=new f0(2e3,1e4);class Ah extends TL{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Ah.currentPopupAction&&Ah.currentPopupAction.cancel(),Ah.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Kt(e,this.auth,"internal-error"),e}async onExecution(){Eu(this.filter.length===1,"Popup operations only handle one event");const e=nI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Sl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ah.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Oee.get())};e()}}Ah.currentPopupAction=null;const Nee="pendingRedirect",Cy=new Map;class Pee extends TL{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cy.get(this.auth._key());if(!e){try{const r=await Ree(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cy.set(this.auth._key(),e)}return this.bypassAuthState||Cy.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ree(t,e){const n=Mee(e),r=kee(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Dee(t,e){Cy.set(t._key(),e)}function kee(t){return fu(t._redirectPersistence)}function Mee(t){return Iy(Nee,t.config.apiKey,t.name)}async function jee(t,e,n=!1){if(Ao(t.app))return Promise.reject(gu(t));const r=Od(t),i=See(r,e),l=await new Pee(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}const Lee=600*1e3;class Bee{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Fee(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!IL(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Sl(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Lee&&this.cachedEventUids.clear(),this.cachedEventUids.has(S4(e))}saveEventToCache(e){this.cachedEventUids.add(S4(e)),this.lastProcessedEventTime=Date.now()}}function S4(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function IL({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Fee(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IL(t);default:return!1}}async function Vee(t,e={}){return cf(t,"GET","/v1/projects",e)}const zee=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Uee=/^https?/;async function qee(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Vee(t);for(const n of e)try{if(Gee(n))return}catch{}Yo(t,"unauthorized-domain")}function Gee(t){const e=yA(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!Uee.test(n))return!1;if(zee.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Hee=new f0(3e4,6e4);function T4(){const t=Tl().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Kee(t){return new Promise((e,n)=>{function r(){T4(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{T4(),n(Sl(t,"network-request-failed"))},timeout:Hee.get()})}if(Tl().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Tl().gapi?.load)r();else{const i=LJ("iframefcb");return Tl()[i]=()=>{gapi.load?r():n(Sl(t,"network-request-failed"))},fL(`${jJ()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Oy=null,e})}let Oy=null;function Wee(t){return Oy=Oy||Kee(t),Oy}const $ee=new f0(5e3,15e3),Yee="__/auth/iframe",Xee="emulator/auth/iframe",Qee={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zee=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jee(t){const e=t.config;Kt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?QT(e,Xee):`https://${t.config.authDomain}/${Yee}`,r={apiKey:e.apiKey,appName:t.name,v:xm},i=Zee.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${$p(r).slice(1)}`}async function ete(t){const e=await Wee(t),n=Tl().gapi;return Kt(n,t,"internal-error"),e.open({where:document.body,url:Jee(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qee,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=Sl(t,"network-request-failed"),f=Tl().setTimeout(()=>{a(l)},$ee.get());function m(){Tl().clearTimeout(f),i(r)}r.ping(m).then(m,()=>{a(l)})}))}const tte={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nte=500,rte=600,ite="_blank",ate="http://localhost";class I4{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ste(t,e,n,r=nte,i=rte){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const m={...tte,width:r.toString(),height:i.toString(),top:a,left:l},p=$i().toLowerCase();n&&(f=iL(p)?ite:n),nL(p)&&(e=e||ate,m.scrollbars="yes");const b=Object.entries(m).reduce((T,[N,j])=>`${T}${N}=${j},`,"");if(IJ(p)&&f!=="_self")return ote(e||"",f),new I4(null);const _=window.open(e||"",f,b);Kt(_,t,"popup-blocked");try{_.focus()}catch{}return new I4(_)}function ote(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const lte="__/auth/handler",ute="emulator/auth/handler",cte=encodeURIComponent("fac");async function C4(t,e,n,r,i,a){Kt(t.config.authDomain,t,"auth-domain-config-required"),Kt(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xm,eventId:i};if(e instanceof mL){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",WK(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,_]of Object.entries({}))l[b]=_}if(e instanceof h0){const b=e.getScopes().filter(_=>_!=="");b.length>0&&(l.scopes=b.join(","))}t.tenantId&&(l.tid=t.tenantId);const f=l;for(const b of Object.keys(f))f[b]===void 0&&delete f[b];const m=await t._getAppCheckToken(),p=m?`#${cte}=${encodeURIComponent(m)}`:"";return`${fte(t)}?${$p(f).slice(1)}${p}`}function fte({config:t}){return t.emulator?QT(t,ute):`https://${t.authDomain}/${lte}`}const Z_="webStorageSupport";class dte{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wL,this._completeRedirectFn=jee,this._overrideRedirectResult=Dee}async _openPopup(e,n,r,i){Eu(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await C4(e,n,r,yA(),i);return ste(e,a,nI())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await C4(e,n,r,yA(),i);return gee(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Eu(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ete(e),r=new Bee(e);return n.register("authEvent",i=>(Kt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Z_,{type:Z_},i=>{const a=i?.[0]?.[Z_];a!==void 0&&n(!!a),Yo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qee(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uL()||rL()||JT()}}const hte=dte;var O4="@firebase/auth",N4="1.12.0";class mte{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Kt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gte(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pte(t){Bh(new Zf("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:f}=r.options;Kt(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:l,authDomain:f,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cL(t)},p=new DJ(r,i,a,m);return qJ(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Bh(new Zf("auth-internal",e=>{const n=Od(e.getProvider("auth").getImmediate());return(r=>new mte(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dc(O4,N4,gte(t)),Dc(O4,N4,"esm2020")}const yte=300,vte=L5("authIdTokenMaxAge")||yte;let P4=null;const xte=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>vte)return;const i=n?.token;P4!==i&&(P4=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function bte(t=K5()){const e=Yp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=UJ(t,{popupRedirectResolver:hte,persistence:[Aee,dee,wL]}),r=L5("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=xte(a.toString());oee(n,l,()=>l(n.currentUser)),see(n,f=>l(f))}}const i=M5("auth");return i&&GJ(n,`http://${i}`),n}function wte(){return document.getElementsByTagName("head")?.[0]??document}kJ({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Sl("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",wte().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pte("Browser");const _te={apiKey:"AIzaSyCZZ2ywKsEe2ha3LyA-W_LWmFp1v8uqGv0",authDomain:"bodybalance-39bd5.firebaseapp.com",projectId:"bodybalance-39bd5",storageBucket:"bodybalance-39bd5.firebasestorage.app",messagingSenderId:"494273576542",appId:"1:494273576542:web:341c8966ffad7a9a213ecf"},iI=H5(_te),Go=bte(iI),Ti=E7(iI),Ete=Object.freeze(Object.defineProperty({__proto__:null,app:iI,auth:Go,firestore:Ti},Symbol.toStringTag,{value:"Module"})),R4=t=>{let e;const n=new Set,r=(p,b)=>{const _=typeof p=="function"?p(e):p;if(!Object.is(_,e)){const T=e;e=b??(typeof _!="object"||_===null)?_:Object.assign({},e,_),n.forEach(N=>N(e,T))}},i=()=>e,f={setState:r,getState:i,getInitialState:()=>m,subscribe:p=>(n.add(p),()=>n.delete(p))},m=e=t(r,i,f);return f},Ate=(t=>t?R4(t):R4),Ste=t=>t;function Tte(t,e=Ste){const n=zg.useSyncExternalStore(t.subscribe,zg.useCallback(()=>e(t.getState()),[t,e]),zg.useCallback(()=>e(t.getInitialState()),[t,e]));return zg.useDebugValue(n),n}const D4=t=>{const e=Ate(t),n=r=>Tte(e,r);return Object.assign(n,e),n},aI=(t=>t?D4(t):D4);var Ny={exports:{}},Ite=Ny.exports,k4;function Cte(){return k4||(k4=1,(function(t,e){((n,r)=>{t.exports=r()})(Ite,function(){var n=function(d,v){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(A,I){A.__proto__=I}:function(A,I){for(var P in I)Object.prototype.hasOwnProperty.call(I,P)&&(A[P]=I[P])}))(d,v)},r=function(){return(r=Object.assign||function(d){for(var v,A=1,I=arguments.length;A<I;A++)for(var P in v=arguments[A])Object.prototype.hasOwnProperty.call(v,P)&&(d[P]=v[P]);return d}).apply(this,arguments)};function i(d,v,A){for(var I,P=0,k=v.length;P<k;P++)!I&&P in v||((I=I||Array.prototype.slice.call(v,0,P))[P]=v[P]);return d.concat(I||Array.prototype.slice.call(v))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Vg,l=Object.keys,f=Array.isArray;function m(d,v){return typeof v=="object"&&l(v).forEach(function(A){d[A]=v[A]}),d}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var p=Object.getPrototypeOf,b={}.hasOwnProperty;function _(d,v){return b.call(d,v)}function T(d,v){typeof v=="function"&&(v=v(p(d))),(typeof Reflect>"u"?l:Reflect.ownKeys)(v).forEach(function(A){j(d,A,v[A])})}var N=Object.defineProperty;function j(d,v,A,I){N(d,v,m(A&&_(A,"get")&&typeof A.get=="function"?{get:A.get,set:A.set,configurable:!0}:{value:A,configurable:!0,writable:!0},I))}function M(d){return{from:function(v){return d.prototype=Object.create(v.prototype),j(d.prototype,"constructor",d),{extend:T.bind(null,d.prototype)}}}}var L=Object.getOwnPropertyDescriptor,z=[].slice;function $(d,v,A){return z.call(d,v,A)}function K(d,v){return v(d)}function ee(d){if(!d)throw new Error("Assertion Failed")}function ue(d){a.setImmediate?setImmediate(d):setTimeout(d,0)}function Z(d,v){if(typeof v=="string"&&_(d,v))return d[v];if(!v)return d;if(typeof v!="string"){for(var A=[],I=0,P=v.length;I<P;++I){var k=Z(d,v[I]);A.push(k)}return A}var F,G=v.indexOf(".");return G===-1||(F=d[v.substr(0,G)])==null?void 0:Z(F,v.substr(G+1))}function V(d,v,A){if(d&&v!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof v!="string"&&"length"in v){ee(typeof A!="string"&&"length"in A);for(var I=0,P=v.length;I<P;++I)V(d,v[I],A[I])}else{var k,F,G=v.indexOf(".");G!==-1?(k=v.substr(0,G),(G=v.substr(G+1))===""?A===void 0?f(d)&&!isNaN(parseInt(k))?d.splice(k,1):delete d[k]:d[k]=A:V(F=(F=d[k])&&_(d,k)?F:d[k]={},G,A)):A===void 0?f(d)&&!isNaN(parseInt(v))?d.splice(v,1):delete d[v]:d[v]=A}}function W(d){var v,A={};for(v in d)_(d,v)&&(A[v]=d[v]);return A}var U=[].concat;function ae(d){return U.apply([],d)}var Se="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ae([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(v){return v+d+"Array"})}))).filter(function(d){return a[d]}),ie=new Set(Se.map(function(d){return a[d]})),X=null;function J(d){return X=new WeakMap,d=(function v(A){if(!A||typeof A!="object")return A;var I=X.get(A);if(I)return I;if(f(A)){I=[],X.set(A,I);for(var P=0,k=A.length;P<k;++P)I.push(v(A[P]))}else if(ie.has(A.constructor))I=A;else{var F,G=p(A);for(F in I=G===Object.prototype?{}:Object.create(G),X.set(A,I),A)_(A,F)&&(I[F]=v(A[F]))}return I})(d),X=null,d}var xe={}.toString;function de(d){return xe.call(d).slice(8,-1)}var ye=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_e=typeof ye=="symbol"?function(d){var v;return d!=null&&(v=d[ye])&&v.apply(d)}:function(){return null};function qe(d,v){v=d.indexOf(v),0<=v&&d.splice(v,1)}var ze={};function et(d){var v,A,I,P;if(arguments.length===1){if(f(d))return d.slice();if(this===ze&&typeof d=="string")return[d];if(P=_e(d))for(A=[];!(I=P.next()).done;)A.push(I.value);else{if(d==null)return[d];if(typeof(v=d.length)!="number")return[d];for(A=new Array(v);v--;)A[v]=d[v]}}else for(v=arguments.length,A=new Array(v);v--;)A[v]=arguments[v];return A}var me=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Se=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],$n=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Se),Xe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ve(d,v){this.name=d,this.message=v}function pt(d,v){return d+". Errors: "+Object.keys(v).map(function(A){return v[A].toString()}).filter(function(A,I,P){return P.indexOf(A)===I}).join(`
`)}function $e(d,v,A,I){this.failures=v,this.failedKeys=I,this.successCount=A,this.message=pt(d,v)}function yt(d,v){this.name="BulkError",this.failures=Object.keys(v).map(function(A){return v[A]}),this.failuresByPos=v,this.message=pt(d,this.failures)}M(Ve).from(Error).extend({toString:function(){return this.name+": "+this.message}}),M($e).from(Ve),M(yt).from(Ve);var ut=$n.reduce(function(d,v){return d[v]=v+"Error",d},{}),Ne=Ve,Ye=$n.reduce(function(d,v){var A=v+"Error";function I(P,k){this.name=A,P?typeof P=="string"?(this.message="".concat(P).concat(k?`
 `+k:""),this.inner=k||null):typeof P=="object"&&(this.message="".concat(P.name," ").concat(P.message),this.inner=P):(this.message=Xe[v]||A,this.inner=null)}return M(I).from(Ne),d[v]=I,d},{}),_t=(Ye.Syntax=SyntaxError,Ye.Type=TypeError,Ye.Range=RangeError,Se.reduce(function(d,v){return d[v+"Error"]=Ye[v],d},{}));Se=$n.reduce(function(d,v){return["Syntax","Type","Range"].indexOf(v)===-1&&(d[v+"Error"]=Ye[v]),d},{});function Fe(){}function Rt(d){return d}function Wt(d,v){return d==null||d===Rt?v:function(A){return v(d(A))}}function mn(d,v){return function(){d.apply(this,arguments),v.apply(this,arguments)}}function Wn(d,v){return d===Fe?v:function(){var A=d.apply(this,arguments),I=(A!==void 0&&(arguments[0]=A),this.onsuccess),P=this.onerror,k=(this.onsuccess=null,this.onerror=null,v.apply(this,arguments));return I&&(this.onsuccess=this.onsuccess?mn(I,this.onsuccess):I),P&&(this.onerror=this.onerror?mn(P,this.onerror):P),k!==void 0?k:A}}function st(d,v){return d===Fe?v:function(){d.apply(this,arguments);var A=this.onsuccess,I=this.onerror;this.onsuccess=this.onerror=null,v.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?mn(A,this.onsuccess):A),I&&(this.onerror=this.onerror?mn(I,this.onerror):I)}}function zt(d,v){return d===Fe?v:function(P){var I=d.apply(this,arguments),P=(m(P,I),this.onsuccess),k=this.onerror,F=(this.onsuccess=null,this.onerror=null,v.apply(this,arguments));return P&&(this.onsuccess=this.onsuccess?mn(P,this.onsuccess):P),k&&(this.onerror=this.onerror?mn(k,this.onerror):k),I===void 0?F===void 0?void 0:F:m(I,F)}}function Et(d,v){return d===Fe?v:function(){return v.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function Zt(d,v){return d===Fe?v:function(){var A=d.apply(this,arguments);if(A&&typeof A.then=="function"){for(var I=this,P=arguments.length,k=new Array(P);P--;)k[P]=arguments[P];return A.then(function(){return v.apply(I,k)})}return v.apply(this,arguments)}}Se.ModifyError=$e,Se.DexieError=Ve,Se.BulkError=yt;var at=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function na(d){at=d}var zs={},hr=100,ba=typeof Promise>"u"?[]:($n=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[ba=crypto.subtle.digest("SHA-512",new Uint8Array([0])),p(ba),$n]:[$n,p($n),$n]),$n=ba[0],sn=ba[1],sn=sn&&sn.then,Fa=$n&&$n.constructor,bi=!!ba[2],Lr=function(d,v){Bn.push([d,v]),gs&&(queueMicrotask(ii),gs=!1)},Ro=!0,gs=!0,ps=[],In=[],rt=Rt,cn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Fe,pgp:!1,env:{},finalize:Fe},Ze=cn,Bn=[],Oi=0,Us=[];function ft(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var v=this._PSD=Ze;if(typeof d!="function"){if(d!==zs)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&wa(this,this._value)}else this._state=null,this._value=null,++v.ref,(function A(I,P){try{P(function(k){if(I._state===null){if(k===I)throw new TypeError("A promise cannot be resolved with itself.");var F=I._lib&&Hr();k&&typeof k.then=="function"?A(I,function(G,Q){k instanceof ft?k._then(G,Q):k.then(G,Q)}):(I._state=!0,I._value=k,Va(I)),F&&qi()}},wa.bind(null,I))}catch(k){wa(I,k)}})(this,d)}var tn={get:function(){var d=Ze,v=dt;function A(I,P){var k=this,F=!d.global&&(d!==Ze||v!==dt),G=F&&!Nr(),Q=new ft(function(re,ne){Er(k,new Yn(Ri(I,d,F,G),Ri(P,d,F,G),re,ne,d))});return this._consoleTask&&(Q._consoleTask=this._consoleTask),Q}return A.prototype=zs,A},set:function(d){j(this,"then",d&&d.prototype===zs?tn:{get:function(){return d},set:tn.set})}};function Yn(d,v,A,I,P){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof v=="function"?v:null,this.resolve=A,this.reject=I,this.psd=P}function wa(d,v){var A,I;In.push(v),d._state===null&&(A=d._lib&&Hr(),v=rt(v),d._state=!1,d._value=v,I=d,ps.some(function(P){return P._value===I._value})||ps.push(I),Va(d),A)&&qi()}function Va(d){var v=d._listeners;d._listeners=[];for(var A=0,I=v.length;A<I;++A)Er(d,v[A]);var P=d._PSD;--P.ref||P.finalize(),Oi===0&&(++Oi,Lr(function(){--Oi==0&&ra()},[]))}function Er(d,v){if(d._state===null)d._listeners.push(v);else{var A=d._state?v.onFulfilled:v.onRejected;if(A===null)return(d._state?v.resolve:v.reject)(d._value);++v.psd.ref,++Oi,Lr(Ll,[A,d,v])}}function Ll(d,v,A){try{var I,P=v._value;!v._state&&In.length&&(In=[]),I=at&&v._consoleTask?v._consoleTask.run(function(){return d(P)}):d(P),v._state||In.indexOf(P)!==-1||(k=>{for(var F=ps.length;F;)if(ps[--F]._value===k._value)return ps.splice(F,1)})(v),A.resolve(I)}catch(k){A.reject(k)}finally{--Oi==0&&ra(),--A.psd.ref||A.psd.finalize()}}function ii(){Pi(cn,function(){Hr()&&qi()})}function Hr(){var d=Ro;return gs=Ro=!1,d}function qi(){var d,v,A;do for(;0<Bn.length;)for(d=Bn,Bn=[],A=d.length,v=0;v<A;++v){var I=d[v];I[0].apply(null,I[1])}while(0<Bn.length);gs=Ro=!0}function ra(){for(var d=ps,v=(ps=[],d.forEach(function(I){I._PSD.onunhandled.call(null,I._value,I)}),Us.slice(0)),A=v.length;A;)v[--A]()}function ys(d){return new ft(zs,!1,d)}function _n(d,v){var A=Ze;return function(){var I=Hr(),P=Ze;try{return Wr(A,!0),d.apply(this,arguments)}catch(k){v&&v(k)}finally{Wr(P,!1),I&&qi()}}}T(ft.prototype,{then:tn,_then:function(d,v){Er(this,new Yn(null,null,d,v,Ze))},catch:function(d){var v,A;return arguments.length===1?this.then(null,d):(v=d,A=arguments[1],typeof v=="function"?this.then(null,function(I){return(I instanceof v?A:ys)(I)}):this.then(null,function(I){return(I&&I.name===v?A:ys)(I)}))},finally:function(d){return this.then(function(v){return ft.resolve(d()).then(function(){return v})},function(v){return ft.resolve(d()).then(function(){return ys(v)})})},timeout:function(d,v){var A=this;return d<1/0?new ft(function(I,P){var k=setTimeout(function(){return P(new Ye.Timeout(v))},d);A.then(I,P).finally(clearTimeout.bind(null,k))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&j(ft.prototype,Symbol.toStringTag,"Dexie.Promise"),cn.env=Bl(),T(ft,{all:function(){var d=et.apply(null,arguments).map(za);return new ft(function(v,A){d.length===0&&v([]);var I=d.length;d.forEach(function(P,k){return ft.resolve(P).then(function(F){d[k]=F,--I||v(d)},A)})})},resolve:function(d){return d instanceof ft?d:d&&typeof d.then=="function"?new ft(function(v,A){d.then(v,A)}):new ft(zs,!0,d)},reject:ys,race:function(){var d=et.apply(null,arguments).map(za);return new ft(function(v,A){d.map(function(I){return ft.resolve(I).then(v,A)})})},PSD:{get:function(){return Ze},set:function(d){return Ze=d}},totalEchoes:{get:function(){return dt}},newPSD:Fn,usePSD:Pi,scheduler:{get:function(){return Lr},set:function(d){Lr=d}},rejectionMapper:{get:function(){return rt},set:function(d){rt=d}},follow:function(d,v){return new ft(function(A,I){return Fn(function(P,k){var F=Ze;F.unhandleds=[],F.onunhandled=k,F.finalize=mn(function(){var G,Q=this;G=function(){Q.unhandleds.length===0?P():k(Q.unhandleds[0])},Us.push(function re(){G(),Us.splice(Us.indexOf(re),1)}),++Oi,Lr(function(){--Oi==0&&ra()},[])},F.finalize),d()},v,A,I)})}}),Fa&&(Fa.allSettled&&j(ft,"allSettled",function(){var d=et.apply(null,arguments).map(za);return new ft(function(v){d.length===0&&v([]);var A=d.length,I=new Array(A);d.forEach(function(P,k){return ft.resolve(P).then(function(F){return I[k]={status:"fulfilled",value:F}},function(F){return I[k]={status:"rejected",reason:F}}).then(function(){return--A||v(I)})})})}),Fa.any&&typeof AggregateError<"u"&&j(ft,"any",function(){var d=et.apply(null,arguments).map(za);return new ft(function(v,A){d.length===0&&A(new AggregateError([]));var I=d.length,P=new Array(I);d.forEach(function(k,F){return ft.resolve(k).then(function(G){return v(G)},function(G){P[F]=G,--I||A(new AggregateError(P))})})})}),Fa.withResolvers)&&(ft.withResolvers=Fa.withResolvers);var mr={awaits:0,echoes:0,id:0},Kr=0,ci=[],fi=0,dt=0,Ni=0;function Fn(d,F,A,I){var P=Ze,k=Object.create(P),F=(k.parent=P,k.ref=0,k.global=!1,k.id=++Ni,cn.env,k.env=bi?{Promise:ft,PromiseProp:{value:ft,configurable:!0,writable:!0},all:ft.all,race:ft.race,allSettled:ft.allSettled,any:ft.any,resolve:ft.resolve,reject:ft.reject}:{},F&&m(k,F),++P.ref,k.finalize=function(){--this.parent.ref||this.parent.finalize()},Pi(k,d,A,I));return k.ref===0&&k.finalize(),F}function gn(){return mr.id||(mr.id=++Kr),++mr.awaits,mr.echoes+=hr,mr.id}function Nr(){return!!mr.awaits&&(--mr.awaits==0&&(mr.id=0),mr.echoes=mr.awaits*hr,!0)}function za(d){return mr.echoes&&d&&d.constructor===Fa?(gn(),d.then(function(v){return Nr(),v},function(v){return Nr(),Mt(v)})):d}function Zo(){var d=ci[ci.length-1];ci.pop(),Wr(d,!1)}function Wr(d,v){var A,I,P=Ze;(v?!mr.echoes||fi++&&d===Ze:!fi||--fi&&d===Ze)||queueMicrotask(v?(function(k){++dt,mr.echoes&&--mr.echoes!=0||(mr.echoes=mr.awaits=mr.id=0),ci.push(Ze),Wr(k,!0)}).bind(null,d):Zo),d!==Ze&&(Ze=d,P===cn&&(cn.env=Bl()),bi)&&(A=cn.env.Promise,I=d.env,P.global||d.global)&&(Object.defineProperty(a,"Promise",I.PromiseProp),A.all=I.all,A.race=I.race,A.resolve=I.resolve,A.reject=I.reject,I.allSettled&&(A.allSettled=I.allSettled),I.any)&&(A.any=I.any)}function Bl(){var d=a.Promise;return bi?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function Pi(d,v,A,I,P){var k=Ze;try{return Wr(d,!0),v(A,I,P)}finally{Wr(k,!1)}}function Ri(d,v,A,I){return typeof d!="function"?d:function(){var P=Ze;A&&gn(),Wr(v,!0);try{return d.apply(this,arguments)}finally{Wr(P,!1),I&&queueMicrotask(Nr)}}}function Qn(d){Promise===Fa&&mr.echoes===0?fi===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+sn).indexOf("[native code]")===-1&&(gn=Nr=Fe);var Mt=ft.reject,$r="",rr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ar="String expected.",Ge=[],uo="__dbnames",Cn="readonly",wi="readwrite";function ss(d,v){return d?v?function(){return d.apply(this,arguments)&&v.apply(this,arguments)}:d:v}var yn={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ln(d){return typeof d!="string"||/\./.test(d)?function(v){return v}:function(v){return v[d]===void 0&&d in v&&delete(v=J(v))[d],v}}function nn(){throw Ye.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Qt(d,v){try{var A=Di(d),I=Di(v);if(A!==I)return A==="Array"?1:I==="Array"?-1:A==="binary"?1:I==="binary"?-1:A==="string"?1:I==="string"?-1:A==="Date"?1:I!=="Date"?NaN:-1;switch(A){case"number":case"Date":case"string":return v<d?1:d<v?-1:0;case"binary":for(var P=Sr(d),k=Sr(v),F=P.length,G=k.length,Q=F<G?F:G,re=0;re<Q;++re)if(P[re]!==k[re])return P[re]<k[re]?-1:1;return F===G?0:F<G?-1:1;case"Array":for(var ne=d,oe=v,fe=ne.length,le=oe.length,ge=fe<le?fe:le,he=0;he<ge;++he){var we=Qt(ne[he],oe[he]);if(we!==0)return we}return fe===le?0:fe<le?-1:1}}catch{}return NaN}function Di(d){var v=typeof d;return v=="object"&&(ArrayBuffer.isView(d)||(v=de(d))==="ArrayBuffer")?"binary":v}function Sr(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function rn(d,v,A){var I=d.schema.yProps;return I?(v&&0<A.numFailures&&(v=v.filter(function(P,k){return!A.failures[k]})),Promise.all(I.map(function(P){return P=P.updatesTable,v?d.db.table(P).where("k").anyOf(v).delete():d.db.table(P).clear()})).then(function(){return A})):A}Jo.prototype.execute=function(d){var v=this["@@propmod"];if(v.add!==void 0){var A=v.add;if(f(A))return i(i([],f(d)?d:[],!0),A).sort();if(typeof A=="number")return(Number(d)||0)+A;if(typeof A=="bigint")try{return BigInt(d)+A}catch{return BigInt(0)+A}throw new TypeError("Invalid term ".concat(A))}if(v.remove!==void 0){var I=v.remove;if(f(I))return f(d)?d.filter(function(P){return!I.includes(P)}).sort():[];if(typeof I=="number")return Number(d)-I;if(typeof I=="bigint")try{return BigInt(d)-I}catch{return BigInt(0)-I}throw new TypeError("Invalid subtrahend ".concat(I))}return A=(A=v.replacePrefix)==null?void 0:A[0],A&&typeof d=="string"&&d.startsWith(A)?v.replacePrefix[1]+d.substring(A.length):d};var ai=Jo;function Jo(d){this["@@propmod"]=d}function Vt(d,v){for(var A=l(v),I=A.length,P=!1,k=0;k<I;++k){var F=A[k],G=v[F],Q=Z(d,F);G instanceof ai?(V(d,F,G.execute(Q)),P=!0):Q!==G&&(V(d,F,G),P=!0)}return P}vn.prototype._trans=function(d,v,A){var I=this._tx||Ze.trans,P=this.name,k=at&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function F(re,ne,oe){if(oe.schema[P])return v(oe.idbtrans,oe);throw new Ye.NotFound("Table "+P+" not part of transaction")}var G=Hr();try{var Q=I&&I.db._novip===this.db._novip?I===Ze.trans?I._promise(d,F,A):Fn(function(){return I._promise(d,F,A)},{trans:I,transless:Ze.transless||Ze}):(function re(ne,oe,fe,le){if(ne.idbdb&&(ne._state.openComplete||Ze.letThrough||ne._vip)){var ge=ne._createTransaction(oe,fe,ne._dbSchema);try{ge.create(),ne._state.PR1398_maxLoop=3}catch(he){return he.name===ut.InvalidState&&ne.isOpen()&&0<--ne._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ne.close({disableAutoOpen:!1}),ne.open().then(function(){return re(ne,oe,fe,le)})):Mt(he)}return ge._promise(oe,function(he,we){return Fn(function(){return Ze.trans=ge,le(he,we,ge)})}).then(function(he){if(oe==="readwrite")try{ge.idbtrans.commit()}catch{}return oe==="readonly"?he:ge._completion.then(function(){return he})})}if(ne._state.openComplete)return Mt(new Ye.DatabaseClosed(ne._state.dbOpenError));if(!ne._state.isBeingOpened){if(!ne._state.autoOpen)return Mt(new Ye.DatabaseClosed);ne.open().catch(Fe)}return ne._state.dbReadyPromise.then(function(){return re(ne,oe,fe,le)})})(this.db,d,[this.name],F);return k&&(Q._consoleTask=k,Q=Q.catch(function(re){return console.trace(re),Mt(re)})),Q}finally{G&&qi()}},vn.prototype.get=function(d,v){var A=this;return d&&d.constructor===Object?this.where(d).first(v):d==null?Mt(new Ye.Type("Invalid argument to Table.get()")):this._trans("readonly",function(I){return A.core.get({trans:I,key:d}).then(function(P){return A.hook.reading.fire(P)})}).then(v)},vn.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(f(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var v=l(d);if(v.length===1)return this.where(v[0]).equals(d[v[0]]);var A=this.schema.indexes.concat(this.schema.primKey).filter(function(G){if(G.compound&&v.every(function(re){return 0<=G.keyPath.indexOf(re)})){for(var Q=0;Q<v.length;++Q)if(v.indexOf(G.keyPath[Q])===-1)return!1;return!0}return!1}).sort(function(G,Q){return G.keyPath.length-Q.keyPath.length})[0];if(A&&this.db._maxKey!==$r)return F=A.keyPath.slice(0,v.length),this.where(F).equals(F.map(function(G){return d[G]}));!A&&at&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(v.join("+"),"]"));var I=this.schema.idxByName;function P(G,Q){return Qt(G,Q)===0}var F=v.reduce(function(ne,Q){var re=ne[0],ne=ne[1],oe=I[Q],fe=d[Q];return[re||oe,re||!oe?ss(ne,oe&&oe.multi?function(le){return le=Z(le,Q),f(le)&&le.some(function(ge){return P(fe,ge)})}:function(le){return P(fe,Z(le,Q))}):ne]},[null,null]),k=F[0],F=F[1];return k?this.where(k.name).equals(d[k.keyPath]).filter(F):A?this.filter(F):this.where(v).equals("")},vn.prototype.filter=function(d){return this.toCollection().and(d)},vn.prototype.count=function(d){return this.toCollection().count(d)},vn.prototype.offset=function(d){return this.toCollection().offset(d)},vn.prototype.limit=function(d){return this.toCollection().limit(d)},vn.prototype.each=function(d){return this.toCollection().each(d)},vn.prototype.toArray=function(d){return this.toCollection().toArray(d)},vn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},vn.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,f(d)?"[".concat(d.join("+"),"]"):d))},vn.prototype.reverse=function(){return this.toCollection().reverse()},vn.prototype.mapToClass=function(d){for(var v=this.db,A=this.name,I=((this.schema.mappedClass=d).prototype instanceof nn&&(d=(F=>{var G=ne,Q=F;if(typeof Q!="function"&&Q!==null)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");function re(){this.constructor=G}function ne(){return F!==null&&F.apply(this,arguments)||this}return n(G,Q),G.prototype=Q===null?Object.create(Q):(re.prototype=Q.prototype,new re),Object.defineProperty(ne.prototype,"db",{get:function(){return v},enumerable:!1,configurable:!0}),ne.prototype.table=function(){return A},ne})(d)),new Set),P=d.prototype;P;P=p(P))Object.getOwnPropertyNames(P).forEach(function(F){return I.add(F)});function k(F){if(!F)return F;var G,Q=Object.create(d.prototype);for(G in F)if(!I.has(G))try{Q[G]=F[G]}catch{}return Q}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=k,this.hook("reading",k),d},vn.prototype.defineClass=function(){return this.mapToClass(function(d){m(this,d)})},vn.prototype.add=function(d,v){var A=this,I=this.schema.primKey,P=I.auto,k=I.keyPath,F=d;return k&&P&&(F=ln(k)(d)),this._trans("readwrite",function(G){return A.core.mutate({trans:G,type:"add",keys:v!=null?[v]:null,values:[F]})}).then(function(G){return G.numFailures?ft.reject(G.failures[0]):G.lastResult}).then(function(G){if(k)try{V(d,k,G)}catch{}return G})},vn.prototype.upsert=function(d,v){var A=this,I=this.schema.primKey.keyPath;return this._trans("readwrite",function(P){return A.core.get({trans:P,key:d}).then(function(k){var F=k??{};return Vt(F,v),I&&V(F,I,d),A.core.mutate({trans:P,type:"put",values:[F],keys:[d],upsert:!0,updates:{keys:[d],changeSpecs:[v]}}).then(function(G){return G.numFailures?ft.reject(G.failures[0]):!!k})})})},vn.prototype.update=function(d,v){return typeof d!="object"||f(d)?this.where(":id").equals(d).modify(v):(d=Z(d,this.schema.primKey.keyPath))===void 0?Mt(new Ye.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(v)},vn.prototype.put=function(d,v){var A=this,I=this.schema.primKey,P=I.auto,k=I.keyPath,F=d;return k&&P&&(F=ln(k)(d)),this._trans("readwrite",function(G){return A.core.mutate({trans:G,type:"put",values:[F],keys:v!=null?[v]:null})}).then(function(G){return G.numFailures?ft.reject(G.failures[0]):G.lastResult}).then(function(G){if(k)try{V(d,k,G)}catch{}return G})},vn.prototype.delete=function(d){var v=this;return this._trans("readwrite",function(A){return v.core.mutate({trans:A,type:"delete",keys:[d]}).then(function(I){return rn(v,[d],I)}).then(function(I){return I.numFailures?ft.reject(I.failures[0]):void 0})})},vn.prototype.clear=function(){var d=this;return this._trans("readwrite",function(v){return d.core.mutate({trans:v,type:"deleteRange",range:yn}).then(function(A){return rn(d,null,A)})}).then(function(v){return v.numFailures?ft.reject(v.failures[0]):void 0})},vn.prototype.bulkGet=function(d){var v=this;return this._trans("readonly",function(A){return v.core.getMany({keys:d,trans:A}).then(function(I){return I.map(function(P){return v.hook.reading.fire(P)})})})},vn.prototype.bulkAdd=function(d,v,A){var I=this,P=Array.isArray(v)?v:void 0,k=(A=A||(P?void 0:v))?A.allKeys:void 0;return this._trans("readwrite",function(F){var G=I.schema.primKey,re=G.auto,G=G.keyPath;if(G&&P)throw new Ye.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(P&&P.length!==d.length)throw new Ye.InvalidArgument("Arguments objects and keys must have the same length");var Q=d.length,re=G&&re?d.map(ln(G)):d;return I.core.mutate({trans:F,type:"add",keys:P,values:re,wantResults:k}).then(function(ne){var oe=ne.numFailures,fe=ne.failures;if(oe===0)return k?ne.results:ne.lastResult;throw new yt("".concat(I.name,".bulkAdd(): ").concat(oe," of ").concat(Q," operations failed"),fe)})})},vn.prototype.bulkPut=function(d,v,A){var I=this,P=Array.isArray(v)?v:void 0,k=(A=A||(P?void 0:v))?A.allKeys:void 0;return this._trans("readwrite",function(F){var G=I.schema.primKey,re=G.auto,G=G.keyPath;if(G&&P)throw new Ye.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(P&&P.length!==d.length)throw new Ye.InvalidArgument("Arguments objects and keys must have the same length");var Q=d.length,re=G&&re?d.map(ln(G)):d;return I.core.mutate({trans:F,type:"put",keys:P,values:re,wantResults:k}).then(function(ne){var oe=ne.numFailures,fe=ne.failures;if(oe===0)return k?ne.results:ne.lastResult;throw new yt("".concat(I.name,".bulkPut(): ").concat(oe," of ").concat(Q," operations failed"),fe)})})},vn.prototype.bulkUpdate=function(d){var v=this,A=this.core,I=d.map(function(F){return F.key}),P=d.map(function(F){return F.changes}),k=[];return this._trans("readwrite",function(F){return A.getMany({trans:F,keys:I,cache:"clone"}).then(function(G){var Q=[],re=[],ne=(d.forEach(function(oe,fe){var le=oe.key,ge=oe.changes,he=G[fe];if(he){for(var we=0,Ce=Object.keys(ge);we<Ce.length;we++){var be=Ce[we],Me=ge[be];if(be===v.schema.primKey.keyPath){if(Qt(Me,le)!==0)throw new Ye.Constraint("Cannot update primary key in bulkUpdate()")}else V(he,be,Me)}k.push(fe),Q.push(le),re.push(he)}}),Q.length);return A.mutate({trans:F,type:"put",keys:Q,values:re,updates:{keys:I,changeSpecs:P}}).then(function(oe){var fe=oe.numFailures,le=oe.failures;if(fe===0)return ne;for(var ge=0,he=Object.keys(le);ge<he.length;ge++){var we,Ce=he[ge],be=k[Number(Ce)];be!=null&&(we=le[Ce],delete le[Ce],le[be]=we)}throw new yt("".concat(v.name,".bulkUpdate(): ").concat(fe," of ").concat(ne," operations failed"),le)})})})},vn.prototype.bulkDelete=function(d){var v=this,A=d.length;return this._trans("readwrite",function(I){return v.core.mutate({trans:I,type:"delete",keys:d}).then(function(P){return rn(v,d,P)})}).then(function(I){var P=I.numFailures,k=I.failures;if(P===0)return I.lastResult;throw new yt("".concat(v.name,".bulkDelete(): ").concat(P," of ").concat(A," operations failed"),k)})};var Gi=vn;function vn(){}function ki(d){function v(F,G){if(G){for(var Q=arguments.length,re=new Array(Q-1);--Q;)re[Q-1]=arguments[Q];return A[F].subscribe.apply(null,re),d}if(typeof F=="string")return A[F]}var A={};v.addEventType=k;for(var I=1,P=arguments.length;I<P;++I)k(arguments[I]);return v;function k(F,G,Q){var re,ne;if(typeof F!="object")return G=G||Et,ne={subscribers:[],fire:Q=Q||Fe,subscribe:function(oe){ne.subscribers.indexOf(oe)===-1&&(ne.subscribers.push(oe),ne.fire=G(ne.fire,oe))},unsubscribe:function(oe){ne.subscribers=ne.subscribers.filter(function(fe){return fe!==oe}),ne.fire=ne.subscribers.reduce(G,Q)}},A[F]=v[F]=ne;l(re=F).forEach(function(oe){var fe=re[oe];if(f(fe))k(oe,re[oe][0],re[oe][1]);else{if(fe!=="asap")throw new Ye.InvalidArgument("Invalid event config");var le=k(oe,Rt,function(){for(var ge=arguments.length,he=new Array(ge);ge--;)he[ge]=arguments[ge];le.subscribers.forEach(function(we){ue(function(){we.apply(null,he)})})})}})}}function $t(d,v){return M(v).from({prototype:d}),v}function Zn(d,v){return!(d.filter||d.algorithm||d.or)&&(v?d.justLimit:!d.replayFilter)}function Te(d,v){d.filter=ss(d.filter,v)}function ce(d,v,A){var I=d.replayFilter;d.replayFilter=I?function(){return ss(I(),v())}:v,d.justLimit=A&&!I}function wt(d,v){if(d.isPrimKey)return v.primaryKey;var A=v.getIndexByKeyPath(d.index);if(A)return A;throw new Ye.Schema("KeyPath "+d.index+" on object store "+v.name+" is not indexed")}function Pr(d,v,A){var I=wt(d,v.schema);return v.openCursor({trans:A,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:I,range:d.range}})}function Rr(d,v,A,I){var P,k,F=d.replayFilter?ss(d.filter,d.replayFilter()):d.filter;return d.or?(P={},k=function(G,Q,re){var ne,oe;F&&!F(Q,re,function(fe){return Q.stop(fe)},function(fe){return Q.fail(fe)})||((oe=""+(ne=Q.primaryKey))=="[object ArrayBuffer]"&&(oe=""+new Uint8Array(ne)),_(P,oe))||(P[oe]=!0,v(G,Q,re))},Promise.all([d.or._iterate(k,A),Hi(Pr(d,I,A),d.algorithm,k,!d.keysOnly&&d.valueMapper)])):Hi(Pr(d,I,A),ss(d.algorithm,F),v,!d.keysOnly&&d.valueMapper)}function Hi(d,v,A,I){var P=_n(I?function(k,F,G){return A(I(k),F,G)}:A);return d.then(function(k){if(k)return k.start(function(){var F=function(){return k.continue()};v&&!v(k,function(G){return F=G},function(G){k.stop(G),F=Fe},function(G){k.fail(G),F=Fe})||P(k.value,k,function(G){return F=G}),F()})})}Ut.prototype._read=function(d,v){var A=this._ctx;return A.error?A.table._trans(null,Mt.bind(null,A.error)):A.table._trans("readonly",d).then(v)},Ut.prototype._write=function(d){var v=this._ctx;return v.error?v.table._trans(null,Mt.bind(null,v.error)):v.table._trans("readwrite",d,"locked")},Ut.prototype._addAlgorithm=function(d){var v=this._ctx;v.algorithm=ss(v.algorithm,d)},Ut.prototype._iterate=function(d,v){return Rr(this._ctx,d,v,this._ctx.table.core)},Ut.prototype.clone=function(d){var v=Object.create(this.constructor.prototype),A=Object.create(this._ctx);return d&&m(A,d),v._ctx=A,v},Ut.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ut.prototype.each=function(d){var v=this._ctx;return this._read(function(A){return Rr(v,d,A,v.table.core)})},Ut.prototype.count=function(d){var v=this;return this._read(function(A){var I,P=v._ctx,k=P.table.core;return Zn(P,!0)?k.count({trans:A,query:{index:wt(P,k.schema),range:P.range}}).then(function(F){return Math.min(F,P.limit)}):(I=0,Rr(P,function(){return++I,!1},A,k).then(function(){return I}))}).then(d)},Ut.prototype.sortBy=function(d,v){var A=d.split(".").reverse(),I=A[0],P=A.length-1;function k(Q,re){return re?k(Q[A[re]],re-1):Q[I]}var F=this._ctx.dir==="next"?1:-1;function G(Q,re){return Qt(k(Q,P),k(re,P))*F}return this.toArray(function(Q){return Q.sort(G)}).then(v)},Ut.prototype.toArray=function(d){var v=this;return this._read(function(A){var I,P,k,F=v._ctx;return F.dir==="next"&&Zn(F,!0)&&0<F.limit?(I=F.valueMapper,P=wt(F,F.table.core.schema),F.table.core.query({trans:A,limit:F.limit,values:!0,query:{index:P,range:F.range}}).then(function(G){return G=G.result,I?G.map(I):G})):(k=[],Rr(F,function(G){return k.push(G)},A,F.table.core).then(function(){return k}))},d)},Ut.prototype.offset=function(d){var v=this._ctx;return d<=0||(v.offset+=d,Zn(v)?ce(v,function(){var A=d;return function(I,P){return A===0||(A===1?--A:P(function(){I.advance(A),A=0}),!1)}}):ce(v,function(){var A=d;return function(){return--A<0}})),this},Ut.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),ce(this._ctx,function(){var v=d;return function(A,I,P){return--v<=0&&I(P),0<=v}},!0),this},Ut.prototype.until=function(d,v){return Te(this._ctx,function(A,I,P){return!d(A.value)||(I(P),v)}),this},Ut.prototype.first=function(d){return this.limit(1).toArray(function(v){return v[0]}).then(d)},Ut.prototype.last=function(d){return this.reverse().first(d)},Ut.prototype.filter=function(d){var v;return Te(this._ctx,function(A){return d(A.value)}),(v=this._ctx).isMatch=ss(v.isMatch,d),this},Ut.prototype.and=function(d){return this.filter(d)},Ut.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},Ut.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ut.prototype.desc=function(){return this.reverse()},Ut.prototype.eachKey=function(d){var v=this._ctx;return v.keysOnly=!v.isMatch,this.each(function(A,I){d(I.key,I)})},Ut.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},Ut.prototype.eachPrimaryKey=function(d){var v=this._ctx;return v.keysOnly=!v.isMatch,this.each(function(A,I){d(I.primaryKey,I)})},Ut.prototype.keys=function(d){var v=this._ctx,A=(v.keysOnly=!v.isMatch,[]);return this.each(function(I,P){A.push(P.key)}).then(function(){return A}).then(d)},Ut.prototype.primaryKeys=function(d){var v=this._ctx;if(v.dir==="next"&&Zn(v,!0)&&0<v.limit)return this._read(function(I){var P=wt(v,v.table.core.schema);return v.table.core.query({trans:I,values:!1,limit:v.limit,query:{index:P,range:v.range}})}).then(function(I){return I.result}).then(d);v.keysOnly=!v.isMatch;var A=[];return this.each(function(I,P){A.push(P.primaryKey)}).then(function(){return A}).then(d)},Ut.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},Ut.prototype.firstKey=function(d){return this.limit(1).keys(function(v){return v[0]}).then(d)},Ut.prototype.lastKey=function(d){return this.reverse().firstKey(d)},Ut.prototype.distinct=function(){var d,v=this._ctx,v=v.index&&v.table.schema.idxByName[v.index];return v&&v.multi&&(d={},Te(this._ctx,function(I){var I=I.primaryKey.toString(),P=_(d,I);return d[I]=!0,!P})),this},Ut.prototype.modify=function(d){var v=this,A=this._ctx;return this._write(function(I){function P(he,we){var Ce=we.failures;fe+=he-we.numFailures;for(var be=0,Me=l(Ce);be<Me.length;be++){var He=Me[be];oe.push(Ce[He])}}var k=typeof d=="function"?d:function(he){return Vt(he,d)},F=A.table.core,ne=F.schema.primaryKey,G=ne.outbound,Q=ne.extractKey,re=200,ne=v.db._options.modifyChunkSize,oe=(ne&&(re=typeof ne=="object"?ne[F.name]||ne["*"]||200:ne),[]),fe=0,le=[],ge=d===Nt;return v.clone().primaryKeys().then(function(he){function we(be){var Me=Math.min(re,he.length-be),He=he.slice(be,be+Me);return(ge?Promise.resolve([]):F.getMany({trans:I,keys:He,cache:"immutable"})).then(function(lt){var ct=[],tt=[],vt=G?[]:null,gt=ge?He:[];if(!ge)for(var it=0;it<Me;++it){var xt=lt[it],Xt={value:J(xt),primKey:he[be+it]};k.call(Xt,Xt.value,Xt)!==!1&&(Xt.value==null?gt.push(he[be+it]):G||Qt(Q(xt),Q(Xt.value))===0?(tt.push(Xt.value),G&&vt.push(he[be+it])):(gt.push(he[be+it]),ct.push(Xt.value)))}return Promise.resolve(0<ct.length&&F.mutate({trans:I,type:"add",values:ct}).then(function(wn){for(var Bt in wn.failures)gt.splice(parseInt(Bt),1);P(ct.length,wn)})).then(function(){return(0<tt.length||Ce&&typeof d=="object")&&F.mutate({trans:I,type:"put",keys:vt,values:tt,criteria:Ce,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<be}).then(function(wn){return P(tt.length,wn)})}).then(function(){return(0<gt.length||Ce&&ge)&&F.mutate({trans:I,type:"delete",keys:gt,criteria:Ce,isAdditionalChunk:0<be}).then(function(wn){return rn(A.table,gt,wn)}).then(function(wn){return P(gt.length,wn)})}).then(function(){return he.length>be+Me&&we(be+re)})})}var Ce=Zn(A)&&A.limit===1/0&&(typeof d!="function"||ge)&&{index:A.index,range:A.range};return we(0).then(function(){if(0<oe.length)throw new $e("Error modifying one or more objects",oe,fe,le);return he.length})})})},Ut.prototype.delete=function(){var d=this._ctx,v=d.range;return!Zn(d)||d.table.schema.yProps||!d.isPrimKey&&v.type!==3?this.modify(Nt):this._write(function(A){var I=d.table.core.schema.primaryKey,P=v;return d.table.core.count({trans:A,query:{index:I,range:P}}).then(function(k){return d.table.core.mutate({trans:A,type:"deleteRange",range:P}).then(function(Q){var G=Q.failures,Q=Q.numFailures;if(Q)throw new $e("Could not delete some values",Object.keys(G).map(function(re){return G[re]}),k-Q);return k-Q})})})};var el=Ut;function Ut(){}var Nt=function(d,v){return v.value=null};function Vn(d,v){return d<v?-1:d===v?0:1}function Fl(d,v){return v<d?-1:d===v?0:1}function Yr(d,v,A){return d=d instanceof Jn?new d.Collection(d):d,d._ctx.error=new(A||TypeError)(v),d}function _a(d){return new d.Collection(d,function(){return Ea("")}).limit(0)}function _i(le,v,A,I){var P,k,F,G,Q,re,ne,oe=A.length;if(!A.every(function(he){return typeof he=="string"}))return Yr(le,Ar);function fe(he){P=he==="next"?function(Ce){return Ce.toUpperCase()}:function(Ce){return Ce.toLowerCase()},k=he==="next"?function(Ce){return Ce.toLowerCase()}:function(Ce){return Ce.toUpperCase()},F=he==="next"?Vn:Fl;var we=A.map(function(Ce){return{lower:k(Ce),upper:P(Ce)}}).sort(function(Ce,be){return F(Ce.lower,be.lower)});G=we.map(function(Ce){return Ce.upper}),Q=we.map(function(Ce){return Ce.lower}),ne=(re=he)==="next"?"":I}fe("next");var le=new le.Collection(le,function(){return ia(G[0],Q[oe-1]+I)}),ge=(le._ondirectionchange=function(he){fe(he)},0);return le._addAlgorithm(function(he,we,Ce){var be=he.key;if(typeof be=="string"){var Me=k(be);if(v(Me,Q,ge))return!0;for(var He=null,lt=ge;lt<oe;++lt){var ct=((tt,vt,gt,it,xt,Xt)=>{for(var wn=Math.min(tt.length,it.length),Bt=-1,Jt=0;Jt<wn;++Jt){var gr=vt[Jt];if(gr!==it[Jt])return xt(tt[Jt],gt[Jt])<0?tt.substr(0,Jt)+gt[Jt]+gt.substr(Jt+1):xt(tt[Jt],it[Jt])<0?tt.substr(0,Jt)+it[Jt]+gt.substr(Jt+1):0<=Bt?tt.substr(0,Bt)+vt[Bt]+gt.substr(Bt+1):null;xt(tt[Jt],gr)<0&&(Bt=Jt)}return wn<it.length&&Xt==="next"?tt+gt.substr(tt.length):wn<tt.length&&Xt==="prev"?tt.substr(0,gt.length):Bt<0?null:tt.substr(0,Bt)+it[Bt]+gt.substr(Bt+1)})(be,Me,G[lt],Q[lt],F,re);ct===null&&He===null?ge=lt+1:(He===null||0<F(He,ct))&&(He=ct)}we(He!==null?function(){he.continue(He+ne)}:Ce)}return!1}),le}function ia(d,v,A,I){return{type:2,lower:d,upper:v,lowerOpen:A,upperOpen:I}}function Ea(d){return{type:1,lower:d,upper:d}}Object.defineProperty(Mn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Mn.prototype.between=function(d,v,A,I){A=A!==!1,I=I===!0;try{return 0<this._cmp(d,v)||this._cmp(d,v)===0&&(A||I)&&(!A||!I)?_a(this):new this.Collection(this,function(){return ia(d,v,!A,!I)})}catch{return Yr(this,rr)}},Mn.prototype.equals=function(d){return d==null?Yr(this,rr):new this.Collection(this,function(){return Ea(d)})},Mn.prototype.above=function(d){return d==null?Yr(this,rr):new this.Collection(this,function(){return ia(d,void 0,!0)})},Mn.prototype.aboveOrEqual=function(d){return d==null?Yr(this,rr):new this.Collection(this,function(){return ia(d,void 0,!1)})},Mn.prototype.below=function(d){return d==null?Yr(this,rr):new this.Collection(this,function(){return ia(void 0,d,!1,!0)})},Mn.prototype.belowOrEqual=function(d){return d==null?Yr(this,rr):new this.Collection(this,function(){return ia(void 0,d)})},Mn.prototype.startsWith=function(d){return typeof d!="string"?Yr(this,Ar):this.between(d,d+$r,!0,!0)},Mn.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):_i(this,function(v,A){return v.indexOf(A[0])===0},[d],$r)},Mn.prototype.equalsIgnoreCase=function(d){return _i(this,function(v,A){return v===A[0]},[d],"")},Mn.prototype.anyOfIgnoreCase=function(){var d=et.apply(ze,arguments);return d.length===0?_a(this):_i(this,function(v,A){return A.indexOf(v)!==-1},d,"")},Mn.prototype.startsWithAnyOfIgnoreCase=function(){var d=et.apply(ze,arguments);return d.length===0?_a(this):_i(this,function(v,A){return A.some(function(I){return v.indexOf(I)===0})},d,$r)},Mn.prototype.anyOf=function(){var d,v,A=this,I=et.apply(ze,arguments),P=this._cmp;try{I.sort(P)}catch{return Yr(this,rr)}return I.length===0?_a(this):((d=new this.Collection(this,function(){return ia(I[0],I[I.length-1])}))._ondirectionchange=function(k){P=k==="next"?A._ascending:A._descending,I.sort(P)},v=0,d._addAlgorithm(function(k,F,G){for(var Q=k.key;0<P(Q,I[v]);)if(++v===I.length)return F(G),!1;return P(Q,I[v])===0||(F(function(){k.continue(I[v])}),!1)}),d)},Mn.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Mn.prototype.noneOf=function(){var d=et.apply(ze,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return Yr(this,rr)}var v=d.reduce(function(A,I){return A?A.concat([[A[A.length-1][1],I]]):[[-1/0,I]]},null);return v.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(v,{includeLowers:!1,includeUppers:!1})},Mn.prototype.inAnyRange=function(d,Ce){var A=this,I=this._cmp,P=this._ascending,k=this._descending,F=this._min,G=this._max;if(d.length===0)return _a(this);if(!d.every(function(be){return be[0]!==void 0&&be[1]!==void 0&&P(be[0],be[1])<=0}))return Yr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ye.InvalidArgument);var Q=!Ce||Ce.includeLowers!==!1,re=Ce&&Ce.includeUppers===!0,ne,oe=P;function fe(be,Me){return oe(be[0],Me[0])}try{(ne=d.reduce(function(be,Me){for(var He=0,lt=be.length;He<lt;++He){var ct=be[He];if(I(Me[0],ct[1])<0&&0<I(Me[1],ct[0])){ct[0]=F(ct[0],Me[0]),ct[1]=G(ct[1],Me[1]);break}}return He===lt&&be.push(Me),be},[])).sort(fe)}catch{return Yr(this,rr)}var le=0,ge=re?function(be){return 0<P(be,ne[le][1])}:function(be){return 0<=P(be,ne[le][1])},he=Q?function(be){return 0<k(be,ne[le][0])}:function(be){return 0<=k(be,ne[le][0])},we=ge,Ce=new this.Collection(this,function(){return ia(ne[0][0],ne[ne.length-1][1],!Q,!re)});return Ce._ondirectionchange=function(be){oe=be==="next"?(we=ge,P):(we=he,k),ne.sort(fe)},Ce._addAlgorithm(function(be,Me,He){for(var lt,ct=be.key;we(ct);)if(++le===ne.length)return Me(He),!1;return!ge(lt=ct)&&!he(lt)||(A._cmp(ct,ne[le][1])===0||A._cmp(ct,ne[le][0])===0||Me(function(){oe===P?be.continue(ne[le][0]):be.continue(ne[le][1])}),!1)}),Ce},Mn.prototype.startsWithAnyOf=function(){var d=et.apply(ze,arguments);return d.every(function(v){return typeof v=="string"})?d.length===0?_a(this):this.inAnyRange(d.map(function(v){return[v,v+$r]})):Yr(this,"startsWithAnyOf() only works with strings")};var Jn=Mn;function Mn(){}function Tr(d){return _n(function(v){return Pt(v),d(v.target.error),!1})}function Pt(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var Ua="storagemutated",Lt="x-storagemutated-1",xn=ki(null,Ua),Do=(an.prototype._lock=function(){return ee(!Ze.global),++this._reculock,this._reculock!==1||Ze.global||(Ze.lockOwnerFor=this),this},an.prototype._unlock=function(){if(ee(!Ze.global),--this._reculock==0)for(Ze.global||(Ze.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{Pi(d[1],d[0])}catch{}}return this},an.prototype._locked=function(){return this._reculock&&Ze.lockOwnerFor!==this},an.prototype.create=function(d){var v=this;if(this.mode){var A=this.db.idbdb,I=this.db._state.dbOpenError;if(ee(!this.idbtrans),!d&&!A)switch(I&&I.name){case"DatabaseClosedError":throw new Ye.DatabaseClosed(I);case"MissingAPIError":throw new Ye.MissingAPI(I.message,I);default:throw new Ye.OpenFailed(I)}if(!this.active)throw new Ye.TransactionInactive;ee(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||A).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=_n(function(P){Pt(P),v._reject(d.error)}),d.onabort=_n(function(P){Pt(P),v.active&&v._reject(new Ye.Abort(d.error)),v.active=!1,v.on("abort").fire(P)}),d.oncomplete=_n(function(){v.active=!1,v._resolve(),"mutatedParts"in d&&xn.storagemutated.fire(d.mutatedParts)})}return this},an.prototype._promise=function(d,v,A){var I,P=this;return d==="readwrite"&&this.mode!=="readwrite"?Mt(new Ye.ReadOnly("Transaction is readonly")):this.active?this._locked()?new ft(function(k,F){P._blockedFuncs.push([function(){P._promise(d,v,A).then(k,F)},Ze])}):A?Fn(function(){var k=new ft(function(F,G){P._lock();var Q=v(F,G,P);Q&&Q.then&&Q.then(F,G)});return k.finally(function(){return P._unlock()}),k._lib=!0,k}):((I=new ft(function(k,F){var G=v(k,F,P);G&&G.then&&G.then(k,F)}))._lib=!0,I):Mt(new Ye.TransactionInactive)},an.prototype._root=function(){return this.parent?this.parent._root():this},an.prototype.waitFor=function(d){var v,A=this._root(),I=ft.resolve(d),P=(A._waitingFor?A._waitingFor=A._waitingFor.then(function(){return I}):(A._waitingFor=I,A._waitingQueue=[],v=A.idbtrans.objectStore(A.storeNames[0]),(function k(){for(++A._spinCount;A._waitingQueue.length;)A._waitingQueue.shift()();A._waitingFor&&(v.get(-1/0).onsuccess=k)})()),A._waitingFor);return new ft(function(k,F){I.then(function(G){return A._waitingQueue.push(_n(k.bind(null,G)))},function(G){return A._waitingQueue.push(_n(F.bind(null,G)))}).finally(function(){A._waitingFor===P&&(A._waitingFor=null)})})},an.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ye.Abort))},an.prototype.table=function(d){var v=this._memoizedTables||(this._memoizedTables={});if(_(v,d))return v[d];var A=this.schema[d];if(A)return(A=new this.db.Table(d,A,this)).core=this.db.core.table(d),v[d]=A;throw new Ye.NotFound("Table "+d+" not part of transaction")},an);function an(){}function Aa(d,v,A,I,P,k,F,G){return{name:d,keyPath:v,unique:A,multi:I,auto:P,compound:k,src:(A&&!F?"&":"")+(I?"*":"")+(P?"++":"")+qa(v),type:G}}function qa(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function qs(d,v,A){return{name:d,primKey:v,indexes:A,mappedClass:null,idxByName:(I=function(P){return[P.name,P]},A.reduce(function(P,k,F){return k=I(k,F),k&&(P[k[0]]=k[1]),P},{}))};var I}var Sa=function(d){try{return d.only([[]]),Sa=function(){return[[]]},[[]]}catch{return Sa=function(){return $r},$r}};function Ta(d){return d==null?function(){}:typeof d=="string"?(v=d).split(".").length===1?function(A){return A[v]}:function(A){return Z(A,v)}:function(A){return Z(A,d)};var v}function aa(d){return[].slice.call(d)}var Ga=0;function ir(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function Ia(d,v,Q){function I(ge){if(ge.type===3)return null;if(ge.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var oe=ge.lower,fe=ge.upper,le=ge.lowerOpen,ge=ge.upperOpen;return oe===void 0?fe===void 0?null:v.upperBound(fe,!!ge):fe===void 0?v.lowerBound(oe,!!le):v.bound(oe,fe,!!le,!!ge)}function P(ne){var oe,fe=ne.name;return{name:fe,schema:ne,mutate:function(le){var ge=le.trans,he=le.type,we=le.keys,Ce=le.values,be=le.range;return new Promise(function(Me,He){Me=_n(Me);var lt=ge.objectStore(fe),ct=lt.keyPath==null,tt=he==="put"||he==="add";if(!tt&&he!=="delete"&&he!=="deleteRange")throw new Error("Invalid operation type: "+he);var vt,gt=(we||Ce||{length:1}).length;if(we&&Ce&&we.length!==Ce.length)throw new Error("Given keys array must have same length as given values array.");if(gt===0)return Me({numFailures:0,failures:{},results:[],lastResult:void 0});function it(tr){++wn,Pt(tr)}var xt=[],Xt=[],wn=0;if(he==="deleteRange"){if(be.type===4)return Me({numFailures:wn,failures:Xt,results:[],lastResult:void 0});be.type===3?xt.push(vt=lt.clear()):xt.push(vt=lt.delete(I(be)))}else{var ct=tt?ct?[Ce,we]:[Ce,null]:[we,null],Bt=ct[0],Jt=ct[1];if(tt)for(var gr=0;gr<gt;++gr)xt.push(vt=Jt&&Jt[gr]!==void 0?lt[he](Bt[gr],Jt[gr]):lt[he](Bt[gr])),vt.onerror=it;else for(gr=0;gr<gt;++gr)xt.push(vt=lt[he](Bt[gr])),vt.onerror=it}function Xa(tr){tr=tr.target.result,xt.forEach(function(sl,Gu){return sl.error!=null&&(Xt[Gu]=sl.error)}),Me({numFailures:wn,failures:Xt,results:he==="delete"?we:xt.map(function(sl){return sl.result}),lastResult:tr})}vt.onerror=function(tr){it(tr),Xa(tr)},vt.onsuccess=Xa})},getMany:function(le){var ge=le.trans,he=le.keys;return new Promise(function(we,Ce){we=_n(we);for(var be,Me=ge.objectStore(fe),He=he.length,lt=new Array(He),ct=0,tt=0,vt=function(xt){xt=xt.target,lt[xt._pos]=xt.result,++tt===ct&&we(lt)},gt=Tr(Ce),it=0;it<He;++it)he[it]!=null&&((be=Me.get(he[it]))._pos=it,be.onsuccess=vt,be.onerror=gt,++ct);ct===0&&we(lt)})},get:function(le){var ge=le.trans,he=le.key;return new Promise(function(we,Ce){we=_n(we);var be=ge.objectStore(fe).get(he);be.onsuccess=function(Me){return we(Me.target.result)},be.onerror=Tr(Ce)})},query:(oe=G,function(le){return new Promise(function(ge,he){ge=_n(ge);var we,Ce,be,tt=le.trans,Me=le.values,He=le.limit,ct=le.query,lt=He===1/0?void 0:He,vt=ct.index,ct=ct.range,tt=tt.objectStore(fe),tt=vt.isPrimaryKey?tt:tt.index(vt.name),vt=I(ct);if(He===0)return ge({result:[]});oe?((ct=Me?tt.getAll(vt,lt):tt.getAllKeys(vt,lt)).onsuccess=function(gt){return ge({result:gt.target.result})},ct.onerror=Tr(he)):(we=0,Ce=!Me&&"openKeyCursor"in tt?tt.openKeyCursor(vt):tt.openCursor(vt),be=[],Ce.onsuccess=function(gt){var it=Ce.result;return!it||(be.push(Me?it.value:it.primaryKey),++we===He)?ge({result:be}):void it.continue()},Ce.onerror=Tr(he))})}),openCursor:function(le){var ge=le.trans,he=le.values,we=le.query,Ce=le.reverse,be=le.unique;return new Promise(function(Me,He){Me=_n(Me);var tt=we.index,lt=we.range,ct=ge.objectStore(fe),ct=tt.isPrimaryKey?ct:ct.index(tt.name),tt=Ce?be?"prevunique":"prev":be?"nextunique":"next",vt=!he&&"openKeyCursor"in ct?ct.openKeyCursor(I(lt),tt):ct.openCursor(I(lt),tt);vt.onerror=Tr(He),vt.onsuccess=_n(function(gt){var it,xt,Xt,wn,Bt=vt.result;Bt?(Bt.___id=++Ga,Bt.done=!1,it=Bt.continue.bind(Bt),xt=(xt=Bt.continuePrimaryKey)&&xt.bind(Bt),Xt=Bt.advance.bind(Bt),wn=function(){throw new Error("Cursor not stopped")},Bt.trans=ge,Bt.stop=Bt.continue=Bt.continuePrimaryKey=Bt.advance=function(){throw new Error("Cursor not started")},Bt.fail=_n(He),Bt.next=function(){var Jt=this,gr=1;return this.start(function(){return gr--?Jt.continue():Jt.stop()}).then(function(){return Jt})},Bt.start=function(Jt){function gr(){if(vt.result)try{Jt()}catch(tr){Bt.fail(tr)}else Bt.done=!0,Bt.start=function(){throw new Error("Cursor behind last entry")},Bt.stop()}var Xa=new Promise(function(tr,sl){tr=_n(tr),vt.onerror=Tr(sl),Bt.fail=sl,Bt.stop=function(Gu){Bt.stop=Bt.continue=Bt.continuePrimaryKey=Bt.advance=wn,tr(Gu)}});return vt.onsuccess=_n(function(tr){vt.onsuccess=gr,gr()}),Bt.continue=it,Bt.continuePrimaryKey=xt,Bt.advance=Xt,gr(),Xa},Me(Bt)):Me(null)},He)})},count:function(le){var ge=le.query,he=le.trans,we=ge.index,Ce=ge.range;return new Promise(function(be,Me){var He=he.objectStore(fe),He=we.isPrimaryKey?He:He.index(we.name),lt=I(Ce),lt=lt?He.count(lt):He.count();lt.onsuccess=_n(function(ct){return be(ct.target.result)}),lt.onerror=Tr(Me)})}}}k=Q,F=aa((Q=d).objectStoreNames);var k,Q={schema:{name:Q.name,tables:F.map(function(ne){return k.objectStore(ne)}).map(function(ne){var oe=ne.keyPath,fe=ne.autoIncrement,ge=f(oe),le={},ge={name:ne.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:oe==null,compound:ge,keyPath:oe,autoIncrement:fe,unique:!0,extractKey:Ta(oe)},indexes:aa(ne.indexNames).map(function(he){return ne.index(he)}).map(function(be){var Me=be.name,we=be.unique,Ce=be.multiEntry,be=be.keyPath,Me={name:Me,compound:f(be),keyPath:be,unique:we,multiEntry:Ce,extractKey:Ta(be)};return le[ir(be)]=Me}),getIndexByKeyPath:function(he){return le[ir(he)]}};return le[":id"]=ge.primaryKey,oe!=null&&(le[ir(oe)]=ge.primaryKey),ge})},hasGetAll:0<F.length&&"getAll"in k.objectStore(F[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},F=Q.schema,G=Q.hasGetAll,Q=F.tables.map(P),re={};return Q.forEach(function(ne){return re[ne.name]=ne}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(ne){if(re[ne])return re[ne];throw new Error("Table '".concat(ne,"' not found"))},MIN_KEY:-1/0,MAX_KEY:Sa(v),schema:F}}function Ir(d,v,A,I){return A=A.IDBKeyRange,v=Ia(v,A,I),{dbcore:d.dbcore.reduce(function(P,k){return k=k.create,r(r({},P),k(P))},v)}}function Ha(d,v){var A=v.db,A=Ir(d._middlewares,A,d._deps,v);d.core=A.dbcore,d.tables.forEach(function(I){var P=I.name;d.core.schema.tables.some(function(k){return k.name===P})&&(I.core=d.core.table(P),d[P]instanceof d.Table)&&(d[P].core=I.core)})}function Gs(d,v,A,I){A.forEach(function(P){var k=I[P];v.forEach(function(F){var G=(function Q(re,ne){return L(re,ne)||(re=p(re))&&Q(re,ne)})(F,P);(!G||"value"in G&&G.value===void 0)&&(F===d.Transaction.prototype||F instanceof d.Transaction?j(F,P,{get:function(){return this.table(P)},set:function(Q){N(this,P,{value:Q,writable:!0,configurable:!0,enumerable:!0})}}):F[P]=new d.Table(P,k))})})}function os(d,v){v.forEach(function(A){for(var I in A)A[I]instanceof d.Table&&delete A[I]})}function tl(d,v){return d._cfg.version-v._cfg.version}function vs(d,v,A,I){var P=d._dbSchema,k=(A.objectStoreNames.contains("$meta")&&!P.$meta&&(P.$meta=qs("$meta",Yt("")[0],[]),d._storeNames.push("$meta")),d._createTransaction("readwrite",d._storeNames,P)),F=(k.create(A),k._completion.catch(I),k._reject.bind(k)),G=Ze.transless||Ze;Fn(function(){if(Ze.trans=k,Ze.transless=G,v!==0)return Ha(d,A),re=v,((Q=k).storeNames.includes("$meta")?Q.table("$meta").get("version").then(function(ne){return ne??re}):ft.resolve(re)).then(function(we){var oe=d,fe=we,le=k,ge=A,he=[],we=oe._versions,Ce=oe._dbSchema=bs(0,oe.idbdb,ge);return(we=we.filter(function(be){return be._cfg.version>=fe})).length===0?ft.resolve():(we.forEach(function(be){he.push(function(){var Me,He,lt,ct=Ce,tt=be._cfg.dbschema,vt=(ke(oe,ct,ge),ke(oe,tt,ge),Ce=oe._dbSchema=tt,En(ct,tt)),gt=(vt.add.forEach(function(it){xs(ge,it[0],it[1].primKey,it[1].indexes)}),vt.change.forEach(function(it){if(it.recreate)throw new Ye.Upgrade("Not yet support for changing primary key");var xt=ge.objectStore(it.name);it.add.forEach(function(Xt){return sa(xt,Xt)}),it.change.forEach(function(Xt){xt.deleteIndex(Xt.name),sa(xt,Xt)}),it.del.forEach(function(Xt){return xt.deleteIndex(Xt)})}),be._cfg.contentUpgrade);if(gt&&be._cfg.version>fe)return Ha(oe,ge),le._memoizedTables={},Me=W(tt),vt.del.forEach(function(it){Me[it]=ct[it]}),os(oe,[oe.Transaction.prototype]),Gs(oe,[oe.Transaction.prototype],l(Me),Me),le.schema=Me,(He=me(gt))&&gn(),tt=ft.follow(function(){var it;(lt=gt(le))&&He&&(it=Nr.bind(null,null),lt.then(it,it))}),lt&&typeof lt.then=="function"?ft.resolve(lt):tt.then(function(){return lt})}),he.push(function(Me){var He,lt,ct=be._cfg.dbschema;He=ct,lt=Me,[].slice.call(lt.db.objectStoreNames).forEach(function(tt){return He[tt]==null&&lt.db.deleteObjectStore(tt)}),os(oe,[oe.Transaction.prototype]),Gs(oe,[oe.Transaction.prototype],oe._storeNames,oe._dbSchema),le.schema=oe._dbSchema}),he.push(function(Me){oe.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(oe.idbdb.version/10)===be._cfg.version?(oe.idbdb.deleteObjectStore("$meta"),delete oe._dbSchema.$meta,oe._storeNames=oe._storeNames.filter(function(He){return He!=="$meta"})):Me.objectStore("$meta").put(be._cfg.version,"version"))})}),(function be(){return he.length?ft.resolve(he.shift()(le.idbtrans)).then(be):ft.resolve()})().then(function(){co(Ce,ge)}))}).catch(F);var Q,re;l(P).forEach(function(ne){xs(A,ne,P[ne].primKey,P[ne].indexes)}),Ha(d,A),ft.follow(function(){return d.on.populate.fire(k)}).catch(F)})}function nl(d,v){co(d._dbSchema,v),v.db.version%10!=0||v.objectStoreNames.contains("$meta")||v.db.createObjectStore("$meta").add(Math.ceil(v.db.version/10-1),"version");var A=bs(0,d.idbdb,v);ke(d,d._dbSchema,v);for(var I=0,P=En(A,d._dbSchema).change;I<P.length;I++){var k=(F=>{if(F.change.length||F.recreate)return console.warn("Unable to patch indexes of table ".concat(F.name," because it has changes on the type of index or primary key.")),{value:void 0};var G=v.objectStore(F.name);F.add.forEach(function(Q){at&&console.debug("Dexie upgrade patch: Creating missing index ".concat(F.name,".").concat(Q.src)),sa(G,Q)})})(P[I]);if(typeof k=="object")return k.value}}function En(d,v){var A,I={del:[],add:[],change:[]};for(A in d)v[A]||I.del.push(A);for(A in v){var P=d[A],k=v[A];if(P){var F={name:A,def:k,recreate:!1,del:[],add:[],change:[]};if(""+(P.primKey.keyPath||"")!=""+(k.primKey.keyPath||"")||P.primKey.auto!==k.primKey.auto)F.recreate=!0,I.change.push(F);else{var G=P.idxByName,Q=k.idxByName,re=void 0;for(re in G)Q[re]||F.del.push(re);for(re in Q){var ne=G[re],oe=Q[re];ne?ne.src!==oe.src&&F.change.push(oe):F.add.push(oe)}(0<F.del.length||0<F.add.length||0<F.change.length)&&I.change.push(F)}}else I.add.push([A,k])}return I}function xs(d,v,A,I){var P=d.db.createObjectStore(v,A.keyPath?{keyPath:A.keyPath,autoIncrement:A.auto}:{autoIncrement:A.auto});I.forEach(function(k){return sa(P,k)})}function co(d,v){l(d).forEach(function(A){v.db.objectStoreNames.contains(A)||(at&&console.debug("Dexie: Creating missing table",A),xs(v,A,d[A].primKey,d[A].indexes))})}function sa(d,v){d.createIndex(v.name,v.keyPath,{unique:v.unique,multiEntry:v.multi})}function bs(d,v,A){var I={};return $(v.objectStoreNames,0).forEach(function(P){for(var k=A.objectStore(P),F=Aa(qa(re=k.keyPath),re||"",!0,!1,!!k.autoIncrement,re&&typeof re!="string",!0),G=[],Q=0;Q<k.indexNames.length;++Q){var ne=k.index(k.indexNames[Q]),re=ne.keyPath,ne=Aa(ne.name,re,!!ne.unique,!!ne.multiEntry,!1,re&&typeof re!="string",!1);G.push(ne)}I[P]=qs(P,F,G)}),I}function ke(d,v,A){for(var I=A.db.objectStoreNames,P=0;P<I.length;++P){var k=I[P],F=A.objectStore(k);d._hasGetAll="getAll"in F;for(var G=0;G<F.indexNames.length;++G){var Q,re=F.indexNames[G],ne=F.index(re).keyPath,ne=typeof ne=="string"?ne:"["+$(ne).join("+")+"]";v[k]&&(Q=v[k].idxByName[ne])&&(Q.name=re,delete v[k].idxByName[ne],v[k].idxByName[re]=Q)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function Yt(d){return d.split(",").map(function(v,A){var P=v.split(":"),I=(I=P[1])==null?void 0:I.trim(),P=(v=P[0].trim()).replace(/([&*]|\+\+)/g,""),k=/^\[/.test(P)?P.match(/^\[(.*)\]$/)[1].split("+"):P;return Aa(P,k||null,/\&/.test(v),/\*/.test(v),/\+\+/.test(v),f(k),A===0,I)})}Ka.prototype._createTableSchema=qs,Ka.prototype._parseIndexSyntax=Yt,Ka.prototype._parseStoresSpec=function(d,v){var A=this;l(d).forEach(function(I){if(d[I]!==null){var P=A._parseIndexSyntax(d[I]),k=P.shift();if(!k)throw new Ye.Schema("Invalid schema for table "+I+": "+d[I]);if(k.unique=!0,k.multi)throw new Ye.Schema("Primary key cannot be multiEntry*");P.forEach(function(F){if(F.auto)throw new Ye.Schema("Only primary key can be marked as autoIncrement (++)");if(!F.keyPath)throw new Ye.Schema("Index must have a name and cannot be an empty string")}),k=A._createTableSchema(I,k,P),v[I]=k}})},Ka.prototype.stores=function(A){var v=this.db,A=(this._cfg.storesSource=this._cfg.storesSource?m(this._cfg.storesSource,A):A,v._versions),I={},P={};return A.forEach(function(k){m(I,k._cfg.storesSource),P=k._cfg.dbschema={},k._parseStoresSpec(I,P)}),v._dbSchema=P,os(v,[v._allTables,v,v.Transaction.prototype]),Gs(v,[v._allTables,v,v.Transaction.prototype,this._cfg.tables],l(P),P),v._storeNames=l(P),this},Ka.prototype.upgrade=function(d){return this._cfg.contentUpgrade=Zt(this._cfg.contentUpgrade||Fe,d),this};var Dr=Ka;function Ka(){}function ko(d,v){var A=d._dbNamesDB;return A||(A=d._dbNamesDB=new Es(uo,{addons:[],indexedDB:d,IDBKeyRange:v})).version(1).stores({dbnames:"name"}),A.table("dbnames")}function Wa(d){return d&&typeof d.databases=="function"}function rl(d){return Fn(function(){return Ze.letThrough=!0,d()})}function il(d){return!("from"in d)}var Br=function(d,v){var A;if(!this)return A=new Br,d&&"d"in d&&m(A,d),A;m(this,arguments.length?{d:1,from:d,to:1<arguments.length?v:d}:{d:0})};function er(d,v,A){var I=Qt(v,A);if(!isNaN(I)){if(0<I)throw RangeError();if(il(d))return m(d,{from:v,to:A,d:1});var I=d.l,P=d.r;if(Qt(A,d.from)<0)return I?er(I,v,A):d.l={from:v,to:A,d:1,l:null,r:null},ls(d);if(0<Qt(v,d.to))return P?er(P,v,A):d.r={from:v,to:A,d:1,l:null,r:null},ls(d);Qt(v,d.from)<0&&(d.from=v,d.l=null,d.d=P?P.d+1:1),0<Qt(A,d.to)&&(d.to=A,d.r=null,d.d=d.l?d.l.d+1:1),v=!d.r,I&&!d.l&&oa(d,I),P&&v&&oa(d,P)}}function oa(d,v){il(v)||(function A(I,P){var k=P.from,F=P.l,G=P.r;er(I,k,P.to),F&&A(I,F),G&&A(I,G)})(d,v)}function fn(d,v){var A=ws(v),I=A.next();if(!I.done)for(var P=I.value,k=ws(d),F=k.next(P.from),G=F.value;!I.done&&!F.done;){if(Qt(G.from,P.to)<=0&&0<=Qt(G.to,P.from))return!0;Qt(P.from,G.from)<0?P=(I=A.next(G.from)).value:G=(F=k.next(P.from)).value}return!1}function ws(d){var v=il(d)?null:{s:0,n:d};return{next:function(A){for(var I=0<arguments.length;v;)switch(v.s){case 0:if(v.s=1,I)for(;v.n.l&&Qt(A,v.n.from)<0;)v={up:v,n:v.n.l,s:1};else for(;v.n.l;)v={up:v,n:v.n.l,s:1};case 1:if(v.s=2,!I||Qt(A,v.n.to)<=0)return{value:v.n,done:!1};case 2:if(v.n.r){v.s=3,v={up:v,n:v.n.r,s:0};continue}case 3:v=v.up}return{done:!0}}}}function ls(d){var v,A,I,P=(((P=d.r)==null?void 0:P.d)||0)-(((P=d.l)==null?void 0:P.d)||0),P=1<P?"r":P<-1?"l":"";P&&(v=P=="r"?"l":"r",A=r({},d),I=d[P],d.from=I.from,d.to=I.to,d[P]=I[P],A[P]=I[v],(d[v]=A).d=pn(A)),d.d=pn(d)}function pn(A){var v=A.r,A=A.l;return(v?A?Math.max(v.d,A.d):v.d:A?A.d:0)+1}function S(d,v){return l(v).forEach(function(A){d[A]?oa(d[A],v[A]):d[A]=(function I(P){var k,F,G={};for(k in P)_(P,k)&&(F=P[k],G[k]=!F||typeof F!="object"||ie.has(F.constructor)?F:I(F));return G})(v[A])}),d}function B(d,v){return d.all||v.all||Object.keys(d).some(function(A){return v[A]&&fn(v[A],d[A])})}T(Br.prototype,(($n={add:function(d){return oa(this,d),this},addKey:function(d){return er(this,d,d),this},addKeys:function(d){var v=this;return d.forEach(function(A){return er(v,A,A)}),this},hasKey:function(d){var v=ws(this).next(d).value;return v&&Qt(v.from,d)<=0&&0<=Qt(v.to,d)}})[ye]=function(){return ws(this)},$n));var H={},se={},Ae=!1;function Le(d){S(se,d),Ae||(Ae=!0,setTimeout(function(){Ae=!1,ot(se,!(se={}))},0))}function ot(d,v){v===void 0&&(v=!1);var A=new Set;if(d.all)for(var I=0,P=Object.values(H);I<P.length;I++)Gt(G=P[I],d,A,v);else for(var k in d){var F,G,k=/^idb\:\/\/(.*)\/(.*)\//.exec(k);k&&(F=k[1],k=k[2],G=H["idb://".concat(F,"/").concat(k)])&&Gt(G,d,A,v)}A.forEach(function(Q){return Q()})}function Gt(d,v,A,I){for(var P=[],k=0,F=Object.entries(d.queries.query);k<F.length;k++){for(var G=F[k],Q=G[0],re=[],ne=0,oe=G[1];ne<oe.length;ne++){var fe=oe[ne];B(v,fe.obsSet)?fe.subscribers.forEach(function(we){return A.add(we)}):I&&re.push(fe)}I&&P.push([Q,re])}if(I)for(var le=0,ge=P;le<ge.length;le++){var he=ge[le],Q=he[0],re=he[1];d.queries.query[Q]=re}}function kr(d){var v=d._state,A=d._deps.indexedDB;if(v.isBeingOpened||d.idbdb)return v.dbReadyPromise.then(function(){return v.dbOpenError?Mt(v.dbOpenError):d});v.isBeingOpened=!0,v.dbOpenError=null,v.openComplete=!1;var I=v.openCanceller,P=Math.round(10*d.verno),k=!1;function F(){if(v.openCanceller!==I)throw new Ye.DatabaseClosed("db.open() was cancelled")}function G(){return new ft(function(fe,le){if(F(),!A)throw new Ye.MissingAPI;var ge=d.name,he=v.autoSchema||!P?A.open(ge):A.open(ge,P);if(!he)throw new Ye.MissingAPI;he.onerror=Tr(le),he.onblocked=_n(d._fireOnBlocked),he.onupgradeneeded=_n(function(we){var Ce;ne=he.transaction,v.autoSchema&&!d._options.allowEmptyDB?(he.onerror=Pt,ne.abort(),he.result.close(),(Ce=A.deleteDatabase(ge)).onsuccess=Ce.onerror=_n(function(){le(new Ye.NoSuchDatabase("Database ".concat(ge," doesnt exist")))})):(ne.onerror=Tr(le),Ce=we.oldVersion>Math.pow(2,62)?0:we.oldVersion,oe=Ce<1,d.idbdb=he.result,k&&nl(d,ne),vs(d,Ce/10,ne,le))},le),he.onsuccess=_n(function(){ne=null;var we,Ce,be,Me,He,lt,ct=d.idbdb=he.result,tt=$(ct.objectStoreNames);if(0<tt.length)try{var vt=ct.transaction((He=tt).length===1?He[0]:He,"readonly");if(v.autoSchema)lt=ct,Me=vt,(be=d).verno=lt.version/10,Me=be._dbSchema=bs(0,lt,Me),be._storeNames=$(lt.objectStoreNames,0),Gs(be,[be._allTables],l(Me),Me);else if(ke(d,d._dbSchema,vt),Ce=vt,((Ce=En(bs(0,(we=d).idbdb,Ce),we._dbSchema)).add.length||Ce.change.some(function(gt){return gt.add.length||gt.change.length}))&&!k)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ct.close(),P=ct.version+1,k=!0,fe(G());Ha(d,vt)}catch{}Ge.push(d),ct.onversionchange=_n(function(gt){v.vcFired=!0,d.on("versionchange").fire(gt)}),ct.onclose=_n(function(){d.close({disableAutoOpen:!1})}),oe&&(tt=d._deps,He=ge,Wa(lt=tt.indexedDB)||He===uo||ko(lt,tt.IDBKeyRange).put({name:He}).catch(Fe)),fe()},le)}).catch(function(fe){switch(fe?.name){case"UnknownError":if(0<v.PR1398_maxLoop)return v.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),G();break;case"VersionError":if(0<P)return P=0,G()}return ft.reject(fe)})}var Q,re=v.dbReadyResolve,ne=null,oe=!1;return ft.race([I,(typeof navigator>"u"?ft.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(fe){function le(){return indexedDB.databases().finally(fe)}Q=setInterval(le,100),le()}).finally(function(){return clearInterval(Q)}):Promise.resolve()).then(G)]).then(function(){return F(),v.onReadyBeingFired=[],ft.resolve(rl(function(){return d.on.ready.fire(d.vip)})).then(function fe(){var le;if(0<v.onReadyBeingFired.length)return le=v.onReadyBeingFired.reduce(Zt,Fe),v.onReadyBeingFired=[],ft.resolve(rl(function(){return le(d.vip)})).then(fe)})}).finally(function(){v.openCanceller===I&&(v.onReadyBeingFired=null,v.isBeingOpened=!1)}).catch(function(fe){v.dbOpenError=fe;try{ne&&ne.abort()}catch{}return I===v.openCanceller&&d._close(),Mt(fe)}).finally(function(){v.openComplete=!0,re()}).then(function(){var fe;return oe&&(fe={},d.tables.forEach(function(le){le.schema.indexes.forEach(function(ge){ge.name&&(fe["idb://".concat(d.name,"/").concat(le.name,"/").concat(ge.name)]=new Br(-1/0,[[[]]]))}),fe["idb://".concat(d.name,"/").concat(le.name,"/")]=fe["idb://".concat(d.name,"/").concat(le.name,"/:dels")]=new Br(-1/0,[[[]]])}),xn(Ua).fire(fe),ot(fe,!0)),d})}function bn(d){function v(k){return d.next(k)}var A=P(v),I=P(function(k){return d.throw(k)});function P(k){return function(G){var G=k(G),Q=G.value;return G.done?Q:Q&&typeof Q.then=="function"?Q.then(A,I):f(Q)?Promise.all(Q).then(A,I):A(Q)}}return P(v)()}function zn(d,v,A){for(var I=f(d)?d.slice():[d],P=0;P<A;++P)I.push(v);return I}var Ca={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return r(r({},d),{table:function(I){var A=d.table(I),I=A.schema,P={},k=[];function F(fe,le,ge){var be=ir(fe),he=P[be]=P[be]||[],we=fe==null?0:typeof fe=="string"?1:fe.length,Ce=0<le,be=r(r({},ge),{name:Ce?"".concat(be,"(virtual-from:").concat(ge.name,")"):ge.name,lowLevelIndex:ge,isVirtual:Ce,keyTail:le,keyLength:we,extractKey:Ta(fe),unique:!Ce&&ge.unique});return he.push(be),be.isPrimaryKey||k.push(be),1<we&&F(we===2?fe[0]:fe.slice(0,we-1),le+1,ge),he.sort(function(Me,He){return Me.keyTail-He.keyTail}),be}var G=F(I.primaryKey.keyPath,0,I.primaryKey);P[":id"]=[G];for(var Q=0,re=I.indexes;Q<re.length;Q++){var ne=re[Q];F(ne.keyPath,0,ne)}function oe(fe){var le,ge=fe.query.index;return ge.isVirtual?r(r({},fe),{query:{index:ge.lowLevelIndex,range:(le=fe.query.range,ge=ge.keyTail,{type:le.type===1?2:le.type,lower:zn(le.lower,le.lowerOpen?d.MAX_KEY:d.MIN_KEY,ge),lowerOpen:!0,upper:zn(le.upper,le.upperOpen?d.MIN_KEY:d.MAX_KEY,ge),upperOpen:!0})}}):fe}return r(r({},A),{schema:r(r({},I),{primaryKey:G,indexes:k,getIndexByKeyPath:function(fe){return(fe=P[ir(fe)])&&fe[0]}}),count:function(fe){return A.count(oe(fe))},query:function(fe){return A.query(oe(fe))},openCursor:function(fe){var le=fe.query.index,ge=le.keyTail,he=le.keyLength;return le.isVirtual?A.openCursor(oe(fe)).then(function(Ce){return Ce&&we(Ce)}):A.openCursor(fe);function we(Ce){return Object.create(Ce,{continue:{value:function(be){be!=null?Ce.continue(zn(be,fe.reverse?d.MAX_KEY:d.MIN_KEY,ge)):fe.unique?Ce.continue(Ce.key.slice(0,he).concat(fe.reverse?d.MIN_KEY:d.MAX_KEY,ge)):Ce.continue()}},continuePrimaryKey:{value:function(be,Me){Ce.continuePrimaryKey(zn(be,d.MAX_KEY,ge),Me)}},primaryKey:{get:function(){return Ce.primaryKey}},key:{get:function(){var be=Ce.key;return he===1?be[0]:be.slice(0,he)}},value:{get:function(){return Ce.value}}})}}})}})}};function $a(d,v,A,I){return A=A||{},I=I||"",l(d).forEach(function(P){var k,F,G;_(v,P)?(k=d[P],F=v[P],typeof k=="object"&&typeof F=="object"&&k&&F?(G=de(k))!==de(F)?A[I+P]=v[P]:G==="Object"?$a(k,F,A,I+P+"."):k!==F&&(A[I+P]=v[P]):k!==F&&(A[I+P]=v[P])):A[I+P]=void 0}),l(v).forEach(function(P){_(d,P)||(A[I+P]=v[P])}),A}function di(d,v){return v.type==="delete"?v.keys:v.keys||v.values.map(d.extractKey)}var Oa={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return r(r({},d),{table:function(v){var A=d.table(v),I=A.schema.primaryKey;return r(r({},A),{mutate:function(P){var k=Ze.trans,F=k.table(v).hook,G=F.deleting,Q=F.creating,re=F.updating;switch(P.type){case"add":if(Q.fire===Fe)break;return k._promise("readwrite",function(){return ne(P)},!0);case"put":if(Q.fire===Fe&&re.fire===Fe)break;return k._promise("readwrite",function(){return ne(P)},!0);case"delete":if(G.fire===Fe)break;return k._promise("readwrite",function(){return ne(P)},!0);case"deleteRange":if(G.fire===Fe)break;return k._promise("readwrite",function(){return(function oe(fe,le,ge){return A.query({trans:fe,values:!1,query:{index:I,range:le},limit:ge}).then(function(he){var we=he.result;return ne({type:"delete",keys:we,trans:fe}).then(function(Ce){return 0<Ce.numFailures?Promise.reject(Ce.failures[0]):we.length<ge?{failures:[],numFailures:0,lastResult:void 0}:oe(fe,r(r({},le),{lower:we[we.length-1],lowerOpen:!0}),ge)})})})(P.trans,P.range,1e4)},!0)}return A.mutate(P);function ne(oe){var fe,le,ge,he=Ze.trans,we=oe.keys||di(I,oe);if(we)return(oe=oe.type==="add"||oe.type==="put"?r(r({},oe),{keys:we}):r({},oe)).type!=="delete"&&(oe.values=i([],oe.values)),oe.keys&&(oe.keys=i([],oe.keys)),fe=A,ge=we,((le=oe).type==="add"?Promise.resolve([]):fe.getMany({trans:le.trans,keys:ge,cache:"immutable"})).then(function(Ce){var be=we.map(function(Me,He){var lt,ct,tt,vt=Ce[He],gt={onerror:null,onsuccess:null};return oe.type==="delete"?G.fire.call(gt,Me,vt,he):oe.type==="add"||vt===void 0?(lt=Q.fire.call(gt,Me,oe.values[He],he),Me==null&&lt!=null&&(oe.keys[He]=Me=lt,I.outbound||V(oe.values[He],I.keyPath,Me))):(lt=$a(vt,oe.values[He]),(ct=re.fire.call(gt,lt,Me,vt,he))&&(tt=oe.values[He],Object.keys(ct).forEach(function(it){_(tt,it)?tt[it]=ct[it]:V(tt,it,ct[it])}))),gt});return A.mutate(oe).then(function(Me){for(var He=Me.failures,lt=Me.results,ct=Me.numFailures,Me=Me.lastResult,tt=0;tt<we.length;++tt){var vt=(lt||we)[tt],gt=be[tt];vt==null?gt.onerror&&gt.onerror(He[tt]):gt.onsuccess&&gt.onsuccess(oe.type==="put"&&Ce[tt]?oe.values[tt]:vt)}return{failures:He,results:lt,numFailures:ct,lastResult:Me}}).catch(function(Me){return be.forEach(function(He){return He.onerror&&He.onerror(Me)}),Promise.reject(Me)})});throw new Error("Keys missing")}}})}})}};function fo(d,v,A){try{if(!v||v.keys.length<d.length)return null;for(var I=[],P=0,k=0;P<v.keys.length&&k<d.length;++P)Qt(v.keys[P],d[k])===0&&(I.push(A?J(v.values[P]):v.values[P]),++k);return I.length===d.length?I:null}catch{return null}}var _s={stack:"dbcore",level:-1,create:function(d){return{table:function(v){var A=d.table(v);return r(r({},A),{getMany:function(I){var P;return I.cache?(P=fo(I.keys,I.trans._cache,I.cache==="clone"))?ft.resolve(P):A.getMany(I).then(function(k){return I.trans._cache={keys:I.keys,values:I.cache==="clone"?J(k):k},k}):A.getMany(I)},mutate:function(I){return I.type!=="add"&&(I.trans._cache=null),A.mutate(I)}})}}}};function Mo(d,v){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!v.schema.primaryKey.outbound}function Hs(d,v){switch(d){case"query":return v.values&&!v.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var qu={stack:"dbcore",level:0,name:"Observability",create:function(d){var v=d.schema.name,A=new Br(d.MIN_KEY,d.MAX_KEY);return r(r({},d),{transaction:function(I,P,k){if(Ze.subscr&&P!=="readonly")throw new Ye.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ze.querier));return d.transaction(I,P,k)},table:function(I){function P(we){var he,we=we.query;return[he=we.index,new Br((he=(we=we.range).lower)!=null?he:d.MIN_KEY,(he=we.upper)!=null?he:d.MAX_KEY)]}var k=d.table(I),F=k.schema,G=F.primaryKey,Q=F.indexes,re=G.extractKey,ne=G.outbound,oe=G.autoIncrement&&Q.filter(function(ge){return ge.compound&&ge.keyPath.includes(G.keyPath)}),fe=r(r({},k),{mutate:function(ge){function he(xt){return xt="idb://".concat(v,"/").concat(I,"/").concat(xt),He[xt]||(He[xt]=new Br)}var we,Ce,be,Me=ge.trans,He=ge.mutatedParts||(ge.mutatedParts={}),lt=he(""),ct=he(":dels"),tt=ge.type,gt=ge.type==="deleteRange"?[ge.range]:ge.type==="delete"?[ge.keys]:ge.values.length<50?[di(G,ge).filter(function(xt){return xt}),ge.values]:[],vt=gt[0],gt=gt[1],it=ge.trans._cache;return f(vt)?(lt.addKeys(vt),(tt=tt==="delete"||vt.length===gt.length?fo(vt,it):null)||ct.addKeys(vt),(tt||gt)&&(we=he,Ce=tt,be=gt,F.indexes.forEach(function(xt){var Xt=we(xt.name||"");function wn(Jt){return Jt!=null?xt.extractKey(Jt):null}function Bt(Jt){xt.multiEntry&&f(Jt)?Jt.forEach(function(gr){return Xt.addKey(gr)}):Xt.addKey(Jt)}(Ce||be).forEach(function(Jt,tr){var Xa=Ce&&wn(Ce[tr]),tr=be&&wn(be[tr]);Qt(Xa,tr)!==0&&(Xa!=null&&Bt(Xa),tr!=null)&&Bt(tr)})}))):vt?(gt={from:(it=vt.lower)!=null?it:d.MIN_KEY,to:(tt=vt.upper)!=null?tt:d.MAX_KEY},ct.add(gt),lt.add(gt)):(lt.add(A),ct.add(A),F.indexes.forEach(function(xt){return he(xt.name).add(A)})),k.mutate(ge).then(function(xt){return!vt||ge.type!=="add"&&ge.type!=="put"||(lt.addKeys(xt.results),oe&&oe.forEach(function(Xt){for(var wn=ge.values.map(function(Xa){return Xt.extractKey(Xa)}),Bt=Xt.keyPath.findIndex(function(Xa){return Xa===G.keyPath}),Jt=0,gr=xt.results.length;Jt<gr;++Jt)wn[Jt][Bt]=xt.results[Jt];he(Xt.name).addKeys(wn)})),Me.mutatedParts=S(Me.mutatedParts||{},He),xt})}}),le={get:function(ge){return[G,new Br(ge.key)]},getMany:function(ge){return[G,new Br().addKeys(ge.keys)]},count:P,query:P,openCursor:P};return l(le).forEach(function(ge){fe[ge]=function(he){var we=Ze.subscr,Ce=!!we,be=Mo(Ze,k)&&Hs(ge,he)?he.obsSet={}:we;if(Ce){var Me,we=function(gt){return gt="idb://".concat(v,"/").concat(I,"/").concat(gt),be[gt]||(be[gt]=new Br)},He=we(""),lt=we(":dels"),Ce=le[ge](he),ct=Ce[0],Ce=Ce[1];if((ge==="query"&&ct.isPrimaryKey&&!he.values?lt:we(ct.name||"")).add(Ce),!ct.isPrimaryKey){if(ge!=="count")return Me=ge==="query"&&ne&&he.values&&k.query(r(r({},he),{values:!1})),k[ge].apply(this,arguments).then(function(gt){if(ge==="query"){if(ne&&he.values)return Me.then(function(wn){return wn=wn.result,He.addKeys(wn),gt});var it=he.values?gt.result.map(re):gt.result;(he.values?He:lt).addKeys(it)}else{var xt,Xt;if(ge==="openCursor")return Xt=he.values,(xt=gt)&&Object.create(xt,{key:{get:function(){return lt.addKey(xt.primaryKey),xt.key}},primaryKey:{get:function(){var wn=xt.primaryKey;return lt.addKey(wn),wn}},value:{get:function(){return Xt&&He.addKey(xt.primaryKey),xt.value}}})}return gt});lt.add(A)}}return k[ge].apply(this,arguments)}}),fe}})}};function Na(d,v,A){var I;return A.numFailures===0?v:v.type==="deleteRange"||(I=v.keys?v.keys.length:"values"in v&&v.values?v.values.length:1,A.numFailures===I)?null:(I=r({},v),f(I.keys)&&(I.keys=I.keys.filter(function(P,k){return!(k in A.failures)})),"values"in I&&f(I.values)&&(I.values=I.values.filter(function(P,k){return!(k in A.failures)})),I)}function Vl(d,v){return A=d,((I=v).lower===void 0||(I.lowerOpen?0<Qt(A,I.lower):0<=Qt(A,I.lower)))&&(A=d,(I=v).upper===void 0||(I.upperOpen?Qt(A,I.upper)<0:Qt(A,I.upper)<=0));var A,I}function Ya(d,v,A,I,P,k){var F,G,Q,re,ne,oe;return!A||A.length===0||(F=v.query.index,G=F.multiEntry,Q=v.query.range,re=I.schema.primaryKey.extractKey,ne=F.extractKey,oe=(F.lowLevelIndex||F).extractKey,(I=A.reduce(function(fe,le){var ge=fe,he=[];if(le.type==="add"||le.type==="put")for(var we=new Br,Ce=le.values.length-1;0<=Ce;--Ce){var be,Me=le.values[Ce],He=re(Me);!we.hasKey(He)&&(be=ne(Me),G&&f(be)?be.some(function(gt){return Vl(gt,Q)}):Vl(be,Q))&&(we.addKey(He),he.push(Me))}switch(le.type){case"add":var lt=new Br().addKeys(v.values?fe.map(function(it){return re(it)}):fe),ge=fe.concat(v.values?he.filter(function(it){return it=re(it),!lt.hasKey(it)&&(lt.addKey(it),!0)}):he.map(function(it){return re(it)}).filter(function(it){return!lt.hasKey(it)&&(lt.addKey(it),!0)}));break;case"put":var ct=new Br().addKeys(le.values.map(function(it){return re(it)}));ge=fe.filter(function(it){return!ct.hasKey(v.values?re(it):it)}).concat(v.values?he:he.map(function(it){return re(it)}));break;case"delete":var tt=new Br().addKeys(le.keys);ge=fe.filter(function(it){return!tt.hasKey(v.values?re(it):it)});break;case"deleteRange":var vt=le.range;ge=fe.filter(function(it){return!Vl(re(it),vt)})}return ge},d))===d)?d:(I.sort(function(fe,le){return Qt(oe(fe),oe(le))||Qt(re(fe),re(le))}),v.limit&&v.limit<1/0&&(I.length>v.limit?I.length=v.limit:d.length===v.limit&&I.length<v.limit&&(P.dirty=!0)),k?Object.freeze(I):I)}function al(d,v){return Qt(d.lower,v.lower)===0&&Qt(d.upper,v.upper)===0&&!!d.lowerOpen==!!v.lowerOpen&&!!d.upperOpen==!!v.upperOpen}function jo(d,v){return((A,I,P,k)=>{if(A===void 0)return I!==void 0?-1:0;if(I===void 0)return 1;if((A=Qt(A,I))===0){if(P&&k)return 0;if(P)return 1;if(k)return-1}return A})(d.lower,v.lower,d.lowerOpen,v.lowerOpen)<=0&&0<=((A,I,P,k)=>{if(A===void 0)return I!==void 0?1:0;if(I===void 0)return-1;if((A=Qt(A,I))===0){if(P&&k)return 0;if(P)return-1;if(k)return 1}return A})(d.upper,v.upper,d.upperOpen,v.upperOpen)}function qm(d,v,A,I){d.subscribers.add(A),I.addEventListener("abort",function(){var P,k;d.subscribers.delete(A),d.subscribers.size===0&&(P=d,k=v,setTimeout(function(){P.subscribers.size===0&&qe(k,P)},3e3))})}var zl={stack:"dbcore",level:0,name:"Cache",create:function(d){var v=d.schema.name;return r(r({},d),{transaction:function(A,I,P){var k,F,G=d.transaction(A,I,P);return I==="readwrite"&&(P=(k=new AbortController).signal,G.addEventListener("abort",(F=function(Q){return function(){if(k.abort(),I==="readwrite"){for(var re=new Set,ne=0,oe=A;ne<oe.length;ne++){var fe=oe[ne],le=H["idb://".concat(v,"/").concat(fe)];if(le){var ge=d.table(fe),he=le.optimisticOps.filter(function(xt){return xt.trans===G});if(G._explicit&&Q&&G.mutatedParts)for(var we=0,Ce=Object.values(le.queries.query);we<Ce.length;we++)for(var be=0,Me=(ct=Ce[we]).slice();be<Me.length;be++)B((tt=Me[be]).obsSet,G.mutatedParts)&&(qe(ct,tt),tt.subscribers.forEach(function(xt){return re.add(xt)}));else if(0<he.length){le.optimisticOps=le.optimisticOps.filter(function(xt){return xt.trans!==G});for(var He=0,lt=Object.values(le.queries.query);He<lt.length;He++)for(var ct,tt,vt,gt=0,it=(ct=lt[He]).slice();gt<it.length;gt++)(tt=it[gt]).res!=null&&G.mutatedParts&&(Q&&!tt.dirty?(vt=Object.isFrozen(tt.res),vt=Ya(tt.res,tt.req,he,ge,tt,vt),tt.dirty?(qe(ct,tt),tt.subscribers.forEach(function(xt){return re.add(xt)})):vt!==tt.res&&(tt.res=vt,tt.promise=ft.resolve({result:vt}))):(tt.dirty&&qe(ct,tt),tt.subscribers.forEach(function(xt){return re.add(xt)})))}}}re.forEach(function(xt){return xt()})}}})(!1),{signal:P}),G.addEventListener("error",F(!1),{signal:P}),G.addEventListener("complete",F(!0),{signal:P})),G},table:function(A){var I=d.table(A),P=I.schema.primaryKey;return r(r({},I),{mutate:function(k){var F,G=Ze.trans;return!P.outbound&&G.db._options.cache!=="disabled"&&!G.explicit&&G.idbtrans.mode==="readwrite"&&(F=H["idb://".concat(v,"/").concat(A)])?(G=I.mutate(k),k.type!=="add"&&k.type!=="put"||!(50<=k.values.length||di(P,k).some(function(Q){return Q==null}))?(F.optimisticOps.push(k),k.mutatedParts&&Le(k.mutatedParts),G.then(function(Q){0<Q.numFailures&&(qe(F.optimisticOps,k),(Q=Na(0,k,Q))&&F.optimisticOps.push(Q),k.mutatedParts)&&Le(k.mutatedParts)}),G.catch(function(){qe(F.optimisticOps,k),k.mutatedParts&&Le(k.mutatedParts)})):G.then(function(Q){var re=Na(0,r(r({},k),{values:k.values.map(function(ne,oe){var fe;return Q.failures[oe]?ne:(V(fe=(fe=P.keyPath)!=null&&fe.includes(".")?J(ne):r({},ne),P.keyPath,Q.results[oe]),fe)})}),Q);F.optimisticOps.push(re),queueMicrotask(function(){return k.mutatedParts&&Le(k.mutatedParts)})}),G):I.mutate(k)},query:function(k){var F,G,Q,re,ne,oe,fe;return Mo(Ze,I)&&Hs("query",k)?(F=((Q=Ze.trans)==null?void 0:Q.db._options.cache)==="immutable",G=(Q=Ze).requery,Q=Q.signal,oe=((le,ge,he,we)=>{var Ce=H["idb://".concat(le,"/").concat(ge)];if(!Ce)return[];if(!(le=Ce.queries[he]))return[null,!1,Ce,null];var be=le[(we.query?we.query.index.name:null)||""];if(!be)return[null,!1,Ce,null];switch(he){case"query":var Me=be.find(function(He){return He.req.limit===we.limit&&He.req.values===we.values&&al(He.req.query.range,we.query.range)});return Me?[Me,!0,Ce,be]:[be.find(function(He){return("limit"in He.req?He.req.limit:1/0)>=we.limit&&(!we.values||He.req.values)&&jo(He.req.query.range,we.query.range)}),!1,Ce,be];case"count":return Me=be.find(function(He){return al(He.req.query.range,we.query.range)}),[Me,!!Me,Ce,be]}})(v,A,"query",k),fe=oe[0],re=oe[2],ne=oe[3],fe&&oe[1]?fe.obsSet=k.obsSet:(oe=I.query(k).then(function(le){var ge=le.result;if(fe&&(fe.res=ge),F){for(var he=0,we=ge.length;he<we;++he)Object.freeze(ge[he]);Object.freeze(ge)}else le.result=J(ge);return le}).catch(function(le){return ne&&fe&&qe(ne,fe),Promise.reject(le)}),fe={obsSet:k.obsSet,promise:oe,subscribers:new Set,type:"query",req:k,dirty:!1},ne?ne.push(fe):(ne=[fe],(re=re||(H["idb://".concat(v,"/").concat(A)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[k.query.index.name||""]=ne)),qm(fe,ne,G,Q),fe.promise.then(function(le){return{result:Ya(le.result,k,re?.optimisticOps,I,fe,F)}})):I.query(k)}})}})}};function la(d,v){return new Proxy(d,{get:function(A,I,P){return I==="db"?v:Reflect.get(A,I,P)}})}ar.prototype.version=function(d){if(isNaN(d)||d<.1)throw new Ye.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new Ye.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var v=this._versions,A=v.filter(function(I){return I._cfg.version===d})[0];return A||(A=new this.Version(d),v.push(A),v.sort(tl),A.stores({}),this._state.autoSchema=!1),A},ar.prototype._whenReady=function(d){var v=this;return this.idbdb&&(this._state.openComplete||Ze.letThrough||this._vip)?d():new ft(function(A,I){if(v._state.openComplete)return I(new Ye.DatabaseClosed(v._state.dbOpenError));if(!v._state.isBeingOpened){if(!v._state.autoOpen)return void I(new Ye.DatabaseClosed);v.open().catch(Fe)}v._state.dbReadyPromise.then(A,I)}).then(d)},ar.prototype.use=function(P){var v=P.stack,A=P.create,I=P.level,P=P.name,k=(P&&this.unuse({stack:v,name:P}),this._middlewares[v]||(this._middlewares[v]=[]));return k.push({stack:v,create:A,level:I??10,name:P}),k.sort(function(F,G){return F.level-G.level}),this},ar.prototype.unuse=function(d){var v=d.stack,A=d.name,I=d.create;return v&&this._middlewares[v]&&(this._middlewares[v]=this._middlewares[v].filter(function(P){return I?P.create!==I:!!A&&P.name!==A})),this},ar.prototype.open=function(){var d=this;return Pi(cn,function(){return kr(d)})},ar.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,v=Ge.indexOf(this);if(0<=v&&Ge.splice(v,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new ft(function(A){d.dbReadyResolve=A}),d.openCanceller=new ft(function(A,I){d.cancelOpen=I}))},ar.prototype.close=function(v){var v=(v===void 0?{disableAutoOpen:!0}:v).disableAutoOpen,A=this._state;v?(A.isBeingOpened&&A.cancelOpen(new Ye.DatabaseClosed),this._close(),A.autoOpen=!1,A.dbOpenError=new Ye.DatabaseClosed):(this._close(),A.autoOpen=this._options.autoOpen||A.isBeingOpened,A.openComplete=!1,A.dbOpenError=null)},ar.prototype.delete=function(d){var v=this,A=(d===void 0&&(d={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),I=this._state;return new ft(function(P,k){function F(){v.close(d);var G=v._deps.indexedDB.deleteDatabase(v.name);G.onsuccess=_n(function(){var Q,re,ne;Q=v._deps,re=v.name,Wa(ne=Q.indexedDB)||re===uo||ko(ne,Q.IDBKeyRange).delete(re).catch(Fe),P()}),G.onerror=Tr(k),G.onblocked=v._fireOnBlocked}if(A)throw new Ye.InvalidArgument("Invalid closeOptions argument to db.delete()");I.isBeingOpened?I.dbReadyPromise.then(F):F()})},ar.prototype.backendDB=function(){return this.idbdb},ar.prototype.isOpen=function(){return this.idbdb!==null},ar.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},ar.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ar.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ar.prototype,"tables",{get:function(){var d=this;return l(this._allTables).map(function(v){return d._allTables[v]})},enumerable:!1,configurable:!0}),ar.prototype.transaction=function(){var d=(function(v,A,I){var P=arguments.length;if(P<2)throw new Ye.InvalidArgument("Too few arguments");for(var k=new Array(P-1);--P;)k[P-1]=arguments[P];return I=k.pop(),[v,ae(k),I]}).apply(this,arguments);return this._transaction.apply(this,d)},ar.prototype._transaction=function(d,v,A){var I,P,k=this,F=Ze.trans,G=(F&&F.db===this&&d.indexOf("!")===-1||(F=null),d.indexOf("?")!==-1);d=d.replace("!","").replace("?","");try{if(P=v.map(function(re){if(re=re instanceof k.Table?re.name:re,typeof re!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return re}),d=="r"||d===Cn)I=Cn;else{if(d!="rw"&&d!=wi)throw new Ye.InvalidArgument("Invalid transaction mode: "+d);I=wi}if(F){if(F.mode===Cn&&I===wi){if(!G)throw new Ye.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");F=null}F&&P.forEach(function(re){if(F&&F.storeNames.indexOf(re)===-1){if(!G)throw new Ye.SubTransaction("Table "+re+" not included in parent transaction.");F=null}}),G&&F&&!F.active&&(F=null)}}catch(re){return F?F._promise(null,function(ne,oe){oe(re)}):Mt(re)}var Q=(function re(ne,oe,fe,le,ge){return ft.resolve().then(function(){var be=Ze.transless||Ze,he=ne._createTransaction(oe,fe,ne._dbSchema,le),be=(he.explicit=!0,{trans:he,transless:be});if(le)he.idbtrans=le.idbtrans;else try{he.create(),he.idbtrans._explicit=!0,ne._state.PR1398_maxLoop=3}catch(Me){return Me.name===ut.InvalidState&&ne.isOpen()&&0<--ne._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ne.close({disableAutoOpen:!1}),ne.open().then(function(){return re(ne,oe,fe,null,ge)})):Mt(Me)}var we,Ce=me(ge),be=(Ce&&gn(),ft.follow(function(){var Me;(we=ge.call(he,he))&&(Ce?(Me=Nr.bind(null,null),we.then(Me,Me)):typeof we.next=="function"&&typeof we.throw=="function"&&(we=bn(we)))},be));return(we&&typeof we.then=="function"?ft.resolve(we).then(function(Me){return he.active?Me:Mt(new Ye.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):be.then(function(){return we})).then(function(Me){return le&&he._resolve(),he._completion.then(function(){return Me})}).catch(function(Me){return he._reject(Me),Mt(Me)})})}).bind(null,this,I,P,F,A);return F?F._promise(I,Q,"lock"):Ze.trans?Pi(Ze.transless,function(){return k._whenReady(Q)}):this._whenReady(Q)},ar.prototype.table=function(d){if(_(this._allTables,d))return this._allTables[d];throw new Ye.InvalidTable("Table ".concat(d," does not exist"))};var Es=ar;function ar(d,v){var A,I,P,k,F,G=this,Q=(this._middlewares={},this.verno=0,ar.dependencies),Q=(this._options=v=r({addons:ar.addons,autoOpen:!0,indexedDB:Q.indexedDB,IDBKeyRange:Q.IDBKeyRange,cache:"cloned"},v),this._deps={indexedDB:v.indexedDB,IDBKeyRange:v.IDBKeyRange},v.addons),re=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Fe,dbReadyPromise:null,cancelOpen:Fe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:v.autoOpen}),ne=(re.dbReadyPromise=new ft(function(oe){re.dbReadyResolve=oe}),re.openCanceller=new ft(function(oe,fe){re.cancelOpen=fe}),this._state=re,this.name=d,this.on=ki(this,"populate","blocked","versionchange","close",{ready:[Zt,Fe]}),this.once=function(oe,fe){var le=function(){for(var ge=[],he=0;he<arguments.length;he++)ge[he]=arguments[he];G.on(oe).unsubscribe(le),fe.apply(G,ge)};return G.on(oe,le)},this.on.ready.subscribe=K(this.on.ready.subscribe,function(oe){return function(fe,le){ar.vip(function(){var ge,he=G._state;he.openComplete?(he.dbOpenError||ft.resolve().then(fe),le&&oe(fe)):he.onReadyBeingFired?(he.onReadyBeingFired.push(fe),le&&oe(fe)):(oe(fe),ge=G,le||oe(function we(){ge.on.ready.unsubscribe(fe),ge.on.ready.unsubscribe(we)}))})}}),this.Collection=(A=this,$t(el.prototype,function(we,he){this.db=A;var le=yn,ge=null;if(he)try{le=he()}catch(be){ge=be}var he=we._ctx,we=he.table,Ce=we.hook.reading.fire;this._ctx={table:we,index:he.index,isPrimKey:!he.index||we.schema.primKey.keyPath&&he.index===we.schema.primKey.name,range:le,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ge,or:he.or,valueMapper:Ce!==Rt?Ce:null}})),this.Table=(I=this,$t(Gi.prototype,function(oe,fe,le){this.db=I,this._tx=le,this.name=oe,this.schema=fe,this.hook=I._allTables[oe]?I._allTables[oe].hook:ki(null,{creating:[Wn,Fe],reading:[Wt,Rt],updating:[zt,Fe],deleting:[st,Fe]})})),this.Transaction=(P=this,$t(Do.prototype,function(oe,fe,le,ge,he){var we=this;oe!=="readonly"&&fe.forEach(function(Ce){Ce=(Ce=le[Ce])==null?void 0:Ce.yProps,Ce&&(fe=fe.concat(Ce.map(function(be){return be.updatesTable})))}),this.db=P,this.mode=oe,this.storeNames=fe,this.schema=le,this.chromeTransactionDurability=ge,this.idbtrans=null,this.on=ki(this,"complete","error","abort"),this.parent=he||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ft(function(Ce,be){we._resolve=Ce,we._reject=be}),this._completion.then(function(){we.active=!1,we.on.complete.fire()},function(Ce){var be=we.active;return we.active=!1,we.on.error.fire(Ce),we.parent?we.parent._reject(Ce):be&&we.idbtrans&&we.idbtrans.abort(),Mt(Ce)})})),this.Version=(k=this,$t(Dr.prototype,function(oe){this.db=k,this._cfg={version:oe,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(F=this,$t(Jn.prototype,function(oe,fe,le){if(this.db=F,this._ctx={table:oe,index:fe===":id"?null:fe,or:le},this._cmp=this._ascending=Qt,this._descending=function(ge,he){return Qt(he,ge)},this._max=function(ge,he){return 0<Qt(ge,he)?ge:he},this._min=function(ge,he){return Qt(ge,he)<0?ge:he},this._IDBKeyRange=F._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ye.MissingAPI})),this.on("versionchange",function(oe){0<oe.newVersion?console.warn("Another connection wants to upgrade database '".concat(G.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(G.name,"'. Closing db now to resume the delete request.")),G.close({disableAutoOpen:!1})}),this.on("blocked",function(oe){!oe.newVersion||oe.newVersion<oe.oldVersion?console.warn("Dexie.delete('".concat(G.name,"') was blocked")):console.warn("Upgrade '".concat(G.name,"' blocked by other connection holding version ").concat(oe.oldVersion/10))}),this._maxKey=Sa(v.IDBKeyRange),this._createTransaction=function(oe,fe,le,ge){return new G.Transaction(oe,fe,le,G._options.chromeTransactionDurability,ge)},this._fireOnBlocked=function(oe){G.on("blocked").fire(oe),Ge.filter(function(fe){return fe.name===G.name&&fe!==G&&!fe._state.vcFired}).map(function(fe){return fe.on("versionchange").fire(oe)})},this.use(_s),this.use(zl),this.use(qu),this.use(Ca),this.use(Oa),new Proxy(this,{get:function(oe,fe,le){var ge;return fe==="_vip"||(fe==="table"?function(he){return la(G.table(he),ne)}:(ge=Reflect.get(oe,fe,le))instanceof Gi?la(ge,ne):fe==="tables"?ge.map(function(he){return la(he,ne)}):fe==="_createTransaction"?function(){return la(ge.apply(this,arguments),ne)}:ge)}}));this.vip=ne,Q.forEach(function(oe){return oe(G)})}var As,sn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ul=(Y.prototype.subscribe=function(d,v,A){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:v,complete:A})},Y.prototype[sn]=function(){return this},Y);function Y(d){this._subscribe=d}try{As={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{As={indexedDB:null,IDBKeyRange:null}}function o(d){var v,A=!1,I=new Ul(function(P){var k=me(d),F,G=!1,Q={},re={},ne={get closed(){return G},unsubscribe:function(){G||(G=!0,F&&F.abort(),oe&&xn.storagemutated.unsubscribe(le))}},oe=(P.start&&P.start(ne),!1),fe=function(){return Qn(ge)},le=function(he){S(Q,he),B(re,Q)&&fe()},ge=function(){var he,we,Ce;!G&&As.indexedDB&&(Q={},he={},F&&F.abort(),F=new AbortController,Ce=(be=>{var Me=Hr();try{k&&gn();var He=Fn(d,be);return He=k?He.finally(Nr):He}finally{Me&&qi()}})(we={subscr:he,signal:F.signal,requery:fe,querier:d,trans:null}),Promise.resolve(Ce).then(function(be){A=!0,v=be,G||we.signal.aborted||(Q={},(Me=>{for(var He in Me)if(_(Me,He))return;return 1})(re=he)||oe||(xn(Ua,le),oe=!0),Qn(function(){return!G&&P.next&&P.next(be)}))},function(be){A=!1,["DatabaseClosedError","AbortError"].includes(be?.name)||G||Qn(function(){G||P.error&&P.error(be)})}))};return setTimeout(fe,0),ne});return I.hasValue=function(){return A},I.getValue=function(){return v},I}var c=Es;function h(d){var v=x;try{x=!0,xn.storagemutated.fire(d),ot(d,!0)}finally{x=v}}T(c,r(r({},Se),{delete:function(d){return new c(d,{addons:[]}).delete()},exists:function(d){return new c(d,{addons:[]}).open().then(function(v){return v.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return v=c.dependencies,A=v.indexedDB,v=v.IDBKeyRange,(Wa(A)?Promise.resolve(A.databases()).then(function(I){return I.map(function(P){return P.name}).filter(function(P){return P!==uo})}):ko(A,v).toCollection().primaryKeys()).then(d)}catch{return Mt(new Ye.MissingAPI)}var v,A},defineClass:function(){return function(d){m(this,d)}},ignoreTransaction:function(d){return Ze.trans?Pi(Ze.transless,d):d()},vip:rl,async:function(d){return function(){try{var v=bn(d.apply(this,arguments));return v&&typeof v.then=="function"?v:ft.resolve(v)}catch(A){return Mt(A)}}},spawn:function(d,v,A){try{var I=bn(d.apply(A,v||[]));return I&&typeof I.then=="function"?I:ft.resolve(I)}catch(P){return Mt(P)}},currentTransaction:{get:function(){return Ze.trans||null}},waitFor:function(d,v){return d=ft.resolve(typeof d=="function"?c.ignoreTransaction(d):d).timeout(v||6e4),Ze.trans?Ze.trans.waitFor(d):d},Promise:ft,debug:{get:function(){return at},set:function(d){na(d)}},derive:M,extend:m,props:T,override:K,Events:ki,on:xn,liveQuery:o,extendObservabilitySet:S,getByKeyPath:Z,setByKeyPath:V,delByKeyPath:function(d,v){typeof v=="string"?V(d,v,void 0):"length"in v&&[].map.call(v,function(A){V(d,A,void 0)})},shallowClone:W,deepClone:J,getObjectDiff:$a,cmp:Qt,asap:ue,minKey:-1/0,addons:[],connections:Ge,errnames:ut,dependencies:As,cache:H,semVer:"4.3.0",version:"4.3.0".split(".").map(function(d){return parseInt(d)}).reduce(function(d,v,A){return d+v/Math.pow(10,2*A)})})),c.maxKey=Sa(c.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(xn(Ua,function(d){x||(d=new CustomEvent(Lt,{detail:d}),x=!0,dispatchEvent(d),x=!1)}),addEventListener(Lt,function(d){d=d.detail,x||h(d)}));var y,x=!1,E=function(){};return typeof BroadcastChannel<"u"&&((E=function(){(y=new BroadcastChannel(Lt)).onmessage=function(d){return d.data&&h(d.data)}})(),typeof y.unref=="function"&&y.unref(),xn(Ua,function(d){x||y.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!Es.disableBfCache&&d.persisted){at&&console.debug("Dexie: handling persisted pagehide"),y?.close();for(var v=0,A=Ge;v<A.length;v++)A[v].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!Es.disableBfCache&&d.persisted&&(at&&console.debug("Dexie: handling persisted pageshow"),E(),h({all:new Br(-1/0,[[]])}))})),ft.rejectionMapper=function(d,v){return!d||d instanceof Ve||d instanceof TypeError||d instanceof SyntaxError||!d.name||!_t[d.name]?d:(v=new _t[d.name](v||d.message,d),"stack"in d&&j(v,"stack",{get:function(){return this.inner.stack}}),v)},na(at),r(Es,Object.freeze({__proto__:null,Dexie:Es,Entity:nn,PropModification:ai,RangeSet:Br,add:function(d){return new ai({add:d})},cmp:Qt,default:Es,liveQuery:o,mergeRanges:oa,rangesOverlap:fn,remove:function(d){return new ai({remove:d})},replacePrefix:function(d,v){return new ai({replacePrefix:[d,v]})}}),{default:Es}),Es})})(Ny)),Ny.exports}var Ote=Cte();const wA=Rl(Ote),M4=Symbol.for("Dexie"),mv=globalThis[M4]||(globalThis[M4]=wA);if(wA.semVer!==mv.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${wA.semVer} and ${mv.semVer}`);const{liveQuery:cEe,mergeRanges:fEe,rangesOverlap:dEe,RangeSet:hEe,cmp:mEe,Entity:gEe,PropModification:pEe,replacePrefix:yEe,add:vEe,remove:xEe,DexieYProvider:bEe}=mv;function gv(t){return t?t instanceof Date?t.toISOString():t:null}function $1(t){return t?new Date(t):new Date}async function Py(t,e){try{const n=ds(Ti,"users",t,"profile","data"),{id:r,anthropicApiKey:i,anthropicApiUrl:a,...l}=e;await Cd(n,{...l,createdAt:gv(e.createdAt),updatedAt:gv(e.updatedAt||new Date)})}catch(n){console.warn("[Sync] Push profile failed:",n)}}async function CL(t,e){try{const n=await Je.dailyLogs.where("date").equals(e).first();if(!n)return;const r=n.id?await Je.mealEntries.where("dailyLogId").equals(n.id).toArray():[],i=ds(Ti,"users",t,"days",e);await Cd(i,{date:n.date,totalPointsUsed:n.totalPointsUsed,weeklyPointsUsed:n.weeklyPointsUsed,waterMl:n.waterMl??0,meals:r.map(a=>({foodItem:{name:a.foodItem.name,brand:a.foodItem.brand||"",barcode:a.foodItem.barcode||"",nutrition:a.foodItem.nutrition,pointsPer100g:a.foodItem.pointsPer100g,servingSizeG:a.foodItem.servingSizeG,unit:a.foodItem.unit||"g",isZeroPoint:a.foodItem.isZeroPoint,source:a.foodItem.source},mealType:a.mealType,quantityG:a.quantityG,quantity:a.quantity??1,points:a.points,loggedAt:gv(a.loggedAt)})),updatedAt:new Date().toISOString()})}catch(n){console.warn("[Sync] Push day failed:",n)}}async function OL(t,e){try{const n=ds(Ti,"users",t,"weight",e.date);await Cd(n,{date:e.date,weightKg:e.weightKg,note:e.note||"",updatedAt:new Date().toISOString()})}catch(n){console.warn("[Sync] Push weight failed:",n)}}async function NL(t,e){try{if(e.source!=="user"||!e.id)return;const n=ds(Ti,"users",t,"foods",String(e.id));await Cd(n,{name:e.name,brand:e.brand||"",barcode:e.barcode||"",nutrition:e.nutrition,pointsPer100g:e.pointsPer100g,servingSizeG:e.servingSizeG,unit:e.unit||"g",isZeroPoint:e.isZeroPoint,isFavorite:e.isFavorite||!1,source:e.source,createdAt:gv(e.createdAt),updatedAt:new Date().toISOString()})}catch(n){console.warn("[Sync] Push food failed:",n)}}async function Nte(t){const e=["profile","days","weight","foods"];for(const i of e){const a=await Lc(jc(Ti,"users",t,i));for(const l of a.docs)await H7(ds(Ti,"users",t,i,l.id))}const n=ds(Ti,"users",t),r=await c0(n);if(r.exists()){const i=r.data();await Cd(n,{email:i.email||"",lastLogin:i.lastLogin||""})}}async function Pte(t){try{let e=!1;const n=ds(Ti,"users",t,"profile","data"),r=await c0(n);if(r.exists()){const f=r.data(),p=(await Je.userProfiles.toArray())[0],b=f.updatedAt?new Date(f.updatedAt).getTime():0,_=p?.updatedAt?new Date(p.updatedAt).getTime():0;if(b>_){const T={name:f.name,gender:f.gender,dateOfBirth:f.dateOfBirth,heightCm:f.heightCm,currentWeightKg:f.currentWeightKg,goalWeightKg:f.goalWeightKg,activityLevel:f.activityLevel,goal:f.goal,dailyPointsBudget:f.dailyPointsBudget,weeklyPointsBudget:f.weeklyPointsBudget,waterGoalMl:f.waterGoalMl,onboardingComplete:f.onboardingComplete,createdAt:$1(f.createdAt),updatedAt:$1(f.updatedAt)};p?.id?await Je.userProfiles.update(p.id,T):await Je.userProfiles.add(T),e=!0}}const i=await Lc(jc(Ti,"users",t,"days"));for(const f of i.docs){const m=f.data(),p=f.id,b=await Je.dailyLogs.where("date").equals(p).first(),_=m.updatedAt?new Date(m.updatedAt).getTime():0,T=!b||_>b._syncedAt||0;if(T&&m.meals?.length>0){let N;if(b?.id){await Je.dailyLogs.update(b.id,{totalPointsUsed:m.totalPointsUsed,weeklyPointsUsed:m.weeklyPointsUsed,waterMl:m.waterMl??0}),N=b.id;const j=await Je.mealEntries.where("dailyLogId").equals(N).toArray();for(const M of j)M.id&&await Je.mealEntries.delete(M.id)}else N=await Je.dailyLogs.add({date:p,totalPointsUsed:m.totalPointsUsed,weeklyPointsUsed:m.weeklyPointsUsed,waterMl:m.waterMl??0});for(const j of m.meals)await Je.mealEntries.add({dailyLogId:N,foodItem:{name:j.foodItem.name,brand:j.foodItem.brand,barcode:j.foodItem.barcode,nutrition:j.foodItem.nutrition,pointsPer100g:j.foodItem.pointsPer100g,servingSizeG:j.foodItem.servingSizeG,unit:j.foodItem.unit||"g",isZeroPoint:j.foodItem.isZeroPoint,source:j.foodItem.source,createdAt:new Date},mealType:j.mealType,quantityG:j.quantityG,quantity:j.quantity??1,points:j.points,loggedAt:$1(j.loggedAt)});e=!0}else T&&b&&!m.meals?.length&&await Je.dailyLogs.update(b.id,{waterMl:m.waterMl??b.waterMl??0})}const a=await Lc(jc(Ti,"users",t,"weight"));for(const f of a.docs){const m=f.data(),p=f.id;await Je.weightEntries.where("date").equals(p).first()||(await Je.weightEntries.add({date:p,weightKg:m.weightKg,note:m.note||""}),e=!0)}const l=await Lc(jc(Ti,"users",t,"foods"));for(const f of l.docs){const m=f.data();await Je.foodItems.where("name").equalsIgnoreCase(m.name).first()||(await Je.foodItems.add({name:m.name,brand:m.brand,barcode:m.barcode,nutrition:m.nutrition,pointsPer100g:m.pointsPer100g,servingSizeG:m.servingSizeG,unit:m.unit||"g",isZeroPoint:m.isZeroPoint,isFavorite:m.isFavorite||!1,source:"user",createdAt:$1(m.createdAt)}),e=!0)}return console.log(`[Sync] Pull complete. Changes: ${e}`),e}catch(e){return console.warn("[Sync] Pull failed:",e),!1}}async function PL(t){try{const e=await Je.userProfiles.toArray();e[0]&&await Py(t,e[0]);const n=await Je.dailyLogs.toArray(),r=await Je.weightEntries.toArray(),i=await Je.foodItems.where("source").equals("user").toArray(),a=async(l,f)=>{for(let m=0;m<l.length;m+=5)await Promise.all(l.slice(m,m+5).map(f))};await Promise.all([a(n,l=>CL(t,l.date)),a(r,l=>OL(t,l)),a(i,l=>NL(t,l))]),console.log("[Sync] Push all complete.")}catch(e){console.warn("[Sync] Push all failed:",e)}}function RL(){return Go.currentUser?.uid??null}function g0(t){const e=RL();e&&CL(e,t).catch(()=>{})}function Rte(t){const e=RL();e&&NL(e,t).catch(()=>{})}class Dte extends mv{userProfiles;foodItems;mealEntries;dailyLogs;weightEntries;constructor(){super("BodyBalanceDB"),this.version(1).stores({userProfiles:"++id, name",foodItems:"++id, name, barcode, source",mealEntries:"++id, dailyLogId, mealType, loggedAt",dailyLogs:"++id, &date",weightEntries:"++id, &date"}),this.version(2).stores({foodItems:"++id, name, barcode, source, isFavorite"})}}const Je=new Dte;async function DL(t){let e=await Je.dailyLogs.where("date").equals(t).first();if(!e){const n=await Je.dailyLogs.add({date:t,totalPointsUsed:0,weeklyPointsUsed:0});e=await Je.dailyLogs.get(n)}return e}async function kL(t){const e=await Je.dailyLogs.where("date").equals(t).first();return e?.id?Je.mealEntries.where("dailyLogId").equals(e.id).toArray():[]}async function ML(t,e){const n=await DL(t);await Je.mealEntries.add({...e,dailyLogId:n.id,loggedAt:new Date});const i=(await Je.mealEntries.where("dailyLogId").equals(n.id).toArray()).reduce((a,l)=>a+l.points,0);await Je.dailyLogs.update(n.id,{totalPointsUsed:i}),g0(t)}async function kte(t,e){const n=await Je.mealEntries.get(t);if(n&&(await Je.mealEntries.update(t,e),n.dailyLogId)){const i=(await Je.mealEntries.where("dailyLogId").equals(n.dailyLogId).toArray()).reduce((l,f)=>l+(f.id===t?e.points:f.points),0);await Je.dailyLogs.update(n.dailyLogId,{totalPointsUsed:i});const a=await Je.dailyLogs.get(n.dailyLogId);a&&g0(a.date)}}async function Mte(t){const e=await Je.mealEntries.get(t);if(e&&(await Je.mealEntries.delete(t),e.dailyLogId)){const r=(await Je.mealEntries.where("dailyLogId").equals(e.dailyLogId).toArray()).reduce((a,l)=>a+l.points,0);await Je.dailyLogs.update(e.dailyLogId,{totalPointsUsed:r});const i=await Je.dailyLogs.get(e.dailyLogId);i&&g0(i.date)}}async function _A(t=15){const e=await Je.mealEntries.orderBy("loggedAt").reverse().toArray(),n=new Set,r=[];for(const i of e){const a=i.foodItem.name.toLowerCase();if(!n.has(a)){n.add(a);const l=await Je.foodItems.where("name").equalsIgnoreCase(i.foodItem.name).first();if(r.push({...i.foodItem,isFavorite:l?.isFavorite??!1,id:l?.id??i.foodItem.id}),r.length>=t)break}}return r}async function EA(){return Je.foodItems.filter(t=>!!t.isFavorite).toArray()}async function jte(t){let e;if(t.id&&(e=await Je.foodItems.get(t.id)),e||(e=await Je.foodItems.where("name").equalsIgnoreCase(t.name).first()),e?.id){const n=!e.isFavorite;return await Je.foodItems.update(e.id,{isFavorite:n}),n}else return await Je.foodItems.add({...t,id:void 0,isFavorite:!0,createdAt:new Date}),!0}async function sI(t){const e=await Je.foodItems.add({...t,createdAt:new Date}),n=await Je.foodItems.get(e);return Rte(n),n}async function Lte(t,e){const n=new Date(t),r=n.getDay(),i=r===0?-6:1-r,a=new Date(n);a.setDate(n.getDate()+i);let l=0;for(let f=0;f<7;f++){const m=new Date(a);m.setDate(a.getDate()+f);const p=m.toISOString().split("T")[0];if(p>t)break;const b=await Je.dailyLogs.where("date").equals(p).first();b&&b.totalPointsUsed>e&&(l+=b.totalPointsUsed-e)}return l}async function Bte(t){return(await Je.dailyLogs.where("date").equals(t).first())?.waterMl??0}async function Fte(t,e){const n=await DL(t),r=(n.waterMl??0)+e;return await Je.dailyLogs.update(n.id,{waterMl:r}),g0(t),r}async function Vte(t){const e=await Je.dailyLogs.where("date").equals(t).first();e?.id&&(await Je.dailyLogs.update(e.id,{waterMl:0}),g0(t))}async function zte(t,e){const n=await kL(t);if(n.length===0)return 0;for(const r of n)await ML(e,{foodItem:r.foodItem,mealType:r.mealType,quantityG:r.quantityG,quantity:r.quantity,points:r.points});return n.length}async function Ute(t,e,n,r=0){const i=new Date,a=i.getDay(),l=a===0?-6:1-a,f=new Date(i);f.setDate(i.getDate()+l-r*7);const m=new Date(f);m.setDate(f.getDate()+6);const p=i.toISOString().split("T")[0],b=m.toISOString().split("T")[0],_=b<p?b:p;let T=0,N=0,j=0,M=0,L=0,z=null,$=1/0,K=0;const ee=["zo","ma","di","wo","do","vr","za"];for(let X=0;X<7;X++){const J=new Date(f);J.setDate(f.getDate()+X);const xe=J.toISOString().split("T")[0];if(xe>_)break;const de=await Je.dailyLogs.where("date").equals(xe).first();if(de){const ye=de.totalPointsUsed;T+=ye,N++,ye<=t&&j++,ye>t&&(K+=ye-t),ye<$&&($=ye,z=ee[J.getDay()]),(de.waterMl??0)>0&&L++,(de.waterMl??0)>=n&&M++}}if(N===0)return null;const ue=f.toISOString().split("T")[0],Z=await Je.weightEntries.where("date").aboveOrEqual(ue).and(X=>X.date<=_).first(),V=await Je.weightEntries.where("date").belowOrEqual(_).and(X=>X.date>=ue).reverse().first(),W=Z&&V&&Z.date!==V.date?V.weightKg-Z.weightKg:null,U=["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"];return{weekLabel:`Week ${qte(f)}  ${f.getDate()}-${m.getDate()} ${U[m.getMonth()]}`,avgPoints:Math.round(T/N),dailyBudget:t,daysWithinBudget:j,totalDays:N,waterDaysOnTarget:M,waterTotalDays:L,weightChange:W,bestDay:z,bestDayPoints:$===1/0?0:$,weeklyPointsUsed:K,weeklyPointsBudget:e}}function qte(t){const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const n=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-n.getTime())/864e5+1)/7)}async function Gte(t){let e=0;const n=new Date;for(let r=1;r<=365;r++){const i=new Date(n);i.setDate(n.getDate()-r);const a=i.toISOString().split("T")[0],l=await Je.dailyLogs.where("date").equals(a).first();if(!l||l.totalPointsUsed===0||l.totalPointsUsed>t)break;e++}return e}const Hte={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9};function Kte(t,e,n,r){return r==="male"?10*t+6.25*e-5*n+5:10*t+6.25*e-5*n-161}function Wte(t){const e=new Date(t),n=new Date;let r=n.getFullYear()-e.getFullYear();const i=n.getMonth()-e.getMonth();return(i<0||i===0&&n.getDate()<e.getDate())&&r--,r}function $te(t,e){return t*Hte[e]}function oI(t,e,n,r,i,a){const l=Wte(n),f=Kte(t,e,l,r),m=$te(f,i);let p=m;a==="lose"&&(p=m-500),p=Math.max(p,r==="male"?1500:1200);const _=Math.max(23,Math.round(p/30)),T=Math.round(_*1.4);return{dailyPoints:_,weeklyPoints:T,bmr:Math.round(f),tdee:Math.round(m),targetCalories:Math.round(p)}}const cd=aI((t,e)=>({profile:null,isLoading:!0,loadProfile:async()=>{t({isLoading:!0});const r=(await Je.userProfiles.toArray())[0]||null;t({profile:r,isLoading:!1})},saveProfile:async n=>{const r=e().profile,i=new Date;if(r?.id){await Je.userProfiles.update(r.id,{...n,updatedAt:i});const a={...r,...n,updatedAt:i};t({profile:a});const l=Go.currentUser?.uid;l&&Py(l,a).catch(()=>{})}else{const a=await Je.userProfiles.add({...n,createdAt:i,updatedAt:i}),l=await Je.userProfiles.get(a);t({profile:l||null});const f=Go.currentUser?.uid;f&&l&&Py(f,l).catch(()=>{})}},updateWeight:async n=>{const r=e().profile;if(!r?.id)return null;const i=r.dailyPointsBudget,a=r.weeklyPointsBudget;let l=r.goal;const f=r.goal==="lose"&&n<=r.goalWeightKg,m=f;f&&(l="maintain");const p=oI(n,r.heightCm,r.dateOfBirth,r.gender,r.activityLevel,l),b=new Date,_={currentWeightKg:n,dailyPointsBudget:p.dailyPoints,weeklyPointsBudget:p.weeklyPoints,updatedAt:b};m&&(_.goal="maintain"),await Je.userProfiles.update(r.id,_);const T={...r,..._};t({profile:T});const N=Go.currentUser?.uid;return N&&Py(N,T).catch(()=>{}),{oldDailyBudget:i,newDailyBudget:p.dailyPoints,oldWeeklyBudget:a,newWeeklyBudget:p.weeklyPoints,goalReached:f,goalSwitched:m}}})),sm=aI(t=>(lee(Go,e=>{t({user:e,isAuthLoading:!1})}),{user:null,isAuthLoading:!0,error:null,login:async(e,n)=>{t({error:null});try{await aee(Go,e,n)}catch(r){t({error:{"auth/invalid-credential":"Onjuist e-mailadres of wachtwoord","auth/invalid-email":"Ongeldig e-mailadres","auth/user-disabled":"Dit account is uitgeschakeld","auth/user-not-found":"Geen account gevonden met dit e-mailadres","auth/wrong-password":"Onjuist wachtwoord","auth/too-many-requests":"Te veel pogingen. Probeer het later opnieuw","auth/network-request-failed":"Geen internetverbinding"}[r.code]||"Er ging iets mis. Probeer het opnieuw."})}},register:async(e,n)=>{t({error:null});try{await iee(Go,e,n)}catch(r){t({error:{"auth/email-already-in-use":"Er bestaat al een account met dit e-mailadres","auth/invalid-email":"Ongeldig e-mailadres","auth/weak-password":"Wachtwoord moet minimaal 6 tekens zijn","auth/network-request-failed":"Geen internetverbinding"}[r.code]||"Er ging iets mis. Probeer het opnieuw."})}},logout:async()=>{await uee(Go)},clearError:()=>t({error:null})}));const jL=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();const Yte=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const Xte=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase());const j4=t=>{const e=Xte(t);return e.charAt(0).toUpperCase()+e.slice(1)};var Qte={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Zte=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const Jte=D.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...f},m)=>D.createElement("svg",{ref:m,...Qte,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:jL("lucide",i),...!a&&!Zte(f)&&{"aria-hidden":"true"},...f},[...l.map(([p,b])=>D.createElement(p,b)),...Array.isArray(a)?a:[a]]));const kt=(t,e)=>{const n=D.forwardRef(({className:r,...i},a)=>D.createElement(Jte,{ref:a,iconNode:e,className:jL(`lucide-${Yte(j4(t))}`,`lucide-${t}`,r),...i}));return n.displayName=j4(t),n};const ene=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],tne=kt("arrow-left",ene);const nne=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],rne=kt("ban",nne);const ine=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],ane=kt("bell-off",ine);const sne=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],one=kt("bell",sne);const lne=[["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M15 10H9",key:"o6yqo3"}],["path",{d:"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z",key:"oz39mx"}]],une=kt("bookmark-plus",lne);const cne=[["path",{d:"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z",key:"oz39mx"}]],fne=kt("bookmark",cne);const dne=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Ry=kt("bot",dne);const hne=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],mne=kt("camera",hne);const gne=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],pne=kt("chart-column",gne);const yne=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],LL=kt("check",yne);const vne=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],xne=kt("chef-hat",vne);const bne=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],BL=kt("chevron-down",bne);const wne=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],L4=kt("chevron-left",wne);const _ne=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],pv=kt("chevron-right",_ne);const Ene=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ane=kt("chevron-up",Ene);const Sne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],yv=kt("circle-alert",Sne);const Tne=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ine=kt("circle-check-big",Tne);const Cne=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],lI=kt("clock",Cne);const One=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Nne=kt("coffee",One);const Pne=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],FL=kt("copy",Pne);const Rne=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Dne=kt("download",Rne);const kne=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],up=kt("droplets",kne);const Mne=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],jne=kt("eye-off",Mne);const Lne=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Bne=kt("eye",Lne);const Fne=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Vne=kt("flame",Fne);const zne=[["path",{d:"M5.116 4.104A1 1 0 0 1 6.11 3h11.78a1 1 0 0 1 .994 1.105L17.19 20.21A2 2 0 0 1 15.2 22H8.8a2 2 0 0 1-2-1.79z",key:"p55z4y"}],["path",{d:"M6 12a5 5 0 0 1 6 0 5 5 0 0 0 6 0",key:"mjntcy"}]],Une=kt("glass-water",zne);const qne=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Yx=kt("heart",qne);const Gne=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Hne=kt("house",Gne);const Kne=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],B4=kt("image-plus",Kne);const Wne=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],$ne=kt("key-round",Wne);const Yne=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Xne=kt("key",Yne);const Qne=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],Zne=kt("leaf",Qne);const Jne=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Bc=kt("loader-circle",Jne);const ere=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],F4=kt("lock",ere);const tre=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],VL=kt("log-out",tre);const nre=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],rre=kt("mail",nre);const ire=[["path",{d:"M5 12h14",key:"1ays0h"}]],zL=kt("minus",ire);const are=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],sre=kt("monitor",are);const ore=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],lre=kt("moon",ore);const ure=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],zf=kt("plus",ure);const cre=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],fre=kt("refresh-cw",cre);const dre=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],UL=kt("rotate-ccw",dre);const hre=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],uI=kt("scale",hre);const mre=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]],vv=kt("scan-barcode",mre);const gre=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Cp=kt("search",gre);const pre=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],yre=kt("send",pre);const vre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],xre=kt("shield-alert",vre);const bre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],wre=kt("shield",bre);const _re=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ere=kt("sparkles",_re);const Are=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Sre=kt("sun",Are);const Tre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],qL=kt("target",Tre);const Ire=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],Cre=kt("ticket",Ire);const Ore=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Nre=kt("trash-2",Ore);const Pre=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],cI=kt("trending-down",Pre);const Rre=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Dre=kt("trending-up",Rre);const kre=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],GL=kt("trophy",kre);const Mre=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],jre=kt("upload",Mre);const Lre=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],HL=kt("user",Lre);const Bre=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Fre=kt("users",Bre);const Vre=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],zre=kt("wifi-off",Vre);const Ure=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],om=kt("x",Ure),qre=[{path:"/",icon:Hne,label:"Home"},{path:"/search",icon:Cp,label:"Zoeken"},{path:"/scan",icon:vv,label:"Scan"},{path:"/statistics",icon:pne,label:"Stats"},{path:"/profile",icon:HL,label:"Profiel"}];function Gre(){const t=kl(),e=ef();return O.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-xl border-t border-ios-separator z-50",style:{paddingBottom:"var(--safe-area-bottom)"},children:O.jsx("div",{className:"flex justify-around items-center h-[50px] max-w-lg mx-auto",children:qre.map(({path:n,icon:r,label:i})=>{const a=t.pathname===n;return O.jsxs("button",{onClick:()=>e(n),className:`flex flex-col items-center justify-center gap-0.5 w-full h-full border-none bg-transparent cursor-pointer transition-colors ${a?"text-primary":"text-ios-secondary"}`,children:[O.jsx(r,{size:24,strokeWidth:a?2.2:1.5}),O.jsx("span",{className:"text-[10px] font-medium",children:i})]},n)})})})}const Hre={primary:"bg-primary text-white active:bg-primary-dark",secondary:"bg-ios-bg text-primary active:bg-gray-200",destructive:"bg-ios-destructive text-white active:bg-red-700",ghost:"bg-transparent text-primary active:bg-gray-100"},Kre={sm:"px-4 py-2 text-[14px]",md:"px-5 py-3 text-[17px]",lg:"px-6 py-4 text-[17px]"};function to({variant:t="primary",size:e="md",children:n,fullWidth:r=!1,className:i="",disabled:a,...l}){return O.jsx("button",{className:`
        rounded-xl font-semibold border-none cursor-pointer
        transition-all duration-150 select-none
        ${Hre[t]}
        ${Kre[e]}
        ${r?"w-full":""}
        ${a?"opacity-40 pointer-events-none":""}
        ${i}
      `,disabled:a,...l,children:n})}function Wre(){const{login:t,register:e,error:n,clearError:r,isAuthLoading:i}=sm(),[a,l]=D.useState("login"),[f,m]=D.useState(""),[p,b]=D.useState(""),[_,T]=D.useState(""),[N,j]=D.useState(""),[M,L]=D.useState(!1),[z,$]=D.useState(!1),[K,ee]=D.useState(""),ue=W=>{l(W),r(),ee(""),b(""),T(""),j("")},Z=async W=>{if(W.preventDefault(),ee(""),!f.trim()||!p){ee("Vul je e-mailadres en wachtwoord in");return}if(a==="register"){if(p.length<6){ee("Wachtwoord moet minimaal 6 tekens zijn");return}if(p!==_){ee("Wachtwoorden komen niet overeen");return}if(!N.trim()){ee("Vul een invite code in");return}}if($(!0),a==="login")await t(f.trim(),p);else try{const U=ds(Ti,"inviteCodes",N.trim().toUpperCase()),ae=await c0(U);if(!ae.exists()){ee("Ongeldige invite code"),$(!1);return}if(ae.data().usedBy){ee("Deze invite code is al gebruikt"),$(!1);return}await e(f.trim(),p);const{currentUser:ie}=await NS(()=>Promise.resolve().then(()=>Ete),[]).then(X=>X.auth);ie&&WT(U,{usedBy:ie.uid,usedEmail:f.trim(),usedAt:new Date().toISOString()}).catch(()=>{})}catch{ee("Kon invite code niet controleren. Probeer opnieuw."),$(!1);return}$(!1)},V=K||n;return O.jsxs("div",{className:"flex flex-col h-full bg-ios-bg",style:{paddingTop:"var(--safe-area-top)"},children:[O.jsxs("div",{className:"flex flex-col items-center pt-16 pb-8 px-8",children:[O.jsx("div",{className:"w-20 h-20 rounded-[28px] bg-primary flex items-center justify-center mb-6 shadow-lg",children:O.jsx(uI,{size:40,color:"white"})}),O.jsx("h1",{className:"text-[34px] font-bold text-ios-text mb-1",children:"BodyBalance"}),O.jsx("p",{className:"text-[15px] text-ios-secondary text-center",children:a==="login"?"Log in om verder te gaan":"Maak een account aan"})]}),O.jsxs("form",{onSubmit:Z,className:"flex-1 px-6 flex flex-col gap-4",children:[O.jsxs("div",{className:"relative",children:[O.jsx(rre,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:"email",value:f,onChange:W=>m(W.target.value),placeholder:"E-mailadres",autoComplete:"email",className:"w-full bg-white rounded-xl py-3.5 pl-12 pr-4 text-[17px] text-ios-text border border-ios-separator placeholder:text-ios-secondary/50 outline-none focus:border-primary focus:ring-1 focus:ring-primary/20 transition-colors"})]}),O.jsxs("div",{className:"relative",children:[O.jsx(F4,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:M?"text":"password",value:p,onChange:W=>b(W.target.value),placeholder:"Wachtwoord",autoComplete:a==="login"?"current-password":"new-password",className:"w-full bg-white rounded-xl py-3.5 pl-12 pr-12 text-[17px] text-ios-text border border-ios-separator placeholder:text-ios-secondary/50 outline-none focus:border-primary focus:ring-1 focus:ring-primary/20 transition-colors"}),O.jsx("button",{type:"button",onClick:()=>L(!M),className:"absolute right-4 top-1/2 -translate-y-1/2 bg-transparent border-none cursor-pointer p-0",children:M?O.jsx(jne,{size:18,className:"text-ios-secondary"}):O.jsx(Bne,{size:18,className:"text-ios-secondary"})})]}),a==="register"&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"relative",children:[O.jsx(F4,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:M?"text":"password",value:_,onChange:W=>T(W.target.value),placeholder:"Wachtwoord bevestigen",autoComplete:"new-password",className:"w-full bg-white rounded-xl py-3.5 pl-12 pr-4 text-[17px] text-ios-text border border-ios-separator placeholder:text-ios-secondary/50 outline-none focus:border-primary focus:ring-1 focus:ring-primary/20 transition-colors"})]}),O.jsxs("div",{className:"relative",children:[O.jsx(Cre,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:"text",value:N,onChange:W=>j(W.target.value.toUpperCase()),placeholder:"Invite code",autoComplete:"off",className:"w-full bg-white rounded-xl py-3.5 pl-12 pr-4 text-[17px] text-ios-text border border-ios-separator placeholder:text-ios-secondary/50 outline-none focus:border-primary focus:ring-1 focus:ring-primary/20 transition-colors font-mono tracking-wider"})]})]}),V&&O.jsx("div",{className:"bg-ios-destructive/10 text-ios-destructive text-[14px] rounded-xl px-4 py-3 text-center font-medium",children:V}),O.jsx(to,{type:"submit",fullWidth:!0,size:"lg",disabled:z||i,children:z?a==="login"?"Inloggen...":"Account aanmaken...":a==="login"?"Inloggen":"Account aanmaken"}),O.jsx("div",{className:"text-center pt-2",children:a==="login"?O.jsxs("p",{className:"text-[15px] text-ios-secondary",children:["Nog geen account?"," ",O.jsx("button",{type:"button",onClick:()=>ue("register"),className:"text-primary font-semibold bg-transparent border-none cursor-pointer p-0",children:"Registreren"})]}):O.jsxs("p",{className:"text-[15px] text-ios-secondary",children:["Al een account?"," ",O.jsx("button",{type:"button",onClick:()=>ue("login"),className:"text-primary font-semibold bg-transparent border-none cursor-pointer p-0",children:"Inloggen"})]})})]})]})}function KL({label:t,children:e}){return O.jsxs("div",{className:"flex flex-col gap-1.5",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide px-1",children:t}),e]})}function Tc({label:t,suffix:e,...n}){return O.jsx(KL,{label:t,children:O.jsxs("div",{className:"relative",children:[O.jsx("input",{...n,className:"bg-white rounded-2xl border border-ios-separator px-4 py-3.5 text-[17px] w-full outline-none focus:border-primary focus:ring-2 focus:ring-primary/20"}),e&&O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:e})]})})}function kh({label:t,options:e,...n}){return O.jsx(KL,{label:t,children:O.jsxs("div",{className:"relative",children:[O.jsx("select",{...n,className:"bg-white rounded-2xl border border-ios-separator px-4 py-3.5 text-[17px] w-full outline-none appearance-none focus:border-primary focus:ring-2 focus:ring-primary/20",children:e.map(r=>O.jsx("option",{value:r.value,children:r.label},r.value))}),O.jsx("svg",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary pointer-events-none",width:"12",height:"12",viewBox:"0 0 12 12",children:O.jsx("path",{fill:"currentColor",d:"M6 8.825L1.175 4 2.238 2.938 6 6.7 9.763 2.937 10.825 4z"})})]})})}const AA={sedentary:"Zittend (weinig/geen beweging)",light:"Licht actief (1-3 dagen/week)",moderate:"Matig actief (3-5 dagen/week)",active:"Actief (6-7 dagen/week)",veryActive:"Zeer actief (zware training)"},SA={lose:"Afvallen",maintain:"Gewicht behouden"};function $re(){const t=ef(),e=cd(U=>U.saveProfile),[n,r]=D.useState("welcome"),[i,a]=D.useState(""),[l,f]=D.useState("male"),[m,p]=D.useState("1990-01-01"),[b,_]=D.useState("175"),[T,N]=D.useState("80"),[j,M]=D.useState("75"),[L,z]=D.useState("light"),[$,K]=D.useState("lose"),ee=Number(b)||175,ue=Number(T)||80,Z=Number(j)||75,V=oI(ue,ee,m,l,L,$),W=async()=>{await e({name:i,gender:l,dateOfBirth:m,heightCm:ee,currentWeightKg:ue,goalWeightKg:Z,activityLevel:L,goal:$,dailyPointsBudget:V.dailyPoints,weeklyPointsBudget:V.weeklyPoints,onboardingComplete:!0}),t("/")};return n==="welcome"?O.jsxs("div",{className:"flex flex-col items-center justify-center h-full px-8 animate-fade-in",children:[O.jsx("div",{className:"w-20 h-20 rounded-[28px] bg-primary flex items-center justify-center mb-6 shadow-lg",children:O.jsx(uI,{size:40,color:"white"})}),O.jsx("h1",{className:"text-[34px] font-bold text-ios-text mb-2",children:"BodyBalance"}),O.jsx("p",{className:"text-[17px] text-ios-secondary text-center mb-2 leading-relaxed",children:"Houd je voeding bij met een simpel puntensysteem"}),O.jsx("p",{className:"text-[15px] text-ios-secondary text-center mb-10 leading-relaxed",children:"Calorien worden omgezet in punten. Blijf binnen je dagbudget en bereik je streefgewicht."}),O.jsxs(to,{fullWidth:!0,size:"lg",onClick:()=>r("profile"),children:["Aan de slag",O.jsx(pv,{size:20,className:"inline ml-1"})]}),O.jsxs("button",{onClick:()=>sm.getState().logout(),className:"mt-4 flex items-center justify-center gap-2 text-[15px] text-ios-secondary bg-transparent border-none cursor-pointer",children:[O.jsx(VL,{size:16}),"Uitloggen"]})]}):n==="profile"?O.jsxs("div",{className:"flex flex-col h-full animate-fade-in",children:[O.jsxs("div",{className:"px-6 pt-12 pb-4",style:{paddingTop:"calc(var(--safe-area-top) + 48px)"},children:[O.jsx("h2",{className:"text-[28px] font-bold text-ios-text mb-1",children:"Jouw profiel"}),O.jsx("p",{className:"text-[15px] text-ios-secondary",children:"We berekenen je dagelijkse puntenbudget"})]}),O.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-32",children:O.jsxs("div",{className:"flex flex-col gap-4",children:[O.jsx(Tc,{label:"Naam",type:"text",placeholder:"Je naam",value:i,onChange:U=>a(U.currentTarget.value)}),O.jsx(kh,{label:"Geslacht",value:l,onChange:U=>f(U.currentTarget.value),options:[{value:"male",label:"Man"},{value:"female",label:"Vrouw"}]}),O.jsx(Tc,{label:"Geboortedatum",type:"date",value:m,onChange:U=>p(U.currentTarget.value)}),O.jsx(Tc,{label:"Lengte",type:"number",suffix:"cm",value:b,onChange:U=>_(U.currentTarget.value),min:100,max:250}),O.jsx(Tc,{label:"Huidig gewicht",type:"number",suffix:"kg",value:T,onChange:U=>N(U.currentTarget.value),min:30,max:300}),O.jsx(Tc,{label:"Streefgewicht",type:"number",suffix:"kg",value:j,onChange:U=>M(U.currentTarget.value),min:30,max:300}),O.jsx(kh,{label:"Activiteitsniveau",value:L,onChange:U=>z(U.currentTarget.value),options:Object.entries(AA).map(([U,ae])=>({value:U,label:ae}))}),O.jsx(kh,{label:"Doel",value:$,onChange:U=>K(U.currentTarget.value),options:Object.entries(SA).map(([U,ae])=>({value:U,label:ae}))})]})}),O.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-xl border-t border-ios-separator px-6 py-4",style:{paddingBottom:"calc(var(--safe-area-bottom) + 16px)"},children:O.jsx(to,{fullWidth:!0,size:"lg",onClick:()=>r("result"),disabled:!i,children:"Bereken mijn budget"})})]}):O.jsxs("div",{className:"flex flex-col items-center justify-center h-full px-8 animate-fade-in",children:[O.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:O.jsx(Ere,{size:32,className:"text-primary"})}),O.jsxs("h2",{className:"text-[28px] font-bold text-ios-text mb-2",children:["Hoi ",i,"!"]}),O.jsx("p",{className:"text-[15px] text-ios-secondary text-center mb-8",children:"Je persoonlijke puntenbudget is berekend"}),O.jsxs("div",{className:"bg-white rounded-3xl shadow-sm p-6 w-full mb-6",children:[O.jsxs("div",{className:"text-center mb-6",children:[O.jsx("div",{className:"text-[64px] font-bold text-primary leading-none",children:V.dailyPoints}),O.jsx("div",{className:"text-[15px] text-ios-secondary mt-1",children:"punten per dag"})]}),O.jsxs("div",{className:"flex justify-around py-4 border-t border-ios-separator",children:[O.jsxs("div",{className:"text-center",children:[O.jsxs("div",{className:"flex items-center gap-1 justify-center mb-1",children:[O.jsx(qL,{size:14,className:"text-ios-blue"}),O.jsx("span",{className:"text-[13px] text-ios-secondary",children:"Weekpunten"})]}),O.jsx("span",{className:"text-[20px] font-bold",children:V.weeklyPoints})]}),O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"text-[13px] text-ios-secondary mb-1",children:"Calorien/dag"}),O.jsxs("span",{className:"text-[20px] font-bold",children:["~",V.targetCalories]})]})]})]}),O.jsxs("p",{className:"text-[13px] text-ios-secondary text-center mb-8 leading-relaxed",children:["Je dagelijks budget van ",O.jsxs("strong",{children:[V.dailyPoints," punten"]})," is gebaseerd op je profiel. Daarnaast heb je ",O.jsxs("strong",{children:[V.weeklyPoints," weekpunten"]})," voor extra flexibiliteit."]}),O.jsx(to,{fullWidth:!0,size:"lg",onClick:W,children:"Start met tracken"})]})}const WL=6048e5,Yre=864e5,V4=Symbol.for("constructDateFrom");function Au(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&V4 in t?t[V4](e):t instanceof Date?new t.constructor(e):new Date(e)}function No(t,e){return Au(e||t,t)}function Dy(t,e,n){const r=No(t,n?.in);return isNaN(e)?Au(t,NaN):(e&&r.setDate(r.getDate()+e),r)}let Xre={};function Xx(){return Xre}function fd(t,e){const n=Xx(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=No(t,e?.in),a=i.getDay(),l=(a<r?7:0)+a-r;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function xv(t,e){return fd(t,{...e,weekStartsOn:1})}function $L(t,e){const n=No(t,e?.in),r=n.getFullYear(),i=Au(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=xv(i),l=Au(n,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const f=xv(l);return n.getTime()>=a.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function z4(t){const e=No(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Qre(t,...e){const n=Au.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function U4(t,e){const n=No(t,e?.in);return n.setHours(0,0,0,0),n}function Zre(t,e,n){const[r,i]=Qre(n?.in,t,e),a=U4(r),l=U4(i),f=+a-z4(a),m=+l-z4(l);return Math.round((f-m)/Yre)}function Jre(t,e){const n=$L(t,e),r=Au(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),xv(r)}function eie(t,e,n){return Dy(t,e*7,n)}function tie(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function nie(t){return!(!tie(t)&&typeof t!="number"||isNaN(+No(t)))}function rie(t,e){const n=No(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const iie={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},aie=(t,e,n)=>{let r;const i=iie[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Mh(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const sie={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},oie={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},lie={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},uie={date:Mh({formats:sie,defaultWidth:"full"}),time:Mh({formats:oie,defaultWidth:"full"}),dateTime:Mh({formats:lie,defaultWidth:"full"})},cie={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fie=(t,e,n,r)=>cie[t];function yl(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,f=n?.width?String(n.width):l;i=t.formattingValues[f]||t.formattingValues[l]}else{const l=t.defaultWidth,f=n?.width?String(n.width):t.defaultWidth;i=t.values[f]||t.values[l]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const die={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},hie={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},mie={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},gie={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},pie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},yie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vie=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},xie={ordinalNumber:vie,era:yl({values:die,defaultWidth:"wide"}),quarter:yl({values:hie,defaultWidth:"wide",argumentCallback:t=>t-1}),month:yl({values:mie,defaultWidth:"wide"}),day:yl({values:gie,defaultWidth:"wide"}),dayPeriod:yl({values:pie,defaultWidth:"wide",formattingValues:yie,defaultFormattingWidth:"wide"})};function vl(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const l=a[0],f=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],m=Array.isArray(f)?wie(f,_=>_.test(l)):bie(f,_=>_.test(l));let p;p=t.valueCallback?t.valueCallback(m):m,p=n.valueCallback?n.valueCallback(p):p;const b=e.slice(l.length);return{value:p,rest:b}}}function bie(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function wie(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function YL(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let l=t.valueCallback?t.valueCallback(a[0]):a[0];l=n.valueCallback?n.valueCallback(l):l;const f=e.slice(i.length);return{value:l,rest:f}}}const _ie=/^(\d+)(th|st|nd|rd)?/i,Eie=/\d+/i,Aie={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Sie={any:[/^b/i,/^(a|c)/i]},Tie={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Iie={any:[/1/i,/2/i,/3/i,/4/i]},Cie={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Oie={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Nie={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Pie={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Rie={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Die={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},kie={ordinalNumber:YL({matchPattern:_ie,parsePattern:Eie,valueCallback:t=>parseInt(t,10)}),era:vl({matchPatterns:Aie,defaultMatchWidth:"wide",parsePatterns:Sie,defaultParseWidth:"any"}),quarter:vl({matchPatterns:Tie,defaultMatchWidth:"wide",parsePatterns:Iie,defaultParseWidth:"any",valueCallback:t=>t+1}),month:vl({matchPatterns:Cie,defaultMatchWidth:"wide",parsePatterns:Oie,defaultParseWidth:"any"}),day:vl({matchPatterns:Nie,defaultMatchWidth:"wide",parsePatterns:Pie,defaultParseWidth:"any"}),dayPeriod:vl({matchPatterns:Rie,defaultMatchWidth:"any",parsePatterns:Die,defaultParseWidth:"any"})},Mie={code:"en-US",formatDistance:aie,formatLong:uie,formatRelative:fie,localize:xie,match:kie,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jie(t,e){const n=No(t,e?.in);return Zre(n,rie(n))+1}function Lie(t,e){const n=No(t,e?.in),r=+xv(n)-+Jre(n);return Math.round(r/WL)+1}function XL(t,e){const n=No(t,e?.in),r=n.getFullYear(),i=Xx(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=Au(e?.in||t,0);l.setFullYear(r+1,0,a),l.setHours(0,0,0,0);const f=fd(l,e),m=Au(e?.in||t,0);m.setFullYear(r,0,a),m.setHours(0,0,0,0);const p=fd(m,e);return+n>=+f?r+1:+n>=+p?r:r-1}function Bie(t,e){const n=Xx(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=XL(t,e),a=Au(e?.in||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),fd(a,e)}function Fie(t,e){const n=No(t,e?.in),r=+fd(n,e)-+Bie(n,e);return Math.round(r/WL)+1}function lr(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const yc={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return lr(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):lr(n+1,2)},d(t,e){return lr(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return n==="am"?"a.m.":"p.m."}},h(t,e){return lr(t.getHours()%12||12,e.length)},H(t,e){return lr(t.getHours(),e.length)},m(t,e){return lr(t.getMinutes(),e.length)},s(t,e){return lr(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return lr(i,e.length)}},hh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},q4={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return yc.y(t,e)},Y:function(t,e,n,r){const i=XL(t,r),a=i>0?i:1-i;if(e==="YY"){const l=a%100;return lr(l,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):lr(a,e.length)},R:function(t,e){const n=$L(t);return lr(n,e.length)},u:function(t,e){const n=t.getFullYear();return lr(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return lr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return lr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return yc.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return lr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=Fie(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):lr(i,e.length)},I:function(t,e,n){const r=Lie(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):lr(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):yc.d(t,e)},D:function(t,e,n){const r=jie(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):lr(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return lr(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return lr(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return lr(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=hh.noon:r===0?i=hh.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=hh.evening:r>=12?i=hh.afternoon:r>=4?i=hh.morning:i=hh.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return yc.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):yc.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):lr(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):lr(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):yc.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):yc.s(t,e)},S:function(t,e){return yc.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return H4(r);case"XXXX":case"XX":return Rf(r);default:return Rf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return H4(r);case"xxxx":case"xx":return Rf(r);default:return Rf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+G4(r,":");default:return"GMT"+Rf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+G4(r,":");default:return"GMT"+Rf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return lr(r,e.length)},T:function(t,e,n){return lr(+t,e.length)}};function G4(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+lr(a,2)}function H4(t,e){return t%60===0?(t>0?"-":"+")+lr(Math.abs(t)/60,2):Rf(t,e)}function Rf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=lr(Math.trunc(r/60),2),a=lr(r%60,2);return n+i+e+a}const K4=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},QL=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},Vie=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return K4(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",K4(r,e)).replace("{{time}}",QL(i,e))},zie={p:QL,P:Vie},Uie=/^D+$/,qie=/^Y+$/,Gie=["D","DD","YY","YYYY"];function Hie(t){return Uie.test(t)}function Kie(t){return qie.test(t)}function Wie(t,e,n){const r=$ie(t,e,n);if(console.warn(r),Gie.includes(t))throw new RangeError(r)}function $ie(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Yie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Xie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Qie=/^'([^]*?)'?$/,Zie=/''/g,Jie=/[a-zA-Z]/;function Ns(t,e,n){const r=Xx(),i=n?.locale??r.locale??Mie,a=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,f=No(t,n?.in);if(!nie(f))throw new RangeError("Invalid time value");let m=e.match(Xie).map(b=>{const _=b[0];if(_==="p"||_==="P"){const T=zie[_];return T(b,i.formatLong)}return b}).join("").match(Yie).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const _=b[0];if(_==="'")return{isToken:!1,value:eae(b)};if(q4[_])return{isToken:!0,value:b};if(_.match(Jie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:b}});i.localize.preprocessor&&(m=i.localize.preprocessor(f,m));const p={firstWeekContainsDate:a,weekStartsOn:l,locale:i};return m.map(b=>{if(!b.isToken)return b.value;const _=b.value;(!n?.useAdditionalWeekYearTokens&&Kie(_)||!n?.useAdditionalDayOfYearTokens&&Hie(_))&&Wie(_,e,String(t));const T=q4[_[0]];return T(f,_,i.localize,p)}).join("")}function eae(t){const e=t.match(Qie);return e?e[1].replace(Zie,"'"):t}function W4(t,e,n){return eie(t,-e,n)}const Qx=aI((t,e)=>({entries:[],selectedDate:Ns(new Date,"yyyy-MM-dd"),isLoading:!1,setDate:n=>{t({selectedDate:n}),e().loadEntries()},loadEntries:async()=>{t({isLoading:!0});const n=await kL(e().selectedDate);t({entries:n,isLoading:!1})},addEntry:async n=>{await ML(e().selectedDate,n),await e().loadEntries()},updateEntry:async(n,r)=>{await kte(n,r),await e().loadEntries()},removeEntry:async n=>{await Mte(n),await e().loadEntries()},getEntriesByMealType:n=>e().entries.filter(r=>r.mealType===n),getTotalPoints:()=>e().entries.reduce((n,r)=>n+r.points,0),getPointsByMealType:n=>e().entries.filter(r=>r.mealType===n).reduce((r,i)=>r+i.points,0)}));function Yc({title:t,children:e,rightAction:n,noPadding:r}){return O.jsxs("div",{className:"flex flex-col h-full",children:[O.jsx("header",{className:"bg-white/80 backdrop-blur-xl border-b border-ios-separator flex-shrink-0",style:{paddingTop:"var(--safe-area-top)"},children:O.jsxs("div",{className:"flex items-center justify-between px-4 h-[44px]",children:[O.jsx("h1",{className:"text-[17px] font-semibold text-ios-text",children:t}),n&&O.jsx("div",{children:n})]})}),O.jsx("main",{className:`flex-1 overflow-y-auto overscroll-contain ${r?"":"px-4 py-4"}`,style:{paddingBottom:"calc(60px + var(--safe-area-bottom))"},children:e})]})}function tae({used:t,budget:e,size:n=180}){const r=t>e,i=e-t,a=r?t-e:0,l=Math.min(t/e,1),f=12,m=(n-f)/2,p=2*Math.PI*m,b=p*(1-l),_=n/2;return O.jsxs("div",{className:"flex flex-col items-center gap-2",children:[O.jsxs("div",{className:"relative",style:{width:n,height:n},children:[O.jsxs("svg",{width:n,height:n,className:"-rotate-90",children:[O.jsx("circle",{cx:_,cy:_,r:m,fill:"none",stroke:"#E5E5EA",strokeWidth:f,strokeLinecap:"round"}),O.jsx("circle",{cx:_,cy:_,r:m,fill:"none",stroke:r?"#FF3B30":"#34C759",strokeWidth:f,strokeLinecap:"round",strokeDasharray:p,strokeDashoffset:b,className:"transition-all duration-700 ease-out"})]}),O.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[O.jsx("span",{className:`text-[42px] font-bold leading-none ${r?"text-ios-destructive":"text-ios-text"}`,children:r?a:i}),O.jsx("span",{className:"text-[13px] text-ios-secondary mt-1",children:r?"te veel":"resterend"})]})]}),O.jsxs("div",{className:"flex gap-6 text-[13px] text-ios-secondary",children:[O.jsxs("span",{children:[O.jsx("strong",{className:"text-ios-text",children:t})," gebruikt"]}),O.jsxs("span",{children:[O.jsx("strong",{className:"text-ios-text",children:e})," budget"]})]})]})}const ZL={breakfast:"Ontbijt",lunch:"Lunch",dinner:"Diner",snack:"Tussendoor"},nae={breakfast:"",lunch:"",dinner:"",snack:""};function An({children:t,className:e="",onClick:n}){return O.jsx("div",{className:`bg-white rounded-2xl shadow-sm ${n?"active:bg-gray-50 cursor-pointer transition-colors":""} ${e}`,onClick:n,children:t})}function Eo({title:t,rightContent:e}){return O.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-ios-separator",children:[O.jsx("h3",{className:"text-[15px] font-semibold text-ios-secondary uppercase tracking-wide",children:t}),e]})}function rae({mealType:t,entries:e,totalPoints:n,onRemoveEntry:r,onEditEntry:i,onSaveTemplate:a}){const l=ef();return O.jsxs(An,{className:"animate-fade-in",children:[O.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("span",{className:"text-lg",children:nae[t]}),O.jsx("span",{className:"font-semibold text-[15px]",children:ZL[t]})]}),O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsxs("span",{className:"text-[15px] text-ios-secondary font-medium",children:[n," pt"]}),e.length>0&&a&&O.jsx("button",{onClick:()=>a(t),className:"w-7 h-7 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer active:bg-gray-200 transition-colors",children:O.jsx(une,{size:14,className:"text-ios-secondary"})}),O.jsx("button",{onClick:()=>l(`/search?meal=${t}`),className:"w-7 h-7 rounded-full bg-primary flex items-center justify-center border-none cursor-pointer active:bg-primary-dark transition-colors",children:O.jsx(zf,{size:16,color:"white",strokeWidth:2.5})})]})]}),e.length>0&&O.jsx("div",{className:"border-t border-ios-separator",children:e.map((f,m)=>O.jsxs("div",{className:`flex items-center justify-between px-4 py-2.5 ${m<e.length-1?"border-b border-ios-separator":""} ${i?"cursor-pointer":""}`,onClick:()=>i?.(f),children:[O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("div",{className:"text-[15px] truncate",children:f.foodItem.name}),O.jsx("div",{className:"text-[13px] text-ios-secondary",children:(()=>{const p=f.foodItem.unit==="ml"?"ml":"g";return f.quantity&&f.quantity>1?`${f.quantity} ${f.quantityG}${p}`:`${f.quantityG}${p}`})()})]}),O.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[O.jsxs("span",{className:`text-[15px] font-medium ${f.points===0?"text-primary":""}`,children:[f.points===0?"0":f.points," pt"]}),f.id!=null&&O.jsx("button",{onClick:p=>{p.stopPropagation(),r(f.id)},className:"text-ios-secondary active:text-ios-destructive border-none bg-transparent cursor-pointer p-2",children:O.jsx(Nre,{size:16})})]})]},f.id??m))}),e.length===0&&O.jsx("div",{className:"px-4 py-3 text-[15px] text-ios-secondary border-t border-ios-separator cursor-pointer active:bg-gray-50",onClick:()=>l(`/search?meal=${t}`),children:"Tik om voedsel toe te voegen..."})]})}function p0(t){const e=t.calories*.03+t.saturatedFat*.28+t.sugar*.12-t.protein*.1-t.fiber*.1-t.unsaturatedFat*.05;return Math.max(0,Math.round(e))}function y0(t,e){return Math.max(0,Math.round(t*e/100))}function iae({entry:t,onSave:e,onClose:n}){const[r,i]=D.useState(String(t.quantityG)),[a,l]=D.useState(String(t.quantity||1)),f=Number(r)||0,m=Math.round(Number(a))||0,p=t.foodItem,b=p.unit==="ml"?"ml":"gram",_=p.unit==="ml"?"ml":"g",N=y0(p.pointsPer100g,f)*m,j=()=>{t.id&&e(t.id,{quantityG:f,quantity:m>1?m:void 0,points:N})};return O.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center animate-fade-in",children:[O.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:n}),O.jsxs("div",{className:"relative bg-white rounded-t-3xl w-full max-w-lg animate-slide-up",style:{paddingBottom:"calc(20px + var(--safe-area-bottom))"},children:[O.jsx("div",{className:"flex justify-center pt-3 pb-2",children:O.jsx("div",{className:"w-9 h-1 rounded-full bg-ios-separator"})}),O.jsx("button",{onClick:n,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer",children:O.jsx(om,{size:18,className:"text-ios-secondary"})}),O.jsxs("div",{className:"px-5 pb-4",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[p.imageUrl?O.jsx("img",{src:p.imageUrl,alt:p.name,className:"w-14 h-14 rounded-xl object-cover"}):O.jsx("div",{className:"w-14 h-14 rounded-xl bg-primary-light flex items-center justify-center",children:O.jsx("span",{className:"text-primary-dark text-2xl font-bold",children:p.name.charAt(0).toUpperCase()})}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-[17px] font-semibold",children:p.name}),p.brand&&O.jsx("p",{className:"text-[13px] text-ios-secondary",children:p.brand})]})]}),O.jsxs("div",{className:"bg-ios-bg rounded-2xl p-4 mb-5 text-center",children:[O.jsx("div",{className:"text-[48px] font-bold text-primary leading-none",children:N}),O.jsx("div",{className:"text-[13px] text-ios-secondary mt-1",children:"punten"})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1.5 px-1",children:"Hoeveelheid"}),O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>i(String(Math.max(10,f-10))),children:"-"}),O.jsxs("div",{className:"relative flex-1",children:[O.jsx("input",{type:"number",value:r,onChange:M=>i(M.target.value),className:"text-center bg-white rounded-xl text-[20px] font-medium",min:1}),O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:b})]}),O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>i(String(f+10)),children:"+"})]})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1.5 px-1",children:"Aantal"}),O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>l(String(Math.max(1,m-1))),children:"-"}),O.jsxs("div",{className:"relative flex-1",children:[O.jsx("input",{type:"number",value:a,onChange:M=>l(M.target.value),className:"text-center bg-white rounded-xl text-[20px] font-medium",min:1}),O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:"stuks"})]}),O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>l(String(m+1)),children:"+"})]})]}),O.jsx("div",{className:"flex gap-2 mb-5",children:[50,100,150,200].map(M=>O.jsxs("button",{onClick:()=>i(String(M)),className:`flex-1 py-2 rounded-xl text-[14px] font-medium border-none cursor-pointer transition-colors ${f===M?"bg-primary text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:[M,_]},M))}),O.jsxs(to,{fullWidth:!0,size:"lg",onClick:j,children:["Opslaan  ",N," pt",m>1?` (${m})`:""]})]})]})]})}const aae={lessThanXSeconds:{one:"minder dan een seconde",other:"minder dan {{count}} seconden"},xSeconds:{one:"1 seconde",other:"{{count}} seconden"},halfAMinute:"een halve minuut",lessThanXMinutes:{one:"minder dan een minuut",other:"minder dan {{count}} minuten"},xMinutes:{one:"een minuut",other:"{{count}} minuten"},aboutXHours:{one:"ongeveer 1 uur",other:"ongeveer {{count}} uur"},xHours:{one:"1 uur",other:"{{count}} uur"},xDays:{one:"1 dag",other:"{{count}} dagen"},aboutXWeeks:{one:"ongeveer 1 week",other:"ongeveer {{count}} weken"},xWeeks:{one:"1 week",other:"{{count}} weken"},aboutXMonths:{one:"ongeveer 1 maand",other:"ongeveer {{count}} maanden"},xMonths:{one:"1 maand",other:"{{count}} maanden"},aboutXYears:{one:"ongeveer 1 jaar",other:"ongeveer {{count}} jaar"},xYears:{one:"1 jaar",other:"{{count}} jaar"},overXYears:{one:"meer dan 1 jaar",other:"meer dan {{count}} jaar"},almostXYears:{one:"bijna 1 jaar",other:"bijna {{count}} jaar"}},sae=(t,e,n)=>{let r;const i=aae[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",String(e)),n?.addSuffix?n.comparison&&n.comparison>0?"over "+r:r+" geleden":r},oae={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd-MM-y"},lae={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},uae={full:"{{date}} 'om' {{time}}",long:"{{date}} 'om' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cae={date:Mh({formats:oae,defaultWidth:"full"}),time:Mh({formats:lae,defaultWidth:"full"}),dateTime:Mh({formats:uae,defaultWidth:"full"})},fae={lastWeek:"'afgelopen' eeee 'om' p",yesterday:"'gisteren om' p",today:"'vandaag om' p",tomorrow:"'morgen om' p",nextWeek:"eeee 'om' p",other:"P"},dae=(t,e,n,r)=>fae[t],hae={narrow:["v.C.","n.C."],abbreviated:["v.Chr.","n.Chr."],wide:["voor Christus","na Christus"]},mae={narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["1e kwartaal","2e kwartaal","3e kwartaal","4e kwartaal"]},gae={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["jan.","feb.","mrt.","apr.","mei","jun.","jul.","aug.","sep.","okt.","nov.","dec."],wide:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"]},pae={narrow:["Z","M","D","W","D","V","Z"],short:["zo","ma","di","wo","do","vr","za"],abbreviated:["zon","maa","din","woe","don","vri","zat"],wide:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},yae={narrow:{am:"AM",pm:"PM",midnight:"middernacht",noon:"het middaguur",morning:"'s ochtends",afternoon:"'s middags",evening:"'s avonds",night:"'s nachts"},abbreviated:{am:"AM",pm:"PM",midnight:"middernacht",noon:"het middaguur",morning:"'s ochtends",afternoon:"'s middags",evening:"'s avonds",night:"'s nachts"},wide:{am:"AM",pm:"PM",midnight:"middernacht",noon:"het middaguur",morning:"'s ochtends",afternoon:"'s middags",evening:"'s avonds",night:"'s nachts"}},vae=(t,e)=>Number(t)+"e",xae={ordinalNumber:vae,era:yl({values:hae,defaultWidth:"wide"}),quarter:yl({values:mae,defaultWidth:"wide",argumentCallback:t=>t-1}),month:yl({values:gae,defaultWidth:"wide"}),day:yl({values:pae,defaultWidth:"wide"}),dayPeriod:yl({values:yae,defaultWidth:"wide"})},bae=/^(\d+)e?/i,wae=/\d+/i,_ae={narrow:/^([vn]\.? ?C\.?)/,abbreviated:/^([vn]\. ?Chr\.?)/,wide:/^((voor|na) Christus)/},Eae={any:[/^v/,/^n/]},Aae={narrow:/^[1234]/i,abbreviated:/^K[1234]/i,wide:/^[1234]e kwartaal/i},Sae={any:[/1/i,/2/i,/3/i,/4/i]},Tae={narrow:/^[jfmasond]/i,abbreviated:/^(jan.|feb.|mrt.|apr.|mei|jun.|jul.|aug.|sep.|okt.|nov.|dec.)/i,wide:/^(januari|februari|maart|april|mei|juni|juli|augustus|september|oktober|november|december)/i},Iae={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^jan/i,/^feb/i,/^m(r|a)/i,/^apr/i,/^mei/i,/^jun/i,/^jul/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i]},Cae={narrow:/^[zmdwv]/i,short:/^(zo|ma|di|wo|do|vr|za)/i,abbreviated:/^(zon|maa|din|woe|don|vri|zat)/i,wide:/^(zondag|maandag|dinsdag|woensdag|donderdag|vrijdag|zaterdag)/i},Oae={narrow:[/^z/i,/^m/i,/^d/i,/^w/i,/^d/i,/^v/i,/^z/i],any:[/^zo/i,/^ma/i,/^di/i,/^wo/i,/^do/i,/^vr/i,/^za/i]},Nae={any:/^(am|pm|middernacht|het middaguur|'s (ochtends|middags|avonds|nachts))/i},Pae={any:{am:/^am/i,pm:/^pm/i,midnight:/^middernacht/i,noon:/^het middaguur/i,morning:/ochtend/i,afternoon:/middag/i,evening:/avond/i,night:/nacht/i}},Rae={ordinalNumber:YL({matchPattern:bae,parsePattern:wae,valueCallback:t=>parseInt(t,10)}),era:vl({matchPatterns:_ae,defaultMatchWidth:"wide",parsePatterns:Eae,defaultParseWidth:"any"}),quarter:vl({matchPatterns:Aae,defaultMatchWidth:"wide",parsePatterns:Sae,defaultParseWidth:"any",valueCallback:t=>t+1}),month:vl({matchPatterns:Tae,defaultMatchWidth:"wide",parsePatterns:Iae,defaultParseWidth:"any"}),day:vl({matchPatterns:Cae,defaultMatchWidth:"wide",parsePatterns:Oae,defaultParseWidth:"any"}),dayPeriod:vl({matchPatterns:Nae,defaultMatchWidth:"any",parsePatterns:Pae,defaultParseWidth:"any"})},_h={code:"nl",formatDistance:sae,formatLong:cae,formatRelative:dae,localize:xae,match:Rae,options:{weekStartsOn:1,firstWeekContainsDate:4}},Dae=["breakfast","lunch","dinner","snack"];function cp(){try{const t=localStorage.getItem("bb_templates");return t?JSON.parse(t):[]}catch{return[]}}function kae(t){const e=cp();e.push(t),localStorage.setItem("bb_templates",JSON.stringify(e))}function Mae(t){const e=cp();e.splice(t,1),localStorage.setItem("bb_templates",JSON.stringify(e))}function jae(){const t=cd(ut=>ut.profile),{entries:e,selectedDate:n,setDate:r,loadEntries:i,addEntry:a,updateEntry:l,removeEntry:f,getEntriesByMealType:m,getTotalPoints:p,getPointsByMealType:b}=Qx(),[_,T]=D.useState(0),[N,j]=D.useState(0),M=t?.waterGoalMl||2e3,[L,z]=D.useState(!1),[$,K]=D.useState(cp),[ee,ue]=D.useState(0),[Z,V]=D.useState(null),[W,U]=D.useState(0),[ae,ie]=D.useState(()=>{const ut=new Date;if(ut.getDay()!==1)return!1;const _t=`bb_weekreport_seen_${ut.toISOString().split("T")[0]}`;return localStorage.getItem(_t)?!1:(localStorage.setItem(_t,"1"),!0)}),[X,J]=D.useState(null),xe=D.useCallback(async()=>{const ut=await Bte(n);j(ut)},[n]);D.useEffect(()=>{i()},[i]),D.useEffect(()=>{t&&Lte(n,t.dailyPointsBudget).then(T)},[n,t,e]),D.useEffect(()=>{xe()},[xe]),D.useEffect(()=>{t&&Gte(t.dailyPointsBudget).then(ue)},[t,e]),D.useEffect(()=>{t&&Ute(t.dailyPointsBudget,t.weeklyPointsBudget,t.waterGoalMl||2e3,W).then(V)},[t,e,W]);const de=async ut=>{const Ne=await Fte(n,ut);j(Ne),navigator.vibrate?.(10)},ye=async()=>{await Vte(n),j(0)},_e=ut=>{const Ne=m(ut);if(Ne.length===0)return;const Ye=prompt("Naam voor deze template:");if(!Ye)return;const _t={name:Ye,mealType:ut,items:Ne.map(Fe=>({foodItem:Fe.foodItem,quantityG:Fe.quantityG,quantity:Fe.quantity,points:Fe.points}))};kae(_t),K(cp()),navigator.vibrate?.(10)},qe=async ut=>{for(const Ne of ut.items)await a({foodItem:Ne.foodItem,mealType:ut.mealType,quantityG:Ne.quantityG,quantity:Ne.quantity,points:Ne.points});z(!1),navigator.vibrate?.(10)},ze=ut=>{Mae(ut),K(cp())},et=()=>{ie(ut=>!ut)},me=ut=>{localStorage.setItem(`bb_streak_milestone_${ut}`,"1")},Se=async()=>{const ut=new Date(n);ut.setDate(ut.getDate()-1);const Ne=Ns(ut,"yyyy-MM-dd");await zte(Ne,n)>0&&(await i(),navigator.vibrate?.(10))};if(!t)return null;const Xe=p(),Ve=Math.max(0,t.weeklyPointsBudget-_),pt=n===Ns(new Date,"yyyy-MM-dd"),$e=ut=>{const Ne=new Date(n);Ne.setDate(Ne.getDate()+ut),r(Ns(Ne,"yyyy-MM-dd"))},yt=pt?"Vandaag":Ns(new Date(n),"d MMMM",{locale:_h});return O.jsxs(Yc,{title:"BodyBalance",children:[O.jsxs("div",{className:"flex flex-col gap-4 pb-4",children:[O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("button",{onClick:()=>$e(-1),className:"w-9 h-9 rounded-full bg-white flex items-center justify-center border-none cursor-pointer active:bg-gray-100 shadow-sm",children:O.jsx(L4,{size:20,className:"text-ios-text"})}),O.jsx("span",{className:"text-[17px] font-semibold",children:yt}),O.jsx("button",{onClick:()=>$e(1),disabled:pt,className:`w-9 h-9 rounded-full bg-white flex items-center justify-center border-none cursor-pointer shadow-sm ${pt?"opacity-30":"active:bg-gray-100"}`,children:O.jsx(pv,{size:20,className:"text-ios-text"})})]}),O.jsxs(An,{children:[O.jsxs("div",{className:"p-4 flex items-center justify-between",children:[O.jsx("button",{onClick:()=>U(ut=>ut+1),className:"w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer active:bg-gray-200",children:O.jsx(L4,{size:18,className:"text-ios-text"})}),O.jsxs("button",{onClick:et,className:"flex items-center gap-2 bg-transparent border-none cursor-pointer px-2",children:[O.jsx(GL,{size:18,className:"text-ios-blue"}),O.jsx("span",{className:"text-[15px] font-semibold",children:Z?Z.weekLabel:"Weekoverzicht"}),ae?O.jsx(Ane,{size:16,className:"text-ios-secondary"}):O.jsx(BL,{size:16,className:"text-ios-secondary"})]}),O.jsx("button",{onClick:()=>U(ut=>Math.max(0,ut-1)),disabled:W===0,className:`w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer ${W===0?"opacity-30":"active:bg-gray-200"}`,children:O.jsx(pv,{size:18,className:"text-ios-text"})})]}),ae&&Z&&O.jsxs("div",{className:"px-4 pb-4 flex flex-col gap-2",children:[O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Punten"}),O.jsxs("span",{className:"text-[14px] font-medium",children:["gem. ",Z.avgPoints,"/",Z.dailyBudget," pt",Z.avgPoints<=Z.dailyBudget?O.jsx("span",{className:"text-primary ml-1",children:""}):O.jsx("span",{className:"text-ios-destructive ml-1",children:""})]})]}),O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Binnen budget"}),O.jsxs("span",{className:"text-[14px] font-medium",children:[Z.daysWithinBudget," van ",Z.totalDays," dagen",Z.daysWithinBudget>=Z.totalDays-1?O.jsx("span",{className:"text-primary ml-1",children:""}):null]})]}),Z.waterTotalDays>0&&O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Water"}),O.jsxs("span",{className:"text-[14px] font-medium",children:[Z.waterDaysOnTarget," van ",Z.waterTotalDays," dagen doel",Z.waterDaysOnTarget>=Z.waterTotalDays-1?O.jsx("span",{className:"text-blue-500 ml-1",children:""}):null]})]}),Z.weightChange!==null&&O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Gewicht"}),O.jsxs("span",{className:`text-[14px] font-medium flex items-center gap-1 ${Z.weightChange<0?"text-primary":Z.weightChange>0?"text-ios-warning":""}`,children:[Z.weightChange<0?O.jsx(cI,{size:14}):Z.weightChange>0?O.jsx(Dre,{size:14}):O.jsx(zL,{size:14}),Z.weightChange>0?"+":"",Z.weightChange.toFixed(1)," kg"]})]}),O.jsxs("div",{className:"border-t border-ios-separator mt-1 pt-2 flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Beste dag"}),O.jsxs("span",{className:"text-[14px] font-medium",children:[Z.bestDay," (",Z.bestDayPoints," pt)"]})]}),O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Weekpunten"}),O.jsxs("span",{className:"text-[14px] font-medium",children:[Z.weeklyPointsUsed," van ",Z.weeklyPointsBudget," gebruikt"]})]})]}),ae&&!Z&&O.jsx("div",{className:"px-4 pb-4 text-center",children:O.jsx("span",{className:"text-[14px] text-ios-secondary",children:"Geen data voor deze week"})})]}),O.jsxs(An,{className:"py-6 flex flex-col items-center gap-2",children:[O.jsx(tae,{used:Xe,budget:t.dailyPointsBudget}),ee>0&&O.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[O.jsx(Vne,{size:16,className:"text-orange-500"}),O.jsxs("span",{className:"text-[14px] font-medium text-ios-secondary",children:[ee," ",ee===1?"dag":"dagen"," op rij"]})]})]}),(()=>{const Ne=[7,14,30,60,100].find(_t=>ee===_t&&!localStorage.getItem(`bb_streak_milestone_${_t}`));if(!Ne)return null;const Ye={7:"1 week op rij binnen budget!",14:"2 weken op rij binnen budget!",30:"1 maand op rij! Ongelooflijk!",60:"2 maanden op rij! Wat een discipline!",100:"100 dagen! Je bent een kampioen!"};return O.jsx(An,{className:"bg-primary/10 border border-primary/20",children:O.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("span",{className:"text-[16px]",children:""}),O.jsx("span",{className:"text-[14px] font-semibold text-primary",children:Ye[Ne]})]}),O.jsx("button",{onClick:()=>me(Ne),className:"w-6 h-6 rounded-full bg-transparent border-none cursor-pointer flex items-center justify-center",children:O.jsx(om,{size:14,className:"text-primary"})})]})})})(),O.jsxs(An,{className:"px-4 py-3 flex items-center justify-between",children:[O.jsx("span",{className:"text-[15px] text-ios-secondary",children:"Weekpunten resterend"}),O.jsxs("span",{className:`text-[17px] font-bold ${Ve===0?"text-ios-destructive":"text-ios-blue"}`,children:[Ve,O.jsxs("span",{className:"text-[13px] font-normal text-ios-secondary ml-1",children:["/ ",t.weeklyPointsBudget]})]})]}),O.jsxs("div",{className:"flex gap-2",children:[e.length===0&&O.jsxs("button",{onClick:Se,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-white rounded-xl border border-dashed border-ios-separator text-[13px] font-medium text-ios-secondary cursor-pointer active:bg-gray-50 transition-colors",children:[O.jsx(FL,{size:14}),"Kopieer gisteren"]}),$.length>0&&O.jsxs("button",{onClick:()=>z(!L),className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-white rounded-xl border border-dashed border-ios-separator text-[13px] font-medium text-ios-blue cursor-pointer active:bg-gray-50 transition-colors",children:[O.jsx(fne,{size:14}),"Templates (",$.length,")"]})]}),L&&O.jsxs(An,{children:[O.jsx("div",{className:"px-4 py-2.5 border-b border-ios-separator",children:O.jsx("span",{className:"text-[13px] font-semibold text-ios-secondary uppercase tracking-wide",children:"Maaltijd templates"})}),$.map((ut,Ne)=>O.jsxs("div",{className:`flex items-center justify-between px-4 py-2.5 ${Ne<$.length-1?"border-b border-ios-separator":""}`,children:[O.jsxs("button",{onClick:()=>qe(ut),className:"flex-1 text-left bg-transparent border-none cursor-pointer p-0",children:[O.jsx("div",{className:"text-[15px] font-medium",children:ut.name}),O.jsxs("div",{className:"text-[12px] text-ios-secondary",children:[ut.items.length," items  ",ut.items.reduce((Ye,_t)=>Ye+_t.points,0)," pt"]})]}),O.jsx("button",{onClick:()=>ze(Ne),className:"text-[12px] text-ios-destructive bg-transparent border-none cursor-pointer px-2 py-1",children:"Wis"})]},Ne))]}),Dae.map(ut=>O.jsx(rae,{mealType:ut,entries:m(ut),totalPoints:b(ut),onRemoveEntry:f,onEditEntry:J,onSaveTemplate:_e},ut)),O.jsx(An,{children:O.jsxs("div",{className:"p-4",children:[O.jsxs("div",{className:"flex items-center justify-between mb-3",children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(up,{size:20,className:"text-blue-500"}),O.jsx("span",{className:"text-[17px] font-semibold",children:"Water"})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsxs("span",{className:"text-[15px] font-bold text-blue-500",children:[(N/1e3).toFixed(1)," / ",(M/1e3).toFixed(1)," L"]}),N>0&&O.jsx("button",{onClick:ye,className:"w-7 h-7 rounded-full bg-transparent border-none cursor-pointer flex items-center justify-center active:bg-gray-100",children:O.jsx(UL,{size:14,className:"text-ios-secondary"})})]})]}),O.jsx("div",{className:"w-full h-3 bg-blue-100 rounded-full overflow-hidden mb-3",children:O.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-300",style:{width:`${Math.min(100,N/M*100)}%`}})}),O.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[O.jsxs("button",{onClick:()=>de(150),className:"flex flex-col items-center gap-1 py-2.5 bg-blue-50 rounded-xl border-none cursor-pointer active:bg-blue-100 transition-colors",children:[O.jsx(Une,{size:18,className:"text-blue-500"}),O.jsx("span",{className:"text-[13px] font-medium text-blue-700",children:"+150ml"}),O.jsx("span",{className:"text-[11px] text-blue-400",children:"glas"})]}),O.jsxs("button",{onClick:()=>de(250),className:"flex flex-col items-center gap-1 py-2.5 bg-blue-50 rounded-xl border-none cursor-pointer active:bg-blue-100 transition-colors",children:[O.jsx(Nne,{size:18,className:"text-blue-500"}),O.jsx("span",{className:"text-[13px] font-medium text-blue-700",children:"+250ml"}),O.jsx("span",{className:"text-[11px] text-blue-400",children:"beker"})]}),O.jsxs("button",{onClick:()=>de(500),className:"flex flex-col items-center gap-1 py-2.5 bg-blue-50 rounded-xl border-none cursor-pointer active:bg-blue-100 transition-colors",children:[O.jsx(up,{size:18,className:"text-blue-500"}),O.jsx("span",{className:"text-[13px] font-medium text-blue-700",children:"+500ml"}),O.jsx("span",{className:"text-[11px] text-blue-400",children:"fles"})]})]}),N>=M&&O.jsx("p",{className:"text-[13px] text-center text-green-600 font-medium mt-2",children:"Waterdoel bereikt!"})]})})]}),X&&O.jsx(iae,{entry:X,onSave:(ut,Ne)=>{l(ut,Ne),J(null),navigator.vibrate?.(10)},onClose:()=>J(null)})]})}function fI({food:t,onSelect:e,onToggleFavorite:n,showFavorite:r=!0}){const i=y0(t.pointsPer100g,t.servingSizeG||100),a=t.unit==="ml"?"ml":"g";return O.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[O.jsxs("button",{onClick:()=>e(t),className:"flex-1 flex items-center gap-3 bg-transparent border-none cursor-pointer active:bg-gray-50 transition-colors text-left min-w-0",children:[t.imageUrl?O.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-11 h-11 rounded-lg object-cover bg-ios-bg flex-shrink-0"}):O.jsx("div",{className:"w-11 h-11 rounded-lg bg-primary-light flex items-center justify-center flex-shrink-0",children:O.jsx("span",{className:"text-primary-dark text-[18px] font-bold",children:t.name.charAt(0).toUpperCase()})}),O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("div",{className:"text-[15px] font-medium text-ios-text truncate",children:t.name}),t.brand&&O.jsx("div",{className:"text-[13px] text-ios-secondary truncate",children:t.brand})]}),O.jsxs("div",{className:"flex-shrink-0 text-right",children:[O.jsx("div",{className:`text-[17px] font-bold ${t.isZeroPoint?"text-primary":"text-ios-text"}`,children:i}),O.jsxs("div",{className:"text-[11px] text-ios-secondary",children:["pt/",t.servingSizeG,a]})]})]}),r&&n&&O.jsx("button",{onClick:l=>{l.stopPropagation(),n(t)},className:"flex-shrink-0 p-2 border-none bg-transparent cursor-pointer active:scale-125 transition-transform",children:O.jsx(Yx,{size:20,className:t.isFavorite?"text-red-500 fill-red-500":"text-ios-separator"})})]})}function Lae(t){try{const e=localStorage.getItem("bb_portions");return e?JSON.parse(e)[t.toLowerCase()]??null:null}catch{return null}}function Bae(t,e){try{const n=localStorage.getItem("bb_portions"),r=n?JSON.parse(n):{};r[t.toLowerCase()]=e,localStorage.setItem("bb_portions",JSON.stringify(r))}catch{}}function JL({food:t,defaultMealType:e,onAdd:n,onClose:r}){const i=Lae(t.name),[a,l]=D.useState(String(i??(t.servingSizeG||100))),[f,m]=D.useState("1"),[p,b]=D.useState(e),_=Number(a)||0,T=Math.round(Number(f))||0,N=t.unit==="ml"?"ml":"gram",j=t.unit==="ml"?"ml":"g",L=y0(t.pointsPer100g,_)*T;return O.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center animate-fade-in",children:[O.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:r}),O.jsxs("div",{className:"relative bg-white rounded-t-3xl w-full max-w-lg animate-slide-up",style:{paddingBottom:"calc(20px + var(--safe-area-bottom))"},children:[O.jsx("div",{className:"flex justify-center pt-3 pb-2",children:O.jsx("div",{className:"w-9 h-1 rounded-full bg-ios-separator"})}),O.jsx("button",{onClick:r,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer",children:O.jsx(om,{size:18,className:"text-ios-secondary"})}),O.jsxs("div",{className:"px-5 pb-4",children:[O.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[t.imageUrl?O.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-14 h-14 rounded-xl object-cover"}):O.jsx("div",{className:"w-14 h-14 rounded-xl bg-primary-light flex items-center justify-center",children:O.jsx("span",{className:"text-primary-dark text-2xl font-bold",children:t.name.charAt(0).toUpperCase()})}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-[17px] font-semibold",children:t.name}),t.brand&&O.jsx("p",{className:"text-[13px] text-ios-secondary",children:t.brand})]})]}),O.jsxs("div",{className:"bg-ios-bg rounded-2xl p-4 mb-5 text-center",children:[O.jsx("div",{className:"text-[48px] font-bold text-primary leading-none",children:L}),O.jsx("div",{className:"text-[13px] text-ios-secondary mt-1",children:"punten"})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1.5 px-1",children:"Hoeveelheid"}),O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>l(String(Math.max(10,_-10))),children:"-"}),O.jsxs("div",{className:"relative flex-1",children:[O.jsx("input",{type:"number",value:a,onChange:z=>l(z.target.value),className:"text-center bg-white rounded-xl text-[20px] font-medium",min:1}),O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:N})]}),O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>l(String(_+10)),children:"+"})]})]}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1.5 px-1",children:"Aantal"}),O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>m(String(Math.max(1,T-1))),children:"-"}),O.jsxs("div",{className:"relative flex-1",children:[O.jsx("input",{type:"number",value:f,onChange:z=>m(z.target.value),className:"text-center bg-white rounded-xl text-[20px] font-medium",min:1}),O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:"stuks"})]}),O.jsx("button",{className:"w-10 h-10 rounded-full bg-ios-bg text-ios-text border-none cursor-pointer text-xl font-medium active:bg-gray-200",onClick:()=>m(String(T+1)),children:"+"})]})]}),O.jsx("div",{className:"flex gap-2 mb-5",children:[50,100,150,200].map(z=>O.jsxs("button",{onClick:()=>l(String(z)),className:`flex-1 py-2 rounded-xl text-[14px] font-medium border-none cursor-pointer transition-colors ${_===z?"bg-primary text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:[z,j]},z))}),O.jsxs("div",{className:"mb-5",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1.5 px-1",children:"Maaltijd"}),O.jsx("div",{className:"flex gap-2",children:Object.entries(ZL).map(([z,$])=>O.jsx("button",{onClick:()=>b(z),className:`flex-1 py-2.5 rounded-xl text-[13px] font-medium border-none cursor-pointer transition-colors ${p===z?"bg-primary text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:$},z))})]}),O.jsxs("div",{className:"flex justify-around mb-5 py-3 bg-ios-bg rounded-xl",children:[O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"text-[15px] font-semibold",children:Math.round(t.nutrition.calories*_*T/100)}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"kcal"})]}),O.jsxs("div",{className:"text-center",children:[O.jsxs("div",{className:"text-[15px] font-semibold",children:[(t.nutrition.protein*_*T/100).toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"eiwit"})]}),O.jsxs("div",{className:"text-center",children:[O.jsxs("div",{className:"text-[15px] font-semibold",children:[(t.nutrition.carbs*_*T/100).toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"koolh."})]}),O.jsxs("div",{className:"text-center",children:[O.jsxs("div",{className:"text-[15px] font-semibold",children:[(t.nutrition.fat*_*T/100).toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"vet"})]})]}),O.jsxs(to,{fullWidth:!0,size:"lg",onClick:()=>{Bae(t.name,_),n(_,p,T>1?T:void 0)},children:["Toevoegen  ",L," pt",T>1?` (${T})`:""]})]})]})]})}function Fae({onCreated:t,onClose:e}){const[n,r]=D.useState(""),[i,a]=D.useState(""),[l,f]=D.useState(""),[m,p]=D.useState("100"),[b,_]=D.useState("g"),[T,N]=D.useState({calories:"",protein:"",fat:"",saturatedFat:"",carbs:"",sugar:"",fiber:""}),j={calories:Number(T.calories)||0,protein:Number(T.protein)||0,fat:Number(T.fat)||0,saturatedFat:Number(T.saturatedFat)||0,unsaturatedFat:Math.max(0,(Number(T.fat)||0)-(Number(T.saturatedFat)||0)),carbs:Number(T.carbs)||0,sugar:Number(T.sugar)||0,addedSugar:0,fiber:Number(T.fiber)||0},M=p0(j),L=n.trim().length>=2&&Number(T.calories)>0,z=async()=>{if(!L)return;const K=await sI({name:n.trim(),brand:i.trim()||void 0,barcode:l.trim()||void 0,nutrition:j,pointsPer100g:M,servingSizeG:Number(m)||100,unit:b,isZeroPoint:M===0,isFavorite:!0,source:"user"});t(K)},$=(K,ee)=>{const ue=ee.replace(",",".").replace(/[^0-9.]/g,"");N(Z=>({...Z,[K]:ue}))};return O.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center animate-fade-in",children:[O.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:e}),O.jsxs("div",{className:"relative bg-white rounded-t-3xl w-full max-w-lg animate-slide-up overflow-y-auto",style:{paddingBottom:"calc(20px + var(--safe-area-bottom))",maxHeight:"92vh"},children:[O.jsx("div",{className:"flex justify-center pt-3 pb-2",children:O.jsx("div",{className:"w-9 h-1 rounded-full bg-ios-separator"})}),O.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer",children:O.jsx(om,{size:18,className:"text-ios-secondary"})}),O.jsxs("div",{className:"px-5 pb-4",children:[O.jsx("h2",{className:"text-[20px] font-bold mb-4",children:"Eigen product"}),O.jsxs("div",{className:"flex flex-col gap-3 mb-5",children:[O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Naam *"}),O.jsx("input",{type:"text",placeholder:"bijv. Lavazza Cappuccino",value:n,onChange:K=>r(K.target.value),className:"bg-white rounded-xl px-4 py-3 text-[16px] w-full border border-ios-separator"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Merk (optioneel)"}),O.jsx("input",{type:"text",placeholder:"bijv. Lavazza",value:i,onChange:K=>a(K.target.value),className:"bg-white rounded-xl px-4 py-3 text-[16px] w-full border border-ios-separator"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Barcode (optioneel)"}),O.jsxs("div",{className:"relative",children:[O.jsx("input",{type:"text",inputMode:"numeric",placeholder:"Scan of typ de barcode",value:l,onChange:K=>f(K.target.value.replace(/[^0-9]/g,"")),className:"bg-white rounded-xl pl-4 pr-10 py-3 text-[16px] w-full border border-ios-separator"}),O.jsx(vv,{size:18,className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-ios-secondary"})]}),O.jsx("p",{className:"text-[11px] text-ios-secondary mt-0.5 px-1",children:"Vul de barcode in zodat je dit product later kunt scannen"})]}),O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Eenheid"}),O.jsx("div",{className:"flex gap-2",children:["g","ml"].map(K=>O.jsx("button",{onClick:()=>_(K),className:`flex-1 py-2.5 rounded-xl text-[14px] font-medium border-none cursor-pointer transition-colors ${b===K?"bg-primary text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:K==="g"?"Gram (g)":"Milliliter (ml)"},K))})]}),O.jsxs("div",{children:[O.jsxs("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:["Standaard portie (",b,")"]}),O.jsx("input",{type:"number",value:m,onChange:K=>p(K.target.value),className:"bg-white rounded-xl px-4 py-3 text-[16px] w-full border border-ios-separator",min:1})]})]}),O.jsxs("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-2 px-1",children:["Voedingswaarden per 100",b," *"]}),O.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[O.jsx(If,{label:"Calorien (kcal)",value:T.calories,onChange:K=>$("calories",K)}),O.jsx(If,{label:"Eiwit (g)",value:T.protein,onChange:K=>$("protein",K)}),O.jsx(If,{label:"Koolhydraten (g)",value:T.carbs,onChange:K=>$("carbs",K)}),O.jsx(If,{label:"Suikers (g)",value:T.sugar,onChange:K=>$("sugar",K)}),O.jsx(If,{label:"Vet (g)",value:T.fat,onChange:K=>$("fat",K)}),O.jsx(If,{label:"Verz. vet (g)",value:T.saturatedFat,onChange:K=>$("saturatedFat",K)}),O.jsx(If,{label:"Vezels (g)",value:T.fiber,onChange:K=>$("fiber",K)})]}),O.jsxs("div",{className:"bg-ios-bg rounded-2xl p-4 mb-5 text-center",children:[O.jsx("div",{className:"text-[36px] font-bold text-primary leading-none",children:M}),O.jsxs("div",{className:"text-[13px] text-ios-secondary mt-1",children:["punten per 100",b]})]}),O.jsx("p",{className:"text-[13px] text-ios-secondary mb-4 px-1",children:'Tip: de voedingswaarden vind je op de verpakking of zoek online op "product voedingswaarde per 100g".'}),O.jsxs(to,{fullWidth:!0,size:"lg",onClick:z,disabled:!L,children:["Opslaan  ",M," pt/100",b]})]})]})]})}function If({label:t,value:e,onChange:n}){return O.jsxs("div",{children:[O.jsx("label",{className:"text-[12px] text-ios-secondary block mb-0.5 px-1",children:t}),O.jsx("input",{type:"text",inputMode:"decimal",placeholder:"0",value:e,onChange:r=>n(r.target.value),className:"bg-white rounded-xl px-3 py-2.5 text-[16px] w-full border border-ios-separator"})]})}const Vae=[{name:"Boterham wit",nutrition:{calories:264,protein:8.6,fat:3.2,saturatedFat:.7,unsaturatedFat:2.5,carbs:49,sugar:3.2,addedSugar:1,fiber:2.8},servingSizeG:35},{name:"Boterham bruin",nutrition:{calories:254,protein:9.4,fat:3.5,saturatedFat:.7,unsaturatedFat:2.8,carbs:44,sugar:3,addedSugar:1,fiber:5.4},servingSizeG:35},{name:"Boterham volkoren",nutrition:{calories:244,protein:10.2,fat:3.8,saturatedFat:.7,unsaturatedFat:3.1,carbs:40,sugar:2.8,addedSugar:.5,fiber:7.2},servingSizeG:35},{name:"Cruesli naturel",brand:"Quaker",nutrition:{calories:445,protein:10,fat:15,saturatedFat:5.8,unsaturatedFat:9.2,carbs:62,sugar:18,addedSugar:16,fiber:6.5},servingSizeG:45},{name:"Cruesli chocolade",brand:"Quaker",nutrition:{calories:452,protein:9,fat:16,saturatedFat:6.5,unsaturatedFat:9.5,carbs:63,sugar:22,addedSugar:20,fiber:5.5},servingSizeG:45},{name:"Cruesli rood fruit",brand:"Quaker",nutrition:{calories:420,protein:8.5,fat:12,saturatedFat:4.5,unsaturatedFat:7.5,carbs:65,sugar:24,addedSugar:18,fiber:5},servingSizeG:45},{name:"Havermout",nutrition:{calories:370,protein:13,fat:7,saturatedFat:1.2,unsaturatedFat:5.8,carbs:58,sugar:1.3,addedSugar:0,fiber:10},servingSizeG:40},{name:"Beschuit",nutrition:{calories:396,protein:9.8,fat:3.5,saturatedFat:.8,unsaturatedFat:2.7,carbs:78,sugar:8,addedSugar:6,fiber:3.5},servingSizeG:10},{name:"Ontbijtkoek",nutrition:{calories:318,protein:3.5,fat:2,saturatedFat:.5,unsaturatedFat:1.5,carbs:69,sugar:38,addedSugar:35,fiber:1.8},servingSizeG:30},{name:"Crackers volkoren",nutrition:{calories:398,protein:10,fat:9,saturatedFat:1.5,unsaturatedFat:7.5,carbs:64,sugar:3,addedSugar:2,fiber:8},servingSizeG:15},{name:"Hagelslag melk",nutrition:{calories:530,protein:5,fat:27,saturatedFat:16,unsaturatedFat:11,carbs:64,sugar:58,addedSugar:55,fiber:2.5},servingSizeG:10},{name:"Hagelslag puur",nutrition:{calories:505,protein:6,fat:25,saturatedFat:15,unsaturatedFat:10,carbs:60,sugar:52,addedSugar:50,fiber:5},servingSizeG:10},{name:"Pindakaas",nutrition:{calories:615,protein:25,fat:50,saturatedFat:8,unsaturatedFat:42,carbs:12,sugar:6,addedSugar:3,fiber:6},servingSizeG:15},{name:"Jam (aardbei)",nutrition:{calories:250,protein:.5,fat:.1,saturatedFat:0,unsaturatedFat:.1,carbs:61,sugar:47,addedSugar:40,fiber:.8},servingSizeG:15},{name:"Appelstroop",nutrition:{calories:285,protein:.8,fat:.3,saturatedFat:0,unsaturatedFat:.3,carbs:68,sugar:58,addedSugar:0,fiber:1},servingSizeG:15},{name:"Vlokken melk",nutrition:{calories:530,protein:5.5,fat:27,saturatedFat:16,unsaturatedFat:11,carbs:64,sugar:57,addedSugar:55,fiber:2},servingSizeG:10},{name:"Roomboter",nutrition:{calories:740,protein:.6,fat:82,saturatedFat:52,unsaturatedFat:30,carbs:.6,sugar:.6,addedSugar:0,fiber:0},servingSizeG:7},{name:"Margarine",nutrition:{calories:360,protein:.1,fat:40,saturatedFat:10,unsaturatedFat:30,carbs:.3,sugar:.3,addedSugar:0,fiber:0},servingSizeG:7},{name:"Goudse kaas jong",nutrition:{calories:356,protein:25,fat:28,saturatedFat:18,unsaturatedFat:10,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:20},{name:"Goudse kaas oud",nutrition:{calories:403,protein:30,fat:31,saturatedFat:20,unsaturatedFat:11,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:20},{name:"Goudse kaas belegen",nutrition:{calories:375,protein:27,fat:29,saturatedFat:19,unsaturatedFat:10,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:20},{name:"Smeerkaas",nutrition:{calories:230,protein:11,fat:20,saturatedFat:12,unsaturatedFat:8,carbs:2,sugar:2,addedSugar:0,fiber:0},servingSizeG:20},{name:"Melk halfvol",nutrition:{calories:47,protein:3.4,fat:1.5,saturatedFat:1,unsaturatedFat:.5,carbs:4.7,sugar:4.7,addedSugar:0,fiber:0},servingSizeG:200},{name:"Melk vol",nutrition:{calories:65,protein:3.3,fat:3.5,saturatedFat:2.2,unsaturatedFat:1.3,carbs:4.7,sugar:4.7,addedSugar:0,fiber:0},servingSizeG:200},{name:"Melk mager",nutrition:{calories:35,protein:3.5,fat:.1,saturatedFat:.1,unsaturatedFat:0,carbs:4.9,sugar:4.9,addedSugar:0,fiber:0},servingSizeG:200},{name:"Karnemelk",nutrition:{calories:36,protein:3.3,fat:.5,saturatedFat:.3,unsaturatedFat:.2,carbs:4.1,sugar:4.1,addedSugar:0,fiber:0},servingSizeG:200},{name:"Yoghurt vol",nutrition:{calories:72,protein:4,fat:3.5,saturatedFat:2.2,unsaturatedFat:1.3,carbs:5.5,sugar:5.5,addedSugar:0,fiber:0},servingSizeG:150},{name:"Yoghurt mager",nutrition:{calories:40,protein:4.3,fat:.1,saturatedFat:.1,unsaturatedFat:0,carbs:5.5,sugar:5.5,addedSugar:0,fiber:0},servingSizeG:150},{name:"Vla vanille",nutrition:{calories:100,protein:3,fat:2.5,saturatedFat:1.6,unsaturatedFat:.9,carbs:16,sugar:13,addedSugar:10,fiber:0},servingSizeG:150},{name:"Vla chocolade",nutrition:{calories:108,protein:3.2,fat:2.5,saturatedFat:1.6,unsaturatedFat:.9,carbs:18,sugar:15,addedSugar:12,fiber:.5},servingSizeG:150},{name:"Kwark mager",nutrition:{calories:51,protein:9,fat:.2,saturatedFat:.1,unsaturatedFat:.1,carbs:3.5,sugar:3.5,addedSugar:0,fiber:0},servingSizeG:150},{name:"Kwark vol",nutrition:{calories:104,protein:7,fat:5.5,saturatedFat:3.5,unsaturatedFat:2,carbs:6,sugar:6,addedSugar:0,fiber:0},servingSizeG:150},{name:"Cottage cheese",nutrition:{calories:92,protein:12,fat:3.5,saturatedFat:2.2,unsaturatedFat:1.3,carbs:2,sugar:2,addedSugar:0,fiber:0},servingSizeG:100},{name:"Skyr naturel",nutrition:{calories:63,protein:11,fat:.2,saturatedFat:.1,unsaturatedFat:.1,carbs:4,sugar:4,addedSugar:0,fiber:0},servingSizeG:150},{name:"Koffie zwart",nutrition:{calories:2,protein:.3,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:150},{name:"Koffie met melk",nutrition:{calories:12,protein:.8,fat:.4,saturatedFat:.2,unsaturatedFat:.2,carbs:1.2,sugar:1.2,addedSugar:0,fiber:0},servingSizeG:170},{name:"Koffie met melk en suiker",nutrition:{calories:28,protein:.8,fat:.4,saturatedFat:.2,unsaturatedFat:.2,carbs:5.2,sugar:5.2,addedSugar:4,fiber:0},servingSizeG:175},{name:"Cappuccino",nutrition:{calories:40,protein:2,fat:1.5,saturatedFat:1,unsaturatedFat:.5,carbs:4,sugar:4,addedSugar:0,fiber:0},servingSizeG:200},{name:"Latte macchiato",nutrition:{calories:55,protein:3,fat:2.5,saturatedFat:1.5,unsaturatedFat:1,carbs:5,sugar:5,addedSugar:0,fiber:0},servingSizeG:250},{name:"Thee zonder suiker",nutrition:{calories:1,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:.3,sugar:0,addedSugar:0,fiber:0},servingSizeG:200},{name:"Thee met suiker",nutrition:{calories:20,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:5,sugar:5,addedSugar:5,fiber:0},servingSizeG:205},{name:"Jus d'orange (vers)",nutrition:{calories:43,protein:.7,fat:.2,saturatedFat:0,unsaturatedFat:.2,carbs:9.5,sugar:8.5,addedSugar:0,fiber:.2},servingSizeG:200},{name:"Appelsap",nutrition:{calories:46,protein:.1,fat:.1,saturatedFat:0,unsaturatedFat:.1,carbs:11,sugar:10,addedSugar:0,fiber:.1},servingSizeG:200},{name:"Cola",nutrition:{calories:42,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:10.6,sugar:10.6,addedSugar:10.6,fiber:0},servingSizeG:330},{name:"Cola zero",nutrition:{calories:.4,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:330},{name:"Bier (pils)",nutrition:{calories:43,protein:.3,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:3.2,sugar:0,addedSugar:0,fiber:0},servingSizeG:250},{name:"Wijn rood",nutrition:{calories:83,protein:.1,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:2.6,sugar:.6,addedSugar:0,fiber:0},servingSizeG:150},{name:"Wijn wit",nutrition:{calories:82,protein:.1,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:2.6,sugar:.8,addedSugar:0,fiber:0},servingSizeG:150},{name:"Kipfilet",nutrition:{calories:110,protein:24,fat:1.3,saturatedFat:.4,unsaturatedFat:.9,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:150},{name:"Gehakt half om half",nutrition:{calories:215,protein:18,fat:15,saturatedFat:6.5,unsaturatedFat:8.5,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:100},{name:"Gehakt rund mager",nutrition:{calories:156,protein:21,fat:8,saturatedFat:3.5,unsaturatedFat:4.5,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:100},{name:"Rookworst",nutrition:{calories:275,protein:12,fat:24,saturatedFat:9,unsaturatedFat:15,carbs:2,sugar:1,addedSugar:0,fiber:0},servingSizeG:100},{name:"Frikandel",nutrition:{calories:235,protein:10,fat:18,saturatedFat:7,unsaturatedFat:11,carbs:8,sugar:1,addedSugar:0,fiber:.5},servingSizeG:80},{name:"Kroket",nutrition:{calories:210,protein:6,fat:13,saturatedFat:5,unsaturatedFat:8,carbs:17,sugar:1,addedSugar:0,fiber:.5},servingSizeG:65},{name:"Kaassouffl",nutrition:{calories:280,protein:8,fat:19,saturatedFat:8,unsaturatedFat:11,carbs:19,sugar:1,addedSugar:0,fiber:.5},servingSizeG:100},{name:"Zalm (gebakken)",nutrition:{calories:206,protein:20,fat:13,saturatedFat:2.5,unsaturatedFat:10.5,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:125},{name:"Kibbelng",nutrition:{calories:225,protein:14,fat:12,saturatedFat:2,unsaturatedFat:10,carbs:15,sugar:1,addedSugar:0,fiber:.5},servingSizeG:150},{name:"Tonijn in water (blik)",nutrition:{calories:108,protein:24,fat:1,saturatedFat:.3,unsaturatedFat:.7,carbs:0,sugar:0,addedSugar:0,fiber:0},servingSizeG:120},{name:"Aardappelen gekookt",nutrition:{calories:80,protein:2,fat:.1,saturatedFat:0,unsaturatedFat:.1,carbs:17,sugar:.8,addedSugar:0,fiber:2},servingSizeG:200},{name:"Patat / Friet",nutrition:{calories:290,protein:3.5,fat:15,saturatedFat:3,unsaturatedFat:12,carbs:35,sugar:.5,addedSugar:0,fiber:3},servingSizeG:200},{name:"Stamppot boerenkool",nutrition:{calories:95,protein:4,fat:3.5,saturatedFat:1.5,unsaturatedFat:2,carbs:11,sugar:2,addedSugar:0,fiber:3},servingSizeG:250},{name:"Stamppot andijvie",nutrition:{calories:85,protein:3.5,fat:3,saturatedFat:1.5,unsaturatedFat:1.5,carbs:10,sugar:1.5,addedSugar:0,fiber:2.5},servingSizeG:250},{name:"Erwtensoep",nutrition:{calories:80,protein:5,fat:2.5,saturatedFat:1,unsaturatedFat:1.5,carbs:9,sugar:1.5,addedSugar:0,fiber:3},servingSizeG:300},{name:"Tosti ham kaas",nutrition:{calories:260,protein:13,fat:12,saturatedFat:6,unsaturatedFat:6,carbs:25,sugar:2,addedSugar:0,fiber:1.5},servingSizeG:120},{name:"Broodje gezond",nutrition:{calories:180,protein:10,fat:6,saturatedFat:2,unsaturatedFat:4,carbs:22,sugar:3,addedSugar:0,fiber:3},servingSizeG:150},{name:"Uitsmijter (2 eieren)",nutrition:{calories:195,protein:14,fat:12,saturatedFat:4,unsaturatedFat:8,carbs:8,sugar:1,addedSugar:0,fiber:1},servingSizeG:200},{name:"Stroopwafel",nutrition:{calories:450,protein:4,fat:19,saturatedFat:9,unsaturatedFat:10,carbs:65,sugar:35,addedSugar:33,fiber:1},servingSizeG:30},{name:"Gevulde koek",nutrition:{calories:430,protein:7,fat:22,saturatedFat:8,unsaturatedFat:14,carbs:50,sugar:28,addedSugar:25,fiber:3},servingSizeG:55},{name:"Appeltaart",nutrition:{calories:260,protein:3,fat:12,saturatedFat:6,unsaturatedFat:6,carbs:35,sugar:20,addedSugar:15,fiber:1.5},servingSizeG:120},{name:"Tompouce",nutrition:{calories:310,protein:3,fat:15,saturatedFat:9,unsaturatedFat:6,carbs:40,sugar:28,addedSugar:25,fiber:.5},servingSizeG:100},{name:"Bitterbal",nutrition:{calories:260,protein:8,fat:16,saturatedFat:6,unsaturatedFat:10,carbs:20,sugar:1,addedSugar:0,fiber:.5},servingSizeG:30},{name:"Chips naturel",nutrition:{calories:536,protein:6,fat:34,saturatedFat:3,unsaturatedFat:31,carbs:50,sugar:1,addedSugar:0,fiber:4},servingSizeG:30},{name:"Nootjes gezouten",nutrition:{calories:607,protein:20,fat:52,saturatedFat:7,unsaturatedFat:45,carbs:14,sugar:5,addedSugar:0,fiber:7},servingSizeG:30},{name:"Ei gekookt",nutrition:{calories:155,protein:13,fat:11,saturatedFat:3.3,unsaturatedFat:7.7,carbs:1.1,sugar:1.1,addedSugar:0,fiber:0},servingSizeG:60},{name:"Spiegelei",nutrition:{calories:196,protein:14,fat:15,saturatedFat:4,unsaturatedFat:11,carbs:.8,sugar:.8,addedSugar:0,fiber:0},servingSizeG:60},{name:"Roerei",nutrition:{calories:160,protein:11,fat:12,saturatedFat:4,unsaturatedFat:8,carbs:1.5,sugar:1.5,addedSugar:0,fiber:0},servingSizeG:100},{name:"Appel",nutrition:{calories:52,protein:.3,fat:.2,saturatedFat:0,unsaturatedFat:.2,carbs:12,sugar:10,addedSugar:0,fiber:2.4},servingSizeG:150},{name:"Banaan",nutrition:{calories:89,protein:1.1,fat:.3,saturatedFat:.1,unsaturatedFat:.2,carbs:20,sugar:12,addedSugar:0,fiber:2.6},servingSizeG:120},{name:"Sinaasappel",nutrition:{calories:47,protein:.9,fat:.1,saturatedFat:0,unsaturatedFat:.1,carbs:10,sugar:9.4,addedSugar:0,fiber:2.4},servingSizeG:150},{name:"Mandarijn",nutrition:{calories:53,protein:.8,fat:.3,saturatedFat:0,unsaturatedFat:.3,carbs:12,sugar:11,addedSugar:0,fiber:1.8},servingSizeG:75},{name:"Druiven",nutrition:{calories:69,protein:.7,fat:.2,saturatedFat:0,unsaturatedFat:.2,carbs:16,sugar:16,addedSugar:0,fiber:.9},servingSizeG:100},{name:"Witte rijst (gekookt)",nutrition:{calories:130,protein:2.7,fat:.3,saturatedFat:.1,unsaturatedFat:.2,carbs:28,sugar:0,addedSugar:0,fiber:.4},servingSizeG:200},{name:"Zilvervliesrijst (gekookt)",nutrition:{calories:123,protein:2.7,fat:1,saturatedFat:.2,unsaturatedFat:.8,carbs:25,sugar:.4,addedSugar:0,fiber:1.8},servingSizeG:200},{name:"Pasta (gekookt)",nutrition:{calories:157,protein:5.8,fat:.9,saturatedFat:.2,unsaturatedFat:.7,carbs:31,sugar:.6,addedSugar:0,fiber:1.8},servingSizeG:200},{name:"Nasi goreng",nutrition:{calories:145,protein:4,fat:5,saturatedFat:1.5,unsaturatedFat:3.5,carbs:21,sugar:2,addedSugar:0,fiber:1},servingSizeG:300},{name:"Bami goreng",nutrition:{calories:140,protein:4,fat:4.5,saturatedFat:1.5,unsaturatedFat:3,carbs:21,sugar:2,addedSugar:0,fiber:1},servingSizeG:300},{name:"Mayonaise",nutrition:{calories:680,protein:1,fat:75,saturatedFat:6,unsaturatedFat:69,carbs:1,sugar:1,addedSugar:0,fiber:0},servingSizeG:15},{name:"Ketchup",nutrition:{calories:112,protein:1.2,fat:.1,saturatedFat:0,unsaturatedFat:.1,carbs:26,sugar:22,addedSugar:18,fiber:.3},servingSizeG:15},{name:"Mosterd",nutrition:{calories:66,protein:4,fat:3.5,saturatedFat:.2,unsaturatedFat:3.3,carbs:4,sugar:2.5,addedSugar:0,fiber:3},servingSizeG:10},{name:"Satsaus",nutrition:{calories:155,protein:6,fat:10,saturatedFat:2,unsaturatedFat:8,carbs:10,sugar:6,addedSugar:3,fiber:1},servingSizeG:30},{name:"Fritessaus",nutrition:{calories:340,protein:.5,fat:33,saturatedFat:3,unsaturatedFat:30,carbs:11,sugar:8,addedSugar:6,fiber:0},servingSizeG:20}],eB=[{name:"Fruit",icon:"",items:["Appel","Banaan","Sinaasappel","Mandarijn","Druiven","Aardbei","Blauwe bes","Framboos","Watermeloen","Mango","Ananas","Kiwi","Peer","Perzik","Pruim","Grapefruit"]},{name:"Groenten",icon:"",items:["Broccoli","Sperziebonen","Spinazie","Tomaat","Komkommer","Wortel","Paprika","Courgette","Bloemkool","Sla","Champignon","Ui","Aubergine","Boerenkool","Andijvie","Spruitjes","Asperge","Selderij","Radijs","Prei"]},{name:"Eiwit",icon:"",items:["Kipfilet","Kalkoenfilet","Ei","Gekookt ei","Tonijn (in water)","Garnalen","Kabeljauw","Zalm","Tilapia","Pangasius"]},{name:"Zuivel",icon:"",items:["Magere yoghurt","Magere kwark","Skyr","Cottage cheese"]},{name:"Peulvruchten",icon:"",items:["Kidneybonen","Kikkererwten","Linzen","Zwarte bonen","Witte bonen","Tuinbonen"]}],zae=eB.flatMap(t=>t.items);function tB(t){const e=t.toLowerCase();return zae.some(n=>{const r=n.toLowerCase().replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`\\b${r}\\b`).test(e)})}const nB="https://nl.openfoodfacts.org";function Uae(t){if(!t)return{calories:0,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0};const e=t.fat_100g??0,n=t["saturated-fat_100g"]??0;return{calories:t["energy-kcal_100g"]??0,protein:t.proteins_100g??0,fat:e,saturatedFat:n,unsaturatedFat:Math.max(0,e-n),carbs:t.carbohydrates_100g??0,sugar:t.sugars_100g??0,addedSugar:t.sugars_100g??0,fiber:t.fiber_100g??0}}function qae(t){const e=[t.serving_size,t.quantity].filter(Boolean).join(" ").toLowerCase();return/\bml\b|\bliter\b|\bcl\b|\bdl\b/.test(e)?"ml":"g"}function TA(t){const e=t.product_name_nl||t.product_name;if(!e)return null;const n=Uae(t.nutriments);if(n.calories===0&&n.protein===0&&n.fat===0)return null;const r=tB(e),i=r?0:p0(n),a=qae(t);return{name:e,brand:t.brands||void 0,barcode:t.code||void 0,nutrition:n,pointsPer100g:i,servingSizeG:t.serving_quantity||100,unit:a,isZeroPoint:r,source:"openfoodfacts",imageUrl:t.image_front_small_url||void 0,createdAt:new Date}}function dI(t){const e=t.toLowerCase();return Vae.filter(n=>n.name.toLowerCase().includes(e)).map(n=>{const r=tB(n.name),i=r?0:p0(n.nutrition);return{...n,pointsPer100g:i,isZeroPoint:r,source:"nevo",createdAt:new Date}})}async function rB(t){const e=t.toLowerCase();return(await Je.foodItems.toArray()).filter(r=>r.name.toLowerCase().includes(e))}async function iB(t,e,n){if(!t||t.length<2)return[];const r=n??dI(t);try{const i=new URLSearchParams({search_terms:t,search_simple:"1",action:"process",json:"1",page_size:"15",fields:"product_name,product_name_nl,brands,code,nutriments,serving_quantity,serving_size,quantity,image_front_small_url",lc:"nl",tagtype_0:"countries",tag_contains_0:"contains",tag_0:"Netherlands"}),a=await fetch(`${nB}/cgi/search.pl?${i}`,{signal:e});if(!a.ok)return r;let m=((await a.json()).products||[]).map(TA).filter(_=>_!==null);if(m.length<3)try{const _=new URLSearchParams({search_terms:t,search_simple:"1",action:"process",json:"1",page_size:"10",fields:"product_name,product_name_nl,brands,code,nutriments,serving_quantity,serving_size,quantity,image_front_small_url",lc:"nl"}),T=await fetch(`https://world.openfoodfacts.org/cgi/search.pl?${_}`,{signal:e});if(T.ok){const M=((await T.json()).products||[]).map(TA).filter(z=>z!==null),L=new Set(m.map(z=>z.name.toLowerCase()));for(const z of M)L.has(z.name.toLowerCase())||(m.push(z),L.add(z.name.toLowerCase()))}}catch{}const p=new Set(r.map(_=>_.name.toLowerCase())),b=[...r];for(const _ of m)p.has(_.name.toLowerCase())||(b.push(_),p.add(_.name.toLowerCase()));return b}catch(i){return i instanceof DOMException&&i.name==="AbortError"?[]:(console.error("Zoekfout:",i),r)}}const $4="product_name,product_name_nl,brands,code,nutriments,serving_quantity,serving_size,quantity,image_front_small_url";async function Gae(t){try{const e=await Je.foodItems.where("barcode").equals(t).first();if(e)return e}catch{}try{const e=await X4(`${nB}/api/v2/product/${t}?fields=${$4}`);if(e)return await Y4(e),e}catch{}try{const e=await X4(`https://world.openfoodfacts.org/api/v2/product/${t}?fields=${$4}`);if(e)return await Y4(e),e}catch(e){console.error("Barcode lookup fout:",e)}return null}async function Y4(t){if(t.barcode)try{await Je.foodItems.where("barcode").equals(t.barcode).first()||await Je.foodItems.add({...t,source:"openfoodfacts"})}catch{}}async function X4(t){const e=await fetch(t);if(!e.ok)return null;const n=await e.json();return n.status!==1||!n.product?null:TA(n.product)}function Hae({onCreated:t,onClose:e}){const[n,r]=D.useState(""),[i,a]=D.useState([]),[l,f]=D.useState(""),[m,p]=D.useState([]),[b,_]=D.useState(!1),[T,N]=D.useState([]),[j,M]=D.useState([]),L=D.useRef(null),z=D.useRef(null);D.useEffect(()=>{EA().then(N),_A(10).then(M)},[]);const $=D.useCallback(async xe=>{if(xe.length<2){p([]);return}z.current?.abort();const de=new AbortController;z.current=de;const ye=dI(xe),_e=await rB(xe),qe=new Set(ye.map(et=>et.name.toLowerCase())),ze=[...ye];for(const et of _e)qe.has(et.name.toLowerCase())||(ze.push(et),qe.add(et.name.toLowerCase()));!de.signal.aborted&&ze.length>0&&p(ze),_(!0);try{const et=await iB(xe,de.signal,ze);de.signal.aborted||(p(et),_(!1))}catch{de.signal.aborted||_(!1)}},[]),K=xe=>{f(xe),L.current&&clearTimeout(L.current),L.current=setTimeout(()=>$(xe),400)},ee=xe=>{a(de=>[...de,{food:xe,quantityG:xe.servingSizeG||100}]),f(""),p([])},ue=(xe,de)=>{a(ye=>ye.map((_e,qe)=>qe===xe?{..._e,quantityG:Math.max(1,de)}:_e))},Z=xe=>{a(de=>de.filter((ye,_e)=>_e!==xe))},V=i.reduce((xe,de)=>xe+de.quantityG,0),W=i.reduce((xe,de)=>{const ye=de.quantityG/100;return{calories:xe.calories+de.food.nutrition.calories*ye,protein:xe.protein+de.food.nutrition.protein*ye,fat:xe.fat+de.food.nutrition.fat*ye,saturatedFat:xe.saturatedFat+de.food.nutrition.saturatedFat*ye,unsaturatedFat:xe.unsaturatedFat+de.food.nutrition.unsaturatedFat*ye,carbs:xe.carbs+de.food.nutrition.carbs*ye,sugar:xe.sugar+de.food.nutrition.sugar*ye,addedSugar:xe.addedSugar+de.food.nutrition.addedSugar*ye,fiber:xe.fiber+de.food.nutrition.fiber*ye}},{calories:0,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0}),U=V>0?{calories:Math.round(W.calories/V*100),protein:+(W.protein/V*100).toFixed(1),fat:+(W.fat/V*100).toFixed(1),saturatedFat:+(W.saturatedFat/V*100).toFixed(1),unsaturatedFat:+(W.unsaturatedFat/V*100).toFixed(1),carbs:+(W.carbs/V*100).toFixed(1),sugar:+(W.sugar/V*100).toFixed(1),addedSugar:+(W.addedSugar/V*100).toFixed(1),fiber:+(W.fiber/V*100).toFixed(1)}:{calories:0,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0},ae=p0(U),ie=V>0?Math.max(0,Math.round(ae*V/100)):0,X=n.trim().length>=2&&i.length>=2,J=async()=>{if(!X)return;const xe=await sI({name:n.trim(),nutrition:U,pointsPer100g:ae,servingSizeG:Math.round(V),isZeroPoint:ae===0,isFavorite:!0,source:"user"});t(xe)};return O.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center animate-fade-in",children:[O.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:e}),O.jsxs("div",{className:"relative bg-white rounded-t-3xl w-full max-w-lg animate-slide-up overflow-y-auto",style:{paddingBottom:"calc(20px + var(--safe-area-bottom))",maxHeight:"92vh"},children:[O.jsx("div",{className:"flex justify-center pt-3 pb-2",children:O.jsx("div",{className:"w-9 h-1 rounded-full bg-ios-separator"})}),O.jsx("button",{onClick:e,className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center border-none cursor-pointer",children:O.jsx(om,{size:18,className:"text-ios-secondary"})}),O.jsxs("div",{className:"px-5 pb-4",children:[O.jsx("h2",{className:"text-[20px] font-bold mb-4",children:"Samengesteld product"}),O.jsxs("div",{className:"mb-4",children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Naam *"}),O.jsx("input",{type:"text",placeholder:"bijv. Tosti ham-kaas",value:n,onChange:xe=>r(xe.target.value),className:"bg-white rounded-xl px-4 py-3 text-[16px] w-full border border-ios-separator"})]}),O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Ingredinten toevoegen"}),O.jsxs("div",{className:"relative mb-3",children:[O.jsx(Cp,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:"text",placeholder:"Zoek ingredint...",value:l,onChange:xe=>K(xe.target.value),className:"bg-white rounded-xl pl-9 pr-4 py-2.5 text-[15px] w-full border border-ios-separator"}),b&&O.jsx(Bc,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-ios-secondary animate-spin"})]}),m.length>0&&O.jsx("div",{className:"bg-white border border-ios-separator rounded-xl mb-3 max-h-40 overflow-y-auto",children:m.slice(0,8).map((xe,de)=>O.jsxs("button",{onClick:()=>ee(xe),className:"w-full flex items-center gap-2 px-3 py-2 text-left bg-transparent border-none cursor-pointer active:bg-gray-50 text-[14px]",children:[O.jsx(zf,{size:14,className:"text-primary flex-shrink-0"}),O.jsx("span",{className:"truncate",children:xe.name}),O.jsxs("span",{className:"text-ios-secondary text-[12px] ml-auto flex-shrink-0",children:[xe.pointsPer100g," pt"]})]},`${xe.name}-${de}`))}),l.length<2&&(T.length>0||j.length>0)&&O.jsxs("div",{className:"bg-white border border-ios-separator rounded-xl mb-3 max-h-48 overflow-y-auto",children:[T.length>0&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-ios-bg",children:[O.jsx(Yx,{size:12,className:"text-ios-destructive"}),O.jsx("span",{className:"text-[12px] font-semibold text-ios-secondary uppercase tracking-wide",children:"Favorieten"})]}),T.slice(0,5).map((xe,de)=>O.jsxs("button",{onClick:()=>ee(xe),className:"w-full flex items-center gap-2 px-3 py-2 text-left bg-transparent border-none cursor-pointer active:bg-gray-50 text-[14px]",children:[O.jsx(zf,{size:14,className:"text-primary flex-shrink-0"}),O.jsx("span",{className:"truncate",children:xe.name}),O.jsxs("span",{className:"text-ios-secondary text-[12px] ml-auto flex-shrink-0",children:[xe.pointsPer100g," pt"]})]},`fav-${xe.name}-${de}`))]}),j.length>0&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-ios-bg",children:[O.jsx(lI,{size:12,className:"text-ios-blue"}),O.jsx("span",{className:"text-[12px] font-semibold text-ios-secondary uppercase tracking-wide",children:"Recent"})]}),j.slice(0,5).map((xe,de)=>O.jsxs("button",{onClick:()=>ee(xe),className:"w-full flex items-center gap-2 px-3 py-2 text-left bg-transparent border-none cursor-pointer active:bg-gray-50 text-[14px]",children:[O.jsx(zf,{size:14,className:"text-primary flex-shrink-0"}),O.jsx("span",{className:"truncate",children:xe.name}),O.jsxs("span",{className:"text-ios-secondary text-[12px] ml-auto flex-shrink-0",children:[xe.pointsPer100g," pt"]})]},`recent-${xe.name}-${de}`))]})]}),i.length>0&&O.jsx("div",{className:"bg-ios-bg rounded-xl mb-4",children:i.map((xe,de)=>O.jsxs("div",{className:`flex items-center gap-2 px-3 py-2.5 ${de<i.length-1?"border-b border-ios-separator":""}`,children:[O.jsx("div",{className:"flex-1 min-w-0",children:O.jsx("div",{className:"text-[14px] font-medium truncate",children:xe.food.name})}),O.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[O.jsx("button",{onClick:()=>ue(de,xe.quantityG-10),className:"w-7 h-7 rounded-full bg-white flex items-center justify-center border-none cursor-pointer text-ios-secondary",children:O.jsx(zL,{size:12})}),O.jsx("input",{type:"number",value:xe.quantityG,onChange:ye=>ue(de,Number(ye.target.value)),className:"w-14 text-center bg-white rounded-lg px-1 py-1 text-[14px] border border-ios-separator"}),O.jsx("span",{className:"text-[12px] text-ios-secondary",children:"g"}),O.jsx("button",{onClick:()=>ue(de,xe.quantityG+10),className:"w-7 h-7 rounded-full bg-white flex items-center justify-center border-none cursor-pointer text-ios-secondary",children:O.jsx(zf,{size:12})}),O.jsx("button",{onClick:()=>Z(de),className:"w-7 h-7 rounded-full flex items-center justify-center border-none cursor-pointer text-ios-destructive bg-transparent",children:O.jsx(om,{size:14})})]})]},`${xe.food.name}-${de}`))}),i.length<2&&O.jsx("p",{className:"text-[13px] text-ios-secondary text-center mb-4",children:"Voeg minimaal 2 ingredinten toe"}),i.length>=2&&O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"bg-ios-bg rounded-2xl p-4 mb-3 text-center",children:[O.jsx("div",{className:"text-[36px] font-bold text-primary leading-none",children:ie}),O.jsxs("div",{className:"text-[13px] text-ios-secondary mt-1",children:["punten totaal (",Math.round(V),"g)  ",ae," pt/100g"]})]}),O.jsxs("div",{className:"flex justify-around mb-4 py-2 bg-ios-bg rounded-xl text-center",children:[O.jsxs("div",{children:[O.jsx("div",{className:"text-[14px] font-semibold",children:Math.round(W.calories)}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"kcal"})]}),O.jsxs("div",{children:[O.jsxs("div",{className:"text-[14px] font-semibold",children:[W.protein.toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"eiwit"})]}),O.jsxs("div",{children:[O.jsxs("div",{className:"text-[14px] font-semibold",children:[W.carbs.toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"koolh."})]}),O.jsxs("div",{children:[O.jsxs("div",{className:"text-[14px] font-semibold",children:[W.fat.toFixed(1),"g"]}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"vet"})]})]})]}),O.jsxs(to,{fullWidth:!0,size:"lg",onClick:J,disabled:!X,children:["Opslaan  ",ie," pt"]})]})]})]})}function Kae(){const[t]=bK(),e=t.get("meal")||"lunch",[n,r]=D.useState("recent"),[i,a]=D.useState(""),[l,f]=D.useState([]),[m,p]=D.useState([]),[b,_]=D.useState([]),[T,N]=D.useState(!1),[j,M]=D.useState(!0),[L,z]=D.useState(null),[$,K]=D.useState(!1),[ee,ue]=D.useState(!1),[Z,V]=D.useState(!1),W=D.useRef(null),U=D.useRef(null),ae=D.useRef(null),ie=Qx(ze=>ze.addEntry);D.useEffect(()=>{X()},[]);const X=async()=>{M(!0);const[ze,et]=await Promise.all([_A(),EA()]);p(ze),_(et),M(!1)},J=D.useCallback(async ze=>{if(ze.length<2){f([]),V(!1);return}U.current&&U.current.abort();const et=new AbortController;U.current=et;const me=new Set(b.map(yt=>yt.name.toLowerCase())),Se=yt=>yt.map(ut=>({...ut,isFavorite:me.has(ut.name.toLowerCase())})),Xe=dI(ze),Ve=await rB(ze),pt=new Set(Xe.map(yt=>yt.name.toLowerCase())),$e=[...Xe];for(const yt of Ve)pt.has(yt.name.toLowerCase())||($e.push(yt),pt.add(yt.name.toLowerCase()));!et.signal.aborted&&$e.length>0&&(f(Se($e)),V(!0)),N(!0);try{const yt=await iB(ze,et.signal,$e);et.signal.aborted||(f(Se(yt)),N(!1),V(!0))}catch{et.signal.aborted||N(!1)}},[b]),xe=ze=>{a(ze),ze.length>=2&&r("search"),W.current&&clearTimeout(W.current),W.current=setTimeout(()=>J(ze),300)},de=async ze=>{const et=await jte(ze),me=Xe=>Xe.map(Ve=>Ve.name.toLowerCase()===ze.name.toLowerCase()?{...Ve,isFavorite:et}:Ve);p(me),f(me);const Se=await EA();_(Se)},ye=async(ze,et,me)=>{if(!L)return;const Xe=y0(L.pointsPer100g,ze)*(me||1);await ie({foodItem:L,mealType:et,quantityG:ze,quantity:me,points:Xe}),navigator.vibrate?.(10),z(null);const Ve=await _A();p(Ve)},_e=ze=>{K(!1),ue(!1),z(ze),X()},qe=ze=>{r(ze),ze==="search"&&setTimeout(()=>ae.current?.focus(),100)};return O.jsxs(Yc,{title:"Zoek voedsel",children:[O.jsxs("div",{className:"flex flex-col gap-3",children:[O.jsxs("div",{className:"relative",children:[O.jsx(Cp,{size:18,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{ref:ae,type:"text",placeholder:"Zoek een product...",value:i,onChange:ze=>xe(ze.target.value),onFocus:()=>i.length>=2&&r("search"),className:"bg-white rounded-xl pl-10 pr-4 py-3 text-[17px] w-full shadow-sm"}),T&&O.jsx(Bc,{size:18,className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-ios-secondary animate-spin"})]}),O.jsxs("div",{className:"flex gap-1 bg-ios-bg rounded-xl p-1",children:[O.jsx(Y1,{active:n==="recent",onClick:()=>qe("recent"),icon:O.jsx(lI,{size:14}),label:"Recent"}),O.jsx(Y1,{active:n==="favorites",onClick:()=>qe("favorites"),icon:O.jsx(Yx,{size:14}),label:"Favorieten"}),O.jsx(Y1,{active:n==="zeropoint",onClick:()=>qe("zeropoint"),icon:O.jsx(Zne,{size:14}),label:"0 Punten"}),O.jsx(Y1,{active:n==="search",onClick:()=>qe("search"),icon:O.jsx(Cp,{size:14}),label:"Zoeken"})]}),n==="recent"&&O.jsx(Wae,{foods:m,isLoading:j,onSelect:z,onToggleFavorite:de}),n==="favorites"&&O.jsx($ae,{foods:b,isLoading:j,onSelect:z,onToggleFavorite:de}),n==="zeropoint"&&O.jsx(Yae,{onSelect:z}),n==="search"&&O.jsx(Xae,{results:l,isSearching:T,hasSearched:Z,query:i,onSelect:z,onToggleFavorite:de}),O.jsxs("div",{className:"flex gap-2",children:[O.jsxs("button",{onClick:()=>K(!0),className:"flex-1 flex items-center justify-center gap-2 py-3.5 bg-white rounded-xl border border-dashed border-ios-separator text-[15px] font-medium text-primary cursor-pointer active:bg-gray-50 transition-colors",children:[O.jsx(zf,{size:18}),"Eigen product"]}),O.jsxs("button",{onClick:()=>ue(!0),className:"flex-1 flex items-center justify-center gap-2 py-3.5 bg-white rounded-xl border border-dashed border-ios-separator text-[15px] font-medium text-ios-blue cursor-pointer active:bg-gray-50 transition-colors",children:[O.jsx(xne,{size:18}),"Samengesteld"]})]})]}),L&&O.jsx(JL,{food:L,defaultMealType:e,onAdd:ye,onClose:()=>z(null)}),$&&O.jsx(Fae,{onCreated:_e,onClose:()=>K(!1)}),ee&&O.jsx(Hae,{onCreated:_e,onClose:()=>ue(!1)})]})}function Y1({active:t,onClick:e,icon:n,label:r}){return O.jsxs("button",{onClick:e,className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[13px] font-medium border-none cursor-pointer transition-colors ${t?"bg-white text-primary shadow-sm":"bg-transparent text-ios-secondary"}`,children:[n,r]})}function Wae({foods:t,isLoading:e,onSelect:n,onToggleFavorite:r}){return e?O.jsx("div",{className:"flex justify-center py-12",children:O.jsx(Bc,{size:24,className:"text-ios-secondary animate-spin"})}):t.length===0?O.jsxs("div",{className:"text-center py-12",children:[O.jsx(lI,{size:48,className:"text-ios-separator mx-auto mb-3"}),O.jsx("p",{className:"text-[17px] text-ios-secondary",children:"Nog geen producten gebruikt"}),O.jsx("p",{className:"text-[13px] text-ios-secondary mt-1",children:"Producten die je logt verschijnen hier automatisch"})]}):O.jsx(An,{children:t.map((i,a)=>O.jsx("div",{className:a<t.length-1?"border-b border-ios-separator":"",children:O.jsx(fI,{food:i,onSelect:n,onToggleFavorite:r})},`recent-${i.name}-${a}`))})}function $ae({foods:t,isLoading:e,onSelect:n,onToggleFavorite:r}){return e?O.jsx("div",{className:"flex justify-center py-12",children:O.jsx(Bc,{size:24,className:"text-ios-secondary animate-spin"})}):t.length===0?O.jsxs("div",{className:"text-center py-12",children:[O.jsx(Yx,{size:48,className:"text-ios-separator mx-auto mb-3"}),O.jsx("p",{className:"text-[17px] text-ios-secondary",children:"Geen favorieten"}),O.jsx("p",{className:"text-[13px] text-ios-secondary mt-1",children:"Tik op het hartje om een product als favoriet op te slaan"})]}):O.jsx(An,{children:t.map((i,a)=>O.jsx("div",{className:a<t.length-1?"border-b border-ios-separator":"",children:O.jsx(fI,{food:{...i,isFavorite:!0},onSelect:n,onToggleFavorite:r})},`fav-${i.id??i.name}-${a}`))})}function Yae({onSelect:t}){const[e,n]=D.useState(null),r=i=>({name:i,nutrition:{calories:0,protein:0,fat:0,saturatedFat:0,unsaturatedFat:0,carbs:0,sugar:0,addedSugar:0,fiber:0},pointsPer100g:0,servingSizeG:100,isZeroPoint:!0,source:"nevo",createdAt:new Date});return O.jsx("div",{className:"flex flex-col gap-2",children:eB.map(i=>{const a=e===i.name;return O.jsxs(An,{children:[O.jsxs("button",{onClick:()=>n(a?null:i.name),className:"w-full flex items-center justify-between px-4 py-3 border-none bg-transparent cursor-pointer",children:[O.jsxs("div",{className:"flex items-center gap-2.5",children:[O.jsx("span",{className:"text-lg",children:i.icon}),O.jsx("span",{className:"text-[15px] font-semibold",children:i.name}),O.jsxs("span",{className:"text-[13px] text-ios-secondary",children:["(",i.items.length,")"]})]}),a?O.jsx(BL,{size:18,className:"text-ios-secondary"}):O.jsx(pv,{size:18,className:"text-ios-secondary"})]}),a&&O.jsx("div",{className:"border-t border-ios-separator",children:i.items.map((l,f)=>O.jsxs("button",{onClick:()=>t(r(l)),className:`w-full flex items-center justify-between px-4 py-2.5 border-none bg-transparent cursor-pointer active:bg-gray-50 text-left ${f<i.items.length-1?"border-b border-ios-separator":""}`,children:[O.jsx("span",{className:"text-[15px]",children:l}),O.jsx("span",{className:"text-[13px] font-medium text-primary",children:"0 pt"})]},l))})]},i.name)})})}function Xae({results:t,isSearching:e,hasSearched:n,query:r,onSelect:i,onToggleFavorite:a}){return t.length>0?O.jsx(An,{children:t.map((l,f)=>O.jsx("div",{className:f<t.length-1?"border-b border-ios-separator":"",children:O.jsx(fI,{food:l,onSelect:i,onToggleFavorite:a})},`search-${l.barcode??l.name}-${f}`))}):n&&t.length===0&&!e?O.jsxs("div",{className:"text-center py-12",children:[O.jsxs("p",{className:"text-[17px] text-ios-secondary",children:['Geen resultaten voor "',r,'"']}),O.jsx("p",{className:"text-[13px] text-ios-secondary mt-1",children:"Probeer een andere zoekterm of maak een eigen product aan"})]}):O.jsxs("div",{className:"text-center py-12",children:[O.jsx(Cp,{size:48,className:"text-ios-separator mx-auto mb-3"}),O.jsx("p",{className:"text-[17px] text-ios-secondary",children:"Zoek op productnaam of merk"}),O.jsx("p",{className:"text-[13px] text-ios-secondary mt-1",children:"Of gebruik de scanner voor barcodes"})]})}var At;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(At||(At={}));var Q4=new Map([[At.QR_CODE,"QR_CODE"],[At.AZTEC,"AZTEC"],[At.CODABAR,"CODABAR"],[At.CODE_39,"CODE_39"],[At.CODE_93,"CODE_93"],[At.CODE_128,"CODE_128"],[At.DATA_MATRIX,"DATA_MATRIX"],[At.MAXICODE,"MAXICODE"],[At.ITF,"ITF"],[At.EAN_13,"EAN_13"],[At.EAN_8,"EAN_8"],[At.PDF_417,"PDF_417"],[At.RSS_14,"RSS_14"],[At.RSS_EXPANDED,"RSS_EXPANDED"],[At.UPC_A,"UPC_A"],[At.UPC_E,"UPC_E"],[At.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Z4;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Z4||(Z4={}));function Qae(t){return Object.values(At).includes(t)}var bv;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(bv||(bv={}));var Zae=(function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[bv.SCAN_TYPE_CAMERA,bv.SCAN_TYPE_FILE],t})(),aB=(function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Q4.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Q4.get(e))},t})(),J4=(function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t})(),IA;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(IA||(IA={}));var Jae=(function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:IA.UNKWOWN_ERROR}},t})(),ese=(function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t})();function au(t){return typeof t>"u"||t===null}var Sh=(function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t})(),sB=(function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(i),l=Object.keys(e),f=0,m=l;f<m.length;f++){var p=m[f];if(a.has(p))return n.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},t})(),$g={exports:{}},tse=$g.exports,eD;function nse(){return eD||(eD=1,(function(t,e){(function(n,r){r(e)})(tse,(function(n){function r(Y){return Y==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,o){Y.__proto__=o}||function(Y,o){for(var c in o)o.hasOwnProperty(c)&&(Y[c]=o[c])};function a(Y,o){i(Y,o);function c(){this.constructor=Y}Y.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}function l(Y,o){var c=Object.setPrototypeOf;c?c(Y,o):Y.__proto__=o}function f(Y,o){o===void 0&&(o=Y.constructor);var c=Error.captureStackTrace;c&&c(Y,o)}var m=(function(Y){a(o,Y);function o(c){var h=this.constructor,y=Y.call(this,c)||this;return Object.defineProperty(y,"name",{value:h.name,enumerable:!1}),l(y,h.prototype),f(y),y}return o})(Error);class p extends m{constructor(o=void 0){super(o),this.message=o}getKind(){return this.constructor.kind}}p.kind="Exception";class b extends p{}b.kind="ArgumentException";class _ extends p{}_.kind="IllegalArgumentException";class T{constructor(o){if(this.binarizer=o,o===null)throw new _("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(o,c){return this.binarizer.getBlackRow(o,c)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(o,c,h,y){const x=this.binarizer.getLuminanceSource().crop(o,c,h,y);return new T(this.binarizer.createBinarizer(x))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(o))}rotateCounterClockwise45(){const o=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(o))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class N extends p{static getChecksumInstance(){return new N}}N.kind="ChecksumException";class j{constructor(o){this.source=o}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class M{static arraycopy(o,c,h,y,x){for(;x--;)h[y++]=o[c++]}static currentTimeMillis(){return Date.now()}}class L extends p{}L.kind="IndexOutOfBoundsException";class z extends L{constructor(o=void 0,c=void 0){super(c),this.index=o,this.message=c}}z.kind="ArrayIndexOutOfBoundsException";class ${static fill(o,c){for(let h=0,y=o.length;h<y;h++)o[h]=c}static fillWithin(o,c,h,y){$.rangeCheck(o.length,c,h);for(let x=c;x<h;x++)o[x]=y}static rangeCheck(o,c,h){if(c>h)throw new _("fromIndex("+c+") > toIndex("+h+")");if(c<0)throw new z(c);if(h>o)throw new z(h)}static asList(...o){return o}static create(o,c,h){return Array.from({length:o}).map(x=>Array.from({length:c}).fill(h))}static createInt32Array(o,c,h){return Array.from({length:o}).map(x=>Int32Array.from({length:c}).fill(h))}static equals(o,c){if(!o||!c||!o.length||!c.length||o.length!==c.length)return!1;for(let h=0,y=o.length;h<y;h++)if(o[h]!==c[h])return!1;return!0}static hashCode(o){if(o===null)return 0;let c=1;for(const h of o)c=31*c+h;return c}static fillUint8Array(o,c){for(let h=0;h!==o.length;h++)o[h]=c}static copyOf(o,c){return o.slice(0,c)}static copyOfUint8Array(o,c){if(o.length<=c){const h=new Uint8Array(c);return h.set(o),h}return o.slice(0,c)}static copyOfRange(o,c,h){const y=h-c,x=new Int32Array(y);return M.arraycopy(o,c,x,0,y),x}static binarySearch(o,c,h){h===void 0&&(h=$.numberComparator);let y=0,x=o.length-1;for(;y<=x;){const E=x+y>>1,d=h(c,o[E]);if(d>0)y=E+1;else if(d<0)x=E-1;else return E}return-y-1}static numberComparator(o,c){return o-c}}class K{static numberOfTrailingZeros(o){let c;if(o===0)return 32;let h=31;return c=o<<16,c!==0&&(h-=16,o=c),c=o<<8,c!==0&&(h-=8,o=c),c=o<<4,c!==0&&(h-=4,o=c),c=o<<2,c!==0&&(h-=2,o=c),h-(o<<1>>>31)}static numberOfLeadingZeros(o){if(o===0)return 32;let c=1;return o>>>16||(c+=16,o<<=16),o>>>24||(c+=8,o<<=8),o>>>28||(c+=4,o<<=4),o>>>30||(c+=2,o<<=2),c-=o>>>31,c}static toHexString(o){return o.toString(16)}static toBinaryString(o){return String(parseInt(String(o),2))}static bitCount(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),o=o+(o>>>4)&252645135,o=o+(o>>>8),o=o+(o>>>16),o&63}static truncDivision(o,c){return Math.trunc(o/c)}static parseInt(o,c=void 0){return parseInt(o,c)}}K.MIN_VALUE_32_BITS=-2147483648,K.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ee{constructor(o,c){o===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=o,c==null?this.bits=ee.makeArray(o):this.bits=c)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(o){if(o>this.bits.length*32){const c=ee.makeArray(o);M.arraycopy(this.bits,0,c,0,this.bits.length),this.bits=c}}get(o){return(this.bits[Math.floor(o/32)]&1<<(o&31))!==0}set(o){this.bits[Math.floor(o/32)]|=1<<(o&31)}flip(o){this.bits[Math.floor(o/32)]^=1<<(o&31)}getNextSet(o){const c=this.size;if(o>=c)return c;const h=this.bits;let y=Math.floor(o/32),x=h[y];x&=~((1<<(o&31))-1);const E=h.length;for(;x===0;){if(++y===E)return c;x=h[y]}const d=y*32+K.numberOfTrailingZeros(x);return d>c?c:d}getNextUnset(o){const c=this.size;if(o>=c)return c;const h=this.bits;let y=Math.floor(o/32),x=~h[y];x&=~((1<<(o&31))-1);const E=h.length;for(;x===0;){if(++y===E)return c;x=~h[y]}const d=y*32+K.numberOfTrailingZeros(x);return d>c?c:d}setBulk(o,c){this.bits[Math.floor(o/32)]=c}setRange(o,c){if(c<o||o<0||c>this.size)throw new _;if(c===o)return;c--;const h=Math.floor(o/32),y=Math.floor(c/32),x=this.bits;for(let E=h;E<=y;E++){const d=E>h?0:o&31,A=(2<<(E<y?31:c&31))-(1<<d);x[E]|=A}}clear(){const o=this.bits.length,c=this.bits;for(let h=0;h<o;h++)c[h]=0}isRange(o,c,h){if(c<o||o<0||c>this.size)throw new _;if(c===o)return!0;c--;const y=Math.floor(o/32),x=Math.floor(c/32),E=this.bits;for(let d=y;d<=x;d++){const v=d>y?0:o&31,I=(2<<(d<x?31:c&31))-(1<<v)&4294967295;if((E[d]&I)!==(h?I:0))return!1}return!0}appendBit(o){this.ensureCapacity(this.size+1),o&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(o,c){if(c<0||c>32)throw new _("Num bits must be between 0 and 32");this.ensureCapacity(this.size+c);for(let h=c;h>0;h--)this.appendBit((o>>h-1&1)===1)}appendBitArray(o){const c=o.size;this.ensureCapacity(this.size+c);for(let h=0;h<c;h++)this.appendBit(o.get(h))}xor(o){if(this.size!==o.size)throw new _("Sizes don't match");const c=this.bits;for(let h=0,y=c.length;h<y;h++)c[h]^=o.bits[h]}toBytes(o,c,h,y){for(let x=0;x<y;x++){let E=0;for(let d=0;d<8;d++)this.get(o)&&(E|=1<<7-d),o++;c[h+x]=E}}getBitArray(){return this.bits}reverse(){const o=new Int32Array(this.bits.length),c=Math.floor((this.size-1)/32),h=c+1,y=this.bits;for(let x=0;x<h;x++){let E=y[x];E=E>>1&1431655765|(E&1431655765)<<1,E=E>>2&858993459|(E&858993459)<<2,E=E>>4&252645135|(E&252645135)<<4,E=E>>8&16711935|(E&16711935)<<8,E=E>>16&65535|(E&65535)<<16,o[c-x]=E}if(this.size!==h*32){const x=h*32-this.size;let E=o[0]>>>x;for(let d=1;d<h;d++){const v=o[d];E|=v<<32-x,o[d-1]=E,E=v>>>x}o[h-1]=E}this.bits=o}static makeArray(o){return new Int32Array(Math.floor((o+31)/32))}equals(o){if(!(o instanceof ee))return!1;const c=o;return this.size===c.size&&$.equals(this.bits,c.bits)}hashCode(){return 31*this.size+$.hashCode(this.bits)}toString(){let o="";for(let c=0,h=this.size;c<h;c++)(c&7)===0&&(o+=" "),o+=this.get(c)?"X":".";return o}clone(){return new ee(this.size,this.bits.slice())}}var ue;(function(Y){Y[Y.OTHER=0]="OTHER",Y[Y.PURE_BARCODE=1]="PURE_BARCODE",Y[Y.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",Y[Y.TRY_HARDER=3]="TRY_HARDER",Y[Y.CHARACTER_SET=4]="CHARACTER_SET",Y[Y.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",Y[Y.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",Y[Y.ASSUME_GS1=7]="ASSUME_GS1",Y[Y.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",Y[Y.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",Y[Y.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ue||(ue={}));var Z=ue;class V extends p{static getFormatInstance(){return new V}}V.kind="FormatException";var W;(function(Y){Y[Y.Cp437=0]="Cp437",Y[Y.ISO8859_1=1]="ISO8859_1",Y[Y.ISO8859_2=2]="ISO8859_2",Y[Y.ISO8859_3=3]="ISO8859_3",Y[Y.ISO8859_4=4]="ISO8859_4",Y[Y.ISO8859_5=5]="ISO8859_5",Y[Y.ISO8859_6=6]="ISO8859_6",Y[Y.ISO8859_7=7]="ISO8859_7",Y[Y.ISO8859_8=8]="ISO8859_8",Y[Y.ISO8859_9=9]="ISO8859_9",Y[Y.ISO8859_10=10]="ISO8859_10",Y[Y.ISO8859_11=11]="ISO8859_11",Y[Y.ISO8859_13=12]="ISO8859_13",Y[Y.ISO8859_14=13]="ISO8859_14",Y[Y.ISO8859_15=14]="ISO8859_15",Y[Y.ISO8859_16=15]="ISO8859_16",Y[Y.SJIS=16]="SJIS",Y[Y.Cp1250=17]="Cp1250",Y[Y.Cp1251=18]="Cp1251",Y[Y.Cp1252=19]="Cp1252",Y[Y.Cp1256=20]="Cp1256",Y[Y.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",Y[Y.UTF8=22]="UTF8",Y[Y.ASCII=23]="ASCII",Y[Y.Big5=24]="Big5",Y[Y.GB18030=25]="GB18030",Y[Y.EUC_KR=26]="EUC_KR"})(W||(W={}));class U{constructor(o,c,h,...y){this.valueIdentifier=o,this.name=h,typeof c=="number"?this.values=Int32Array.from([c]):this.values=c,this.otherEncodingNames=y,U.VALUE_IDENTIFIER_TO_ECI.set(o,this),U.NAME_TO_ECI.set(h,this);const x=this.values;for(let E=0,d=x.length;E!==d;E++){const v=x[E];U.VALUES_TO_ECI.set(v,this)}for(const E of y)U.NAME_TO_ECI.set(E,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(o){if(o<0||o>=900)throw new V("incorect value");const c=U.VALUES_TO_ECI.get(o);if(c===void 0)throw new V("incorect value");return c}static getCharacterSetECIByName(o){const c=U.NAME_TO_ECI.get(o);if(c===void 0)throw new V("incorect value");return c}equals(o){if(!(o instanceof U))return!1;const c=o;return this.getName()===c.getName()}}U.VALUE_IDENTIFIER_TO_ECI=new Map,U.VALUES_TO_ECI=new Map,U.NAME_TO_ECI=new Map,U.Cp437=new U(W.Cp437,Int32Array.from([0,2]),"Cp437"),U.ISO8859_1=new U(W.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),U.ISO8859_2=new U(W.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),U.ISO8859_3=new U(W.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),U.ISO8859_4=new U(W.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),U.ISO8859_5=new U(W.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),U.ISO8859_6=new U(W.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),U.ISO8859_7=new U(W.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),U.ISO8859_8=new U(W.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),U.ISO8859_9=new U(W.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),U.ISO8859_10=new U(W.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),U.ISO8859_11=new U(W.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),U.ISO8859_13=new U(W.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),U.ISO8859_14=new U(W.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),U.ISO8859_15=new U(W.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),U.ISO8859_16=new U(W.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),U.SJIS=new U(W.SJIS,20,"SJIS","Shift_JIS"),U.Cp1250=new U(W.Cp1250,21,"Cp1250","windows-1250"),U.Cp1251=new U(W.Cp1251,22,"Cp1251","windows-1251"),U.Cp1252=new U(W.Cp1252,23,"Cp1252","windows-1252"),U.Cp1256=new U(W.Cp1256,24,"Cp1256","windows-1256"),U.UnicodeBigUnmarked=new U(W.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),U.UTF8=new U(W.UTF8,26,"UTF8","UTF-8"),U.ASCII=new U(W.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),U.Big5=new U(W.Big5,28,"Big5"),U.GB18030=new U(W.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),U.EUC_KR=new U(W.EUC_KR,30,"EUC_KR","EUC-KR");class ae extends p{}ae.kind="UnsupportedOperationException";class ie{static decode(o,c){const h=this.encodingName(c);return this.customDecoder?this.customDecoder(o,h):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(h)?this.decodeFallback(o,h):new TextDecoder(h).decode(o)}static shouldDecodeOnFallback(o){return!ie.isBrowser()&&o==="ISO-8859-1"}static encode(o,c){const h=this.encodingName(c);return this.customEncoder?this.customEncoder(o,h):typeof TextEncoder>"u"?this.encodeFallback(o):new TextEncoder().encode(o)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(o){return typeof o=="string"?o:o.getName()}static encodingCharacterSet(o){return o instanceof U?o:U.getCharacterSetECIByName(o)}static decodeFallback(o,c){const h=this.encodingCharacterSet(c);if(ie.isDecodeFallbackSupported(h)){let y="";for(let x=0,E=o.length;x<E;x++){let d=o[x].toString(16);d.length<2&&(d="0"+d),y+="%"+d}return decodeURIComponent(y)}if(h.equals(U.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(o.buffer));throw new ae(`Encoding ${this.encodingName(c)} not supported by fallback.`)}static isDecodeFallbackSupported(o){return o.equals(U.UTF8)||o.equals(U.ISO8859_1)||o.equals(U.ASCII)}static encodeFallback(o){const h=btoa(unescape(encodeURIComponent(o))).split(""),y=[];for(let x=0;x<h.length;x++)y.push(h[x].charCodeAt(0));return new Uint8Array(y)}}class X{static castAsNonUtf8Char(o,c=null){const h=c?c.getName():this.ISO88591;return ie.decode(new Uint8Array([o]),h)}static guessEncoding(o,c){if(c!=null&&c.get(Z.CHARACTER_SET)!==void 0)return c.get(Z.CHARACTER_SET).toString();const h=o.length;let y=!0,x=!0,E=!0,d=0,v=0,A=0,I=0,P=0,k=0,F=0,G=0,Q=0,re=0,ne=0;const oe=o.length>3&&o[0]===239&&o[1]===187&&o[2]===191;for(let fe=0;fe<h&&(y||x||E);fe++){const le=o[fe]&255;E&&(d>0?(le&128)===0?E=!1:d--:(le&128)!==0&&((le&64)===0?E=!1:(d++,(le&32)===0?v++:(d++,(le&16)===0?A++:(d++,(le&8)===0?I++:E=!1))))),y&&(le>127&&le<160?y=!1:le>159&&(le<192||le===215||le===247)&&ne++),x&&(P>0?le<64||le===127||le>252?x=!1:P--:le===128||le===160||le>239?x=!1:le>160&&le<224?(k++,G=0,F++,F>Q&&(Q=F)):le>127?(P++,F=0,G++,G>re&&(re=G)):(F=0,G=0))}return E&&d>0&&(E=!1),x&&P>0&&(x=!1),E&&(oe||v+A+I>0)?X.UTF8:x&&(X.ASSUME_SHIFT_JIS||Q>=3||re>=3)?X.SHIFT_JIS:y&&x?Q===2&&k===2||ne*10>=h?X.SHIFT_JIS:X.ISO88591:y?X.ISO88591:x?X.SHIFT_JIS:E?X.UTF8:X.PLATFORM_DEFAULT_ENCODING}static format(o,...c){let h=-1;function y(E,d,v,A,I,P){if(E==="%%")return"%";if(c[++h]===void 0)return;E=A?parseInt(A.substr(1)):void 0;let k=I?parseInt(I.substr(1)):void 0,F;switch(P){case"s":F=c[h];break;case"c":F=c[h][0];break;case"f":F=parseFloat(c[h]).toFixed(E);break;case"p":F=parseFloat(c[h]).toPrecision(E);break;case"e":F=parseFloat(c[h]).toExponential(E);break;case"x":F=parseInt(c[h]).toString(k||16);break;case"d":F=parseFloat(parseInt(c[h],k||10).toPrecision(E)).toFixed(0);break}F=typeof F=="object"?JSON.stringify(F):(+F).toString(k);let G=parseInt(v),Q=v&&v[0]+""=="0"?"0":" ";for(;F.length<G;)F=d!==void 0?F+Q:Q+F;return F}let x=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(x,y)}static getBytes(o,c){return ie.encode(o,c)}static getCharCode(o,c=0){return o.charCodeAt(c)}static getCharAt(o){return String.fromCharCode(o)}}X.SHIFT_JIS=U.SJIS.getName(),X.GB2312="GB2312",X.ISO88591=U.ISO8859_1.getName(),X.EUC_JP="EUC_JP",X.UTF8=U.UTF8.getName(),X.PLATFORM_DEFAULT_ENCODING=X.UTF8,X.ASSUME_SHIFT_JIS=!1;class J{constructor(o=""){this.value=o}enableDecoding(o){return this.encoding=o,this}append(o){return typeof o=="string"?this.value+=o.toString():this.encoding?this.value+=X.castAsNonUtf8Char(o,this.encoding):this.value+=String.fromCharCode(o),this}appendChars(o,c,h){for(let y=c;c<c+h;y++)this.append(o[y]);return this}length(){return this.value.length}charAt(o){return this.value.charAt(o)}deleteCharAt(o){this.value=this.value.substr(0,o)+this.value.substring(o+1)}setCharAt(o,c){this.value=this.value.substr(0,o)+c+this.value.substr(o+1)}substring(o,c){return this.value.substring(o,c)}setLengthToZero(){this.value=""}toString(){return this.value}insert(o,c){this.value=this.value.substr(0,o)+c+this.value.substr(o+c.length)}}class xe{constructor(o,c,h,y){if(this.width=o,this.height=c,this.rowSize=h,this.bits=y,c==null&&(c=o),this.height=c,o<1||c<1)throw new _("Both dimensions must be greater than 0");h==null&&(h=Math.floor((o+31)/32)),this.rowSize=h,y==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(o){const c=o.length,h=o[0].length,y=new xe(h,c);for(let x=0;x<c;x++){const E=o[x];for(let d=0;d<h;d++)E[d]&&y.set(d,x)}return y}static parseFromString(o,c,h){if(o===null)throw new _("stringRepresentation cannot be null");const y=new Array(o.length);let x=0,E=0,d=-1,v=0,A=0;for(;A<o.length;)if(o.charAt(A)===`
`||o.charAt(A)==="\r"){if(x>E){if(d===-1)d=x-E;else if(x-E!==d)throw new _("row lengths do not match");E=x,v++}A++}else if(o.substring(A,A+c.length)===c)A+=c.length,y[x]=!0,x++;else if(o.substring(A,A+h.length)===h)A+=h.length,y[x]=!1,x++;else throw new _("illegal character encountered: "+o.substring(A));if(x>E){if(d===-1)d=x-E;else if(x-E!==d)throw new _("row lengths do not match");v++}const I=new xe(d,v);for(let P=0;P<x;P++)y[P]&&I.set(Math.floor(P%d),Math.floor(P/d));return I}get(o,c){const h=c*this.rowSize+Math.floor(o/32);return(this.bits[h]>>>(o&31)&1)!==0}set(o,c){const h=c*this.rowSize+Math.floor(o/32);this.bits[h]|=1<<(o&31)&4294967295}unset(o,c){const h=c*this.rowSize+Math.floor(o/32);this.bits[h]&=~(1<<(o&31)&4294967295)}flip(o,c){const h=c*this.rowSize+Math.floor(o/32);this.bits[h]^=1<<(o&31)&4294967295}xor(o){if(this.width!==o.getWidth()||this.height!==o.getHeight()||this.rowSize!==o.getRowSize())throw new _("input matrix dimensions do not match");const c=new ee(Math.floor(this.width/32)+1),h=this.rowSize,y=this.bits;for(let x=0,E=this.height;x<E;x++){const d=x*h,v=o.getRow(x,c).getBitArray();for(let A=0;A<h;A++)y[d+A]^=v[A]}}clear(){const o=this.bits,c=o.length;for(let h=0;h<c;h++)o[h]=0}setRegion(o,c,h,y){if(c<0||o<0)throw new _("Left and top must be nonnegative");if(y<1||h<1)throw new _("Height and width must be at least 1");const x=o+h,E=c+y;if(E>this.height||x>this.width)throw new _("The region must fit inside the matrix");const d=this.rowSize,v=this.bits;for(let A=c;A<E;A++){const I=A*d;for(let P=o;P<x;P++)v[I+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(o,c){c==null||c.getSize()<this.width?c=new ee(this.width):c.clear();const h=this.rowSize,y=this.bits,x=o*h;for(let E=0;E<h;E++)c.setBulk(E*32,y[x+E]);return c}setRow(o,c){M.arraycopy(c.getBitArray(),0,this.bits,o*this.rowSize,this.rowSize)}rotate180(){const o=this.getWidth(),c=this.getHeight();let h=new ee(o),y=new ee(o);for(let x=0,E=Math.floor((c+1)/2);x<E;x++)h=this.getRow(x,h),y=this.getRow(c-1-x,y),h.reverse(),y.reverse(),this.setRow(x,y),this.setRow(c-1-x,h)}getEnclosingRectangle(){const o=this.width,c=this.height,h=this.rowSize,y=this.bits;let x=o,E=c,d=-1,v=-1;for(let A=0;A<c;A++)for(let I=0;I<h;I++){const P=y[A*h+I];if(P!==0){if(A<E&&(E=A),A>v&&(v=A),I*32<x){let k=0;for(;(P<<31-k&4294967295)===0;)k++;I*32+k<x&&(x=I*32+k)}if(I*32+31>d){let k=31;for(;!(P>>>k);)k--;I*32+k>d&&(d=I*32+k)}}}return d<x||v<E?null:Int32Array.from([x,E,d-x+1,v-E+1])}getTopLeftOnBit(){const o=this.rowSize,c=this.bits;let h=0;for(;h<c.length&&c[h]===0;)h++;if(h===c.length)return null;const y=h/o;let x=h%o*32;const E=c[h];let d=0;for(;(E<<31-d&4294967295)===0;)d++;return x+=d,Int32Array.from([x,y])}getBottomRightOnBit(){const o=this.rowSize,c=this.bits;let h=c.length-1;for(;h>=0&&c[h]===0;)h--;if(h<0)return null;const y=Math.floor(h/o);let x=Math.floor(h%o)*32;const E=c[h];let d=31;for(;!(E>>>d);)d--;return x+=d,Int32Array.from([x,y])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(o){if(!(o instanceof xe))return!1;const c=o;return this.width===c.width&&this.height===c.height&&this.rowSize===c.rowSize&&$.equals(this.bits,c.bits)}hashCode(){let o=this.width;return o=31*o+this.width,o=31*o+this.height,o=31*o+this.rowSize,o=31*o+$.hashCode(this.bits),o}toString(o="X ",c="  ",h=`
`){return this.buildToString(o,c,h)}buildToString(o,c,h){let y=new J;for(let x=0,E=this.height;x<E;x++){for(let d=0,v=this.width;d<v;d++)y.append(this.get(d,x)?o:c);y.append(h)}return y.toString()}clone(){return new xe(this.width,this.height,this.rowSize,this.bits.slice())}}class de extends p{static getNotFoundInstance(){return new de}}de.kind="NotFoundException";class ye extends j{constructor(o){super(o),this.luminances=ye.EMPTY,this.buckets=new Int32Array(ye.LUMINANCE_BUCKETS)}getBlackRow(o,c){const h=this.getLuminanceSource(),y=h.getWidth();c==null||c.getSize()<y?c=new ee(y):c.clear(),this.initArrays(y);const x=h.getRow(o,this.luminances),E=this.buckets;for(let v=0;v<y;v++)E[(x[v]&255)>>ye.LUMINANCE_SHIFT]++;const d=ye.estimateBlackPoint(E);if(y<3)for(let v=0;v<y;v++)(x[v]&255)<d&&c.set(v);else{let v=x[0]&255,A=x[1]&255;for(let I=1;I<y-1;I++){const P=x[I+1]&255;(A*4-v-P)/2<d&&c.set(I),v=A,A=P}}return c}getBlackMatrix(){const o=this.getLuminanceSource(),c=o.getWidth(),h=o.getHeight(),y=new xe(c,h);this.initArrays(c);const x=this.buckets;for(let v=1;v<5;v++){const A=Math.floor(h*v/5),I=o.getRow(A,this.luminances),P=Math.floor(c*4/5);for(let k=Math.floor(c/5);k<P;k++){const F=I[k]&255;x[F>>ye.LUMINANCE_SHIFT]++}}const E=ye.estimateBlackPoint(x),d=o.getMatrix();for(let v=0;v<h;v++){const A=v*c;for(let I=0;I<c;I++)(d[A+I]&255)<E&&y.set(I,v)}return y}createBinarizer(o){return new ye(o)}initArrays(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));const c=this.buckets;for(let h=0;h<ye.LUMINANCE_BUCKETS;h++)c[h]=0}static estimateBlackPoint(o){const c=o.length;let h=0,y=0,x=0;for(let I=0;I<c;I++)o[I]>x&&(y=I,x=o[I]),o[I]>h&&(h=o[I]);let E=0,d=0;for(let I=0;I<c;I++){const P=I-y,k=o[I]*P*P;k>d&&(E=I,d=k)}if(y>E){const I=y;y=E,E=I}if(E-y<=c/16)throw new de;let v=E-1,A=-1;for(let I=E-1;I>y;I--){const P=I-y,k=P*P*(E-I)*(h-o[I]);k>A&&(v=I,A=k)}return v<<ye.LUMINANCE_SHIFT}}ye.LUMINANCE_BITS=5,ye.LUMINANCE_SHIFT=8-ye.LUMINANCE_BITS,ye.LUMINANCE_BUCKETS=1<<ye.LUMINANCE_BITS,ye.EMPTY=Uint8ClampedArray.from([0]);class _e extends ye{constructor(o){super(o),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const o=this.getLuminanceSource(),c=o.getWidth(),h=o.getHeight();if(c>=_e.MINIMUM_DIMENSION&&h>=_e.MINIMUM_DIMENSION){const y=o.getMatrix();let x=c>>_e.BLOCK_SIZE_POWER;(c&_e.BLOCK_SIZE_MASK)!==0&&x++;let E=h>>_e.BLOCK_SIZE_POWER;(h&_e.BLOCK_SIZE_MASK)!==0&&E++;const d=_e.calculateBlackPoints(y,x,E,c,h),v=new xe(c,h);_e.calculateThresholdForBlock(y,x,E,c,h,d,v),this.matrix=v}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(o){return new _e(o)}static calculateThresholdForBlock(o,c,h,y,x,E,d){const v=x-_e.BLOCK_SIZE,A=y-_e.BLOCK_SIZE;for(let I=0;I<h;I++){let P=I<<_e.BLOCK_SIZE_POWER;P>v&&(P=v);const k=_e.cap(I,2,h-3);for(let F=0;F<c;F++){let G=F<<_e.BLOCK_SIZE_POWER;G>A&&(G=A);const Q=_e.cap(F,2,c-3);let re=0;for(let oe=-2;oe<=2;oe++){const fe=E[k+oe];re+=fe[Q-2]+fe[Q-1]+fe[Q]+fe[Q+1]+fe[Q+2]}const ne=re/25;_e.thresholdBlock(o,G,P,ne,y,d)}}}static cap(o,c,h){return o<c?c:o>h?h:o}static thresholdBlock(o,c,h,y,x,E){for(let d=0,v=h*x+c;d<_e.BLOCK_SIZE;d++,v+=x)for(let A=0;A<_e.BLOCK_SIZE;A++)(o[v+A]&255)<=y&&E.set(c+A,h+d)}static calculateBlackPoints(o,c,h,y,x){const E=x-_e.BLOCK_SIZE,d=y-_e.BLOCK_SIZE,v=new Array(h);for(let A=0;A<h;A++){v[A]=new Int32Array(c);let I=A<<_e.BLOCK_SIZE_POWER;I>E&&(I=E);for(let P=0;P<c;P++){let k=P<<_e.BLOCK_SIZE_POWER;k>d&&(k=d);let F=0,G=255,Q=0;for(let ne=0,oe=I*y+k;ne<_e.BLOCK_SIZE;ne++,oe+=y){for(let fe=0;fe<_e.BLOCK_SIZE;fe++){const le=o[oe+fe]&255;F+=le,le<G&&(G=le),le>Q&&(Q=le)}if(Q-G>_e.MIN_DYNAMIC_RANGE)for(ne++,oe+=y;ne<_e.BLOCK_SIZE;ne++,oe+=y)for(let fe=0;fe<_e.BLOCK_SIZE;fe++)F+=o[oe+fe]&255}let re=F>>_e.BLOCK_SIZE_POWER*2;if(Q-G<=_e.MIN_DYNAMIC_RANGE&&(re=G/2,A>0&&P>0)){const ne=(v[A-1][P]+2*v[A][P-1]+v[A-1][P-1])/4;G<ne&&(re=ne)}v[A][P]=re}}return v}}_e.BLOCK_SIZE_POWER=3,_e.BLOCK_SIZE=1<<_e.BLOCK_SIZE_POWER,_e.BLOCK_SIZE_MASK=_e.BLOCK_SIZE-1,_e.MINIMUM_DIMENSION=_e.BLOCK_SIZE*5,_e.MIN_DYNAMIC_RANGE=24;class qe{constructor(o,c){this.width=o,this.height=c}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(o,c,h,y){throw new ae("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ae("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ae("This luminance source does not support rotation by 45 degrees.")}toString(){const o=new Uint8ClampedArray(this.width);let c=new J;for(let h=0;h<this.height;h++){const y=this.getRow(h,o);for(let x=0;x<this.width;x++){const E=y[x]&255;let d;E<64?d="#":E<128?d="+":E<192?d=".":d=" ",c.append(d)}c.append(`
`)}return c.toString()}}class ze extends qe{constructor(o){super(o.getWidth(),o.getHeight()),this.delegate=o}getRow(o,c){const h=this.delegate.getRow(o,c),y=this.getWidth();for(let x=0;x<y;x++)h[x]=255-(h[x]&255);return h}getMatrix(){const o=this.delegate.getMatrix(),c=this.getWidth()*this.getHeight(),h=new Uint8ClampedArray(c);for(let y=0;y<c;y++)h[y]=255-(o[y]&255);return h}isCropSupported(){return this.delegate.isCropSupported()}crop(o,c,h,y){return new ze(this.delegate.crop(o,c,h,y))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ze(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ze(this.delegate.rotateCounterClockwise45())}}class et extends qe{constructor(o){super(o.width,o.height),this.canvas=o,this.tempCanvasElement=null,this.buffer=et.makeBufferFromCanvasImageData(o)}static makeBufferFromCanvasImageData(o){const c=o.getContext("2d").getImageData(0,0,o.width,o.height);return et.toGrayscaleBuffer(c.data,o.width,o.height)}static toGrayscaleBuffer(o,c,h){const y=new Uint8ClampedArray(c*h);for(let x=0,E=0,d=o.length;x<d;x+=4,E++){let v;if(o[x+3]===0)v=255;else{const I=o[x],P=o[x+1],k=o[x+2];v=306*I+601*P+117*k+512>>10}y[E]=v}return y}getRow(o,c){if(o<0||o>=this.getHeight())throw new _("Requested row is outside the image: "+o);const h=this.getWidth(),y=o*h;return c===null?c=this.buffer.slice(y,y+h):(c.length<h&&(c=new Uint8ClampedArray(h)),c.set(this.buffer.slice(y,y+h))),c}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(o,c,h,y){return super.crop(o,c,h,y),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement}rotate(o){const c=this.getTempCanvasElement(),h=c.getContext("2d"),y=o*et.DEGREE_TO_RADIANS,x=this.canvas.width,E=this.canvas.height,d=Math.ceil(Math.abs(Math.cos(y))*x+Math.abs(Math.sin(y))*E),v=Math.ceil(Math.abs(Math.sin(y))*x+Math.abs(Math.cos(y))*E);return c.width=d,c.height=v,h.translate(d/2,v/2),h.rotate(y),h.drawImage(this.canvas,x/-2,E/-2),this.buffer=et.makeBufferFromCanvasImageData(c),this}invert(){return new ze(this)}}et.DEGREE_TO_RADIANS=Math.PI/180;class me{constructor(o,c,h){this.deviceId=o,this.label=c,this.kind="videoinput",this.groupId=h||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Se=(globalThis||Vg||self||window||void 0)&&(globalThis||Vg||self||window||void 0).__awaiter||function(Y,o,c,h){function y(x){return x instanceof c?x:new c(function(E){E(x)})}return new(c||(c=Promise))(function(x,E){function d(I){try{A(h.next(I))}catch(P){E(P)}}function v(I){try{A(h.throw(I))}catch(P){E(P)}}function A(I){I.done?x(I.value):y(I.value).then(d,v)}A((h=h.apply(Y,o||[])).next())})};class Xe{constructor(o,c=500,h){this.reader=o,this.timeBetweenScansMillis=c,this._hints=h,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(o){this._timeBetweenDecodingAttempts=o<0?0:o}set hints(o){this._hints=o||null}get hints(){return this._hints}listVideoInputDevices(){return Se(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const o=yield navigator.mediaDevices.enumerateDevices(),c=[];for(const h of o){const y=h.kind==="video"?"videoinput":h.kind;if(y!=="videoinput")continue;const x=h.deviceId||h.id,E=h.label||`Video device ${c.length+1}`,d=h.groupId,v={deviceId:x,label:E,kind:y,groupId:d};c.push(v)}return c})}getVideoInputDevices(){return Se(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(c=>new me(c.deviceId,c.label))})}findDeviceById(o){return Se(this,void 0,void 0,function*(){const c=yield this.listVideoInputDevices();return c?c.find(h=>h.deviceId===o):null})}decodeFromInputVideoDevice(o,c){return Se(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(o,c)})}decodeOnceFromVideoDevice(o,c){return Se(this,void 0,void 0,function*(){this.reset();let h;o?h={deviceId:{exact:o}}:h={facingMode:"environment"};const y={video:h};return yield this.decodeOnceFromConstraints(y,c)})}decodeOnceFromConstraints(o,c){return Se(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeOnceFromStream(h,c)})}decodeOnceFromStream(o,c){return Se(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(o,c);return yield this.decodeOnce(h)})}decodeFromInputVideoDeviceContinuously(o,c,h){return Se(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(o,c,h)})}decodeFromVideoDevice(o,c,h){return Se(this,void 0,void 0,function*(){let y;o?y={deviceId:{exact:o}}:y={facingMode:"environment"};const x={video:y};return yield this.decodeFromConstraints(x,c,h)})}decodeFromConstraints(o,c,h){return Se(this,void 0,void 0,function*(){const y=yield navigator.mediaDevices.getUserMedia(o);return yield this.decodeFromStream(y,c,h)})}decodeFromStream(o,c,h){return Se(this,void 0,void 0,function*(){this.reset();const y=yield this.attachStreamToVideo(o,c);return yield this.decodeContinuously(y,h)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(o,c){return Se(this,void 0,void 0,function*(){const h=this.prepareVideoElement(c);return this.addVideoSource(h,o),this.videoElement=h,this.stream=o,yield this.playVideoOnLoadAsync(h),h})}playVideoOnLoadAsync(o){return new Promise((c,h)=>this.playVideoOnLoad(o,()=>c()))}playVideoOnLoad(o,c){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(o),o.addEventListener("ended",this.videoEndedListener),o.addEventListener("canplay",this.videoCanPlayListener),o.addEventListener("playing",c),this.tryPlayVideo(o)}isVideoPlaying(o){return o.currentTime>0&&!o.paused&&!o.ended&&o.readyState>2}tryPlayVideo(o){return Se(this,void 0,void 0,function*(){if(this.isVideoPlaying(o)){console.warn("Trying to play video that is already playing.");return}try{yield o.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(o,c){const h=document.getElementById(o);if(!h)throw new b(`element with id '${o}' not found`);if(h.nodeName.toLowerCase()!==c.toLowerCase())throw new b(`element with id '${o}' must be an ${c} element`);return h}decodeFromImage(o,c){if(!o&&!c)throw new b("either imageElement with a src set or an url must be provided");return c&&!o?this.decodeFromImageUrl(c):this.decodeFromImageElement(o)}decodeFromVideo(o,c){if(!o&&!c)throw new b("Either an element with a src set or an URL must be provided");return c&&!o?this.decodeFromVideoUrl(c):this.decodeFromVideoElement(o)}decodeFromVideoContinuously(o,c,h){if(o===void 0&&c===void 0)throw new b("Either an element with a src set or an URL must be provided");return c&&!o?this.decodeFromVideoUrlContinuously(c,h):this.decodeFromVideoElementContinuously(o,h)}decodeFromImageElement(o){if(!o)throw new b("An image element must be provided.");this.reset();const c=this.prepareImageElement(o);this.imageElement=c;let h;return this.isImageLoaded(c)?h=this.decodeOnce(c,!1,!0):h=this._decodeOnLoadImage(c),h}decodeFromVideoElement(o){const c=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideo(c)}decodeFromVideoElementContinuously(o,c){const h=this._decodeFromVideoElementSetup(o);return this._decodeOnLoadVideoContinuously(h,c)}_decodeFromVideoElementSetup(o){if(!o)throw new b("A video element must be provided.");this.reset();const c=this.prepareVideoElement(o);return this.videoElement=c,c}decodeFromImageUrl(o){if(!o)throw new b("An URL must be provided.");this.reset();const c=this.prepareImageElement();this.imageElement=c;const h=this._decodeOnLoadImage(c);return c.src=o,h}decodeFromVideoUrl(o){if(!o)throw new b("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),h=this.decodeFromVideoElement(c);return c.src=o,h}decodeFromVideoUrlContinuously(o,c){if(!o)throw new b("An URL must be provided.");this.reset();const h=this.prepareVideoElement(),y=this.decodeFromVideoElementContinuously(h,c);return h.src=o,y}_decodeOnLoadImage(o){return new Promise((c,h)=>{this.imageLoadedListener=()=>this.decodeOnce(o,!1,!0).then(c,h),o.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(o){return Se(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(o),yield this.decodeOnce(o)})}_decodeOnLoadVideoContinuously(o,c){return Se(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(o),this.decodeContinuously(o,c)})}isImageLoaded(o){return!(!o.complete||o.naturalWidth===0)}prepareImageElement(o){let c;return typeof o>"u"&&(c=document.createElement("img"),c.width=200,c.height=200),typeof o=="string"&&(c=this.getMediaElement(o,"img")),o instanceof HTMLImageElement&&(c=o),c}prepareVideoElement(o){let c;return!o&&typeof document<"u"&&(c=document.createElement("video"),c.width=200,c.height=200),typeof o=="string"&&(c=this.getMediaElement(o,"video")),o instanceof HTMLVideoElement&&(c=o),c.setAttribute("autoplay","true"),c.setAttribute("muted","true"),c.setAttribute("playsinline","true"),c}decodeOnce(o,c=!0,h=!0){this._stopAsyncDecode=!1;const y=(x,E)=>{if(this._stopAsyncDecode){E(new de("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const d=this.decode(o);x(d)}catch(d){const v=c&&d instanceof de,I=(d instanceof N||d instanceof V)&&h;if(v||I)return setTimeout(y,this._timeBetweenDecodingAttempts,x,E);E(d)}};return new Promise((x,E)=>y(x,E))}decodeContinuously(o,c){this._stopContinuousDecode=!1;const h=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const y=this.decode(o);c(y,null),setTimeout(h,this.timeBetweenScansMillis)}catch(y){c(null,y);const x=y instanceof N||y instanceof V,E=y instanceof de;(x||E)&&setTimeout(h,this._timeBetweenDecodingAttempts)}};h()}decode(o){const c=this.createBinaryBitmap(o);return this.decodeBitmap(c)}_isHTMLVideoElement(o){return o.videoWidth!==0}drawFrameOnCanvas(o,c,h){c||(c={sx:0,sy:0,sWidth:o.videoWidth,sHeight:o.videoHeight,dx:0,dy:0,dWidth:o.videoWidth,dHeight:o.videoHeight}),h||(h=this.captureCanvasContext),h.drawImage(o,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}drawImageOnCanvas(o,c,h=this.captureCanvasContext){c||(c={sx:0,sy:0,sWidth:o.naturalWidth,sHeight:o.naturalHeight,dx:0,dy:0,dWidth:o.naturalWidth,dHeight:o.naturalHeight}),h||(h=this.captureCanvasContext),h.drawImage(o,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}createBinaryBitmap(o){this.getCaptureCanvasContext(o),this._isHTMLVideoElement(o)?this.drawFrameOnCanvas(o):this.drawImageOnCanvas(o);const c=this.getCaptureCanvas(o),h=new et(c),y=new _e(h);return new T(y)}getCaptureCanvasContext(o){if(!this.captureCanvasContext){const h=this.getCaptureCanvas(o).getContext("2d");this.captureCanvasContext=h}return this.captureCanvasContext}getCaptureCanvas(o){if(!this.captureCanvas){const c=this.createCaptureCanvas(o);this.captureCanvas=c}return this.captureCanvas}decodeBitmap(o){return this.reader.decode(o,this._hints)}createCaptureCanvas(o){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const c=document.createElement("canvas");let h,y;return typeof o<"u"&&(o instanceof HTMLVideoElement?(h=o.videoWidth,y=o.videoHeight):o instanceof HTMLImageElement&&(h=o.naturalWidth||o.width,y=o.naturalHeight||o.height)),c.style.width=h+"px",c.style.height=y+"px",c.width=h,c.height=y,c}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(o=>o.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(o,c){try{o.srcObject=c}catch{o.src=URL.createObjectURL(c)}}cleanVideoSource(o){try{o.srcObject=null}catch{o.src=""}this.videoElement.removeAttribute("src")}}class Ve{constructor(o,c,h=c==null?0:8*c.length,y,x,E=M.currentTimeMillis()){this.text=o,this.rawBytes=c,this.numBits=h,this.resultPoints=y,this.format=x,this.timestamp=E,this.text=o,this.rawBytes=c,h==null?this.numBits=c==null?0:8*c.length:this.numBits=h,this.resultPoints=y,this.format=x,this.resultMetadata=null,E==null?this.timestamp=M.currentTimeMillis():this.timestamp=E}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(o,c){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(o,c)}putAllMetadata(o){o!==null&&(this.resultMetadata===null?this.resultMetadata=o:this.resultMetadata=new Map(o))}addResultPoints(o){const c=this.resultPoints;if(c===null)this.resultPoints=o;else if(o!==null&&o.length>0){const h=new Array(c.length+o.length);M.arraycopy(c,0,h,0,c.length),M.arraycopy(o,0,h,c.length,o.length),this.resultPoints=h}}getTimestamp(){return this.timestamp}toString(){return this.text}}var pt;(function(Y){Y[Y.AZTEC=0]="AZTEC",Y[Y.CODABAR=1]="CODABAR",Y[Y.CODE_39=2]="CODE_39",Y[Y.CODE_93=3]="CODE_93",Y[Y.CODE_128=4]="CODE_128",Y[Y.DATA_MATRIX=5]="DATA_MATRIX",Y[Y.EAN_8=6]="EAN_8",Y[Y.EAN_13=7]="EAN_13",Y[Y.ITF=8]="ITF",Y[Y.MAXICODE=9]="MAXICODE",Y[Y.PDF_417=10]="PDF_417",Y[Y.QR_CODE=11]="QR_CODE",Y[Y.RSS_14=12]="RSS_14",Y[Y.RSS_EXPANDED=13]="RSS_EXPANDED",Y[Y.UPC_A=14]="UPC_A",Y[Y.UPC_E=15]="UPC_E",Y[Y.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(pt||(pt={}));var $e=pt,yt;(function(Y){Y[Y.OTHER=0]="OTHER",Y[Y.ORIENTATION=1]="ORIENTATION",Y[Y.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",Y[Y.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",Y[Y.ISSUE_NUMBER=4]="ISSUE_NUMBER",Y[Y.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",Y[Y.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",Y[Y.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",Y[Y.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",Y[Y.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",Y[Y.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(yt||(yt={}));var ut=yt;class Ne{constructor(o,c,h,y,x=-1,E=-1){this.rawBytes=o,this.text=c,this.byteSegments=h,this.ecLevel=y,this.structuredAppendSequenceNumber=x,this.structuredAppendParity=E,this.numBits=o==null?0:8*o.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(o){this.numBits=o}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(o){this.errorsCorrected=o}getErasures(){return this.erasures}setErasures(o){this.erasures=o}getOther(){return this.other}setOther(o){this.other=o}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ye{exp(o){return this.expTable[o]}log(o){if(o===0)throw new _;return this.logTable[o]}static addOrSubtract(o,c){return o^c}}class _t{constructor(o,c){if(c.length===0)throw new _;this.field=o;const h=c.length;if(h>1&&c[0]===0){let y=1;for(;y<h&&c[y]===0;)y++;y===h?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(h-y),M.arraycopy(c,y,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);const c=this.coefficients;let h;if(o===1){h=0;for(let E=0,d=c.length;E!==d;E++){const v=c[E];h=Ye.addOrSubtract(h,v)}return h}h=c[0];const y=c.length,x=this.field;for(let E=1;E<y;E++)h=Ye.addOrSubtract(x.multiply(o,h),c[E]);return h}addOrSubtract(o){if(!this.field.equals(o.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero())return o;if(o.isZero())return this;let c=this.coefficients,h=o.coefficients;if(c.length>h.length){const E=c;c=h,h=E}let y=new Int32Array(h.length);const x=h.length-c.length;M.arraycopy(h,0,y,0,x);for(let E=x;E<h.length;E++)y[E]=Ye.addOrSubtract(c[E-x],h[E]);return new _t(this.field,y)}multiply(o){if(!this.field.equals(o.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero()||o.isZero())return this.field.getZero();const c=this.coefficients,h=c.length,y=o.coefficients,x=y.length,E=new Int32Array(h+x-1),d=this.field;for(let v=0;v<h;v++){const A=c[v];for(let I=0;I<x;I++)E[v+I]=Ye.addOrSubtract(E[v+I],d.multiply(A,y[I]))}return new _t(d,E)}multiplyScalar(o){if(o===0)return this.field.getZero();if(o===1)return this;const c=this.coefficients.length,h=this.field,y=new Int32Array(c),x=this.coefficients;for(let E=0;E<c;E++)y[E]=h.multiply(x[E],o);return new _t(h,y)}multiplyByMonomial(o,c){if(o<0)throw new _;if(c===0)return this.field.getZero();const h=this.coefficients,y=h.length,x=new Int32Array(y+o),E=this.field;for(let d=0;d<y;d++)x[d]=E.multiply(h[d],c);return new _t(E,x)}divide(o){if(!this.field.equals(o.field))throw new _("GenericGFPolys do not have same GenericGF field");if(o.isZero())throw new _("Divide by 0");const c=this.field;let h=c.getZero(),y=this;const x=o.getCoefficient(o.getDegree()),E=c.inverse(x);for(;y.getDegree()>=o.getDegree()&&!y.isZero();){const d=y.getDegree()-o.getDegree(),v=c.multiply(y.getCoefficient(y.getDegree()),E),A=o.multiplyByMonomial(d,v),I=c.buildMonomial(d,v);h=h.addOrSubtract(I),y=y.addOrSubtract(A)}return[h,y]}toString(){let o="";for(let c=this.getDegree();c>=0;c--){let h=this.getCoefficient(c);if(h!==0){if(h<0?(o+=" - ",h=-h):o.length>0&&(o+=" + "),c===0||h!==1){const y=this.field.log(h);y===0?o+="1":y===1?o+="a":(o+="a^",o+=y)}c!==0&&(c===1?o+="x":(o+="x^",o+=c))}}return o}}class Fe extends p{}Fe.kind="ArithmeticException";class Rt extends Ye{constructor(o,c,h){super(),this.primitive=o,this.size=c,this.generatorBase=h;const y=new Int32Array(c);let x=1;for(let d=0;d<c;d++)y[d]=x,x*=2,x>=c&&(x^=o,x&=c-1);this.expTable=y;const E=new Int32Array(c);for(let d=0;d<c-1;d++)E[y[d]]=d;this.logTable=E,this.zero=new _t(this,Int32Array.from([0])),this.one=new _t(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,c){if(o<0)throw new _;if(c===0)return this.zero;const h=new Int32Array(o+1);return h[0]=c,new _t(this,h)}inverse(o){if(o===0)throw new Fe;return this.expTable[this.size-this.logTable[o]-1]}multiply(o,c){return o===0||c===0?0:this.expTable[(this.logTable[o]+this.logTable[c])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+K.toHexString(this.primitive)+","+this.size+")"}equals(o){return o===this}}Rt.AZTEC_DATA_12=new Rt(4201,4096,1),Rt.AZTEC_DATA_10=new Rt(1033,1024,1),Rt.AZTEC_DATA_6=new Rt(67,64,1),Rt.AZTEC_PARAM=new Rt(19,16,1),Rt.QR_CODE_FIELD_256=new Rt(285,256,0),Rt.DATA_MATRIX_FIELD_256=new Rt(301,256,1),Rt.AZTEC_DATA_8=Rt.DATA_MATRIX_FIELD_256,Rt.MAXICODE_FIELD_64=Rt.AZTEC_DATA_6;class Wt extends p{}Wt.kind="ReedSolomonException";class mn extends p{}mn.kind="IllegalStateException";class Wn{constructor(o){this.field=o}decode(o,c){const h=this.field,y=new _t(h,o),x=new Int32Array(c);let E=!0;for(let F=0;F<c;F++){const G=y.evaluateAt(h.exp(F+h.getGeneratorBase()));x[x.length-1-F]=G,G!==0&&(E=!1)}if(E)return;const d=new _t(h,x),v=this.runEuclideanAlgorithm(h.buildMonomial(c,1),d,c),A=v[0],I=v[1],P=this.findErrorLocations(A),k=this.findErrorMagnitudes(I,P);for(let F=0;F<P.length;F++){const G=o.length-1-h.log(P[F]);if(G<0)throw new Wt("Bad error location");o[G]=Rt.addOrSubtract(o[G],k[F])}}runEuclideanAlgorithm(o,c,h){if(o.getDegree()<c.getDegree()){const F=o;o=c,c=F}const y=this.field;let x=o,E=c,d=y.getZero(),v=y.getOne();for(;E.getDegree()>=(h/2|0);){let F=x,G=d;if(x=E,d=v,x.isZero())throw new Wt("r_{i-1} was zero");E=F;let Q=y.getZero();const re=x.getCoefficient(x.getDegree()),ne=y.inverse(re);for(;E.getDegree()>=x.getDegree()&&!E.isZero();){const oe=E.getDegree()-x.getDegree(),fe=y.multiply(E.getCoefficient(E.getDegree()),ne);Q=Q.addOrSubtract(y.buildMonomial(oe,fe)),E=E.addOrSubtract(x.multiplyByMonomial(oe,fe))}if(v=Q.multiply(d).addOrSubtract(G),E.getDegree()>=x.getDegree())throw new mn("Division algorithm failed to reduce polynomial?")}const A=v.getCoefficient(0);if(A===0)throw new Wt("sigmaTilde(0) was zero");const I=y.inverse(A),P=v.multiplyScalar(I),k=E.multiplyScalar(I);return[P,k]}findErrorLocations(o){const c=o.getDegree();if(c===1)return Int32Array.from([o.getCoefficient(1)]);const h=new Int32Array(c);let y=0;const x=this.field;for(let E=1;E<x.getSize()&&y<c;E++)o.evaluateAt(E)===0&&(h[y]=x.inverse(E),y++);if(y!==c)throw new Wt("Error locator degree does not match number of roots");return h}findErrorMagnitudes(o,c){const h=c.length,y=new Int32Array(h),x=this.field;for(let E=0;E<h;E++){const d=x.inverse(c[E]);let v=1;for(let A=0;A<h;A++)if(E!==A){const I=x.multiply(c[A],d),P=(I&1)===0?I|1:I&-2;v=x.multiply(v,P)}y[E]=x.multiply(o.evaluateAt(d),x.inverse(v)),x.getGeneratorBase()!==0&&(y[E]=x.multiply(y[E],d))}return y}}var st;(function(Y){Y[Y.UPPER=0]="UPPER",Y[Y.LOWER=1]="LOWER",Y[Y.MIXED=2]="MIXED",Y[Y.DIGIT=3]="DIGIT",Y[Y.PUNCT=4]="PUNCT",Y[Y.BINARY=5]="BINARY"})(st||(st={}));class zt{decode(o){this.ddata=o;let c=o.getBits(),h=this.extractBits(c),y=this.correctBits(h),x=zt.convertBoolArrayToByteArray(y),E=zt.getEncodedData(y),d=new Ne(x,E,null,null);return d.setNumBits(y.length),d}static highLevelDecode(o){return this.getEncodedData(o)}static getEncodedData(o){let c=o.length,h=st.UPPER,y=st.UPPER,x="",E=0;for(;E<c;)if(y===st.BINARY){if(c-E<5)break;let d=zt.readCode(o,E,5);if(E+=5,d===0){if(c-E<11)break;d=zt.readCode(o,E,11)+31,E+=11}for(let v=0;v<d;v++){if(c-E<8){E=c;break}const A=zt.readCode(o,E,8);x+=X.castAsNonUtf8Char(A),E+=8}y=h}else{let d=y===st.DIGIT?4:5;if(c-E<d)break;let v=zt.readCode(o,E,d);E+=d;let A=zt.getCharacter(y,v);A.startsWith("CTRL_")?(h=y,y=zt.getTable(A.charAt(5)),A.charAt(6)==="L"&&(h=y)):(x+=A,y=h)}return x}static getTable(o){switch(o){case"L":return st.LOWER;case"P":return st.PUNCT;case"M":return st.MIXED;case"D":return st.DIGIT;case"B":return st.BINARY;default:return st.UPPER}}static getCharacter(o,c){switch(o){case st.UPPER:return zt.UPPER_TABLE[c];case st.LOWER:return zt.LOWER_TABLE[c];case st.MIXED:return zt.MIXED_TABLE[c];case st.PUNCT:return zt.PUNCT_TABLE[c];case st.DIGIT:return zt.DIGIT_TABLE[c];default:throw new mn("Bad table")}}correctBits(o){let c,h;this.ddata.getNbLayers()<=2?(h=6,c=Rt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(h=8,c=Rt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(h=10,c=Rt.AZTEC_DATA_10):(h=12,c=Rt.AZTEC_DATA_12);let y=this.ddata.getNbDatablocks(),x=o.length/h;if(x<y)throw new V;let E=o.length%h,d=new Int32Array(x);for(let k=0;k<x;k++,E+=h)d[k]=zt.readCode(o,E,h);try{new Wn(c).decode(d,x-y)}catch(k){throw new V(k)}let v=(1<<h)-1,A=0;for(let k=0;k<y;k++){let F=d[k];if(F===0||F===v)throw new V;(F===1||F===v-1)&&A++}let I=new Array(y*h-A),P=0;for(let k=0;k<y;k++){let F=d[k];if(F===1||F===v-1)I.fill(F>1,P,P+h-1),P+=h-1;else for(let G=h-1;G>=0;--G)I[P++]=(F&1<<G)!==0}return I}extractBits(o){let c=this.ddata.isCompact(),h=this.ddata.getNbLayers(),y=(c?11:14)+h*4,x=new Int32Array(y),E=new Array(this.totalBitsInLayer(h,c));if(c)for(let d=0;d<x.length;d++)x[d]=d;else{let d=y+1+2*K.truncDivision(K.truncDivision(y,2)-1,15),v=y/2,A=K.truncDivision(d,2);for(let I=0;I<v;I++){let P=I+K.truncDivision(I,15);x[v-I-1]=A-P-1,x[v+I]=A+P+1}}for(let d=0,v=0;d<h;d++){let A=(h-d)*4+(c?9:12),I=d*2,P=y-1-I;for(let k=0;k<A;k++){let F=k*2;for(let G=0;G<2;G++)E[v+F+G]=o.get(x[I+G],x[I+k]),E[v+2*A+F+G]=o.get(x[I+k],x[P-G]),E[v+4*A+F+G]=o.get(x[P-G],x[P-k]),E[v+6*A+F+G]=o.get(x[P-k],x[I+G])}v+=A*8}return E}static readCode(o,c,h){let y=0;for(let x=c;x<c+h;x++)y<<=1,o[x]&&(y|=1);return y}static readByte(o,c){let h=o.length-c;return h>=8?zt.readCode(o,c,8):zt.readCode(o,c,h)<<8-h}static convertBoolArrayToByteArray(o){let c=new Uint8Array((o.length+7)/8);for(let h=0;h<c.length;h++)c[h]=zt.readByte(o,8*h);return c}totalBitsInLayer(o,c){return((c?88:112)+16*o)*o}}zt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],zt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],zt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],zt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],zt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Et{constructor(){}static round(o){return o===NaN?0:o<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:o>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:o+(o<0?-.5:.5)|0}static distance(o,c,h,y){const x=o-h,E=c-y;return Math.sqrt(x*x+E*E)}static sum(o){let c=0;for(let h=0,y=o.length;h!==y;h++){const x=o[h];c+=x}return c}}class Zt{static floatToIntBits(o){return o}}Zt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class at{constructor(o,c){this.x=o,this.y=c}getX(){return this.x}getY(){return this.y}equals(o){if(o instanceof at){const c=o;return this.x===c.x&&this.y===c.y}return!1}hashCode(){return 31*Zt.floatToIntBits(this.x)+Zt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(o){const c=this.distance(o[0],o[1]),h=this.distance(o[1],o[2]),y=this.distance(o[0],o[2]);let x,E,d;if(h>=c&&h>=y?(E=o[0],x=o[1],d=o[2]):y>=h&&y>=c?(E=o[1],x=o[0],d=o[2]):(E=o[2],x=o[0],d=o[1]),this.crossProductZ(x,E,d)<0){const v=x;x=d,d=v}o[0]=x,o[1]=E,o[2]=d}static distance(o,c){return Et.distance(o.x,o.y,c.x,c.y)}static crossProductZ(o,c,h){const y=c.x,x=c.y;return(h.x-y)*(o.y-x)-(h.y-x)*(o.x-y)}}class na{constructor(o,c){this.bits=o,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class zs extends na{constructor(o,c,h,y,x){super(o,c),this.compact=h,this.nbDatablocks=y,this.nbLayers=x}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class hr{constructor(o,c,h,y){this.image=o,this.height=o.getHeight(),this.width=o.getWidth(),c==null&&(c=hr.INIT_SIZE),h==null&&(h=o.getWidth()/2|0),y==null&&(y=o.getHeight()/2|0);const x=c/2|0;if(this.leftInit=h-x,this.rightInit=h+x,this.upInit=y-x,this.downInit=y+x,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new de}detect(){let o=this.leftInit,c=this.rightInit,h=this.upInit,y=this.downInit,x=!1,E=!0,d=!1,v=!1,A=!1,I=!1,P=!1;const k=this.width,F=this.height;for(;E;){E=!1;let G=!0;for(;(G||!v)&&c<k;)G=this.containsBlackPoint(h,y,c,!1),G?(c++,E=!0,v=!0):v||c++;if(c>=k){x=!0;break}let Q=!0;for(;(Q||!A)&&y<F;)Q=this.containsBlackPoint(o,c,y,!0),Q?(y++,E=!0,A=!0):A||y++;if(y>=F){x=!0;break}let re=!0;for(;(re||!I)&&o>=0;)re=this.containsBlackPoint(h,y,o,!1),re?(o--,E=!0,I=!0):I||o--;if(o<0){x=!0;break}let ne=!0;for(;(ne||!P)&&h>=0;)ne=this.containsBlackPoint(o,c,h,!0),ne?(h--,E=!0,P=!0):P||h--;if(h<0){x=!0;break}E&&(d=!0)}if(!x&&d){const G=c-o;let Q=null;for(let fe=1;Q===null&&fe<G;fe++)Q=this.getBlackPointOnSegment(o,y-fe,o+fe,y);if(Q==null)throw new de;let re=null;for(let fe=1;re===null&&fe<G;fe++)re=this.getBlackPointOnSegment(o,h+fe,o+fe,h);if(re==null)throw new de;let ne=null;for(let fe=1;ne===null&&fe<G;fe++)ne=this.getBlackPointOnSegment(c,h+fe,c-fe,h);if(ne==null)throw new de;let oe=null;for(let fe=1;oe===null&&fe<G;fe++)oe=this.getBlackPointOnSegment(c,y-fe,c-fe,y);if(oe==null)throw new de;return this.centerEdges(oe,Q,ne,re)}else throw new de}getBlackPointOnSegment(o,c,h,y){const x=Et.round(Et.distance(o,c,h,y)),E=(h-o)/x,d=(y-c)/x,v=this.image;for(let A=0;A<x;A++){const I=Et.round(o+A*E),P=Et.round(c+A*d);if(v.get(I,P))return new at(I,P)}return null}centerEdges(o,c,h,y){const x=o.getX(),E=o.getY(),d=c.getX(),v=c.getY(),A=h.getX(),I=h.getY(),P=y.getX(),k=y.getY(),F=hr.CORR;return x<this.width/2?[new at(P-F,k+F),new at(d+F,v+F),new at(A-F,I-F),new at(x+F,E-F)]:[new at(P+F,k+F),new at(d+F,v-F),new at(A-F,I+F),new at(x-F,E-F)]}containsBlackPoint(o,c,h,y){const x=this.image;if(y){for(let E=o;E<=c;E++)if(x.get(E,h))return!0}else for(let E=o;E<=c;E++)if(x.get(h,E))return!0;return!1}}hr.INIT_SIZE=10,hr.CORR=1;class ba{static checkAndNudgePoints(o,c){const h=o.getWidth(),y=o.getHeight();let x=!0;for(let E=0;E<c.length&&x;E+=2){const d=Math.floor(c[E]),v=Math.floor(c[E+1]);if(d<-1||d>h||v<-1||v>y)throw new de;x=!1,d===-1?(c[E]=0,x=!0):d===h&&(c[E]=h-1,x=!0),v===-1?(c[E+1]=0,x=!0):v===y&&(c[E+1]=y-1,x=!0)}x=!0;for(let E=c.length-2;E>=0&&x;E-=2){const d=Math.floor(c[E]),v=Math.floor(c[E+1]);if(d<-1||d>h||v<-1||v>y)throw new de;x=!1,d===-1?(c[E]=0,x=!0):d===h&&(c[E]=h-1,x=!0),v===-1?(c[E+1]=0,x=!0):v===y&&(c[E+1]=y-1,x=!0)}}}class $n{constructor(o,c,h,y,x,E,d,v,A){this.a11=o,this.a21=c,this.a31=h,this.a12=y,this.a22=x,this.a32=E,this.a13=d,this.a23=v,this.a33=A}static quadrilateralToQuadrilateral(o,c,h,y,x,E,d,v,A,I,P,k,F,G,Q,re){const ne=$n.quadrilateralToSquare(o,c,h,y,x,E,d,v);return $n.squareToQuadrilateral(A,I,P,k,F,G,Q,re).times(ne)}transformPoints(o){const c=o.length,h=this.a11,y=this.a12,x=this.a13,E=this.a21,d=this.a22,v=this.a23,A=this.a31,I=this.a32,P=this.a33;for(let k=0;k<c;k+=2){const F=o[k],G=o[k+1],Q=x*F+v*G+P;o[k]=(h*F+E*G+A)/Q,o[k+1]=(y*F+d*G+I)/Q}}transformPointsWithValues(o,c){const h=this.a11,y=this.a12,x=this.a13,E=this.a21,d=this.a22,v=this.a23,A=this.a31,I=this.a32,P=this.a33,k=o.length;for(let F=0;F<k;F++){const G=o[F],Q=c[F],re=x*G+v*Q+P;o[F]=(h*G+E*Q+A)/re,c[F]=(y*G+d*Q+I)/re}}static squareToQuadrilateral(o,c,h,y,x,E,d,v){const A=o-h+x-d,I=c-y+E-v;if(A===0&&I===0)return new $n(h-o,x-h,o,y-c,E-y,c,0,0,1);{const P=h-x,k=d-x,F=y-E,G=v-E,Q=P*G-k*F,re=(A*G-k*I)/Q,ne=(P*I-A*F)/Q;return new $n(h-o+re*h,d-o+ne*d,o,y-c+re*y,v-c+ne*v,c,re,ne,1)}}static quadrilateralToSquare(o,c,h,y,x,E,d,v){return $n.squareToQuadrilateral(o,c,h,y,x,E,d,v).buildAdjoint()}buildAdjoint(){return new $n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(o){return new $n(this.a11*o.a11+this.a21*o.a12+this.a31*o.a13,this.a11*o.a21+this.a21*o.a22+this.a31*o.a23,this.a11*o.a31+this.a21*o.a32+this.a31*o.a33,this.a12*o.a11+this.a22*o.a12+this.a32*o.a13,this.a12*o.a21+this.a22*o.a22+this.a32*o.a23,this.a12*o.a31+this.a22*o.a32+this.a32*o.a33,this.a13*o.a11+this.a23*o.a12+this.a33*o.a13,this.a13*o.a21+this.a23*o.a22+this.a33*o.a23,this.a13*o.a31+this.a23*o.a32+this.a33*o.a33)}}class Fa extends ba{sampleGrid(o,c,h,y,x,E,d,v,A,I,P,k,F,G,Q,re,ne,oe,fe){const le=$n.quadrilateralToQuadrilateral(y,x,E,d,v,A,I,P,k,F,G,Q,re,ne,oe,fe);return this.sampleGridWithTransform(o,c,h,le)}sampleGridWithTransform(o,c,h,y){if(c<=0||h<=0)throw new de;const x=new xe(c,h),E=new Float32Array(2*c);for(let d=0;d<h;d++){const v=E.length,A=d+.5;for(let I=0;I<v;I+=2)E[I]=I/2+.5,E[I+1]=A;y.transformPoints(E),ba.checkAndNudgePoints(o,E);try{for(let I=0;I<v;I+=2)o.get(Math.floor(E[I]),Math.floor(E[I+1]))&&x.set(I/2,d)}catch{throw new de}}return x}}class bi{static setGridSampler(o){bi.gridSampler=o}static getInstance(){return bi.gridSampler}}bi.gridSampler=new Fa;class Lr{constructor(o,c){this.x=o,this.y=c}toResultPoint(){return new at(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ro{constructor(o){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=o}detect(){return this.detectMirror(!1)}detectMirror(o){let c=this.getMatrixCenter(),h=this.getBullsEyeCorners(c);if(o){let E=h[0];h[0]=h[2],h[2]=E}this.extractParameters(h);let y=this.sampleGrid(this.image,h[this.shift%4],h[(this.shift+1)%4],h[(this.shift+2)%4],h[(this.shift+3)%4]),x=this.getMatrixCornerPoints(h);return new zs(y,x,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(o){if(!this.isValidPoint(o[0])||!this.isValidPoint(o[1])||!this.isValidPoint(o[2])||!this.isValidPoint(o[3]))throw new de;let c=2*this.nbCenterLayers,h=new Int32Array([this.sampleLine(o[0],o[1],c),this.sampleLine(o[1],o[2],c),this.sampleLine(o[2],o[3],c),this.sampleLine(o[3],o[0],c)]);this.shift=this.getRotation(h,c);let y=0;for(let E=0;E<4;E++){let d=h[(this.shift+E)%4];this.compact?(y<<=7,y+=d>>1&127):(y<<=10,y+=(d>>2&992)+(d>>1&31))}let x=this.getCorrectedParameterData(y,this.compact);this.compact?(this.nbLayers=(x>>6)+1,this.nbDataBlocks=(x&63)+1):(this.nbLayers=(x>>11)+1,this.nbDataBlocks=(x&2047)+1)}getRotation(o,c){let h=0;o.forEach((y,x,E)=>{let d=(y>>c-2<<1)+(y&1);h=(h<<3)+d}),h=((h&1)<<11)+(h>>1);for(let y=0;y<4;y++)if(K.bitCount(h^this.EXPECTED_CORNER_BITS[y])<=2)return y;throw new de}getCorrectedParameterData(o,c){let h,y;c?(h=7,y=2):(h=10,y=4);let x=h-y,E=new Int32Array(h);for(let v=h-1;v>=0;--v)E[v]=o&15,o>>=4;try{new Wn(Rt.AZTEC_PARAM).decode(E,x)}catch{throw new de}let d=0;for(let v=0;v<y;v++)d=(d<<4)+E[v];return d}getBullsEyeCorners(o){let c=o,h=o,y=o,x=o,E=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(c,E,1,-1),k=this.getFirstDifferent(h,E,1,1),F=this.getFirstDifferent(y,E,-1,1),G=this.getFirstDifferent(x,E,-1,-1);if(this.nbCenterLayers>2){let Q=this.distancePoint(G,P)*this.nbCenterLayers/(this.distancePoint(x,c)*(this.nbCenterLayers+2));if(Q<.75||Q>1.25||!this.isWhiteOrBlackRectangle(P,k,F,G))break}c=P,h=k,y=F,x=G,E=!E}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new de;this.compact=this.nbCenterLayers===5;let d=new at(c.getX()+.5,c.getY()-.5),v=new at(h.getX()+.5,h.getY()+.5),A=new at(y.getX()-.5,y.getY()+.5),I=new at(x.getX()-.5,x.getY()-.5);return this.expandSquare([d,v,A,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let o,c,h,y;try{let d=new hr(this.image).detect();o=d[0],c=d[1],h=d[2],y=d[3]}catch{let v=this.image.getWidth()/2,A=this.image.getHeight()/2;o=this.getFirstDifferent(new Lr(v+7,A-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new Lr(v+7,A+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new Lr(v-7,A+7),!1,-1,1).toResultPoint(),y=this.getFirstDifferent(new Lr(v-7,A-7),!1,-1,-1).toResultPoint()}let x=Et.round((o.getX()+y.getX()+c.getX()+h.getX())/4),E=Et.round((o.getY()+y.getY()+c.getY()+h.getY())/4);try{let d=new hr(this.image,15,x,E).detect();o=d[0],c=d[1],h=d[2],y=d[3]}catch{o=this.getFirstDifferent(new Lr(x+7,E-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new Lr(x+7,E+7),!1,1,1).toResultPoint(),h=this.getFirstDifferent(new Lr(x-7,E+7),!1,-1,1).toResultPoint(),y=this.getFirstDifferent(new Lr(x-7,E-7),!1,-1,-1).toResultPoint()}return x=Et.round((o.getX()+y.getX()+c.getX()+h.getX())/4),E=Et.round((o.getY()+y.getY()+c.getY()+h.getY())/4),new Lr(x,E)}getMatrixCornerPoints(o){return this.expandSquare(o,2*this.nbCenterLayers,this.getDimension())}sampleGrid(o,c,h,y,x){let E=bi.getInstance(),d=this.getDimension(),v=d/2-this.nbCenterLayers,A=d/2+this.nbCenterLayers;return E.sampleGrid(o,d,d,v,v,A,v,A,A,v,A,c.getX(),c.getY(),h.getX(),h.getY(),y.getX(),y.getY(),x.getX(),x.getY())}sampleLine(o,c,h){let y=0,x=this.distanceResultPoint(o,c),E=x/h,d=o.getX(),v=o.getY(),A=E*(c.getX()-o.getX())/x,I=E*(c.getY()-o.getY())/x;for(let P=0;P<h;P++)this.image.get(Et.round(d+P*A),Et.round(v+P*I))&&(y|=1<<h-P-1);return y}isWhiteOrBlackRectangle(o,c,h,y){let x=3;o=new Lr(o.getX()-x,o.getY()+x),c=new Lr(c.getX()-x,c.getY()-x),h=new Lr(h.getX()+x,h.getY()-x),y=new Lr(y.getX()+x,y.getY()+x);let E=this.getColor(y,o);if(E===0)return!1;let d=this.getColor(o,c);return d!==E||(d=this.getColor(c,h),d!==E)?!1:(d=this.getColor(h,y),d===E)}getColor(o,c){let h=this.distancePoint(o,c),y=(c.getX()-o.getX())/h,x=(c.getY()-o.getY())/h,E=0,d=o.getX(),v=o.getY(),A=this.image.get(o.getX(),o.getY()),I=Math.ceil(h);for(let k=0;k<I;k++)d+=y,v+=x,this.image.get(Et.round(d),Et.round(v))!==A&&E++;let P=E/h;return P>.1&&P<.9?0:P<=.1===A?1:-1}getFirstDifferent(o,c,h,y){let x=o.getX()+h,E=o.getY()+y;for(;this.isValid(x,E)&&this.image.get(x,E)===c;)x+=h,E+=y;for(x-=h,E-=y;this.isValid(x,E)&&this.image.get(x,E)===c;)x+=h;for(x-=h;this.isValid(x,E)&&this.image.get(x,E)===c;)E+=y;return E-=y,new Lr(x,E)}expandSquare(o,c,h){let y=h/(2*c),x=o[0].getX()-o[2].getX(),E=o[0].getY()-o[2].getY(),d=(o[0].getX()+o[2].getX())/2,v=(o[0].getY()+o[2].getY())/2,A=new at(d+y*x,v+y*E),I=new at(d-y*x,v-y*E);x=o[1].getX()-o[3].getX(),E=o[1].getY()-o[3].getY(),d=(o[1].getX()+o[3].getX())/2,v=(o[1].getY()+o[3].getY())/2;let P=new at(d+y*x,v+y*E),k=new at(d-y*x,v-y*E);return[A,P,I,k]}isValid(o,c){return o>=0&&o<this.image.getWidth()&&c>0&&c<this.image.getHeight()}isValidPoint(o){let c=Et.round(o.getX()),h=Et.round(o.getY());return this.isValid(c,h)}distancePoint(o,c){return Et.distance(o.getX(),o.getY(),c.getX(),c.getY())}distanceResultPoint(o,c){return Et.distance(o.getX(),o.getY(),c.getX(),c.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(K.truncDivision(this.nbLayers-4,8)+1)+15}}class gs{decode(o,c=null){let h=null,y=new Ro(o.getBlackMatrix()),x=null,E=null;try{let I=y.detectMirror(!1);x=I.getPoints(),this.reportFoundResultPoints(c,x),E=new zt().decode(I)}catch(I){h=I}if(E==null)try{let I=y.detectMirror(!0);x=I.getPoints(),this.reportFoundResultPoints(c,x),E=new zt().decode(I)}catch(I){throw h??I}let d=new Ve(E.getText(),E.getRawBytes(),E.getNumBits(),x,$e.AZTEC,M.currentTimeMillis()),v=E.getByteSegments();v!=null&&d.putMetadata(ut.BYTE_SEGMENTS,v);let A=E.getECLevel();return A!=null&&d.putMetadata(ut.ERROR_CORRECTION_LEVEL,A),d}reportFoundResultPoints(o,c){if(o!=null){let h=o.get(Z.NEED_RESULT_POINT_CALLBACK);h!=null&&c.forEach((y,x,E)=>{h.foundPossibleResultPoint(y)})}}reset(){}}class ps extends Xe{constructor(o=500){super(new gs,o)}}class In{decode(o,c){try{return this.doDecode(o,c)}catch{if(c&&c.get(Z.TRY_HARDER)===!0&&o.isRotateSupported()){const x=o.rotateCounterClockwise(),E=this.doDecode(x,c),d=E.getResultMetadata();let v=270;d!==null&&d.get(ut.ORIENTATION)===!0&&(v=v+d.get(ut.ORIENTATION)%360),E.putMetadata(ut.ORIENTATION,v);const A=E.getResultPoints();if(A!==null){const I=x.getHeight();for(let P=0;P<A.length;P++)A[P]=new at(I-A[P].getY()-1,A[P].getX())}return E}else throw new de}}reset(){}doDecode(o,c){const h=o.getWidth(),y=o.getHeight();let x=new ee(h);const E=c&&c.get(Z.TRY_HARDER)===!0,d=Math.max(1,y>>(E?8:5));let v;E?v=y:v=15;const A=Math.trunc(y/2);for(let I=0;I<v;I++){const P=Math.trunc((I+1)/2),k=(I&1)===0,F=A+d*(k?P:-P);if(F<0||F>=y)break;try{x=o.getBlackRow(F,x)}catch{continue}for(let G=0;G<2;G++){if(G===1&&(x.reverse(),c&&c.get(Z.NEED_RESULT_POINT_CALLBACK)===!0)){const Q=new Map;c.forEach((re,ne)=>Q.set(ne,re)),Q.delete(Z.NEED_RESULT_POINT_CALLBACK),c=Q}try{const Q=this.decodeRow(F,x,c);if(G===1){Q.putMetadata(ut.ORIENTATION,180);const re=Q.getResultPoints();re!==null&&(re[0]=new at(h-re[0].getX()-1,re[0].getY()),re[1]=new at(h-re[1].getX()-1,re[1].getY()))}return Q}catch{}}}throw new de}static recordPattern(o,c,h){const y=h.length;for(let A=0;A<y;A++)h[A]=0;const x=o.getSize();if(c>=x)throw new de;let E=!o.get(c),d=0,v=c;for(;v<x;){if(o.get(v)!==E)h[d]++;else{if(++d===y)break;h[d]=1,E=!E}v++}if(!(d===y||d===y-1&&v===x))throw new de}static recordPatternInReverse(o,c,h){let y=h.length,x=o.get(c);for(;c>0&&y>=0;)o.get(--c)!==x&&(y--,x=!x);if(y>=0)throw new de;In.recordPattern(o,c+1,h)}static patternMatchVariance(o,c,h){const y=o.length;let x=0,E=0;for(let A=0;A<y;A++)x+=o[A],E+=c[A];if(x<E)return Number.POSITIVE_INFINITY;const d=x/E;h*=d;let v=0;for(let A=0;A<y;A++){const I=o[A],P=c[A]*d,k=I>P?I-P:P-I;if(k>h)return Number.POSITIVE_INFINITY;v+=k}return v/x}}class rt extends In{static findStartPattern(o){const c=o.getSize(),h=o.getNextSet(0);let y=0,x=Int32Array.from([0,0,0,0,0,0]),E=h,d=!1;const v=6;for(let A=h;A<c;A++)if(o.get(A)!==d)x[y]++;else{if(y===v-1){let I=rt.MAX_AVG_VARIANCE,P=-1;for(let k=rt.CODE_START_A;k<=rt.CODE_START_C;k++){const F=In.patternMatchVariance(x,rt.CODE_PATTERNS[k],rt.MAX_INDIVIDUAL_VARIANCE);F<I&&(I=F,P=k)}if(P>=0&&o.isRange(Math.max(0,E-(A-E)/2),E,!1))return Int32Array.from([E,A,P]);E+=x[0]+x[1],x=x.slice(2,x.length-1),x[y-1]=0,x[y]=0,y--}else y++;x[y]=1,d=!d}throw new de}static decodeCode(o,c,h){In.recordPattern(o,h,c);let y=rt.MAX_AVG_VARIANCE,x=-1;for(let E=0;E<rt.CODE_PATTERNS.length;E++){const d=rt.CODE_PATTERNS[E],v=this.patternMatchVariance(c,d,rt.MAX_INDIVIDUAL_VARIANCE);v<y&&(y=v,x=E)}if(x>=0)return x;throw new de}decodeRow(o,c,h){const y=h&&h.get(Z.ASSUME_GS1)===!0,x=rt.findStartPattern(c),E=x[2];let d=0;const v=new Uint8Array(20);v[d++]=E;let A;switch(E){case rt.CODE_START_A:A=rt.CODE_CODE_A;break;case rt.CODE_START_B:A=rt.CODE_CODE_B;break;case rt.CODE_START_C:A=rt.CODE_CODE_C;break;default:throw new V}let I=!1,P=!1,k="",F=x[0],G=x[1];const Q=Int32Array.from([0,0,0,0,0,0]);let re=0,ne=0,oe=E,fe=0,le=!0,ge=!1,he=!1;for(;!I;){const tt=P;switch(P=!1,re=ne,ne=rt.decodeCode(c,Q,G),v[d++]=ne,ne!==rt.CODE_STOP&&(le=!0),ne!==rt.CODE_STOP&&(fe++,oe+=fe*ne),F=G,G+=Q.reduce((vt,gt)=>vt+gt,0),ne){case rt.CODE_START_A:case rt.CODE_START_B:case rt.CODE_START_C:throw new V}switch(A){case rt.CODE_CODE_A:if(ne<64)he===ge?k+=String.fromCharCode(32+ne):k+=String.fromCharCode(32+ne+128),he=!1;else if(ne<96)he===ge?k+=String.fromCharCode(ne-64):k+=String.fromCharCode(ne+64),he=!1;else switch(ne!==rt.CODE_STOP&&(le=!1),ne){case rt.CODE_FNC_1:y&&(k.length===0?k+="]C1":k+="");break;case rt.CODE_FNC_2:case rt.CODE_FNC_3:break;case rt.CODE_FNC_4_A:!ge&&he?(ge=!0,he=!1):ge&&he?(ge=!1,he=!1):he=!0;break;case rt.CODE_SHIFT:P=!0,A=rt.CODE_CODE_B;break;case rt.CODE_CODE_B:A=rt.CODE_CODE_B;break;case rt.CODE_CODE_C:A=rt.CODE_CODE_C;break;case rt.CODE_STOP:I=!0;break}break;case rt.CODE_CODE_B:if(ne<96)he===ge?k+=String.fromCharCode(32+ne):k+=String.fromCharCode(32+ne+128),he=!1;else switch(ne!==rt.CODE_STOP&&(le=!1),ne){case rt.CODE_FNC_1:y&&(k.length===0?k+="]C1":k+="");break;case rt.CODE_FNC_2:case rt.CODE_FNC_3:break;case rt.CODE_FNC_4_B:!ge&&he?(ge=!0,he=!1):ge&&he?(ge=!1,he=!1):he=!0;break;case rt.CODE_SHIFT:P=!0,A=rt.CODE_CODE_A;break;case rt.CODE_CODE_A:A=rt.CODE_CODE_A;break;case rt.CODE_CODE_C:A=rt.CODE_CODE_C;break;case rt.CODE_STOP:I=!0;break}break;case rt.CODE_CODE_C:if(ne<100)ne<10&&(k+="0"),k+=ne;else switch(ne!==rt.CODE_STOP&&(le=!1),ne){case rt.CODE_FNC_1:y&&(k.length===0?k+="]C1":k+="");break;case rt.CODE_CODE_A:A=rt.CODE_CODE_A;break;case rt.CODE_CODE_B:A=rt.CODE_CODE_B;break;case rt.CODE_STOP:I=!0;break}break}tt&&(A=A===rt.CODE_CODE_A?rt.CODE_CODE_B:rt.CODE_CODE_A)}const we=G-F;if(G=c.getNextUnset(G),!c.isRange(G,Math.min(c.getSize(),G+(G-F)/2),!1))throw new de;if(oe-=fe*re,oe%103!==re)throw new N;const Ce=k.length;if(Ce===0)throw new de;Ce>0&&le&&(A===rt.CODE_CODE_C?k=k.substring(0,Ce-2):k=k.substring(0,Ce-1));const be=(x[1]+x[0])/2,Me=F+we/2,He=v.length,lt=new Uint8Array(He);for(let tt=0;tt<He;tt++)lt[tt]=v[tt];const ct=[new at(be,o),new at(Me,o)];return new Ve(k,lt,0,ct,$e.CODE_128,new Date().getTime())}}rt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],rt.MAX_AVG_VARIANCE=.25,rt.MAX_INDIVIDUAL_VARIANCE=.7,rt.CODE_SHIFT=98,rt.CODE_CODE_C=99,rt.CODE_CODE_B=100,rt.CODE_CODE_A=101,rt.CODE_FNC_1=102,rt.CODE_FNC_2=97,rt.CODE_FNC_3=96,rt.CODE_FNC_4_A=101,rt.CODE_FNC_4_B=100,rt.CODE_START_A=103,rt.CODE_START_B=104,rt.CODE_START_C=105,rt.CODE_STOP=106;class cn extends In{constructor(o=!1,c=!1){super(),this.usingCheckDigit=o,this.extendedMode=c,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(o,c,h){let y=this.counters;y.fill(0),this.decodeRowResult="";let x=cn.findAsteriskPattern(c,y),E=c.getNextSet(x[1]),d=c.getSize(),v,A;do{cn.recordPattern(c,E,y);let Q=cn.toNarrowWidePattern(y);if(Q<0)throw new de;v=cn.patternToChar(Q),this.decodeRowResult+=v,A=E;for(let re of y)E+=re;E=c.getNextSet(E)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let Q of y)I+=Q;let P=E-A-I;if(E!==d&&P*2<I)throw new de;if(this.usingCheckDigit){let Q=this.decodeRowResult.length-1,re=0;for(let ne=0;ne<Q;ne++)re+=cn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ne));if(this.decodeRowResult.charAt(Q)!==cn.ALPHABET_STRING.charAt(re%43))throw new N;this.decodeRowResult=this.decodeRowResult.substring(0,Q)}if(this.decodeRowResult.length===0)throw new de;let k;this.extendedMode?k=cn.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;let F=(x[1]+x[0])/2,G=A+I/2;return new Ve(k,null,0,[new at(F,o),new at(G,o)],$e.CODE_39,new Date().getTime())}static findAsteriskPattern(o,c){let h=o.getSize(),y=o.getNextSet(0),x=0,E=y,d=!1,v=c.length;for(let A=y;A<h;A++)if(o.get(A)!==d)c[x]++;else{if(x===v-1){if(this.toNarrowWidePattern(c)===cn.ASTERISK_ENCODING&&o.isRange(Math.max(0,E-Math.floor((A-E)/2)),E,!1))return[E,A];E+=c[0]+c[1],c.copyWithin(0,2,2+x-1),c[x-1]=0,c[x]=0,x--}else x++;c[x]=1,d=!d}throw new de}static toNarrowWidePattern(o){let c=o.length,h=0,y;do{let x=2147483647;for(let v of o)v<x&&v>h&&(x=v);h=x,y=0;let E=0,d=0;for(let v=0;v<c;v++){let A=o[v];A>h&&(d|=1<<c-1-v,y++,E+=A)}if(y===3){for(let v=0;v<c&&y>0;v++){let A=o[v];if(A>h&&(y--,A*2>=E))return-1}return d}}while(y>3);return-1}static patternToChar(o){for(let c=0;c<cn.CHARACTER_ENCODINGS.length;c++)if(cn.CHARACTER_ENCODINGS[c]===o)return cn.ALPHABET_STRING.charAt(c);if(o===cn.ASTERISK_ENCODING)return"*";throw new de}static decodeExtended(o){let c=o.length,h="";for(let y=0;y<c;y++){let x=o.charAt(y);if(x==="+"||x==="$"||x==="%"||x==="/"){let E=o.charAt(y+1),d="\0";switch(x){case"+":if(E>="A"&&E<="Z")d=String.fromCharCode(E.charCodeAt(0)+32);else throw new V;break;case"$":if(E>="A"&&E<="Z")d=String.fromCharCode(E.charCodeAt(0)-64);else throw new V;break;case"%":if(E>="A"&&E<="E")d=String.fromCharCode(E.charCodeAt(0)-38);else if(E>="F"&&E<="J")d=String.fromCharCode(E.charCodeAt(0)-11);else if(E>="K"&&E<="O")d=String.fromCharCode(E.charCodeAt(0)+16);else if(E>="P"&&E<="T")d=String.fromCharCode(E.charCodeAt(0)+43);else if(E==="U")d="\0";else if(E==="V")d="@";else if(E==="W")d="`";else if(E==="X"||E==="Y"||E==="Z")d="";else throw new V;break;case"/":if(E>="A"&&E<="O")d=String.fromCharCode(E.charCodeAt(0)-32);else if(E==="Z")d=":";else throw new V;break}h+=d,y++}else h+=x}return h}}cn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",cn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],cn.ASTERISK_ENCODING=148;class Ze extends In{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(o,c,h){let y=this.decodeStart(c),x=this.decodeEnd(c),E=new J;Ze.decodeMiddle(c,y[1],x[0],E);let d=E.toString(),v=null;h!=null&&(v=h.get(Z.ALLOWED_LENGTHS)),v==null&&(v=Ze.DEFAULT_ALLOWED_LENGTHS);let A=d.length,I=!1,P=0;for(let G of v){if(A===G){I=!0;break}G>P&&(P=G)}if(!I&&A>P&&(I=!0),!I)throw new V;const k=[new at(y[1],o),new at(x[0],o)];return new Ve(d,null,0,k,$e.ITF,new Date().getTime())}static decodeMiddle(o,c,h,y){let x=new Int32Array(10),E=new Int32Array(5),d=new Int32Array(5);for(x.fill(0),E.fill(0),d.fill(0);c<h;){In.recordPattern(o,c,x);for(let A=0;A<5;A++){let I=2*A;E[A]=x[I],d[A]=x[I+1]}let v=Ze.decodeDigit(E);y.append(v.toString()),v=this.decodeDigit(d),y.append(v.toString()),x.forEach(function(A){c+=A})}}decodeStart(o){let c=Ze.skipWhiteSpace(o),h=Ze.findGuardPattern(o,c,Ze.START_PATTERN);return this.narrowLineWidth=(h[1]-h[0])/4,this.validateQuietZone(o,h[0]),h}validateQuietZone(o,c){let h=this.narrowLineWidth*10;h=h<c?h:c;for(let y=c-1;h>0&&y>=0&&!o.get(y);y--)h--;if(h!==0)throw new de}static skipWhiteSpace(o){const c=o.getSize(),h=o.getNextSet(0);if(h===c)throw new de;return h}decodeEnd(o){o.reverse();try{let c=Ze.skipWhiteSpace(o),h;try{h=Ze.findGuardPattern(o,c,Ze.END_PATTERN_REVERSED[0])}catch(x){x instanceof de&&(h=Ze.findGuardPattern(o,c,Ze.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,h[0]);let y=h[0];return h[0]=o.getSize()-h[1],h[1]=o.getSize()-y,h}finally{o.reverse()}}static findGuardPattern(o,c,h){let y=h.length,x=new Int32Array(y),E=o.getSize(),d=!1,v=0,A=c;x.fill(0);for(let I=c;I<E;I++)if(o.get(I)!==d)x[v]++;else{if(v===y-1){if(In.patternMatchVariance(x,h,Ze.MAX_INDIVIDUAL_VARIANCE)<Ze.MAX_AVG_VARIANCE)return[A,I];A+=x[0]+x[1],M.arraycopy(x,2,x,0,v-1),x[v-1]=0,x[v]=0,v--}else v++;x[v]=1,d=!d}throw new de}static decodeDigit(o){let c=Ze.MAX_AVG_VARIANCE,h=-1,y=Ze.PATTERNS.length;for(let x=0;x<y;x++){let E=Ze.PATTERNS[x],d=In.patternMatchVariance(o,E,Ze.MAX_INDIVIDUAL_VARIANCE);d<c?(c=d,h=x):d===c&&(h=-1)}if(h>=0)return h%10;throw new de}}Ze.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ze.MAX_AVG_VARIANCE=.38,Ze.MAX_INDIVIDUAL_VARIANCE=.5,Ze.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ze.START_PATTERN=Int32Array.from([1,1,1,1]),Ze.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Bn extends In{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(o){let c=!1,h,y=0,x=Int32Array.from([0,0,0]);for(;!c;){x=Int32Array.from([0,0,0]),h=Bn.findGuardPattern(o,y,!1,this.START_END_PATTERN,x);let E=h[0];y=h[1];let d=E-(y-E);d>=0&&(c=o.isRange(d,E,!1))}return h}static checkChecksum(o){return Bn.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let c=o.length;if(c===0)return!1;let h=parseInt(o.charAt(c-1),10);return Bn.getStandardUPCEANChecksum(o.substring(0,c-1))===h}static getStandardUPCEANChecksum(o){let c=o.length,h=0;for(let y=c-1;y>=0;y-=2){let x=o.charAt(y).charCodeAt(0)-48;if(x<0||x>9)throw new V;h+=x}h*=3;for(let y=c-2;y>=0;y-=2){let x=o.charAt(y).charCodeAt(0)-48;if(x<0||x>9)throw new V;h+=x}return(1e3-h)%10}static decodeEnd(o,c){return Bn.findGuardPattern(o,c,!1,Bn.START_END_PATTERN,new Int32Array(Bn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(o,c,h,y){return this.findGuardPattern(o,c,h,y,new Int32Array(y.length))}static findGuardPattern(o,c,h,y,x){let E=o.getSize();c=h?o.getNextUnset(c):o.getNextSet(c);let d=0,v=c,A=y.length,I=h;for(let P=c;P<E;P++)if(o.get(P)!==I)x[d]++;else{if(d===A-1){if(In.patternMatchVariance(x,y,Bn.MAX_INDIVIDUAL_VARIANCE)<Bn.MAX_AVG_VARIANCE)return Int32Array.from([v,P]);v+=x[0]+x[1];let k=x.slice(2,x.length-1);for(let F=0;F<d-1;F++)x[F]=k[F];x[d-1]=0,x[d]=0,d--}else d++;x[d]=1,I=!I}throw new de}static decodeDigit(o,c,h,y){this.recordPattern(o,h,c);let x=this.MAX_AVG_VARIANCE,E=-1,d=y.length;for(let v=0;v<d;v++){let A=y[v],I=In.patternMatchVariance(c,A,Bn.MAX_INDIVIDUAL_VARIANCE);I<x&&(x=I,E=v)}if(E>=0)return E;throw new de}}Bn.MAX_AVG_VARIANCE=.48,Bn.MAX_INDIVIDUAL_VARIANCE=.7,Bn.START_END_PATTERN=Int32Array.from([1,1,1]),Bn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Bn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Bn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Oi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,c,h){let y=this.decodeRowStringBuffer,x=this.decodeMiddle(c,h,y),E=y.toString(),d=Oi.parseExtensionString(E),v=[new at((h[0]+h[1])/2,o),new at(x,o)],A=new Ve(E,null,0,v,$e.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&A.putAllMetadata(d),A}decodeMiddle(o,c,h){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let x=o.getSize(),E=c[1],d=0;for(let A=0;A<5&&E<x;A++){let I=Bn.decodeDigit(o,y,E,Bn.L_AND_G_PATTERNS);h+=String.fromCharCode(48+I%10);for(let P of y)E+=P;I>=10&&(d|=1<<4-A),A!==4&&(E=o.getNextSet(E),E=o.getNextUnset(E))}if(h.length!==5)throw new de;let v=this.determineCheckDigit(d);if(Oi.extensionChecksum(h.toString())!==v)throw new de;return E}static extensionChecksum(o){let c=o.length,h=0;for(let y=c-2;y>=0;y-=2)h+=o.charAt(y).charCodeAt(0)-48;h*=3;for(let y=c-1;y>=0;y-=2)h+=o.charAt(y).charCodeAt(0)-48;return h*=3,h%10}determineCheckDigit(o){for(let c=0;c<10;c++)if(o===this.CHECK_DIGIT_ENCODINGS[c])return c;throw new de}static parseExtensionString(o){if(o.length!==5)return null;let c=Oi.parseExtension5String(o);return c==null?null:new Map([[ut.SUGGESTED_PRICE,c]])}static parseExtension5String(o){let c;switch(o.charAt(0)){case"0":c="";break;case"5":c="$";break;case"9":switch(o){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}c="";break;default:c="";break}let h=parseInt(o.substring(1)),y=(h/100).toString(),x=h%100,E=x<10?"0"+x:x.toString();return c+y+"."+E}}class Us{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(o,c,h){let y=this.decodeRowStringBuffer,x=this.decodeMiddle(c,h,y),E=y.toString(),d=Us.parseExtensionString(E),v=[new at((h[0]+h[1])/2,o),new at(x,o)],A=new Ve(E,null,0,v,$e.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&A.putAllMetadata(d),A}decodeMiddle(o,c,h){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let x=o.getSize(),E=c[1],d=0;for(let v=0;v<2&&E<x;v++){let A=Bn.decodeDigit(o,y,E,Bn.L_AND_G_PATTERNS);h+=String.fromCharCode(48+A%10);for(let I of y)E+=I;A>=10&&(d|=1<<1-v),v!==1&&(E=o.getNextSet(E),E=o.getNextUnset(E))}if(h.length!==2)throw new de;if(parseInt(h.toString())%4!==d)throw new de;return E}static parseExtensionString(o){return o.length!==2?null:new Map([[ut.ISSUE_NUMBER,parseInt(o)]])}}class ft{static decodeRow(o,c,h){let y=Bn.findGuardPattern(c,h,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Oi().decodeRow(o,c,y)}catch{return new Us().decodeRow(o,c,y)}}}ft.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class tn extends Bn{constructor(){super(),this.decodeRowStringBuffer="",tn.L_AND_G_PATTERNS=tn.L_PATTERNS.map(o=>Int32Array.from(o));for(let o=10;o<20;o++){let c=tn.L_PATTERNS[o-10],h=new Int32Array(c.length);for(let y=0;y<c.length;y++)h[y]=c[c.length-y-1];tn.L_AND_G_PATTERNS[o]=h}}decodeRow(o,c,h){let y=tn.findStartGuardPattern(c),x=h==null?null:h.get(Z.NEED_RESULT_POINT_CALLBACK);if(x!=null){const le=new at((y[0]+y[1])/2,o);x.foundPossibleResultPoint(le)}let E=this.decodeMiddle(c,y,this.decodeRowStringBuffer),d=E.rowOffset,v=E.resultString;if(x!=null){const le=new at(d,o);x.foundPossibleResultPoint(le)}let A=this.decodeEnd(c,d);if(x!=null){const le=new at((A[0]+A[1])/2,o);x.foundPossibleResultPoint(le)}let I=A[1],P=I+(I-A[0]);if(P>=c.getSize()||!c.isRange(I,P,!1))throw new de;let k=v.toString();if(k.length<8)throw new V;if(!tn.checkChecksum(k))throw new N;let F=(y[1]+y[0])/2,G=(A[1]+A[0])/2,Q=this.getBarcodeFormat(),re=[new at(F,o),new at(G,o)],ne=new Ve(k,null,0,re,Q,new Date().getTime()),oe=0;try{let le=ft.decodeRow(o,c,A[1]);ne.putMetadata(ut.UPC_EAN_EXTENSION,le.getText()),ne.putAllMetadata(le.getResultMetadata()),ne.addResultPoints(le.getResultPoints()),oe=le.getText().length}catch{}let fe=h==null?null:h.get(Z.ALLOWED_EAN_EXTENSIONS);if(fe!=null){let le=!1;for(let ge in fe)if(oe.toString()===ge){le=!0;break}if(!le)throw new de}return ne}decodeEnd(o,c){return tn.findGuardPattern(o,c,!1,tn.START_END_PATTERN,new Int32Array(tn.START_END_PATTERN.length).fill(0))}static checkChecksum(o){return tn.checkStandardUPCEANChecksum(o)}static checkStandardUPCEANChecksum(o){let c=o.length;if(c===0)return!1;let h=parseInt(o.charAt(c-1),10);return tn.getStandardUPCEANChecksum(o.substring(0,c-1))===h}static getStandardUPCEANChecksum(o){let c=o.length,h=0;for(let y=c-1;y>=0;y-=2){let x=o.charAt(y).charCodeAt(0)-48;if(x<0||x>9)throw new V;h+=x}h*=3;for(let y=c-2;y>=0;y-=2){let x=o.charAt(y).charCodeAt(0)-48;if(x<0||x>9)throw new V;h+=x}return(1e3-h)%10}}class Yn extends tn{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,c,h){let y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let x=o.getSize(),E=c[1],d=0;for(let A=0;A<6&&E<x;A++){let I=tn.decodeDigit(o,y,E,tn.L_AND_G_PATTERNS);h+=String.fromCharCode(48+I%10);for(let P of y)E+=P;I>=10&&(d|=1<<5-A)}h=Yn.determineFirstDigit(h,d),E=tn.findGuardPattern(o,E,!0,tn.MIDDLE_PATTERN,new Int32Array(tn.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<6&&E<x;A++){let I=tn.decodeDigit(o,y,E,tn.L_PATTERNS);h+=String.fromCharCode(48+I);for(let P of y)E+=P}return{rowOffset:E,resultString:h}}getBarcodeFormat(){return $e.EAN_13}static determineFirstDigit(o,c){for(let h=0;h<10;h++)if(c===this.FIRST_DIGIT_ENCODINGS[h])return o=String.fromCharCode(48+h)+o,o;throw new de}}Yn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class wa extends tn{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,c,h){const y=this.decodeMiddleCounters;y[0]=0,y[1]=0,y[2]=0,y[3]=0;let x=o.getSize(),E=c[1];for(let v=0;v<4&&E<x;v++){let A=tn.decodeDigit(o,y,E,tn.L_PATTERNS);h+=String.fromCharCode(48+A);for(let I of y)E+=I}E=tn.findGuardPattern(o,E,!0,tn.MIDDLE_PATTERN,new Int32Array(tn.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<4&&E<x;v++){let A=tn.decodeDigit(o,y,E,tn.L_PATTERNS);h+=String.fromCharCode(48+A);for(let I of y)E+=I}return{rowOffset:E,resultString:h}}getBarcodeFormat(){return $e.EAN_8}}class Va extends tn{constructor(){super(...arguments),this.ean13Reader=new Yn}getBarcodeFormat(){return $e.UPC_A}decode(o,c){return this.maybeReturnResult(this.ean13Reader.decode(o))}decodeRow(o,c,h){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,c,h))}decodeMiddle(o,c,h){return this.ean13Reader.decodeMiddle(o,c,h)}maybeReturnResult(o){let c=o.getText();if(c.charAt(0)==="0"){let h=new Ve(c.substring(1),null,null,o.getResultPoints(),$e.UPC_A);return o.getResultMetadata()!=null&&h.putAllMetadata(o.getResultMetadata()),h}else throw new de}reset(){this.ean13Reader.reset()}}class Er extends tn{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(o,c,h){const y=this.decodeMiddleCounters.map(A=>A);y[0]=0,y[1]=0,y[2]=0,y[3]=0;const x=o.getSize();let E=c[1],d=0;for(let A=0;A<6&&E<x;A++){const I=Er.decodeDigit(o,y,E,Er.L_AND_G_PATTERNS);h+=String.fromCharCode(48+I%10);for(let P of y)E+=P;I>=10&&(d|=1<<5-A)}let v=Er.determineNumSysAndCheckDigit(h,d);return{rowOffset:E,resultString:v}}decodeEnd(o,c){return Er.findGuardPatternWithoutCounters(o,c,!0,Er.MIDDLE_END_PATTERN)}checkChecksum(o){return tn.checkChecksum(Er.convertUPCEtoUPCA(o))}static determineNumSysAndCheckDigit(o,c){for(let h=0;h<=1;h++)for(let y=0;y<10;y++)if(c===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[h][y]){let x=String.fromCharCode(48+h),E=String.fromCharCode(48+y);return x+o+E}throw de.getNotFoundInstance()}getBarcodeFormat(){return $e.UPC_E}static convertUPCEtoUPCA(o){const c=o.slice(1,7).split("").map(x=>x.charCodeAt(0)),h=new J;h.append(o.charAt(0));let y=c[5];switch(y){case 0:case 1:case 2:h.appendChars(c,0,2),h.append(y),h.append("0000"),h.appendChars(c,2,3);break;case 3:h.appendChars(c,0,3),h.append("00000"),h.appendChars(c,3,2);break;case 4:h.appendChars(c,0,4),h.append("00000"),h.append(c[4]);break;default:h.appendChars(c,0,5),h.append("0000"),h.append(y);break}return o.length>=8&&h.append(o.charAt(7)),h.toString()}}Er.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Er.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ll extends In{constructor(o){super();let c=o==null?null:o.get(Z.POSSIBLE_FORMATS),h=[];r(c)?(h.push(new Yn),h.push(new Va),h.push(new wa),h.push(new Er)):(c.indexOf($e.EAN_13)>-1&&h.push(new Yn),c.indexOf($e.UPC_A)>-1&&h.push(new Va),c.indexOf($e.EAN_8)>-1&&h.push(new wa),c.indexOf($e.UPC_E)>-1&&h.push(new Er)),this.readers=h}decodeRow(o,c,h){for(let y of this.readers)try{const x=y.decodeRow(o,c,h),E=x.getBarcodeFormat()===$e.EAN_13&&x.getText().charAt(0)==="0",d=h==null?null:h.get(Z.POSSIBLE_FORMATS),v=d==null||d.includes($e.UPC_A);if(E&&v){const A=x.getRawBytes(),I=new Ve(x.getText().substring(1),A,A?A.length:null,x.getResultPoints(),$e.UPC_A);return I.putAllMetadata(x.getResultMetadata()),I}return x}catch{}throw new de}reset(){for(let o of this.readers)o.reset()}}class ii extends In{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(o,c){for(let h=0;h<c.length;h++)if(In.patternMatchVariance(o,c[h],ii.MAX_INDIVIDUAL_VARIANCE)<ii.MAX_AVG_VARIANCE)return h;throw new de}static count(o){return Et.sum(new Int32Array(o))}static increment(o,c){let h=0,y=c[0];for(let x=1;x<o.length;x++)c[x]>y&&(y=c[x],h=x);o[h]++}static decrement(o,c){let h=0,y=c[0];for(let x=1;x<o.length;x++)c[x]<y&&(y=c[x],h=x);o[h]--}static isFinderPattern(o){let c=o[0]+o[1],h=c+o[2]+o[3],y=c/h;if(y>=ii.MIN_FINDER_PATTERN_RATIO&&y<=ii.MAX_FINDER_PATTERN_RATIO){let x=Number.MAX_SAFE_INTEGER,E=Number.MIN_SAFE_INTEGER;for(let d of o)d>E&&(E=d),d<x&&(x=d);return E<10*x}return!1}}ii.MAX_AVG_VARIANCE=.2,ii.MAX_INDIVIDUAL_VARIANCE=.45,ii.MIN_FINDER_PATTERN_RATIO=9.5/12,ii.MAX_FINDER_PATTERN_RATIO=12.5/14;class Hr{constructor(o,c){this.value=o,this.checksumPortion=c}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(o){if(!(o instanceof Hr))return!1;const c=o;return this.value===c.value&&this.checksumPortion===c.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class qi{constructor(o,c,h,y,x){this.value=o,this.startEnd=c,this.value=o,this.startEnd=c,this.resultPoints=new Array,this.resultPoints.push(new at(h,x)),this.resultPoints.push(new at(y,x))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(o){if(!(o instanceof qi))return!1;const c=o;return this.value===c.value}hashCode(){return this.value}}class ra{constructor(){}static getRSSvalue(o,c,h){let y=0;for(let v of o)y+=v;let x=0,E=0,d=o.length;for(let v=0;v<d-1;v++){let A;for(A=1,E|=1<<v;A<o[v];A++,E&=~(1<<v)){let I=ra.combins(y-A-1,d-v-2);if(h&&E===0&&y-A-(d-v-1)>=d-v-1&&(I-=ra.combins(y-A-(d-v),d-v-2)),d-v-1>1){let P=0;for(let k=y-A-(d-v-2);k>c;k--)P+=ra.combins(y-A-k-1,d-v-3);I-=P*(d-1-v)}else y-A>c&&I--;x+=I}y-=A}return x}static combins(o,c){let h,y;o-c>c?(y=c,h=o-c):(y=o-c,h=c);let x=1,E=1;for(let d=o;d>h;d--)x*=d,E<=y&&(x/=E,E++);for(;E<=y;)x/=E,E++;return x}}class ys{static buildBitArray(o){let c=o.length*2-1;o[o.length-1].getRightChar()==null&&(c-=1);let h=12*c,y=new ee(h),x=0,d=o[0].getRightChar().getValue();for(let v=11;v>=0;--v)(d&1<<v)!=0&&y.set(x),x++;for(let v=1;v<o.length;++v){let A=o[v],I=A.getLeftChar().getValue();for(let P=11;P>=0;--P)(I&1<<P)!=0&&y.set(x),x++;if(A.getRightChar()!=null){let P=A.getRightChar().getValue();for(let k=11;k>=0;--k)(P&1<<k)!=0&&y.set(x),x++}}return y}}class _n{constructor(o,c){c?this.decodedInformation=null:(this.finished=o,this.decodedInformation=c)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class mr{constructor(o){this.newPosition=o}getNewPosition(){return this.newPosition}}class Kr extends mr{constructor(o,c){super(o),this.value=c}getValue(){return this.value}isFNC1(){return this.value===Kr.FNC1}}Kr.FNC1="$";class ci extends mr{constructor(o,c,h){super(o),h?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=c}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class fi extends mr{constructor(o,c,h){if(super(o),c<0||c>10||h<0||h>10)throw new V;this.firstDigit=c,this.secondDigit=h}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===fi.FNC1}isSecondDigitFNC1(){return this.secondDigit===fi.FNC1}isAnyFNC1(){return this.firstDigit===fi.FNC1||this.secondDigit===fi.FNC1}}fi.FNC1=10;class dt{constructor(){}static parseFieldsInGeneralPurpose(o){if(!o)return null;if(o.length<2)throw new de;let c=o.substring(0,2);for(let x of dt.TWO_DIGIT_DATA_LENGTH)if(x[0]===c)return x[1]===dt.VARIABLE_LENGTH?dt.processVariableAI(2,x[2],o):dt.processFixedAI(2,x[1],o);if(o.length<3)throw new de;let h=o.substring(0,3);for(let x of dt.THREE_DIGIT_DATA_LENGTH)if(x[0]===h)return x[1]===dt.VARIABLE_LENGTH?dt.processVariableAI(3,x[2],o):dt.processFixedAI(3,x[1],o);for(let x of dt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(x[0]===h)return x[1]===dt.VARIABLE_LENGTH?dt.processVariableAI(4,x[2],o):dt.processFixedAI(4,x[1],o);if(o.length<4)throw new de;let y=o.substring(0,4);for(let x of dt.FOUR_DIGIT_DATA_LENGTH)if(x[0]===y)return x[1]===dt.VARIABLE_LENGTH?dt.processVariableAI(4,x[2],o):dt.processFixedAI(4,x[1],o);throw new de}static processFixedAI(o,c,h){if(h.length<o)throw new de;let y=h.substring(0,o);if(h.length<o+c)throw new de;let x=h.substring(o,o+c),E=h.substring(o+c),d="("+y+")"+x,v=dt.parseFieldsInGeneralPurpose(E);return v==null?d:d+v}static processVariableAI(o,c,h){let y=h.substring(0,o),x;h.length<o+c?x=h.length:x=o+c;let E=h.substring(o,x),d=h.substring(x),v="("+y+")"+E,A=dt.parseFieldsInGeneralPurpose(d);return A==null?v:v+A}}dt.VARIABLE_LENGTH=[],dt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",dt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",dt.VARIABLE_LENGTH,20],["22",dt.VARIABLE_LENGTH,29],["30",dt.VARIABLE_LENGTH,8],["37",dt.VARIABLE_LENGTH,8],["90",dt.VARIABLE_LENGTH,30],["91",dt.VARIABLE_LENGTH,30],["92",dt.VARIABLE_LENGTH,30],["93",dt.VARIABLE_LENGTH,30],["94",dt.VARIABLE_LENGTH,30],["95",dt.VARIABLE_LENGTH,30],["96",dt.VARIABLE_LENGTH,30],["97",dt.VARIABLE_LENGTH,3],["98",dt.VARIABLE_LENGTH,30],["99",dt.VARIABLE_LENGTH,30]],dt.THREE_DIGIT_DATA_LENGTH=[["240",dt.VARIABLE_LENGTH,30],["241",dt.VARIABLE_LENGTH,30],["242",dt.VARIABLE_LENGTH,6],["250",dt.VARIABLE_LENGTH,30],["251",dt.VARIABLE_LENGTH,30],["253",dt.VARIABLE_LENGTH,17],["254",dt.VARIABLE_LENGTH,20],["400",dt.VARIABLE_LENGTH,30],["401",dt.VARIABLE_LENGTH,30],["402",17],["403",dt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",dt.VARIABLE_LENGTH,20],["421",dt.VARIABLE_LENGTH,15],["422",3],["423",dt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],dt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",dt.VARIABLE_LENGTH,15],["391",dt.VARIABLE_LENGTH,18],["392",dt.VARIABLE_LENGTH,15],["393",dt.VARIABLE_LENGTH,18],["703",dt.VARIABLE_LENGTH,30]],dt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",dt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",dt.VARIABLE_LENGTH,20],["8003",dt.VARIABLE_LENGTH,30],["8004",dt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",dt.VARIABLE_LENGTH,30],["8008",dt.VARIABLE_LENGTH,12],["8018",18],["8020",dt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",dt.VARIABLE_LENGTH,70],["8200",dt.VARIABLE_LENGTH,70]];class Ni{constructor(o){this.buffer=new J,this.information=o}decodeAllCodes(o,c){let h=c,y=null;do{let x=this.decodeGeneralPurposeField(h,y),E=dt.parseFieldsInGeneralPurpose(x.getNewString());if(E!=null&&o.append(E),x.isRemaining()?y=""+x.getRemainingValue():y=null,h===x.getNewPosition())break;h=x.getNewPosition()}while(!0);return o.toString()}isStillNumeric(o){if(o+7>this.information.getSize())return o+4<=this.information.getSize();for(let c=o;c<o+3;++c)if(this.information.get(c))return!0;return this.information.get(o+3)}decodeNumeric(o){if(o+7>this.information.getSize()){let x=this.extractNumericValueFromBitArray(o,4);return x===0?new fi(this.information.getSize(),fi.FNC1,fi.FNC1):new fi(this.information.getSize(),x-1,fi.FNC1)}let c=this.extractNumericValueFromBitArray(o,7),h=(c-8)/11,y=(c-8)%11;return new fi(o+7,h,y)}extractNumericValueFromBitArray(o,c){return Ni.extractNumericValueFromBitArray(this.information,o,c)}static extractNumericValueFromBitArray(o,c,h){let y=0;for(let x=0;x<h;++x)o.get(c+x)&&(y|=1<<h-x-1);return y}decodeGeneralPurposeField(o,c){this.buffer.setLengthToZero(),c!=null&&this.buffer.append(c),this.current.setPosition(o);let h=this.parseBlocks();return h!=null&&h.isRemaining()?new ci(this.current.getPosition(),this.buffer.toString(),h.getRemainingValue()):new ci(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let o,c;do{let h=this.current.getPosition();if(this.current.isAlpha()?(c=this.parseAlphaBlock(),o=c.isFinished()):this.current.isIsoIec646()?(c=this.parseIsoIec646Block(),o=c.isFinished()):(c=this.parseNumericBlock(),o=c.isFinished()),!(h!==this.current.getPosition())&&!o)break}while(!o);return c.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let o=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFirstDigitFNC1()){let c;return o.isSecondDigitFNC1()?c=new ci(this.current.getPosition(),this.buffer.toString()):c=new ci(this.current.getPosition(),this.buffer.toString(),o.getSecondDigit()),new _n(!0,c)}if(this.buffer.append(o.getFirstDigit()),o.isSecondDigitFNC1()){let c=new ci(this.current.getPosition(),this.buffer.toString());return new _n(!0,c)}this.buffer.append(o.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new _n(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let o=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let c=new ci(this.current.getPosition(),this.buffer.toString());return new _n(!0,c)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new _n(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let o=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(o.getNewPosition()),o.isFNC1()){let c=new ci(this.current.getPosition(),this.buffer.toString());return new _n(!0,c)}this.buffer.append(o.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new _n(!1)}isStillIsoIec646(o){if(o+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,5);if(c>=5&&c<16)return!0;if(o+7>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(o,7);if(h>=64&&h<116)return!0;if(o+8>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(o,8);return y>=232&&y<253}decodeIsoIec646(o){let c=this.extractNumericValueFromBitArray(o,5);if(c===15)return new Kr(o+5,Kr.FNC1);if(c>=5&&c<15)return new Kr(o+5,"0"+(c-5));let h=this.extractNumericValueFromBitArray(o,7);if(h>=64&&h<90)return new Kr(o+7,""+(h+1));if(h>=90&&h<116)return new Kr(o+7,""+(h+7));let y=this.extractNumericValueFromBitArray(o,8),x;switch(y){case 232:x="!";break;case 233:x='"';break;case 234:x="%";break;case 235:x="&";break;case 236:x="'";break;case 237:x="(";break;case 238:x=")";break;case 239:x="*";break;case 240:x="+";break;case 241:x=",";break;case 242:x="-";break;case 243:x=".";break;case 244:x="/";break;case 245:x=":";break;case 246:x=";";break;case 247:x="<";break;case 248:x="=";break;case 249:x=">";break;case 250:x="?";break;case 251:x="_";break;case 252:x=" ";break;default:throw new V}return new Kr(o+8,x)}isStillAlpha(o){if(o+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(o,5);if(c>=5&&c<16)return!0;if(o+6>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(o,6);return h>=16&&h<63}decodeAlphanumeric(o){let c=this.extractNumericValueFromBitArray(o,5);if(c===15)return new Kr(o+5,Kr.FNC1);if(c>=5&&c<15)return new Kr(o+5,"0"+(c-5));let h=this.extractNumericValueFromBitArray(o,6);if(h>=32&&h<58)return new Kr(o+6,""+(h+33));let y;switch(h){case 58:y="*";break;case 59:y=",";break;case 60:y="-";break;case 61:y=".";break;case 62:y="/";break;default:throw new mn("Decoding invalid alphanumeric value: "+h)}return new Kr(o+6,y)}isAlphaTo646ToAlphaLatch(o){if(o+1>this.information.getSize())return!1;for(let c=0;c<5&&c+o<this.information.getSize();++c)if(c===2){if(!this.information.get(o+2))return!1}else if(this.information.get(o+c))return!1;return!0}isAlphaOr646ToNumericLatch(o){if(o+3>this.information.getSize())return!1;for(let c=o;c<o+3;++c)if(this.information.get(c))return!1;return!0}isNumericToAlphaNumericLatch(o){if(o+1>this.information.getSize())return!1;for(let c=0;c<4&&c+o<this.information.getSize();++c)if(this.information.get(o+c))return!1;return!0}}class Fn{constructor(o){this.information=o,this.generalDecoder=new Ni(o)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class gn extends Fn{constructor(o){super(o)}encodeCompressedGtin(o,c){o.append("(01)");let h=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,c,h)}encodeCompressedGtinWithoutAI(o,c,h){for(let y=0;y<4;++y){let x=this.getGeneralDecoder().extractNumericValueFromBitArray(c+10*y,10);x/100===0&&o.append("0"),x/10===0&&o.append("0"),o.append(x)}gn.appendCheckDigit(o,h)}static appendCheckDigit(o,c){let h=0;for(let y=0;y<13;y++){let x=o.charAt(y+c).charCodeAt(0)-48;h+=(y&1)===0?3*x:x}h=10-h%10,h===10&&(h=0),o.append(h)}}gn.GTIN_SIZE=40;class Nr extends gn{constructor(o){super(o)}parseInformation(){let o=new J;o.append("(01)");let c=o.length(),h=this.getGeneralDecoder().extractNumericValueFromBitArray(Nr.HEADER_SIZE,4);return o.append(h),this.encodeCompressedGtinWithoutAI(o,Nr.HEADER_SIZE+4,c),this.getGeneralDecoder().decodeAllCodes(o,Nr.HEADER_SIZE+44)}}Nr.HEADER_SIZE=4;class za extends Fn{constructor(o){super(o)}parseInformation(){let o=new J;return this.getGeneralDecoder().decodeAllCodes(o,za.HEADER_SIZE)}}za.HEADER_SIZE=5;class Zo extends gn{constructor(o){super(o)}encodeCompressedWeight(o,c,h){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(c,h);this.addWeightCode(o,y);let x=this.checkWeight(y),E=1e5;for(let d=0;d<5;++d)x/E===0&&o.append("0"),E/=10;o.append(x)}}class Wr extends Zo{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()!=Wr.HEADER_SIZE+Zo.GTIN_SIZE+Wr.WEIGHT_SIZE)throw new de;let o=new J;return this.encodeCompressedGtin(o,Wr.HEADER_SIZE),this.encodeCompressedWeight(o,Wr.HEADER_SIZE+Zo.GTIN_SIZE,Wr.WEIGHT_SIZE),o.toString()}}Wr.HEADER_SIZE=5,Wr.WEIGHT_SIZE=15;class Bl extends Wr{constructor(o){super(o)}addWeightCode(o,c){o.append("(3103)")}checkWeight(o){return o}}class Pi extends Wr{constructor(o){super(o)}addWeightCode(o,c){c<1e4?o.append("(3202)"):o.append("(3203)")}checkWeight(o){return o<1e4?o:o-1e4}}class Ri extends gn{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<Ri.HEADER_SIZE+gn.GTIN_SIZE)throw new de;let o=new J;this.encodeCompressedGtin(o,Ri.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(Ri.HEADER_SIZE+gn.GTIN_SIZE,Ri.LAST_DIGIT_SIZE);o.append("(392"),o.append(c),o.append(")");let h=this.getGeneralDecoder().decodeGeneralPurposeField(Ri.HEADER_SIZE+gn.GTIN_SIZE+Ri.LAST_DIGIT_SIZE,null);return o.append(h.getNewString()),o.toString()}}Ri.HEADER_SIZE=8,Ri.LAST_DIGIT_SIZE=2;class Qn extends gn{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<Qn.HEADER_SIZE+gn.GTIN_SIZE)throw new de;let o=new J;this.encodeCompressedGtin(o,Qn.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(Qn.HEADER_SIZE+gn.GTIN_SIZE,Qn.LAST_DIGIT_SIZE);o.append("(393"),o.append(c),o.append(")");let h=this.getGeneralDecoder().extractNumericValueFromBitArray(Qn.HEADER_SIZE+gn.GTIN_SIZE+Qn.LAST_DIGIT_SIZE,Qn.FIRST_THREE_DIGITS_SIZE);h/100==0&&o.append("0"),h/10==0&&o.append("0"),o.append(h);let y=this.getGeneralDecoder().decodeGeneralPurposeField(Qn.HEADER_SIZE+gn.GTIN_SIZE+Qn.LAST_DIGIT_SIZE+Qn.FIRST_THREE_DIGITS_SIZE,null);return o.append(y.getNewString()),o.toString()}}Qn.HEADER_SIZE=8,Qn.LAST_DIGIT_SIZE=2,Qn.FIRST_THREE_DIGITS_SIZE=10;class Mt extends Zo{constructor(o,c,h){super(o),this.dateCode=h,this.firstAIdigits=c}parseInformation(){if(this.getInformation().getSize()!=Mt.HEADER_SIZE+Mt.GTIN_SIZE+Mt.WEIGHT_SIZE+Mt.DATE_SIZE)throw new de;let o=new J;return this.encodeCompressedGtin(o,Mt.HEADER_SIZE),this.encodeCompressedWeight(o,Mt.HEADER_SIZE+Mt.GTIN_SIZE,Mt.WEIGHT_SIZE),this.encodeCompressedDate(o,Mt.HEADER_SIZE+Mt.GTIN_SIZE+Mt.WEIGHT_SIZE),o.toString()}encodeCompressedDate(o,c){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(c,Mt.DATE_SIZE);if(h==38400)return;o.append("("),o.append(this.dateCode),o.append(")");let y=h%32;h/=32;let x=h%12+1;h/=12;let E=h;E/10==0&&o.append("0"),o.append(E),x/10==0&&o.append("0"),o.append(x),y/10==0&&o.append("0"),o.append(y)}addWeightCode(o,c){o.append("("),o.append(this.firstAIdigits),o.append(c/1e5),o.append(")")}checkWeight(o){return o%1e5}}Mt.HEADER_SIZE=8,Mt.WEIGHT_SIZE=20,Mt.DATE_SIZE=16;function $r(Y){try{if(Y.get(1))return new Nr(Y);if(!Y.get(2))return new za(Y);switch(Ni.extractNumericValueFromBitArray(Y,1,4)){case 4:return new Bl(Y);case 5:return new Pi(Y)}switch(Ni.extractNumericValueFromBitArray(Y,1,5)){case 12:return new Ri(Y);case 13:return new Qn(Y)}switch(Ni.extractNumericValueFromBitArray(Y,1,7)){case 56:return new Mt(Y,"310","11");case 57:return new Mt(Y,"320","11");case 58:return new Mt(Y,"310","13");case 59:return new Mt(Y,"320","13");case 60:return new Mt(Y,"310","15");case 61:return new Mt(Y,"320","15");case 62:return new Mt(Y,"310","17");case 63:return new Mt(Y,"320","17")}}catch(o){throw console.log(o),new mn("unknown decoder: "+Y)}}class rr{constructor(o,c,h,y){this.leftchar=o,this.rightchar=c,this.finderpattern=h,this.maybeLast=y}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(o,c){return o instanceof rr?rr.equalsOrNull(o.leftchar,c.leftchar)&&rr.equalsOrNull(o.rightchar,c.rightchar)&&rr.equalsOrNull(o.finderpattern,c.finderpattern):!1}static equalsOrNull(o,c){return o===null?c===null:rr.equals(o,c)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ar{constructor(o,c,h){this.pairs=o,this.rowNumber=c,this.wasReversed=h}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(o){return this.checkEqualitity(this,o)}toString(){return"{ "+this.pairs+" }"}equals(o,c){return o instanceof Ar?this.checkEqualitity(o,c)&&o.wasReversed===c.wasReversed:!1}checkEqualitity(o,c){if(!o||!c)return;let h;return o.forEach((y,x)=>{c.forEach(E=>{y.getLeftChar().getValue()===E.getLeftChar().getValue()&&y.getRightChar().getValue()===E.getRightChar().getValue()&&y.getFinderPatter().getValue()===E.getFinderPatter().getValue()&&(h=!0)})}),h}}class Ge extends ii{constructor(o){super(...arguments),this.pairs=new Array(Ge.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=o===!0}decodeRow(o,c,h){this.pairs.length=0,this.startFromEven=!1;try{return Ge.constructResult(this.decodeRow2pairs(o,c))}catch(y){this.verbose&&console.log(y)}return this.pairs.length=0,this.startFromEven=!0,Ge.constructResult(this.decodeRow2pairs(o,c))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(o,c){let h=!1;for(;!h;)try{this.pairs.push(this.retrieveNextPair(c,this.pairs,o))}catch(x){if(x instanceof de){if(!this.pairs.length)throw new de;h=!0}}if(this.checkChecksum())return this.pairs;let y;if(this.rows.length?y=!0:y=!1,this.storeRow(o,!1),y){let x=this.checkRowsBoolean(!1);if(x!=null||(x=this.checkRowsBoolean(!0),x!=null))return x}throw new de}checkRowsBoolean(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());let c=null;try{c=this.checkRows(new Array,0)}catch(h){this.verbose&&console.log(h)}return o&&(this.rows=this.rows.reverse()),c}checkRows(o,c){for(let h=c;h<this.rows.length;h++){let y=this.rows[h];this.pairs.length=0;for(let E of o)this.pairs.push(E.getPairs());if(this.pairs.push(y.getPairs()),!Ge.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let x=new Array(o);x.push(y);try{return this.checkRows(x,h+1)}catch(E){this.verbose&&console.log(E)}}throw new de}static isValidSequence(o){for(let c of Ge.FINDER_PATTERN_SEQUENCES){if(o.length>c.length)continue;let h=!0;for(let y=0;y<o.length;y++)if(o[y].getFinderPattern().getValue()!=c[y]){h=!1;break}if(h)return!0}return!1}storeRow(o,c){let h=0,y=!1,x=!1;for(;h<this.rows.length;){let E=this.rows[h];if(E.getRowNumber()>o){x=E.isEquivalent(this.pairs);break}y=E.isEquivalent(this.pairs),h++}x||y||Ge.isPartialRow(this.pairs,this.rows)||(this.rows.push(h,new Ar(this.pairs,o,c)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(o,c){for(let h of c)if(h.getPairs().length!==o.length){for(let y of h.getPairs())for(let x of o)if(rr.equals(y,x))break}}static isPartialRow(o,c){for(let h of c){let y=!0;for(let x of o){let E=!1;for(let d of h.getPairs())if(x.equals(d)){E=!0;break}if(!E){y=!1;break}}if(y)return!0}return!1}getRows(){return this.rows}static constructResult(o){let c=ys.buildBitArray(o),y=$r(c).parseInformation(),x=o[0].getFinderPattern().getResultPoints(),E=o[o.length-1].getFinderPattern().getResultPoints(),d=[x[0],x[1],E[0],E[1]];return new Ve(y,null,null,d,$e.RSS_EXPANDED,null)}checkChecksum(){let o=this.pairs.get(0),c=o.getLeftChar(),h=o.getRightChar();if(h==null)return!1;let y=h.getChecksumPortion(),x=2;for(let d=1;d<this.pairs.size();++d){let v=this.pairs.get(d);y+=v.getLeftChar().getChecksumPortion(),x++;let A=v.getRightChar();A!=null&&(y+=A.getChecksumPortion(),x++)}return y%=211,211*(x-4)+y==c.getValue()}static getNextSecondBar(o,c){let h;return o.get(c)?(h=o.getNextUnset(c),h=o.getNextSet(h)):(h=o.getNextSet(c),h=o.getNextUnset(h)),h}retrieveNextPair(o,c,h){let y=c.length%2==0;this.startFromEven&&(y=!y);let x,E=!0,d=-1;do this.findNextPair(o,c,d),x=this.parseFoundFinderPattern(o,h,y),x==null?d=Ge.getNextSecondBar(o,this.startEnd[0]):E=!1;while(E);let v=this.decodeDataCharacter(o,x,y,!0);if(!this.isEmptyPair(c)&&c[c.length-1].mustBeLast())throw new de;let A;try{A=this.decodeDataCharacter(o,x,y,!1)}catch(I){A=null,this.verbose&&console.log(I)}return new rr(v,A,x,!0)}isEmptyPair(o){return o.length===0}findNextPair(o,c,h){let y=this.getDecodeFinderCounters();y[0]=0,y[1]=0,y[2]=0,y[3]=0;let x=o.getSize(),E;h>=0?E=h:this.isEmptyPair(c)?E=0:E=c[c.length-1].getFinderPattern().getStartEnd()[1];let d=c.length%2!=0;this.startFromEven&&(d=!d);let v=!1;for(;E<x&&(v=!o.get(E),!!v);)E++;let A=0,I=E;for(let P=E;P<x;P++)if(o.get(P)!=v)y[A]++;else{if(A==3){if(d&&Ge.reverseCounters(y),Ge.isFinderPattern(y)){this.startEnd[0]=I,this.startEnd[1]=P;return}d&&Ge.reverseCounters(y),I+=y[0]+y[1],y[0]=y[2],y[1]=y[3],y[2]=0,y[3]=0,A--}else A++;y[A]=1,v=!v}throw new de}static reverseCounters(o){let c=o.length;for(let h=0;h<c/2;++h){let y=o[h];o[h]=o[c-h-1],o[c-h-1]=y}}parseFoundFinderPattern(o,c,h){let y,x,E;if(h){let A=this.startEnd[0]-1;for(;A>=0&&!o.get(A);)A--;A++,y=this.startEnd[0]-A,x=A,E=this.startEnd[1]}else x=this.startEnd[0],E=o.getNextUnset(this.startEnd[1]+1),y=E-this.startEnd[1];let d=this.getDecodeFinderCounters();M.arraycopy(d,0,d,1,d.length-1),d[0]=y;let v;try{v=this.parseFinderValue(d,Ge.FINDER_PATTERNS)}catch{return null}return new qi(v,[x,E],x,E,c)}decodeDataCharacter(o,c,h,y){let x=this.getDataCharacterCounters();for(let Me=0;Me<x.length;Me++)x[Me]=0;if(y)Ge.recordPatternInReverse(o,c.getStartEnd()[0],x);else{Ge.recordPattern(o,c.getStartEnd()[1],x);for(let Me=0,He=x.length-1;Me<He;Me++,He--){let lt=x[Me];x[Me]=x[He],x[He]=lt}}let E=17,d=Et.sum(new Int32Array(x))/E,v=(c.getStartEnd()[1]-c.getStartEnd()[0])/15;if(Math.abs(d-v)/v>.3)throw new de;let A=this.getOddCounts(),I=this.getEvenCounts(),P=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let Me=0;Me<x.length;Me++){let He=1*x[Me]/d,lt=He+.5;if(lt<1){if(He<.3)throw new de;lt=1}else if(lt>8){if(He>8.7)throw new de;lt=8}let ct=Me/2;(Me&1)==0?(A[ct]=lt,P[ct]=He-lt):(I[ct]=lt,k[ct]=He-lt)}this.adjustOddEvenCounts(E);let F=4*c.getValue()+(h?0:2)+(y?0:1)-1,G=0,Q=0;for(let Me=A.length-1;Me>=0;Me--){if(Ge.isNotA1left(c,h,y)){let He=Ge.WEIGHTS[F][2*Me];Q+=A[Me]*He}G+=A[Me]}let re=0;for(let Me=I.length-1;Me>=0;Me--)if(Ge.isNotA1left(c,h,y)){let He=Ge.WEIGHTS[F][2*Me+1];re+=I[Me]*He}let ne=Q+re;if((G&1)!=0||G>13||G<4)throw new de;let oe=(13-G)/2,fe=Ge.SYMBOL_WIDEST[oe],le=9-fe,ge=ra.getRSSvalue(A,fe,!0),he=ra.getRSSvalue(I,le,!1),we=Ge.EVEN_TOTAL_SUBSET[oe],Ce=Ge.GSUM[oe],be=ge*we+he+Ce;return new Hr(be,ne)}static isNotA1left(o,c,h){return!(o.getValue()==0&&c&&h)}adjustOddEvenCounts(o){let c=Et.sum(new Int32Array(this.getOddCounts())),h=Et.sum(new Int32Array(this.getEvenCounts())),y=!1,x=!1;c>13?x=!0:c<4&&(y=!0);let E=!1,d=!1;h>13?d=!0:h<4&&(E=!0);let v=c+h-o,A=(c&1)==1,I=(h&1)==0;if(v==1)if(A){if(I)throw new de;x=!0}else{if(!I)throw new de;d=!0}else if(v==-1)if(A){if(I)throw new de;y=!0}else{if(!I)throw new de;E=!0}else if(v==0){if(A){if(!I)throw new de;c<h?(y=!0,d=!0):(x=!0,E=!0)}else if(I)throw new de}else throw new de;if(y){if(x)throw new de;Ge.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(x&&Ge.decrement(this.getOddCounts(),this.getOddRoundingErrors()),E){if(d)throw new de;Ge.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&Ge.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ge.SYMBOL_WIDEST=[7,5,4,3,1],Ge.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ge.GSUM=[0,348,1388,2948,3988],Ge.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ge.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ge.FINDER_PAT_A=0,Ge.FINDER_PAT_B=1,Ge.FINDER_PAT_C=2,Ge.FINDER_PAT_D=3,Ge.FINDER_PAT_E=4,Ge.FINDER_PAT_F=5,Ge.FINDER_PATTERN_SEQUENCES=[[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_C,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_E,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D,Ge.FINDER_PAT_C],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_E,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D,Ge.FINDER_PAT_D,Ge.FINDER_PAT_F],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_E,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_F,Ge.FINDER_PAT_F],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_D],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_E],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_F,Ge.FINDER_PAT_F],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_E,Ge.FINDER_PAT_F,Ge.FINDER_PAT_F]],Ge.MAX_PAIRS=11;class uo extends Hr{constructor(o,c,h){super(o,c),this.count=0,this.finderPattern=h}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Cn extends ii{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(o,c,h){const y=this.decodePair(c,!1,o,h);Cn.addOrTally(this.possibleLeftPairs,y),c.reverse();let x=this.decodePair(c,!0,o,h);Cn.addOrTally(this.possibleRightPairs,x),c.reverse();for(let E of this.possibleLeftPairs)if(E.getCount()>1){for(let d of this.possibleRightPairs)if(d.getCount()>1&&Cn.checkChecksum(E,d))return Cn.constructResult(E,d)}throw new de}static addOrTally(o,c){if(c==null)return;let h=!1;for(let y of o)if(y.getValue()===c.getValue()){y.incrementCount(),h=!0;break}h||o.push(c)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(o,c){let h=4537077*o.getValue()+c.getValue(),y=new String(h).toString(),x=new J;for(let A=13-y.length;A>0;A--)x.append("0");x.append(y);let E=0;for(let A=0;A<13;A++){let I=x.charAt(A).charCodeAt(0)-48;E+=(A&1)===0?3*I:I}E=10-E%10,E===10&&(E=0),x.append(E.toString());let d=o.getFinderPattern().getResultPoints(),v=c.getFinderPattern().getResultPoints();return new Ve(x.toString(),null,0,[d[0],d[1],v[0],v[1]],$e.RSS_14,new Date().getTime())}static checkChecksum(o,c){let h=(o.getChecksumPortion()+16*c.getChecksumPortion())%79,y=9*o.getFinderPattern().getValue()+c.getFinderPattern().getValue();return y>72&&y--,y>8&&y--,h===y}decodePair(o,c,h,y){try{let x=this.findFinderPattern(o,c),E=this.parseFoundFinderPattern(o,h,c,x),d=y==null?null:y.get(Z.NEED_RESULT_POINT_CALLBACK);if(d!=null){let I=(x[0]+x[1])/2;c&&(I=o.getSize()-1-I),d.foundPossibleResultPoint(new at(I,h))}let v=this.decodeDataCharacter(o,E,!0),A=this.decodeDataCharacter(o,E,!1);return new uo(1597*v.getValue()+A.getValue(),v.getChecksumPortion()+4*A.getChecksumPortion(),E)}catch{return null}}decodeDataCharacter(o,c,h){let y=this.getDataCharacterCounters();for(let re=0;re<y.length;re++)y[re]=0;if(h)In.recordPatternInReverse(o,c.getStartEnd()[0],y);else{In.recordPattern(o,c.getStartEnd()[1]+1,y);for(let re=0,ne=y.length-1;re<ne;re++,ne--){let oe=y[re];y[re]=y[ne],y[ne]=oe}}let x=h?16:15,E=Et.sum(new Int32Array(y))/x,d=this.getOddCounts(),v=this.getEvenCounts(),A=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let re=0;re<y.length;re++){let ne=y[re]/E,oe=Math.floor(ne+.5);oe<1?oe=1:oe>8&&(oe=8);let fe=Math.floor(re/2);(re&1)===0?(d[fe]=oe,A[fe]=ne-oe):(v[fe]=oe,I[fe]=ne-oe)}this.adjustOddEvenCounts(h,x);let P=0,k=0;for(let re=d.length-1;re>=0;re--)k*=9,k+=d[re],P+=d[re];let F=0,G=0;for(let re=v.length-1;re>=0;re--)F*=9,F+=v[re],G+=v[re];let Q=k+3*F;if(h){if((P&1)!==0||P>12||P<4)throw new de;let re=(12-P)/2,ne=Cn.OUTSIDE_ODD_WIDEST[re],oe=9-ne,fe=ra.getRSSvalue(d,ne,!1),le=ra.getRSSvalue(v,oe,!0),ge=Cn.OUTSIDE_EVEN_TOTAL_SUBSET[re],he=Cn.OUTSIDE_GSUM[re];return new Hr(fe*ge+le+he,Q)}else{if((G&1)!==0||G>10||G<4)throw new de;let re=(10-G)/2,ne=Cn.INSIDE_ODD_WIDEST[re],oe=9-ne,fe=ra.getRSSvalue(d,ne,!0),le=ra.getRSSvalue(v,oe,!1),ge=Cn.INSIDE_ODD_TOTAL_SUBSET[re],he=Cn.INSIDE_GSUM[re];return new Hr(le*ge+fe+he,Q)}}findFinderPattern(o,c){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let y=o.getSize(),x=!1,E=0;for(;E<y&&(x=!o.get(E),c!==x);)E++;let d=0,v=E;for(let A=E;A<y;A++)if(o.get(A)!==x)h[d]++;else{if(d===3){if(ii.isFinderPattern(h))return[v,A];v+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,d--}else d++;h[d]=1,x=!x}throw new de}parseFoundFinderPattern(o,c,h,y){let x=o.get(y[0]),E=y[0]-1;for(;E>=0&&x!==o.get(E);)E--;E++;const d=y[0]-E,v=this.getDecodeFinderCounters(),A=new Int32Array(v.length);M.arraycopy(v,0,A,1,v.length-1),A[0]=d;const I=this.parseFinderValue(A,Cn.FINDER_PATTERNS);let P=E,k=y[1];return h&&(P=o.getSize()-1-P,k=o.getSize()-1-k),new qi(I,[E,y[1]],P,k,c)}adjustOddEvenCounts(o,c){let h=Et.sum(new Int32Array(this.getOddCounts())),y=Et.sum(new Int32Array(this.getEvenCounts())),x=!1,E=!1,d=!1,v=!1;o?(h>12?E=!0:h<4&&(x=!0),y>12?v=!0:y<4&&(d=!0)):(h>11?E=!0:h<5&&(x=!0),y>10?v=!0:y<4&&(d=!0));let A=h+y-c,I=(h&1)===(o?1:0),P=(y&1)===1;if(A===1)if(I){if(P)throw new de;E=!0}else{if(!P)throw new de;v=!0}else if(A===-1)if(I){if(P)throw new de;x=!0}else{if(!P)throw new de;d=!0}else if(A===0){if(I){if(!P)throw new de;h<y?(x=!0,v=!0):(E=!0,d=!0)}else if(P)throw new de}else throw new de;if(x){if(E)throw new de;ii.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(E&&ii.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(v)throw new de;ii.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&ii.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Cn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Cn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Cn.OUTSIDE_GSUM=[0,161,961,2015,2715],Cn.INSIDE_GSUM=[0,336,1036,1516],Cn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Cn.INSIDE_ODD_WIDEST=[2,4,6,8],Cn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class wi extends In{constructor(o,c){super(),this.readers=[],this.verbose=c===!0;const h=o?o.get(Z.POSSIBLE_FORMATS):null,y=o&&o.get(Z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;h?((h.includes($e.EAN_13)||h.includes($e.UPC_A)||h.includes($e.EAN_8)||h.includes($e.UPC_E))&&this.readers.push(new Ll(o)),h.includes($e.CODE_39)&&this.readers.push(new cn(y)),h.includes($e.CODE_128)&&this.readers.push(new rt),h.includes($e.ITF)&&this.readers.push(new Ze),h.includes($e.RSS_14)&&this.readers.push(new Cn),h.includes($e.RSS_EXPANDED)&&this.readers.push(new Ge(this.verbose))):(this.readers.push(new Ll(o)),this.readers.push(new cn),this.readers.push(new Ll(o)),this.readers.push(new rt),this.readers.push(new Ze),this.readers.push(new Cn),this.readers.push(new Ge(this.verbose)))}decodeRow(o,c,h){for(let y=0;y<this.readers.length;y++)try{return this.readers[y].decodeRow(o,c,h)}catch{}throw new de}reset(){this.readers.forEach(o=>o.reset())}}class ss extends Xe{constructor(o=500,c){super(new wi(c),o,c)}}class yn{constructor(o,c,h){this.ecCodewords=o,this.ecBlocks=[c],h&&this.ecBlocks.push(h)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ln{constructor(o,c){this.count=o,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class nn{constructor(o,c,h,y,x,E){this.versionNumber=o,this.symbolSizeRows=c,this.symbolSizeColumns=h,this.dataRegionSizeRows=y,this.dataRegionSizeColumns=x,this.ecBlocks=E;let d=0;const v=E.getECCodewords(),A=E.getECBlocks();for(let I of A)d+=I.getCount()*(I.getDataCodewords()+v);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(o,c){if((o&1)!==0||(c&1)!==0)throw new V;for(let h of nn.VERSIONS)if(h.symbolSizeRows===o&&h.symbolSizeColumns===c)return h;throw new V}toString(){return""+this.versionNumber}static buildVersions(){return[new nn(1,10,10,8,8,new yn(5,new ln(1,3))),new nn(2,12,12,10,10,new yn(7,new ln(1,5))),new nn(3,14,14,12,12,new yn(10,new ln(1,8))),new nn(4,16,16,14,14,new yn(12,new ln(1,12))),new nn(5,18,18,16,16,new yn(14,new ln(1,18))),new nn(6,20,20,18,18,new yn(18,new ln(1,22))),new nn(7,22,22,20,20,new yn(20,new ln(1,30))),new nn(8,24,24,22,22,new yn(24,new ln(1,36))),new nn(9,26,26,24,24,new yn(28,new ln(1,44))),new nn(10,32,32,14,14,new yn(36,new ln(1,62))),new nn(11,36,36,16,16,new yn(42,new ln(1,86))),new nn(12,40,40,18,18,new yn(48,new ln(1,114))),new nn(13,44,44,20,20,new yn(56,new ln(1,144))),new nn(14,48,48,22,22,new yn(68,new ln(1,174))),new nn(15,52,52,24,24,new yn(42,new ln(2,102))),new nn(16,64,64,14,14,new yn(56,new ln(2,140))),new nn(17,72,72,16,16,new yn(36,new ln(4,92))),new nn(18,80,80,18,18,new yn(48,new ln(4,114))),new nn(19,88,88,20,20,new yn(56,new ln(4,144))),new nn(20,96,96,22,22,new yn(68,new ln(4,174))),new nn(21,104,104,24,24,new yn(56,new ln(6,136))),new nn(22,120,120,18,18,new yn(68,new ln(6,175))),new nn(23,132,132,20,20,new yn(62,new ln(8,163))),new nn(24,144,144,22,22,new yn(62,new ln(8,156),new ln(2,155))),new nn(25,8,18,6,16,new yn(7,new ln(1,5))),new nn(26,8,32,6,14,new yn(11,new ln(1,10))),new nn(27,12,26,10,24,new yn(14,new ln(1,16))),new nn(28,12,36,10,16,new yn(18,new ln(1,22))),new nn(29,16,36,14,16,new yn(24,new ln(1,32))),new nn(30,16,48,14,22,new yn(28,new ln(1,49)))]}}nn.VERSIONS=nn.buildVersions();class Qt{constructor(o){const c=o.getHeight();if(c<8||c>144||(c&1)!==0)throw new V;this.version=Qt.readVersion(o),this.mappingBitMatrix=this.extractDataRegion(o),this.readMappingMatrix=new xe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(o){const c=o.getHeight(),h=o.getWidth();return nn.getVersionForDimensions(c,h)}readCodewords(){const o=new Int8Array(this.version.getTotalCodewords());let c=0,h=4,y=0;const x=this.mappingBitMatrix.getHeight(),E=this.mappingBitMatrix.getWidth();let d=!1,v=!1,A=!1,I=!1;do if(h===x&&y===0&&!d)o[c++]=this.readCorner1(x,E)&255,h-=2,y+=2,d=!0;else if(h===x-2&&y===0&&(E&3)!==0&&!v)o[c++]=this.readCorner2(x,E)&255,h-=2,y+=2,v=!0;else if(h===x+4&&y===2&&(E&7)===0&&!A)o[c++]=this.readCorner3(x,E)&255,h-=2,y+=2,A=!0;else if(h===x-2&&y===0&&(E&7)===4&&!I)o[c++]=this.readCorner4(x,E)&255,h-=2,y+=2,I=!0;else{do h<x&&y>=0&&!this.readMappingMatrix.get(y,h)&&(o[c++]=this.readUtah(h,y,x,E)&255),h-=2,y+=2;while(h>=0&&y<E);h+=1,y+=3;do h>=0&&y<E&&!this.readMappingMatrix.get(y,h)&&(o[c++]=this.readUtah(h,y,x,E)&255),h+=2,y-=2;while(h<x&&y>=0);h+=3,y+=1}while(h<x||y<E);if(c!==this.version.getTotalCodewords())throw new V;return o}readModule(o,c,h,y){return o<0&&(o+=h,c+=4-(h+4&7)),c<0&&(c+=y,o+=4-(y+4&7)),this.readMappingMatrix.set(c,o),this.mappingBitMatrix.get(c,o)}readUtah(o,c,h,y){let x=0;return this.readModule(o-2,c-2,h,y)&&(x|=1),x<<=1,this.readModule(o-2,c-1,h,y)&&(x|=1),x<<=1,this.readModule(o-1,c-2,h,y)&&(x|=1),x<<=1,this.readModule(o-1,c-1,h,y)&&(x|=1),x<<=1,this.readModule(o-1,c,h,y)&&(x|=1),x<<=1,this.readModule(o,c-2,h,y)&&(x|=1),x<<=1,this.readModule(o,c-1,h,y)&&(x|=1),x<<=1,this.readModule(o,c,h,y)&&(x|=1),x}readCorner1(o,c){let h=0;return this.readModule(o-1,0,o,c)&&(h|=1),h<<=1,this.readModule(o-1,1,o,c)&&(h|=1),h<<=1,this.readModule(o-1,2,o,c)&&(h|=1),h<<=1,this.readModule(0,c-2,o,c)&&(h|=1),h<<=1,this.readModule(0,c-1,o,c)&&(h|=1),h<<=1,this.readModule(1,c-1,o,c)&&(h|=1),h<<=1,this.readModule(2,c-1,o,c)&&(h|=1),h<<=1,this.readModule(3,c-1,o,c)&&(h|=1),h}readCorner2(o,c){let h=0;return this.readModule(o-3,0,o,c)&&(h|=1),h<<=1,this.readModule(o-2,0,o,c)&&(h|=1),h<<=1,this.readModule(o-1,0,o,c)&&(h|=1),h<<=1,this.readModule(0,c-4,o,c)&&(h|=1),h<<=1,this.readModule(0,c-3,o,c)&&(h|=1),h<<=1,this.readModule(0,c-2,o,c)&&(h|=1),h<<=1,this.readModule(0,c-1,o,c)&&(h|=1),h<<=1,this.readModule(1,c-1,o,c)&&(h|=1),h}readCorner3(o,c){let h=0;return this.readModule(o-1,0,o,c)&&(h|=1),h<<=1,this.readModule(o-1,c-1,o,c)&&(h|=1),h<<=1,this.readModule(0,c-3,o,c)&&(h|=1),h<<=1,this.readModule(0,c-2,o,c)&&(h|=1),h<<=1,this.readModule(0,c-1,o,c)&&(h|=1),h<<=1,this.readModule(1,c-3,o,c)&&(h|=1),h<<=1,this.readModule(1,c-2,o,c)&&(h|=1),h<<=1,this.readModule(1,c-1,o,c)&&(h|=1),h}readCorner4(o,c){let h=0;return this.readModule(o-3,0,o,c)&&(h|=1),h<<=1,this.readModule(o-2,0,o,c)&&(h|=1),h<<=1,this.readModule(o-1,0,o,c)&&(h|=1),h<<=1,this.readModule(0,c-2,o,c)&&(h|=1),h<<=1,this.readModule(0,c-1,o,c)&&(h|=1),h<<=1,this.readModule(1,c-1,o,c)&&(h|=1),h<<=1,this.readModule(2,c-1,o,c)&&(h|=1),h<<=1,this.readModule(3,c-1,o,c)&&(h|=1),h}extractDataRegion(o){const c=this.version.getSymbolSizeRows(),h=this.version.getSymbolSizeColumns();if(o.getHeight()!==c)throw new _("Dimension of bitMatrix must match the version size");const y=this.version.getDataRegionSizeRows(),x=this.version.getDataRegionSizeColumns(),E=c/y|0,d=h/x|0,v=E*y,A=d*x,I=new xe(A,v);for(let P=0;P<E;++P){const k=P*y;for(let F=0;F<d;++F){const G=F*x;for(let Q=0;Q<y;++Q){const re=P*(y+2)+1+Q,ne=k+Q;for(let oe=0;oe<x;++oe){const fe=F*(x+2)+1+oe;if(o.get(fe,re)){const le=G+oe;I.set(le,ne)}}}}}return I}}class Di{constructor(o,c){this.numDataCodewords=o,this.codewords=c}static getDataBlocks(o,c){const h=c.getECBlocks();let y=0;const x=h.getECBlocks();for(let Q of x)y+=Q.getCount();const E=new Array(y);let d=0;for(let Q of x)for(let re=0;re<Q.getCount();re++){const ne=Q.getDataCodewords(),oe=h.getECCodewords()+ne;E[d++]=new Di(ne,new Uint8Array(oe))}const A=E[0].codewords.length-h.getECCodewords(),I=A-1;let P=0;for(let Q=0;Q<I;Q++)for(let re=0;re<d;re++)E[re].codewords[Q]=o[P++];const k=c.getVersionNumber()===24,F=k?8:d;for(let Q=0;Q<F;Q++)E[Q].codewords[A-1]=o[P++];const G=E[0].codewords.length;for(let Q=A;Q<G;Q++)for(let re=0;re<d;re++){const ne=k?(re+8)%d:re,oe=k&&ne>7?Q-1:Q;E[ne].codewords[oe]=o[P++]}if(P!==o.length)throw new _;return E}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Sr{constructor(o){this.bytes=o,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(o){if(o<1||o>32||o>this.available())throw new _(""+o);let c=0,h=this.bitOffset,y=this.byteOffset;const x=this.bytes;if(h>0){const E=8-h,d=o<E?o:E,v=E-d,A=255>>8-d<<v;c=(x[y]&A)>>v,o-=d,h+=d,h===8&&(h=0,y++)}if(o>0){for(;o>=8;)c=c<<8|x[y]&255,y++,o-=8;if(o>0){const E=8-o,d=255>>E<<E;c=c<<o|(x[y]&d)>>E,h+=o}}return this.bitOffset=h,this.byteOffset=y,c}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var rn;(function(Y){Y[Y.PAD_ENCODE=0]="PAD_ENCODE",Y[Y.ASCII_ENCODE=1]="ASCII_ENCODE",Y[Y.C40_ENCODE=2]="C40_ENCODE",Y[Y.TEXT_ENCODE=3]="TEXT_ENCODE",Y[Y.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",Y[Y.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",Y[Y.BASE256_ENCODE=6]="BASE256_ENCODE"})(rn||(rn={}));class ai{static decode(o){const c=new Sr(o),h=new J,y=new J,x=new Array;let E=rn.ASCII_ENCODE;do if(E===rn.ASCII_ENCODE)E=this.decodeAsciiSegment(c,h,y);else{switch(E){case rn.C40_ENCODE:this.decodeC40Segment(c,h);break;case rn.TEXT_ENCODE:this.decodeTextSegment(c,h);break;case rn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(c,h);break;case rn.EDIFACT_ENCODE:this.decodeEdifactSegment(c,h);break;case rn.BASE256_ENCODE:this.decodeBase256Segment(c,h,x);break;default:throw new V}E=rn.ASCII_ENCODE}while(E!==rn.PAD_ENCODE&&c.available()>0);return y.length()>0&&h.append(y.toString()),new Ne(o,h.toString(),x.length===0?null:x,null)}static decodeAsciiSegment(o,c,h){let y=!1;do{let x=o.readBits(8);if(x===0)throw new V;if(x<=128)return y&&(x+=128),c.append(String.fromCharCode(x-1)),rn.ASCII_ENCODE;if(x===129)return rn.PAD_ENCODE;if(x<=229){const E=x-130;E<10&&c.append("0"),c.append(""+E)}else switch(x){case 230:return rn.C40_ENCODE;case 231:return rn.BASE256_ENCODE;case 232:c.append("");break;case 233:case 234:break;case 235:y=!0;break;case 236:c.append("[)>05"),h.insert(0,"");break;case 237:c.append("[)>06"),h.insert(0,"");break;case 238:return rn.ANSIX12_ENCODE;case 239:return rn.TEXT_ENCODE;case 240:return rn.EDIFACT_ENCODE;case 241:break;default:if(x!==254||o.available()!==0)throw new V;break}}while(o.available()>0);return rn.ASCII_ENCODE}static decodeC40Segment(o,c){let h=!1;const y=[];let x=0;do{if(o.available()===8)return;const E=o.readBits(8);if(E===254)return;this.parseTwoBytes(E,o.readBits(8),y);for(let d=0;d<3;d++){const v=y[d];switch(x){case 0:if(v<3)x=v+1;else if(v<this.C40_BASIC_SET_CHARS.length){const A=this.C40_BASIC_SET_CHARS[v];h?(c.append(String.fromCharCode(A.charCodeAt(0)+128)),h=!1):c.append(A)}else throw new V;break;case 1:h?(c.append(String.fromCharCode(v+128)),h=!1):c.append(String.fromCharCode(v)),x=0;break;case 2:if(v<this.C40_SHIFT2_SET_CHARS.length){const A=this.C40_SHIFT2_SET_CHARS[v];h?(c.append(String.fromCharCode(A.charCodeAt(0)+128)),h=!1):c.append(A)}else switch(v){case 27:c.append("");break;case 30:h=!0;break;default:throw new V}x=0;break;case 3:h?(c.append(String.fromCharCode(v+224)),h=!1):c.append(String.fromCharCode(v+96)),x=0;break;default:throw new V}}}while(o.available()>0)}static decodeTextSegment(o,c){let h=!1,y=[],x=0;do{if(o.available()===8)return;const E=o.readBits(8);if(E===254)return;this.parseTwoBytes(E,o.readBits(8),y);for(let d=0;d<3;d++){const v=y[d];switch(x){case 0:if(v<3)x=v+1;else if(v<this.TEXT_BASIC_SET_CHARS.length){const A=this.TEXT_BASIC_SET_CHARS[v];h?(c.append(String.fromCharCode(A.charCodeAt(0)+128)),h=!1):c.append(A)}else throw new V;break;case 1:h?(c.append(String.fromCharCode(v+128)),h=!1):c.append(String.fromCharCode(v)),x=0;break;case 2:if(v<this.TEXT_SHIFT2_SET_CHARS.length){const A=this.TEXT_SHIFT2_SET_CHARS[v];h?(c.append(String.fromCharCode(A.charCodeAt(0)+128)),h=!1):c.append(A)}else switch(v){case 27:c.append("");break;case 30:h=!0;break;default:throw new V}x=0;break;case 3:if(v<this.TEXT_SHIFT3_SET_CHARS.length){const A=this.TEXT_SHIFT3_SET_CHARS[v];h?(c.append(String.fromCharCode(A.charCodeAt(0)+128)),h=!1):c.append(A),x=0}else throw new V;break;default:throw new V}}}while(o.available()>0)}static decodeAnsiX12Segment(o,c){const h=[];do{if(o.available()===8)return;const y=o.readBits(8);if(y===254)return;this.parseTwoBytes(y,o.readBits(8),h);for(let x=0;x<3;x++){const E=h[x];switch(E){case 0:c.append("\r");break;case 1:c.append("*");break;case 2:c.append(">");break;case 3:c.append(" ");break;default:if(E<14)c.append(String.fromCharCode(E+44));else if(E<40)c.append(String.fromCharCode(E+51));else throw new V;break}}}while(o.available()>0)}static parseTwoBytes(o,c,h){let y=(o<<8)+c-1,x=Math.floor(y/1600);h[0]=x,y-=x*1600,x=Math.floor(y/40),h[1]=x,h[2]=y-x*40}static decodeEdifactSegment(o,c){do{if(o.available()<=16)return;for(let h=0;h<4;h++){let y=o.readBits(6);if(y===31){const x=8-o.getBitOffset();x!==8&&o.readBits(x);return}(y&32)===0&&(y|=64),c.append(String.fromCharCode(y))}}while(o.available()>0)}static decodeBase256Segment(o,c,h){let y=1+o.getByteOffset();const x=this.unrandomize255State(o.readBits(8),y++);let E;if(x===0?E=o.available()/8|0:x<250?E=x:E=250*(x-249)+this.unrandomize255State(o.readBits(8),y++),E<0)throw new V;const d=new Uint8Array(E);for(let v=0;v<E;v++){if(o.available()<8)throw new V;d[v]=this.unrandomize255State(o.readBits(8),y++)}h.push(d);try{c.append(ie.decode(d,X.ISO88591))}catch(v){throw new mn("Platform does not support required encoding: "+v.message)}}static unrandomize255State(o,c){const h=149*c%255+1,y=o-h;return y>=0?y:y+256}}ai.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ai.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ai.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ai.TEXT_SHIFT2_SET_CHARS=ai.C40_SHIFT2_SET_CHARS,ai.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Jo{constructor(){this.rsDecoder=new Wn(Rt.DATA_MATRIX_FIELD_256)}decode(o){const c=new Qt(o),h=c.getVersion(),y=c.readCodewords(),x=Di.getDataBlocks(y,h);let E=0;for(let A of x)E+=A.getNumDataCodewords();const d=new Uint8Array(E),v=x.length;for(let A=0;A<v;A++){const I=x[A],P=I.getCodewords(),k=I.getNumDataCodewords();this.correctErrors(P,k);for(let F=0;F<k;F++)d[F*v+A]=P[F]}return ai.decode(d)}correctErrors(o,c){const h=new Int32Array(o);try{this.rsDecoder.decode(h,o.length-c)}catch{throw new N}for(let y=0;y<c;y++)o[y]=h[y]}}class Vt{constructor(o){this.image=o,this.rectangleDetector=new hr(this.image)}detect(){const o=this.rectangleDetector.detect();let c=this.detectSolid1(o);if(c=this.detectSolid2(c),c[3]=this.correctTopRight(c),!c[3])throw new de;c=this.shiftToModuleCenter(c);const h=c[0],y=c[1],x=c[2],E=c[3];let d=this.transitionsBetween(h,E)+1,v=this.transitionsBetween(x,E)+1;(d&1)===1&&(d+=1),(v&1)===1&&(v+=1),4*d<7*v&&4*v<7*d&&(d=v=Math.max(d,v));let A=Vt.sampleGrid(this.image,h,y,x,E,d,v);return new na(A,[h,y,x,E])}static shiftPoint(o,c,h){let y=(c.getX()-o.getX())/(h+1),x=(c.getY()-o.getY())/(h+1);return new at(o.getX()+y,o.getY()+x)}static moveAway(o,c,h){let y=o.getX(),x=o.getY();return y<c?y-=1:y+=1,x<h?x-=1:x+=1,new at(y,x)}detectSolid1(o){let c=o[0],h=o[1],y=o[3],x=o[2],E=this.transitionsBetween(c,h),d=this.transitionsBetween(h,y),v=this.transitionsBetween(y,x),A=this.transitionsBetween(x,c),I=E,P=[x,c,h,y];return I>d&&(I=d,P[0]=c,P[1]=h,P[2]=y,P[3]=x),I>v&&(I=v,P[0]=h,P[1]=y,P[2]=x,P[3]=c),I>A&&(P[0]=y,P[1]=x,P[2]=c,P[3]=h),P}detectSolid2(o){let c=o[0],h=o[1],y=o[2],x=o[3],E=this.transitionsBetween(c,x),d=Vt.shiftPoint(h,y,(E+1)*4),v=Vt.shiftPoint(y,h,(E+1)*4),A=this.transitionsBetween(d,c),I=this.transitionsBetween(v,x);return A<I?(o[0]=c,o[1]=h,o[2]=y,o[3]=x):(o[0]=h,o[1]=y,o[2]=x,o[3]=c),o}correctTopRight(o){let c=o[0],h=o[1],y=o[2],x=o[3],E=this.transitionsBetween(c,x),d=this.transitionsBetween(h,x),v=Vt.shiftPoint(c,h,(d+1)*4),A=Vt.shiftPoint(y,h,(E+1)*4);E=this.transitionsBetween(v,x),d=this.transitionsBetween(A,x);let I=new at(x.getX()+(y.getX()-h.getX())/(E+1),x.getY()+(y.getY()-h.getY())/(E+1)),P=new at(x.getX()+(c.getX()-h.getX())/(d+1),x.getY()+(c.getY()-h.getY())/(d+1));if(!this.isValid(I))return this.isValid(P)?P:null;if(!this.isValid(P))return I;let k=this.transitionsBetween(v,I)+this.transitionsBetween(A,I),F=this.transitionsBetween(v,P)+this.transitionsBetween(A,P);return k>F?I:P}shiftToModuleCenter(o){let c=o[0],h=o[1],y=o[2],x=o[3],E=this.transitionsBetween(c,x)+1,d=this.transitionsBetween(y,x)+1,v=Vt.shiftPoint(c,h,d*4),A=Vt.shiftPoint(y,h,E*4);E=this.transitionsBetween(v,x)+1,d=this.transitionsBetween(A,x)+1,(E&1)===1&&(E+=1),(d&1)===1&&(d+=1);let I=(c.getX()+h.getX()+y.getX()+x.getX())/4,P=(c.getY()+h.getY()+y.getY()+x.getY())/4;c=Vt.moveAway(c,I,P),h=Vt.moveAway(h,I,P),y=Vt.moveAway(y,I,P),x=Vt.moveAway(x,I,P);let k,F;return v=Vt.shiftPoint(c,h,d*4),v=Vt.shiftPoint(v,x,E*4),k=Vt.shiftPoint(h,c,d*4),k=Vt.shiftPoint(k,y,E*4),A=Vt.shiftPoint(y,x,d*4),A=Vt.shiftPoint(A,h,E*4),F=Vt.shiftPoint(x,y,d*4),F=Vt.shiftPoint(F,c,E*4),[v,k,A,F]}isValid(o){return o.getX()>=0&&o.getX()<this.image.getWidth()&&o.getY()>0&&o.getY()<this.image.getHeight()}static sampleGrid(o,c,h,y,x,E,d){return bi.getInstance().sampleGrid(o,E,d,.5,.5,E-.5,.5,E-.5,d-.5,.5,d-.5,c.getX(),c.getY(),x.getX(),x.getY(),y.getX(),y.getY(),h.getX(),h.getY())}transitionsBetween(o,c){let h=Math.trunc(o.getX()),y=Math.trunc(o.getY()),x=Math.trunc(c.getX()),E=Math.trunc(c.getY()),d=Math.abs(E-y)>Math.abs(x-h);if(d){let Q=h;h=y,y=Q,Q=x,x=E,E=Q}let v=Math.abs(x-h),A=Math.abs(E-y),I=-v/2,P=y<E?1:-1,k=h<x?1:-1,F=0,G=this.image.get(d?y:h,d?h:y);for(let Q=h,re=y;Q!==x;Q+=k){let ne=this.image.get(d?re:Q,d?Q:re);if(ne!==G&&(F++,G=ne),I+=A,I>0){if(re===E)break;re+=P,I-=v}}return F}}class Gi{constructor(){this.decoder=new Jo}decode(o,c=null){let h,y;if(c!=null&&c.has(Z.PURE_BARCODE)){const A=Gi.extractPureBits(o.getBlackMatrix());h=this.decoder.decode(A),y=Gi.NO_POINTS}else{const A=new Vt(o.getBlackMatrix()).detect();h=this.decoder.decode(A.getBits()),y=A.getPoints()}const x=h.getRawBytes(),E=new Ve(h.getText(),x,8*x.length,y,$e.DATA_MATRIX,M.currentTimeMillis()),d=h.getByteSegments();d!=null&&E.putMetadata(ut.BYTE_SEGMENTS,d);const v=h.getECLevel();return v!=null&&E.putMetadata(ut.ERROR_CORRECTION_LEVEL,v),E}reset(){}static extractPureBits(o){const c=o.getTopLeftOnBit(),h=o.getBottomRightOnBit();if(c==null||h==null)throw new de;const y=this.moduleSize(c,o);let x=c[1];const E=h[1];let d=c[0];const A=(h[0]-d+1)/y,I=(E-x+1)/y;if(A<=0||I<=0)throw new de;const P=y/2;x+=P,d+=P;const k=new xe(A,I);for(let F=0;F<I;F++){const G=x+F*y;for(let Q=0;Q<A;Q++)o.get(d+Q*y,G)&&k.set(Q,F)}return k}static moduleSize(o,c){const h=c.getWidth();let y=o[0];const x=o[1];for(;y<h&&c.get(y,x);)y++;if(y===h)throw new de;const E=y-o[0];if(E===0)throw new de;return E}}Gi.NO_POINTS=[];class vn extends Xe{constructor(o=500){super(new Gi,o)}}var ki;(function(Y){Y[Y.L=0]="L",Y[Y.M=1]="M",Y[Y.Q=2]="Q",Y[Y.H=3]="H"})(ki||(ki={}));class $t{constructor(o,c,h){this.value=o,this.stringValue=c,this.bits=h,$t.FOR_BITS.set(h,this),$t.FOR_VALUE.set(o,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(o){switch(o){case"L":return $t.L;case"M":return $t.M;case"Q":return $t.Q;case"H":return $t.H;default:throw new b(o+"not available")}}toString(){return this.stringValue}equals(o){if(!(o instanceof $t))return!1;const c=o;return this.value===c.value}static forBits(o){if(o<0||o>=$t.FOR_BITS.size)throw new _;return $t.FOR_BITS.get(o)}}$t.FOR_BITS=new Map,$t.FOR_VALUE=new Map,$t.L=new $t(ki.L,"L",1),$t.M=new $t(ki.M,"M",0),$t.Q=new $t(ki.Q,"Q",3),$t.H=new $t(ki.H,"H",2);class Zn{constructor(o){this.errorCorrectionLevel=$t.forBits(o>>3&3),this.dataMask=o&7}static numBitsDiffering(o,c){return K.bitCount(o^c)}static decodeFormatInformation(o,c){const h=Zn.doDecodeFormatInformation(o,c);return h!==null?h:Zn.doDecodeFormatInformation(o^Zn.FORMAT_INFO_MASK_QR,c^Zn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(o,c){let h=Number.MAX_SAFE_INTEGER,y=0;for(const x of Zn.FORMAT_INFO_DECODE_LOOKUP){const E=x[0];if(E===o||E===c)return new Zn(x[1]);let d=Zn.numBitsDiffering(o,E);d<h&&(y=x[1],h=d),o!==c&&(d=Zn.numBitsDiffering(c,E),d<h&&(y=x[1],h=d))}return h<=3?new Zn(y):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(o){if(!(o instanceof Zn))return!1;const c=o;return this.errorCorrectionLevel===c.errorCorrectionLevel&&this.dataMask===c.dataMask}}Zn.FORMAT_INFO_MASK_QR=21522,Zn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Te{constructor(o,...c){this.ecCodewordsPerBlock=o,this.ecBlocks=c}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let o=0;const c=this.ecBlocks;for(const h of c)o+=h.getCount();return o}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ce{constructor(o,c){this.count=o,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class wt{constructor(o,c,...h){this.versionNumber=o,this.alignmentPatternCenters=c,this.ecBlocks=h;let y=0;const x=h[0].getECCodewordsPerBlock(),E=h[0].getECBlocks();for(const d of E)y+=d.getCount()*(d.getDataCodewords()+x);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(o){return this.ecBlocks[o.getValue()]}static getProvisionalVersionForDimension(o){if(o%4!==1)throw new V;try{return this.getVersionForNumber((o-17)/4)}catch{throw new V}}static getVersionForNumber(o){if(o<1||o>40)throw new _;return wt.VERSIONS[o-1]}static decodeVersionInformation(o){let c=Number.MAX_SAFE_INTEGER,h=0;for(let y=0;y<wt.VERSION_DECODE_INFO.length;y++){const x=wt.VERSION_DECODE_INFO[y];if(x===o)return wt.getVersionForNumber(y+7);const E=Zn.numBitsDiffering(o,x);E<c&&(h=y+7,c=E)}return c<=3?wt.getVersionForNumber(h):null}buildFunctionPattern(){const o=this.getDimensionForVersion(),c=new xe(o);c.setRegion(0,0,9,9),c.setRegion(o-8,0,8,9),c.setRegion(0,o-8,9,8);const h=this.alignmentPatternCenters.length;for(let y=0;y<h;y++){const x=this.alignmentPatternCenters[y]-2;for(let E=0;E<h;E++)y===0&&(E===0||E===h-1)||y===h-1&&E===0||c.setRegion(this.alignmentPatternCenters[E]-2,x,5,5)}return c.setRegion(6,9,1,o-17),c.setRegion(9,6,o-17,1),this.versionNumber>6&&(c.setRegion(o-11,0,3,6),c.setRegion(0,o-11,6,3)),c}toString(){return""+this.versionNumber}}wt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),wt.VERSIONS=[new wt(1,new Int32Array(0),new Te(7,new ce(1,19)),new Te(10,new ce(1,16)),new Te(13,new ce(1,13)),new Te(17,new ce(1,9))),new wt(2,Int32Array.from([6,18]),new Te(10,new ce(1,34)),new Te(16,new ce(1,28)),new Te(22,new ce(1,22)),new Te(28,new ce(1,16))),new wt(3,Int32Array.from([6,22]),new Te(15,new ce(1,55)),new Te(26,new ce(1,44)),new Te(18,new ce(2,17)),new Te(22,new ce(2,13))),new wt(4,Int32Array.from([6,26]),new Te(20,new ce(1,80)),new Te(18,new ce(2,32)),new Te(26,new ce(2,24)),new Te(16,new ce(4,9))),new wt(5,Int32Array.from([6,30]),new Te(26,new ce(1,108)),new Te(24,new ce(2,43)),new Te(18,new ce(2,15),new ce(2,16)),new Te(22,new ce(2,11),new ce(2,12))),new wt(6,Int32Array.from([6,34]),new Te(18,new ce(2,68)),new Te(16,new ce(4,27)),new Te(24,new ce(4,19)),new Te(28,new ce(4,15))),new wt(7,Int32Array.from([6,22,38]),new Te(20,new ce(2,78)),new Te(18,new ce(4,31)),new Te(18,new ce(2,14),new ce(4,15)),new Te(26,new ce(4,13),new ce(1,14))),new wt(8,Int32Array.from([6,24,42]),new Te(24,new ce(2,97)),new Te(22,new ce(2,38),new ce(2,39)),new Te(22,new ce(4,18),new ce(2,19)),new Te(26,new ce(4,14),new ce(2,15))),new wt(9,Int32Array.from([6,26,46]),new Te(30,new ce(2,116)),new Te(22,new ce(3,36),new ce(2,37)),new Te(20,new ce(4,16),new ce(4,17)),new Te(24,new ce(4,12),new ce(4,13))),new wt(10,Int32Array.from([6,28,50]),new Te(18,new ce(2,68),new ce(2,69)),new Te(26,new ce(4,43),new ce(1,44)),new Te(24,new ce(6,19),new ce(2,20)),new Te(28,new ce(6,15),new ce(2,16))),new wt(11,Int32Array.from([6,30,54]),new Te(20,new ce(4,81)),new Te(30,new ce(1,50),new ce(4,51)),new Te(28,new ce(4,22),new ce(4,23)),new Te(24,new ce(3,12),new ce(8,13))),new wt(12,Int32Array.from([6,32,58]),new Te(24,new ce(2,92),new ce(2,93)),new Te(22,new ce(6,36),new ce(2,37)),new Te(26,new ce(4,20),new ce(6,21)),new Te(28,new ce(7,14),new ce(4,15))),new wt(13,Int32Array.from([6,34,62]),new Te(26,new ce(4,107)),new Te(22,new ce(8,37),new ce(1,38)),new Te(24,new ce(8,20),new ce(4,21)),new Te(22,new ce(12,11),new ce(4,12))),new wt(14,Int32Array.from([6,26,46,66]),new Te(30,new ce(3,115),new ce(1,116)),new Te(24,new ce(4,40),new ce(5,41)),new Te(20,new ce(11,16),new ce(5,17)),new Te(24,new ce(11,12),new ce(5,13))),new wt(15,Int32Array.from([6,26,48,70]),new Te(22,new ce(5,87),new ce(1,88)),new Te(24,new ce(5,41),new ce(5,42)),new Te(30,new ce(5,24),new ce(7,25)),new Te(24,new ce(11,12),new ce(7,13))),new wt(16,Int32Array.from([6,26,50,74]),new Te(24,new ce(5,98),new ce(1,99)),new Te(28,new ce(7,45),new ce(3,46)),new Te(24,new ce(15,19),new ce(2,20)),new Te(30,new ce(3,15),new ce(13,16))),new wt(17,Int32Array.from([6,30,54,78]),new Te(28,new ce(1,107),new ce(5,108)),new Te(28,new ce(10,46),new ce(1,47)),new Te(28,new ce(1,22),new ce(15,23)),new Te(28,new ce(2,14),new ce(17,15))),new wt(18,Int32Array.from([6,30,56,82]),new Te(30,new ce(5,120),new ce(1,121)),new Te(26,new ce(9,43),new ce(4,44)),new Te(28,new ce(17,22),new ce(1,23)),new Te(28,new ce(2,14),new ce(19,15))),new wt(19,Int32Array.from([6,30,58,86]),new Te(28,new ce(3,113),new ce(4,114)),new Te(26,new ce(3,44),new ce(11,45)),new Te(26,new ce(17,21),new ce(4,22)),new Te(26,new ce(9,13),new ce(16,14))),new wt(20,Int32Array.from([6,34,62,90]),new Te(28,new ce(3,107),new ce(5,108)),new Te(26,new ce(3,41),new ce(13,42)),new Te(30,new ce(15,24),new ce(5,25)),new Te(28,new ce(15,15),new ce(10,16))),new wt(21,Int32Array.from([6,28,50,72,94]),new Te(28,new ce(4,116),new ce(4,117)),new Te(26,new ce(17,42)),new Te(28,new ce(17,22),new ce(6,23)),new Te(30,new ce(19,16),new ce(6,17))),new wt(22,Int32Array.from([6,26,50,74,98]),new Te(28,new ce(2,111),new ce(7,112)),new Te(28,new ce(17,46)),new Te(30,new ce(7,24),new ce(16,25)),new Te(24,new ce(34,13))),new wt(23,Int32Array.from([6,30,54,78,102]),new Te(30,new ce(4,121),new ce(5,122)),new Te(28,new ce(4,47),new ce(14,48)),new Te(30,new ce(11,24),new ce(14,25)),new Te(30,new ce(16,15),new ce(14,16))),new wt(24,Int32Array.from([6,28,54,80,106]),new Te(30,new ce(6,117),new ce(4,118)),new Te(28,new ce(6,45),new ce(14,46)),new Te(30,new ce(11,24),new ce(16,25)),new Te(30,new ce(30,16),new ce(2,17))),new wt(25,Int32Array.from([6,32,58,84,110]),new Te(26,new ce(8,106),new ce(4,107)),new Te(28,new ce(8,47),new ce(13,48)),new Te(30,new ce(7,24),new ce(22,25)),new Te(30,new ce(22,15),new ce(13,16))),new wt(26,Int32Array.from([6,30,58,86,114]),new Te(28,new ce(10,114),new ce(2,115)),new Te(28,new ce(19,46),new ce(4,47)),new Te(28,new ce(28,22),new ce(6,23)),new Te(30,new ce(33,16),new ce(4,17))),new wt(27,Int32Array.from([6,34,62,90,118]),new Te(30,new ce(8,122),new ce(4,123)),new Te(28,new ce(22,45),new ce(3,46)),new Te(30,new ce(8,23),new ce(26,24)),new Te(30,new ce(12,15),new ce(28,16))),new wt(28,Int32Array.from([6,26,50,74,98,122]),new Te(30,new ce(3,117),new ce(10,118)),new Te(28,new ce(3,45),new ce(23,46)),new Te(30,new ce(4,24),new ce(31,25)),new Te(30,new ce(11,15),new ce(31,16))),new wt(29,Int32Array.from([6,30,54,78,102,126]),new Te(30,new ce(7,116),new ce(7,117)),new Te(28,new ce(21,45),new ce(7,46)),new Te(30,new ce(1,23),new ce(37,24)),new Te(30,new ce(19,15),new ce(26,16))),new wt(30,Int32Array.from([6,26,52,78,104,130]),new Te(30,new ce(5,115),new ce(10,116)),new Te(28,new ce(19,47),new ce(10,48)),new Te(30,new ce(15,24),new ce(25,25)),new Te(30,new ce(23,15),new ce(25,16))),new wt(31,Int32Array.from([6,30,56,82,108,134]),new Te(30,new ce(13,115),new ce(3,116)),new Te(28,new ce(2,46),new ce(29,47)),new Te(30,new ce(42,24),new ce(1,25)),new Te(30,new ce(23,15),new ce(28,16))),new wt(32,Int32Array.from([6,34,60,86,112,138]),new Te(30,new ce(17,115)),new Te(28,new ce(10,46),new ce(23,47)),new Te(30,new ce(10,24),new ce(35,25)),new Te(30,new ce(19,15),new ce(35,16))),new wt(33,Int32Array.from([6,30,58,86,114,142]),new Te(30,new ce(17,115),new ce(1,116)),new Te(28,new ce(14,46),new ce(21,47)),new Te(30,new ce(29,24),new ce(19,25)),new Te(30,new ce(11,15),new ce(46,16))),new wt(34,Int32Array.from([6,34,62,90,118,146]),new Te(30,new ce(13,115),new ce(6,116)),new Te(28,new ce(14,46),new ce(23,47)),new Te(30,new ce(44,24),new ce(7,25)),new Te(30,new ce(59,16),new ce(1,17))),new wt(35,Int32Array.from([6,30,54,78,102,126,150]),new Te(30,new ce(12,121),new ce(7,122)),new Te(28,new ce(12,47),new ce(26,48)),new Te(30,new ce(39,24),new ce(14,25)),new Te(30,new ce(22,15),new ce(41,16))),new wt(36,Int32Array.from([6,24,50,76,102,128,154]),new Te(30,new ce(6,121),new ce(14,122)),new Te(28,new ce(6,47),new ce(34,48)),new Te(30,new ce(46,24),new ce(10,25)),new Te(30,new ce(2,15),new ce(64,16))),new wt(37,Int32Array.from([6,28,54,80,106,132,158]),new Te(30,new ce(17,122),new ce(4,123)),new Te(28,new ce(29,46),new ce(14,47)),new Te(30,new ce(49,24),new ce(10,25)),new Te(30,new ce(24,15),new ce(46,16))),new wt(38,Int32Array.from([6,32,58,84,110,136,162]),new Te(30,new ce(4,122),new ce(18,123)),new Te(28,new ce(13,46),new ce(32,47)),new Te(30,new ce(48,24),new ce(14,25)),new Te(30,new ce(42,15),new ce(32,16))),new wt(39,Int32Array.from([6,26,54,82,110,138,166]),new Te(30,new ce(20,117),new ce(4,118)),new Te(28,new ce(40,47),new ce(7,48)),new Te(30,new ce(43,24),new ce(22,25)),new Te(30,new ce(10,15),new ce(67,16))),new wt(40,Int32Array.from([6,30,58,86,114,142,170]),new Te(30,new ce(19,118),new ce(6,119)),new Te(28,new ce(18,47),new ce(31,48)),new Te(30,new ce(34,24),new ce(34,25)),new Te(30,new ce(20,15),new ce(61,16)))];var Pr;(function(Y){Y[Y.DATA_MASK_000=0]="DATA_MASK_000",Y[Y.DATA_MASK_001=1]="DATA_MASK_001",Y[Y.DATA_MASK_010=2]="DATA_MASK_010",Y[Y.DATA_MASK_011=3]="DATA_MASK_011",Y[Y.DATA_MASK_100=4]="DATA_MASK_100",Y[Y.DATA_MASK_101=5]="DATA_MASK_101",Y[Y.DATA_MASK_110=6]="DATA_MASK_110",Y[Y.DATA_MASK_111=7]="DATA_MASK_111"})(Pr||(Pr={}));class Rr{constructor(o,c){this.value=o,this.isMasked=c}unmaskBitMatrix(o,c){for(let h=0;h<c;h++)for(let y=0;y<c;y++)this.isMasked(h,y)&&o.flip(y,h)}}Rr.values=new Map([[Pr.DATA_MASK_000,new Rr(Pr.DATA_MASK_000,(Y,o)=>(Y+o&1)===0)],[Pr.DATA_MASK_001,new Rr(Pr.DATA_MASK_001,(Y,o)=>(Y&1)===0)],[Pr.DATA_MASK_010,new Rr(Pr.DATA_MASK_010,(Y,o)=>o%3===0)],[Pr.DATA_MASK_011,new Rr(Pr.DATA_MASK_011,(Y,o)=>(Y+o)%3===0)],[Pr.DATA_MASK_100,new Rr(Pr.DATA_MASK_100,(Y,o)=>(Math.floor(Y/2)+Math.floor(o/3)&1)===0)],[Pr.DATA_MASK_101,new Rr(Pr.DATA_MASK_101,(Y,o)=>Y*o%6===0)],[Pr.DATA_MASK_110,new Rr(Pr.DATA_MASK_110,(Y,o)=>Y*o%6<3)],[Pr.DATA_MASK_111,new Rr(Pr.DATA_MASK_111,(Y,o)=>(Y+o+Y*o%3&1)===0)]]);class Hi{constructor(o){const c=o.getHeight();if(c<21||(c&3)!==1)throw new V;this.bitMatrix=o}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let o=0;for(let x=0;x<6;x++)o=this.copyBit(x,8,o);o=this.copyBit(7,8,o),o=this.copyBit(8,8,o),o=this.copyBit(8,7,o);for(let x=5;x>=0;x--)o=this.copyBit(8,x,o);const c=this.bitMatrix.getHeight();let h=0;const y=c-7;for(let x=c-1;x>=y;x--)h=this.copyBit(8,x,h);for(let x=c-8;x<c;x++)h=this.copyBit(x,8,h);if(this.parsedFormatInfo=Zn.decodeFormatInformation(o,h),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new V}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const o=this.bitMatrix.getHeight(),c=Math.floor((o-17)/4);if(c<=6)return wt.getVersionForNumber(c);let h=0;const y=o-11;for(let E=5;E>=0;E--)for(let d=o-9;d>=y;d--)h=this.copyBit(d,E,h);let x=wt.decodeVersionInformation(h);if(x!==null&&x.getDimensionForVersion()===o)return this.parsedVersion=x,x;h=0;for(let E=5;E>=0;E--)for(let d=o-9;d>=y;d--)h=this.copyBit(E,d,h);if(x=wt.decodeVersionInformation(h),x!==null&&x.getDimensionForVersion()===o)return this.parsedVersion=x,x;throw new V}copyBit(o,c,h){return(this.isMirror?this.bitMatrix.get(c,o):this.bitMatrix.get(o,c))?h<<1|1:h<<1}readCodewords(){const o=this.readFormatInformation(),c=this.readVersion(),h=Rr.values.get(o.getDataMask()),y=this.bitMatrix.getHeight();h.unmaskBitMatrix(this.bitMatrix,y);const x=c.buildFunctionPattern();let E=!0;const d=new Uint8Array(c.getTotalCodewords());let v=0,A=0,I=0;for(let P=y-1;P>0;P-=2){P===6&&P--;for(let k=0;k<y;k++){const F=E?y-1-k:k;for(let G=0;G<2;G++)x.get(P-G,F)||(I++,A<<=1,this.bitMatrix.get(P-G,F)&&(A|=1),I===8&&(d[v++]=A,I=0,A=0))}E=!E}if(v!==c.getTotalCodewords())throw new V;return d}remask(){if(this.parsedFormatInfo===null)return;const o=Rr.values[this.parsedFormatInfo.getDataMask()],c=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,c)}setMirror(o){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=o}mirror(){const o=this.bitMatrix;for(let c=0,h=o.getWidth();c<h;c++)for(let y=c+1,x=o.getHeight();y<x;y++)o.get(c,y)!==o.get(y,c)&&(o.flip(y,c),o.flip(c,y))}}class el{constructor(o,c){this.numDataCodewords=o,this.codewords=c}static getDataBlocks(o,c,h){if(o.length!==c.getTotalCodewords())throw new _;const y=c.getECBlocksForLevel(h);let x=0;const E=y.getECBlocks();for(const G of E)x+=G.getCount();const d=new Array(x);let v=0;for(const G of E)for(let Q=0;Q<G.getCount();Q++){const re=G.getDataCodewords(),ne=y.getECCodewordsPerBlock()+re;d[v++]=new el(re,new Uint8Array(ne))}const A=d[0].codewords.length;let I=d.length-1;for(;I>=0&&d[I].codewords.length!==A;)I--;I++;const P=A-y.getECCodewordsPerBlock();let k=0;for(let G=0;G<P;G++)for(let Q=0;Q<v;Q++)d[Q].codewords[G]=o[k++];for(let G=I;G<v;G++)d[G].codewords[P]=o[k++];const F=d[0].codewords.length;for(let G=P;G<F;G++)for(let Q=0;Q<v;Q++){const re=Q<I?G:G+1;d[Q].codewords[re]=o[k++]}return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ut;(function(Y){Y[Y.TERMINATOR=0]="TERMINATOR",Y[Y.NUMERIC=1]="NUMERIC",Y[Y.ALPHANUMERIC=2]="ALPHANUMERIC",Y[Y.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",Y[Y.BYTE=4]="BYTE",Y[Y.ECI=5]="ECI",Y[Y.KANJI=6]="KANJI",Y[Y.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",Y[Y.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",Y[Y.HANZI=9]="HANZI"})(Ut||(Ut={}));class Nt{constructor(o,c,h,y){this.value=o,this.stringValue=c,this.characterCountBitsForVersions=h,this.bits=y,Nt.FOR_BITS.set(y,this),Nt.FOR_VALUE.set(o,this)}static forBits(o){const c=Nt.FOR_BITS.get(o);if(c===void 0)throw new _;return c}getCharacterCountBits(o){const c=o.getVersionNumber();let h;return c<=9?h=0:c<=26?h=1:h=2,this.characterCountBitsForVersions[h]}getValue(){return this.value}getBits(){return this.bits}equals(o){if(!(o instanceof Nt))return!1;const c=o;return this.value===c.value}toString(){return this.stringValue}}Nt.FOR_BITS=new Map,Nt.FOR_VALUE=new Map,Nt.TERMINATOR=new Nt(Ut.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Nt.NUMERIC=new Nt(Ut.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Nt.ALPHANUMERIC=new Nt(Ut.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Nt.STRUCTURED_APPEND=new Nt(Ut.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Nt.BYTE=new Nt(Ut.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Nt.ECI=new Nt(Ut.ECI,"ECI",Int32Array.from([0,0,0]),7),Nt.KANJI=new Nt(Ut.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Nt.FNC1_FIRST_POSITION=new Nt(Ut.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Nt.FNC1_SECOND_POSITION=new Nt(Ut.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Nt.HANZI=new Nt(Ut.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Vn{static decode(o,c,h,y){const x=new Sr(o);let E=new J;const d=new Array;let v=-1,A=-1;try{let I=null,P=!1,k;do{if(x.available()<4)k=Nt.TERMINATOR;else{const F=x.readBits(4);k=Nt.forBits(F)}switch(k){case Nt.TERMINATOR:break;case Nt.FNC1_FIRST_POSITION:case Nt.FNC1_SECOND_POSITION:P=!0;break;case Nt.STRUCTURED_APPEND:if(x.available()<16)throw new V;v=x.readBits(8),A=x.readBits(8);break;case Nt.ECI:const F=Vn.parseECIValue(x);if(I=U.getCharacterSetECIByValue(F),I===null)throw new V;break;case Nt.HANZI:const G=x.readBits(4),Q=x.readBits(k.getCharacterCountBits(c));G===Vn.GB2312_SUBSET&&Vn.decodeHanziSegment(x,E,Q);break;default:const re=x.readBits(k.getCharacterCountBits(c));switch(k){case Nt.NUMERIC:Vn.decodeNumericSegment(x,E,re);break;case Nt.ALPHANUMERIC:Vn.decodeAlphanumericSegment(x,E,re,P);break;case Nt.BYTE:Vn.decodeByteSegment(x,E,re,I,d,y);break;case Nt.KANJI:Vn.decodeKanjiSegment(x,E,re);break;default:throw new V}break}}while(k!==Nt.TERMINATOR)}catch{throw new V}return new Ne(o,E.toString(),d.length===0?null:d,h===null?null:h.toString(),v,A)}static decodeHanziSegment(o,c,h){if(h*13>o.available())throw new V;const y=new Uint8Array(2*h);let x=0;for(;h>0;){const E=o.readBits(13);let d=E/96<<8&4294967295|E%96;d<959?d+=41377:d+=42657,y[x]=d>>8&255,y[x+1]=d&255,x+=2,h--}try{c.append(ie.decode(y,X.GB2312))}catch(E){throw new V(E)}}static decodeKanjiSegment(o,c,h){if(h*13>o.available())throw new V;const y=new Uint8Array(2*h);let x=0;for(;h>0;){const E=o.readBits(13);let d=E/192<<8&4294967295|E%192;d<7936?d+=33088:d+=49472,y[x]=d>>8,y[x+1]=d,x+=2,h--}try{c.append(ie.decode(y,X.SHIFT_JIS))}catch(E){throw new V(E)}}static decodeByteSegment(o,c,h,y,x,E){if(8*h>o.available())throw new V;const d=new Uint8Array(h);for(let A=0;A<h;A++)d[A]=o.readBits(8);let v;y===null?v=X.guessEncoding(d,E):v=y.getName();try{c.append(ie.decode(d,v))}catch(A){throw new V(A)}x.push(d)}static toAlphaNumericChar(o){if(o>=Vn.ALPHANUMERIC_CHARS.length)throw new V;return Vn.ALPHANUMERIC_CHARS[o]}static decodeAlphanumericSegment(o,c,h,y){const x=c.length();for(;h>1;){if(o.available()<11)throw new V;const E=o.readBits(11);c.append(Vn.toAlphaNumericChar(Math.floor(E/45))),c.append(Vn.toAlphaNumericChar(E%45)),h-=2}if(h===1){if(o.available()<6)throw new V;c.append(Vn.toAlphaNumericChar(o.readBits(6)))}if(y)for(let E=x;E<c.length();E++)c.charAt(E)==="%"&&(E<c.length()-1&&c.charAt(E+1)==="%"?c.deleteCharAt(E+1):c.setCharAt(E,""))}static decodeNumericSegment(o,c,h){for(;h>=3;){if(o.available()<10)throw new V;const y=o.readBits(10);if(y>=1e3)throw new V;c.append(Vn.toAlphaNumericChar(Math.floor(y/100))),c.append(Vn.toAlphaNumericChar(Math.floor(y/10)%10)),c.append(Vn.toAlphaNumericChar(y%10)),h-=3}if(h===2){if(o.available()<7)throw new V;const y=o.readBits(7);if(y>=100)throw new V;c.append(Vn.toAlphaNumericChar(Math.floor(y/10))),c.append(Vn.toAlphaNumericChar(y%10))}else if(h===1){if(o.available()<4)throw new V;const y=o.readBits(4);if(y>=10)throw new V;c.append(Vn.toAlphaNumericChar(y))}}static parseECIValue(o){const c=o.readBits(8);if((c&128)===0)return c&127;if((c&192)===128){const h=o.readBits(8);return(c&63)<<8&4294967295|h}if((c&224)===192){const h=o.readBits(16);return(c&31)<<16&4294967295|h}throw new V}}Vn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Vn.GB2312_SUBSET=1;class Fl{constructor(o){this.mirrored=o}isMirrored(){return this.mirrored}applyMirroredCorrection(o){if(!this.mirrored||o===null||o.length<3)return;const c=o[0];o[0]=o[2],o[2]=c}}class Yr{constructor(){this.rsDecoder=new Wn(Rt.QR_CODE_FIELD_256)}decodeBooleanArray(o,c){return this.decodeBitMatrix(xe.parseFromBooleanArray(o),c)}decodeBitMatrix(o,c){const h=new Hi(o);let y=null;try{return this.decodeBitMatrixParser(h,c)}catch(x){y=x}try{h.remask(),h.setMirror(!0),h.readVersion(),h.readFormatInformation(),h.mirror();const x=this.decodeBitMatrixParser(h,c);return x.setOther(new Fl(!0)),x}catch(x){throw y!==null?y:x}}decodeBitMatrixParser(o,c){const h=o.readVersion(),y=o.readFormatInformation().getErrorCorrectionLevel(),x=o.readCodewords(),E=el.getDataBlocks(x,h,y);let d=0;for(const I of E)d+=I.getNumDataCodewords();const v=new Uint8Array(d);let A=0;for(const I of E){const P=I.getCodewords(),k=I.getNumDataCodewords();this.correctErrors(P,k);for(let F=0;F<k;F++)v[A++]=P[F]}return Vn.decode(v,h,y,c)}correctErrors(o,c){const h=new Int32Array(o);try{this.rsDecoder.decode(h,o.length-c)}catch{throw new N}for(let y=0;y<c;y++)o[y]=h[y]}}class _a extends at{constructor(o,c,h){super(o,c),this.estimatedModuleSize=h}aboutEquals(o,c,h){if(Math.abs(c-this.getY())<=o&&Math.abs(h-this.getX())<=o){const y=Math.abs(o-this.estimatedModuleSize);return y<=1||y<=this.estimatedModuleSize}return!1}combineEstimate(o,c,h){const y=(this.getX()+c)/2,x=(this.getY()+o)/2,E=(this.estimatedModuleSize+h)/2;return new _a(y,x,E)}}class _i{constructor(o,c,h,y,x,E,d){this.image=o,this.startX=c,this.startY=h,this.width=y,this.height=x,this.moduleSize=E,this.resultPointCallback=d,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const o=this.startX,c=this.height,h=this.width,y=o+h,x=this.startY+c/2,E=new Int32Array(3),d=this.image;for(let v=0;v<c;v++){const A=x+((v&1)===0?Math.floor((v+1)/2):-Math.floor((v+1)/2));E[0]=0,E[1]=0,E[2]=0;let I=o;for(;I<y&&!d.get(I,A);)I++;let P=0;for(;I<y;){if(d.get(I,A))if(P===1)E[1]++;else if(P===2){if(this.foundPatternCross(E)){const k=this.handlePossibleCenter(E,A,I);if(k!==null)return k}E[0]=E[2],E[1]=1,E[2]=0,P=1}else E[++P]++;else P===1&&P++,E[P]++;I++}if(this.foundPatternCross(E)){const k=this.handlePossibleCenter(E,A,y);if(k!==null)return k}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new de}static centerFromEnd(o,c){return c-o[2]-o[1]/2}foundPatternCross(o){const c=this.moduleSize,h=c/2;for(let y=0;y<3;y++)if(Math.abs(c-o[y])>=h)return!1;return!0}crossCheckVertical(o,c,h,y){const x=this.image,E=x.getHeight(),d=this.crossCheckStateCount;d[0]=0,d[1]=0,d[2]=0;let v=o;for(;v>=0&&x.get(c,v)&&d[1]<=h;)d[1]++,v--;if(v<0||d[1]>h)return NaN;for(;v>=0&&!x.get(c,v)&&d[0]<=h;)d[0]++,v--;if(d[0]>h)return NaN;for(v=o+1;v<E&&x.get(c,v)&&d[1]<=h;)d[1]++,v++;if(v===E||d[1]>h)return NaN;for(;v<E&&!x.get(c,v)&&d[2]<=h;)d[2]++,v++;if(d[2]>h)return NaN;const A=d[0]+d[1]+d[2];return 5*Math.abs(A-y)>=2*y?NaN:this.foundPatternCross(d)?_i.centerFromEnd(d,v):NaN}handlePossibleCenter(o,c,h){const y=o[0]+o[1]+o[2],x=_i.centerFromEnd(o,h),E=this.crossCheckVertical(c,x,2*o[1],y);if(!isNaN(E)){const d=(o[0]+o[1]+o[2])/3;for(const A of this.possibleCenters)if(A.aboutEquals(d,E,x))return A.combineEstimate(E,x,d);const v=new _a(x,E,d);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null}}class ia extends at{constructor(o,c,h,y){super(o,c),this.estimatedModuleSize=h,this.count=y,y===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(o,c,h){if(Math.abs(c-this.getY())<=o&&Math.abs(h-this.getX())<=o){const y=Math.abs(o-this.estimatedModuleSize);return y<=1||y<=this.estimatedModuleSize}return!1}combineEstimate(o,c,h){const y=this.count+1,x=(this.count*this.getX()+c)/y,E=(this.count*this.getY()+o)/y,d=(this.count*this.estimatedModuleSize+h)/y;return new ia(x,E,d,y)}}class Ea{constructor(o){this.bottomLeft=o[0],this.topLeft=o[1],this.topRight=o[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Jn{constructor(o,c){this.image=o,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=c}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(o){const c=o!=null&&o.get(Z.TRY_HARDER)!==void 0,h=o!=null&&o.get(Z.PURE_BARCODE)!==void 0,y=this.image,x=y.getHeight(),E=y.getWidth();let d=Math.floor(3*x/(4*Jn.MAX_MODULES));(d<Jn.MIN_SKIP||c)&&(d=Jn.MIN_SKIP);let v=!1;const A=new Int32Array(5);for(let P=d-1;P<x&&!v;P+=d){A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0;let k=0;for(let F=0;F<E;F++)if(y.get(F,P))(k&1)===1&&k++,A[k]++;else if((k&1)===0)if(k===4)if(Jn.foundPatternCross(A)){if(this.handlePossibleCenter(A,P,F,h)===!0)if(d=2,this.hasSkipped===!0)v=this.haveMultiplyConfirmedCenters();else{const Q=this.findRowSkip();Q>A[2]&&(P+=Q-A[2]-d,F=E-1)}else{A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,k=3;continue}k=0,A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0}else A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,k=3;else A[++k]++;else A[k]++;Jn.foundPatternCross(A)&&this.handlePossibleCenter(A,P,E,h)===!0&&(d=A[0],this.hasSkipped&&(v=this.haveMultiplyConfirmedCenters()))}const I=this.selectBestPatterns();return at.orderBestPatterns(I),new Ea(I)}static centerFromEnd(o,c){return c-o[4]-o[3]-o[2]/2}static foundPatternCross(o){let c=0;for(let x=0;x<5;x++){const E=o[x];if(E===0)return!1;c+=E}if(c<7)return!1;const h=c/7,y=h/2;return Math.abs(h-o[0])<y&&Math.abs(h-o[1])<y&&Math.abs(3*h-o[2])<3*y&&Math.abs(h-o[3])<y&&Math.abs(h-o[4])<y}getCrossCheckStateCount(){const o=this.crossCheckStateCount;return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o}crossCheckDiagonal(o,c,h,y){const x=this.getCrossCheckStateCount();let E=0;const d=this.image;for(;o>=E&&c>=E&&d.get(c-E,o-E);)x[2]++,E++;if(o<E||c<E)return!1;for(;o>=E&&c>=E&&!d.get(c-E,o-E)&&x[1]<=h;)x[1]++,E++;if(o<E||c<E||x[1]>h)return!1;for(;o>=E&&c>=E&&d.get(c-E,o-E)&&x[0]<=h;)x[0]++,E++;if(x[0]>h)return!1;const v=d.getHeight(),A=d.getWidth();for(E=1;o+E<v&&c+E<A&&d.get(c+E,o+E);)x[2]++,E++;if(o+E>=v||c+E>=A)return!1;for(;o+E<v&&c+E<A&&!d.get(c+E,o+E)&&x[3]<h;)x[3]++,E++;if(o+E>=v||c+E>=A||x[3]>=h)return!1;for(;o+E<v&&c+E<A&&d.get(c+E,o+E)&&x[4]<h;)x[4]++,E++;if(x[4]>=h)return!1;const I=x[0]+x[1]+x[2]+x[3]+x[4];return Math.abs(I-y)<2*y&&Jn.foundPatternCross(x)}crossCheckVertical(o,c,h,y){const x=this.image,E=x.getHeight(),d=this.getCrossCheckStateCount();let v=o;for(;v>=0&&x.get(c,v);)d[2]++,v--;if(v<0)return NaN;for(;v>=0&&!x.get(c,v)&&d[1]<=h;)d[1]++,v--;if(v<0||d[1]>h)return NaN;for(;v>=0&&x.get(c,v)&&d[0]<=h;)d[0]++,v--;if(d[0]>h)return NaN;for(v=o+1;v<E&&x.get(c,v);)d[2]++,v++;if(v===E)return NaN;for(;v<E&&!x.get(c,v)&&d[3]<h;)d[3]++,v++;if(v===E||d[3]>=h)return NaN;for(;v<E&&x.get(c,v)&&d[4]<h;)d[4]++,v++;if(d[4]>=h)return NaN;const A=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(A-y)>=2*y?NaN:Jn.foundPatternCross(d)?Jn.centerFromEnd(d,v):NaN}crossCheckHorizontal(o,c,h,y){const x=this.image,E=x.getWidth(),d=this.getCrossCheckStateCount();let v=o;for(;v>=0&&x.get(v,c);)d[2]++,v--;if(v<0)return NaN;for(;v>=0&&!x.get(v,c)&&d[1]<=h;)d[1]++,v--;if(v<0||d[1]>h)return NaN;for(;v>=0&&x.get(v,c)&&d[0]<=h;)d[0]++,v--;if(d[0]>h)return NaN;for(v=o+1;v<E&&x.get(v,c);)d[2]++,v++;if(v===E)return NaN;for(;v<E&&!x.get(v,c)&&d[3]<h;)d[3]++,v++;if(v===E||d[3]>=h)return NaN;for(;v<E&&x.get(v,c)&&d[4]<h;)d[4]++,v++;if(d[4]>=h)return NaN;const A=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(A-y)>=y?NaN:Jn.foundPatternCross(d)?Jn.centerFromEnd(d,v):NaN}handlePossibleCenter(o,c,h,y){const x=o[0]+o[1]+o[2]+o[3]+o[4];let E=Jn.centerFromEnd(o,h),d=this.crossCheckVertical(c,Math.floor(E),o[2],x);if(!isNaN(d)&&(E=this.crossCheckHorizontal(Math.floor(E),Math.floor(d),o[2],x),!isNaN(E)&&(!y||this.crossCheckDiagonal(Math.floor(d),Math.floor(E),o[2],x)))){const v=x/7;let A=!1;const I=this.possibleCenters;for(let P=0,k=I.length;P<k;P++){const F=I[P];if(F.aboutEquals(v,d,E)){I[P]=F.combineEstimate(d,E,v),A=!0;break}}if(!A){const P=new ia(E,d,v);I.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let c=null;for(const h of this.possibleCenters)if(h.getCount()>=Jn.CENTER_QUORUM)if(c==null)c=h;else return this.hasSkipped=!0,Math.floor((Math.abs(c.getX()-h.getX())-Math.abs(c.getY()-h.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let o=0,c=0;const h=this.possibleCenters.length;for(const E of this.possibleCenters)E.getCount()>=Jn.CENTER_QUORUM&&(o++,c+=E.getEstimatedModuleSize());if(o<3)return!1;const y=c/h;let x=0;for(const E of this.possibleCenters)x+=Math.abs(E.getEstimatedModuleSize()-y);return x<=.05*c}selectBestPatterns(){const o=this.possibleCenters.length;if(o<3)throw new de;const c=this.possibleCenters;let h;if(o>3){let y=0,x=0;for(const v of this.possibleCenters){const A=v.getEstimatedModuleSize();y+=A,x+=A*A}h=y/o;let E=Math.sqrt(x/o-h*h);c.sort((v,A)=>{const I=Math.abs(A.getEstimatedModuleSize()-h),P=Math.abs(v.getEstimatedModuleSize()-h);return I<P?-1:I>P?1:0});const d=Math.max(.2*h,E);for(let v=0;v<c.length&&c.length>3;v++){const A=c[v];Math.abs(A.getEstimatedModuleSize()-h)>d&&(c.splice(v,1),v--)}}if(c.length>3){let y=0;for(const x of c)y+=x.getEstimatedModuleSize();h=y/c.length,c.sort((x,E)=>{if(E.getCount()===x.getCount()){const d=Math.abs(E.getEstimatedModuleSize()-h),v=Math.abs(x.getEstimatedModuleSize()-h);return d<v?1:d>v?-1:0}else return E.getCount()-x.getCount()}),c.splice(3)}return[c[0],c[1],c[2]]}}Jn.CENTER_QUORUM=2,Jn.MIN_SKIP=3,Jn.MAX_MODULES=57;class Mn{constructor(o){this.image=o}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(o){this.resultPointCallback=o==null?null:o.get(Z.NEED_RESULT_POINT_CALLBACK);const h=new Jn(this.image,this.resultPointCallback).find(o);return this.processFinderPatternInfo(h)}processFinderPatternInfo(o){const c=o.getTopLeft(),h=o.getTopRight(),y=o.getBottomLeft(),x=this.calculateModuleSize(c,h,y);if(x<1)throw new de("No pattern found in proccess finder.");const E=Mn.computeDimension(c,h,y,x),d=wt.getProvisionalVersionForDimension(E),v=d.getDimensionForVersion()-7;let A=null;if(d.getAlignmentPatternCenters().length>0){const F=h.getX()-c.getX()+y.getX(),G=h.getY()-c.getY()+y.getY(),Q=1-3/v,re=Math.floor(c.getX()+Q*(F-c.getX())),ne=Math.floor(c.getY()+Q*(G-c.getY()));for(let oe=4;oe<=16;oe<<=1)try{A=this.findAlignmentInRegion(x,re,ne,oe);break}catch(fe){if(!(fe instanceof de))throw fe}}const I=Mn.createTransform(c,h,y,A,E),P=Mn.sampleGrid(this.image,I,E);let k;return A===null?k=[y,c,h]:k=[y,c,h,A],new na(P,k)}static createTransform(o,c,h,y,x){const E=x-3.5;let d,v,A,I;return y!==null?(d=y.getX(),v=y.getY(),A=E-3,I=A):(d=c.getX()-o.getX()+h.getX(),v=c.getY()-o.getY()+h.getY(),A=E,I=E),$n.quadrilateralToQuadrilateral(3.5,3.5,E,3.5,A,I,3.5,E,o.getX(),o.getY(),c.getX(),c.getY(),d,v,h.getX(),h.getY())}static sampleGrid(o,c,h){return bi.getInstance().sampleGridWithTransform(o,h,h,c)}static computeDimension(o,c,h,y){const x=Et.round(at.distance(o,c)/y),E=Et.round(at.distance(o,h)/y);let d=Math.floor((x+E)/2)+7;switch(d&3){case 0:d++;break;case 2:d--;break;case 3:throw new de("Dimensions could be not found.")}return d}calculateModuleSize(o,c,h){return(this.calculateModuleSizeOneWay(o,c)+this.calculateModuleSizeOneWay(o,h))/2}calculateModuleSizeOneWay(o,c){const h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(c.getX()),Math.floor(c.getY())),y=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(c.getX()),Math.floor(c.getY()),Math.floor(o.getX()),Math.floor(o.getY()));return isNaN(h)?y/7:isNaN(y)?h/7:(h+y)/14}sizeOfBlackWhiteBlackRunBothWays(o,c,h,y){let x=this.sizeOfBlackWhiteBlackRun(o,c,h,y),E=1,d=o-(h-o);d<0?(E=o/(o-d),d=0):d>=this.image.getWidth()&&(E=(this.image.getWidth()-1-o)/(d-o),d=this.image.getWidth()-1);let v=Math.floor(c-(y-c)*E);return E=1,v<0?(E=c/(c-v),v=0):v>=this.image.getHeight()&&(E=(this.image.getHeight()-1-c)/(v-c),v=this.image.getHeight()-1),d=Math.floor(o+(d-o)*E),x+=this.sizeOfBlackWhiteBlackRun(o,c,d,v),x-1}sizeOfBlackWhiteBlackRun(o,c,h,y){const x=Math.abs(y-c)>Math.abs(h-o);if(x){let F=o;o=c,c=F,F=h,h=y,y=F}const E=Math.abs(h-o),d=Math.abs(y-c);let v=-E/2;const A=o<h?1:-1,I=c<y?1:-1;let P=0;const k=h+A;for(let F=o,G=c;F!==k;F+=A){const Q=x?G:F,re=x?F:G;if(P===1===this.image.get(Q,re)){if(P===2)return Et.distance(F,G,o,c);P++}if(v+=d,v>0){if(G===y)break;G+=I,v-=E}}return P===2?Et.distance(h+A,y,o,c):NaN}findAlignmentInRegion(o,c,h,y){const x=Math.floor(y*o),E=Math.max(0,c-x),d=Math.min(this.image.getWidth()-1,c+x);if(d-E<o*3)throw new de("Alignment top exceeds estimated module size.");const v=Math.max(0,h-x),A=Math.min(this.image.getHeight()-1,h+x);if(A-v<o*3)throw new de("Alignment bottom exceeds estimated module size.");return new _i(this.image,E,v,d-E,A-v,o,this.resultPointCallback).find()}}class Tr{constructor(){this.decoder=new Yr}getDecoder(){return this.decoder}decode(o,c){let h,y;if(c!=null&&c.get(Z.PURE_BARCODE)!==void 0){const v=Tr.extractPureBits(o.getBlackMatrix());h=this.decoder.decodeBitMatrix(v,c),y=Tr.NO_POINTS}else{const v=new Mn(o.getBlackMatrix()).detect(c);h=this.decoder.decodeBitMatrix(v.getBits(),c),y=v.getPoints()}h.getOther()instanceof Fl&&h.getOther().applyMirroredCorrection(y);const x=new Ve(h.getText(),h.getRawBytes(),void 0,y,$e.QR_CODE,void 0),E=h.getByteSegments();E!==null&&x.putMetadata(ut.BYTE_SEGMENTS,E);const d=h.getECLevel();return d!==null&&x.putMetadata(ut.ERROR_CORRECTION_LEVEL,d),h.hasStructuredAppend()&&(x.putMetadata(ut.STRUCTURED_APPEND_SEQUENCE,h.getStructuredAppendSequenceNumber()),x.putMetadata(ut.STRUCTURED_APPEND_PARITY,h.getStructuredAppendParity())),x}reset(){}static extractPureBits(o){const c=o.getTopLeftOnBit(),h=o.getBottomRightOnBit();if(c===null||h===null)throw new de;const y=this.moduleSize(c,o);let x=c[1],E=h[1],d=c[0],v=h[0];if(d>=v||x>=E)throw new de;if(E-x!==v-d&&(v=d+(E-x),v>=o.getWidth()))throw new de;const A=Math.round((v-d+1)/y),I=Math.round((E-x+1)/y);if(A<=0||I<=0)throw new de;if(I!==A)throw new de;const P=Math.floor(y/2);x+=P,d+=P;const k=d+Math.floor((A-1)*y)-v;if(k>0){if(k>P)throw new de;d-=k}const F=x+Math.floor((I-1)*y)-E;if(F>0){if(F>P)throw new de;x-=F}const G=new xe(A,I);for(let Q=0;Q<I;Q++){const re=x+Math.floor(Q*y);for(let ne=0;ne<A;ne++)o.get(d+Math.floor(ne*y),re)&&G.set(ne,Q)}return G}static moduleSize(o,c){const h=c.getHeight(),y=c.getWidth();let x=o[0],E=o[1],d=!0,v=0;for(;x<y&&E<h;){if(d!==c.get(x,E)){if(++v===5)break;d=!d}x++,E++}if(x===y||E===h)throw new de;return(x-o[0])/7}}Tr.NO_POINTS=new Array;class Pt{PDF417Common(){}static getBitCountSum(o){return Et.sum(o)}static toIntArray(o){if(o==null||!o.length)return Pt.EMPTY_INT_ARRAY;const c=new Int32Array(o.length);let h=0;for(const y of o)c[h++]=y;return c}static getCodeword(o){const c=$.binarySearch(Pt.SYMBOL_TABLE,o&262143);return c<0?-1:(Pt.CODEWORD_TABLE[c]-1)%Pt.NUMBER_OF_CODEWORDS}}Pt.NUMBER_OF_CODEWORDS=929,Pt.MAX_CODEWORDS_IN_BARCODE=Pt.NUMBER_OF_CODEWORDS-1,Pt.MIN_ROWS_IN_BARCODE=3,Pt.MAX_ROWS_IN_BARCODE=90,Pt.MODULES_IN_CODEWORD=17,Pt.MODULES_IN_STOP_PATTERN=18,Pt.BARS_IN_MODULE=8,Pt.EMPTY_INT_ARRAY=new Int32Array([]),Pt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Pt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ua{constructor(o,c){this.bits=o,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class Lt{static detectMultiple(o,c,h){let y=o.getBlackMatrix(),x=Lt.detect(h,y);return x.length||(y=y.clone(),y.rotate180(),x=Lt.detect(h,y)),new Ua(y,x)}static detect(o,c){const h=new Array;let y=0,x=0,E=!1;for(;y<c.getHeight();){const d=Lt.findVertices(c,y,x);if(d[0]==null&&d[3]==null){if(!E)break;E=!1,x=0;for(const v of h)v[1]!=null&&(y=Math.trunc(Math.max(y,v[1].getY()))),v[3]!=null&&(y=Math.max(y,Math.trunc(v[3].getY())));y+=Lt.ROW_STEP;continue}if(E=!0,h.push(d),!o)break;d[2]!=null?(x=Math.trunc(d[2].getX()),y=Math.trunc(d[2].getY())):(x=Math.trunc(d[4].getX()),y=Math.trunc(d[4].getY()))}return h}static findVertices(o,c,h){const y=o.getHeight(),x=o.getWidth(),E=new Array(8);return Lt.copyToResult(E,Lt.findRowsWithPattern(o,y,x,c,h,Lt.START_PATTERN),Lt.INDEXES_START_PATTERN),E[4]!=null&&(h=Math.trunc(E[4].getX()),c=Math.trunc(E[4].getY())),Lt.copyToResult(E,Lt.findRowsWithPattern(o,y,x,c,h,Lt.STOP_PATTERN),Lt.INDEXES_STOP_PATTERN),E}static copyToResult(o,c,h){for(let y=0;y<h.length;y++)o[h[y]]=c[y]}static findRowsWithPattern(o,c,h,y,x,E){const d=new Array(4);let v=!1;const A=new Int32Array(E.length);for(;y<c;y+=Lt.ROW_STEP){let P=Lt.findGuardPattern(o,x,y,h,!1,E,A);if(P!=null){for(;y>0;){const k=Lt.findGuardPattern(o,x,--y,h,!1,E,A);if(k!=null)P=k;else{y++;break}}d[0]=new at(P[0],y),d[1]=new at(P[1],y),v=!0;break}}let I=y+1;if(v){let P=0,k=Int32Array.from([Math.trunc(d[0].getX()),Math.trunc(d[1].getX())]);for(;I<c;I++){const F=Lt.findGuardPattern(o,k[0],I,h,!1,E,A);if(F!=null&&Math.abs(k[0]-F[0])<Lt.MAX_PATTERN_DRIFT&&Math.abs(k[1]-F[1])<Lt.MAX_PATTERN_DRIFT)k=F,P=0;else{if(P>Lt.SKIPPED_ROW_COUNT_MAX)break;P++}}I-=P+1,d[2]=new at(k[0],I),d[3]=new at(k[1],I)}return I-y<Lt.BARCODE_MIN_HEIGHT&&$.fill(d,null),d}static findGuardPattern(o,c,h,y,x,E,d){$.fillWithin(d,0,d.length,0);let v=c,A=0;for(;o.get(v,h)&&v>0&&A++<Lt.MAX_PIXEL_DRIFT;)v--;let I=v,P=0,k=E.length;for(let F=x;I<y;I++)if(o.get(I,h)!==F)d[P]++;else{if(P===k-1){if(Lt.patternMatchVariance(d,E,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE)return new Int32Array([v,I]);v+=d[0]+d[1],M.arraycopy(d,2,d,0,P-1),d[P-1]=0,d[P]=0,P--}else P++;d[P]=1,F=!F}return P===k-1&&Lt.patternMatchVariance(d,E,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE?new Int32Array([v,I-1]):null}static patternMatchVariance(o,c,h){let y=o.length,x=0,E=0;for(let A=0;A<y;A++)x+=o[A],E+=c[A];if(x<E)return 1/0;let d=x/E;h*=d;let v=0;for(let A=0;A<y;A++){let I=o[A],P=c[A]*d,k=I>P?I-P:P-I;if(k>h)return 1/0;v+=k}return v/x}}Lt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Lt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Lt.MAX_AVG_VARIANCE=.42,Lt.MAX_INDIVIDUAL_VARIANCE=.8,Lt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Lt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Lt.MAX_PIXEL_DRIFT=3,Lt.MAX_PATTERN_DRIFT=5,Lt.SKIPPED_ROW_COUNT_MAX=25,Lt.ROW_STEP=5,Lt.BARCODE_MIN_HEIGHT=10;class xn{constructor(o,c){if(c.length===0)throw new _;this.field=o;let h=c.length;if(h>1&&c[0]===0){let y=1;for(;y<h&&c[y]===0;)y++;y===h?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(h-y),M.arraycopy(c,y,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(o){return this.coefficients[this.coefficients.length-1-o]}evaluateAt(o){if(o===0)return this.getCoefficient(0);if(o===1){let y=0;for(let x of this.coefficients)y=this.field.add(y,x);return y}let c=this.coefficients[0],h=this.coefficients.length;for(let y=1;y<h;y++)c=this.field.add(this.field.multiply(o,c),this.coefficients[y]);return c}add(o){if(!this.field.equals(o.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero())return o;if(o.isZero())return this;let c=this.coefficients,h=o.coefficients;if(c.length>h.length){let E=c;c=h,h=E}let y=new Int32Array(h.length),x=h.length-c.length;M.arraycopy(h,0,y,0,x);for(let E=x;E<h.length;E++)y[E]=this.field.add(c[E-x],h[E]);return new xn(this.field,y)}subtract(o){if(!this.field.equals(o.field))throw new _("ModulusPolys do not have same ModulusGF field");return o.isZero()?this:this.add(o.negative())}multiply(o){return o instanceof xn?this.multiplyOther(o):this.multiplyScalar(o)}multiplyOther(o){if(!this.field.equals(o.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero()||o.isZero())return new xn(this.field,new Int32Array([0]));let c=this.coefficients,h=c.length,y=o.coefficients,x=y.length,E=new Int32Array(h+x-1);for(let d=0;d<h;d++){let v=c[d];for(let A=0;A<x;A++)E[d+A]=this.field.add(E[d+A],this.field.multiply(v,y[A]))}return new xn(this.field,E)}negative(){let o=this.coefficients.length,c=new Int32Array(o);for(let h=0;h<o;h++)c[h]=this.field.subtract(0,this.coefficients[h]);return new xn(this.field,c)}multiplyScalar(o){if(o===0)return new xn(this.field,new Int32Array([0]));if(o===1)return this;let c=this.coefficients.length,h=new Int32Array(c);for(let y=0;y<c;y++)h[y]=this.field.multiply(this.coefficients[y],o);return new xn(this.field,h)}multiplyByMonomial(o,c){if(o<0)throw new _;if(c===0)return new xn(this.field,new Int32Array([0]));let h=this.coefficients.length,y=new Int32Array(h+o);for(let x=0;x<h;x++)y[x]=this.field.multiply(this.coefficients[x],c);return new xn(this.field,y)}toString(){let o=new J;for(let c=this.getDegree();c>=0;c--){let h=this.getCoefficient(c);h!==0&&(h<0?(o.append(" - "),h=-h):o.length()>0&&o.append(" + "),(c===0||h!==1)&&o.append(h),c!==0&&(c===1?o.append("x"):(o.append("x^"),o.append(c))))}return o.toString()}}class Do{add(o,c){return(o+c)%this.modulus}subtract(o,c){return(this.modulus+o-c)%this.modulus}exp(o){return this.expTable[o]}log(o){if(o===0)throw new _;return this.logTable[o]}inverse(o){if(o===0)throw new Fe;return this.expTable[this.modulus-this.logTable[o]-1]}multiply(o,c){return o===0||c===0?0:this.expTable[(this.logTable[o]+this.logTable[c])%(this.modulus-1)]}getSize(){return this.modulus}equals(o){return o===this}}class an extends Do{constructor(o,c){super(),this.modulus=o,this.expTable=new Int32Array(o),this.logTable=new Int32Array(o);let h=1;for(let y=0;y<o;y++)this.expTable[y]=h,h=h*c%o;for(let y=0;y<o-1;y++)this.logTable[this.expTable[y]]=y;this.zero=new xn(this,new Int32Array([0])),this.one=new xn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(o,c){if(o<0)throw new _;if(c===0)return this.zero;let h=new Int32Array(o+1);return h[0]=c,new xn(this,h)}}an.PDF417_GF=new an(Pt.NUMBER_OF_CODEWORDS,3);class Aa{constructor(){this.field=an.PDF417_GF}decode(o,c,h){let y=new xn(this.field,o),x=new Int32Array(c),E=!1;for(let G=c;G>0;G--){let Q=y.evaluateAt(this.field.exp(G));x[c-G]=Q,Q!==0&&(E=!0)}if(!E)return 0;let d=this.field.getOne();if(h!=null)for(const G of h){let Q=this.field.exp(o.length-1-G),re=new xn(this.field,new Int32Array([this.field.subtract(0,Q),1]));d=d.multiply(re)}let v=new xn(this.field,x),A=this.runEuclideanAlgorithm(this.field.buildMonomial(c,1),v,c),I=A[0],P=A[1],k=this.findErrorLocations(I),F=this.findErrorMagnitudes(P,I,k);for(let G=0;G<k.length;G++){let Q=o.length-1-this.field.log(k[G]);if(Q<0)throw N.getChecksumInstance();o[Q]=this.field.subtract(o[Q],F[G])}return k.length}runEuclideanAlgorithm(o,c,h){if(o.getDegree()<c.getDegree()){let k=o;o=c,c=k}let y=o,x=c,E=this.field.getZero(),d=this.field.getOne();for(;x.getDegree()>=Math.round(h/2);){let k=y,F=E;if(y=x,E=d,y.isZero())throw N.getChecksumInstance();x=k;let G=this.field.getZero(),Q=y.getCoefficient(y.getDegree()),re=this.field.inverse(Q);for(;x.getDegree()>=y.getDegree()&&!x.isZero();){let ne=x.getDegree()-y.getDegree(),oe=this.field.multiply(x.getCoefficient(x.getDegree()),re);G=G.add(this.field.buildMonomial(ne,oe)),x=x.subtract(y.multiplyByMonomial(ne,oe))}d=G.multiply(E).subtract(F).negative()}let v=d.getCoefficient(0);if(v===0)throw N.getChecksumInstance();let A=this.field.inverse(v),I=d.multiply(A),P=x.multiply(A);return[I,P]}findErrorLocations(o){let c=o.getDegree(),h=new Int32Array(c),y=0;for(let x=1;x<this.field.getSize()&&y<c;x++)o.evaluateAt(x)===0&&(h[y]=this.field.inverse(x),y++);if(y!==c)throw N.getChecksumInstance();return h}findErrorMagnitudes(o,c,h){let y=c.getDegree(),x=new Int32Array(y);for(let A=1;A<=y;A++)x[y-A]=this.field.multiply(A,c.getCoefficient(A));let E=new xn(this.field,x),d=h.length,v=new Int32Array(d);for(let A=0;A<d;A++){let I=this.field.inverse(h[A]),P=this.field.subtract(0,o.evaluateAt(I)),k=this.field.inverse(E.evaluateAt(I));v[A]=this.field.multiply(P,k)}return v}}class qa{constructor(o,c,h,y,x){o instanceof qa?this.constructor_2(o):this.constructor_1(o,c,h,y,x)}constructor_1(o,c,h,y,x){const E=c==null||h==null,d=y==null||x==null;if(E&&d)throw new de;E?(c=new at(0,y.getY()),h=new at(0,x.getY())):d&&(y=new at(o.getWidth()-1,c.getY()),x=new at(o.getWidth()-1,h.getY())),this.image=o,this.topLeft=c,this.bottomLeft=h,this.topRight=y,this.bottomRight=x,this.minX=Math.trunc(Math.min(c.getX(),h.getX())),this.maxX=Math.trunc(Math.max(y.getX(),x.getX())),this.minY=Math.trunc(Math.min(c.getY(),y.getY())),this.maxY=Math.trunc(Math.max(h.getY(),x.getY()))}constructor_2(o){this.image=o.image,this.topLeft=o.getTopLeft(),this.bottomLeft=o.getBottomLeft(),this.topRight=o.getTopRight(),this.bottomRight=o.getBottomRight(),this.minX=o.getMinX(),this.maxX=o.getMaxX(),this.minY=o.getMinY(),this.maxY=o.getMaxY()}static merge(o,c){return o==null?c:c==null?o:new qa(o.image,o.topLeft,o.bottomLeft,c.topRight,c.bottomRight)}addMissingRows(o,c,h){let y=this.topLeft,x=this.bottomLeft,E=this.topRight,d=this.bottomRight;if(o>0){let v=h?this.topLeft:this.topRight,A=Math.trunc(v.getY()-o);A<0&&(A=0);let I=new at(v.getX(),A);h?y=I:E=I}if(c>0){let v=h?this.bottomLeft:this.bottomRight,A=Math.trunc(v.getY()+c);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);let I=new at(v.getX(),A);h?x=I:d=I}return new qa(this.image,y,x,E,d)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class qs{constructor(o,c,h,y){this.columnCount=o,this.errorCorrectionLevel=y,this.rowCountUpperPart=c,this.rowCountLowerPart=h,this.rowCount=c+h}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Sa{constructor(){this.buffer=""}static form(o,c){let h=-1;function y(E,d,v,A,I,P){if(E==="%%")return"%";if(c[++h]===void 0)return;E=A?parseInt(A.substr(1)):void 0;let k=I?parseInt(I.substr(1)):void 0,F;switch(P){case"s":F=c[h];break;case"c":F=c[h][0];break;case"f":F=parseFloat(c[h]).toFixed(E);break;case"p":F=parseFloat(c[h]).toPrecision(E);break;case"e":F=parseFloat(c[h]).toExponential(E);break;case"x":F=parseInt(c[h]).toString(k||16);break;case"d":F=parseFloat(parseInt(c[h],k||10).toPrecision(E)).toFixed(0);break}F=typeof F=="object"?JSON.stringify(F):(+F).toString(k);let G=parseInt(v),Q=v&&v[0]+""=="0"?"0":" ";for(;F.length<G;)F=d!==void 0?F+Q:Q+F;return F}let x=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return o.replace(x,y)}format(o,...c){this.buffer+=Sa.form(o,c)}toString(){return this.buffer}}class Ta{constructor(o){this.boundingBox=new qa(o),this.codewords=new Array(o.getMaxY()-o.getMinY()+1)}getCodewordNearby(o){let c=this.getCodeword(o);if(c!=null)return c;for(let h=1;h<Ta.MAX_NEARBY_DISTANCE;h++){let y=this.imageRowToCodewordIndex(o)-h;if(y>=0&&(c=this.codewords[y],c!=null)||(y=this.imageRowToCodewordIndex(o)+h,y<this.codewords.length&&(c=this.codewords[y],c!=null)))return c}return null}imageRowToCodewordIndex(o){return o-this.boundingBox.getMinY()}setCodeword(o,c){this.codewords[this.imageRowToCodewordIndex(o)]=c}getCodeword(o){return this.codewords[this.imageRowToCodewordIndex(o)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const o=new Sa;let c=0;for(const h of this.codewords){if(h==null){o.format("%3d:    |   %n",c++);continue}o.format("%3d: %3d|%3d%n",c++,h.getRowNumber(),h.getValue())}return o.toString()}}Ta.MAX_NEARBY_DISTANCE=5;class aa{constructor(){this.values=new Map}setValue(o){o=Math.trunc(o);let c=this.values.get(o);c==null&&(c=0),c++,this.values.set(o,c)}getValue(){let o=-1,c=new Array;for(const[h,y]of this.values.entries()){const x={getKey:()=>h,getValue:()=>y};x.getValue()>o?(o=x.getValue(),c=[],c.push(x.getKey())):x.getValue()===o&&c.push(x.getKey())}return Pt.toIntArray(c)}getConfidence(o){return this.values.get(o)}}class Ga extends Ta{constructor(o,c){super(o),this._isLeft=c}setRowNumbers(){for(let o of this.getCodewords())o?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(o){let c=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(c,o);let h=this.getBoundingBox(),y=this._isLeft?h.getTopLeft():h.getTopRight(),x=this._isLeft?h.getBottomLeft():h.getBottomRight(),E=this.imageRowToCodewordIndex(Math.trunc(y.getY())),d=this.imageRowToCodewordIndex(Math.trunc(x.getY())),v=-1,A=1,I=0;for(let P=E;P<d;P++){if(c[P]==null)continue;let k=c[P],F=k.getRowNumber()-v;if(F===0)I++;else if(F===1)A=Math.max(A,I),I=1,v=k.getRowNumber();else if(F<0||k.getRowNumber()>=o.getRowCount()||F>P)c[P]=null;else{let G;A>2?G=(A-2)*F:G=F;let Q=G>=P;for(let re=1;re<=G&&!Q;re++)Q=c[P-re]!=null;Q?c[P]=null:(v=k.getRowNumber(),I=1)}}}getRowHeights(){let o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);let c=new Int32Array(o.getRowCount());for(let h of this.getCodewords())if(h!=null){let y=h.getRowNumber();if(y>=c.length)continue;c[y]++}return c}adjustIncompleteIndicatorColumnRowNumbers(o){let c=this.getBoundingBox(),h=this._isLeft?c.getTopLeft():c.getTopRight(),y=this._isLeft?c.getBottomLeft():c.getBottomRight(),x=this.imageRowToCodewordIndex(Math.trunc(h.getY())),E=this.imageRowToCodewordIndex(Math.trunc(y.getY())),d=this.getCodewords(),v=-1;for(let A=x;A<E;A++){if(d[A]==null)continue;let I=d[A];I.setRowNumberAsRowIndicatorColumn();let P=I.getRowNumber()-v;P===0||(P===1?v=I.getRowNumber():I.getRowNumber()>=o.getRowCount()?d[A]=null:v=I.getRowNumber())}}getBarcodeMetadata(){let o=this.getCodewords(),c=new aa,h=new aa,y=new aa,x=new aa;for(let d of o){if(d==null)continue;d.setRowNumberAsRowIndicatorColumn();let v=d.getValue()%30,A=d.getRowNumber();switch(this._isLeft||(A+=2),A%3){case 0:h.setValue(v*3+1);break;case 1:x.setValue(v/3),y.setValue(v%3);break;case 2:c.setValue(v+1);break}}if(c.getValue().length===0||h.getValue().length===0||y.getValue().length===0||x.getValue().length===0||c.getValue()[0]<1||h.getValue()[0]+y.getValue()[0]<Pt.MIN_ROWS_IN_BARCODE||h.getValue()[0]+y.getValue()[0]>Pt.MAX_ROWS_IN_BARCODE)return null;let E=new qs(c.getValue()[0],h.getValue()[0],y.getValue()[0],x.getValue()[0]);return this.removeIncorrectCodewords(o,E),E}removeIncorrectCodewords(o,c){for(let h=0;h<o.length;h++){let y=o[h];if(o[h]==null)continue;let x=y.getValue()%30,E=y.getRowNumber();if(E>c.getRowCount()){o[h]=null;continue}switch(this._isLeft||(E+=2),E%3){case 0:x*3+1!==c.getRowCountUpperPart()&&(o[h]=null);break;case 1:(Math.trunc(x/3)!==c.getErrorCorrectionLevel()||x%3!==c.getRowCountLowerPart())&&(o[h]=null);break;case 2:x+1!==c.getColumnCount()&&(o[h]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ir{constructor(o,c){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=o,this.barcodeColumnCount=o.getColumnCount(),this.boundingBox=c,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o=Pt.MAX_CODEWORDS_IN_BARCODE,c;do c=o,o=this.adjustRowNumbersAndGetCount();while(o>0&&o<c);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(o){o?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let o=this.adjustRowNumbersByRow();if(o===0)return 0;for(let c=1;c<this.barcodeColumnCount+1;c++){let h=this.detectionResultColumns[c].getCodewords();for(let y=0;y<h.length;y++)h[y]!=null&&(h[y].hasValidRowNumber()||this.adjustRowNumbers(c,y,h))}return o}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let o=this.detectionResultColumns[0].getCodewords(),c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<o.length;h++)if(o[h]!=null&&c[h]!=null&&o[h].getRowNumber()===c[h].getRowNumber())for(let y=1;y<=this.barcodeColumnCount;y++){let x=this.detectionResultColumns[y].getCodewords()[h];x!=null&&(x.setRowNumber(o[h].getRowNumber()),x.hasValidRowNumber()||(this.detectionResultColumns[y].getCodewords()[h]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let o=0,c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let h=0;h<c.length;h++){if(c[h]==null)continue;let y=c[h].getRowNumber(),x=0;for(let E=this.barcodeColumnCount+1;E>0&&x<this.ADJUST_ROW_NUMBER_SKIP;E--){let d=this.detectionResultColumns[E].getCodewords()[h];d!=null&&(x=ir.adjustRowNumberIfValid(y,x,d),d.hasValidRowNumber()||o++)}}return o}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let o=0,c=this.detectionResultColumns[0].getCodewords();for(let h=0;h<c.length;h++){if(c[h]==null)continue;let y=c[h].getRowNumber(),x=0;for(let E=1;E<this.barcodeColumnCount+1&&x<this.ADJUST_ROW_NUMBER_SKIP;E++){let d=this.detectionResultColumns[E].getCodewords()[h];d!=null&&(x=ir.adjustRowNumberIfValid(y,x,d),d.hasValidRowNumber()||o++)}}return o}static adjustRowNumberIfValid(o,c,h){return h==null||h.hasValidRowNumber()||(h.isValidRowNumber(o)?(h.setRowNumber(o),c=0):++c),c}adjustRowNumbers(o,c,h){if(!this.detectionResultColumns[o-1])return;let y=h[c],x=this.detectionResultColumns[o-1].getCodewords(),E=x;this.detectionResultColumns[o+1]!=null&&(E=this.detectionResultColumns[o+1].getCodewords());let d=new Array(14);d[2]=x[c],d[3]=E[c],c>0&&(d[0]=h[c-1],d[4]=x[c-1],d[5]=E[c-1]),c>1&&(d[8]=h[c-2],d[10]=x[c-2],d[11]=E[c-2]),c<h.length-1&&(d[1]=h[c+1],d[6]=x[c+1],d[7]=E[c+1]),c<h.length-2&&(d[9]=h[c+2],d[12]=x[c+2],d[13]=E[c+2]);for(let v of d)if(ir.adjustRowNumber(y,v))return}static adjustRowNumber(o,c){return c==null?!1:c.hasValidRowNumber()&&c.getBucket()===o.getBucket()?(o.setRowNumber(c.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(o){this.boundingBox=o}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(o,c){this.detectionResultColumns[o]=c}getDetectionResultColumn(o){return this.detectionResultColumns[o]}toString(){let o=this.detectionResultColumns[0];o==null&&(o=this.detectionResultColumns[this.barcodeColumnCount+1]);let c=new Sa;for(let h=0;h<o.getCodewords().length;h++){c.format("CW %3d:",h);for(let y=0;y<this.barcodeColumnCount+2;y++){if(this.detectionResultColumns[y]==null){c.format("    |   ");continue}let x=this.detectionResultColumns[y].getCodewords()[h];if(x==null){c.format("    |   ");continue}c.format(" %3d|%3d",x.getRowNumber(),x.getValue())}c.format("%n")}return c.toString()}}class Ia{constructor(o,c,h,y){this.rowNumber=Ia.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(o),this.endX=Math.trunc(c),this.bucket=Math.trunc(h),this.value=Math.trunc(y)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(o){return o!==Ia.BARCODE_ROW_UNKNOWN&&this.bucket===o%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(o){this.rowNumber=o}toString(){return this.rowNumber+"|"+this.value}}Ia.BARCODE_ROW_UNKNOWN=-1;class Ir{static initialize(){for(let o=0;o<Pt.SYMBOL_TABLE.length;o++){let c=Pt.SYMBOL_TABLE[o],h=c&1;for(let y=0;y<Pt.BARS_IN_MODULE;y++){let x=0;for(;(c&1)===h;)x+=1,c>>=1;h=c&1,Ir.RATIOS_TABLE[o]||(Ir.RATIOS_TABLE[o]=new Array(Pt.BARS_IN_MODULE)),Ir.RATIOS_TABLE[o][Pt.BARS_IN_MODULE-y-1]=Math.fround(x/Pt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(o){let c=Ir.getDecodedCodewordValue(Ir.sampleBitCounts(o));return c!==-1?c:Ir.getClosestDecodedValue(o)}static sampleBitCounts(o){let c=Et.sum(o),h=new Int32Array(Pt.BARS_IN_MODULE),y=0,x=0;for(let E=0;E<Pt.MODULES_IN_CODEWORD;E++){let d=c/(2*Pt.MODULES_IN_CODEWORD)+E*c/Pt.MODULES_IN_CODEWORD;x+o[y]<=d&&(x+=o[y],y++),h[y]++}return h}static getDecodedCodewordValue(o){let c=Ir.getBitValue(o);return Pt.getCodeword(c)===-1?-1:c}static getBitValue(o){let c=0;for(let h=0;h<o.length;h++)for(let y=0;y<o[h];y++)c=c<<1|(h%2===0?1:0);return Math.trunc(c)}static getClosestDecodedValue(o){let c=Et.sum(o),h=new Array(Pt.BARS_IN_MODULE);if(c>1)for(let E=0;E<h.length;E++)h[E]=Math.fround(o[E]/c);let y=Zt.MAX_VALUE,x=-1;this.bSymbolTableReady||Ir.initialize();for(let E=0;E<Ir.RATIOS_TABLE.length;E++){let d=0,v=Ir.RATIOS_TABLE[E];for(let A=0;A<Pt.BARS_IN_MODULE;A++){let I=Math.fround(v[A]-h[A]);if(d+=Math.fround(I*I),d>=y)break}d<y&&(y=d,x=Pt.SYMBOL_TABLE[E])}return x}}Ir.bSymbolTableReady=!1,Ir.RATIOS_TABLE=new Array(Pt.SYMBOL_TABLE.length).map(Y=>new Array(Pt.BARS_IN_MODULE));class Ha{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(o){this.segmentIndex=o}getFileId(){return this.fileId}setFileId(o){this.fileId=o}getOptionalData(){return this.optionalData}setOptionalData(o){this.optionalData=o}isLastSegment(){return this.lastSegment}setLastSegment(o){this.lastSegment=o}getSegmentCount(){return this.segmentCount}setSegmentCount(o){this.segmentCount=o}getSender(){return this.sender||null}setSender(o){this.sender=o}getAddressee(){return this.addressee||null}setAddressee(o){this.addressee=o}getFileName(){return this.fileName}setFileName(o){this.fileName=o}getFileSize(){return this.fileSize}setFileSize(o){this.fileSize=o}getChecksum(){return this.checksum}setChecksum(o){this.checksum=o}getTimestamp(){return this.timestamp}setTimestamp(o){this.timestamp=o}}class Gs{static parseLong(o,c=void 0){return parseInt(o,c)}}class os extends p{}os.kind="NullPointerException";class tl{writeBytes(o){this.writeBytesOffset(o,0,o.length)}writeBytesOffset(o,c,h){if(o==null)throw new os;if(c<0||c>o.length||h<0||c+h>o.length||c+h<0)throw new L;if(h===0)return;for(let y=0;y<h;y++)this.write(o[c+y])}flush(){}close(){}}class vs extends p{}class nl extends tl{constructor(o=32){if(super(),this.count=0,o<0)throw new _("Negative initial size: "+o);this.buf=new Uint8Array(o)}ensureCapacity(o){o-this.buf.length>0&&this.grow(o)}grow(o){let h=this.buf.length<<1;if(h-o<0&&(h=o),h<0){if(o<0)throw new vs;h=K.MAX_VALUE}this.buf=$.copyOfUint8Array(this.buf,h)}write(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1}writeBytesOffset(o,c,h){if(c<0||c>o.length||h<0||c+h-o.length>0)throw new L;this.ensureCapacity(this.count+h),M.arraycopy(o,c,this.buf,this.count,h),this.count+=h}writeTo(o){o.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return $.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(o){return new String(this.buf).toString()}toString_number(o){return new String(this.buf).toString()}close(){}}var En;(function(Y){Y[Y.ALPHA=0]="ALPHA",Y[Y.LOWER=1]="LOWER",Y[Y.MIXED=2]="MIXED",Y[Y.PUNCT=3]="PUNCT",Y[Y.ALPHA_SHIFT=4]="ALPHA_SHIFT",Y[Y.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(En||(En={}));function xs(){if(typeof window<"u")return window.BigInt||null;if(typeof Vg<"u")return Vg.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let co;function sa(Y){if(typeof co>"u"&&(co=xs()),co===null)throw new Error("BigInt is not supported!");return co(Y)}function bs(){let Y=[];Y[0]=sa(1);let o=sa(900);Y[1]=o;for(let c=2;c<16;c++)Y[c]=Y[c-1]*o;return Y}class ke{static decode(o,c){let h=new J(""),y=U.ISO8859_1;h.enableDecoding(y);let x=1,E=o[x++],d=new Ha;for(;x<o[0];){switch(E){case ke.TEXT_COMPACTION_MODE_LATCH:x=ke.textCompaction(o,x,h);break;case ke.BYTE_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH_6:x=ke.byteCompaction(E,o,y,x,h);break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[x++]);break;case ke.NUMERIC_COMPACTION_MODE_LATCH:x=ke.numericCompaction(o,x,h);break;case ke.ECI_CHARSET:U.getCharacterSetECIByValue(o[x++]);break;case ke.ECI_GENERAL_PURPOSE:x+=2;break;case ke.ECI_USER_DEFINED:x++;break;case ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK:x=ke.decodeMacroBlock(o,x,d);break;case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ke.MACRO_PDF417_TERMINATOR:throw new V;default:x--,x=ke.textCompaction(o,x,h);break}if(x<o.length)E=o[x++];else throw V.getFormatInstance()}if(h.length()===0)throw V.getFormatInstance();let v=new Ne(null,h.toString(),null,c);return v.setOther(d),v}static decodeMacroBlock(o,c,h){if(c+ke.NUMBER_OF_SEQUENCE_CODEWORDS>o[0])throw V.getFormatInstance();let y=new Int32Array(ke.NUMBER_OF_SEQUENCE_CODEWORDS);for(let d=0;d<ke.NUMBER_OF_SEQUENCE_CODEWORDS;d++,c++)y[d]=o[c];h.setSegmentIndex(K.parseInt(ke.decodeBase900toBase10(y,ke.NUMBER_OF_SEQUENCE_CODEWORDS)));let x=new J;c=ke.textCompaction(o,c,x),h.setFileId(x.toString());let E=-1;for(o[c]===ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(E=c+1);c<o[0];)switch(o[c]){case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(c++,o[c]){case ke.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let d=new J;c=ke.textCompaction(o,c+1,d),h.setFileName(d.toString());break;case ke.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let v=new J;c=ke.textCompaction(o,c+1,v),h.setSender(v.toString());break;case ke.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let A=new J;c=ke.textCompaction(o,c+1,A),h.setAddressee(A.toString());break;case ke.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let I=new J;c=ke.numericCompaction(o,c+1,I),h.setSegmentCount(K.parseInt(I.toString()));break;case ke.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new J;c=ke.numericCompaction(o,c+1,P),h.setTimestamp(Gs.parseLong(P.toString()));break;case ke.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let k=new J;c=ke.numericCompaction(o,c+1,k),h.setChecksum(K.parseInt(k.toString()));break;case ke.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let F=new J;c=ke.numericCompaction(o,c+1,F),h.setFileSize(Gs.parseLong(F.toString()));break;default:throw V.getFormatInstance()}break;case ke.MACRO_PDF417_TERMINATOR:c++,h.setLastSegment(!0);break;default:throw V.getFormatInstance()}if(E!==-1){let d=c-E;h.isLastSegment()&&d--,h.setOptionalData($.copyOfRange(o,E,E+d))}return c}static textCompaction(o,c,h){let y=new Int32Array((o[0]-c)*2),x=new Int32Array((o[0]-c)*2),E=0,d=!1;for(;c<o[0]&&!d;){let v=o[c++];if(v<ke.TEXT_COMPACTION_MODE_LATCH)y[E]=v/30,y[E+1]=v%30,E+=2;else switch(v){case ke.TEXT_COMPACTION_MODE_LATCH:y[E++]=ke.TEXT_COMPACTION_MODE_LATCH;break;case ke.BYTE_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH_6:case ke.NUMERIC_COMPACTION_MODE_LATCH:case ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ke.MACRO_PDF417_TERMINATOR:c--,d=!0;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y[E]=ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,v=o[c++],x[E]=v,E++;break}}return ke.decodeTextCompaction(y,x,E,h),c}static decodeTextCompaction(o,c,h,y){let x=En.ALPHA,E=En.ALPHA,d=0;for(;d<h;){let v=o[d],A="";switch(x){case En.ALPHA:if(v<26)A=String.fromCharCode(65+v);else switch(v){case 26:A=" ";break;case ke.LL:x=En.LOWER;break;case ke.ML:x=En.MIXED;break;case ke.PS:E=x,x=En.PUNCT_SHIFT;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(c[d]);break;case ke.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break;case En.LOWER:if(v<26)A=String.fromCharCode(97+v);else switch(v){case 26:A=" ";break;case ke.AS:E=x,x=En.ALPHA_SHIFT;break;case ke.ML:x=En.MIXED;break;case ke.PS:E=x,x=En.PUNCT_SHIFT;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(c[d]);break;case ke.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break;case En.MIXED:if(v<ke.PL)A=ke.MIXED_CHARS[v];else switch(v){case ke.PL:x=En.PUNCT;break;case 26:A=" ";break;case ke.LL:x=En.LOWER;break;case ke.AL:x=En.ALPHA;break;case ke.PS:E=x,x=En.PUNCT_SHIFT;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(c[d]);break;case ke.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break;case En.PUNCT:if(v<ke.PAL)A=ke.PUNCT_CHARS[v];else switch(v){case ke.PAL:x=En.ALPHA;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(c[d]);break;case ke.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break;case En.ALPHA_SHIFT:if(x=E,v<26)A=String.fromCharCode(65+v);else switch(v){case 26:A=" ";break;case ke.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break;case En.PUNCT_SHIFT:if(x=E,v<ke.PAL)A=ke.PUNCT_CHARS[v];else switch(v){case ke.PAL:x=En.ALPHA;break;case ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(c[d]);break;case ke.TEXT_COMPACTION_MODE_LATCH:x=En.ALPHA;break}break}A!==""&&y.append(A),d++}}static byteCompaction(o,c,h,y,x){let E=new nl,d=0,v=0,A=!1;switch(o){case ke.BYTE_COMPACTION_MODE_LATCH:let I=new Int32Array(6),P=c[y++];for(;y<c[0]&&!A;)switch(I[d++]=P,v=900*v+P,P=c[y++],P){case ke.TEXT_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH:case ke.NUMERIC_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH_6:case ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ke.MACRO_PDF417_TERMINATOR:y--,A=!0;break;default:if(d%5===0&&d>0){for(let k=0;k<6;++k)E.write(Number(sa(v)>>sa(8*(5-k))));v=0,d=0}break}y===c[0]&&P<ke.TEXT_COMPACTION_MODE_LATCH&&(I[d++]=P);for(let k=0;k<d;k++)E.write(I[k]);break;case ke.BYTE_COMPACTION_MODE_LATCH_6:for(;y<c[0]&&!A;){let k=c[y++];if(k<ke.TEXT_COMPACTION_MODE_LATCH)d++,v=900*v+k;else switch(k){case ke.TEXT_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH:case ke.NUMERIC_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH_6:case ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ke.MACRO_PDF417_TERMINATOR:y--,A=!0;break}if(d%5===0&&d>0){for(let F=0;F<6;++F)E.write(Number(sa(v)>>sa(8*(5-F))));v=0,d=0}}break}return x.append(ie.decode(E.toByteArray(),h)),y}static numericCompaction(o,c,h){let y=0,x=!1,E=new Int32Array(ke.MAX_NUMERIC_CODEWORDS);for(;c<o[0]&&!x;){let d=o[c++];if(c===o[0]&&(x=!0),d<ke.TEXT_COMPACTION_MODE_LATCH)E[y]=d,y++;else switch(d){case ke.TEXT_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH:case ke.BYTE_COMPACTION_MODE_LATCH_6:case ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ke.MACRO_PDF417_TERMINATOR:c--,x=!0;break}(y%ke.MAX_NUMERIC_CODEWORDS===0||d===ke.NUMERIC_COMPACTION_MODE_LATCH||x)&&y>0&&(h.append(ke.decodeBase900toBase10(E,y)),y=0)}return c}static decodeBase900toBase10(o,c){let h=sa(0);for(let x=0;x<c;x++)h+=ke.EXP900[c-x-1]*sa(o[x]);let y=h.toString();if(y.charAt(0)!=="1")throw new V;return y.substring(1)}}ke.TEXT_COMPACTION_MODE_LATCH=900,ke.BYTE_COMPACTION_MODE_LATCH=901,ke.NUMERIC_COMPACTION_MODE_LATCH=902,ke.BYTE_COMPACTION_MODE_LATCH_6=924,ke.ECI_USER_DEFINED=925,ke.ECI_GENERAL_PURPOSE=926,ke.ECI_CHARSET=927,ke.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ke.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ke.MACRO_PDF417_TERMINATOR=922,ke.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ke.MAX_NUMERIC_CODEWORDS=15,ke.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ke.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ke.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ke.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ke.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ke.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ke.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ke.PL=25,ke.LL=27,ke.AS=27,ke.ML=28,ke.AL=28,ke.PS=29,ke.PAL=29,ke.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ke.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ke.EXP900=xs()?bs():[],ke.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Yt{constructor(){}static decode(o,c,h,y,x,E,d){let v=new qa(o,c,h,y,x),A=null,I=null,P;for(let G=!0;;G=!1){if(c!=null&&(A=Yt.getRowIndicatorColumn(o,v,c,!0,E,d)),y!=null&&(I=Yt.getRowIndicatorColumn(o,v,y,!1,E,d)),P=Yt.merge(A,I),P==null)throw de.getNotFoundInstance();let Q=P.getBoundingBox();if(G&&Q!=null&&(Q.getMinY()<v.getMinY()||Q.getMaxY()>v.getMaxY()))v=Q;else break}P.setBoundingBox(v);let k=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,A),P.setDetectionResultColumn(k,I);let F=A!=null;for(let G=1;G<=k;G++){let Q=F?G:k-G;if(P.getDetectionResultColumn(Q)!==void 0)continue;let re;Q===0||Q===k?re=new Ga(v,Q===0):re=new Ta(v),P.setDetectionResultColumn(Q,re);let ne=-1,oe=ne;for(let fe=v.getMinY();fe<=v.getMaxY();fe++){if(ne=Yt.getStartColumn(P,Q,fe,F),ne<0||ne>v.getMaxX()){if(oe===-1)continue;ne=oe}let le=Yt.detectCodeword(o,v.getMinX(),v.getMaxX(),F,ne,fe,E,d);le!=null&&(re.setCodeword(fe,le),oe=ne,E=Math.min(E,le.getWidth()),d=Math.max(d,le.getWidth()))}}return Yt.createDecoderResult(P)}static merge(o,c){if(o==null&&c==null)return null;let h=Yt.getBarcodeMetadata(o,c);if(h==null)return null;let y=qa.merge(Yt.adjustBoundingBox(o),Yt.adjustBoundingBox(c));return new ir(h,y)}static adjustBoundingBox(o){if(o==null)return null;let c=o.getRowHeights();if(c==null)return null;let h=Yt.getMax(c),y=0;for(let d of c)if(y+=h-d,d>0)break;let x=o.getCodewords();for(let d=0;y>0&&x[d]==null;d++)y--;let E=0;for(let d=c.length-1;d>=0&&(E+=h-c[d],!(c[d]>0));d--);for(let d=x.length-1;E>0&&x[d]==null;d--)E--;return o.getBoundingBox().addMissingRows(y,E,o.isLeft())}static getMax(o){let c=-1;for(let h of o)c=Math.max(c,h);return c}static getBarcodeMetadata(o,c){let h;if(o==null||(h=o.getBarcodeMetadata())==null)return c==null?null:c.getBarcodeMetadata();let y;return c==null||(y=c.getBarcodeMetadata())==null?h:h.getColumnCount()!==y.getColumnCount()&&h.getErrorCorrectionLevel()!==y.getErrorCorrectionLevel()&&h.getRowCount()!==y.getRowCount()?null:h}static getRowIndicatorColumn(o,c,h,y,x,E){let d=new Ga(c,y);for(let v=0;v<2;v++){let A=v===0?1:-1,I=Math.trunc(Math.trunc(h.getX()));for(let P=Math.trunc(Math.trunc(h.getY()));P<=c.getMaxY()&&P>=c.getMinY();P+=A){let k=Yt.detectCodeword(o,0,o.getWidth(),y,I,P,x,E);k!=null&&(d.setCodeword(P,k),y?I=k.getStartX():I=k.getEndX())}}return d}static adjustCodewordCount(o,c){let h=c[0][1],y=h.getValue(),x=o.getBarcodeColumnCount()*o.getBarcodeRowCount()-Yt.getNumberOfECCodeWords(o.getBarcodeECLevel());if(y.length===0){if(x<1||x>Pt.MAX_CODEWORDS_IN_BARCODE)throw de.getNotFoundInstance();h.setValue(x)}else y[0]!==x&&h.setValue(x)}static createDecoderResult(o){let c=Yt.createBarcodeMatrix(o);Yt.adjustCodewordCount(o,c);let h=new Array,y=new Int32Array(o.getBarcodeRowCount()*o.getBarcodeColumnCount()),x=[],E=new Array;for(let v=0;v<o.getBarcodeRowCount();v++)for(let A=0;A<o.getBarcodeColumnCount();A++){let I=c[v][A+1].getValue(),P=v*o.getBarcodeColumnCount()+A;I.length===0?h.push(P):I.length===1?y[P]=I[0]:(E.push(P),x.push(I))}let d=new Array(x.length);for(let v=0;v<d.length;v++)d[v]=x[v];return Yt.createDecoderResultFromAmbiguousValues(o.getBarcodeECLevel(),y,Pt.toIntArray(h),Pt.toIntArray(E),d)}static createDecoderResultFromAmbiguousValues(o,c,h,y,x){let E=new Int32Array(y.length),d=100;for(;d-- >0;){for(let v=0;v<E.length;v++)c[y[v]]=x[v][E[v]];try{return Yt.decodeCodewords(c,o,h)}catch(v){if(!(v instanceof N))throw v}if(E.length===0)throw N.getChecksumInstance();for(let v=0;v<E.length;v++)if(E[v]<x[v].length-1){E[v]++;break}else if(E[v]=0,v===E.length-1)throw N.getChecksumInstance()}throw N.getChecksumInstance()}static createBarcodeMatrix(o){let c=Array.from({length:o.getBarcodeRowCount()},()=>new Array(o.getBarcodeColumnCount()+2));for(let y=0;y<c.length;y++)for(let x=0;x<c[y].length;x++)c[y][x]=new aa;let h=0;for(let y of o.getDetectionResultColumns()){if(y!=null){for(let x of y.getCodewords())if(x!=null){let E=x.getRowNumber();if(E>=0){if(E>=c.length)continue;c[E][h].setValue(x.getValue())}}}h++}return c}static isValidBarcodeColumn(o,c){return c>=0&&c<=o.getBarcodeColumnCount()+1}static getStartColumn(o,c,h,y){let x=y?1:-1,E=null;if(Yt.isValidBarcodeColumn(o,c-x)&&(E=o.getDetectionResultColumn(c-x).getCodeword(h)),E!=null)return y?E.getEndX():E.getStartX();if(E=o.getDetectionResultColumn(c).getCodewordNearby(h),E!=null)return y?E.getStartX():E.getEndX();if(Yt.isValidBarcodeColumn(o,c-x)&&(E=o.getDetectionResultColumn(c-x).getCodewordNearby(h)),E!=null)return y?E.getEndX():E.getStartX();let d=0;for(;Yt.isValidBarcodeColumn(o,c-x);){c-=x;for(let v of o.getDetectionResultColumn(c).getCodewords())if(v!=null)return(y?v.getEndX():v.getStartX())+x*d*(v.getEndX()-v.getStartX());d++}return y?o.getBoundingBox().getMinX():o.getBoundingBox().getMaxX()}static detectCodeword(o,c,h,y,x,E,d,v){x=Yt.adjustCodewordStartColumn(o,c,h,y,x,E);let A=Yt.getModuleBitCount(o,c,h,y,x,E);if(A==null)return null;let I,P=Et.sum(A);if(y)I=x+P;else{for(let G=0;G<A.length/2;G++){let Q=A[G];A[G]=A[A.length-1-G],A[A.length-1-G]=Q}I=x,x=I-P}if(!Yt.checkCodewordSkew(P,d,v))return null;let k=Ir.getDecodedValue(A),F=Pt.getCodeword(k);return F===-1?null:new Ia(x,I,Yt.getCodewordBucketNumber(k),F)}static getModuleBitCount(o,c,h,y,x,E){let d=x,v=new Int32Array(8),A=0,I=y?1:-1,P=y;for(;(y?d<h:d>=c)&&A<v.length;)o.get(d,E)===P?(v[A]++,d+=I):(A++,P=!P);return A===v.length||d===(y?h:c)&&A===v.length-1?v:null}static getNumberOfECCodeWords(o){return 2<<o}static adjustCodewordStartColumn(o,c,h,y,x,E){let d=x,v=y?-1:1;for(let A=0;A<2;A++){for(;(y?d>=c:d<h)&&y===o.get(d,E);){if(Math.abs(x-d)>Yt.CODEWORD_SKEW_SIZE)return x;d+=v}v=-v,y=!y}return d}static checkCodewordSkew(o,c,h){return c-Yt.CODEWORD_SKEW_SIZE<=o&&o<=h+Yt.CODEWORD_SKEW_SIZE}static decodeCodewords(o,c,h){if(o.length===0)throw V.getFormatInstance();let y=1<<c+1,x=Yt.correctErrors(o,h,y);Yt.verifyCodewordCount(o,y);let E=ke.decode(o,""+c);return E.setErrorsCorrected(x),E.setErasures(h.length),E}static correctErrors(o,c,h){if(c!=null&&c.length>h/2+Yt.MAX_ERRORS||h<0||h>Yt.MAX_EC_CODEWORDS)throw N.getChecksumInstance();return Yt.errorCorrection.decode(o,h,c)}static verifyCodewordCount(o,c){if(o.length<4)throw V.getFormatInstance();let h=o[0];if(h>o.length)throw V.getFormatInstance();if(h===0)if(c<o.length)o[0]=o.length-c;else throw V.getFormatInstance()}static getBitCountForCodeword(o){let c=new Int32Array(8),h=0,y=c.length-1;for(;!((o&1)!==h&&(h=o&1,y--,y<0));)c[y]++,o>>=1;return c}static getCodewordBucketNumber(o){return o instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(o):this.getCodewordBucketNumber_number(o)}static getCodewordBucketNumber_number(o){return Yt.getCodewordBucketNumber(Yt.getBitCountForCodeword(o))}static getCodewordBucketNumber_Int32Array(o){return(o[0]-o[2]+o[4]-o[6]+9)%9}static toString(o){let c=new Sa;for(let h=0;h<o.length;h++){c.format("Row %2d: ",h);for(let y=0;y<o[h].length;y++){let x=o[h][y];x.getValue().length===0?c.format("        ",null):c.format("%4d(%2d)",x.getValue()[0],x.getConfidence(x.getValue()[0]))}c.format("%n")}return c.toString()}}Yt.CODEWORD_SKEW_SIZE=2,Yt.MAX_ERRORS=3,Yt.MAX_EC_CODEWORDS=512,Yt.errorCorrection=new Aa;class Dr{decode(o,c=null){let h=Dr.decode(o,c,!1);if(h==null||h.length===0||h[0]==null)throw de.getNotFoundInstance();return h[0]}decodeMultiple(o,c=null){try{return Dr.decode(o,c,!0)}catch(h){throw h instanceof V||h instanceof N?de.getNotFoundInstance():h}}static decode(o,c,h){const y=new Array,x=Lt.detectMultiple(o,c,h);for(const E of x.getPoints()){const d=Yt.decode(x.getBits(),E[4],E[5],E[6],E[7],Dr.getMinCodewordWidth(E),Dr.getMaxCodewordWidth(E)),v=new Ve(d.getText(),d.getRawBytes(),void 0,E,$e.PDF_417);v.putMetadata(ut.ERROR_CORRECTION_LEVEL,d.getECLevel());const A=d.getOther();A!=null&&v.putMetadata(ut.PDF417_EXTRA_METADATA,A),y.push(v)}return y.map(E=>E)}static getMaxWidth(o,c){return o==null||c==null?0:Math.trunc(Math.abs(o.getX()-c.getX()))}static getMinWidth(o,c){return o==null||c==null?K.MAX_VALUE:Math.trunc(Math.abs(o.getX()-c.getX()))}static getMaxCodewordWidth(o){return Math.floor(Math.max(Math.max(Dr.getMaxWidth(o[0],o[4]),Dr.getMaxWidth(o[6],o[2])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN),Math.max(Dr.getMaxWidth(o[1],o[5]),Dr.getMaxWidth(o[7],o[3])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(o){return Math.floor(Math.min(Math.min(Dr.getMinWidth(o[0],o[4]),Dr.getMinWidth(o[6],o[2])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN),Math.min(Dr.getMinWidth(o[1],o[5]),Dr.getMinWidth(o[7],o[3])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ka extends p{}Ka.kind="ReaderException";class ko{constructor(o,c){this.verbose=o===!0,c&&this.setHints(c)}decode(o,c){return c&&this.setHints(c),this.decodeInternal(o)}decodeWithState(o){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(o)}setHints(o){this.hints=o;const c=!r(o)&&o.get(Z.TRY_HARDER)===!0,h=r(o)?null:o.get(Z.POSSIBLE_FORMATS),y=new Array;if(!r(h)){const x=h.some(E=>E===$e.UPC_A||E===$e.UPC_E||E===$e.EAN_13||E===$e.EAN_8||E===$e.CODABAR||E===$e.CODE_39||E===$e.CODE_93||E===$e.CODE_128||E===$e.ITF||E===$e.RSS_14||E===$e.RSS_EXPANDED);x&&!c&&y.push(new wi(o,this.verbose)),h.includes($e.QR_CODE)&&y.push(new Tr),h.includes($e.DATA_MATRIX)&&y.push(new Gi),h.includes($e.AZTEC)&&y.push(new gs),h.includes($e.PDF_417)&&y.push(new Dr),x&&c&&y.push(new wi(o,this.verbose))}y.length===0&&(c||y.push(new wi(o,this.verbose)),y.push(new Tr),y.push(new Gi),y.push(new gs),y.push(new Dr),c&&y.push(new wi(o,this.verbose))),this.readers=y}reset(){if(this.readers!==null)for(const o of this.readers)o.reset()}decodeInternal(o){if(this.readers===null)throw new Ka("No readers where selected, nothing can be read.");for(const c of this.readers)try{return c.decode(o,this.hints)}catch(h){if(h instanceof Ka)continue}throw new de("No MultiFormat Readers were able to detect the code.")}}class Wa extends Xe{constructor(o=null,c=500){const h=new ko;h.setHints(o),super(h,c)}decodeBitmap(o){return this.reader.decodeWithState(o)}}class rl extends Xe{constructor(o=500){super(new Dr,o)}}class il extends Xe{constructor(o=500){super(new Tr,o)}}var Br;(function(Y){Y[Y.ERROR_CORRECTION=0]="ERROR_CORRECTION",Y[Y.CHARACTER_SET=1]="CHARACTER_SET",Y[Y.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",Y[Y.MIN_SIZE=3]="MIN_SIZE",Y[Y.MAX_SIZE=4]="MAX_SIZE",Y[Y.MARGIN=5]="MARGIN",Y[Y.PDF417_COMPACT=6]="PDF417_COMPACT",Y[Y.PDF417_COMPACTION=7]="PDF417_COMPACTION",Y[Y.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",Y[Y.AZTEC_LAYERS=9]="AZTEC_LAYERS",Y[Y.QR_VERSION=10]="QR_VERSION"})(Br||(Br={}));var er=Br;class oa{constructor(o){this.field=o,this.cachedGenerators=[],this.cachedGenerators.push(new _t(o,Int32Array.from([1])))}buildGenerator(o){const c=this.cachedGenerators;if(o>=c.length){let h=c[c.length-1];const y=this.field;for(let x=c.length;x<=o;x++){const E=h.multiply(new _t(y,Int32Array.from([1,y.exp(x-1+y.getGeneratorBase())])));c.push(E),h=E}}return c[o]}encode(o,c){if(c===0)throw new _("No error correction bytes");const h=o.length-c;if(h<=0)throw new _("No data bytes provided");const y=this.buildGenerator(c),x=new Int32Array(h);M.arraycopy(o,0,x,0,h);let E=new _t(this.field,x);E=E.multiplyByMonomial(c,1);const v=E.divide(y)[1].getCoefficients(),A=c-v.length;for(let I=0;I<A;I++)o[h+I]=0;M.arraycopy(v,0,o,h+A,v.length)}}class fn{constructor(){}static applyMaskPenaltyRule1(o){return fn.applyMaskPenaltyRule1Internal(o,!0)+fn.applyMaskPenaltyRule1Internal(o,!1)}static applyMaskPenaltyRule2(o){let c=0;const h=o.getArray(),y=o.getWidth(),x=o.getHeight();for(let E=0;E<x-1;E++){const d=h[E];for(let v=0;v<y-1;v++){const A=d[v];A===d[v+1]&&A===h[E+1][v]&&A===h[E+1][v+1]&&c++}}return fn.N2*c}static applyMaskPenaltyRule3(o){let c=0;const h=o.getArray(),y=o.getWidth(),x=o.getHeight();for(let E=0;E<x;E++)for(let d=0;d<y;d++){const v=h[E];d+6<y&&v[d]===1&&v[d+1]===0&&v[d+2]===1&&v[d+3]===1&&v[d+4]===1&&v[d+5]===0&&v[d+6]===1&&(fn.isWhiteHorizontal(v,d-4,d)||fn.isWhiteHorizontal(v,d+7,d+11))&&c++,E+6<x&&h[E][d]===1&&h[E+1][d]===0&&h[E+2][d]===1&&h[E+3][d]===1&&h[E+4][d]===1&&h[E+5][d]===0&&h[E+6][d]===1&&(fn.isWhiteVertical(h,d,E-4,E)||fn.isWhiteVertical(h,d,E+7,E+11))&&c++}return c*fn.N3}static isWhiteHorizontal(o,c,h){c=Math.max(c,0),h=Math.min(h,o.length);for(let y=c;y<h;y++)if(o[y]===1)return!1;return!0}static isWhiteVertical(o,c,h,y){h=Math.max(h,0),y=Math.min(y,o.length);for(let x=h;x<y;x++)if(o[x][c]===1)return!1;return!0}static applyMaskPenaltyRule4(o){let c=0;const h=o.getArray(),y=o.getWidth(),x=o.getHeight();for(let v=0;v<x;v++){const A=h[v];for(let I=0;I<y;I++)A[I]===1&&c++}const E=o.getHeight()*o.getWidth();return Math.floor(Math.abs(c*2-E)*10/E)*fn.N4}static getDataMaskBit(o,c,h){let y,x;switch(o){case 0:y=h+c&1;break;case 1:y=h&1;break;case 2:y=c%3;break;case 3:y=(h+c)%3;break;case 4:y=Math.floor(h/2)+Math.floor(c/3)&1;break;case 5:x=h*c,y=(x&1)+x%3;break;case 6:x=h*c,y=(x&1)+x%3&1;break;case 7:x=h*c,y=x%3+(h+c&1)&1;break;default:throw new _("Invalid mask pattern: "+o)}return y===0}static applyMaskPenaltyRule1Internal(o,c){let h=0;const y=c?o.getHeight():o.getWidth(),x=c?o.getWidth():o.getHeight(),E=o.getArray();for(let d=0;d<y;d++){let v=0,A=-1;for(let I=0;I<x;I++){const P=c?E[d][I]:E[I][d];P===A?v++:(v>=5&&(h+=fn.N1+(v-5)),v=1,A=P)}v>=5&&(h+=fn.N1+(v-5))}return h}}fn.N1=3,fn.N2=3,fn.N3=40,fn.N4=10;class ws{constructor(o,c){this.width=o,this.height=c;const h=new Array(c);for(let y=0;y!==c;y++)h[y]=new Uint8Array(o);this.bytes=h}getHeight(){return this.height}getWidth(){return this.width}get(o,c){return this.bytes[c][o]}getArray(){return this.bytes}setNumber(o,c,h){this.bytes[c][o]=h}setBoolean(o,c,h){this.bytes[c][o]=h?1:0}clear(o){for(const c of this.bytes)$.fill(c,o)}equals(o){if(!(o instanceof ws))return!1;const c=o;if(this.width!==c.width||this.height!==c.height)return!1;for(let h=0,y=this.height;h<y;++h){const x=this.bytes[h],E=c.bytes[h];for(let d=0,v=this.width;d<v;++d)if(x[d]!==E[d])return!1}return!0}toString(){const o=new J;for(let c=0,h=this.height;c<h;++c){const y=this.bytes[c];for(let x=0,E=this.width;x<E;++x)switch(y[x]){case 0:o.append(" 0");break;case 1:o.append(" 1");break;default:o.append("  ");break}o.append(`
`)}return o.toString()}}class ls{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const o=new J;return o.append(`<<
`),o.append(" mode: "),o.append(this.mode?this.mode.toString():"null"),o.append(`
 ecLevel: `),o.append(this.ecLevel?this.ecLevel.toString():"null"),o.append(`
 version: `),o.append(this.version?this.version.toString():"null"),o.append(`
 maskPattern: `),o.append(this.maskPattern.toString()),this.matrix?(o.append(`
 matrix:
`),o.append(this.matrix.toString())):o.append(`
 matrix: null
`),o.append(`>>
`),o.toString()}setMode(o){this.mode=o}setECLevel(o){this.ecLevel=o}setVersion(o){this.version=o}setMaskPattern(o){this.maskPattern=o}setMatrix(o){this.matrix=o}static isValidMaskPattern(o){return o>=0&&o<ls.NUM_MASK_PATTERNS}}ls.NUM_MASK_PATTERNS=8;class pn extends p{}pn.kind="WriterException";class S{constructor(){}static clearMatrix(o){o.clear(255)}static buildMatrix(o,c,h,y,x){S.clearMatrix(x),S.embedBasicPatterns(h,x),S.embedTypeInfo(c,y,x),S.maybeEmbedVersionInfo(h,x),S.embedDataBits(o,y,x)}static embedBasicPatterns(o,c){S.embedPositionDetectionPatternsAndSeparators(c),S.embedDarkDotAtLeftBottomCorner(c),S.maybeEmbedPositionAdjustmentPatterns(o,c),S.embedTimingPatterns(c)}static embedTypeInfo(o,c,h){const y=new ee;S.makeTypeInfoBits(o,c,y);for(let x=0,E=y.getSize();x<E;++x){const d=y.get(y.getSize()-1-x),v=S.TYPE_INFO_COORDINATES[x],A=v[0],I=v[1];if(h.setBoolean(A,I,d),x<8){const P=h.getWidth()-x-1;h.setBoolean(P,8,d)}else{const k=h.getHeight()-7+(x-8);h.setBoolean(8,k,d)}}}static maybeEmbedVersionInfo(o,c){if(o.getVersionNumber()<7)return;const h=new ee;S.makeVersionInfoBits(o,h);let y=17;for(let x=0;x<6;++x)for(let E=0;E<3;++E){const d=h.get(y);y--,c.setBoolean(x,c.getHeight()-11+E,d),c.setBoolean(c.getHeight()-11+E,x,d)}}static embedDataBits(o,c,h){let y=0,x=-1,E=h.getWidth()-1,d=h.getHeight()-1;for(;E>0;){for(E===6&&(E-=1);d>=0&&d<h.getHeight();){for(let v=0;v<2;++v){const A=E-v;if(!S.isEmpty(h.get(A,d)))continue;let I;y<o.getSize()?(I=o.get(y),++y):I=!1,c!==255&&fn.getDataMaskBit(c,A,d)&&(I=!I),h.setBoolean(A,d,I)}d+=x}x=-x,d+=x,E-=2}if(y!==o.getSize())throw new pn("Not all bits consumed: "+y+"/"+o.getSize())}static findMSBSet(o){return 32-K.numberOfLeadingZeros(o)}static calculateBCHCode(o,c){if(c===0)throw new _("0 polynomial");const h=S.findMSBSet(c);for(o<<=h-1;S.findMSBSet(o)>=h;)o^=c<<S.findMSBSet(o)-h;return o}static makeTypeInfoBits(o,c,h){if(!ls.isValidMaskPattern(c))throw new pn("Invalid mask pattern");const y=o.getBits()<<3|c;h.appendBits(y,5);const x=S.calculateBCHCode(y,S.TYPE_INFO_POLY);h.appendBits(x,10);const E=new ee;if(E.appendBits(S.TYPE_INFO_MASK_PATTERN,15),h.xor(E),h.getSize()!==15)throw new pn("should not happen but we got: "+h.getSize())}static makeVersionInfoBits(o,c){c.appendBits(o.getVersionNumber(),6);const h=S.calculateBCHCode(o.getVersionNumber(),S.VERSION_INFO_POLY);if(c.appendBits(h,12),c.getSize()!==18)throw new pn("should not happen but we got: "+c.getSize())}static isEmpty(o){return o===255}static embedTimingPatterns(o){for(let c=8;c<o.getWidth()-8;++c){const h=(c+1)%2;S.isEmpty(o.get(c,6))&&o.setNumber(c,6,h),S.isEmpty(o.get(6,c))&&o.setNumber(6,c,h)}}static embedDarkDotAtLeftBottomCorner(o){if(o.get(8,o.getHeight()-8)===0)throw new pn;o.setNumber(8,o.getHeight()-8,1)}static embedHorizontalSeparationPattern(o,c,h){for(let y=0;y<8;++y){if(!S.isEmpty(h.get(o+y,c)))throw new pn;h.setNumber(o+y,c,0)}}static embedVerticalSeparationPattern(o,c,h){for(let y=0;y<7;++y){if(!S.isEmpty(h.get(o,c+y)))throw new pn;h.setNumber(o,c+y,0)}}static embedPositionAdjustmentPattern(o,c,h){for(let y=0;y<5;++y){const x=S.POSITION_ADJUSTMENT_PATTERN[y];for(let E=0;E<5;++E)h.setNumber(o+E,c+y,x[E])}}static embedPositionDetectionPattern(o,c,h){for(let y=0;y<7;++y){const x=S.POSITION_DETECTION_PATTERN[y];for(let E=0;E<7;++E)h.setNumber(o+E,c+y,x[E])}}static embedPositionDetectionPatternsAndSeparators(o){const c=S.POSITION_DETECTION_PATTERN[0].length;S.embedPositionDetectionPattern(0,0,o),S.embedPositionDetectionPattern(o.getWidth()-c,0,o),S.embedPositionDetectionPattern(0,o.getWidth()-c,o);const h=8;S.embedHorizontalSeparationPattern(0,h-1,o),S.embedHorizontalSeparationPattern(o.getWidth()-h,h-1,o),S.embedHorizontalSeparationPattern(0,o.getWidth()-h,o);const y=7;S.embedVerticalSeparationPattern(y,0,o),S.embedVerticalSeparationPattern(o.getHeight()-y-1,0,o),S.embedVerticalSeparationPattern(y,o.getHeight()-y,o)}static maybeEmbedPositionAdjustmentPatterns(o,c){if(o.getVersionNumber()<2)return;const h=o.getVersionNumber()-1,y=S.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[h];for(let x=0,E=y.length;x!==E;x++){const d=y[x];if(d>=0)for(let v=0;v!==E;v++){const A=y[v];A>=0&&S.isEmpty(c.get(A,d))&&S.embedPositionAdjustmentPattern(A-2,d-2,c)}}}}S.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),S.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),S.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),S.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),S.VERSION_INFO_POLY=7973,S.TYPE_INFO_POLY=1335,S.TYPE_INFO_MASK_PATTERN=21522;class B{constructor(o,c){this.dataBytes=o,this.errorCorrectionBytes=c}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class H{constructor(){}static calculateMaskPenalty(o){return fn.applyMaskPenaltyRule1(o)+fn.applyMaskPenaltyRule2(o)+fn.applyMaskPenaltyRule3(o)+fn.applyMaskPenaltyRule4(o)}static encode(o,c,h=null){let y=H.DEFAULT_BYTE_MODE_ENCODING;const x=h!==null&&h.get(er.CHARACTER_SET)!==void 0;x&&(y=h.get(er.CHARACTER_SET).toString());const E=this.chooseMode(o,y),d=new ee;if(E===Nt.BYTE&&(x||H.DEFAULT_BYTE_MODE_ENCODING!==y)){const fe=U.getCharacterSetECIByName(y);fe!==void 0&&this.appendECI(fe,d)}this.appendModeInfo(E,d);const v=new ee;this.appendBytes(o,E,v,y);let A;if(h!==null&&h.get(er.QR_VERSION)!==void 0){const fe=Number.parseInt(h.get(er.QR_VERSION).toString(),10);A=wt.getVersionForNumber(fe);const le=this.calculateBitsNeeded(E,d,v,A);if(!this.willFit(le,A,c))throw new pn("Data too big for requested version")}else A=this.recommendVersion(c,E,d,v);const I=new ee;I.appendBitArray(d);const P=E===Nt.BYTE?v.getSizeInBytes():o.length;this.appendLengthInfo(P,A,E,I),I.appendBitArray(v);const k=A.getECBlocksForLevel(c),F=A.getTotalCodewords()-k.getTotalECCodewords();this.terminateBits(F,I);const G=this.interleaveWithECBytes(I,A.getTotalCodewords(),F,k.getNumBlocks()),Q=new ls;Q.setECLevel(c),Q.setMode(E),Q.setVersion(A);const re=A.getDimensionForVersion(),ne=new ws(re,re),oe=this.chooseMaskPattern(G,c,A,ne);return Q.setMaskPattern(oe),S.buildMatrix(G,c,A,oe,ne),Q.setMatrix(ne),Q}static recommendVersion(o,c,h,y){const x=this.calculateBitsNeeded(c,h,y,wt.getVersionForNumber(1)),E=this.chooseVersion(x,o),d=this.calculateBitsNeeded(c,h,y,E);return this.chooseVersion(d,o)}static calculateBitsNeeded(o,c,h,y){return c.getSize()+o.getCharacterCountBits(y)+h.getSize()}static getAlphanumericCode(o){return o<H.ALPHANUMERIC_TABLE.length?H.ALPHANUMERIC_TABLE[o]:-1}static chooseMode(o,c=null){if(U.SJIS.getName()===c&&this.isOnlyDoubleByteKanji(o))return Nt.KANJI;let h=!1,y=!1;for(let x=0,E=o.length;x<E;++x){const d=o.charAt(x);if(H.isDigit(d))h=!0;else if(this.getAlphanumericCode(d.charCodeAt(0))!==-1)y=!0;else return Nt.BYTE}return y?Nt.ALPHANUMERIC:h?Nt.NUMERIC:Nt.BYTE}static isOnlyDoubleByteKanji(o){let c;try{c=ie.encode(o,U.SJIS)}catch{return!1}const h=c.length;if(h%2!==0)return!1;for(let y=0;y<h;y+=2){const x=c[y]&255;if((x<129||x>159)&&(x<224||x>235))return!1}return!0}static chooseMaskPattern(o,c,h,y){let x=Number.MAX_SAFE_INTEGER,E=-1;for(let d=0;d<ls.NUM_MASK_PATTERNS;d++){S.buildMatrix(o,c,h,d,y);let v=this.calculateMaskPenalty(y);v<x&&(x=v,E=d)}return E}static chooseVersion(o,c){for(let h=1;h<=40;h++){const y=wt.getVersionForNumber(h);if(H.willFit(o,y,c))return y}throw new pn("Data too big")}static willFit(o,c,h){const y=c.getTotalCodewords(),E=c.getECBlocksForLevel(h).getTotalECCodewords(),d=y-E,v=(o+7)/8;return d>=v}static terminateBits(o,c){const h=o*8;if(c.getSize()>h)throw new pn("data bits cannot fit in the QR Code"+c.getSize()+" > "+h);for(let E=0;E<4&&c.getSize()<h;++E)c.appendBit(!1);const y=c.getSize()&7;if(y>0)for(let E=y;E<8;E++)c.appendBit(!1);const x=o-c.getSizeInBytes();for(let E=0;E<x;++E)c.appendBits((E&1)===0?236:17,8);if(c.getSize()!==h)throw new pn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(o,c,h,y,x,E){if(y>=h)throw new pn("Block ID too large");const d=o%h,v=h-d,A=Math.floor(o/h),I=A+1,P=Math.floor(c/h),k=P+1,F=A-P,G=I-k;if(F!==G)throw new pn("EC bytes mismatch");if(h!==v+d)throw new pn("RS blocks mismatch");if(o!==(P+F)*v+(k+G)*d)throw new pn("Total bytes mismatch");y<v?(x[0]=P,E[0]=F):(x[0]=k,E[0]=G)}static interleaveWithECBytes(o,c,h,y){if(o.getSizeInBytes()!==h)throw new pn("Number of bits and data bytes does not match");let x=0,E=0,d=0;const v=new Array;for(let I=0;I<y;++I){const P=new Int32Array(1),k=new Int32Array(1);H.getNumDataBytesAndNumECBytesForBlockID(c,h,y,I,P,k);const F=P[0],G=new Uint8Array(F);o.toBytes(8*x,G,0,F);const Q=H.generateECBytes(G,k[0]);v.push(new B(G,Q)),E=Math.max(E,F),d=Math.max(d,Q.length),x+=P[0]}if(h!==x)throw new pn("Data bytes does not match offset");const A=new ee;for(let I=0;I<E;++I)for(const P of v){const k=P.getDataBytes();I<k.length&&A.appendBits(k[I],8)}for(let I=0;I<d;++I)for(const P of v){const k=P.getErrorCorrectionBytes();I<k.length&&A.appendBits(k[I],8)}if(c!==A.getSizeInBytes())throw new pn("Interleaving error: "+c+" and "+A.getSizeInBytes()+" differ.");return A}static generateECBytes(o,c){const h=o.length,y=new Int32Array(h+c);for(let E=0;E<h;E++)y[E]=o[E]&255;new oa(Rt.QR_CODE_FIELD_256).encode(y,c);const x=new Uint8Array(c);for(let E=0;E<c;E++)x[E]=y[h+E];return x}static appendModeInfo(o,c){c.appendBits(o.getBits(),4)}static appendLengthInfo(o,c,h,y){const x=h.getCharacterCountBits(c);if(o>=1<<x)throw new pn(o+" is bigger than "+((1<<x)-1));y.appendBits(o,x)}static appendBytes(o,c,h,y){switch(c){case Nt.NUMERIC:H.appendNumericBytes(o,h);break;case Nt.ALPHANUMERIC:H.appendAlphanumericBytes(o,h);break;case Nt.BYTE:H.append8BitBytes(o,h,y);break;case Nt.KANJI:H.appendKanjiBytes(o,h);break;default:throw new pn("Invalid mode: "+c)}}static getDigit(o){return o.charCodeAt(0)-48}static isDigit(o){const c=H.getDigit(o);return c>=0&&c<=9}static appendNumericBytes(o,c){const h=o.length;let y=0;for(;y<h;){const x=H.getDigit(o.charAt(y));if(y+2<h){const E=H.getDigit(o.charAt(y+1)),d=H.getDigit(o.charAt(y+2));c.appendBits(x*100+E*10+d,10),y+=3}else if(y+1<h){const E=H.getDigit(o.charAt(y+1));c.appendBits(x*10+E,7),y+=2}else c.appendBits(x,4),y++}}static appendAlphanumericBytes(o,c){const h=o.length;let y=0;for(;y<h;){const x=H.getAlphanumericCode(o.charCodeAt(y));if(x===-1)throw new pn;if(y+1<h){const E=H.getAlphanumericCode(o.charCodeAt(y+1));if(E===-1)throw new pn;c.appendBits(x*45+E,11),y+=2}else c.appendBits(x,6),y++}}static append8BitBytes(o,c,h){let y;try{y=ie.encode(o,h)}catch(x){throw new pn(x)}for(let x=0,E=y.length;x!==E;x++){const d=y[x];c.appendBits(d,8)}}static appendKanjiBytes(o,c){let h;try{h=ie.encode(o,U.SJIS)}catch(x){throw new pn(x)}const y=h.length;for(let x=0;x<y;x+=2){const E=h[x]&255,d=h[x+1]&255,v=E<<8&4294967295|d;let A=-1;if(v>=33088&&v<=40956?A=v-33088:v>=57408&&v<=60351&&(A=v-49472),A===-1)throw new pn("Invalid byte sequence");const I=(A>>8)*192+(A&255);c.appendBits(I,13)}}static appendECI(o,c){c.appendBits(Nt.ECI.getBits(),4),c.appendBits(o.getValue(),8)}}H.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),H.DEFAULT_BYTE_MODE_ENCODING=U.UTF8.getName();class se{write(o,c,h,y=null){if(o.length===0)throw new _("Found empty contents");if(c<0||h<0)throw new _("Requested dimensions are too small: "+c+"x"+h);let x=$t.L,E=se.QUIET_ZONE_SIZE;y!==null&&(y.get(er.ERROR_CORRECTION)!==void 0&&(x=$t.fromString(y.get(er.ERROR_CORRECTION).toString())),y.get(er.MARGIN)!==void 0&&(E=Number.parseInt(y.get(er.MARGIN).toString(),10)));const d=H.encode(o,x,y);return this.renderResult(d,c,h,E)}writeToDom(o,c,h,y,x=null){typeof o=="string"&&(o=document.querySelector(o));const E=this.write(c,h,y,x);o&&o.appendChild(E)}renderResult(o,c,h,y){const x=o.getMatrix();if(x===null)throw new mn;const E=x.getWidth(),d=x.getHeight(),v=E+y*2,A=d+y*2,I=Math.max(c,v),P=Math.max(h,A),k=Math.min(Math.floor(I/v),Math.floor(P/A)),F=Math.floor((I-E*k)/2),G=Math.floor((P-d*k)/2),Q=this.createSVGElement(I,P);for(let re=0,ne=G;re<d;re++,ne+=k)for(let oe=0,fe=F;oe<E;oe++,fe+=k)if(x.get(oe,re)===1){const le=this.createSvgRectElement(fe,ne,k,k);Q.appendChild(le)}return Q}createSVGElement(o,c){const h=document.createElementNS(se.SVG_NS,"svg");return h.setAttributeNS(null,"height",o.toString()),h.setAttributeNS(null,"width",c.toString()),h}createSvgRectElement(o,c,h,y){const x=document.createElementNS(se.SVG_NS,"rect");return x.setAttributeNS(null,"x",o.toString()),x.setAttributeNS(null,"y",c.toString()),x.setAttributeNS(null,"height",h.toString()),x.setAttributeNS(null,"width",y.toString()),x.setAttributeNS(null,"fill","#000000"),x}}se.QUIET_ZONE_SIZE=4,se.SVG_NS="http://www.w3.org/2000/svg";class Ae{encode(o,c,h,y,x){if(o.length===0)throw new _("Found empty contents");if(c!==$e.QR_CODE)throw new _("Can only encode QR_CODE, but got "+c);if(h<0||y<0)throw new _(`Requested dimensions are too small: ${h}x${y}`);let E=$t.L,d=Ae.QUIET_ZONE_SIZE;x!==null&&(x.get(er.ERROR_CORRECTION)!==void 0&&(E=$t.fromString(x.get(er.ERROR_CORRECTION).toString())),x.get(er.MARGIN)!==void 0&&(d=Number.parseInt(x.get(er.MARGIN).toString(),10)));const v=H.encode(o,E,x);return Ae.renderResult(v,h,y,d)}static renderResult(o,c,h,y){const x=o.getMatrix();if(x===null)throw new mn;const E=x.getWidth(),d=x.getHeight(),v=E+y*2,A=d+y*2,I=Math.max(c,v),P=Math.max(h,A),k=Math.min(Math.floor(I/v),Math.floor(P/A)),F=Math.floor((I-E*k)/2),G=Math.floor((P-d*k)/2),Q=new xe(I,P);for(let re=0,ne=G;re<d;re++,ne+=k)for(let oe=0,fe=F;oe<E;oe++,fe+=k)x.get(oe,re)===1&&Q.setRegion(fe,ne,k,k);return Q}}Ae.QUIET_ZONE_SIZE=4;class Le{encode(o,c,h,y,x){let E;if(c===$e.QR_CODE)E=new Ae;else throw new _("No encoder available for format "+c);return E.encode(o,c,h,y,x)}}class ot extends qe{constructor(o,c,h,y,x,E,d,v){if(super(E,d),this.yuvData=o,this.dataWidth=c,this.dataHeight=h,this.left=y,this.top=x,y+E>c||x+d>h)throw new _("Crop rectangle does not fit within image data.");v&&this.reverseHorizontal(E,d)}getRow(o,c){if(o<0||o>=this.getHeight())throw new _("Requested row is outside the image: "+o);const h=this.getWidth();(c==null||c.length<h)&&(c=new Uint8ClampedArray(h));const y=(o+this.top)*this.dataWidth+this.left;return M.arraycopy(this.yuvData,y,c,0,h),c}getMatrix(){const o=this.getWidth(),c=this.getHeight();if(o===this.dataWidth&&c===this.dataHeight)return this.yuvData;const h=o*c,y=new Uint8ClampedArray(h);let x=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return M.arraycopy(this.yuvData,x,y,0,h),y;for(let E=0;E<c;E++){const d=E*o;M.arraycopy(this.yuvData,x,y,d,o),x+=this.dataWidth}return y}isCropSupported(){return!0}crop(o,c,h,y){return new ot(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+c,h,y,!1)}renderThumbnail(){const o=this.getWidth()/ot.THUMBNAIL_SCALE_FACTOR,c=this.getHeight()/ot.THUMBNAIL_SCALE_FACTOR,h=new Int32Array(o*c),y=this.yuvData;let x=this.top*this.dataWidth+this.left;for(let E=0;E<c;E++){const d=E*o;for(let v=0;v<o;v++){const A=y[x+v*ot.THUMBNAIL_SCALE_FACTOR]&255;h[d+v]=4278190080|A*65793}x+=this.dataWidth*ot.THUMBNAIL_SCALE_FACTOR}return h}getThumbnailWidth(){return this.getWidth()/ot.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ot.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(o,c){const h=this.yuvData;for(let y=0,x=this.top*this.dataWidth+this.left;y<c;y++,x+=this.dataWidth){const E=x+o/2;for(let d=x,v=x+o-1;d<E;d++,v--){const A=h[d];h[d]=h[v],h[v]=A}}}invert(){return new ze(this)}}ot.THUMBNAIL_SCALE_FACTOR=2;class Gt extends qe{constructor(o,c,h,y,x,E,d){if(super(c,h),this.dataWidth=y,this.dataHeight=x,this.left=E,this.top=d,o.BYTES_PER_ELEMENT===4){const v=c*h,A=new Uint8ClampedArray(v);for(let I=0;I<v;I++){const P=o[I],k=P>>16&255,F=P>>7&510,G=P&255;A[I]=(k+F+G)/4&255}this.luminances=A}else this.luminances=o;if(y===void 0&&(this.dataWidth=c),x===void 0&&(this.dataHeight=h),E===void 0&&(this.left=0),d===void 0&&(this.top=0),this.left+c>this.dataWidth||this.top+h>this.dataHeight)throw new _("Crop rectangle does not fit within image data.")}getRow(o,c){if(o<0||o>=this.getHeight())throw new _("Requested row is outside the image: "+o);const h=this.getWidth();(c==null||c.length<h)&&(c=new Uint8ClampedArray(h));const y=(o+this.top)*this.dataWidth+this.left;return M.arraycopy(this.luminances,y,c,0,h),c}getMatrix(){const o=this.getWidth(),c=this.getHeight();if(o===this.dataWidth&&c===this.dataHeight)return this.luminances;const h=o*c,y=new Uint8ClampedArray(h);let x=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return M.arraycopy(this.luminances,x,y,0,h),y;for(let E=0;E<c;E++){const d=E*o;M.arraycopy(this.luminances,x,y,d,o),x+=this.dataWidth}return y}isCropSupported(){return!0}crop(o,c,h,y){return new Gt(this.luminances,h,y,this.dataWidth,this.dataHeight,this.left+o,this.top+c)}invert(){return new ze(this)}}class kr extends U{static forName(o){return this.getCharacterSetECIByName(o)}}class bn{}bn.ISO_8859_1=U.ISO8859_1;class zn{isCompact(){return this.compact}setCompact(o){this.compact=o}getSize(){return this.size}setSize(o){this.size=o}getLayers(){return this.layers}setLayers(o){this.layers=o}getCodeWords(){return this.codeWords}setCodeWords(o){this.codeWords=o}getMatrix(){return this.matrix}setMatrix(o){this.matrix=o}}class Ca{static singletonList(o){return[o]}static min(o,c){return o.sort(c)[0]}}class $a{constructor(o){this.previous=o}getPrevious(){return this.previous}}class di extends $a{constructor(o,c,h){super(o),this.value=c,this.bitCount=h}appendTo(o,c){o.appendBits(this.value,this.bitCount)}add(o,c){return new di(this,o,c)}addBinaryShift(o,c){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new di(this,o,c)}toString(){let o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+K.toBinaryString(o|1<<this.bitCount).substring(1)+">"}}class Oa extends di{constructor(o,c,h){super(o,0,0),this.binaryShiftStart=c,this.binaryShiftByteCount=h}appendTo(o,c){for(let h=0;h<this.binaryShiftByteCount;h++)(h===0||h===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):h===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(c[this.binaryShiftStart+h],8)}addBinaryShift(o,c){return new Oa(this,o,c)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function fo(Y,o,c){return new Oa(Y,o,c)}function _s(Y,o,c){return new di(Y,o,c)}const Mo=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Hs=0,qu=1,Na=2,Vl=3,Ya=4,al=new di(null,0,0),jo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function qm(Y){for(let o of Y)$.fill(o,-1);return Y[Hs][Ya]=0,Y[qu][Ya]=0,Y[qu][Hs]=28,Y[Vl][Ya]=0,Y[Na][Ya]=0,Y[Na][Hs]=15,Y}const zl=qm($.createInt32Array(6,6));class la{constructor(o,c,h,y){this.token=o,this.mode=c,this.binaryShiftByteCount=h,this.bitCount=y}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(o,c){let h=this.bitCount,y=this.token;if(o!==this.mode){let E=jo[this.mode][o];y=_s(y,E&65535,E>>16),h+=E>>16}let x=o===Na?4:5;return y=_s(y,c,x),new la(y,o,0,h+x)}shiftAndAppend(o,c){let h=this.token,y=this.mode===Na?4:5;return h=_s(h,zl[this.mode][o],y),h=_s(h,c,5),new la(h,this.mode,0,this.bitCount+y+5)}addBinaryShiftChar(o){let c=this.token,h=this.mode,y=this.bitCount;if(this.mode===Ya||this.mode===Na){let d=jo[h][Hs];c=_s(c,d&65535,d>>16),y+=d>>16,h=Hs}let x=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,E=new la(c,h,this.binaryShiftByteCount+1,y+x);return E.binaryShiftByteCount===2078&&(E=E.endBinaryShift(o+1)),E}endBinaryShift(o){if(this.binaryShiftByteCount===0)return this;let c=this.token;return c=fo(c,o-this.binaryShiftByteCount,this.binaryShiftByteCount),new la(c,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(o){let c=this.bitCount+(jo[this.mode][o.mode]>>16);return this.binaryShiftByteCount<o.binaryShiftByteCount?c+=la.calculateBinaryShiftCost(o)-la.calculateBinaryShiftCost(this):this.binaryShiftByteCount>o.binaryShiftByteCount&&o.binaryShiftByteCount>0&&(c+=10),c<=o.bitCount}toBitArray(o){let c=[];for(let y=this.endBinaryShift(o.length).token;y!==null;y=y.getPrevious())c.unshift(y);let h=new ee;for(const y of c)y.appendTo(h,o);return h}toString(){return X.format("%s bits=%d bytes=%d",Mo[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(o){return o.binaryShiftByteCount>62?21:o.binaryShiftByteCount>31?20:o.binaryShiftByteCount>0?10:0}}la.INITIAL_STATE=new la(al,Hs,0,0);function Es(Y){const o=X.getCharCode(" "),c=X.getCharCode("."),h=X.getCharCode(",");Y[Hs][o]=1;const y=X.getCharCode("Z"),x=X.getCharCode("A");for(let k=x;k<=y;k++)Y[Hs][k]=k-x+2;Y[qu][o]=1;const E=X.getCharCode("z"),d=X.getCharCode("a");for(let k=d;k<=E;k++)Y[qu][k]=k-d+2;Y[Na][o]=1;const v=X.getCharCode("9"),A=X.getCharCode("0");for(let k=A;k<=v;k++)Y[Na][k]=k-A+2;Y[Na][h]=12,Y[Na][c]=13;const I=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let k=0;k<I.length;k++)Y[Vl][X.getCharCode(I[k])]=k;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let k=0;k<P.length;k++)X.getCharCode(P[k])>0&&(Y[Ya][X.getCharCode(P[k])]=k);return Y}const ar=Es($.createInt32Array(5,256));class As{constructor(o){this.text=o}encode(){const o=X.getCharCode(" "),c=X.getCharCode(`
`);let h=Ca.singletonList(la.INITIAL_STATE);for(let x=0;x<this.text.length;x++){let E,d=x+1<this.text.length?this.text[x+1]:0;switch(this.text[x]){case X.getCharCode("\r"):E=d===c?2:0;break;case X.getCharCode("."):E=d===o?3:0;break;case X.getCharCode(","):E=d===o?4:0;break;case X.getCharCode(":"):E=d===o?5:0;break;default:E=0}E>0?(h=As.updateStateListForPair(h,x,E),x++):h=this.updateStateListForChar(h,x)}return Ca.min(h,(x,E)=>x.getBitCount()-E.getBitCount()).toBitArray(this.text)}updateStateListForChar(o,c){const h=[];for(let y of o)this.updateStateForChar(y,c,h);return As.simplifyStates(h)}updateStateForChar(o,c,h){let y=this.text[c]&255,x=ar[o.getMode()][y]>0,E=null;for(let d=0;d<=Ya;d++){let v=ar[d][y];if(v>0){if(E==null&&(E=o.endBinaryShift(c)),!x||d===o.getMode()||d===Na){const A=E.latchAndAppend(d,v);h.push(A)}if(!x&&zl[o.getMode()][d]>=0){const A=E.shiftAndAppend(d,v);h.push(A)}}}if(o.getBinaryShiftByteCount()>0||ar[o.getMode()][y]===0){let d=o.addBinaryShiftChar(c);h.push(d)}}static updateStateListForPair(o,c,h){const y=[];for(let x of o)this.updateStateForPair(x,c,h,y);return this.simplifyStates(y)}static updateStateForPair(o,c,h,y){let x=o.endBinaryShift(c);if(y.push(x.latchAndAppend(Ya,h)),o.getMode()!==Ya&&y.push(x.shiftAndAppend(Ya,h)),h===3||h===4){let E=x.latchAndAppend(Na,16-h).latchAndAppend(Na,1);y.push(E)}if(o.getBinaryShiftByteCount()>0){let E=o.addBinaryShiftChar(c).addBinaryShiftChar(c+1);y.push(E)}}static simplifyStates(o){let c=[];for(const h of o){let y=!0;for(const x of c){if(x.isBetterThanOrEqualTo(h)){y=!1;break}h.isBetterThanOrEqualTo(x)&&(c=c.filter(E=>E!==x))}y&&c.push(h)}return c}}class sn{constructor(){}static encodeBytes(o){return sn.encode(o,sn.DEFAULT_EC_PERCENT,sn.DEFAULT_AZTEC_LAYERS)}static encode(o,c,h){let y=new As(o).encode(),x=K.truncDivision(y.getSize()*c,100)+11,E=y.getSize()+x,d,v,A,I,P;if(h!==sn.DEFAULT_AZTEC_LAYERS){if(d=h<0,v=Math.abs(h),v>(d?sn.MAX_NB_BITS_COMPACT:sn.MAX_NB_BITS))throw new _(X.format("Illegal value %s for layers",h));A=sn.totalBitsInLayer(v,d),I=sn.WORD_SIZE[v];let le=A-A%I;if(P=sn.stuffBits(y,I),P.getSize()+x>le)throw new _("Data to large for user specified layer");if(d&&P.getSize()>I*64)throw new _("Data to large for user specified layer")}else{I=0,P=null;for(let le=0;;le++){if(le>sn.MAX_NB_BITS)throw new _("Data too large for an Aztec code");if(d=le<=3,v=d?le+1:le,A=sn.totalBitsInLayer(v,d),E>A)continue;(P==null||I!==sn.WORD_SIZE[v])&&(I=sn.WORD_SIZE[v],P=sn.stuffBits(y,I));let ge=A-A%I;if(!(d&&P.getSize()>I*64)&&P.getSize()+x<=ge)break}}let k=sn.generateCheckWords(P,A,I),F=P.getSize()/I,G=sn.generateModeMessage(d,v,F),Q=(d?11:14)+v*4,re=new Int32Array(Q),ne;if(d){ne=Q;for(let le=0;le<re.length;le++)re[le]=le}else{ne=Q+1+2*K.truncDivision(K.truncDivision(Q,2)-1,15);let le=K.truncDivision(Q,2),ge=K.truncDivision(ne,2);for(let he=0;he<le;he++){let we=he+K.truncDivision(he,15);re[le-he-1]=ge-we-1,re[le+he]=ge+we+1}}let oe=new xe(ne);for(let le=0,ge=0;le<v;le++){let he=(v-le)*4+(d?9:12);for(let we=0;we<he;we++){let Ce=we*2;for(let be=0;be<2;be++)k.get(ge+Ce+be)&&oe.set(re[le*2+be],re[le*2+we]),k.get(ge+he*2+Ce+be)&&oe.set(re[le*2+we],re[Q-1-le*2-be]),k.get(ge+he*4+Ce+be)&&oe.set(re[Q-1-le*2-be],re[Q-1-le*2-we]),k.get(ge+he*6+Ce+be)&&oe.set(re[Q-1-le*2-we],re[le*2+be])}ge+=he*8}if(sn.drawModeMessage(oe,d,ne,G),d)sn.drawBullsEye(oe,K.truncDivision(ne,2),5);else{sn.drawBullsEye(oe,K.truncDivision(ne,2),7);for(let le=0,ge=0;le<K.truncDivision(Q,2)-1;le+=15,ge+=16)for(let he=K.truncDivision(ne,2)&1;he<ne;he+=2)oe.set(K.truncDivision(ne,2)-ge,he),oe.set(K.truncDivision(ne,2)+ge,he),oe.set(he,K.truncDivision(ne,2)-ge),oe.set(he,K.truncDivision(ne,2)+ge)}let fe=new zn;return fe.setCompact(d),fe.setSize(ne),fe.setLayers(v),fe.setCodeWords(F),fe.setMatrix(oe),fe}static drawBullsEye(o,c,h){for(let y=0;y<h;y+=2)for(let x=c-y;x<=c+y;x++)o.set(x,c-y),o.set(x,c+y),o.set(c-y,x),o.set(c+y,x);o.set(c-h,c-h),o.set(c-h+1,c-h),o.set(c-h,c-h+1),o.set(c+h,c-h),o.set(c+h,c-h+1),o.set(c+h,c+h-1)}static generateModeMessage(o,c,h){let y=new ee;return o?(y.appendBits(c-1,2),y.appendBits(h-1,6),y=sn.generateCheckWords(y,28,4)):(y.appendBits(c-1,5),y.appendBits(h-1,11),y=sn.generateCheckWords(y,40,4)),y}static drawModeMessage(o,c,h,y){let x=K.truncDivision(h,2);if(c)for(let E=0;E<7;E++){let d=x-3+E;y.get(E)&&o.set(d,x-5),y.get(E+7)&&o.set(x+5,d),y.get(20-E)&&o.set(d,x+5),y.get(27-E)&&o.set(x-5,d)}else for(let E=0;E<10;E++){let d=x-5+E+K.truncDivision(E,5);y.get(E)&&o.set(d,x-7),y.get(E+10)&&o.set(x+7,d),y.get(29-E)&&o.set(d,x+7),y.get(39-E)&&o.set(x-7,d)}}static generateCheckWords(o,c,h){let y=o.getSize()/h,x=new oa(sn.getGF(h)),E=K.truncDivision(c,h),d=sn.bitsToWords(o,h,E);x.encode(d,E-y);let v=c%h,A=new ee;A.appendBits(0,v);for(const I of Array.from(d))A.appendBits(I,h);return A}static bitsToWords(o,c,h){let y=new Int32Array(h),x,E;for(x=0,E=o.getSize()/c;x<E;x++){let d=0;for(let v=0;v<c;v++)d|=o.get(x*c+v)?1<<c-v-1:0;y[x]=d}return y}static getGF(o){switch(o){case 4:return Rt.AZTEC_PARAM;case 6:return Rt.AZTEC_DATA_6;case 8:return Rt.AZTEC_DATA_8;case 10:return Rt.AZTEC_DATA_10;case 12:return Rt.AZTEC_DATA_12;default:throw new _("Unsupported word size "+o)}}static stuffBits(o,c){let h=new ee,y=o.getSize(),x=(1<<c)-2;for(let E=0;E<y;E+=c){let d=0;for(let v=0;v<c;v++)(E+v>=y||o.get(E+v))&&(d|=1<<c-1-v);(d&x)===x?(h.appendBits(d&x,c),E--):(d&x)===0?(h.appendBits(d|1,c),E--):h.appendBits(d,c)}return h}static totalBitsInLayer(o,c){return((c?88:112)+16*o)*o}}sn.DEFAULT_EC_PERCENT=33,sn.DEFAULT_AZTEC_LAYERS=0,sn.MAX_NB_BITS=32,sn.MAX_NB_BITS_COMPACT=4,sn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ul{encode(o,c,h,y){return this.encodeWithHints(o,c,h,y,null)}encodeWithHints(o,c,h,y,x){let E=bn.ISO_8859_1,d=sn.DEFAULT_EC_PERCENT,v=sn.DEFAULT_AZTEC_LAYERS;return x!=null&&(x.has(er.CHARACTER_SET)&&(E=kr.forName(x.get(er.CHARACTER_SET).toString())),x.has(er.ERROR_CORRECTION)&&(d=K.parseInt(x.get(er.ERROR_CORRECTION).toString())),x.has(er.AZTEC_LAYERS)&&(v=K.parseInt(x.get(er.AZTEC_LAYERS).toString()))),Ul.encodeLayers(o,c,h,y,E,d,v)}static encodeLayers(o,c,h,y,x,E,d){if(c!==$e.AZTEC)throw new _("Can only encode AZTEC, but got "+c);let v=sn.encode(X.getBytes(o,x),E,d);return Ul.renderResult(v,h,y)}static renderResult(o,c,h){let y=o.getMatrix();if(y==null)throw new mn;let x=y.getWidth(),E=y.getHeight(),d=Math.max(c,x),v=Math.max(h,E),A=Math.min(d/x,v/E),I=(d-x*A)/2,P=(v-E*A)/2,k=new xe(d,v);for(let F=0,G=P;F<E;F++,G+=A)for(let Q=0,re=I;Q<x;Q++,re+=A)y.get(Q,F)&&k.setRegion(re,G,A,A);return k}}n.AbstractExpandedDecoder=Fn,n.ArgumentException=b,n.ArithmeticException=Fe,n.AztecCode=zn,n.AztecCodeReader=gs,n.AztecCodeWriter=Ul,n.AztecDecoder=zt,n.AztecDetector=Ro,n.AztecDetectorResult=zs,n.AztecEncoder=sn,n.AztecHighLevelEncoder=As,n.AztecPoint=Lr,n.BarcodeFormat=$e,n.Binarizer=j,n.BinaryBitmap=T,n.BitArray=ee,n.BitMatrix=xe,n.BitSource=Sr,n.BrowserAztecCodeReader=ps,n.BrowserBarcodeReader=ss,n.BrowserCodeReader=Xe,n.BrowserDatamatrixCodeReader=vn,n.BrowserMultiFormatReader=Wa,n.BrowserPDF417Reader=rl,n.BrowserQRCodeReader=il,n.BrowserQRCodeSvgWriter=se,n.CharacterSetECI=U,n.ChecksumException=N,n.Code128Reader=rt,n.Code39Reader=cn,n.DataMatrixDecodedBitStreamParser=ai,n.DataMatrixReader=Gi,n.DecodeHintType=Z,n.DecoderResult=Ne,n.DefaultGridSampler=Fa,n.DetectorResult=na,n.EAN13Reader=Yn,n.EncodeHintType=er,n.Exception=p,n.FormatException=V,n.GenericGF=Rt,n.GenericGFPoly=_t,n.GlobalHistogramBinarizer=ye,n.GridSampler=ba,n.GridSamplerInstance=bi,n.HTMLCanvasElementLuminanceSource=et,n.HybridBinarizer=_e,n.ITFReader=Ze,n.IllegalArgumentException=_,n.IllegalStateException=mn,n.InvertedLuminanceSource=ze,n.LuminanceSource=qe,n.MathUtils=Et,n.MultiFormatOneDReader=wi,n.MultiFormatReader=ko,n.MultiFormatWriter=Le,n.NotFoundException=de,n.OneDReader=In,n.PDF417DecodedBitStreamParser=ke,n.PDF417DecoderErrorCorrection=Aa,n.PDF417Reader=Dr,n.PDF417ResultMetadata=Ha,n.PerspectiveTransform=$n,n.PlanarYUVLuminanceSource=ot,n.QRCodeByteMatrix=ws,n.QRCodeDataMask=Rr,n.QRCodeDecodedBitStreamParser=Vn,n.QRCodeDecoderErrorCorrectionLevel=$t,n.QRCodeDecoderFormatInformation=Zn,n.QRCodeEncoder=H,n.QRCodeEncoderQRCode=ls,n.QRCodeMaskUtil=fn,n.QRCodeMatrixUtil=S,n.QRCodeMode=Nt,n.QRCodeReader=Tr,n.QRCodeVersion=wt,n.QRCodeWriter=Ae,n.RGBLuminanceSource=Gt,n.RSS14Reader=Cn,n.RSSExpandedReader=Ge,n.ReaderException=Ka,n.ReedSolomonDecoder=Wn,n.ReedSolomonEncoder=oa,n.ReedSolomonException=Wt,n.Result=Ve,n.ResultMetadataType=ut,n.ResultPoint=at,n.StringUtils=X,n.UnsupportedOperationException=ae,n.VideoInputDevice=me,n.WhiteRectangleDetector=hr,n.WriterException=pn,n.ZXingArrays=$,n.ZXingCharset=kr,n.ZXingInteger=K,n.ZXingStandardCharsets=bn,n.ZXingStringBuilder=J,n.ZXingStringEncoding=ie,n.ZXingSystem=M,n.createAbstractExpandedDecoder=$r,Object.defineProperty(n,"__esModule",{value:!0})}))})($g,$g.exports)),$g.exports}var si=nse();const rse=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var tD=(function(){function t(e,n,r){if(this.formatMap=new Map([[At.QR_CODE,si.BarcodeFormat.QR_CODE],[At.AZTEC,si.BarcodeFormat.AZTEC],[At.CODABAR,si.BarcodeFormat.CODABAR],[At.CODE_39,si.BarcodeFormat.CODE_39],[At.CODE_93,si.BarcodeFormat.CODE_93],[At.CODE_128,si.BarcodeFormat.CODE_128],[At.DATA_MATRIX,si.BarcodeFormat.DATA_MATRIX],[At.MAXICODE,si.BarcodeFormat.MAXICODE],[At.ITF,si.BarcodeFormat.ITF],[At.EAN_13,si.BarcodeFormat.EAN_13],[At.EAN_8,si.BarcodeFormat.EAN_8],[At.PDF_417,si.BarcodeFormat.PDF_417],[At.RSS_14,si.BarcodeFormat.RSS_14],[At.RSS_EXPANDED,si.BarcodeFormat.RSS_EXPANDED],[At.UPC_A,si.BarcodeFormat.UPC_A],[At.UPC_E,si.BarcodeFormat.UPC_E],[At.UPC_EAN_EXTENSION,si.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!rse)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(e),a=new Map;a.set(si.DecodeHintType.POSSIBLE_FORMATS,i),a.set(si.DecodeHintType.TRY_HARDER,!1),this.hints=a}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,i){try{r(n.decode(e))}catch(a){i(a)}})},t.prototype.decode=function(e){var n=new si.MultiFormatReader(this.verbose,this.hints),r=new si.HTMLCanvasElementLuminanceSource(e),i=new si.BinaryBitmap(new si.HybridBinarizer(r)),a=n.decode(i);return{text:a.text,format:aB.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t})(),ise=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(b){try{p(r.next(b))}catch(_){l(_)}}function m(b){try{p(r.throw(b))}catch(_){l(_)}}function p(b){b.done?a(b.value):i(b.value).then(f,m)}p((r=r.apply(t,e||[])).next())})},ase=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(b){return m([p,b])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(b){p=[6,b],i=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},nD=(function(){function t(e,n,r){if(this.formatMap=new Map([[At.QR_CODE,"qr_code"],[At.AZTEC,"aztec"],[At.CODABAR,"codabar"],[At.CODE_39,"code_39"],[At.CODE_93,"code_93"],[At.CODE_128,"code_128"],[At.DATA_MATRIX,"data_matrix"],[At.ITF,"itf"],[At.EAN_13,"ean_13"],[At.EAN_8,"ean_8"],[At.PDF_417,"pdf417"],[At.UPC_A,"upc_a"],[At.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return ise(this,void 0,void 0,function(){var n,r;return ase(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:aB.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,i=0,a=e;i<a.length;i++){var l=a[i],f=l.boundingBox.width*l.boundingBox.height;f>r&&(r=f,n=l)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t})(),rD=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(b){try{p(r.next(b))}catch(_){l(_)}}function m(b){try{p(r.throw(b))}catch(_){l(_)}}function p(b){b.done?a(b.value):i(b.value).then(f,m)}p((r=r.apply(t,e||[])).next())})},iD=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(b){return m([p,b])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(b){p=[6,b],i=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},sse=(function(){function t(e,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&nD.isSupported()?(this.primaryDecoder=new nD(e,r,i),this.secondaryDecoder=new tD(e,r,i)):this.primaryDecoder=new tD(e,r,i)}return t.prototype.decodeAsync=function(e){return rD(this,void 0,void 0,function(){var n;return iD(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return rD(this,void 0,void 0,function(){var n,r;return iD(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];e+=i}var a=e/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t})(),hI=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),wv=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(b){try{p(r.next(b))}catch(_){l(_)}}function m(b){try{p(r.throw(b))}catch(_){l(_)}}function p(b){b.done?a(b.value):i(b.value).then(f,m)}p((r=r.apply(t,e||[])).next())})},_v=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(b){return m([p,b])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(b){p=[6,b],i=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},oB=(function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t})(),ose=(function(t){hI(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(oB),lse=(function(t){hI(e,t);function e(n){return t.call(this,"zoom",n)||this}return e})(ose),use=(function(t){hI(e,t);function e(n){return t.call(this,"torch",n)||this}return e})(oB),cse=(function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new lse(this.track)},t.prototype.torchFeature=function(){return new use(this.track)},t})(),fse=(function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,i),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,i){return wv(this,void 0,void 0,function(){var a,l;return _v(this,function(f){switch(f.label){case 0:return a=new t(e,n,i),r.aspectRatio?(l={aspectRatio:r.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(l)]):[3,2];case 1:f.sent(),f.label=2;case 2:return a.setupSurface(),[2,a]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return wv(this,void 0,void 0,function(){return _v(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var i=e.mediaStream.getVideoTracks(),a=i.length,l=0;e.mediaStream.getVideoTracks().forEach(function(f){e.mediaStream.removeTrack(f),f.stop(),++l,l>=a&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new cse(this.getFirstTrackOrFail())},t})(),dse=(function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return wv(this,void 0,void 0,function(){return _v(this,function(i){return[2,fse.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return wv(this,void 0,void 0,function(){var n,r;return _v(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new t(r)]}})})},t})(),aD=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(b){try{p(r.next(b))}catch(_){l(_)}}function m(b){try{p(r.throw(b))}catch(_){l(_)}}function p(b){b.done?a(b.value):i(b.value).then(f,m)}p((r=r.apply(t,e||[])).next())})},sD=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(b){return m([p,b])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(b){p=[6,b],i=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},hse=(function(){function t(){}return t.failIfNotSupported=function(){return aD(this,void 0,void 0,function(){return sD(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return aD(this,void 0,void 0,function(){return sD(this,function(n){return[2,dse.create(e)]})})},t})(),mse=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function f(b){try{p(r.next(b))}catch(_){l(_)}}function m(b){try{p(r.throw(b))}catch(_){l(_)}}function p(b){b.done?a(b.value):i(b.value).then(f,m)}p((r=r.apply(t,e||[])).next())})},gse=function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(b){return m([p,b])}}function m(p){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(n=0)),n;)try{if(r=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(b){p=[6,b],i=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},pse=(function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Sh.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Sh.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return mse(this,void 0,void 0,function(){var e,n,r,i,a,l,f;return gse(this,function(m){switch(m.label){case 0:return e=function(p){for(var b=p.getVideoTracks(),_=0,T=b;_<T.length;_++){var N=T[_];N.enabled=!1,N.stop(),p.removeTrack(N)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=m.sent(),i=[],a=0,l=r;a<l.length;a++)f=l[a],f.kind==="videoinput"&&i.push({id:f.deviceId,label:f.label});return e(n),[2,i]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(a){for(var l=[],f=0,m=a;f<m.length;f++){var p=m[f];p.kind==="video"&&l.push({id:p.id,label:p.label})}e(l)},i=MediaStreamTrack;i.getSources(r)})},t})(),gi;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(gi||(gi={}));var yse=(function(){function t(){this.state=gi.NOT_STARTED,this.onGoingTransactionNewState=gi.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===gi.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=gi.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===gi.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=gi.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==gi.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case gi.UNKNOWN:throw"Transition from unknown is not allowed";case gi.NOT_STARTED:this.failIfNewStateIs(e,[gi.PAUSED]);break;case gi.SCANNING:break;case gi.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,i=n;r<i.length;r++){var a=i[r];if(e===a)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t})(),vse=(function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===gi.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==gi.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===gi.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===gi.PAUSED},t})(),xse=(function(){function t(){}return t.create=function(){return new vse(new yse)},t})(),bse=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Zs=(function(t){bse(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(Zae),wse=(function(){function t(e,n){this.logger=n,this.fps=Zs.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Zs.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?sB.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!au(this.qrbox)},t.create=function(e,n){return new t(e,n)},t})(),_se=(function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new ese(this.verbose),this.qrcode=new sse(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=xse.create()}return t.prototype.start=function(e,n,r,i){var a=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var l;i?l=i:l=this.verbose?this.logger.log:function(){};var f=wse.create(n,this.logger);this.clearElement();var m=!1;f.videoConstraints&&(f.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=m,b=document.getElementById(this.elementId);b.clientWidth?b.clientWidth:Zs.DEFAULT_WIDTH,b.style.position="relative",this.shouldScan=!0,this.element=b;var _=this,T=this.stateManagerProxy.startTransition(gi.SCANNING);return new Promise(function(N,j){var M=p?f.videoConstraints:_.createVideoConstraints(e);if(!M){T.cancel(),j("videoConstraints should be defined");return}var L={};(!p||f.aspectRatio)&&(L.aspectRatio=f.aspectRatio);var z={onRenderSurfaceReady:function($,K){_.setupUi($,K,f),_.isScanning=!0,_.foreverScan(f,r,l)}};hse.failIfNotSupported().then(function($){$.create(M).then(function(K){return K.render(a.element,L,z).then(function(ee){_.renderedCamera=ee,T.execute(),N(null)}).catch(function(ee){T.cancel(),j(ee)})}).catch(function(K){T.cancel(),j(Sh.errorGettingUserMedia(K))})}).catch(function($){T.cancel(),j(Sh.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(gi.PAUSED),this.showPausedState(),(au(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(gi.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(gi.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var a=document.getElementById(Zs.SHADED_REGION_ELEMENT_ID);a&&e.element.removeChild(a)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(au(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,a){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var l=new Image;l.onload=function(){var f=l.width,m=l.height,p=document.getElementById(r.elementId),b=p.clientWidth?p.clientWidth:Zs.DEFAULT_WIDTH,_=Math.max(p.clientHeight?p.clientHeight:m,Zs.FILE_SCAN_MIN_HEIGHT),T=r.computeCanvasDrawConfig(f,m,b,_);if(n){var N=r.createCanvasElement(b,_,"qr-canvas-visible");N.style.display="inline-block",p.appendChild(N);var j=N.getContext("2d");if(!j)throw"Unable to get 2d context from canvas";j.canvas.width=b,j.canvas.height=_,j.drawImage(l,0,0,f,m,T.x,T.y,T.width,T.height)}var M=Zs.FILE_SCAN_HIDDEN_CANVAS_PADDING,L=Math.max(l.width,T.width),z=Math.max(l.height,T.height),$=L+2*M,K=z+2*M,ee=r.createCanvasElement($,K);p.appendChild(ee);var ue=ee.getContext("2d");if(!ue)throw"Unable to get 2d context from canvas";ue.canvas.width=$,ue.canvas.height=K,ue.drawImage(l,0,0,f,m,M,M,L,z);try{r.qrcode.decodeRobustlyAsync(ee).then(function(Z){i(J4.createFromQrcodeResult(Z))}).catch(a)}catch(Z){a("QR code parse error, error = ".concat(Z))}},l.onerror=a,l.onabort=a,l.onstalled=a,l.onsuspend=a,l.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return pse.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!sB.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[At.QR_CODE,At.AZTEC,At.CODABAR,At.CODE_39,At.CODE_93,At.CODE_128,At.DATA_MATRIX,At.MAXICODE,At.ITF,At.EAN_13,At.EAN_8,At.PDF_417,At.RSS_14,At.RSS_EXPANDED,At.UPC_A,At.UPC_E,At.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,a=e.formatsToSupport;i<a.length;i++){var l=a[i];Qae(l)?r.push(l):this.logger.warn("Invalid format: ".concat(l," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(au(e))return!0;if(!au(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(au(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return au(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var i=this,a=r.qrbox;this.validateQrboxConfig(a);var l=this.toQrdimensions(e,n,a),f=function(p){if(p<Zs.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Zs.MIN_QR_BOX_SIZE,"px.")},m=function(p){return p>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=e),p};f(l.width),f(l.height),l.width=m(l.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var i=au(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(i);var a=this.toQrdimensions(e,n,i);a.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var l=r.isShadedBoxEnabled()&&a.height<=n,f={x:0,y:0,width:e,height:n},m=l?this.getShadedRegionBounds(e,n,a):f,p=this.createCanvasElement(m.width,m.height),b={willReadFrequently:!0},_=p.getContext("2d",b);_.canvas.width=m.width,_.canvas.height=m.height,this.element.append(p),l&&this.possiblyInsertShadingElement(this.element,e,n,a),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=_,this.canvasElement=p},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Sh.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,J4.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var a=Sh.codeParseError(i);return n(a,Jae.createFrom(a)),!1})},t.prototype.foreverScan=function(e,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),l=a.videoWidth/a.clientWidth,f=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*l,p=this.qrRegion.height*f,b=this.qrRegion.x*l,_=this.qrRegion.y*f;this.context.drawImage(a,b,_,m,p,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,n,r)},i.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(N){!N&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){T()})):T()}).catch(function(N){i.logger.logError("Error happend while scanning context",N),T()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},a="exact",l=function(j){if(j in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(j,"'")},f=Object.keys(e);if(f.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(f.length," keys");var m=Object.keys(e)[0];if(m!==n&&m!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(m===n){var p=e.facingMode;if(typeof p=="string"){if(l(p))return{facingMode:p}}else if(typeof p=="object")if(a in p){if(l(p["".concat(a)]))return{facingMode:{exact:p["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var b=typeof p;throw"Invalid type of 'facingMode' = ".concat(b)}}else{var _=e.deviceId;if(typeof _=="string")return{deviceId:_};if(typeof _=="object"){if(a in _)return{deviceId:{exact:_["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var T=typeof _;throw"Invalid type of 'deviceId' = ".concat(T)}}}var N=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(N)},t.prototype.computeCanvasDrawConfig=function(e,n,r,i){if(e<=r&&n<=i){var a=(r-e)/2,l=(i-n)/2;return{x:a,y:l,width:e,height:n}}else{var f=e,m=n;return e>r&&(n=r/e*n,e=r),n>i&&(e=i/n*e,n=i),this.logger.log("Image downsampled from "+"".concat(f,"X").concat(m)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,i)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Zs.BORDER_SHADER_MATCH_COLOR:Zs.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var i=e,a=n,l=document.createElement("canvas");return l.style.width="".concat(i,"px"),l.style.height="".concat(a,"px"),l.style.display="none",l.id=au(r)?"qr-canvas":r,l},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,i){if(!(n-i.width<1||r-i.height<1)){var a=document.createElement("div");a.style.position="absolute";var l=(n-i.width)/2,f=(r-i.height)/2;if(a.style.borderLeft="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(Zs.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var m=5,p=40;this.insertShaderBorders(a,p,m,-m,null,0,!0),this.insertShaderBorders(a,p,m,-m,null,0,!1),this.insertShaderBorders(a,p,m,null,-m,0,!0),this.insertShaderBorders(a,p,m,null,-m,0,!1),this.insertShaderBorders(a,m,p+m,-m,null,-m,!0),this.insertShaderBorders(a,m,p+m,null,-m,-m,!0),this.insertShaderBorders(a,m,p+m,-m,null,-m,!1),this.insertShaderBorders(a,m,p+m,null,-m,-m,!1),this.hasBorderShaders=!0}e.append(a)}},t.prototype.insertShaderBorders=function(e,n,r,i,a,l,f){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=Zs.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(n,"px"),m.style.height="".concat(r,"px"),i!==null&&(m.style.top="".concat(i,"px")),a!==null&&(m.style.bottom="".concat(a,"px")),f?m.style.left="".concat(l,"px"):m.style.right="".concat(l,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),e.appendChild(m)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t})(),oD;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(oD||(oD={}));const mI="https://api.anthropic.com/v1/messages";async function Zx(){const t=await Je.userProfiles.toCollection().first();if(!t)return null;const e=t,n=e.anthropicApiKey;if(!n)return null;const r=e.anthropicApiUrl;return{apiKey:n,apiUrl:r||mI}}async function Ese(t,e){const n=await Je.userProfiles.toCollection().first();n?.id&&await Je.userProfiles.update(n.id,{anthropicApiKey:t,anthropicApiUrl:e||mI})}async function lB(t,e){const n=await Zx();if(!n?.apiKey)throw new Error("Geen API-sleutel ingesteld. Ga naar Profiel  AI Instellingen.");const r=await fetch(n.apiUrl||mI,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":n.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:"claude-sonnet-4-5-20250929",max_tokens:1024,system:e,messages:t})});if(!r.ok){const l=(await r.json().catch(()=>({})))?.error?.message||r.statusText;throw new Error(`AI fout: ${l}`)}return(await r.json()).content?.[0]?.text||"Geen antwoord ontvangen."}async function Ase(t,e){return lB([{role:"user",content:[{type:"image",source:{type:"base64",media_type:e,data:t}},{type:"text",text:"Welk voedsel zie je op deze foto? Geef de voedingswaarden."}]}],`Je bent een Nederlandse voedingsassistent. Analyseer de foto van voedsel.
Geef voor elk herkend product:
- Naam (in het Nederlands)
- Geschatte hoeveelheid in gram
- Geschatte voedingswaarden per 100g: calorien, eiwit, vet, verzadigd vet, koolhydraten, suikers, vezels

Antwoord in JSON-formaat:
[{"naam": "...", "hoeveelheid_g": 100, "per_100g": {"calories": 0, "protein": 0, "fat": 0, "saturatedFat": 0, "carbs": 0, "sugar": 0, "fiber": 0}}]

Als je geen voedsel herkent, antwoord dan met een lege array [].`)}function Sse(){const[t,e]=D.useState("barcode"),[n,r]=D.useState("idle"),[i,a]=D.useState(null),[l,f]=D.useState(null),[m,p]=D.useState(null),b=D.useRef(null),_=Qx(X=>X.addEntry),[T,N]=D.useState(null),[j,M]=D.useState(!1),[L,z]=D.useState([]),[$,K]=D.useState(null),ee=D.useRef(null);D.useEffect(()=>((!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)&&r("unavailable"),()=>{ue()}),[]);const ue=D.useCallback(async()=>{if(b.current){try{b.current.getState()===2&&await b.current.stop()}catch{}b.current=null}r("idle")},[]),Z=D.useCallback(async X=>{if(X===m)return;if(p(X),b.current){try{b.current.getState()===2&&await b.current.stop()}catch{}b.current=null}r("looking-up"),f(null);const J=await Gae(X);J?(a(J),r("idle")):(f(`Product niet gevonden voor barcode: ${X}`),r("idle"))},[m]),V=async()=>{f(null),p(null),a(null),r("requesting");let X;try{X=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),X.getTracks().forEach(J=>J.stop())}catch(J){const xe=J instanceof Error?J.message:String(J);xe.includes("NotAllowed")||xe.includes("Permission")||xe.includes("denied")?r("denied"):xe.includes("NotFound")||xe.includes("DevicesNotFound")||xe.includes("NotReadableError")?r("unavailable"):r("denied");return}try{const J=new _se("scanner-region");b.current=J,r("scanning"),await new Promise(xe=>requestAnimationFrame(xe)),await J.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150},aspectRatio:1},xe=>{Z(xe)},()=>{})}catch(J){const xe=J instanceof Error?J.message:String(J);xe.includes("Permission")||xe.includes("NotAllowed")?r("denied"):(f("Kan scanner niet starten. Probeer het opnieuw."),r("idle"))}},W=async(X,J)=>{if(!i)return;const xe=y0(i.pointsPer100g,X);await _({foodItem:i,mealType:J,quantityG:X,points:xe}),a(null),p(null)},U=async X=>{const J=X.target.files?.[0];if(!J)return;K(null),z([]);const xe=new FileReader;xe.onload=async de=>{const ye=de.target?.result;if(N(ye),!(await Zx())?.apiKey){K("Geen API-sleutel ingesteld. Ga naar Profiel  AI Instellingen.");return}M(!0);try{const qe=ye.split(",")[1],ze=J.type||"image/jpeg",me=(await Ase(qe,ze)).match(/\[[\s\S]*\]/);if(me){const Xe=JSON.parse(me[0]).map(Ve=>{const pt={calories:Ve.per_100g.calories||0,protein:Ve.per_100g.protein||0,fat:Ve.per_100g.fat||0,saturatedFat:Ve.per_100g.saturatedFat||0,unsaturatedFat:Math.max(0,(Ve.per_100g.fat||0)-(Ve.per_100g.saturatedFat||0)),carbs:Ve.per_100g.carbs||0,sugar:Ve.per_100g.sugar||0,addedSugar:0,fiber:Ve.per_100g.fiber||0},$e=p0(pt);return{name:Ve.naam,nutrition:pt,pointsPer100g:$e,servingSizeG:Ve.hoeveelheid_g||100,isZeroPoint:$e===0,source:"user",createdAt:new Date}});z(Xe)}else K("Kon geen voedsel herkennen op de foto. Probeer een andere foto.")}catch(qe){K(qe instanceof Error?qe.message:"Fout bij analyseren")}finally{M(!1)}},xe.readAsDataURL(J)},ae=async X=>{const J=await sI({name:X.name,nutrition:X.nutrition,pointsPer100g:X.pointsPer100g,servingSizeG:X.servingSizeG,isZeroPoint:X.isZeroPoint,isFavorite:!1,source:"user"});a(J)},ie=X=>{X==="barcode"&&t==="photo"?(N(null),z([]),K(null)):X==="photo"&&t==="barcode"&&ue(),e(X)};return O.jsxs(Yc,{title:"Scanner",children:[O.jsxs("div",{className:"flex flex-col items-center gap-4",children:[O.jsxs("div",{className:"flex gap-1 bg-ios-bg rounded-xl p-1 w-full",children:[O.jsxs("button",{onClick:()=>ie("barcode"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[13px] font-medium border-none cursor-pointer transition-colors ${t==="barcode"?"bg-white text-primary shadow-sm":"bg-transparent text-ios-secondary"}`,children:[O.jsx(vv,{size:14}),"Barcode"]}),O.jsxs("button",{onClick:()=>ie("photo"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[13px] font-medium border-none cursor-pointer transition-colors ${t==="photo"?"bg-white text-primary shadow-sm":"bg-transparent text-ios-secondary"}`,children:[O.jsx(B4,{size:14}),"AI Foto"]})]}),t==="barcode"&&O.jsxs(O.Fragment,{children:[O.jsxs(An,{className:"w-full overflow-hidden",children:[O.jsx("div",{id:"scanner-region",className:"w-full bg-black overflow-hidden",style:{minHeight:n==="scanning"?300:0,transition:"min-height 0.2s ease"}}),n==="idle"&&!i&&O.jsxs("div",{className:"flex flex-col items-center py-12 px-4",children:[O.jsx("div",{className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:O.jsx(vv,{size:40,className:"text-primary"})}),O.jsx("h3",{className:"text-[17px] font-semibold mb-1",children:"Scan een barcode"}),O.jsx("p",{className:"text-[13px] text-ios-secondary text-center mb-6 leading-relaxed",children:"Richt je camera op de barcode van een product"}),O.jsx("button",{onClick:V,className:"px-8 py-3 bg-primary text-white rounded-xl text-[17px] font-semibold border-none cursor-pointer active:bg-primary-dark transition-colors",children:"Open camera"})]}),n==="requesting"&&O.jsxs("div",{className:"flex flex-col items-center py-12 px-4",children:[O.jsx(Bc,{size:40,className:"text-primary animate-spin mb-3"}),O.jsx("p",{className:"text-[15px] text-ios-secondary",children:"Camera-toegang aanvragen..."}),O.jsx("p",{className:"text-[12px] text-ios-secondary mt-2 text-center",children:'Tik op "Sta toe" als je browser om toestemming vraagt'})]}),n==="looking-up"&&O.jsxs("div",{className:"flex flex-col items-center py-12",children:[O.jsx(Bc,{size:40,className:"text-primary animate-spin mb-3"}),O.jsx("p",{className:"text-[15px] text-ios-secondary",children:"Product opzoeken..."})]}),n==="denied"&&O.jsxs("div",{className:"flex flex-col items-center py-12 px-6",children:[O.jsx("div",{className:"w-20 h-20 rounded-full bg-ios-warning/10 flex items-center justify-center mb-4",children:O.jsx(mne,{size:40,className:"text-ios-warning"})}),O.jsx("h3",{className:"text-[17px] font-semibold mb-2 text-center",children:"Camera-toegang geweigerd"}),O.jsx("p",{className:"text-[13px] text-ios-secondary text-center leading-relaxed mb-4",children:"Geef toestemming via je instellingen:"}),O.jsxs("div",{className:"bg-ios-bg rounded-xl p-4 w-full mb-6",children:[O.jsx("p",{className:"text-[14px] font-medium mb-2",children:"Op iPhone / iPad:"}),O.jsxs("ol",{className:"text-[13px] text-ios-secondary leading-relaxed list-decimal list-inside space-y-1",children:[O.jsxs("li",{children:["Open ",O.jsx("strong",{children:"Instellingen"})]}),O.jsxs("li",{children:["Scroll naar ",O.jsx("strong",{children:"Safari"})]}),O.jsxs("li",{children:["Tik op ",O.jsx("strong",{children:"Camera"})]}),O.jsxs("li",{children:["Kies ",O.jsx("strong",{children:"Sta toe"})]})]})]}),O.jsx("button",{onClick:V,className:"px-8 py-3 bg-primary text-white rounded-xl text-[17px] font-semibold border-none cursor-pointer active:bg-primary-dark transition-colors",children:"Opnieuw proberen"})]}),n==="unavailable"&&O.jsxs("div",{className:"flex flex-col items-center py-12 px-6",children:[O.jsx("div",{className:"w-20 h-20 rounded-full bg-ios-destructive/10 flex items-center justify-center mb-4",children:O.jsx(xre,{size:40,className:"text-ios-destructive"})}),O.jsx("h3",{className:"text-[17px] font-semibold mb-2",children:"Camera niet beschikbaar"}),O.jsxs("p",{className:"text-[13px] text-ios-secondary text-center leading-relaxed",children:["Open de app via ",O.jsx("strong",{children:"Safari"})," op je iPhone."]})]})]}),l&&n==="idle"&&O.jsxs(An,{className:"w-full px-4 py-3 flex items-center gap-3",children:[O.jsx(yv,{size:20,className:"text-ios-destructive flex-shrink-0"}),O.jsx("div",{className:"flex-1",children:O.jsx("p",{className:"text-[15px] text-ios-text",children:l})}),O.jsx("button",{onClick:V,className:"text-[15px] text-primary font-medium border-none bg-transparent cursor-pointer flex-shrink-0",children:"Opnieuw"})]}),n==="scanning"&&O.jsx("button",{onClick:ue,className:"px-6 py-3 bg-ios-destructive text-white rounded-xl text-[15px] font-semibold border-none cursor-pointer",children:"Stop scanner"})]}),t==="photo"&&O.jsxs(O.Fragment,{children:[O.jsx(An,{className:"w-full",children:T?O.jsxs("div",{children:[O.jsx("img",{src:T,alt:"Foto",className:"w-full h-48 object-cover"}),j&&O.jsxs("div",{className:"flex flex-col items-center py-6",children:[O.jsx(Bc,{size:32,className:"text-primary animate-spin mb-2"}),O.jsx("p",{className:"text-[15px] text-ios-secondary",children:"AI analyseert je foto..."})]})]}):O.jsxs("div",{className:"flex flex-col items-center py-12 px-4",children:[O.jsx("div",{className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:O.jsx(B4,{size:40,className:"text-primary"})}),O.jsx("h3",{className:"text-[17px] font-semibold mb-1",children:"Herken voedsel via foto"}),O.jsx("p",{className:"text-[13px] text-ios-secondary text-center mb-6 leading-relaxed",children:"Maak een foto van je maaltijd en AI herkent de producten met voedingswaarden"}),O.jsx("button",{onClick:()=>ee.current?.click(),className:"px-8 py-3 bg-primary text-white rounded-xl text-[17px] font-semibold border-none cursor-pointer active:bg-primary-dark transition-colors",children:"Maak foto"}),O.jsx("input",{ref:ee,type:"file",accept:"image/*",capture:"environment",onChange:U,className:"hidden"})]})}),$&&O.jsxs(An,{className:"w-full px-4 py-3 flex items-center gap-3",children:[O.jsx(yv,{size:20,className:"text-ios-destructive flex-shrink-0"}),O.jsx("p",{className:"text-[14px] text-ios-text flex-1",children:$})]}),L.length>0&&O.jsxs(An,{className:"w-full",children:[O.jsx("div",{className:"px-4 py-3 border-b border-ios-separator",children:O.jsx("p",{className:"text-[15px] font-semibold",children:"Herkende producten"})}),L.map((X,J)=>O.jsxs("div",{className:`flex items-center justify-between px-4 py-3 ${J<L.length-1?"border-b border-ios-separator":""}`,children:[O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsx("div",{className:"text-[15px] font-medium",children:X.name}),O.jsxs("div",{className:"text-[13px] text-ios-secondary",children:[X.servingSizeG,"g  ",X.pointsPer100g," pt/100g"]})]}),O.jsx("button",{onClick:()=>ae(X),className:"px-3 py-1.5 bg-primary text-white rounded-lg text-[13px] font-medium border-none cursor-pointer",children:"Toevoegen"})]},`${X.name}-${J}`))]}),T&&!j&&O.jsx("button",{onClick:()=>{N(null),z([]),K(null),ee.current?.click()},className:"px-6 py-3 bg-white text-primary rounded-xl text-[15px] font-semibold border border-ios-separator cursor-pointer",children:"Nieuwe foto"})]})]}),i&&O.jsx(JL,{food:i,defaultMealType:"snack",onAdd:W,onClose:()=>{a(null),p(null)}})]})}function uB(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=uB(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Gn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=uB(t))&&(r&&(r+=" "),r+=e);return r}var Tse=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function gI(t){if(typeof t!="string")return!1;var e=Tse;return e.includes(t)}var Ise=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Cse=new Set(Ise);function cB(t){return typeof t!="string"?!1:Cse.has(t)}function fB(t){return typeof t=="string"&&t.startsWith("data-")}function so(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(cB(n)||fB(n))&&(e[n]=t[n]);return e}function dd(t){if(t==null)return null;if(D.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return so(e)}return typeof t=="object"&&!Array.isArray(t)?so(t):null}function as(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(cB(n)||fB(n)||gI(n))&&(e[n]=t[n]);return e}function Ose(t){return t==null?null:D.isValidElement(t)?as(t.props):typeof t=="object"&&!Array.isArray(t)?as(t):null}var Nse=["children","width","height","viewBox","className","style","title","desc"];function CA(){return CA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CA.apply(null,arguments)}function Pse(t,e){if(t==null)return{};var n,r,i=Rse(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Rse(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var dB=D.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:l,style:f,title:m,desc:p}=t,b=Pse(t,Nse),_=a||{width:r,height:i,x:0,y:0},T=Gn("recharts-surface",l);return D.createElement("svg",CA({},as(b),{className:T,width:r,height:i,style:f,viewBox:"".concat(_.x," ").concat(_.y," ").concat(_.width," ").concat(_.height),ref:e}),D.createElement("title",null,m),D.createElement("desc",null,p),n)}),Dse=["children","className"];function OA(){return OA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OA.apply(null,arguments)}function kse(t,e){if(t==null)return{};var n,r,i=Mse(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Mse(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Xi=D.forwardRef((t,e)=>{var{children:n,className:r}=t,i=kse(t,Dse),a=Gn("recharts-layer",r);return D.createElement("g",OA({className:a},as(i),{ref:e}),n)}),jse=D.createContext(null);function Mr(t){return function(){return t}}const hB=Math.cos,Ev=Math.sin,Qo=Math.sqrt,Av=Math.PI,Jx=2*Av,NA=Math.PI,PA=2*NA,Df=1e-6,Lse=PA-Df;function mB(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Bse(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return mB;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Fse{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?mB:Bse(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,l){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+l}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let l=this._x1,f=this._y1,m=r-e,p=i-n,b=l-e,_=f-n,T=b*b+_*_;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(T>Df)if(!(Math.abs(_*m-p*b)>Df)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let N=r-l,j=i-f,M=m*m+p*p,L=N*N+j*j,z=Math.sqrt(M),$=Math.sqrt(T),K=a*Math.tan((NA-Math.acos((M+T-L)/(2*z*$)))/2),ee=K/$,ue=K/z;Math.abs(ee-1)>Df&&this._append`L${e+ee*b},${n+ee*_}`,this._append`A${a},${a},0,0,${+(_*N>b*j)},${this._x1=e+ue*m},${this._y1=n+ue*p}`}}arc(e,n,r,i,a,l){if(e=+e,n=+n,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let f=r*Math.cos(i),m=r*Math.sin(i),p=e+f,b=n+m,_=1^l,T=l?i-a:a-i;this._x1===null?this._append`M${p},${b}`:(Math.abs(this._x1-p)>Df||Math.abs(this._y1-b)>Df)&&this._append`L${p},${b}`,r&&(T<0&&(T=T%PA+PA),T>Lse?this._append`A${r},${r},0,1,${_},${e-f},${n-m}A${r},${r},0,1,${_},${this._x1=p},${this._y1=b}`:T>Df&&this._append`A${r},${r},0,${+(T>=NA)},${_},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function pI(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Fse(e)}function yI(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function gB(t){this._context=t}gB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function eb(t){return new gB(t)}function pB(t){return t[0]}function yB(t){return t[1]}function vB(t,e){var n=Mr(!0),r=null,i=eb,a=null,l=pI(f);t=typeof t=="function"?t:t===void 0?pB:Mr(t),e=typeof e=="function"?e:e===void 0?yB:Mr(e);function f(m){var p,b=(m=yI(m)).length,_,T=!1,N;for(r==null&&(a=i(N=l())),p=0;p<=b;++p)!(p<b&&n(_=m[p],p,m))===T&&((T=!T)?a.lineStart():a.lineEnd()),T&&a.point(+t(_,p,m),+e(_,p,m));if(N)return a=null,N+""||null}return f.x=function(m){return arguments.length?(t=typeof m=="function"?m:Mr(+m),f):t},f.y=function(m){return arguments.length?(e=typeof m=="function"?m:Mr(+m),f):e},f.defined=function(m){return arguments.length?(n=typeof m=="function"?m:Mr(!!m),f):n},f.curve=function(m){return arguments.length?(i=m,r!=null&&(a=i(r)),f):i},f.context=function(m){return arguments.length?(m==null?r=a=null:a=i(r=m),f):r},f}function X1(t,e,n){var r=null,i=Mr(!0),a=null,l=eb,f=null,m=pI(p);t=typeof t=="function"?t:t===void 0?pB:Mr(+t),e=typeof e=="function"?e:Mr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?yB:Mr(+n);function p(_){var T,N,j,M=(_=yI(_)).length,L,z=!1,$,K=new Array(M),ee=new Array(M);for(a==null&&(f=l($=m())),T=0;T<=M;++T){if(!(T<M&&i(L=_[T],T,_))===z)if(z=!z)N=T,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),j=T-1;j>=N;--j)f.point(K[j],ee[j]);f.lineEnd(),f.areaEnd()}z&&(K[T]=+t(L,T,_),ee[T]=+e(L,T,_),f.point(r?+r(L,T,_):K[T],n?+n(L,T,_):ee[T]))}if($)return f=null,$+""||null}function b(){return vB().defined(i).curve(l).context(a)}return p.x=function(_){return arguments.length?(t=typeof _=="function"?_:Mr(+_),r=null,p):t},p.x0=function(_){return arguments.length?(t=typeof _=="function"?_:Mr(+_),p):t},p.x1=function(_){return arguments.length?(r=_==null?null:typeof _=="function"?_:Mr(+_),p):r},p.y=function(_){return arguments.length?(e=typeof _=="function"?_:Mr(+_),n=null,p):e},p.y0=function(_){return arguments.length?(e=typeof _=="function"?_:Mr(+_),p):e},p.y1=function(_){return arguments.length?(n=_==null?null:typeof _=="function"?_:Mr(+_),p):n},p.lineX0=p.lineY0=function(){return b().x(t).y(e)},p.lineY1=function(){return b().x(t).y(n)},p.lineX1=function(){return b().x(r).y(e)},p.defined=function(_){return arguments.length?(i=typeof _=="function"?_:Mr(!!_),p):i},p.curve=function(_){return arguments.length?(l=_,a!=null&&(f=l(a)),p):l},p.context=function(_){return arguments.length?(_==null?a=f=null:f=l(a=_),p):a},p}class xB{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Vse(t){return new xB(t,!0)}function zse(t){return new xB(t,!1)}const vI={draw(t,e){const n=Qo(e/Av);t.moveTo(n,0),t.arc(0,0,n,0,Jx)}},Use={draw(t,e){const n=Qo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},bB=Qo(1/3),qse=bB*2,Gse={draw(t,e){const n=Qo(e/qse),r=n*bB;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Hse={draw(t,e){const n=Qo(e),r=-n/2;t.rect(r,r,n,n)}},Kse=.8908130915292852,wB=Ev(Av/10)/Ev(7*Av/10),Wse=Ev(Jx/10)*wB,$se=-hB(Jx/10)*wB,Yse={draw(t,e){const n=Qo(e*Kse),r=Wse*n,i=$se*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const l=Jx*a/5,f=hB(l),m=Ev(l);t.lineTo(m*n,-f*n),t.lineTo(f*r-m*i,m*r+f*i)}t.closePath()}},J_=Qo(3),Xse={draw(t,e){const n=-Qo(e/(J_*3));t.moveTo(0,n*2),t.lineTo(-J_*n,-n),t.lineTo(J_*n,-n),t.closePath()}},bo=-.5,wo=Qo(3)/2,RA=1/Qo(12),Qse=(RA/2+1)*3,Zse={draw(t,e){const n=Qo(e/Qse),r=n/2,i=n*RA,a=r,l=n*RA+n,f=-a,m=l;t.moveTo(r,i),t.lineTo(a,l),t.lineTo(f,m),t.lineTo(bo*r-wo*i,wo*r+bo*i),t.lineTo(bo*a-wo*l,wo*a+bo*l),t.lineTo(bo*f-wo*m,wo*f+bo*m),t.lineTo(bo*r+wo*i,bo*i-wo*r),t.lineTo(bo*a+wo*l,bo*l-wo*a),t.lineTo(bo*f+wo*m,bo*m-wo*f),t.closePath()}};function Jse(t,e){let n=null,r=pI(i);t=typeof t=="function"?t:Mr(t||vI),e=typeof e=="function"?e:Mr(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Mr(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Mr(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Sv(){}function Tv(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function _B(t){this._context=t}_B.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Tv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Tv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function eoe(t){return new _B(t)}function EB(t){this._context=t}EB.prototype={areaStart:Sv,areaEnd:Sv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Tv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function toe(t){return new EB(t)}function AB(t){this._context=t}AB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Tv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function noe(t){return new AB(t)}function SB(t){this._context=t}SB.prototype={areaStart:Sv,areaEnd:Sv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function roe(t){return new SB(t)}function lD(t){return t<0?-1:1}function uD(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),l=(n-t._y1)/(i||r<0&&-0),f=(a*i+l*r)/(r+i);return(lD(a)+lD(l))*Math.min(Math.abs(a),Math.abs(l),.5*Math.abs(f))||0}function cD(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function e2(t,e,n){var r=t._x0,i=t._y0,a=t._x1,l=t._y1,f=(a-r)/3;t._context.bezierCurveTo(r+f,i+f*e,a-f,l-f*n,a,l)}function Iv(t){this._context=t}Iv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:e2(this,this._t0,cD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,e2(this,cD(this,n=uD(this,t,e)),n);break;default:e2(this,this._t0,n=uD(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function TB(t){this._context=new IB(t)}(TB.prototype=Object.create(Iv.prototype)).point=function(t,e){Iv.prototype.point.call(this,e,t)};function IB(t){this._context=t}IB.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function ioe(t){return new Iv(t)}function aoe(t){return new TB(t)}function CB(t){this._context=t}CB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=fD(t),i=fD(e),a=0,l=1;l<n;++a,++l)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[l],e[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function fD(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),l=new Array(n);for(i[0]=0,a[0]=2,l[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,l[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,l[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,l[e]-=r*l[e-1];for(i[n-1]=l[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(l[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function soe(t){return new CB(t)}function tb(t,e){this._context=t,this._t=e}tb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function ooe(t){return new tb(t,.5)}function loe(t){return new tb(t,0)}function uoe(t){return new tb(t,1)}function hd(t,e){if((l=t.length)>1)for(var n=1,r,i,a=t[e[0]],l,f=a.length;n<l;++n)for(i=a,a=t[e[n]],r=0;r<f;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function DA(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function coe(t,e){return t[e]}function foe(t){const e=[];return e.key=t,e}function doe(){var t=Mr([]),e=DA,n=hd,r=coe;function i(a){var l=Array.from(t.apply(this,arguments),foe),f,m=l.length,p=-1,b;for(const _ of a)for(f=0,++p;f<m;++f)(l[f][p]=[0,+r(_,l[f].key,p,a)]).data=_;for(f=0,b=yI(e(l));f<m;++f)l[b[f]].index=f;return n(l,b),l}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Mr(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Mr(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?DA:typeof a=="function"?a:Mr(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??hd,i):n},i}function hoe(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,l;i<a;++i){for(l=n=0;n<r;++n)l+=t[n][i][1]||0;if(l)for(n=0;n<r;++n)t[n][i][1]/=l}hd(t,e)}}function moe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var l=0,f=0;l<i;++l)f+=t[l][n][1]||0;r[n][1]+=r[n][0]=-f/2}hd(t,e)}}function goe(t,e){if(!(!((l=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,l;r<a;++r){for(var f=0,m=0,p=0;f<l;++f){for(var b=t[e[f]],_=b[r][1]||0,T=b[r-1][1]||0,N=(_-T)/2,j=0;j<f;++j){var M=t[e[j]],L=M[r][1]||0,z=M[r-1][1]||0;N+=L-z}m+=_,p+=N*_}i[r-1][1]+=i[r-1][0]=n,m&&(n-=p/m)}i[r-1][1]+=i[r-1][0]=n,hd(t,e)}}var t2={},n2={},dD;function poe(){return dD||(dD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(n2)),n2}var r2={},hD;function OB(){return hD||(hD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(r2)),r2}var i2={},mD;function xI(){return mD||(mD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(i2)),i2}var a2={},s2={},gD;function yoe(){return gD||(gD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(s2)),s2}var pD;function bI(){return pD||(pD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yoe(),n=xI();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],l=i.length;if(l===0)return a;let f=0,m="",p="",b=!1;for(i.charCodeAt(0)===46&&(a.push(""),f++);f<l;){const _=i[f];p?_==="\\"&&f+1<l?(f++,m+=i[f]):_===p?p="":m+=_:b?_==='"'||_==="'"?p=_:_==="]"?(b=!1,a.push(m),m=""):m+=_:_==="["?(b=!0,m&&(a.push(m),m="")):_==="."?m&&(a.push(m),m=""):m+=_,f++}return m&&a.push(m),a}t.toPath=r})(a2)),a2}var yD;function wI(){return yD||(yD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=poe(),n=OB(),r=xI(),i=bI();function a(f,m,p){if(f==null)return p;switch(typeof m){case"string":{if(e.isUnsafeProperty(m))return p;const b=f[m];return b===void 0?n.isDeepKey(m)?a(f,i.toPath(m),p):p:b}case"number":case"symbol":{typeof m=="number"&&(m=r.toKey(m));const b=f[m];return b===void 0?p:b}default:{if(Array.isArray(m))return l(f,m,p);if(Object.is(m?.valueOf(),-0)?m="-0":m=String(m),e.isUnsafeProperty(m))return p;const b=f[m];return b===void 0?p:b}}}function l(f,m,p){if(m.length===0)return p;let b=f;for(let _=0;_<m.length;_++){if(b==null||e.isUnsafeProperty(m[_]))return p;b=b[m[_]]}return b===void 0?p:b}t.get=a})(t2)),t2}var o2,vD;function voe(){return vD||(vD=1,o2=wI().get),o2}var xoe=voe();const md=Rl(xoe);var boe=4;function Nc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:boe,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function yi(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,a,l)=>{var f=n[l-1];return typeof f=="string"?i+f+a:f!==void 0?i+Nc(f)+a:i+a},"")}var pa=t=>t===0?0:t>0?1:-1,Ol=t=>typeof t=="number"&&t!=+t,gd=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,St=t=>(typeof t=="number"||t instanceof Number)&&!Ol(t),Io=t=>St(t)||typeof t=="string",woe=0,Op=t=>{var e=++woe;return"".concat(t||"").concat(e)},is=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!St(e)&&typeof e!="string")return r;var a;if(gd(e)){if(n==null)return r;var l=e.indexOf("%");a=n*parseFloat(e.slice(0,l))/100}else a=+e;return Ol(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},NB=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function Jr(t,e,n){return St(t)&&St(e)?Nc(t+n*(e-t)):e}function PB(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):md(r,e))===n)}var li=t=>t===null||typeof t>"u",v0=t=>li(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Ms(t){return t!=null}function Nd(){}var _oe=["type","size","sizeType"];function kA(){return kA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kA.apply(null,arguments)}function xD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xD(Object(n),!0).forEach(function(r){Eoe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eoe(t,e,n){return(e=Aoe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aoe(t){var e=Soe(t,"string");return typeof e=="symbol"?e:e+""}function Soe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Toe(t,e){if(t==null)return{};var n,r,i=Ioe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ioe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var RB={symbolCircle:vI,symbolCross:Use,symbolDiamond:Gse,symbolSquare:Hse,symbolStar:Yse,symbolTriangle:Xse,symbolWye:Zse},Coe=Math.PI/180,Ooe=t=>{var e="symbol".concat(v0(t));return RB[e]||vI},Noe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*Coe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Poe=(t,e)=>{RB["symbol".concat(v0(t))]=e},DB=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=Toe(t,_oe),a=bD(bD({},i),{},{type:e,size:n,sizeType:r}),l="circle";typeof e=="string"&&(l=e);var f=()=>{var T=Ooe(l),N=Jse().type(T).size(Noe(n,r,l)),j=N();if(j!==null)return j},{className:m,cx:p,cy:b}=a,_=as(a);return St(p)&&St(b)&&St(n)?D.createElement("path",kA({},_,{className:Gn("recharts-symbols",m),transform:"translate(".concat(p,", ").concat(b,")"),d:f()})):null};DB.registerSymbol=Poe;var kB=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,_I=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(D.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{gI(i)&&(r[i]=(a=>n[i](n,a)))}),r},Roe=(t,e,n)=>r=>(t(e,n,r),null),nb=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];gI(i)&&typeof a=="function"&&(r||(r={}),r[i]=Roe(a,e,n))}),r};function wD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Doe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wD(Object(n),!0).forEach(function(r){koe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function koe(t,e,n){return(e=Moe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Moe(t){var e=joe(t,"string");return typeof e=="symbol"?e:e+""}function joe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zi(t,e){var n=Doe({},t),r=e,i=Object.keys(e),a=i.reduce((l,f)=>(l[f]===void 0&&r[f]!==void 0&&(l[f]=r[f]),l),n);return a}var l2={},u2={},_D;function Loe(){return _D||(_D=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const l=n[a],f=r(l,a,n);i.has(f)||i.set(f,l)}return Array.from(i.values())}t.uniqBy=e})(u2)),u2}var c2={},ED;function Boe(){return ED||(ED=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return function(...i){return n.apply(this,i.slice(0,r))}}t.ary=e})(c2)),c2}var f2={},AD;function MB(){return AD||(AD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(f2)),f2}var d2={},h2={},m2={},SD;function Foe(){return SD||(SD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(m2)),m2}var TD;function EI(){return TD||(TD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Foe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(h2)),h2}var g2={},ID;function Voe(){return ID||(ID=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(g2)),g2}var CD;function zoe(){return CD||(CD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=EI(),n=Voe();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(d2)),d2}var p2={},y2={},OD;function Uoe(){return OD||(OD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wI();function n(r){return function(i){return e.get(i,r)}}t.property=n})(y2)),y2}var v2={},x2={},b2={},w2={},ND;function jB(){return ND||(ND=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(w2)),w2}var _2={},PD;function LB(){return PD||(PD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(_2)),_2}var E2={},RD;function BB(){return RD||(RD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.isEqualsSameValueZero=e})(E2)),E2}var DD;function qoe(){return DD||(DD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jB(),n=LB(),r=BB();function i(b,_,T){return typeof T!="function"?i(b,_,()=>{}):a(b,_,function N(j,M,L,z,$,K){const ee=T(j,M,L,z,$,K);return ee!==void 0?!!ee:a(j,M,N,K)},new Map)}function a(b,_,T,N){if(_===b)return!0;switch(typeof _){case"object":return l(b,_,T,N);case"function":return Object.keys(_).length>0?a(b,{..._},T,N):r.isEqualsSameValueZero(b,_);default:return e.isObject(b)?typeof _=="string"?_==="":!0:r.isEqualsSameValueZero(b,_)}}function l(b,_,T,N){if(_==null)return!0;if(Array.isArray(_))return m(b,_,T,N);if(_ instanceof Map)return f(b,_,T,N);if(_ instanceof Set)return p(b,_,T,N);const j=Object.keys(_);if(b==null||n.isPrimitive(b))return j.length===0;if(j.length===0)return!0;if(N?.has(_))return N.get(_)===b;N?.set(_,b);try{for(let M=0;M<j.length;M++){const L=j[M];if(!n.isPrimitive(b)&&!(L in b)||_[L]===void 0&&b[L]!==void 0||_[L]===null&&b[L]!==null||!T(b[L],_[L],L,b,_,N))return!1}return!0}finally{N?.delete(_)}}function f(b,_,T,N){if(_.size===0)return!0;if(!(b instanceof Map))return!1;for(const[j,M]of _.entries()){const L=b.get(j);if(T(L,M,j,b,_,N)===!1)return!1}return!0}function m(b,_,T,N){if(_.length===0)return!0;if(!Array.isArray(b))return!1;const j=new Set;for(let M=0;M<_.length;M++){const L=_[M];let z=!1;for(let $=0;$<b.length;$++){if(j.has($))continue;const K=b[$];let ee=!1;if(T(K,L,M,b,_,N)&&(ee=!0),ee){j.add($),z=!0;break}}if(!z)return!1}return!0}function p(b,_,T,N){return _.size===0?!0:b instanceof Set?m([...b],[..._],T,N):!1}t.isMatchWith=i,t.isSetMatch=p})(b2)),b2}var kD;function FB(){return kD||(kD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qoe();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(x2)),x2}var A2={},S2={},T2={},MD;function Goe(){return MD||(MD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(T2)),T2}var I2={},jD;function AI(){return jD||(jD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(I2)),I2}var C2={},LD;function VB(){return LD||(LD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",l="[object Symbol]",f="[object Date]",m="[object Map]",p="[object Set]",b="[object Array]",_="[object Function]",T="[object ArrayBuffer]",N="[object Object]",j="[object Error]",M="[object DataView]",L="[object Uint8Array]",z="[object Uint8ClampedArray]",$="[object Uint16Array]",K="[object Uint32Array]",ee="[object BigUint64Array]",ue="[object Int8Array]",Z="[object Int16Array]",V="[object Int32Array]",W="[object BigInt64Array]",U="[object Float32Array]",ae="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=T,t.arrayTag=b,t.bigInt64ArrayTag=W,t.bigUint64ArrayTag=ee,t.booleanTag=i,t.dataViewTag=M,t.dateTag=f,t.errorTag=j,t.float32ArrayTag=U,t.float64ArrayTag=ae,t.functionTag=_,t.int16ArrayTag=Z,t.int32ArrayTag=V,t.int8ArrayTag=ue,t.mapTag=m,t.numberTag=r,t.objectTag=N,t.regexpTag=e,t.setTag=p,t.stringTag=n,t.symbolTag=l,t.uint16ArrayTag=$,t.uint32ArrayTag=K,t.uint8ArrayTag=L,t.uint8ClampedArrayTag=z})(C2)),C2}var O2={},BD;function Hoe(){return BD||(BD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(O2)),O2}var FD;function zB(){return FD||(FD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Goe(),n=AI(),r=VB(),i=LB(),a=Hoe();function l(b,_){return f(b,void 0,b,new Map,_)}function f(b,_,T,N=new Map,j=void 0){const M=j?.(b,_,T,N);if(M!==void 0)return M;if(i.isPrimitive(b))return b;if(N.has(b))return N.get(b);if(Array.isArray(b)){const L=new Array(b.length);N.set(b,L);for(let z=0;z<b.length;z++)L[z]=f(b[z],z,T,N,j);return Object.hasOwn(b,"index")&&(L.index=b.index),Object.hasOwn(b,"input")&&(L.input=b.input),L}if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp){const L=new RegExp(b.source,b.flags);return L.lastIndex=b.lastIndex,L}if(b instanceof Map){const L=new Map;N.set(b,L);for(const[z,$]of b)L.set(z,f($,z,T,N,j));return L}if(b instanceof Set){const L=new Set;N.set(b,L);for(const z of b)L.add(f(z,void 0,T,N,j));return L}if(typeof Buffer<"u"&&Buffer.isBuffer(b))return b.subarray();if(a.isTypedArray(b)){const L=new(Object.getPrototypeOf(b)).constructor(b.length);N.set(b,L);for(let z=0;z<b.length;z++)L[z]=f(b[z],z,T,N,j);return L}if(b instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&b instanceof SharedArrayBuffer)return b.slice(0);if(b instanceof DataView){const L=new DataView(b.buffer.slice(0),b.byteOffset,b.byteLength);return N.set(b,L),m(L,b,T,N,j),L}if(typeof File<"u"&&b instanceof File){const L=new File([b],b.name,{type:b.type});return N.set(b,L),m(L,b,T,N,j),L}if(typeof Blob<"u"&&b instanceof Blob){const L=new Blob([b],{type:b.type});return N.set(b,L),m(L,b,T,N,j),L}if(b instanceof Error){const L=new b.constructor;return N.set(b,L),L.message=b.message,L.name=b.name,L.stack=b.stack,L.cause=b.cause,m(L,b,T,N,j),L}if(b instanceof Boolean){const L=new Boolean(b.valueOf());return N.set(b,L),m(L,b,T,N,j),L}if(b instanceof Number){const L=new Number(b.valueOf());return N.set(b,L),m(L,b,T,N,j),L}if(b instanceof String){const L=new String(b.valueOf());return N.set(b,L),m(L,b,T,N,j),L}if(typeof b=="object"&&p(b)){const L=Object.create(Object.getPrototypeOf(b));return N.set(b,L),m(L,b,T,N,j),L}return b}function m(b,_,T=b,N,j){const M=[...Object.keys(_),...e.getSymbols(_)];for(let L=0;L<M.length;L++){const z=M[L],$=Object.getOwnPropertyDescriptor(b,z);($==null||$.writable)&&(b[z]=f(_[z],z,T,N,j))}}function p(b){switch(n.getTag(b)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=l,t.cloneDeepWithImpl=f,t.copyProperties=m})(S2)),S2}var VD;function Koe(){return VD||(VD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zB();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(A2)),A2}var zD;function Woe(){return zD||(zD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FB(),n=Koe();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(v2)),v2}var N2={},P2={},R2={},UD;function $oe(){return UD||(UD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zB(),n=AI(),r=VB();function i(a,l){return e.cloneDeepWith(a,(f,m,p,b)=>{const _=l?.(f,m,p,b);if(_!==void 0)return _;if(typeof a=="object"){if(n.getTag(a)===r.objectTag&&typeof a.constructor!="function"){const T={};return b.set(a,T),e.copyProperties(T,a,p,b),T}switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const T=new a.constructor(a?.valueOf());return e.copyProperties(T,a),T}case r.argumentsTag:{const T={};return e.copyProperties(T,a),T.length=a.length,T[Symbol.iterator]=a[Symbol.iterator],T}default:return}}})}t.cloneDeepWith=i})(R2)),R2}var qD;function Yoe(){return qD||(qD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$oe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(P2)),P2}var D2={},k2={},GD;function UB(){return GD||(GD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(k2)),k2}var M2={},HD;function Xoe(){return HD||(HD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AI();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(M2)),M2}var KD;function Qoe(){return KD||(KD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OB(),n=UB(),r=Xoe(),i=bI();function a(l,f){let m;if(Array.isArray(f)?m=f:typeof f=="string"&&e.isDeepKey(f)&&l?.[f]==null?m=i.toPath(f):m=[f],m.length===0)return!1;let p=l;for(let b=0;b<m.length;b++){const _=m[b];if((p==null||!Object.hasOwn(p,_))&&!((Array.isArray(p)||r.isArguments(p))&&n.isIndex(_)&&_<p.length))return!1;p=p[_]}return!0}t.has=a})(D2)),D2}var WD;function Zoe(){return WD||(WD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FB(),n=xI(),r=Yoe(),i=wI(),a=Qoe();function l(f,m){switch(typeof f){case"object":{Object.is(f?.valueOf(),-0)&&(f="-0");break}case"number":{f=n.toKey(f);break}}return m=r.cloneDeep(m),function(p){const b=i.get(p,f);return b===void 0?a.has(p,f):m===void 0?b===void 0:e.isMatch(b,m)}}t.matchesProperty=l})(N2)),N2}var $D;function Joe(){return $D||($D=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MB(),n=Uoe(),r=Woe(),i=Zoe();function a(l){if(l==null)return e.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?i.matchesProperty(l[0],l[1]):r.matches(l);case"string":case"symbol":case"number":return n.property(l)}}t.iteratee=a})(p2)),p2}var YD;function ele(){return YD||(YD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Loe(),n=Boe(),r=MB(),i=zoe(),a=Joe();function l(f,m=r.identity){return i.isArrayLikeObject(f)?e.uniqBy(Array.from(f),n.ary(a.iteratee(m),1)):[]}t.uniqBy=l})(l2)),l2}var j2,XD;function tle(){return XD||(XD=1,j2=ele().uniqBy),j2}var nle=tle();const QD=Rl(nle);function rle(t,e,n){return e===!0?QD(t,n):typeof e=="function"?QD(t,e):t}var L2={exports:{}},B2={},F2={exports:{}},V2={};var ZD;function ile(){if(ZD)return V2;ZD=1;var t=gm();function e(_,T){return _===T&&(_!==0||1/_===1/T)||_!==_&&T!==T}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,l=t.useDebugValue;function f(_,T){var N=T(),j=r({inst:{value:N,getSnapshot:T}}),M=j[0].inst,L=j[1];return a(function(){M.value=N,M.getSnapshot=T,m(M)&&L({inst:M})},[_,N,T]),i(function(){return m(M)&&L({inst:M}),_(function(){m(M)&&L({inst:M})})},[_]),l(N),N}function m(_){var T=_.getSnapshot;_=_.value;try{var N=T();return!n(_,N)}catch{return!0}}function p(_,T){return T()}var b=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:f;return V2.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:b,V2}var JD;function ale(){return JD||(JD=1,F2.exports=ile()),F2.exports}var ek;function sle(){if(ek)return B2;ek=1;var t=gm(),e=ale();function n(p,b){return p===b&&(p!==0||1/p===1/b)||p!==p&&b!==b}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,l=t.useEffect,f=t.useMemo,m=t.useDebugValue;return B2.useSyncExternalStoreWithSelector=function(p,b,_,T,N){var j=a(null);if(j.current===null){var M={hasValue:!1,value:null};j.current=M}else M=j.current;j=f(function(){function z(Z){if(!$){if($=!0,K=Z,Z=T(Z),N!==void 0&&M.hasValue){var V=M.value;if(N(V,Z))return ee=V}return ee=Z}if(V=ee,r(K,Z))return V;var W=T(Z);return N!==void 0&&N(V,W)?(K=Z,V):(K=Z,ee=W)}var $=!1,K,ee,ue=_===void 0?null:_;return[function(){return z(b())},ue===null?void 0:function(){return z(ue())}]},[b,_,T,N]);var L=i(p,j[0],j[1]);return l(function(){M.hasValue=!0,M.value=L},[L]),m(L),L},B2}var tk;function ole(){return tk||(tk=1,L2.exports=sle()),L2.exports}var lle=ole(),SI=D.createContext(null),ule=t=>t,Gr=()=>{var t=D.useContext(SI);return t?t.store.dispatch:ule},ky=()=>{},cle=()=>ky,fle=(t,e)=>t===e;function Tt(t){var e=D.useContext(SI),n=D.useMemo(()=>e?r=>{if(r!=null)return t(r)}:ky,[e,t]);return lle.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:cle,e?e.store.getState:ky,e?e.store.getState:ky,n,fle)}function dle(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function hle(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function mle(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var nk=t=>Array.isArray(t)?t:[t];function gle(t){const e=Array.isArray(t[0])?t[0]:t;return mle(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function ple(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var yle=class{constructor(t){this.value=t}deref(){return this.value}},vle=typeof WeakRef<"u"?WeakRef:yle,xle=0,rk=1;function Q1(){return{s:xle,v:void 0,o:null,p:null}}function qB(t,e={}){let n=Q1();const{resultEqualityCheck:r}=e;let i,a=0;function l(){let f=n;const{length:m}=arguments;for(let _=0,T=m;_<T;_++){const N=arguments[_];if(typeof N=="function"||typeof N=="object"&&N!==null){let j=f.o;j===null&&(f.o=j=new WeakMap);const M=j.get(N);M===void 0?(f=Q1(),j.set(N,f)):f=M}else{let j=f.p;j===null&&(f.p=j=new Map);const M=j.get(N);M===void 0?(f=Q1(),j.set(N,f)):f=M}}const p=f;let b;if(f.s===rk)b=f.v;else if(b=t.apply(null,arguments),a++,r){const _=i?.deref?.()??i;_!=null&&r(_,b)&&(b=_,a!==0&&a--),i=typeof b=="object"&&b!==null||typeof b=="function"?new vle(b):b}return p.s=rk,p.v=b,b}return l.clearCache=()=>{n=Q1(),l.resetResultsCount()},l.resultsCount=()=>a,l.resetResultsCount=()=>{a=0},l}function ble(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,l=0,f,m={},p=i.pop();typeof p=="object"&&(m=p,p=i.pop()),dle(p,`createSelector expects an output function after the inputs, but received: [${typeof p}]`);const b={...n,...m},{memoize:_,memoizeOptions:T=[],argsMemoize:N=qB,argsMemoizeOptions:j=[]}=b,M=nk(T),L=nk(j),z=gle(i),$=_(function(){return a++,p.apply(null,arguments)},...M),K=N(function(){l++;const ue=ple(z,arguments);return f=$.apply(null,ue),f},...L);return Object.assign(K,{resultFunc:p,memoizedResultFunc:$,dependencies:z,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>f,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:_,argsMemoize:N})};return Object.assign(r,{withTypes:()=>r}),r}var Oe=ble(qB),wle=Object.assign((t,e=Oe)=>{hle(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((l,f,m)=>(l[n[m]]=f,l),{}))},{withTypes:()=>wle}),z2={},U2={},q2={},ik;function _le(){return ik||(ik=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const l=e(r),f=e(i);if(l===f&&l===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?f-l:l-f}return 0};t.compareValues=n})(q2)),q2}var G2={},H2={},ak;function GB(){return ak||(ak=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(H2)),H2}var sk;function Ele(){return sk||(sk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GB(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,l){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||l!=null&&Object.hasOwn(l,a)}t.isKey=i})(G2)),G2}var ok;function Ale(){return ok||(ok=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_le(),n=Ele(),r=bI();function i(a,l,f,m){if(a==null)return[];f=m?void 0:f,Array.isArray(a)||(a=Object.values(a)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(f)||(f=f==null?[]:[f]),f=f.map(N=>String(N));const p=(N,j)=>{let M=N;for(let L=0;L<j.length&&M!=null;++L)M=M[j[L]];return M},b=(N,j)=>j==null||N==null?j:typeof N=="object"&&"key"in N?Object.hasOwn(j,N.key)?j[N.key]:p(j,N.path):typeof N=="function"?N(j):Array.isArray(N)?p(j,N):typeof j=="object"?j[N]:j,_=l.map(N=>(Array.isArray(N)&&N.length===1&&(N=N[0]),N==null||typeof N=="function"||Array.isArray(N)||n.isKey(N)?N:{key:N,path:r.toPath(N)}));return a.map(N=>({original:N,criteria:_.map(j=>b(j,N))})).slice().sort((N,j)=>{for(let M=0;M<_.length;M++){const L=e.compareValues(N.criteria[M],j.criteria[M],f[M]);if(L!==0)return L}return 0}).map(N=>N.original)}t.orderBy=i})(U2)),U2}var K2={},lk;function Sle(){return lk||(lk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),l=(f,m)=>{for(let p=0;p<f.length;p++){const b=f[p];Array.isArray(b)&&m<a?l(b,m+1):i.push(b)}};return l(n,0),i}t.flatten=e})(K2)),K2}var W2={},uk;function HB(){return uk||(uk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UB(),n=EI(),r=jB(),i=BB();function a(l,f,m){return r.isObject(m)&&(typeof f=="number"&&n.isArrayLike(m)&&e.isIndex(f)&&f<m.length||typeof f=="string"&&f in m)?i.isEqualsSameValueZero(m[f],l):!1}t.isIterateeCall=a})(W2)),W2}var ck;function Tle(){return ck||(ck=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ale(),n=Sle(),r=HB();function i(a,...l){const f=l.length;return f>1&&r.isIterateeCall(a,l[0],l[1])?l=[]:f>2&&r.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),e.orderBy(a,n.flatten(l),["asc"])}t.sortBy=i})(z2)),z2}var $2,fk;function Ile(){return fk||(fk=1,$2=Tle().sortBy),$2}var Cle=Ile();const rb=Rl(Cle);var KB=t=>t.legend.settings,Ole=t=>t.legend.size,Nle=t=>t.legend.payload;Oe([Nle,KB],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?rb(r,n):r});var Z1=1;function Ple(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=D.useState({height:0,left:0,top:0,width:0}),r=D.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),l={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(l.height-e.height)>Z1||Math.abs(l.left-e.left)>Z1||Math.abs(l.top-e.top)>Z1||Math.abs(l.width-e.width)>Z1)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Ma(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Rle=typeof Symbol=="function"&&Symbol.observable||"@@observable",dk=Rle,Y2=()=>Math.random().toString(36).substring(7).split("").join("."),Dle={INIT:`@@redux/INIT${Y2()}`,REPLACE:`@@redux/REPLACE${Y2()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Y2()}`},Cv=Dle;function TI(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function WB(t,e,n){if(typeof t!="function")throw new Error(Ma(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ma(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ma(1));return n(WB)(t,e)}let r=t,i=e,a=new Map,l=a,f=0,m=!1;function p(){l===a&&(l=new Map,a.forEach((L,z)=>{l.set(z,L)}))}function b(){if(m)throw new Error(Ma(3));return i}function _(L){if(typeof L!="function")throw new Error(Ma(4));if(m)throw new Error(Ma(5));let z=!0;p();const $=f++;return l.set($,L),function(){if(z){if(m)throw new Error(Ma(6));z=!1,p(),l.delete($),a=null}}}function T(L){if(!TI(L))throw new Error(Ma(7));if(typeof L.type>"u")throw new Error(Ma(8));if(typeof L.type!="string")throw new Error(Ma(17));if(m)throw new Error(Ma(9));try{m=!0,i=r(i,L)}finally{m=!1}return(a=l).forEach($=>{$()}),L}function N(L){if(typeof L!="function")throw new Error(Ma(10));r=L,T({type:Cv.REPLACE})}function j(){const L=_;return{subscribe(z){if(typeof z!="object"||z===null)throw new Error(Ma(11));function $(){const ee=z;ee.next&&ee.next(b())}return $(),{unsubscribe:L($)}},[dk](){return this}}}return T({type:Cv.INIT}),{dispatch:T,subscribe:_,getState:b,replaceReducer:N,[dk]:j}}function kle(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Cv.INIT})>"u")throw new Error(Ma(12));if(typeof n(void 0,{type:Cv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ma(13))})}function $B(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const l=e[a];typeof t[l]=="function"&&(n[l]=t[l])}const r=Object.keys(n);let i;try{kle(n)}catch(a){i=a}return function(l={},f){if(i)throw i;let m=!1;const p={};for(let b=0;b<r.length;b++){const _=r[b],T=n[_],N=l[_],j=T(N,f);if(typeof j>"u")throw f&&f.type,new Error(Ma(14));p[_]=j,m=m||j!==N}return m=m||r.length!==Object.keys(l).length,m?p:l}}function Ov(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Mle(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(Ma(15))};const l={getState:i.getState,dispatch:(m,...p)=>a(m,...p)},f=t.map(m=>m(l));return a=Ov(...f)(i.dispatch),{...i,dispatch:a}}}function YB(t){return TI(t)&&"type"in t&&typeof t.type=="string"}var XB=Symbol.for("immer-nothing"),hk=Symbol.for("immer-draftable"),hs=Symbol.for("immer-state");function Vo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var no=Object,lm=no.getPrototypeOf,Nv="constructor",ib="prototype",MA="configurable",Pv="enumerable",My="writable",Np="value",Su=t=>!!t&&!!t[hs];function Xo(t){return t?QB(t)||sb(t)||!!t[hk]||!!t[Nv]?.[hk]||ob(t)||lb(t):!1}var jle=no[ib][Nv].toString(),mk=new WeakMap;function QB(t){if(!t||!II(t))return!1;const e=lm(t);if(e===null||e===no[ib])return!0;const n=no.hasOwnProperty.call(e,Nv)&&e[Nv];if(n===Object)return!0;if(!Eh(n))return!1;let r=mk.get(n);return r===void 0&&(r=Function.toString.call(n),mk.set(n,r)),r===jle}function ab(t,e,n=!0){x0(t)===0?(n?Reflect.ownKeys(t):no.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function x0(t){const e=t[hs];return e?e.type_:sb(t)?1:ob(t)?2:lb(t)?3:0}var gk=(t,e,n=x0(t))=>n===2?t.has(e):no[ib].hasOwnProperty.call(t,e),jA=(t,e,n=x0(t))=>n===2?t.get(e):t[e],Rv=(t,e,n,r=x0(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function Lle(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var sb=Array.isArray,ob=t=>t instanceof Map,lb=t=>t instanceof Set,II=t=>typeof t=="object",Eh=t=>typeof t=="function",X2=t=>typeof t=="boolean";function Ble(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var su=t=>t.copy_||t.base_,CI=t=>t.modified_?t.copy_:t.base_;function LA(t,e){if(ob(t))return new Map(t);if(lb(t))return new Set(t);if(sb(t))return Array[ib].slice.call(t);const n=QB(t);if(e===!0||e==="class_only"&&!n){const r=no.getOwnPropertyDescriptors(t);delete r[hs];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const l=i[a],f=r[l];f[My]===!1&&(f[My]=!0,f[MA]=!0),(f.get||f.set)&&(r[l]={[MA]:!0,[My]:!0,[Pv]:f[Pv],[Np]:t[l]})}return no.create(lm(t),r)}else{const r=lm(t);if(r!==null&&n)return{...t};const i=no.create(r);return no.assign(i,t)}}function OI(t,e=!1){return ub(t)||Su(t)||!Xo(t)||(x0(t)>1&&no.defineProperties(t,{set:J1,add:J1,clear:J1,delete:J1}),no.freeze(t),e&&ab(t,(n,r)=>{OI(r,!0)},!1)),t}function Fle(){Vo(2)}var J1={[Np]:Fle};function ub(t){return t===null||!II(t)?!0:no.isFrozen(t)}var Dv="MapSet",BA="Patches",pk="ArrayMethods",ZB={};function pd(t){const e=ZB[t];return e||Vo(0,t),e}var yk=t=>!!ZB[t],Pp,JB=()=>Pp,Vle=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:yk(Dv)?pd(Dv):void 0,arrayMethodsPlugin_:yk(pk)?pd(pk):void 0});function vk(t,e){e&&(t.patchPlugin_=pd(BA),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function FA(t){VA(t),t.drafts_.forEach(zle),t.drafts_=null}function VA(t){t===Pp&&(Pp=t.parent_)}var xk=t=>Pp=Vle(Pp,t);function zle(t){const e=t[hs];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function bk(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[hs].modified_&&(FA(e),Vo(4)),Xo(t)&&(t=wk(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[hs].base_,t,e)}else t=wk(e,n);return Ule(e,t,!0),FA(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==XB?t:void 0}function wk(t,e){if(ub(e))return e;const n=e[hs];if(!n)return kv(e,t.handledSet_,t);if(!cb(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);nF(n,t)}return n.copy_}function Ule(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&OI(e,n)}function eF(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var cb=(t,e)=>t.scope_===e,qle=[];function tF(t,e,n,r){const i=su(t),a=t.type_;if(r!==void 0&&jA(i,r,a)===e){Rv(i,r,n,a);return}if(!t.draftLocations_){const f=t.draftLocations_=new Map;ab(i,(m,p)=>{if(Su(p)){const b=f.get(p)||[];b.push(m),f.set(p,b)}})}const l=t.draftLocations_.get(e)??qle;for(const f of l)Rv(i,f,n,a)}function Gle(t,e,n){t.callbacks_.push(function(i){const a=e;if(!a||!cb(a,i))return;i.mapSetPlugin_?.fixSetContents(a);const l=CI(a);tF(t,a.draft_??a,l,n),nF(a,i)})}function nF(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:r}=e;if(r){const i=r.getPath(t);i&&r.generatePatches_(t,i,e)}eF(t)}}function Hle(t,e,n){const{scope_:r}=t;if(Su(n)){const i=n[hs];cb(i,r)&&i.callbacks_.push(function(){jy(t);const l=CI(i);tF(t,n,l,e)})}else Xo(n)&&t.callbacks_.push(function(){const a=su(t);t.type_===3?a.has(n)&&kv(n,r.handledSet_,r):jA(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&kv(jA(t.copy_,e,t.type_),r.handledSet_,r)})}function kv(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Su(t)||e.has(t)||!Xo(t)||ub(t)||(e.add(t),ab(t,(r,i)=>{if(Su(i)){const a=i[hs];if(cb(a,n)){const l=CI(a);Rv(t,r,l,t.type_),eF(a)}}else Xo(i)&&kv(i,e,n)})),t}function Kle(t,e){const n=sb(t),r={type_:n?1:0,scope_:e?e.scope_:JB(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=Mv;n&&(i=[r],a=Rp);const{revoke:l,proxy:f}=Proxy.revocable(i,a);return r.draft_=f,r.revoke_=l,[f,r]}var Mv={get(t,e){if(e===hs)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=su(t);if(!gk(i,e,t.type_))return Wle(t,i,e);const a=i[e];if(t.finalized_||!Xo(a)||r&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&Ble(e))return a;if(a===Q2(t.base_,e)){jy(t);const l=t.type_===1?+e:e,f=UA(t.scope_,a,t,l);return t.copy_[l]=f}return a},has(t,e){return e in su(t)},ownKeys(t){return Reflect.ownKeys(su(t))},set(t,e,n){const r=rF(su(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Q2(su(t),e),a=i?.[hs];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(Lle(n,i)&&(n!==void 0||gk(t.base_,e,t.type_)))return!0;jy(t),zA(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),Hle(t,e,n)),!0},deleteProperty(t,e){return jy(t),Q2(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),zA(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=su(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[My]:!0,[MA]:t.type_!==1||e!=="length",[Pv]:r[Pv],[Np]:n[e]}},defineProperty(){Vo(11)},getPrototypeOf(t){return lm(t.base_)},setPrototypeOf(){Vo(12)}},Rp={};for(let t in Mv){let e=Mv[t];Rp[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}Rp.deleteProperty=function(t,e){return Rp.set.call(this,t,e,void 0)};Rp.set=function(t,e,n){return Mv.set.call(this,t[0],e,n,t[0])};function Q2(t,e){const n=t[hs];return(n?su(n):t)[e]}function Wle(t,e,n){const r=rF(e,n);return r?Np in r?r[Np]:r.get?.call(t.draft_):void 0}function rF(t,e){if(!(e in t))return;let n=lm(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=lm(n)}}function zA(t){t.modified_||(t.modified_=!0,t.parent_&&zA(t.parent_))}function jy(t){t.copy_||(t.assigned_=new Map,t.copy_=LA(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var $le=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Eh(n)&&!Eh(r)){const l=r;r=n;const f=this;return function(p=l,...b){return f.produce(p,_=>r.call(this,_,...b))}}Eh(r)||Vo(6),i!==void 0&&!Eh(i)&&Vo(7);let a;if(Xo(n)){const l=xk(this),f=UA(l,n,void 0);let m=!0;try{a=r(f),m=!1}finally{m?FA(l):VA(l)}return vk(l,i),bk(a,l)}else if(!n||!II(n)){if(a=r(n),a===void 0&&(a=n),a===XB&&(a=void 0),this.autoFreeze_&&OI(a,!0),i){const l=[],f=[];pd(BA).generateReplacementPatches_(n,a,{patches_:l,inversePatches_:f}),i(l,f)}return a}else Vo(1,n)},this.produceWithPatches=(n,r)=>{if(Eh(n))return(f,...m)=>this.produceWithPatches(f,p=>n(p,...m));let i,a;return[this.produce(n,r,(f,m)=>{i=f,a=m}),i,a]},X2(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),X2(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),X2(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Xo(e)||Vo(8),Su(e)&&(e=Wo(e));const n=xk(this),r=UA(n,e,void 0);return r[hs].isManual_=!0,VA(n),r}finishDraft(e,n){const r=e&&e[hs];(!r||!r.isManual_)&&Vo(9);const{scope_:i}=r;return vk(i,n),bk(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=pd(BA).applyPatches_;return Su(e)?i(e,n):this.produce(e,a=>i(a,n))}};function UA(t,e,n,r){const[i,a]=ob(e)?pd(Dv).proxyMap_(e,n):lb(e)?pd(Dv).proxySet_(e,n):Kle(e,n);return(n?.scope_??JB()).drafts_.push(i),a.callbacks_=n?.callbacks_??[],a.key_=r,n&&r!==void 0?Gle(n,a,r):a.callbacks_.push(function(m){m.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:p}=m;a.modified_&&p&&p.generatePatches_(a,[],m)}),i}function Wo(t){return Su(t)||Vo(10,t),iF(t)}function iF(t){if(!Xo(t)||ub(t))return t;const e=t[hs];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=LA(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=LA(t,!0);return ab(n,(i,a)=>{Rv(n,i,iF(a))},r),e&&(e.finalized_=!1),n}var Yle=new $le,aF=Yle.produce;function sF(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var Xle=sF(),Qle=sF,Zle=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ov:Ov.apply(null,arguments)};function Co(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(io(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>YB(r)&&r.type===t,n}var oF=class Yg extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Yg.prototype)}static get[Symbol.species](){return Yg}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Yg(...e[0].concat(this)):new Yg(...e.concat(this))}};function _k(t){return Xo(t)?aF(t,()=>{}):t}function ey(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function Jle(t){return typeof t=="boolean"}var eue=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let l=new oF;return n&&(Jle(n)?l.push(Xle):l.push(Qle(n.extraArgument))),l},lF="RTK_autoBatch",Qr=()=>t=>({payload:t,meta:{[lF]:!0}}),Ek=t=>e=>{setTimeout(e,t)},uF=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,l=!1;const f=new Set,m=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Ek(10):t.type==="callback"?t.queueNotification:Ek(t.timeout),p=()=>{l=!1,a&&(a=!1,f.forEach(b=>b()))};return Object.assign({},r,{subscribe(b){const _=()=>i&&b(),T=r.subscribe(_);return f.add(b),()=>{T(),f.delete(b)}},dispatch(b){try{return i=!b?.meta?.[lF],a=!i,a&&(l||(l=!0,m(p))),r.dispatch(b)}finally{i=!0}}})},tue=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new oF(t);return r&&i.push(uF(typeof r=="object"?r:void 0)),i};function nue(t){const e=eue(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:l=void 0}=t||{};let f;if(typeof n=="function")f=n;else if(TI(n))f=$B(n);else throw new Error(io(1));let m;typeof r=="function"?m=r(e):m=e();let p=Ov;i&&(p=Zle({trace:!1,...typeof i=="object"&&i}));const b=Mle(...m),_=tue(b);let T=typeof l=="function"?l(_):_();const N=p(...T);return WB(f,a,N)}function cF(t){const e={},n=[];let r;const i={addCase(a,l){const f=typeof a=="string"?a:a.type;if(!f)throw new Error(io(28));if(f in e)throw new Error(io(29));return e[f]=l,i},addAsyncThunk(a,l){return l.pending&&(e[a.pending.type]=l.pending),l.rejected&&(e[a.rejected.type]=l.rejected),l.fulfilled&&(e[a.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:a.settled,reducer:l.settled}),i},addMatcher(a,l){return n.push({matcher:a,reducer:l}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function rue(t){return typeof t=="function"}function iue(t,e){let[n,r,i]=cF(e),a;if(rue(t))a=()=>_k(t());else{const f=_k(t);a=()=>f}function l(f=a(),m){let p=[n[m.type],...r.filter(({matcher:b})=>b(m)).map(({reducer:b})=>b)];return p.filter(b=>!!b).length===0&&(p=[i]),p.reduce((b,_)=>{if(_)if(Su(b)){const N=_(b,m);return N===void 0?b:N}else{if(Xo(b))return aF(b,T=>_(T,m));{const T=_(b,m);if(T===void 0){if(b===null)return b;throw Error("A case reducer on a non-draftable value must not return undefined")}return T}}return b},f)}return l.getInitialState=a,l}var aue="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",sue=(t=21)=>{let e="",n=t;for(;n--;)e+=aue[Math.random()*64|0];return e},oue=Symbol.for("rtk-slice-createasyncthunk");function lue(t,e){return`${t}/${e}`}function uue({creators:t}={}){const e=t?.asyncThunk?.[oue];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(io(11));const l=(typeof r.reducers=="function"?r.reducers(fue()):r.reducers)||{},f=Object.keys(l),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(K,ee){const ue=typeof K=="string"?K:K.type;if(!ue)throw new Error(io(12));if(ue in m.sliceCaseReducersByType)throw new Error(io(13));return m.sliceCaseReducersByType[ue]=ee,p},addMatcher(K,ee){return m.sliceMatchers.push({matcher:K,reducer:ee}),p},exposeAction(K,ee){return m.actionCreators[K]=ee,p},exposeCaseReducer(K,ee){return m.sliceCaseReducersByName[K]=ee,p}};f.forEach(K=>{const ee=l[K],ue={reducerName:K,type:lue(i,K),createNotation:typeof r.reducers=="function"};hue(ee)?gue(ue,ee,p,e):due(ue,ee,p)});function b(){const[K={},ee=[],ue=void 0]=typeof r.extraReducers=="function"?cF(r.extraReducers):[r.extraReducers],Z={...K,...m.sliceCaseReducersByType};return iue(r.initialState,V=>{for(let W in Z)V.addCase(W,Z[W]);for(let W of m.sliceMatchers)V.addMatcher(W.matcher,W.reducer);for(let W of ee)V.addMatcher(W.matcher,W.reducer);ue&&V.addDefaultCase(ue)})}const _=K=>K,T=new Map,N=new WeakMap;let j;function M(K,ee){return j||(j=b()),j(K,ee)}function L(){return j||(j=b()),j.getInitialState()}function z(K,ee=!1){function ue(V){let W=V[K];return typeof W>"u"&&ee&&(W=ey(N,ue,L)),W}function Z(V=_){const W=ey(T,ee,()=>new WeakMap);return ey(W,V,()=>{const U={};for(const[ae,ie]of Object.entries(r.selectors??{}))U[ae]=cue(ie,V,()=>ey(N,V,L),ee);return U})}return{reducerPath:K,getSelectors:Z,get selectors(){return Z(ue)},selectSlice:ue}}const $={name:i,reducer:M,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:L,...z(a),injectInto(K,{reducerPath:ee,...ue}={}){const Z=ee??a;return K.inject({reducerPath:Z,reducer:M},ue),{...$,...z(Z,!0)}}};return $}}function cue(t,e,n,r){function i(a,...l){let f=e(a);return typeof f>"u"&&r&&(f=n()),t(f,...l)}return i.unwrapped=t,i}var Vs=uue();function fue(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function due({type:t,reducerName:e,createNotation:n},r,i){let a,l;if("reducer"in r){if(n&&!mue(r))throw new Error(io(17));a=r.reducer,l=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,l?Co(t,l):Co(t))}function hue(t){return t._reducerDefinitionType==="asyncThunk"}function mue(t){return t._reducerDefinitionType==="reducerWithPrepare"}function gue({type:t,reducerName:e},n,r,i){if(!i)throw new Error(io(18));const{payloadCreator:a,fulfilled:l,pending:f,rejected:m,settled:p,options:b}=n,_=i(t,a,b);r.exposeAction(e,_),l&&r.addCase(_.fulfilled,l),f&&r.addCase(_.pending,f),m&&r.addCase(_.rejected,m),p&&r.addMatcher(_.settled,p),r.exposeCaseReducer(e,{fulfilled:l||ty,pending:f||ty,rejected:m||ty,settled:p||ty})}function ty(){}var pue="task",fF="listener",dF="completed",NI="cancelled",yue=`task-${NI}`,vue=`task-${dF}`,qA=`${fF}-${NI}`,xue=`${fF}-${dF}`,fb=class{constructor(t){this.code=t,this.message=`${pue} ${NI} (reason: ${t})`}name="TaskAbortError";message},PI=(t,e)=>{if(typeof t!="function")throw new TypeError(io(32))},jv=()=>{},hF=(t,e=jv)=>(t.catch(e),t),mF=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Yf=t=>{if(t.aborted)throw new fb(t.reason)};function gF(t,e){let n=jv;return new Promise((r,i)=>{const a=()=>i(new fb(t.reason));if(t.aborted){a();return}n=mF(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=jv})}var bue=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof fb?"cancelled":"rejected",error:n}}finally{e?.()}},Lv=t=>e=>hF(gF(t,e).then(n=>(Yf(t),n))),pF=t=>{const e=Lv(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:jh}=Object,Ak={},db="listenerMiddleware",wue=(t,e)=>{const n=r=>mF(t,()=>r.abort(t.reason));return(r,i)=>{PI(r);const a=new AbortController;n(a);const l=bue(async()=>{Yf(t),Yf(a.signal);const f=await r({pause:Lv(a.signal),delay:pF(a.signal),signal:a.signal});return Yf(a.signal),f},()=>a.abort(vue));return i?.autoJoin&&e.push(l.catch(jv)),{result:Lv(t)(l),cancel(){a.abort(yue)}}}},_ue=(t,e)=>{const n=async(r,i)=>{Yf(e);let a=()=>{};const f=[new Promise((m,p)=>{let b=t({predicate:r,effect:(_,T)=>{T.unsubscribe(),m([_,T.getState(),T.getOriginalState()])}});a=()=>{b(),p()}})];i!=null&&f.push(new Promise(m=>setTimeout(m,i,null)));try{const m=await gF(e,Promise.race(f));return Yf(e),m}finally{a()}};return(r,i)=>hF(n(r,i))},yF=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=Co(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(io(21));return PI(a),{predicate:i,type:e,effect:a}},vF=jh(t=>{const{type:e,predicate:n,effect:r}=yF(t);return{id:sue(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(io(22))}}},{withTypes:()=>vF}),Sk=(t,e)=>{const{type:n,effect:r,predicate:i}=yF(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},GA=t=>{t.pending.forEach(e=>{e.abort(qA)})},Eue=(t,e)=>()=>{for(const n of e.keys())GA(n);t.clear()},Tk=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},xF=jh(Co(`${db}/add`),{withTypes:()=>xF}),Aue=Co(`${db}/removeAll`),bF=jh(Co(`${db}/remove`),{withTypes:()=>bF}),Sue=(...t)=>{console.error(`${db}/error`,...t)},b0=(t={})=>{const e=new Map,n=new Map,r=N=>{const j=n.get(N)??0;n.set(N,j+1)},i=N=>{const j=n.get(N)??1;j===1?n.delete(N):n.set(N,j-1)},{extra:a,onError:l=Sue}=t;PI(l);const f=N=>(N.unsubscribe=()=>e.delete(N.id),e.set(N.id,N),j=>{N.unsubscribe(),j?.cancelActive&&GA(N)}),m=N=>{const j=Sk(e,N)??vF(N);return f(j)};jh(m,{withTypes:()=>m});const p=N=>{const j=Sk(e,N);return j&&(j.unsubscribe(),N.cancelActive&&GA(j)),!!j};jh(p,{withTypes:()=>p});const b=async(N,j,M,L)=>{const z=new AbortController,$=_ue(m,z.signal),K=[];try{N.pending.add(z),r(N),await Promise.resolve(N.effect(j,jh({},M,{getOriginalState:L,condition:(ee,ue)=>$(ee,ue).then(Boolean),take:$,delay:pF(z.signal),pause:Lv(z.signal),extra:a,signal:z.signal,fork:wue(z.signal,K),unsubscribe:N.unsubscribe,subscribe:()=>{e.set(N.id,N)},cancelActiveListeners:()=>{N.pending.forEach((ee,ue,Z)=>{ee!==z&&(ee.abort(qA),Z.delete(ee))})},cancel:()=>{z.abort(qA),N.pending.delete(z)},throwIfCancelled:()=>{Yf(z.signal)}})))}catch(ee){ee instanceof fb||Tk(l,ee,{raisedBy:"effect"})}finally{await Promise.all(K),z.abort(xue),i(N),N.pending.delete(z)}},_=Eue(e,n);return{middleware:N=>j=>M=>{if(!YB(M))return j(M);if(xF.match(M))return m(M.payload);if(Aue.match(M)){_();return}if(bF.match(M))return p(M.payload);let L=N.getState();const z=()=>{if(L===Ak)throw new Error(io(23));return L};let $;try{if($=j(M),e.size>0){const K=N.getState(),ee=Array.from(e.values());for(const ue of ee){let Z=!1;try{Z=ue.predicate(M,K,L)}catch(V){Z=!1,Tk(l,V,{raisedBy:"predicate"})}Z&&b(ue,M,N,z)}}}finally{L=Ak}return $},startListening:m,stopListening:p,clearListeners:_}};function io(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Tue={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},wF=Vs({name:"chartLayout",initialState:Tue,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:Iue,setLayout:Cue,setChartSize:Oue,setScale:Nue}=wF.actions,Pue=wF.reducer;function _F(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function hn(t){return Number.isFinite(t)}function Nl(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function Ik(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Th(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ik(Object(n),!0).forEach(function(r){Rue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ik(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rue(t,e,n){return(e=Due(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Due(t){var e=kue(t,"string");return typeof e=="symbol"?e:e+""}function kue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function br(t,e,n){return li(t)||li(e)?n:Io(e)?md(t,e,n):typeof e=="function"?e(t):n}var Mue=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:l,layout:f}=e;if((f==="vertical"||f==="horizontal"&&l==="middle")&&a!=="center"&&St(t[a]))return Th(Th({},t),{},{[a]:t[a]+(r||0)});if((f==="horizontal"||f==="vertical"&&a==="center")&&l!=="middle"&&St(t[l]))return Th(Th({},t),{},{[l]:t[l]+(i||0)})}return t},Lu=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",EF=(t,e,n,r)=>{if(r)return t.map(f=>f.coordinate);var i,a,l=t.map(f=>(f.coordinate===e&&(i=!0),f.coordinate===n&&(a=!0),f.coordinate));return i||l.push(e),a||l.push(n),l},AF=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:l,realScaleType:f,isCategorical:m,categoricalDomain:p,tickCount:b,ticks:_,niceTicks:T,axisType:N}=t;if(!l)return null;var j=f==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,M=i==="category"&&l.bandwidth?l.bandwidth()/j:0;if(M=N==="angleAxis"&&a&&a.length>=2?pa(a[0]-a[1])*2*M:M,_||T){var L=(_||T||[]).map((z,$)=>{var K=r?r.indexOf(z):z,ee=l.map(K);return hn(ee)?{coordinate:ee+M,value:z,offset:M,index:$}:null}).filter(Ms);return L}return m&&p?p.map((z,$)=>{var K=l.map(z);return hn(K)?{coordinate:K+M,value:z,index:$,offset:M}:null}).filter(Ms):l.ticks&&b!=null?l.ticks(b).map((z,$)=>{var K=l.map(z);return hn(K)?{coordinate:K+M,value:z,index:$,offset:M}:null}).filter(Ms):l.domain().map((z,$)=>{var K=l.map(z);return hn(K)?{coordinate:K+M,value:r?r[z]:z,index:$,offset:M}:null}).filter(Ms)},jue=(t,e)=>{if(!e||e.length!==2||!St(e[0])||!St(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!St(t[0])||t[0]<n)&&(i[0]=n),(!St(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},Lue=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,l=0,f=0;f<n;++f){var m=t[f],p=m?.[i];if(p!=null){var b=p[1],_=p[0],T=Ol(b)?_:b;T>=0?(p[0]=a,a+=T,p[1]=a):(p[0]=l,l+=T,p[1]=l)}}}},Bue=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,l=0;l<n;++l){var f=t[l],m=f?.[i];if(m!=null){var p=Ol(m[1])?m[0]:m[1];p>=0?(m[0]=a,a+=p,m[1]=a):(m[0]=0,m[1]=0)}}}},Fue={sign:Lue,expand:hoe,none:hd,silhouette:moe,wiggle:goe,positive:Bue},Vue=(t,e,n)=>{var r,i=(r=Fue[n])!==null&&r!==void 0?r:hd,a=doe().keys(e).value((f,m)=>Number(br(f,m,0))).order(DA).offset(i),l=a(t);return l.forEach((f,m)=>{f.forEach((p,b)=>{var _=br(t[b],e[m],0);Array.isArray(_)&&_.length===2&&St(_[0])&&St(_[1])&&(p[0]=_[0],p[1]=_[1])})}),l};function zue(t){return t==null?void 0:String(t)}function Ck(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:a,dataKey:l}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!li(i[e.dataKey])){var f=PB(n,"value",i[e.dataKey]);if(f)return f.coordinate+r/2}return n!=null&&n[a]?n[a].coordinate+r/2:null}var m=br(i,li(l)?e.dataKey:l),p=e.scale.map(m);return St(p)?p:null}var Ok=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:l}=t;if(e.type==="category")return n[l]?n[l].coordinate+r:null;var f=br(a,e.dataKey,e.scale.domain()[l]);if(li(f))return null;var m=e.scale.map(f);return St(m)?m-i/2+r:null},Uue=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},que=t=>{var e=t.flat(2).filter(St);return[Math.min(...e),Math.max(...e)]},Gue=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Hue=(t,e,n)=>{if(t!=null)return Gue(Object.keys(t).reduce((r,i)=>{var a=t[i];if(!a)return r;var{stackedData:l}=a,f=l.reduce((m,p)=>{var b=_F(p,e,n),_=que(b);return!hn(_[0])||!hn(_[1])?m:[Math.min(m[0],_[0]),Math.max(m[1],_[1])]},[1/0,-1/0]);return[Math.min(f[0],r[0]),Math.max(f[1],r[1])]},[1/0,-1/0]))},Nk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Pk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,um=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=rb(e,b=>b.coordinate),a=1/0,l=1,f=i.length;l<f;l++){var m=i[l],p=i[l-1];a=Math.min((m?.coordinate||0)-(p?.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function Rk(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return Th(Th({},e),{},{dataKey:n,payload:r,value:i,name:a})}function Dm(t,e){if(t)return String(t);if(typeof e=="string")return e}var Kue=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},Wue=(t,e)=>e==="centric"?t.angle:t.radius,Bu=t=>t.layout.width,Fu=t=>t.layout.height,$ue=t=>t.layout.scale,SF=t=>t.layout.margin,hb=Oe(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),mb=Oe(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),TF="data-recharts-item-index",IF="data-recharts-item-id",w0=60;function Dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ny(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dk(Object(n),!0).forEach(function(r){Yue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yue(t,e,n){return(e=Xue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xue(t){var e=Que(t,"string");return typeof e=="symbol"?e:e+""}function Que(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zue=t=>t.brush.height;function Jue(t){var e=mb(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:w0;return n+i}return n},0)}function ece(t){var e=mb(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:w0;return n+i}return n},0)}function tce(t){var e=hb(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function nce(t){var e=hb(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Ji=Oe([Bu,Fu,SF,Zue,Jue,ece,tce,nce,KB,Ole],(t,e,n,r,i,a,l,f,m,p)=>{var b={left:(n.left||0)+i,right:(n.right||0)+a},_={top:(n.top||0)+l,bottom:(n.bottom||0)+f},T=ny(ny({},_),b),N=T.bottom;T.bottom+=r,T=Mue(T,m,p);var j=t-T.left-T.right,M=e-T.top-T.bottom;return ny(ny({brushBottom:N},T),{},{width:Math.max(j,0),height:Math.max(M,0)})}),rce=Oe(Ji,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),RI=Oe(Bu,Fu,(t,e)=>({x:0,y:0,width:t,height:e})),ice=D.createContext(null),Ba=()=>D.useContext(ice)!=null,gb=t=>t.brush,pb=Oe([gb,Ji,SF],(t,e,n)=>({height:t.height,x:St(t.x)?t.x:e.left,y:St(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:St(t.width)?t.width:e.width})),Z2={},J2={},eE={},kk;function ace(){return kk||(kk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let l,f=null;const m=a!=null&&a.includes("leading"),p=a==null||a.includes("trailing"),b=()=>{f!==null&&(n.apply(l,f),l=void 0,f=null)},_=()=>{p&&b(),M()};let T=null;const N=()=>{T!=null&&clearTimeout(T),T=setTimeout(()=>{T=null,_()},r)},j=()=>{T!==null&&(clearTimeout(T),T=null)},M=()=>{j(),l=void 0,f=null},L=()=>{b()},z=function(...$){if(i?.aborted)return;l=this,f=$;const K=T==null;N(),m&&K&&b()};return z.schedule=N,z.cancel=M,z.flush=L,i?.addEventListener("abort",M,{once:!0}),z}t.debounce=e})(eE)),eE}var Mk;function sce(){return Mk||(Mk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ace();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:l=!1,trailing:f=!0,maxWait:m}=a,p=Array(2);l&&(p[0]="leading"),f&&(p[1]="trailing");let b,_=null;const T=e.debounce(function(...M){b=r.apply(this,M),_=null},i,{edges:p}),N=function(...M){return m!=null&&(_===null&&(_=Date.now()),Date.now()-_>=m)?(b=r.apply(this,M),_=Date.now(),T.cancel(),T.schedule(),b):(T.apply(this,M),b)},j=()=>(T.flush(),b);return N.cancel=T.cancel,N.flush=j,N}t.debounce=n})(J2)),J2}var jk;function oce(){return jk||(jk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sce();function n(r,i=0,a={}){const{leading:l=!0,trailing:f=!0}=a;return e.debounce(r,i,{leading:l,maxWait:i,trailing:f})}t.throttle=n})(Z2)),Z2}var tE,Lk;function lce(){return Lk||(Lk=1,tE=oce().throttle),tE}var uce=lce();const cce=Rl(uce);var Bv=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=0;console.warn(n.replace(/%s/g,()=>i[l++]))}},wl={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},CF=(t,e,n)=>{var{width:r=wl.width,height:i=wl.height,aspect:a,maxHeight:l}=n,f=gd(r)?t:Number(r),m=gd(i)?e:Number(i);return a&&a>0&&(f?m=f/a:m&&(f=m*a),l&&m!=null&&m>l&&(m=l)),{calculatedWidth:f,calculatedHeight:m}},fce={width:0,height:0,overflow:"visible"},dce={width:0,overflowX:"visible"},hce={height:0,overflowY:"visible"},mce={},gce=t=>{var{width:e,height:n}=t,r=gd(e),i=gd(n);return r&&i?fce:r?dce:i?hce:mce};function pce(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i=wl.width,a=wl.height):i===void 0?i=r&&r>0?void 0:wl.width:a===void 0&&(a=r&&r>0?void 0:wl.height),{width:i,height:a}}function HA(){return HA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HA.apply(null,arguments)}function Bk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bk(Object(n),!0).forEach(function(r){yce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yce(t,e,n){return(e=vce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vce(t){var e=xce(t,"string");return typeof e=="symbol"?e:e+""}function xce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var OF=D.createContext(wl.initialDimension);function bce(t){return Nl(t.width)&&Nl(t.height)}function NF(t){var{children:e,width:n,height:r}=t,i=D.useMemo(()=>({width:n,height:r}),[n,r]);return bce(i)?D.createElement(OF.Provider,{value:i},e):null}var DI=()=>D.useContext(OF),wce=D.forwardRef((t,e)=>{var{aspect:n,initialDimension:r=wl.initialDimension,width:i,height:a,minWidth:l=wl.minWidth,minHeight:f,maxHeight:m,children:p,debounce:b=wl.debounce,id:_,className:T,onResize:N,style:j={}}=t,M=D.useRef(null),L=D.useRef();L.current=N,D.useImperativeHandle(e,()=>M.current);var[z,$]=D.useState({containerWidth:r.width,containerHeight:r.height}),K=D.useCallback((W,U)=>{$(ae=>{var ie=Math.round(W),X=Math.round(U);return ae.containerWidth===ie&&ae.containerHeight===X?ae:{containerWidth:ie,containerHeight:X}})},[]);D.useEffect(()=>{if(M.current==null||typeof ResizeObserver>"u")return Nd;var W=X=>{var J,xe=X[0];if(xe!=null){var{width:de,height:ye}=xe.contentRect;K(de,ye),(J=L.current)===null||J===void 0||J.call(L,de,ye)}};b>0&&(W=cce(W,b,{trailing:!0,leading:!1}));var U=new ResizeObserver(W),{width:ae,height:ie}=M.current.getBoundingClientRect();return K(ae,ie),U.observe(M.current),()=>{U.disconnect()}},[K,b]);var{containerWidth:ee,containerHeight:ue}=z;Bv(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:Z,calculatedHeight:V}=CF(ee,ue,{width:i,height:a,aspect:n,maxHeight:m});return Bv(Z!=null&&Z>0||V!=null&&V>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Z,V,i,a,l,f,n),D.createElement("div",{id:_?"".concat(_):void 0,className:Gn("recharts-responsive-container",T),style:Fk(Fk({},j),{},{width:i,height:a,minWidth:l,minHeight:f,maxHeight:m}),ref:M},D.createElement("div",{style:gce({width:i,height:a})},D.createElement(NF,{width:Z,height:V},p)))}),ry=D.forwardRef((t,e)=>{var n=DI();if(Nl(n.width)&&Nl(n.height))return t.children;var{width:r,height:i}=pce({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:l}=CF(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return St(a)&&St(l)?D.createElement(NF,{width:a,height:l},t.children):D.createElement(wce,HA({},t,{width:r,height:i,ref:e}))});function kI(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var _0=()=>{var t,e=Ba(),n=Tt(rce),r=Tt(pb),i=(t=Tt(gb))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},_ce={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},PF=()=>{var t;return(t=Tt(Ji))!==null&&t!==void 0?t:_ce},RF=()=>Tt(Bu),DF=()=>Tt(Fu),Kn=t=>t.layout.layoutType,Pd=()=>Tt(Kn),kF=()=>{var t=Pd();if(t==="horizontal"||t==="vertical")return t},MF=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},Ece=()=>{var t=Pd();return t!==void 0},E0=t=>{var e=Gr(),n=Ba(),{width:r,height:i}=t,a=DI(),l=r,f=i;return a&&(l=a.width>0?a.width:r,f=a.height>0?a.height:i),D.useEffect(()=>{!n&&Nl(l)&&Nl(f)&&e(Oue({width:l,height:f}))},[e,n,l,f]),null},jF=Symbol.for("immer-nothing"),Vk=Symbol.for("immer-draftable"),oo=Symbol.for("immer-state");function zo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Dp=Object.getPrototypeOf;function cm(t){return!!t&&!!t[oo]}function yd(t){return t?LF(t)||Array.isArray(t)||!!t[Vk]||!!t.constructor?.[Vk]||A0(t)||vb(t):!1}var Ace=Object.prototype.constructor.toString(),zk=new WeakMap;function LF(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=zk.get(n);return r===void 0&&(r=Function.toString.call(n),zk.set(n,r)),r===Ace}function Fv(t,e,n=!0){yb(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function yb(t){const e=t[oo];return e?e.type_:Array.isArray(t)?1:A0(t)?2:vb(t)?3:0}function KA(t,e){return yb(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function BF(t,e,n){const r=yb(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Sce(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function A0(t){return t instanceof Map}function vb(t){return t instanceof Set}function kf(t){return t.copy_||t.base_}function WA(t,e){if(A0(t))return new Map(t);if(vb(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=LF(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[oo];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const l=i[a],f=r[l];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(r[l]={configurable:!0,writable:!0,enumerable:f.enumerable,value:t[l]})}return Object.create(Dp(t),r)}else{const r=Dp(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function MI(t,e=!1){return xb(t)||cm(t)||!yd(t)||(yb(t)>1&&Object.defineProperties(t,{set:iy,add:iy,clear:iy,delete:iy}),Object.freeze(t),e&&Object.values(t).forEach(n=>MI(n,!0))),t}function Tce(){zo(2)}var iy={value:Tce};function xb(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var Ice={};function vd(t){const e=Ice[t];return e||zo(0,t),e}var kp;function FF(){return kp}function Cce(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Uk(t,e){e&&(vd("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function $A(t){YA(t),t.drafts_.forEach(Oce),t.drafts_=null}function YA(t){t===kp&&(kp=t.parent_)}function qk(t){return kp=Cce(kp,t)}function Oce(t){const e=t[oo];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Gk(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[oo].modified_&&($A(e),zo(4)),yd(t)&&(t=Vv(e,t),e.parent_||zv(e,t)),e.patches_&&vd("Patches").generateReplacementPatches_(n[oo].base_,t,e.patches_,e.inversePatches_)):t=Vv(e,n,[]),$A(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==jF?t:void 0}function Vv(t,e,n){if(xb(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[oo];if(!i)return Fv(e,(a,l)=>Hk(t,i,e,a,l,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return zv(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let l=a,f=!1;i.type_===3&&(l=new Set(a),a.clear(),f=!0),Fv(l,(m,p)=>Hk(t,i,a,m,p,n,f),r),zv(t,a,!1),n&&t.patches_&&vd("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function Hk(t,e,n,r,i,a,l){if(i==null||typeof i!="object"&&!l)return;const f=xb(i);if(!(f&&!l)){if(cm(i)){const m=a&&e&&e.type_!==3&&!KA(e.assigned_,r)?a.concat(r):void 0,p=Vv(t,i,m);if(BF(n,r,p),cm(p))t.canAutoFreeze_=!1;else return}else l&&n.add(i);if(yd(i)&&!f){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&f)return;Vv(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(A0(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&zv(t,i)}}}function zv(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&MI(e,n)}function Nce(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:FF(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=jI;n&&(i=[r],a=Mp);const{revoke:l,proxy:f}=Proxy.revocable(i,a);return r.draft_=f,r.revoke_=l,f}var jI={get(t,e){if(e===oo)return t;const n=kf(t);if(!KA(n,e))return Pce(t,n,e);const r=n[e];return t.finalized_||!yd(r)?r:r===nE(t.base_,e)?(rE(t),t.copy_[e]=QA(r,t)):r},has(t,e){return e in kf(t)},ownKeys(t){return Reflect.ownKeys(kf(t))},set(t,e,n){const r=VF(kf(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=nE(kf(t),e),a=i?.[oo];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Sce(n,i)&&(n!==void 0||KA(t.base_,e)))return!0;rE(t),XA(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return nE(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,rE(t),XA(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=kf(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){zo(11)},getPrototypeOf(t){return Dp(t.base_)},setPrototypeOf(){zo(12)}},Mp={};Fv(jI,(t,e)=>{Mp[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Mp.deleteProperty=function(t,e){return Mp.set.call(this,t,e,void 0)};Mp.set=function(t,e,n){return jI.set.call(this,t[0],e,n,t[0])};function nE(t,e){const n=t[oo];return(n?kf(n):t)[e]}function Pce(t,e,n){const r=VF(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function VF(t,e){if(!(e in t))return;let n=Dp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Dp(n)}}function XA(t){t.modified_||(t.modified_=!0,t.parent_&&XA(t.parent_))}function rE(t){t.copy_||(t.copy_=WA(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Rce=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const l=this;return function(m=a,...p){return l.produce(m,b=>n.call(this,b,...p))}}typeof n!="function"&&zo(6),r!==void 0&&typeof r!="function"&&zo(7);let i;if(yd(e)){const a=qk(this),l=QA(e,void 0);let f=!0;try{i=n(l),f=!1}finally{f?$A(a):YA(a)}return Uk(a,r),Gk(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===jF&&(i=void 0),this.autoFreeze_&&MI(i,!0),r){const a=[],l=[];vd("Patches").generateReplacementPatches_(e,i,a,l),r(a,l)}return i}else zo(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(l,...f)=>this.produceWithPatches(l,m=>e(m,...f));let r,i;return[this.produce(e,n,(l,f)=>{r=l,i=f}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){yd(t)||zo(8),cm(t)&&(t=Dce(t));const e=qk(this),n=QA(t,void 0);return n[oo].isManual_=!0,YA(e),n}finishDraft(t,e){const n=t&&t[oo];(!n||!n.isManual_)&&zo(9);const{scope_:r}=n;return Uk(r,e),Gk(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=vd("Patches").applyPatches_;return cm(t)?r(t,e):this.produce(t,i=>r(i,e))}};function QA(t,e){const n=A0(t)?vd("MapSet").proxyMap_(t,e):vb(t)?vd("MapSet").proxySet_(t,e):Nce(t,e);return(e?e.scope_:FF()).drafts_.push(n),n}function Dce(t){return cm(t)||zo(10,t),zF(t)}function zF(t){if(!yd(t)||xb(t))return t;const e=t[oo];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=WA(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=WA(t,!0);return Fv(n,(i,a)=>{BF(n,i,zF(a))},r),e&&(e.finalized_=!1),n}var kce=new Rce;kce.produce;var Mce={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},UF=Vs({name:"legend",initialState:Mce,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Qr()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Wo(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Qr()},removeLegendPayload:{reducer(t,e){var n=Wo(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Qr()}}}),{setLegendSize:_Ee,setLegendSettings:EEe,addLegendPayload:qF,replaceLegendPayload:GF,removeLegendPayload:HF}=UF.actions,jce=UF.reducer;function ZA(){return ZA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZA.apply(null,arguments)}function Kk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kk(Object(n),!0).forEach(function(r){Lce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lce(t,e,n){return(e=Bce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bce(t){var e=Fce(t,"string");return typeof e=="symbol"?e:e+""}function Fce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vce(t){return Array.isArray(t)&&Io(t[0])&&Io(t[1])?t.join(" ~ "):t}var mh={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},zce=t=>{var{separator:e=mh.separator,contentStyle:n,itemStyle:r,labelStyle:i=mh.labelStyle,payload:a,formatter:l,itemSorter:f,wrapperClassName:m,labelClassName:p,label:b,labelFormatter:_,accessibilityLayer:T=mh.accessibilityLayer}=t,N=()=>{if(a&&a.length){var ue={padding:0,margin:0},Z=(f?rb(a,f):a).map((V,W)=>{if(V.type==="none")return null;var U=V.formatter||l||Vce,{value:ae,name:ie}=V,X=ae,J=ie;if(U){var xe=U(ae,ie,V,W,a);if(Array.isArray(xe))[X,J]=xe;else if(xe!=null)X=xe;else return null}var de=Pg(Pg({},mh.itemStyle),{},{color:V.color||mh.itemStyle.color},r);return D.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:de},Io(J)?D.createElement("span",{className:"recharts-tooltip-item-name"},J):null,Io(J)?D.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,D.createElement("span",{className:"recharts-tooltip-item-value"},X),D.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return D.createElement("ul",{className:"recharts-tooltip-item-list",style:ue},Z)}return null},j=Pg(Pg({},mh.contentStyle),n),M=Pg({margin:0},i),L=!li(b),z=L?b:"",$=Gn("recharts-default-tooltip",m),K=Gn("recharts-tooltip-label",p);L&&_&&a!==void 0&&a!==null&&(z=_(b,a));var ee=T?{role:"status","aria-live":"assertive"}:{};return D.createElement("div",ZA({className:$,style:j},ee),D.createElement("p",{className:K,style:M},D.isValidElement(z)?z:"".concat(z)),N())},Rg="recharts-tooltip-wrapper",Uce={visibility:"hidden"};function qce(t){var{coordinate:e,translateX:n,translateY:r}=t;return Gn(Rg,{["".concat(Rg,"-right")]:St(n)&&e&&St(e.x)&&n>=e.x,["".concat(Rg,"-left")]:St(n)&&e&&St(e.x)&&n<e.x,["".concat(Rg,"-bottom")]:St(r)&&e&&St(e.y)&&r>=e.y,["".concat(Rg,"-top")]:St(r)&&e&&St(e.y)&&r<e.y})}function Wk(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offset:i,position:a,reverseDirection:l,tooltipDimension:f,viewBox:m,viewBoxDimension:p}=t;if(a&&St(a[r]))return a[r];var b=n[r]-f-(i>0?i:0),_=n[r]+i;if(e[r])return l[r]?b:_;var T=m[r];if(T==null)return 0;if(l[r]){var N=b,j=T;return N<j?Math.max(_,T):Math.max(b,T)}if(p==null)return 0;var M=_+f,L=T+p;return M>L?Math.max(b,T):Math.max(_,T)}function Gce(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Hce(t){var{allowEscapeViewBox:e,coordinate:n,offsetTop:r,offsetLeft:i,position:a,reverseDirection:l,tooltipBox:f,useTranslate3d:m,viewBox:p}=t,b,_,T;return f.height>0&&f.width>0&&n?(_=Wk({allowEscapeViewBox:e,coordinate:n,key:"x",offset:i,position:a,reverseDirection:l,tooltipDimension:f.width,viewBox:p,viewBoxDimension:p.width}),T=Wk({allowEscapeViewBox:e,coordinate:n,key:"y",offset:r,position:a,reverseDirection:l,tooltipDimension:f.height,viewBox:p,viewBoxDimension:p.height}),b=Gce({translateX:_,translateY:T,useTranslate3d:m})):b=Uce,{cssProperties:b,cssClasses:qce({translateX:_,translateY:T,coordinate:n})}}function $k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ay(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$k(Object(n),!0).forEach(function(r){JA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$k(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JA(t,e,n){return(e=Kce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kce(t){var e=Wce(t,"string");return typeof e=="symbol"?e:e+""}function Wce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class $ce extends D.PureComponent{constructor(){super(...arguments),JA(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),JA(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:l,hasPayload:f,isAnimationActive:m,offset:p,position:b,reverseDirection:_,useTranslate3d:T,viewBox:N,wrapperStyle:j,lastBoundingBox:M,innerRef:L,hasPortalFromProps:z}=this.props,$=typeof p=="number"?p:p.x,K=typeof p=="number"?p:p.y,{cssClasses:ee,cssProperties:ue}=Hce({allowEscapeViewBox:n,coordinate:l,offsetLeft:$,offsetTop:K,position:b,reverseDirection:_,tooltipBox:{height:M.height,width:M.width},useTranslate3d:T,viewBox:N}),Z=z?{}:ay(ay({transition:m&&e?"transform ".concat(r,"ms ").concat(i):void 0},ue),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&f?"visible":"hidden",position:"absolute",top:0,left:0}),V=ay(ay({},Z),{},{visibility:!this.state.dismissed&&e&&f?"visible":"hidden"},j);return D.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:ee,style:V,ref:L},a)}}var KF=()=>{var t;return(t=Tt(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function eS(){return eS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eS.apply(null,arguments)}function Yk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yk(Object(n),!0).forEach(function(r){Yce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yce(t,e,n){return(e=Xce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xce(t){var e=Qce(t,"string");return typeof e=="symbol"?e:e+""}function Qce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qk={curveBasisClosed:toe,curveBasisOpen:noe,curveBasis:eoe,curveBumpX:Vse,curveBumpY:zse,curveLinearClosed:roe,curveLinear:eb,curveMonotoneX:ioe,curveMonotoneY:aoe,curveNatural:soe,curveStep:ooe,curveStepAfter:uoe,curveStepBefore:loe},Uv=t=>hn(t.x)&&hn(t.y),Zk=t=>t.base!=null&&Uv(t.base)&&Uv(t),Dg=t=>t.x,kg=t=>t.y,Zce=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(v0(t));if((n==="curveMonotone"||n==="curveBump")&&e){var r=Qk["".concat(n).concat(e==="vertical"?"Y":"X")];if(r)return r}return Qk[n]||eb},Jk={connectNulls:!1,type:"linear"},Jce=t=>{var{type:e=Jk.type,points:n=[],baseLine:r,layout:i,connectNulls:a=Jk.connectNulls}=t,l=Zce(e,i),f=a?n.filter(Uv):n;if(Array.isArray(r)){var m,p=n.map((j,M)=>Xk(Xk({},j),{},{base:r[M]}));i==="vertical"?m=X1().y(kg).x1(Dg).x0(j=>j.base.x):m=X1().x(Dg).y1(kg).y0(j=>j.base.y);var b=m.defined(Zk).curve(l),_=a?p.filter(Zk):p;return b(_)}var T;i==="vertical"&&St(r)?T=X1().y(kg).x1(Dg).x0(r):St(r)?T=X1().x(Dg).y1(kg).y0(r):T=vB().x(Dg).y(kg);var N=T.defined(Uv).curve(l);return N(f)},LI=t=>{var{className:e,points:n,path:r,pathRef:i}=t,a=Pd();if((!n||!n.length)&&!r)return null;var l={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},f=n&&n.length?Jce(l):r;return D.createElement("path",eS({},so(t),_I(t),{className:Gn("recharts-curve",e),d:f===null?void 0:f,ref:i}))},efe=["x","y","top","left","width","height","className"];function tS(){return tS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tS.apply(null,arguments)}function eM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tfe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eM(Object(n),!0).forEach(function(r){nfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nfe(t,e,n){return(e=rfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rfe(t){var e=ife(t,"string");return typeof e=="symbol"?e:e+""}function ife(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function afe(t,e){if(t==null)return{};var n,r,i=sfe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ofe=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),lfe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:l=0,className:f}=t,m=afe(t,efe),p=tfe({x:e,y:n,top:r,left:i,width:a,height:l},m);return!St(e)||!St(n)||!St(a)||!St(l)||!St(r)||!St(i)?null:D.createElement("path",tS({},as(p),{className:Gn("recharts-cross",f),d:ofe(e,n,a,l,r,i)}))};function ufe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function tM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tM(Object(n),!0).forEach(function(r){cfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cfe(t,e,n){return(e=ffe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ffe(t){var e=dfe(t,"string");return typeof e=="symbol"?e:e+""}function dfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hfe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),WF=(t,e,n)=>t.map(r=>"".concat(hfe(r)," ").concat(e,"ms ").concat(n)).join(","),mfe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),jp=(t,e)=>Object.keys(e).reduce((n,r)=>nM(nM({},n),{},{[r]:t(r,e[r])}),{});function rM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rM(Object(n),!0).forEach(function(r){gfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gfe(t,e,n){return(e=pfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pfe(t){var e=yfe(t,"string");return typeof e=="symbol"?e:e+""}function yfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qv=(t,e,n)=>t+(e-t)*n,nS=t=>{var{from:e,to:n}=t;return e!==n},$F=(t,e,n)=>{var r=jp((i,a)=>{if(nS(a)){var[l,f]=t(a.from,a.to,a.velocity);return Wi(Wi({},a),{},{from:l,velocity:f})}return a},e);return n<1?jp((i,a)=>nS(a)&&r[i]!=null?Wi(Wi({},a),{},{velocity:qv(a.velocity,r[i].velocity,n),from:qv(a.from,r[i].from,n)}):a,e):$F(t,r,n-1)};function vfe(t,e,n,r,i,a){var l,f=r.reduce((T,N)=>Wi(Wi({},T),{},{[N]:{from:t[N],velocity:0,to:e[N]}}),{}),m=()=>jp((T,N)=>N.from,f),p=()=>!Object.values(f).filter(nS).length,b=null,_=T=>{l||(l=T);var N=T-l,j=N/n.dt;f=$F(n,f,j),i(Wi(Wi(Wi({},t),e),m())),l=T,p()||(b=a.setTimeout(_))};return()=>(b=a.setTimeout(_),()=>{var T;(T=b)===null||T===void 0||T()})}function xfe(t,e,n,r,i,a,l){var f=null,m=i.reduce((_,T)=>{var N=t[T],j=e[T];return N==null||j==null?_:Wi(Wi({},_),{},{[T]:[N,j]})},{}),p,b=_=>{p||(p=_);var T=(_-p)/r,N=jp((M,L)=>qv(...L,n(T)),m);if(a(Wi(Wi(Wi({},t),e),N)),T<1)f=l.setTimeout(b);else{var j=jp((M,L)=>qv(...L,n(1)),m);a(Wi(Wi(Wi({},t),e),j))}};return()=>(f=l.setTimeout(b),()=>{var _;(_=f)===null||_===void 0||_()})}const bfe=(t,e,n,r,i,a)=>{var l=mfe(t,e);return n==null?()=>(i(Wi(Wi({},t),e)),()=>{}):n.isStepper===!0?vfe(t,e,n,l,i,a):xfe(t,e,n,r,l,i,a)};var Gv=1e-4,YF=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],XF=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),iM=(t,e)=>n=>{var r=YF(t,e);return XF(r,n)},wfe=(t,e)=>n=>{var r=YF(t,e),i=[...r.map((a,l)=>a*l).slice(1),0];return XF(i,n)},_fe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},Efe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=_fe(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},Afe=(t,e,n,r)=>{var i=iM(t,n),a=iM(e,r),l=wfe(t,n),f=p=>p>1?1:p<0?0:p,m=p=>{for(var b=p>1?1:p,_=b,T=0;T<8;++T){var N=i(_)-b,j=l(_);if(Math.abs(N-b)<Gv||j<Gv)return a(_);_=f(_-N/j)}return a(_)};return m.isStepper=!1,m},aM=function(){return Afe(...Efe(...arguments))},Sfe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(l,f,m)=>{var p=-(l-f)*n,b=m*r,_=m+(p-b)*i/1e3,T=m*i/1e3+l;return Math.abs(T-f)<Gv&&Math.abs(_)<Gv?[f,0]:[T,_]};return a.isStepper=!0,a.dt=i,a},Tfe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return aM(t);case"spring":return Sfe();default:if(t.split("(")[0]==="cubic-bezier")return aM(t)}return typeof t=="function"?t:null};function Ife(t){var e,n=()=>null,r=!1,i=null,a=l=>{if(!r){if(Array.isArray(l)){if(!l.length)return;var f=l,[m,...p]=f;if(typeof m=="number"){i=t.setTimeout(a.bind(null,p),m);return}a(m),i=t.setTimeout(a.bind(null,p));return}typeof l=="string"&&(e=l,n(e)),typeof l=="object"&&(e=l,n(e)),typeof l=="function"&&l()}};return{stop:()=>{r=!0},start:l=>{r=!1,i&&(i(),i=null),a(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>t}}class Cfe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=l=>{l-r>=n?e(l):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function Ofe(){return Ife(new Cfe)}var Nfe=D.createContext(Ofe);function Pfe(t,e){var n=D.useContext(Nfe);return D.useMemo(()=>e??n(t),[t,e,n])}var Rfe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),bb={isSsr:Rfe()},Dfe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},sM={t:0},iE={t:1};function S0(t){var e=Zi(t,Dfe),{isActive:n,canBegin:r,duration:i,easing:a,begin:l,onAnimationEnd:f,onAnimationStart:m,children:p}=e,b=n==="auto"?!bb.isSsr:n,_=Pfe(e.animationId,e.animationManager),[T,N]=D.useState(b?sM:iE),j=D.useRef(null);return D.useEffect(()=>{b||N(iE)},[b]),D.useEffect(()=>{if(!b||!r)return Nd;var M=bfe(sM,iE,Tfe(a),i,N,_.getTimeoutController()),L=()=>{j.current=M()};return _.start([m,l,L,i,f]),()=>{_.stop(),j.current&&j.current(),f()}},[b,r,i,a,l,m,f,_]),p(T.t)}function T0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=D.useRef(Op(e)),r=D.useRef(t);return r.current!==t&&(n.current=Op(e),r.current=t),n.current}var kfe=["radius"],Mfe=["radius"],oM,lM,uM,cM,fM,dM,hM,mM,gM,pM;function yM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yM(Object(n),!0).forEach(function(r){jfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jfe(t,e,n){return(e=Lfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lfe(t){var e=Bfe(t,"string");return typeof e=="symbol"?e:e+""}function Bfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hv(){return Hv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hv.apply(null,arguments)}function xM(t,e){if(t==null)return{};var n,r,i=Ffe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ffe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function fl(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var bM=(t,e,n,r,i)=>{var a=Nc(n),l=Nc(r),f=Math.min(Math.abs(a)/2,Math.abs(l)/2),m=l>=0?1:-1,p=a>=0?1:-1,b=l>=0&&a>=0||l<0&&a<0?1:0,_;if(f>0&&Array.isArray(i)){for(var T=[0,0,0,0],N=0,j=4;N<j;N++){var M,L=(M=i[N])!==null&&M!==void 0?M:0;T[N]=L>f?f:L}_=yi(oM||(oM=fl(["M",",",""])),t,e+m*T[0]),T[0]>0&&(_+=yi(lM||(lM=fl(["A ",",",",0,0,",",",",",""])),T[0],T[0],b,t+p*T[0],e)),_+=yi(uM||(uM=fl(["L ",",",""])),t+n-p*T[1],e),T[1]>0&&(_+=yi(cM||(cM=fl(["A ",",",",0,0,",`,
        `,",",""])),T[1],T[1],b,t+n,e+m*T[1])),_+=yi(fM||(fM=fl(["L ",",",""])),t+n,e+r-m*T[2]),T[2]>0&&(_+=yi(dM||(dM=fl(["A ",",",",0,0,",`,
        `,",",""])),T[2],T[2],b,t+n-p*T[2],e+r)),_+=yi(hM||(hM=fl(["L ",",",""])),t+p*T[3],e+r),T[3]>0&&(_+=yi(mM||(mM=fl(["A ",",",",0,0,",`,
        `,",",""])),T[3],T[3],b,t,e+r-m*T[3])),_+="Z"}else if(f>0&&i===+i&&i>0){var z=Math.min(f,i);_=yi(gM||(gM=fl(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+m*z,z,z,b,t+p*z,e,t+n-p*z,e,z,z,b,t+n,e+m*z,t+n,e+r-m*z,z,z,b,t+n-p*z,e+r,t+p*z,e+r,z,z,b,t,e+r-m*z)}else _=yi(pM||(pM=fl(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return _},wM={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},QF=t=>{var e=Zi(t,wM),n=D.useRef(null),[r,i]=D.useState(-1);D.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var _e=n.current.getTotalLength();_e&&i(_e)}catch{}},[]);var{x:a,y:l,width:f,height:m,radius:p,className:b}=e,{animationEasing:_,animationDuration:T,animationBegin:N,isAnimationActive:j,isUpdateAnimationActive:M}=e,L=D.useRef(f),z=D.useRef(m),$=D.useRef(a),K=D.useRef(l),ee=D.useMemo(()=>({x:a,y:l,width:f,height:m,radius:p}),[a,l,f,m,p]),ue=T0(ee,"rectangle-");if(a!==+a||l!==+l||f!==+f||m!==+m||f===0||m===0)return null;var Z=Gn("recharts-rectangle",b);if(!M){var V=as(e),{radius:W}=V,U=xM(V,kfe);return D.createElement("path",Hv({},U,{x:Nc(a),y:Nc(l),width:Nc(f),height:Nc(m),radius:typeof p=="number"?p:void 0,className:Z,d:bM(a,l,f,m,p)}))}var ae=L.current,ie=z.current,X=$.current,J=K.current,xe="0px ".concat(r===-1?1:r,"px"),de="".concat(r,"px 0px"),ye=WF(["strokeDasharray"],T,typeof _=="string"?_:wM.animationEasing);return D.createElement(S0,{animationId:ue,key:ue,canBegin:r>0,duration:T,easing:_,isActive:M,begin:N},_e=>{var qe=Jr(ae,f,_e),ze=Jr(ie,m,_e),et=Jr(X,a,_e),me=Jr(J,l,_e);n.current&&(L.current=qe,z.current=ze,$.current=et,K.current=me);var Se;j?_e>0?Se={transition:ye,strokeDasharray:de}:Se={strokeDasharray:xe}:Se={strokeDasharray:de};var Xe=as(e),{radius:Ve}=Xe,pt=xM(Xe,Mfe);return D.createElement("path",Hv({},pt,{radius:typeof p=="number"?p:void 0,className:Z,d:bM(et,me,qe,ze,p),ref:n,style:vM(vM({},Se),e.style)}))})};function _M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function EM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_M(Object(n),!0).forEach(function(r){Vfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_M(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vfe(t,e,n){return(e=zfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zfe(t){var e=Ufe(t,"string");return typeof e=="symbol"?e:e+""}function Ufe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kv=Math.PI/180,qfe=t=>t*180/Math.PI,zi=(t,e,n,r)=>({x:t+Math.cos(-Kv*r)*n,y:e+Math.sin(-Kv*r)*n}),ZF=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Gfe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},Hfe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,l=Gfe({x:n,y:r},{x:i,y:a});if(l<=0)return{radius:l,angle:0};var f=(n-i)/l,m=Math.acos(f);return r>a&&(m=2*Math.PI-m),{radius:l,angle:qfe(m),angleInRadian:m}},Kfe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},Wfe=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),l=Math.min(i,a);return t+l*360},$fe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=Hfe({x:n,y:r},e),{innerRadius:l,outerRadius:f}=e;if(i<l||i>f||i===0)return null;var{startAngle:m,endAngle:p}=Kfe(e),b=a,_;if(m<=p){for(;b>p;)b-=360;for(;b<m;)b+=360;_=b>=m&&b<=p}else{for(;b>m;)b-=360;for(;b<p;)b+=360;_=b>=p&&b<=m}return _?EM(EM({},e),{},{radius:i,angle:Wfe(b,e)}):null};function JF(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,l=zi(e,n,r,i),f=zi(e,n,r,a);return{points:[l,f],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}var AM,SM,TM,IM,CM,OM,NM;function rS(){return rS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rS.apply(null,arguments)}function Uf(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Yfe=(t,e)=>{var n=pa(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},sy=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:l,cornerRadius:f,cornerIsExternal:m}=t,p=f*(l?1:-1)+r,b=Math.asin(f/p)/Kv,_=m?i:i+a*b,T=zi(e,n,p,_),N=zi(e,n,r,_),j=m?i-a*b:i,M=zi(e,n,p*Math.cos(b*Kv),j);return{center:T,circleTangency:N,lineTangency:M,theta:b}},eV=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:l}=t,f=Yfe(a,l),m=a+f,p=zi(e,n,i,a),b=zi(e,n,i,m),_=yi(AM||(AM=Uf(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),p.x,p.y,i,i,+(Math.abs(f)>180),+(a>m),b.x,b.y);if(r>0){var T=zi(e,n,r,a),N=zi(e,n,r,m);_+=yi(SM||(SM=Uf(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),N.x,N.y,r,r,+(Math.abs(f)>180),+(a<=m),T.x,T.y)}else _+=yi(TM||(TM=Uf(["L ",","," Z"])),e,n);return _},Xfe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:f,startAngle:m,endAngle:p}=t,b=pa(p-m),{circleTangency:_,lineTangency:T,theta:N}=sy({cx:e,cy:n,radius:i,angle:m,sign:b,cornerRadius:a,cornerIsExternal:f}),{circleTangency:j,lineTangency:M,theta:L}=sy({cx:e,cy:n,radius:i,angle:p,sign:-b,cornerRadius:a,cornerIsExternal:f}),z=f?Math.abs(m-p):Math.abs(m-p)-N-L;if(z<0)return l?yi(IM||(IM=Uf(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),T.x,T.y,a,a,a*2,a,a,-a*2):eV({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:m,endAngle:p});var $=yi(CM||(CM=Uf(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),T.x,T.y,a,a,+(b<0),_.x,_.y,i,i,+(z>180),+(b<0),j.x,j.y,a,a,+(b<0),M.x,M.y);if(r>0){var{circleTangency:K,lineTangency:ee,theta:ue}=sy({cx:e,cy:n,radius:r,angle:m,sign:b,isExternal:!0,cornerRadius:a,cornerIsExternal:f}),{circleTangency:Z,lineTangency:V,theta:W}=sy({cx:e,cy:n,radius:r,angle:p,sign:-b,isExternal:!0,cornerRadius:a,cornerIsExternal:f}),U=f?Math.abs(m-p):Math.abs(m-p)-ue-W;if(U<0&&a===0)return"".concat($,"L").concat(e,",").concat(n,"Z");$+=yi(OM||(OM=Uf(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),V.x,V.y,a,a,+(b<0),Z.x,Z.y,r,r,+(U>180),+(b>0),K.x,K.y,a,a,+(b<0),ee.x,ee.y)}else $+=yi(NM||(NM=Uf(["L",",","Z"])),e,n);return $},Qfe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},tV=t=>{var e=Zi(t,Qfe),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:l,forceCornerRadius:f,cornerIsExternal:m,startAngle:p,endAngle:b,className:_}=e;if(a<i||p===b)return null;var T=Gn("recharts-sector",_),N=a-i,j=is(l,N,0,!0),M;return j>0&&Math.abs(p-b)<360?M=Xfe({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(j,N/2),forceCornerRadius:f,cornerIsExternal:m,startAngle:p,endAngle:b}):M=eV({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:p,endAngle:b}),D.createElement("path",rS({},as(e),{className:T,d:M}))};function Zfe(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(kB(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:l,angle:f}=e,m=zi(r,i,a,f),p=zi(r,i,l,f);return[{x:m.x,y:m.y},{x:p.x,y:p.y}]}return JF(e)}}var aE={},sE={},oE={},PM;function Jfe(){return PM||(PM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GB();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(oE)),oE}var RM;function ede(){return RM||(RM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Jfe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(sE)),sE}var DM;function tde(){return DM||(DM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HB(),n=ede();function r(i,a,l){l&&typeof l!="number"&&e.isIterateeCall(i,a,l)&&(a=l=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),l=l===void 0?i<a?1:-1:n.toFinite(l);const f=Math.max(Math.ceil((a-i)/(l||1)),0),m=new Array(f);for(let p=0;p<f;p++)m[p]=i,i+=l;return m}t.range=r})(aE)),aE}var lE,kM;function nde(){return kM||(kM=1,lE=tde().range),lE}var rde=nde();const nV=Rl(rde);function Fc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ide(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function BI(t){let e,n,r;t.length!==2?(e=Fc,n=(f,m)=>Fc(t(f),m),r=(f,m)=>t(f)-m):(e=t===Fc||t===ide?t:ade,n=t,r=t);function i(f,m,p=0,b=f.length){if(p<b){if(e(m,m)!==0)return b;do{const _=p+b>>>1;n(f[_],m)<0?p=_+1:b=_}while(p<b)}return p}function a(f,m,p=0,b=f.length){if(p<b){if(e(m,m)!==0)return b;do{const _=p+b>>>1;n(f[_],m)<=0?p=_+1:b=_}while(p<b)}return p}function l(f,m,p=0,b=f.length){const _=i(f,m,p,b-1);return _>p&&r(f[_-1],m)>-r(f[_],m)?_-1:_}return{left:i,center:l,right:a}}function ade(){return 0}function rV(t){return t===null?NaN:+t}function*sde(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const ode=BI(Fc),I0=ode.right;BI(rV).center;class MM extends Map{constructor(e,n=cde){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(jM(this,e))}has(e){return super.has(jM(this,e))}set(e,n){return super.set(lde(this,e),n)}delete(e){return super.delete(ude(this,e))}}function jM({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function lde({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function ude({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function cde(t){return t!==null&&typeof t=="object"?t.valueOf():t}function fde(t=Fc){if(t===Fc)return iV;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function iV(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const dde=Math.sqrt(50),hde=Math.sqrt(10),mde=Math.sqrt(2);function Wv(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),l=a>=dde?10:a>=hde?5:a>=mde?2:1;let f,m,p;return i<0?(p=Math.pow(10,-i)/l,f=Math.round(t*p),m=Math.round(e*p),f/p<t&&++f,m/p>e&&--m,p=-p):(p=Math.pow(10,i)*l,f=Math.round(t/p),m=Math.round(e/p),f*p<t&&++f,m*p>e&&--m),m<f&&.5<=n&&n<2?Wv(t,e,n*2):[f,m,p]}function iS(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,l]=r?Wv(e,t,n):Wv(t,e,n);if(!(a>=i))return[];const f=a-i+1,m=new Array(f);if(r)if(l<0)for(let p=0;p<f;++p)m[p]=(a-p)/-l;else for(let p=0;p<f;++p)m[p]=(a-p)*l;else if(l<0)for(let p=0;p<f;++p)m[p]=(i+p)/-l;else for(let p=0;p<f;++p)m[p]=(i+p)*l;return m}function aS(t,e,n){return e=+e,t=+t,n=+n,Wv(t,e,n)[2]}function sS(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?aS(e,t,n):aS(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function LM(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function BM(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function aV(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?iV:fde(i);r>n;){if(r-n>600){const m=r-n+1,p=e-n+1,b=Math.log(m),_=.5*Math.exp(2*b/3),T=.5*Math.sqrt(b*_*(m-_)/m)*(p-m/2<0?-1:1),N=Math.max(n,Math.floor(e-p*_/m+T)),j=Math.min(r,Math.floor(e+(m-p)*_/m+T));aV(t,e,N,j,i)}const a=t[e];let l=n,f=r;for(Mg(t,n,e),i(t[r],a)>0&&Mg(t,n,r);l<f;){for(Mg(t,l,f),++l,--f;i(t[l],a)<0;)++l;for(;i(t[f],a)>0;)--f}i(t[n],a)===0?Mg(t,n,f):(++f,Mg(t,f,r)),f<=e&&(n=f+1),e<=f&&(r=f-1)}return t}function Mg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function gde(t,e,n){if(t=Float64Array.from(sde(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return BM(t);if(e>=1)return LM(t);var r,i=(r-1)*e,a=Math.floor(i),l=LM(aV(t,a).subarray(0,a+1)),f=BM(t.subarray(a+1));return l+(f-l)*(i-a)}}function pde(t,e,n=rV){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),l=+n(t[a],a,t),f=+n(t[a+1],a+1,t);return l+(f-l)*(i-a)}}function yde(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Po(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Vu(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const oS=Symbol("implicit");function FI(){var t=new MM,e=[],n=[],r=oS;function i(a){let l=t.get(a);if(l===void 0){if(r!==oS)return r;t.set(a,l=e.push(a)-1)}return n[l%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new MM;for(const l of a)t.has(l)||t.set(l,e.push(l)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return FI(e,n).unknown(r)},Po.apply(i,arguments),i}function VI(){var t=FI().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,l,f=!1,m=0,p=0,b=.5;delete t.unknown;function _(){var T=e().length,N=i<r,j=N?i:r,M=N?r:i;a=(M-j)/Math.max(1,T-m+p*2),f&&(a=Math.floor(a)),j+=(M-j-a*(T-m))*b,l=a*(1-m),f&&(j=Math.round(j),l=Math.round(l));var L=yde(T).map(function(z){return j+a*z});return n(N?L.reverse():L)}return t.domain=function(T){return arguments.length?(e(T),_()):e()},t.range=function(T){return arguments.length?([r,i]=T,r=+r,i=+i,_()):[r,i]},t.rangeRound=function(T){return[r,i]=T,r=+r,i=+i,f=!0,_()},t.bandwidth=function(){return l},t.step=function(){return a},t.round=function(T){return arguments.length?(f=!!T,_()):f},t.padding=function(T){return arguments.length?(m=Math.min(1,p=+T),_()):m},t.paddingInner=function(T){return arguments.length?(m=Math.min(1,T),_()):m},t.paddingOuter=function(T){return arguments.length?(p=+T,_()):p},t.align=function(T){return arguments.length?(b=Math.max(0,Math.min(1,T)),_()):b},t.copy=function(){return VI(e(),[r,i]).round(f).paddingInner(m).paddingOuter(p).align(b)},Po.apply(_(),arguments)}function sV(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return sV(e())},t}function vde(){return sV(VI.apply(null,arguments).paddingInner(1))}function zI(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function oV(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function C0(){}var Lp=.7,$v=1/Lp,Lh="\\s*([+-]?\\d+)\\s*",Bp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Il="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xde=/^#([0-9a-f]{3,8})$/,bde=new RegExp(`^rgb\\(${Lh},${Lh},${Lh}\\)$`),wde=new RegExp(`^rgb\\(${Il},${Il},${Il}\\)$`),_de=new RegExp(`^rgba\\(${Lh},${Lh},${Lh},${Bp}\\)$`),Ede=new RegExp(`^rgba\\(${Il},${Il},${Il},${Bp}\\)$`),Ade=new RegExp(`^hsl\\(${Bp},${Il},${Il}\\)$`),Sde=new RegExp(`^hsla\\(${Bp},${Il},${Il},${Bp}\\)$`),FM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zI(C0,Fp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:VM,formatHex:VM,formatHex8:Tde,formatHsl:Ide,formatRgb:zM,toString:zM});function VM(){return this.rgb().formatHex()}function Tde(){return this.rgb().formatHex8()}function Ide(){return lV(this).formatHsl()}function zM(){return this.rgb().formatRgb()}function Fp(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=xde.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?UM(e):n===3?new js(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?oy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?oy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bde.exec(t))?new js(e[1],e[2],e[3],1):(e=wde.exec(t))?new js(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_de.exec(t))?oy(e[1],e[2],e[3],e[4]):(e=Ede.exec(t))?oy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ade.exec(t))?HM(e[1],e[2]/100,e[3]/100,1):(e=Sde.exec(t))?HM(e[1],e[2]/100,e[3]/100,e[4]):FM.hasOwnProperty(t)?UM(FM[t]):t==="transparent"?new js(NaN,NaN,NaN,0):null}function UM(t){return new js(t>>16&255,t>>8&255,t&255,1)}function oy(t,e,n,r){return r<=0&&(t=e=n=NaN),new js(t,e,n,r)}function Cde(t){return t instanceof C0||(t=Fp(t)),t?(t=t.rgb(),new js(t.r,t.g,t.b,t.opacity)):new js}function lS(t,e,n,r){return arguments.length===1?Cde(t):new js(t,e,n,r??1)}function js(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}zI(js,lS,oV(C0,{brighter(t){return t=t==null?$v:Math.pow($v,t),new js(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Lp:Math.pow(Lp,t),new js(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new js(Xf(this.r),Xf(this.g),Xf(this.b),Yv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qM,formatHex:qM,formatHex8:Ode,formatRgb:GM,toString:GM}));function qM(){return`#${qf(this.r)}${qf(this.g)}${qf(this.b)}`}function Ode(){return`#${qf(this.r)}${qf(this.g)}${qf(this.b)}${qf((isNaN(this.opacity)?1:this.opacity)*255)}`}function GM(){const t=Yv(this.opacity);return`${t===1?"rgb(":"rgba("}${Xf(this.r)}, ${Xf(this.g)}, ${Xf(this.b)}${t===1?")":`, ${t})`}`}function Yv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Xf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qf(t){return t=Xf(t),(t<16?"0":"")+t.toString(16)}function HM(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Uo(t,e,n,r)}function lV(t){if(t instanceof Uo)return new Uo(t.h,t.s,t.l,t.opacity);if(t instanceof C0||(t=Fp(t)),!t)return new Uo;if(t instanceof Uo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),l=NaN,f=a-i,m=(a+i)/2;return f?(e===a?l=(n-r)/f+(n<r)*6:n===a?l=(r-e)/f+2:l=(e-n)/f+4,f/=m<.5?a+i:2-a-i,l*=60):f=m>0&&m<1?0:l,new Uo(l,f,m,t.opacity)}function Nde(t,e,n,r){return arguments.length===1?lV(t):new Uo(t,e,n,r??1)}function Uo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}zI(Uo,Nde,oV(C0,{brighter(t){return t=t==null?$v:Math.pow($v,t),new Uo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Lp:Math.pow(Lp,t),new Uo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new js(uE(t>=240?t-240:t+120,i,r),uE(t,i,r),uE(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Uo(KM(this.h),ly(this.s),ly(this.l),Yv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Yv(this.opacity);return`${t===1?"hsl(":"hsla("}${KM(this.h)}, ${ly(this.s)*100}%, ${ly(this.l)*100}%${t===1?")":`, ${t})`}`}}));function KM(t){return t=(t||0)%360,t<0?t+360:t}function ly(t){return Math.max(0,Math.min(1,t||0))}function uE(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const UI=t=>()=>t;function Pde(t,e){return function(n){return t+n*e}}function Rde(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Dde(t){return(t=+t)==1?uV:function(e,n){return n-e?Rde(e,n,t):UI(isNaN(e)?n:e)}}function uV(t,e){var n=e-t;return n?Pde(t,n):UI(isNaN(t)?e:t)}const WM=(function t(e){var n=Dde(e);function r(i,a){var l=n((i=lS(i)).r,(a=lS(a)).r),f=n(i.g,a.g),m=n(i.b,a.b),p=uV(i.opacity,a.opacity);return function(b){return i.r=l(b),i.g=f(b),i.b=m(b),i.opacity=p(b),i+""}}return r.gamma=t,r})(1);function kde(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Mde(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function jde(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),l;for(l=0;l<r;++l)i[l]=km(t[l],e[l]);for(;l<n;++l)a[l]=e[l];return function(f){for(l=0;l<r;++l)a[l]=i[l](f);return a}}function Lde(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Xv(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Bde(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=km(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var uS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cE=new RegExp(uS.source,"g");function Fde(t){return function(){return t}}function Vde(t){return function(e){return t(e)+""}}function zde(t,e){var n=uS.lastIndex=cE.lastIndex=0,r,i,a,l=-1,f=[],m=[];for(t=t+"",e=e+"";(r=uS.exec(t))&&(i=cE.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),f[l]?f[l]+=a:f[++l]=a),(r=r[0])===(i=i[0])?f[l]?f[l]+=i:f[++l]=i:(f[++l]=null,m.push({i:l,x:Xv(r,i)})),n=cE.lastIndex;return n<e.length&&(a=e.slice(n),f[l]?f[l]+=a:f[++l]=a),f.length<2?m[0]?Vde(m[0].x):Fde(e):(e=m.length,function(p){for(var b=0,_;b<e;++b)f[(_=m[b]).i]=_.x(p);return f.join("")})}function km(t,e){var n=typeof e,r;return e==null||n==="boolean"?UI(e):(n==="number"?Xv:n==="string"?(r=Fp(e))?(e=r,WM):zde:e instanceof Fp?WM:e instanceof Date?Lde:Mde(e)?kde:Array.isArray(e)?jde:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Bde:Xv)(t,e)}function qI(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Ude(t,e){e===void 0&&(e=t,t=km);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(l){var f=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return a[f](l-f)}}function qde(t){return function(){return t}}function Qv(t){return+t}var $M=[0,1];function fs(t){return t}function cS(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:qde(isNaN(e)?NaN:.5)}function Gde(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Hde(t,e,n){var r=t[0],i=t[1],a=e[0],l=e[1];return i<r?(r=cS(i,r),a=n(l,a)):(r=cS(r,i),a=n(a,l)),function(f){return a(r(f))}}function Kde(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),l=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<r;)i[l]=cS(t[l],t[l+1]),a[l]=n(e[l],e[l+1]);return function(f){var m=I0(t,f,1,r)-1;return a[m](i[m](f))}}function O0(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function wb(){var t=$M,e=$M,n=km,r,i,a,l=fs,f,m,p;function b(){var T=Math.min(t.length,e.length);return l!==fs&&(l=Gde(t[0],t[T-1])),f=T>2?Kde:Hde,m=p=null,_}function _(T){return T==null||isNaN(T=+T)?a:(m||(m=f(t.map(r),e,n)))(r(l(T)))}return _.invert=function(T){return l(i((p||(p=f(e,t.map(r),Xv)))(T)))},_.domain=function(T){return arguments.length?(t=Array.from(T,Qv),b()):t.slice()},_.range=function(T){return arguments.length?(e=Array.from(T),b()):e.slice()},_.rangeRound=function(T){return e=Array.from(T),n=qI,b()},_.clamp=function(T){return arguments.length?(l=T?!0:fs,b()):l!==fs},_.interpolate=function(T){return arguments.length?(n=T,b()):n},_.unknown=function(T){return arguments.length?(a=T,_):a},function(T,N){return r=T,i=N,b()}}function GI(){return wb()(fs,fs)}function Wde(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Zv(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function fm(t){return t=Zv(Math.abs(t)),t?t[1]:NaN}function $de(t,e){return function(n,r){for(var i=n.length,a=[],l=0,f=t[0],m=0;i>0&&f>0&&(m+f+1>r&&(f=Math.max(1,r-m)),a.push(n.substring(i-=f,i+f)),!((m+=f+1)>r));)f=t[l=(l+1)%t.length];return a.reverse().join(e)}}function Yde(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Xde=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vp(t){if(!(e=Xde.exec(t)))throw new Error("invalid format: "+t);var e;return new HI({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Vp.prototype=HI.prototype;function HI(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}HI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Qde(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Jv;function Zde(t,e){var n=Zv(t,e);if(!n)return Jv=void 0,t.toPrecision(e);var r=n[0],i=n[1],a=i-(Jv=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return a===l?r:a>l?r+new Array(a-l+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Zv(t,Math.max(0,e+a-1))[0]}function YM(t,e){var n=Zv(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const XM={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Wde,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>YM(t*100,e),r:YM,s:Zde,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function QM(t){return t}var ZM=Array.prototype.map,JM=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Jde(t){var e=t.grouping===void 0||t.thousands===void 0?QM:$de(ZM.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?QM:Yde(ZM.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",f=t.minus===void 0?"":t.minus+"",m=t.nan===void 0?"NaN":t.nan+"";function p(_,T){_=Vp(_);var N=_.fill,j=_.align,M=_.sign,L=_.symbol,z=_.zero,$=_.width,K=_.comma,ee=_.precision,ue=_.trim,Z=_.type;Z==="n"?(K=!0,Z="g"):XM[Z]||(ee===void 0&&(ee=12),ue=!0,Z="g"),(z||N==="0"&&j==="=")&&(z=!0,N="0",j="=");var V=(T&&T.prefix!==void 0?T.prefix:"")+(L==="$"?n:L==="#"&&/[boxX]/.test(Z)?"0"+Z.toLowerCase():""),W=(L==="$"?r:/[%p]/.test(Z)?l:"")+(T&&T.suffix!==void 0?T.suffix:""),U=XM[Z],ae=/[defgprs%]/.test(Z);ee=ee===void 0?6:/[gprs]/.test(Z)?Math.max(1,Math.min(21,ee)):Math.max(0,Math.min(20,ee));function ie(X){var J=V,xe=W,de,ye,_e;if(Z==="c")xe=U(X)+xe,X="";else{X=+X;var qe=X<0||1/X<0;if(X=isNaN(X)?m:U(Math.abs(X),ee),ue&&(X=Qde(X)),qe&&+X==0&&M!=="+"&&(qe=!1),J=(qe?M==="("?M:f:M==="-"||M==="("?"":M)+J,xe=(Z==="s"&&!isNaN(X)&&Jv!==void 0?JM[8+Jv/3]:"")+xe+(qe&&M==="("?")":""),ae){for(de=-1,ye=X.length;++de<ye;)if(_e=X.charCodeAt(de),48>_e||_e>57){xe=(_e===46?i+X.slice(de+1):X.slice(de))+xe,X=X.slice(0,de);break}}}K&&!z&&(X=e(X,1/0));var ze=J.length+X.length+xe.length,et=ze<$?new Array($-ze+1).join(N):"";switch(K&&z&&(X=e(et+X,et.length?$-xe.length:1/0),et=""),j){case"<":X=J+X+xe+et;break;case"=":X=J+et+X+xe;break;case"^":X=et.slice(0,ze=et.length>>1)+J+X+xe+et.slice(ze);break;default:X=et+J+X+xe;break}return a(X)}return ie.toString=function(){return _+""},ie}function b(_,T){var N=Math.max(-8,Math.min(8,Math.floor(fm(T)/3)))*3,j=Math.pow(10,-N),M=p((_=Vp(_),_.type="f",_),{suffix:JM[8+N/3]});return function(L){return M(j*L)}}return{format:p,formatPrefix:b}}var uy,KI,cV;ehe({thousands:",",grouping:[3],currency:["$",""]});function ehe(t){return uy=Jde(t),KI=uy.format,cV=uy.formatPrefix,uy}function the(t){return Math.max(0,-fm(Math.abs(t)))}function nhe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(fm(e)/3)))*3-fm(Math.abs(t)))}function rhe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,fm(e)-fm(t))+1}function fV(t,e,n,r){var i=sS(t,e,n),a;switch(r=Vp(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=nhe(i,l))&&(r.precision=a),cV(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=rhe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=the(i))&&(r.precision=a-(r.type==="%")*2);break}}return KI(r)}function ff(t){var e=t.domain;return t.ticks=function(n){var r=e();return iS(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return fV(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,l=r[i],f=r[a],m,p,b=10;for(f<l&&(p=l,l=f,f=p,p=i,i=a,a=p);b-- >0;){if(p=aS(l,f,n),p===m)return r[i]=l,r[a]=f,e(r);if(p>0)l=Math.floor(l/p)*p,f=Math.ceil(f/p)*p;else if(p<0)l=Math.ceil(l*p)/p,f=Math.floor(f*p)/p;else break;m=p}return t},t}function dV(){var t=GI();return t.copy=function(){return O0(t,dV())},Po.apply(t,arguments),ff(t)}function hV(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Qv),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return hV(t).unknown(e)},t=arguments.length?Array.from(t,Qv):[0,1],ff(n)}function mV(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],l;return a<i&&(l=n,n=r,r=l,l=i,i=a,a=l),t[n]=e.floor(i),t[r]=e.ceil(a),t}function e8(t){return Math.log(t)}function t8(t){return Math.exp(t)}function ihe(t){return-Math.log(-t)}function ahe(t){return-Math.exp(-t)}function she(t){return isFinite(t)?+("1e"+t):t<0?0:t}function ohe(t){return t===10?she:t===Math.E?Math.exp:e=>Math.pow(t,e)}function lhe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function n8(t){return(e,n)=>-t(-e,n)}function WI(t){const e=t(e8,t8),n=e.domain;let r=10,i,a;function l(){return i=lhe(r),a=ohe(r),n()[0]<0?(i=n8(i),a=n8(a),t(ihe,ahe)):t(e8,t8),e}return e.base=function(f){return arguments.length?(r=+f,l()):r},e.domain=function(f){return arguments.length?(n(f),l()):n()},e.ticks=f=>{const m=n();let p=m[0],b=m[m.length-1];const _=b<p;_&&([p,b]=[b,p]);let T=i(p),N=i(b),j,M;const L=f==null?10:+f;let z=[];if(!(r%1)&&N-T<L){if(T=Math.floor(T),N=Math.ceil(N),p>0){for(;T<=N;++T)for(j=1;j<r;++j)if(M=T<0?j/a(-T):j*a(T),!(M<p)){if(M>b)break;z.push(M)}}else for(;T<=N;++T)for(j=r-1;j>=1;--j)if(M=T>0?j/a(-T):j*a(T),!(M<p)){if(M>b)break;z.push(M)}z.length*2<L&&(z=iS(p,b,L))}else z=iS(T,N,Math.min(N-T,L)).map(a);return _?z.reverse():z},e.tickFormat=(f,m)=>{if(f==null&&(f=10),m==null&&(m=r===10?"s":","),typeof m!="function"&&(!(r%1)&&(m=Vp(m)).precision==null&&(m.trim=!0),m=KI(m)),f===1/0)return m;const p=Math.max(1,r*f/e.ticks().length);return b=>{let _=b/a(Math.round(i(b)));return _*r<r-.5&&(_*=r),_<=p?m(b):""}},e.nice=()=>n(mV(n(),{floor:f=>a(Math.floor(i(f))),ceil:f=>a(Math.ceil(i(f)))})),e}function gV(){const t=WI(wb()).domain([1,10]);return t.copy=()=>O0(t,gV()).base(t.base()),Po.apply(t,arguments),t}function r8(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function i8(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function $I(t){var e=1,n=t(r8(e),i8(e));return n.constant=function(r){return arguments.length?t(r8(e=+r),i8(e)):e},ff(n)}function pV(){var t=$I(wb());return t.copy=function(){return O0(t,pV()).constant(t.constant())},Po.apply(t,arguments)}function a8(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function uhe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function che(t){return t<0?-t*t:t*t}function YI(t){var e=t(fs,fs),n=1;function r(){return n===1?t(fs,fs):n===.5?t(uhe,che):t(a8(n),a8(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},ff(e)}function XI(){var t=YI(wb());return t.copy=function(){return O0(t,XI()).exponent(t.exponent())},Po.apply(t,arguments),t}function fhe(){return XI.apply(null,arguments).exponent(.5)}function s8(t){return Math.sign(t)*t*t}function dhe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function yV(){var t=GI(),e=[0,1],n=!1,r;function i(a){var l=dhe(t(a));return isNaN(l)?r:n?Math.round(l):l}return i.invert=function(a){return t.invert(s8(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Qv)).map(s8)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return yV(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Po.apply(i,arguments),ff(i)}function vV(){var t=[],e=[],n=[],r;function i(){var l=0,f=Math.max(1,e.length);for(n=new Array(f-1);++l<f;)n[l-1]=pde(t,l/f);return a}function a(l){return l==null||isNaN(l=+l)?r:e[I0(n,l)]}return a.invertExtent=function(l){var f=e.indexOf(l);return f<0?[NaN,NaN]:[f>0?n[f-1]:t[0],f<n.length?n[f]:t[t.length-1]]},a.domain=function(l){if(!arguments.length)return t.slice();t=[];for(let f of l)f!=null&&!isNaN(f=+f)&&t.push(f);return t.sort(Fc),i()},a.range=function(l){return arguments.length?(e=Array.from(l),i()):e.slice()},a.unknown=function(l){return arguments.length?(r=l,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return vV().domain(t).range(e).unknown(r)},Po.apply(a,arguments)}function xV(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function l(m){return m!=null&&m<=m?i[I0(r,m,0,n)]:a}function f(){var m=-1;for(r=new Array(n);++m<n;)r[m]=((m+1)*e-(m-n)*t)/(n+1);return l}return l.domain=function(m){return arguments.length?([t,e]=m,t=+t,e=+e,f()):[t,e]},l.range=function(m){return arguments.length?(n=(i=Array.from(m)).length-1,f()):i.slice()},l.invertExtent=function(m){var p=i.indexOf(m);return p<0?[NaN,NaN]:p<1?[t,r[0]]:p>=n?[r[n-1],e]:[r[p-1],r[p]]},l.unknown=function(m){return arguments.length&&(a=m),l},l.thresholds=function(){return r.slice()},l.copy=function(){return xV().domain([t,e]).range(i).unknown(a)},Po.apply(ff(l),arguments)}function bV(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[I0(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var l=e.indexOf(a);return[t[l-1],t[l]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return bV().domain(t).range(e).unknown(n)},Po.apply(i,arguments)}const fE=new Date,dE=new Date;function ea(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const l=i(a),f=i.ceil(a);return a-l<f-a?l:f},i.offset=(a,l)=>(e(a=new Date(+a),l==null?1:Math.floor(l)),a),i.range=(a,l,f)=>{const m=[];if(a=i.ceil(a),f=f==null?1:Math.floor(f),!(a<l)||!(f>0))return m;let p;do m.push(p=new Date(+a)),e(a,f),t(a);while(p<a&&a<l);return m},i.filter=a=>ea(l=>{if(l>=l)for(;t(l),!a(l);)l.setTime(l-1)},(l,f)=>{if(l>=l)if(f<0)for(;++f<=0;)for(;e(l,-1),!a(l););else for(;--f>=0;)for(;e(l,1),!a(l););}),n&&(i.count=(a,l)=>(fE.setTime(+a),dE.setTime(+l),t(fE),t(dE),Math.floor(n(fE,dE))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?l=>r(l)%a===0:l=>i.count(0,l)%a===0):i)),i}const ex=ea(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ex.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ea(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ex);ex.range;const du=1e3,So=du*60,hu=So*60,Tu=hu*24,QI=Tu*7,o8=Tu*30,hE=Tu*365,Gf=ea(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*du)},(t,e)=>(e-t)/du,t=>t.getUTCSeconds());Gf.range;const ZI=ea(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*du)},(t,e)=>{t.setTime(+t+e*So)},(t,e)=>(e-t)/So,t=>t.getMinutes());ZI.range;const JI=ea(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*So)},(t,e)=>(e-t)/So,t=>t.getUTCMinutes());JI.range;const eC=ea(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*du-t.getMinutes()*So)},(t,e)=>{t.setTime(+t+e*hu)},(t,e)=>(e-t)/hu,t=>t.getHours());eC.range;const tC=ea(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*hu)},(t,e)=>(e-t)/hu,t=>t.getUTCHours());tC.range;const N0=ea(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*So)/Tu,t=>t.getDate()-1);N0.range;const _b=ea(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Tu,t=>t.getUTCDate()-1);_b.range;const wV=ea(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Tu,t=>Math.floor(t/Tu));wV.range;function Rd(t){return ea(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*So)/QI)}const Eb=Rd(0),tx=Rd(1),hhe=Rd(2),mhe=Rd(3),dm=Rd(4),ghe=Rd(5),phe=Rd(6);Eb.range;tx.range;hhe.range;mhe.range;dm.range;ghe.range;phe.range;function Dd(t){return ea(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/QI)}const Ab=Dd(0),nx=Dd(1),yhe=Dd(2),vhe=Dd(3),hm=Dd(4),xhe=Dd(5),bhe=Dd(6);Ab.range;nx.range;yhe.range;vhe.range;hm.range;xhe.range;bhe.range;const nC=ea(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());nC.range;const rC=ea(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());rC.range;const Iu=ea(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Iu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ea(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Iu.range;const Cu=ea(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Cu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ea(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Cu.range;function _V(t,e,n,r,i,a){const l=[[Gf,1,du],[Gf,5,5*du],[Gf,15,15*du],[Gf,30,30*du],[a,1,So],[a,5,5*So],[a,15,15*So],[a,30,30*So],[i,1,hu],[i,3,3*hu],[i,6,6*hu],[i,12,12*hu],[r,1,Tu],[r,2,2*Tu],[n,1,QI],[e,1,o8],[e,3,3*o8],[t,1,hE]];function f(p,b,_){const T=b<p;T&&([p,b]=[b,p]);const N=_&&typeof _.range=="function"?_:m(p,b,_),j=N?N.range(p,+b+1):[];return T?j.reverse():j}function m(p,b,_){const T=Math.abs(b-p)/_,N=BI(([,,L])=>L).right(l,T);if(N===l.length)return t.every(sS(p/hE,b/hE,_));if(N===0)return ex.every(Math.max(sS(p,b,_),1));const[j,M]=l[T/l[N-1][2]<l[N][2]/T?N-1:N];return j.every(M)}return[f,m]}const[whe,_he]=_V(Cu,rC,Ab,wV,tC,JI),[Ehe,Ahe]=_V(Iu,nC,Eb,N0,eC,ZI);function mE(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function gE(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function jg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function She(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,l=t.shortDays,f=t.months,m=t.shortMonths,p=Lg(i),b=Bg(i),_=Lg(a),T=Bg(a),N=Lg(l),j=Bg(l),M=Lg(f),L=Bg(f),z=Lg(m),$=Bg(m),K={a:_e,A:qe,b:ze,B:et,c:null,d:h8,e:h8,f:$he,g:ime,G:sme,H:Hhe,I:Khe,j:Whe,L:EV,m:Yhe,M:Xhe,p:me,q:Se,Q:p8,s:y8,S:Qhe,u:Zhe,U:Jhe,V:eme,w:tme,W:nme,x:null,X:null,y:rme,Y:ame,Z:ome,"%":g8},ee={a:Xe,A:Ve,b:pt,B:$e,c:null,d:m8,e:m8,f:fme,g:wme,G:Eme,H:lme,I:ume,j:cme,L:SV,m:dme,M:hme,p:yt,q:ut,Q:p8,s:y8,S:mme,u:gme,U:pme,V:yme,w:vme,W:xme,x:null,X:null,y:bme,Y:_me,Z:Ame,"%":g8},ue={a:ae,A:ie,b:X,B:J,c:xe,d:f8,e:f8,f:zhe,g:c8,G:u8,H:d8,I:d8,j:Lhe,L:Vhe,m:jhe,M:Bhe,p:U,q:Mhe,Q:qhe,s:Ghe,S:Fhe,u:Nhe,U:Phe,V:Rhe,w:Ohe,W:Dhe,x:de,X:ye,y:c8,Y:u8,Z:khe,"%":Uhe};K.x=Z(n,K),K.X=Z(r,K),K.c=Z(e,K),ee.x=Z(n,ee),ee.X=Z(r,ee),ee.c=Z(e,ee);function Z(Ne,Ye){return function(_t){var Fe=[],Rt=-1,Wt=0,mn=Ne.length,Wn,st,zt;for(_t instanceof Date||(_t=new Date(+_t));++Rt<mn;)Ne.charCodeAt(Rt)===37&&(Fe.push(Ne.slice(Wt,Rt)),(st=l8[Wn=Ne.charAt(++Rt)])!=null?Wn=Ne.charAt(++Rt):st=Wn==="e"?" ":"0",(zt=Ye[Wn])&&(Wn=zt(_t,st)),Fe.push(Wn),Wt=Rt+1);return Fe.push(Ne.slice(Wt,Rt)),Fe.join("")}}function V(Ne,Ye){return function(_t){var Fe=jg(1900,void 0,1),Rt=W(Fe,Ne,_t+="",0),Wt,mn;if(Rt!=_t.length)return null;if("Q"in Fe)return new Date(Fe.Q);if("s"in Fe)return new Date(Fe.s*1e3+("L"in Fe?Fe.L:0));if(Ye&&!("Z"in Fe)&&(Fe.Z=0),"p"in Fe&&(Fe.H=Fe.H%12+Fe.p*12),Fe.m===void 0&&(Fe.m="q"in Fe?Fe.q:0),"V"in Fe){if(Fe.V<1||Fe.V>53)return null;"w"in Fe||(Fe.w=1),"Z"in Fe?(Wt=gE(jg(Fe.y,0,1)),mn=Wt.getUTCDay(),Wt=mn>4||mn===0?nx.ceil(Wt):nx(Wt),Wt=_b.offset(Wt,(Fe.V-1)*7),Fe.y=Wt.getUTCFullYear(),Fe.m=Wt.getUTCMonth(),Fe.d=Wt.getUTCDate()+(Fe.w+6)%7):(Wt=mE(jg(Fe.y,0,1)),mn=Wt.getDay(),Wt=mn>4||mn===0?tx.ceil(Wt):tx(Wt),Wt=N0.offset(Wt,(Fe.V-1)*7),Fe.y=Wt.getFullYear(),Fe.m=Wt.getMonth(),Fe.d=Wt.getDate()+(Fe.w+6)%7)}else("W"in Fe||"U"in Fe)&&("w"in Fe||(Fe.w="u"in Fe?Fe.u%7:"W"in Fe?1:0),mn="Z"in Fe?gE(jg(Fe.y,0,1)).getUTCDay():mE(jg(Fe.y,0,1)).getDay(),Fe.m=0,Fe.d="W"in Fe?(Fe.w+6)%7+Fe.W*7-(mn+5)%7:Fe.w+Fe.U*7-(mn+6)%7);return"Z"in Fe?(Fe.H+=Fe.Z/100|0,Fe.M+=Fe.Z%100,gE(Fe)):mE(Fe)}}function W(Ne,Ye,_t,Fe){for(var Rt=0,Wt=Ye.length,mn=_t.length,Wn,st;Rt<Wt;){if(Fe>=mn)return-1;if(Wn=Ye.charCodeAt(Rt++),Wn===37){if(Wn=Ye.charAt(Rt++),st=ue[Wn in l8?Ye.charAt(Rt++):Wn],!st||(Fe=st(Ne,_t,Fe))<0)return-1}else if(Wn!=_t.charCodeAt(Fe++))return-1}return Fe}function U(Ne,Ye,_t){var Fe=p.exec(Ye.slice(_t));return Fe?(Ne.p=b.get(Fe[0].toLowerCase()),_t+Fe[0].length):-1}function ae(Ne,Ye,_t){var Fe=N.exec(Ye.slice(_t));return Fe?(Ne.w=j.get(Fe[0].toLowerCase()),_t+Fe[0].length):-1}function ie(Ne,Ye,_t){var Fe=_.exec(Ye.slice(_t));return Fe?(Ne.w=T.get(Fe[0].toLowerCase()),_t+Fe[0].length):-1}function X(Ne,Ye,_t){var Fe=z.exec(Ye.slice(_t));return Fe?(Ne.m=$.get(Fe[0].toLowerCase()),_t+Fe[0].length):-1}function J(Ne,Ye,_t){var Fe=M.exec(Ye.slice(_t));return Fe?(Ne.m=L.get(Fe[0].toLowerCase()),_t+Fe[0].length):-1}function xe(Ne,Ye,_t){return W(Ne,e,Ye,_t)}function de(Ne,Ye,_t){return W(Ne,n,Ye,_t)}function ye(Ne,Ye,_t){return W(Ne,r,Ye,_t)}function _e(Ne){return l[Ne.getDay()]}function qe(Ne){return a[Ne.getDay()]}function ze(Ne){return m[Ne.getMonth()]}function et(Ne){return f[Ne.getMonth()]}function me(Ne){return i[+(Ne.getHours()>=12)]}function Se(Ne){return 1+~~(Ne.getMonth()/3)}function Xe(Ne){return l[Ne.getUTCDay()]}function Ve(Ne){return a[Ne.getUTCDay()]}function pt(Ne){return m[Ne.getUTCMonth()]}function $e(Ne){return f[Ne.getUTCMonth()]}function yt(Ne){return i[+(Ne.getUTCHours()>=12)]}function ut(Ne){return 1+~~(Ne.getUTCMonth()/3)}return{format:function(Ne){var Ye=Z(Ne+="",K);return Ye.toString=function(){return Ne},Ye},parse:function(Ne){var Ye=V(Ne+="",!1);return Ye.toString=function(){return Ne},Ye},utcFormat:function(Ne){var Ye=Z(Ne+="",ee);return Ye.toString=function(){return Ne},Ye},utcParse:function(Ne){var Ye=V(Ne+="",!0);return Ye.toString=function(){return Ne},Ye}}}var l8={"-":"",_:" ",0:"0"},va=/^\s*\d+/,The=/^%/,Ihe=/[\\^$*+?|[\]().{}]/g;function Hn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Che(t){return t.replace(Ihe,"\\$&")}function Lg(t){return new RegExp("^(?:"+t.map(Che).join("|")+")","i")}function Bg(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Ohe(t,e,n){var r=va.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Nhe(t,e,n){var r=va.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Phe(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Rhe(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Dhe(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function u8(t,e,n){var r=va.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function c8(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function khe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Mhe(t,e,n){var r=va.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function jhe(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function f8(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Lhe(t,e,n){var r=va.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function d8(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Bhe(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Fhe(t,e,n){var r=va.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Vhe(t,e,n){var r=va.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function zhe(t,e,n){var r=va.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Uhe(t,e,n){var r=The.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function qhe(t,e,n){var r=va.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Ghe(t,e,n){var r=va.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function h8(t,e){return Hn(t.getDate(),e,2)}function Hhe(t,e){return Hn(t.getHours(),e,2)}function Khe(t,e){return Hn(t.getHours()%12||12,e,2)}function Whe(t,e){return Hn(1+N0.count(Iu(t),t),e,3)}function EV(t,e){return Hn(t.getMilliseconds(),e,3)}function $he(t,e){return EV(t,e)+"000"}function Yhe(t,e){return Hn(t.getMonth()+1,e,2)}function Xhe(t,e){return Hn(t.getMinutes(),e,2)}function Qhe(t,e){return Hn(t.getSeconds(),e,2)}function Zhe(t){var e=t.getDay();return e===0?7:e}function Jhe(t,e){return Hn(Eb.count(Iu(t)-1,t),e,2)}function AV(t){var e=t.getDay();return e>=4||e===0?dm(t):dm.ceil(t)}function eme(t,e){return t=AV(t),Hn(dm.count(Iu(t),t)+(Iu(t).getDay()===4),e,2)}function tme(t){return t.getDay()}function nme(t,e){return Hn(tx.count(Iu(t)-1,t),e,2)}function rme(t,e){return Hn(t.getFullYear()%100,e,2)}function ime(t,e){return t=AV(t),Hn(t.getFullYear()%100,e,2)}function ame(t,e){return Hn(t.getFullYear()%1e4,e,4)}function sme(t,e){var n=t.getDay();return t=n>=4||n===0?dm(t):dm.ceil(t),Hn(t.getFullYear()%1e4,e,4)}function ome(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Hn(e/60|0,"0",2)+Hn(e%60,"0",2)}function m8(t,e){return Hn(t.getUTCDate(),e,2)}function lme(t,e){return Hn(t.getUTCHours(),e,2)}function ume(t,e){return Hn(t.getUTCHours()%12||12,e,2)}function cme(t,e){return Hn(1+_b.count(Cu(t),t),e,3)}function SV(t,e){return Hn(t.getUTCMilliseconds(),e,3)}function fme(t,e){return SV(t,e)+"000"}function dme(t,e){return Hn(t.getUTCMonth()+1,e,2)}function hme(t,e){return Hn(t.getUTCMinutes(),e,2)}function mme(t,e){return Hn(t.getUTCSeconds(),e,2)}function gme(t){var e=t.getUTCDay();return e===0?7:e}function pme(t,e){return Hn(Ab.count(Cu(t)-1,t),e,2)}function TV(t){var e=t.getUTCDay();return e>=4||e===0?hm(t):hm.ceil(t)}function yme(t,e){return t=TV(t),Hn(hm.count(Cu(t),t)+(Cu(t).getUTCDay()===4),e,2)}function vme(t){return t.getUTCDay()}function xme(t,e){return Hn(nx.count(Cu(t)-1,t),e,2)}function bme(t,e){return Hn(t.getUTCFullYear()%100,e,2)}function wme(t,e){return t=TV(t),Hn(t.getUTCFullYear()%100,e,2)}function _me(t,e){return Hn(t.getUTCFullYear()%1e4,e,4)}function Eme(t,e){var n=t.getUTCDay();return t=n>=4||n===0?hm(t):hm.ceil(t),Hn(t.getUTCFullYear()%1e4,e,4)}function Ame(){return"+0000"}function g8(){return"%"}function p8(t){return+t}function y8(t){return Math.floor(+t/1e3)}var gh,IV,CV;Sme({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Sme(t){return gh=She(t),IV=gh.format,gh.parse,CV=gh.utcFormat,gh.utcParse,gh}function Tme(t){return new Date(t)}function Ime(t){return t instanceof Date?+t:+new Date(+t)}function iC(t,e,n,r,i,a,l,f,m,p){var b=GI(),_=b.invert,T=b.domain,N=p(".%L"),j=p(":%S"),M=p("%I:%M"),L=p("%I %p"),z=p("%a %d"),$=p("%b %d"),K=p("%B"),ee=p("%Y");function ue(Z){return(m(Z)<Z?N:f(Z)<Z?j:l(Z)<Z?M:a(Z)<Z?L:r(Z)<Z?i(Z)<Z?z:$:n(Z)<Z?K:ee)(Z)}return b.invert=function(Z){return new Date(_(Z))},b.domain=function(Z){return arguments.length?T(Array.from(Z,Ime)):T().map(Tme)},b.ticks=function(Z){var V=T();return t(V[0],V[V.length-1],Z??10)},b.tickFormat=function(Z,V){return V==null?ue:p(V)},b.nice=function(Z){var V=T();return(!Z||typeof Z.range!="function")&&(Z=e(V[0],V[V.length-1],Z??10)),Z?T(mV(V,Z)):b},b.copy=function(){return O0(b,iC(t,e,n,r,i,a,l,f,m,p))},b}function Cme(){return Po.apply(iC(Ehe,Ahe,Iu,nC,Eb,N0,eC,ZI,Gf,IV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ome(){return Po.apply(iC(whe,_he,Cu,rC,Ab,_b,tC,JI,Gf,CV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Sb(){var t=0,e=1,n,r,i,a,l=fs,f=!1,m;function p(_){return _==null||isNaN(_=+_)?m:l(i===0?.5:(_=(a(_)-n)*i,f?Math.max(0,Math.min(1,_)):_))}p.domain=function(_){return arguments.length?([t,e]=_,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),p):[t,e]},p.clamp=function(_){return arguments.length?(f=!!_,p):f},p.interpolator=function(_){return arguments.length?(l=_,p):l};function b(_){return function(T){var N,j;return arguments.length?([N,j]=T,l=_(N,j),p):[l(0),l(1)]}}return p.range=b(km),p.rangeRound=b(qI),p.unknown=function(_){return arguments.length?(m=_,p):m},function(_){return a=_,n=_(t),r=_(e),i=n===r?0:1/(r-n),p}}function df(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function OV(){var t=ff(Sb()(fs));return t.copy=function(){return df(t,OV())},Vu.apply(t,arguments)}function NV(){var t=WI(Sb()).domain([1,10]);return t.copy=function(){return df(t,NV()).base(t.base())},Vu.apply(t,arguments)}function PV(){var t=$I(Sb());return t.copy=function(){return df(t,PV()).constant(t.constant())},Vu.apply(t,arguments)}function aC(){var t=YI(Sb());return t.copy=function(){return df(t,aC()).exponent(t.exponent())},Vu.apply(t,arguments)}function Nme(){return aC.apply(null,arguments).exponent(.5)}function RV(){var t=[],e=fs;function n(r){if(r!=null&&!isNaN(r=+r))return e((I0(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Fc),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>gde(t,a/r))},n.copy=function(){return RV(e).domain(t)},Vu.apply(n,arguments)}function Tb(){var t=0,e=.5,n=1,r=1,i,a,l,f,m,p=fs,b,_=!1,T;function N(M){return isNaN(M=+M)?T:(M=.5+((M=+b(M))-a)*(r*M<r*a?f:m),p(_?Math.max(0,Math.min(1,M)):M))}N.domain=function(M){return arguments.length?([t,e,n]=M,i=b(t=+t),a=b(e=+e),l=b(n=+n),f=i===a?0:.5/(a-i),m=a===l?0:.5/(l-a),r=a<i?-1:1,N):[t,e,n]},N.clamp=function(M){return arguments.length?(_=!!M,N):_},N.interpolator=function(M){return arguments.length?(p=M,N):p};function j(M){return function(L){var z,$,K;return arguments.length?([z,$,K]=L,p=Ude(M,[z,$,K]),N):[p(0),p(.5),p(1)]}}return N.range=j(km),N.rangeRound=j(qI),N.unknown=function(M){return arguments.length?(T=M,N):T},function(M){return b=M,i=M(t),a=M(e),l=M(n),f=i===a?0:.5/(a-i),m=a===l?0:.5/(l-a),r=a<i?-1:1,N}}function DV(){var t=ff(Tb()(fs));return t.copy=function(){return df(t,DV())},Vu.apply(t,arguments)}function kV(){var t=WI(Tb()).domain([.1,1,10]);return t.copy=function(){return df(t,kV()).base(t.base())},Vu.apply(t,arguments)}function MV(){var t=$I(Tb());return t.copy=function(){return df(t,MV()).constant(t.constant())},Vu.apply(t,arguments)}function sC(){var t=YI(Tb());return t.copy=function(){return df(t,sC()).exponent(t.exponent())},Vu.apply(t,arguments)}function Pme(){return sC.apply(null,arguments).exponent(.5)}const Xg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:VI,scaleDiverging:DV,scaleDivergingLog:kV,scaleDivergingPow:sC,scaleDivergingSqrt:Pme,scaleDivergingSymlog:MV,scaleIdentity:hV,scaleImplicit:oS,scaleLinear:dV,scaleLog:gV,scaleOrdinal:FI,scalePoint:vde,scalePow:XI,scaleQuantile:vV,scaleQuantize:xV,scaleRadial:yV,scaleSequential:OV,scaleSequentialLog:NV,scaleSequentialPow:aC,scaleSequentialQuantile:RV,scaleSequentialSqrt:Nme,scaleSequentialSymlog:PV,scaleSqrt:fhe,scaleSymlog:pV,scaleThreshold:bV,scaleTime:Cme,scaleUtc:Ome,tickFormat:fV},Symbol.toStringTag,{value:"Module"}));var zu=t=>t.chartData,Ib=Oe([zu],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),oC=(t,e,n,r)=>r?Ib(t):zu(t),Rme=(t,e,n)=>n?Ib(t):zu(t);function Ou(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(hn(e)&&hn(n))return!0}return!1}function v8(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function jV(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(hn(n))i=n;else if(typeof n=="function")return;if(hn(r))a=r;else if(typeof r=="function")return;var l=[i,a];if(Ou(l))return l}}function Dme(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Ou(r))return v8(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,l,f;if(i==="auto")e!=null&&(l=Math.min(...e));else if(St(i))l=i;else if(typeof i=="function")try{e!=null&&(l=i(e?.[0]))}catch{}else if(typeof i=="string"&&Nk.test(i)){var m=Nk.exec(i);if(m==null||m[1]==null||e==null)l=void 0;else{var p=+m[1];l=e[0]-p}}else l=e?.[0];if(a==="auto")e!=null&&(f=Math.max(...e));else if(St(a))f=a;else if(typeof a=="function")try{e!=null&&(f=a(e?.[1]))}catch{}else if(typeof a=="string"&&Pk.test(a)){var b=Pk.exec(a);if(b==null||b[1]==null||e==null)f=void 0;else{var _=+b[1];f=e[1]+_}}else f=e?.[1];var T=[l,f];if(Ou(T))return e==null?T:v8(T,e,n)}}}var Mm=1e9,kme={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},uC,ti=!0,Oo="[DecimalError] ",Qf=Oo+"Invalid argument: ",lC=Oo+"Exponent out of range: ",jm=Math.floor,Mf=Math.pow,Mme=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,eo,ha=1e7,zr=7,LV=9007199254740991,rx=jm(LV/zr),It={};It.absoluteValue=It.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};It.comparedTo=It.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};It.decimalPlaces=It.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*zr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};It.dividedBy=It.div=function(t){return pu(this,new this.constructor(t))};It.dividedToIntegerBy=It.idiv=function(t){var e=this,n=e.constructor;return Or(pu(e,new n(t),0,1),n.precision)};It.equals=It.eq=function(t){return!this.cmp(t)};It.exponent=function(){return Ui(this)};It.greaterThan=It.gt=function(t){return this.cmp(t)>0};It.greaterThanOrEqualTo=It.gte=function(t){return this.cmp(t)>=0};It.isInteger=It.isint=function(){return this.e>this.d.length-2};It.isNegative=It.isneg=function(){return this.s<0};It.isPositive=It.ispos=function(){return this.s>0};It.isZero=function(){return this.s===0};It.lessThan=It.lt=function(t){return this.cmp(t)<0};It.lessThanOrEqualTo=It.lte=function(t){return this.cmp(t)<1};It.logarithm=It.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(eo))throw Error(Oo+"NaN");if(n.s<1)throw Error(Oo+(n.s?"NaN":"-Infinity"));return n.eq(eo)?new r(0):(ti=!1,e=pu(zp(n,a),zp(t,a),a),ti=!0,Or(e,i))};It.minus=It.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?VV(e,t):BV(e,(t.s=-t.s,t))};It.modulo=It.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Oo+"NaN");return n.s?(ti=!1,e=pu(n,t,0,1).times(t),ti=!0,n.minus(e)):Or(new r(n),i)};It.naturalExponential=It.exp=function(){return FV(this)};It.naturalLogarithm=It.ln=function(){return zp(this)};It.negated=It.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};It.plus=It.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?BV(e,t):VV(e,(t.s=-t.s,t))};It.precision=It.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Qf+t);if(e=Ui(i)+1,r=i.d.length-1,n=r*zr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};It.squareRoot=It.sqrt=function(){var t,e,n,r,i,a,l,f=this,m=f.constructor;if(f.s<1){if(!f.s)return new m(0);throw Error(Oo+"NaN")}for(t=Ui(f),ti=!1,i=Math.sqrt(+f),i==0||i==1/0?(e=_l(f.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=jm((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new m(e)):r=new m(i.toString()),n=m.precision,i=l=n+3;;)if(a=r,r=a.plus(pu(f,a,l+2)).times(.5),_l(a.d).slice(0,l)===(e=_l(r.d)).slice(0,l)){if(e=e.slice(l-3,l+1),i==l&&e=="4999"){if(Or(a,n+1,0),a.times(a).eq(f)){r=a;break}}else if(e!="9999")break;l+=4}return ti=!0,Or(r,n)};It.times=It.mul=function(t){var e,n,r,i,a,l,f,m,p,b=this,_=b.constructor,T=b.d,N=(t=new _(t)).d;if(!b.s||!t.s)return new _(0);for(t.s*=b.s,n=b.e+t.e,m=T.length,p=N.length,m<p&&(a=T,T=N,N=a,l=m,m=p,p=l),a=[],l=m+p,r=l;r--;)a.push(0);for(r=p;--r>=0;){for(e=0,i=m+r;i>r;)f=a[i]+N[r]*T[i-r-1]+e,a[i--]=f%ha|0,e=f/ha|0;a[i]=(a[i]+e)%ha|0}for(;!a[--l];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,ti?Or(t,_.precision):t};It.toDecimalPlaces=It.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Pl(t,0,Mm),e===void 0?e=r.rounding:Pl(e,0,8),Or(n,t+Ui(n)+1,e))};It.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=xd(r,!0):(Pl(t,0,Mm),e===void 0?e=i.rounding:Pl(e,0,8),r=Or(new i(r),t+1,e),n=xd(r,!0,t+1)),n};It.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?xd(i):(Pl(t,0,Mm),e===void 0?e=a.rounding:Pl(e,0,8),r=Or(new a(i),t+Ui(i)+1,e),n=xd(r.abs(),!1,t+Ui(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};It.toInteger=It.toint=function(){var t=this,e=t.constructor;return Or(new e(t),Ui(t)+1,e.rounding)};It.toNumber=function(){return+this};It.toPower=It.pow=function(t){var e,n,r,i,a,l,f=this,m=f.constructor,p=12,b=+(t=new m(t));if(!t.s)return new m(eo);if(f=new m(f),!f.s){if(t.s<1)throw Error(Oo+"Infinity");return f}if(f.eq(eo))return f;if(r=m.precision,t.eq(eo))return Or(f,r);if(e=t.e,n=t.d.length-1,l=e>=n,a=f.s,l){if((n=b<0?-b:b)<=LV){for(i=new m(eo),e=Math.ceil(r/zr+4),ti=!1;n%2&&(i=i.times(f),b8(i.d,e)),n=jm(n/2),n!==0;)f=f.times(f),b8(f.d,e);return ti=!0,t.s<0?new m(eo).div(i):Or(i,r)}}else if(a<0)throw Error(Oo+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,f.s=1,ti=!1,i=t.times(zp(f,r+p)),ti=!0,i=FV(i),i.s=a,i};It.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=Ui(i),r=xd(i,n<=a.toExpNeg||n>=a.toExpPos)):(Pl(t,1,Mm),e===void 0?e=a.rounding:Pl(e,0,8),i=Or(new a(i),t,e),n=Ui(i),r=xd(i,t<=n||n<=a.toExpNeg,t)),r};It.toSignificantDigits=It.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Pl(t,1,Mm),e===void 0?e=r.rounding:Pl(e,0,8)),Or(new r(n),t,e)};It.toString=It.valueOf=It.val=It.toJSON=It[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ui(t),n=t.constructor;return xd(t,e<=n.toExpNeg||e>=n.toExpPos)};function BV(t,e){var n,r,i,a,l,f,m,p,b=t.constructor,_=b.precision;if(!t.s||!e.s)return e.s||(e=new b(t)),ti?Or(e,_):e;if(m=t.d,p=e.d,l=t.e,i=e.e,m=m.slice(),a=l-i,a){for(a<0?(r=m,a=-a,f=p.length):(r=p,i=l,f=m.length),l=Math.ceil(_/zr),f=l>f?l+1:f+1,a>f&&(a=f,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(f=m.length,a=p.length,f-a<0&&(a=f,r=p,p=m,m=r),n=0;a;)n=(m[--a]=m[a]+p[a]+n)/ha|0,m[a]%=ha;for(n&&(m.unshift(n),++i),f=m.length;m[--f]==0;)m.pop();return e.d=m,e.e=i,ti?Or(e,_):e}function Pl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Qf+t)}function _l(t){var e,n,r,i=t.length-1,a="",l=t[0];if(i>0){for(a+=l,e=1;e<i;e++)r=t[e]+"",n=zr-r.length,n&&(a+=vc(n)),a+=r;l=t[e],r=l+"",n=zr-r.length,n&&(a+=vc(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}var pu=(function(){function t(r,i){var a,l=0,f=r.length;for(r=r.slice();f--;)a=r[f]*i+l,r[f]=a%ha|0,l=a/ha|0;return l&&r.unshift(l),r}function e(r,i,a,l){var f,m;if(a!=l)m=a>l?1:-1;else for(f=m=0;f<a;f++)if(r[f]!=i[f]){m=r[f]>i[f]?1:-1;break}return m}function n(r,i,a){for(var l=0;a--;)r[a]-=l,l=r[a]<i[a]?1:0,r[a]=l*ha+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,l){var f,m,p,b,_,T,N,j,M,L,z,$,K,ee,ue,Z,V,W,U=r.constructor,ae=r.s==i.s?1:-1,ie=r.d,X=i.d;if(!r.s)return new U(r);if(!i.s)throw Error(Oo+"Division by zero");for(m=r.e-i.e,V=X.length,ue=ie.length,N=new U(ae),j=N.d=[],p=0;X[p]==(ie[p]||0);)++p;if(X[p]>(ie[p]||0)&&--m,a==null?$=a=U.precision:l?$=a+(Ui(r)-Ui(i))+1:$=a,$<0)return new U(0);if($=$/zr+2|0,p=0,V==1)for(b=0,X=X[0],$++;(p<ue||b)&&$--;p++)K=b*ha+(ie[p]||0),j[p]=K/X|0,b=K%X|0;else{for(b=ha/(X[0]+1)|0,b>1&&(X=t(X,b),ie=t(ie,b),V=X.length,ue=ie.length),ee=V,M=ie.slice(0,V),L=M.length;L<V;)M[L++]=0;W=X.slice(),W.unshift(0),Z=X[0],X[1]>=ha/2&&++Z;do b=0,f=e(X,M,V,L),f<0?(z=M[0],V!=L&&(z=z*ha+(M[1]||0)),b=z/Z|0,b>1?(b>=ha&&(b=ha-1),_=t(X,b),T=_.length,L=M.length,f=e(_,M,T,L),f==1&&(b--,n(_,V<T?W:X,T))):(b==0&&(f=b=1),_=X.slice()),T=_.length,T<L&&_.unshift(0),n(M,_,L),f==-1&&(L=M.length,f=e(X,M,V,L),f<1&&(b++,n(M,V<L?W:X,L))),L=M.length):f===0&&(b++,M=[0]),j[p++]=b,f&&M[0]?M[L++]=ie[ee]||0:(M=[ie[ee]],L=1);while((ee++<ue||M[0]!==void 0)&&$--)}return j[0]||j.shift(),N.e=m,Or(N,l?a+Ui(N)+1:a)}})();function FV(t,e){var n,r,i,a,l,f,m=0,p=0,b=t.constructor,_=b.precision;if(Ui(t)>16)throw Error(lC+Ui(t));if(!t.s)return new b(eo);for(ti=!1,f=_,l=new b(.03125);t.abs().gte(.1);)t=t.times(l),p+=5;for(r=Math.log(Mf(2,p))/Math.LN10*2+5|0,f+=r,n=i=a=new b(eo),b.precision=f;;){if(i=Or(i.times(t),f),n=n.times(++m),l=a.plus(pu(i,n,f)),_l(l.d).slice(0,f)===_l(a.d).slice(0,f)){for(;p--;)a=Or(a.times(a),f);return b.precision=_,e==null?(ti=!0,Or(a,_)):a}a=l}}function Ui(t){for(var e=t.e*zr,n=t.d[0];n>=10;n/=10)e++;return e}function pE(t,e,n){if(e>t.LN10.sd())throw ti=!0,n&&(t.precision=n),Error(Oo+"LN10 precision limit exceeded");return Or(new t(t.LN10),e)}function vc(t){for(var e="";t--;)e+="0";return e}function zp(t,e){var n,r,i,a,l,f,m,p,b,_=1,T=10,N=t,j=N.d,M=N.constructor,L=M.precision;if(N.s<1)throw Error(Oo+(N.s?"NaN":"-Infinity"));if(N.eq(eo))return new M(0);if(e==null?(ti=!1,p=L):p=e,N.eq(10))return e==null&&(ti=!0),pE(M,p);if(p+=T,M.precision=p,n=_l(j),r=n.charAt(0),a=Ui(N),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)N=N.times(t),n=_l(N.d),r=n.charAt(0),_++;a=Ui(N),r>1?(N=new M("0."+n),a++):N=new M(r+"."+n.slice(1))}else return m=pE(M,p+2,L).times(a+""),N=zp(new M(r+"."+n.slice(1)),p-T).plus(m),M.precision=L,e==null?(ti=!0,Or(N,L)):N;for(f=l=N=pu(N.minus(eo),N.plus(eo),p),b=Or(N.times(N),p),i=3;;){if(l=Or(l.times(b),p),m=f.plus(pu(l,new M(i),p)),_l(m.d).slice(0,p)===_l(f.d).slice(0,p))return f=f.times(2),a!==0&&(f=f.plus(pE(M,p+2,L).times(a+""))),f=pu(f,new M(_),p),M.precision=L,e==null?(ti=!0,Or(f,L)):f;f=m,i+=2}}function x8(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=jm(n/zr),t.d=[],r=(n+1)%zr,n<0&&(r+=zr),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=zr;r<i;)t.d.push(+e.slice(r,r+=zr));e=e.slice(r),r=zr-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),ti&&(t.e>rx||t.e<-rx))throw Error(lC+n)}else t.s=0,t.e=0,t.d=[0];return t}function Or(t,e,n){var r,i,a,l,f,m,p,b,_=t.d;for(l=1,a=_[0];a>=10;a/=10)l++;if(r=e-l,r<0)r+=zr,i=e,p=_[b=0];else{if(b=Math.ceil((r+1)/zr),a=_.length,b>=a)return t;for(p=a=_[b],l=1;a>=10;a/=10)l++;r%=zr,i=r-zr+l}if(n!==void 0&&(a=Mf(10,l-i-1),f=p/a%10|0,m=e<0||_[b+1]!==void 0||p%a,m=n<4?(f||m)&&(n==0||n==(t.s<0?3:2)):f>5||f==5&&(n==4||m||n==6&&(r>0?i>0?p/Mf(10,l-i):0:_[b-1])%10&1||n==(t.s<0?8:7))),e<1||!_[0])return m?(a=Ui(t),_.length=1,e=e-a-1,_[0]=Mf(10,(zr-e%zr)%zr),t.e=jm(-e/zr)||0):(_.length=1,_[0]=t.e=t.s=0),t;if(r==0?(_.length=b,a=1,b--):(_.length=b+1,a=Mf(10,zr-r),_[b]=i>0?(p/Mf(10,l-i)%Mf(10,i)|0)*a:0),m)for(;;)if(b==0){(_[0]+=a)==ha&&(_[0]=1,++t.e);break}else{if(_[b]+=a,_[b]!=ha)break;_[b--]=0,a=1}for(r=_.length;_[--r]===0;)_.pop();if(ti&&(t.e>rx||t.e<-rx))throw Error(lC+Ui(t));return t}function VV(t,e){var n,r,i,a,l,f,m,p,b,_,T=t.constructor,N=T.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new T(t),ti?Or(e,N):e;if(m=t.d,_=e.d,r=e.e,p=t.e,m=m.slice(),l=p-r,l){for(b=l<0,b?(n=m,l=-l,f=_.length):(n=_,r=p,f=m.length),i=Math.max(Math.ceil(N/zr),f)+2,l>i&&(l=i,n.length=1),n.reverse(),i=l;i--;)n.push(0);n.reverse()}else{for(i=m.length,f=_.length,b=i<f,b&&(f=i),i=0;i<f;i++)if(m[i]!=_[i]){b=m[i]<_[i];break}l=0}for(b&&(n=m,m=_,_=n,e.s=-e.s),f=m.length,i=_.length-f;i>0;--i)m[f++]=0;for(i=_.length;i>l;){if(m[--i]<_[i]){for(a=i;a&&m[--a]===0;)m[a]=ha-1;--m[a],m[i]+=ha}m[i]-=_[i]}for(;m[--f]===0;)m.pop();for(;m[0]===0;m.shift())--r;return m[0]?(e.d=m,e.e=r,ti?Or(e,N):e):new T(0)}function xd(t,e,n){var r,i=Ui(t),a=_l(t.d),l=a.length;return e?(n&&(r=n-l)>0?a=a.charAt(0)+"."+a.slice(1)+vc(r):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+vc(-i-1)+a,n&&(r=n-l)>0&&(a+=vc(r))):i>=l?(a+=vc(i+1-l),n&&(r=n-i-1)>0&&(a=a+"."+vc(r))):((r=i+1)<l&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-l)>0&&(i+1===l&&(a+="."),a+=vc(r))),t.s<0?"-"+a:a}function b8(t,e){if(t.length>e)return t.length=e,!0}function zV(t){var e,n,r;function i(a){var l=this;if(!(l instanceof i))return new i(a);if(l.constructor=i,a instanceof i){l.s=a.s,l.e=a.e,l.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Qf+a);if(a>0)l.s=1;else if(a<0)a=-a,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(a===~~a&&a<1e7){l.e=0,l.d=[a];return}return x8(l,a.toString())}else if(typeof a!="string")throw Error(Qf+a);if(a.charCodeAt(0)===45?(a=a.slice(1),l.s=-1):l.s=1,Mme.test(a))x8(l,a);else throw Error(Qf+a)}if(i.prototype=It,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=zV,i.config=i.set=jme,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function jme(t){if(!t||typeof t!="object")throw Error(Oo+"Object expected");var e,n,r,i=["precision",1,Mm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(jm(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Qf+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Qf+n+": "+r);return this}var uC=zV(kme);eo=new uC(1);const ur=uC;function UV(t){var e;return t===0?e=1:e=Math.floor(new ur(t).abs().log(10).toNumber())+1,e}function qV(t,e,n){for(var r=new ur(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var GV=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},HV=(t,e,n)=>{if(t.lte(0))return new ur(0);var r=UV(t.toNumber()),i=new ur(10).pow(r),a=t.div(i),l=r!==1?.05:.1,f=new ur(Math.ceil(a.div(l).toNumber())).add(n).mul(l),m=f.mul(i);return e?new ur(m.toNumber()):new ur(Math.ceil(m.toNumber()))},Lme=(t,e,n)=>{var r=new ur(1),i=new ur(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new ur(10).pow(UV(t)-1),i=new ur(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new ur(Math.floor(t)))}else t===0?i=new ur(Math.floor((e-1)/2)):n||(i=new ur(Math.floor(t)));for(var l=Math.floor((e-1)/2),f=[],m=0;m<e;m++)f.push(i.add(new ur(m-l).mul(r)).toNumber());return f},KV=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new ur(0),tickMin:new ur(0),tickMax:new ur(0)};var l=HV(new ur(n).sub(e).div(r-1),i,a),f;e<=0&&n>=0?f=new ur(0):(f=new ur(e).add(n).div(2),f=f.sub(new ur(f).mod(l)));var m=Math.ceil(f.sub(e).div(l).toNumber()),p=Math.ceil(new ur(n).sub(f).div(l).toNumber()),b=m+p+1;return b>r?KV(e,n,r,i,a+1):(b<r&&(p=n>0?p+(r-b):p,m=n>0?m:m+(r-b)),{step:l,tickMin:f.sub(new ur(m).mul(l)),tickMax:f.add(new ur(p).mul(l))})},Bme=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(i,2),[f,m]=GV([n,r]);if(f===-1/0||m===1/0){var p=m===1/0?[f,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),m];return n>r?p.reverse():p}if(f===m)return Lme(f,i,a);var{step:b,tickMin:_,tickMax:T}=KV(f,m,l,a,0),N=qV(_,T.add(new ur(.1).mul(b)),b);return n>r?N.reverse():N},Fme=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,f]=GV([r,i]);if(l===-1/0||f===1/0)return[r,i];if(l===f)return[l];var m=Math.max(n,2),p=HV(new ur(f).sub(l).div(m-1),a,0),b=[...qV(new ur(l),new ur(f),p),f];return a===!1&&(b=b.map(_=>Math.round(_))),r>i?b.reverse():b},WV=t=>t.rootProps.maxBarSize,Vme=t=>t.rootProps.barGap,$V=t=>t.rootProps.barCategoryGap,zme=t=>t.rootProps.barSize,P0=t=>t.rootProps.stackOffset,YV=t=>t.rootProps.reverseStackOrder,cC=t=>t.options.chartName,fC=t=>t.rootProps.syncId,XV=t=>t.rootProps.syncMethod,dC=t=>t.options.eventEmitter,Ii={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Cf={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},dl={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},Cb=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function Ob(t,e,n){if(n!=="auto")return n;if(t!=null)return Lu(t,e)?"category":"number"}function w8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ix(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w8(Object(n),!0).forEach(function(r){Ume(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ume(t,e,n){return(e=qme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qme(t){var e=Gme(t,"string");return typeof e=="symbol"?e:e+""}function Gme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _8={allowDataOverflow:Cf.allowDataOverflow,allowDecimals:Cf.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Cf.angleAxisId,includeHidden:!1,name:void 0,reversed:Cf.reversed,scale:Cf.scale,tick:Cf.tick,tickCount:void 0,ticks:void 0,type:Cf.type,unit:void 0},E8={allowDataOverflow:dl.allowDataOverflow,allowDecimals:dl.allowDecimals,allowDuplicatedCategory:dl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:dl.radiusAxisId,includeHidden:dl.includeHidden,name:void 0,reversed:dl.reversed,scale:dl.scale,tick:dl.tick,tickCount:dl.tickCount,ticks:void 0,type:dl.type,unit:void 0},Hme=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},hC=Oe([Hme,MF],(t,e)=>{var n;if(t!=null)return t;var r=(n=Ob(e,"angleAxis",_8.type))!==null&&n!==void 0?n:"category";return ix(ix({},_8),{},{type:r})}),Kme=(t,e)=>t.polarAxis.radiusAxis[e],mC=Oe([Kme,MF],(t,e)=>{var n;if(t!=null)return t;var r=(n=Ob(e,"radiusAxis",E8.type))!==null&&n!==void 0?n:"category";return ix(ix({},E8),{},{type:r})}),Nb=t=>t.polarOptions,gC=Oe([Bu,Fu,Ji],ZF),QV=Oe([Nb,gC],(t,e)=>{if(t!=null)return is(t.innerRadius,e,0)}),ZV=Oe([Nb,gC],(t,e)=>{if(t!=null)return is(t.outerRadius,e,e*.8)}),Wme=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},JV=Oe([Nb],Wme);Oe([hC,JV],Cb);var ez=Oe([gC,QV,ZV],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Oe([mC,ez],Cb);var tz=Oe([Kn,Nb,QV,ZV,Bu,Fu],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:l,cy:f,startAngle:m,endAngle:p}=e;return{cx:is(l,i,i/2),cy:is(f,a,a/2),innerRadius:n,outerRadius:r,startAngle:m,endAngle:p,clockWise:!1}}}),ui=(t,e)=>e,R0=(t,e,n)=>n;function pC(t){return t?.id}function nz(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,l=new Map;return t.forEach(f=>{var m,p=(m=f.data)!==null&&m!==void 0?m:r;if(!(p==null||p.length===0)){var b=pC(f);p.forEach((_,T)=>{var N=a==null||i?T:String(br(_,a,null)),j=br(_,f.dataKey,0),M;l.has(N)?M=l.get(N):M={},Object.assign(M,{[b]:j}),l.set(N,M)})}}),Array.from(l.values())}function Pb(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var Rb=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function Db(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function $me(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var xa=t=>{var e=Kn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Lm=t=>t.tooltip.settings.axisId;function Yme(t){if(t in Xg)return Xg[t]();var e="scale".concat(v0(t));if(e in Xg)return Xg[e]()}function A8(t){var e=t.ticks,n=t.bandwidth,r=t.range(),i=[Math.min(...r),Math.max(...r)];return{domain:()=>t.domain(),range:(function(a){function l(){return a.apply(this,arguments)}return l.toString=function(){return a.toString()},l})(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(a){var l=i[0],f=i[1];return l<=f?a>=l&&a<=f:a>=f&&a<=l},bandwidth:n?()=>n.call(t):void 0,ticks:e?a=>e.call(t,a):void 0,map:(a,l)=>{var f=t(a);if(f!=null){if(t.bandwidth&&l!==null&&l!==void 0&&l.position){var m=t.bandwidth();switch(l.position){case"middle":f+=m/2;break;case"end":f+=m;break}}return f}}}}function S8(t,e,n){if(typeof t=="function")return A8(t.copy().domain(e).range(n));if(t!=null){var r=Yme(t);if(r!=null)return r.domain(e).range(n),A8(r)}}var rz=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!Ou(e)){for(var n,r,i=0;i<e.length;i++){var a=e[i];hn(a)&&((n===void 0||a<n)&&(n=a),(r===void 0||a>r)&&(r=a))}return n!==void 0&&r!==void 0?[n,r]:void 0}return e}default:return e}};function T8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ax(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T8(Object(n),!0).forEach(function(r){Xme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xme(t,e,n){return(e=Qme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qme(t){var e=Zme(t,"string");return typeof e=="symbol"?e:e+""}function Zme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fS=[0,"auto"],ca={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},iz=(t,e)=>t.cartesianAxis.xAxis[e],Ml=(t,e)=>{var n=iz(t,e);return n??ca},fa={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:fS,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:w0},az=(t,e)=>t.cartesianAxis.yAxis[e],jl=(t,e)=>{var n=az(t,e);return n??fa},Jme={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},yC=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??Jme},xi=(t,e,n)=>{switch(e){case"xAxis":return Ml(t,n);case"yAxis":return jl(t,n);case"zAxis":return yC(t,n);case"angleAxis":return hC(t,n);case"radiusAxis":return mC(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},ege=(t,e,n)=>{switch(e){case"xAxis":return Ml(t,n);case"yAxis":return jl(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Bm=(t,e,n)=>{switch(e){case"xAxis":return Ml(t,n);case"yAxis":return jl(t,n);case"angleAxis":return hC(t,n);case"radiusAxis":return mC(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},sz=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function vC(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var kb=t=>t.graphicalItems.cartesianItems,tge=Oe([ui,R0],vC),xC=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),D0=Oe([kb,xi,tge],xC,{memoizeOptions:{resultEqualityCheck:Db}}),oz=Oe([D0],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(Pb)),lz=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),nge=Oe([D0],lz),bC=t=>t.map(e=>e.data).filter(Boolean).flat(1),rge=Oe([D0],bC,{memoizeOptions:{resultEqualityCheck:Db}}),wC=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},_C=Oe([rge,oC],wC),EC=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:br(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:br(i,r)}))):t.map(r=>({value:r})),Mb=Oe([_C,xi,D0],EC);function uz(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Ly(t){if(Io(t)||t instanceof Date){var e=Number(t);if(hn(e))return e}}function I8(t){if(Array.isArray(t)){var e=[Ly(t[0]),Ly(t[1])];return Ou(e)?e:void 0}var n=Ly(t);if(n!=null)return[n,n]}function Nu(t){return t.map(Ly).filter(Ms)}function ige(t,e,n){return!n||typeof e!="number"||Ol(e)?[]:n.length?Nu(n.flatMap(r=>{var i=br(t,r.dataKey),a,l;if(Array.isArray(i)?[a,l]=i:a=l=i,!(!hn(a)||!hn(l)))return[e-a,e+l]})):[]}var ta=t=>{var e=xa(t),n=Lm(t);return Bm(t,e,n)},k0=Oe([ta],t=>t?.dataKey),age=Oe([oz,oC,ta],nz),cz=(t,e,n,r)=>{var i={},a=e.reduce((l,f)=>{if(f.stackId==null)return l;var m=l[f.stackId];return m==null&&(m=[]),m.push(f),l[f.stackId]=m,l},i);return Object.fromEntries(Object.entries(a).map(l=>{var[f,m]=l,p=r?[...m].reverse():m,b=p.map(pC);return[f,{stackedData:Vue(t,b,n),graphicalItems:p}]}))},dS=Oe([age,oz,P0,YV],cz),fz=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var l=Hue(t,i,a);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},sge=Oe([xi],t=>t.allowDataOverflow),AC=t=>{var e;if(t==null||!("domain"in t))return fS;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Nu(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:fS},SC=Oe([xi],AC),TC=Oe([SC,sge],jV),oge=Oe([dS,zu,ui,TC],fz,{memoizeOptions:{resultEqualityCheck:Rb}}),jb=t=>t.errorBars,lge=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>uz(n,r)),sx=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),l=Math.min(...a),f=Math.max(...a);return[l,f]}},IC=(t,e,n,r,i)=>{var a,l;if(n.length>0&&t.forEach(f=>{n.forEach(m=>{var p,b,_=(p=r[m.id])===null||p===void 0?void 0:p.filter(z=>uz(i,z)),T=br(f,(b=e.dataKey)!==null&&b!==void 0?b:m.dataKey),N=ige(f,T,_);if(N.length>=2){var j=Math.min(...N),M=Math.max(...N);(a==null||j<a)&&(a=j),(l==null||M>l)&&(l=M)}var L=I8(T);L!=null&&(a=a==null?L[0]:Math.min(a,L[0]),l=l==null?L[1]:Math.max(l,L[1]))})}),e?.dataKey!=null&&t.forEach(f=>{var m=I8(br(f,e.dataKey));m!=null&&(a=a==null?m[0]:Math.min(a,m[0]),l=l==null?m[1]:Math.max(l,m[1]))}),hn(a)&&hn(l))return[a,l]},uge=Oe([_C,xi,nge,jb,ui],IC,{memoizeOptions:{resultEqualityCheck:Rb}});function cge(t){var{value:e}=t;if(Io(e)||e instanceof Date)return e}var fge=(t,e,n)=>{var r=t.map(cge).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&NB(r))?nV(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},dz=t=>t.referenceElements.dots,Fm=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),dge=Oe([dz,ui,R0],Fm),hz=t=>t.referenceElements.areas,hge=Oe([hz,ui,R0],Fm),mz=t=>t.referenceElements.lines,mge=Oe([mz,ui,R0],Fm),gz=(t,e)=>{if(t!=null){var n=Nu(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},gge=Oe(dge,ui,gz),pz=(t,e)=>{if(t!=null){var n=Nu(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},pge=Oe([hge,ui],pz);function yge(t){var e;if(t.x!=null)return Nu([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Nu(n)}function vge(t){var e;if(t.y!=null)return Nu([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Nu(n)}var yz=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?yge(r):vge(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},xge=Oe([mge,ui],yz),bge=Oe(gge,xge,pge,(t,e,n)=>sx(t,n,e)),CC=(t,e,n,r,i,a,l,f)=>{if(n!=null)return n;var m=l==="vertical"&&f==="xAxis"||l==="horizontal"&&f==="yAxis",p=m?sx(r,a,i):sx(a,i);return Dme(e,p,t.allowDataOverflow)},wge=Oe([xi,SC,TC,oge,uge,bge,Kn,ui],CC,{memoizeOptions:{resultEqualityCheck:Rb}}),_ge=[0,1],OC=(t,e,n,r,i,a,l)=>{if(!((t==null||n==null||n.length===0)&&l===void 0)){var{dataKey:f,type:m}=t,p=Lu(e,a);if(p&&f==null){var b;return nV(0,(b=n?.length)!==null&&b!==void 0?b:0)}return m==="category"?fge(r,t,p):i==="expand"?_ge:l}},NC=Oe([xi,Kn,_C,Mb,P0,ui,wge],OC);function Ege(t){return t in Xg}var vz=(t,e,n)=>{if(t!=null){var{scale:r,type:i}=t;if(r==="auto")return i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!e)?"point":i==="category"?"band":"linear";if(typeof r=="string"){var a="scale".concat(v0(r));return Ege(a)?a:"point"}}},hf=Oe([xi,sz,cC],vz);function PC(t,e,n,r){if(!(n==null||r==null))return typeof t.scale=="function"?S8(t.scale,n,r):S8(e,n,r)}var RC=(t,e,n)=>{var r=AC(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Ou(t))return Bme(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Ou(t))return Fme(t,e.tickCount,e.allowDecimals)}},DC=Oe([NC,Bm,hf],RC),kC=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&Ou(e)&&Array.isArray(n)&&n.length>0){var i,a,l=e[0],f=(i=n[0])!==null&&i!==void 0?i:0,m=e[1],p=(a=n[n.length-1])!==null&&a!==void 0?a:0;return[Math.min(l,f),Math.max(m,p)]}return e},Age=Oe([xi,NC,DC,ui],kC),Sge=Oe(Mb,xi,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Nu(t.map(_=>_.value))).sort((_,T)=>_-T),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var l=a-i;if(l===0)return 1/0;for(var f=0;f<r.length-1;f++){var m=r[f],p=r[f+1];if(!(m==null||p==null)){var b=p-m;n=Math.min(n,b)}}return n/l}}),xz=Oe(Sge,Kn,$V,Ji,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!hn(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var l=is(n,t*a),f=t*a/2;return f-l-(f-l)/a*l}return 0}),Tge=(t,e,n)=>{var r=Ml(t,e);return r==null||typeof r.padding!="string"?0:xz(t,"xAxis",e,n,r.padding)},Ige=(t,e,n)=>{var r=jl(t,e);return r==null||typeof r.padding!="string"?0:xz(t,"yAxis",e,n,r.padding)},Cge=Oe(Ml,Tge,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),Oge=Oe(jl,Ige,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),Nge=Oe([Ji,Cge,pb,gb,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),Pge=Oe([Ji,Kn,Oge,pb,gb,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:l}=i;return a?[r.height-l.bottom,l.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),M0=(t,e,n,r)=>{var i;switch(e){case"xAxis":return Nge(t,n,r);case"yAxis":return Pge(t,n,r);case"zAxis":return(i=yC(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return JV(t);case"radiusAxis":return ez(t,n);default:return}},bz=Oe([xi,M0],Cb),Rge=Oe([hf,Age],rz),mm=Oe([xi,hf,Rge,bz],PC);Oe([D0,jb,ui],lge);function wz(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var Lb=(t,e)=>e,Bb=(t,e,n)=>n,Dge=Oe(hb,Lb,Bb,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(wz)),kge=Oe(mb,Lb,Bb,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(wz)),_z=(t,e)=>({width:t.width,height:e.height}),Mge=(t,e)=>{var n=typeof e.width=="number"?e.width:w0;return{width:n,height:t.height}},Ez=Oe(Ji,Ml,_z),jge=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},Lge=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},Bge=Oe(Fu,Ji,Dge,Lb,Bb,(t,e,n,r,i)=>{var a={},l;return n.forEach(f=>{var m=_z(e,f);l==null&&(l=jge(e,r,t));var p=r==="top"&&!i||r==="bottom"&&i;a[f.id]=l-Number(p)*m.height,l+=(p?-1:1)*m.height}),a}),Fge=Oe(Bu,Ji,kge,Lb,Bb,(t,e,n,r,i)=>{var a={},l;return n.forEach(f=>{var m=Mge(e,f);l==null&&(l=Lge(e,r,t));var p=r==="left"&&!i||r==="right"&&i;a[f.id]=l-Number(p)*m.width,l+=(p?-1:1)*m.width}),a}),Vge=(t,e)=>{var n=Ml(t,e);if(n!=null)return Bge(t,n.orientation,n.mirror)},zge=Oe([Ji,Ml,Vge,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),Uge=(t,e)=>{var n=jl(t,e);if(n!=null)return Fge(t,n.orientation,n.mirror)},qge=Oe([Ji,jl,Uge,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),Az=Oe(Ji,jl,(t,e)=>{var n=typeof e.width=="number"?e.width:w0;return{width:n,height:t.height}}),C8=(t,e,n)=>{switch(e){case"xAxis":return Ez(t,n).width;case"yAxis":return Az(t,n).height;default:return}},Sz=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:l}=n,f=Lu(t,r),m=e.map(p=>p.value);if(l&&f&&a==="category"&&i&&NB(m))return m}},MC=Oe([Kn,Mb,xi,ui],Sz),Tz=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,l=Lu(t,r);if(l&&(i==="number"||a!=="auto"))return e.map(f=>f.value)}},jC=Oe([Kn,Mb,Bm,ui],Tz),O8=Oe([Kn,ege,hf,mm,MC,jC,M0,DC,ui],(t,e,n,r,i,a,l,f,m)=>{if(e!=null){var p=Lu(t,m);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:m,categoricalDomain:a,duplicateDomain:i,isCategorical:p,niceTicks:f,range:l,realScaleType:n,scale:r}}}),Gge=(t,e,n,r,i,a,l,f,m)=>{if(!(e==null||r==null)){var p=Lu(t,m),{type:b,ticks:_,tickCount:T}=e,N=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,j=b==="category"&&r.bandwidth?r.bandwidth()/N:0;j=m==="angleAxis"&&a!=null&&a.length>=2?pa(a[0]-a[1])*2*j:j;var M=_||i;return M?M.map((L,z)=>{var $=l?l.indexOf(L):L,K=r.map($);return hn(K)?{index:z,coordinate:K+j,value:L,offset:j}:null}).filter(Ms):p&&f?f.map((L,z)=>{var $=r.map(L);return hn($)?{coordinate:$+j,value:L,index:z,offset:j}:null}).filter(Ms):r.ticks?r.ticks(T).map((L,z)=>{var $=r.map(L);return hn($)?{coordinate:$+j,value:L,index:z,offset:j}:null}).filter(Ms):r.domain().map((L,z)=>{var $=r.map(L);return hn($)?{coordinate:$+j,value:l?l[L]:L,index:z,offset:j}:null}).filter(Ms)}},Iz=Oe([Kn,Bm,hf,mm,DC,M0,MC,jC,ui],Gge),Hge=(t,e,n,r,i,a,l)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var f=Lu(t,l),{tickCount:m}=e,p=0;return p=l==="angleAxis"&&r?.length>=2?pa(r[0]-r[1])*2*p:p,f&&a?a.map((b,_)=>{var T=n.map(b);return hn(T)?{coordinate:T+p,value:b,index:_,offset:p}:null}).filter(Ms):n.ticks?n.ticks(m).map((b,_)=>{var T=n.map(b);return hn(T)?{coordinate:T+p,value:b,index:_,offset:p}:null}).filter(Ms):n.domain().map((b,_)=>{var T=n.map(b);return hn(T)?{coordinate:T+p,value:i?i[b]:b,index:_,offset:p}:null}).filter(Ms)}},Xc=Oe([Kn,Bm,mm,M0,MC,jC,ui],Hge),Qc=Oe(xi,mm,(t,e)=>{if(!(t==null||e==null))return ax(ax({},t),{},{scale:e})}),Kge=Oe([xi,hf,NC,bz],PC);Oe((t,e,n)=>yC(t,n),Kge,(t,e)=>{if(!(t==null||e==null))return ax(ax({},t),{},{scale:e})});var Wge=Oe([Kn,hb,mb],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Cz=t=>t.options.defaultTooltipEventType,Oz=t=>t.options.validateTooltipEventTypes;function Nz(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function LC(t,e){var n=Cz(t),r=Oz(t);return Nz(e,n,r)}function $ge(t){return Tt(e=>LC(e,t))}var Pz=(t,e)=>{var n,r=Number(e);if(!(Ol(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},Yge=t=>t.tooltip.settings,Ic={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Xge={itemInteraction:{click:Ic,hover:Ic},axisInteraction:{click:Ic,hover:Ic},keyboardInteraction:Ic,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Rz=Vs({name:"tooltip",initialState:Xge,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Qr()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Wo(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Qr()},removeTooltipEntrySettings:{reducer(t,e){var n=Wo(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Qr()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:Qge,replaceTooltipEntrySettings:Zge,removeTooltipEntrySettings:Jge,setTooltipSettingsState:epe,setActiveMouseOverItemIndex:Dz,mouseLeaveItem:tpe,mouseLeaveChart:kz,setActiveClickItemIndex:npe,setMouseOverAxisIndex:Mz,setMouseClickAxisIndex:rpe,setSyncInteraction:hS,setKeyboardInteraction:mS}=Rz.actions,ipe=Rz.reducer;function N8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N8(Object(n),!0).forEach(function(r){ape(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ape(t,e,n){return(e=spe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function spe(t){var e=ope(t,"string");return typeof e=="symbol"?e:e+""}function ope(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lpe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function upe(t){return t.index!=null}var jz=(t,e,n,r)=>{if(e==null)return Ic;var i=lpe(t,e,n);if(i==null)return Ic;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(upe(i)){if(a)return cy(cy({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return cy(cy({},Ic),{},{coordinate:i.coordinate})};function cpe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function fpe(t,e){var n=cpe(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),l=Math.max(r,i);return n>=a&&n<=l}function dpe(t,e,n){if(n==null||e==null)return!0;var r=br(t,e);return r==null||!Ou(n)?!0:fpe(r,n)}var BC=(t,e,n,r)=>{var i=t?.index;if(i==null)return null;var a=Number(i);if(!hn(a))return i;var l=0,f=1/0;e.length>0&&(f=e.length-1);var m=Math.max(l,Math.min(a,f)),p=e[m];return p==null||dpe(p,n,r)?String(m):null},Lz=(t,e,n,r,i,a,l)=>{if(a!=null){var f=l[0],m=f?.getPosition(a);if(m!=null)return m;var p=i?.[Number(a)];if(p)return n==="horizontal"?{x:p.coordinate,y:(r.top+e)/2}:{x:(r.left+t)/2,y:p.coordinate}}},Bz=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(l=>{var f;return((f=l.settings)===null||f===void 0?void 0:f.graphicalItemId)===i})},Fz=t=>t.options.tooltipPayloadSearcher,Vm=t=>t.tooltip;function P8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function R8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P8(Object(n),!0).forEach(function(r){hpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hpe(t,e,n){return(e=mpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mpe(t){var e=gpe(t,"string");return typeof e=="symbol"?e:e+""}function gpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ppe(t,e){return t??e}var Vz=(t,e,n,r,i,a,l)=>{if(!(e==null||a==null)){var{chartData:f,computedData:m,dataStartIndex:p,dataEndIndex:b}=n,_=[];return t.reduce((T,N)=>{var j,{dataDefinedOnItem:M,settings:L}=N,z=ppe(M,f),$=Array.isArray(z)?_F(z,p,b):z,K=(j=L?.dataKey)!==null&&j!==void 0?j:r,ee=L?.nameKey,ue;if(r&&Array.isArray($)&&!Array.isArray($[0])&&l==="axis"?ue=PB($,r,i):ue=a($,e,m,ee),Array.isArray(ue))ue.forEach(V=>{var W=R8(R8({},L),{},{name:V.name,unit:V.unit,color:void 0,fill:void 0});T.push(Rk({tooltipEntrySettings:W,dataKey:V.dataKey,payload:V.payload,value:br(V.payload,V.dataKey),name:V.name}))});else{var Z;T.push(Rk({tooltipEntrySettings:L,dataKey:K,payload:ue,value:br(ue,K),name:(Z=br(ue,ee))!==null&&Z!==void 0?Z:L?.name}))}return T},_)}},FC=Oe([ta,sz,cC],vz),ype=Oe([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),vpe=Oe([xa,Lm],vC),zm=Oe([ype,ta,vpe],xC,{memoizeOptions:{resultEqualityCheck:Db}}),xpe=Oe([zm],t=>t.filter(Pb)),bpe=Oe([zm],bC,{memoizeOptions:{resultEqualityCheck:Db}}),Um=Oe([bpe,zu],wC),wpe=Oe([xpe,zu,ta],nz),VC=Oe([Um,ta,zm],EC),zz=Oe([ta],AC),_pe=Oe([ta],t=>t.allowDataOverflow),Uz=Oe([zz,_pe],jV),Epe=Oe([zm],t=>t.filter(Pb)),Ape=Oe([wpe,Epe,P0,YV],cz),Spe=Oe([Ape,zu,xa,Uz],fz),Tpe=Oe([zm],lz),Ipe=Oe([Um,ta,Tpe,jb,xa],IC,{memoizeOptions:{resultEqualityCheck:Rb}}),Cpe=Oe([dz,xa,Lm],Fm),Ope=Oe([Cpe,xa],gz),Npe=Oe([hz,xa,Lm],Fm),Ppe=Oe([Npe,xa],pz),Rpe=Oe([mz,xa,Lm],Fm),Dpe=Oe([Rpe,xa],yz),kpe=Oe([Ope,Dpe,Ppe],sx),Mpe=Oe([ta,zz,Uz,Spe,Ipe,kpe,Kn,xa],CC),j0=Oe([ta,Kn,Um,VC,P0,xa,Mpe],OC),jpe=Oe([j0,ta,FC],RC),Lpe=Oe([ta,j0,jpe,xa],kC),qz=t=>{var e=xa(t),n=Lm(t),r=!1;return M0(t,e,n,r)},Gz=Oe([ta,qz],Cb),Hz=Oe([ta,FC,Lpe,Gz],PC),Bpe=Oe([Kn,VC,ta,xa],Sz),Fpe=Oe([Kn,VC,ta,xa],Tz),Vpe=(t,e,n,r,i,a,l,f)=>{if(e){var{type:m}=e,p=Lu(t,f);if(r){var b=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,_=m==="category"&&r.bandwidth?r.bandwidth()/b:0;return _=f==="angleAxis"&&i!=null&&i?.length>=2?pa(i[0]-i[1])*2*_:_,p&&l?l.map((T,N)=>{var j=r.map(T);return hn(j)?{coordinate:j+_,value:T,index:N,offset:_}:null}).filter(Ms):r.domain().map((T,N)=>{var j=r.map(T);return hn(j)?{coordinate:j+_,value:a?a[T]:T,index:N,offset:_}:null}).filter(Ms)}}},Uu=Oe([Kn,ta,FC,Hz,qz,Bpe,Fpe,xa],Vpe),zC=Oe([Cz,Oz,Yge],(t,e,n)=>Nz(n.shared,t,e)),Kz=t=>t.tooltip.settings.trigger,UC=t=>t.tooltip.settings.defaultIndex,L0=Oe([Vm,zC,Kz,UC],jz),Zc=Oe([L0,Um,k0,j0],BC),Wz=Oe([Uu,Zc],Pz),qC=Oe([L0],t=>{if(t)return t.dataKey}),zpe=Oe([L0],t=>{if(t)return t.graphicalItemId}),$z=Oe([Vm,zC,Kz,UC],Bz),Upe=Oe([Bu,Fu,Kn,Ji,Uu,UC,$z],Lz),qpe=Oe([L0,Upe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Gpe=Oe([L0],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),Hpe=Oe([$z,Zc,zu,k0,Wz,Fz,zC],Vz),Kpe=Oe([Hpe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function D8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function k8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D8(Object(n),!0).forEach(function(r){Wpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wpe(t,e,n){return(e=$pe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $pe(t){var e=Ype(t,"string");return typeof e=="symbol"?e:e+""}function Ype(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xpe=()=>Tt(ta),Qpe=()=>{var t=Xpe(),e=Tt(Uu),n=Tt(Hz);return um(!t||!n?void 0:k8(k8({},t),{},{scale:n}),e)};function M8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ph(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M8(Object(n),!0).forEach(function(r){Zpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zpe(t,e,n){return(e=Jpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jpe(t){var e=e0e(t,"string");return typeof e=="symbol"?e:e+""}function e0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var t0e=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},n0e=(t,e,n,r)=>{var i=e.find(p=>p&&p.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:l}=r;return ph(ph(ph({},r),zi(r.cx,r.cy,l,a)),{},{angle:a,radius:l})}var f=i.coordinate,{angle:m}=r;return ph(ph(ph({},r),zi(r.cx,r.cy,f,m)),{},{angle:m,radius:f})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function r0e(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var Yz=(t,e,n,r,i)=>{var a,l=(a=e?.length)!==null&&a!==void 0?a:0;if(l<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var f=0;f<l;f++){var m,p,b,_,T,N=f>0?(m=n[f-1])===null||m===void 0?void 0:m.coordinate:(p=n[l-1])===null||p===void 0?void 0:p.coordinate,j=(b=n[f])===null||b===void 0?void 0:b.coordinate,M=f>=l-1?(_=n[0])===null||_===void 0?void 0:_.coordinate:(T=n[f+1])===null||T===void 0?void 0:T.coordinate,L=void 0;if(!(N==null||j==null||M==null))if(pa(j-N)!==pa(M-j)){var z=[];if(pa(M-j)===pa(i[1]-i[0])){L=M;var $=j+i[1]-i[0];z[0]=Math.min($,($+N)/2),z[1]=Math.max($,($+N)/2)}else{L=N;var K=M+i[1]-i[0];z[0]=Math.min(j,(K+j)/2),z[1]=Math.max(j,(K+j)/2)}var ee=[Math.min(j,(L+j)/2),Math.max(j,(L+j)/2)];if(t>ee[0]&&t<=ee[1]||t>=z[0]&&t<=z[1]){var ue;return(ue=n[f])===null||ue===void 0?void 0:ue.index}}else{var Z=Math.min(N,M),V=Math.max(N,M);if(t>(Z+j)/2&&t<=(V+j)/2){var W;return(W=n[f])===null||W===void 0?void 0:W.index}}}else if(e)for(var U=0;U<l;U++){var ae=e[U];if(ae!=null){var ie=e[U+1],X=e[U-1];if(U===0&&ie!=null&&t<=(ae.coordinate+ie.coordinate)/2||U===l-1&&X!=null&&t>(ae.coordinate+X.coordinate)/2||U>0&&U<l-1&&X!=null&&ie!=null&&t>(ae.coordinate+X.coordinate)/2&&t<=(ae.coordinate+ie.coordinate)/2)return ae.index}}return-1},i0e=()=>Tt(cC),GC=(t,e)=>e,Xz=(t,e,n)=>n,HC=(t,e,n,r)=>r,a0e=Oe(Uu,t=>rb(t,e=>e.coordinate)),KC=Oe([Vm,GC,Xz,HC],jz),WC=Oe([KC,Um,k0,j0],BC),s0e=(t,e,n)=>{if(e!=null){var r=Vm(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},Qz=Oe([Vm,GC,Xz,HC],Bz),ox=Oe([Bu,Fu,Kn,Ji,Uu,HC,Qz],Lz),o0e=Oe([KC,ox],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),Zz=Oe([Uu,WC],Pz),l0e=Oe([Qz,WC,zu,k0,Zz,Fz,GC],Vz),u0e=Oe([KC,WC],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),c0e=(t,e,n,r,i,a,l)=>{if(!(!t||!n||!r||!i)&&r0e(t,l)){var f=Kue(t,e),m=Yz(f,a,i,n,r),p=t0e(e,i,m,t);return{activeIndex:String(m),activeCoordinate:p}}},f0e=(t,e,n,r,i,a,l)=>{if(!(!t||!r||!i||!a||!n)){var f=$fe(t,n);if(f){var m=Wue(f,e),p=Yz(m,l,a,r,i),b=n0e(e,a,p,f);return{activeIndex:String(p),activeCoordinate:b}}}},d0e=(t,e,n,r,i,a,l,f)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?c0e(t,e,r,i,a,l,f):f0e(t,e,n,r,i,a,l)},h0e=Oe(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),m0e=Oe(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Ii)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:$me}});function j8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j8(Object(n),!0).forEach(function(r){g0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g0e(t,e,n){return(e=p0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p0e(t){var e=y0e(t,"string");return typeof e=="symbol"?e:e+""}function y0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var v0e={},x0e={zIndexMap:Object.values(Ii).reduce((t,e)=>L8(L8({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),v0e)},b0e=new Set(Object.values(Ii));function w0e(t){return b0e.has(t)}var Jz=Vs({name:"zIndex",initialState:x0e,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Qr()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!w0e(n)&&delete t.zIndexMap[n])},prepare:Qr()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:Qr()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Qr()}}}),{registerZIndexPortal:_0e,unregisterZIndexPortal:E0e,registerZIndexPortalElement:A0e,unregisterZIndexPortalElement:S0e}=Jz.actions,T0e=Jz.reducer;function ms(t){var{zIndex:e,children:n}=t,r=Ece(),i=r&&e!==void 0&&e!==0,a=Ba(),l=Gr();D.useLayoutEffect(()=>i?(l(_0e({zIndex:e})),()=>{l(E0e({zIndex:e}))}):Nd,[l,e,i]);var f=Tt(m=>h0e(m,e,a));return i?f?N5.createPortal(n,f):null:n}function gS(){return gS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gS.apply(null,arguments)}function B8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B8(Object(n),!0).forEach(function(r){I0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function I0e(t,e,n){return(e=C0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C0e(t){var e=O0e(t,"string");return typeof e=="symbol"?e:e+""}function O0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function N0e(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return D.isValidElement(e)?D.cloneElement(e,r):D.createElement(n,r)}function P0e(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:l,layout:f,cursor:m,tooltipEventType:p,chartName:b}=t,_=n,T=r,N=i;if(!m||!_||b!=="ScatterChart"&&p!=="axis")return null;var j,M,L;if(b==="ScatterChart")j=_,M=lfe,L=Ii.cursorLine;else if(b==="BarChart")j=ufe(f,_,a,l),M=QF,L=Ii.cursorRectangle;else if(f==="radial"&&kB(_)){var{cx:z,cy:$,radius:K,startAngle:ee,endAngle:ue}=JF(_);j={cx:z,cy:$,startAngle:ee,endAngle:ue,innerRadius:K,outerRadius:K},M=tV,L=Ii.cursorLine}else j={points:Zfe(f,_,a)},M=LI,L=Ii.cursorLine;var Z=typeof m=="object"&&"className"in m?m.className:void 0,V=fy(fy(fy(fy({stroke:"#ccc",pointerEvents:"none"},a),j),dd(m)),{},{payload:T,payloadIndex:N,className:Gn("recharts-tooltip-cursor",Z)});return D.createElement(ms,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:L},D.createElement(N0e,{cursor:m,cursorComp:M,cursorProps:V}))}function R0e(t){var e=Qpe(),n=PF(),r=Pd(),i=i0e();return e==null||n==null||r==null||i==null?null:D.createElement(P0e,gS({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var eU=D.createContext(null),D0e=()=>D.useContext(eU),yE={exports:{}},F8;function k0e(){return F8||(F8=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(m,p,b){this.fn=m,this.context=p,this.once=b||!1}function a(m,p,b,_,T){if(typeof b!="function")throw new TypeError("The listener must be a function");var N=new i(b,_||m,T),j=n?n+p:p;return m._events[j]?m._events[j].fn?m._events[j]=[m._events[j],N]:m._events[j].push(N):(m._events[j]=N,m._eventsCount++),m}function l(m,p){--m._eventsCount===0?m._events=new r:delete m._events[p]}function f(){this._events=new r,this._eventsCount=0}f.prototype.eventNames=function(){var p=[],b,_;if(this._eventsCount===0)return p;for(_ in b=this._events)e.call(b,_)&&p.push(n?_.slice(1):_);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(b)):p},f.prototype.listeners=function(p){var b=n?n+p:p,_=this._events[b];if(!_)return[];if(_.fn)return[_.fn];for(var T=0,N=_.length,j=new Array(N);T<N;T++)j[T]=_[T].fn;return j},f.prototype.listenerCount=function(p){var b=n?n+p:p,_=this._events[b];return _?_.fn?1:_.length:0},f.prototype.emit=function(p,b,_,T,N,j){var M=n?n+p:p;if(!this._events[M])return!1;var L=this._events[M],z=arguments.length,$,K;if(L.fn){switch(L.once&&this.removeListener(p,L.fn,void 0,!0),z){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,b),!0;case 3:return L.fn.call(L.context,b,_),!0;case 4:return L.fn.call(L.context,b,_,T),!0;case 5:return L.fn.call(L.context,b,_,T,N),!0;case 6:return L.fn.call(L.context,b,_,T,N,j),!0}for(K=1,$=new Array(z-1);K<z;K++)$[K-1]=arguments[K];L.fn.apply(L.context,$)}else{var ee=L.length,ue;for(K=0;K<ee;K++)switch(L[K].once&&this.removeListener(p,L[K].fn,void 0,!0),z){case 1:L[K].fn.call(L[K].context);break;case 2:L[K].fn.call(L[K].context,b);break;case 3:L[K].fn.call(L[K].context,b,_);break;case 4:L[K].fn.call(L[K].context,b,_,T);break;default:if(!$)for(ue=1,$=new Array(z-1);ue<z;ue++)$[ue-1]=arguments[ue];L[K].fn.apply(L[K].context,$)}}return!0},f.prototype.on=function(p,b,_){return a(this,p,b,_,!1)},f.prototype.once=function(p,b,_){return a(this,p,b,_,!0)},f.prototype.removeListener=function(p,b,_,T){var N=n?n+p:p;if(!this._events[N])return this;if(!b)return l(this,N),this;var j=this._events[N];if(j.fn)j.fn===b&&(!T||j.once)&&(!_||j.context===_)&&l(this,N);else{for(var M=0,L=[],z=j.length;M<z;M++)(j[M].fn!==b||T&&!j[M].once||_&&j[M].context!==_)&&L.push(j[M]);L.length?this._events[N]=L.length===1?L[0]:L:l(this,N)}return this},f.prototype.removeAllListeners=function(p){var b;return p?(b=n?n+p:p,this._events[b]&&l(this,b)):(this._events=new r,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=n,f.EventEmitter=f,t.exports=f})(yE)),yE.exports}var M0e=k0e();const j0e=Rl(M0e);var Up=new j0e,pS="recharts.syncEvent.tooltip",V8="recharts.syncEvent.brush",$C=(t,e)=>{if(e&&Array.isArray(t)){var n=Number.parseInt(e,10);if(!Ol(n))return t[n]}},L0e={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},tU=Vs({name:"options",initialState:L0e,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),B0e=tU.reducer,{createEventEmitter:F0e}=tU.actions;function V0e(t){return t.tooltip.syncInteraction}var z0e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},nU=Vs({name:"chartData",initialState:z0e,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:z8,setDataStartEndIndexes:U0e,setComputedData:AEe}=nU.actions,q0e=nU.reducer,G0e=["x","y"];function U8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U8(Object(n),!0).forEach(function(r){H0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H0e(t,e,n){return(e=K0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K0e(t){var e=W0e(t,"string");return typeof e=="symbol"?e:e+""}function W0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $0e(t,e){if(t==null)return{};var n,r,i=Y0e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Y0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function X0e(){var t=Tt(fC),e=Tt(dC),n=Gr(),r=Tt(XV),i=Tt(Uu),a=Pd(),l=_0(),f=Tt(m=>m.rootProps.className);D.useEffect(()=>{if(t==null)return Nd;var m=(p,b,_)=>{if(e!==_&&t===p){if(r==="index"){var T;if(l&&b!==null&&b!==void 0&&(T=b.payload)!==null&&T!==void 0&&T.coordinate&&b.payload.sourceViewBox){var N=b.payload.coordinate,{x:j,y:M}=N,L=$0e(N,G0e),{x:z,y:$,width:K,height:ee}=b.payload.sourceViewBox,ue=yh(yh({},L),{},{x:l.x+(K?(j-z)/K:0)*l.width,y:l.y+(ee?(M-$)/ee:0)*l.height});n(yh(yh({},b),{},{payload:yh(yh({},b.payload),{},{coordinate:ue})}))}else n(b);return}if(i!=null){var Z;if(typeof r=="function"){var V={activeTooltipIndex:b.payload.index==null?void 0:Number(b.payload.index),isTooltipActive:b.payload.active,activeIndex:b.payload.index==null?void 0:Number(b.payload.index),activeLabel:b.payload.label,activeDataKey:b.payload.dataKey,activeCoordinate:b.payload.coordinate},W=r(i,V);Z=i[W]}else r==="value"&&(Z=i.find(ye=>String(ye.value)===b.payload.label));var{coordinate:U}=b.payload;if(Z==null||b.payload.active===!1||U==null||l==null){n(hS({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:ae,y:ie}=U,X=Math.min(ae,l.x+l.width),J=Math.min(ie,l.y+l.height),xe={x:a==="horizontal"?Z.coordinate:X,y:a==="horizontal"?J:Z.coordinate},de=hS({active:b.payload.active,coordinate:xe,dataKey:b.payload.dataKey,index:String(Z.index),label:b.payload.label,sourceViewBox:b.payload.sourceViewBox,graphicalItemId:b.payload.graphicalItemId});n(de)}}};return Up.on(pS,m),()=>{Up.off(pS,m)}},[f,n,e,t,r,i,a,l])}function Q0e(){var t=Tt(fC),e=Tt(dC),n=Gr();D.useEffect(()=>{if(t==null)return Nd;var r=(i,a,l)=>{e!==l&&t===i&&n(U0e(a))};return Up.on(V8,r),()=>{Up.off(V8,r)}},[n,e,t])}function Z0e(){var t=Gr();D.useEffect(()=>{t(F0e())},[t]),X0e(),Q0e()}function J0e(t,e,n,r,i,a){var l=Tt(N=>s0e(N,t,e)),f=Tt(dC),m=Tt(fC),p=Tt(XV),b=Tt(V0e),_=b?.active,T=_0();D.useEffect(()=>{if(!_&&m!=null&&f!=null){var N=hS({active:a,coordinate:n,dataKey:l,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:T,graphicalItemId:void 0});Up.emit(pS,m,N,f)}},[_,n,l,i,r,f,m,p,a,T])}function q8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q8(Object(n),!0).forEach(function(r){e1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e1e(t,e,n){return(e=t1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t1e(t){var e=n1e(t,"string");return typeof e=="symbol"?e:e+""}function n1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function r1e(t){return t.dataKey}function i1e(t,e){return D.isValidElement(t)?D.cloneElement(t,e):typeof t=="function"?D.createElement(t,e):D.createElement(zce,e)}var H8=[],a1e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function vE(t){var e,n,r=Zi(t,a1e),{active:i,allowEscapeViewBox:a,animationDuration:l,animationEasing:f,content:m,filterNull:p,isAnimationActive:b,offset:_,payloadUniqBy:T,position:N,reverseDirection:j,useTranslate3d:M,wrapperStyle:L,cursor:z,shared:$,trigger:K,defaultIndex:ee,portal:ue,axisId:Z}=r,V=Gr(),W=typeof ee=="number"?String(ee):ee;D.useEffect(()=>{V(epe({shared:$,trigger:K,axisId:Z,active:i,defaultIndex:W}))},[V,$,K,Z,i,W]);var U=_0(),ae=KF(),ie=$ge($),{activeIndex:X,isActive:J}=(e=Tt(yt=>u0e(yt,ie,K,W)))!==null&&e!==void 0?e:{},xe=Tt(yt=>l0e(yt,ie,K,W)),de=Tt(yt=>Zz(yt,ie,K,W)),ye=Tt(yt=>o0e(yt,ie,K,W)),_e=xe,qe=D0e(),ze=(n=i??J)!==null&&n!==void 0?n:!1,[et,me]=Ple([_e,ze]),Se=ie==="axis"?de:void 0;J0e(ie,K,ye,Se,X,ze);var Xe=ue??qe;if(Xe==null||U==null||ie==null)return null;var Ve=_e??H8;ze||(Ve=H8),p&&Ve.length&&(Ve=rle(Ve.filter(yt=>yt.value!=null&&(yt.hide!==!0||r.includeHidden)),T,r1e));var pt=Ve.length>0,$e=D.createElement($ce,{allowEscapeViewBox:a,animationDuration:l,animationEasing:f,isAnimationActive:b,active:ze,coordinate:ye,hasPayload:pt,offset:_,position:N,reverseDirection:j,useTranslate3d:M,viewBox:U,wrapperStyle:L,lastBoundingBox:et,innerRef:me,hasPortalFromProps:!!ue},i1e(m,G8(G8({},r),{},{payload:Ve,label:Se,active:ze,activeIndex:X,coordinate:ye,accessibilityLayer:ae})));return D.createElement(D.Fragment,null,N5.createPortal($e,Xe),ze&&D.createElement(R0e,{cursor:z,tooltipEventType:ie,coordinate:ye,payload:Ve,index:X}))}var B0=t=>null;B0.displayName="Cell";function s1e(t,e,n){return(e=o1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o1e(t){var e=l1e(t,"string");return typeof e=="symbol"?e:e+""}function l1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class u1e{constructor(e){s1e(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function K8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function c1e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K8(Object(n),!0).forEach(function(r){f1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function f1e(t,e,n){return(e=d1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d1e(t){var e=h1e(t,"string");return typeof e=="symbol"?e:e+""}function h1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var m1e={cacheSize:2e3,enableCache:!0},rU=c1e({},m1e),W8=new u1e(rU.cacheSize),g1e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},$8="recharts_measurement_span";function p1e(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",l=e.letterSpacing||"",f=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(l,"|").concat(f)}var Y8=(t,e)=>{try{var n=document.getElementById($8);n||(n=document.createElement("span"),n.setAttribute("id",$8),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,g1e,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},fp=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||bb.isSsr)return{width:0,height:0};if(!rU.enableCache)return Y8(e,n);var r=p1e(e,n),i=W8.get(r);if(i)return i;var a=Y8(e,n);return W8.set(r,a),a},iU;function y1e(t,e,n){return(e=v1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v1e(t){var e=x1e(t,"string");return typeof e=="symbol"?e:e+""}function x1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var X8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Q8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,b1e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,w1e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_1e={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},E1e=["cm","mm","pt","pc","in","Q","px"];function A1e(t){return E1e.includes(t)}var Ih="NaN";function S1e(t,e){return t*_1e[e]}class ja{static parse(e){var n,[,r,i]=(n=w1e.exec(e))!==null&&n!==void 0?n:[];return r==null?ja.NaN:new ja(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Ol(e)&&(this.unit=""),n!==""&&!b1e.test(n)&&(this.num=NaN,this.unit=""),A1e(n)&&(this.num=S1e(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new ja(NaN,""):new ja(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new ja(NaN,""):new ja(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ja(NaN,""):new ja(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ja(NaN,""):new ja(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ol(this.num)}}iU=ja;y1e(ja,"NaN",new iU(NaN,""));function aU(t){if(t==null||t.includes(Ih))return Ih;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=X8.exec(e))!==null&&n!==void 0?n:[],l=ja.parse(r??""),f=ja.parse(a??""),m=i==="*"?l.multiply(f):l.divide(f);if(m.isNaN())return Ih;e=e.replace(X8,m.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,[,b,_,T]=(p=Q8.exec(e))!==null&&p!==void 0?p:[],N=ja.parse(b??""),j=ja.parse(T??""),M=_==="+"?N.add(j):N.subtract(j);if(M.isNaN())return Ih;e=e.replace(Q8,M.toString())}return e}var Z8=/\(([^()]*)\)/;function T1e(t){for(var e=t,n;(n=Z8.exec(e))!=null;){var[,r]=n;e=e.replace(Z8,aU(r))}return e}function I1e(t){var e=t.replace(/\s+/g,"");return e=T1e(e),e=aU(e),e}function C1e(t){try{return I1e(t)}catch{return Ih}}function xE(t){var e=C1e(t.slice(5,-1));return e===Ih?"":e}var O1e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],N1e=["dx","dy","angle","className","breakAll"];function yS(){return yS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yS.apply(null,arguments)}function J8(t,e){if(t==null)return{};var n,r,i=P1e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function P1e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var sU=/[ \f\n\r\t\v\u2028\u2029]+/,oU=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];li(e)||(n?i=e.toString().split(""):i=e.toString().split(sU));var a=i.map(f=>({word:f,width:fp(f,r).width})),l=n?0:fp("",r).width;return{wordsWithComputedWidth:a,spaceWidth:l}}catch{return null}};function R1e(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var lU=(t,e,n,r)=>t.reduce((i,a)=>{var{word:l,width:f}=a,m=i[i.length-1];if(m&&f!=null&&(e==null||r||m.width+f+n<Number(e)))m.words.push(l),m.width+=f+n;else{var p={words:[l],width:f};i.push(p)}return i},[]),uU=t=>t.reduce((e,n)=>e.width>n.width?e:n),D1e="",e6=(t,e,n,r,i,a,l,f)=>{var m=t.slice(0,e),p=oU({breakAll:n,style:r,children:m+D1e});if(!p)return[!1,[]];var b=lU(p.wordsWithComputedWidth,a,l,f),_=b.length>i||uU(b).width>Number(a);return[_,b]},k1e=(t,e,n,r,i)=>{var{maxLines:a,children:l,style:f,breakAll:m}=t,p=St(a),b=String(l),_=lU(e,r,n,i);if(!p||i)return _;var T=_.length>a||uU(_).width>Number(r);if(!T)return _;for(var N=0,j=b.length-1,M=0,L;N<=j&&M<=b.length-1;){var z=Math.floor((N+j)/2),$=z-1,[K,ee]=e6(b,$,m,f,a,r,n,i),[ue]=e6(b,z,m,f,a,r,n,i);if(!K&&!ue&&(N=z+1),K&&ue&&(j=z-1),!K&&ue){L=ee;break}M++}return L||_},t6=t=>{var e=li(t)?[]:t.toString().split(sU);return[{words:e,width:void 0}]},M1e=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:l}=t;if((e||n)&&!bb.isSsr){var f,m,p=oU({breakAll:a,children:r,style:i});if(p){var{wordsWithComputedWidth:b,spaceWidth:_}=p;f=b,m=_}else return t6(r);return k1e({breakAll:a,children:r,maxLines:l,style:i},f,m,e,!!n)}return t6(r)},cU="#808080",j1e={angle:0,breakAll:!1,capHeight:"0.71em",fill:cU,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Fb=D.forwardRef((t,e)=>{var n=Zi(t,j1e),{x:r,y:i,lineHeight:a,capHeight:l,fill:f,scaleToFit:m,textAnchor:p,verticalAnchor:b}=n,_=J8(n,O1e),T=D.useMemo(()=>M1e({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:m,style:_.style,width:_.width}),[_.breakAll,_.children,_.maxLines,m,_.style,_.width]),{dx:N,dy:j,angle:M,className:L,breakAll:z}=_,$=J8(_,N1e);if(!Io(r)||!Io(i)||T.length===0)return null;var K=Number(r)+(St(N)?N:0),ee=Number(i)+(St(j)?j:0);if(!hn(K)||!hn(ee))return null;var ue;switch(b){case"start":ue=xE("calc(".concat(l,")"));break;case"middle":ue=xE("calc(".concat((T.length-1)/2," * -").concat(a," + (").concat(l," / 2))"));break;default:ue=xE("calc(".concat(T.length-1," * -").concat(a,")"));break}var Z=[],V=T[0];if(m&&V!=null){var W=V.width,{width:U}=_;Z.push("scale(".concat(St(U)&&St(W)?U/W:1,")"))}return M&&Z.push("rotate(".concat(M,", ").concat(K,", ").concat(ee,")")),Z.length&&($.transform=Z.join(" ")),D.createElement("text",yS({},as($),{ref:e,x:K,y:ee,className:Gn("recharts-text",L),textAnchor:p,fill:f.includes("url")?cU:f}),T.map((ae,ie)=>{var X=ae.words.join(z?"":" ");return D.createElement("tspan",{x:K,dy:ie===0?ue:a,key:"".concat(X,"-").concat(ie)},X)}))});Fb.displayName="Text";function n6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n6(Object(n),!0).forEach(function(r){L1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function L1e(t,e,n){return(e=B1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B1e(t){var e=F1e(t,"string");return typeof e=="symbol"?e:e+""}function F1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var V1e=t=>{var{viewBox:e,position:n,offset:r=0,parentViewBox:i}=t,{x:a,y:l,height:f,upperWidth:m,lowerWidth:p}=kI(e),b=a,_=a+(m-p)/2,T=(b+_)/2,N=(m+p)/2,j=b+m/2,M=f>=0?1:-1,L=M*r,z=M>0?"end":"start",$=M>0?"start":"end",K=m>=0?1:-1,ee=K*r,ue=K>0?"end":"start",Z=K>0?"start":"end",V=i;if(n==="top"){var W={x:b+m/2,y:l-L,horizontalAnchor:"middle",verticalAnchor:z};return V&&(W.height=Math.max(l-V.y,0),W.width=m),W}if(n==="bottom"){var U={x:_+p/2,y:l+f+L,horizontalAnchor:"middle",verticalAnchor:$};return V&&(U.height=Math.max(V.y+V.height-(l+f),0),U.width=p),U}if(n==="left"){var ae={x:T-ee,y:l+f/2,horizontalAnchor:ue,verticalAnchor:"middle"};return V&&(ae.width=Math.max(ae.x-V.x,0),ae.height=f),ae}if(n==="right"){var ie={x:T+N+ee,y:l+f/2,horizontalAnchor:Z,verticalAnchor:"middle"};return V&&(ie.width=Math.max(V.x+V.width-ie.x,0),ie.height=f),ie}var X=V?{width:N,height:f}:{};return n==="insideLeft"?hl({x:T+ee,y:l+f/2,horizontalAnchor:Z,verticalAnchor:"middle"},X):n==="insideRight"?hl({x:T+N-ee,y:l+f/2,horizontalAnchor:ue,verticalAnchor:"middle"},X):n==="insideTop"?hl({x:b+m/2,y:l+L,horizontalAnchor:"middle",verticalAnchor:$},X):n==="insideBottom"?hl({x:_+p/2,y:l+f-L,horizontalAnchor:"middle",verticalAnchor:z},X):n==="insideTopLeft"?hl({x:b+ee,y:l+L,horizontalAnchor:Z,verticalAnchor:$},X):n==="insideTopRight"?hl({x:b+m-ee,y:l+L,horizontalAnchor:ue,verticalAnchor:$},X):n==="insideBottomLeft"?hl({x:_+ee,y:l+f-L,horizontalAnchor:Z,verticalAnchor:z},X):n==="insideBottomRight"?hl({x:_+p-ee,y:l+f-L,horizontalAnchor:ue,verticalAnchor:z},X):n&&typeof n=="object"&&(St(n.x)||gd(n.x))&&(St(n.y)||gd(n.y))?hl({x:a+is(n.x,N),y:l+is(n.y,f),horizontalAnchor:"end",verticalAnchor:"end"},X):hl({x:j,y:l+f/2,horizontalAnchor:"middle",verticalAnchor:"middle"},X)},z1e=["labelRef"],U1e=["content"];function r6(t,e){if(t==null)return{};var n,r,i=q1e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function q1e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function i6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i6(Object(n),!0).forEach(function(r){G1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G1e(t,e,n){return(e=H1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H1e(t){var e=K1e(t,"string");return typeof e=="symbol"?e:e+""}function K1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ou(){return ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ou.apply(null,arguments)}var fU=D.createContext(null),dU=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:l,children:f}=t,m=D.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:l}),[e,n,r,i,a,l]);return D.createElement(fU.Provider,{value:m},f)},hU=()=>{var t=D.useContext(fU),e=_0();return t||(e?kI(e):void 0)},W1e=D.createContext(null),$1e=()=>{var t=D.useContext(W1e),e=Tt(tz);return t||e},Y1e=t=>{var{value:e,formatter:n}=t,r=li(t.children)?e:t.children;return typeof n=="function"?n(r):r},YC=t=>t!=null&&typeof t=="function",X1e=(t,e)=>{var n=pa(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Q1e=(t,e,n,r,i)=>{var{offset:a,className:l}=t,{cx:f,cy:m,innerRadius:p,outerRadius:b,startAngle:_,endAngle:T,clockWise:N}=i,j=(p+b)/2,M=X1e(_,T),L=M>=0?1:-1,z,$;switch(e){case"insideStart":z=_+L*a,$=N;break;case"insideEnd":z=T-L*a,$=!N;break;case"end":z=T+L*a,$=N;break;default:throw new Error("Unsupported position ".concat(e))}$=M<=0?$:!$;var K=zi(f,m,j,z),ee=zi(f,m,j,z+($?1:-1)*359),ue="M".concat(K.x,",").concat(K.y,`
    A`).concat(j,",").concat(j,",0,1,").concat($?0:1,`,
    `).concat(ee.x,",").concat(ee.y),Z=li(t.id)?Op("recharts-radial-line-"):t.id;return D.createElement("text",ou({},r,{dominantBaseline:"central",className:Gn("recharts-radial-bar-label",l)}),D.createElement("defs",null,D.createElement("path",{id:Z,d:ue})),D.createElement("textPath",{xlinkHref:"#".concat(Z)},n))},Z1e=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:l,startAngle:f,endAngle:m}=t,p=(f+m)/2;if(n==="outside"){var{x:b,y:_}=zi(r,i,l+e,p);return{x:b,y:_,textAnchor:b>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var T=(a+l)/2,{x:N,y:j}=zi(r,i,T,p);return{x:N,y:j,textAnchor:"middle",verticalAnchor:"middle"}},By=t=>t!=null&&"cx"in t&&St(t.cx),J1e={angle:0,offset:5,zIndex:Ii.label,position:"middle",textBreakAll:!1};function eye(t){if(!By(t))return t;var{cx:e,cy:n,outerRadius:r}=t,i=r*2;return{x:e-r,y:n-r,width:i,upperWidth:i,lowerWidth:i,height:i}}function xc(t){var e=Zi(t,J1e),{viewBox:n,parentViewBox:r,position:i,value:a,children:l,content:f,className:m="",textBreakAll:p,labelRef:b}=e,_=$1e(),T=hU(),N=i==="center"?T:_??T,j,M,L;n==null?j=N:By(n)?j=n:j=kI(n);var z=eye(j);if(!j||li(a)&&li(l)&&!D.isValidElement(f)&&typeof f!="function")return null;var $=Qg(Qg({},e),{},{viewBox:j});if(D.isValidElement(f)){var{labelRef:K}=$,ee=r6($,z1e);return D.cloneElement(f,ee)}if(typeof f=="function"){var{content:ue}=$,Z=r6($,U1e);if(M=D.createElement(f,Z),D.isValidElement(M))return M}else M=Y1e(e);var V=as(e);if(By(j)){if(i==="insideStart"||i==="insideEnd"||i==="end")return Q1e(e,i,M,V,j);L=Z1e(j,e.offset,e.position)}else{if(!z)return null;var W=V1e({viewBox:z,position:i,offset:e.offset,parentViewBox:By(r)?void 0:r});L=Qg(Qg({x:W.x,y:W.y,textAnchor:W.horizontalAnchor,verticalAnchor:W.verticalAnchor},W.width!==void 0?{width:W.width}:{}),W.height!==void 0?{height:W.height}:{})}return D.createElement(ms,{zIndex:e.zIndex},D.createElement(Fb,ou({ref:b,className:Gn("recharts-label",m)},V,L,{textAnchor:R1e(V.textAnchor)?V.textAnchor:L.textAnchor,breakAll:p}),M))}xc.displayName="Label";var tye=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?D.createElement(xc,ou({key:"label-implicit"},r)):Io(t)?D.createElement(xc,ou({key:"label-implicit",value:t},r)):D.isValidElement(t)?t.type===xc?D.cloneElement(t,Qg({key:"label-implicit"},r)):D.createElement(xc,ou({key:"label-implicit",content:t},r)):YC(t)?D.createElement(xc,ou({key:"label-implicit",content:t},r)):t&&typeof t=="object"?D.createElement(xc,ou({},t,{key:"label-implicit"},r)):null};function mU(t){var{label:e,labelRef:n}=t,r=hU();return tye(e,r,n)||null}var bE={},wE={},a6;function nye(){return a6||(a6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(wE)),wE}var _E={},s6;function rye(){return s6||(s6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(_E)),_E}var o6;function iye(){return o6||(o6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nye(),n=rye(),r=EI();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(bE)),bE}var EE,l6;function aye(){return l6||(l6=1,EE=iye().last),EE}var sye=aye();const oye=Rl(sye);var lye=["valueAccessor"],uye=["dataKey","clockWise","id","textBreakAll","zIndex"];function lx(){return lx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lx.apply(null,arguments)}function u6(t,e){if(t==null)return{};var n,r,i=cye(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function cye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var fye=t=>Array.isArray(t.value)?oye(t.value):t.value,gU=D.createContext(void 0),pU=gU.Provider,yU=D.createContext(void 0),dye=yU.Provider;function hye(){return D.useContext(gU)}function mye(){return D.useContext(yU)}function Fy(t){var{valueAccessor:e=fye}=t,n=u6(t,lye),{dataKey:r,clockWise:i,id:a,textBreakAll:l,zIndex:f}=n,m=u6(n,uye),p=hye(),b=mye(),_=p||b;return!_||!_.length?null:D.createElement(ms,{zIndex:f??Ii.label},D.createElement(Xi,{className:"recharts-label-list"},_.map((T,N)=>{var j,M=li(r)?e(T,N):br(T.payload,r),L=li(a)?{}:{id:"".concat(a,"-").concat(N)};return D.createElement(xc,lx({key:"label-".concat(N)},as(T),m,L,{fill:(j=n.fill)!==null&&j!==void 0?j:T.fill,parentViewBox:T.parentViewBox,value:M,textBreakAll:l,viewBox:T.viewBox,index:N,zIndex:0}))})))}Fy.displayName="LabelList";function XC(t){var{label:e}=t;return e?e===!0?D.createElement(Fy,{key:"labelList-implicit"}):D.isValidElement(e)||YC(e)?D.createElement(Fy,{key:"labelList-implicit",content:e}):typeof e=="object"?D.createElement(Fy,lx({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function vS(){return vS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vS.apply(null,arguments)}var vU=t=>{var{cx:e,cy:n,r,className:i}=t,a=Gn("recharts-dot",i);return St(e)&&St(n)&&St(r)?D.createElement("circle",vS({},so(t),_I(t),{className:a,cx:e,cy:n,r})):null},xU=t=>t.graphicalItems.polarItems,gye=Oe([ui,R0],vC),Vb=Oe([xU,xi,gye],xC),pye=Oe([Vb],bC),zb=Oe([pye,Ib],wC),yye=Oe([zb,xi,Vb],EC);Oe([zb,xi,Vb],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var a,l=br(r,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:br(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var c6=()=>{},vye=Oe([zb,xi,Vb,jb,ui],IC),xye=Oe([xi,SC,TC,c6,vye,c6,Kn,ui],CC),bU=Oe([xi,Kn,zb,yye,P0,ui,xye],OC),bye=Oe([bU,Bm,hf],RC),wye=Oe([xi,bU,bye,ui],kC);Oe([hf,wye],rz);var _ye={radiusAxis:{},angleAxis:{}},wU=Vs({name:"polarAxis",initialState:_ye,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:SEe,removeRadiusAxis:TEe,addAngleAxis:IEe,removeAngleAxis:CEe}=wU.actions,Eye=wU.reducer;function _U(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}function f6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function d6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f6(Object(n),!0).forEach(function(r){Aye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Aye(t,e,n){return(e=Sye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sye(t){var e=Tye(t,"string");return typeof e=="symbol"?e:e+""}function Tye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Iye=(t,e)=>e,QC=Oe([xU,Iye],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),Cye=[],ZC=(t,e,n)=>n?.length===0?Cye:n,EU=Oe([Ib,QC,ZC],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>d6(d6({},e.presentationProps),a.props))),i!=null)return i}}),Oye=Oe([EU,QC,ZC],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var a,l=br(r,e.nameKey,e.name),f;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?f=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?f=r.fill:f=e.fill,{value:Dm(l,e.dataKey),color:f,payload:r,type:e.legendType}})}),Nye=Oe([EU,QC,ZC,Ji],(t,e,n,r)=>{if(!(e==null||t==null))return Pve({offset:r,pieSettings:e,displayedData:t,cells:n})}),AE={exports:{}},xr={};var h6;function Pye(){if(h6)return xr;h6=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.view_transition"),N=Symbol.for("react.client.reference");function j(M){if(typeof M=="object"&&M!==null){var L=M.$$typeof;switch(L){case t:switch(M=M.type,M){case n:case i:case r:case m:case p:case T:return M;default:switch(M=M&&M.$$typeof,M){case l:case f:case _:case b:return M;case a:return M;default:return L}}case e:return L}}}return xr.ContextConsumer=a,xr.ContextProvider=l,xr.Element=t,xr.ForwardRef=f,xr.Fragment=n,xr.Lazy=_,xr.Memo=b,xr.Portal=e,xr.Profiler=i,xr.StrictMode=r,xr.Suspense=m,xr.SuspenseList=p,xr.isContextConsumer=function(M){return j(M)===a},xr.isContextProvider=function(M){return j(M)===l},xr.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===t},xr.isForwardRef=function(M){return j(M)===f},xr.isFragment=function(M){return j(M)===n},xr.isLazy=function(M){return j(M)===_},xr.isMemo=function(M){return j(M)===b},xr.isPortal=function(M){return j(M)===e},xr.isProfiler=function(M){return j(M)===i},xr.isStrictMode=function(M){return j(M)===r},xr.isSuspense=function(M){return j(M)===m},xr.isSuspenseList=function(M){return j(M)===p},xr.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===n||M===i||M===r||M===m||M===p||typeof M=="object"&&M!==null&&(M.$$typeof===_||M.$$typeof===b||M.$$typeof===l||M.$$typeof===a||M.$$typeof===f||M.$$typeof===N||M.getModuleId!==void 0)},xr.typeOf=j,xr}var m6;function Rye(){return m6||(m6=1,AE.exports=Pye()),AE.exports}var Dye=Rye(),g6=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",p6=null,SE=null,AU=t=>{if(t===p6&&Array.isArray(SE))return SE;var e=[];return D.Children.forEach(t,n=>{li(n)||(Dye.isFragment(n)?e=e.concat(AU(n.props.children)):e.push(n))}),SE=e,p6=t,e};function JC(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>g6(i)):r=[g6(e)],AU(t).forEach(i=>{var a=md(i,"type.displayName")||md(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var SU=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,TE={},y6;function kye(){return y6||(y6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(TE)),TE}var IE,v6;function Mye(){return v6||(v6=1,IE=kye().isPlainObject),IE}var jye=Mye();const Lye=Rl(jye);var x6,b6,w6,_6,E6;function A6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function S6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A6(Object(n),!0).forEach(function(r){Bye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bye(t,e,n){return(e=Fye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fye(t){var e=Vye(t,"string");return typeof e=="symbol"?e:e+""}function Vye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ux(){return ux=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ux.apply(null,arguments)}function Fg(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var T6=(t,e,n,r,i)=>{var a=n-r,l;return l=yi(x6||(x6=Fg(["M ",",",""])),t,e),l+=yi(b6||(b6=Fg(["L ",",",""])),t+n,e),l+=yi(w6||(w6=Fg(["L ",",",""])),t+n-a/2,e+i),l+=yi(_6||(_6=Fg(["L ",",",""])),t+n-a/2-r,e+i),l+=yi(E6||(E6=Fg(["L ",","," Z"])),t,e),l},zye={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Uye=t=>{var e=Zi(t,zye),{x:n,y:r,upperWidth:i,lowerWidth:a,height:l,className:f}=e,{animationEasing:m,animationDuration:p,animationBegin:b,isUpdateAnimationActive:_}=e,T=D.useRef(null),[N,j]=D.useState(-1),M=D.useRef(i),L=D.useRef(a),z=D.useRef(l),$=D.useRef(n),K=D.useRef(r),ee=T0(t,"trapezoid-");if(D.useEffect(()=>{if(T.current&&T.current.getTotalLength)try{var xe=T.current.getTotalLength();xe&&j(xe)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||l!==+l||i===0&&a===0||l===0)return null;var ue=Gn("recharts-trapezoid",f);if(!_)return D.createElement("g",null,D.createElement("path",ux({},as(e),{className:ue,d:T6(n,r,i,a,l)})));var Z=M.current,V=L.current,W=z.current,U=$.current,ae=K.current,ie="0px ".concat(N===-1?1:N,"px"),X="".concat(N,"px 0px"),J=WF(["strokeDasharray"],p,m);return D.createElement(S0,{animationId:ee,key:ee,canBegin:N>0,duration:p,easing:m,isActive:_,begin:b},xe=>{var de=Jr(Z,i,xe),ye=Jr(V,a,xe),_e=Jr(W,l,xe),qe=Jr(U,n,xe),ze=Jr(ae,r,xe);T.current&&(M.current=de,L.current=ye,z.current=_e,$.current=qe,K.current=ze);var et=xe>0?{transition:J,strokeDasharray:X}:{strokeDasharray:ie};return D.createElement("path",ux({},as(e),{className:ue,d:T6(qe,ze,de,ye,_e),ref:T,style:S6(S6({},et),e.style)}))})},qye=["option","shapeType","activeClassName"];function Gye(t,e){if(t==null)return{};var n,r,i=Hye(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Hye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function I6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I6(Object(n),!0).forEach(function(r){Kye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kye(t,e,n){return(e=Wye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wye(t){var e=$ye(t,"string");return typeof e=="symbol"?e:e+""}function $ye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yye(t,e){return cx(cx({},e),t)}function Xye(t,e){return t==="symbols"}function C6(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return D.createElement(QF,n);case"trapezoid":return D.createElement(Uye,n);case"sector":return D.createElement(tV,n);case"symbols":if(Xye(e))return D.createElement(DB,n);break;case"curve":return D.createElement(LI,n);default:return null}}function Qye(t){return D.isValidElement(t)?t.props:t}function eO(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=Gye(t,qye),a;if(D.isValidElement(e))a=D.cloneElement(e,cx(cx({},i),Qye(e)));else if(typeof e=="function")a=e(i,i.index);else if(Lye(e)&&typeof e!="boolean"){var l=Yye(e,i);a=D.createElement(C6,{shapeType:n,elementProps:l})}else{var f=i;a=D.createElement(C6,{shapeType:n,elementProps:f})}return i.isActive?D.createElement(Xi,{className:r},a):a}var tO=(t,e,n)=>{var r=Gr();return(i,a)=>l=>{t?.(i,a,l),r(Dz({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},nO=t=>{var e=Gr();return(n,r)=>i=>{t?.(n,r,i),e(tpe())}},rO=(t,e,n)=>{var r=Gr();return(i,a)=>l=>{t?.(i,a,l),r(npe({activeIndex:String(a),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function iO(t){var{tooltipEntrySettings:e}=t,n=Gr(),r=Ba(),i=D.useRef(null);return D.useLayoutEffect(()=>{r||(i.current===null?n(Qge(e)):i.current!==e&&n(Zge({prev:i.current,next:e})),i.current=e)},[e,n,r]),D.useLayoutEffect(()=>()=>{i.current&&(n(Jge(i.current)),i.current=null)},[n]),null}function TU(t){var{legendPayload:e}=t,n=Gr(),r=Ba(),i=D.useRef(null);return D.useLayoutEffect(()=>{r||(i.current===null?n(qF(e)):i.current!==e&&n(GF({prev:i.current,next:e})),i.current=e)},[n,r,e]),D.useLayoutEffect(()=>()=>{i.current&&(n(HF(i.current)),i.current=null)},[n]),null}function Zye(t){var{legendPayload:e}=t,n=Gr(),r=Tt(Kn),i=D.useRef(null);return D.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(qF(e)):i.current!==e&&n(GF({prev:i.current,next:e})),i.current=e)},[n,r,e]),D.useLayoutEffect(()=>()=>{i.current&&(n(HF(i.current)),i.current=null)},[n]),null}var CE,Jye=()=>{var[t]=D.useState(()=>Op("uid-"));return t},eve=(CE=BG.useId)!==null&&CE!==void 0?CE:Jye;function tve(t,e){var n=eve();return e||(t?"".concat(t,"-").concat(n):n)}var nve=D.createContext(void 0),aO=t=>{var{id:e,type:n,children:r}=t,i=tve("recharts-".concat(n),e);return D.createElement(nve.Provider,{value:i},r(i))},rve={cartesianItems:[],polarItems:[]},IU=Vs({name:"graphicalItems",initialState:rve,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Qr()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Wo(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Qr()},removeCartesianGraphicalItem:{reducer(t,e){var n=Wo(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Qr()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Qr()},removePolarGraphicalItem:{reducer(t,e){var n=Wo(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Qr()}}}),{addCartesianGraphicalItem:ive,replaceCartesianGraphicalItem:ave,removeCartesianGraphicalItem:sve,addPolarGraphicalItem:ove,removePolarGraphicalItem:lve}=IU.actions,uve=IU.reducer,cve=t=>{var e=Gr(),n=D.useRef(null);return D.useLayoutEffect(()=>{n.current===null?e(ive(t)):n.current!==t&&e(ave({prev:n.current,next:t})),n.current=t},[e,t]),D.useLayoutEffect(()=>()=>{n.current&&(e(sve(n.current)),n.current=null)},[e]),null},CU=D.memo(cve);function fve(t){var e=Gr();return D.useLayoutEffect(()=>(e(ove(t)),()=>{e(lve(t))}),[e,t]),null}var dve=["key"],hve=["onMouseEnter","onClick","onMouseLeave"],mve=["id"],gve=["id"];function O6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O6(Object(n),!0).forEach(function(r){pve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pve(t,e,n){return(e=yve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yve(t){var e=vve(t,"string");return typeof e=="symbol"?e:e+""}function vve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jc(){return Jc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jc.apply(null,arguments)}function Ub(t,e){if(t==null)return{};var n,r,i=xve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function bve(t){var e=D.useMemo(()=>JC(t.children,B0),[t.children]),n=Tt(r=>Oye(r,t.id,e));return n==null?null:D.createElement(Zye,{legendPayload:n})}var wve=D.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:l,name:f,hide:m,tooltipType:p,id:b}=t,_={dataDefinedOnItem:r.map(T=>T.tooltipPayload),getPosition:T=>{var N;return(N=r[Number(T)])===null||N===void 0?void 0:N.tooltipPosition},settings:{stroke:i,strokeWidth:a,fill:l,dataKey:e,nameKey:n,name:Dm(f,e),hide:m,type:p,color:l,unit:"",graphicalItemId:b}};return D.createElement(iO,{tooltipEntrySettings:_})}),_ve=(t,e)=>t>e?"start":t<e?"end":"middle",Eve=(t,e,n)=>is(typeof e=="function"?e(t):e,n,n*.8),Ave=(t,e,n)=>{var{top:r,left:i,width:a,height:l}=e,f=ZF(a,l),m=i+is(t.cx,a,a/2),p=r+is(t.cy,l,l/2),b=is(t.innerRadius,f,0),_=Eve(n,t.outerRadius,f),T=t.maxRadius||Math.sqrt(a*a+l*l)/2;return{cx:m,cy:p,innerRadius:b,outerRadius:_,maxRadius:T}},Sve=(t,e)=>{var n=pa(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Tve=(t,e)=>{if(D.isValidElement(t))return D.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Gn("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=Ub(e,dve);return D.createElement(LI,Jc({},i,{type:"linear",className:n}))},Ive=(t,e,n)=>{if(D.isValidElement(t))return D.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),D.isValidElement(r)))return r;var i=Gn("recharts-pie-label-text",_U(t));return D.createElement(Fb,Jc({},e,{alignmentBaseline:"middle",className:i}),r)};function Cve(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:a,dataKey:l}=n;if(!r||!i||!e)return null;var f=so(n),m=dd(i),p=dd(a),b=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,_=e.map((T,N)=>{var j=(T.startAngle+T.endAngle)/2,M=zi(T.cx,T.cy,T.outerRadius+b,j),L=vi(vi(vi(vi({},f),T),{},{stroke:"none"},m),{},{index:N,textAnchor:_ve(M.x,T.cx)},M),z=vi(vi(vi(vi({},f),T),{},{fill:"none",stroke:T.fill},p),{},{index:N,points:[zi(T.cx,T.cy,T.outerRadius,j),M],key:"line"});return D.createElement(ms,{zIndex:Ii.label,key:"label-".concat(T.startAngle,"-").concat(T.endAngle,"-").concat(T.midAngle,"-").concat(N)},D.createElement(Xi,null,a&&Tve(a,z),Ive(i,L,br(T,l))))});return D.createElement(Xi,{className:"recharts-pie-labels"},_)}function Ove(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?D.createElement(XC,{label:i}):D.createElement(Cve,{sectors:e,props:n,showLabels:r})}function Nve(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:a,id:l}=t,f=Tt(Zc),m=Tt(qC),p=Tt(zpe),{onMouseEnter:b,onClick:_,onMouseLeave:T}=i,N=Ub(i,hve),j=tO(b,i.dataKey,l),M=nO(T),L=rO(_,i.dataKey,l);return e==null||e.length===0?null:D.createElement(D.Fragment,null,e.map((z,$)=>{if(z?.startAngle===0&&z?.endAngle===0&&e.length!==1)return null;var K=p==null||p===l,ee=String($)===f&&(m==null||i.dataKey===m)&&K,ue=f?r:null,Z=n&&ee?n:ue,V=vi(vi({},z),{},{stroke:z.stroke,tabIndex:-1,[TF]:$,[IF]:l});return D.createElement(Xi,Jc({key:"sector-".concat(z?.startAngle,"-").concat(z?.endAngle,"-").concat(z.midAngle,"-").concat($),tabIndex:-1,className:"recharts-pie-sector"},nb(N,z,$),{onMouseEnter:j(z,$),onMouseLeave:M(z,$),onClick:L(z,$)}),D.createElement(eO,Jc({option:a??Z,index:$,shapeType:"sector",isActive:ee},V)))}))}function Pve(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:a}=t,{cornerRadius:l,startAngle:f,endAngle:m,dataKey:p,nameKey:b,tooltipType:_}=n,T=Math.abs(n.minAngle),N=Sve(f,m),j=Math.abs(N),M=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,L=r.filter(Z=>br(Z,p,0)!==0).length,z=(j>=360?L:L-1)*M,$=j-L*T-z,K=r.reduce((Z,V)=>{var W=br(V,p,0);return Z+(St(W)?W:0)},0),ee;if(K>0){var ue;ee=r.map((Z,V)=>{var W=br(Z,p,0),U=br(Z,b,V),ae=Ave(n,a,Z),ie=(St(W)?W:0)/K,X,J=vi(vi({},Z),i&&i[V]&&i[V].props);V?X=ue.endAngle+pa(N)*M*(W!==0?1:0):X=f;var xe=X+pa(N)*((W!==0?T:0)+ie*$),de=(X+xe)/2,ye=(ae.innerRadius+ae.outerRadius)/2,_e=[{name:U,value:W,payload:J,dataKey:p,type:_,graphicalItemId:n.id}],qe=zi(ae.cx,ae.cy,ye,de);return ue=vi(vi(vi(vi({},n.presentationProps),{},{percent:ie,cornerRadius:typeof l=="string"?parseFloat(l):l,name:U,tooltipPayload:_e,midAngle:de,middleRadius:ye,tooltipPosition:qe},J),ae),{},{value:W,dataKey:p,startAngle:X,endAngle:xe,payload:J,paddingAngle:pa(N)*M}),ue})}return ee}function Rve(t){var{showLabels:e,sectors:n,children:r}=t,i=D.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return D.createElement(dye,{value:e?i:void 0},r)}function Dve(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:a,animationBegin:l,animationDuration:f,animationEasing:m,activeShape:p,inactiveShape:b,onAnimationStart:_,onAnimationEnd:T}=e,N=T0(e,"recharts-pie-"),j=n.current,[M,L]=D.useState(!1),z=D.useCallback(()=>{typeof T=="function"&&T(),L(!1)},[T]),$=D.useCallback(()=>{typeof _=="function"&&_(),L(!0)},[_]);return D.createElement(Rve,{showLabels:!M,sectors:i},D.createElement(S0,{animationId:N,begin:l,duration:f,isActive:a,easing:m,onAnimationStart:$,onAnimationEnd:z,key:N},K=>{var ee,ue=[],Z=i&&i[0],V=(ee=Z?.startAngle)!==null&&ee!==void 0?ee:0;return i?.forEach((W,U)=>{var ae=j&&j[U],ie=U>0?md(W,"paddingAngle",0):0;if(ae){var X=Jr(ae.endAngle-ae.startAngle,W.endAngle-W.startAngle,K),J=vi(vi({},W),{},{startAngle:V+ie,endAngle:V+X+ie});ue.push(J),V=J.endAngle}else{var{endAngle:xe,startAngle:de}=W,ye=Jr(0,xe-de,K),_e=vi(vi({},W),{},{startAngle:V+ie,endAngle:V+ye+ie});ue.push(_e),V=_e.endAngle}}),n.current=ue,D.createElement(Xi,null,D.createElement(Nve,{sectors:ue,activeShape:p,inactiveShape:b,allOtherPieProps:e,shape:e.shape,id:r}))}),D.createElement(Ove,{showLabels:!M,sectors:i,props:e}),e.children)}var kve={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ii.area};function Mve(t){var{id:e}=t,n=Ub(t,mve),{hide:r,className:i,rootTabIndex:a}=t,l=D.useMemo(()=>JC(t.children,B0),[t.children]),f=Tt(b=>Nye(b,e,l)),m=D.useRef(null),p=Gn("recharts-pie",i);return r||f==null?(m.current=null,D.createElement(Xi,{tabIndex:a,className:p})):D.createElement(ms,{zIndex:t.zIndex},D.createElement(wve,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:f,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),D.createElement(Xi,{tabIndex:a,className:p},D.createElement(Dve,{props:vi(vi({},n),{},{sectors:f}),previousSectorsRef:m,id:e})))}function OU(t){var e=Zi(t,kve),{id:n}=e,r=Ub(e,gve),i=so(r);return D.createElement(aO,{id:n,type:"pie"},a=>D.createElement(D.Fragment,null,D.createElement(fve,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),D.createElement(bve,Jc({},r,{id:a})),D.createElement(Mve,Jc({},r,{id:a}))))}OU.displayName="Pie";var jve=["points"];function N6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N6(Object(n),!0).forEach(function(r){Lve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lve(t,e,n){return(e=Bve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bve(t){var e=Fve(t,"string");return typeof e=="symbol"?e:e+""}function Fve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fx(){return fx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fx.apply(null,arguments)}function Vve(t,e){if(t==null)return{};var n,r,i=zve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function zve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Uve(t){var{option:e,dotProps:n,className:r}=t;if(D.isValidElement(e))return D.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Gn(r,typeof e!="boolean"?e.className:""),a=n??{},{points:l}=a,f=Vve(a,jve);return D.createElement(vU,fx({},f,{className:i}))}function qve(t,e){return t==null?!1:e?!0:t.length===1}function Gve(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:a,baseProps:l,needClip:f,clipPathId:m,zIndex:p=Ii.scatter}=t;if(!qve(e,n))return null;var b=SU(n),_=Ose(n),T=e.map((j,M)=>{var L,z,$=OE(OE(OE({r:3},l),_),{},{index:M,cx:(L=j.x)!==null&&L!==void 0?L:void 0,cy:(z=j.y)!==null&&z!==void 0?z:void 0,dataKey:a,value:j.value,payload:j.payload,points:e});return D.createElement(Uve,{key:"dot-".concat(M),option:n,dotProps:$,className:i})}),N={};return f&&m!=null&&(N.clipPath="url(#clipPath-".concat(b?"":"dots-").concat(m,")")),D.createElement(ms,{zIndex:p},D.createElement(Xi,fx({className:r},N),T))}function P6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function R6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P6(Object(n),!0).forEach(function(r){Hve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hve(t,e,n){return(e=Kve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kve(t){var e=Wve(t,"string");return typeof e=="symbol"?e:e+""}function Wve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NU=0,$ve={xAxis:{},yAxis:{},zAxis:{}},PU=Vs({name:"cartesianAxis",initialState:$ve,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Qr()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Qr()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Qr()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Qr()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Qr()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Qr()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Qr()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Qr()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Qr()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a,l=i.widthHistory||[];if(l.length===3&&l[0]===l[2]&&r===l[1]&&r!==i.width&&Math.abs(r-((a=l[0])!==null&&a!==void 0?a:0))<=1)return;var f=[...l,r].slice(-3);t.yAxis[n]=R6(R6({},i),{},{width:r,widthHistory:f})}}}}),{addXAxis:Yve,replaceXAxis:Xve,removeXAxis:Qve,addYAxis:Zve,replaceYAxis:Jve,removeYAxis:exe,addZAxis:OEe,replaceZAxis:NEe,removeZAxis:PEe,updateYAxisWidth:txe}=PU.actions,nxe=PU.reducer,rxe=Oe([Ji],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),ixe=Oe([rxe,Bu,Fu],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),sO=()=>Tt(ixe),axe=()=>Tt(Kpe);function D6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D6(Object(n),!0).forEach(function(r){sxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sxe(t,e,n){return(e=oxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oxe(t){var e=lxe(t,"string");return typeof e=="symbol"?e:e+""}function lxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uxe=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:a,clipPath:l}=t;if(i===!1||e.x==null||e.y==null)return null;var f={index:n,dataKey:a,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},m=NE(NE(NE({},f),dd(i)),_I(i)),p;return D.isValidElement(i)?p=D.cloneElement(i,m):typeof i=="function"?p=i(m):p=D.createElement(vU,m),D.createElement(Xi,{className:"recharts-active-dot",clipPath:l},p)};function cxe(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:a,zIndex:l=Ii.activeDot}=t,f=Tt(Zc),m=axe();if(e==null||m==null)return null;var p=e.find(b=>m.includes(b.payload));return li(p)?null:D.createElement(ms,{zIndex:l},D.createElement(uxe,{point:p,childIndex:Number(f),mainColor:n,dataKey:i,activeDot:r,clipPath:a}))}var k6=(t,e,n)=>{var r=n??t;if(!li(r))return is(r,e,0)},fxe=(t,e,n)=>{var r={},i=t.filter(Pb),a=t.filter(p=>p.stackId==null),l=i.reduce((p,b)=>{var _=p[b.stackId];return _==null&&(_=[]),_.push(b),p[b.stackId]=_,p},r),f=Object.entries(l).map(p=>{var b,[_,T]=p,N=T.map(M=>M.dataKey),j=k6(e,n,(b=T[0])===null||b===void 0?void 0:b.barSize);return{stackId:_,dataKeys:N,barSize:j}}),m=a.map(p=>{var b=[p.dataKey].filter(T=>T!=null),_=k6(e,n,p.barSize);return{stackId:void 0,dataKeys:b,barSize:_}});return[...f,...m]};function M6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M6(Object(n),!0).forEach(function(r){dxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dxe(t,e,n){return(e=hxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hxe(t){var e=mxe(t,"string");return typeof e=="symbol"?e:e+""}function mxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gxe(t,e,n,r,i){var a,l=r.length;if(!(l<1)){var f=is(t,n,0,!0),m,p=[];if(hn((a=r[0])===null||a===void 0?void 0:a.barSize)){var b=!1,_=n/l,T=r.reduce(($,K)=>$+(K.barSize||0),0);T+=(l-1)*f,T>=n&&(T-=(l-1)*f,f=0),T>=n&&_>0&&(b=!0,_*=.9,T=l*_);var N=(n-T)/2>>0,j={offset:N-f,size:0};m=r.reduce(($,K)=>{var ee,ue={stackId:K.stackId,dataKeys:K.dataKeys,position:{offset:j.offset+j.size+f,size:b?_:(ee=K.barSize)!==null&&ee!==void 0?ee:0}},Z=[...$,ue];return j=ue.position,Z},p)}else{var M=is(e,n,0,!0);n-2*M-(l-1)*f<=0&&(f=0);var L=(n-2*M-(l-1)*f)/l;L>1&&(L>>=0);var z=hn(i)?Math.min(L,i):L;m=r.reduce(($,K,ee)=>[...$,{stackId:K.stackId,dataKeys:K.dataKeys,position:{offset:M+(L+f)*ee+(L-z)/2,size:z}}],p)}return m}}var pxe=(t,e,n,r,i,a,l)=>{var f=li(l)?e:l,m=gxe(n,r,i!==a?i:a,t,f);return i!==a&&m!=null&&(m=m.map(p=>dy(dy({},p),{},{position:dy(dy({},p.position),{},{offset:p.position.offset-i/2})}))),m},yxe=(t,e)=>{var n=pC(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(l=>l.key===n)}}}},vxe=(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}};function xxe(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&hn(t.zIndex)?t.zIndex:e}var RU=t=>{var{chartData:e}=t,n=Gr(),r=Ba();return D.useEffect(()=>r?()=>{}:(n(z8(e)),()=>{n(z8(void 0))}),[e,n,r]),null},j6={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},DU=Vs({name:"brush",initialState:j6,reducers:{setBrushSettings(t,e){return e.payload==null?j6:e.payload}}}),{setBrushSettings:REe}=DU.actions,bxe=DU.reducer,wxe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},_xe=t=>{var{x1:e,y1:n,x2:r,y2:i}=t;return wxe({x:e,y:n},{x:r,y:i})};function Exe(t){return(t%180+180)%180}var Axe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Exe(i),l=a*Math.PI/180,f=Math.atan(r/n),m=l>f&&l<Math.PI-f?r/Math.sin(l):n/Math.cos(l);return Math.abs(m)},Sxe={dots:[],areas:[],lines:[]},kU=Vs({name:"referenceElements",initialState:Sxe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Wo(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Wo(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Wo(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:DEe,removeDot:kEe,addArea:MEe,removeArea:jEe,addLine:Txe,removeLine:Ixe}=kU.actions,Cxe=kU.reducer,MU=D.createContext(void 0),Oxe=t=>{var{children:e}=t,[n]=D.useState("".concat(Op("recharts"),"-clip")),r=sO();if(r==null)return null;var{x:i,y:a,width:l,height:f}=r;return D.createElement(MU.Provider,{value:n},D.createElement("defs",null,D.createElement("clipPath",{id:n},D.createElement("rect",{x:i,y:a,height:f,width:l}))),e)},Nxe=()=>D.useContext(MU);class Pxe{constructor(e){var{x:n,y:r}=e;this.xAxisScale=n,this.yAxisScale=r}map(e,n){var r,i,{position:a}=n;return{x:(r=this.xAxisScale.map(e.x,{position:a}))!==null&&r!==void 0?r:0,y:(i=this.yAxisScale.map(e.y,{position:a}))!==null&&i!==void 0?i:0}}mapWithFallback(e,n){var r,i,{position:a,fallback:l}=n,f,m;return l==="rangeMin"?f=this.yAxisScale.rangeMin():l==="rangeMax"?f=this.yAxisScale.rangeMax():f=0,l==="rangeMin"?m=this.xAxisScale.rangeMin():l==="rangeMax"?m=this.xAxisScale.rangeMax():m=0,{x:(r=this.xAxisScale.map(e.x,{position:a}))!==null&&r!==void 0?r:m,y:(i=this.yAxisScale.map(e.y,{position:a}))!==null&&i!==void 0?i:f}}isInRange(e){var{x:n,y:r}=e,i=n==null||this.xAxisScale.isInRange(n),a=r==null||this.yAxisScale.isInRange(r);return i&&a}}function L6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function B6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L6(Object(n),!0).forEach(function(r){Rxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rxe(t,e,n){return(e=Dxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dxe(t){var e=kxe(t,"string");return typeof e=="symbol"?e:e+""}function kxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dx(){return dx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dx.apply(null,arguments)}var Mxe=(t,e)=>{var n;if(D.isValidElement(t))n=D.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!hn(e.x1)||!hn(e.y1)||!hn(e.x2)||!hn(e.y2))return null;n=D.createElement("line",dx({},e,{className:"recharts-reference-line-line"}))}return n},jxe=(t,e,n,r,i,a)=>{var{x:l,width:f}=a,m=i.map(t,{position:n});if(!hn(m)||e==="discard"&&!i.isInRange(m))return null;var p=[{x:l+f,y:m},{x:l,y:m}];return r==="left"?p.reverse():p},Lxe=(t,e,n,r,i,a)=>{var{y:l,height:f}=a,m=i.map(t,{position:n});if(!hn(m)||e==="discard"&&!i.isInRange(m))return null;var p=[{x:m,y:l+f},{x:m,y:l}];return r==="top"?p.reverse():p},Bxe=(t,e,n,r)=>{var i=[r.mapWithFallback(t[0],{position:n,fallback:"rangeMin"}),r.mapWithFallback(t[1],{position:n,fallback:"rangeMax"})];return e==="discard"&&i.some(a=>!r.isInRange(a))?null:i},Fxe=(t,e,n,r,i,a,l)=>{var{x:f,y:m,segment:p,ifOverflow:b}=l,_=Io(f),T=Io(m);return T?jxe(m,b,r,a,e,n):_?Lxe(f,b,r,i,t,n):p!=null&&p.length===2?Bxe(p,b,r,new Pxe({x:t,y:e})):null};function Vxe(t){var e=Gr();return D.useEffect(()=>(e(Txe(t)),()=>{e(Ixe(t))})),null}function zxe(t){var{xAxisId:e,yAxisId:n,shape:r,className:i,ifOverflow:a}=t,l=Ba(),f=Nxe(),m=Tt(V=>Ml(V,e)),p=Tt(V=>jl(V,n)),b=Tt(V=>mm(V,"xAxis",e,l)),_=Tt(V=>mm(V,"yAxis",n,l)),T=_0();if(!f||!T||m==null||p==null||b==null||_==null)return null;var N=Fxe(b,_,T,t.position,m.orientation,p.orientation,t);if(!N)return null;var j=N[0],M=N[1];if(j==null||M==null)return null;var{x:L,y:z}=j,{x:$,y:K}=M,ee=a==="hidden"?"url(#".concat(f,")"):void 0,ue=B6(B6({clipPath:ee},as(t)),{},{x1:L,y1:z,x2:$,y2:K}),Z=_xe({x1:L,y1:z,x2:$,y2:K});return D.createElement(ms,{zIndex:t.zIndex},D.createElement(Xi,{className:Gn("recharts-reference-line",i)},Mxe(r,ue),D.createElement(dU,dx({},Z,{lowerWidth:Z.width,upperWidth:Z.width}),D.createElement(mU,{label:t.label}),t.children)))}var Uxe={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",label:!1,stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Ii.line};function xS(t){var e=Zi(t,Uxe);return D.createElement(D.Fragment,null,D.createElement(Vxe,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),D.createElement(zxe,e))}xS.displayName="ReferenceLine";function jU(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function qxe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Axe(r,n)}function Gxe(t,e,n){var r=n==="width",{x:i,y:a,width:l,height:f}=t;return e===1?{start:r?i:a,end:r?i+l:a+f}:{start:r?i+l:a+f,end:r?i:a}}function qp(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function Hxe(t,e){return jU(t,e+1)}function Kxe(t,e,n,r,i){for(var a=(r||[]).slice(),{start:l,end:f}=e,m=0,p=1,b=l,_=function(){var j=r?.[m];if(j===void 0)return{v:jU(r,p)};var M=m,L,z=()=>(L===void 0&&(L=n(j,M)),L),$=j.coordinate,K=m===0||qp(t,$,z,b,f);K||(m=0,b=l,p+=1),K&&(b=$+t*(z()/2+i),m+=p)},T;p<=a.length;)if(T=_(),T)return T.v;return[]}function Wxe(t,e,n,r,i){var a=(r||[]).slice(),l=a.length;if(l===0)return[];for(var{start:f,end:m}=e,p=1;p<=l;p++){for(var b=(l-1)%p,_=f,T=!0,N=function(){var ee=r[M];if(ee==null)return 0;var ue=M,Z,V=()=>(Z===void 0&&(Z=n(ee,ue)),Z),W=ee.coordinate,U=M===b||qp(t,W,V,_,m);if(!U)return T=!1,1;U&&(_=W+t*(V()/2+i))},j,M=b;M<l&&(j=N(),!(j!==0&&j===1));M+=p);if(T){for(var L=[],z=b;z<l;z+=p){var $=r[z];$!=null&&L.push($)}return L}}return[]}function F6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ja(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F6(Object(n),!0).forEach(function(r){$xe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $xe(t,e,n){return(e=Yxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yxe(t){var e=Xxe(t,"string");return typeof e=="symbol"?e:e+""}function Xxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qxe(t,e,n,r,i){for(var a=(r||[]).slice(),l=a.length,{start:f}=e,{end:m}=e,p=function(T){var N=a[T];if(N==null)return 1;var j=N,M,L=()=>(M===void 0&&(M=n(N,T)),M);if(T===l-1){var z=t*(j.coordinate+t*L()/2-m);a[T]=j=Ja(Ja({},j),{},{tickCoord:z>0?j.coordinate-z*t:j.coordinate})}else a[T]=j=Ja(Ja({},j),{},{tickCoord:j.coordinate});if(j.tickCoord!=null){var $=qp(t,j.tickCoord,L,f,m);$&&(m=j.tickCoord-t*(L()/2+i),a[T]=Ja(Ja({},j),{},{isShow:!0}))}},b=l-1;b>=0;b--)p(b);return a}function Zxe(t,e,n,r,i,a){var l=(r||[]).slice(),f=l.length,{start:m,end:p}=e;if(a){var b=r[f-1];if(b!=null){var _=n(b,f-1),T=t*(b.coordinate+t*_/2-p);if(l[f-1]=b=Ja(Ja({},b),{},{tickCoord:T>0?b.coordinate-T*t:b.coordinate}),b.tickCoord!=null){var N=qp(t,b.tickCoord,()=>_,m,p);N&&(p=b.tickCoord-t*(_/2+i),l[f-1]=Ja(Ja({},b),{},{isShow:!0}))}}}for(var j=a?f-1:f,M=function($){var K=l[$];if(K==null)return 1;var ee=K,ue,Z=()=>(ue===void 0&&(ue=n(K,$)),ue);if($===0){var V=t*(ee.coordinate-t*Z()/2-m);l[$]=ee=Ja(Ja({},ee),{},{tickCoord:V<0?ee.coordinate-V*t:ee.coordinate})}else l[$]=ee=Ja(Ja({},ee),{},{tickCoord:ee.coordinate});if(ee.tickCoord!=null){var W=qp(t,ee.tickCoord,Z,m,p);W&&(m=ee.tickCoord+t*(Z()/2+i),l[$]=Ja(Ja({},ee),{},{isShow:!0}))}},L=0;L<j;L++)M(L);return l}function oO(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:l,orientation:f,interval:m,tickFormatter:p,unit:b,angle:_}=t;if(!i||!i.length||!r)return[];if(St(m)||bb.isSsr){var T;return(T=Hxe(i,St(m)?m:0))!==null&&T!==void 0?T:[]}var N=[],j=f==="top"||f==="bottom"?"width":"height",M=b&&j==="width"?fp(b,{fontSize:e,letterSpacing:n}):{width:0,height:0},L=(ue,Z)=>{var V=typeof p=="function"?p(ue.value,Z):ue.value;return j==="width"?qxe(fp(V,{fontSize:e,letterSpacing:n}),M,_):fp(V,{fontSize:e,letterSpacing:n})[j]},z=i[0],$=i[1],K=i.length>=2&&z!=null&&$!=null?pa($.coordinate-z.coordinate):1,ee=Gxe(a,K,j);return m==="equidistantPreserveStart"?Kxe(K,ee,L,i,l):m==="equidistantPreserveEnd"?Wxe(K,ee,L,i,l):(m==="preserveStart"||m==="preserveStartEnd"?N=Zxe(K,ee,L,i,l,m==="preserveStartEnd"):N=Qxe(K,ee,L,i,l),N.filter(ue=>ue.isShow))}var Jxe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,l=0;if(e){Array.from(e).forEach(b=>{if(b){var _=b.getBoundingClientRect();_.width>l&&(l=_.width)}});var f=n?n.getBoundingClientRect().width:0,m=i+a,p=l+m+f+(n?r:0);return Math.round(p)}return 0},ebe=["axisLine","width","height","className","hide","ticks","axisType"];function tbe(t,e){if(t==null)return{};var n,r,i=nbe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function nbe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function bd(){return bd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bd.apply(null,arguments)}function V6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V6(Object(n),!0).forEach(function(r){rbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rbe(t,e,n){return(e=ibe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ibe(t){var e=abe(t,"string");return typeof e=="symbol"?e:e+""}function abe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yu={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ii.axis};function sbe(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:l,axisLine:f,otherSvgProps:m}=t;if(!f)return null;var p=pi(pi(pi({},m),so(f)),{},{fill:"none"});if(a==="top"||a==="bottom"){var b=+(a==="top"&&!l||a==="bottom"&&l);p=pi(pi({},p),{},{x1:e,y1:n+b*i,x2:e+r,y2:n+b*i})}else{var _=+(a==="left"&&!l||a==="right"&&l);p=pi(pi({},p),{},{x1:e+_*r,y1:n,x2:e+_*r,y2:n+i})}return D.createElement("line",bd({},p,{className:Gn("recharts-cartesian-axis-line",md(f,"className"))}))}function obe(t,e,n,r,i,a,l,f,m){var p,b,_,T,N,j,M=f?-1:1,L=t.tickSize||l,z=St(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":p=b=t.coordinate,T=n+ +!f*i,_=T-M*L,j=_-M*m,N=z;break;case"left":_=T=t.coordinate,b=e+ +!f*r,p=b-M*L,N=p-M*m,j=z;break;case"right":_=T=t.coordinate,b=e+ +f*r,p=b+M*L,N=p+M*m,j=z;break;default:p=b=t.coordinate,T=n+ +f*i,_=T+M*L,j=_+M*m,N=z;break}return{line:{x1:p,y1:_,x2:b,y2:T},tick:{x:N,y:j}}}function lbe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function ube(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function cbe(t){var{option:e,tickProps:n,value:r}=t,i,a=Gn(n.className,"recharts-cartesian-axis-tick-value");if(D.isValidElement(e))i=D.cloneElement(e,pi(pi({},n),{},{className:a}));else if(typeof e=="function")i=e(pi(pi({},n),{},{className:a}));else{var l="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(l=Gn(l,_U(e))),i=D.createElement(Fb,bd({},n,{className:l}),r)}return i}var fbe=D.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:l,unit:f,padding:m,tickTextProps:p,orientation:b,mirror:_,x:T,y:N,width:j,height:M,tickSize:L,tickMargin:z,fontSize:$,letterSpacing:K,getTicksConfig:ee,events:ue,axisType:Z}=t,V=oO(pi(pi({},ee),{},{ticks:n}),$,K),W=lbe(b,_),U=ube(b,_),ae=so(ee),ie=dd(r),X={};typeof i=="object"&&(X=i);var J=pi(pi({},ae),{},{fill:"none"},X),xe=V.map(_e=>pi({entry:_e},obe(_e,T,N,j,M,b,L,_,z))),de=xe.map(_e=>{var{entry:qe,line:ze}=_e;return D.createElement(Xi,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(qe.value,"-").concat(qe.coordinate,"-").concat(qe.tickCoord)},i&&D.createElement("line",bd({},J,ze,{className:Gn("recharts-cartesian-axis-tick-line",md(i,"className"))})))}),ye=xe.map((_e,qe)=>{var ze,et,{entry:me,tick:Se}=_e,Xe=pi(pi(pi(pi({verticalAnchor:U},ae),{},{textAnchor:W,stroke:"none",fill:a},Se),{},{index:qe,payload:me,visibleTicksCount:V.length,tickFormatter:l,padding:m},p),{},{angle:(ze=(et=p?.angle)!==null&&et!==void 0?et:ae.angle)!==null&&ze!==void 0?ze:0}),Ve=pi(pi({},Xe),ie);return D.createElement(Xi,bd({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(me.value,"-").concat(me.coordinate,"-").concat(me.tickCoord)},nb(ue,me,qe)),r&&D.createElement(cbe,{option:r,tickProps:Ve,value:"".concat(typeof l=="function"?l(me.value,qe):me.value).concat(f||"")}))});return D.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(Z,"-ticks")},ye.length>0&&D.createElement(ms,{zIndex:Ii.label},D.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(Z,"-tick-labels"),ref:e},ye)),de.length>0&&D.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(Z,"-tick-lines")},de))}),dbe=D.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:l,ticks:f,axisType:m}=t,p=tbe(t,ebe),[b,_]=D.useState(""),[T,N]=D.useState(""),j=D.useRef(null);D.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var L;return Jxe({ticks:j.current,label:(L=t.labelRef)===null||L===void 0?void 0:L.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var M=D.useCallback(L=>{if(L){var z=L.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=z;var $=z[0];if($){var K=window.getComputedStyle($),ee=K.fontSize,ue=K.letterSpacing;(ee!==b||ue!==T)&&(_(ee),N(ue))}}},[b,T]);return l||r!=null&&r<=0||i!=null&&i<=0?null:D.createElement(ms,{zIndex:t.zIndex},D.createElement(Xi,{className:Gn("recharts-cartesian-axis",a)},D.createElement(sbe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:so(t)}),D.createElement(fbe,{ref:M,axisType:m,events:p,fontSize:b,getTicksConfig:t,height:t.height,letterSpacing:T,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:f,unit:t.unit,width:t.width,x:t.x,y:t.y}),D.createElement(dU,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},D.createElement(mU,{label:t.label,labelRef:t.labelRef}),t.children)))}),lO=D.forwardRef((t,e)=>{var n=Zi(t,yu);return D.createElement(dbe,bd({},n,{ref:e}))});lO.displayName="CartesianAxis";var hbe=["x1","y1","x2","y2","key"],mbe=["offset"],gbe=["xAxisId","yAxisId"],pbe=["xAxisId","yAxisId"];function z6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ts(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z6(Object(n),!0).forEach(function(r){ybe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ybe(t,e,n){return(e=vbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vbe(t){var e=xbe(t,"string");return typeof e=="symbol"?e:e+""}function xbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hf(){return Hf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hf.apply(null,arguments)}function hx(t,e){if(t==null)return{};var n,r,i=bbe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bbe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var wbe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:l,ry:f}=t;return D.createElement("rect",{x:r,y:i,ry:f,width:a,height:l,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function LU(t){var{option:e,lineItemProps:n}=t,r;if(D.isValidElement(e))r=D.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:l,x2:f,y2:m,key:p}=n,b=hx(n,hbe),_=(i=so(b))!==null&&i!==void 0?i:{},{offset:T}=_,N=hx(_,mbe);r=D.createElement("line",Hf({},N,{x1:a,y1:l,x2:f,y2:m,fill:"none",key:p}))}return r}function _be(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:l}=t,f=hx(t,gbe),m=i.map((p,b)=>{var _=ts(ts({},f),{},{x1:e,y1:p,x2:e+n,y2:p,key:"line-".concat(b),index:b});return D.createElement(LU,{key:"line-".concat(b),option:r,lineItemProps:_})});return D.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function Ebe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:l}=t,f=hx(t,pbe),m=i.map((p,b)=>{var _=ts(ts({},f),{},{x1:p,y1:e,x2:p,y2:e+n,key:"line-".concat(b),index:b});return D.createElement(LU,{option:r,lineItemProps:_,key:"line-".concat(b)})});return D.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function Abe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:l,horizontalPoints:f,horizontal:m=!0}=t;if(!m||!e||!e.length||f==null)return null;var p=f.map(_=>Math.round(_+i-i)).sort((_,T)=>_-T);i!==p[0]&&p.unshift(0);var b=p.map((_,T)=>{var N=p[T+1],j=N==null,M=j?i+l-_:N-_;if(M<=0)return null;var L=T%e.length;return D.createElement("rect",{key:"react-".concat(T),y:_,x:r,height:M,width:a,stroke:"none",fill:e[L],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},b)}function Sbe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:l,height:f,verticalPoints:m}=t;if(!e||!n||!n.length)return null;var p=m.map(_=>Math.round(_+i-i)).sort((_,T)=>_-T);i!==p[0]&&p.unshift(0);var b=p.map((_,T)=>{var N=p[T+1],j=N==null,M=j?i+l-_:N-_;if(M<=0)return null;var L=T%n.length;return D.createElement("rect",{key:"react-".concat(T),x:_,y:a,width:M,height:f,stroke:"none",fill:n[L],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},b)}var Tbe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return EF(oO(ts(ts(ts({},yu),n),{},{ticks:AF(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},Ibe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return EF(oO(ts(ts(ts({},yu),n),{},{ticks:AF(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},Cbe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ii.grid};function Vy(t){var e=RF(),n=DF(),r=PF(),i=ts(ts({},Zi(t,Cbe)),{},{x:St(t.x)?t.x:r.left,y:St(t.y)?t.y:r.top,width:St(t.width)?t.width:r.width,height:St(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:l,x:f,y:m,width:p,height:b,syncWithTicks:_,horizontalValues:T,verticalValues:N}=i,j=Ba(),M=Tt(U=>O8(U,"xAxis",a,j)),L=Tt(U=>O8(U,"yAxis",l,j));if(!Nl(p)||!Nl(b)||!St(f)||!St(m))return null;var z=i.verticalCoordinatesGenerator||Tbe,$=i.horizontalCoordinatesGenerator||Ibe,{horizontalPoints:K,verticalPoints:ee}=i;if((!K||!K.length)&&typeof $=="function"){var ue=T&&T.length,Z=$({yAxis:L?ts(ts({},L),{},{ticks:ue?T:L.ticks}):void 0,width:e??p,height:n??b,offset:r},ue?!0:_);Bv(Array.isArray(Z),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof Z,"]")),Array.isArray(Z)&&(K=Z)}if((!ee||!ee.length)&&typeof z=="function"){var V=N&&N.length,W=z({xAxis:M?ts(ts({},M),{},{ticks:V?N:M.ticks}):void 0,width:e??p,height:n??b,offset:r},V?!0:_);Bv(Array.isArray(W),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof W,"]")),Array.isArray(W)&&(ee=W)}return D.createElement(ms,{zIndex:i.zIndex},D.createElement("g",{className:"recharts-cartesian-grid"},D.createElement(wbe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),D.createElement(Abe,Hf({},i,{horizontalPoints:K})),D.createElement(Sbe,Hf({},i,{verticalPoints:ee})),D.createElement(_be,Hf({},i,{offset:r,horizontalPoints:K,xAxis:M,yAxis:L})),D.createElement(Ebe,Hf({},i,{offset:r,verticalPoints:ee,xAxis:M,yAxis:L}))))}Vy.displayName="CartesianGrid";var Obe={},BU=Vs({name:"errorBars",initialState:Obe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:LEe,replaceErrorBar:BEe,removeErrorBar:FEe}=BU.actions,Nbe=BU.reducer,Pbe=["children"];function Rbe(t,e){if(t==null)return{};var n,r,i=Dbe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Dbe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var kbe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Mbe=D.createContext(kbe);function FU(t){var{children:e}=t,n=Rbe(t,Pbe);return D.createElement(Mbe.Provider,{value:n},e)}function uO(t,e){var n,r,i=Tt(p=>Ml(p,t)),a=Tt(p=>jl(p,e)),l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:ca.allowDataOverflow,f=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:fa.allowDataOverflow,m=l||f;return{needClip:m,needClipX:l,needClipY:f}}function VU(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=sO(),{needClipX:a,needClipY:l,needClip:f}=uO(e,n);if(!f||!i)return null;var{x:m,y:p,width:b,height:_}=i;return D.createElement("clipPath",{id:"clipPath-".concat(r)},D.createElement("rect",{x:a?m:m-b/2,y:l?p:p-_/2,width:a?b:b*2,height:l?_:_*2}))}var zU=(t,e,n,r)=>Qc(t,"xAxis",e,r),UU=(t,e,n,r)=>Xc(t,"xAxis",e,r),qU=(t,e,n,r)=>Qc(t,"yAxis",n,r),GU=(t,e,n,r)=>Xc(t,"yAxis",n,r),jbe=Oe([Kn,zU,qU,UU,GU],(t,e,n,r,i)=>Lu(t,"xAxis")?um(e,r,!1):um(n,i,!1)),Lbe=(t,e,n,r,i)=>i;function Bbe(t){return t.type==="line"}var Fbe=Oe([kb,Lbe],(t,e)=>t.filter(Bbe).find(n=>n.id===e)),Vbe=Oe([Kn,zU,qU,UU,GU,Fbe,jbe,oC],(t,e,n,r,i,a,l,f)=>{var{chartData:m,dataStartIndex:p,dataEndIndex:b}=f;if(!(a==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||l==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:_,data:T}=a,N;if(T!=null&&T.length>0?N=T:N=m?.slice(p,b+1),N!=null)return Iwe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:_,bandSize:l,displayedData:N})}});function zbe(t){var e=dd(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:a}=e,l=Number(i),f=Number(a);return(Number.isNaN(l)||l<0)&&(l=n),(Number.isNaN(f)||f<0)&&(f=r),{r:l,strokeWidth:f}}return{r:n,strokeWidth:r}}var PE={exports:{}},RE={};var U6;function Ube(){if(U6)return RE;U6=1;var t=gm();function e(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,l=t.useMemo,f=t.useDebugValue;return RE.useSyncExternalStoreWithSelector=function(m,p,b,_,T){var N=i(null);if(N.current===null){var j={hasValue:!1,value:null};N.current=j}else j=N.current;N=l(function(){function L(ue){if(!z){if(z=!0,$=ue,ue=_(ue),T!==void 0&&j.hasValue){var Z=j.value;if(T(Z,ue))return K=Z}return K=ue}if(Z=K,n($,ue))return Z;var V=_(ue);return T!==void 0&&T(Z,V)?($=ue,Z):($=ue,K=V)}var z=!1,$,K,ee=b===void 0?null:b;return[function(){return L(p())},ee===null?void 0:function(){return L(ee())}]},[p,b,_,T]);var M=r(m,N[0],N[1]);return a(function(){j.hasValue=!0,j.value=M},[M]),f(M),M},RE}var q6;function qbe(){return q6||(q6=1,PE.exports=Ube()),PE.exports}qbe();function Gbe(t){t()}function Hbe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Gbe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var G6={notify(){},get:()=>[]};function Kbe(t,e){let n,r=G6,i=0,a=!1;function l(M){b();const L=r.subscribe(M);let z=!1;return()=>{z||(z=!0,L(),_())}}function f(){r.notify()}function m(){j.onStateChange&&j.onStateChange()}function p(){return a}function b(){i++,n||(n=t.subscribe(m),r=Hbe())}function _(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=G6)}function T(){a||(a=!0,b())}function N(){a&&(a=!1,_())}const j={addNestedSub:l,notifyNestedSubs:f,handleChangeWrapper:m,isSubscribed:p,trySubscribe:T,tryUnsubscribe:N,getListeners:()=>r};return j}var Wbe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$be=Wbe(),Ybe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Xbe=Ybe(),Qbe=()=>$be||Xbe?D.useLayoutEffect:D.useEffect,Zbe=Qbe();function H6(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Jbe(t,e){if(H6(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!H6(t[n[i]],e[n[i]]))return!1;return!0}var ewe=Symbol.for("react-redux-context"),twe=typeof globalThis<"u"?globalThis:{};function nwe(){if(!D.createContext)return{};const t=twe[ewe]??=new Map;let e=t.get(D.createContext);return e||(e=D.createContext(null),t.set(D.createContext,e)),e}var rwe=nwe();function iwe(t){const{children:e,context:n,serverState:r,store:i}=t,a=D.useMemo(()=>{const m=Kbe(i);return{store:i,subscription:m,getServerState:r?()=>r:void 0}},[i,r]),l=D.useMemo(()=>i.getState(),[i]);Zbe(()=>{const{subscription:m}=a;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),l!==i.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[a,l]);const f=n||rwe;return D.createElement(f.Provider,{value:a},e)}var awe=iwe,swe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function owe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function qb(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(swe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!Jbe(t[r],e[r]))return!1}else if(!owe(t[r],e[r]))return!1;return!0}var lwe=["id"],uwe=["type","layout","connectNulls","needClip","shape"],cwe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Gp(){return Gp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gp.apply(null,arguments)}function K6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K6(Object(n),!0).forEach(function(r){fwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fwe(t,e,n){return(e=dwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dwe(t){var e=hwe(t,"string");return typeof e=="symbol"?e:e+""}function hwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cO(t,e){if(t==null)return{};var n,r,i=mwe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mwe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var gwe=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:Dm(n,e),payload:t}]},pwe=D.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:a,name:l,hide:f,unit:m,tooltipType:p,id:b}=t,_={dataDefinedOnItem:n,getPosition:Nd,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:Dm(l,e),hide:f,type:p,color:r,unit:m,graphicalItemId:b}};return D.createElement(iO,{tooltipEntrySettings:_})}),HU=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function ywe(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var vwe=(t,e,n)=>{var r=n.reduce((N,j)=>N+j);if(!r)return HU(e,t);for(var i=Math.floor(t/r),a=t%r,l=e-t,f=[],m=0,p=0;m<n.length;p+=(b=n[m])!==null&&b!==void 0?b:0,++m){var b,_=n[m];if(_!=null&&p+_>a){f=[...n.slice(0,m),a-p];break}}var T=f.length%2===0?[0,l]:[l];return[...ywe(n,i),...f,...T].map(N=>"".concat(N,"px")).join(", ")};function xwe(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:a,needClip:l}=r,{id:f}=r,m=cO(r,lwe),p=so(m);return D.createElement(Gve,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:p,needClip:l,clipPathId:e})}function bwe(t){var{showLabels:e,children:n,points:r}=t,i=D.useMemo(()=>r?.map(a=>{var l,f,m={x:(l=a.x)!==null&&l!==void 0?l:0,y:(f=a.y)!==null&&f!==void 0?f:0,width:0,lowerWidth:0,upperWidth:0,height:0};return pl(pl({},m),{},{value:a.value,payload:a.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[r]);return D.createElement(pU,{value:e?i:void 0},n)}function W6(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:a}=t,{type:l,layout:f,connectNulls:m,needClip:p,shape:b}=a,_=cO(a,uwe),T=pl(pl({},as(_)),{},{fill:"none",className:"recharts-line-curve",clipPath:p?"url(#clipPath-".concat(e,")"):void 0,points:r,type:l,layout:f,connectNulls:m,strokeDasharray:i??a.strokeDasharray});return D.createElement(D.Fragment,null,r?.length>1&&D.createElement(eO,Gp({shapeType:"curve",option:b},T,{pathRef:n})),D.createElement(xwe,{points:r,clipPathId:e,props:a}))}function wwe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function _we(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:a}=t,{points:l,strokeDasharray:f,isAnimationActive:m,animationBegin:p,animationDuration:b,animationEasing:_,animateNewValues:T,width:N,height:j,onAnimationEnd:M,onAnimationStart:L}=n,z=i.current,$=T0(l,"recharts-line-"),K=D.useRef($),[ee,ue]=D.useState(!1),Z=!ee,V=D.useCallback(()=>{typeof M=="function"&&M(),ue(!1)},[M]),W=D.useCallback(()=>{typeof L=="function"&&L(),ue(!0)},[L]),U=wwe(r.current),ae=D.useRef(0);K.current!==$&&(ae.current=a.current,K.current=$);var ie=ae.current;return D.createElement(bwe,{points:l,showLabels:Z},n.children,D.createElement(S0,{animationId:$,begin:p,duration:b,isActive:m,easing:_,onAnimationEnd:V,onAnimationStart:W,key:$},X=>{var J=Jr(ie,U+ie,X),xe=Math.min(J,U),de;if(m)if(f){var ye="".concat(f).split(/[,\s]+/gim).map(ze=>parseFloat(ze));de=vwe(xe,U,ye)}else de=HU(U,xe);else de=f==null?void 0:String(f);if(X>0&&U>0&&(i.current=l,a.current=Math.max(a.current,xe)),z){var _e=z.length/l.length,qe=X===1?l:l.map((ze,et)=>{var me=Math.floor(et*_e);if(z[me]){var Se=z[me];return pl(pl({},ze),{},{x:Jr(Se.x,ze.x,X),y:Jr(Se.y,ze.y,X)})}return T?pl(pl({},ze),{},{x:Jr(N*2,ze.x,X),y:Jr(j/2,ze.y,X)}):pl(pl({},ze),{},{x:ze.x,y:ze.y})});return i.current=qe,D.createElement(W6,{props:n,points:qe,clipPathId:e,pathRef:r,strokeDasharray:de})}return D.createElement(W6,{props:n,points:l,clipPathId:e,pathRef:r,strokeDasharray:de})}),D.createElement(XC,{label:n.label}))}function Ewe(t){var{clipPathId:e,props:n}=t,r=D.useRef(null),i=D.useRef(0),a=D.useRef(null);return D.createElement(_we,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:a})}var Awe=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:br(t.payload,e)}};class Swe extends D.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:a,yAxisId:l,top:f,left:m,width:p,height:b,id:_,needClip:T,zIndex:N}=this.props;if(e)return null;var j=Gn("recharts-line",i),M=_,{r:L,strokeWidth:z}=zbe(n),$=SU(n),K=L*2+z,ee=T?"url(#clipPath-".concat($?"":"dots-").concat(M,")"):void 0;return D.createElement(ms,{zIndex:N},D.createElement(Xi,{className:j},T&&D.createElement("defs",null,D.createElement(VU,{clipPathId:M,xAxisId:a,yAxisId:l}),!$&&D.createElement("clipPath",{id:"clipPath-dots-".concat(M)},D.createElement("rect",{x:m-K/2,y:f-K/2,width:p+K,height:b+K}))),D.createElement(FU,{xAxisId:a,yAxisId:l,data:r,dataPointFormatter:Awe,errorBarOffset:0},D.createElement(Ewe,{props:this.props,clipPathId:M}))),D.createElement(cxe,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:ee}))}}var KU={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Ii.line,type:"linear"};function Twe(t){var e=Zi(t,KU),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:l,connectNulls:f,dot:m,hide:p,isAnimationActive:b,label:_,legendType:T,xAxisId:N,yAxisId:j,id:M}=e,L=cO(e,cwe),{needClip:z}=uO(N,j),$=sO(),K=Pd(),ee=Ba(),ue=Tt(ae=>Vbe(ae,N,j,ee,M));if(K!=="horizontal"&&K!=="vertical"||ue==null||$==null)return null;var{height:Z,width:V,x:W,y:U}=$;return D.createElement(Swe,Gp({},L,{id:M,connectNulls:f,dot:m,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:l,isAnimationActive:b,hide:p,label:_,legendType:T,xAxisId:N,yAxisId:j,points:ue,layout:K,height:Z,width:V,left:W,top:U,needClip:z}))}function Iwe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,dataKey:l,bandSize:f,displayedData:m}=t;return m.map((p,b)=>{var _=br(p,l);if(e==="horizontal"){var T=Ck({axis:n,ticks:i,bandSize:f,entry:p,index:b}),N=li(_)?null:r.scale.map(_);return{x:T,y:N??null,value:_,payload:p}}var j=li(_)?null:n.scale.map(_),M=Ck({axis:r,ticks:a,bandSize:f,entry:p,index:b});return j==null||M==null?null:{x:j,y:M,value:_,payload:p}}).filter(Boolean)}function Cwe(t){var e=Zi(t,KU),n=Ba();return D.createElement(aO,{id:e.id,type:"line"},r=>D.createElement(D.Fragment,null,D.createElement(TU,{legendPayload:gwe(e)}),D.createElement(pwe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),D.createElement(CU,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),D.createElement(Twe,Gp({},e,{id:r}))))}var WU=D.memo(Cwe,qb);WU.displayName="Line";function kd(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:NU}function Md(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:NU}var Owe="Invariant failed";function Nwe(t,e){throw new Error(Owe)}function bS(){return bS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bS.apply(null,arguments)}function mx(t){return D.createElement(eO,bS({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var Pwe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(St(e))return e;var a=St(r)||li(r);return a?e(r,i):(a||Nwe(),n)}},Rwe=(t,e,n)=>n,Dwe=(t,e)=>e,F0=Oe([kb,Dwe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),kwe=Oe([F0],t=>t?.maxBarSize),Mwe=(t,e,n,r)=>r,jwe=Oe([Kn,kb,kd,Md,Rwe],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),Lwe=(t,e,n)=>{var r=Kn(t),i=kd(t,e),a=Md(t,e);if(!(i==null||a==null))return r==="horizontal"?dS(t,"yAxis",a,n):dS(t,"xAxis",i,n)},Bwe=(t,e)=>{var n=Kn(t),r=kd(t,e),i=Md(t,e);if(!(r==null||i==null))return n==="horizontal"?C8(t,"xAxis",r):C8(t,"yAxis",i)},Fwe=Oe([jwe,zme,Bwe],fxe),Vwe=(t,e,n)=>{var r,i,a=F0(t,e);if(a==null)return 0;var l=kd(t,e),f=Md(t,e);if(l==null||f==null)return 0;var m=Kn(t),p=WV(t),{maxBarSize:b}=a,_=li(b)?p:b,T,N;return m==="horizontal"?(T=Qc(t,"xAxis",l,n),N=Xc(t,"xAxis",l,n)):(T=Qc(t,"yAxis",f,n),N=Xc(t,"yAxis",f,n)),(r=(i=um(T,N,!0))!==null&&i!==void 0?i:_)!==null&&r!==void 0?r:0},$U=(t,e,n)=>{var r=Kn(t),i=kd(t,e),a=Md(t,e);if(!(i==null||a==null)){var l,f;return r==="horizontal"?(l=Qc(t,"xAxis",i,n),f=Xc(t,"xAxis",i,n)):(l=Qc(t,"yAxis",a,n),f=Xc(t,"yAxis",a,n)),um(l,f)}},zwe=Oe([Fwe,WV,Vme,$V,Vwe,$U,kwe],pxe),Uwe=(t,e,n)=>{var r=kd(t,e);if(r!=null)return Qc(t,"xAxis",r,n)},qwe=(t,e,n)=>{var r=Md(t,e);if(r!=null)return Qc(t,"yAxis",r,n)},Gwe=(t,e,n)=>{var r=kd(t,e);if(r!=null)return Xc(t,"xAxis",r,n)},Hwe=(t,e,n)=>{var r=Md(t,e);if(r!=null)return Xc(t,"yAxis",r,n)},Kwe=Oe([zwe,F0],vxe),Wwe=Oe([Lwe,F0],yxe),$we=Oe([Ji,RI,Uwe,qwe,Gwe,Hwe,Kwe,Kn,Rme,$U,Wwe,F0,Mwe],(t,e,n,r,i,a,l,f,m,p,b,_,T)=>{var{chartData:N,dataStartIndex:j,dataEndIndex:M}=m;if(!(_==null||l==null||e==null||f!=="horizontal"&&f!=="vertical"||n==null||r==null||i==null||a==null||p==null)){var{data:L}=_,z;if(L!=null&&L.length>0?z=L:z=N?.slice(j,M+1),z!=null)return __e({layout:f,barSettings:_,pos:l,parentViewBox:e,bandSize:p,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:b,displayedData:z,offset:t,cells:T,dataStartIndex:j})}}),Ywe=["index"];function wS(){return wS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wS.apply(null,arguments)}function Xwe(t,e){if(t==null)return{};var n,r,i=Qwe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Qwe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var YU=D.createContext(void 0),Zwe=t=>{var e=D.useContext(YU);if(e!=null)return e.stackId;if(t!=null)return zue(t)},Jwe=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),e_e=t=>{var e=D.useContext(YU);if(e!=null){var{stackId:n}=e;return"url(#".concat(Jwe(n,t),")")}},XU=t=>{var{index:e}=t,n=Xwe(t,Ywe),r=e_e(e);return D.createElement(Xi,wS({className:"recharts-bar-stack-layer",clipPath:r},n))},t_e=["onMouseEnter","onMouseLeave","onClick"],n_e=["value","background","tooltipPosition"],r_e=["id"],i_e=["onMouseEnter","onClick","onMouseLeave"];function Pu(){return Pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pu.apply(null,arguments)}function $6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$6(Object(n),!0).forEach(function(r){a_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a_e(t,e,n){return(e=s_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s_e(t){var e=o_e(t,"string");return typeof e=="symbol"?e:e+""}function o_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gx(t,e){if(t==null)return{};var n,r,i=l_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function l_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var u_e=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:Dm(n,e),payload:t}]},c_e=D.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:l,unit:f,tooltipType:m,id:p}=t,b={dataDefinedOnItem:void 0,getPosition:Nd,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:Dm(a,e),hide:l,type:m,color:i,unit:f,graphicalItemId:p}};return D.createElement(iO,{tooltipEntrySettings:b})});function f_e(t){var e=Tt(Zc),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:l,onMouseLeave:f,onClick:m}=a,p=gx(a,t_e),b=tO(l,r,a.id),_=nO(f),T=rO(m,r,a.id);if(!i||n==null)return null;var N=dd(i);return D.createElement(ms,{zIndex:xxe(i,Ii.barBackground)},n.map((j,M)=>{var{value:L,background:z,tooltipPosition:$}=j,K=gx(j,n_e);if(!z)return null;var ee=b(j,M),ue=_(j,M),Z=T(j,M),V=cs(cs(cs(cs(cs({option:i,isActive:String(M)===e},K),{},{fill:"#eee"},z),N),nb(p,j,M)),{},{onMouseEnter:ee,onMouseLeave:ue,onClick:Z,dataKey:r,index:M,className:"recharts-bar-background-rectangle"});return D.createElement(mx,Pu({key:"background-bar-".concat(M)},V))}))}function d_e(t){var{showLabels:e,children:n,rects:r}=t,i=r?.map(a=>{var l={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return cs(cs({},l),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:l,fill:a.fill})});return D.createElement(pU,{value:e?i:void 0},n)}function h_e(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:a,dataKey:l}=t,f=Tt(Zc),m=Tt(qC),p=n&&String(a)===f&&(m==null||l===m),b=p?n:e;return p?D.createElement(ms,{zIndex:Ii.activeBar},D.createElement(XU,{index:a},D.createElement(mx,Pu({},r,{name:String(r.name)},i,{isActive:p,option:b,index:a,dataKey:l})))):D.createElement(mx,Pu({},r,{name:String(r.name)},i,{isActive:p,option:b,index:a,dataKey:l}))}function m_e(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:a}=t;return D.createElement(mx,Pu({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:a}))}function g_e(t){var e,{data:n,props:r}=t,i=(e=so(r))!==null&&e!==void 0?e:{},{id:a}=i,l=gx(i,r_e),{shape:f,dataKey:m,activeBar:p}=r,{onMouseEnter:b,onClick:_,onMouseLeave:T}=r,N=gx(r,i_e),j=tO(b,m,a),M=nO(T),L=rO(_,m,a);return n?D.createElement(D.Fragment,null,n.map((z,$)=>D.createElement(XU,Pu({index:$,key:"rectangle-".concat(z?.x,"-").concat(z?.y,"-").concat(z?.value,"-").concat($),className:"recharts-bar-rectangle"},nb(N,z,$),{onMouseEnter:j(z,$),onMouseLeave:M(z,$),onClick:L(z,$)}),p?D.createElement(h_e,{shape:f,activeBar:p,baseProps:l,entry:z,index:$,dataKey:m}):D.createElement(m_e,{shape:f,baseProps:l,entry:z,index:$,dataKey:m})))):null}function p_e(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:l,animationDuration:f,animationEasing:m,onAnimationEnd:p,onAnimationStart:b}=e,_=n.current,T=T0(e,"recharts-bar-"),[N,j]=D.useState(!1),M=!N,L=D.useCallback(()=>{typeof p=="function"&&p(),j(!1)},[p]),z=D.useCallback(()=>{typeof b=="function"&&b(),j(!0)},[b]);return D.createElement(d_e,{showLabels:M,rects:r},D.createElement(S0,{animationId:T,begin:l,duration:f,isActive:a,easing:m,onAnimationEnd:L,onAnimationStart:z,key:T},$=>{var K=$===1?r:r?.map((ee,ue)=>{var Z=_&&_[ue];if(Z)return cs(cs({},ee),{},{x:Jr(Z.x,ee.x,$),y:Jr(Z.y,ee.y,$),width:Jr(Z.width,ee.width,$),height:Jr(Z.height,ee.height,$)});if(i==="horizontal"){var V=Jr(0,ee.height,$),W=Jr(ee.stackedBarStart,ee.y,$);return cs(cs({},ee),{},{y:W,height:V})}var U=Jr(0,ee.width,$),ae=Jr(ee.stackedBarStart,ee.x,$);return cs(cs({},ee),{},{width:U,x:ae})});return $>0&&(n.current=K??null),K==null?null:D.createElement(Xi,null,D.createElement(g_e,{props:e,data:K}))}),D.createElement(XC,{label:e.label}),e.children)}function y_e(t){var e=D.useRef(null);return D.createElement(p_e,{previousRectanglesRef:e,props:t})}var QU=0,v_e=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:br(t,e)}};class x_e extends D.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:l,needClip:f,background:m,id:p}=this.props;if(e||n==null)return null;var b=Gn("recharts-bar",i),_=p;return D.createElement(Xi,{className:b,id:p},f&&D.createElement("defs",null,D.createElement(VU,{clipPathId:_,xAxisId:a,yAxisId:l})),D.createElement(Xi,{className:"recharts-bar-rectangles",clipPath:f?"url(#clipPath-".concat(_,")"):void 0},D.createElement(f_e,{data:n,dataKey:r,background:m,allOtherBarProps:this.props}),D.createElement(y_e,this.props)))}}var b_e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:QU,xAxisId:0,yAxisId:0,zIndex:Ii.bar};function w_e(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:l,animationBegin:f,animationDuration:m,animationEasing:p,isAnimationActive:b}=t,{needClip:_}=uO(e,n),T=Pd(),N=Ba(),j=JC(t.children,B0),M=Tt($=>$we($,t.id,N,j));if(T!=="vertical"&&T!=="horizontal")return null;var L,z=M?.[0];return z==null||z.height==null||z.width==null?L=0:L=T==="vertical"?z.height/2:z.width/2,D.createElement(FU,{xAxisId:e,yAxisId:n,data:M,dataPointFormatter:v_e,errorBarOffset:L},D.createElement(x_e,Pu({},t,{layout:T,needClip:_,data:M,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:l,animationBegin:f,animationDuration:m,animationEasing:p,isAnimationActive:b})))}function __e(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:l,yAxis:f,xAxisTicks:m,yAxisTicks:p,stackedData:b,displayedData:_,offset:T,cells:N,parentViewBox:j,dataStartIndex:M}=t,L=e==="horizontal"?f:l,z=b?L.scale.domain():null,$=Uue({numericAxis:L}),K=L.scale.map($);return _.map((ee,ue)=>{var Z,V,W,U,ae,ie;if(b){var X=b[ue+M];if(X==null)return null;Z=jue(X,z)}else Z=br(ee,n),Array.isArray(Z)||(Z=[$,Z]);var J=Pwe(r,QU)(Z[1],ue);if(e==="horizontal"){var xe,de=f.scale.map(Z[0]),ye=f.scale.map(Z[1]);if(de==null||ye==null)return null;V=Ok({axis:l,ticks:m,bandSize:a,offset:i.offset,entry:ee,index:ue}),W=(xe=ye??de)!==null&&xe!==void 0?xe:void 0,U=i.size;var _e=de-ye;if(ae=Ol(_e)?0:_e,ie={x:V,y:T.top,width:U,height:T.height},Math.abs(J)>0&&Math.abs(ae)<Math.abs(J)){var qe=pa(ae||J)*(Math.abs(J)-Math.abs(ae));W-=qe,ae+=qe}}else{var ze=l.scale.map(Z[0]),et=l.scale.map(Z[1]);if(ze==null||et==null)return null;if(V=ze,W=Ok({axis:f,ticks:p,bandSize:a,offset:i.offset,entry:ee,index:ue}),U=et-ze,ae=i.size,ie={x:T.left,y:W,width:T.width,height:ae},Math.abs(J)>0&&Math.abs(U)<Math.abs(J)){var me=pa(U||J)*(Math.abs(J)-Math.abs(U));U+=me}}if(V==null||W==null||U==null||ae==null)return null;var Se=cs(cs({},ee),{},{stackedBarStart:K,x:V,y:W,width:U,height:ae,value:b?Z:Z[1],payload:ee,background:ie,tooltipPosition:{x:V+U/2,y:W+ae/2},parentViewBox:j},N&&N[ue]&&N[ue].props);return Se}).filter(Boolean)}function E_e(t){var e=Zi(t,b_e),n=Zwe(e.stackId),r=Ba();return D.createElement(aO,{id:e.id,type:"bar"},i=>D.createElement(D.Fragment,null,D.createElement(TU,{legendPayload:u_e(e)}),D.createElement(c_e,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),D.createElement(CU,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),D.createElement(ms,{zIndex:e.zIndex},D.createElement(w_e,Pu({},e,{id:i})))))}var _S=D.memo(E_e,qb);_S.displayName="Bar";var A_e=["domain","range"],S_e=["domain","range"];function Y6(t,e){if(t==null)return{};var n,r,i=T_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function T_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function X6(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function ZU(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=Y6(t,A_e),{domain:a,range:l}=e,f=Y6(e,S_e);return!X6(n,a)||!X6(r,l)?!1:qb(i,f)}var I_e=["type"],C_e=["dangerouslySetInnerHTML","ticks","scale"],O_e=["id","scale"];function ES(){return ES=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ES.apply(null,arguments)}function Q6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Z6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q6(Object(n),!0).forEach(function(r){N_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function N_e(t,e,n){return(e=P_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P_e(t){var e=R_e(t,"string");return typeof e=="symbol"?e:e+""}function R_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AS(t,e){if(t==null)return{};var n,r,i=D_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function D_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function k_e(t){var e=Gr(),n=D.useRef(null),r=kF(),{type:i}=t,a=AS(t,I_e),l=Ob(r,"xAxis",i),f=D.useMemo(()=>{if(l!=null)return Z6(Z6({},a),{},{type:l})},[a,l]);return D.useLayoutEffect(()=>{f!=null&&(n.current===null?e(Yve(f)):n.current!==f&&e(Xve({prev:n.current,next:f})),n.current=f)},[f,e]),D.useLayoutEffect(()=>()=>{n.current&&(e(Qve(n.current)),n.current=null)},[e]),null}var M_e=t=>{var{xAxisId:e,className:n}=t,r=Tt(RI),i=Ba(),a="xAxis",l=Tt(z=>Iz(z,a,e,i)),f=Tt(z=>Ez(z,e)),m=Tt(z=>zge(z,e)),p=Tt(z=>iz(z,e));if(f==null||m==null||p==null)return null;var{dangerouslySetInnerHTML:b,ticks:_,scale:T}=t,N=AS(t,C_e),{id:j,scale:M}=p,L=AS(p,O_e);return D.createElement(lO,ES({},N,L,{x:m.x,y:m.y,width:f.width,height:f.height,className:Gn("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:l,axisType:a}))},j_e={allowDataOverflow:ca.allowDataOverflow,allowDecimals:ca.allowDecimals,allowDuplicatedCategory:ca.allowDuplicatedCategory,angle:ca.angle,axisLine:yu.axisLine,height:ca.height,hide:!1,includeHidden:ca.includeHidden,interval:ca.interval,label:!1,minTickGap:ca.minTickGap,mirror:ca.mirror,orientation:ca.orientation,padding:ca.padding,reversed:ca.reversed,scale:ca.scale,tick:ca.tick,tickCount:ca.tickCount,tickLine:yu.tickLine,tickSize:yu.tickSize,type:ca.type,xAxisId:0},L_e=t=>{var e=Zi(t,j_e);return D.createElement(D.Fragment,null,D.createElement(k_e,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),D.createElement(M_e,e))},zy=D.memo(L_e,ZU);zy.displayName="XAxis";var B_e=["type"],F_e=["dangerouslySetInnerHTML","ticks","scale"],V_e=["id","scale"];function SS(){return SS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SS.apply(null,arguments)}function J6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function e5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J6(Object(n),!0).forEach(function(r){z_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function z_e(t,e,n){return(e=U_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U_e(t){var e=q_e(t,"string");return typeof e=="symbol"?e:e+""}function q_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TS(t,e){if(t==null)return{};var n,r,i=G_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function G_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function H_e(t){var e=Gr(),n=D.useRef(null),r=kF(),{type:i}=t,a=TS(t,B_e),l=Ob(r,"yAxis",i),f=D.useMemo(()=>{if(l!=null)return e5(e5({},a),{},{type:l})},[l,a]);return D.useLayoutEffect(()=>{f!=null&&(n.current===null?e(Zve(f)):n.current!==f&&e(Jve({prev:n.current,next:f})),n.current=f)},[f,e]),D.useLayoutEffect(()=>()=>{n.current&&(e(exe(n.current)),n.current=null)},[e]),null}function K_e(t){var{yAxisId:e,className:n,width:r,label:i}=t,a=D.useRef(null),l=D.useRef(null),f=Tt(RI),m=Ba(),p=Gr(),b="yAxis",_=Tt(Z=>Az(Z,e)),T=Tt(Z=>qge(Z,e)),N=Tt(Z=>Iz(Z,b,e,m)),j=Tt(Z=>az(Z,e));if(D.useLayoutEffect(()=>{if(!(r!=="auto"||!_||YC(i)||D.isValidElement(i)||j==null)){var Z=a.current;if(Z){var V=Z.getCalculatedWidth();Math.round(_.width)!==Math.round(V)&&p(txe({id:e,width:V}))}}},[N,_,p,i,e,r,j]),_==null||T==null||j==null)return null;var{dangerouslySetInnerHTML:M,ticks:L,scale:z}=t,$=TS(t,F_e),{id:K,scale:ee}=j,ue=TS(j,V_e);return D.createElement(lO,SS({},$,ue,{ref:a,labelRef:l,x:T.x,y:T.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:_.width,height:_.height,className:Gn("recharts-".concat(b," ").concat(b),n),viewBox:f,ticks:N,axisType:b}))}var W_e={allowDataOverflow:fa.allowDataOverflow,allowDecimals:fa.allowDecimals,allowDuplicatedCategory:fa.allowDuplicatedCategory,angle:fa.angle,axisLine:yu.axisLine,hide:!1,includeHidden:fa.includeHidden,interval:fa.interval,label:!1,minTickGap:fa.minTickGap,mirror:fa.mirror,orientation:fa.orientation,padding:fa.padding,reversed:fa.reversed,scale:fa.scale,tick:fa.tick,tickCount:fa.tickCount,tickLine:yu.tickLine,tickSize:yu.tickSize,type:fa.type,width:fa.width,yAxisId:0},$_e=t=>{var e=Zi(t,W_e);return D.createElement(D.Fragment,null,D.createElement(H_e,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),D.createElement(K_e,e))},Uy=D.memo($_e,ZU);Uy.displayName="YAxis";var Y_e=(t,e)=>e,fO=Oe([Y_e,Kn,tz,xa,Gz,Uu,a0e,Ji],d0e),dO=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},JU=Co("mouseClick"),eq=b0();eq.startListening({actionCreator:JU,effect:(t,e)=>{var n=t.payload,r=fO(e.getState(),dO(n));r?.activeIndex!=null&&e.dispatch(rpe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var IS=Co("mouseMove"),tq=b0(),hy=null;tq.startListening({actionCreator:IS,effect:(t,e)=>{var n=t.payload;hy!==null&&cancelAnimationFrame(hy);var r=dO(n);hy=requestAnimationFrame(()=>{var i=e.getState(),a=LC(i,i.tooltip.settings.shared);if(a==="axis"){var l=fO(i,r);l?.activeIndex!=null?e.dispatch(Mz({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):e.dispatch(kz())}hy=null})}});function X_e(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var t5={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},nq=Vs({name:"rootProps",initialState:t5,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:t5.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),Q_e=nq.reducer,{updateOptions:Z_e}=nq.actions,J_e=null,e2e={updatePolarOptions:(t,e)=>e.payload},rq=Vs({name:"polarOptions",initialState:J_e,reducers:e2e}),{updatePolarOptions:t2e}=rq.actions,n2e=rq.reducer,iq=Co("keyDown"),aq=Co("focus"),hO=b0();hO.startListening({actionCreator:iq,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var l=BC(i,Um(n),k0(n),j0(n)),f=l==null?-1:Number(l);if(!(!Number.isFinite(f)||f<0)){var m=Uu(n);if(a==="Enter"){var p=ox(n,"axis","hover",String(i.index));e.dispatch(mS({active:!i.active,activeIndex:i.index,activeCoordinate:p}));return}var b=Wge(n),_=b==="left-to-right"?1:-1,T=a==="ArrowRight"?1:-1,N=f+T*_;if(!(m==null||N>=m.length||N<0)){var j=ox(n,"axis","hover",String(N));e.dispatch(mS({active:!0,activeIndex:N.toString(),activeCoordinate:j}))}}}}}});hO.startListening({actionCreator:aq,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",l=ox(n,"axis","hover",String(a));e.dispatch(mS({active:!0,activeIndex:a,activeCoordinate:l}))}}}});var _o=Co("externalEvent"),sq=b0(),DE=new Map;sq.startListening({actionCreator:_o,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=DE.get(i);a!==void 0&&cancelAnimationFrame(a);var l=requestAnimationFrame(()=>{try{var f=e.getState(),m={activeCoordinate:qpe(f),activeDataKey:qC(f),activeIndex:Zc(f),activeLabel:Wz(f),activeTooltipIndex:Zc(f),isTooltipActive:Gpe(f)};n(m,r)}finally{DE.delete(i)}});DE.set(i,l)}}});var r2e=Oe([Vm],t=>t.tooltipItemPayloads),i2e=Oe([r2e,(t,e)=>e,(t,e,n)=>n],(t,e,n)=>{if(e!=null){var r=t.find(a=>a.settings.graphicalItemId===n);if(r!=null){var{getPosition:i}=r;if(i!=null)return i(e)}}}),oq=Co("touchMove"),lq=b0();lq.startListening({actionCreator:oq,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=LC(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var l=fO(r,dO({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));l?.activeIndex!=null&&e.dispatch(Mz({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(i==="item"){var f,m=n.touches[0];if(document.elementFromPoint==null||m==null)return;var p=document.elementFromPoint(m.clientX,m.clientY);if(!p||!p.getAttribute)return;var b=p.getAttribute(TF),_=(f=p.getAttribute(IF))!==null&&f!==void 0?f:void 0,T=zm(r).find(M=>M.id===_);if(b==null||T==null||_==null)return;var{dataKey:N}=T,j=i2e(r,b,_);e.dispatch(Dz({activeDataKey:N,activeIndex:b,activeCoordinate:j,activeGraphicalItemId:_}))}}}});var a2e=$B({brush:bxe,cartesianAxis:nxe,chartData:q0e,errorBars:Nbe,graphicalItems:uve,layout:Pue,legend:jce,options:B0e,polarAxis:Eye,polarOptions:n2e,referenceElements:Cxe,rootProps:Q_e,tooltip:ipe,zIndex:T0e}),s2e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return nue({reducer:a2e,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([eq.middleware,tq.middleware,hO.middleware,sq.middleware,lq.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(uF({type:"raf"}))},devTools:{serialize:{replacer:X_e},name:"recharts-".concat(n)}})};function uq(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Ba(),a=D.useRef(null);if(i)return n;a.current==null&&(a.current=s2e(e,r));var l=SI;return D.createElement(awe,{context:l,store:a.current},n)}function o2e(t){var{layout:e,margin:n}=t,r=Gr(),i=Ba();return D.useEffect(()=>{i||(r(Cue(e)),r(Iue(n)))},[r,i,e,n]),null}var cq=D.memo(o2e,qb);function fq(t){var e=Gr();return D.useEffect(()=>{e(Z_e(t))},[e,t]),null}function n5(t){var{zIndex:e,isPanorama:n}=t,r=D.useRef(null),i=Gr();return D.useLayoutEffect(()=>(r.current&&i(A0e({zIndex:e,element:r.current,isPanorama:n})),()=>{i(S0e({zIndex:e,isPanorama:n}))}),[i,e,n]),D.createElement("g",{tabIndex:-1,ref:r})}function r5(t){var{children:e,isPanorama:n}=t,r=Tt(m0e);if(!r||r.length===0)return e;var i=r.filter(l=>l<0),a=r.filter(l=>l>0);return D.createElement(D.Fragment,null,i.map(l=>D.createElement(n5,{key:l,zIndex:l,isPanorama:n})),e,a.map(l=>D.createElement(n5,{key:l,zIndex:l,isPanorama:n})))}var l2e=["children"];function u2e(t,e){if(t==null)return{};var n,r,i=c2e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function c2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function px(){return px=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},px.apply(null,arguments)}var f2e={width:"100%",height:"100%",display:"block"},d2e=D.forwardRef((t,e)=>{var n=RF(),r=DF(),i=KF();if(!Nl(n)||!Nl(r))return null;var{children:a,otherAttributes:l,title:f,desc:m}=t,p,b;return l!=null&&(typeof l.tabIndex=="number"?p=l.tabIndex:p=i?0:void 0,typeof l.role=="string"?b=l.role:b=i?"application":void 0),D.createElement(dB,px({},l,{title:f,desc:m,role:b,tabIndex:p,width:n,height:r,style:f2e,ref:e}),a)}),h2e=t=>{var{children:e}=t,n=Tt(pb);if(!n)return null;var{width:r,height:i,y:a,x:l}=n;return D.createElement(dB,{width:r,height:i,x:l,y:a},e)},i5=D.forwardRef((t,e)=>{var{children:n}=t,r=u2e(t,l2e),i=Ba();return i?D.createElement(h2e,null,D.createElement(r5,{isPanorama:!0},n)):D.createElement(d2e,px({ref:e},r),D.createElement(r5,{isPanorama:!1},n))});function m2e(){var t=Gr(),[e,n]=D.useState(null),r=Tt($ue);return D.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;hn(a)&&a!==r&&t(Nue(a))}},[e,t,r]),n}function a5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function g2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a5(Object(n),!0).forEach(function(r){p2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p2e(t,e,n){return(e=y2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y2e(t){var e=v2e(t,"string");return typeof e=="symbol"?e:e+""}function v2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vc(){return Vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vc.apply(null,arguments)}var x2e=()=>(Z0e(),null);function yx(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var b2e=D.forwardRef((t,e)=>{var n,r,i=D.useRef(null),[a,l]=D.useState({containerWidth:yx((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:yx((r=t.style)===null||r===void 0?void 0:r.height)}),f=D.useCallback((p,b)=>{l(_=>{var T=Math.round(p),N=Math.round(b);return _.containerWidth===T&&_.containerHeight===N?_:{containerWidth:T,containerHeight:N}})},[]),m=D.useCallback(p=>{if(typeof e=="function"&&e(p),p!=null&&typeof ResizeObserver<"u"){var{width:b,height:_}=p.getBoundingClientRect();f(b,_);var T=j=>{var M=j[0];if(M!=null){var{width:L,height:z}=M.contentRect;f(L,z)}},N=new ResizeObserver(T);N.observe(p),i.current=N}},[e,f]);return D.useEffect(()=>()=>{var p=i.current;p?.disconnect()},[f]),D.createElement(D.Fragment,null,D.createElement(E0,{width:a.containerWidth,height:a.containerHeight}),D.createElement("div",Vc({ref:m},t)))}),w2e=D.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=D.useState({containerWidth:yx(n),containerHeight:yx(r)}),l=D.useCallback((m,p)=>{a(b=>{var _=Math.round(m),T=Math.round(p);return b.containerWidth===_&&b.containerHeight===T?b:{containerWidth:_,containerHeight:T}})},[]),f=D.useCallback(m=>{if(typeof e=="function"&&e(m),m!=null){var{width:p,height:b}=m.getBoundingClientRect();l(p,b)}},[e,l]);return D.createElement(D.Fragment,null,D.createElement(E0,{width:i.containerWidth,height:i.containerHeight}),D.createElement("div",Vc({ref:f},t)))}),_2e=D.forwardRef((t,e)=>{var{width:n,height:r}=t;return D.createElement(D.Fragment,null,D.createElement(E0,{width:n,height:r}),D.createElement("div",Vc({ref:e},t)))}),E2e=D.forwardRef((t,e)=>{var{width:n,height:r}=t;return typeof n=="string"||typeof r=="string"?D.createElement(w2e,Vc({},t,{ref:e})):typeof n=="number"&&typeof r=="number"?D.createElement(_2e,Vc({},t,{width:n,height:r,ref:e})):D.createElement(D.Fragment,null,D.createElement(E0,{width:n,height:r}),D.createElement("div",Vc({ref:e},t)))});function A2e(t){return t?b2e:E2e}var S2e=D.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:l,onDoubleClick:f,onMouseDown:m,onMouseEnter:p,onMouseLeave:b,onMouseMove:_,onMouseUp:T,onTouchEnd:N,onTouchMove:j,onTouchStart:M,style:L,width:z,responsive:$,dispatchTouchEvents:K=!0}=t,ee=D.useRef(null),ue=Gr(),[Z,V]=D.useState(null),[W,U]=D.useState(null),ae=m2e(),ie=DI(),X=ie?.width>0?ie.width:z,J=ie?.height>0?ie.height:i,xe=D.useCallback(Ne=>{ae(Ne),typeof e=="function"&&e(Ne),V(Ne),U(Ne),Ne!=null&&(ee.current=Ne)},[ae,e,V,U]),de=D.useCallback(Ne=>{ue(JU(Ne)),ue(_o({handler:a,reactEvent:Ne}))},[ue,a]),ye=D.useCallback(Ne=>{ue(IS(Ne)),ue(_o({handler:p,reactEvent:Ne}))},[ue,p]),_e=D.useCallback(Ne=>{ue(kz()),ue(_o({handler:b,reactEvent:Ne}))},[ue,b]),qe=D.useCallback(Ne=>{ue(IS(Ne)),ue(_o({handler:_,reactEvent:Ne}))},[ue,_]),ze=D.useCallback(()=>{ue(aq())},[ue]),et=D.useCallback(Ne=>{ue(iq(Ne.key))},[ue]),me=D.useCallback(Ne=>{ue(_o({handler:l,reactEvent:Ne}))},[ue,l]),Se=D.useCallback(Ne=>{ue(_o({handler:f,reactEvent:Ne}))},[ue,f]),Xe=D.useCallback(Ne=>{ue(_o({handler:m,reactEvent:Ne}))},[ue,m]),Ve=D.useCallback(Ne=>{ue(_o({handler:T,reactEvent:Ne}))},[ue,T]),pt=D.useCallback(Ne=>{ue(_o({handler:M,reactEvent:Ne}))},[ue,M]),$e=D.useCallback(Ne=>{K&&ue(oq(Ne)),ue(_o({handler:j,reactEvent:Ne}))},[ue,K,j]),yt=D.useCallback(Ne=>{ue(_o({handler:N,reactEvent:Ne}))},[ue,N]),ut=A2e($);return D.createElement(eU.Provider,{value:Z},D.createElement(jse.Provider,{value:W},D.createElement(ut,{width:X??L?.width,height:J??L?.height,className:Gn("recharts-wrapper",r),style:g2e({position:"relative",cursor:"default",width:X,height:J},L),onClick:de,onContextMenu:me,onDoubleClick:Se,onFocus:ze,onKeyDown:et,onMouseDown:Xe,onMouseEnter:ye,onMouseLeave:_e,onMouseMove:qe,onMouseUp:Ve,onTouchEnd:yt,onTouchMove:$e,onTouchStart:pt,ref:xe},D.createElement(x2e,null),n)))}),T2e=["width","height","responsive","children","className","style","compact","title","desc"];function I2e(t,e){if(t==null)return{};var n,r,i=C2e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function C2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var dq=D.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:l,style:f,compact:m,title:p,desc:b}=t,_=I2e(t,T2e),T=so(_);return m?D.createElement(D.Fragment,null,D.createElement(E0,{width:n,height:r}),D.createElement(i5,{otherAttributes:T,title:p,desc:b},a)):D.createElement(S2e,{className:l,style:f,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},D.createElement(i5,{otherAttributes:T,title:p,desc:b,ref:e},D.createElement(Oxe,null,a)))});function CS(){return CS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CS.apply(null,arguments)}var O2e={top:5,right:5,bottom:5,left:5},N2e={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:O2e,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},hq=D.forwardRef(function(e,n){var r,i=Zi(e.categoricalChartProps,N2e),{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:f,tooltipPayloadSearcher:m,categoricalChartProps:p}=e,b={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:f,tooltipPayloadSearcher:m,eventEmitter:void 0};return D.createElement(uq,{preloadedState:{options:b},reduxStoreName:(r=p.id)!==null&&r!==void 0?r:a},D.createElement(RU,{chartData:p.data}),D.createElement(cq,{layout:i.layout,margin:i.margin}),D.createElement(fq,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),D.createElement(dq,CS({},i,{ref:n})))}),P2e=["axis"],R2e=D.forwardRef((t,e)=>D.createElement(hq,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:P2e,tooltipPayloadSearcher:$C,categoricalChartProps:t,ref:e})),D2e=["axis","item"],s5=D.forwardRef((t,e)=>D.createElement(hq,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:D2e,tooltipPayloadSearcher:$C,categoricalChartProps:t,ref:e}));function k2e(t){var e=Gr();return D.useEffect(()=>{e(t2e(t))},[e,t]),null}var M2e=["layout"];function OS(){return OS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OS.apply(null,arguments)}function j2e(t,e){if(t==null)return{};var n,r,i=L2e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function L2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var B2e={top:5,right:5,bottom:5,left:5},mq={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:B2e,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},F2e=D.forwardRef(function(e,n){var r,i=Zi(e.categoricalChartProps,mq),{layout:a}=i,l=j2e(i,M2e),{chartName:f,defaultTooltipEventType:m,validateTooltipEventTypes:p,tooltipPayloadSearcher:b}=e,_={chartName:f,defaultTooltipEventType:m,validateTooltipEventTypes:p,tooltipPayloadSearcher:b,eventEmitter:void 0};return D.createElement(uq,{preloadedState:{options:_},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:f},D.createElement(RU,{chartData:i.data}),D.createElement(cq,{layout:a,margin:i.margin}),D.createElement(fq,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),D.createElement(k2e,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),D.createElement(dq,OS({},l,{ref:n})))});function o5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o5(Object(n),!0).forEach(function(r){V2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function V2e(t,e,n){return(e=z2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z2e(t){var e=U2e(t,"string");return typeof e=="symbol"?e:e+""}function U2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var q2e=["item"],G2e=l5(l5({},mq),{},{layout:"centric",startAngle:0,endAngle:360}),H2e=D.forwardRef((t,e)=>{var n=Zi(t,G2e);return D.createElement(F2e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:q2e,tooltipPayloadSearcher:$C,categoricalChartProps:n,ref:e})});function K2e(){const t=cd(L=>L.profile),[e,n]=D.useState([]),[r,i]=D.useState([]),[a,l]=D.useState([]),[f,m]=D.useState([]),[p,b]=D.useState(0);D.useEffect(()=>{t&&_()},[t,p]);const _=async()=>{if(!t)return;const z=W4(new Date,p),$=fd(z,{weekStartsOn:1}),K=[],ee=[],ue=t.waterGoalMl||2e3;for(let U=0;U<7;U++){const ae=Dy($,U),ie=Ns(ae,"yyyy-MM-dd"),X=await Je.dailyLogs.where("date").equals(ie).first();K.push({dag:Ns(ae,"EEE",{locale:_h}),punten:X?.totalPointsUsed??0,budget:t.dailyPointsBudget}),ee.push({dag:Ns(ae,"EEE",{locale:_h}),water:X?.waterMl??0,doel:ue})}n(K),i(ee);const Z={Ontbijt:0,Lunch:0,Diner:0,Tussendoor:0},V={breakfast:"Ontbijt",lunch:"Lunch",dinner:"Diner",snack:"Tussendoor"};for(let U=0;U<7;U++){const ae=Dy($,U),ie=Ns(ae,"yyyy-MM-dd"),X=await Je.dailyLogs.where("date").equals(ie).first();if(X?.id){const J=await Je.mealEntries.where("dailyLogId").equals(X.id).toArray();for(const xe of J){const de=V[xe.mealType]||"Tussendoor";Z[de]+=xe.points}}}l(Object.entries(Z).filter(([,U])=>U>0).map(([U,ae])=>({name:U,value:ae})));const W=await Je.weightEntries.orderBy("date").reverse().limit(30).toArray();m(W.reverse().map(U=>({date:Ns(new Date(U.date),"d MMM",{locale:_h}),gewicht:U.weightKg})))};if(!t)return null;const T=(()=>{const L=W4(new Date,p),z=fd(L,{weekStartsOn:1}),$=Dy(z,6);return`${Ns(z,"d MMM",{locale:_h})} - ${Ns($,"d MMM",{locale:_h})}`})(),N=e.reduce((L,z)=>L+z.punten,0),j=e.filter(L=>L.punten>0).length>0?Math.round(N/e.filter(L=>L.punten>0).length):0,M=["#FF9500","#34C759","#007AFF","#FF3B30"];return O.jsx(Yc,{title:"Statistieken",children:O.jsxs("div",{className:"flex flex-col gap-4 pb-4",children:[t&&O.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[O.jsxs(An,{className:"p-3 text-center",children:[O.jsx(uI,{size:20,className:"text-primary mx-auto mb-1"}),O.jsx("div",{className:"text-[20px] font-bold",children:t.currentWeightKg}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"kg nu"})]}),O.jsxs(An,{className:"p-3 text-center",children:[O.jsx(qL,{size:20,className:"text-ios-blue mx-auto mb-1"}),O.jsx("div",{className:"text-[20px] font-bold",children:t.goalWeightKg}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"kg doel"})]}),O.jsxs(An,{className:"p-3 text-center",children:[O.jsx(cI,{size:20,className:"text-ios-warning mx-auto mb-1"}),O.jsx("div",{className:"text-[20px] font-bold",children:t.currentWeightKg-t.goalWeightKg>0?(t.currentWeightKg-t.goalWeightKg).toFixed(1):"0"}),O.jsx("div",{className:"text-[11px] text-ios-secondary",children:"kg te gaan"})]})]}),O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("button",{onClick:()=>b(L=>L+1),className:"px-3 py-1.5 rounded-lg bg-white text-[13px] font-medium border-none cursor-pointer shadow-sm active:bg-gray-100",children:" Vorige"}),O.jsx("span",{className:"text-[15px] font-semibold",children:T}),O.jsx("button",{onClick:()=>b(L=>Math.max(0,L-1)),disabled:p===0,className:`px-3 py-1.5 rounded-lg bg-white text-[13px] font-medium border-none cursor-pointer shadow-sm ${p===0?"opacity-30":"active:bg-gray-100"}`,children:"Volgende "})]}),O.jsxs(An,{children:[O.jsx(Eo,{title:"Punten per dag"}),O.jsx("div",{className:"px-2 pb-4",children:O.jsx(ry,{width:"100%",height:200,children:O.jsxs(s5,{data:e,children:[O.jsx(Vy,{strokeDasharray:"3 3",stroke:"#E5E5EA"}),O.jsx(zy,{dataKey:"dag",tick:{fontSize:12,fill:"#8E8E93"},tickLine:!1}),O.jsx(Uy,{tick:{fontSize:11,fill:"#8E8E93"},tickLine:!1}),O.jsx(vE,{}),O.jsx(xS,{y:t.dailyPointsBudget,stroke:"#FF3B30",strokeDasharray:"5 5",label:{value:"Budget",fontSize:11,fill:"#FF3B30"}}),O.jsx(_S,{dataKey:"punten",fill:"#34C759",radius:[4,4,0,0]})]})})})]}),O.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[O.jsxs(An,{className:"p-3 text-center",children:[O.jsx("div",{className:"text-[22px] font-bold text-primary",children:N}),O.jsx("div",{className:"text-[12px] text-ios-secondary",children:"Totaal deze week"})]}),O.jsxs(An,{className:"p-3 text-center",children:[O.jsx("div",{className:"text-[22px] font-bold text-ios-blue",children:j}),O.jsx("div",{className:"text-[12px] text-ios-secondary",children:"Gemiddeld per dag"})]})]}),O.jsxs(An,{children:[O.jsx(Eo,{title:"Water per dag"}),O.jsx("div",{className:"px-2 pb-4",children:O.jsx(ry,{width:"100%",height:200,children:O.jsxs(s5,{data:r,children:[O.jsx(Vy,{strokeDasharray:"3 3",stroke:"#E5E5EA"}),O.jsx(zy,{dataKey:"dag",tick:{fontSize:12,fill:"#8E8E93"},tickLine:!1}),O.jsx(Uy,{tick:{fontSize:11,fill:"#8E8E93"},tickLine:!1,tickFormatter:L=>`${L/1e3}L`}),O.jsx(vE,{formatter:L=>[`${L} ml`,"Water"]}),O.jsx(xS,{y:t.waterGoalMl||2e3,stroke:"#3B82F6",strokeDasharray:"5 5",label:{value:"Doel",fontSize:11,fill:"#3B82F6"}}),O.jsx(_S,{dataKey:"water",fill:"#3B82F6",radius:[4,4,0,0]})]})})})]}),a.length>0&&O.jsxs(An,{children:[O.jsx(Eo,{title:"Verdeling per maaltijd"}),O.jsxs("div",{className:"flex items-center px-4 pb-4",children:[O.jsx("div",{className:"w-32 h-32",children:O.jsx(ry,{width:"100%",height:"100%",children:O.jsx(H2e,{children:O.jsx(OU,{data:a,dataKey:"value",cx:"50%",cy:"50%",outerRadius:55,innerRadius:30,children:a.map((L,z)=>O.jsx(B0,{fill:M[z%M.length]},z))})})})}),O.jsx("div",{className:"flex-1 flex flex-col gap-2 ml-4",children:a.map((L,z)=>O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:M[z%M.length]}}),O.jsx("span",{className:"text-[13px] flex-1",children:L.name}),O.jsxs("span",{className:"text-[13px] font-medium",children:[L.value," pt"]})]},L.name))})]})]}),f.length>1&&O.jsxs(An,{children:[O.jsx(Eo,{title:"Gewichtstrend"}),O.jsx("div",{className:"p-4",children:O.jsx(ry,{width:"100%",height:180,children:O.jsxs(R2e,{data:f,children:[O.jsx(Vy,{strokeDasharray:"3 3",stroke:"#E5E5EA"}),O.jsx(zy,{dataKey:"date",tick:{fontSize:11,fill:"#8E8E93"},tickLine:!1}),O.jsx(Uy,{tick:{fontSize:11,fill:"#8E8E93"},tickLine:!1,domain:["dataMin - 1","dataMax + 1"]}),O.jsx(vE,{}),O.jsx(WU,{type:"monotone",dataKey:"gewicht",stroke:"#007AFF",strokeWidth:2.5,dot:{fill:"#007AFF",r:3}})]})})})]})]})})}function W2e(){const t=cd(N=>N.profile),{getTotalPoints:e}=Qx(),[n,r]=D.useState([]),[i,a]=D.useState(""),[l,f]=D.useState(!1),[m,p]=D.useState(null),b=D.useRef(null);D.useEffect(()=>{Zx().then(N=>p(!!N?.apiKey))},[]),D.useEffect(()=>{b.current?.scrollIntoView({behavior:"smooth"})},[n]);const _=()=>{const N=e(),j=t?.dailyPointsBudget??30,M=j-N;return`Je bent een vriendelijke Nederlandse voedingsassistent voor de app BodyBalance.
De gebruiker volgt een puntensysteem vergelijkbaar met Weight Watchers.

Huidige status:
- Dagbudget: ${j} punten
- Vandaag gebruikt: ${N} punten
- Resterend: ${M} punten

Puntenformule: (cal  0.03) + (verz.vet  0.28) + (suiker  0.12) - (eiwit  0.10) - (vezels  0.10) - (onverz.vet  0.05), minimum 0.

Regels:
- Antwoord altijd in het Nederlands
- Geef korte, praktische antwoorden
- Bij vragen over punten: bereken met de formule hierboven
- Bij suggesties: houd rekening met resterende punten
- Gebruik geen emojis tenzij de gebruiker ze gebruikt`},T=async()=>{if(!i.trim()||l)return;const N={role:"user",content:i.trim()},j=[...n,N];r(j),a(""),f(!0);try{const M=await lB(j.map(L=>({role:L.role,content:L.content})),_());r([...j,{role:"assistant",content:M}])}catch(M){const L=M instanceof Error?M.message:"Onbekende fout";r([...j,{role:"assistant",content:`Fout: ${L}`}])}finally{f(!1)}};return m===!1?O.jsx(Yc,{title:"AI Assistent",children:O.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-6",children:[O.jsx("div",{className:"w-20 h-20 rounded-full bg-ios-warning/10 flex items-center justify-center mb-4",children:O.jsx(yv,{size:40,className:"text-ios-warning"})}),O.jsx("h3",{className:"text-[17px] font-semibold mb-2 text-center",children:"API-sleutel vereist"}),O.jsxs("p",{className:"text-[14px] text-ios-secondary text-center leading-relaxed",children:["Om de AI assistent te gebruiken heb je een Anthropic API-sleutel nodig. Ga naar ",O.jsx("strong",{children:"Profiel  AI Instellingen"})," om je sleutel in te voeren."]})]})}):O.jsx(Yc,{title:"AI Assistent",children:O.jsxs("div",{className:"flex flex-col",style:{minHeight:"calc(100vh - 180px)"},children:[O.jsxs("div",{className:"flex-1 flex flex-col gap-3 pb-4",children:[n.length===0&&O.jsxs("div",{className:"text-center py-8",children:[O.jsx(Ry,{size:48,className:"text-ios-separator mx-auto mb-3"}),O.jsx("p",{className:"text-[17px] text-ios-secondary font-medium",children:"Hoi! Ik ben je voedingsassistent"}),O.jsx("p",{className:"text-[13px] text-ios-secondary mt-2 max-w-xs mx-auto leading-relaxed",children:"Stel me vragen over punten, voedingswaarden of vraag om maaltijdsuggesties."}),O.jsx("div",{className:"flex flex-col gap-2 mt-5 max-w-xs mx-auto",children:["Hoeveel punten heeft een broodje kaas?","Wat kan ik eten met 5 punten?","Geef me een gezond lunch-idee"].map(N=>O.jsx("button",{onClick:()=>{a(N)},className:"text-left px-4 py-2.5 bg-white rounded-xl text-[14px] text-primary border border-ios-separator cursor-pointer active:bg-gray-50",children:N},N))})]}),n.map((N,j)=>O.jsxs("div",{className:`flex gap-2.5 ${N.role==="user"?"justify-end":"justify-start"}`,children:[N.role==="assistant"&&O.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0 mt-0.5",children:O.jsx(Ry,{size:16,className:"text-primary"})}),O.jsx(An,{className:`max-w-[80%] px-4 py-3 ${N.role==="user"?"bg-primary text-white":""}`,children:O.jsx("p",{className:`text-[15px] leading-relaxed whitespace-pre-wrap ${N.role==="user"?"text-white":""}`,children:N.content})}),N.role==="user"&&O.jsx("div",{className:"w-8 h-8 rounded-full bg-ios-bg flex items-center justify-center flex-shrink-0 mt-0.5",children:O.jsx(HL,{size:16,className:"text-ios-secondary"})})]},j)),l&&O.jsxs("div",{className:"flex gap-2.5",children:[O.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:O.jsx(Ry,{size:16,className:"text-primary"})}),O.jsx(An,{className:"px-4 py-3",children:O.jsx(Bc,{size:18,className:"text-ios-secondary animate-spin"})})]}),O.jsx("div",{ref:b})]}),O.jsx("div",{className:"sticky bottom-[70px] bg-ios-bg pt-2 pb-2",children:O.jsxs("div",{className:"flex gap-2",children:[O.jsx("input",{type:"text",placeholder:"Stel een vraag...",value:i,onChange:N=>a(N.target.value),onKeyDown:N=>N.key==="Enter"&&T(),className:"flex-1 bg-white rounded-xl px-4 py-3 text-[16px] border border-ios-separator"}),O.jsx("button",{onClick:T,disabled:!i.trim()||l,className:`w-11 h-11 rounded-full flex items-center justify-center border-none cursor-pointer transition-colors ${i.trim()&&!l?"bg-primary text-white":"bg-ios-bg text-ios-separator"}`,children:O.jsx(yre,{size:18})})]})})]})})}const gq=["bodybalanceapp@gmail.com","marcelvandernet@gmail.com"];function pq(){const t=Go.currentUser?.email;return t?gq.includes(t):!1}function $2e(){const t=ef(),[e,n]=D.useState([]),[r,i]=D.useState([]),[a,l]=D.useState(""),[f,m]=D.useState(!0),[p,b]=D.useState(null),[_,T]=D.useState(null),[N,j]=D.useState(null);D.useEffect(()=>{if(!pq()){t("/");return}M()},[t]);const M=async()=>{m(!0),await Promise.all([L(),z()]),m(!1)},L=async()=>{try{const U=await Lc(jc(Ti,"inviteCodes")),ae=[];U.forEach(ie=>{const X=ie.data();ae.push({code:ie.id,label:X.label||"",createdAt:X.createdAt||"",usedBy:X.usedBy||null,usedAt:X.usedAt||null,usedEmail:X.usedEmail||""})}),ae.sort((ie,X)=>(X.createdAt||"").localeCompare(ie.createdAt||"")),n(ae)}catch(U){console.warn("[Admin] Load codes failed:",U)}},z=async()=>{try{const U=await Lc(jc(Ti,"users")),ae=[];for(const ie of U.docs){const X=ie.id;try{const J=await Lc(jc(Ti,"users",X,"profile"));for(const xe of J.docs){const de=xe.data();ae.push({userId:X,email:de.email||"",name:de.name||"Onbekend",disabled:de.disabled===!0,lastLogin:de.updatedAt||""})}}catch{}}i(ae)}catch(U){console.warn("[Admin] Load users failed:",U)}},$=()=>{const U="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let ae="";for(let ie=0;ie<8;ie++)ae+=U[Math.floor(Math.random()*U.length)];return ae},K=async()=>{const U=$();try{await Cd(ds(Ti,"inviteCodes",U),{label:a.trim()||"",createdAt:new Date().toISOString(),usedBy:null,usedAt:null,usedEmail:null}),l(""),await L()}catch(ae){console.warn("[Admin] Create code failed:",ae)}},ee=async U=>{try{await navigator.clipboard.writeText(U),b(U),setTimeout(()=>b(null),2e3)}catch{b(U),setTimeout(()=>b(null),2e3)}},ue=async U=>{try{const ae=ds(Ti,"users",U.userId,"profile","data");await WT(ae,{disabled:!U.disabled}),i(r.map(ie=>ie.userId===U.userId?{...ie,disabled:!ie.disabled}:ie))}catch(ae){console.warn("[Admin] Toggle user failed:",ae)}},Z=async U=>{if(confirm(`Weet je zeker dat je alle data van ${U.email} wilt wissen? De gebruiker moet opnieuw door onboarding.`))try{T(U.userId),await Nte(U.userId),T(null),j(U.userId),setTimeout(()=>j(null),3e3),await z()}catch(ae){console.warn("[Admin] Reset user failed:",ae),T(null)}},V=e.filter(U=>!U.usedBy),W=e.filter(U=>U.usedBy);return O.jsx(Yc,{title:"Admin",children:O.jsxs("div",{className:"flex flex-col gap-4",children:[O.jsxs("button",{onClick:()=>t("/profile"),className:"flex items-center gap-2 text-primary text-[15px] font-medium bg-transparent border-none cursor-pointer p-0",children:[O.jsx(tne,{size:18}),"Terug naar profiel"]}),f?O.jsx("div",{className:"flex justify-center py-12",children:O.jsx("div",{className:"w-8 h-8 rounded-full border-3 border-primary border-t-transparent animate-spin"})}):O.jsxs(O.Fragment,{children:[O.jsxs(An,{children:[O.jsxs("div",{className:"px-4 py-3 border-b border-ios-separator flex items-center gap-2",children:[O.jsx($ne,{size:18,className:"text-primary"}),O.jsx("span",{className:"text-[15px] font-semibold",children:"Invite Codes"})]}),O.jsxs("div",{className:"p-4",children:[O.jsxs("div",{className:"flex gap-2 mb-4",children:[O.jsx("input",{type:"text",value:a,onChange:U=>l(U.target.value),placeholder:"Label (bijv. naam)",className:"flex-1 bg-ios-bg rounded-xl px-4 py-2.5 text-[15px] border border-ios-separator"}),O.jsxs(to,{onClick:K,className:"flex items-center gap-1.5",children:[O.jsx(zf,{size:16}),"Maak code"]})]}),V.length>0&&O.jsxs("div",{className:"mb-3",children:[O.jsxs("p",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide mb-2",children:["Beschikbaar (",V.length,")"]}),V.map(U=>O.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-ios-separator last:border-b-0",children:[O.jsxs("div",{children:[O.jsx("span",{className:"text-[17px] font-mono font-bold tracking-wider",children:U.code}),U.label&&O.jsx("span",{className:"text-[13px] text-ios-secondary ml-2",children:U.label})]}),O.jsxs("button",{onClick:()=>ee(U.code),className:"flex items-center gap-1 text-primary text-[13px] font-medium bg-transparent border-none cursor-pointer p-1",children:[p===U.code?O.jsx(LL,{size:14}):O.jsx(FL,{size:14}),p===U.code?"Gekopieerd":"Kopieer"]})]},U.code))]}),W.length>0&&O.jsxs("div",{children:[O.jsxs("p",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide mb-2",children:["Gebruikt (",W.length,")"]}),W.map(U=>O.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-ios-separator last:border-b-0 opacity-50",children:[O.jsxs("div",{children:[O.jsx("span",{className:"text-[15px] font-mono line-through",children:U.code}),U.usedEmail&&O.jsx("span",{className:"text-[13px] text-ios-secondary ml-2",children:U.usedEmail}),!U.usedEmail&&U.label&&O.jsx("span",{className:"text-[13px] text-ios-secondary ml-2",children:U.label})]}),O.jsx("span",{className:"text-[12px] text-ios-secondary",children:U.usedAt?new Date(U.usedAt).toLocaleDateString("nl-NL"):""})]},U.code))]}),e.length===0&&O.jsx("p",{className:"text-[15px] text-ios-secondary text-center py-4",children:"Nog geen codes aangemaakt"})]})]}),O.jsxs(An,{children:[O.jsxs("div",{className:"px-4 py-3 border-b border-ios-separator flex items-center gap-2",children:[O.jsx(Fre,{size:18,className:"text-primary"}),O.jsxs("span",{className:"text-[15px] font-semibold",children:["Gebruikers (",r.length,")"]})]}),r.length>0?O.jsx("div",{children:r.map((U,ae)=>O.jsxs("div",{className:`flex items-center justify-between px-4 py-3 ${ae<r.length-1?"border-b border-ios-separator":""}`,children:[O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsxs("div",{className:"text-[15px] font-medium truncate",children:[U.name,U.disabled&&O.jsx("span",{className:"text-ios-destructive ml-1",children:"(geblokkeerd)"})]}),O.jsx("div",{className:"text-[13px] text-ios-secondary truncate",children:U.email})]}),O.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[N===U.userId?O.jsx("span",{className:"text-[13px] text-primary font-medium",children:"Data gewist"}):O.jsxs("button",{onClick:()=>Z(U),disabled:_===U.userId,className:"flex items-center gap-1 px-2.5 py-1.5 rounded-lg text-[13px] font-medium border-none cursor-pointer bg-ios-warning/10 text-ios-warning",children:[O.jsx(UL,{size:14,className:_===U.userId?"animate-spin":""}),"Reset"]}),!gq.includes(U.email)&&O.jsx("button",{onClick:()=>ue(U),className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-[13px] font-medium border-none cursor-pointer ${U.disabled?"bg-primary/10 text-primary":"bg-ios-destructive/10 text-ios-destructive"}`,children:U.disabled?O.jsxs(O.Fragment,{children:[O.jsx(Ine,{size:14})," Activeer"]}):O.jsxs(O.Fragment,{children:[O.jsx(rne,{size:14})," Blokkeer"]})})]})]},U.userId))}):O.jsx("p",{className:"text-[15px] text-ios-secondary text-center py-8",children:"Nog geen gebruikers"})]})]})]})})}function Y2e(){const t=ef(),{profile:e,saveProfile:n,updateWeight:r}=cd(),[i,a]=D.useState(""),[l,f]=D.useState(!1),[m,p]=D.useState(""),[b,_]=D.useState("male"),[T,N]=D.useState(""),[j,M]=D.useState(0),[L,z]=D.useState(0),[$,K]=D.useState("light"),[ee,ue]=D.useState("lose"),[Z,V]=D.useState(""),[W,U]=D.useState(""),[ae,ie]=D.useState(!1),[X,J]=D.useState(()=>localStorage.getItem("bb_meal_reminder")==="true"),[xe,de]=D.useState(()=>localStorage.getItem("bb_water_reminder")==="true"),[ye,_e]=D.useState("default"),[qe,ze]=D.useState(()=>localStorage.getItem("bb_theme")||"auto"),[et,me]=D.useState(null),[Se,Xe]=D.useState(null),[Ve,pt]=D.useState(null);D.useEffect(()=>{yt(),Ne()},[]),D.useEffect(()=>{e&&(p(e.name),_(e.gender),N(e.dateOfBirth),M(e.heightCm),z(e.goalWeightKg),K(e.activityLevel),ue(e.goal))},[e]);const $e=async()=>{const st=parseFloat(i);if(isNaN(st)||st<30||st>300)return;const zt=Ns(new Date,"yyyy-MM-dd"),Et=await Je.weightEntries.where("date").equals(zt).first();Et?.id?await Je.weightEntries.update(Et.id,{weightKg:st}):await Je.weightEntries.add({date:zt,weightKg:st});const Zt=await r(st);a(""),Zt&&(Zt.goalReached?(me({message:`Gefeliciteerd! Je hebt je streefgewicht bereikt! Je budget is verhoogd naar ${Zt.newDailyBudget} punten per dag.`,type:"success"}),setTimeout(()=>me(null),8e3)):Zt.newDailyBudget!==Zt.oldDailyBudget&&(me({message:`Je budget is aangepast naar ${Zt.newDailyBudget} punten per dag (was ${Zt.oldDailyBudget}).`,type:"info"}),setTimeout(()=>me(null),6e3)));const at=sm.getState().user?.uid;at&&OL(at,{date:zt,weightKg:st}).catch(()=>{})},yt=async()=>{const st=await Zx();st&&(V(st.apiKey),U(st.apiUrl||""))},ut=async()=>{await Ese(Z,W||void 0),ie(!0),setTimeout(()=>ie(!1),2e3)},Ne=()=>{"Notification"in window&&_e(Notification.permission)},Ye=async()=>{if(!("Notification"in window))return!1;if(Notification.permission==="granted")return!0;if(Notification.permission==="default"){const st=await Notification.requestPermission();if(_e(st),st==="granted")return new Notification("BodyBalance",{body:"Notificaties zijn ingeschakeld!",icon:"/icons/icon-192.png"}),!0}return!1},_t=async()=>{if(X){J(!1),localStorage.setItem("bb_meal_reminder","false");return}await Ye()&&(J(!0),localStorage.setItem("bb_meal_reminder","true"))},Fe=async()=>{if(xe){de(!1),localStorage.setItem("bb_water_reminder","false");return}await Ye()&&(de(!0),localStorage.setItem("bb_water_reminder","true"))},Rt=st=>{ze(st),localStorage.setItem("bb_theme",st),window.dispatchEvent(new Event("themechange"))},Wt=async()=>{try{Xe("Exporteren...");const st={version:2,exportDate:new Date().toISOString(),userProfiles:(await Je.userProfiles.toArray()).map(at=>{const{...na}=at;return delete na.anthropicApiKey,delete na.anthropicApiUrl,na}),foodItems:await Je.foodItems.toArray(),mealEntries:await Je.mealEntries.toArray(),dailyLogs:await Je.dailyLogs.toArray(),weightEntries:await Je.weightEntries.toArray()},zt=new Blob([JSON.stringify(st,null,2)],{type:"application/json"}),Et=URL.createObjectURL(zt),Zt=document.createElement("a");Zt.href=Et,Zt.download=`bodybalance-backup-${Ns(new Date,"yyyy-MM-dd")}.json`,Zt.click(),URL.revokeObjectURL(Et),Xe("Export gelukt!"),setTimeout(()=>Xe(null),3e3)}catch{Xe("Export mislukt"),setTimeout(()=>Xe(null),3e3)}},mn=()=>{const st=document.createElement("input");st.type="file",st.accept=".json",st.onchange=async zt=>{const Et=zt.target.files?.[0];if(Et)try{pt("Importeren...");const Zt=await Et.text(),at=JSON.parse(Zt);if(!at.version||!at.userProfiles){pt("Ongeldig bestand"),setTimeout(()=>pt(null),3e3);return}await Je.transaction("rw",[Je.userProfiles,Je.foodItems,Je.mealEntries,Je.dailyLogs,Je.weightEntries],async()=>{await Je.foodItems.clear(),await Je.mealEntries.clear(),await Je.dailyLogs.clear(),await Je.weightEntries.clear(),await Je.userProfiles.clear(),at.userProfiles?.length&&await Je.userProfiles.bulkAdd(at.userProfiles),at.foodItems?.length&&await Je.foodItems.bulkAdd(at.foodItems),at.mealEntries?.length&&await Je.mealEntries.bulkAdd(at.mealEntries),at.dailyLogs?.length&&await Je.dailyLogs.bulkAdd(at.dailyLogs),at.weightEntries?.length&&await Je.weightEntries.bulkAdd(at.weightEntries)});const na=Go.currentUser?.uid;na&&PL(na).catch(()=>{}),pt("Import gelukt! Pagina herlaadt..."),setTimeout(()=>window.location.reload(),500)}catch{pt("Import mislukt - ongeldig bestand"),setTimeout(()=>pt(null),3e3)}},st.click()},Wn=async()=>{if(!e)return;const st=oI(e.currentWeightKg,j,T,b,$,ee);await n({name:m,gender:b,dateOfBirth:T,heightCm:j,currentWeightKg:e.currentWeightKg,goalWeightKg:L,activityLevel:$,goal:ee,dailyPointsBudget:st.dailyPoints,weeklyPointsBudget:st.weeklyPoints,onboardingComplete:!0}),f(!1)};return e?O.jsx(Yc,{title:"Profiel",children:O.jsxs("div",{className:"flex flex-col gap-4 pb-4",children:[O.jsxs(An,{children:[O.jsx(Eo,{title:"Gewicht loggen"}),O.jsxs("div",{className:"p-4 flex gap-3",children:[O.jsxs("div",{className:"relative flex-1",children:[O.jsx("input",{type:"number",placeholder:String(e.currentWeightKg),value:i,onChange:st=>a(st.target.value),step:"0.1",min:"30",max:"300",className:"bg-ios-bg rounded-xl px-4 py-3 text-[17px] w-full"}),O.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-ios-secondary text-[15px]",children:"kg"})]}),O.jsx(to,{onClick:$e,disabled:!i,children:"Log"})]})]}),et&&O.jsx(An,{className:et.type==="success"?"bg-primary/10 border border-primary/20":"bg-ios-blue/10 border border-ios-blue/20",children:O.jsxs("div",{className:"px-4 py-3 flex items-start gap-3",children:[et.type==="success"?O.jsx(GL,{size:20,className:"text-primary flex-shrink-0 mt-0.5"}):O.jsx(cI,{size:20,className:"text-ios-blue flex-shrink-0 mt-0.5"}),O.jsx("p",{className:`text-[14px] font-medium ${et.type==="success"?"text-primary":"text-ios-blue"}`,children:et.message})]})}),O.jsxs(An,{children:[O.jsx(Eo,{title:"Puntenbudget"}),O.jsxs("div",{className:"px-4 py-3 flex justify-between items-center border-b border-ios-separator",children:[O.jsx("span",{className:"text-[15px]",children:"Dagelijks budget"}),O.jsxs("span",{className:"text-[17px] font-bold text-primary",children:[e.dailyPointsBudget," pt"]})]}),O.jsxs("div",{className:"px-4 py-3 flex justify-between items-center",children:[O.jsx("span",{className:"text-[15px]",children:"Weekpunten"}),O.jsxs("span",{className:"text-[17px] font-bold text-ios-blue",children:[e.weeklyPointsBudget," pt"]})]})]}),O.jsxs(An,{children:[O.jsx(Eo,{title:"Gegevens",rightContent:O.jsx("button",{onClick:()=>f(!l),className:"text-[15px] text-primary font-medium border-none bg-transparent cursor-pointer",children:l?"Annuleer":"Wijzig"})}),l?O.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[O.jsx(Tc,{label:"Naam",value:m,onChange:st=>p(st.currentTarget.value)}),O.jsx(kh,{label:"Geslacht",value:b,onChange:st=>_(st.currentTarget.value),options:[{value:"male",label:"Man"},{value:"female",label:"Vrouw"}]}),O.jsx(Tc,{label:"Lengte",type:"number",suffix:"cm",value:j,onChange:st=>M(Number(st.currentTarget.value))}),O.jsx(Tc,{label:"Streefgewicht",type:"number",suffix:"kg",value:L,onChange:st=>z(Number(st.currentTarget.value))}),O.jsx(kh,{label:"Activiteitsniveau",value:$,onChange:st=>K(st.currentTarget.value),options:Object.entries(AA).map(([st,zt])=>({value:st,label:zt}))}),O.jsx(kh,{label:"Doel",value:ee,onChange:st=>ue(st.currentTarget.value),options:Object.entries(SA).map(([st,zt])=>({value:st,label:zt}))}),O.jsx(to,{fullWidth:!0,onClick:Wn,className:"mt-2",children:"Opslaan"})]}):O.jsx("div",{children:[["Naam",e.name],["Geslacht",e.gender==="male"?"Man":"Vrouw"],["Lengte",`${e.heightCm} cm`],["Activiteit",AA[e.activityLevel]],["Doel",SA[e.goal]]].map(([st,zt],Et,Zt)=>O.jsxs("div",{className:`px-4 py-3 flex justify-between ${Et<Zt.length-1?"border-b border-ios-separator":""}`,children:[O.jsx("span",{className:"text-[15px] text-ios-secondary",children:st}),O.jsx("span",{className:"text-[15px]",children:zt})]},st))})]}),O.jsxs("button",{onClick:()=>t("/ai-chat"),className:"flex items-center gap-3 w-full p-4 bg-white rounded-2xl shadow-sm border-none cursor-pointer active:bg-gray-50 text-left",children:[O.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:O.jsx(Ry,{size:20,className:"text-primary"})}),O.jsxs("div",{className:"flex-1",children:[O.jsx("div",{className:"text-[15px] font-semibold",children:"AI Voedingsassistent"}),O.jsx("div",{className:"text-[13px] text-ios-secondary",children:"Stel vragen over punten en voeding"})]})]}),O.jsxs(An,{children:[O.jsx(Eo,{title:"AI Instellingen"}),O.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"Anthropic API-sleutel"}),O.jsxs("div",{className:"relative",children:[O.jsx(Xne,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-ios-secondary"}),O.jsx("input",{type:"password",placeholder:"sk-ant-...",value:Z,onChange:st=>V(st.target.value),className:"bg-ios-bg rounded-xl pl-9 pr-4 py-3 text-[15px] w-full"})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"text-[13px] font-medium text-ios-secondary uppercase tracking-wide block mb-1 px-1",children:"API URL (optioneel)"}),O.jsx("input",{type:"url",placeholder:"https://api.anthropic.com/v1/messages",value:W,onChange:st=>U(st.target.value),className:"bg-ios-bg rounded-xl px-4 py-3 text-[15px] w-full"})]}),O.jsx(to,{fullWidth:!0,onClick:ut,disabled:!Z.trim(),children:ae?O.jsxs("span",{className:"flex items-center justify-center gap-2",children:[O.jsx(LL,{size:16})," Opgeslagen"]}):"Opslaan"}),O.jsx("p",{className:"text-[12px] text-ios-secondary text-center",children:"Nodig voor AI foto-herkenning en de voedingsassistent"})]})]}),O.jsxs(An,{children:[O.jsx(Eo,{title:"Waterdoel"}),O.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx(up,{size:20,className:"text-blue-500"}),O.jsx("span",{className:"text-[15px]",children:"Dagelijks doel"})]}),O.jsx("div",{className:"flex items-center gap-2",children:[1500,2e3,2500,3e3].map(st=>O.jsxs("button",{onClick:async()=>{e?.id&&(await Je.userProfiles.update(e.id,{waterGoalMl:st,updatedAt:new Date}),cd.setState({profile:{...e,waterGoalMl:st}}))},className:`px-2.5 py-1 rounded-lg text-[13px] font-medium border-none cursor-pointer transition-colors ${(e?.waterGoalMl||2e3)===st?"bg-blue-500 text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:[st/1e3,"L"]},st))})]})]}),O.jsxs(An,{children:[O.jsx(Eo,{title:"Weergave"}),O.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[qe==="dark"?O.jsx(lre,{size:20,className:"text-ios-blue"}):qe==="light"?O.jsx(Sre,{size:20,className:"text-ios-warning"}):O.jsx(sre,{size:20,className:"text-ios-secondary"}),O.jsx("span",{className:"text-[15px]",children:"Thema"})]}),O.jsx("div",{className:"flex items-center gap-1",children:[{key:"auto",label:"Auto"},{key:"light",label:"Licht"},{key:"dark",label:"Donker"}].map(({key:st,label:zt})=>O.jsx("button",{onClick:()=>Rt(st),className:`px-3 py-1 rounded-lg text-[13px] font-medium border-none cursor-pointer transition-colors ${qe===st?"bg-ios-blue text-white":"bg-ios-bg text-ios-text active:bg-gray-200"}`,children:zt},st))})]})]}),O.jsxs(An,{children:[O.jsx(Eo,{title:"Notificaties"}),O.jsxs("div",{className:"px-4 py-3 flex items-center justify-between border-b border-ios-separator",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[X?O.jsx(one,{size:20,className:"text-primary"}):O.jsx(ane,{size:20,className:"text-ios-secondary"}),O.jsx("span",{className:"text-[15px]",children:"Maaltijd herinnering"})]}),O.jsx("button",{onClick:_t,className:`relative w-[51px] h-[31px] rounded-full border-none cursor-pointer transition-colors ${X?"bg-primary":"bg-ios-separator"}`,children:O.jsx("div",{className:`absolute top-0.5 w-[27px] h-[27px] rounded-full bg-white shadow-sm transition-transform ${X?"translate-x-[22px]":"translate-x-0.5"}`})})]}),O.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[xe?O.jsx(up,{size:20,className:"text-blue-500"}):O.jsx(up,{size:20,className:"text-ios-secondary"}),O.jsx("span",{className:"text-[15px]",children:"Water herinnering"})]}),O.jsx("button",{onClick:Fe,className:`relative w-[51px] h-[31px] rounded-full border-none cursor-pointer transition-colors ${xe?"bg-blue-500":"bg-ios-separator"}`,children:O.jsx("div",{className:`absolute top-0.5 w-[27px] h-[27px] rounded-full bg-white shadow-sm transition-transform ${xe?"translate-x-[22px]":"translate-x-0.5"}`})})]}),ye==="denied"&&O.jsxs("div",{className:"px-4 pb-3 flex items-start gap-2",children:[O.jsx(yv,{size:14,className:"text-ios-destructive flex-shrink-0 mt-0.5"}),O.jsx("p",{className:"text-[12px] text-ios-destructive",children:"Notificaties zijn geblokkeerd. Ga naar je browserinstellingen om dit te wijzigen."})]})]}),O.jsxs(An,{children:[O.jsx(Eo,{title:"Data beheer"}),O.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[O.jsxs("button",{onClick:Wt,className:"flex items-center justify-center gap-2 py-3 bg-ios-bg rounded-xl text-[15px] font-medium text-ios-text border-none cursor-pointer active:bg-gray-200 transition-colors",children:[O.jsx(Dne,{size:18}),"Data exporteren (JSON)"]}),O.jsxs("button",{onClick:mn,className:"flex items-center justify-center gap-2 py-3 bg-ios-bg rounded-xl text-[15px] font-medium text-ios-text border-none cursor-pointer active:bg-gray-200 transition-colors",children:[O.jsx(jre,{size:18}),"Data importeren"]}),(Se||Ve)&&O.jsx("p",{className:"text-[13px] text-center text-ios-secondary",children:Se||Ve}),O.jsx("p",{className:"text-[12px] text-ios-secondary text-center",children:"Maak een backup van al je data of herstel van een eerdere backup"})]})]}),pq()&&O.jsxs("button",{onClick:()=>t("/admin"),className:"flex items-center gap-3 w-full p-4 bg-white dark:bg-ios-card rounded-2xl shadow-sm border-none cursor-pointer active:bg-gray-50 text-left",children:[O.jsx("div",{className:"w-10 h-10 rounded-full bg-ios-blue/10 flex items-center justify-center",children:O.jsx(wre,{size:20,className:"text-ios-blue"})}),O.jsxs("div",{className:"flex-1",children:[O.jsx("div",{className:"text-[15px] font-semibold",children:"Admin Panel"}),O.jsx("div",{className:"text-[13px] text-ios-secondary",children:"Invite codes en gebruikersbeheer"})]})]}),O.jsxs(to,{variant:"ghost",fullWidth:!0,onClick:()=>sm.getState().logout(),className:"flex items-center justify-center gap-2 text-ios-destructive",children:[O.jsx(VL,{size:18}),"Uitloggen"]})]})}):null}function X2e(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:l}=t;let f,m,p;const b=async(T=!0)=>{await m,p?.()};async function _(){if("serviceWorker"in navigator){if(f=await NS(async()=>{const{Workbox:T}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:T}},[]).then(({Workbox:T})=>new T("/sw.js",{scope:"/",type:"classic"})).catch(T=>{l?.(T)}),!f)return;p=()=>{f?.messageSkipWaiting()};{let T=!1;const N=()=>{T=!0,f?.addEventListener("controlling",j=>{j.isUpdate&&window.location.reload()}),n?.()};f.addEventListener("installed",j=>{typeof j.isUpdate>"u"?typeof j.isExternal<"u"&&j.isExternal?N():!T&&r?.():j.isUpdate||r?.()}),f.addEventListener("waiting",N)}f.register({immediate:e}).then(T=>{a?a("/sw.js",T):i?.(T)}).catch(T=>{l?.(T)})}}return m=_(),b}function Q2e(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:a,onRegisterError:l}=t,[f,m]=D.useState(!1),[p,b]=D.useState(!1),[_]=D.useState(()=>X2e({immediate:e,onOfflineReady(){b(!0),r?.()},onNeedRefresh(){m(!0),n?.()},onRegistered:i,onRegisteredSW:a,onRegisterError:l}));return{needRefresh:[f,m],offlineReady:[p,b],updateServiceWorker:_}}function Z2e(){const{user:t,isAuthLoading:e}=sm(),{profile:n,isLoading:r,loadProfile:i}=cd(),a=D.useRef(!1);return D.useEffect(()=>{if(!t){a.current=!1;return}(async()=>{try{const m=ds(Ti,"users",t.uid,"profile","data"),p=await c0(m);if(p.exists()&&p.data().disabled===!0){sm.getState().logout();return}}catch{}if(t.email)try{const{setDoc:m}=await NS(async()=>{const{setDoc:_}=await Promise.resolve().then(()=>iJ);return{setDoc:_}},void 0),p=ds(Ti,"users",t.uid);await m(p,{email:t.email,lastLogin:new Date().toISOString()},{merge:!0});const b=ds(Ti,"users",t.uid,"profile","data");await m(b,{email:t.email},{merge:!0})}catch{}if(localStorage.getItem("bb_current_uid")!==t.uid&&await Je.transaction("rw",[Je.userProfiles,Je.foodItems,Je.mealEntries,Je.dailyLogs,Je.weightEntries],async()=>{await Je.userProfiles.clear(),await Je.foodItems.clear(),await Je.mealEntries.clear(),await Je.dailyLogs.clear(),await Je.weightEntries.clear()}),localStorage.setItem("bb_current_uid",t.uid),await i(),!a.current){a.current=!0;try{await Pte(t.uid)?await i():PL(t.uid).catch(p=>console.warn("[Sync] Push all failed:",p))}catch(m){console.warn("[Sync] Initial sync failed:",m)}}})()},[t,i]),e?O.jsx("div",{className:"flex items-center justify-center h-full",children:O.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-primary border-t-transparent animate-spin"})}):t?r?O.jsx("div",{className:"flex items-center justify-center h-full",children:O.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-primary border-t-transparent animate-spin"})}):n?.onboardingComplete?O.jsxs(O.Fragment,{children:[O.jsxs(GH,{children:[O.jsx(iu,{path:"/",element:O.jsx(jae,{})}),O.jsx(iu,{path:"/search",element:O.jsx(Kae,{})}),O.jsx(iu,{path:"/scan",element:O.jsx(Sse,{})}),O.jsx(iu,{path:"/statistics",element:O.jsx(K2e,{})}),O.jsx(iu,{path:"/ai-chat",element:O.jsx(W2e,{})}),O.jsx(iu,{path:"/profile",element:O.jsx(Y2e,{})}),O.jsx(iu,{path:"/admin",element:O.jsx($2e,{})}),O.jsx(iu,{path:"*",element:O.jsx(UH,{to:"/",replace:!0})})]}),O.jsx(Gre,{})]}):O.jsx($re,{}):O.jsx(Wre,{})}function J2e(){const[t,e]=D.useState(!navigator.onLine);return D.useEffect(()=>{const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("offline",n),window.addEventListener("online",r),()=>{window.removeEventListener("offline",n),window.removeEventListener("online",r)}},[]),t?O.jsxs("div",{className:"fixed top-0 left-0 right-0 z-[100] bg-ios-warning text-white text-center py-1.5 text-[13px] font-medium flex items-center justify-center gap-1.5",style:{paddingTop:"calc(6px + var(--safe-area-top))"},children:[O.jsx(zre,{size:14}),"Geen internetverbinding  zoeken werkt offline niet"]}):null}function eEe(){const{needRefresh:[t],updateServiceWorker:e}=Q2e();return t?O.jsxs("div",{className:"fixed bottom-[70px] left-4 right-4 z-[100] bg-ios-blue text-white rounded-2xl px-4 py-3 flex items-center justify-between shadow-lg animate-slide-up",style:{marginBottom:"var(--safe-area-bottom)"},children:[O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx(fre,{size:16}),O.jsx("span",{className:"text-[14px] font-medium",children:"Update beschikbaar"})]}),O.jsx("button",{onClick:()=>e(!0),className:"bg-white text-ios-blue px-3 py-1.5 rounded-lg text-[13px] font-semibold border-none cursor-pointer",children:"Bijwerken"})]}):null}const tEe=[{hour:8,minute:0,label:"Tijd om je ontbijt te loggen!"},{hour:12,minute:30,label:"Tijd om je lunch te loggen!"},{hour:18,minute:0,label:"Tijd om je avondeten te loggen!"}],nEe=[8,10,12,14,16,18,20,22];function u5(t,e){"Notification"in window&&Notification.permission==="granted"&&new Notification(t,{body:e,icon:"/icons/icon-192x192.png"})}function rEe(){D.useEffect(()=>{const t=()=>{const n=new Date,r=n.getHours(),i=n.getMinutes(),a=`${n.getFullYear()}-${n.getMonth()}-${n.getDate()}`;if(localStorage.getItem("bb_meal_reminder")==="true"){for(const l of tEe)if(r===l.hour&&i>=l.minute){const f=`bb_notif_meal_${l.hour}_${a}`;localStorage.getItem(f)||(u5("BodyBalance",l.label),localStorage.setItem(f,"1"))}}if(localStorage.getItem("bb_water_reminder")==="true"&&nEe.includes(r)){const l=`bb_notif_water_${r}_${a}`;localStorage.getItem(l)||(u5("BodyBalance","Vergeet niet water te drinken!"),localStorage.setItem(l,"1"))}for(let l=localStorage.length-1;l>=0;l--){const f=localStorage.key(l);f?.startsWith("bb_notif_")&&!f.endsWith(a)&&localStorage.removeItem(f)}};t();const e=setInterval(t,6e4);return()=>clearInterval(e)},[])}function c5(){const t=localStorage.getItem("bb_theme")||"auto",e=window.matchMedia("(prefers-color-scheme: dark)").matches,n=t==="dark"||t==="auto"&&e;document.documentElement.classList.toggle("dark",n)}function iEe(){D.useEffect(()=>{c5();const t=window.matchMedia("(prefers-color-scheme: dark)"),e=()=>c5();return t.addEventListener("change",e),window.addEventListener("storage",e),window.addEventListener("themechange",e),()=>{t.removeEventListener("change",e),window.removeEventListener("storage",e),window.removeEventListener("themechange",e)}},[])}function aEe(){return iEe(),rEe(),O.jsxs(gK,{children:[O.jsx(J2e,{}),O.jsx(eEe,{}),O.jsx(Z2e,{})]})}GG.createRoot(document.getElementById("root")).render(O.jsx(D.StrictMode,{children:O.jsx(aEe,{})}));
